const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/monaco-B7yUwsNa.js","assets/icons-6ehIFjG4.js"])))=>i.map(i=>d[i]);
import{j as e}from"./markdown-V2WUw0-p.js";import{r as l,I as Ae,h as ve,i as Z,j as te,T as ae,k as _,l as le,m as Be,n as ge,o as ne,W as Fe,p as be,X as Ve}from"./icons-6ehIFjG4.js";import{u as Ce,T as $e}from"./textarea-Crv4p6je.js";import{c as A,u as Y,a as G,T as He,b as _e,d as Oe,B as R,e as We,D as K,f as ee,g as se,h as J,i as qe,j as Se,_ as Je,k as Ge,R as $}from"./index-BiHzBawU.js";import{C as ie,a as ce,b as de,c as ue,d as me,e as Qe}from"./card-ELvlEaer.js";import{B as oe}from"./badge-BIL-Wusq.js";import{I as Q}from"./input-D2DsJN7c.js";import{T as xe,a as pe,b as B,c as O}from"./tabs-GZKxVFSj.js";import"./index-B7IBH_WT.js";import"./ui-BfhgkwMs.js";import"./shacl-DEpEwyZ5.js";const X=l.forwardRef(({className:i,...h},s)=>e.jsx("label",{ref:s,className:A("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",i),...h}));X.displayName="Label";const Xe=({selectedProfile:i,onProfileChange:h,disabled:s=!1})=>{const{t:c}=Y(),w=G.profiles,x=(t,d)=>{const T=w[t]?.versions?.[d];return T?c(`profiles.names.${t}.${d}`,{defaultValue:T.name}):t},N=(t,d)=>c(`profiles.branches.${t}`,{defaultValue:d||t}),f=t=>{if(t==="custom")h({profile:"custom",version:"custom",customShacl:[]});else{const d=w[t].defaultVersion,v=w[t].defaultBranch||"main";h({profile:t,version:d,branch:v})}},P=t=>{h({...i,version:t})},C=t=>{h({...i,branch:t})},y=i.profile==="custom"?null:w[i.profile],k=y?.versions[i.version],M=y?Object.keys(y.versions).sort().reverse():[],g=y?.branches||{},z=Object.keys(g).length>0,b=i.branch||y?.defaultBranch||"main",S=i.profile==="custom",I=(t,d,v=!1)=>e.jsxs(R,{variant:"outline",className:"h-12 justify-between gap-2 border-border/70",disabled:s,children:[e.jsxs("span",{className:"flex items-center gap-2 text-sm",children:[v?e.jsx(ve,{className:"h-5 w-5 text-purple-500"}):d?e.jsx("img",{src:d,alt:"",className:"h-6 w-6"}):null,t]}),e.jsx("svg",{className:"h-4 w-4 text-muted-foreground",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:e.jsx("path",{d:"M6 8l4 4 4-4"})})]}),E=(t,d)=>e.jsxs(R,{variant:"outline",className:"h-12 justify-between gap-2 border-border/70",disabled:s||d,children:[e.jsx("span",{className:"text-sm font-medium",children:t}),e.jsx("svg",{className:"h-4 w-4 text-muted-foreground",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:e.jsx("path",{d:"M6 8l4 4 4-4"})})]});return e.jsxs(ie,{className:"border border-border/70 bg-card",children:[e.jsxs(ce,{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx(de,{className:"text-base",children:c("validator.selectProfile")}),e.jsx(ue,{children:c("validator.workspaceSubtitle")})]}),!S&&k&&e.jsx(He,{children:e.jsxs(_e,{children:[e.jsx(Oe,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"icon",asChild:!0,"aria-label":c("validator.profileInfo")??"Profile documentation",children:e.jsx("a",{href:k.url,target:"_blank",rel:"noreferrer",className:"text-muted-foreground",children:e.jsx(Ae,{className:"h-5 w-5"})})})}),e.jsx(We,{children:c("validator.profileInfo")})]})})]}),e.jsxs(me,{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(X,{children:c("validator.selectProfile")}),e.jsxs(K,{modal:!1,children:[e.jsx(ee,{asChild:!0,children:S?I(c("profiles.custom.name"),void 0,!0):I(x(i.profile,i.version),k?.icon)}),e.jsxs(se,{className:"min-w-[260px]",children:[Object.keys(w).map(t=>{const d=w[t],v=d.versions[d.defaultVersion];return e.jsxs(J,{onSelect:T=>{T.preventDefault(),f(t)},className:"flex items-center gap-3",children:[v.icon&&e.jsx("img",{src:v.icon,alt:"",className:"h-5 w-5"}),e.jsx("span",{children:x(t,d.defaultVersion)})]},t)}),e.jsx(qe,{}),e.jsxs(J,{onSelect:t=>{t.preventDefault(),f("custom")},className:"flex items-center gap-3",children:[e.jsx(ve,{className:"h-5 w-5 text-purple-500"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:c("profiles.custom.name")}),e.jsx("span",{className:"text-xs text-muted-foreground",children:c("profiles.custom.description")})]})]})]})]})]}),!S&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(X,{children:c("validator.version")}),e.jsxs(K,{modal:!1,children:[e.jsx(ee,{asChild:!0,children:E(i.version,M.length<=1)}),e.jsx(se,{children:M.map(t=>e.jsxs(J,{onSelect:d=>{d.preventDefault(),P(t)},className:"flex items-center justify-between",children:[e.jsx("span",{children:t}),i.version===t&&e.jsx(Z,{className:"h-4 w-4 text-primary","aria-hidden":"true"})]},t))})]})]}),z&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(X,{children:c("validator.branch")}),e.jsxs(K,{modal:!1,children:[e.jsx(ee,{asChild:!0,children:E(N(b,g[b]),!1)}),e.jsx(se,{children:Object.entries(g).map(([t,d])=>e.jsxs(J,{onSelect:v=>{v.preventDefault(),C(t)},className:"flex items-center justify-between",children:[e.jsx("span",{children:N(t,d)}),b===t&&e.jsx(Z,{className:"h-4 w-4 text-primary","aria-hidden":"true"})]},t))})]})]})]})]}),e.jsxs(Qe,{className:"flex flex-wrap items-center justify-between gap-4 border-t border-border/60 bg-muted/30 px-6 py-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(oe,{variant:"success",className:"uppercase tracking-tight",children:c("validator.currentProfile")}),e.jsx("span",{className:"text-xs text-muted-foreground/80",children:c("validator.profileReadyHint")})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-muted-foreground",children:[e.jsx(Z,{className:"h-4 w-4 text-emerald-500","aria-hidden":"true"}),e.jsxs("span",{className:"font-medium text-foreground",children:[c("validator.validatingAgainst"),": ",e.jsx("span",{className:"text-muted-foreground",children:S?c("profiles.custom.name"):x(i.profile,i.version)})]})]})]})]})},Ye=({shaclFiles:i,onChange:h})=>{const{t:s}=Y(),[c,w]=l.useState("paste"),[x,N]=l.useState(""),[f,P]=l.useState(""),[C,y]=l.useState(""),[k,M]=l.useState(""),[g,z]=l.useState(null),[b,S]=l.useState(!1),I=()=>`shacl-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,E=l.useCallback(a=>{h([...i,a])},[i,h]),t=l.useCallback(a=>{h(i.filter(D=>D.id!==a))},[i,h]),d=()=>{if(!x.trim())return;const a={id:I(),name:f.trim()||`Pasted SHACL ${i.length+1}`,content:x,source:"paste"};E(a),N(""),P("")},v=async()=>{if(C.trim()){S(!0),z(null);try{const a=await fetch(C);if(!a.ok)throw new Error(`HTTP ${a.status}`);const D=await a.text(),V=k.trim()||C.split("/").pop()||`URL SHACL ${i.length+1}`,H={id:I(),name:V,content:D,source:"url",url:C};E(H),y(""),M("")}catch(a){z(s("validator.urlError")),console.error("Failed to load SHACL from URL:",a)}finally{S(!1)}}},T=l.useCallback(async a=>{for(const D of a)try{const V=await D.text(),H={id:I(),name:D.name,content:V,source:"upload"};E(H)}catch(V){console.error(`Failed to read file ${D.name}:`,V)}},[E]),{getRootProps:p,getInputProps:q,isDragActive:F}=Ce({onDrop:T,accept:{"text/turtle":[".ttl",".shacl"],"application/rdf+xml":[".rdf",".xml"],"application/ld+json":[".jsonld"]},multiple:!0});return e.jsxs(ie,{className:"border-dashed border-2 border-primary/30",children:[e.jsx(ce,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(de,{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5"}),s("shacl.manager.title")]}),e.jsx(ue,{children:s("shacl.manager.description")})]}),i.length>0&&e.jsxs(oe,{variant:"outline",children:[i.length," ",s("shacl.manager.filesLoaded")]})]})}),e.jsxs(me,{className:"space-y-4",children:[i.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:s("shacl.manager.loadedFiles")}),e.jsx("div",{className:"space-y-2",children:i.map(a=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border bg-muted/30 p-3",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx(te,{className:"h-4 w-4 text-muted-foreground shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:a.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsxs(oe,{variant:"outline",className:"text-xs",children:[a.source==="paste"&&e.jsx(ae,{className:"h-3 w-3 mr-1"}),a.source==="upload"&&e.jsx(_,{className:"h-3 w-3 mr-1"}),a.source==="url"&&e.jsx(le,{className:"h-3 w-3 mr-1"}),s(`shacl.manager.source.${a.source}`)]}),e.jsxs("span",{children:[(a.content.length/1024).toFixed(1)," KB"]})]})]})]}),e.jsx(R,{variant:"ghost",size:"sm",onClick:()=>t(a.id),className:"shrink-0",children:e.jsx(Be,{className:"h-4 w-4"})})]},a.id))})]}),e.jsxs(xe,{value:c,onValueChange:a=>w(a),className:"w-full",children:[e.jsxs(pe,{className:"grid w-full grid-cols-3",children:[e.jsxs(B,{value:"paste",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),s("shacl.manager.tabs.paste")]}),e.jsxs(B,{value:"upload",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),s("shacl.manager.tabs.upload")]}),e.jsxs(B,{value:"url",children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),s("shacl.manager.tabs.url")]})]}),e.jsxs(O,{value:"paste",className:"space-y-3 mt-4",children:[e.jsx(Q,{placeholder:s("shacl.manager.namePlaceholder"),value:f,onChange:a=>P(a.target.value)}),e.jsx($e,{placeholder:s("shacl.manager.pastePlaceholder"),value:x,onChange:a=>N(a.target.value),className:"min-h-[200px] font-mono text-sm"}),e.jsxs(R,{onClick:d,disabled:!x.trim(),className:"w-full",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),s("shacl.manager.addFile")]})]}),e.jsx(O,{value:"upload",className:"mt-4",children:e.jsxs("div",{...p(),className:A("flex flex-col items-center justify-center rounded-lg border-2 border-dashed p-8 text-center transition-colors cursor-pointer",F?"border-primary bg-primary/5":"border-border hover:border-primary/50 hover:bg-muted/30"),children:[e.jsx("input",{...q()}),e.jsx(_,{className:A("h-12 w-12 mb-4",F?"text-primary":"text-muted-foreground")}),e.jsx("p",{className:"text-sm font-medium",children:s(F?"shacl.manager.dropActive":"shacl.manager.dropInactive")}),e.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:s("shacl.manager.dropHint")})]})}),e.jsxs(O,{value:"url",className:"space-y-3 mt-4",children:[e.jsx(Q,{placeholder:s("shacl.manager.namePlaceholder"),value:k,onChange:a=>M(a.target.value)}),e.jsx(Q,{placeholder:s("shacl.manager.urlPlaceholder"),value:C,onChange:a=>{y(a.target.value),z(null)}}),g&&e.jsxs("div",{className:"flex items-start gap-2 rounded-lg border border-yellow-200 bg-yellow-50 p-3 text-sm text-yellow-800 dark:border-yellow-900 dark:bg-yellow-950 dark:text-yellow-200",children:[e.jsx(ne,{className:"h-4 w-4 mt-0.5 shrink-0"}),e.jsx("p",{children:g})]}),e.jsx(R,{onClick:v,disabled:!C.trim()||b,className:"w-full",children:b?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),s("common.loading")]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),s("shacl.manager.loadUrl")]})})]})]})]})]})},ke=l.forwardRef(({className:i,value:h=0,...s},c)=>e.jsx("div",{ref:c,className:A("relative h-2 w-full overflow-hidden rounded-full bg-muted",i),...s,children:e.jsx("div",{className:"h-full w-full flex-1 rounded-full bg-gradient-to-r from-primary to-accent transition-all",style:{transform:`translateX(-${100-Math.min(100,Math.max(0,h))}%)`}})}));ke.displayName="Progress";function Ne({className:i,...h}){return e.jsx("div",{className:A("animate-pulse rounded-md bg-muted/60",i),...h})}const we=Fe.lazy(()=>Je(()=>import("./monaco-B7yUwsNa.js"),__vite__mapDeps([0,1]))),Ze=({value:i,onChange:h,normalizedContent:s,jsonPreview:c})=>{const[w,x]=l.useState("json"),{t:N}=Y(),{theme:f}=Se(),C=f==="dark"?"vs-dark":"vs-light",y="flex min-h-[57px] items-center justify-between border-b border-border px-4 py-2";return e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-2xl border border-border bg-card/70",children:[e.jsx("div",{className:`${y} text-xs uppercase tracking-wide text-muted-foreground`,children:N("validator.pasteText")}),e.jsx("div",{className:"h-[420px]",children:e.jsx(l.Suspense,{fallback:e.jsx(Ne,{className:"h-full w-full rounded-none"}),children:e.jsx(we,{height:"100%",defaultLanguage:"turtle",theme:C,value:i,onChange:k=>h(k||""),options:{minimap:{enabled:!1},wordWrap:"on",fontSize:14,fontFamily:"JetBrains Mono",scrollBeyondLastLine:!1,automaticLayout:!0,renderLineHighlight:"none"}})})})]}),e.jsxs("div",{className:"rounded-2xl border border-border bg-card/70",children:[e.jsxs("div",{className:y,children:[e.jsx("span",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:N("validator.previewLabel")}),e.jsx(xe,{value:w,onValueChange:k=>x(k),children:e.jsxs(pe,{className:"bg-transparent p-0",children:[e.jsx(B,{value:"json",className:"rounded-full px-3 py-1 text-xs",children:N("validator.jsonPreview")}),e.jsx(B,{value:"turtle",className:"rounded-full px-3 py-1 text-xs",children:N("validator.normalizedPreview")})]})})]}),e.jsx("div",{className:"h-[420px]",children:e.jsx(l.Suspense,{fallback:e.jsx(Ne,{className:"h-full w-full rounded-none"}),children:e.jsx(we,{height:"100%",defaultLanguage:w==="json"?"json":"turtle",theme:C,value:w==="json"?c:s,options:{readOnly:!0,minimap:{enabled:!1},wordWrap:"on",fontSize:13,fontFamily:"JetBrains Mono",automaticLayout:!0,renderLineHighlight:"none"}})})})]})]})},ye=256*1024,re={datasets:0,dataServices:0,distributions:0,hasData:!1},ds=({onValidate:i,isLoading:h})=>{const{t:s}=Y(),{setRdfStats:c}=Se(),[w]=Ge(),[x,N]=l.useState("paste"),[f,P]=l.useState(""),[C,y]=l.useState(""),[k,M]=l.useState(""),[g,z]=l.useState(""),[b,S]=l.useState(null),[I,E]=l.useState(null),[t,d]=l.useState({progress:0,isUploading:!1,error:null}),[v,T]=l.useState(null),[p,q]=l.useState({profile:"dcat_ap_es",version:"1.0.0",branch:"main"}),F=l.useRef(!1),[a,D]=l.useState(re);l.useEffect(()=>{const r=w.get("sample");if(r){const n=G.profiles[p.profile]?.versions[p.version]?.samples?.[r];n&&(z(n),N("url"))}},[w,p]),l.useEffect(()=>{if(!f.trim()){y(""),M(""),D({...re});return}let r=!1;return(async()=>{try{const u=$.detectFormat(f),m=await $.parseRDF(f,u);if(r)return;const n=await $.normalizeToTurtle(f,{format:u});if(r)return;y(n),M(JSON.stringify(V(m),null,2));const j=H(m);D({...j,hasData:!0})}catch(u){console.error("Preview error",u),D({...re})}})(),()=>{r=!0}},[f]);const V=r=>{const o={},u=r.getQuads(null,null,null,null);for(const m of u){const n=m.subject.value;o[n]||(o[n]={"@id":n});const j=m.predicate.value,U=m.object.termType==="Literal"?{"@value":m.object.value,"@type":m.object.datatype?.value,"@language":m.object.language||void 0}:{"@id":m.object.value};o[n][j]?o[n][j]=Array.isArray(o[n][j])?[...o[n][j],U]:[o[n][j],U]:o[n][j]=U}return Object.values(o)},H=r=>{const o="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",u="http://www.w3.org/ns/dcat#Dataset",m="http://www.w3.org/ns/dcat#DataService",n="http://www.w3.org/ns/dcat#Distribution",j={datasets:new Set,dataServices:new Set,distributions:new Set},U=r.getQuads(null,null,null,null);for(const L of U){if(L.predicate.value!==o)continue;const W=L.subject.value;switch(L.object.value){case u:j.datasets.add(W);break;case m:j.dataServices.add(W);break;case n:j.distributions.add(W);break}}return{datasets:j.datasets.size,dataServices:j.dataServices.size,distributions:j.distributions.size}},Te=async()=>{let r=f,o=null;const u={url:x==="url"?g:void 0,contentType:o||b?.contentType||null};if(x==="url"){if(!g.trim())return;try{const n=await fetch(g);if(!n.ok)throw new Error(`HTTP error ${n.status}`);o=n.headers.get("content-type"),u.contentType=o||b?.contentType||null,r=await n.text()}catch(n){console.error(n),E(s("validator.urlError"));return}}if(x==="upload"&&!f.trim())return;let m=null;try{if(m=$.detectFormat(r,u.url,u.contentType),m!=="text/turtle"&&m!=="turtle"){const n=await $.normalizeToTurtle(r,{format:m,url:x==="url"?g:void 0,contentType:o||b?.contentType||null});r=n,m="text/turtle",x!=="url"&&P(n)}}catch(n){console.error("Normalization error",n),m=m||"text/turtle"}if(x!=="paste"||!a.hasData)try{const n=m||$.detectFormat(r,u.url,u.contentType),j=await $.parseRDF(r,n),U=H(j);D({...U,hasData:!0})}catch(n){console.warn("Failed to derive RDF stats",n)}i(r,p)},he=l.useCallback(async r=>{if(!r.trim()){S(null);return}E(null);try{const o=await fetch(r,{method:"HEAD"});if(o.ok){S({size:o.headers.get("content-length")||void 0,contentType:o.headers.get("content-type")||void 0});return}}catch{console.warn("HEAD request failed, falling back to GET metadata")}try{const o=await fetch(r,{method:"GET"});if(!o.ok)throw new Error("Failed metadata fetch");S({size:o.headers.get("content-length")||void 0,contentType:o.headers.get("content-type")||void 0})}catch(o){console.error(o),S(null)}},[]);l.useEffect(()=>{if(!g.trim()){S(null);return}const r=setTimeout(()=>{he(g)},500);return()=>clearTimeout(r)},[g,he]);const fe=l.useCallback(r=>new Promise((o,u)=>{const m=new FileReader;let n=0,j="";F.current=!1,d({progress:0,isUploading:!0,error:null});const U=()=>{if(F.current){d({progress:0,isUploading:!1,error:s("validator.uploadCancelled")}),u(new Error("Upload cancelled"));return}const L=r.slice(n,n+ye);m.readAsText(L)};m.onload=L=>{j+=L.target?.result,n+=ye;const W=Math.min(100,Math.round(n/r.size*100));d(Me=>({...Me,progress:W})),n<r.size?U():(d({progress:100,isUploading:!1,error:null}),o(j))},m.onerror=()=>{const L=m.error?.message||"Upload error";d({progress:0,isUploading:!1,error:L}),T(null),u(m.error||new Error(L))},U()}),[s]),De=l.useCallback(async r=>{if(!r.length)return;const o=r[0];try{const u=await fe(o);P(u),N("upload"),T(o.name)}catch(u){console.error(u),T(null)}},[fe]),Pe=l.useCallback(()=>{P(""),T(null),d({progress:0,isUploading:!1,error:null})},[]),Ee=()=>{F.current=!0,T(null)},{getRootProps:Ue,getInputProps:Le,isDragActive:je}=Ce({accept:{"text/*":[".ttl",".rdf",".nt",".nq"],"application/ld+json":[".jsonld",".json"]},multiple:!1,onDropAccepted:De}),Re=()=>{let u=G.profiles[p.profile]?.versions[p.version]?.sampleUrl;u&&p.branch&&(u=u.replace("{branch}",p.branch)),u&&(z(u),N("url"))};l.useEffect(()=>{const r=G.profiles;if(!a.hasData){c(null);return}const o=r[p.profile]?.versions?.[p.version]?.icon;c({datasets:a.datasets,dataServices:a.dataServices,distributions:a.distributions,profileId:p.profile,profileVersion:p.version,profileBranch:p.branch,profileIcon:o})},[a,p,c]),l.useEffect(()=>()=>c(null),[c]);const ze=l.useMemo(()=>{const r={success:"bg-emerald-500/15 text-emerald-600 dark:text-emerald-300",info:"bg-sky-500/15 text-sky-700 dark:text-sky-200",progress:"bg-primary/15 text-primary"};return[{key:"paste",title:s("validator.actions.pasteTitle"),description:s("validator.actions.pasteDescription"),icon:ae,active:x==="paste",status:f?{label:s("validator.actions.ready"),style:r.success}:void 0},{key:"upload",title:s("validator.actions.uploadTitle"),description:s("validator.actions.uploadDescription"),icon:_,active:x==="upload",status:t.isUploading?{label:`${t.progress}%`,style:r.progress}:v?{label:v,style:r.info}:void 0},{key:"url",title:s("validator.actions.urlTitle"),description:s("validator.actions.urlDescription"),icon:le,active:x==="url",status:b?.contentType?{label:b.contentType.split(";")[0],style:r.info}:void 0}]},[x,f,b,t,v,s]),Ie=l.useMemo(()=>h?!0:x==="paste"?!f.trim():x==="url"?!g.trim():x==="upload"?!f.trim():!0,[x,f,g,h]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Xe,{selectedProfile:p,onProfileChange:q,disabled:h}),e.jsxs(ie,{children:[e.jsxs(ce,{children:[e.jsx(de,{children:s("validator.workspaceTitle")}),e.jsx(ue,{children:s("validator.workspaceSubtitle")})]}),e.jsxs(me,{className:"space-y-6",children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:ze.map(r=>e.jsxs("button",{onClick:()=>N(r.key),className:A("rounded-2xl border p-4 text-left transition-all hover:border-primary hover:shadow-md",r.active?"border-primary/50 bg-primary/5":"border-border"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r.icon,{className:"h-5 w-5 text-primary","aria-hidden":"true"}),r.status&&e.jsx("span",{className:A("rounded-full px-2 py-0.5 text-xs font-semibold",r.status.style),children:r.status.label})]}),e.jsx("p",{className:"mt-3 font-semibold text-sm",children:r.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.description})]},r.key))}),e.jsxs(xe,{value:x,onValueChange:r=>N(r),children:[e.jsxs(pe,{className:"w-full gap-2",children:[e.jsx(B,{value:"paste",children:s("validator.pasteText")}),e.jsx(B,{value:"upload",children:s("validator.uploadTab")}),e.jsx(B,{value:"url",children:s("validator.url")})]}),e.jsx(O,{value:"paste",className:"border-0 p-0",children:e.jsx(l.Suspense,{fallback:e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(be,{className:"h-4 w-4 animate-spin"})," ",s("validator.loadingEditor")]}),children:e.jsx(Ze,{value:f,onChange:P,normalizedContent:C,jsonPreview:k})})}),e.jsx(O,{value:"url",className:"border-0 p-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(Q,{type:"url",placeholder:s("validator.urlPlaceholder"),value:g,onChange:r=>z(r.target.value),disabled:h}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("validator.corsWarning")}),b&&e.jsxs("div",{className:"rounded-2xl border border-dashed border-border p-4 text-sm text-muted-foreground",children:[e.jsxs("p",{children:[e.jsxs("strong",{children:[s("validator.metadata.type"),":"]})," ",b.contentType||s("validator.metadata.unknown")]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[s("validator.metadata.size"),":"]})," ",b.size?`${Math.round(Number(b.size)/1024)} KB`:s("validator.metadata.unknown")]})]}),I&&e.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-destructive/30 bg-destructive/10 px-3 py-2 text-sm text-destructive",children:[e.jsx(ne,{className:"h-4 w-4"}),I]})]})}),e.jsx(O,{value:"upload",className:"border-0 p-0 pt-4",children:v&&!t.isUploading?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-border/70 bg-muted/30 px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(te,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:v}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s("validator.fileLoaded")})]})]}),e.jsx(R,{variant:"ghost",size:"icon",onClick:Pe,className:"h-8 w-8 text-muted-foreground hover:text-destructive","aria-label":s("common.clear"),children:e.jsx(Ve,{className:"h-4 w-4"})})]})}):t.isUploading?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-xl border border-border/70 bg-muted/30 px-4 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(_,{className:"h-5 w-5 text-primary animate-pulse"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:v}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s("validator.uploading")})]})]}),e.jsx(R,{variant:"ghost",size:"sm",onClick:Ee,className:"text-muted-foreground hover:text-destructive",children:s("validator.cancelUpload")})]}),e.jsx(ke,{value:t.progress,className:"h-2"}),e.jsx("div",{className:"mt-2 flex items-center justify-between",children:e.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.progress,"%"]})})]}),t.error&&e.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-destructive/30 bg-destructive/10 px-3 py-2 text-sm text-destructive",children:[e.jsx(ne,{className:"h-4 w-4"}),t.error]})]}):e.jsxs("div",{...Ue(),className:A("cursor-pointer rounded-2xl border-2 border-dashed transition-colors",je?"border-primary bg-primary/5":"border-border/70 hover:border-primary/50 hover:bg-muted/30"),children:[e.jsx("input",{...Le()}),e.jsxs("div",{className:"flex flex-col items-center gap-4 px-6 py-12 text-center",children:[e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-2xl bg-primary/10",children:e.jsx(_,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-medium text-foreground",children:s(je?"validator.dropActive":"validator.dropInactive")}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:s("validator.dropSubtitle")})]})]})]})})]}),e.jsxs("div",{className:"flex flex-col gap-3 rounded-2xl border border-border bg-card/70 p-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("validator.currentProfile")}),e.jsx("p",{className:"font-semibold text-foreground",children:p.profile==="custom"?s("profiles.custom.name"):`${s(`profiles.names.${p.profile}.${p.version}`,{defaultValue:p.profile})} Â· ${p.branch}`})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.profile!=="custom"&&e.jsx(R,{variant:"ghost",onClick:Re,disabled:h,children:s("validator.loadSample")}),e.jsx(R,{onClick:Te,disabled:Ie,className:"min-w-[160px]",children:h?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"mr-2 h-4 w-4 animate-spin"}),s("common.validating")]}):s("common.validate")})]})]}),p.profile==="custom"&&e.jsx(Ye,{shaclFiles:p.customShacl||[],onChange:r=>q({...p,customShacl:r})})]})]})]})};export{ds as default};
