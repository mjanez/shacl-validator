import{n as Sr,T as Or,t as Y_,a as rs,r as ns,f as AM,b as M5,c as N5,d as I5,e as q5}from"./rdf-G03HJQg-.js";import{a as L5,g as x5,b as wM}from"./charts-CuXAiHm0.js";class xv{constructor({dataset:r,end:o,quad:n,start:t}){this.dataset=r,this.end=o,this.quad=n,this.start=t}get term(){return this.quad[this.end]}get graph(){return this.quad.graph}get startTerm(){return this.quad[this.start]}}Sr("http://www.w3.org/2001/XMLSchema#");const Cr=Sr("http://www.w3.org/1999/02/22-rdf-syntax-ns#");Sr("http://www.w3.org/2000/01/rdf-schema#");class it{static add({ptr:r,start:o,end:n,subjects:t=[null],predicates:e=[null],objects:a=[null],graphs:u,callback:c}={}){if(!r.factory)throw new Error("add operation requires a factory");let s=()=>{};c&&(s=l=>{c(new xv({dataset:r.dataset,start:o,end:n,quad:l}))});for(const l of t)for(const d of e)for(const f of a)for(const h of u){const p={subject:l,predicate:d,object:f,graph:h};p[o]=r.term;const y=r.factory.quad(p.subject,p.predicate,p.object,p.graph);r.dataset.add(y),s(y)}return r}static addList({ptr:r,predicates:o,items:n,graphs:t}){if(r.isAny())throw new Error("can't attach a list to an any ptr");for(const e of o)for(const a of t){const u=n.map(()=>r.factory.blankNode());r.dataset.add(r.factory.quad(r.term,e,u[0]||Cr.nil,a));for(let c=0;c<u.length;c++)r.dataset.add(r.factory.quad(u[c],Cr.first,n[c],a)),r.dataset.add(r.factory.quad(u[c],Cr.rest,u[c+1]||Cr.nil,a))}return r}static delete({ptr:r,start:o,subjects:n=[null],predicates:t=[null],objects:e=[null]}){for(const a of n)for(const u of t)for(const c of e){const s={subject:a,predicate:u,object:c};s[o]=r.term;const l=r.dataset.match(s.subject,s.predicate,s.object);for(const d of l)r.dataset.delete(d)}return r}static deleteList({ptr:r,predicates:o}){const n=[];for(const t of o)for(const e of r.dataset.match(r.term,t)){let a=e.object;for(n.push(e);!Cr.nil.equals(a);){a=n[n.length-1].object;const u=r.dataset.match(a);if(u.size===0)break;for(const c of u)n.push(c)}}for(const t of n)r.dataset.delete(t);return r}static execute({ptr:r,operation:o="traverse",quantifier:n,start:t,end:e,subjects:a,predicates:u,objects:c,graphs:s,items:l,callback:d}={}){if(o==="add")return it.add({ptr:r,start:t,end:e,subjects:a,predicates:u,objects:c,graphs:s,callback:d});if(o==="addList")return it.addList({ptr:r,predicates:u,items:l,graphs:s});if(o==="delete")return it.delete({ptr:r,start:t,subjects:a,predicates:u,objects:c});if(o==="deleteList")return it.deleteList({ptr:r,predicates:u});if(o==="isList")return it.isList({ptr:r});if(o==="list")return it.list({ptr:r});if(o==="traverse")return it.traverse({ptr:r,quantifier:n,start:t,end:e,subjects:a,predicates:u,objects:c,graphs:s});throw new Error(`unknown operation ${o}`)}static isList({ptr:r}){return r.isAny()?!1:!!(Cr.nil.equals(r.term)||it.traverse({ptr:r,predicates:[Cr.first]}).length===1)}static list({ptr:r}){if(r.isList())return{*[Symbol.iterator](){for(;r&&!r.term.equals(Cr.nil);){const o=r.out([Cr.first]);if(o.length!==1)throw new Error(`Invalid list: rdf:first count not equals one on ${r.value}`);const n=r.out([Cr.rest]);if(n.length!==1)throw new Error(`Invalid list: rdf:rest count not equals one on ${r.value}`);yield o[0],r=n[0]}}}}static traverse({ptr:r,quantifier:o="one",start:n="subject",end:t="object",subjects:e=[null],predicates:a=[null],objects:u=[null],graphs:c=[null],callback:s}){if(o==="one")return it.traverseOne({ptr:r,start:n,end:t,subjects:e,predicates:a,objects:u,graphs:c,callback:s});if(o==="oneOrMore"){const l=it.traverse({ptr:r,end:t,start:n,subjects:e,predicates:a,objects:u,graphs:c,callback:s});return it.traverseMore({ptrs:l,end:t,start:n,subjects:e,predicates:a,objects:u,graphs:c,callback:s})}if(o==="zeroOrMore")return it.traverseMore({ptrs:[r],end:t,start:n,subjects:e,predicates:a,objects:u,graphs:c,callback:s});if(o==="zeroOrOne")return[r,...it.traverse({ptr:r,end:t,start:n,subjects:e,predicates:a,objects:u,graphs:c,callback:s})];throw new Error(`unknown quantifier ${o}`)}static traverseMore({ptrs:r,end:o,start:n,subjects:t,predicates:e,objects:a,graphs:u,callback:c}={}){let s=[...r],l,d;do{l=[];for(const f of r)l=[...l,...it.traverseOne({ptr:f,end:o,start:n,subjects:t,predicates:e,objects:a,graphs:u,callback:c})];d&&(l=l.filter(f=>!d.has(f.term))),r=l,s=[...s,...l],d=new Or(s.map(f=>f.term))}while(l.length>0);return s}static traverseOne({ptr:r,start:o,end:n,subjects:t,predicates:e,objects:a,graphs:u,callback:c=(s,l)=>l.extend(s)}={}){const s=[];for(const l of t)for(const d of e)for(const f of a)for(const h of u){const p={subject:l,predicate:d,object:f,graph:h};p[o]=r.term;for(const y of r.dataset.match(p.subject,p.predicate,p.object,p.graph))s.push(c(new xv({dataset:r.dataset,end:n,quad:y,start:o}),r))}return s}}function Bv(i,r){return r?o=>r(i.extend(o)):()=>{}}class Cv{constructor({dataset:r,edges:o=[],factory:n,graph:t,term:e}){if(!r&&o.length===0)throw new Error("dataset or edges is required");if(o.length===0&&typeof e>"u")throw new Error("edges or term must be given");if(o.length>0&&e)throw new Error("edges or term must be given");this.dataset=r||o[o.length-1].dataset,this.edges=o,this.factory=n,this._graph=t,o.length===0&&(this._term=e)}get edge(){return this.edges[this.edges.length-1]}get graph(){return typeof this._graph=="object"?this._graph:this.edge&&this.edge.graph}get length(){return this._term!==void 0?1:this.edges.length+1}get startTerm(){return this._term||this.edges[0].startTerm}get term(){return this._term!==void 0?this._term:this.edge.term}get value(){const r=this.term;return r===null?void 0:r.value}addIn(r,o,n){return it.add({ptr:this,start:"object",end:"subject",subjects:o,predicates:r,graphs:[this.graph||this.factory.defaultGraph()],callback:Bv(this,n)})}addList(r,o){return it.addList({ptr:this,predicates:r,graphs:[this.graph||this.factory.defaultGraph()],items:o})}addOut(r,o,n){return it.add({ptr:this,start:"subject",end:"object",predicates:r,objects:o,graphs:[this.graph||this.factory.defaultGraph()],callback:Bv(this,n)})}deleteIn(r,o){return it.delete({ptr:this,start:"object",subjects:o,predicates:r})}deleteList(r){return it.deleteList({ptr:this,predicates:r})}deleteOut(r,o){return it.delete({ptr:this,start:"subject",predicates:r,objects:o})}execute({operation:r,quantifier:o,start:n,end:t,subjects:e,predicates:a,objects:u,graphs:c,items:s,callback:l}){return it.execute({ptr:this,operation:r,quantifier:o,start:n,end:t,subjects:e,predicates:a,objects:u,graphs:c,items:s,callback:l})}extend(r){return new this.constructor({dataset:this.dataset,edges:[...this.edges,r],factory:this.factory,graph:this._graph})}hasIn(r,o){return it.traverse({ptr:this,start:"object",end:"object",subjects:o,predicates:r,graphs:[this.graph]})}hasOut(r,o){return it.traverse({ptr:this,start:"subject",end:"subject",predicates:r,objects:o,graphs:[this.graph]})}in(r,o){return it.traverse({ptr:this,start:"object",end:"subject",subjects:o,predicates:r,graphs:[this.graph]})}isAny(){return!this.term}isList(){return it.isList({ptr:this})}list(){return it.list({ptr:this})}*nodes(){for(let r=0;r<this.length;r++)this._term!==void 0?yield{dataset:this.dataset,term:this._term}:this.edges.length>r?yield{dataset:this.edges[r].dataset,term:this.edges[r].startTerm}:this.edges.length===r&&(yield{dataset:this.edges[r-1].dataset,term:this.edges[r-1].term})}out(r,o){return it.traverse({ptr:this,predicates:r,objects:o,graphs:[this.graph]})}*quads(){for(const{quad:r}of this.edges)yield r}trim(){return new this.constructor({dataset:this.dataset,factory:this.factory,graph:this.graph,term:this.term})}}function Qv(i,r){return i?i.equals(r):i===r}function B5(i,r){return!(i.dataset!==r.dataset||!Qv(i.graph,r.graph)||!Qv(i.term,r.term))}function Uv(i,r){return r?o=>r(new i.constructor({factory:i.factory,ptrs:[o]})):()=>{}}class _g{constructor({dataset:r,factory:o,ptrs:n,terms:t,graphs:e}){if(this.factory=o,n)this.ptrs=[...n];else{this.ptrs=[];for(const a of t||[null])for(const u of e||[null])this.ptrs.push(new Cv({dataset:r,factory:o,graph:u,term:a}))}}get dataset(){const r=new Set(this.datasets);return r.size!==1?null:r[Symbol.iterator]().next().value}get datasets(){return this.ptrs.map(r=>r.dataset)}get term(){const r=new Or(this.terms);if(r.size===1)return r[Symbol.iterator]().next().value}get terms(){return this.ptrs.map(r=>r.term)}get value(){const r=this.term;return r?.value}get values(){return this.ptrs.map(r=>r.value)}addIn(r,o,n){const t=Uv(this,n);for(const e of this.ptrs)e.addIn(r,o,t);return this}addList(r,o){if(this.isAny())throw new Error("can't attach a list to an any ptr");for(const n of this.ptrs)n.addList(r,o);return this}addOut(r,o,n){const t=Uv(this,n);for(const e of this.ptrs)e.addOut(r,o,t);return this}clone(r){return new this.constructor({factory:this.factory,ptrs:this.ptrs,...r})}deleteIn(r,o){for(const n of this.ptrs)n.deleteIn(r,o);return this}deleteList(r){for(const o of this.ptrs)o.deleteList(r);return this}deleteOut(r,o){for(const n of this.ptrs)n.deleteOut(r,o);return this}distinct(){const r=this.ptrs.reduce((o,n)=>(o.some(t=>B5(t,n))||o.push(n.trim()),o),[]);return this.clone({ptrs:r})}execute(r){return this.clone({ptrs:this.ptrs.flatMap(o=>o.execute(r))})}executeAll(r){let o=this;for(const n of r)o=o.execute(n);return o}filter(r){return this.clone({ptrs:[...this].filter(r).map(o=>o.ptrs[0])})}hasIn(r,o){return this.clone({ptrs:this.ptrs.flatMap(n=>n.hasIn(r,o))})}hasOut(r,o){return this.clone({ptrs:this.ptrs.flatMap(n=>n.hasOut(r,o))})}in(r,o){return this.clone({ptrs:this.ptrs.flatMap(n=>n.in(r,o))})}isAny(){return this.ptrs.length>0&&this.ptrs.some(r=>r.isAny())}isList(){return this.ptrs.length!==1?!1:this.ptrs[0].isList()}list(){if(!this.isList())return;const r=this.ptrs[0].list(),o=this;return(function*(){for(const n of r)yield o.clone({ptrs:[n]})})()}map(r){return[...this].map(r)}node(r){const o=this.dataset,n=[...r].map(t=>new Cv({dataset:o,factory:this.factory,term:t}));return this.clone({ptrs:n})}out(r,o){return this.clone({ptrs:this.ptrs.flatMap(n=>n.out(r,o))})}*quads(){for(const{edges:r}of this.ptrs)for(const{quad:o}of r)yield o}trim(){return this.clone({ptrs:this.ptrs.map(r=>r.trim())})}*[Symbol.iterator](){for(const r of this.ptrs)yield this.clone({ptrs:[r]})}}const C5=Sr("http://www.w3.org/2002/07/owl#"),es=Sr("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),Q5=Sr("http://www.w3.org/2000/01/rdf-schema#"),W=Sr("http://www.w3.org/ns/shacl#"),R1=Sr("https://schemas.link/shacl-next#"),K1=Sr("http://www.w3.org/2001/XMLSchema#");function U5(i){return i?`{${[...i.quads()].map(r=>Y_(r)).join(" ")}}`:"{}"}function V5(i){return i?`{${i.map(r=>U5(r)).join(" ")}}`:"{}"}var fb,Vv;function G5(){if(Vv)return fb;Vv=1;var i=L5(),r="Expected a function";function o(n,t){var e;if(typeof t!="function")throw new TypeError(r);return n=i(n),function(){return--n>0&&(e=t.apply(this,arguments)),n<=1&&(t=void 0),e}}return fb=o,fb}var pb,Gv;function X5(){if(Gv)return pb;Gv=1;var i=G5();function r(o){return i(2,o)}return pb=r,pb}var z5=X5();const Nr=x5(z5);let Xv=class{constructor({details:r,factory:o,options:n,results:t=[]}={}){this.details=r,this.factory=o,this.options=n,this.results=t,this._conforms=Nr(()=>!this.results.some(e=>e.severity.equals(W.Info)||e.severity.equals(W.Violation)||e.severity.equals(W.Warning))),this._ptr=Nr(()=>this.build())}get conforms(){return this._conforms()}get dataset(){return this.ptr.dataset}get ptr(){return this._ptr()}get term(){return this.ptr.term}build(){const r=new _g({dataset:this.factory.dataset(),factory:this.factory,terms:[this.factory.blankNode()]});r.addOut([es.type],[W.ValidationReport]).addOut([W.conforms],[this.factory.literal(this.conforms.toString(),K1.boolean)]);for(const o of this.results)r.addOut([W.result],[this.factory.blankNode()],n=>{o.build(n,this.options)});return r}coverage(){return this.results.flatMap(r=>r.coverage())}};function H5(i,r){return Object.entries(r).reduce((o,[n,t])=>(t&&t.termType&&(t=Y_(t)),o.replace(`{$${n}}`,t).replace(`{?${n}}`,t)),i)}let $5=class{constructor({args:r={},constraintComponent:o,factory:n,focusNode:t,message:e=[],path:a,results:u=[],severity:c,shape:s,source:l=[],value:d,valuePaths:f=[]}={}){this.args=r,this.constraintComponent=o,this.factory=n,this.focusNode=t,this.path=a||s.path,this.results=u,this.severity=c,this.shape=s,this.source=l,this.value=d,this.valuePaths=f,this._message=Nr(()=>(this.shape.message.length>0&&(e=this.shape.message),e.length===0&&(e=this.shape.ptr.node([this.constraintComponent]).out([W.message]).terms),e.map(h=>n.literal(H5(h.value,r),h.language||null))))}get message(){return this._message()}build(r,{details:o}={}){r.addOut([es.type],[W.ValidationResult]).addOut([W.focusNode],this.focusNode.terms).addOut([W.resultSeverity],[this.severity]).addOut([W.sourceConstraint],this.source).addOut([W.sourceConstraintComponent],[this.constraintComponent]).addOut([W.sourceShape],this.shape.ptr.terms),this.message&&r.addOut([W.resultMessage],this.message);const n=t=>{if(t.quantifier==="one")return t.predicates.length>1?r.node([this.factory.blankNode()]).addList([W.alternativePath],t.predicates):t.start==="object"?r.node([this.factory.blankNode()]).addOut([W.inversePath],[t.predicates[0]]):r.node([t.predicates[0]]);if(t.quantifier==="oneOrMore")return r.node([this.factory.blankNode()]).addOut([W.oneOrMorePath],[t.predicates[0]]);if(t.quantifier==="zeroOrMore")return r.node([this.factory.blankNode()]).addOut([W.zeroOrMorePath],[t.predicates[0]]);if(t.quantifier==="zeroOrOne")return r.node([this.factory.blankNode()]).addOut([W.zeroOrOnePath],[t.predicates[0]])};if(this.path&&(this.path.length===1?r.addOut([W.resultPath],n(this.path[0]).terms):r.addList([W.resultPath],this.path.map(t=>n(t).term))),typeof this.value<"u"&&r.addOut([W.value],this.value.terms),o)for(const t of this.results)r.addOut([W.detail],[this.factory.blankNode()],e=>{t.build(e,{details:o})})}coverage(){return[...this.valuePaths.flatMap(r=>[...r.quads()]),...this.results.flatMap(r=>r.coverage())]}},J5=class EM{constructor({factory:r,focusNode:o,options:n={debug:!1,details:!1},processed:t=new Set,report:e=new Xv({factory:r,options:n}),results:a=new Map,shape:u,value:c,valueOrNode:s,valuePaths:l,values:d}={}){this.factory=r,this.focusNode=o,this.options=n,this.processed=t,this.report=e,this.results=a,this.shape=u,this.value=c,this.valuePaths=l,this.valueOrNode=s,this.values=d}create({child:r,focusNode:o=this.focusNode,shape:n=this.shape,value:t=this.value,valueOrNode:e=this.valueOrNode,valuePaths:a=this.valuePaths,values:u=this.values}={}){return new EM({factory:this.factory,focusNode:o,options:this.options,processed:this.processed,report:r?new Xv({factory:this.factory,options:this.options}):this.report,results:this.results,shape:n,value:t,valueOrNode:e,valuePaths:a,values:u})}id({shape:r=this.shape}={}){return`${Y_(r.ptr.term)} - ${Y_(this.focusNode.term)} - ${V5(this.valuePaths)}`}result(r){const o=new $5({factory:this.factory,focusNode:this.focusNode,shape:this.shape,value:this.value,valuePaths:this.valuePaths,...r}),n=this.id();this.results.has(n)?this.results.get(n).add(o):this.results.set(n,new Set([o])),this.report.results.push(o)}debug(r,o){this.options.debug&&this.result({severity:R1.Debug,constraintComponent:r,...o})}trace(r,o){this.options.trace&&this.result({severity:R1.Trace,constraintComponent:r,...o})}test(r,o,n){r?this.debug(o,n):this.violation(o,n)}violation(r,o){this.result({constraintComponent:r,severity:this.shape.severity||W.Violation,...o})}};function K5(){return{generic:Y5()}}function Y5(){return i=>{i.trace(R1.TraversalConstraintComponent,{args:{},message:[i.factory.literal("Traversal")],value:i.valueOrNode})}}class W5{constructor(r){this.validations=new rs(r)}compile(r){const o=r.validator.options.coverage;if(r.deactivated)return[];let n=!1;const t=new Set;for(const e of r.ptr.execute({start:"subject",end:"predicate"})){const a=this.validations.get(e.term);a&&(t.add(a),e.term.equals(W.property)&&(n=!0))}return o&&r.isPropertyShape&&!n&&t.add(K5),[...t].map(e=>e(r)).filter(Boolean)}}var Nn={},In={},rc={},nc={},zv;function js(){if(zv)return nc;zv=1,Object.defineProperty(nc,"__esModule",{value:!0}),nc.Translator=void 0;let i=class{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(o){throw new Error(`Invalid RDF ${o.datatype.value} value: '${o.value}'`)}registerHandler(o,n,t){for(const e of n)this.supportedRdfDatatypes.push(e),this.fromRdfHandlers[e.value]=o;for(const e of t){let a=this.toRdfHandlers[e];a||(this.toRdfHandlers[e]=a=[]),a.push(o)}}fromRdf(o,n){const t=this.fromRdfHandlers[o.datatype.value];return t?t.fromRdf(o,n):o.value}toRdf(o,n){const t=this.toRdfHandlers[typeof o];if(t)for(const e of t){const a=e.toRdf(o,n);if(a)return a}throw new Error(`Invalid JavaScript value: '${o}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}};return nc.Translator=i,nc}var Hv;function Z5(){if(Hv)return rc;Hv=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.TypeHandlerBoolean=void 0;const i=js();let r=class jM{fromRdf(n,t){switch(n.value){case"true":return!0;case"false":return!1;case"1":return!0;case"0":return!1}return t&&i.Translator.incorrectRdfDataType(n),!1}toRdf(n,{datatype:t,dataFactory:e}){return e.literal(n?"true":"false",t||e.namedNode(jM.TYPE))}};return rc.TypeHandlerBoolean=r,r.TYPE="http://www.w3.org/2001/XMLSchema#boolean",rc}var ic={},$v;function k5(){if($v)return ic;$v=1,Object.defineProperty(ic,"__esModule",{value:!0}),ic.TypeHandlerDate=void 0;const i=js();let r=class D1{fromRdf(n,t){switch(t&&!n.value.match(D1.VALIDATORS[n.datatype.value.substr(33,n.datatype.value.length)])&&i.Translator.incorrectRdfDataType(n),n.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(n.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const e=n.value.split("-");return new Date(0,parseInt(e[0],10)-1,parseInt(e[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(n.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(n.value+"-01");default:return new Date(n.value)}}toRdf(n,{datatype:t,dataFactory:e}){if(t=t||e.namedNode(D1.TYPES[0]),!(n instanceof Date))return null;const a=n;let u;switch(t.value){case"http://www.w3.org/2001/XMLSchema#gDay":u=String(a.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":u=a.getUTCMonth()+1+"-"+a.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":u=String(a.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":u=a.getUTCFullYear()+"-"+(a.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":u=a.toISOString().replace(/T.*$/,"");break;default:u=a.toISOString()}return e.literal(u,t)}};return ic.TypeHandlerDate=r,r.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],r.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/},ic}var ac={},Jv;function eq(){if(Jv)return ac;Jv=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.TypeHandlerNumberDouble=void 0;const i=js();let r=class RM{fromRdf(n,t){const e=parseFloat(n.value);return t&&isNaN(e)&&i.Translator.incorrectRdfDataType(n),e}toRdf(n,{datatype:t,dataFactory:e}){return t=t||e.namedNode(RM.TYPES[0]),isNaN(n)?e.literal("NaN",t):isFinite(n)?n%1===0?null:e.literal(n.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),t):e.literal(n>0?"INF":"-INF",t)}};return ac.TypeHandlerNumberDouble=r,r.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"],ac}var oc={},Kv;function tq(){if(Kv)return oc;Kv=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.TypeHandlerNumberInteger=void 0;const i=js();let r=class Q_{fromRdf(n,t){const e=parseInt(n.value,10);return t&&(isNaN(e)||n.value.indexOf(".")>=0)&&i.Translator.incorrectRdfDataType(n),e}toRdf(n,{datatype:t,dataFactory:e}){return e.literal(String(n),t||(n<=Q_.MAX_INT&&n>=Q_.MIN_INT?e.namedNode(Q_.TYPES[0]):e.namedNode(Q_.TYPES[1])))}};return oc.TypeHandlerNumberInteger=r,r.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],r.MAX_INT=2147483647,r.MIN_INT=-2147483648,oc}var uc={},Yv;function rq(){if(Yv)return uc;Yv=1,Object.defineProperty(uc,"__esModule",{value:!0}),uc.TypeHandlerString=void 0;let i=class{fromRdf(o){return o.value}toRdf(o,{datatype:n,dataFactory:t}){return t.literal(o,n)}};return uc.TypeHandlerString=i,i.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"],uc}var Wv;function Zv(){return Wv||(Wv=1,(function(i){var r=In&&In.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=In&&In.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Z5(),i),o(k5(),i),o(eq(),i),o(tq(),i),o(rq(),i)})(In)),In}var hb={},kv;function nq(){return kv||(kv=1,Object.defineProperty(hb,"__esModule",{value:!0})),hb}var eT;function iq(){return eT||(eT=1,(function(i){var r=Nn&&Nn.__createBinding||(Object.create?(function(h,p,y,_){_===void 0&&(_=y);var m=Object.getOwnPropertyDescriptor(p,y);(!m||("get"in m?!p.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return p[y]}}),Object.defineProperty(h,_,m)}):(function(h,p,y,_){_===void 0&&(_=y),h[_]=p[y]})),o=Nn&&Nn.__exportStar||function(h,p){for(var y in h)y!=="default"&&!Object.prototype.hasOwnProperty.call(p,y)&&r(p,h,y)};Object.defineProperty(i,"__esModule",{value:!0}),i.fromRdf=c,i.toRdf=s,i.getTermRaw=l,i.getSupportedRdfDatatypes=d,i.getSupportedJavaScriptPrimitives=f;const n=ns(),t=Zv(),e=js();o(Zv(),i),o(nq(),i),o(js(),i);const a=new n.DataFactory,u=new e.Translator;u.registerHandler(new t.TypeHandlerString,t.TypeHandlerString.TYPES.map(h=>a.namedNode(h)),["string"]),u.registerHandler(new t.TypeHandlerBoolean,[t.TypeHandlerBoolean.TYPE].map(h=>a.namedNode(h)),["boolean"]),u.registerHandler(new t.TypeHandlerNumberDouble,t.TypeHandlerNumberDouble.TYPES.map(h=>a.namedNode(h)),["number"]),u.registerHandler(new t.TypeHandlerNumberInteger,t.TypeHandlerNumberInteger.TYPES.map(h=>a.namedNode(h)),["number"]),u.registerHandler(new t.TypeHandlerDate,t.TypeHandlerDate.TYPES.map(h=>a.namedNode(h)),["object"]);function c(h,p){return u.fromRdf(h,p)}function s(h,p){return p&&"namedNode"in p&&(p={dataFactory:p}),p=p||{},p&&!p.dataFactory&&(p.dataFactory=a),u.toRdf(h,p)}function l(h,p){return h.termType==="Literal"?c(h,p):h.value}function d(){return u.getSupportedRdfDatatypes()}function f(){return u.getSupportedJavaScriptPrimitives()}})(Nn)),Nn}var W_=iq();function tT(i){if(i.term.termType!=="BlankNode")return{quantifier:"one",start:"subject",end:"object",predicates:[i.term]};const r=i.out([W.alternativePath]);if(r.ptrs.length===1&&r.ptrs[0].isList())return{quantifier:"one",start:"subject",end:"object",predicates:[...r.list()].map(a=>a.term)};const o=i.out([W.inversePath]);if(o.term)return{quantifier:"one",start:"object",end:"subject",predicates:[o.term]};const n=i.out([W.oneOrMorePath]);if(n.term)return{quantifier:"oneOrMore",start:"subject",end:"object",predicates:[n.term]};const t=i.out([W.zeroOrMorePath]);if(t.term)return{quantifier:"zeroOrMore",start:"subject",end:"object",predicates:[t.term]};const e=i.out([W.zeroOrOnePath]);if(e.term)return{quantifier:"zeroOrOne",start:"subject",end:"object",predicates:[e.term]}}function DM(i){return i.terms.length===0?null:i.ptrs[0].isList()?[...i.list()].map(r=>tT(r)):[tT(i)]}class aq{constructor(r){this.shape=r,this._compiled=Nr(()=>this.shape.validator.registry.compile(r))}get compiled(){return this._compiled()}async validate(r){return r.focusNode.dataset.size===0||(this.shape.isPropertyShape?await this.validateProperty(r):await this.validateNode(r)),r}async validateNode(r){const o=r.create({shape:this.shape,valueOrNode:r.value||r.focusNode});for(const n of this.compiled)n.node&&await n.node(o),n.generic&&await n.generic(o)}async validateProperty(r){let o;this.shape.isSparqlShape?o=r.focusNode:o=r.focusNode.executeAll(this.shape.path);const n=o.node(new Or(o.terms)),t=[...o].reduce((a,u)=>{const c=u.term,s=o.node([c]);return a.has(c)||a.set(c,{value:s,valuePaths:[]}),a.get(c).valuePaths.push(u),a},new rs).values(),e=r.create({shape:this.shape,values:n});for(const a of this.compiled)a.property&&await a.property(e);for(const{value:a,valuePaths:u}of t){const c=r.create({shape:this.shape,value:a,valueOrNode:a,valuePaths:u});for(const s of this.compiled)s.generic&&await s.generic(c)}}}function P1(i){const r=new Or,n=new _g({dataset:i.dataset,terms:i.terms}).execute({quantifier:"zeroOrMore",start:"object",end:"subject",predicates:[Q5.subClassOf]});for(const t of n.ptrs)for(const{term:e}of t.nodes())r.add(e);return r}class oq{constructor(r,{registry:o}){this.registry=o,this.targetClass=new Or([...P1(r.hasOut([es.type],[W.NodeShape])),...P1(r.out([W.targetClass]))]),this.targetNode=r.out([W.targetNode]).terms,this.targetObjectsOf=r.out([W.targetObjectsOf]).terms,this.targetSubjectsOf=r.out([W.targetSubjectsOf]).terms,this.targets=[...r.out([W.target])]}async resolve(r){const o=r.focusNode.node([null]),n=[...r.focusNode.hasOut([es.type],this.targetClass).ptrs,...r.focusNode.node(this.targetNode).ptrs,...o.execute({start:"object",end:"object",predicates:this.targetObjectsOf}).ptrs,...o.execute({start:"subject",end:"subject",predicates:this.targetSubjectsOf}).ptrs];for(const e of this.targets)for(const[,a]of this.registry.targetResolvers){const u=await a(e,r);n.push(...r.focusNode.node(u).ptrs)}const t=r.focusNode.clone({ptrs:n});return t.node([...new Or(t.terms)])}}class uq{constructor(r,{validator:o}){this.ptr=r,this.validator=o,this._deactivated=Nr(()=>{const n=this.ptr.out([W.deactivated]).term;return n&&W_.fromRdf(n)}),this._message=Nr(()=>this.ptr.out([W.message]).terms),this._path=Nr(()=>DM(this.ptr.out([W.path]))),this._severity=Nr(()=>this.ptr.out([W.severity]).term),this._shapeValidator=Nr(()=>new aq(this)),this._sparql=Nr(()=>this.ptr.out([W.sparql])),this._targetResolver=Nr(()=>new oq(this.ptr,{registry:this.validator.targetResolverRegistry}))}get deactivated(){return this._deactivated()}get isPropertyShape(){return!!this.path}get isSparqlShape(){return this.sparql.terms.length>0}get path(){return this._path()}get targetResolver(){return this._targetResolver()}get message(){return this._message()}get severity(){return this._severity()}get shapeValidator(){return this._shapeValidator()}get sparql(){return this._sparql()}async resolveTargets(r){return this.targetResolver.resolve(r)}async validate(r){const o=r.id({shape:this});if(r.processed.has(o)){if(r.results.has(o))for(const n of r.results.get(o))r.report.results.push(n);return r}return r.processed.add(o),this.shapeValidator.validate(r)}}class sq{constructor(r){this.targetResolvers=new rs(r)}}function cq(i){const r=parseInt(i.ptr.out([W.maxCount]).value);return{property:lq(r)}}function lq(i){return r=>{r.test(r.values.terms.length<=i,W.MaxCountConstraintComponent,{args:{maxCount:i},message:[r.factory.literal("More than {$maxCount} values")]})}}function dq(i){const r=parseInt(i.ptr.out([W.minCount]).value);return{property:fq(r)}}function fq(i){return r=>{r.test(r.values.terms.length>=i,W.MinCountConstraintComponent,{args:{minCount:i},message:[r.factory.literal("Less than {$minCount} values")]})}}async function pq(i,r){for(const o of i)if(!await r(o))return!1;return!0}async function hq(i,r){return(await Promise.all(i.map(o=>r(o)))).filter(Boolean)}async function Fg(i,r){return Promise.all(i.map(r))}async function yq(i,r){for(const o of i)if(await r(o))return!0;return!1}function _q(i){const r=[...i.ptr.out([W.and])].flatMap(o=>[...o.list()]).map(o=>i.validator.shape(o));return{generic:mq(r)}}function mq(i){return async r=>{const o=await Fg(i,async t=>(await t.validate(r.create({child:!0,focusNode:r.valueOrNode}))).report),n=o.every(t=>t.conforms);r.test(n,W.AndConstraintComponent,{results:o.flatMap(t=>t.results),value:r.valueOrNode})}}function gq(i){const r=i.validator.shape(i.ptr.out([W.not]));return{generic:bq(r)}}function bq(i){return async r=>{const o=(await i.validate(r.create({child:!0,focusNode:r.valueOrNode}))).report,n=!o.conforms;r.test(n,W.NotConstraintComponent,{args:{not:i.ptr.term},message:[r.factory.literal("Value does have shape {$not}")],results:o.results,value:r.valueOrNode})}}function vq(i){const r=[...i.ptr.out([W.or])].flatMap(o=>[...o.list()]).map(o=>i.validator.shape(o));return{generic:Tq(r)}}function Tq(i){return async r=>{let o=[],n;if(r.options.debug||r.options.details){const t=await Fg(i,async e=>(await e.validate(r.create({child:!0,focusNode:r.valueOrNode}))).report);o=t.flatMap(e=>e.results),n=t.some(e=>e.conforms)}else n=await yq(i,async t=>(await t.validate(r.create({child:!0,focusNode:r.valueOrNode}))).report.conforms);r.test(n,W.OrConstraintComponent,{results:o,value:r.valueOrNode})}}function Oq(i){const r=[...i.ptr.out([W.xone])].flatMap(o=>[...o.list()]).map(o=>i.validator.shape(o));return{generic:Sq(r)}}function Sq(i){return async r=>{const o=await Fg(i,async t=>(await t.validate(r.create({child:!0,focusNode:r.valueOrNode}))).report),n=o.filter(t=>t.conforms).length===1;r.test(n,W.XoneConstraintComponent,{results:o.flatMap(t=>t.results),value:r.valueOrNode})}}function Fq(i){if(!W_.fromRdf(i.ptr.out([W.closed]).term))return null;const o=i.ptr.out([W.property]).map(e=>i.validator.shape(e)),n=new Or(o.filter(e=>!e.deactivated).map(e=>e.path[0].predicates[0])),t=new Or([...i.ptr.out([W.ignoredProperties]).list()||[]].map(e=>e.term));return{node:Aq(n,t)}}function Aq(i,r){return o=>{const n=o.focusNode.execute({start:"subject",end:"predicate"}).filter(t=>r.has(t.term)?!1:!i.has(t.term));if(n.ptrs.length>0)for(const t of n)o.violation(W.ClosedConstraintComponent,{message:[o.factory.literal("Predicate is not allowed (closed shape)")],path:[{quantifier:"one",start:"subject",end:"object",predicates:[t.term]}],value:o.focusNode.node([[...t.quads()][0].object])});else o.debug(W.ClosedConstraintComponent)}}function wq(i){const r=i.ptr.out([W.hasValue]).term;return{node:Eq(r),property:jq(r)}}function Eq(i){return r=>{r.test(i.equals(r.valueOrNode.term),W.HasValueConstraintComponent,{args:{hasValue:i},message:[r.factory.literal("Value must be {$hasValue}")]})}}function jq(i){return r=>{const o=[...r.values].some(n=>i.equals(n.term));r.test(o,W.HasValueConstraintComponent,{args:{hasValue:i},message:[r.factory.literal("Missing expected value {$hasValue}")]})}}function Rq(i){const r=new Or([...i.ptr.out([W.in]).list()].map(o=>o.term));return{generic:Dq(r)}}function Dq(i){return r=>{r.test(i.has(r.valueOrNode.term),W.InConstraintComponent,{args:{in:[...i].map(o=>o.value).join(", ")},message:[r.factory.literal("Value is not in {$in}")],value:r.valueOrNode})}}function Us(i,r){if(!i||i.termType!=="Literal"||!r||r.termType!=="Literal"||rT(i)!==rT(r))return null;const o=W_.fromRdf(i),n=W_.fromRdf(r);return typeof o!=typeof n?null:typeof o=="string"?o.localeCompare(n):o-n}function rT(i){const r=/^.*(((\+|-)\d{2}:\d{2})|Z)$/;return K1.dateTime.equals(i.datatype)&&r.test(i.value)}function Pq(i){const r=i.ptr.out([W.disjoint]).term;return{generic:Mq(r)}}function Mq(i){return r=>{const o=r.focusNode.dataset.match(r.focusNode.term,i,r.valueOrNode.term);r.test(o.size===0,W.DisjointConstraintComponent,{args:{disjoint:i},message:[r.factory.literal("Value node must not also be one of the values of {$disjoint}")],value:r.valueOrNode})}}function Nq(i){const r=i.ptr.out([W.equals]).term;return{node:Iq(r),property:qq(r)}}function Iq(i){return r=>{const o=r.focusNode.out([i]),n=o.filter(e=>!e.term.equals(r.focusNode.term)),t=o.terms.length!==0&&n.terms.length===0;r.test(t,W.EqualsConstraintComponent,{args:{equals:i},message:[r.factory.literal("Must have same values as {$equals}")],value:n.terms[0]&&r.focusNode.node([n.terms[0]])||r.focusNode})}}function qq(i){return r=>{const o=new Or(r.focusNode.out([i]).terms),n=new Or(r.values.terms),t=[...n].filter(u=>!o.has(u)),e=[...o].filter(u=>!n.has(u)),a=[...t,...e];for(const u of a)r.violation(W.EqualsConstraintComponent,{args:{equals:i},message:[r.factory.literal("Must have same values as {$equals}")],value:r.focusNode.node([u])});a.length===0&&r.debug(W.EqualsConstraintComponent,{args:{equals:i},message:[r.factory.literal("Must have same values as {$equals}")]})}}function Lq(i){const r=i.ptr.out([W.lessThan]).term;return{property:xq(r)}}function xq(i){return r=>{const o=r.focusNode.out([i]).terms;for(const n of r.values)for(const t of o){const e=Us(n.term,t);e===null||e>=0?r.violation(W.LessThanConstraintComponent,{args:{lessThan:i},message:[r.factory.literal("Value is not less than value of {$lessThan}")],value:n}):r.debug(W.LessThanConstraintComponent,{args:{lessThan:i},message:[r.factory.literal("Value is not less than value of {$lessThan}")],value:n})}}}function Bq(i){const r=i.ptr.out([W.lessThanOrEquals]).term;return{property:Cq(r)}}function Cq(i){return r=>{const o=r.focusNode.out([i]).terms;for(const n of r.values)for(const t of o){const e=Us(n.term,t);e===null||e>0?r.violation(W.LessThanOrEqualsConstraintComponent,{args:{lessThanOrEquals:i},message:[r.factory.literal("Value is not less than or equal to value of {$lessThanOrEquals}")],value:n}):r.debug(W.LessThanOrEqualsConstraintComponent,{args:{lessThanOrEquals:i},message:[r.factory.literal("Value is not less than or equal to value of {$lessThanOrEquals}")],value:n})}}}function Qq(i){const r=i.ptr.out([W.maxExclusive]).term;return{generic:Uq(r)}}function Uq(i){return r=>{const o=Us(r.valueOrNode.term,i);r.test(o!==null&&o<0,W.MaxExclusiveConstraintComponent,{args:{maxExclusive:i},message:[r.factory.literal("Value is not less than {$maxExclusive}")],value:r.valueOrNode})}}function Vq(i){const r=i.ptr.out([W.maxInclusive]).term;return{generic:Gq(r)}}function Gq(i){return r=>{const o=Us(r.valueOrNode.term,i);r.test(o!==null&&o<=0,W.MaxInclusiveConstraintComponent,{args:{maxInclusive:i},message:[r.factory.literal("Value is not less than or equal to {$maxInclusive}")],value:r.valueOrNode})}}function Xq(i){const r=i.ptr.out([W.minExclusive]).term;return{generic:zq(r)}}function zq(i){return r=>{const o=Us(r.valueOrNode.term,i);r.test(o!==null&&o>0,W.MinExclusiveConstraintComponent,{args:{minExclusive:i},message:[r.factory.literal("Value is not greater than {$minExclusive}")],value:r.valueOrNode})}}function Hq(i){const r=i.ptr.out([W.minInclusive]).term;return{generic:$q(r)}}function $q(i){return r=>{const o=Us(r.valueOrNode.term,i);r.test(o!==null&&o>=0,W.MinInclusiveConstraintComponent,{args:{minInclusive:i},message:[r.factory.literal("Value is not greater than or equal to {$minInclusive}")],value:r.valueOrNode})}}function Jq(i){const r=[...i.ptr.out([W.node])].map(o=>i.validator.shape(o));return{generic:Kq(r)}}function Kq(i){return async r=>{for(const o of i){const n=await o.validate(r.create({child:!0,focusNode:r.valueOrNode}));r.test(n.report.conforms,W.NodeConstraintComponent,{args:{node:o.ptr.term},message:[r.factory.literal("Value does not have shape {$node}")],results:n.report.results,value:r.valueOrNode})}}}function Yq(i){const r=[...i.ptr.out([W.property])].map(o=>i.validator.shape(o));return{generic:Wq(r)}}function Wq(i){return async r=>{const o=r.create({focusNode:r.valueOrNode});for(const n of i)await n.validate(o)}}function Zq(i){const r=i.validator.shape(i.ptr.out([W.qualifiedValueShape])),o=i.ptr.out([W.qualifiedValueShapesDisjoint]).term,n=o?W_.fromRdf(o):!1,t=i.ptr.out([W.qualifiedMaxCount]).term,e=t?parseInt(t.value):null,a=i.ptr.out([W.qualifiedMinCount]).term,u=a?parseInt(a.value):null;return{property:kq(r,n,e,u)}}function kq(i,r,o,n){return async t=>{const e=[];let a=[];r&&(a=new Set(t.shape.ptr.in([W.property]).out([W.property]).out([W.qualifiedValueShape]).filter(c=>!c.term.equals(i.ptr.term)).map(c=>t.shape.validator.shape(c))));const u=(await hq(t.values,async c=>{const s=(await i.validate(t.create({child:!0,focusNode:c}))).report;if(e.push(s.results),!s.conforms)return!1;if(a.length===0)return!0;if(t.options.debug||t.options.details){const l=await Fg([...a],async d=>(await d.validate(t.create({child:!0,focusNode:c}))).report);return e.push(l.flatMap(d=>d.results)),!l.every(d=>d.conforms)}else return!await pq([...a],async l=>(await l.validate(t.create({child:!0,focusNode:c}))).report.conforms)})).length;o!==null&&t.test(u<=o,W.QualifiedMaxCountConstraintComponent,{args:{qualifiedMaxCount:o,qualifiedValueShape:i.ptr.term,qualifiedValueShapesDisjoint:r},message:[t.factory.literal("More than {$qualifiedMaxCount} values have shape {$qualifiedValueShape}")],results:e.flat()}),n!==null&&t.test(u>=n,W.QualifiedMinCountConstraintComponent,{args:{qualifiedMinCount:n,qualifiedValueShape:i.ptr.term,qualifiedValueShapesDisjoint:r},message:[t.factory.literal("Less than {$qualifiedMinCount} values have shape {$qualifiedValueShape}")],results:e.flat()})}}function eL(i,r){return r?r.slice(0,i.length)===i:!1}function tL(i){const r=[...new Set([...i.ptr.out([W.languageIn]).list()].map(o=>o.value))];return{generic:rL(r)}}function rL(i){return r=>{const o=i.some(n=>eL(n,r.valueOrNode.term.language));r.test(o,W.LanguageInConstraintComponent,{args:{languageIn:i.join(", ")},message:[r.factory.literal("Language does not match any of {$languageIn}")],value:r.valueOrNode})}}function nL(i){const r=parseInt(i.ptr.out([W.maxLength]).value);return{generic:iL(r)}}function iL(i){return r=>{const o=r.valueOrNode.term.termType!=="BlankNode"&&r.valueOrNode.value.length<=i;r.test(o,W.MaxLengthConstraintComponent,{args:{maxLength:i},message:[r.factory.literal("Value has more than {$maxLength} characters")],value:r.valueOrNode})}}function aL(i){const r=parseInt(i.ptr.out([W.minLength]).value);return{generic:oL(r)}}function oL(i){return r=>{const o=r.valueOrNode.term.termType!=="BlankNode"&&r.valueOrNode.value.length>=i;r.test(o,W.MinLengthConstraintComponent,{args:{minLength:i},message:[r.factory.literal("Value has less than {$minLength} characters")],value:r.valueOrNode})}}function uL(i){const r=i.ptr.out([W.pattern]).value,o=i.ptr.out([W.flags]).value,n=new RegExp(r,o);return{generic:sL(r,o,n)}}function sL(i,r,o){return n=>{n.test(o.test(n.valueOrNode.term.value),W.PatternConstraintComponent,{args:{flags:r,pattern:i},message:[n.factory.literal('Value does not match pattern "{$pattern}"')],value:n.valueOrNode})}}function cL(i){const r=i.ptr.out([W.uniqueLang]).term;return r.value==="true"&&K1.boolean.equals(r.datatype)?{property:lL()}:null}function lL(){return i=>{const o=Object.entries(i.values.terms.reduce((n,t)=>(t.language&&(n[t.language]=(n[t.language]||0)+1),n),{})).filter(([,n])=>n>1);for(const[n]of o)i.violation(W.UniqueLangConstraintComponent,{args:{lang:n},message:[i.factory.literal('Language "{?lang}" used more than once')]});o.length===0&&i.debug(W.UniqueLangConstraintComponent)}}const lg=Sr("http://www.w3.org/ns/shacl#"),PM=Sr("https://schemas.link/shacl-next#");class Rs{constructor({results:r=[]}={}){this.results=r}get conforms(){return!this.results.some(r=>r.severity.equals(lg.Info)||r.severity.equals(lg.Violation)||r.severity.equals(lg.Warning))}}function dL(i,r){return Object.entries(r).reduce((o,[n,t])=>(t&&t.termType&&(t=Y_(t)),o.replace(`{$${n}}`,t).replace(`{?${n}}`,t)),i)}class mg{constructor({args:r={},factory:o,message:n=[],severity:t=lg.Violation}={}){this.severity=t,this.message=n.map(e=>o.literal(dL(e.value,r),e.language||null))}}class Y1{constructor({factory:r=AM}={}){this.factory=r}clone({factory:r}={}){return new Y1({factory:r||this.factory})}validate(){return new Rs}validateSimple(){return!0}}class Vs extends Y1{constructor({datatypes:r,factory:o}={}){super({factory:o}),this.datatypes=[];for(const n of Array.isArray(r)?r:[r])n&&this.datatypes.push(this.factory.fromTerm(n))}clone({factory:r}={}){return new Vs({datatypes:this.datatypes,factory:r||this.factory})}}class fL{constructor({factory:r=AM,validations:o}={}){if(this.factory=r,this.validations=new rs,o)for(const n of Object.values(o)){const t=n.clone({factory:this.factory});for(const e of t.datatypes)this.validations.set(e,t)}}validate(r){const o=this.validations.get(r.datatype);return o?o.validate(r):new Rs}validateSimple(r){const o=this.validations.get(r.datatype);return o?o.validateSimple(r):!0}}class ht extends Vs{constructor(r,o,{factory:n}={}){super({datatypes:o,factory:n}),this.message=[this.factory.literal("term value {$this} matches pattern {$pattern}")],this.patterns=Array.isArray(r)?r:[r]}clone({factory:r}={}){return new ht(this.patterns,this.datatypes,{factory:r||this.factory})}validate(r){const o=this.patterns.map(n=>{let t;n.test(r.value)&&(t=PM.Debug);const e={pattern:this.factory.literal(n.toString()),this:r};return new mg({args:e,factory:this.factory,message:this.message,severity:t})});return new Rs({results:o})}validateSimple(r){return this.patterns.every(o=>o.test(r.value))}}const pL=/^([-+]?[0-9]+)$/;class rr extends ht{constructor(r=null,o=null,n,{factory:t}={}){super(pL,n,{factory:t}),this.maxInclusive=null,this.minInclusive=null,typeof o=="string"&&(this.maxInclusive=BigInt(o)),typeof r=="string"&&(this.minInclusive=BigInt(r))}clone({factory:r}={}){return new rr(this.minInclusive?.toString(),this.maxInclusive?.toString(),this.datatypes,{factory:r||this.factory})}validate(r){const o=super.validate(r).results;if(!PM.Debug.equals(o[0].severity))return new Rs({results:o});const n=BigInt(r.value);if(this.minInclusive!==null&&n<this.minInclusive){const t=`term value "${r.value}" is less than "${this.minInclusive.toString()}"`,e=[this.factory.literal(t)];o.push(new mg({factory:this.factory,message:e}))}if(this.maxInclusive!==null&&n>this.maxInclusive){const t=`term value "${r.value}" is greater than "${this.maxInclusive.toString()}"`,e=[this.factory.literal(t)];o.push(new mg({factory:this.factory,message:e}))}return new Rs({results:o})}validateSimple(r){if(!super.validateSimple(r))return!1;const o=BigInt(r.value);return!(this.minInclusive!==null&&o<this.minInclusive||this.maxInclusive!==null&&o>this.maxInclusive)}}class W1 extends Vs{constructor(r,o,{factory:n}={}){super({datatypes:o,factory:n}),this.values=new Set(r)}clone({factory:r}={}){return new W1(this.values,this.datatypes,{factory:r||this.factory})}validate(r){const o=[];if(!this.values.has(r.value)){const n=`term value "${r.value}" is not included in the list: ${[...this.values].join(",")}`,t=[this.factory.literal(n)];o.push(new mg({factory:this.factory,message:t}))}return new Rs({results:o})}validateSimple(r){return this.values.has(r.value)}}const ze={xsd:Sr("http://www.w3.org/2001/XMLSchema#")},hL=new Vs({datatypes:ze.xsd.anySimpleType}),yL=new Vs({datatypes:ze.xsd.anyAtomicType}),Ag=/^([^\ud8ff-\udfff\ufffe-\uffff]*)$/,_L=/^((\+|-)?([0-9]+(\.[0-9]*)?|\.[0-9]+))$/,MM=/^((\+|-)?([0-9]+(\.[0-9]*)?|\.[0-9]+)([Ee](\+|-)?[0-9]+)?|(\+|-)?INF|NaN)$/,Z1=/^(-?P((([0-9]+Y([0-9]+M)?([0-9]+D)?|([0-9]+M)([0-9]+D)?|([0-9]+D))(T(([0-9]+H)([0-9]+M)?([0-9]+(\.[0-9]+)?S)?|([0-9]+M)([0-9]+(\.[0-9]+)?S)?|([0-9]+(\.[0-9]+)?S)))?)|(T(([0-9]+H)([0-9]+M)?([0-9]+(\.[0-9]+)?S)?|([0-9]+M)([0-9]+(\.[0-9]+)?S)?|([0-9]+(\.[0-9]+)?S)))))$/,NM=/^(-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?))(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,mL=/^((([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?))(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,gL=/^(-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,bL=/^(-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,vL=/^(-?([1-9][0-9]{3,}|0[0-9]{3})(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,TL=/^(--(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,OL=/^(---(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,SL=/^(--(0[1-9]|1[0-2])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,FL=/^(([0-9a-fA-F]{2})*)$/,AL=/^(((([A-Za-z0-9+/] ?){4})*(([A-Za-z0-9+/] ?){3}[A-Za-z0-9+/]|([A-Za-z0-9+/] ?){2}[AEIMQUYcgkosw048] ?=|[A-Za-z0-9+/] ?[AQgw] ?= ?=))?)$/,wL=new ht(Ag,ze.xsd.string),EL=new W1(["1","true","0","false"],ze.xsd.boolean),jL=new ht(_L,ze.xsd.decimal),RL=new ht(MM,ze.xsd.float),DL=new ht(MM,ze.xsd.double),PL=new ht(Z1,ze.xsd.duration),ML=new ht(NM,ze.xsd.dateTime),NL=new ht(mL,ze.xsd.time),IL=new ht(gL,ze.xsd.date),qL=new ht(bL,ze.xsd.gYearMonth),LL=new ht(vL,ze.xsd.gYear),xL=new ht(TL,ze.xsd.gMonthDay),BL=new ht(OL,ze.xsd.gDay),CL=new ht(SL,ze.xsd.gMonth),QL=new ht(FL,ze.xsd.hexBinary),UL=new ht(AL,ze.xsd.base64Binary),VL=new ht(Ag,ze.xsd.anyURI),IM=/^([^\u000d\u000a\u0009]*)$/,GL=/^([^ ]+( [^ ]+)*)*$/,XL=/^([a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*)$/,zL=/^([^DT]*)$/,HL=/^([^YM]*[DT].*)$/,$L=/^(.*(Z|(\+|-)[0-9][0-9]:[0-9][0-9]))$/,JL=new ht([Ag,IM],ze.xsd.normalizedString),KL=new ht([Ag,IM,GL],ze.xsd.token),YL=new ht(XL,ze.xsd.language),WL=new rr(null,null,ze.xsd.integer),ZL=new rr(null,"0",ze.xsd.nonPositiveInteger),kL=new rr(null,"-1",ze.xsd.negativeInteger),e6=new rr("-9223372036854775808","9223372036854775807",ze.xsd.long),t6=new rr("-2147483648","2147483647",ze.xsd.int),r6=new rr("-32768","32767",ze.xsd.short),n6=new rr("-128","127",ze.xsd.byte),i6=new rr("0",null,ze.xsd.nonNegativeInteger),a6=new rr("0","18446744073709551615",ze.xsd.unsignedLong),o6=new rr("0","4294967295",ze.xsd.unsignedInt),u6=new rr("0","65535",ze.xsd.unsignedShort),s6=new rr("0","255",ze.xsd.unsignedByte),c6=new rr("1",null,ze.xsd.positiveInteger),l6=new ht([Z1,zL],ze.xsd.yearMonthDuration),d6=new ht([Z1,HL],ze.xsd.dayTimeDuration),f6=new ht([NM,$L],ze.xsd.dateTimeStamp),p6=Object.freeze(Object.defineProperty({__proto__:null,anyAtomicType:yL,anySimpleType:hL,anyURI:VL,base64Binary:UL,boolean:EL,byte:n6,date:IL,dateTime:ML,dateTimeStamp:f6,dayTimeDuration:d6,decimal:jL,double:DL,duration:PL,float:RL,gDay:BL,gMonth:CL,gMonthDay:xL,gYear:LL,gYearMonth:qL,hexBinary:QL,int:t6,integer:WL,language:YL,long:e6,negativeInteger:kL,nonNegativeInteger:i6,nonPositiveInteger:ZL,normalizedString:JL,positiveInteger:c6,short:r6,string:wL,time:NL,token:KL,unsignedByte:s6,unsignedInt:o6,unsignedLong:a6,unsignedShort:u6,yearMonthDuration:l6},Symbol.toStringTag,{value:"Module"}));class h6 extends fL{constructor({factory:r}={}){super({factory:r,validations:{...p6}})}}const y6=new rs([[W.BlankNode,new Set(["BlankNode"])],[W.BlankNodeOrIRI,new Set(["BlankNode","NamedNode"])],[W.BlankNodeOrLiteral,new Set(["BlankNode","Literal"])],[W.IRI,new Set(["NamedNode"])],[W.IRIOrLiteral,new Set(["NamedNode","Literal"])],[W.Literal,new Set(["Literal"])]]);function _6(i){const r=i.ptr.out([W.class]).map(o=>P1(o));return{generic:m6(r)}}function m6(i){return r=>{const o=new Or(r.valueOrNode.out([es.type]).terms);for(const n of i){const t=[...o].some(e=>n.has(e));r.test(t,W.ClassConstraintComponent,{value:r.valueOrNode})}}}function g6(i){const r=i.ptr.out([W.datatype]).term,o=new h6;return{generic:b6(r,o)}}function b6(i,r){return o=>{const n=i.equals(o.valueOrNode.term.datatype)&&r.validateSimple(o.valueOrNode.term);o.test(n,W.DatatypeConstraintComponent,{args:{datatype:i},message:[o.factory.literal("Value does not have datatype {$datatype}")],value:o.valueOrNode})}}function v6(i){const r=i.ptr.out([W.nodeKind]).term,o=y6.get(r);return{generic:T6(r,o)}}function T6(i,r){return o=>{o.test(r.has(o.valueOrNode.term.termType),W.NodeKindConstraintComponent,{args:{nodeKind:i},message:[o.factory.literal("Value does not have node kind {$nodeKind}")],value:o.valueOrNode})}}const O6=new rs([[W.maxCount,cq],[W.minCount,dq],[W.and,_q],[W.not,gq],[W.or,vq],[W.xone,Oq],[W.closed,Fq],[W.hasValue,wq],[W.in,Rq],[W.disjoint,Pq],[W.equals,Nq],[W.lessThan,Lq],[W.lessThanOrEquals,Bq],[W.maxExclusive,Qq],[W.maxInclusive,Vq],[W.minExclusive,Xq],[W.minInclusive,Hq],[W.node,Jq],[W.property,Yq],[W.qualifiedValueShape,Zq],[W.languageIn,tL],[W.maxLength,nL],[W.minLength,aL],[W.pattern,uL],[W.uniqueLang,cL],[W.class,_6],[W.datatype,g6],[W.nodeKind,v6]]);class Qz{constructor(r,{factory:o,...n}){if(this.factory=o,this.options=n,this.registry=new W5(O6),this.targetResolverRegistry=new sq(this.options.targetResolvers||[]),this.shapesPtr=new _g({dataset:r,factory:o}),this.shapes=new rs,this.options.coverage&&(this.options.debug=!0,this.options.details=!0,this.options.trace=!0),this.options.validations)for(const[e,a]of this.options.validations)this.registry.validations.set(e,a);const t=[...this.shapesPtr.hasOut([W.targetClass]),...this.shapesPtr.hasOut([W.targetNode]),...this.shapesPtr.hasOut([W.targetObjectsOf]),...this.shapesPtr.hasOut([W.targetSubjectsOf]),...this.shapesPtr.hasOut([W.target]),...this.shapesPtr.hasOut([es.type],[W.NodeShape]),...this.shapesPtr.hasOut([es.type],[W.PropertyShape])];for(const e of t)this.shape(e)}shape(r){if(!r.term)return null;let o=this.shapes.get(r.term);return o||(o=new uq(r,{validator:this}),this.shapes.set(r.term,o)),o}async validate(r,o){const n=new _g({...r,factory:this.factory}),t=new J5({factory:this.factory,focusNode:n,options:this.options,validator:this});o?o=o.map(e=>this.shape(this.shapesPtr.node(e.terms))):o=this.shapes.values();for(const e of o){const a=t.create({shape:e});let u;n.isAny()?u=await e.resolveTargets(a):u=n;for(const c of u)await e.validate(a.create({focusNode:c}))}return t.report}}var qn={},sc={},Ln={},cc={},xn={},lc={},Bn={},Cn={};var gg="@@__IMMUTABLE_INDEXED__@@";function or(i){return!!(i&&i[gg])}var bg="@@__IMMUTABLE_KEYED__@@";function ct(i){return!!(i&&i[bg])}function wg(i){return ct(i)||or(i)}var qM="@@__IMMUTABLE_ITERABLE__@@";function ur(i){return!!(i&&i[qM])}var Mt=function(r){return ur(r)?r:zt(r)},Fr=(function(i){function r(o){return ct(o)?o:gn(o)}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r})(Mt),is=(function(i){function r(o){return or(o)?o:wr(o)}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r})(Mt),Gs=(function(i){function r(o){return ur(o)&&!wg(o)?o:$s(o)}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r})(Mt);Mt.Keyed=Fr;Mt.Indexed=is;Mt.Set=Gs;var Xs=0,_r=1,mr=2,M1=typeof Symbol=="function"&&Symbol.iterator,LM="@@iterator",Eg=M1||LM,$e=function(r){this.next=r};$e.prototype.toString=function(){return"[Iterator]"};$e.KEYS=Xs;$e.VALUES=_r;$e.ENTRIES=mr;$e.prototype.inspect=$e.prototype.toSource=function(){return this.toString()};$e.prototype[Eg]=function(){return this};function ft(i,r,o,n){var t=i===Xs?r:i===_r?o:[r,o];return n?n.value=t:n={value:t,done:!1},n}function Xt(){return{value:void 0,done:!0}}function k1(i){return Array.isArray(i)?!0:!!jg(i)}function nT(i){return!!(i&&typeof i.next=="function")}function N1(i){var r=jg(i);return r&&r.call(i)}function jg(i){var r=i&&(M1&&i[M1]||i[LM]);if(typeof r=="function")return r}function S6(i){var r=jg(i);return r&&r===i.entries}function F6(i){var r=jg(i);return r&&r===i.keys}var im="delete",ut=5,yr=1<<ut,er=yr-1,He={};function I1(){return{value:!1}}function Tr(i){i&&(i.value=!0)}function e0(){}function Ds(i){return i.size===void 0&&(i.size=i.__iterate(xM)),i.size}function hn(i,r){if(typeof r!="number"){var o=r>>>0;if(""+o!==r||o===4294967295)return NaN;r=o}return r<0?Ds(i)+r:r}function xM(){return!0}function am(i,r,o){return(i===0&&!CM(i)||o!==void 0&&i<=-o)&&(r===void 0||o!==void 0&&r>=o)}function zs(i,r){return BM(i,r,0)}function om(i,r){return BM(i,r,r)}function BM(i,r,o){return i===void 0?o:CM(i)?r===1/0?r:Math.max(0,r+i)|0:r===void 0||r===i?i:Math.min(r,i)|0}function CM(i){return i<0||i===0&&1/i===-1/0}var QM="@@__IMMUTABLE_RECORD__@@";function mn(i){return!!(i&&i[QM])}function Ar(i){return ur(i)||mn(i)}var yn="@@__IMMUTABLE_ORDERED__@@";function Ir(i){return!!(i&&i[yn])}var UM="@@__IMMUTABLE_SEQ__@@";function Rg(i){return!!(i&&i[UM])}var Hs=Object.prototype.hasOwnProperty;function t0(i){return Array.isArray(i)||typeof i=="string"?!0:i&&typeof i=="object"&&Number.isInteger(i.length)&&i.length>=0&&(i.length===0?Object.keys(i).length===1:i.hasOwnProperty(i.length-1))}var zt=(function(i){function r(o){return o==null?n0():Ar(o)?o.toSeq():w6(o)}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.toSeq=function(){return this},r.prototype.toString=function(){return this.__toString("Seq {","}")},r.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},r.prototype.__iterate=function(n,t){var e=this._cache;if(e){for(var a=e.length,u=0;u!==a;){var c=e[t?a-++u:u++];if(n(c[1],c[0],this)===!1)break}return u}return this.__iterateUncached(n,t)},r.prototype.__iterator=function(n,t){var e=this._cache;if(e){var a=e.length,u=0;return new $e(function(){if(u===a)return Xt();var c=e[t?a-++u:u++];return ft(n,c[0],c[1])})}return this.__iteratorUncached(n,t)},r})(Mt),gn=(function(i){function r(o){return o==null?n0().toKeyedSeq():ur(o)?ct(o)?o.toSeq():o.fromEntrySeq():mn(o)?o.toSeq():i0(o)}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.toKeyedSeq=function(){return this},r})(zt),wr=(function(i){function r(o){return o==null?n0():ur(o)?ct(o)?o.entrySeq():o.toIndexedSeq():mn(o)?o.toSeq().entrySeq():VM(o)}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.of=function(){return r(arguments)},r.prototype.toIndexedSeq=function(){return this},r.prototype.toString=function(){return this.__toString("Seq [","]")},r})(zt),$s=(function(i){function r(o){return(ur(o)&&!wg(o)?o:wr(o)).toSetSeq()}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.of=function(){return r(arguments)},r.prototype.toSetSeq=function(){return this},r})(zt);zt.isSeq=Rg;zt.Keyed=gn;zt.Set=$s;zt.Indexed=wr;zt.prototype[UM]=!0;var Ps=(function(i){function r(o){this._array=o,this.size=o.length}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.get=function(n,t){return this.has(n)?this._array[hn(this,n)]:t},r.prototype.__iterate=function(n,t){for(var e=this._array,a=e.length,u=0;u!==a;){var c=t?a-++u:u++;if(n(e[c],c,this)===!1)break}return u},r.prototype.__iterator=function(n,t){var e=this._array,a=e.length,u=0;return new $e(function(){if(u===a)return Xt();var c=t?a-++u:u++;return ft(n,c,e[c])})},r})(wr),r0=(function(i){function r(o){var n=Object.keys(o).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(o):[]);this._object=o,this._keys=n,this.size=n.length}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.get=function(n,t){return t!==void 0&&!this.has(n)?t:this._object[n]},r.prototype.has=function(n){return Hs.call(this._object,n)},r.prototype.__iterate=function(n,t){for(var e=this._object,a=this._keys,u=a.length,c=0;c!==u;){var s=a[t?u-++c:c++];if(n(e[s],s,this)===!1)break}return c},r.prototype.__iterator=function(n,t){var e=this._object,a=this._keys,u=a.length,c=0;return new $e(function(){if(c===u)return Xt();var s=a[t?u-++c:c++];return ft(n,s,e[s])})},r})(gn);r0.prototype[yn]=!0;var A6=(function(i){function r(o){this._collection=o,this.size=o.length||o.size}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.__iterateUncached=function(n,t){if(t)return this.cacheResult().__iterate(n,t);var e=this._collection,a=N1(e),u=0;if(nT(a))for(var c;!(c=a.next()).done&&n(c.value,u++,this)!==!1;);return u},r.prototype.__iteratorUncached=function(n,t){if(t)return this.cacheResult().__iterator(n,t);var e=this._collection,a=N1(e);if(!nT(a))return new $e(Xt);var u=0;return new $e(function(){var c=a.next();return c.done?c:ft(n,u++,c.value)})},r})(wr),iT;function n0(){return iT||(iT=new Ps([]))}function i0(i){var r=a0(i);if(r)return r.fromEntrySeq();if(typeof i=="object")return new r0(i);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+i)}function VM(i){var r=a0(i);if(r)return r;throw new TypeError("Expected Array or collection object of values: "+i)}function w6(i){var r=a0(i);if(r)return S6(i)?r.fromEntrySeq():F6(i)?r.toSetSeq():r;if(typeof i=="object")return new r0(i);throw new TypeError("Expected Array or collection object of values, or keyed object: "+i)}function a0(i){return t0(i)?new Ps(i):k1(i)?new A6(i):void 0}function um(){return this.__ensureOwner()}function sm(){return this.__ownerID?this:this.__ensureOwner(new e0)}var dc=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(r,o){r|=0,o|=0;var n=r&65535,t=o&65535;return n*t+((r>>>16)*t+n*(o>>>16)<<16>>>0)|0};function Dg(i){return i>>>1&1073741824|i&3221225471}var E6=Object.prototype.valueOf;function ar(i){if(i==null)return aT(i);if(typeof i.hashCode=="function")return Dg(i.hashCode(i));var r=N6(i);if(r==null)return aT(r);switch(typeof r){case"boolean":return r?1108378657:1108378656;case"number":return j6(r);case"string":return r.length>I6?R6(r):q1(r);case"object":case"function":return P6(r);case"symbol":return D6(r);default:if(typeof r.toString=="function")return q1(r.toString());throw new Error("Value type "+typeof r+" cannot be hashed.")}}function aT(i){return i===null?1108378658:1108378659}function j6(i){if(i!==i||i===1/0)return 0;var r=i|0;for(r!==i&&(r^=i*4294967295);i>4294967295;)i/=4294967295,r^=i;return Dg(r)}function R6(i){var r=mb[i];return r===void 0&&(r=q1(i),_b===q6&&(_b=0,mb={}),_b++,mb[i]=r),r}function q1(i){for(var r=0,o=0;o<i.length;o++)r=31*r+i.charCodeAt(o)|0;return Dg(r)}function D6(i){var r=sT[i];return r!==void 0||(r=GM(),sT[i]=r),r}function P6(i){var r;if(L1&&(r=x1.get(i),r!==void 0)||(r=i[ku],r!==void 0)||!uT&&(r=i.propertyIsEnumerable&&i.propertyIsEnumerable[ku],r!==void 0||(r=M6(i),r!==void 0)))return r;if(r=GM(),L1)x1.set(i,r);else{if(oT!==void 0&&oT(i)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(uT)Object.defineProperty(i,ku,{enumerable:!1,configurable:!1,writable:!1,value:r});else if(i.propertyIsEnumerable!==void 0&&i.propertyIsEnumerable===i.constructor.prototype.propertyIsEnumerable)i.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},i.propertyIsEnumerable[ku]=r;else if(i.nodeType!==void 0)i[ku]=r;else throw new Error("Unable to set a non-enumerable property on object.")}return r}var oT=Object.isExtensible,uT=(function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}})();function M6(i){if(i&&i.nodeType>0)switch(i.nodeType){case 1:return i.uniqueID;case 9:return i.documentElement&&i.documentElement.uniqueID}}function N6(i){return i.valueOf!==E6&&typeof i.valueOf=="function"?i.valueOf(i):i}function GM(){var i=++yb;return yb&1073741824&&(yb=0),i}var L1=typeof WeakMap=="function",x1;L1&&(x1=new WeakMap);var sT=Object.create(null),yb=0,ku="__immutablehash__";typeof Symbol=="function"&&(ku=Symbol(ku));var I6=16,q6=255,_b=0,mb={},Pg=(function(i){function r(o,n){this._iter=o,this._useKeys=n,this.size=o.size}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.get=function(n,t){return this._iter.get(n,t)},r.prototype.has=function(n){return this._iter.has(n)},r.prototype.valueSeq=function(){return this._iter.valueSeq()},r.prototype.reverse=function(){var n=this,t=o0(this,!0);return this._useKeys||(t.valueSeq=function(){return n._iter.toSeq().reverse()}),t},r.prototype.map=function(n,t){var e=this,a=JM(this,n,t);return this._useKeys||(a.valueSeq=function(){return e._iter.toSeq().map(n,t)}),a},r.prototype.__iterate=function(n,t){var e=this;return this._iter.__iterate(function(a,u){return n(a,u,e)},t)},r.prototype.__iterator=function(n,t){return this._iter.__iterator(n,t)},r})(gn);Pg.prototype[yn]=!0;var XM=(function(i){function r(o){this._iter=o,this.size=o.size}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.includes=function(n){return this._iter.includes(n)},r.prototype.__iterate=function(n,t){var e=this,a=0;return t&&Ds(this),this._iter.__iterate(function(u){return n(u,t?e.size-++a:a++,e)},t)},r.prototype.__iterator=function(n,t){var e=this,a=this._iter.__iterator(_r,t),u=0;return t&&Ds(this),new $e(function(){var c=a.next();return c.done?c:ft(n,t?e.size-++u:u++,c.value,c)})},r})(wr),zM=(function(i){function r(o){this._iter=o,this.size=o.size}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.has=function(n){return this._iter.includes(n)},r.prototype.__iterate=function(n,t){var e=this;return this._iter.__iterate(function(a){return n(a,a,e)},t)},r.prototype.__iterator=function(n,t){var e=this._iter.__iterator(_r,t);return new $e(function(){var a=e.next();return a.done?a:ft(n,a.value,a.value,a)})},r})($s),HM=(function(i){function r(o){this._iter=o,this.size=o.size}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.entrySeq=function(){return this._iter.toSeq()},r.prototype.__iterate=function(n,t){var e=this;return this._iter.__iterate(function(a){if(a){lT(a);var u=ur(a);return n(u?a.get(1):a[1],u?a.get(0):a[0],e)}},t)},r.prototype.__iterator=function(n,t){var e=this._iter.__iterator(_r,t);return new $e(function(){for(;;){var a=e.next();if(a.done)return a;var u=a.value;if(u){lT(u);var c=ur(u);return ft(n,c?u.get(0):u[0],c?u.get(1):u[1],a)}}})},r})(gn);XM.prototype.cacheResult=Pg.prototype.cacheResult=zM.prototype.cacheResult=HM.prototype.cacheResult=c0;function $M(i){var r=$r(i);return r._iter=i,r.size=i.size,r.flip=function(){return i},r.reverse=function(){var o=i.reverse.apply(this);return o.flip=function(){return i.reverse()},o},r.has=function(o){return i.includes(o)},r.includes=function(o){return i.has(o)},r.cacheResult=c0,r.__iterateUncached=function(o,n){var t=this;return i.__iterate(function(e,a){return o(a,e,t)!==!1},n)},r.__iteratorUncached=function(o,n){if(o===mr){var t=i.__iterator(o,n);return new $e(function(){var e=t.next();if(!e.done){var a=e.value[0];e.value[0]=e.value[1],e.value[1]=a}return e})}return i.__iterator(o===_r?Xs:_r,n)},r}function JM(i,r,o){var n=$r(i);return n.size=i.size,n.has=function(t){return i.has(t)},n.get=function(t,e){var a=i.get(t,He);return a===He?e:r.call(o,a,t,i)},n.__iterateUncached=function(t,e){var a=this;return i.__iterate(function(u,c,s){return t(r.call(o,u,c,s),c,a)!==!1},e)},n.__iteratorUncached=function(t,e){var a=i.__iterator(mr,e);return new $e(function(){var u=a.next();if(u.done)return u;var c=u.value,s=c[0];return ft(t,s,r.call(o,c[1],s,i),u)})},n}function o0(i,r){var o=this,n=$r(i);return n._iter=i,n.size=i.size,n.reverse=function(){return i},i.flip&&(n.flip=function(){var t=$M(i);return t.reverse=function(){return i.flip()},t}),n.get=function(t,e){return i.get(r?t:-1-t,e)},n.has=function(t){return i.has(r?t:-1-t)},n.includes=function(t){return i.includes(t)},n.cacheResult=c0,n.__iterate=function(t,e){var a=this,u=0;return e&&Ds(i),i.__iterate(function(c,s){return t(c,r?s:e?a.size-++u:u++,a)},!e)},n.__iterator=function(t,e){var a=0;e&&Ds(i);var u=i.__iterator(mr,!e);return new $e(function(){var c=u.next();if(c.done)return c;var s=c.value;return ft(t,r?s[0]:e?o.size-++a:a++,s[1],c)})},n}function KM(i,r,o,n){var t=$r(i);return n&&(t.has=function(e){var a=i.get(e,He);return a!==He&&!!r.call(o,a,e,i)},t.get=function(e,a){var u=i.get(e,He);return u!==He&&r.call(o,u,e,i)?u:a}),t.__iterateUncached=function(e,a){var u=this,c=0;return i.__iterate(function(s,l,d){if(r.call(o,s,l,d))return c++,e(s,n?l:c-1,u)},a),c},t.__iteratorUncached=function(e,a){var u=i.__iterator(mr,a),c=0;return new $e(function(){for(;;){var s=u.next();if(s.done)return s;var l=s.value,d=l[0],f=l[1];if(r.call(o,f,d,i))return ft(e,n?d:c++,f,s)}})},t}function L6(i,r,o){var n=as().asMutable();return i.__iterate(function(t,e){n.update(r.call(o,t,e,i),0,function(a){return a+1})}),n.asImmutable()}function x6(i,r,o){var n=ct(i),t=(Ir(i)?Hr():as()).asMutable();i.__iterate(function(a,u){t.update(r.call(o,a,u,i),function(c){return c=c||[],c.push(n?[u,a]:a),c})});var e=s0(i);return t.map(function(a){return ot(i,e(a))}).asImmutable()}function B6(i,r,o){var n=ct(i),t=[[],[]];i.__iterate(function(a,u){t[r.call(o,a,u,i)?1:0].push(n?[u,a]:a)});var e=s0(i);return t.map(function(a){return ot(i,e(a))})}function u0(i,r,o,n){var t=i.size;if(am(r,o,t))return i;if(typeof t>"u"&&(r<0||o<0))return u0(i.toSeq().cacheResult(),r,o,n);var e=zs(r,t),a=om(o,t),u=a-e,c;u===u&&(c=u<0?0:u);var s=$r(i);return s.size=c===0?c:i.size&&c||void 0,!n&&Rg(i)&&c>=0&&(s.get=function(l,d){return l=hn(this,l),l>=0&&l<c?i.get(l+e,d):d}),s.__iterateUncached=function(l,d){var f=this;if(c===0)return 0;if(d)return this.cacheResult().__iterate(l,d);var h=0,p=!0,y=0;return i.__iterate(function(_,m){if(!(p&&(p=h++<e)))return y++,l(_,n?m:y-1,f)!==!1&&y!==c}),y},s.__iteratorUncached=function(l,d){if(c!==0&&d)return this.cacheResult().__iterator(l,d);if(c===0)return new $e(Xt);var f=i.__iterator(l,d),h=0,p=0;return new $e(function(){for(;h++<e;)f.next();if(++p>c)return Xt();var y=f.next();return n||l===_r||y.done?y:l===Xs?ft(l,p-1,void 0,y):ft(l,p-1,y.value[1],y)})},s}function C6(i,r,o){var n=$r(i);return n.__iterateUncached=function(t,e){var a=this;if(e)return this.cacheResult().__iterate(t,e);var u=0;return i.__iterate(function(c,s,l){return r.call(o,c,s,l)&&++u&&t(c,s,a)}),u},n.__iteratorUncached=function(t,e){var a=this;if(e)return this.cacheResult().__iterator(t,e);var u=i.__iterator(mr,e),c=!0;return new $e(function(){if(!c)return Xt();var s=u.next();if(s.done)return s;var l=s.value,d=l[0],f=l[1];return r.call(o,f,d,a)?t===mr?s:ft(t,d,f,s):(c=!1,Xt())})},n}function YM(i,r,o,n){var t=$r(i);return t.__iterateUncached=function(e,a){var u=this;if(a)return this.cacheResult().__iterate(e,a);var c=!0,s=0;return i.__iterate(function(l,d,f){if(!(c&&(c=r.call(o,l,d,f))))return s++,e(l,n?d:s-1,u)}),s},t.__iteratorUncached=function(e,a){var u=this;if(a)return this.cacheResult().__iterator(e,a);var c=i.__iterator(mr,a),s=!0,l=0;return new $e(function(){var d,f,h;do{if(d=c.next(),d.done)return n||e===_r?d:e===Xs?ft(e,l++,void 0,d):ft(e,l++,d.value[1],d);var p=d.value;f=p[0],h=p[1],s&&(s=r.call(o,h,f,u))}while(s);return e===mr?d:ft(e,f,h,d)})},t}var Q6=(function(i){function r(o){this._wrappedIterables=o.flatMap(function(n){return n._wrappedIterables?n._wrappedIterables:[n]}),this.size=this._wrappedIterables.reduce(function(n,t){if(n!==void 0){var e=t.size;if(e!==void 0)return n+e}},0),this[bg]=this._wrappedIterables[0][bg],this[gg]=this._wrappedIterables[0][gg],this[yn]=this._wrappedIterables[0][yn]}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.__iterateUncached=function(n,t){if(this._wrappedIterables.length!==0){if(t)return this.cacheResult().__iterate(n,t);for(var e=0,a=ct(this),u=a?mr:_r,c=this._wrappedIterables[e].__iterator(u,t),s=!0,l=0;s;){for(var d=c.next();d.done;){if(e++,e===this._wrappedIterables.length)return l;c=this._wrappedIterables[e].__iterator(u,t),d=c.next()}var f=a?n(d.value[1],d.value[0],this):n(d.value,l,this);s=f!==!1,l++}return l}},r.prototype.__iteratorUncached=function(n,t){var e=this;if(this._wrappedIterables.length===0)return new $e(Xt);if(t)return this.cacheResult().__iterator(n,t);var a=0,u=this._wrappedIterables[a].__iterator(n,t);return new $e(function(){for(var c=u.next();c.done;){if(a++,a===e._wrappedIterables.length)return c;u=e._wrappedIterables[a].__iterator(n,t),c=u.next()}return c})},r})(zt);function U6(i,r){var o=ct(i),n=[i].concat(r).map(function(e){return ur(e)?o&&(e=Fr(e)):e=o?i0(e):VM(Array.isArray(e)?e:[e]),e}).filter(function(e){return e.size!==0});if(n.length===0)return i;if(n.length===1){var t=n[0];if(t===i||o&&ct(t)||or(i)&&or(t))return t}return new Q6(n)}function WM(i,r,o){var n=$r(i);return n.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var a=0,u=!1;function c(s,l){s.__iterate(function(d,f){return(!r||l<r)&&ur(d)?c(d,l+1):(a++,t(d,o?f:a-1,n)===!1&&(u=!0)),!u},e)}return c(i,0),a},n.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var a=i.__iterator(t,e),u=[],c=0;return new $e(function(){for(;a;){var s=a.next();if(s.done!==!1){a=u.pop();continue}var l=s.value;if(t===mr&&(l=l[1]),(!r||u.length<r)&&ur(l))u.push(a),a=l.__iterator(t,e);else return o?s:ft(t,c++,l,s)}return Xt()})},n}function V6(i,r,o){var n=s0(i);return i.toSeq().map(function(t,e){return n(r.call(o,t,e,i))}).flatten(!0)}function G6(i,r){var o=$r(i);return o.size=i.size&&i.size*2-1,o.__iterateUncached=function(n,t){var e=this,a=0;return i.__iterate(function(u){return(!a||n(r,a++,e)!==!1)&&n(u,a++,e)!==!1},t),a},o.__iteratorUncached=function(n,t){var e=i.__iterator(_r,t),a=0,u;return new $e(function(){return(!u||a%2)&&(u=e.next(),u.done)?u:a%2?ft(n,a++,r):ft(n,a++,u.value,u)})},o}function Ms(i,r,o){r||(r=ZM);var n=ct(i),t=0,e=i.toSeq().map(function(a,u){return[u,a,t++,o?o(a,u,i):a]}).valueSeq().toArray();return e.sort(function(a,u){return r(a[3],u[3])||a[2]-u[2]}).forEach(n?function(a,u){e[u].length=2}:function(a,u){e[u]=a[1]}),n?gn(e):or(i)?wr(e):$s(e)}function Vm(i,r,o){if(r||(r=ZM),o){var n=i.toSeq().map(function(t,e){return[t,o(t,e,i)]}).reduce(function(t,e){return cT(r,t[1],e[1])?e:t});return n&&n[0]}return i.reduce(function(t,e){return cT(r,t,e)?e:t})}function cT(i,r,o){var n=i(o,r);return n===0&&o!==r&&(o==null||o!==o)||n>0}function Gm(i,r,o,n){var t=$r(i),e=new Ps(o).map(function(a){return a.size});return t.size=n?e.max():e.min(),t.__iterate=function(a,u){for(var c=this.__iterator(_r,u),s,l=0;!(s=c.next()).done&&a(s.value,l++,this)!==!1;);return l},t.__iteratorUncached=function(a,u){var c=o.map(function(d){return d=Mt(d),N1(u?d.reverse():d)}),s=0,l=!1;return new $e(function(){var d;return l||(d=c.map(function(f){return f.next()}),l=n?d.every(function(f){return f.done}):d.some(function(f){return f.done})),l?Xt():ft(a,s++,r.apply(null,d.map(function(f){return f.value})))})},t}function ot(i,r){return i===r?i:Rg(i)?r:i.constructor(r)}function lT(i){if(i!==Object(i))throw new TypeError("Expected [K, V] tuple: "+i)}function s0(i){return ct(i)?Fr:or(i)?is:Gs}function $r(i){return Object.create((ct(i)?gn:or(i)?wr:$s).prototype)}function c0(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):zt.prototype.cacheResult.call(this)}function ZM(i,r){return i===void 0&&r===void 0?0:i===void 0?1:r===void 0?-1:i>r?1:i<r?-1:0}function B1(i){return!!(i&&typeof i.equals=="function"&&typeof i.hashCode=="function")}function Pt(i,r){if(i===r||i!==i&&r!==r)return!0;if(!i||!r)return!1;if(typeof i.valueOf=="function"&&typeof r.valueOf=="function"){if(i=i.valueOf(),r=r.valueOf(),i===r||i!==i&&r!==r)return!0;if(!i||!r)return!1}return!!(B1(i)&&B1(r)&&i.equals(r))}function l0(i,r,o,n){return os(i,[r],o,n)}function kM(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];return tN(this,i)}function eN(i){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];if(typeof i!="function")throw new TypeError("Invalid merger function: "+i);return tN(this,r,i)}function tN(i,r,o){for(var n=[],t=0;t<r.length;t++){var e=Fr(r[t]);e.size!==0&&n.push(e)}return n.length===0?i:i.toSeq().size===0&&!i.__ownerID&&n.length===1?mn(i)?i:i.constructor(n[0]):i.withMutations(function(a){for(var u=o?function(s,l){l0(a,l,He,function(d){return d===He?s:o(d,s,l)})}:function(s,l){a.set(l,s)},c=0;c<n.length;c++)n[c].forEach(u)})}var X6=Object.prototype.toString;function d0(i){if(!i||typeof i!="object"||X6.call(i)!=="[object Object]")return!1;var r=Object.getPrototypeOf(i);if(r===null)return!0;for(var o=r,n=Object.getPrototypeOf(r);n!==null;)o=n,n=Object.getPrototypeOf(o);return o===r}function _n(i){return typeof i=="object"&&(Ar(i)||Array.isArray(i)||d0(i))}function Xr(i,r){r=r||0;for(var o=Math.max(0,i.length-r),n=new Array(o),t=0;t<o;t++)n[t]=i[t+r];return n}function vg(i){if(Array.isArray(i))return Xr(i);var r={};for(var o in i)Hs.call(i,o)&&(r[o]=i[o]);return r}function z6(i){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];return lm(i,r)}function H6(i,r){for(var o=[],n=arguments.length-2;n-- >0;)o[n]=arguments[n+2];return lm(r,o,i)}function $6(i){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];return cm(i,r)}function J6(i,r){for(var o=[],n=arguments.length-2;n-- >0;)o[n]=arguments[n+2];return cm(r,o,i)}function cm(i,r,o){return lm(i,r,K6(o))}function lm(i,r,o){if(!_n(i))throw new TypeError("Cannot merge into non-data-structure value: "+i);if(Ar(i))return typeof o=="function"&&i.mergeWith?i.mergeWith.apply(i,[o].concat(r)):i.merge?i.merge.apply(i,r):i.concat.apply(i,r);for(var n=Array.isArray(i),t=i,e=n?is:Fr,a=n?function(c){t===i&&(t=vg(t)),t.push(c)}:function(c,s){var l=Hs.call(t,s),d=l&&o?o(t[s],c,s):c;(!l||d!==t[s])&&(t===i&&(t=vg(t)),t[s]=d)},u=0;u<r.length;u++)e(r[u]).forEach(a);return t}function K6(i){function r(o,n,t){return _n(o)&&_n(n)&&Y6(o,n)?lm(o,[n],r):i?i(o,n,t):n}return r}function Y6(i,r){var o=zt(i),n=zt(r);return or(o)===or(n)&&ct(o)===ct(n)}function rN(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];return cm(this,i)}function nN(i){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];return cm(this,r,i)}function f0(i){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];return os(this,i,zr(),function(n){return cm(n,r)})}function p0(i){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];return os(this,i,zr(),function(n){return lm(n,r)})}function iN(i,r,o){return os(i,r,He,function(){return o})}function h0(i,r){return iN(this,i,r)}function y0(i,r,o){return arguments.length===1?i(this):l0(this,i,r,o)}function _0(i,r,o){return os(this,i,r,o)}function m0(){return this.__altered}function dm(i){var r=this.asMutable();return i(r),r.wasAltered()?r.__ensureOwner(this.__ownerID):this}var aN="@@__IMMUTABLE_MAP__@@";function Mg(i){return!!(i&&i[aN])}function J_(i,r){if(!i)throw new Error(r)}function hr(i){J_(i!==1/0,"Cannot perform this action with an infinite size.")}var as=(function(i){function r(o){return o==null?zr():Mg(o)&&!Ir(o)?o:zr().withMutations(function(n){var t=i(o);hr(t.size),t.forEach(function(e,a){return n.set(a,e)})})}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.__toString("Map {","}")},r.prototype.get=function(n,t){return this._root?this._root.get(0,void 0,n,t):t},r.prototype.set=function(n,t){return pT(this,n,t)},r.prototype.remove=function(n){return pT(this,n,He)},r.prototype.deleteAll=function(n){var t=Mt(n);return t.size===0?this:this.withMutations(function(e){t.forEach(function(a){return e.remove(a)})})},r.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):zr()},r.prototype.sort=function(n){return Hr(Ms(this,n))},r.prototype.sortBy=function(n,t){return Hr(Ms(this,t,n))},r.prototype.map=function(n,t){var e=this;return this.withMutations(function(a){a.forEach(function(u,c){a.set(c,n.call(t,u,c,e))})})},r.prototype.__iterator=function(n,t){return new W6(this,n,t)},r.prototype.__iterate=function(n,t){var e=this,a=0;return this._root&&this._root.iterate(function(u){return a++,n(u[1],u[0],e)},t),a},r.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?g0(this.size,this._root,n,this.__hash):this.size===0?zr():(this.__ownerID=n,this.__altered=!1,this)},r})(Fr);as.isMap=Mg;var pt=as.prototype;pt[aN]=!0;pt[im]=pt.remove;pt.removeAll=pt.deleteAll;pt.setIn=h0;pt.removeIn=pt.deleteIn=O0;pt.update=y0;pt.updateIn=_0;pt.merge=pt.concat=kM;pt.mergeWith=eN;pt.mergeDeep=rN;pt.mergeDeepWith=nN;pt.mergeIn=p0;pt.mergeDeepIn=f0;pt.withMutations=dm;pt.wasAltered=m0;pt.asImmutable=um;pt["@@transducer/init"]=pt.asMutable=sm;pt["@@transducer/step"]=function(i,r){return i.set(r[0],r[1])};pt["@@transducer/result"]=function(i){return i.asImmutable()};var Z_=function(r,o){this.ownerID=r,this.entries=o};Z_.prototype.get=function(r,o,n,t){for(var e=this.entries,a=0,u=e.length;a<u;a++)if(Pt(n,e[a][0]))return e[a][1];return t};Z_.prototype.update=function(r,o,n,t,e,a,u){for(var c=e===He,s=this.entries,l=0,d=s.length;l<d&&!Pt(t,s[l][0]);l++);var f=l<d;if(f?s[l][1]===e:c)return this;if(Tr(u),(c||!f)&&Tr(a),!(c&&s.length===1)){if(!f&&!c&&s.length>=n9)return Z6(r,s,t,e);var h=r&&r===this.ownerID,p=h?s:Xr(s);return f?c?l===d-1?p.pop():p[l]=p.pop():p[l]=[t,e]:p.push([t,e]),h?(this.entries=p,this):new Z_(r,p)}};var Ns=function(r,o,n){this.ownerID=r,this.bitmap=o,this.nodes=n};Ns.prototype.get=function(r,o,n,t){o===void 0&&(o=ar(n));var e=1<<((r===0?o:o>>>r)&er),a=this.bitmap;return(a&e)===0?t:this.nodes[oN(a&e-1)].get(r+ut,o,n,t)};Ns.prototype.update=function(r,o,n,t,e,a,u){n===void 0&&(n=ar(t));var c=(o===0?n:n>>>o)&er,s=1<<c,l=this.bitmap,d=(l&s)!==0;if(!d&&e===He)return this;var f=oN(l&s-1),h=this.nodes,p=d?h[f]:void 0,y=b0(p,r,o+ut,n,t,e,a,u);if(y===p)return this;if(!d&&y&&h.length>=i9)return e9(r,h,l,c,y);if(d&&!y&&h.length===2&&hT(h[f^1]))return h[f^1];if(d&&y&&h.length===1&&hT(y))return y;var _=r&&r===this.ownerID,m=d?y?l:l^s:l|s,O=d?y?uN(h,f,y,_):r9(h,f,_):t9(h,f,y,_);return _?(this.bitmap=m,this.nodes=O,this):new Ns(r,m,O)};var k_=function(r,o,n){this.ownerID=r,this.count=o,this.nodes=n};k_.prototype.get=function(r,o,n,t){o===void 0&&(o=ar(n));var e=(r===0?o:o>>>r)&er,a=this.nodes[e];return a?a.get(r+ut,o,n,t):t};k_.prototype.update=function(r,o,n,t,e,a,u){n===void 0&&(n=ar(t));var c=(o===0?n:n>>>o)&er,s=e===He,l=this.nodes,d=l[c];if(s&&!d)return this;var f=b0(d,r,o+ut,n,t,e,a,u);if(f===d)return this;var h=this.count;if(!d)h++;else if(!f&&(h--,h<a9))return k6(r,l,h,c);var p=r&&r===this.ownerID,y=uN(l,c,f,p);return p?(this.count=h,this.nodes=y,this):new k_(r,h,y)};var Is=function(r,o,n){this.ownerID=r,this.keyHash=o,this.entries=n};Is.prototype.get=function(r,o,n,t){for(var e=this.entries,a=0,u=e.length;a<u;a++)if(Pt(n,e[a][0]))return e[a][1];return t};Is.prototype.update=function(r,o,n,t,e,a,u){n===void 0&&(n=ar(t));var c=e===He;if(n!==this.keyHash)return c?this:(Tr(u),Tr(a),v0(this,r,o,n,[t,e]));for(var s=this.entries,l=0,d=s.length;l<d&&!Pt(t,s[l][0]);l++);var f=l<d;if(f?s[l][1]===e:c)return this;if(Tr(u),(c||!f)&&Tr(a),c&&d===2)return new an(r,this.keyHash,s[l^1]);var h=r&&r===this.ownerID,p=h?s:Xr(s);return f?c?l===d-1?p.pop():p[l]=p.pop():p[l]=[t,e]:p.push([t,e]),h?(this.entries=p,this):new Is(r,this.keyHash,p)};var an=function(r,o,n){this.ownerID=r,this.keyHash=o,this.entry=n};an.prototype.get=function(r,o,n,t){return Pt(n,this.entry[0])?this.entry[1]:t};an.prototype.update=function(r,o,n,t,e,a,u){var c=e===He,s=Pt(t,this.entry[0]);if(s?e===this.entry[1]:c)return this;if(Tr(u),c){Tr(a);return}return s?r&&r===this.ownerID?(this.entry[1]=e,this):new an(r,this.keyHash,[t,e]):(Tr(a),v0(this,r,o,ar(t),[t,e]))};Z_.prototype.iterate=Is.prototype.iterate=function(i,r){for(var o=this.entries,n=0,t=o.length-1;n<=t;n++)if(i(o[r?t-n:n])===!1)return!1};Ns.prototype.iterate=k_.prototype.iterate=function(i,r){for(var o=this.nodes,n=0,t=o.length-1;n<=t;n++){var e=o[r?t-n:n];if(e&&e.iterate(i,r)===!1)return!1}};an.prototype.iterate=function(i,r){return i(this.entry)};var W6=(function(i){function r(o,n,t){this._type=n,this._reverse=t,this._stack=o._root&&dT(o._root)}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.next=function(){for(var n=this._type,t=this._stack;t;){var e=t.node,a=t.index++,u=void 0;if(e.entry){if(a===0)return gb(n,e.entry)}else if(e.entries){if(u=e.entries.length-1,a<=u)return gb(n,e.entries[this._reverse?u-a:a])}else if(u=e.nodes.length-1,a<=u){var c=e.nodes[this._reverse?u-a:a];if(c){if(c.entry)return gb(n,c.entry);t=this._stack=dT(c,t)}continue}t=this._stack=this._stack.__prev}return Xt()},r})($e);function gb(i,r){return ft(i,r[0],r[1])}function dT(i,r){return{node:i,index:0,__prev:r}}function g0(i,r,o,n){var t=Object.create(pt);return t.size=i,t._root=r,t.__ownerID=o,t.__hash=n,t.__altered=!1,t}var fT;function zr(){return fT||(fT=g0(0))}function pT(i,r,o){var n,t;if(i._root){var e=I1(),a=I1();if(n=b0(i._root,i.__ownerID,0,void 0,r,o,e,a),!a.value)return i;t=i.size+(e.value?o===He?-1:1:0)}else{if(o===He)return i;t=1,n=new Z_(i.__ownerID,[[r,o]])}return i.__ownerID?(i.size=t,i._root=n,i.__hash=void 0,i.__altered=!0,i):n?g0(t,n):zr()}function b0(i,r,o,n,t,e,a,u){return i?i.update(r,o,n,t,e,a,u):e===He?i:(Tr(u),Tr(a),new an(r,n,[t,e]))}function hT(i){return i.constructor===an||i.constructor===Is}function v0(i,r,o,n,t){if(i.keyHash===n)return new Is(r,n,[i.entry,t]);var e=(o===0?i.keyHash:i.keyHash>>>o)&er,a=(o===0?n:n>>>o)&er,u,c=e===a?[v0(i,r,o+ut,n,t)]:(u=new an(r,n,t),e<a?[i,u]:[u,i]);return new Ns(r,1<<e|1<<a,c)}function Z6(i,r,o,n){i||(i=new e0);for(var t=new an(i,ar(o),[o,n]),e=0;e<r.length;e++){var a=r[e];t=t.update(i,0,void 0,a[0],a[1])}return t}function k6(i,r,o,n){for(var t=0,e=0,a=new Array(o),u=0,c=1,s=r.length;u<s;u++,c<<=1){var l=r[u];l!==void 0&&u!==n&&(t|=c,a[e++]=l)}return new Ns(i,t,a)}function e9(i,r,o,n,t){for(var e=0,a=new Array(yr),u=0;o!==0;u++,o>>>=1)a[u]=o&1?r[e++]:void 0;return a[n]=t,new k_(i,e+1,a)}function oN(i){return i-=i>>1&1431655765,i=(i&858993459)+(i>>2&858993459),i=i+(i>>4)&252645135,i+=i>>8,i+=i>>16,i&127}function uN(i,r,o,n){var t=n?i:Xr(i);return t[r]=o,t}function t9(i,r,o,n){var t=i.length+1;if(n&&r+1===t)return i[r]=o,i;for(var e=new Array(t),a=0,u=0;u<t;u++)u===r?(e[u]=o,a=-1):e[u]=i[u+a];return e}function r9(i,r,o){var n=i.length-1;if(o&&r===n)return i.pop(),i;for(var t=new Array(n),e=0,a=0;a<n;a++)a===r&&(e=1),t[a]=i[a+e];return t}var n9=yr/4,i9=yr/2,a9=yr/4;function sN(i){if(t0(i)&&typeof i!="string")return i;if(Ir(i))return i.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+i)}function em(i){try{return typeof i=="string"?JSON.stringify(i):String(i)}catch{return JSON.stringify(i)}}function cN(i,r){return Ar(i)?i.has(r):_n(i)&&Hs.call(i,r)}function T0(i,r,o){return Ar(i)?i.get(r,o):cN(i,r)?typeof i.get=="function"?i.get(r):i[r]:o}function lN(i,r){if(!_n(i))throw new TypeError("Cannot update non-data-structure value: "+i);if(Ar(i)){if(!i.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+i);return i.remove(r)}if(!Hs.call(i,r))return i;var o=vg(i);return Array.isArray(o)?o.splice(r,1):delete o[r],o}function dN(i,r,o){if(!_n(i))throw new TypeError("Cannot update non-data-structure value: "+i);if(Ar(i)){if(!i.set)throw new TypeError("Cannot update immutable value without .set() method: "+i);return i.set(r,o)}if(Hs.call(i,r)&&o===i[r])return i;var n=vg(i);return n[r]=o,n}function os(i,r,o,n){n||(n=o,o=void 0);var t=fN(Ar(i),i,sN(r),0,o,n);return t===He?o:t}function fN(i,r,o,n,t,e){var a=r===He;if(n===o.length){var u=a?t:r,c=e(u);return c===u?r:c}if(!a&&!_n(r))throw new TypeError("Cannot update within non-data-structure value in path ["+Array.from(o).slice(0,n).map(em)+"]: "+r);var s=o[n],l=a?He:T0(r,s,He),d=fN(l===He?i:Ar(l),l,o,n+1,t,e);return d===l?r:d===He?lN(r,s):dN(a?i?zr():{}:r,s,d)}function pN(i,r){return os(i,r,function(){return He})}function O0(i){return pN(this,i)}var hN="@@__IMMUTABLE_LIST__@@";function S0(i){return!!(i&&i[hN])}var fm=(function(i){function r(o){var n=dg();if(o==null)return n;if(S0(o))return o;var t=i(o),e=t.size;return e===0?n:(hr(e),e>0&&e<yr?tm(0,e,ut,null,new pn(t.toArray())):n.withMutations(function(a){a.setSize(e),t.forEach(function(u,c){return a.set(c,u)})}))}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.of=function(){return this(arguments)},r.prototype.toString=function(){return this.__toString("List [","]")},r.prototype.get=function(n,t){if(n=hn(this,n),n>=0&&n<this.size){n+=this._origin;var e=yN(this,n);return e&&e.array[n&er]}return t},r.prototype.set=function(n,t){return o9(this,n,t)},r.prototype.remove=function(n){return this.has(n)?n===0?this.shift():n===this.size-1?this.pop():this.splice(n,1):this},r.prototype.insert=function(n,t){return this.splice(n,0,t)},r.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=ut,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):dg()},r.prototype.push=function(){var n=arguments,t=this.size;return this.withMutations(function(e){fn(e,0,t+n.length);for(var a=0;a<n.length;a++)e.set(t+a,n[a])})},r.prototype.pop=function(){return fn(this,0,-1)},r.prototype.unshift=function(){var n=arguments;return this.withMutations(function(t){fn(t,-n.length);for(var e=0;e<n.length;e++)t.set(e,n[e])})},r.prototype.shift=function(){return fn(this,1)},r.prototype.shuffle=function(n){return n===void 0&&(n=Math.random),this.withMutations(function(t){for(var e=t.size,a,u;e;)a=Math.floor(n()*e--),u=t.get(a),t.set(a,t.get(e)),t.set(e,u)})},r.prototype.concat=function(){for(var n=arguments,t=[],e=0;e<arguments.length;e++){var a=n[e],u=i(typeof a!="string"&&k1(a)?a:[a]);u.size!==0&&t.push(u)}return t.length===0?this:this.size===0&&!this.__ownerID&&t.length===1?this.constructor(t[0]):this.withMutations(function(c){t.forEach(function(s){return s.forEach(function(l){return c.push(l)})})})},r.prototype.setSize=function(n){return fn(this,0,n)},r.prototype.map=function(n,t){var e=this;return this.withMutations(function(a){for(var u=0;u<e.size;u++)a.set(u,n.call(t,a.get(u),u,e))})},r.prototype.slice=function(n,t){var e=this.size;return am(n,t,e)?this:fn(this,zs(n,e),om(t,e))},r.prototype.__iterator=function(n,t){var e=t?this.size:0,a=yT(this,t);return new $e(function(){var u=a();return u===K_?Xt():ft(n,t?--e:e++,u)})},r.prototype.__iterate=function(n,t){for(var e=t?this.size:0,a=yT(this,t),u;(u=a())!==K_&&n(u,t?--e:e++,this)!==!1;);return e},r.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?tm(this._origin,this._capacity,this._level,this._root,this._tail,n,this.__hash):this.size===0?dg():(this.__ownerID=n,this.__altered=!1,this)},r})(is);fm.isList=S0;var wt=fm.prototype;wt[hN]=!0;wt[im]=wt.remove;wt.merge=wt.concat;wt.setIn=h0;wt.deleteIn=wt.removeIn=O0;wt.update=y0;wt.updateIn=_0;wt.mergeIn=p0;wt.mergeDeepIn=f0;wt.withMutations=dm;wt.wasAltered=m0;wt.asImmutable=um;wt["@@transducer/init"]=wt.asMutable=sm;wt["@@transducer/step"]=function(i,r){return i.push(r)};wt["@@transducer/result"]=function(i){return i.asImmutable()};var pn=function(r,o){this.array=r,this.ownerID=o};pn.prototype.removeBefore=function(r,o,n){if((n&(1<<o+ut)-1)===0||this.array.length===0)return this;var t=n>>>o&er;if(t>=this.array.length)return new pn([],r);var e=t===0,a;if(o>0){var u=this.array[t];if(a=u&&u.removeBefore(r,o-ut,n),a===u&&e)return this}if(e&&!a)return this;var c=qs(this,r);if(!e)for(var s=0;s<t;s++)c.array[s]=void 0;return a&&(c.array[t]=a),c};pn.prototype.removeAfter=function(r,o,n){if(n===(o?1<<o+ut:yr)||this.array.length===0)return this;var t=n-1>>>o&er;if(t>=this.array.length)return this;var e;if(o>0){var a=this.array[t];if(e=a&&a.removeAfter(r,o-ut,n),e===a&&t===this.array.length-1)return this}var u=qs(this,r);return u.array.splice(t+1),e&&(u.array[t]=e),u};var K_={};function yT(i,r){var o=i._origin,n=i._capacity,t=rm(n),e=i._tail;return a(i._root,i._level,0);function a(s,l,d){return l===0?u(s,d):c(s,l,d)}function u(s,l){var d=l===t?e&&e.array:s&&s.array,f=l>o?0:o-l,h=n-l;return h>yr&&(h=yr),function(){if(f===h)return K_;var p=r?--h:f++;return d&&d[p]}}function c(s,l,d){var f,h=s&&s.array,p=d>o?0:o-d>>l,y=(n-d>>l)+1;return y>yr&&(y=yr),function(){for(;;){if(f){var _=f();if(_!==K_)return _;f=null}if(p===y)return K_;var m=r?--y:p++;f=a(h&&h[m],l-ut,d+(m<<l))}}}}function tm(i,r,o,n,t,e,a){var u=Object.create(wt);return u.size=r-i,u._origin=i,u._capacity=r,u._level=o,u._root=n,u._tail=t,u.__ownerID=e,u.__hash=a,u.__altered=!1,u}function dg(){return tm(0,0,ut)}function o9(i,r,o){if(r=hn(i,r),r!==r)return i;if(r>=i.size||r<0)return i.withMutations(function(a){r<0?fn(a,r).set(0,o):fn(a,0,r+1).set(r,o)});r+=i._origin;var n=i._tail,t=i._root,e=I1();return r>=rm(i._capacity)?n=C1(n,i.__ownerID,0,r,o,e):t=C1(t,i.__ownerID,i._level,r,o,e),e.value?i.__ownerID?(i._root=t,i._tail=n,i.__hash=void 0,i.__altered=!0,i):tm(i._origin,i._capacity,i._level,t,n):i}function C1(i,r,o,n,t,e){var a=n>>>o&er,u=i&&a<i.array.length;if(!u&&t===void 0)return i;var c;if(o>0){var s=i&&i.array[a],l=C1(s,r,o-ut,n,t,e);return l===s?i:(c=qs(i,r),c.array[a]=l,c)}return u&&i.array[a]===t?i:(e&&Tr(e),c=qs(i,r),t===void 0&&a===c.array.length-1?c.array.pop():c.array[a]=t,c)}function qs(i,r){return r&&i&&r===i.ownerID?i:new pn(i?i.array.slice():[],r)}function yN(i,r){if(r>=rm(i._capacity))return i._tail;if(r<1<<i._level+ut){for(var o=i._root,n=i._level;o&&n>0;)o=o.array[r>>>n&er],n-=ut;return o}}function fn(i,r,o){r!==void 0&&(r|=0),o!==void 0&&(o|=0);var n=i.__ownerID||new e0,t=i._origin,e=i._capacity,a=t+r,u=o===void 0?e:o<0?e+o:t+o;if(a===t&&u===e)return i;if(a>=u)return i.clear();for(var c=i._level,s=i._root,l=0;a+l<0;)s=new pn(s&&s.array.length?[void 0,s]:[],n),c+=ut,l+=1<<c;l&&(a+=l,t+=l,u+=l,e+=l);for(var d=rm(e),f=rm(u);f>=1<<c+ut;)s=new pn(s&&s.array.length?[s]:[],n),c+=ut;var h=i._tail,p=f<d?yN(i,u-1):f>d?new pn([],n):h;if(h&&f>d&&a<e&&h.array.length){s=qs(s,n);for(var y=s,_=c;_>ut;_-=ut){var m=d>>>_&er;y=y.array[m]=qs(y.array[m],n)}y.array[d>>>ut&er]=h}if(u<e&&(p=p&&p.removeAfter(n,0,u)),a>=f)a-=f,u-=f,c=ut,s=null,p=p&&p.removeBefore(n,0,a);else if(a>t||f<d){for(l=0;s;){var O=a>>>c&er;if(O!==f>>>c&er)break;O&&(l+=(1<<c)*O),c-=ut,s=s.array[O]}s&&a>t&&(s=s.removeBefore(n,c,a-l)),s&&f<d&&(s=s.removeAfter(n,c,f-l)),l&&(a-=l,u-=l)}return i.__ownerID?(i.size=u-a,i._origin=a,i._capacity=u,i._level=c,i._root=s,i._tail=p,i.__hash=void 0,i.__altered=!0,i):tm(a,u,c,s,p)}function rm(i){return i<yr?0:i-1>>>ut<<ut}function F0(i){return Mg(i)&&Ir(i)}var Hr=(function(i){function r(o){return o==null?U_():F0(o)?o:U_().withMutations(function(n){var t=Fr(o);hr(t.size),t.forEach(function(e,a){return n.set(a,e)})})}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.of=function(){return this(arguments)},r.prototype.toString=function(){return this.__toString("OrderedMap {","}")},r.prototype.get=function(n,t){var e=this._map.get(n);return e!==void 0?this._list.get(e)[1]:t},r.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):U_()},r.prototype.set=function(n,t){return mT(this,n,t)},r.prototype.remove=function(n){return mT(this,n,He)},r.prototype.__iterate=function(n,t){var e=this;return this._list.__iterate(function(a){return a&&n(a[1],a[0],e)},t)},r.prototype.__iterator=function(n,t){return this._list.fromEntrySeq().__iterator(n,t)},r.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var t=this._map.__ensureOwner(n),e=this._list.__ensureOwner(n);return n?A0(t,e,n,this.__hash):this.size===0?U_():(this.__ownerID=n,this.__altered=!1,this._map=t,this._list=e,this)},r})(as);Hr.isOrderedMap=F0;Hr.prototype[yn]=!0;Hr.prototype[im]=Hr.prototype.remove;function A0(i,r,o,n){var t=Object.create(Hr.prototype);return t.size=i?i.size:0,t._map=i,t._list=r,t.__ownerID=o,t.__hash=n,t.__altered=!1,t}var _T;function U_(){return _T||(_T=A0(zr(),dg()))}function mT(i,r,o){var n=i._map,t=i._list,e=n.get(r),a=e!==void 0,u,c;if(o===He){if(!a)return i;t.size>=yr&&t.size>=n.size*2?(c=t.filter(function(s,l){return s!==void 0&&e!==l}),u=c.toKeyedSeq().map(function(s){return s[0]}).flip().toMap(),i.__ownerID&&(u.__ownerID=c.__ownerID=i.__ownerID)):(u=n.remove(r),c=e===t.size-1?t.pop():t.set(e,void 0))}else if(a){if(o===t.get(e)[1])return i;u=n,c=t.set(e,[r,o])}else u=n.set(r,t.size),c=t.set(t.size,[r,o]);return i.__ownerID?(i.size=u.size,i._map=u,i._list=c,i.__hash=void 0,i.__altered=!0,i):A0(u,c)}var _N="@@__IMMUTABLE_STACK__@@";function Tg(i){return!!(i&&i[_N])}var Ng=(function(i){function r(o){return o==null?Xm():Tg(o)?o:Xm().pushAll(o)}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.of=function(){return this(arguments)},r.prototype.toString=function(){return this.__toString("Stack [","]")},r.prototype.get=function(n,t){var e=this._head;for(n=hn(this,n);e&&n--;)e=e.next;return e?e.value:t},r.prototype.peek=function(){return this._head&&this._head.value},r.prototype.push=function(){var n=arguments;if(arguments.length===0)return this;for(var t=this.size+arguments.length,e=this._head,a=arguments.length-1;a>=0;a--)e={value:n[a],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):V_(t,e)},r.prototype.pushAll=function(n){if(n=i(n),n.size===0)return this;if(this.size===0&&Tg(n))return n;hr(n.size);var t=this.size,e=this._head;return n.__iterate(function(a){t++,e={value:a,next:e}},!0),this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):V_(t,e)},r.prototype.pop=function(){return this.slice(1)},r.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Xm()},r.prototype.slice=function(n,t){if(am(n,t,this.size))return this;var e=zs(n,this.size),a=om(t,this.size);if(a!==this.size)return i.prototype.slice.call(this,n,t);for(var u=this.size-e,c=this._head;e--;)c=c.next;return this.__ownerID?(this.size=u,this._head=c,this.__hash=void 0,this.__altered=!0,this):V_(u,c)},r.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?V_(this.size,this._head,n,this.__hash):this.size===0?Xm():(this.__ownerID=n,this.__altered=!1,this)},r.prototype.__iterate=function(n,t){var e=this;if(t)return new Ps(this.toArray()).__iterate(function(c,s){return n(c,s,e)},t);for(var a=0,u=this._head;u&&n(u.value,a++,this)!==!1;)u=u.next;return a},r.prototype.__iterator=function(n,t){if(t)return new Ps(this.toArray()).__iterator(n,t);var e=0,a=this._head;return new $e(function(){if(a){var u=a.value;return a=a.next,ft(n,e++,u)}return Xt()})},r})(is);Ng.isStack=Tg;var tr=Ng.prototype;tr[_N]=!0;tr.shift=tr.pop;tr.unshift=tr.push;tr.unshiftAll=tr.pushAll;tr.withMutations=dm;tr.wasAltered=m0;tr.asImmutable=um;tr["@@transducer/init"]=tr.asMutable=sm;tr["@@transducer/step"]=function(i,r){return i.unshift(r)};tr["@@transducer/result"]=function(i){return i.asImmutable()};function V_(i,r,o,n){var t=Object.create(tr);return t.size=i,t._head=r,t.__ownerID=o,t.__hash=n,t.__altered=!1,t}var gT;function Xm(){return gT||(gT=V_(0))}function bT(i,r,o,n,t,e){return hr(i.size),i.__iterate(function(a,u,c){t?(t=!1,o=a):o=r.call(n,o,a,u,c)},e),o}function u9(i,r){return r}function s9(i,r){return[r,i]}function bb(i){return function(){for(var r=[],o=arguments.length;o--;)r[o]=arguments[o];return!i.apply(this,r)}}function vT(i){return function(){for(var r=[],o=arguments.length;o--;)r[o]=arguments[o];return-i.apply(this,r)}}function TT(i,r){return i<r?1:i>r?-1:0}function w0(i,r){if(i===r)return!0;if(!ur(r)||i.size!==void 0&&r.size!==void 0&&i.size!==r.size||i.__hash!==void 0&&r.__hash!==void 0&&i.__hash!==r.__hash||ct(i)!==ct(r)||or(i)!==or(r)||Ir(i)!==Ir(r))return!1;if(i.size===0&&r.size===0)return!0;var o=!wg(i);if(Ir(i)){var n=i.entries();return r.every(function(c,s){var l=n.next().value;return l&&Pt(l[1],c)&&(o||Pt(l[0],s))})&&n.next().done}var t=!1;if(i.size===void 0)if(r.size===void 0)typeof i.cacheResult=="function"&&i.cacheResult();else{t=!0;var e=i;i=r,r=e}var a=!0,u=r.__iterate(function(c,s){if(o?!i.has(c):t?!Pt(c,i.get(s,He)):!Pt(i.get(s,He),c))return a=!1,!1});return a&&i.size===u}var mN=(function(i){function r(o,n,t){if(t===void 0&&(t=1),!(this instanceof r))return new r(o,n,t);if(J_(t!==0,"Cannot step a Range by 0"),J_(o!==void 0,"You must define a start value when using Range"),J_(n!==void 0,"You must define an end value when using Range"),t=Math.abs(t),n<o&&(t=-t),this._start=o,this._end=n,this._step=t,this.size=Math.max(0,Math.ceil((n-o)/t-1)+1),this.size===0){if(vb)return vb;vb=this}}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},r.prototype.get=function(n,t){return this.has(n)?this._start+hn(this,n)*this._step:t},r.prototype.includes=function(n){var t=(n-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},r.prototype.slice=function(n,t){return am(n,t,this.size)?this:(n=zs(n,this.size),t=om(t,this.size),t<=n?new r(0,0):new r(this.get(n,this._end),this.get(t,this._end),this._step))},r.prototype.indexOf=function(n){var t=n-this._start;if(t%this._step===0){var e=t/this._step;if(e>=0&&e<this.size)return e}return-1},r.prototype.lastIndexOf=function(n){return this.indexOf(n)},r.prototype.__iterate=function(n,t){for(var e=this.size,a=this._step,u=t?this._start+(e-1)*a:this._start,c=0;c!==e&&n(u,t?e-++c:c++,this)!==!1;)u+=t?-a:a;return c},r.prototype.__iterator=function(n,t){var e=this.size,a=this._step,u=t?this._start+(e-1)*a:this._start,c=0;return new $e(function(){if(c===e)return Xt();var s=u;return u+=t?-a:a,ft(n,t?e-++c:c++,s)})},r.prototype.equals=function(n){return n instanceof r?this._start===n._start&&this._end===n._end&&this._step===n._step:w0(this,n)},r})(wr),vb,gN="@@__IMMUTABLE_SET__@@";function Ig(i){return!!(i&&i[gN])}var pm=(function(i){function r(o){return o==null?G_():Ig(o)&&!Ir(o)?o:G_().withMutations(function(n){var t=i(o);hr(t.size),t.forEach(function(e){return n.add(e)})})}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.of=function(){return this(arguments)},r.fromKeys=function(n){return this(Fr(n).keySeq())},r.intersect=function(n){return n=Mt(n).toArray(),n.length?Ct.intersect.apply(r(n.pop()),n):G_()},r.union=function(n){return n=Mt(n).toArray(),n.length?Ct.union.apply(r(n.pop()),n):G_()},r.prototype.toString=function(){return this.__toString("Set {","}")},r.prototype.has=function(n){return this._map.has(n)},r.prototype.add=function(n){return zm(this,this._map.set(n,n))},r.prototype.remove=function(n){return zm(this,this._map.remove(n))},r.prototype.clear=function(){return zm(this,this._map.clear())},r.prototype.map=function(n,t){var e=this,a=!1,u=zm(this,this._map.mapEntries(function(c){var s=c[1],l=n.call(t,s,s,e);return l!==s&&(a=!0),[l,l]},t));return a?u:this},r.prototype.union=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return n=n.filter(function(e){return e.size!==0}),n.length===0?this:this.size===0&&!this.__ownerID&&n.length===1?this.constructor(n[0]):this.withMutations(function(e){for(var a=0;a<n.length;a++)typeof n[a]=="string"?e.add(n[a]):i(n[a]).forEach(function(u){return e.add(u)})})},r.prototype.intersect=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];if(n.length===0)return this;n=n.map(function(a){return i(a)});var e=[];return this.forEach(function(a){n.every(function(u){return u.includes(a)})||e.push(a)}),this.withMutations(function(a){e.forEach(function(u){a.remove(u)})})},r.prototype.subtract=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];if(n.length===0)return this;n=n.map(function(a){return i(a)});var e=[];return this.forEach(function(a){n.some(function(u){return u.includes(a)})&&e.push(a)}),this.withMutations(function(a){e.forEach(function(u){a.remove(u)})})},r.prototype.sort=function(n){return xs(Ms(this,n))},r.prototype.sortBy=function(n,t){return xs(Ms(this,t,n))},r.prototype.wasAltered=function(){return this._map.wasAltered()},r.prototype.__iterate=function(n,t){var e=this;return this._map.__iterate(function(a){return n(a,a,e)},t)},r.prototype.__iterator=function(n,t){return this._map.__iterator(n,t)},r.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var t=this._map.__ensureOwner(n);return n?this.__make(t,n):this.size===0?this.__empty():(this.__ownerID=n,this._map=t,this)},r})(Gs);pm.isSet=Ig;var Ct=pm.prototype;Ct[gN]=!0;Ct[im]=Ct.remove;Ct.merge=Ct.concat=Ct.union;Ct.withMutations=dm;Ct.asImmutable=um;Ct["@@transducer/init"]=Ct.asMutable=sm;Ct["@@transducer/step"]=function(i,r){return i.add(r)};Ct["@@transducer/result"]=function(i){return i.asImmutable()};Ct.__empty=G_;Ct.__make=bN;function zm(i,r){return i.__ownerID?(i.size=r.size,i._map=r,i):r===i._map?i:r.size===0?i.__empty():i.__make(r)}function bN(i,r){var o=Object.create(Ct);return o.size=i?i.size:0,o._map=i,o.__ownerID=r,o}var OT;function G_(){return OT||(OT=bN(zr()))}function E0(i,r,o){for(var n=sN(r),t=0;t!==n.length;)if(i=T0(i,n[t++],He),i===He)return o;return i}function vN(i,r){return E0(this,i,r)}function TN(i,r){return E0(i,r,He)!==He}function c9(i){return TN(this,i)}function ON(){hr(this.size);var i={};return this.__iterate(function(r,o){i[o]=r}),i}function Og(i){if(!i||typeof i!="object")return i;if(!ur(i)){if(!_n(i))return i;i=zt(i)}if(ct(i)){var r={};return i.__iterate(function(n,t){r[t]=Og(n)}),r}var o=[];return i.__iterate(function(n){o.push(Og(n))}),o}function l9(i){if(i.size===1/0)return 0;var r=Ir(i),o=ct(i),n=r?1:0;return i.__iterate(o?r?function(t,e){n=31*n+ST(ar(t),ar(e))|0}:function(t,e){n=n+ST(ar(t),ar(e))|0}:r?function(t){n=31*n+ar(t)|0}:function(t){n=n+ar(t)|0}),d9(i.size,n)}function d9(i,r){return r=dc(r,3432918353),r=dc(r<<15|r>>>-15,461845907),r=dc(r<<13|r>>>-13,5),r=(r+3864292196|0)^i,r=dc(r^r>>>16,2246822507),r=dc(r^r>>>13,3266489909),r=Dg(r^r>>>16),r}function ST(i,r){return i^r+2654435769+(i<<6)+(i>>2)|0}function us(i,r){var o=function(n){i.prototype[n]=r[n]};return Object.keys(r).forEach(o),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(r).forEach(o),i}Mt.Iterator=$e;us(Mt,{toArray:function(){hr(this.size);var r=new Array(this.size||0),o=ct(this),n=0;return this.__iterate(function(t,e){r[n++]=o?[e,t]:t}),r},toIndexedSeq:function(){return new XM(this)},toJS:function(){return Og(this)},toKeyedSeq:function(){return new Pg(this,!0)},toMap:function(){return as(this.toKeyedSeq())},toObject:ON,toOrderedMap:function(){return Hr(this.toKeyedSeq())},toOrderedSet:function(){return xs(ct(this)?this.valueSeq():this)},toSet:function(){return pm(ct(this)?this.valueSeq():this)},toSetSeq:function(){return new zM(this)},toSeq:function(){return or(this)?this.toIndexedSeq():ct(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Ng(ct(this)?this.valueSeq():this)},toList:function(){return fm(ct(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(r,o){return this.size===0?r+o:r+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+o},concat:function(){for(var r=[],o=arguments.length;o--;)r[o]=arguments[o];return ot(this,U6(this,r))},includes:function(r){return this.some(function(o){return Pt(o,r)})},entries:function(){return this.__iterator(mr)},every:function(r,o){hr(this.size);var n=!0;return this.__iterate(function(t,e,a){if(!r.call(o,t,e,a))return n=!1,!1}),n},filter:function(r,o){return ot(this,KM(this,r,o,!0))},partition:function(r,o){return B6(this,r,o)},find:function(r,o,n){var t=this.findEntry(r,o);return t?t[1]:n},forEach:function(r,o){return hr(this.size),this.__iterate(o?r.bind(o):r)},join:function(r){hr(this.size),r=r!==void 0?""+r:",";var o="",n=!0;return this.__iterate(function(t){n?n=!1:o+=r,o+=t!=null?t.toString():""}),o},keys:function(){return this.__iterator(Xs)},map:function(r,o){return ot(this,JM(this,r,o))},reduce:function(r,o,n){return bT(this,r,o,n,arguments.length<2,!1)},reduceRight:function(r,o,n){return bT(this,r,o,n,arguments.length<2,!0)},reverse:function(){return ot(this,o0(this,!0))},slice:function(r,o){return ot(this,u0(this,r,o,!0))},some:function(r,o){hr(this.size);var n=!1;return this.__iterate(function(t,e,a){if(r.call(o,t,e,a))return n=!0,!1}),n},sort:function(r){return ot(this,Ms(this,r))},values:function(){return this.__iterator(_r)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(r,o){return Ds(r?this.toSeq().filter(r,o):this)},countBy:function(r,o){return L6(this,r,o)},equals:function(r){return w0(this,r)},entrySeq:function(){var r=this;if(r._cache)return new Ps(r._cache);var o=r.toSeq().map(s9).toIndexedSeq();return o.fromEntrySeq=function(){return r.toSeq()},o},filterNot:function(r,o){return this.filter(bb(r),o)},findEntry:function(r,o,n){var t=n;return this.__iterate(function(e,a,u){if(r.call(o,e,a,u))return t=[a,e],!1}),t},findKey:function(r,o){var n=this.findEntry(r,o);return n&&n[0]},findLast:function(r,o,n){return this.toKeyedSeq().reverse().find(r,o,n)},findLastEntry:function(r,o,n){return this.toKeyedSeq().reverse().findEntry(r,o,n)},findLastKey:function(r,o){return this.toKeyedSeq().reverse().findKey(r,o)},first:function(r){return this.find(xM,null,r)},flatMap:function(r,o){return ot(this,V6(this,r,o))},flatten:function(r){return ot(this,WM(this,r,!0))},fromEntrySeq:function(){return new HM(this)},get:function(r,o){return this.find(function(n,t){return Pt(t,r)},void 0,o)},getIn:vN,groupBy:function(r,o){return x6(this,r,o)},has:function(r){return this.get(r,He)!==He},hasIn:c9,isSubset:function(r){return r=typeof r.includes=="function"?r:Mt(r),this.every(function(o){return r.includes(o)})},isSuperset:function(r){return r=typeof r.isSubset=="function"?r:Mt(r),r.isSubset(this)},keyOf:function(r){return this.findKey(function(o){return Pt(o,r)})},keySeq:function(){return this.toSeq().map(u9).toIndexedSeq()},last:function(r){return this.toSeq().reverse().first(r)},lastKeyOf:function(r){return this.toKeyedSeq().reverse().keyOf(r)},max:function(r){return Vm(this,r)},maxBy:function(r,o){return Vm(this,o,r)},min:function(r){return Vm(this,r?vT(r):TT)},minBy:function(r,o){return Vm(this,o?vT(o):TT,r)},rest:function(){return this.slice(1)},skip:function(r){return r===0?this:this.slice(Math.max(0,r))},skipLast:function(r){return r===0?this:this.slice(0,-Math.max(0,r))},skipWhile:function(r,o){return ot(this,YM(this,r,o,!0))},skipUntil:function(r,o){return this.skipWhile(bb(r),o)},sortBy:function(r,o){return ot(this,Ms(this,o,r))},take:function(r){return this.slice(0,Math.max(0,r))},takeLast:function(r){return this.slice(-Math.max(0,r))},takeWhile:function(r,o){return ot(this,C6(this,r,o))},takeUntil:function(r,o){return this.takeWhile(bb(r),o)},update:function(r){return r(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=l9(this))}});var Ht=Mt.prototype;Ht[qM]=!0;Ht[Eg]=Ht.values;Ht.toJSON=Ht.toArray;Ht.__toStringMapper=em;Ht.inspect=Ht.toSource=function(){return this.toString()};Ht.chain=Ht.flatMap;Ht.contains=Ht.includes;us(Fr,{flip:function(){return ot(this,$M(this))},mapEntries:function(r,o){var n=this,t=0;return ot(this,this.toSeq().map(function(e,a){return r.call(o,[a,e],t++,n)}).fromEntrySeq())},mapKeys:function(r,o){var n=this;return ot(this,this.toSeq().flip().map(function(t,e){return r.call(o,t,e,n)}).flip())}});var hm=Fr.prototype;hm[bg]=!0;hm[Eg]=Ht.entries;hm.toJSON=ON;hm.__toStringMapper=function(i,r){return em(r)+": "+em(i)};us(is,{toKeyedSeq:function(){return new Pg(this,!1)},filter:function(r,o){return ot(this,KM(this,r,o,!1))},findIndex:function(r,o){var n=this.findEntry(r,o);return n?n[0]:-1},indexOf:function(r){var o=this.keyOf(r);return o===void 0?-1:o},lastIndexOf:function(r){var o=this.lastKeyOf(r);return o===void 0?-1:o},reverse:function(){return ot(this,o0(this,!1))},slice:function(r,o){return ot(this,u0(this,r,o,!1))},splice:function(r,o){var n=arguments.length;if(o=Math.max(o||0,0),n===0||n===2&&!o)return this;r=zs(r,r<0?this.count():this.size);var t=this.slice(0,r);return ot(this,n===1?t:t.concat(Xr(arguments,2),this.slice(r+o)))},findLastIndex:function(r,o){var n=this.findLastEntry(r,o);return n?n[0]:-1},first:function(r){return this.get(0,r)},flatten:function(r){return ot(this,WM(this,r,!1))},get:function(r,o){return r=hn(this,r),r<0||this.size===1/0||this.size!==void 0&&r>this.size?o:this.find(function(n,t){return t===r},void 0,o)},has:function(r){return r=hn(this,r),r>=0&&(this.size!==void 0?this.size===1/0||r<this.size:this.indexOf(r)!==-1)},interpose:function(r){return ot(this,G6(this,r))},interleave:function(){var r=[this].concat(Xr(arguments)),o=Gm(this.toSeq(),wr.of,r),n=o.flatten(!0);return o.size&&(n.size=o.size*r.length),ot(this,n)},keySeq:function(){return mN(0,this.size)},last:function(r){return this.get(-1,r)},skipWhile:function(r,o){return ot(this,YM(this,r,o,!1))},zip:function(){var r=[this].concat(Xr(arguments));return ot(this,Gm(this,FT,r))},zipAll:function(){var r=[this].concat(Xr(arguments));return ot(this,Gm(this,FT,r,!0))},zipWith:function(r){var o=Xr(arguments);return o[0]=this,ot(this,Gm(this,r,o))}});var Js=is.prototype;Js[gg]=!0;Js[yn]=!0;us(Gs,{get:function(r,o){return this.has(r)?r:o},includes:function(r){return this.has(r)},keySeq:function(){return this.valueSeq()}});var Ls=Gs.prototype;Ls.has=Ht.includes;Ls.contains=Ls.includes;Ls.keys=Ls.values;us(gn,hm);us(wr,Js);us($s,Ls);function FT(){return Xr(arguments)}function j0(i){return Ig(i)&&Ir(i)}var xs=(function(i){function r(o){return o==null?Q1():j0(o)?o:Q1().withMutations(function(n){var t=Gs(o);hr(t.size),t.forEach(function(e){return n.add(e)})})}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.of=function(){return this(arguments)},r.fromKeys=function(n){return this(Fr(n).keySeq())},r.prototype.toString=function(){return this.__toString("OrderedSet {","}")},r})(pm);xs.isOrderedSet=j0;var ss=xs.prototype;ss[yn]=!0;ss.zip=Js.zip;ss.zipWith=Js.zipWith;ss.zipAll=Js.zipAll;ss.__empty=Q1;ss.__make=SN;function SN(i,r){var o=Object.create(ss);return o.size=i?i.size:0,o._map=i,o.__ownerID=r,o}var AT;function Q1(){return AT||(AT=SN(U_()))}var f9={LeftThenRight:-1,RightThenLeft:1};function p9(i){if(mn(i))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(Ar(i))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(i===null||typeof i!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var Rt=function(r,o){var n;p9(r);var t=function(u){var c=this;if(u instanceof t)return u;if(!(this instanceof t))return new t(u);if(!n){n=!0;var s=Object.keys(r),l=e._indices={};e._name=o,e._keys=s,e._defaultValues=r;for(var d=0;d<s.length;d++){var f=s[d];l[f]=d,e[f]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+D0(this)+' with property "'+f+'" since that property name is part of the Record API.'):h9(e,f)}}return this.__ownerID=void 0,this._values=fm().withMutations(function(h){h.setSize(c._keys.length),Fr(u).forEach(function(p,y){h.set(c._indices[y],p===c._defaultValues[y]?void 0:p)})}),this},e=t.prototype=Object.create(lt);return e.constructor=t,o&&(t.displayName=o),t};Rt.prototype.toString=function(){for(var r=D0(this)+" { ",o=this._keys,n,t=0,e=o.length;t!==e;t++)n=o[t],r+=(t?", ":"")+n+": "+em(this.get(n));return r+" }"};Rt.prototype.equals=function(r){return this===r||mn(r)&&Bs(this).equals(Bs(r))};Rt.prototype.hashCode=function(){return Bs(this).hashCode()};Rt.prototype.has=function(r){return this._indices.hasOwnProperty(r)};Rt.prototype.get=function(r,o){if(!this.has(r))return o;var n=this._indices[r],t=this._values.get(n);return t===void 0?this._defaultValues[r]:t};Rt.prototype.set=function(r,o){if(this.has(r)){var n=this._values.set(this._indices[r],o===this._defaultValues[r]?void 0:o);if(n!==this._values&&!this.__ownerID)return R0(this,n)}return this};Rt.prototype.remove=function(r){return this.set(r)};Rt.prototype.clear=function(){var r=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:R0(this,r)};Rt.prototype.wasAltered=function(){return this._values.wasAltered()};Rt.prototype.toSeq=function(){return Bs(this)};Rt.prototype.toJS=function(){return Og(this)};Rt.prototype.entries=function(){return this.__iterator(mr)};Rt.prototype.__iterator=function(r,o){return Bs(this).__iterator(r,o)};Rt.prototype.__iterate=function(r,o){return Bs(this).__iterate(r,o)};Rt.prototype.__ensureOwner=function(r){if(r===this.__ownerID)return this;var o=this._values.__ensureOwner(r);return r?R0(this,o,r):(this.__ownerID=r,this._values=o,this)};Rt.isRecord=mn;Rt.getDescriptiveName=D0;var lt=Rt.prototype;lt[QM]=!0;lt[im]=lt.remove;lt.deleteIn=lt.removeIn=O0;lt.getIn=vN;lt.hasIn=Ht.hasIn;lt.merge=kM;lt.mergeWith=eN;lt.mergeIn=p0;lt.mergeDeep=rN;lt.mergeDeepWith=nN;lt.mergeDeepIn=f0;lt.setIn=h0;lt.update=y0;lt.updateIn=_0;lt.withMutations=dm;lt.asMutable=sm;lt.asImmutable=um;lt[Eg]=lt.entries;lt.toJSON=lt.toObject=Ht.toObject;lt.inspect=lt.toSource=function(){return this.toString()};function R0(i,r,o){var n=Object.create(Object.getPrototypeOf(i));return n._values=r,n.__ownerID=o,n}function D0(i){return i.constructor.displayName||i.constructor.name||"Record"}function Bs(i){return i0(i._keys.map(function(r){return[r,i.get(r)]}))}function h9(i,r){try{Object.defineProperty(i,r,{get:function(){return this.get(r)},set:function(o){J_(this.__ownerID,"Cannot set on an immutable record."),this.set(r,o)}})}catch{}}var y9=(function(i){function r(o,n){if(!(this instanceof r))return new r(o,n);if(this._value=o,this.size=n===void 0?1/0:Math.max(0,n),this.size===0){if(Tb)return Tb;Tb=this}}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},r.prototype.get=function(n,t){return this.has(n)?this._value:t},r.prototype.includes=function(n){return Pt(this._value,n)},r.prototype.slice=function(n,t){var e=this.size;return am(n,t,e)?this:new r(this._value,om(t,e)-zs(n,e))},r.prototype.reverse=function(){return this},r.prototype.indexOf=function(n){return Pt(this._value,n)?0:-1},r.prototype.lastIndexOf=function(n){return Pt(this._value,n)?this.size:-1},r.prototype.__iterate=function(n,t){for(var e=this.size,a=0;a!==e&&n(this._value,t?e-++a:a++,this)!==!1;);return a},r.prototype.__iterator=function(n,t){var e=this,a=this.size,u=0;return new $e(function(){return u===a?Xt():ft(n,t?a-++u:u++,e._value)})},r.prototype.equals=function(n){return n instanceof r?Pt(this._value,n._value):w0(this,n)},r})(wr),Tb;function _9(i,r){return FN([],r||m9,i,"",r&&r.length>2?[]:void 0,{"":i})}function FN(i,r,o,n,t,e){if(typeof o!="string"&&!Ar(o)&&(t0(o)||k1(o)||d0(o))){if(~i.indexOf(o))throw new TypeError("Cannot convert circular structure to Immutable");i.push(o),t&&n!==""&&t.push(n);var a=r.call(e,n,zt(o).map(function(u,c){return FN(i,r,u,c,t,o)}),t&&t.slice());return i.pop(),t&&t.pop(),a}return o}function m9(i,r){return or(r)?r.toList():ct(r)?r.toMap():r.toSet()}var g9="5.1.4",b9=Mt;const v9=Object.freeze(Object.defineProperty({__proto__:null,Collection:Mt,Iterable:b9,List:fm,Map:as,OrderedMap:Hr,OrderedSet:xs,PairSorting:f9,Range:mN,Record:Rt,Repeat:y9,Seq:zt,Set:pm,Stack:Ng,fromJS:_9,get:T0,getIn:E0,has:cN,hasIn:TN,hash:ar,is:Pt,isAssociative:wg,isCollection:ur,isImmutable:Ar,isIndexed:or,isKeyed:ct,isList:S0,isMap:Mg,isOrdered:Ir,isOrderedMap:F0,isOrderedSet:j0,isPlainObject:d0,isRecord:mn,isSeq:Rg,isSet:Ig,isStack:Tg,isValueObject:B1,merge:z6,mergeDeep:$6,mergeDeepWith:J6,mergeWith:H6,remove:lN,removeIn:pN,set:dN,setIn:iN,update:l0,updateIn:os,version:g9},Symbol.toStringTag,{value:"Module"})),P0=wM(v9);var wT;function AN(){if(wT)return Cn;wT=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.ActionContextKey=Cn.ActionContext=void 0;const i=P0;let r=class X_{constructor(t={}){this.map=(0,i.Map)(t)}setDefault(t,e){return this.has(t)?this:this.set(t,e)}set(t,e){return this.setRaw(t.name,e)}setRaw(t,e){return new X_(this.map.set(t,e))}delete(t){return new X_(this.map.delete(t.name))}get(t){return this.getRaw(t.name)}getRaw(t){return this.map.get(t)}getSafe(t){if(!this.has(t))throw new Error(`Context entry ${t.name} is required but not available`);return this.get(t)}has(t){return this.hasRaw(t.name)}hasRaw(t){return this.map.has(t)}merge(...t){let e=this;for(const a of t)for(const u of a.keys())e=e.set(u,a.get(u));return e}keys(){return[...this.map.keys()].map(t=>new o(t))}toJS(){return this.map.toJS()}toString(){return`ActionContext(${JSON.stringify(this.map.toJS())})`}[Symbol.for("nodejs.util.inspect.custom")](){return`ActionContext(${JSON.stringify(this.map.toJS(),null,"  ")})`}static ensureActionContext(t){return t instanceof X_?t:new X_((0,i.Map)(t??{}))}};Cn.ActionContext=r;class o{constructor(t){this.name=t}}return Cn.ActionContextKey=o,Cn}var fc={},ET;function wN(){if(ET)return fc;ET=1,Object.defineProperty(fc,"__esModule",{value:!0}),fc.Bus=void 0;let i=class{constructor(o){this.actors=[],this.observers=[],this.dependencyLinks=new Map,Object.assign(this,o),this.failMessage=`All actors over bus ${this.name} failed to handle an action`}subscribe(o){this.actors.push(o),this.reorderForDependencies()}subscribeObserver(o){this.observers.push(o)}unsubscribe(o){const n=this.actors.indexOf(o);return n>=0?(this.actors.splice(n,1),!0):!1}unsubscribeObserver(o){const n=this.observers.indexOf(o);return n>=0?(this.observers.splice(n,1),!0):!1}publish(o){return this.actors.map(n=>({actor:n,reply:n.test(o)}))}onRun(o,n,t){for(const e of this.observers)e.onRun(o,n,t)}addDependencies(o,n){for(const t of n){let e=this.dependencyLinks.get(t);e||(e=[],this.dependencyLinks.set(t,e)),e.push(o)}this.reorderForDependencies()}reorderForDependencies(){if(this.dependencyLinks.size>0){const o=[];for(const n of this.dependencyLinks.keys()){const t=this.actors.indexOf(n);t>=0&&(this.actors.splice(t,1),o.push(n))}for(;o.length>0;){let n=-1;for(let e=0;e<o.length;e++){let a=!0;for(const u of this.dependencyLinks.get(o[e]))if(!this.actors.includes(u)&&o.includes(u)){a=!1;break}if(a){n=e;break}}if(n<0)throw new Error(`Cyclic dependency links detected in bus ${this.name}`);const t=o.splice(n,1)[0];this.actors.push(t)}}}};return fc.Bus=i,fc}var pc={},jT;function T9(){if(jT)return pc;jT=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.BusIndexed=void 0;const i=wN();let r=class extends i.Bus{constructor(n){super(n),this.actorsIndex={}}subscribe(n){const t=this.getActorIdentifiers(n)??["_undefined_"];for(const e of t){let a=this.actorsIndex[e];a||(a=this.actorsIndex[e]=[]),a.push(n),super.subscribe(n)}}unsubscribe(n){const t=this.getActorIdentifiers(n)??["_undefined_"];let e=!1;for(const a of t){const u=this.actorsIndex[a];if(u){const c=u.indexOf(n);c>=0&&u.splice(c,1),u.length===0&&delete this.actorsIndex[a]}e=e||super.unsubscribe(n)}return e}publish(n){const t=this.getActionIdentifier(n);return t?[...this.actorsIndex[t]||[],...this.actorsIndex._undefined_||[]].map(a=>({actor:a,reply:a.test(n)})):super.publish(n)}getActorIdentifiers(n){const t=this.actorIdentifierFields.reduce((e,a)=>e[a],n);if(t)return Array.isArray(t)?t:[t]}getActionIdentifier(n){return this.actionIdentifierFields.reduce((t,e)=>t[e],n)}};return pc.BusIndexed=r,pc}var hc={},RT;function EN(){if(RT)return hc;RT=1,Object.defineProperty(hc,"__esModule",{value:!0}),hc.CONTEXT_KEY_LOGGER=void 0;const i=AN();return hc.CONTEXT_KEY_LOGGER=new i.ActionContextKey("@comunica/core:log"),hc}var yc={},DT;function O9(){if(DT)return yc;DT=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.ActionObserver=void 0;let i=class{constructor(o){Object.assign(this,o)}};return yc.ActionObserver=i,yc}var _c={},PT;function S9(){if(PT)return _c;PT=1,Object.defineProperty(_c,"__esModule",{value:!0}),_c.Actor=void 0;const i=EN();let r=class Wu{constructor(n){this.beforeActors=[],Object.assign(this,n),this.bus.subscribe(this),this.beforeActors.length>0&&this.bus.addDependencies(this,this.beforeActors),n.busFailMessage&&(this.bus.failMessage=n.busFailMessage)}static getContextLogger(n){return n.get(i.CONTEXT_KEY_LOGGER)}runObservable(n,t){const e=this.run(n,t);return this.bus.onRun(this,n,e),e}getDefaultLogData(n,t){const e=t?t():{};return e.actor=this.name,e}logTrace(n,t,e){const a=Wu.getContextLogger(n);a&&a.trace(t,this.getDefaultLogData(n,e))}logDebug(n,t,e){const a=Wu.getContextLogger(n);a&&a.debug(t,this.getDefaultLogData(n,e))}logInfo(n,t,e){const a=Wu.getContextLogger(n);a&&a.info(t,this.getDefaultLogData(n,e))}logWarn(n,t,e){const a=Wu.getContextLogger(n);a&&a.warn(t,this.getDefaultLogData(n,e))}logError(n,t,e){const a=Wu.getContextLogger(n);a&&a.error(t,this.getDefaultLogData(n,e))}logFatal(n,t,e){const a=Wu.getContextLogger(n);a&&a.fatal(t,this.getDefaultLogData(n,e))}};return _c.Actor=r,_c}var mc={},MT;function F9(){if(MT)return mc;MT=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.Mediator=void 0;let i=class U1{constructor(o){Object.assign(this,o)}publish(o){const n=this.bus.publish(o);if(n.length===0)throw new Error(`No actors are able to reply to a message in the bus ${this.bus.name}`);return n}async mediateActor(o){return await this.mediateWith(o,this.publish(o))}async mediateTestable(o){return(await this.mediateActor(o)).mapAsync((t,e)=>t.runObservable(o,e))}async mediate(o){return(await this.mediateTestable(o)).getOrThrow()}constructFailureMessage(o,n){const t=`
        `;return`${this.bus.failMessage.replaceAll(/\$\{(.*?)\}/gu,(a,u)=>U1.getObjectValue({action:o},u.split("."))||a)}
    Error messages of failing actors:${t}${n.join(t)}`}static getObjectValue(o,n){if(n.length===0)return o;if(o)return U1.getObjectValue(o[n[0]],n.slice(1))}};return mc.Mediator=i,mc}var xt={},NT;function A9(){if(NT)return xt;NT=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.TestResultFailed=xt.TestResultPassed=xt.failTest=xt.passTestVoidWithSideData=xt.passTestWithSideData=xt.passTestVoid=xt.passTest=void 0;function i(u){return new e(u,void 0)}xt.passTest=i;function r(){return new e(!0,void 0)}xt.passTestVoid=r;function o(u,c){return new e(u,c)}xt.passTestWithSideData=o;function n(u){return new e(!0,u)}xt.passTestVoidWithSideData=n;function t(u){return new a(u)}xt.failTest=t;class e{constructor(c,s){this.value=c,this.sideData=s}isPassed(){return!0}isFailed(){return!1}get(){return this.value}getOrThrow(){return this.value}getSideData(){return this.sideData}getFailMessage(){}map(c){return new e(c(this.value,this.sideData),this.sideData)}async mapAsync(c){return new e(await c(this.value,this.sideData),this.sideData)}}xt.TestResultPassed=e;class a{constructor(c){this.failMessage=c}isPassed(){return!1}isFailed(){return!0}get(){}getOrThrow(){throw new Error(this.getFailMessage())}getSideData(){throw new Error(this.getFailMessage())}getFailMessage(){return this.failMessage}map(){return this}async mapAsync(){return this}}return xt.TestResultFailed=a,xt}var IT;function ae(){return IT||(IT=1,(function(i){var r=Bn&&Bn.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Bn&&Bn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(AN(),i),o(wN(),i),o(T9(),i),o(EN(),i),o(O9(),i),o(S9(),i),o(F9(),i),o(A9(),i)})(Bn)),Bn}var qT;function w9(){if(qT)return lc;qT=1,Object.defineProperty(lc,"__esModule",{value:!0}),lc.ActorInit=void 0;const i=ae();let r=class extends i.Actor{constructor(n){super(n)}};return lc.ActorInit=r,lc}var LT;function E9(){return LT||(LT=1,(function(i){var r=xn&&xn.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=xn&&xn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(w9(),i)})(xn)),xn}var xT;function jN(){if(xT)return cc;xT=1,Object.defineProperty(cc,"__esModule",{value:!0}),cc.ActorInitQueryBase=void 0;const i=E9(),r=ae();let o=class extends i.ActorInit{async test(t){return(0,r.passTestVoid)()}async run(t){throw new Error("ActorInitSparql#run is not supported in the browser.")}};return cc.ActorInitQueryBase=o,cc}var gc={},BT;function j9(){if(BT)return gc;BT=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.ActorInitQuery=void 0;const i=jN();typeof process>"u"&&(globalThis.process=M5());class r extends i.ActorInitQueryBase{}return gc.ActorInitQuery=r,gc}var bc={},Qn={},Je={},CT;function RN(){if(CT)return Je;CT=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.KeysStatistics=Je.KeysRdfJoin=Je.KeysMergeBindingsContext=Je.KeysRdfUpdateQuads=Je.KeysQuerySourceIdentify=Je.KeysRdfParseHtmlScript=Je.KeysRdfParseJsonLd=Je.KeysQueryOperation=Je.KeysExpressionEvaluator=Je.KeysInitQuery=Je.KeysHttpProxy=Je.KeysHttpMemento=Je.KeysHttpWayback=Je.KeysHttp=Je.KeysCore=void 0;const i=ae();return Je.KeysCore={log:i.CONTEXT_KEY_LOGGER},Je.KeysHttp={includeCredentials:new i.ActionContextKey("@comunica/bus-http:include-credentials"),auth:new i.ActionContextKey("@comunica/bus-http:auth"),fetch:new i.ActionContextKey("@comunica/bus-http:fetch"),httpTimeout:new i.ActionContextKey("@comunica/bus-http:http-timeout"),httpBodyTimeout:new i.ActionContextKey("@comunica/bus-http:http-body-timeout"),httpRetryCount:new i.ActionContextKey("@comunica/bus-http:http-retry-count"),httpRetryDelayFallback:new i.ActionContextKey("@comunica/bus-http:http-retry-delay-fallback"),httpRetryDelayLimit:new i.ActionContextKey("@comunica/bus-http:http-retry-delay-limit"),httpRetryStatusCodes:new i.ActionContextKey("@comunica/bus-http:http-retry-status-codes")},Je.KeysHttpWayback={recoverBrokenLinks:new i.ActionContextKey("@comunica/bus-http:recover-broken-links")},Je.KeysHttpMemento={datetime:new i.ActionContextKey("@comunica/actor-http-memento:datetime")},Je.KeysHttpProxy={httpProxyHandler:new i.ActionContextKey("@comunica/actor-http-proxy:httpProxyHandler")},Je.KeysInitQuery={querySourcesUnidentified:new i.ActionContextKey("@comunica/actor-init-query:querySourcesUnidentified"),initialBindings:new i.ActionContextKey("@comunica/actor-init-query:initialBindings"),queryFormat:new i.ActionContextKey("@comunica/actor-init-query:queryFormat"),graphqlSingularizeVariables:new i.ActionContextKey("@comunica/actor-init-query:singularizeVariables"),lenient:new i.ActionContextKey("@comunica/actor-init-query:lenient"),queryString:new i.ActionContextKey("@comunica/actor-init-query:queryString"),query:new i.ActionContextKey("@comunica/actor-init-query:query"),baseIRI:new i.ActionContextKey("@comunica/actor-init-query:baseIRI"),fileBaseIRI:new i.ActionContextKey("@comunica/actor-init-query:fileBaseIRI"),functionArgumentsCache:new i.ActionContextKey("@comunica/actor-init-query:functionArgumentsCache"),queryTimestamp:new i.ActionContextKey("@comunica/actor-init-query:queryTimestamp"),queryTimestampHighResolution:new i.ActionContextKey("@comunica/actor-init-query:queryTimestampHighResolution"),extensionFunctionCreator:new i.ActionContextKey("@comunica/actor-init-query:extensionFunctionCreator"),extensionFunctions:new i.ActionContextKey("@comunica/actor-init-query:extensionFunctions"),extensionFunctionsAlwaysPushdown:new i.ActionContextKey("@comunica/actor-init-query:extensionFunctionsAlwaysPushdown"),cliArgsHandlers:new i.ActionContextKey("@comunica/actor-init-query:cliArgsHandlers"),explain:new i.ActionContextKey("@comunica/actor-init-query:explain"),physicalQueryPlanLogger:new i.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanLogger"),physicalQueryPlanNode:new i.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanNode"),jsonLdContext:new i.ActionContextKey("@context"),invalidateCache:new i.ActionContextKey("@comunica/actor-init-query:invalidateCache"),dataFactory:new i.ActionContextKey("@comunica/actor-init-query:dataFactory"),distinctConstruct:new i.ActionContextKey("@comunica/actor-init-query:distinctConstruct")},Je.KeysExpressionEvaluator={extensionFunctionCreator:new i.ActionContextKey("@comunica/utils-expression-evaluator:extensionFunctionCreator"),superTypeProvider:new i.ActionContextKey("@comunica/utils-expression-evaluator:superTypeProvider"),defaultTimeZone:new i.ActionContextKey("@comunica/utils-expression-evaluator:defaultTimeZone"),actionContext:new i.ActionContextKey("@comunica/utils-expression-evaluator:actionContext")},Je.KeysQueryOperation={operation:new i.ActionContextKey("@comunica/bus-query-operation:operation"),joinLeftMetadata:new i.ActionContextKey("@comunica/bus-query-operation:joinLeftMetadata"),joinRightMetadatas:new i.ActionContextKey("@comunica/bus-query-operation:joinRightMetadatas"),joinBindings:new i.ActionContextKey("@comunica/bus-query-operation:joinBindings"),readOnly:new i.ActionContextKey("@comunica/bus-query-operation:readOnly"),isPathArbitraryLengthDistinctKey:new i.ActionContextKey("@comunica/bus-query-operation:isPathArbitraryLengthDistinct"),limitIndicator:new i.ActionContextKey("@comunica/bus-query-operation:limitIndicator"),unionDefaultGraph:new i.ActionContextKey("@comunica/bus-query-operation:unionDefaultGraph"),querySources:new i.ActionContextKey("@comunica/bus-query-operation:querySources")},Je.KeysRdfParseJsonLd={documentLoader:new i.ActionContextKey("@comunica/actor-rdf-parse-jsonld:documentLoader"),strictValues:new i.ActionContextKey("@comunica/actor-rdf-parse-jsonld:strictValues"),parserOptions:new i.ActionContextKey("@comunica/actor-rdf-parse-jsonld:parserOptions")},Je.KeysRdfParseHtmlScript={processingHtmlScript:new i.ActionContextKey("@comunica/actor-rdf-parse-html-script:processingHtmlScript"),extractAllScripts:new i.ActionContextKey("extractAllScripts")},Je.KeysQuerySourceIdentify={sourceIds:new i.ActionContextKey("@comunica/bus-query-source-identify:sourceIds"),hypermediaSourcesAggregatedStores:new i.ActionContextKey("@comunica/bus-query-source-identify:hypermediaSourcesAggregatedStores"),traverse:new i.ActionContextKey("@comunica/bus-query-source-identify:traverse")},Je.KeysRdfUpdateQuads={destination:new i.ActionContextKey("@comunica/bus-rdf-update-quads:destination")},Je.KeysMergeBindingsContext={sourcesBinding:new i.ActionContextKey("@comunica/bus-merge-bindings-context:sourcesBinding")},Je.KeysRdfJoin={lastPhysicalJoin:new i.ActionContextKey("@comunica/bus-rdf-join:lastPhysicalJoin")},Je.KeysStatistics={discoveredLinks:new i.ActionContextKey("@comunica/statistic:discoveredLinks"),dereferencedLinks:new i.ActionContextKey("@comunica/statistic:dereferencedLinks"),intermediateResults:new i.ActionContextKey("@comunica/statistic:intermediateResults")},Je}var QT;function pe(){return QT||(QT=1,(function(i){var r=Qn&&Qn.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Qn&&Qn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(RN(),i)})(Qn)),Qn}var UT;function R9(){if(UT)return bc;UT=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.QueryEngineBase=void 0;const i=pe(),r=ae();let o=class V1{constructor(t){this.actorInitQuery=t}async queryBindings(t,e){return this.queryOfType(t,e,"bindings")}async queryQuads(t,e){return this.queryOfType(t,e,"quads")}async queryBoolean(t,e){return this.queryOfType(t,e,"boolean")}async queryVoid(t,e){return this.queryOfType(t,e,"void")}async queryOfType(t,e,a){const u=await this.query(t,e);if(u.resultType===a)return await u.execute();throw new Error(`Query result type '${a}' was expected, while '${u.resultType}' was found.`)}async query(t,e){const a=await this.queryOrExplain(t,e);if("explain"in a)throw new Error("Tried to explain a query when in query-only mode");return a}async explain(t,e,a){return e.explain=a,await this.queryOrExplain(t,e)}async queryOrExplain(t,e){const a=r.ActionContext.ensureActionContext(e);a.get(i.KeysInitQuery.invalidateCache)&&await this.invalidateHttpCache();const{result:u}=await this.actorInitQuery.mediatorQueryProcess.mediate({query:t,context:a});return"explain"in u?u:V1.internalToFinalResult(u)}async getResultMediaTypes(t){return t=r.ActionContext.ensureActionContext(t),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeCombiner.mediate({context:t,mediaTypes:!0})).mediaTypes}async getResultMediaTypeFormats(t){return t=r.ActionContext.ensureActionContext(t),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeFormatCombiner.mediate({context:t,mediaTypeFormats:!0})).mediaTypeFormats}async resultToString(t,e,a){if(a=r.ActionContext.ensureActionContext(a),!e)switch(t.resultType){case"bindings":e="application/json";break;case"quads":e="application/trig";break;default:e="simple";break}const u={...await V1.finalToInternalResult(t),context:a};return(await this.actorInitQuery.mediatorQueryResultSerialize.mediate({context:a,handle:u,handleMediaType:e})).handle}invalidateHttpCache(t,e){return e=r.ActionContext.ensureActionContext(e),this.actorInitQuery.mediatorHttpInvalidate.mediate({url:t,context:e})}static internalToFinalResult(t){switch(t.type){case"bindings":return{resultType:"bindings",execute:async()=>t.bindingsStream,metadata:async()=>{const e=await t.metadata();return e.variables=e.variables.map(a=>a.variable),e},context:t.context};case"quads":return{resultType:"quads",execute:async()=>t.quadStream,metadata:async()=>await t.metadata(),context:t.context};case"boolean":return{resultType:"boolean",execute:async()=>t.execute(),context:t.context};case"void":return{resultType:"void",execute:async()=>t.execute(),context:t.context}}}static async finalToInternalResult(t){switch(t.resultType){case"bindings":return{type:"bindings",bindingsStream:await t.execute(),metadata:async()=>{const e=await t.metadata();return e.variables=e.variables.map(a=>({variable:a,canBeUndef:!1})),e}};case"quads":return{type:"quads",quadStream:await t.execute(),metadata:async()=>await t.metadata()};case"boolean":return{type:"boolean",execute:()=>t.execute()};case"void":return{type:"void",execute:()=>t.execute()}}}};return bc.QueryEngineBase=o,bc}var VT;function DN(){return VT||(VT=1,(function(i){var r=Ln&&Ln.__createBinding||(Object.create?(function(t,e,a,u){u===void 0&&(u=a);var c=Object.getOwnPropertyDescriptor(e,a);(!c||("get"in c?!e.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return e[a]}}),Object.defineProperty(t,u,c)}):(function(t,e,a,u){u===void 0&&(u=a),t[u]=e[a]})),o=Ln&&Ln.__exportStar||function(t,e){for(var a in t)a!=="default"&&!Object.prototype.hasOwnProperty.call(e,a)&&r(e,t,a)};Object.defineProperty(i,"__esModule",{value:!0}),i.QueryEngineBase=void 0,o(jN(),i),o(j9(),i);var n=R9();Object.defineProperty(i,"QueryEngineBase",{enumerable:!0,get:function(){return n.QueryEngineBase}})})(Ln)),Ln}var Un={},vc={},Vn={},Ob={},GT;function D9(){return GT||(GT=1,Object.defineProperty(Ob,"__esModule",{value:!0})),Ob}var Sb={},XT;function P9(){return XT||(XT=1,Object.defineProperty(Sb,"__esModule",{value:!0})),Sb}var Fb={},zT;function M9(){return zT||(zT=1,Object.defineProperty(Fb,"__esModule",{value:!0})),Fb}var Ab={},HT;function N9(){return HT||(HT=1,Object.defineProperty(Ab,"__esModule",{value:!0})),Ab}var wb={},$T;function I9(){return $T||($T=1,Object.defineProperty(wb,"__esModule",{value:!0})),wb}var Eb={},JT;function q9(){return JT||(JT=1,Object.defineProperty(Eb,"__esModule",{value:!0})),Eb}var jb={},KT;function L9(){return KT||(KT=1,Object.defineProperty(jb,"__esModule",{value:!0})),jb}var Rb={},YT;function x9(){return YT||(YT=1,Object.defineProperty(Rb,"__esModule",{value:!0})),Rb}var Db={},WT;function B9(){return WT||(WT=1,Object.defineProperty(Db,"__esModule",{value:!0})),Db}var Pb={},ZT;function C9(){return ZT||(ZT=1,Object.defineProperty(Pb,"__esModule",{value:!0})),Pb}var Mb={},kT;function Q9(){return kT||(kT=1,Object.defineProperty(Mb,"__esModule",{value:!0})),Mb}var Nb={},e2;function U9(){return e2||(e2=1,Object.defineProperty(Nb,"__esModule",{value:!0})),Nb}var Ib={},t2;function V9(){return t2||(t2=1,Object.defineProperty(Ib,"__esModule",{value:!0})),Ib}var qb={},r2;function G9(){return r2||(r2=1,Object.defineProperty(qb,"__esModule",{value:!0})),qb}var Lb={},n2;function X9(){return n2||(n2=1,Object.defineProperty(Lb,"__esModule",{value:!0})),Lb}var xb={},i2;function z9(){return i2||(i2=1,Object.defineProperty(xb,"__esModule",{value:!0})),xb}var Bb={},a2;function H9(){return a2||(a2=1,Object.defineProperty(Bb,"__esModule",{value:!0})),Bb}var Cb={},o2;function $9(){return o2||(o2=1,Object.defineProperty(Cb,"__esModule",{value:!0})),Cb}var Qb={},u2;function J9(){return u2||(u2=1,Object.defineProperty(Qb,"__esModule",{value:!0})),Qb}var Tc={},s2;function K9(){if(s2)return Tc;s2=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.Logger=void 0;let i=class PN{static getLevelOrdinal(o){return PN.LEVELS[o]}};return Tc.Logger=i,i.LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},Tc}var Oc={},c2;function Y9(){if(c2)return Oc;c2=1,Object.defineProperty(Oc,"__esModule",{value:!0}),Oc.ExpressionType=void 0;var i;return(function(r){r.Aggregate="aggregate",r.Existence="existence",r.Operator="operator",r.Term="term",r.Variable="variable"})(i||(Oc.ExpressionType=i={})),Oc}var l2;function bn(){return l2||(l2=1,(function(i){var r=Vn&&Vn.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Vn&&Vn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(D9(),i),o(P9(),i),o(M9(),i),o(N9(),i),o(I9(),i),o(q9(),i),o(L9(),i),o(x9(),i),o(B9(),i),o(C9(),i),o(Q9(),i),o(U9(),i),o(V9(),i),o(G9(),i),o(X9(),i),o(z9(),i),o(H9(),i),o($9(),i),o(J9(),i),o(K9(),i),o(Y9(),i)})(Vn)),Vn}var d2;function W9(){if(d2)return vc;d2=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.LoggerVoid=void 0;const i=bn();let r=class extends i.Logger{debug(){}error(){}fatal(){}info(){}trace(){}warn(){}};return vc.LoggerVoid=r,vc}var f2;function Z9(){return f2||(f2=1,(function(i){var r=Un&&Un.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Un&&Un.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(W9(),i)})(Un)),Un}var Gn={},Xn={},p2;function MN(){if(p2)return Xn;p2=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.MediatorFunctionFactory=Xn.ActorFunctionFactory=void 0;const i=ae();let r=class extends i.Actor{constructor(t){super(t)}};Xn.ActorFunctionFactory=r;class o extends i.Mediator{}return Xn.MediatorFunctionFactory=o,Xn}var Sc={},h2;function k9(){if(h2)return Sc;h2=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.ActorFunctionFactoryDedicated=void 0;const i=ae(),r=MN();let o=class extends r.ActorFunctionFactory{constructor(t){super(t)}async test(t){return this.functionNames.includes(t.functionName)&&(this.termFunction||!t.requireTermExpression)?(0,i.passTestVoid)():(0,i.failTest)(`Actor ${this.name} can not provide implementation for "${t.functionName}", only for ${this.termFunction?"":"non-termExpression "}${this.functionNames.join(" and ")}.`)}};return Sc.ActorFunctionFactoryDedicated=o,Sc}var Fc={},y2;function ex(){if(y2)return Fc;y2=1,Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.BusFunctionFactory=void 0;const i=ae();let r=class extends i.BusIndexed{constructor(n){super({...n,actorIdentifierFields:["functionNames"],actionIdentifierFields:["functionName"]})}};return Fc.BusFunctionFactory=r,Fc}var zn={},Ub={},Ac={},Vb={},Bt={},Hn={},wc={},_2;function NN(){if(_2)return wc;_2=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.BlankNode=void 0;class i{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return wc.BlankNode=i,wc}var Ec={},jc={},m2;function IN(){if(m2)return jc;m2=1,Object.defineProperty(jc,"__esModule",{value:!0}),jc.DefaultGraph=void 0;class i{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return jc.DefaultGraph=i,i.INSTANCE=new i,jc}var Rc={},Dc={},g2;function M0(){if(g2)return Dc;g2=1,Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.NamedNode=void 0;class i{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return Dc.NamedNode=i,Dc}var b2;function qN(){if(b2)return Rc;b2=1,Object.defineProperty(Rc,"__esModule",{value:!0}),Rc.Literal=void 0;const i=M0();class r{constructor(n,t){this.termType="Literal",this.value=n,typeof t=="string"?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return Rc.Literal=r,r.RDF_LANGUAGE_STRING=new i.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new i.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Rc}var Pc={},v2;function LN(){if(v2)return Pc;v2=1,Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.Quad=void 0;class i{constructor(o,n,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=n,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return Pc.Quad=i,Pc}var Mc={},T2;function xN(){if(T2)return Mc;T2=1,Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.Variable=void 0;class i{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return Mc.Variable=i,Mc}var O2;function tx(){if(O2)return Ec;O2=1,Object.defineProperty(Ec,"__esModule",{value:!0}),Ec.DataFactory=void 0;const i=NN(),r=IN(),o=qN(),n=M0(),t=LN(),e=xN();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new i.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return r.DefaultGraph.INSTANCE}quad(s,l,d,f){return new t.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Ec.DataFactory=u,Ec}var S2;function rx(){return S2||(S2=1,(function(i){var r=Hn&&Hn.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Hn&&Hn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(NN(),i),o(tx(),i),o(IN(),i),o(qN(),i),o(M0(),i),o(LN(),i),o(xN(),i)})(Hn)),Hn}var F2;function nx(){if(F2)return Bt;F2=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.stringQuadToQuad=Bt.quadToStringQuad=Bt.stringToTerm=Bt.getLiteralLanguage=Bt.getLiteralType=Bt.getLiteralValue=Bt.termToString=void 0;const i=rx(),r=new i.DataFactory;function o(s){if(s)switch(s.termType){case"NamedNode":return s.value;case"BlankNode":return"_:"+s.value;case"Literal":const l=s;return'"'+l.value+'"'+(l.datatype&&l.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&l.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?"^^"+l.datatype.value:"")+(l.language?"@"+l.language:"");case"Quad":return`<<${o(s.subject)} ${o(s.predicate)} ${o(s.object)}${s.graph.termType==="DefaultGraph"?"":" "+o(s.graph)}>>`;case"Variable":return"?"+s.value;case"DefaultGraph":return s.value}}Bt.termToString=o;function n(s){const l=/^"([^]*)"/.exec(s);if(!l)throw new Error(s+" is not a literal");return l[1]}Bt.getLiteralValue=n;function t(s){const l=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(s);if(!l)throw new Error(s+" is not a literal");return l[1]||(l[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}Bt.getLiteralType=t;function e(s){const l=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(s);if(!l)throw new Error(s+" is not a literal");return l[1]?l[1].toLowerCase():""}Bt.getLiteralLanguage=e;function a(s,l){if(l=l||r,!s||!s.length)return l.defaultGraph();switch(s[0]){case"_":return l.blankNode(s.substr(2));case"?":if(!l.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return l.variable(s.substr(1));case'"':const d=e(s),f=l.namedNode(t(s));return l.literal(n(s),d||f);default:if(s[0]==="<"&&s.length>4&&s[1]==="<"&&s[s.length-1]===">"&&s[s.length-2]===">"){const h=s.slice(2,-2).trim();let p=[],y=0,_=0,m=!1;for(let O=0;O<h.length;O++){const v=h[O];if(v==="<"&&y++,v===">"){if(y===0)throw new Error("Found closing tag without opening tag in "+s);y--}if(v==='"'){let S=!1,E=O;for(;E-- >0&&h[E]==="\\";)S=!S;S||(m=!m)}if(v===" "&&!m&&y===0){for(p.push(h.slice(_,O));h[O+1]===" ";)O+=1;_=O+1}}if(y!==0)throw new Error("Found opening tag without closing tag in "+s);if(p.push(h.slice(_,h.length)),p.length!==3&&p.length!==4)throw new Error("Nested quad syntax error "+s);return p=p.map(O=>O.startsWith("<")&&!O.includes(" ")?O.slice(1,-1):O),l.quad(a(p[0]),a(p[1]),a(p[2]),p[3]?a(p[3]):void 0)}return l.namedNode(s)}}Bt.stringToTerm=a;function u(s){return{subject:o(s.subject),predicate:o(s.predicate),object:o(s.object),graph:o(s.graph)}}Bt.quadToStringQuad=u;function c(s,l){return l=l||r,l.quad(a(s.subject,l),a(s.predicate,l),a(s.object,l),a(s.graph,l))}return Bt.stringQuadToQuad=c,Bt}var A2;function sr(){return A2||(A2=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.termToString=i.stringToTerm=i.stringQuadToQuad=i.quadToStringQuad=i.getLiteralValue=i.getLiteralType=i.getLiteralLanguage=void 0;const r=nx();Object.defineProperty(i,"getLiteralLanguage",{enumerable:!0,get:function(){return r.getLiteralLanguage}}),Object.defineProperty(i,"getLiteralType",{enumerable:!0,get:function(){return r.getLiteralType}}),Object.defineProperty(i,"getLiteralValue",{enumerable:!0,get:function(){return r.getLiteralValue}}),Object.defineProperty(i,"quadToStringQuad",{enumerable:!0,get:function(){return r.quadToStringQuad}}),Object.defineProperty(i,"stringQuadToQuad",{enumerable:!0,get:function(){return r.stringQuadToQuad}}),Object.defineProperty(i,"stringToTerm",{enumerable:!0,get:function(){return r.stringToTerm}}),Object.defineProperty(i,"termToString",{enumerable:!0,get:function(){return r.termToString}})})(Vb)),Vb}var Er={},br={},Gb,w2;function ix(){return w2||(w2=1,Gb=function i(r,o){if(r===o)return!0;if(r&&o&&typeof r=="object"&&typeof o=="object"){if(r.constructor!==o.constructor)return!1;var n,t,e;if(Array.isArray(r)){if(n=r.length,n!=o.length)return!1;for(t=n;t--!==0;)if(!i(r[t],o[t]))return!1;return!0}if(r instanceof Map&&o instanceof Map){if(r.size!==o.size)return!1;for(t of r.entries())if(!o.has(t[0]))return!1;for(t of r.entries())if(!i(t[1],o.get(t[0])))return!1;return!0}if(r instanceof Set&&o instanceof Set){if(r.size!==o.size)return!1;for(t of r.entries())if(!o.has(t[0]))return!1;return!0}if(ArrayBuffer.isView(r)&&ArrayBuffer.isView(o)){if(n=r.length,n!=o.length)return!1;for(t=n;t--!==0;)if(r[t]!==o[t])return!1;return!0}if(r.constructor===RegExp)return r.source===o.source&&r.flags===o.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===o.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===o.toString();if(e=Object.keys(r),n=e.length,n!==Object.keys(o).length)return!1;for(t=n;t--!==0;)if(!Object.prototype.hasOwnProperty.call(o,e[t]))return!1;for(t=n;t--!==0;){var a=e[t];if(!i(r[a],o[a]))return!1}return!0}return r!==r&&o!==o}),Gb}var Xb={},jr={},E2;function ax(){if(E2)return jr;E2=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.termToString=o,jr.getLiteralValue=n,jr.getLiteralType=t,jr.getLiteralLanguage=e,jr.getLiteralDirection=a,jr.stringToTerm=u,jr.quadToStringQuad=c,jr.stringQuadToQuad=s;const i=ns(),r=new i.DataFactory;function o(l){if(l)switch(l.termType){case"NamedNode":return l.value;case"BlankNode":return"_:"+l.value;case"Literal":const d=l;return'"'+d.value+'"'+(d.datatype&&d.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+d.datatype.value:"")+(d.language?"@"+d.language:"")+(d.direction?"--"+d.direction:"");case"Quad":return`<<${o(l.subject)} ${o(l.predicate)} ${o(l.object)}${l.graph.termType==="DefaultGraph"?"":" "+o(l.graph)}>>`;case"Variable":return"?"+l.value;case"DefaultGraph":return l.value}}function n(l){const d=/^"([^]*)"/.exec(l);if(!d)throw new Error(l+" is not a literal");return d[1]}function t(l){const d=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(l);if(!d)throw new Error(l+" is not a literal");return d[1]||(d[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function e(l){const d=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(l);if(!d)throw new Error(l+" is not a literal");if(d[1]){let f=d[1].toLowerCase();const h=f.indexOf("--");return h>=0&&(f=f.slice(0,h)),f}return""}function a(l){const d=l.indexOf("--",l.lastIndexOf('"'));if(d>=0){const f=l.slice(d+2,l.length);if(f==="ltr"||f==="rtl")return f;throw new Error(l+" is not a literal with a valid direction")}return""}function u(l,d){if(d=d||r,!l||!l.length)return d.defaultGraph();switch(l[0]){case"_":return d.blankNode(l.substr(2));case"?":if(!d.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return d.variable(l.substr(1));case'"':const f=e(l),h=a(l),p=d.namedNode(t(l));return d.literal(n(l),f?{language:f,direction:h}:p);default:if(l[0]==="<"&&l.length>4&&l[1]==="<"&&l[l.length-1]===">"&&l[l.length-2]===">"){const y=l.slice(2,-2).trim();let _=[],m=0,O=0,v=!1;for(let S=0;S<y.length;S++){const E=y[S];if(E==="<"&&m++,E===">"){if(m===0)throw new Error("Found closing tag without opening tag in "+l);m--}if(E==='"'){let j=!1,Q=S;for(;Q-- >0&&y[Q]==="\\";)j=!j;j||(v=!v)}if(E===" "&&!v&&m===0){for(_.push(y.slice(O,S));y[S+1]===" ";)S+=1;O=S+1}}if(m!==0)throw new Error("Found opening tag without closing tag in "+l);if(_.push(y.slice(O,y.length)),_.length!==3&&_.length!==4)throw new Error("Nested quad syntax error "+l);return _=_.map(S=>S.startsWith("<")&&!S.includes(" ")?S.slice(1,-1):S),d.quad(u(_[0]),u(_[1]),u(_[2]),_[3]?u(_[3]):void 0)}return d.namedNode(l)}}function c(l){return{subject:o(l.subject),predicate:o(l.predicate),object:o(l.object),graph:o(l.graph)}}function s(l,d){return d=d||r,d.quad(u(l.subject,d),u(l.predicate,d),u(l.object,d),u(l.graph,d))}return jr}var j2;function qg(){return j2||(j2=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.termToString=i.stringToTerm=i.stringQuadToQuad=i.quadToStringQuad=i.getLiteralValue=i.getLiteralType=i.getLiteralDirection=i.getLiteralLanguage=void 0;const r=ax();Object.defineProperty(i,"getLiteralLanguage",{enumerable:!0,get:function(){return r.getLiteralLanguage}}),Object.defineProperty(i,"getLiteralDirection",{enumerable:!0,get:function(){return r.getLiteralDirection}}),Object.defineProperty(i,"getLiteralType",{enumerable:!0,get:function(){return r.getLiteralType}}),Object.defineProperty(i,"getLiteralValue",{enumerable:!0,get:function(){return r.getLiteralValue}}),Object.defineProperty(i,"quadToStringQuad",{enumerable:!0,get:function(){return r.quadToStringQuad}}),Object.defineProperty(i,"stringQuadToQuad",{enumerable:!0,get:function(){return r.stringQuadToQuad}}),Object.defineProperty(i,"stringToTerm",{enumerable:!0,get:function(){return r.stringToTerm}}),Object.defineProperty(i,"termToString",{enumerable:!0,get:function(){return r.termToString}})})(Xb)),Xb}var zb={},R2;function ym(){return R2||(R2=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.expressionTypes=i.types=void 0,(function(r){r.ALT="alt",r.ASK="ask",r.BGP="bgp",r.CONSTRUCT="construct",r.DESCRIBE="describe",r.DISTINCT="distinct",r.EXPRESSION="expression",r.EXTEND="extend",r.FILTER="filter",r.FROM="from",r.GRAPH="graph",r.GROUP="group",r.INV="inv",r.JOIN="join",r.LEFT_JOIN="leftjoin",r.LINK="link",r.MINUS="minus",r.NOP="nop",r.NPS="nps",r.ONE_OR_MORE_PATH="OneOrMorePath",r.ORDER_BY="orderby",r.PATH="path",r.PATTERN="pattern",r.PROJECT="project",r.REDUCED="reduced",r.SEQ="seq",r.SERVICE="service",r.SLICE="slice",r.UNION="union",r.VALUES="values",r.ZERO_OR_MORE_PATH="ZeroOrMorePath",r.ZERO_OR_ONE_PATH="ZeroOrOnePath",r.COMPOSITE_UPDATE="compositeupdate",r.DELETE_INSERT="deleteinsert",r.LOAD="load",r.CLEAR="clear",r.CREATE="create",r.DROP="drop",r.ADD="add",r.MOVE="move",r.COPY="copy"})(i.types||(i.types={})),(function(r){r.AGGREGATE="aggregate",r.EXISTENCE="existence",r.NAMED="named",r.OPERATOR="operator",r.TERM="term",r.WILDCARD="wildcard"})(i.expressionTypes||(i.expressionTypes={}))})(zb)),zb}var Qr={},Hb={},D2;function BN(){if(D2)return Hb;D2=1;let i=class{constructor(){return r||this}equals(n){return n&&this.termType===n.termType}};Object.defineProperty(i.prototype,"value",{enumerable:!0,value:"*"}),Object.defineProperty(i.prototype,"termType",{enumerable:!0,value:"Wildcard"});var r=new i;return Hb.Wildcard=i,Hb}var $b,P2;function ox(){if(P2)return $b;P2=1;var i=(function(){var r=function(re,k,oe,le){for(oe=oe||{},le=re.length;le--;oe[re[le]]=k);return oe},o=[6,12,13,15,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],n=[2,247],t=[100,110,113,115,116,123,126,131,329,330,331,332,333],e=[2,409],a=[1,18],u=[1,27],c=[13,16,45,197,224,229,308],s=[28,29,53],l=[28,53],d=[1,42],f=[1,45],h=[1,41],p=[1,44],y=[123,126],_=[1,67],m=[39,45,87],O=[13,16,45,197,224,308],v=[1,87],S=[2,281],E=[1,86],j=[13,16,45,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Q=[6,28,29,53,63,70,73,81,83,85],z=[6,13,16,28,29,53,63,70,73,81,83,85,87,308],g=[6,13,16,28,29,45,53,63,70,73,81,82,83,85,87,89,197,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314],F=[6,13,16,28,29,31,39,45,47,48,53,63,70,73,81,82,83,85,87,89,109,112,121,123,126,128,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,337,338,340,341,342,343,344,345,346],P=[13,16,308],R=[112,132,327,334],M=[13,16,112,132,308],C=[1,111],H=[1,117],G=[112,132,327,328,334],J=[13,16,112,132,308,328],ne=[28,29,45,53,87],te=[1,138],Z=[1,151],ye=[1,128],ve=[1,127],Te=[1,129],ee=[1,140],Oe=[1,141],me=[1,142],Se=[1,143],be=[1,144],Fe=[1,145],q=[1,147],b=[1,148],w=[2,457],T=[1,158],A=[1,159],D=[1,160],x=[1,152],I=[1,153],U=[1,156],X=[1,171],V=[1,172],Y=[1,173],ue=[1,174],se=[1,175],de=[1,176],_e=[1,167],ge=[1,168],fe=[1,169],he=[1,170],je=[1,157],Le=[1,166],Be=[1,161],Ce=[1,162],Pe=[1,163],qe=[1,164],Me=[1,165],We=[6,13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],Ze=[1,195],B=[6,31,73,81,83,85],ie=[2,285],ce=[1,199],Ae=[1,201],Re=[6,31,70,73,81,83,85],ke=[2,283],Xe=[1,207],Tt=[1,218],yt=[1,223],Qt=[1,219],Ut=[1,225],Ot=[1,226],Vt=[1,224],st=[6,63,70,73,81,83,85],Jt=[1,236],ls=[2,334],Z0=[1,243],k0=[1,241],Nt=[6,193],bm=[2,349],ev=[2,339],on=[28,128],tv=[47,48,193,272],vm=[47,48,193,242,272],ds=[47,48,193,242,246,272],fs=[47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,341,342,343,344,345,346],Dt=[39,47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,338,341,342,343,344,345,346],rv=[1,271],nv=[1,270],St=[6,13,16,29,31,39,45,47,48,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],iv=[1,281],av=[1,280],Kt=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],Ks=[45,89],Tm=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],Om=[13,16,31,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Sm=[31,89],Fm=[48,87],Sn=[6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338],qr=[6,13,16,39,45,48,82,87,89,231,263,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338,340],ov=[1,313],ps=[6,85],zg=[6,31,81,83,85],uv=[2,361],Kr=[2,353],Fn=[1,343],Ys=[31,112,335],Yr=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Hg=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335],sv=[6,109,193],An=[31,112],Ft=[13,16,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],$g=[1,390],Jg=[1,391],un=[13,16,87,197,308,314],cv=[13,16,39,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],Am=[1,417],wm=[1,418],lv=[13,16,48,197,229,308],sn=[6,31,85],dv=[6,13,16,31,45,73,81,83,85,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],Kg=[6,13,16,29,31,45,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,231,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,346,347,348,349,350,351],wn=[29,31,85,112,159,160,161,163,164],Em=[1,443],jm=[1,444],fv=[1,449],En=[31,112,193,232,318,335],Rm=[13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],pv=[13,16,31,45,48,82,87,89,112,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Yg=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Ws=[13,16,31,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Zs=[31,45],hv=[1,507],yv=[1,508],_v=[6,13,16,29,31,39,45,47,48,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,336,338,341,342,343,344,345,346,347,348,349,350,351],Dm=[29,31,85,112,159,160,161,163,164,335],jn=[6,13,16,31,45,70,73,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],mv=[13,16,31,45,48,82,87,89,112,193,197,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],gv=[2,352],Wg=[13,16,197,308,314],bv=[1,565],hs=[6,13,16,31,45,76,78,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],vv=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Wr=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],Tv=[13,16,87,308],Zr=[2,364],ys=[29,31,85,112,159,160,161,163,164,193,232,318,335],Pm=[31,112,193,232,272,318,335],kr=[2,359],Ov=[13,16,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Mm=[29,31,85,112,159,160,161,163,164,193,232,272,318,335],Sv=[13,16,31,45,82,87,89,112,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Fv=[2,347],Zg={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Query:7,Qry:8,Query_option0:9,Prologue_repetition0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectClauseWildcard:17,Qry_repetition0:18,WhereClause:19,SolutionModifierNoGroup:20,SelectClauseVars:21,Qry_repetition1:22,SolutionModifier:23,CONSTRUCT:24,ConstructTemplate:25,Qry_repetition2:26,Qry_repetition3:27,WHERE:28,"{":29,Qry_option0:30,"}":31,DESCRIBE:32,Qry_group0:33,Qry_repetition4:34,Qry_option1:35,ASK:36,Qry_repetition5:37,SelectClauseBase:38,"*":39,SelectClauseVars_repetition_plus0:40,SELECT:41,SelectClauseBase_option0:42,SelectClauseItem:43,Var:44,"(":45,Expression:46,AS:47,")":48,SubSelect:49,SubSelect_option0:50,SubSelect_option1:51,DatasetClause:52,FROM:53,DatasetClause_option0:54,iri:55,WhereClause_option0:56,GroupGraphPattern:57,SolutionModifier_option0:58,SolutionModifierNoGroup_option0:59,SolutionModifierNoGroup_option1:60,SolutionModifierNoGroup_option2:61,GroupClause:62,GROUP:63,BY:64,GroupClause_repetition_plus0:65,GroupCondition:66,BuiltInCall:67,FunctionCall:68,HavingClause:69,HAVING:70,HavingClause_repetition_plus0:71,OrderClause:72,ORDER:73,OrderClause_repetition_plus0:74,OrderCondition:75,ASC:76,BrackettedExpression:77,DESC:78,Constraint:79,LimitOffsetClauses:80,LIMIT:81,INTEGER:82,OFFSET:83,ValuesClause:84,VALUES:85,InlineData:86,VAR:87,InlineData_repetition0:88,NIL:89,InlineData_repetition1:90,InlineData_repetition_plus2:91,InlineData_repetition3:92,DataBlock:93,DataBlockValueList:94,DataBlockValueList_repetition_plus0:95,Update:96,Update_repetition0:97,Update1:98,Update_option0:99,LOAD:100,Update1_option0:101,Update1_option1:102,Update1_group0:103,Update1_option2:104,GraphRefAll:105,Update1_group1:106,Update1_option3:107,GraphOrDefault:108,TO:109,CREATE:110,Update1_option4:111,GRAPH:112,INSERTDATA:113,QuadPattern:114,DELETEDATA:115,DELETEWHERE:116,Update1_option5:117,InsertDeleteClause:118,Update1_repetition0:119,IntoGraphClause:120,INTO:121,GraphRef:122,DELETE:123,InsertDeleteClause_option0:124,InsertClause:125,INSERT:126,UsingClause:127,USING:128,UsingClause_option0:129,WithClause:130,WITH:131,DEFAULT:132,GraphOrDefault_option0:133,GraphRefAll_group0:134,Quads:135,Quads_option0:136,Quads_repetition0:137,QuadsNotTriples:138,VarOrIri:139,QuadsNotTriples_option0:140,QuadsNotTriples_option1:141,QuadsNotTriples_option2:142,TriplesTemplate:143,TriplesTemplate_repetition0:144,TriplesSameSubject:145,TriplesTemplate_option0:146,GroupGraphPatternSub:147,GroupGraphPatternSub_option0:148,GroupGraphPatternSub_repetition0:149,GroupGraphPatternSubTail:150,GraphPatternNotTriples:151,GroupGraphPatternSubTail_option0:152,GroupGraphPatternSubTail_option1:153,TriplesBlock:154,TriplesBlock_repetition0:155,TriplesSameSubjectPath:156,TriplesBlock_option0:157,GroupOrUnionGraphPattern:158,OPTIONAL:159,MINUS:160,SERVICE:161,GraphPatternNotTriples_option0:162,FILTER:163,BIND:164,InlineDataOneVar:165,InlineDataFull:166,InlineDataOneVar_repetition0:167,InlineDataFull_repetition0:168,InlineDataFull_repetition_plus1:169,InlineDataFull_repetition2:170,DataBlockValue:171,Literal:172,QuotedTriple:173,UNDEF:174,GroupOrUnionGraphPattern_repetition0:175,ArgList:176,ArgList_option0:177,ArgList_repetition0:178,ExpressionList:179,ExpressionList_repetition0:180,ConstructTemplate_option0:181,ConstructTriples:182,ConstructTriples_repetition0:183,ConstructTriples_option0:184,VarOrTermOrQuotedTP:185,PropertyListNotEmpty:186,TriplesNode:187,PropertyList:188,PropertyList_option0:189,VerbObjectList:190,PropertyListNotEmpty_repetition0:191,SemiOptionalVerbObjectList:192,";":193,SemiOptionalVerbObjectList_option0:194,Verb:195,ObjectList:196,a:197,ObjectList_repetition0:198,Object:199,GraphNode:200,Object_option0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,O:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmptyTail:207,O_group0:208,ObjectListPath:209,ObjectListPath_repetition0:210,ObjectPath:211,GraphNodePath:212,ObjectPath_option0:213,Path:214,Path_repetition0:215,PathSequence:216,PathSequence_repetition0:217,PathEltOrInverse:218,PathElt:219,PathPrimary:220,PathElt_option0:221,PathEltOrInverse_option0:222,IriOrA:223,"!":224,PathNegatedPropertySet:225,PathOneInPropertySet:226,PathNegatedPropertySet_repetition0:227,PathNegatedPropertySet_option0:228,"^":229,TriplesNode_repetition_plus0:230,"[":231,"]":232,TriplesNodePath_repetition_plus0:233,VarOrTermOrQuotedTPExpr:234,VarOrTerm:235,GraphTerm:236,BlankNode:237,ConditionalOrExpression:238,ConditionalAndExpression:239,ConditionalOrExpression_repetition0:240,ConditionalOrExpressionTail:241,"||":242,RelationalExpression:243,ConditionalAndExpression_repetition0:244,ConditionalAndExpressionTail:245,"&&":246,NumericExpression:247,RelationalExpression_group0:248,RelationalExpression_option0:249,IN:250,MultiplicativeExpression:251,NumericExpression_repetition0:252,AdditiveExpressionTail:253,AdditiveExpressionTail_group0:254,NumericLiteralPositive:255,AdditiveExpressionTail_repetition0:256,NumericLiteralNegative:257,AdditiveExpressionTail_repetition1:258,UnaryExpression:259,MultiplicativeExpression_repetition0:260,MultiplicativeExpressionTail:261,MultiplicativeExpressionTail_group0:262,"+":263,PrimaryExpression:264,"-":265,ExprQuotedTP:266,Aggregate:267,FUNC_ARITY0:268,FUNC_ARITY1:269,FUNC_ARITY1_SPARQL_STAR:270,FUNC_ARITY2:271,",":272,FUNC_ARITY3:273,FUNC_ARITY3_SPARQL_STAR:274,BuiltInCall_group0:275,BOUND:276,BNODE:277,BuiltInCall_option0:278,EXISTS:279,COUNT:280,Aggregate_option0:281,Aggregate_group0:282,FUNC_AGGREGATE:283,Aggregate_option1:284,GROUP_CONCAT:285,Aggregate_option2:286,Aggregate_option3:287,GroupConcatSeparator:288,SEPARATOR:289,"=":290,String:291,LANGTAG:292,"^^":293,DECIMAL:294,DOUBLE:295,BOOLEAN:296,INTEGER_POSITIVE:297,DECIMAL_POSITIVE:298,DOUBLE_POSITIVE:299,INTEGER_NEGATIVE:300,DECIMAL_NEGATIVE:301,DOUBLE_NEGATIVE:302,STRING_LITERAL1:303,STRING_LITERAL2:304,STRING_LITERAL_LONG1:305,STRING_LITERAL_LONG2:306,PrefixedName:307,PNAME_LN:308,BLANK_NODE_LABEL:309,ANON:310,QuotedTP:311,"<<":312,qtSubjectOrObject:313,">>":314,DataValueTerm:315,AnnotationPattern:316,"{|":317,"|}":318,AnnotationPatternPath:319,ExprVarOrTerm:320,QueryOrUpdate_group0_option0:321,Prologue_repetition0_group0:322,Qry_group0_repetition_plus0:323,SelectClauseBase_option0_group0:324,DISTINCT:325,REDUCED:326,NAMED:327,SILENT:328,CLEAR:329,DROP:330,ADD:331,MOVE:332,COPY:333,ALL:334,".":335,UNION:336,"|":337,"/":338,PathElt_option0_group0:339,"?":340,"!=":341,"<":342,">":343,"<=":344,">=":345,NOT:346,CONCAT:347,COALESCE:348,SUBSTR:349,REGEX:350,REPLACE:351,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",24:"CONSTRUCT",28:"WHERE",29:"{",31:"}",32:"DESCRIBE",36:"ASK",39:"*",41:"SELECT",45:"(",47:"AS",48:")",53:"FROM",63:"GROUP",64:"BY",70:"HAVING",73:"ORDER",76:"ASC",78:"DESC",81:"LIMIT",82:"INTEGER",83:"OFFSET",85:"VALUES",87:"VAR",89:"NIL",100:"LOAD",109:"TO",110:"CREATE",112:"GRAPH",113:"INSERTDATA",115:"DELETEDATA",116:"DELETEWHERE",121:"INTO",123:"DELETE",126:"INSERT",128:"USING",131:"WITH",132:"DEFAULT",159:"OPTIONAL",160:"MINUS",161:"SERVICE",163:"FILTER",164:"BIND",174:"UNDEF",193:";",197:"a",224:"!",229:"^",231:"[",232:"]",242:"||",246:"&&",250:"IN",263:"+",265:"-",268:"FUNC_ARITY0",269:"FUNC_ARITY1",270:"FUNC_ARITY1_SPARQL_STAR",271:"FUNC_ARITY2",272:",",273:"FUNC_ARITY3",274:"FUNC_ARITY3_SPARQL_STAR",276:"BOUND",277:"BNODE",279:"EXISTS",280:"COUNT",283:"FUNC_AGGREGATE",285:"GROUP_CONCAT",289:"SEPARATOR",290:"=",292:"LANGTAG",293:"^^",294:"DECIMAL",295:"DOUBLE",296:"BOOLEAN",297:"INTEGER_POSITIVE",298:"DECIMAL_POSITIVE",299:"DOUBLE_POSITIVE",300:"INTEGER_NEGATIVE",301:"DECIMAL_NEGATIVE",302:"DOUBLE_NEGATIVE",303:"STRING_LITERAL1",304:"STRING_LITERAL2",305:"STRING_LITERAL_LONG1",306:"STRING_LITERAL_LONG2",308:"PNAME_LN",309:"BLANK_NODE_LABEL",310:"ANON",312:"<<",314:">>",317:"{|",318:"|}",325:"DISTINCT",326:"REDUCED",327:"NAMED",328:"SILENT",329:"CLEAR",330:"DROP",331:"ADD",332:"MOVE",333:"COPY",334:"ALL",335:".",336:"UNION",337:"|",338:"/",340:"?",341:"!=",342:"<",343:">",344:"<=",345:">=",346:"NOT",347:"CONCAT",348:"COALESCE",349:"SUBSTR",350:"REGEX",351:"REPLACE"},productions_:[0,[3,3],[7,2],[4,1],[11,2],[14,3],[8,4],[8,4],[8,5],[8,7],[8,5],[8,4],[17,2],[21,2],[38,2],[43,1],[43,5],[49,4],[49,4],[52,3],[19,2],[23,2],[20,3],[62,3],[66,1],[66,1],[66,3],[66,5],[66,1],[69,2],[72,3],[75,2],[75,2],[75,1],[75,1],[80,2],[80,2],[80,4],[80,4],[84,2],[86,4],[86,4],[86,6],[86,2],[94,3],[96,3],[98,4],[98,3],[98,5],[98,4],[98,2],[98,2],[98,2],[98,5],[120,2],[118,3],[118,1],[125,2],[127,3],[130,2],[108,1],[108,2],[122,2],[105,1],[105,1],[114,3],[135,2],[138,7],[143,3],[57,3],[57,3],[147,2],[150,3],[154,3],[151,1],[151,2],[151,2],[151,3],[151,4],[151,2],[151,6],[151,1],[93,1],[93,1],[165,4],[166,4],[166,6],[171,1],[171,1],[171,1],[171,1],[158,2],[79,1],[79,1],[79,1],[68,2],[176,1],[176,5],[179,1],[179,4],[25,3],[182,3],[145,2],[145,2],[188,1],[186,2],[192,2],[190,2],[195,1],[195,1],[196,2],[199,2],[156,2],[156,2],[202,2],[207,1],[207,2],[205,2],[209,2],[211,2],[214,2],[216,2],[219,2],[218,2],[220,1],[220,2],[220,3],[225,1],[225,1],[225,4],[226,1],[226,2],[187,3],[187,3],[203,3],[203,3],[200,1],[200,1],[212,1],[212,1],[234,1],[235,1],[235,1],[139,1],[139,1],[44,1],[236,1],[236,1],[236,1],[236,1],[46,1],[238,2],[241,2],[239,2],[245,2],[243,1],[243,3],[243,4],[247,2],[253,2],[253,2],[253,2],[251,2],[261,2],[259,2],[259,2],[259,2],[259,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[77,3],[67,1],[67,2],[67,4],[67,4],[67,6],[67,8],[67,8],[67,2],[67,4],[67,2],[67,4],[67,3],[267,5],[267,5],[267,6],[288,4],[172,1],[172,2],[172,3],[172,1],[172,1],[172,1],[172,1],[172,1],[172,1],[255,1],[255,1],[255,1],[257,1],[257,1],[257,1],[291,1],[291,1],[291,1],[291,1],[55,1],[55,1],[307,1],[307,1],[237,1],[237,1],[311,5],[173,5],[313,1],[313,1],[313,1],[313,1],[313,1],[315,1],[315,1],[315,1],[185,1],[185,1],[185,1],[316,3],[319,3],[266,5],[320,1],[320,1],[320,1],[223,1],[223,1],[321,0],[321,1],[5,1],[5,1],[5,1],[9,0],[9,1],[322,1],[322,1],[10,0],[10,2],[18,0],[18,2],[22,0],[22,2],[26,0],[26,2],[27,0],[27,2],[30,0],[30,1],[323,1],[323,2],[33,1],[33,1],[34,0],[34,2],[35,0],[35,1],[37,0],[37,2],[40,1],[40,2],[324,1],[324,1],[42,0],[42,1],[50,0],[50,1],[51,0],[51,1],[54,0],[54,1],[56,0],[56,1],[58,0],[58,1],[59,0],[59,1],[60,0],[60,1],[61,0],[61,1],[65,1],[65,2],[71,1],[71,2],[74,1],[74,2],[88,0],[88,2],[90,0],[90,2],[91,1],[91,2],[92,0],[92,2],[95,1],[95,2],[97,0],[97,4],[99,0],[99,2],[101,0],[101,1],[102,0],[102,1],[103,1],[103,1],[104,0],[104,1],[106,1],[106,1],[106,1],[107,0],[107,1],[111,0],[111,1],[117,0],[117,1],[119,0],[119,2],[124,0],[124,1],[129,0],[129,1],[133,0],[133,1],[134,1],[134,1],[134,1],[136,0],[136,1],[137,0],[137,2],[140,0],[140,1],[141,0],[141,1],[142,0],[142,1],[144,0],[144,3],[146,0],[146,1],[148,0],[148,1],[149,0],[149,2],[152,0],[152,1],[153,0],[153,1],[155,0],[155,3],[157,0],[157,1],[162,0],[162,1],[167,0],[167,2],[168,0],[168,2],[169,1],[169,2],[170,0],[170,2],[175,0],[175,3],[177,0],[177,1],[178,0],[178,3],[180,0],[180,3],[181,0],[181,1],[183,0],[183,3],[184,0],[184,1],[189,0],[189,1],[191,0],[191,2],[194,0],[194,1],[198,0],[198,3],[201,0],[201,1],[204,0],[204,1],[206,0],[206,2],[208,1],[208,1],[210,0],[210,3],[213,0],[213,1],[215,0],[215,3],[217,0],[217,3],[339,1],[339,1],[339,1],[221,0],[221,1],[222,0],[222,1],[227,0],[227,3],[228,0],[228,1],[230,1],[230,2],[233,1],[233,2],[240,0],[240,2],[244,0],[244,2],[248,1],[248,1],[248,1],[248,1],[248,1],[248,1],[249,0],[249,1],[252,0],[252,2],[254,1],[254,1],[256,0],[256,2],[258,0],[258,2],[260,0],[260,2],[262,1],[262,1],[275,1],[275,1],[275,1],[275,1],[275,1],[278,0],[278,1],[281,0],[281,1],[282,1],[282,1],[284,0],[284,1],[286,0],[286,1],[287,0],[287,1]],performAction:function(k,oe,le,we,De,N,lr){var L=N.length-1;switch(De){case 1:if(N[L-1]=N[L-1]||{},Ge.base&&(N[L-1].base=Ge.base),Ge.base="",N[L-1].prefixes=Ge.prefixes,Ge.prefixes=null,Ge.pathOnly){if(N[L-1].type==="path"||"termType"in N[L-1])return N[L-1];throw new Error("Received full SPARQL query in path only mode")}else if(N[L-1].type==="path"||"termType"in N[L-1])throw new Error("Received only path in full SPARQL mode");if(N[L-1].type==="update"){const Ve={};for(const et of N[L-1].updates)if(et.updateType==="insert"){const xe={};for(const qt of et.insert)if(qt.type==="bgp"||qt.type==="graph")for(const Lt of qt.triples)Lt.subject.termType==="BlankNode"&&(xe[Lt.subject.value]=!0),Lt.predicate.termType==="BlankNode"&&(xe[Lt.predicate.value]=!0),Lt.object.termType==="BlankNode"&&(xe[Lt.object.value]=!0);for(const qt of Object.keys(xe)){if(Ve[qt])throw new Error("Detected reuse blank node across different INSERT DATA clauses");Ve[qt]=!0}}}return N[L-1];case 2:this.$={...N[L-1],...N[L],type:"query"};break;case 4:Ge.base=ks(N[L]);break;case 5:Ge.prefixes||(Ge.prefixes={}),N[L-1]=N[L-1].substr(0,N[L-1].length-1),N[L]=ks(N[L]),Ge.prefixes[N[L-1]]=N[L];break;case 6:this.$={...N[L-3],...Pn(N[L-2]),...N[L-1],...N[L]};break;case 7:if(!Ge.skipValidation&&(ob(N[L-3].variables.map(et=>ab(et.expression))).some(et=>et.aggregation==="count"&&!(et.expression instanceof Nm))||N[L].group)){for(const et of N[L-3].variables)if(et.termType==="Variable"){if(!N[L].group||!N[L].group.map(xe=>vs(xe)).includes(vs(et)))throw Error("Projection of ungrouped variable (?"+vs(et)+")")}else if(ab(et.expression).length===0){const xe=R5(et.expression);for(const qt of xe)if(!N[L].group||!N[L].group.map||!N[L].group.map(Lt=>vs(Lt)).includes(vs(qt)))throw Error("Use of ungrouped variable in projection of operation (?"+vs(qt)+")")}}const Ts=N[L-1].where.filter(Ve=>Ve.type==="query");if(Ts.length>0){const Ve=N[L-3].variables.filter(xe=>xe.variable&&xe.variable.value).map(xe=>xe.variable.value),et=ob(Ts.map(xe=>xe.variables)).map(xe=>xe.value||xe.variable.value);for(const xe of Ve)if(et.indexOf(xe)>=0)throw Error("Target id of 'AS' (?"+xe+") already used in subquery")}this.$=mt(N[L-3],Pn(N[L-2]),N[L-1],N[L]);break;case 8:this.$=mt({queryType:"CONSTRUCT",template:N[L-3]},Pn(N[L-2]),N[L-1],N[L]);break;case 9:this.$=mt({queryType:"CONSTRUCT",template:N[L-2]=N[L-2]?N[L-2].triples:[]},Pn(N[L-5]),{where:[{type:"bgp",triples:_s([],N[L-2])}]},N[L]);break;case 10:this.$=mt({queryType:"DESCRIBE",variables:N[L-3]==="*"?[new Nm]:N[L-3]},Pn(N[L-2]),N[L-1],N[L]);break;case 11:this.$=mt({queryType:"ASK"},Pn(N[L-2]),N[L-1],N[L]);break;case 12:this.$=mt(N[L-1],{variables:[new Nm]});break;case 13:const lb=N[L].map(Ve=>Ve.value||Ve.variable.value),Cm=D5(lb);if(Cm.length>0)throw Error("Two or more of the resulting columns have the same name (?"+Cm[0]+")");this.$=mt(N[L-1],{variables:N[L]});break;case 14:this.$=mt({queryType:"SELECT"},N[L]&&(N[L-1]=Yt(N[L]),N[L]={},N[L][N[L-1]]=!0,N[L]));break;case 16:case 27:this.$=ms(N[L-3],{variable:N[L-1]});break;case 17:case 18:this.$=mt(N[L-3],N[L-2],N[L-1],N[L],{type:"query"});break;case 19:case 58:this.$={iri:N[L],named:!!N[L-1]};break;case 20:this.$={where:N[L].patterns};break;case 21:this.$=mt(N[L-1],N[L]);break;case 22:this.$=mt(N[L-2],N[L-1],N[L]);break;case 23:this.$={group:N[L]};break;case 24:case 25:case 28:case 31:case 33:case 34:this.$=ms(N[L]);break;case 26:this.$=ms(N[L-1]);break;case 29:this.$={having:N[L]};break;case 30:this.$={order:N[L]};break;case 32:this.$=ms(N[L],{descending:!0});break;case 35:this.$={limit:bs(N[L])};break;case 36:this.$={offset:bs(N[L])};break;case 37:this.$={limit:bs(N[L-2]),offset:bs(N[L])};break;case 38:this.$={limit:bs(N[L]),offset:bs(N[L-2])};break;case 39:case 43:this.$={type:"values",values:N[L]};break;case 40:case 84:this.$=N[L-1].map(Ve=>({[N[L-3]]:Ve}));break;case 41:case 85:this.$=N[L-1].map(()=>({}));break;case 42:case 86:var cn=N[L-4].length;N[L-4]=N[L-4].map(kg),this.$=N[L-1].map(function(Ve){if(Ve.length!==cn)throw Error("Inconsistent VALUES length");for(var et={},xe=0;xe<cn;xe++)et["?"+N[L-4][xe].value]=Ve[xe];return et});break;case 44:case 65:case 100:case 126:case 175:this.$=N[L-1];break;case 45:this.$={type:"update",updates:Dn(N[L-2],N[L-1])};break;case 46:this.$=mt({type:"load",silent:!!N[L-2],source:N[L-1]},N[L]&&{destination:N[L]});break;case 47:this.$={type:Yt(N[L-2]),silent:!!N[L-1],graph:N[L]};break;case 48:this.$={type:Yt(N[L-4]),silent:!!N[L-3],source:N[L-2],destination:N[L]};break;case 49:this.$={type:"create",silent:!!N[L-2],graph:{type:"graph",name:N[L]}};break;case 50:this.$={updateType:"insert",insert:qv(N[L])};break;case 51:this.$={updateType:"delete",delete:cb(qv(N[L]))};break;case 52:this.$={updateType:"deletewhere",delete:cb(N[L])};break;case 53:this.$={updateType:"insertdelete",...N[L-4],...N[L-3],...Pn(N[L-2],"using"),where:N[L].patterns};break;case 54:case 57:case 62:case 167:case 191:case 236:this.$=N[L];break;case 55:this.$={delete:cb(N[L-1]),insert:N[L]||[]};break;case 56:this.$={delete:[],insert:N[L]};break;case 59:this.$={graph:N[L]};break;case 60:this.$={type:"graph",default:!0};break;case 61:case 63:this.$={type:"graph",name:N[L]};break;case 64:this.$={[Yt(N[L])]:!0};break;case 66:this.$=N[L-1]?Lr(N[L],[N[L-1]]):Lr(N[L]);break;case 67:var Lm=mt(N[L-3]||{triples:[]},{type:"graph",name:N[L-5]});this.$=N[L]?[Lm,N[L]]:[Lm];break;case 68:case 73:this.$={type:"bgp",triples:Lr(N[L-2],[N[L-1]])};break;case 69:this.$={type:"group",patterns:[N[L-1]]};break;case 70:for(const Ve of N[L-1].filter(et=>et.type==="bind")){const et=N[L-1].indexOf(Ve),xe=new Set;for(const qt of N[L-1].slice(0,et))(qt.type==="group"||qt.type==="bgp")&&Nv(qt).forEach(Lt=>xe.add(Lt));if(xe.has(Ve.variable.value))throw Error("Variable used to bind is already bound (?"+Ve.variable.value+")")}this.$={type:"group",patterns:N[L-1]};break;case 71:this.$=N[L-1]?Lr([N[L-1]],N[L]):Lr(N[L]);break;case 72:this.$=N[L]?[N[L-2],N[L]]:N[L-2];break;case 75:this.$=mt(N[L],{type:"optional"});break;case 76:this.$=mt(N[L],{type:"minus"});break;case 77:this.$=mt(N[L],{type:"graph",name:N[L-1]});break;case 78:this.$=mt(N[L],{type:"service",name:N[L-1],silent:!!N[L-2]});break;case 79:this.$={type:"filter",expression:N[L]};break;case 80:this.$={type:"bind",variable:N[L-1],expression:N[L-3]};break;case 89:this.$=tc(N[L]);break;case 90:this.$=void 0;break;case 91:this.$=N[L-1].length?{type:"union",patterns:Lr(N[L-1].map(tb),[tb(N[L])])}:N[L];break;case 95:this.$={...N[L],function:N[L-1]};break;case 96:this.$={type:"functionCall",args:[]};break;case 97:this.$={type:"functionCall",args:Dn(N[L-2],N[L-1]),distinct:!!N[L-3]};break;case 98:case 115:case 128:case 247:case 249:case 251:case 253:case 255:case 263:case 267:case 297:case 299:case 303:case 307:case 328:case 341:case 349:case 355:case 361:case 367:case 369:case 373:case 375:case 379:case 381:case 385:case 391:case 395:case 401:case 405:case 409:case 411:case 420:case 428:case 430:case 440:case 444:case 446:case 448:this.$=[];break;case 99:this.$=Dn(N[L-2],N[L-1]);break;case 101:this.$=Lr(N[L-2],[N[L-1]]);break;case 102:case 112:this.$=sb(N[L].map(Ve=>mt(en(N[L-1]),Ve)));break;case 103:this.$=sb(_s(N[L].map(Ve=>mt(en(N[L-1].entity),Ve)),N[L-1].triples));break;case 105:this.$=Lr([N[L-1]],N[L]);break;case 106:this.$=Lr(N[L]);break;case 107:this.$=ib(N[L-1],N[L]);break;case 109:case 237:this.$=Ge.factory.namedNode(b5);break;case 110:case 118:this.$=Dn(N[L-1],N[L]);break;case 111:this.$=N[L]?{annotation:N[L],object:N[L-1]}:N[L-1];break;case 113:this.$=N[L]?sb(_s(N[L].map(Ve=>mt(en(N[L-1].entity),Ve)),N[L-1].triples)):N[L-1].triples;break;case 114:this.$=ib(...N[L-1],N[L]);break;case 116:this.$=ib(...N[L]);break;case 117:case 159:case 163:this.$=[N[L-1],N[L]];break;case 119:this.$=N[L]?{object:N[L-1],annotation:N[L]}:N[L-1];break;case 120:this.$=N[L-1].length?gs("|",Dn(N[L-1],N[L])):N[L];break;case 121:this.$=N[L-1].length?gs("/",Dn(N[L-1],N[L])):N[L];break;case 122:this.$=N[L]?gs(N[L],[N[L-1]]):N[L-1];break;case 123:this.$=N[L-1]?gs(N[L-1],[N[L]]):N[L];break;case 125:case 131:this.$=gs(N[L-1],[N[L]]);break;case 129:this.$=gs("|",Dn(N[L-2],N[L-1]));break;case 132:case 134:this.$=E5(N[L-1]);break;case 133:case 135:this.$=j5(N[L-1]);break;case 140:this.$={entity:N[L],triples:[]};break;case 145:this.$=kg(N[L]);break;case 149:this.$=Ge.factory.namedNode(Av);break;case 151:case 153:case 158:case 162:this.$=eb(N[L-1],N[L]);break;case 152:this.$=["||",N[L]];break;case 154:this.$=["&&",N[L]];break;case 156:this.$=It(N[L-1],[N[L-2],N[L]]);break;case 157:this.$=It(N[L-2]?"notin":"in",[N[L-3],N[L]]);break;case 160:this.$=["+",eb(N[L-1],N[L])];break;case 161:var xm=xr(N[L-1].value.replace("-",""),N[L-1].datatype);this.$=["-",eb(xm,N[L])];break;case 164:this.$=It("UPLUS",[N[L]]);break;case 165:this.$=It(N[L-1],[N[L]]);break;case 166:this.$=It("UMINUS",[N[L]]);break;case 177:this.$=It(Yt(N[L-1]));break;case 178:this.$=It(Yt(N[L-3]),[N[L-1]]);break;case 179:this.$=tc(It(Yt(N[L-3]),[N[L-1]]));break;case 180:this.$=It(Yt(N[L-5]),[N[L-3],N[L-1]]);break;case 181:this.$=It(Yt(N[L-7]),[N[L-5],N[L-3],N[L-1]]);break;case 182:this.$=tc(It(Yt(N[L-7]),[N[L-5],N[L-3],N[L-1]]));break;case 183:this.$=It(Yt(N[L-1]),N[L]);break;case 184:this.$=It("bound",[kg(N[L-1])]);break;case 185:this.$=It(N[L-1],[]);break;case 186:this.$=It(N[L-3],[N[L-1]]);break;case 187:this.$=It(N[L-2]?"notexists":"exists",[tb(N[L])]);break;case 188:case 189:this.$=ms(N[L-1],{type:"aggregate",aggregation:Yt(N[L-4]),distinct:!!N[L-2]});break;case 190:this.$=ms(N[L-2],{type:"aggregate",aggregation:Yt(N[L-5]),distinct:!!N[L-3],separator:typeof N[L-1]=="string"?N[L-1]:" "});break;case 192:this.$=xr(N[L]);break;case 193:this.$=S5(N[L-1],Yt(N[L].substr(1)));break;case 194:this.$=xr(N[L-2],N[L]);break;case 195:case 204:this.$=xr(N[L],wv);break;case 196:case 205:this.$=xr(N[L],Ev);break;case 197:case 206:this.$=xr(Yt(N[L]),jv);break;case 200:this.$=xr(N[L].toLowerCase(),O5);break;case 201:this.$=xr(N[L].substr(1),wv);break;case 202:this.$=xr(N[L].substr(1),Ev);break;case 203:this.$=xr(N[L].substr(1).toLowerCase(),jv);break;case 207:case 208:this.$=Mv(N[L],1);break;case 209:case 210:this.$=Mv(N[L],3);break;case 211:this.$=Ge.factory.namedNode(ks(N[L]));break;case 213:var Bm=N[L].indexOf(":"),gt=N[L].substr(0,Bm),Br=Ge.prefixes[gt];if(!Br)throw new Error("Unknown prefix: "+gt);var Mn=ks(Br+N[L].substr(Bm+1));this.$=Ge.factory.namedNode(Mn);break;case 214:if(N[L]=N[L].substr(0,N[L].length-1),!(N[L]in Ge.prefixes))throw new Error("Unknown prefix: "+N[L]);var Mn=ks(Ge.prefixes[N[L]]);this.$=Ge.factory.namedNode(Mn);break;case 215:this.$=ec(N[L].replace(/^(_:)/,""));break;case 216:this.$=ec();break;case 217:case 218:case 232:this.$=tc(rb(N[L-3],N[L-2],N[L-1]));break;case 230:case 231:this.$=tc(N[L-1]);break;case 248:case 250:case 252:case 254:case 256:case 260:case 264:case 268:case 270:case 292:case 294:case 296:case 298:case 300:case 302:case 304:case 306:case 329:case 342:case 356:case 368:case 370:case 372:case 374:case 392:case 402:case 425:case 427:case 429:case 431:case 441:case 445:case 447:case 449:N[L-1].push(N[L]);break;case 259:case 269:case 291:case 293:case 295:case 301:case 305:case 371:case 424:case 426:this.$=[N[L]];break;case 308:N[L-3].push(N[L-2]);break;case 350:case 362:case 376:case 380:case 382:case 386:case 396:case 406:case 410:case 412:case 421:N[L-2].push(N[L-1]);break}},table:[r(o,n,{3:1,4:2,10:3}),{1:[3]},r(t,[2,307],{5:4,7:5,321:6,214:7,8:8,96:9,215:10,17:11,21:12,97:16,38:17,6:[2,238],13:e,16:e,45:e,197:e,224:e,229:e,308:e,24:[1,13],32:[1,14],36:[1,15],41:a}),r([6,13,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],[2,3],{322:19,11:20,14:21,12:[1,22],15:[1,23]}),{6:[1,24]},{6:[2,240]},{6:[2,241]},{6:[2,242]},{6:[2,243],9:25,84:26,85:u},{6:[2,239]},r(c,[2,411],{216:28,217:29}),r(s,[2,249],{18:30}),r(s,[2,251],{22:31}),r(l,[2,255],{25:32,27:33,29:[1,34]}),{13:d,16:f,33:35,39:[1,37],44:39,55:40,87:h,139:38,307:43,308:p,323:36},r(s,[2,267],{37:46}),r(y,[2,326],{98:47,103:49,106:50,117:55,130:61,100:[1,48],110:[1,51],113:[1,52],115:[1,53],116:[1,54],131:[1,62],329:[1,56],330:[1,57],331:[1,58],332:[1,59],333:[1,60]}),{39:[1,63],40:64,43:65,44:66,45:_,87:h},r(m,[2,273],{42:68,324:69,325:[1,70],326:[1,71]}),r(o,[2,248]),r(o,[2,245]),r(o,[2,246]),{13:[1,72]},{16:[1,73]},{1:[2,1]},{6:[2,2]},{6:[2,244]},{45:[1,77],85:[1,78],86:74,87:[1,75],89:[1,76]},r([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],[2,120],{337:[1,79]}),r(O,[2,418],{218:80,222:81,229:[1,82]}),{19:83,28:v,29:S,52:84,53:E,56:85},{19:88,28:v,29:S,52:89,53:E,56:85},r(s,[2,253],{26:90}),{28:[1,91],52:92,53:E},r(j,[2,385],{181:93,182:94,183:95,31:[2,383]}),r(Q,[2,263],{34:96}),r(Q,[2,261],{44:39,55:40,307:43,139:97,13:d,16:f,87:h,308:p}),r(Q,[2,262]),r(z,[2,259]),r(g,[2,143]),r(g,[2,144]),r([6,13,16,28,29,31,39,45,47,48,53,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,145]),r(F,[2,211]),r(F,[2,212]),r(F,[2,213]),r(F,[2,214]),{19:98,28:v,29:S,52:99,53:E,56:85},{6:[2,309],99:100,193:[1,101]},r(P,[2,311],{101:102,328:[1,103]}),r(R,[2,317],{104:104,328:[1,105]}),r(M,[2,322],{107:106,328:[1,107]}),{111:108,112:[2,324],328:[1,109]},{29:C,114:110},{29:C,114:112},{29:C,114:113},{118:114,123:[1,115],125:116,126:H},r(G,[2,315]),r(G,[2,316]),r(J,[2,319]),r(J,[2,320]),r(J,[2,321]),r(y,[2,327]),{13:d,16:f,55:118,307:43,308:p},r(s,[2,12]),r(s,[2,13],{44:66,43:119,45:_,87:h}),r(ne,[2,269]),r(ne,[2,15]),{13:d,16:f,44:136,45:te,46:120,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},r(m,[2,14]),r(m,[2,274]),r(m,[2,271]),r(m,[2,272]),r(o,[2,4]),{13:[1,177]},r(We,[2,39]),{29:[1,178]},{29:[1,179]},{87:[1,181],91:180},{45:[1,187],87:[1,185],89:[1,186],93:182,165:183,166:184},r(c,[2,410]),r([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337],[2,121],{338:[1,188]}),{13:d,16:f,45:[1,193],55:194,197:Ze,219:189,220:190,223:191,224:[1,192],307:43,308:p},r(O,[2,419]),r(B,ie,{20:196,59:197,69:198,70:ce}),r(s,[2,250]),{29:Ae,57:200},r(P,[2,279],{54:202,327:[1,203]}),{29:[2,282]},r(Re,ke,{23:204,58:205,62:206,63:Xe}),r(s,[2,252]),{19:208,28:v,29:S,52:209,53:E,56:85},{29:[1,210]},r(l,[2,256]),{31:[1,211]},{31:[2,384]},{13:d,16:f,44:215,45:Tt,55:220,82:Z,87:h,89:yt,145:212,172:221,185:213,187:214,231:Qt,236:216,237:222,255:154,257:155,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,309:Ut,310:Ot,311:217,312:Vt},r(st,[2,265],{56:85,35:227,52:228,19:229,28:v,29:S,53:E}),r(z,[2,260]),r(Re,ke,{58:205,62:206,23:230,63:Xe}),r(s,[2,268]),{6:[2,45]},r(o,n,{10:3,4:231}),{13:d,16:f,55:232,307:43,308:p},r(P,[2,312]),{105:233,112:Jt,122:234,132:[1,237],134:235,327:[1,238],334:[1,239]},r(R,[2,318]),r(P,ls,{108:240,133:242,112:Z0,132:k0}),r(M,[2,323]),{112:[1,244]},{112:[2,325]},r(Nt,[2,50]),r(j,bm,{135:245,136:246,143:247,144:248,31:ev,112:ev}),r(Nt,[2,51]),r(Nt,[2,52]),r(on,[2,328],{119:249}),{29:C,114:250},r(on,[2,56]),{29:C,114:251},r(y,[2,59]),r(ne,[2,270]),{47:[1,252]},r(tv,[2,150]),r(vm,[2,428],{240:253}),r(ds,[2,430],{244:254}),r(ds,[2,155],{248:255,249:256,250:[2,438],290:[1,257],341:[1,258],342:[1,259],343:[1,260],344:[1,261],345:[1,262],346:[1,263]}),r(fs,[2,440],{252:264}),r(Dt,[2,448],{260:265}),{13:d,16:f,44:136,45:te,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,255:154,257:155,264:266,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},{13:d,16:f,44:136,45:te,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,255:154,257:155,264:267,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},{13:d,16:f,44:136,45:te,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,255:154,257:155,264:268,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},r(Dt,[2,167]),r(Dt,[2,168]),r(Dt,[2,169]),r(Dt,[2,170],{176:269,45:rv,89:nv}),r(Dt,[2,171]),r(Dt,[2,172]),r(Dt,[2,173]),r(Dt,[2,174]),{13:d,16:f,44:136,45:te,46:272,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},r(St,[2,176]),{89:[1,273]},{45:[1,274]},{45:[1,275]},{45:[1,276]},{45:[1,277]},{45:[1,278]},{45:iv,89:av,179:279},{45:[1,282]},{45:[1,284],89:[1,283]},{279:[1,285]},r(Kt,[2,192],{292:[1,286],293:[1,287]}),r(Kt,[2,195]),r(Kt,[2,196]),r(Kt,[2,197]),r(Kt,[2,198]),r(Kt,[2,199]),r(Kt,[2,200]),{13:d,16:f,44:39,55:40,82:Z,87:h,139:289,172:291,255:154,257:155,266:290,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,320:288},{45:[1,292]},{45:[1,293]},{45:[1,294]},r(Ks,[2,452]),r(Ks,[2,453]),r(Ks,[2,454]),r(Ks,[2,455]),r(Ks,[2,456]),{279:[2,458]},r(Tm,[2,207]),r(Tm,[2,208]),r(Tm,[2,209]),r(Tm,[2,210]),r(Kt,[2,201]),r(Kt,[2,202]),r(Kt,[2,203]),r(Kt,[2,204]),r(Kt,[2,205]),r(Kt,[2,206]),r(o,[2,5]),r(Om,[2,297],{88:295}),r(Sm,[2,299],{90:296}),{48:[1,297],87:[1,298]},r(Fm,[2,301]),r(We,[2,43]),r(We,[2,82]),r(We,[2,83]),{29:[1,299]},{29:[1,300]},{87:[1,302],169:301},r(c,[2,412]),r(Sn,[2,123]),r(Sn,[2,416],{221:303,339:304,39:[1,306],263:[1,307],340:[1,305]}),r(qr,[2,124]),{13:d,16:f,45:[1,311],55:194,89:[1,310],197:Ze,223:312,225:308,226:309,229:ov,307:43,308:p},r(c,e,{215:10,214:314}),r(qr,[2,236]),r(qr,[2,237]),r(ps,[2,6]),r(zg,[2,287],{60:315,72:316,73:[1,317]}),r(B,[2,286]),{13:d,16:f,45:te,55:323,67:321,68:322,71:318,77:320,79:319,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,307:43,308:p,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},r([6,31,63,70,73,81,83,85],[2,20]),r(j,uv,{38:17,49:324,147:325,17:326,21:327,148:328,154:329,155:330,29:Kr,31:Kr,85:Kr,112:Kr,159:Kr,160:Kr,161:Kr,163:Kr,164:Kr,41:a}),{13:d,16:f,55:331,307:43,308:p},r(P,[2,280]),r(ps,[2,7]),r(B,ie,{59:197,69:198,20:332,70:ce}),r(Re,[2,284]),{64:[1,333]},r(Re,ke,{58:205,62:206,23:334,63:Xe}),r(s,[2,254]),r(j,bm,{144:248,30:335,143:336,31:[2,257]}),r(s,[2,100]),{31:[2,387],184:337,335:[1,338]},{13:d,16:f,44:39,55:40,87:h,139:342,186:339,190:340,195:341,197:Fn,307:43,308:p},r(Ys,[2,389],{44:39,55:40,307:43,190:340,195:341,139:342,188:344,189:345,186:346,13:d,16:f,87:h,197:Fn,308:p}),r(Yr,[2,227]),r(Yr,[2,228]),r(Yr,[2,229]),{13:d,16:f,44:215,45:Tt,55:220,82:Z,87:h,89:yt,172:221,185:351,187:350,200:348,230:347,231:Qt,234:349,236:216,237:222,255:154,257:155,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,309:Ut,310:Ot,311:217,312:Vt},{13:d,16:f,44:39,55:40,87:h,139:342,186:352,190:340,195:341,197:Fn,307:43,308:p},r(Yr,[2,146]),r(Yr,[2,147]),r(Yr,[2,148]),r(Yr,[2,149]),{13:d,16:f,44:354,55:355,82:Z,87:h,172:357,237:356,255:154,257:155,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,309:Ut,310:Ot,311:358,312:Vt,313:353},r(Hg,[2,215]),r(Hg,[2,216]),r(Re,ke,{58:205,62:206,23:359,63:Xe}),r(Q,[2,264]),r(st,[2,266]),r(ps,[2,11]),r(t,[2,308],{6:[2,310]}),r(Nt,[2,313],{102:360,120:361,121:[1,362]}),r(Nt,[2,47]),r(Nt,[2,63]),r(Nt,[2,64]),{13:d,16:f,55:363,307:43,308:p},r(Nt,[2,336]),r(Nt,[2,337]),r(Nt,[2,338]),{109:[1,364]},r(sv,[2,60]),{13:d,16:f,55:365,307:43,308:p},r(P,[2,335]),{13:d,16:f,55:366,307:43,308:p},{31:[1,367]},r(An,[2,341],{137:368}),r(An,[2,340]),{13:d,16:f,44:215,45:Tt,55:220,82:Z,87:h,89:yt,145:369,172:221,185:213,187:214,231:Qt,236:216,237:222,255:154,257:155,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,309:Ut,310:Ot,311:217,312:Vt},{28:[1,370],127:371,128:[1,372]},r(on,[2,330],{124:373,125:374,126:H}),r(on,[2,57]),{44:375,87:h},r(tv,[2,151],{241:376,242:[1,377]}),r(vm,[2,153],{245:378,246:[1,379]}),{13:d,16:f,44:136,45:te,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,247:380,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},{250:[1,381]},r(Ft,[2,432]),r(Ft,[2,433]),r(Ft,[2,434]),r(Ft,[2,435]),r(Ft,[2,436]),r(Ft,[2,437]),{250:[2,439]},r([47,48,193,242,246,250,272,290,341,342,343,344,345,346],[2,158],{253:382,254:383,255:384,257:385,263:[1,386],265:[1,387],297:X,298:V,299:Y,300:ue,301:se,302:de}),r(fs,[2,162],{261:388,262:389,39:$g,338:Jg}),r(Dt,[2,164]),r(Dt,[2,165]),r(Dt,[2,166]),r(St,[2,95]),r(St,[2,96]),r(Ft,[2,377],{177:392,325:[1,393]}),{48:[1,394]},r(St,[2,177]),{13:d,16:f,44:136,45:te,46:395,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},{13:d,16:f,44:136,45:te,46:396,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},{13:d,16:f,44:136,45:te,46:397,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},{13:d,16:f,44:136,45:te,46:398,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},{13:d,16:f,44:136,45:te,46:399,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},r(St,[2,183]),r(St,[2,98]),r(Ft,[2,381],{180:400}),{87:[1,401]},r(St,[2,185]),{13:d,16:f,44:136,45:te,46:402,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},{29:Ae,57:403},r(Kt,[2,193]),{13:d,16:f,55:404,307:43,308:p},{13:d,16:f,44:39,55:40,87:h,139:342,195:405,197:Fn,307:43,308:p},r(un,[2,233]),r(un,[2,234]),r(un,[2,235]),r(cv,[2,459],{281:406,325:[1,407]}),r(Ft,[2,463],{284:408,325:[1,409]}),r(Ft,[2,465],{286:410,325:[1,411]}),{13:d,16:f,31:[1,412],55:414,82:Z,171:413,172:415,173:416,174:Am,255:154,257:155,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:wm},{31:[1,419],89:[1,420]},{29:[1,421]},r(Fm,[2,302]),r(Om,[2,367],{167:422}),r(Sm,[2,369],{168:423}),{48:[1,424],87:[1,425]},r(Fm,[2,371]),r(Sn,[2,122]),r(Sn,[2,417]),r(Sn,[2,413]),r(Sn,[2,414]),r(Sn,[2,415]),r(qr,[2,125]),r(qr,[2,127]),r(qr,[2,128]),r(lv,[2,420],{227:426}),r(qr,[2,130]),{13:d,16:f,55:194,197:Ze,223:427,307:43,308:p},{48:[1,428]},r(sn,[2,289],{61:429,80:430,81:[1,431],83:[1,432]}),r(zg,[2,288]),{64:[1,433]},r(B,[2,29],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:434,13:d,16:f,45:te,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,276:q,277:b,279:w,280:T,283:A,285:D,308:p,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me}),r(dv,[2,293]),r(Kg,[2,92]),r(Kg,[2,93]),r(Kg,[2,94]),{45:rv,89:nv,176:269},{31:[1,435]},{31:[1,436]},{19:437,28:v,29:S,56:85},{19:438,28:v,29:S,56:85},r(wn,[2,355],{149:439}),r(wn,[2,354]),{13:d,16:f,44:215,45:Em,55:220,82:Z,87:h,89:yt,156:440,172:221,185:441,203:442,231:jm,236:216,237:222,255:154,257:155,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,309:Ut,310:Ot,311:217,312:Vt},r(Q,[2,19]),r(sn,[2,21]),{13:d,16:f,44:450,45:fv,55:323,65:445,66:446,67:447,68:448,87:h,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,307:43,308:p,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},r(ps,[2,8]),{31:[1,451]},{31:[2,258]},{31:[2,101]},r(j,[2,386],{31:[2,388]}),r(Ys,[2,102]),r(En,[2,391],{191:452}),r(j,[2,395],{196:453,198:454}),r(j,[2,108]),r(j,[2,109]),r(Ys,[2,103]),r(Ys,[2,104]),r(Ys,[2,390]),{13:d,16:f,44:215,45:Tt,48:[1,455],55:220,82:Z,87:h,89:yt,172:221,185:351,187:350,200:456,231:Qt,234:349,236:216,237:222,255:154,257:155,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,309:Ut,310:Ot,311:217,312:Vt},r(Rm,[2,424]),r(pv,[2,136]),r(pv,[2,137]),r(Yg,[2,140]),{232:[1,457]},{13:d,16:f,44:39,55:40,87:h,139:342,195:458,197:Fn,307:43,308:p},r(un,[2,219]),r(un,[2,220]),r(un,[2,221]),r(un,[2,222]),r(un,[2,223]),r(ps,[2,10]),r(Nt,[2,46]),r(Nt,[2,314]),{112:Jt,122:459},r(Nt,[2,62]),r(P,ls,{133:242,108:460,112:Z0,132:k0}),r(sv,[2,61]),r(Nt,[2,49]),r([6,28,126,128,193],[2,65]),{31:[2,66],112:[1,462],138:461},r(An,[2,351],{146:463,335:[1,464]}),{29:Ae,57:465},r(on,[2,329]),r(P,[2,332],{129:466,327:[1,467]}),r(on,[2,55]),r(on,[2,331]),{48:[1,468]},r(vm,[2,429]),{13:d,16:f,44:136,45:te,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,239:469,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},r(ds,[2,431]),{13:d,16:f,44:136,45:te,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,243:470,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},r(ds,[2,156]),{45:iv,89:av,179:471},r(fs,[2,441]),{13:d,16:f,44:136,45:te,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,251:472,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},r(Dt,[2,444],{256:473}),r(Dt,[2,446],{258:474}),r(Ft,[2,442]),r(Ft,[2,443]),r(Dt,[2,449]),{13:d,16:f,44:136,45:te,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,255:154,257:155,259:475,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},r(Ft,[2,450]),r(Ft,[2,451]),r(Ft,[2,379],{178:476}),r(Ft,[2,378]),r([6,13,16,29,31,39,45,47,48,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,175]),{48:[1,477]},{48:[1,478]},{272:[1,479]},{272:[1,480]},{272:[1,481]},{13:d,16:f,44:136,45:te,46:482,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},{48:[1,483]},{48:[1,484]},r(St,[2,187]),r(Kt,[2,194]),{13:d,16:f,44:39,55:40,82:Z,87:h,139:289,172:291,255:154,257:155,266:290,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,320:485},{13:d,16:f,39:[1,487],44:136,45:te,46:488,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,282:486,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},r(cv,[2,460]),{13:d,16:f,44:136,45:te,46:489,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},r(Ft,[2,464]),{13:d,16:f,44:136,45:te,46:490,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},r(Ft,[2,466]),r(We,[2,40]),r(Om,[2,298]),r(Ws,[2,87]),r(Ws,[2,88]),r(Ws,[2,89]),r(Ws,[2,90]),{13:d,16:f,55:492,82:Z,172:493,255:154,257:155,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,311:494,312:Vt,315:491},r(We,[2,41]),r(Sm,[2,300]),r(Zs,[2,303],{92:495}),{13:d,16:f,31:[1,496],55:414,82:Z,171:497,172:415,173:416,174:Am,255:154,257:155,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:wm},{31:[1,498],89:[1,499]},{29:[1,500]},r(Fm,[2,372]),{13:d,16:f,48:[2,422],55:194,197:Ze,223:312,226:502,228:501,229:ov,307:43,308:p},r(qr,[2,131]),r(qr,[2,126]),r(sn,[2,22]),r(sn,[2,290]),{82:[1,503]},{82:[1,504]},{13:d,16:f,44:510,45:te,55:323,67:321,68:322,74:505,75:506,76:hv,77:320,78:yv,79:509,87:h,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,307:43,308:p,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},r(dv,[2,294]),r(_v,[2,69]),r(_v,[2,70]),r(B,ie,{59:197,69:198,20:511,70:ce}),r(Re,ke,{58:205,62:206,23:512,63:Xe}),{29:[2,375],31:[2,71],84:522,85:u,112:[1,518],150:513,151:514,158:515,159:[1,516],160:[1,517],161:[1,519],163:[1,520],164:[1,521],175:523},r(wn,[2,363],{157:524,335:[1,525]}),r(c,e,{215:10,202:526,205:527,208:528,214:529,44:530,87:h}),r(Dm,[2,399],{215:10,205:527,208:528,214:529,44:530,204:531,202:532,13:e,16:e,45:e,197:e,224:e,229:e,308:e,87:h}),{13:d,16:f,44:215,45:Em,55:220,82:Z,87:h,89:yt,172:221,185:351,203:536,212:534,231:jm,233:533,234:535,236:216,237:222,255:154,257:155,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,309:Ut,310:Ot,311:217,312:Vt},r(c,e,{215:10,205:527,208:528,214:529,44:530,202:537,87:h}),r(Re,[2,23],{307:43,267:139,275:146,278:149,55:323,67:447,68:448,44:450,66:538,13:d,16:f,45:fv,87:h,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,276:q,277:b,279:w,280:T,283:A,285:D,308:p,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me}),r(jn,[2,291]),r(jn,[2,24]),r(jn,[2,25]),{13:d,16:f,44:136,45:te,46:539,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},r(jn,[2,28]),r(Re,ke,{58:205,62:206,23:540,63:Xe}),r([31,112,232,318,335],[2,105],{192:541,193:[1,542]}),r(En,[2,107]),{13:d,16:f,44:215,45:Tt,55:220,82:Z,87:h,89:yt,172:221,185:351,187:350,199:543,200:544,231:Qt,234:349,236:216,237:222,255:154,257:155,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,309:Ut,310:Ot,311:217,312:Vt},r(mv,[2,132]),r(Rm,[2,425]),r(mv,[2,133]),{13:d,16:f,44:354,55:355,82:Z,87:h,172:357,237:356,255:154,257:155,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,309:Ut,310:Ot,311:358,312:Vt,313:545},r(Nt,[2,54]),r(Nt,[2,48]),r(An,[2,342]),{13:d,16:f,44:39,55:40,87:h,139:546,307:43,308:p},r(An,[2,68]),r(j,[2,350],{31:gv,112:gv}),r(Nt,[2,53]),{13:d,16:f,55:547,307:43,308:p},r(P,[2,333]),r(ne,[2,16]),r(vm,[2,152]),r(ds,[2,154]),r(ds,[2,157]),r(fs,[2,159]),r(fs,[2,160],{262:389,261:548,39:$g,338:Jg}),r(fs,[2,161],{262:389,261:549,39:$g,338:Jg}),r(Dt,[2,163]),{13:d,16:f,44:136,45:te,46:550,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},r(St,[2,178]),r(St,[2,179]),{13:d,16:f,44:136,45:te,46:551,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},{13:d,16:f,44:136,45:te,46:552,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},{13:d,16:f,44:136,45:te,46:553,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},{48:[1,554],272:[1,555]},r(St,[2,184]),r(St,[2,186]),{314:[1,556]},{48:[1,557]},{48:[2,461]},{48:[2,462]},{48:[1,558]},{48:[2,467],193:[1,561],287:559,288:560},{13:d,16:f,55:194,197:Ze,223:562,307:43,308:p},r(Wg,[2,224]),r(Wg,[2,225]),r(Wg,[2,226]),{31:[1,563],45:bv,94:564},r(We,[2,84]),r(Om,[2,368]),r(We,[2,85]),r(Sm,[2,370]),r(Zs,[2,373],{170:566}),{48:[1,567]},{48:[2,423],337:[1,568]},r(sn,[2,35],{83:[1,569]}),r(sn,[2,36],{81:[1,570]}),r(zg,[2,30],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:509,44:510,75:571,13:d,16:f,45:te,76:hv,78:yv,87:h,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,276:q,277:b,279:w,280:T,283:A,285:D,308:p,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me}),r(hs,[2,295]),{45:te,77:572},{45:te,77:573},r(hs,[2,33]),r(hs,[2,34]),{31:[2,275],50:574,84:575,85:u},{31:[2,277],51:576,84:577,85:u},r(wn,[2,356]),r(vv,[2,357],{152:578,335:[1,579]}),r(Wr,[2,74]),{29:Ae,57:580},{29:Ae,57:581},{13:d,16:f,44:39,55:40,87:h,139:582,307:43,308:p},r(Tv,[2,365],{162:583,328:[1,584]}),{13:d,16:f,45:te,55:323,67:321,68:322,77:320,79:585,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,307:43,308:p,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},{45:[1,586]},r(Wr,[2,81]),{29:Ae,57:587},r(wn,[2,73]),r(j,[2,362],{29:Zr,31:Zr,85:Zr,112:Zr,159:Zr,160:Zr,161:Zr,163:Zr,164:Zr}),r(Dm,[2,112]),r(ys,[2,401],{206:588}),r(j,[2,405],{209:589,210:590}),r(j,[2,403]),r(j,[2,404]),r(Dm,[2,113]),r(Dm,[2,400]),{13:d,16:f,44:215,45:Em,48:[1,591],55:220,82:Z,87:h,89:yt,172:221,185:351,203:536,212:592,231:jm,234:535,236:216,237:222,255:154,257:155,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,309:Ut,310:Ot,311:217,312:Vt},r(Rm,[2,426]),r(Yg,[2,138]),r(Yg,[2,139]),{232:[1,593]},r(jn,[2,292]),{47:[1,595],48:[1,594]},r(ps,[2,9]),r(En,[2,392]),r(En,[2,393],{44:39,55:40,307:43,195:341,139:342,194:596,190:597,13:d,16:f,87:h,197:Fn,308:p}),r(En,[2,110],{272:[1,598]}),r(Pm,[2,397],{201:599,316:600,317:[1,601]}),{314:[1,602]},{29:[1,603]},r(on,[2,58]),r(Dt,[2,445]),r(Dt,[2,447]),{48:[1,604],272:[1,605]},{48:[1,606]},{272:[1,607]},{272:[1,608]},r(St,[2,99]),r(Ft,[2,382]),r([13,16,39,47,48,87,193,197,242,246,250,263,265,272,290,297,298,299,300,301,302,308,314,338,341,342,343,344,345,346],[2,232]),r(St,[2,188]),r(St,[2,189]),{48:[1,609]},{48:[2,468]},{289:[1,610]},{13:d,16:f,55:492,82:Z,172:493,255:154,257:155,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,311:494,312:Vt,315:611},r(We,[2,42]),r(Zs,[2,304]),{13:d,16:f,55:414,82:Z,95:612,171:613,172:415,173:416,174:Am,255:154,257:155,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:wm},{31:[1,614],45:bv,94:615},r(qr,[2,129]),r(lv,[2,421]),{82:[1,616]},{82:[1,617]},r(hs,[2,296]),r(hs,[2,31]),r(hs,[2,32]),{31:[2,17]},{31:[2,276]},{31:[2,18]},{31:[2,278]},r(j,uv,{155:330,153:618,154:619,29:kr,31:kr,85:kr,112:kr,159:kr,160:kr,161:kr,163:kr,164:kr}),r(vv,[2,358]),r(Wr,[2,75]),r(Wr,[2,76]),{29:Ae,57:620},{13:d,16:f,44:39,55:40,87:h,139:621,307:43,308:p},r(Tv,[2,366]),r(Wr,[2,79]),{13:d,16:f,44:136,45:te,46:622,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},r(Wr,[2,91],{336:[1,623]}),r([29,31,85,112,159,160,161,163,164,232,318,335],[2,114],{207:624,193:[1,625]}),r(ys,[2,117]),{13:d,16:f,44:215,45:Em,55:220,82:Z,87:h,89:yt,172:221,185:351,203:536,211:626,212:627,231:jm,234:535,236:216,237:222,255:154,257:155,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,309:Ut,310:Ot,311:217,312:Vt},r(Yr,[2,134]),r(Rm,[2,427]),r(Yr,[2,135]),r(jn,[2,26]),{44:628,87:h},r(En,[2,106]),r(En,[2,394]),r(j,[2,396]),r(Pm,[2,111]),r(Pm,[2,398]),{13:d,16:f,44:39,55:40,87:h,139:342,186:629,190:340,195:341,197:Fn,307:43,308:p},r(Hg,[2,217]),r(j,bm,{144:248,140:630,143:631,31:[2,343]}),r(St,[2,97]),r(Ft,[2,380]),r(St,[2,180]),{13:d,16:f,44:136,45:te,46:632,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},{13:d,16:f,44:136,45:te,46:633,55:133,67:132,68:134,77:131,82:Z,87:h,172:135,224:ye,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:ve,264:130,265:Te,266:137,267:139,268:ee,269:Oe,270:me,271:Se,273:be,274:Fe,275:146,276:q,277:b,278:149,279:w,280:T,283:A,285:D,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:je,346:Le,347:Be,348:Ce,349:Pe,350:qe,351:Me},r(St,[2,190]),{290:[1,634]},{314:[1,635]},{13:d,16:f,48:[1,636],55:414,82:Z,171:637,172:415,173:416,174:Am,255:154,257:155,291:150,294:x,295:I,296:U,297:X,298:V,299:Y,300:ue,301:se,302:de,303:_e,304:ge,305:fe,306:he,307:43,308:p,312:wm},r(Ov,[2,305]),r(We,[2,86]),r(Zs,[2,374]),r(sn,[2,37]),r(sn,[2,38]),r(wn,[2,72]),r(wn,[2,360]),r(Wr,[2,77]),{29:Ae,57:638},{47:[1,639]},{29:[2,376]},r(ys,[2,402]),r(ys,[2,115],{215:10,208:528,214:529,44:530,205:640,13:e,16:e,45:e,197:e,224:e,229:e,308:e,87:h}),r(ys,[2,118],{272:[1,641]}),r(Mm,[2,407],{213:642,319:643,317:[1,644]}),{48:[1,645]},{318:[1,646]},{31:[1,647]},{31:[2,344]},{48:[1,648]},{48:[1,649]},{291:650,303:_e,304:ge,305:fe,306:he},r(Ws,[2,218]),r(Zs,[2,44]),r(Ov,[2,306]),r(Wr,[2,78]),{44:651,87:h},r(ys,[2,116]),r(j,[2,406]),r(Mm,[2,119]),r(Mm,[2,408]),r(c,e,{215:10,205:527,208:528,214:529,44:530,202:652,87:h}),r(jn,[2,27]),r(Pm,[2,230]),r(Sv,[2,345],{141:653,335:[1,654]}),r(St,[2,181]),r(St,[2,182]),{48:[2,191]},{48:[1,655]},{318:[1,656]},r(j,bm,{144:248,142:657,143:658,31:Fv,112:Fv}),r(Sv,[2,346]),r(Wr,[2,80]),r(Mm,[2,231]),r(An,[2,67]),r(An,[2,348])],defaultActions:{5:[2,240],6:[2,241],7:[2,242],9:[2,239],24:[2,1],25:[2,2],26:[2,244],87:[2,282],94:[2,384],100:[2,45],109:[2,325],166:[2,458],263:[2,439],336:[2,258],337:[2,101],487:[2,461],488:[2,462],560:[2,468],574:[2,17],575:[2,276],576:[2,18],577:[2,278],623:[2,376],631:[2,344],650:[2,191]},parseError:function(k,oe){if(oe.recoverable)this.trace(k);else{var le=new Error(k);throw le.hash=oe,le}},parse:function(k){var oe=this,le=[0],we=[null],De=[],N=this.table,lr="",L=0,cn=0,Lm=2,xm=1,Bm=De.slice.call(arguments,1),gt=Object.create(this.lexer),Br={yy:{}};for(var Mn in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Mn)&&(Br.yy[Mn]=this.yy[Mn]);gt.setInput(k,Br.yy),Br.yy.lexer=gt,Br.yy.parser=this,typeof gt.yylloc>"u"&&(gt.yylloc={});var Ts=gt.yylloc;De.push(Ts);var lb=gt.options&&gt.options.ranges;typeof Br.yy.parseError=="function"?this.parseError=Br.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var Cm=function(){var Os;return Os=gt.lex()||xm,typeof Os!="number"&&(Os=oe.symbols_[Os]||Os),Os},Ve,et,xe,qt,Lt={},Qm,tn,Lv,Um;;){if(et=le[le.length-1],this.defaultActions[et]?xe=this.defaultActions[et]:((Ve===null||typeof Ve>"u")&&(Ve=Cm()),xe=N[et]&&N[et][Ve]),typeof xe>"u"||!xe.length||!xe[0]){var db="";Um=[];for(Qm in N[et])this.terminals_[Qm]&&Qm>Lm&&Um.push("'"+this.terminals_[Qm]+"'");gt.showPosition?db="Parse error on line "+(L+1)+`:
`+gt.showPosition()+`
Expecting `+Um.join(", ")+", got '"+(this.terminals_[Ve]||Ve)+"'":db="Parse error on line "+(L+1)+": Unexpected "+(Ve==xm?"end of input":"'"+(this.terminals_[Ve]||Ve)+"'"),this.parseError(db,{text:gt.match,token:this.terminals_[Ve]||Ve,line:gt.yylineno,loc:Ts,expected:Um})}if(xe[0]instanceof Array&&xe.length>1)throw new Error("Parse Error: multiple actions possible at state: "+et+", token: "+Ve);switch(xe[0]){case 1:le.push(Ve),we.push(gt.yytext),De.push(gt.yylloc),le.push(xe[1]),Ve=null,cn=gt.yyleng,lr=gt.yytext,L=gt.yylineno,Ts=gt.yylloc;break;case 2:if(tn=this.productions_[xe[1]][1],Lt.$=we[we.length-tn],Lt._$={first_line:De[De.length-(tn||1)].first_line,last_line:De[De.length-1].last_line,first_column:De[De.length-(tn||1)].first_column,last_column:De[De.length-1].last_column},lb&&(Lt._$.range=[De[De.length-(tn||1)].range[0],De[De.length-1].range[1]]),qt=this.performAction.apply(Lt,[lr,cn,L,Br.yy,xe[1],we,De].concat(Bm)),typeof qt<"u")return qt;tn&&(le=le.slice(0,-1*tn*2),we=we.slice(0,-1*tn),De=De.slice(0,-1*tn)),le.push(this.productions_[xe[1]][0]),we.push(Lt.$),De.push(Lt._$),Lv=N[le[le.length-2]][le[le.length-1]],le.push(Lv);break;case 3:return!0}}return!0}},Nm=BN().Wildcard,Im="http://www.w3.org/1999/02/22-rdf-syntax-ns#",b5=Im+"type",v5=Im+"first",T5=Im+"rest",Av=Im+"nil",qm="http://www.w3.org/2001/XMLSchema#",wv=qm+"integer",Ev=qm+"decimal",jv=qm+"double",O5=qm+"boolean",Rn="",Rv="",Dv="";function Yt(re){return re.toLowerCase()}function Dn(re,k){return re.push(k),re}function _s(re,k){return re.push.apply(re,k),re}function mt(re){re||(re={});for(var k=1,oe=arguments.length,le;k<oe&&(le=arguments[k]||{});k++)for(var we in le)re[we]=le[we];return re}function Lr(){for(var re=[],k=0,oe=arguments.length;k<oe;k++)re=re.concat.apply(re,arguments[k]);return re}function ks(re){if(re[0]==="<"&&(re=re.substring(1,re.length-1)),/^[a-z][a-z0-9.+-]*:/i.test(re))return re;if(!Ge.base)throw new Error("Cannot resolve relative IRI "+re+" because no base IRI was set.");switch(Rn!==Ge.base&&(Rn=Ge.base,Rv=Rn.replace(/[^\/:]*$/,""),Dv=Rn.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),re[0]){case void 0:return Rn;case"#":return Rn+re;case"?":return Rn.replace(/(?:\?.*)?$/,re);case"/":return Dv+re;default:return Rv+re}}function kg(re){if(re){var k=re[0];if(k==="?"||k==="$")return Ge.factory.variable(re.substr(1))}return re}function It(re,k){return{type:"operation",operator:re,args:k||[]}}function ms(re,k){var oe={expression:re==="*"?new Nm:re};if(k)for(var le in k)oe[le]=k[le];return oe}function gs(re,k){return{type:"path",pathType:re,items:k}}function eb(re,k){for(var oe=0,le=k.length,we;oe<le&&(we=k[oe]);oe++)re=It(we[0],[re,we[1]]);return re}function Pn(re,k){var oe=[],le=[],we=re.length,De,N={};if(!we)return null;for(var lr=0;lr<we&&(De=re[lr]);lr++)(De.named?le:oe).push(De.iri);return N[k||"from"]={default:oe,named:le},N}function bs(re){return parseInt(re,10)}function tb(re){return re.type==="group"&&re.patterns.length===1?re.patterns[0]:re}function xr(re,k){return k&&k.termType!=="NamedNode"&&(k=Ge.factory.namedNode(k)),Ge.factory.literal(re,k)}function S5(re,k){return Ge.factory.literal(re,k)}function rb(re,k,oe){if(!("termType"in k))throw new Error("Nested triples cannot contain paths");return Ge.factory.quad(re,k,oe)}function en(re,k,oe,le){var we={};return re!=null&&(we.subject=re),k!=null&&(we.predicate=k),oe!=null&&(we.object=oe),le!=null&&(we.annotations=le),we}function ec(re){return typeof re=="string"?re.startsWith("e_")?Ge.factory.blankNode(re):Ge.factory.blankNode("e_"+re):Ge.factory.blankNode("g_"+Pv++)}var Pv=0;Ge._resetBlanks=function(){Pv=0};var F5=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,A5={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:`
`,r:"\r",f:"\f"},w5=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,nb=String.fromCharCode;function Mv(re,k){re=re.substring(k,re.length-k);try{re=re.replace(F5,function(oe,le,we,De){var N;if(le){if(N=parseInt(le,16),isNaN(N))throw new Error;return nb(N)}else if(we){if(N=parseInt(we,16),isNaN(N))throw new Error;return N<65535?nb(N):nb(55296+((N-=65536)>>10),56320+(N&1023))}else{var lr=A5[De];if(!lr)throw new Error;return lr}})}catch{return""}if(w5.exec(re))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+re);return re}function E5(re){var k=ec(),oe=k,le=[],we,De=[];re.forEach(function(cn){le.push(cn.entity),_s(De,cn.triples)});for(var N=0,lr=0,L=le.length,we=Array(L*2);N<L;)we[lr++]=en(oe,Ge.factory.namedNode(v5),le[N]),we[lr++]=en(oe,Ge.factory.namedNode(T5),oe=++N<L?ec():Ge.factory.namedNode(Av));return{entity:k,triples:_s(we,De)}}function j5(re){var k=ec();return{entity:k,triples:re.map(function(oe){return mt(en(k),oe)})}}function ib(re,k,oe){var le=[],we=[];return k.forEach(function(De){let N=null;De.annotation&&(N=De.annotation,De=De.object),le.push(en(null,re,De.entity,N)),_s(we,De.triples)}),Lr(le,oe||[],we)}function vs(re){return re.variable?re.variable.value:re.value||re.expression.value}function ab(re){if(!re)return[];if(re.type==="aggregate")return[re];if(re.type==="operation"){const k=[];for(const oe of re.args)k.push(...ab(oe));return k}return[]}function R5(re){const k=new Set,oe=function(le){le&&(le.termType==="Variable"?k.add(le):le.type==="operation"&&le.args.forEach(oe))};return oe(re),k}function ob(re,k=1,oe=[]){for(const le of re)k>0&&le instanceof Array?ob(le,k-1,oe):oe.push(le);return oe}function ub(re){return re.termType==="Variable"}function Nv(re){if(re.triples){const k=[];for(const oe of re.triples)ub(oe.subject)&&k.push(oe.subject.value),ub(oe.predicate)&&k.push(oe.predicate.value),ub(oe.object)&&k.push(oe.object.value);return k}else if(re.patterns){const k=[];for(const oe of re.patterns)k.push(...Nv(oe));return k}return[]}function D5(re){const k=re.slice().sort(),oe=[];for(let le=0;le<k.length-1;le++)k[le+1]==k[le]&&oe.push(k[le]);return oe}function tc(re){if(!Ge.sparqlStar)throw new Error("SPARQL-star support is not enabled");return re}function Iv(re,k,oe){for(const le of k){const we=en("subject"in le?le.subject:re,le.predicate,le.object);oe.push(we),le.annotations&&Iv(rb(re,le.predicate,le.object),le.annotations,oe)}}function sb(re){if(Ge.sparqlStar){const k=[];return re.forEach(oe=>{const le=en(oe.subject,oe.predicate,oe.object);k.push(le),oe.annotations&&Iv(rb(oe.subject,oe.predicate,oe.object),oe.annotations,k)}),k}return re}function qv(re){for(const k of re){if(k.type==="graph"&&k.name.termType==="Variable")throw new Error("Detected illegal variable in GRAPH");if(k.type==="bgp"||k.type==="graph"){for(const oe of k.triples)if(oe.subject.termType==="Variable"||oe.predicate.termType==="Variable"||oe.object.termType==="Variable")throw new Error("Detected illegal variable in BGP")}}return re}function cb(re){for(const k of re)if(k.type==="bgp"){for(const oe of k.triples)if(oe.subject.termType==="BlankNode"||oe.predicate.termType==="BlankNode"||oe.object.termType==="BlankNode")throw new Error("Detected illegal blank node in BGP")}return re}var P5=(function(){var re={EOF:1,parseError:function(oe,le){if(this.yy.parser)this.yy.parser.parseError(oe,le);else throw new Error(oe)},setInput:function(k,oe){return this.yy=oe||this.yy||{},this._input=k,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var k=this._input[0];this.yytext+=k,this.yyleng++,this.offset++,this.match+=k,this.matched+=k;var oe=k.match(/(?:\r\n?|\n).*/g);return oe?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),k},unput:function(k){var oe=k.length,le=k.split(/(?:\r\n?|\n)/g);this._input=k+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-oe),this.offset-=oe;var we=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),le.length-1&&(this.yylineno-=le.length-1);var De=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:le?(le.length===we.length?this.yylloc.first_column:0)+we[we.length-le.length].length-le[0].length:this.yylloc.first_column-oe},this.options.ranges&&(this.yylloc.range=[De[0],De[0]+this.yyleng-oe]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(k){this.unput(this.match.slice(k))},pastInput:function(){var k=this.matched.substr(0,this.matched.length-this.match.length);return(k.length>20?"...":"")+k.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var k=this.match;return k.length<20&&(k+=this._input.substr(0,20-k.length)),(k.substr(0,20)+(k.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var k=this.pastInput(),oe=new Array(k.length+1).join("-");return k+this.upcomingInput()+`
`+oe+"^"},test_match:function(k,oe){var le,we,De;if(this.options.backtrack_lexer&&(De={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(De.yylloc.range=this.yylloc.range.slice(0))),we=k[0].match(/(?:\r\n?|\n).*/g),we&&(this.yylineno+=we.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:we?we[we.length-1].length-we[we.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+k[0].length},this.yytext+=k[0],this.match+=k[0],this.matches=k,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(k[0].length),this.matched+=k[0],le=this.performAction.call(this,this.yy,this,oe,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),le)return le;if(this._backtrack){for(var N in De)this[N]=De[N];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var k,oe,le,we;this._more||(this.yytext="",this.match="");for(var De=this._currentRules(),N=0;N<De.length;N++)if(le=this._input.match(this.rules[De[N]]),le&&(!oe||le[0].length>oe[0].length)){if(oe=le,we=N,this.options.backtrack_lexer){if(k=this.test_match(le,De[N]),k!==!1)return k;if(this._backtrack){oe=!1;continue}else return!1}else if(!this.options.flex)break}return oe?(k=this.test_match(oe,De[we]),k!==!1?k:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var oe=this.next();return oe||this.lex()},begin:function(oe){this.conditionStack.push(oe)},popState:function(){var oe=this.conditionStack.length-1;return oe>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(oe){return oe=this.conditionStack.length-1-Math.abs(oe||0),oe>=0?this.conditionStack[oe]:"INITIAL"},pushState:function(oe){this.begin(oe)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(oe,le,we,De){switch(we){case 0:break;case 1:return 12;case 2:return 15;case 3:return 41;case 4:return 325;case 5:return 326;case 6:return 45;case 7:return 47;case 8:return 48;case 9:return 39;case 10:return 24;case 11:return 28;case 12:return 29;case 13:return 31;case 14:return 32;case 15:return 36;case 16:return 53;case 17:return 327;case 18:return 63;case 19:return 64;case 20:return 70;case 21:return 73;case 22:return 76;case 23:return 78;case 24:return 81;case 25:return 83;case 26:return 85;case 27:return 193;case 28:return 100;case 29:return 328;case 30:return 121;case 31:return 329;case 32:return 330;case 33:return 110;case 34:return 331;case 35:return 109;case 36:return 332;case 37:return 333;case 38:return 113;case 39:return 115;case 40:return 116;case 41:return 131;case 42:return 123;case 43:return 126;case 44:return 128;case 45:return 132;case 46:return 112;case 47:return 334;case 48:return 335;case 49:return 159;case 50:return 161;case 51:return 164;case 52:return 174;case 53:return 160;case 54:return 336;case 55:return 163;case 56:return 312;case 57:return 314;case 58:return 317;case 59:return 318;case 60:return 272;case 61:return 197;case 62:return 337;case 63:return 338;case 64:return 229;case 65:return 340;case 66:return 263;case 67:return 224;case 68:return 231;case 69:return 232;case 70:return 242;case 71:return 246;case 72:return 290;case 73:return 341;case 74:return 342;case 75:return 343;case 76:return 344;case 77:return 345;case 78:return 250;case 79:return 346;case 80:return 265;case 81:return 276;case 82:return 277;case 83:return 268;case 84:return 269;case 85:return 270;case 86:return 271;case 87:return 347;case 88:return 348;case 89:return 273;case 90:return 274;case 91:return 350;case 92:return 349;case 93:return 351;case 94:return 279;case 95:return 280;case 96:return 283;case 97:return 285;case 98:return 289;case 99:return 293;case 100:return 296;case 101:return 13;case 102:return 16;case 103:return 308;case 104:return 309;case 105:return 87;case 106:return 292;case 107:return 82;case 108:return 294;case 109:return 295;case 110:return 297;case 111:return 298;case 112:return 299;case 113:return 300;case 114:return 301;case 115:return 302;case 116:return"EXPONENT";case 117:return 303;case 118:return 304;case 119:return 305;case 120:return 306;case 121:return 89;case 122:return 310;case 123:return 6;case 124:return"INVALID";case 125:console.log(le.yytext);break}},rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:\{\|)/i,/^(?:\|\})/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(SUBJECT|PREDICATE|OBJECT|isTRIPLE))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:TRIPLE)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],inclusive:!0}}};return re})();Zg.lexer=P5;function Ge(){this.yy={}}return Ge.prototype=Zg,Zg.Parser=Ge,new Ge})();return $b=i,$b}var Jb,M2;function ux(){if(M2)return Jb;M2=1;var i="http://www.w3.org/2001/XMLSchema#integer",r="http://www.w3.org/2001/XMLSchema#string";function o(f){this._options=f=f||{};var h=f.prefixes||{};this._prefixByIri={};var p=[];for(var y in h){var _=h[y];u(_)&&(this._prefixByIri[_]=y,p.push(_))}var m=p.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+m+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=f.sparqlStar,this._indent=u(f.indent)?f.indent:"  ",this._newline=u(f.newline)?f.newline:`
`,this._explicitDatatype=!!f.explicitDatatype}o.prototype.toQuery=function(f){var h="";return f.queryType&&(h+=f.queryType.toUpperCase()+" "),f.reduced&&(h+="REDUCED "),f.distinct&&(h+="DISTINCT "),f.variables?h+=l(f.variables,void 0,function(p){return/^[?$]/.test(p)?p:c(p)?this.toEntity(p):"("+this.toExpression(p.expression)+" AS "+a(p.variable)+")"},this)+" ":f.template&&(h+=this.group(f.template,!0)+this._newline),f.from&&(h+=this.graphs("FROM ",f.from.default)+this.graphs("FROM NAMED ",f.from.named)),f.where&&(h+="WHERE "+this.group(f.where,!0)+this._newline),f.updates&&(h+=l(f.updates,";"+this._newline,this.toUpdate,this)),f.group&&(h+="GROUP BY "+l(f.group,void 0,function(p){var y=c(p.expression)?this.toEntity(p.expression):"("+this.toExpression(p.expression)+")";return p.variable?"("+y+" AS "+a(p.variable)+")":y},this)+this._newline),f.having&&(h+="HAVING ("+l(f.having,void 0,this.toExpression,this)+")"+this._newline),f.order&&(h+="ORDER BY "+l(f.order,void 0,function(p){var y="("+this.toExpression(p.expression)+")";return p.descending?"DESC "+y:y},this)+this._newline),f.offset&&(h+="OFFSET "+f.offset+this._newline),f.limit&&(h+="LIMIT "+f.limit+this._newline),f.values&&(h+=this.values(f)),h=this.baseAndPrefixes(f)+h,h.trim()},o.prototype.baseAndPrefixes=function(f){var h=f.base?"BASE <"+f.base+">"+this._newline:"",p="";for(var y in f.prefixes)(this._options.allPrefixes||this._usedPrefixes[y])&&(p+="PREFIX "+y+": <"+f.prefixes[y]+">"+this._newline);return h+p},o.prototype.toPattern=function(f){var h=f.type||f instanceof Array&&"array"||(f.subject&&f.predicate&&f.object?"triple":"");if(!(h in this))throw new Error("Unknown entry type: "+h);return this[h](f)},o.prototype.triple=function(f){return this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+"."},o.prototype.array=function(f){return l(f,this._newline,this.toPattern,this)},o.prototype.bgp=function(f){return this.encodeTriples(f.triples)},o.prototype.encodeTriples=function(f){if(!f.length)return"";for(var h=[],p=void 0,y=void 0,_=0;_<f.length;_++){var m=f[_];s(m.subject,p)?s(m.predicate,y)?h.push(","):(y=m.predicate,h.push(";"+this._newline,this._indent,this.toEntity(y))):(p&&h.push("."+this._newline),p=m.subject,y=m.predicate,h.push(this.toEntity(p)," ",this.toEntity(y))),h.push(" ",this.toEntity(m.object))}return h.push("."),h.join("")},o.prototype.graph=function(f){return"GRAPH "+this.toEntity(f.name)+" "+this.group(f)},o.prototype.graphs=function(f,h){return!h||h.length===0?"":l(h,"",function(p){return f+this.toEntity(p)+this._newline},this)},o.prototype.group=function(f,h){return f=h!==!0?this.array(f.patterns||f.triples):this.toPattern(f.type!=="group"?f:f.patterns),f.indexOf(this._newline)===-1?"{ "+f+" }":"{"+this._newline+this.indent(f)+this._newline+"}"},o.prototype.query=function(f){return this.toQuery(f)},o.prototype.filter=function(f){return"FILTER("+this.toExpression(f.expression)+")"},o.prototype.bind=function(f){return"BIND("+this.toExpression(f.expression)+" AS "+a(f.variable)+")"},o.prototype.optional=function(f){return"OPTIONAL "+this.group(f)},o.prototype.union=function(f){return l(f.patterns,this._newline+"UNION"+this._newline,function(h){return this.group(h,!0)},this)},o.prototype.minus=function(f){return"MINUS "+this.group(f)},o.prototype.values=function(f){var h=Object.keys(f.values.reduce(function(_,m){for(var O in m)_[O]=!0;return _},{})),p,y;return h.length===1?p=y="":(p="(",y=")"),"VALUES "+p+h.join(" ")+y+" {"+this._newline+l(f.values,this._newline,function(_){return"  "+p+l(h,void 0,function(m){return _[m]?this.toEntity(_[m]):"UNDEF"},this)+y},this)+this._newline+"}"},o.prototype.service=function(f){return"SERVICE "+(f.silent?"SILENT ":"")+this.toEntity(f.name)+" "+this.group(f)},o.prototype.toExpression=function(f){if(c(f))return this.toEntity(f);switch(f.type.toLowerCase()){case"aggregate":return f.aggregation.toUpperCase()+"("+(f.distinct?"DISTINCT ":"")+this.toExpression(f.expression)+(typeof f.separator=="string"?'; SEPARATOR = "'+f.separator.replace(n,t)+'"':"")+")";case"functioncall":return this.toEntity(f.function)+"("+l(f.args,", ",this.toExpression,this)+")";case"operation":var h=f.operator.toUpperCase(),p=f.args||[];switch(f.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(c(p[0])?this.toEntity(p[0]):"("+this.toExpression(p[0])+")")+" "+h+" "+(c(p[1])?this.toEntity(p[1]):"("+this.toExpression(p[1])+")");case"!":return"!("+this.toExpression(p[0])+")";case"uplus":return"+("+this.toExpression(p[0])+")";case"uminus":return"-("+this.toExpression(p[0])+")";case"notin":h="NOT IN";case"in":return this.toExpression(p[0])+" "+h+"("+(u(p[1])?p[1]:l(p[1],", ",this.toExpression,this))+")";case"notexists":h="NOT EXISTS";case"exists":return h+" "+this.group(p[0],!0);default:return h+"("+l(p,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+f.type)}},o.prototype.toEntity=function(f){if(c(f))switch(f.termType){case"Wildcard":return"*";case"Variable":return a(f);case"BlankNode":return"_:"+f.value;case"Literal":var h=f.value||"",p=f.language||"",y=f.datatype;if(f='"'+h.replace(n,t)+'"',p)f+="@"+p;else if(y){if(!this._explicitDatatype)switch(y.value){case r:return f;case i:if(/^\d+$/.test(h))return h+" "}f+="^^"+this.encodeIRI(y.value)}return f;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return f.graph&&f.graph.termType!=="DefaultGraph"?"<< GRAPH "+this.toEntity(f.graph)+" { "+this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+" }  >>":"<< "+this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+" >>";default:return this.encodeIRI(f.value)}else{var _=f.items.map(this.toEntity,this),m=f.pathType;switch(m){case"^":case"!":return m+_[0];case"*":case"+":case"?":return"("+_[0]+m+")";default:return"("+_.join(m)+")"}}};var n=/["\\\t\n\r\b\f]/g,t=function(f){return e[f]},e={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};o.prototype.encodeIRI=function(f){var h=this._prefixRegex.exec(f);if(h){var p=this._prefixByIri[h[1]];return this._usedPrefixes[p]=!0,p+":"+h[2]}return"<"+f+">"},o.prototype.toUpdate=function(f){switch(f.type||f.updateType){case"load":return"LOAD"+(f.source?" "+this.toEntity(f.source):"")+(f.destination?" INTO GRAPH "+this.toEntity(f.destination):"");case"insert":return"INSERT DATA "+this.group(f.insert,!0);case"delete":return"DELETE DATA "+this.group(f.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(f.delete,!0);case"insertdelete":return(f.graph?"WITH "+this.toEntity(f.graph)+this._newline:"")+(f.delete.length?"DELETE "+this.group(f.delete,!0)+this._newline:"")+(f.insert.length?"INSERT "+this.group(f.insert,!0)+this._newline:"")+(f.using?this.graphs("USING ",f.using.default):"")+(f.using?this.graphs("USING NAMED ",f.using.named):"")+"WHERE "+this.group(f.where,!0);case"add":case"copy":case"move":return f.type.toUpperCase()+" "+(f.silent?"SILENT ":"")+(f.source.default?"DEFAULT":this.toEntity(f.source.name))+" TO "+this.toEntity(f.destination.name);case"create":case"clear":case"drop":return f.type.toUpperCase()+(f.silent?" SILENT ":" ")+(f.graph.default?"DEFAULT":f.graph.named?"NAMED":f.graph.all?"ALL":"GRAPH "+this.toEntity(f.graph.name));default:throw new Error("Unknown update query type: "+f.type)}},o.prototype.indent=function(f){return f.replace(/^/gm,this._indent)};function a(f){return"?"+f.value}function u(f){return typeof f=="string"}function c(f){return typeof f.termType=="string"}function s(f,h){if(!f||!c(f)||!h||!c(h)||f.termType!==h.termType)return!1;switch(f.termType){case"Literal":return f.value===h.value&&f.language===h.language&&s(f.datatype,h.datatype);case"Quad":return s(f.subject,h.subject)&&s(f.predicate,h.predicate)&&s(f.object,h.object)&&s(f.graph,h.graph);default:return f.value===h.value}}function l(f,h,p,y){return f.map(p,y).join(u(h)?h:" ")}function d(f={}){return{stringify:function(h){var p=Object.create(f);return p.prefixes=h.prefixes,new o(p).toQuery(h)},createGenerator:function(){return new o(f)}}}return Jb={Generator:d},Jb}var $n={},Nc={},N2;function CN(){if(N2)return Nc;N2=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.BlankNode=void 0;class i{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return Nc.BlankNode=i,Nc}var Ic={},qc={},I2;function QN(){if(I2)return qc;I2=1,Object.defineProperty(qc,"__esModule",{value:!0}),qc.DefaultGraph=void 0;class i{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return qc.DefaultGraph=i,i.INSTANCE=new i,qc}var Lc={},xc={},q2;function N0(){if(q2)return xc;q2=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.NamedNode=void 0;class i{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return xc.NamedNode=i,xc}var L2;function UN(){if(L2)return Lc;L2=1,Object.defineProperty(Lc,"__esModule",{value:!0}),Lc.Literal=void 0;const i=N0();class r{constructor(n,t){this.termType="Literal",this.value=n,typeof t=="string"?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return Lc.Literal=r,r.RDF_LANGUAGE_STRING=new i.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new i.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Lc}var Bc={},x2;function VN(){if(x2)return Bc;x2=1,Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.Quad=void 0;class i{constructor(o,n,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=n,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return Bc.Quad=i,Bc}var Cc={},B2;function GN(){if(B2)return Cc;B2=1,Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.Variable=void 0;class i{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return Cc.Variable=i,Cc}var C2;function sx(){if(C2)return Ic;C2=1,Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.DataFactory=void 0;const i=CN(),r=QN(),o=UN(),n=N0(),t=VN(),e=GN();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new i.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return r.DefaultGraph.INSTANCE}quad(s,l,d,f){return new t.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Ic.DataFactory=u,Ic}var Q2;function cx(){return Q2||(Q2=1,(function(i){var r=$n&&$n.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=$n&&$n.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(CN(),i),o(sx(),i),o(QN(),i),o(UN(),i),o(N0(),i),o(VN(),i),o(GN(),i)})($n)),$n}var Kb,U2;function Lg(){if(U2)return Kb;U2=1;const{Parser:i}=ox(),{Generator:r}=ux(),{Wildcard:o}=BN(),{DataFactory:n}=cx();function t({prefixes:e,baseIRI:a,factory:u,pathOnly:c,sparqlStar:s,skipValidation:l,skipUngroupedVariableCheck:d}={}){const f={};for(const p in e??{})f[p]=e[p];const h=new i;return h.parse=function(){return i.base=a||"",i.prefixes=Object.create(f),i.factory=u||new n,i.sparqlStar=!!s,i.pathOnly=!!c,i.skipValidation=!!l||!!d,i.prototype.parse.apply(h,arguments)},h._resetBlanks=i._resetBlanks,h}return Kb={Parser:t,Generator:r,Wildcard:o},Kb}var V2;function xg(){if(V2)return Qr;V2=1;var i=Qr&&Qr.__createBinding||(Object.create?(function(c,s,l,d){d===void 0&&(d=l);var f=Object.getOwnPropertyDescriptor(s,l);(!f||("get"in f?!s.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(c,d,f)}):(function(c,s,l,d){d===void 0&&(d=l),c[d]=s[l]})),r=Qr&&Qr.__setModuleDefault||(Object.create?(function(c,s){Object.defineProperty(c,"default",{enumerable:!0,value:s})}):function(c,s){c.default=s}),o=Qr&&Qr.__importStar||function(c){if(c&&c.__esModule)return c;var s={};if(c!=null)for(var l in c)l!=="default"&&Object.prototype.hasOwnProperty.call(c,l)&&i(s,c,l);return r(s,c),s};Object.defineProperty(Qr,"__esModule",{value:!0});const n=o(ym()),t=ns(),e=qg(),a=Lg();class u{constructor(s){this.dataFactory=s||new t.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(s,l=!0){return this.flattenMulti({type:n.types.ALT,input:s},l)}createAsk(s){return{type:n.types.ASK,input:s}}createBoundAggregate(s,l,d,f,h){const p=this.createAggregateExpression(l,d,f,h);return p.variable=s,p}createBgp(s){return{type:n.types.BGP,patterns:s}}createConstruct(s,l){return{type:n.types.CONSTRUCT,input:s,template:l}}createDescribe(s,l){return{type:n.types.DESCRIBE,input:s,terms:l}}createDistinct(s){return{type:n.types.DISTINCT,input:s}}createExtend(s,l,d){return{type:n.types.EXTEND,input:s,variable:l,expression:d}}createFrom(s,l,d){return{type:n.types.FROM,input:s,default:l,named:d}}createFilter(s,l){return{type:n.types.FILTER,input:s,expression:l}}createGraph(s,l){return{type:n.types.GRAPH,input:s,name:l}}createGroup(s,l,d){return{type:n.types.GROUP,input:s,variables:l,aggregates:d}}createInv(s){return{type:n.types.INV,path:s}}createJoin(s,l=!0){return this.flattenMulti({type:n.types.JOIN,input:s},l)}createLeftJoin(s,l,d){return d?{type:n.types.LEFT_JOIN,input:[s,l],expression:d}:{type:n.types.LEFT_JOIN,input:[s,l]}}createLink(s){return{type:n.types.LINK,iri:s}}createMinus(s,l){return{type:n.types.MINUS,input:[s,l]}}createNop(){return{type:n.types.NOP}}createNps(s){return{type:n.types.NPS,iris:s}}createOneOrMorePath(s){return{type:n.types.ONE_OR_MORE_PATH,path:s}}createOrderBy(s,l){return{type:n.types.ORDER_BY,input:s,expressions:l}}createPath(s,l,d,f){return f?{type:n.types.PATH,subject:s,predicate:l,object:d,graph:f}:{type:n.types.PATH,subject:s,predicate:l,object:d,graph:this.dataFactory.defaultGraph()}}createPattern(s,l,d,f){const h=this.dataFactory.quad(s,l,d,f);return h.type=n.types.PATTERN,h}createProject(s,l){return{type:n.types.PROJECT,input:s,variables:l}}createReduced(s){return{type:n.types.REDUCED,input:s}}createSeq(s,l=!0){return this.flattenMulti({type:n.types.SEQ,input:s},l)}createService(s,l,d){return{type:n.types.SERVICE,input:s,name:l,silent:!!d}}createSlice(s,l,d){return l=l||0,d!==void 0?{type:n.types.SLICE,input:s,start:l,length:d}:{type:n.types.SLICE,input:s,start:l}}createUnion(s,l=!0){return this.flattenMulti({type:n.types.UNION,input:s},l)}createValues(s,l){return{type:n.types.VALUES,variables:s,bindings:l}}createZeroOrMorePath(s){return{type:n.types.ZERO_OR_MORE_PATH,path:s}}createZeroOrOnePath(s){return{type:n.types.ZERO_OR_ONE_PATH,path:s}}createAggregateExpression(s,l,d,f){return f?{type:n.types.EXPRESSION,expressionType:n.expressionTypes.AGGREGATE,aggregator:s,expression:l,separator:f,distinct:d}:{type:n.types.EXPRESSION,expressionType:n.expressionTypes.AGGREGATE,aggregator:s,expression:l,distinct:d}}createExistenceExpression(s,l){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.EXISTENCE,not:s,input:l}}createNamedExpression(s,l){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.NAMED,name:s,args:l}}createOperatorExpression(s,l){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.OPERATOR,operator:s,args:l}}createTermExpression(s){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.TERM,term:s}}createWildcardExpression(){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.WILDCARD,wildcard:new a.Wildcard}}createTerm(s){return s[0]==="$"&&(s=s.replace("$","?")),(0,e.stringToTerm)(s,this.dataFactory)}createCompositeUpdate(s){return{type:n.types.COMPOSITE_UPDATE,updates:s}}createDeleteInsert(s,l,d){const f={type:n.types.DELETE_INSERT};return s&&(f.delete=s),l&&(f.insert=l),d&&(f.where=d),f}createLoad(s,l,d){const f={type:n.types.LOAD,source:s};return l&&(f.destination=l),this.addSilent(f,!!d)}createClear(s,l){return this.addSilent({type:n.types.CLEAR,source:s},!!l)}createCreate(s,l){return this.addSilent({type:n.types.CREATE,source:s},!!l)}createDrop(s,l){return this.addSilent({type:n.types.DROP,source:s},!!l)}createAdd(s,l,d){return this.addSilent({type:n.types.ADD,source:s,destination:l},!!d)}createMove(s,l,d){return this.addSilent({type:n.types.MOVE,source:s,destination:l},!!d)}createCopy(s,l,d){return this.addSilent({type:n.types.COPY,source:s,destination:l},!!d)}addSilent(s,l){return l&&(s.silent=l),s}flattenMulti(s,l){if(!l)return s;const d=s.type,f=s.input;let h=[];for(const p of f)p.type===d?h.push(...p.input):h.push(p);return s.input=h,s}}return Qr.default=u,Qr}var Ss={},Jn={},tt={},G2;function lx(){if(G2)return tt;G2=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.TRIPLE_TERM_NAMES=tt.QUAD_TERM_NAMES=void 0,tt.getTerms=o,tt.getTermsNested=n,tt.getNamedTerms=t,tt.collectNamedTerms=e,tt.forEachTerms=a,tt.forEachTermsNested=u,tt.filterTerms=c,tt.filterTermsNested=s,tt.filterQuadTermNames=l,tt.filterQuadTermNamesNested=d,tt.mapTerms=f,tt.mapTermsNested=h,tt.reduceTerms=p,tt.reduceTermsNested=y,tt.everyTerms=_,tt.everyTermsNested=m,tt.someTerms=O,tt.someTermsNested=v,tt.getValueNestedPath=S,tt.matchTerm=E,tt.matchPattern=j,tt.matchPatternComplete=Q,tt.matchPatternMappings=z;const i=ns(),r=new i.DataFactory;tt.QUAD_TERM_NAMES=["subject","predicate","object","graph"],tt.TRIPLE_TERM_NAMES=["subject","predicate","object"];function o(g,F){return F&&g.graph.termType==="DefaultGraph"?[g.subject,g.predicate,g.object]:[g.subject,g.predicate,g.object,g.graph]}function n(g,F){const P=[];for(const R of o(g,F))R.termType==="Quad"?n(R,F).forEach(M=>P.push(M)):P.push(R);return P}function t(g){return[{key:"subject",value:g.subject},{key:"predicate",value:g.predicate},{key:"object",value:g.object},{key:"graph",value:g.graph}]}function e(g,F,P){const R={};return g.forEach(M=>R[M.key]=M.value),F&&(R.subject=R.subject||F("subject"),R.predicate=R.predicate||F("predicate"),R.object=R.object||F("object"),R.graph=R.graph||F("graph")),(P||r).quad(R.subject,R.predicate,R.object,R.graph)}function a(g,F){F(g.subject,"subject"),F(g.predicate,"predicate"),F(g.object,"object"),F(g.graph,"graph")}function u(g,F,P=[]){g.subject.termType==="Quad"?u(g.subject,F,[...P,"subject"]):F(g.subject,[...P,"subject"]),g.predicate.termType==="Quad"?u(g.predicate,F,[...P,"predicate"]):F(g.predicate,[...P,"predicate"]),g.object.termType==="Quad"?u(g.object,F,[...P,"object"]):F(g.object,[...P,"object"]),g.graph.termType==="Quad"?u(g.graph,F,[...P,"graph"]):F(g.graph,[...P,"graph"])}function c(g,F){const P=[];return F(g.subject,"subject")&&P.push(g.subject),F(g.predicate,"predicate")&&P.push(g.predicate),F(g.object,"object")&&P.push(g.object),F(g.graph,"graph")&&P.push(g.graph),P}function s(g,F,P=[]){let R=[];return g.subject.termType==="Quad"?R=[...R,...s(g.subject,F,[...P,"subject"])]:F(g.subject,[...P,"subject"])&&R.push(g.subject),g.predicate.termType==="Quad"?R=[...R,...s(g.predicate,F,[...P,"predicate"])]:F(g.predicate,[...P,"predicate"])&&R.push(g.predicate),g.object.termType==="Quad"?R=[...R,...s(g.object,F,[...P,"object"])]:F(g.object,[...P,"object"])&&R.push(g.object),g.graph.termType==="Quad"?R=[...R,...s(g.graph,F,[...P,"graph"])]:F(g.graph,[...P,"graph"])&&R.push(g.graph),R}function l(g,F){const P=[];return F(g.subject,"subject")&&P.push("subject"),F(g.predicate,"predicate")&&P.push("predicate"),F(g.object,"object")&&P.push("object"),F(g.graph,"graph")&&P.push("graph"),P}function d(g,F,P=[]){let R=[];const M=[...P,"subject"];g.subject.termType==="Quad"?R=[...R,...d(g.subject,F,M)]:F(g.subject,M)&&R.push(M);const C=[...P,"predicate"];g.predicate.termType==="Quad"?R=[...R,...d(g.predicate,F,C)]:F(g.predicate,C)&&R.push(C);const H=[...P,"object"];g.object.termType==="Quad"?R=[...R,...d(g.object,F,H)]:F(g.object,H)&&R.push(H);const G=[...P,"graph"];return g.graph.termType==="Quad"?R=[...R,...d(g.graph,F,G)]:F(g.graph,G)&&R.push(G),R}function f(g,F,P){return(P||r).quad(F(g.subject,"subject"),F(g.predicate,"predicate"),F(g.object,"object"),F(g.graph,"graph"))}function h(g,F,P,R=[]){return(P||r).quad(g.subject.termType==="Quad"?h(g.subject,F,P,[...R,"subject"]):F(g.subject,[...R,"subject"]),g.predicate.termType==="Quad"?h(g.predicate,F,P,[...R,"predicate"]):F(g.predicate,[...R,"predicate"]),g.object.termType==="Quad"?h(g.object,F,P,[...R,"object"]):F(g.object,[...R,"object"]),g.graph.termType==="Quad"?h(g.graph,F,P,[...R,"graph"]):F(g.graph,[...R,"graph"]))}function p(g,F,P){let R=P;return R=F(R,g.subject,"subject"),R=F(R,g.predicate,"predicate"),R=F(R,g.object,"object"),F(R,g.graph,"graph")}function y(g,F,P,R=[]){let M=P;return g.subject.termType==="Quad"?M=y(g.subject,F,M,[...R,"subject"]):M=F(M,g.subject,[...R,"subject"]),g.predicate.termType==="Quad"?M=y(g.predicate,F,M,[...R,"predicate"]):M=F(M,g.predicate,[...R,"predicate"]),g.object.termType==="Quad"?M=y(g.object,F,M,[...R,"object"]):M=F(M,g.object,[...R,"object"]),g.graph.termType==="Quad"?M=y(g.graph,F,M,[...R,"graph"]):M=F(M,g.graph,[...R,"graph"]),M}function _(g,F){return F(g.subject,"subject")&&F(g.predicate,"predicate")&&F(g.object,"object")&&F(g.graph,"graph")}function m(g,F,P=[]){return(g.subject.termType==="Quad"?m(g.subject,F,[...P,"subject"]):F(g.subject,[...P,"subject"]))&&(g.predicate.termType==="Quad"?m(g.predicate,F,[...P,"predicate"]):F(g.predicate,[...P,"predicate"]))&&(g.object.termType==="Quad"?m(g.object,F,[...P,"object"]):F(g.object,[...P,"object"]))&&(g.graph.termType==="Quad"?m(g.graph,F,[...P,"graph"]):F(g.graph,[...P,"graph"]))}function O(g,F){return F(g.subject,"subject")||F(g.predicate,"predicate")||F(g.object,"object")||F(g.graph,"graph")}function v(g,F,P=[]){return(g.subject.termType==="Quad"?v(g.subject,F,[...P,"subject"]):F(g.subject,[...P,"subject"]))||(g.predicate.termType==="Quad"?v(g.predicate,F,[...P,"predicate"]):F(g.predicate,[...P,"predicate"]))||(g.object.termType==="Quad"?v(g.object,F,[...P,"object"]):F(g.object,[...P,"object"]))||(g.graph.termType==="Quad"?v(g.graph,F,[...P,"graph"]):F(g.graph,[...P,"graph"]))}function S(g,F){if(F.length===0)return g;if(g.termType==="Quad")return S(g[F[0]],F.slice(1));throw new Error(`Tried to get ${F[0]} from term of type ${g.termType}`)}function E(g,F){return!F||F.termType==="Variable"||F.termType==="Quad"&&g.termType==="Quad"&&Q(g,F)||F.equals(g)}function j(g,F,P,R,M){return E(g.subject,F)&&E(g.predicate,P)&&E(g.object,R)&&E(g.graph,M)}function Q(g,F){return j(g,F.subject,F.predicate,F.object,F.graph)}function z(g,F,P={}){const R={};function M(C,H){return _(C,(G,J)=>{var ne,te;const Z=H[J];switch(G.termType){case"Variable":return P.skipVarMapping&&Z.termType==="Variable"||((te=(ne=R[G.value])===null||ne===void 0?void 0:ne.equals(Z))!==null&&te!==void 0?te:(R[G.value]=Z,!0));case"Quad":return Z.termType==="Quad"&&M(G,Z);default:return G.equals(Z)}})}return M(F,g)&&(P.returnMappings?R:!0)}return tt}var dr={},X2;function dx(){if(X2)return dr;X2=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.TERM_TYPES=void 0,dr.uniqTerms=r,dr.getTermsOfType=o,dr.getNamedNodes=n,dr.getBlankNodes=t,dr.getLiterals=e,dr.getVariables=a,dr.getDefaultGraphs=u,dr.getQuads=c;const i=qg();dr.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function r(s){const l={};return s.filter(d=>{const f=(0,i.termToString)(d);return!(f in l)&&(l[f]=!0)})}function o(s,l){return s.filter(d=>d.termType===l)}function n(s){return o(s,"NamedNode")}function t(s){return o(s,"BlankNode")}function e(s){return o(s,"Literal")}function a(s){return o(s,"Variable")}function u(s){return o(s,"DefaultGraph")}function c(s){return o(s,"Quad")}return dr}var z2;function fx(){return z2||(z2=1,(function(i){var r=Jn&&Jn.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Jn&&Jn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(lx(),i),o(dx(),i)})(Jn)),Jn}var H2;function I0(){if(H2)return Ss;H2=1;var i=Ss&&Ss.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ss,"__esModule",{value:!0});const r=ym(),o=i(xg()),n=fx();class t{static flatten(a){return Array.prototype.concat(...a).filter(u=>u)}static objectify(a){if(a.termType){if(a.termType==="Quad")return{type:"pattern",termType:"Quad",subject:t.objectify(a.subject),predicate:t.objectify(a.predicate),object:t.objectify(a.object),graph:t.objectify(a.graph)};{let u={termType:a.termType,value:a.value};return a.language&&(u.language=a.language),a.datatype&&(u.datatype=t.objectify(a.datatype)),u}}if(Array.isArray(a))return a.map(u=>t.objectify(u));if(a===Object(a)){let u={};for(let c of Object.keys(a))u[c]=t.objectify(a[c]);return u}return a}static inScopeVariables(a){const u=[];function c(l){u.find(d=>l.value===d.value)||u.push(l)}function s(l){l.subject.termType==="Variable"&&c(l.subject),l.predicate.termType==="Variable"&&c(l.predicate),l.object.termType==="Variable"&&c(l.object),l.graph.termType==="Variable"&&c(l.graph),l.subject.termType==="Quad"&&s(l.subject),l.predicate.termType==="Quad"&&s(l.predicate),l.object.termType==="Quad"&&s(l.object),l.graph.termType==="Quad"&&s(l.graph)}return t.recurseOperation(a,{[r.types.EXPRESSION]:l=>(l.expressionType===r.expressionTypes.AGGREGATE&&l.variable&&c(l.variable),!0),[r.types.EXTEND]:l=>(c(l.variable),!0),[r.types.GRAPH]:l=>(l.name.termType==="Variable"&&c(l.name),!0),[r.types.GROUP]:l=>(l.variables.forEach(c),!0),[r.types.PATH]:l=>(l.subject.termType==="Variable"&&c(l.subject),l.object.termType==="Variable"&&c(l.object),l.graph.termType==="Variable"&&c(l.graph),l.subject.termType==="Quad"&&s(l.subject),l.object.termType==="Quad"&&s(l.object),l.graph.termType==="Quad"&&s(l.graph),!0),[r.types.PATTERN]:l=>(s(l),!0),[r.types.PROJECT]:l=>(l.variables.forEach(c),!1),[r.types.SERVICE]:l=>(l.name.termType==="Variable"&&c(l.name),!0),[r.types.VALUES]:l=>(l.variables.forEach(c),!0)}),u}static recurseOperation(a,u){let c=a,s=!0;const l=u[a.type];if(l&&(s=l(a)),!s)return;let d=f=>t.recurseOperation(f,u);switch(c.type){case r.types.ALT:c.input.map(d);break;case r.types.ASK:d(c.input);break;case r.types.BGP:c.patterns.forEach(d);break;case r.types.CONSTRUCT:d(c.input),c.template.map(d);break;case r.types.DESCRIBE:d(c.input);break;case r.types.DISTINCT:d(c.input);break;case r.types.EXPRESSION:c.expressionType===r.expressionTypes.EXISTENCE&&d(c.input);break;case r.types.EXTEND:d(c.input),d(c.expression);break;case r.types.FILTER:d(c.input),d(c.expression);break;case r.types.FROM:d(c.input);break;case r.types.GRAPH:d(c.input);break;case r.types.GROUP:d(c.input),c.aggregates.forEach(d);break;case r.types.INV:d(c.path);break;case r.types.JOIN:c.input.map(d);break;case r.types.LEFT_JOIN:c.input.map(d),c.expression&&d(c.expression);break;case r.types.LINK:break;case r.types.MINUS:c.input.map(d);break;case r.types.NOP:break;case r.types.NPS:break;case r.types.ONE_OR_MORE_PATH:d(c.path);break;case r.types.ORDER_BY:d(c.input),c.expressions.forEach(d);break;case r.types.PATH:d(c.predicate);break;case r.types.PATTERN:break;case r.types.PROJECT:d(c.input);break;case r.types.REDUCED:d(c.input);break;case r.types.SEQ:c.input.map(d);break;case r.types.SERVICE:d(c.input);break;case r.types.SLICE:d(c.input);break;case r.types.UNION:c.input.map(d);break;case r.types.VALUES:break;case r.types.ZERO_OR_MORE_PATH:d(c.path);break;case r.types.ZERO_OR_ONE_PATH:d(c.path);break;case r.types.COMPOSITE_UPDATE:c.updates.forEach(f=>d(f));break;case r.types.DELETE_INSERT:c.delete&&c.delete.forEach(f=>d(f)),c.insert&&c.insert.forEach(f=>d(f)),c.where&&d(c.where);break;case r.types.LOAD:break;case r.types.CLEAR:break;case r.types.CREATE:break;case r.types.DROP:break;case r.types.ADD:break;case r.types.MOVE:break;case r.types.COPY:break;default:throw new Error(`Unknown Operation type ${c.type}`)}}static mapOperation(a,u,c){let s=a,l=!0,d=!0;c=c||new o.default;const f=u[a.type];if(f){const y=f(a,c);s=y.result,l=y.recurse,d=y.copyMetadata!==!1}let h;if(d&&(s.metadata||a.metadata)&&(h={...s.metadata,...a.metadata}),!l)return h&&(s.metadata=h),s;let p=y=>t.mapOperation(y,u,c);switch(s.type){case r.types.ALT:s=c.createAlt(s.input.map(p));break;case r.types.ASK:s=c.createAsk(p(s.input));break;case r.types.BGP:s=c.createBgp(s.patterns.map(p));break;case r.types.CONSTRUCT:s=c.createConstruct(p(s.input),s.template.map(p));break;case r.types.DESCRIBE:s=c.createDescribe(p(s.input),s.terms);break;case r.types.DISTINCT:s=c.createDistinct(p(s.input));break;case r.types.EXPRESSION:s=t.mapExpression(s,u,c);break;case r.types.EXTEND:s=c.createExtend(p(s.input),s.variable,p(s.expression));break;case r.types.FILTER:s=c.createFilter(p(s.input),p(s.expression));break;case r.types.FROM:s=c.createFrom(p(s.input),[...s.default],[...s.named]);break;case r.types.GRAPH:s=c.createGraph(p(s.input),s.name);break;case r.types.GROUP:s=c.createGroup(p(s.input),[].concat(s.variables),s.aggregates.map(p));break;case r.types.INV:s=c.createInv(p(s.path));break;case r.types.JOIN:s=c.createJoin(s.input.map(p));break;case r.types.LEFT_JOIN:s=c.createLeftJoin(p(s.input[0]),p(s.input[1]),s.expression?p(s.expression):void 0);break;case r.types.LINK:s=c.createLink(s.iri);break;case r.types.MINUS:s=c.createMinus(p(s.input[0]),p(s.input[1]));break;case r.types.NOP:s=c.createNop();break;case r.types.NPS:s=c.createNps([].concat(s.iris));break;case r.types.ONE_OR_MORE_PATH:s=c.createOneOrMorePath(p(s.path));break;case r.types.ORDER_BY:s=c.createOrderBy(p(s.input),s.expressions.map(p));break;case r.types.PATH:s=c.createPath(s.subject,p(s.predicate),s.object,s.graph);break;case r.types.PATTERN:s=c.createPattern(s.subject,s.predicate,s.object,s.graph);break;case r.types.PROJECT:s=c.createProject(p(s.input),[...s.variables]);break;case r.types.REDUCED:s=c.createReduced(p(s.input));break;case r.types.SEQ:s=c.createSeq(s.input.map(p));break;case r.types.SERVICE:s=c.createService(p(s.input),s.name,s.silent);break;case r.types.SLICE:s=c.createSlice(p(s.input),s.start,s.length);break;case r.types.UNION:s=c.createUnion(s.input.map(p));break;case r.types.VALUES:s=c.createValues([].concat(s.variables),s.bindings.map(y=>Object.assign({},y)));break;case r.types.ZERO_OR_MORE_PATH:s=c.createZeroOrMorePath(p(s.path));break;case r.types.ZERO_OR_ONE_PATH:s=c.createZeroOrOnePath(p(s.path));break;case r.types.COMPOSITE_UPDATE:s=c.createCompositeUpdate(s.updates.map(p));break;case r.types.DELETE_INSERT:s=c.createDeleteInsert(s.delete?s.delete.map(p):void 0,s.insert?s.insert.map(p):void 0,s.where?p(s.where):void 0);break;case r.types.LOAD:s=c.createLoad(s.source,s.destination,s.silent);break;case r.types.CLEAR:s=c.createClear(s.source,s.silent);break;case r.types.CREATE:s=c.createCreate(s.source,s.silent);break;case r.types.DROP:s=c.createDrop(s.source,s.silent);break;case r.types.ADD:s=c.createAdd(s.source,s.destination);break;case r.types.MOVE:s=c.createMove(s.source,s.destination);break;case r.types.COPY:s=c.createCopy(s.source,s.destination);break;default:throw new Error(`Unknown Operation type ${s.type}`)}return h&&(s.metadata=h),s}static mapExpression(a,u,c){let s=a,l=!0;c=c||new o.default;const d=u[a.expressionType];if(d&&({result:s,recurse:l}=d(a,c)),!l)return s;let f=h=>t.mapOperation(h,u,c);switch(a.expressionType){case r.expressionTypes.AGGREGATE:return a.variable?c.createBoundAggregate(a.variable,a.aggregator,f(a.expression),a.distinct,a.separator):c.createAggregateExpression(a.aggregator,f(a.expression),a.distinct,a.separator);case r.expressionTypes.EXISTENCE:return c.createExistenceExpression(a.not,f(a.input));case r.expressionTypes.NAMED:return c.createNamedExpression(a.name,a.args.map(f));case r.expressionTypes.OPERATOR:return c.createOperatorExpression(a.operator,a.args.map(f));case r.expressionTypes.TERM:return c.createTermExpression(a.term);case r.expressionTypes.WILDCARD:return c.createWildcardExpression();default:throw new Error(`Unknown Expression type ${a.expressionType}`)}}static cloneOperation(a){return t.mapOperation(a,{})}static cloneExpression(a){return t.mapExpression(a,{})}static createUniqueVariable(a,u,c){let s=0,l=a;for(;u[l];)l=`${a}${s++}`;return c.variable(l)}static isSimpleTerm(a){return a.termType!==void 0&&a.termType!=="Quad"&&a.termType!=="Wildcard"}static isQuad(a){return a.termType==="Quad"}static hasQuadVariables(a){return(0,n.someTermsNested)(a,u=>u.termType==="Variable")}static isWildcard(a){return a.termType==="Wildcard"}}return Ss.default=t,Ss}var $2;function px(){if($2)return br;$2=1;var i=br&&br.__createBinding||(Object.create?(function(b,w,T,A){A===void 0&&(A=T);var D=Object.getOwnPropertyDescriptor(w,T);(!D||("get"in D?!w.__esModule:D.writable||D.configurable))&&(D={enumerable:!0,get:function(){return w[T]}}),Object.defineProperty(b,A,D)}):(function(b,w,T,A){A===void 0&&(A=T),b[A]=w[T]})),r=br&&br.__setModuleDefault||(Object.create?(function(b,w){Object.defineProperty(b,"default",{enumerable:!0,value:w})}):function(b,w){b.default=w}),o=br&&br.__importStar||function(b){if(b&&b.__esModule)return b;var w={};if(b!=null)for(var T in b)T!=="default"&&Object.prototype.hasOwnProperty.call(b,T)&&i(w,b,T);return r(w,b),w},n=br&&br.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(br,"__esModule",{value:!0});const t=ix(),e=qg(),a=o(ym()),u=n(xg()),c=n(I0()),s=Lg().Parser,l=a.types;let d=new Set,f=0,h=!1,p;function y(b,w){w=w||{},p=new u.default(w.dataFactory);let T;if(m(b)){let A=new s(w);A._resetBlanks(),T=A.parse(b)}else T=b;return _(T,w.quads,w.blankToVariable)}br.default=y;function _(b,w,T){if(d=new Set,f=0,h=!!w,!b.type)return p.createNop();if(b.type!=="query"&&b.type!=="update")throw new Error("Translate only works on complete query or update objects.");let A;if(E(b),b.type==="query"){const D={type:"group",patterns:b.where||[]};A=Q(D),A=Z(b,A)}else b.type==="update"&&(A=Te(b));return T&&(A=q(A)),A}function m(b){return typeof b=="string"}function O(b){return!!b?.termType}function v(b){return b.subject&&b.predicate&&b.object}function S(b){return b?.termType==="Variable"}function E(b){if(O(b))S(b)&&d.add(`?${b.value}`);else if(Array.isArray(b))for(const w of b)E(w);else if(b&&typeof b=="object")for(let w of Object.keys(b))w.startsWith("?")?d.add(w):w.startsWith("$")&&d.add(`?${w.slice(1)}`),E(b[w])}function j(b){let w={};if(v(b)){const T=[j(b.subject),j(b.predicate),j(b.object),b.graph?j(b.graph):{}];Object.assign(w,...T)}else if(O(b))S(b)&&(w[b.value]=b);else if(b.type==="bgp"){const T=b.triples;Object.assign(w,...T.map(j))}else if(b.type==="path")Object.assign(w,...b.items.map(j));else if(b.type==="group"||b.type==="union"||b.type==="optional")Object.assign(w,...b.patterns.map(j));else if(b.type==="service"||b.type==="graph")Object.assign(w,j(b.name)),Object.assign(w,...b.patterns.map(j));else if(b.type==="bind")Object.assign(w,j(b.variable));else if(b.type==="values"){if(b.values.length>0){const T=Object.keys(b.values[0]).map(A=>p.createTerm(A));Object.assign(w,...T.map(j))}}else if(b.type==="query"&&(b.queryType==="SELECT"||b.queryType==="DESCRIBE")){b.where&&b.variables.some(c.default.isWildcard)&&Object.assign(w,...b.where.map(j));for(const T of b.variables)S(T)?Object.assign(w,j(T)):T.variable&&Object.assign(w,j(T.variable));if(b.queryType==="SELECT"){if(b.group)for(const T of b.group)T.variable&&Object.assign(w,j(T.variable));if(b.values){const T={type:"values",values:b.values};Object.assign(w,j(T))}}}return w}function Q(b){if(b.type==="bgp")return g(b);if(b.type==="union")return p.createUnion(b.patterns.map(w=>(w.type!=="group"&&(w={type:"group",patterns:[w]}),Q(w))));if(b.type==="graph"){const w={type:"group",patterns:b.patterns};let T=Q(w);return h?T=G(T,b.name):T=p.createGraph(T,b.name),T}if(b.type==="values")return te(b);if(b.type==="query")return _(b,h,!1);if(b.type==="group"){let w=[],T=[];for(let x of b.patterns)(x.type==="filter"?w:T).push(x);let A=T.reduce(J,p.createBgp([])),D=w.map(x=>z(x.expression));return D.length>0&&(A=p.createFilter(A,D.reduce((x,I)=>p.createOperatorExpression("&&",[x,I])))),A}throw new Error(`Unexpected type: ${b.type}`)}function z(b){if(c.default.isSimpleTerm(b))return p.createTermExpression(b);if(c.default.isQuad(b))return c.default.hasQuadVariables(b)?p.createOperatorExpression("triple",[z(b.subject),z(b.predicate),z(b.object)]):p.createTermExpression(b);if(c.default.isWildcard(b))return p.createWildcardExpression();if("aggregation"in b)return p.createAggregateExpression(b.aggregation,z(b.expression),!!b.distinct,b.separator);if("function"in b)return p.createNamedExpression(b.function,b.args.map(z));if("operator"in b)return b.operator==="exists"||b.operator==="notexists"?p.createExistenceExpression(b.operator==="notexists",Q(b.args[0])):((b.operator==="in"||b.operator==="notin")&&(b.args=[b.args[0]].concat(b.args[1])),p.createOperatorExpression(b.operator,b.args.map(z)));throw new Error(`Unknown expression: ${JSON.stringify(b)}`)}function g(b){let w=[],T=[];for(let A of b.triples)if("pathType"in A.predicate){let D=F(A);for(let x of D)x.type===l.PATH?(w.length>0&&T.push(p.createBgp(w)),w=[],T.push(x)):w.push(x)}else w.push(C(A));return w.length>0&&T.push(p.createBgp(w)),T.length===1?T[0]:p.createJoin(T)}function F(b){let w=b.subject,T=P(b.predicate),A=b.object;return R(w,T,A)}function P(b){if(c.default.isSimpleTerm(b)){if(b.termType==="NamedNode")return p.createLink(b);throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(b)}`)}if(b.pathType==="^")return p.createInv(P(b.items[0]));if(b.pathType==="!"){let w=[],T=[],A;"pathType"in b.items[0]&&b.items[0].pathType==="|"?A=b.items[0].items:A=b.items;for(let I of A)if(c.default.isSimpleTerm(I))w.push(I);else if(I.pathType==="^")T.push(I.items[0]);else throw new Error(`Unexpected item: ${JSON.stringify(I)}`);let D=p.createNps(w),x=p.createInv(p.createNps(T));return T.length===0?D:w.length===0?x:p.createAlt([D,x])}if(b.pathType==="/")return p.createSeq(b.items.map(P));if(b.pathType==="|")return p.createAlt(b.items.map(P));if(b.pathType==="*")return p.createZeroOrMorePath(P(b.items[0]));if(b.pathType==="+")return p.createOneOrMorePath(P(b.items[0]));if(b.pathType==="?")return p.createZeroOrOnePath(P(b.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(b)}`)}function R(b,w,T){if(w.type===l.LINK)return[p.createPattern(b,w.iri,T)];if(w.type===l.INV)return R(T,w.path,b);if(w.type===l.SEQ){let A=b;return c.default.flatten(w.input.map((D,x)=>{const I=x===w.input.length-1?T:M(),U=R(A,D,I);return I.termType==="Variable"&&(A=I),U}))}return[p.createPath(b,w,T)]}function M(){let b=`?var${f++}`;return d.has(b)?M():(d.add(b),p.createTerm(b))}function C(b){if("pathType"in b.predicate)throw new Error("Trying to translate property path to quad.");return p.createPattern(b.subject,b.predicate,b.object,b.graph)}let H=Object.values(l);function G(b,w,T){if(b.type===l.GRAPH){if(T)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");b=G(b.input,b.name)}else if(b.type!==l.SERVICE)if(b.type===l.BGP)b.patterns=b.patterns.map(A=>(T&&(A.subject.equals(w)&&(A.subject=T),A.predicate.equals(w)&&(A.predicate=T),A.object.equals(w)&&(A.object=T)),A.graph.termType==="DefaultGraph"&&(A.graph=w),A));else if(b.type===l.PATH)T&&(b.subject.equals(w)&&(b.subject=T),b.object.equals(w)&&(b.object=T)),b.graph.termType==="DefaultGraph"&&(b.graph=w);else if(b.type===l.PROJECT&&!T)b.variables.some(A=>A.equals(w))||(T=M()),b.input=G(b.input,w,T);else if(b.type===l.EXTEND&&!T)b.variable.equals(w)&&(T=M()),b.input=G(b.input,w,T);else if(b.type===l.MINUS&&w.termType==="Variable")b.metadata={graphVariableFromParentScope:w},b.input=[G(b.input[0],w,T),G(b.input[1],w,T)];else for(let A of Object.keys(b))Array.isArray(b[A])?b[A]=b[A].map(D=>G(D,w,T)):H.indexOf(b[A].type)>=0?b[A]=G(b[A],w,T):T&&S(b[A])&&b[A].equals(w)&&(b[A]=T);return b}function J(b,w){if(w.type==="optional"){const T=Q({type:"group",patterns:w.patterns});T.type===l.FILTER?b=p.createLeftJoin(b,T.input,T.expression):b=p.createLeftJoin(b,T)}else if(w.type==="minus"){const T=Q({type:"group",patterns:w.patterns});b=p.createMinus(b,T)}else if(w.type==="bind")b=p.createExtend(b,w.variable,z(w.expression));else if(w.type==="service"){const T={type:"group",patterns:w.patterns},A=p.createService(Q(T),w.name,w.silent);b=ne(b,A)}else{const T=Q(w);b=ne(b,T)}return b}function ne(b,w){return b.type===l.BGP&&w.type===l.BGP?b=p.createBgp([...b.patterns,...w.patterns]):b.type===l.BGP&&b.patterns.length===0?b=w:w.type===l.BGP&&w.patterns.length===0||(b=p.createJoin([b,w])),b}function te(b){let w=(b.values.length===0?[]:Object.keys(b.values[0])).map(p.createTerm.bind(p)),T=b.values.map(A=>{let D=Object.keys(A);D=D.filter(I=>A[I]!==void 0);let x={};for(let I of D)x[I]=A[I];return x});return p.createValues(w,T)}function Z(b,w){const T=b,A=[],D={};if(T.variables=T.variables&&T.variables.map(I=>ye(I,D)),T.having=T.having&&T.having.map(I=>ye(I,D)),T.order=T.order&&T.order.map(I=>ye(I,D)),T.group||Object.keys(D).length>0){const I=Object.keys(D).map(X=>ve(D[X],p.createTerm(X))),U=[];if(T.group)for(const X of T.group)if(c.default.isSimpleTerm(X.expression))U.push(X.expression);else{const V="variable"in X?X.variable:M();w=p.createExtend(w,V,z(X.expression)),U.push(V)}w=p.createGroup(w,U,I)}if(T.having)for(let I of T.having)w=p.createFilter(w,z(I));b.values&&(w=p.createJoin([w,te(b)]));let x=[];if(b.queryType==="SELECT"||b.queryType==="DESCRIBE")if(b.variables.some(I=>I&&c.default.isWildcard(I)))x=Object.values(j(b)).sort((I,U)=>I.value.localeCompare(U.value));else for(let I of b.variables)S(I)||!("variable"in I)?x.push(I):I.variable&&(x.push(I.variable),A.push(I));for(let I of A)w=p.createExtend(w,I.variable,z(I.expression));return T.order&&(w=p.createOrderBy(w,T.order.map(I=>{let U=z(I.expression);return I.descending&&(U=p.createOperatorExpression("desc",[U])),U}))),b.queryType==="SELECT"&&(w=p.createProject(w,x)),T.distinct&&(w=p.createDistinct(w)),T.reduced&&(w=p.createReduced(w)),b.queryType==="CONSTRUCT"?w=p.createConstruct(w,(b.template||[]).map(C)):b.queryType==="ASK"?w=p.createAsk(w):b.queryType==="DESCRIBE"&&(w=p.createDescribe(w,x)),(T.offset||T.limit)&&(w=p.createSlice(w,T.offset||0,T.limit)),T.from&&(w=p.createFrom(w,T.from.default,T.from.named)),w}function ye(b,w){if("type"in b&&b.type==="aggregate"){let T=!1,A;for(let D of Object.keys(w))if(t(w[D],b)){A=p.createTerm(D),T=!0;break}return T||(A=M(),w[(0,e.termToString)(A)]=b),A}return"expression"in b&&b.expression?{...b,expression:ye(b.expression,w)}:"args"in b&&b.args?{...b,args:b.args.map(T=>ye(T,w))}:b}function ve(b,w){if(b.type!=="aggregate"||!b.aggregation)throw new Error(`Unexpected input: ${JSON.stringify(b)}`);const T=z(b);return T.variable=w,T}function Te(b){return b.updates.length===1?ee(b.updates[0]):p.createCompositeUpdate(b.updates.map(ee))}function ee(b){if("type"in b){if(b.type==="load")return be(b);if(b.type==="clear"||b.type==="create"||b.type==="drop")return Se(b);if(b.type==="add"||b.type==="copy"||b.type==="move")return Fe(b)}else if(b.updateType==="insertdelete"||b.updateType==="deletewhere"||b.updateType==="delete"||b.updateType==="insert")return Oe(b);throw new Error(`Unknown update type ${JSON.stringify(b)}`)}function Oe(b){if(!h)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");let w=[],T=[],A;if(b.delete&&(w=c.default.flatten(b.delete.map(D=>me(D,b.graph)))),b.insert&&(T=c.default.flatten(b.insert.map(D=>me(D,b.graph)))),b.where&&b.where.length>0){A=Q({type:"group",patterns:b.where});const D=b.using;D?A=p.createFrom(A,D.default,D.named):b.graph&&(A=G(A,b.graph))}else b.updateType==="deletewhere"&&w.length>0&&(A=p.createBgp(w));return p.createDeleteInsert(w.length>0?w:void 0,T.length>0?T:void 0,A)}function me(b,w){let T=w;b.type==="graph"&&(T=b.name);let A=b.triples;return T&&(A=A.map(D=>Object.assign(D,{graph:T}))),A.map(C)}function Se(b){let w;switch(c.default.isSimpleTerm(b.graph)?w=b.graph:b.graph.all?w="ALL":b.graph.default?w="DEFAULT":b.graph.named?w="NAMED":w=b.graph.name,b.type){case"clear":return p.createClear(w,b.silent);case"create":return p.createCreate(w,b.silent);case"drop":return p.createDrop(w,b.silent)}}function be(b){return p.createLoad(b.source,b.destination,b.silent)}function Fe(b){const w=b.source.default?"DEFAULT":b.source.name,T=b.destination.default?"DEFAULT":b.destination.name;switch(b.type){case"copy":return p.createCopy(w,T,b.silent);case"move":return p.createMove(w,T,b.silent);case"add":return p.createAdd(w,T,b.silent)}}function q(b){const w={},T=Array.from(d).reduce((D,x)=>(D[x]=!0,D),{});return c.default.mapOperation(b,{[a.types.DELETE_INSERT]:D=>({result:p.createDeleteInsert(D.delete,D.insert,D.where&&q(D.where)),recurse:!1}),[a.types.PATH]:(D,x)=>({result:x.createPath(A(D.subject),D.predicate,A(D.object),A(D.graph)),recurse:!1}),[a.types.PATTERN]:(D,x)=>({result:x.createPattern(A(D.subject),A(D.predicate),A(D.object),A(D.graph)),recurse:!1}),[a.types.CONSTRUCT]:D=>({result:p.createConstruct(q(D.input),D.template),recurse:!1})});function A(D){if(D.termType==="BlankNode"){let x=w[D.value];return x||(x=c.default.createUniqueVariable(D.value,T,p.dataFactory),T[x.value]=!0,w[D.value]=x),x}return D.termType==="Quad"?p.dataFactory.quad(A(D.subject),A(D.predicate),A(D.object),A(D.graph)):D}}return br}var Wt={},Kn={},At={},Yb={},Rr={},J2;function hx(){if(J2)return Rr;J2=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.termToString=o,Rr.getLiteralValue=n,Rr.getLiteralType=t,Rr.getLiteralLanguage=e,Rr.getLiteralDirection=a,Rr.stringToTerm=u,Rr.quadToStringQuad=c,Rr.stringQuadToQuad=s;const i=ns(),r=new i.DataFactory;function o(l){if(l)switch(l.termType){case"NamedNode":return l.value;case"BlankNode":return"_:"+l.value;case"Literal":const d=l;return'"'+d.value+'"'+(d.datatype&&d.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+d.datatype.value:"")+(d.language?"@"+d.language:"")+(d.direction?"--"+d.direction:"");case"Quad":return`<<${o(l.subject)} ${o(l.predicate)} ${o(l.object)}${l.graph.termType==="DefaultGraph"?"":" "+o(l.graph)}>>`;case"Variable":return"?"+l.value;case"DefaultGraph":return l.value}}function n(l){const d=/^"([^]*)"/.exec(l);if(!d)throw new Error(l+" is not a literal");return d[1]}function t(l){const d=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(l);if(!d)throw new Error(l+" is not a literal");return d[1]||(d[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function e(l){const d=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(l);if(!d)throw new Error(l+" is not a literal");if(d[1]){let f=d[1].toLowerCase();const h=f.indexOf("--");return h>=0&&(f=f.slice(0,h)),f}return""}function a(l){const d=l.indexOf("--",l.lastIndexOf('"'));if(d>=0){const f=l.slice(d+2,l.length);if(f==="ltr"||f==="rtl")return f;throw new Error(l+" is not a literal with a valid direction")}return""}function u(l,d){if(d=d||r,!l||!l.length)return d.defaultGraph();switch(l[0]){case"_":return d.blankNode(l.substr(2));case"?":if(!d.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return d.variable(l.substr(1));case'"':const f=e(l),h=a(l),p=d.namedNode(t(l));return d.literal(n(l),f?{language:f,direction:h}:p);default:if(l[0]==="<"&&l.length>4&&l[1]==="<"&&l[l.length-1]===">"&&l[l.length-2]===">"){const y=l.slice(2,-2).trim();let _=[],m=0,O=0,v=!1;for(let S=0;S<y.length;S++){const E=y[S];if(E==="<"&&m++,E===">"){if(m===0)throw new Error("Found closing tag without opening tag in "+l);m--}if(E==='"'){let j=!1,Q=S;for(;Q-- >0&&y[Q]==="\\";)j=!j;j||(v=!v)}if(E===" "&&!v&&m===0){for(_.push(y.slice(O,S));y[S+1]===" ";)S+=1;O=S+1}}if(m!==0)throw new Error("Found opening tag without closing tag in "+l);if(_.push(y.slice(O,y.length)),_.length!==3&&_.length!==4)throw new Error("Nested quad syntax error "+l);return _=_.map(S=>S.startsWith("<")&&!S.includes(" ")?S.slice(1,-1):S),d.quad(u(_[0]),u(_[1]),u(_[2]),_[3]?u(_[3]):void 0)}return d.namedNode(l)}}function c(l){return{subject:o(l.subject),predicate:o(l.predicate),object:o(l.object),graph:o(l.graph)}}function s(l,d){return d=d||r,d.quad(u(l.subject,d),u(l.predicate,d),u(l.object,d),u(l.graph,d))}return Rr}var K2;function XN(){return K2||(K2=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.termToString=i.stringToTerm=i.stringQuadToQuad=i.quadToStringQuad=i.getLiteralValue=i.getLiteralType=i.getLiteralDirection=i.getLiteralLanguage=void 0;const r=hx();Object.defineProperty(i,"getLiteralLanguage",{enumerable:!0,get:function(){return r.getLiteralLanguage}}),Object.defineProperty(i,"getLiteralDirection",{enumerable:!0,get:function(){return r.getLiteralDirection}}),Object.defineProperty(i,"getLiteralType",{enumerable:!0,get:function(){return r.getLiteralType}}),Object.defineProperty(i,"getLiteralValue",{enumerable:!0,get:function(){return r.getLiteralValue}}),Object.defineProperty(i,"quadToStringQuad",{enumerable:!0,get:function(){return r.quadToStringQuad}}),Object.defineProperty(i,"stringQuadToQuad",{enumerable:!0,get:function(){return r.stringQuadToQuad}}),Object.defineProperty(i,"stringToTerm",{enumerable:!0,get:function(){return r.stringToTerm}}),Object.defineProperty(i,"termToString",{enumerable:!0,get:function(){return r.termToString}})})(Yb)),Yb}var Yn={},rt={},Y2;function yx(){if(Y2)return rt;Y2=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.TRIPLE_TERM_NAMES=rt.QUAD_TERM_NAMES=void 0,rt.getTerms=o,rt.getTermsNested=n,rt.getNamedTerms=t,rt.collectNamedTerms=e,rt.forEachTerms=a,rt.forEachTermsNested=u,rt.filterTerms=c,rt.filterTermsNested=s,rt.filterQuadTermNames=l,rt.filterQuadTermNamesNested=d,rt.mapTerms=f,rt.mapTermsNested=h,rt.reduceTerms=p,rt.reduceTermsNested=y,rt.everyTerms=_,rt.everyTermsNested=m,rt.someTerms=O,rt.someTermsNested=v,rt.getValueNestedPath=S,rt.matchTerm=E,rt.matchPattern=j,rt.matchPatternComplete=Q,rt.matchPatternMappings=z;const i=ns(),r=new i.DataFactory;rt.QUAD_TERM_NAMES=["subject","predicate","object","graph"],rt.TRIPLE_TERM_NAMES=["subject","predicate","object"];function o(g,F){return F&&g.graph.termType==="DefaultGraph"?[g.subject,g.predicate,g.object]:[g.subject,g.predicate,g.object,g.graph]}function n(g,F){const P=[];for(const R of o(g,F))R.termType==="Quad"?n(R,F).forEach(M=>P.push(M)):P.push(R);return P}function t(g){return[{key:"subject",value:g.subject},{key:"predicate",value:g.predicate},{key:"object",value:g.object},{key:"graph",value:g.graph}]}function e(g,F,P){const R={};return g.forEach(M=>R[M.key]=M.value),F&&(R.subject=R.subject||F("subject"),R.predicate=R.predicate||F("predicate"),R.object=R.object||F("object"),R.graph=R.graph||F("graph")),(P||r).quad(R.subject,R.predicate,R.object,R.graph)}function a(g,F){F(g.subject,"subject"),F(g.predicate,"predicate"),F(g.object,"object"),F(g.graph,"graph")}function u(g,F,P=[]){g.subject.termType==="Quad"?u(g.subject,F,[...P,"subject"]):F(g.subject,[...P,"subject"]),g.predicate.termType==="Quad"?u(g.predicate,F,[...P,"predicate"]):F(g.predicate,[...P,"predicate"]),g.object.termType==="Quad"?u(g.object,F,[...P,"object"]):F(g.object,[...P,"object"]),g.graph.termType==="Quad"?u(g.graph,F,[...P,"graph"]):F(g.graph,[...P,"graph"])}function c(g,F){const P=[];return F(g.subject,"subject")&&P.push(g.subject),F(g.predicate,"predicate")&&P.push(g.predicate),F(g.object,"object")&&P.push(g.object),F(g.graph,"graph")&&P.push(g.graph),P}function s(g,F,P=[]){let R=[];return g.subject.termType==="Quad"?R=[...R,...s(g.subject,F,[...P,"subject"])]:F(g.subject,[...P,"subject"])&&R.push(g.subject),g.predicate.termType==="Quad"?R=[...R,...s(g.predicate,F,[...P,"predicate"])]:F(g.predicate,[...P,"predicate"])&&R.push(g.predicate),g.object.termType==="Quad"?R=[...R,...s(g.object,F,[...P,"object"])]:F(g.object,[...P,"object"])&&R.push(g.object),g.graph.termType==="Quad"?R=[...R,...s(g.graph,F,[...P,"graph"])]:F(g.graph,[...P,"graph"])&&R.push(g.graph),R}function l(g,F){const P=[];return F(g.subject,"subject")&&P.push("subject"),F(g.predicate,"predicate")&&P.push("predicate"),F(g.object,"object")&&P.push("object"),F(g.graph,"graph")&&P.push("graph"),P}function d(g,F,P=[]){let R=[];const M=[...P,"subject"];g.subject.termType==="Quad"?R=[...R,...d(g.subject,F,M)]:F(g.subject,M)&&R.push(M);const C=[...P,"predicate"];g.predicate.termType==="Quad"?R=[...R,...d(g.predicate,F,C)]:F(g.predicate,C)&&R.push(C);const H=[...P,"object"];g.object.termType==="Quad"?R=[...R,...d(g.object,F,H)]:F(g.object,H)&&R.push(H);const G=[...P,"graph"];return g.graph.termType==="Quad"?R=[...R,...d(g.graph,F,G)]:F(g.graph,G)&&R.push(G),R}function f(g,F,P){return(P||r).quad(F(g.subject,"subject"),F(g.predicate,"predicate"),F(g.object,"object"),F(g.graph,"graph"))}function h(g,F,P,R=[]){return(P||r).quad(g.subject.termType==="Quad"?h(g.subject,F,P,[...R,"subject"]):F(g.subject,[...R,"subject"]),g.predicate.termType==="Quad"?h(g.predicate,F,P,[...R,"predicate"]):F(g.predicate,[...R,"predicate"]),g.object.termType==="Quad"?h(g.object,F,P,[...R,"object"]):F(g.object,[...R,"object"]),g.graph.termType==="Quad"?h(g.graph,F,P,[...R,"graph"]):F(g.graph,[...R,"graph"]))}function p(g,F,P){let R=P;return R=F(R,g.subject,"subject"),R=F(R,g.predicate,"predicate"),R=F(R,g.object,"object"),F(R,g.graph,"graph")}function y(g,F,P,R=[]){let M=P;return g.subject.termType==="Quad"?M=y(g.subject,F,M,[...R,"subject"]):M=F(M,g.subject,[...R,"subject"]),g.predicate.termType==="Quad"?M=y(g.predicate,F,M,[...R,"predicate"]):M=F(M,g.predicate,[...R,"predicate"]),g.object.termType==="Quad"?M=y(g.object,F,M,[...R,"object"]):M=F(M,g.object,[...R,"object"]),g.graph.termType==="Quad"?M=y(g.graph,F,M,[...R,"graph"]):M=F(M,g.graph,[...R,"graph"]),M}function _(g,F){return F(g.subject,"subject")&&F(g.predicate,"predicate")&&F(g.object,"object")&&F(g.graph,"graph")}function m(g,F,P=[]){return(g.subject.termType==="Quad"?m(g.subject,F,[...P,"subject"]):F(g.subject,[...P,"subject"]))&&(g.predicate.termType==="Quad"?m(g.predicate,F,[...P,"predicate"]):F(g.predicate,[...P,"predicate"]))&&(g.object.termType==="Quad"?m(g.object,F,[...P,"object"]):F(g.object,[...P,"object"]))&&(g.graph.termType==="Quad"?m(g.graph,F,[...P,"graph"]):F(g.graph,[...P,"graph"]))}function O(g,F){return F(g.subject,"subject")||F(g.predicate,"predicate")||F(g.object,"object")||F(g.graph,"graph")}function v(g,F,P=[]){return(g.subject.termType==="Quad"?v(g.subject,F,[...P,"subject"]):F(g.subject,[...P,"subject"]))||(g.predicate.termType==="Quad"?v(g.predicate,F,[...P,"predicate"]):F(g.predicate,[...P,"predicate"]))||(g.object.termType==="Quad"?v(g.object,F,[...P,"object"]):F(g.object,[...P,"object"]))||(g.graph.termType==="Quad"?v(g.graph,F,[...P,"graph"]):F(g.graph,[...P,"graph"]))}function S(g,F){if(F.length===0)return g;if(g.termType==="Quad")return S(g[F[0]],F.slice(1));throw new Error(`Tried to get ${F[0]} from term of type ${g.termType}`)}function E(g,F){return!F||F.termType==="Variable"||F.termType==="Quad"&&g.termType==="Quad"&&Q(g,F)||F.equals(g)}function j(g,F,P,R,M){return E(g.subject,F)&&E(g.predicate,P)&&E(g.object,R)&&E(g.graph,M)}function Q(g,F){return j(g,F.subject,F.predicate,F.object,F.graph)}function z(g,F,P={}){const R={};function M(C,H){return _(C,(G,J)=>{var ne,te;const Z=H[J];switch(G.termType){case"Variable":return P.skipVarMapping&&Z.termType==="Variable"||((te=(ne=R[G.value])===null||ne===void 0?void 0:ne.equals(Z))!==null&&te!==void 0?te:(R[G.value]=Z,!0));case"Quad":return Z.termType==="Quad"&&M(G,Z);default:return G.equals(Z)}})}return M(F,g)&&(P.returnMappings?R:!0)}return rt}var fr={},W2;function _x(){if(W2)return fr;W2=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.TERM_TYPES=void 0,fr.uniqTerms=r,fr.getTermsOfType=o,fr.getNamedNodes=n,fr.getBlankNodes=t,fr.getLiterals=e,fr.getVariables=a,fr.getDefaultGraphs=u,fr.getQuads=c;const i=XN();fr.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function r(s){const l={};return s.filter(d=>{const f=(0,i.termToString)(d);return!(f in l)&&(l[f]=!0)})}function o(s,l){return s.filter(d=>d.termType===l)}function n(s){return o(s,"NamedNode")}function t(s){return o(s,"BlankNode")}function e(s){return o(s,"Literal")}function a(s){return o(s,"Variable")}function u(s){return o(s,"DefaultGraph")}function c(s){return o(s,"Quad")}return fr}var Z2;function mx(){return Z2||(Z2=1,(function(i){var r=Yn&&Yn.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Yn&&Yn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(yx(),i),o(_x(),i)})(Yn)),Yn}var Wb={exports:{}};var k2;function q0(){return k2||(k2=1,(function(i){(function(){var r;function o(n,t){var e=this instanceof o?this:r;if(e.reset(t),typeof n=="string"&&n.length>0&&e.hash(n),e!==this)return e}o.prototype.hash=function(n){var t,e,a,u,c;switch(c=n.length,this.len+=c,e=this.k1,a=0,this.rem){case 0:e^=c>a?n.charCodeAt(a++)&65535:0;case 1:e^=c>a?(n.charCodeAt(a++)&65535)<<8:0;case 2:e^=c>a?(n.charCodeAt(a++)&65535)<<16:0;case 3:e^=c>a?(n.charCodeAt(a)&255)<<24:0,e^=c>a?(n.charCodeAt(a++)&65280)>>8:0}if(this.rem=c+this.rem&3,c-=this.rem,c>0){for(t=this.h1;e=e*11601+(e&65535)*3432906752&4294967295,e=e<<15|e>>>17,e=e*13715+(e&65535)*461832192&4294967295,t^=e,t=t<<13|t>>>19,t=t*5+3864292196&4294967295,!(a>=c);)e=n.charCodeAt(a++)&65535^(n.charCodeAt(a++)&65535)<<8^(n.charCodeAt(a++)&65535)<<16,u=n.charCodeAt(a++),e^=(u&255)<<24^(u&65280)>>8;switch(e=0,this.rem){case 3:e^=(n.charCodeAt(a+2)&65535)<<16;case 2:e^=(n.charCodeAt(a+1)&65535)<<8;case 1:e^=n.charCodeAt(a)&65535}this.h1=t}return this.k1=e,this},o.prototype.result=function(){var n,t;return n=this.k1,t=this.h1,n>0&&(n=n*11601+(n&65535)*3432906752&4294967295,n=n<<15|n>>>17,n=n*13715+(n&65535)*461832192&4294967295,t^=n),t^=this.len,t^=t>>>16,t=t*51819+(t&65535)*2246770688&4294967295,t^=t>>>13,t=t*44597+(t&65535)*3266445312&4294967295,t^=t>>>16,t>>>0},o.prototype.reset=function(n){return this.h1=typeof n=="number"?n:0,this.rem=this.k1=this.len=0,this},r=new o,i.exports=o})()})(Wb)),Wb.exports}var eO;function gx(){if(eO)return At;eO=1,Object.defineProperty(At,"__esModule",{value:!0}),At.isomorphic=n,At.getBijection=t,At.getBijectionInner=e,At.hashValues=u,At.hasValue=c,At.getQuadsWithBlankNodes=s,At.getQuadsWithoutBlankNodes=l,At.indexGraph=d,At.deindexGraph=f,At.uniqGraph=h,At.getGraphBlankNodes=p,At.hashTerms=y,At.hashTerm=_,At.hashNumber=m,At.quadToSignature=O,At.termToSignature=v,At.isTermGrounded=S;const i=XN(),r=mx(),o=q0();function n(E,j){return!!t(E,j)}function t(E,j){const Q=d(l(E)),z=d(l(j));if(Object.keys(Q).length!==Object.keys(z).length)return null;for(const M in Q)if(Q[M]!==z[M])return null;const g=h(s(E)),F=h(s(j)),P=p(E),R=p(j);return e(g,F,P,R)}function e(E,j,Q,z,g,F){g||(g={}),F||(F={});const[P,R]=y(E,Q,g),[M,C]=y(j,z,F);if(Object.keys(P).length!==Object.keys(M).length)return null;for(const G in P)if(!c(M,P[G]))return null;let H={};for(const G of Q){const J=(0,i.termToString)(G),ne=R[J];for(const te in C)if(C[te]===ne){H[J]=te,delete C[te];break}}if(!a(Object.keys(H).sort(),Q.map(i.termToString).sort())||!a(u(H).sort(),z.map(i.termToString).sort())){H=null;for(const G of Q){const J=(0,i.termToString)(G);if(!P[J])for(const ne of z){const te=(0,i.termToString)(ne);if(!M[te]&&R[J]===C[te]){const Z=m(J);H=e(E,j,Q,z,Object.assign(Object.assign({},P),{[J]:Z}),Object.assign(Object.assign({},M),{[te]:Z}))}}}}return H}function a(E,j){if(E.length!==j.length)return!1;for(let Q=E.length;Q--;)if(E[Q]!==j[Q])return!1;return!0}function u(E){const j=[];for(const Q in E)j.push(E[Q]);return j}function c(E,j){for(const Q in E)if(E[Q]===j)return!0;return!1}function s(E){return E.filter(j=>(0,r.someTerms)(j,Q=>Q.termType==="BlankNode"||Q.termType==="Quad"&&(0,r.getTermsNested)(Q).some(z=>z.termType==="BlankNode")))}function l(E){return E.filter(j=>(0,r.everyTerms)(j,Q=>Q.termType!=="BlankNode"&&!(Q.termType==="Quad"&&(0,r.getTermsNested)(Q).some(z=>z.termType==="BlankNode"))))}function d(E){const j={};for(const Q of E)j[JSON.stringify((0,i.quadToStringQuad)(Q))]=!0;return j}function f(E){return Object.keys(E).map(j=>(0,i.stringQuadToQuad)(JSON.parse(j)))}function h(E){return f(d(E))}function p(E){return(0,r.uniqTerms)(E.map(j=>(0,r.getBlankNodes)((0,r.getTermsNested)(j))).reduce((j,Q)=>j.concat(Q),[]))}function y(E,j,Q){const z=Object.assign({},Q),g={};let F=!0;for(;F;){const P=Object.keys(z).length;for(const M of j){const C=(0,i.termToString)(M);if(!z[C]){const[H,G]=_(M,E,z);H&&(z[C]=G),g[C]=G}}const R=new Map;for(const M in g){const C=g[M];R.get(C)===void 0?R.set(C,M):R.set(C,!1)}for(const[M,C]of R.entries())C&&(z[C]=M);F=P!==Object.keys(z).length}return[z,g]}function _(E,j,Q){const z=[];let g=!0;for(const P of j){const R=(0,r.getTermsNested)(P);if(R.some(M=>M.equals(E))){z.push(O(P,Q,E));for(const M of R)!S(M,Q)&&!M.equals(E)&&(g=!1)}}const F=m(z.sort().join(""));return[g,F]}function m(E){return o().hash(E).result()}function O(E,j,Q){return(0,r.getTerms)(E).map(z=>v(z,j,Q)).join("|")}function v(E,j,Q){var z;return E.equals(Q)?"@self":E.termType==="BlankNode"?((z=j[(0,i.termToString)(E)])===null||z===void 0?void 0:z.toString())||"@blank":E.termType==="Quad"?`<${O(E,j,Q)}>`:(0,i.termToString)(E)}function S(E,j){return E.termType!=="BlankNode"&&!(E.termType==="Quad"&&(0,r.getTermsNested)(E).some(Q=>!S(Q,j)))||!!j[(0,i.termToString)(E)]}return At}var tO;function bx(){return tO||(tO=1,(function(i){var r=Kn&&Kn.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Kn&&Kn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(gx(),i)})(Kn)),Kn}var rO;function vx(){if(rO)return Wt;rO=1;var i=Wt&&Wt.__createBinding||(Object.create?(function(B,ie,ce,Ae){Ae===void 0&&(Ae=ce);var Re=Object.getOwnPropertyDescriptor(ie,ce);(!Re||("get"in Re?!ie.__esModule:Re.writable||Re.configurable))&&(Re={enumerable:!0,get:function(){return ie[ce]}}),Object.defineProperty(B,Ae,Re)}):(function(B,ie,ce,Ae){Ae===void 0&&(Ae=ce),B[Ae]=ie[ce]})),r=Wt&&Wt.__setModuleDefault||(Object.create?(function(B,ie){Object.defineProperty(B,"default",{enumerable:!0,value:ie})}):function(B,ie){B.default=ie}),o=Wt&&Wt.__importStar||function(B){if(B&&B.__esModule)return B;var ie={};if(B!=null)for(var ce in B)ce!=="default"&&Object.prototype.hasOwnProperty.call(B,ce)&&i(ie,B,ce);return r(ie,B),ie},n=Wt&&Wt.__importDefault||function(B){return B&&B.__esModule?B:{default:B}};Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.toSparqlJs=Wt.toSparql=void 0;const t=bx(),e=qg(),a=Lg(),u=o(ym()),c=n(xg()),s=n(I0()),l=u.types,d=u.expressionTypes;let f;const h=new c.default;function p(B,ie={}){return new a.Generator(ie).stringify(y(B))}Wt.toSparql=p;function y(B){_(),B=Me(B);let ie=m(B);return ie.type==="group"?ie.patterns[0]:ie}Wt.toSparqlJs=y;function _(){f={project:!1,extend:[],group:[],aggregates:[],order:[]}}function m(B){switch(B.type!==l.EXTEND&&B.type!==l.ORDER_BY&&B.type!==l.GRAPH&&(f.project=!1),B.type){case l.EXPRESSION:return O(B);case l.ASK:return be(B,l.ASK);case l.BGP:return M(B);case l.CONSTRUCT:return C(B);case l.DESCRIBE:return be(B,l.DESCRIBE);case l.DISTINCT:return H(B);case l.EXTEND:return G(B);case l.FROM:return J(B);case l.FILTER:return ne(B);case l.GRAPH:return te(B);case l.GROUP:return Z(B);case l.JOIN:return ye(B);case l.LEFT_JOIN:return ve(B);case l.MINUS:return Te(B);case l.NOP:return{};case l.ORDER_BY:return ee(B);case l.PATH:return Oe(B);case l.PATTERN:return me(B);case l.PROJECT:return be(B,l.PROJECT);case l.REDUCED:return q(B);case l.SERVICE:return b(B);case l.SLICE:return w(B);case l.UNION:return T(B);case l.VALUES:return A(B);case l.COMPOSITE_UPDATE:return se(B);case l.DELETE_INSERT:return de(B);case l.LOAD:return _e(B);case l.CLEAR:return ge(B);case l.CREATE:return fe(B);case l.DROP:return he(B);case l.ADD:return Le(B);case l.MOVE:return Be(B);case l.COPY:return Ce(B)}throw new Error(`Unknown Operation type ${B.type}`)}function O(B){switch(B.expressionType){case d.AGGREGATE:return E(B);case d.EXISTENCE:return j(B);case d.NAMED:return Q(B);case d.OPERATOR:return z(B);case d.TERM:return g(B);case d.WILDCARD:return F(B)}throw new Error(`Unknown Expression Operation type ${B.expressionType}`)}function v(B){switch(B.type){case l.ALT:return D(B);case l.INV:return x(B);case l.LINK:return I(B);case l.NPS:return U(B);case l.ONE_OR_MORE_PATH:return X(B);case l.SEQ:return V(B);case l.ZERO_OR_MORE_PATH:return Y(B);case l.ZERO_OR_ONE_PATH:return ue(B)}throw new Error(`Unknown Path type ${B.type}`)}function S(B){return(0,e.termToString)(B)}function E(B){const ie={expression:O(B.expression),type:"aggregate",aggregation:B.aggregator,distinct:B.distinct};return B.separator&&(ie.separator=B.separator),ie}function j(B){return{type:"operation",operator:B.not?"notexists":"exists",args:[{type:"group",patterns:s.default.flatten([m(B.input)])}]}}function Q(B){return{type:"functionCall",function:B.name,args:B.args.map(O)}}function z(B){if(B.operator==="desc"){const ce={expression:O(B.args[0])};return ce.descending=!0,ce}const ie={type:"operation",operator:B.operator,args:B.args.map(O)};return(ie.operator==="in"||ie.operator==="notin")&&(ie.args=[ie.args[0]].concat([ie.args.slice(1)])),ie}function g(B){return B.term}function F(B){return B.wildcard}function P(B){return Array.isArray(B)?B.length===1?B[0]:{type:"group",patterns:B}:B}function R(B){return B}function M(B){let ie=B.patterns.map(me);return ie.length===0?null:{type:"bgp",triples:ie}}function C(B){return{type:"query",prefixes:{},queryType:"CONSTRUCT",template:B.template.map(me),where:s.default.flatten([m(B.input)])}}function H(B){let ie=m(B.input);return ie.patterns[0].distinct=!0,ie}function G(B){return f.project?(f.extend.push(B),m(B.input)):s.default.flatten([m(B.input),{type:"bind",variable:B.variable,expression:O(B.expression)}])}function J(B){const ie=m(B.input);let ce=ie;return ie.type==="group"&&(ce=ie.patterns[0]),ce.from={default:B.default,named:B.named},ie}function ne(B){return{type:"group",patterns:s.default.flatten([m(B.input),{type:"filter",expression:O(B.expression)}])}}function te(B){return{type:"graph",patterns:s.default.flatten([m(B.input)]),name:B.name}}function Z(B){const ie=m(B.input),ce=B.aggregates.map(R);return f.aggregates.push(...ce),f.group.push(...B.variables),ie}function ye(B){return s.default.flatten(B.input.map(m)).reduce((ce,Ae)=>(Ae.type!=="bgp"||ce.length==0||ce[ce.length-1].type!=="bgp"?ce.push(Ae):ce[ce.length-1].triples.push(...Ae.triples),ce),[])}function ve(B){const ie={type:"optional",patterns:[m(B.input[1])]};return B.expression&&ie.patterns.push({type:"filter",expression:O(B.expression)}),ie.patterns=s.default.flatten(ie.patterns),s.default.flatten([m(B.input[0]),ie])}function Te(B){let ie=m(B.input[1]);return ie.type==="group"&&(ie=ie.patterns),Array.isArray(ie)||(ie=[ie]),s.default.flatten([m(B.input[0]),{type:"minus",patterns:ie}])}function ee(B){return f.order.push(...B.expressions),m(B.input)}function Oe(B){return{type:"bgp",triples:[{subject:B.subject,predicate:v(B.predicate),object:B.object}]}}function me(B){return{subject:B.subject,predicate:B.predicate,object:B.object}}function Se(B,ie){let ce=s.default.isSimpleTerm(B)?S(B):B;if(typeof ce=="string"){if(ie[ce])return ie[ce]}else if(Array.isArray(B))B=B.map(Ae=>Se(Ae,ie));else for(let Ae of Object.keys(B))B[Ae]=Se(B[Ae],ie);return B}function be(B,ie){const ce={type:"query",prefixes:{}},Ae=ce;let Re;ie===l.PROJECT?(ce.queryType="SELECT",Re=B.variables):ie===l.ASK?ce.queryType="ASK":ie===l.DESCRIBE&&(ce.queryType="DESCRIBE",Re=B.terms);const ke=f.extend,Xe=f.group,Tt=f.aggregates,yt=f.order;_(),f.project=!0;let Qt=s.default.flatten([m(B.input)]);Qt.length===1&&Qt[0].type==="group"&&(Qt=Qt[0].patterns),ce.where=Qt;let Ut={};for(let st of f.aggregates)Ut[S(st.variable)]=O(st);let Ot={};for(let st=f.extend.length-1;st>=0;--st){let Jt=f.extend[st];Ot[S(Jt.variable)]=Se(O(Jt.expression),Ut)}f.group.length>0&&(Ae.group=f.group.map(st=>{let Jt=S(st);if(Ot[Jt]){let ls=Ot[Jt];return delete Ot[Jt],{variable:st,expression:ls}}return{expression:st}})),f.order.length>0&&(Ae.order=f.order.map(m).map(st=>st.descending?st:{expression:st})),Re&&(Ae.variables=Re.map(st=>{let Jt=S(st);if(Ot[Jt]){let ls=Ot[Jt];return delete Ot[Jt],{variable:st,expression:ls}}return st}),Ae.variables.length===0&&(Ae.variables=[new a.Wildcard]));const Vt=Object.entries(Ot);if(Vt.length>0){Ae.where=Ae.where||[];for(const[st,Jt]of Vt)Ae.where.push({type:"bind",variable:(0,e.stringToTerm)(st),expression:Jt})}if(ce.where.length>0&&ce.where[ce.where.length-1].type==="filter"){const st=ce.where[ce.where.length-1];Fe(st,Object.keys(Ut))&&(Ae.having=s.default.flatten([Se(st.expression,Ut)]),ce.where.splice(-1))}return f.extend=ke,f.group=Xe,f.aggregates=Tt,f.order=yt,{type:"group",patterns:[Ae]}}function Fe(B,ie){return s.default.isSimpleTerm(B)?ie.indexOf(S(B))>=0:Array.isArray(B)?B.some(ce=>Fe(ce,ie)):B===Object(B)?Object.keys(B).some(ce=>Fe(B[ce],ie)):ie.indexOf(B)>=0}function q(B){let ie=m(B.input);return ie.patterns[0].reduced=!0,ie}function b(B){let ie=m(B.input);return ie.type==="group"&&(ie=ie.patterns),Array.isArray(ie)||(ie=[ie]),{type:"service",name:B.name,silent:B.silent,patterns:ie}}function w(B){let ie=m(B.input),ce=ie;return ie.type&&ie.type==="group"&&(ce=ie.patterns[0]),B.start!==0&&(ce.offset=B.start),B.length!==void 0&&(ce.limit=B.length),ie}function T(B){return{type:"union",patterns:B.input.map(m).map(P)}}function A(B){return{type:"values",values:B.bindings.map(ie=>{let ce={};for(let Ae of B.variables){let Re=`?${Ae.value}`;ie[Re]?ce[Re]=ie[Re]:ce[Re]=void 0}return ce})}}function D(B){const ie=B.input.map(v);return ie.every(ce=>"pathType"in ce&&ce.pathType==="!")?{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:s.default.flatten(ie.map(ce=>ce.items))}]}:{type:"path",pathType:"|",items:ie}}function x(B){if(B.path.type===l.NPS){const ie=B.path.iris.map(ce=>({type:"path",pathType:"^",items:[ce]}));return ie.length<=1?{type:"path",pathType:"!",items:ie}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:ie}]}}return{type:"path",pathType:"^",items:[v(B.path)]}}function I(B){return B.iri}function U(B){return B.iris.length<=1?{type:"path",pathType:"!",items:B.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:B.iris}]}}function X(B){return{type:"path",pathType:"+",items:[v(B.path)]}}function V(B){return{type:"path",pathType:"/",items:B.input.map(v)}}function Y(B){return{type:"path",pathType:"*",items:[v(B.path)]}}function ue(B){return{type:"path",pathType:"?",items:[v(B.path)]}}function se(B){const ie=B.updates.map(ce=>m(ce).updates[0]);return{prefixes:{},type:"update",updates:ie}}function de(B){var ie;let ce=B.where,Ae;if(ce&&ce.type===l.FROM){let ke=ce;ce=ke.input,Ae={default:ke.default,named:ke.named}}const Re=[{updateType:"insertdelete",delete:qe(B.delete||[]),insert:qe(B.insert||[])}];if(Ae&&(Re[0].using=Ae),!ce||ce.type===l.BGP&&ce.patterns.length===0)Re[0].where=[];else{const ke=[];let Xe=m(We(ce,ke));if(Xe.type==="group"?Re[0].where=Xe.patterns:Re[0].where=[Xe],ke.length>0){if(ke.length!==1)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");((ie=ke[0])===null||ie===void 0?void 0:ie.value)!==""&&(Re[0].where=[{type:"graph",patterns:Re[0].where,name:ke[0]}])}}return!B.delete&&!B.where?(Re[0].updateType="insert",delete Re[0].delete,delete Re[0].where):!B.insert&&!B.where?(delete Re[0].insert,delete Re[0].where,B.delete.some(ke=>ke.subject.termType==="Variable"||ke.predicate.termType==="Variable"||ke.object.termType==="Variable")?Re[0].updateType="deletewhere":Re[0].updateType="delete"):!B.insert&&B.where&&B.where.type==="bgp"&&(0,t.isomorphic)(B.delete,B.where.patterns)&&(delete Re[0].where,Re[0].updateType="deletewhere"),{prefixes:{},type:"update",updates:Re}}function _e(B){const ie=[{type:"load",silent:!!B.silent,source:B.source}];return B.destination&&(ie[0].destination=B.destination),{prefixes:{},type:"update",updates:ie}}function ge(B){return je(B,"clear")}function fe(B){return je(B,"create")}function he(B){return je(B,"drop")}function je(B,ie){const ce=[{type:ie,silent:!!B.silent}];return B.source==="DEFAULT"?ce[0].graph={default:!0}:B.source==="NAMED"?ce[0].graph={named:!0}:B.source==="ALL"?ce[0].graph={all:!0}:ce[0].graph={type:"graph",name:B.source},{prefixes:{},type:"update",updates:ce}}function Le(B){return Pe(B,"add")}function Be(B){return Pe(B,"move")}function Ce(B){return Pe(B,"copy")}function Pe(B,ie){const ce=[{type:ie,silent:!!B.silent}];return ce[0].source=B.source==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:B.source},ce[0].destination=B.destination==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:B.destination},{prefixes:{},type:"update",updates:ce}}function qe(B){if(!B)return[];const ie={};return B.forEach(ce=>{const Ae=ce.graph.value;ie[Ae]||(ie[Ae]=[]),ie[Ae].push(ce)}),Object.keys(ie).map(ce=>ce===""?{type:"bgp",triples:ie[ce].map(me)}:{type:"graph",triples:ie[ce].map(me),name:ie[ce][0].graph})}function Me(B){return We(B,[])}function We(B,ie){if(Array.isArray(B))return B.map(Xe=>We(Xe,ie));if(!B.type||B.type===l.DELETE_INSERT)return B;if((B.type===l.PATTERN||B.type===l.PATH)&&B.graph)return ie.push(B.graph),B.graph.name!==""?B.type===l.PATTERN?h.createPattern(B.subject,B.predicate,B.object):h.createPath(B.subject,B.predicate,B.object):B;const ce={},Ae={},Re={};for(let Xe of Object.keys(B)){const Tt=[];if(ce[Xe]=We(B[Xe],Tt),Tt.length>0){Ae[Xe]=Tt;for(const yt of Tt)Re[yt.value]=yt}}const ke=Object.keys(Re);if(ke.length>0)if(ke.length===1&&![l.PROJECT,l.SERVICE].includes(B.type))ie.push(Re[ke[0]]);else{if(B.type===l.BGP)return Ze(B,Ae.patterns);for(let Xe of Object.keys(Ae)){const Tt=ce[Xe];Array.isArray(Tt)?ce[Xe]=Tt.map((yt,Qt)=>Ae[Xe][0].value===""?yt:h.createGraph(yt,Ae[Xe][Qt])):Ae[Xe][0].value!==""&&(ce[Xe]=h.createGraph(Tt,Ae[Xe][0]))}}return ce}function Ze(B,ie){var ce;const Ae={};for(let Xe=0;Xe<B.patterns.length;++Xe){const Tt=B.patterns[Xe],yt=ie[Xe].value;Ae[yt]=(ce=Ae[yt])!==null&&ce!==void 0?ce:{patterns:[],graph:ie[Xe]},Ae[yt].patterns.push(Tt)}let Re=[];for(const[Xe,{patterns:Tt,graph:yt}]of Object.entries(Ae)){const Qt=h.createBgp(Tt);Re.push(Xe===""?Qt:h.createGraph(Qt,yt))}let ke=Re[0];for(let Xe=1;Xe<Re.length;++Xe)ke=h.createJoin([ke,Re[Xe]]);return ke}return Wt}var nO;function Ie(){return nO||(nO=1,(function(i){var r=Er&&Er.__createBinding||(Object.create?(function(l,d,f,h){h===void 0&&(h=f);var p=Object.getOwnPropertyDescriptor(d,f);(!p||("get"in p?!d.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return d[f]}}),Object.defineProperty(l,h,p)}):(function(l,d,f,h){h===void 0&&(h=f),l[h]=d[f]})),o=Er&&Er.__setModuleDefault||(Object.create?(function(l,d){Object.defineProperty(l,"default",{enumerable:!0,value:d})}):function(l,d){l.default=d}),n=Er&&Er.__importStar||function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&r(d,l,f);return o(d,l),d},t=Er&&Er.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(i,"__esModule",{value:!0}),i.Util=i.toSparqlJs=i.toSparql=i.Factory=i.Algebra=i.translate=void 0;const e=t(px());i.translate=e.default;const a=n(ym());i.Algebra=a;const u=t(xg());i.Factory=u.default;const c=vx();Object.defineProperty(i,"toSparql",{enumerable:!0,get:function(){return c.toSparql}}),Object.defineProperty(i,"toSparqlJs",{enumerable:!0,get:function(){return c.toSparqlJs}});const s=t(I0());i.Util=s.default})(Er)),Er}var Wn={},Qc={},iO;function Tx(){if(iO)return Qc;iO=1,Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.asTermType=void 0;function i(r){if(r==="namedNode"||r==="literal"||r==="blankNode"||r==="quad")return r}return Qc.asTermType=i,Qc}var Uc={},aO;function Ox(){if(aO)return Uc;aO=1,Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.Variable=void 0;const i=bn();class r{constructor(n){this.expressionType=i.ExpressionType.Variable,this.name=n}}return Uc.Variable=r,Uc}var Ne={},Dr={},Zn={},Vc={},oO;function zN(){if(oO)return Vc;oO=1,Object.defineProperty(Vc,"__esModule",{value:!0}),Vc.BlankNode=void 0;class i{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return Vc.BlankNode=i,Vc}var Gc={},Xc={},uO;function HN(){if(uO)return Xc;uO=1,Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.DefaultGraph=void 0;class i{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return Xc.DefaultGraph=i,i.INSTANCE=new i,Xc}var zc={},Hc={},sO;function L0(){if(sO)return Hc;sO=1,Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.NamedNode=void 0;class i{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return Hc.NamedNode=i,Hc}var cO;function $N(){if(cO)return zc;cO=1,Object.defineProperty(zc,"__esModule",{value:!0}),zc.Literal=void 0;const i=L0();class r{constructor(n,t){this.termType="Literal",this.value=n,typeof t=="string"?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return zc.Literal=r,r.RDF_LANGUAGE_STRING=new i.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new i.NamedNode("http://www.w3.org/2001/XMLSchema#string"),zc}var $c={},lO;function JN(){if(lO)return $c;lO=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.Quad=void 0;class i{constructor(o,n,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=n,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return $c.Quad=i,$c}var Jc={},dO;function KN(){if(dO)return Jc;dO=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.Variable=void 0;class i{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return Jc.Variable=i,Jc}var fO;function Sx(){if(fO)return Gc;fO=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.DataFactory=void 0;const i=zN(),r=HN(),o=$N(),n=L0(),t=JN(),e=KN();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new i.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return r.DefaultGraph.INSTANCE}quad(s,l,d,f){return new t.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Gc.DataFactory=u,Gc}var pO;function Fx(){return pO||(pO=1,(function(i){var r=Zn&&Zn.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Zn&&Zn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(zN(),i),o(Sx(),i),o(HN(),i),o($N(),i),o(L0(),i),o(JN(),i),o(KN(),i)})(Zn)),Zn}var hO;function ts(){if(hO)return Dr;hO=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.SparqlOperator=Dr.TypeURL=Dr.typedLiteral=Dr.TypeAlias=void 0;const i=Fx();var r;(function(a){a.SPARQL_NUMERIC="SPARQL_NUMERIC",a.SPARQL_STRINGLY="SPARQL_STRINGLY"})(r||(Dr.TypeAlias=r={}));const o=new i.DataFactory;function n(a,u){return o.literal(a,o.namedNode(u))}Dr.typedLiteral=n;var t;(function(a){a.XSD_ANY_URI="http://www.w3.org/2001/XMLSchema#anyURI",a.XSD_STRING="http://www.w3.org/2001/XMLSchema#string",a.RDF_LANG_STRING="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",a.XSD_BOOLEAN="http://www.w3.org/2001/XMLSchema#boolean",a.XSD_DATE_TIME="http://www.w3.org/2001/XMLSchema#dateTime",a.XSD_DATE_TIME_STAMP="http://www.w3.org/2001/XMLSchema#dateTimeStamp",a.XSD_DATE="http://www.w3.org/2001/XMLSchema#date",a.XSD_G_MONTH="http://www.w3.org/2001/XMLSchema#gMonth",a.XSD_G_MONTHDAY="http://www.w3.org/2001/XMLSchema#gMonthDay",a.XSD_G_YEAR="http://www.w3.org/2001/XMLSchema#gYear",a.XSD_G_YEAR_MONTH="http://www.w3.org/2001/XMLSchema#gYearMonth",a.XSD_TIME="http://www.w3.org/2001/XMLSchema#time",a.XSD_G_DAY="http://www.w3.org/2001/XMLSchema#gDay",a.XSD_DECIMAL="http://www.w3.org/2001/XMLSchema#decimal",a.XSD_FLOAT="http://www.w3.org/2001/XMLSchema#float",a.XSD_DOUBLE="http://www.w3.org/2001/XMLSchema#double",a.XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",a.XSD_NON_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonPositiveInteger",a.XSD_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#negativeInteger",a.XSD_LONG="http://www.w3.org/2001/XMLSchema#long",a.XSD_INT="http://www.w3.org/2001/XMLSchema#int",a.XSD_SHORT="http://www.w3.org/2001/XMLSchema#short",a.XSD_BYTE="http://www.w3.org/2001/XMLSchema#byte",a.XSD_NON_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonNegativeInteger",a.XSD_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#positiveInteger",a.XSD_UNSIGNED_LONG="http://www.w3.org/2001/XMLSchema#unsignedLong",a.XSD_UNSIGNED_INT="http://www.w3.org/2001/XMLSchema#unsignedInt",a.XSD_UNSIGNED_SHORT="http://www.w3.org/2001/XMLSchema#unsignedShort",a.XSD_UNSIGNED_BYTE="http://www.w3.org/2001/XMLSchema#unsignedByte",a.XSD_NORMALIZED_STRING="http://www.w3.org/2001/XMLSchema#normalizedString",a.XSD_TOKEN="http://www.w3.org/2001/XMLSchema#token",a.XSD_LANGUAGE="http://www.w3.org/2001/XMLSchema#language",a.XSD_NM_TOKEN="http://www.w3.org/2001/XMLSchema#NMTOKEN",a.XSD_NAME="http://www.w3.org/2001/XMLSchema#name",a.XSD_NC_NAME="http://www.w3.org/2001/XMLSchema#NCName",a.XSD_ENTITY="http://www.w3.org/2001/XMLSchema#ENTITY",a.XSD_ID="http://www.w3.org/2001/XMLSchema#ID",a.XSD_ID_REF="http://www.w3.org/2001/XMLSchema#IDREF",a.XSD_DURATION="http://www.w3.org/2001/XMLSchema#duration",a.XSD_YEAR_MONTH_DURATION="http://www.w3.org/2001/XMLSchema#yearMonthDuration",a.XSD_DAY_TIME_DURATION="http://www.w3.org/2001/XMLSchema#dayTimeDuration",a.XSD_UNTYPED_ATOMIC="http://www.w3.org/2001/XMLSchema#untypedAtomic"})(t||(Dr.TypeURL=t={}));var e;return(function(a){a.NOT="!",a.UMINUS="uminus",a.UPLUS="uplus",a.LOGICAL_OR="||",a.LOGICAL_AND="&&",a.EQUAL="=",a.NOT_EQUAL="!=",a.LT="<",a.GT=">",a.LTE="<=",a.GTE=">=",a.SAME_TERM="sameterm",a.IN="in",a.NOT_IN="notin",a.MULTIPLICATION="*",a.DIVISION="/",a.ADDITION="+",a.SUBTRACTION="-",a.IS_IRI="isiri",a.IS_URI="isuri",a.IS_BLANK="isblank",a.IS_LITERAL="isliteral",a.IS_NUMERIC="isnumeric",a.STR="str",a.LANG="lang",a.DATATYPE="datatype",a.IRI="iri",a.URI="uri",a.BNODE="bnode",a.STRDT="strdt",a.STRLANG="strlang",a.UUID="uuid",a.STRUUID="struuid",a.STRLEN="strlen",a.SUBSTR="substr",a.UCASE="ucase",a.LCASE="lcase",a.STRSTARTS="strstarts",a.STRENDS="strends",a.CONTAINS="contains",a.STRBEFORE="strbefore",a.STRAFTER="strafter",a.ENCODE_FOR_URI="encode_for_uri",a.CONCAT="concat",a.LANG_MATCHES="langmatches",a.REGEX="regex",a.REPLACE="replace",a.ABS="abs",a.ROUND="round",a.CEIL="ceil",a.FLOOR="floor",a.RAND="rand",a.NOW="now",a.YEAR="year",a.MONTH="month",a.DAY="day",a.HOURS="hours",a.MINUTES="minutes",a.SECONDS="seconds",a.TIMEZONE="timezone",a.TZ="tz",a.MD5="md5",a.SHA1="sha1",a.SHA256="sha256",a.SHA384="sha384",a.SHA512="sha512",a.TRIPLE="triple",a.SUBJECT="subject",a.PREDICATE="predicate",a.OBJECT="object",a.IS_TRIPLE="istriple",a.BOUND="bound",a.IF="if",a.COALESCE="coalesce"})(e||(Dr.SparqlOperator=e={})),Dr}var Qe={},yO;function Cs(){if(yO)return Qe;yO=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.NoAggregator=Qe.ExtensionFunctionError=Qe.InvalidExpression=Qe.InvalidArity=Qe.UnexpectedError=Qe.ParseError=Qe.EmptyAggregateError=Qe.IncompatibleLanguageOperation=Qe.InvalidTimezoneCall=Qe.CastError=Qe.InvalidArgumentTypes=Qe.InError=Qe.CoalesceError=Qe.RDFEqualTypeError=Qe.EBVCoercionError=Qe.UnboundVariableError=Qe.InvalidLexicalForm=Qe.isExpressionError=Qe.ExpressionError=void 0;class i extends Error{}Qe.ExpressionError=i;function r(S){return S instanceof i}Qe.isExpressionError=r;class o extends i{constructor(E){super(`Invalid lexical form '${v(E)}'`),this.arg=E}}Qe.InvalidLexicalForm=o;class n extends i{constructor(E,j){super(`Unbound variable '${v(E)}'`),this.variable=E,this.bindings=j}}Qe.UnboundVariableError=n;class t extends i{constructor(E){super(`Cannot coerce term to EBV '${v(E)}'`),this.arg=E}}Qe.EBVCoercionError=t;class e extends i{constructor(E){super("Equality test for literals with unsupported datatypes"),this.args=E}}Qe.RDFEqualTypeError=e;class a extends i{constructor(E){super("All COALESCE arguments threw errors"),this.errors=E}}Qe.CoalesceError=a;class u extends i{constructor(E){super(`Some argument to IN errorred and none where equal. ${E.map(j=>`(${j.toString()}) `).join("and ")}`),this.errors=E}}Qe.InError=u;class c extends i{constructor(E,j){super(`Argument types not valid for operator: '${v(j)}' with '${v(E)}`),this.args=E,this.op=j}}Qe.InvalidArgumentTypes=c;class s extends i{constructor(E,j){super(`Invalid cast: '${v(E)}' to '${v(j)}'`),this.arg=E}}Qe.CastError=s;class l extends i{constructor(E){super(`TIMEZONE call on ${E} which has no timezone`),this.dateString=E}}Qe.InvalidTimezoneCall=l;class d extends i{constructor(E,j){super(`Operation on incompatible language literals '${v(E)}' and '${v(j)}'`),this.arg1=E,this.arg2=j}}Qe.IncompatibleLanguageOperation=d;class f extends i{constructor(){super("Empty aggregate expression")}}Qe.EmptyAggregateError=f;class h extends i{constructor(E,j){super(`Failed to parse "${E}" as ${j}.`)}}Qe.ParseError=h;class p extends Error{constructor(E,j){super(`Programmer Error '${E}'`),this.payload=j}}Qe.UnexpectedError=p;class y extends Error{constructor(E,j){super(`The number of args does not match the arity of the operator '${v(j)}'.`),this.args=E,this.op=j}}Qe.InvalidArity=y;class _ extends Error{constructor(E){super(`Invalid SPARQL Expression '${v(E)}'`)}}Qe.InvalidExpression=_;class m extends Error{constructor(E,j){j instanceof Error?super(`Error thrown in ${E}: ${j.message}${j.stack?`
${j.stack}`:""}`):super(`Error thrown in ${E}`)}}Qe.ExtensionFunctionError=m;class O extends Error{constructor(E){super(`Aggregate expression ${v(E)} found, but no aggregate hook provided.`)}}Qe.NoAggregator=O;function v(S){return JSON.stringify(S)}return Qe}var Pr={},_O;function Ax(){if(_O)return Pr;_O=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.serializeDuration=Pr.serializeTime=Pr.serializeDate=Pr.serializeDateTime=void 0;function i(a,u=2){return a.toLocaleString(void 0,{minimumIntegerDigits:u,useGrouping:!1})}function r(a){return`${n({year:a.year,month:a.month,day:a.day})}T${t(a)}`}Pr.serializeDateTime=r;function o(a){return a.zoneHours===void 0||a.zoneMinutes===void 0?"":a.zoneHours===0&&a.zoneMinutes===0?"Z":`${a.zoneHours>=0?`+${i(a.zoneHours)}`:i(a.zoneHours)}:${i(Math.abs(a.zoneMinutes))}`}function n(a){return`${i(a.year,4)}-${i(a.month)}-${i(a.day)}${o(a)}`}Pr.serializeDate=n;function t(a){return`${i(a.hours)}:${i(a.minutes)}:${i(a.seconds)}${o(a)}`}Pr.serializeTime=t;function e(a,u="PT0S"){if(!Object.values(a).some(_=>(_||0)!==0))return u;const c=Object.values(a).some(_=>(_||0)<0)?"-":"",s=a.year?`${Math.abs(a.year)}Y`:"",l=a.month?`${Math.abs(a.month)}M`:"",d=a.day?`${Math.abs(a.day)}D`:"",f=`${c}P${s}${l}${d}`;if(!(a.hours||a.minutes||a.seconds))return f;const h=a.hours?`${Math.abs(a.hours)}H`:"",p=a.minutes?`${Math.abs(a.minutes)}M`:"",y=a.seconds?`${Math.abs(a.seconds)}S`:"";return`${f}T${h}${p}${y}`}return Pr.serializeDuration=e,Pr}var Zb={},dt={},Kc={},mO;function YN(){if(mO)return Kc;mO=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.OverloadTree=void 0;const i=Qs(),r=Bg();let o=class G1{constructor(t,e){this.identifier=t,this.implementation=void 0,this.generalOverloads=Object.create(null),this.literalOverLoads=[],this.depth=e??0,this.promotionCount=void 0}getSubtree(t){const e=(0,r.asGeneralType)(t);if(e)return this.generalOverloads[e];for(const[a,u]of this.literalOverLoads)if(t===a)return u}getImplementationExact(t){let e=this;for(const a of t)if(e=e.getSubtree(a),!e)return;return e.implementation}search(t,e,a){let u=a[this.identifier],c=0;for(;c<t.length&&u?.cache;){const d=t[c],f=(0,i.isLiteralTermExpression)(d);u=u.cache[f?f.dataType:d.termType],c++}if(c===t.length&&u?.func)return u.func;const s=[],l=0;if(t.length===0)return this.implementation;for(s.push(...this.getSubTreeWithArg(t[l],e).map(d=>({node:d,index:l+1})));s.length>0;){const{index:d,node:f}=s.pop();if(d===t.length&&f.implementation)return this.addToCache(a,t,f.implementation),f.implementation;s.push(...f.getSubTreeWithArg(t[d],e).map(h=>({node:h,index:d+1})))}}addToCache(t,e,a){function u(s,l){return l in s||(s[l]={}),s[l]}let c=u(t,this.identifier);for(const s of e){const l=(0,i.isLiteralTermExpression)(s),d=l?l.dataType:s.termType;c.cache=c.cache??{},c=u(c.cache,d)}c.func=a}addOverload(t,e){this._addOverload([...t],e,0)}_addOverload(t,e,a){const[u,...c]=t;if(!u){(this.promotionCount===void 0||a<=this.promotionCount)&&(this.promotionCount=a,this.implementation=e);return}let s=this.getSubtree(u);if(!s){const l=new G1(this.identifier,this.depth+1),d=(0,r.asGeneralType)(u);d&&(this.generalOverloads[d]=l);const f=(0,r.asOverrideType)(u);f&&this.literalOverLoads.push([f,l]),s=l}if(s._addOverload(c,e,a),r.typePromotion[u])for(const l of r.typePromotion[u])this.addPromotedOverload(l.typeToPromote,e,l.conversionFunction,c,a)}addPromotedOverload(t,e,a,u,c){let s=this.getSubtree(t);if(!s){const l=new G1(this.identifier,this.depth+1);this.literalOverLoads.push([t,l]),s=l}s._addOverload(u,l=>d=>e(l)([...d.slice(0,this.depth),a(d[this.depth]),...d.slice(this.depth+1,d.length)]),c+1)}getSubTreeWithArg(t,e){const a=[],u=(0,i.isLiteralTermExpression)(t);if(this.generalOverloads.term&&a.push(this.generalOverloads.term),this.generalOverloads[t.termType]&&a.push(this.generalOverloads[t.termType]),u){const c=(0,r.asKnownLiteralType)(u.dataType);let s;c?s=r.superTypeDictTable[c]:s=(0,r.getSuperTypes)(u.dataType,e);const l=this.literalOverLoads.filter(([d,f])=>d in s).map(([d,f])=>[s[d],f]);l.sort(([d,f],[h,p])=>d-h),a.push(...l.map(([d,f])=>f))}return a}};return Kc.OverloadTree=o,Kc}var gO;function WN(){if(gO)return dt;gO=1,Object.defineProperty(dt,"__esModule",{value:!0}),dt.expressionToVar=dt.dateTime=dt.langString=dt.string=dt.double=dt.float=dt.decimal=dt.integer=dt.bool=dt.Builder=dt.declare=void 0;const i=pe(),r=Qs(),o=Qs(),n=ts(),t=ts(),e=Cs(),a=YN();function u(O){return new c(O)}dt.declare=u;class c{constructor(v){this.overloadTree=new a.OverloadTree(v),this.collected=!1}collect(){if(this.collected)throw new Error("Builders can only be collected once!");return this.collected=!0,this.overloadTree}static wrapInvalidLexicalProtected(v){return S=>E=>{for(const[j,Q]of E.entries())if(Q instanceof o.NonLexicalLiteral)throw new e.InvalidLexicalForm(E[j].toRDF(S.context.getSafe(i.KeysInitQuery.dataFactory)));return v(S)(E)}}set(v,S,E=!0){return this.overloadTree.addOverload(v,E?c.wrapInvalidLexicalProtected(S):S),this}copy({from:v,to:S}){const E=this.overloadTree.getImplementationExact(v);if(!E)throw new e.UnexpectedError("Tried to copy implementation, but types not found",{from:v,to:S});return this.set(S,E)}onUnary(v,S,E=!0){return this.set([v],j=>([Q])=>S(j)(Q),E)}onUnaryTyped(v,S,E=!0){return this.set([v],j=>([Q])=>S(j)(Q.typedValue),E)}onBinary(v,S,E=!0){return this.set(v,j=>([Q,z])=>S(j)(Q,z),E)}onBinaryTyped(v,S,E=!0){return this.set(v,j=>([Q,z])=>S(j)(Q.typedValue,z.typedValue),E)}onTernaryTyped(v,S,E=!0){return this.set(v,j=>([Q,z,g])=>S(j)(Q.typedValue,z.typedValue,g.typedValue),E)}onTernary(v,S,E=!0){return this.set(v,j=>([Q,z,g])=>S(j)(Q,z,g),E)}onQuaternaryTyped(v,S,E=!0){return this.set(v,j=>([Q,z,g,F])=>S(j)(Q.typedValue,z.typedValue,g.typedValue,F.typedValue),E)}onTerm1(v,S=!1){return this.set(["term"],E=>([j])=>v(E)(j),S)}onTerm3(v){return this.set(["term","term","term"],S=>([E,j,Q])=>v(S)(E,j,Q))}onQuad1(v){return this.set(["quad"],S=>([E])=>v(S)(E))}onLiteral1(v,S=!0){return this.set(["literal"],E=>([j])=>v(E)(j),S)}onBoolean1(v,S=!0){return this.set([n.TypeURL.XSD_BOOLEAN],E=>([j])=>v(E)(j),S)}onBoolean1Typed(v,S=!0){return this.set([n.TypeURL.XSD_BOOLEAN],E=>([j])=>v(E)(j.typedValue),S)}onString1(v,S=!0){return this.set([n.TypeURL.XSD_STRING],E=>([j])=>v(E)(j),S)}onString1Typed(v,S=!0){return this.set([n.TypeURL.XSD_STRING],E=>([j])=>v(E)(j.typedValue),S)}onLangString1(v,S=!0){return this.set([n.TypeURL.RDF_LANG_STRING],E=>([j])=>v(E)(j),S)}onStringly1(v,S=!0){return this.set([n.TypeAlias.SPARQL_STRINGLY],E=>([j])=>v(E)(j),S)}onStringly1Typed(v,S=!0){return this.set([n.TypeAlias.SPARQL_STRINGLY],E=>([j])=>v(E)(j.typedValue),S)}onNumeric1(v,S=!0){return this.set([n.TypeAlias.SPARQL_NUMERIC],E=>([j])=>v(E)(j),S)}onDateTime1(v,S=!0){return this.set([n.TypeURL.XSD_DATE_TIME],E=>([j])=>v(E)(j),S)}numericConverter(v,S=!0){const E=j=>Q=>v(j)(Q.typedValue);return this.onUnary(t.TypeURL.XSD_INTEGER,j=>Q=>l(E(j)(Q)),S).onUnary(t.TypeURL.XSD_DECIMAL,j=>Q=>d(E(j)(Q)),S).onUnary(t.TypeURL.XSD_FLOAT,j=>Q=>f(E(j)(Q)),S).onUnary(t.TypeURL.XSD_DOUBLE,j=>Q=>h(E(j)(Q)),S)}arithmetic(v,S=!0){const E=j=>(Q,z)=>v(j)(Q.typedValue,z.typedValue);return this.onBinary([t.TypeURL.XSD_INTEGER,t.TypeURL.XSD_INTEGER],j=>(Q,z)=>l(E(j)(Q,z)),S).onBinary([t.TypeURL.XSD_DECIMAL,t.TypeURL.XSD_DECIMAL],j=>(Q,z)=>d(E(j)(Q,z)),S).onBinary([t.TypeURL.XSD_FLOAT,t.TypeURL.XSD_FLOAT],j=>(Q,z)=>f(E(j)(Q,z)),S).onBinary([t.TypeURL.XSD_DOUBLE,t.TypeURL.XSD_DOUBLE],j=>(Q,z)=>h(E(j)(Q,z)),S)}numberTest(v){return this.numeric(S=>([E,j])=>{const Q=v(S)(E.typedValue,j.typedValue);return s(Q)})}stringTest(v,S=!0){return this.set([n.TypeURL.XSD_STRING,n.TypeURL.XSD_STRING],E=>([j,Q])=>{const z=v(E)(j.typedValue,Q.typedValue);return s(z)},S)}booleanTest(v,S=!0){return this.set([n.TypeURL.XSD_BOOLEAN,n.TypeURL.XSD_BOOLEAN],E=>([j,Q])=>{const z=v(E)(j.typedValue,Q.typedValue);return s(z)},S)}dateTimeTest(v,S=!0){return this.set([n.TypeURL.XSD_DATE_TIME,n.TypeURL.XSD_DATE_TIME],E=>([j,Q])=>{const z=v(E)(j.typedValue,Q.typedValue);return s(z)},S)}numeric(v){return this.set([n.TypeAlias.SPARQL_NUMERIC,n.TypeAlias.SPARQL_NUMERIC],v)}}dt.Builder=c;function s(O){return new r.BooleanLiteral(O)}dt.bool=s;function l(O){return new r.IntegerLiteral(O)}dt.integer=l;function d(O){return new r.DecimalLiteral(O)}dt.decimal=d;function f(O){return new r.FloatLiteral(O)}dt.float=f;function h(O){return new r.DoubleLiteral(O)}dt.double=h;function p(O){return new r.StringLiteral(O)}dt.string=p;function y(O,v){return new r.LangStringLiteral(O,v)}dt.langString=y;function _(O,v){return new r.DateTimeLiteral(O,v)}dt.dateTime=_;function m(O,v){return O.variable(v.name.slice(1))}return dt.expressionToVar=m,dt}var bO;function Bg(){return bO||(bO=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.typePromotion=i.isSubTypeOf=i.getSuperTypeDict=i.isInternalSubType=i.asGeneralType=i.asOverrideType=i.asKnownLiteralType=i.asTypeAlias=i.typeAliasCheck=i.extensionTableInit=i.getSuperTypes=i.superTypeDictTable=i.extensionTableInput=void 0;const r=Qs(),o=WN(),n=ts();i.extensionTableInput={[n.TypeURL.XSD_DATE_TIME_STAMP]:n.TypeURL.XSD_DATE_TIME,[n.TypeURL.XSD_DAY_TIME_DURATION]:n.TypeURL.XSD_DURATION,[n.TypeURL.XSD_YEAR_MONTH_DURATION]:n.TypeURL.XSD_DURATION,[n.TypeURL.RDF_LANG_STRING]:n.TypeAlias.SPARQL_STRINGLY,[n.TypeURL.XSD_STRING]:n.TypeAlias.SPARQL_STRINGLY,[n.TypeURL.XSD_NORMALIZED_STRING]:n.TypeURL.XSD_STRING,[n.TypeURL.XSD_TOKEN]:n.TypeURL.XSD_NORMALIZED_STRING,[n.TypeURL.XSD_LANGUAGE]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NM_TOKEN]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NAME]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NC_NAME]:n.TypeURL.XSD_NAME,[n.TypeURL.XSD_ENTITY]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_ID]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_ID_REF]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_UNTYPED_ATOMIC]:n.TypeURL.XSD_STRING,[n.TypeURL.XSD_DOUBLE]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_FLOAT]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_DECIMAL]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_INTEGER]:n.TypeURL.XSD_DECIMAL,[n.TypeURL.XSD_NON_POSITIVE_INTEGER]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_NEGATIVE_INTEGER]:n.TypeURL.XSD_NON_POSITIVE_INTEGER,[n.TypeURL.XSD_LONG]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_INT]:n.TypeURL.XSD_LONG,[n.TypeURL.XSD_SHORT]:n.TypeURL.XSD_INT,[n.TypeURL.XSD_BYTE]:n.TypeURL.XSD_SHORT,[n.TypeURL.XSD_NON_NEGATIVE_INTEGER]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_POSITIVE_INTEGER]:n.TypeURL.XSD_NON_NEGATIVE_INTEGER,[n.TypeURL.XSD_UNSIGNED_LONG]:n.TypeURL.XSD_NON_NEGATIVE_INTEGER,[n.TypeURL.XSD_UNSIGNED_INT]:n.TypeURL.XSD_UNSIGNED_LONG,[n.TypeURL.XSD_UNSIGNED_SHORT]:n.TypeURL.XSD_UNSIGNED_INT,[n.TypeURL.XSD_UNSIGNED_BYTE]:n.TypeURL.XSD_UNSIGNED_SHORT,[n.TypeURL.XSD_DATE_TIME]:"term",[n.TypeURL.XSD_BOOLEAN]:"term",[n.TypeURL.XSD_DATE]:"term",[n.TypeURL.XSD_G_MONTH]:"term",[n.TypeURL.XSD_G_MONTHDAY]:"term",[n.TypeURL.XSD_G_YEAR]:"term",[n.TypeURL.XSD_G_YEAR_MONTH]:"term",[n.TypeURL.XSD_TIME]:"term",[n.TypeURL.XSD_G_DAY]:"term",[n.TypeURL.XSD_DURATION]:"term",[n.TypeAlias.SPARQL_NUMERIC]:"term",[n.TypeAlias.SPARQL_STRINGLY]:"term",[n.TypeURL.XSD_ANY_URI]:"term"},i.superTypeDictTable=Object.create(null);function t(y,_){const m=_.cache.get(y);if(m)return m;const O=_.discoverer(y);if(O==="term"){const E=Object.create(null);return E.__depth=0,E[y]=0,_.cache.set(y,E),E}let v;const S=s(O);return S?v={...i.superTypeDictTable[S]}:v={...t(O,_)},v.__depth++,v[y]=v.__depth,_.cache.set(y,v),v}i.getSuperTypes=t;function e(){for(const[y,_]of Object.entries(i.extensionTableInput)){const m=y;i.superTypeDictTable[m]||a(m,_,i.superTypeDictTable)}}i.extensionTableInit=e,e();function a(y,_,m){if(_==="term"||_===void 0){const O=Object.create(null);O.__depth=0,O[y]=0,m[y]=O;return}m[_]||a(_,i.extensionTableInput[_],m),m[y]={...m[_],[y]:m[_].__depth+1,__depth:m[_].__depth+1}}i.typeAliasCheck=Object.create(null);function u(){for(const y of Object.values(n.TypeAlias))i.typeAliasCheck[y]=!0}u();function c(y){if(y in i.typeAliasCheck)return y}i.asTypeAlias=c;function s(y){if(y in i.superTypeDictTable)return y}i.asKnownLiteralType=s;function l(y){if(s(y)??y==="term")return y}i.asOverrideType=l;function d(y){if(y==="term"||(0,r.asTermType)(y))return y}i.asGeneralType=d;function f(y,_){return y!=="term"&&i.superTypeDictTable[y]&&i.superTypeDictTable[y][_]!==void 0}i.isInternalSubType=f;function h(y,_){const m=s(y);return m?i.superTypeDictTable[m]:t(y,_)}i.getSuperTypeDict=h;function p(y,_,m){return y==="term"?!1:h(y,m)[_]!==void 0}i.isSubTypeOf=p,i.typePromotion={[n.TypeURL.XSD_STRING]:[{typeToPromote:n.TypeURL.XSD_ANY_URI,conversionFunction:y=>(0,o.string)(y.str())}],[n.TypeURL.XSD_DOUBLE]:[{typeToPromote:n.TypeURL.XSD_FLOAT,conversionFunction:y=>(0,o.double)(y.typedValue)},{typeToPromote:n.TypeURL.XSD_DECIMAL,conversionFunction:y=>(0,o.double)(y.typedValue)}],[n.TypeURL.XSD_FLOAT]:[{typeToPromote:n.TypeURL.XSD_DECIMAL,conversionFunction:y=>(0,o.float)(y.typedValue)}]}})(Zb)),Zb}var vO;function wx(){if(vO)return Ne;vO=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.isNonLexicalLiteral=Ne.NonLexicalLiteral=Ne.YearMonthDurationLiteral=Ne.DayTimeDurationLiteral=Ne.DurationLiteral=Ne.DateLiteral=Ne.TimeLiteral=Ne.DateTimeLiteral=Ne.StringLiteral=Ne.LangStringLiteral=Ne.BooleanLiteral=Ne.DoubleLiteral=Ne.FloatLiteral=Ne.DecimalLiteral=Ne.IntegerLiteral=Ne.NumericLiteral=Ne.Literal=Ne.isLiteralTermExpression=Ne.DefaultGraph=Ne.Quad=Ne.BlankNode=Ne.NamedNode=Ne.Term=void 0;const i=bn(),r=ts(),o=ts(),n=Cs(),t=Ax(),e=Bg();let a=class{constructor(){this.expressionType=i.ExpressionType.Term}str(){throw new n.InvalidArgumentTypes([this],r.SparqlOperator.STR)}coerceEBV(){throw new n.EBVCoercionError(this)}};Ne.Term=a;class u extends a{constructor(C){super(),this.value=C,this.termType="namedNode"}toRDF(C){return C.namedNode(this.value)}str(){return this.value}}Ne.NamedNode=u;class c extends a{constructor(C){super(),this.termType="blankNode",this.value=C}toRDF(C){return typeof this.value=="string"?C.blankNode(this.value):this.value}}Ne.BlankNode=c;class s extends a{constructor(C,H,G,J){super(),this.subject=C,this.predicate=H,this.object=G,this.graph=J,this.termType="quad"}toRDF(C){return C.quad(this.subject.toRDF(C),this.predicate.toRDF(C),this.object.toRDF(C),this.graph.toRDF(C))}str(){return`Quad: [${this.subject.str()}, ${this.predicate.str()}, ${this.object.str()}, ${this.graph.str()}]`}}Ne.Quad=s;class l extends a{constructor(){super(),this.termType="defaultGraph"}toRDF(C){return C.defaultGraph()}str(){return"DefaultGraph"}}Ne.DefaultGraph=l;function d(M){if(M.termType==="literal")return M}Ne.isLiteralTermExpression=d;class f extends a{constructor(C,H,G,J){super(),this.typedValue=C,this.dataType=H,this.strValue=G,this.language=J,this.termType="literal"}toRDF(C){return C.literal(this.strValue??this.str(),this.language??C.namedNode(this.dataType))}str(){return this.strValue??this.typedValue.toString()}}Ne.Literal=f;class h extends f{constructor(C,H,G,J){super(C,H,G,J),this.typedValue=C,this.strValue=G,this.language=J}coerceEBV(){return!!this.typedValue}toRDF(C){const H=super.toRDF(C);return Number.isFinite(this.typedValue)||(H.value=H.value.replace("Infinity","INF")),H}str(){return this.strValue??this.specificFormatter(this.typedValue)}}Ne.NumericLiteral=h;class p extends h{constructor(C,H,G,J){super(C,H??o.TypeURL.XSD_INTEGER,G,J),this.typedValue=C,this.strValue=G,this.language=J}specificFormatter(C){return C.toFixed(0)}}Ne.IntegerLiteral=p;class y extends h{constructor(C,H,G,J){super(C,H??o.TypeURL.XSD_DECIMAL,G,J),this.typedValue=C,this.strValue=G,this.language=J}specificFormatter(C){return C.toString()}}Ne.DecimalLiteral=y;class _ extends h{constructor(C,H,G,J){super(C,H??o.TypeURL.XSD_FLOAT,G,J),this.typedValue=C,this.strValue=G,this.language=J}specificFormatter(C){return C.toString()}}Ne.FloatLiteral=_;class m extends h{constructor(C,H,G,J){super(C,H??o.TypeURL.XSD_DOUBLE,G,J),this.typedValue=C,this.strValue=G,this.language=J}specificFormatter(C){if(!Number.isFinite(C))return C>0?"INF":C<0?"-INF":"NaN";const H=C.toExponential(),[G,J]=H.split("e"),ne=J.replace(/\+/u,"");return`${G.includes(".")?G:`${G}.0`}E${ne}`}}Ne.DoubleLiteral=m;class O extends f{constructor(C,H,G){super(C,G??o.TypeURL.XSD_BOOLEAN,H),this.typedValue=C,this.strValue=H}coerceEBV(){return this.typedValue}}Ne.BooleanLiteral=O;class v extends f{constructor(C,H,G){super(C,G??o.TypeURL.RDF_LANG_STRING,C,H),this.typedValue=C,this.language=H}coerceEBV(){return this.str().length>0}}Ne.LangStringLiteral=v;class S extends f{constructor(C,H){super(C,H??o.TypeURL.XSD_STRING,C),this.typedValue=C}coerceEBV(){return this.str().length>0}}Ne.StringLiteral=S;class E extends f{constructor(C,H,G){super(C,G??o.TypeURL.XSD_DATE_TIME,H),this.typedValue=C,this.strValue=H}str(){return(0,t.serializeDateTime)(this.typedValue)}}Ne.DateTimeLiteral=E;class j extends f{constructor(C,H,G){super(C,G??o.TypeURL.XSD_TIME,H),this.typedValue=C,this.strValue=H}str(){return(0,t.serializeTime)(this.typedValue)}}Ne.TimeLiteral=j;class Q extends f{constructor(C,H,G){super(C,G??o.TypeURL.XSD_DATE,H),this.typedValue=C,this.strValue=H}str(){return(0,t.serializeDate)(this.typedValue)}}Ne.DateLiteral=Q;class z extends f{constructor(C,H,G){super(C,G??o.TypeURL.XSD_DURATION,H),this.typedValue=C,this.strValue=H}str(){return(0,t.serializeDuration)(this.typedValue)}}Ne.DurationLiteral=z;class g extends z{constructor(C,H,G){super(C,H,G??o.TypeURL.XSD_DAY_TIME_DURATION),this.typedValue=C,this.strValue=H}}Ne.DayTimeDurationLiteral=g;class F extends f{constructor(C,H,G){super(C,G??o.TypeURL.XSD_YEAR_MONTH_DURATION,H),this.typedValue=C,this.strValue=H}str(){return(0,t.serializeDuration)(this.typedValue,"P0M")}}Ne.YearMonthDurationLiteral=F;class P extends f{constructor(C,H,G,J,ne){super({toString:()=>"undefined"},H,J,ne),this.openWorldType=G}coerceEBV(){if((0,e.isSubTypeOf)(this.dataType,o.TypeURL.XSD_BOOLEAN,this.openWorldType)||(0,e.isSubTypeOf)(this.dataType,o.TypeAlias.SPARQL_NUMERIC,this.openWorldType))return!1;throw new n.EBVCoercionError(this)}toRDF(C){return C.literal(this.str(),this.language??C.namedNode(this.dataType))}str(){return this.strValue??""}}Ne.NonLexicalLiteral=P;function R(M){if(M instanceof P)return M}return Ne.isNonLexicalLiteral=R,Ne}var Yc={},TO;function Ex(){if(TO)return Yc;TO=1,Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.Operator=void 0;const i=bn();let r=class{constructor(n,t,e){this.name=n,this.args=t,this.apply=e,this.expressionType=i.ExpressionType.Operator}};return Yc.Operator=r,Yc}var Wc={},OO;function jx(){if(OO)return Wc;OO=1,Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.Aggregate=void 0;const i=bn();let r=class{constructor(n,t){this.name=n,this.expression=t,this.expressionType=i.ExpressionType.Aggregate}};return Wc.Aggregate=r,Wc}var Zc={},SO;function Rx(){if(SO)return Zc;SO=1,Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.Existence=void 0;const i=bn();let r=class{constructor(n){this.expression=n,this.expressionType=i.ExpressionType.Existence}};return Zc.Existence=r,Zc}var FO;function Qs(){return FO||(FO=1,(function(i){var r=Wn&&Wn.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Wn&&Wn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Tx(),i),o(Ox(),i),o(wx(),i),o(Ex(),i),o(jx(),i),o(Rx(),i)})(Wn)),Wn}var Et={},Ke={},AO;function nm(){if(AO)return Ke;AO=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.extractTimeZone=Ke.extractRawTimeZone=Ke.dayTimeDurationsToSeconds=Ke.yearMonthDurationsToMonths=Ke.trimToDayTimeDuration=Ke.trimToYearMonthDuration=Ke.toUTCDate=Ke.toJSDate=Ke.negateDuration=Ke.toDateTimeRepresentation=Ke.defaultedDateTimeRepresentation=Ke.simplifyDurationRepresentation=Ke.defaultedDurationRepresentation=Ke.defaultedYearMonthDurationRepresentation=Ke.defaultedDayTimeDurationRepresentation=void 0;function i(y){return{day:y.day??0,hours:y.hours??0,minutes:y.minutes??0,seconds:y.seconds??0}}Ke.defaultedDayTimeDurationRepresentation=i;function r(y){return{year:y.year??0,month:y.month??0}}Ke.defaultedYearMonthDurationRepresentation=r;function o(y){return{...i(y),...r(y)}}Ke.defaultedDurationRepresentation=o;function n(y){const _=o(y),m={},O=_.year+Math.trunc(_.month/12);O&&(m.year=O,_.month%=12),_.month&&(m.month=_.month);const v=_.day+Math.trunc(_.hours/24)+Math.trunc(_.minutes/1440)+Math.trunc(_.seconds/(1440*60));v&&(m.day=v,_.hours%=24,_.minutes%=1440,_.seconds%=1440*60);const S=_.hours+Math.trunc(_.minutes/60)+Math.trunc(_.seconds/3600);S&&(m.hours=S,_.minutes%=60,_.seconds%=3600);const E=_.minutes+Math.trunc(_.seconds/60);return E&&(m.minutes=E,_.seconds%=60),_.seconds&&(m.seconds=_.seconds),m}Ke.simplifyDurationRepresentation=n;function t(y){return{...y,day:y.day??1,hours:y.hours??0,month:y.month??1,year:y.year??0,seconds:y.seconds??0,minutes:y.minutes??0}}Ke.defaultedDateTimeRepresentation=t;function e({date:y,timeZone:_}){return{year:y.getFullYear(),month:y.getMonth()+1,day:y.getDate(),hours:y.getHours(),minutes:y.getMinutes(),seconds:y.getSeconds(),zoneHours:_.zoneHours,zoneMinutes:_.zoneMinutes}}Ke.toDateTimeRepresentation=e;function a(y){return{year:y.year===void 0?void 0:-1*y.year,month:y.month===void 0?void 0:-1*y.month,day:y.day===void 0?void 0:-1*y.day,hours:y.hours===void 0?void 0:-1*y.hours,minutes:y.minutes===void 0?void 0:-1*y.minutes,seconds:y.seconds===void 0?void 0:-1*y.seconds}}Ke.negateDuration=a;function u(y){const _=new Date(y.year,y.month-1,y.day,y.hours,y.minutes,Math.trunc(y.seconds),y.seconds%1*1e3);return y.year>=0&&y.year<100&&_.setFullYear(_.getFullYear()-1900),_}Ke.toJSDate=u;function c(y,_){const m=u(t(y)),O=m.getTimezoneOffset(),v=y.zoneHours??_.zoneHours,S=y.zoneMinutes??_.zoneMinutes;return new Date(m.getTime()-(O+v*60+S)*60*1e3)}Ke.toUTCDate=c;function s(y){return{year:y.year,month:y.month}}Ke.trimToYearMonthDuration=s;function l(y){return{day:y.day,hours:y.hours,minutes:y.minutes,seconds:y.seconds}}Ke.trimToDayTimeDuration=l;function d(y){return y.year*12+y.month}Ke.yearMonthDurationsToMonths=d;function f(y){return((y.day*24+y.hours)*60+y.minutes)*60+y.seconds}Ke.dayTimeDurationsToSeconds=f;function h(y){return/(Z|([+-]\d\d:\d\d))?$/u.exec(y)[0]}Ke.extractRawTimeZone=h;function p(y){return{zoneHours:y.getTimezoneOffset()/60,zoneMinutes:y.getTimezoneOffset()%60}}return Ke.extractTimeZone=p,Ke}var rn={},wO;function ZN(){if(wO)return rn;wO=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.elapsedDuration=rn.addDurationToDateTime=rn.maximumDayInMonthFor=void 0;const i=nm();function r(e,a,u=0){const c=e-u,s=a-u,l=Math.floor(c/s);return{intDiv:l,remainder:e-l*s}}function o(e,a){const{intDiv:u,remainder:c}=r(a,13,1),s=e+u;return[1,3,5,7,8,10,12].includes(c)?31:[4,6,9,11].includes(c)?30:c===2&&(r(s,400).remainder===0||r(s,100).remainder!==0&&r(s,4).remainder===0)?29:28}rn.maximumDayInMonthFor=o;function n(e,a){const u={...e};let c=r(e.month+a.month,13,1);for(u.month=c.remainder,u.year=e.year+a.year+c.intDiv,c=r(e.seconds+a.seconds,60),u.seconds=c.remainder,c=r(e.minutes+a.minutes+c.intDiv,60),u.minutes=c.remainder,c=r(e.hours+a.hours+c.intDiv,24),u.hours=c.remainder,u.day=e.day+a.day+c.intDiv;;){let s;if(u.day<1)u.day+=o(u.year,u.month-1),s=-1;else if(u.day>o(u.year,u.month))u.day-=o(u.year,u.month),s=1;else break;c=r(u.month+s,13,1),u.month=c.remainder,u.year+=c.intDiv}return u}rn.addDurationToDateTime=n;function t(e,a,u){const c=(0,i.toUTCDate)(e,u),s=(0,i.toUTCDate)(a,u),l=c.getTime()-s.getTime();return{day:Math.floor(l/(1e3*60*60*24)),hours:Math.floor(l%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(l%(1e3*60*60)/(1e3*60)),seconds:l%(1e3*60)}}return rn.elapsedDuration=t,rn}var EO;function X1(){if(EO)return Et;EO=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.parseDayTimeDuration=Et.parseYearMonthDuration=Et.parseDuration=Et.parseTime=Et.parseDate=Et.parseDateTime=Et.parseXSDDecimal=Et.parseXSDFloat=void 0;const i=nm(),r=Cs(),o=ZN();function n(h){const p=Number(h);return Number.isNaN(p)?h==="NaN"?Number.NaN:h==="INF"||h==="+INF"?Number.POSITIVE_INFINITY:h==="-INF"?Number.NEGATIVE_INFINITY:void 0:p}Et.parseXSDFloat=n;function t(h){const p=Number(h);return Number.isNaN(p)?void 0:p}Et.parseXSDDecimal=t;function e(h){const[p,y]=h.split("T");if(y===void 0)throw new r.ParseError(h,"dateTime");return{...u(p),...c(y)}}Et.parseDateTime=e;function a(h){if(h==="")return{zoneHours:void 0,zoneMinutes:void 0};if(h==="Z")return{zoneHours:0,zoneMinutes:0};const y=h.replaceAll(/^([+|-])(\d\d):(\d\d)$/gu,"$11!$2!$3").split("!").map(Number);return{zoneHours:y[0]*y[1],zoneMinutes:y[0]*y[2]}}function u(h){const p=h.replaceAll(/^(-)?([123456789]*\d{4})-(\d\d)-(\d\d)(Z|([+-]\d\d:\d\d))?$/gu,"$11!$2!$3!$4!$5");if(p===h)throw new r.ParseError(h,"date");const y=p.split("!"),_=y.slice(0,-1).map(Number),m={year:_[0]*_[1],month:_[2],day:_[3],...a(y[4])};if(!(m.month>=1&&m.month<=12)||!(m.day>=1&&m.day<=(0,o.maximumDayInMonthFor)(m.year,m.month)))throw new r.ParseError(h,"date");return m}Et.parseDate=u;function c(h){const p=h.replaceAll(/^(\d\d):(\d\d):(\d\d(\.\d+)?)(Z|([+-]\d\d:\d\d))?$/gu,"$1!$2!$3!$5");if(p===h)throw new r.ParseError(h,"time");const y=p.split("!"),_=y.slice(0,-1).map(Number),m={hours:_[0],minutes:_[1],seconds:_[2],...a(y[3])};if(m.seconds>=60||m.minutes>=60||m.hours>24||m.hours===24&&(m.minutes!==0||m.seconds!==0))throw new r.ParseError(h,"time");return m}function s(h){const p=c(h);return p.hours%=24,p}Et.parseTime=s;function l(h){const[p,y]=h.split("T"),_=p.replaceAll(/^(-)?P(\d+Y)?(\d+M)?(\d+D)?$/gu,"$11S!$2!$3!$4");if(_===p)throw new r.ParseError(h,"duration");const m=_.split("!");if(y!==void 0){const S=y.replaceAll(/^(\d+H)?(\d+M)?(\d+(\.\d+)?S)?$/gu,"$1!$2!$3");if(y===""||y===S)throw new r.ParseError(h,"duration");m.push(...S.split("!"))}const O=m.map(S=>S.slice(0,-1));if(!O.slice(1).some(Boolean))throw new r.ParseError(h,"duration");const v=Number(O[0]);return(0,i.simplifyDurationRepresentation)({year:O[1]?v*Number(O[1]):void 0,month:O[2]?v*Number(O[2]):void 0,day:O[3]?v*Number(O[3]):void 0,hours:O[4]?v*Number(O[4]):void 0,minutes:O[5]?v*Number(O[5]):void 0,seconds:O[6]?v*Number(O[6]):void 0})}Et.parseDuration=l;function d(h){const p=l(h);if(["hours","minutes","seconds","day"].some(y=>!!p[y]))throw new r.ParseError(h,"yearMonthDuration");return p}Et.parseYearMonthDuration=d;function f(h){const p=l(h);if(["year","month"].some(y=>!!p[y]))throw new r.ParseError(h,"dayTimeDuration");return p}return Et.parseDayTimeDuration=f,Et}var jO;function Dx(){if(jO)return Ac;jO=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.TermTransformer=void 0;const i=sr(),r=Ie(),o=Qs(),n=ts(),t=Cs(),e=Cs(),a=X1(),u=X1(),c=Bg();let s=class{constructor(d){this.superTypeProvider=d}transformRDFTermUnsafe(d){return this.transformTerm({term:d,type:r.Algebra.types.EXPRESSION,expressionType:r.Algebra.expressionTypes.TERM})}transformTerm(d){if(!d.term)throw new t.InvalidExpression(d);switch(d.term.termType){case"Variable":return new o.Variable(i.termToString(d.term));case"Literal":return this.transformLiteral(d.term);case"NamedNode":return new o.NamedNode(d.term.value);case"BlankNode":return new o.BlankNode(d.term.value);case"Quad":return new o.Quad(this.transformRDFTermUnsafe(d.term.subject),this.transformRDFTermUnsafe(d.term.predicate),this.transformRDFTermUnsafe(d.term.object),this.transformRDFTermUnsafe(d.term.graph));case"DefaultGraph":return new o.DefaultGraph}}transformLiteral(d){if(!d.datatype||[null,void 0,""].includes(d.datatype.value))return d.language?new o.LangStringLiteral(d.value,d.language):new o.StringLiteral(d.value);const f=d.datatype.value,h=(0,c.getSuperTypeDict)(f,this.superTypeProvider);try{if(n.TypeURL.XSD_STRING in h)return new o.StringLiteral(d.value,f);if(n.TypeURL.RDF_LANG_STRING in h)return new o.LangStringLiteral(d.value,d.language);if(n.TypeURL.XSD_YEAR_MONTH_DURATION in h)return new o.YearMonthDurationLiteral((0,a.parseYearMonthDuration)(d.value),d.value,f);if(n.TypeURL.XSD_DAY_TIME_DURATION in h)return new o.DayTimeDurationLiteral((0,a.parseDayTimeDuration)(d.value),d.value,f);if(n.TypeURL.XSD_DURATION in h)return new o.DurationLiteral((0,a.parseDuration)(d.value),d.value,f);if(n.TypeURL.XSD_DATE_TIME in h){const _=new Date(d.value);return Number.isNaN(_.getTime())?new o.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value):new o.DateTimeLiteral((0,a.parseDateTime)(d.value),d.value,f)}if(n.TypeURL.XSD_DATE in h)return new o.DateLiteral((0,a.parseDate)(d.value),d.value,f);if(n.TypeURL.XSD_TIME in h)return new o.TimeLiteral((0,a.parseTime)(d.value),d.value,f);if(n.TypeURL.XSD_BOOLEAN in h)return d.value!=="true"&&d.value!=="false"&&d.value!=="1"&&d.value!=="0"?new o.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value):new o.BooleanLiteral(d.value==="true"||d.value==="1",d.value);if(n.TypeURL.XSD_DECIMAL in h){const _=u.parseXSDDecimal(d.value);return _===void 0?new o.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value):n.TypeURL.XSD_INTEGER in h?new o.IntegerLiteral(_,f,d.value):new o.DecimalLiteral(_,f,d.value)}const p=n.TypeURL.XSD_FLOAT in h,y=n.TypeURL.XSD_DOUBLE in h;if(p||y){const _=u.parseXSDFloat(d.value);return _===void 0?new o.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value):p?new o.FloatLiteral(_,f,d.value):new o.DoubleLiteral(_,f,d.value)}return new o.Literal(d.value,f,d.value)}catch(p){if((0,e.isExpressionError)(p))return new o.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value);throw p}}};return Ac.TermTransformer=s,Ac}var kc={},el={},RO;function Cg(){if(RO)return el;RO=1,Object.defineProperty(el,"__esModule",{value:!0}),el.LRUCache=void 0;const i=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,r=new Set,o=typeof process=="object"&&process?process:{},n=(f,h,p,y)=>{typeof o.emitWarning=="function"?o.emitWarning(f,h,p,y):console.error(`[${p}] ${h}: ${f}`)};let t=globalThis.AbortController,e=globalThis.AbortSignal;if(typeof t>"u"){e=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(y,_){this._onabort.push(_)}},t=class{constructor(){h()}signal=new e;abort(y){if(!this.signal.aborted){this.signal.reason=y,this.signal.aborted=!0;for(const _ of this.signal._onabort)_(y);this.signal.onabort?.(y)}}};let f=o.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const h=()=>{f&&(f=!1,n("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",h))}}const a=f=>!r.has(f),u=f=>f&&f===Math.floor(f)&&f>0&&isFinite(f),c=f=>u(f)?f<=Math.pow(2,8)?Uint8Array:f<=Math.pow(2,16)?Uint16Array:f<=Math.pow(2,32)?Uint32Array:f<=Number.MAX_SAFE_INTEGER?s:null:null;class s extends Array{constructor(h){super(h),this.fill(0)}}class l{heap;length;static#s=!1;static create(h){const p=c(h);if(!p)return[];l.#s=!0;const y=new l(h,p);return l.#s=!1,y}constructor(h,p){if(!l.#s)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new p(h),this.length=0}push(h){this.heap[this.length++]=h}pop(){return this.heap[--this.length]}}class d{#s;#d;#y;#_;#D;#P;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#m;#n;#r;#e;#c;#f;#u;#a;#g;#o;#b;#v;#p;#T;#w;#l;static unsafeExposeInternals(h){return{starts:h.#v,ttls:h.#p,sizes:h.#b,keyMap:h.#n,keyList:h.#r,valList:h.#e,next:h.#c,prev:h.#f,get head(){return h.#u},get tail(){return h.#a},free:h.#g,isBackgroundFetch:p=>h.#t(p),backgroundFetch:(p,y,_,m)=>h.#I(p,y,_,m),moveToTail:p=>h.#R(p),indexes:p=>h.#O(p),rindexes:p=>h.#S(p),isStale:p=>h.#h(p)}}get max(){return this.#s}get maxSize(){return this.#d}get calculatedSize(){return this.#m}get size(){return this.#i}get fetchMethod(){return this.#D}get memoMethod(){return this.#P}get dispose(){return this.#y}get disposeAfter(){return this.#_}constructor(h){const{max:p=0,ttl:y,ttlResolution:_=1,ttlAutopurge:m,updateAgeOnGet:O,updateAgeOnHas:v,allowStale:S,dispose:E,disposeAfter:j,noDisposeOnSet:Q,noUpdateTTL:z,maxSize:g=0,maxEntrySize:F=0,sizeCalculation:P,fetchMethod:R,memoMethod:M,noDeleteOnFetchRejection:C,noDeleteOnStaleGet:H,allowStaleOnFetchRejection:G,allowStaleOnFetchAbort:J,ignoreFetchAbort:ne}=h;if(p!==0&&!u(p))throw new TypeError("max option must be a nonnegative integer");const te=p?c(p):Array;if(!te)throw new Error("invalid max value: "+p);if(this.#s=p,this.#d=g,this.maxEntrySize=F||this.#d,this.sizeCalculation=P,this.sizeCalculation){if(!this.#d&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(M!==void 0&&typeof M!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#P=M,R!==void 0&&typeof R!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#D=R,this.#w=!!R,this.#n=new Map,this.#r=new Array(p).fill(void 0),this.#e=new Array(p).fill(void 0),this.#c=new te(p),this.#f=new te(p),this.#u=0,this.#a=0,this.#g=l.create(p),this.#i=0,this.#m=0,typeof E=="function"&&(this.#y=E),typeof j=="function"?(this.#_=j,this.#o=[]):(this.#_=void 0,this.#o=void 0),this.#T=!!this.#y,this.#l=!!this.#_,this.noDisposeOnSet=!!Q,this.noUpdateTTL=!!z,this.noDeleteOnFetchRejection=!!C,this.allowStaleOnFetchRejection=!!G,this.allowStaleOnFetchAbort=!!J,this.ignoreFetchAbort=!!ne,this.maxEntrySize!==0){if(this.#d!==0&&!u(this.#d))throw new TypeError("maxSize must be a positive integer if specified");if(!u(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#U()}if(this.allowStale=!!S,this.noDeleteOnStaleGet=!!H,this.updateAgeOnGet=!!O,this.updateAgeOnHas=!!v,this.ttlResolution=u(_)||_===0?_:1,this.ttlAutopurge=!!m,this.ttl=y||0,this.ttl){if(!u(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#q()}if(this.#s===0&&this.ttl===0&&this.#d===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#s&&!this.#d){const Z="LRU_CACHE_UNBOUNDED";a(Z)&&(r.add(Z),n("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Z,d))}}getRemainingTTL(h){return this.#n.has(h)?1/0:0}#q(){const h=new s(this.#s),p=new s(this.#s);this.#p=h,this.#v=p,this.#L=(m,O,v=i.now())=>{if(p[m]=O!==0?v:0,h[m]=O,O!==0&&this.ttlAutopurge){const S=setTimeout(()=>{this.#h(m)&&this.#F(this.#r[m],"expire")},O+1);S.unref&&S.unref()}},this.#E=m=>{p[m]=h[m]!==0?i.now():0},this.#A=(m,O)=>{if(h[O]){const v=h[O],S=p[O];if(!v||!S)return;m.ttl=v,m.start=S,m.now=y||_();const E=m.now-S;m.remainingTTL=v-E}};let y=0;const _=()=>{const m=i.now();if(this.ttlResolution>0){y=m;const O=setTimeout(()=>y=0,this.ttlResolution);O.unref&&O.unref()}return m};this.getRemainingTTL=m=>{const O=this.#n.get(m);if(O===void 0)return 0;const v=h[O],S=p[O];if(!v||!S)return 1/0;const E=(y||_())-S;return v-E},this.#h=m=>{const O=p[m],v=h[m];return!!v&&!!O&&(y||_())-O>v}}#E=()=>{};#A=()=>{};#L=()=>{};#h=()=>!1;#U(){const h=new s(this.#s);this.#m=0,this.#b=h,this.#j=p=>{this.#m-=h[p],h[p]=0},this.#x=(p,y,_,m)=>{if(this.#t(y))return 0;if(!u(_))if(m){if(typeof m!="function")throw new TypeError("sizeCalculation must be a function");if(_=m(y,p),!u(_))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return _},this.#M=(p,y,_)=>{if(h[p]=y,this.#d){const m=this.#d-h[p];for(;this.#m>m;)this.#N(!0)}this.#m+=h[p],_&&(_.entrySize=y,_.totalCalculatedSize=this.#m)}}#j=h=>{};#M=(h,p,y)=>{};#x=(h,p,y,_)=>{if(y||_)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#O({allowStale:h=this.allowStale}={}){if(this.#i)for(let p=this.#a;!(!this.#B(p)||((h||!this.#h(p))&&(yield p),p===this.#u));)p=this.#f[p]}*#S({allowStale:h=this.allowStale}={}){if(this.#i)for(let p=this.#u;!(!this.#B(p)||((h||!this.#h(p))&&(yield p),p===this.#a));)p=this.#c[p]}#B(h){return h!==void 0&&this.#n.get(this.#r[h])===h}*entries(){for(const h of this.#O())this.#e[h]!==void 0&&this.#r[h]!==void 0&&!this.#t(this.#e[h])&&(yield[this.#r[h],this.#e[h]])}*rentries(){for(const h of this.#S())this.#e[h]!==void 0&&this.#r[h]!==void 0&&!this.#t(this.#e[h])&&(yield[this.#r[h],this.#e[h]])}*keys(){for(const h of this.#O()){const p=this.#r[h];p!==void 0&&!this.#t(this.#e[h])&&(yield p)}}*rkeys(){for(const h of this.#S()){const p=this.#r[h];p!==void 0&&!this.#t(this.#e[h])&&(yield p)}}*values(){for(const h of this.#O())this.#e[h]!==void 0&&!this.#t(this.#e[h])&&(yield this.#e[h])}*rvalues(){for(const h of this.#S())this.#e[h]!==void 0&&!this.#t(this.#e[h])&&(yield this.#e[h])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(h,p={}){for(const y of this.#O()){const _=this.#e[y],m=this.#t(_)?_.__staleWhileFetching:_;if(m!==void 0&&h(m,this.#r[y],this))return this.get(this.#r[y],p)}}forEach(h,p=this){for(const y of this.#O()){const _=this.#e[y],m=this.#t(_)?_.__staleWhileFetching:_;m!==void 0&&h.call(p,m,this.#r[y],this)}}rforEach(h,p=this){for(const y of this.#S()){const _=this.#e[y],m=this.#t(_)?_.__staleWhileFetching:_;m!==void 0&&h.call(p,m,this.#r[y],this)}}purgeStale(){let h=!1;for(const p of this.#S({allowStale:!0}))this.#h(p)&&(this.#F(this.#r[p],"expire"),h=!0);return h}info(h){const p=this.#n.get(h);if(p===void 0)return;const y=this.#e[p],_=this.#t(y)?y.__staleWhileFetching:y;if(_===void 0)return;const m={value:_};if(this.#p&&this.#v){const O=this.#p[p],v=this.#v[p];if(O&&v){const S=O-(i.now()-v);m.ttl=S,m.start=Date.now()}}return this.#b&&(m.size=this.#b[p]),m}dump(){const h=[];for(const p of this.#O({allowStale:!0})){const y=this.#r[p],_=this.#e[p],m=this.#t(_)?_.__staleWhileFetching:_;if(m===void 0||y===void 0)continue;const O={value:m};if(this.#p&&this.#v){O.ttl=this.#p[p];const v=i.now()-this.#v[p];O.start=Math.floor(Date.now()-v)}this.#b&&(O.size=this.#b[p]),h.unshift([y,O])}return h}load(h){this.clear();for(const[p,y]of h){if(y.start){const _=Date.now()-y.start;y.start=i.now()-_}this.set(p,y.value,y)}}set(h,p,y={}){if(p===void 0)return this.delete(h),this;const{ttl:_=this.ttl,start:m,noDisposeOnSet:O=this.noDisposeOnSet,sizeCalculation:v=this.sizeCalculation,status:S}=y;let{noUpdateTTL:E=this.noUpdateTTL}=y;const j=this.#x(h,p,y.size||0,v);if(this.maxEntrySize&&j>this.maxEntrySize)return S&&(S.set="miss",S.maxEntrySizeExceeded=!0),this.#F(h,"set"),this;let Q=this.#i===0?void 0:this.#n.get(h);if(Q===void 0)Q=this.#i===0?this.#a:this.#g.length!==0?this.#g.pop():this.#i===this.#s?this.#N(!1):this.#i,this.#r[Q]=h,this.#e[Q]=p,this.#n.set(h,Q),this.#c[this.#a]=Q,this.#f[Q]=this.#a,this.#a=Q,this.#i++,this.#M(Q,j,S),S&&(S.set="add"),E=!1;else{this.#R(Q);const z=this.#e[Q];if(p!==z){if(this.#w&&this.#t(z)){z.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:g}=z;g!==void 0&&!O&&(this.#T&&this.#y?.(g,h,"set"),this.#l&&this.#o?.push([g,h,"set"]))}else O||(this.#T&&this.#y?.(z,h,"set"),this.#l&&this.#o?.push([z,h,"set"]));if(this.#j(Q),this.#M(Q,j,S),this.#e[Q]=p,S){S.set="replace";const g=z&&this.#t(z)?z.__staleWhileFetching:z;g!==void 0&&(S.oldValue=g)}}else S&&(S.set="update")}if(_!==0&&!this.#p&&this.#q(),this.#p&&(E||this.#L(Q,_,m),S&&this.#A(S,Q)),!O&&this.#l&&this.#o){const z=this.#o;let g;for(;g=z?.shift();)this.#_?.(...g)}return this}pop(){try{for(;this.#i;){const h=this.#e[this.#u];if(this.#N(!0),this.#t(h)){if(h.__staleWhileFetching)return h.__staleWhileFetching}else if(h!==void 0)return h}}finally{if(this.#l&&this.#o){const h=this.#o;let p;for(;p=h?.shift();)this.#_?.(...p)}}}#N(h){const p=this.#u,y=this.#r[p],_=this.#e[p];return this.#w&&this.#t(_)?_.__abortController.abort(new Error("evicted")):(this.#T||this.#l)&&(this.#T&&this.#y?.(_,y,"evict"),this.#l&&this.#o?.push([_,y,"evict"])),this.#j(p),h&&(this.#r[p]=void 0,this.#e[p]=void 0,this.#g.push(p)),this.#i===1?(this.#u=this.#a=0,this.#g.length=0):this.#u=this.#c[p],this.#n.delete(y),this.#i--,p}has(h,p={}){const{updateAgeOnHas:y=this.updateAgeOnHas,status:_}=p,m=this.#n.get(h);if(m!==void 0){const O=this.#e[m];if(this.#t(O)&&O.__staleWhileFetching===void 0)return!1;if(this.#h(m))_&&(_.has="stale",this.#A(_,m));else return y&&this.#E(m),_&&(_.has="hit",this.#A(_,m)),!0}else _&&(_.has="miss");return!1}peek(h,p={}){const{allowStale:y=this.allowStale}=p,_=this.#n.get(h);if(_===void 0||!y&&this.#h(_))return;const m=this.#e[_];return this.#t(m)?m.__staleWhileFetching:m}#I(h,p,y,_){const m=p===void 0?void 0:this.#e[p];if(this.#t(m))return m;const O=new t,{signal:v}=y;v?.addEventListener("abort",()=>O.abort(v.reason),{signal:O.signal});const S={signal:O.signal,options:y,context:_},E=(P,R=!1)=>{const{aborted:M}=O.signal,C=y.ignoreFetchAbort&&P!==void 0;if(y.status&&(M&&!R?(y.status.fetchAborted=!0,y.status.fetchError=O.signal.reason,C&&(y.status.fetchAbortIgnored=!0)):y.status.fetchResolved=!0),M&&!C&&!R)return Q(O.signal.reason);const H=g;return this.#e[p]===g&&(P===void 0?H.__staleWhileFetching?this.#e[p]=H.__staleWhileFetching:this.#F(h,"fetch"):(y.status&&(y.status.fetchUpdated=!0),this.set(h,P,S.options))),P},j=P=>(y.status&&(y.status.fetchRejected=!0,y.status.fetchError=P),Q(P)),Q=P=>{const{aborted:R}=O.signal,M=R&&y.allowStaleOnFetchAbort,C=M||y.allowStaleOnFetchRejection,H=C||y.noDeleteOnFetchRejection,G=g;if(this.#e[p]===g&&(!H||G.__staleWhileFetching===void 0?this.#F(h,"fetch"):M||(this.#e[p]=G.__staleWhileFetching)),C)return y.status&&G.__staleWhileFetching!==void 0&&(y.status.returnedStale=!0),G.__staleWhileFetching;if(G.__returned===G)throw P},z=(P,R)=>{const M=this.#D?.(h,m,S);M&&M instanceof Promise&&M.then(C=>P(C===void 0?void 0:C),R),O.signal.addEventListener("abort",()=>{(!y.ignoreFetchAbort||y.allowStaleOnFetchAbort)&&(P(void 0),y.allowStaleOnFetchAbort&&(P=C=>E(C,!0)))})};y.status&&(y.status.fetchDispatched=!0);const g=new Promise(z).then(E,j),F=Object.assign(g,{__abortController:O,__staleWhileFetching:m,__returned:void 0});return p===void 0?(this.set(h,F,{...S.options,status:void 0}),p=this.#n.get(h)):this.#e[p]=F,F}#t(h){if(!this.#w)return!1;const p=h;return!!p&&p instanceof Promise&&p.hasOwnProperty("__staleWhileFetching")&&p.__abortController instanceof t}async fetch(h,p={}){const{allowStale:y=this.allowStale,updateAgeOnGet:_=this.updateAgeOnGet,noDeleteOnStaleGet:m=this.noDeleteOnStaleGet,ttl:O=this.ttl,noDisposeOnSet:v=this.noDisposeOnSet,size:S=0,sizeCalculation:E=this.sizeCalculation,noUpdateTTL:j=this.noUpdateTTL,noDeleteOnFetchRejection:Q=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:z=this.allowStaleOnFetchRejection,ignoreFetchAbort:g=this.ignoreFetchAbort,allowStaleOnFetchAbort:F=this.allowStaleOnFetchAbort,context:P,forceRefresh:R=!1,status:M,signal:C}=p;if(!this.#w)return M&&(M.fetch="get"),this.get(h,{allowStale:y,updateAgeOnGet:_,noDeleteOnStaleGet:m,status:M});const H={allowStale:y,updateAgeOnGet:_,noDeleteOnStaleGet:m,ttl:O,noDisposeOnSet:v,size:S,sizeCalculation:E,noUpdateTTL:j,noDeleteOnFetchRejection:Q,allowStaleOnFetchRejection:z,allowStaleOnFetchAbort:F,ignoreFetchAbort:g,status:M,signal:C};let G=this.#n.get(h);if(G===void 0){M&&(M.fetch="miss");const J=this.#I(h,G,H,P);return J.__returned=J}else{const J=this.#e[G];if(this.#t(J)){const ve=y&&J.__staleWhileFetching!==void 0;return M&&(M.fetch="inflight",ve&&(M.returnedStale=!0)),ve?J.__staleWhileFetching:J.__returned=J}const ne=this.#h(G);if(!R&&!ne)return M&&(M.fetch="hit"),this.#R(G),_&&this.#E(G),M&&this.#A(M,G),J;const te=this.#I(h,G,H,P),ye=te.__staleWhileFetching!==void 0&&y;return M&&(M.fetch=ne?"stale":"refresh",ye&&ne&&(M.returnedStale=!0)),ye?te.__staleWhileFetching:te.__returned=te}}async forceFetch(h,p={}){const y=await this.fetch(h,p);if(y===void 0)throw new Error("fetch() returned undefined");return y}memo(h,p={}){const y=this.#P;if(!y)throw new Error("no memoMethod provided to constructor");const{context:_,forceRefresh:m,...O}=p,v=this.get(h,O);if(!m&&v!==void 0)return v;const S=y(h,v,{options:O,context:_});return this.set(h,S,O),S}get(h,p={}){const{allowStale:y=this.allowStale,updateAgeOnGet:_=this.updateAgeOnGet,noDeleteOnStaleGet:m=this.noDeleteOnStaleGet,status:O}=p,v=this.#n.get(h);if(v!==void 0){const S=this.#e[v],E=this.#t(S);return O&&this.#A(O,v),this.#h(v)?(O&&(O.get="stale"),E?(O&&y&&S.__staleWhileFetching!==void 0&&(O.returnedStale=!0),y?S.__staleWhileFetching:void 0):(m||this.#F(h,"expire"),O&&y&&(O.returnedStale=!0),y?S:void 0)):(O&&(O.get="hit"),E?S.__staleWhileFetching:(this.#R(v),_&&this.#E(v),S))}else O&&(O.get="miss")}#C(h,p){this.#f[p]=h,this.#c[h]=p}#R(h){h!==this.#a&&(h===this.#u?this.#u=this.#c[h]:this.#C(this.#f[h],this.#c[h]),this.#C(this.#a,h),this.#a=h)}delete(h){return this.#F(h,"delete")}#F(h,p){let y=!1;if(this.#i!==0){const _=this.#n.get(h);if(_!==void 0)if(y=!0,this.#i===1)this.#Q(p);else{this.#j(_);const m=this.#e[_];if(this.#t(m)?m.__abortController.abort(new Error("deleted")):(this.#T||this.#l)&&(this.#T&&this.#y?.(m,h,p),this.#l&&this.#o?.push([m,h,p])),this.#n.delete(h),this.#r[_]=void 0,this.#e[_]=void 0,_===this.#a)this.#a=this.#f[_];else if(_===this.#u)this.#u=this.#c[_];else{const O=this.#f[_];this.#c[O]=this.#c[_];const v=this.#c[_];this.#f[v]=this.#f[_]}this.#i--,this.#g.push(_)}}if(this.#l&&this.#o?.length){const _=this.#o;let m;for(;m=_?.shift();)this.#_?.(...m)}return y}clear(){return this.#Q("delete")}#Q(h){for(const p of this.#S({allowStale:!0})){const y=this.#e[p];if(this.#t(y))y.__abortController.abort(new Error("deleted"));else{const _=this.#r[p];this.#T&&this.#y?.(y,_,h),this.#l&&this.#o?.push([y,_,h])}}if(this.#n.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#p&&this.#v&&(this.#p.fill(0),this.#v.fill(0)),this.#b&&this.#b.fill(0),this.#u=0,this.#a=0,this.#g.length=0,this.#m=0,this.#i=0,this.#l&&this.#o){const p=this.#o;let y;for(;y=p?.shift();)this.#_?.(...y)}}}return el.LRUCache=d,el}var DO;function Px(){if(DO)return kc;DO=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.prepareEvaluatorActionContext=void 0;const i=pe(),r=Cg(),o=nm();function n(t){let e=t;if(e.has(i.KeysInitQuery.extensionFunctionCreator)&&e.has(i.KeysInitQuery.extensionFunctions))throw new Error("Illegal simultaneous usage of extensionFunctionCreator and extensionFunctions in context");if(e.has(i.KeysInitQuery.extensionFunctionCreator))e=e.set(i.KeysExpressionEvaluator.extensionFunctionCreator,e.get(i.KeysInitQuery.extensionFunctionCreator));else if(e.has(i.KeysInitQuery.extensionFunctions)){const a=e.getSafe(i.KeysInitQuery.extensionFunctions);e=e.set(i.KeysExpressionEvaluator.extensionFunctionCreator,async u=>a[u.value])}else e=e.setDefault(i.KeysExpressionEvaluator.extensionFunctionCreator,async()=>{});return e=e.setDefault(i.KeysExpressionEvaluator.defaultTimeZone,(0,o.extractTimeZone)(e.getSafe(i.KeysInitQuery.queryTimestamp))),e=e.setDefault(i.KeysExpressionEvaluator.superTypeProvider,{cache:new r.LRUCache({max:1e3}),discoverer:()=>"term"}),e}return kc.prepareEvaluatorActionContext=n,kc}var PO;function $(){return PO||(PO=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.LangStringLiteral=i.TimeLiteral=i.DurationLiteral=i.DateLiteral=i.DayTimeDurationLiteral=i.DateTimeLiteral=i.yearMonthDurationsToMonths=i.toUTCDate=i.toDateTimeRepresentation=i.negateDuration=i.extractRawTimeZone=i.defaultedYearMonthDurationRepresentation=i.defaultedDurationRepresentation=i.defaultedDayTimeDurationRepresentation=i.defaultedDateTimeRepresentation=i.dayTimeDurationsToSeconds=i.isSubTypeOf=i.SparqlOperator=i.TypeAlias=i.TypeURL=i.typedLiteral=i.InvalidArity=i.InvalidLexicalForm=i.ExtensionFunctionError=i.CastError=i.UnboundVariableError=i.NoAggregator=i.InError=i.CoalesceError=i.InvalidArgumentTypes=i.InvalidTimezoneCall=i.IncompatibleLanguageOperation=i.RDFEqualTypeError=i.EmptyAggregateError=i.isExpressionError=i.ExpressionError=i.Builder=i.expressionToVar=i.float=i.decimal=i.langString=i.dateTime=i.integer=i.double=i.string=i.bool=i.declare=i.prepareEvaluatorActionContext=i.OverloadTree=i.TermTransformer=void 0,i.trimToDayTimeDuration=i.trimToYearMonthDuration=i.parseDate=i.parseXSDFloat=i.parseXSDDecimal=i.parseYearMonthDuration=i.parseTime=i.parseDuration=i.parseDayTimeDuration=i.parseDateTime=i.elapsedDuration=i.addDurationToDateTime=i.isNonLexicalLiteral=i.StringLiteral=i.NonLexicalLiteral=i.FloatLiteral=i.IntegerLiteral=i.Literal=i.Existence=i.Aggregate=i.DoubleLiteral=i.DefaultGraph=i.DecimalLiteral=i.BlankNode=i.BooleanLiteral=i.NumericLiteral=i.Variable=i.NamedNode=i.Operator=i.Quad=i.YearMonthDurationLiteral=i.Term=void 0;var r=Dx();Object.defineProperty(i,"TermTransformer",{enumerable:!0,get:function(){return r.TermTransformer}});var o=YN();Object.defineProperty(i,"OverloadTree",{enumerable:!0,get:function(){return o.OverloadTree}});var n=Px();Object.defineProperty(i,"prepareEvaluatorActionContext",{enumerable:!0,get:function(){return n.prepareEvaluatorActionContext}});var t=WN();Object.defineProperty(i,"declare",{enumerable:!0,get:function(){return t.declare}}),Object.defineProperty(i,"bool",{enumerable:!0,get:function(){return t.bool}}),Object.defineProperty(i,"string",{enumerable:!0,get:function(){return t.string}}),Object.defineProperty(i,"double",{enumerable:!0,get:function(){return t.double}}),Object.defineProperty(i,"integer",{enumerable:!0,get:function(){return t.integer}}),Object.defineProperty(i,"dateTime",{enumerable:!0,get:function(){return t.dateTime}}),Object.defineProperty(i,"langString",{enumerable:!0,get:function(){return t.langString}}),Object.defineProperty(i,"decimal",{enumerable:!0,get:function(){return t.decimal}}),Object.defineProperty(i,"float",{enumerable:!0,get:function(){return t.float}}),Object.defineProperty(i,"expressionToVar",{enumerable:!0,get:function(){return t.expressionToVar}}),Object.defineProperty(i,"Builder",{enumerable:!0,get:function(){return t.Builder}});var e=Cs();Object.defineProperty(i,"ExpressionError",{enumerable:!0,get:function(){return e.ExpressionError}}),Object.defineProperty(i,"isExpressionError",{enumerable:!0,get:function(){return e.isExpressionError}}),Object.defineProperty(i,"EmptyAggregateError",{enumerable:!0,get:function(){return e.EmptyAggregateError}}),Object.defineProperty(i,"RDFEqualTypeError",{enumerable:!0,get:function(){return e.RDFEqualTypeError}}),Object.defineProperty(i,"IncompatibleLanguageOperation",{enumerable:!0,get:function(){return e.IncompatibleLanguageOperation}}),Object.defineProperty(i,"InvalidTimezoneCall",{enumerable:!0,get:function(){return e.InvalidTimezoneCall}}),Object.defineProperty(i,"InvalidArgumentTypes",{enumerable:!0,get:function(){return e.InvalidArgumentTypes}}),Object.defineProperty(i,"CoalesceError",{enumerable:!0,get:function(){return e.CoalesceError}}),Object.defineProperty(i,"InError",{enumerable:!0,get:function(){return e.InError}}),Object.defineProperty(i,"NoAggregator",{enumerable:!0,get:function(){return e.NoAggregator}}),Object.defineProperty(i,"UnboundVariableError",{enumerable:!0,get:function(){return e.UnboundVariableError}}),Object.defineProperty(i,"CastError",{enumerable:!0,get:function(){return e.CastError}}),Object.defineProperty(i,"ExtensionFunctionError",{enumerable:!0,get:function(){return e.ExtensionFunctionError}}),Object.defineProperty(i,"InvalidLexicalForm",{enumerable:!0,get:function(){return e.InvalidLexicalForm}}),Object.defineProperty(i,"InvalidArity",{enumerable:!0,get:function(){return e.InvalidArity}});var a=ts();Object.defineProperty(i,"typedLiteral",{enumerable:!0,get:function(){return a.typedLiteral}}),Object.defineProperty(i,"TypeURL",{enumerable:!0,get:function(){return a.TypeURL}}),Object.defineProperty(i,"TypeAlias",{enumerable:!0,get:function(){return a.TypeAlias}}),Object.defineProperty(i,"SparqlOperator",{enumerable:!0,get:function(){return a.SparqlOperator}});var u=Bg();Object.defineProperty(i,"isSubTypeOf",{enumerable:!0,get:function(){return u.isSubTypeOf}});var c=nm();Object.defineProperty(i,"dayTimeDurationsToSeconds",{enumerable:!0,get:function(){return c.dayTimeDurationsToSeconds}}),Object.defineProperty(i,"defaultedDateTimeRepresentation",{enumerable:!0,get:function(){return c.defaultedDateTimeRepresentation}}),Object.defineProperty(i,"defaultedDayTimeDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedDayTimeDurationRepresentation}}),Object.defineProperty(i,"defaultedDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedDurationRepresentation}}),Object.defineProperty(i,"defaultedYearMonthDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedYearMonthDurationRepresentation}}),Object.defineProperty(i,"extractRawTimeZone",{enumerable:!0,get:function(){return c.extractRawTimeZone}}),Object.defineProperty(i,"negateDuration",{enumerable:!0,get:function(){return c.negateDuration}}),Object.defineProperty(i,"toDateTimeRepresentation",{enumerable:!0,get:function(){return c.toDateTimeRepresentation}}),Object.defineProperty(i,"toUTCDate",{enumerable:!0,get:function(){return c.toUTCDate}}),Object.defineProperty(i,"yearMonthDurationsToMonths",{enumerable:!0,get:function(){return c.yearMonthDurationsToMonths}});var s=Qs();Object.defineProperty(i,"DateTimeLiteral",{enumerable:!0,get:function(){return s.DateTimeLiteral}}),Object.defineProperty(i,"DayTimeDurationLiteral",{enumerable:!0,get:function(){return s.DayTimeDurationLiteral}}),Object.defineProperty(i,"DateLiteral",{enumerable:!0,get:function(){return s.DateLiteral}}),Object.defineProperty(i,"DurationLiteral",{enumerable:!0,get:function(){return s.DurationLiteral}}),Object.defineProperty(i,"TimeLiteral",{enumerable:!0,get:function(){return s.TimeLiteral}}),Object.defineProperty(i,"LangStringLiteral",{enumerable:!0,get:function(){return s.LangStringLiteral}}),Object.defineProperty(i,"Term",{enumerable:!0,get:function(){return s.Term}}),Object.defineProperty(i,"YearMonthDurationLiteral",{enumerable:!0,get:function(){return s.YearMonthDurationLiteral}}),Object.defineProperty(i,"Quad",{enumerable:!0,get:function(){return s.Quad}}),Object.defineProperty(i,"Operator",{enumerable:!0,get:function(){return s.Operator}}),Object.defineProperty(i,"NamedNode",{enumerable:!0,get:function(){return s.NamedNode}}),Object.defineProperty(i,"Variable",{enumerable:!0,get:function(){return s.Variable}}),Object.defineProperty(i,"NumericLiteral",{enumerable:!0,get:function(){return s.NumericLiteral}}),Object.defineProperty(i,"BooleanLiteral",{enumerable:!0,get:function(){return s.BooleanLiteral}}),Object.defineProperty(i,"BlankNode",{enumerable:!0,get:function(){return s.BlankNode}}),Object.defineProperty(i,"DecimalLiteral",{enumerable:!0,get:function(){return s.DecimalLiteral}}),Object.defineProperty(i,"DefaultGraph",{enumerable:!0,get:function(){return s.DefaultGraph}}),Object.defineProperty(i,"DoubleLiteral",{enumerable:!0,get:function(){return s.DoubleLiteral}}),Object.defineProperty(i,"Aggregate",{enumerable:!0,get:function(){return s.Aggregate}}),Object.defineProperty(i,"Existence",{enumerable:!0,get:function(){return s.Existence}}),Object.defineProperty(i,"Literal",{enumerable:!0,get:function(){return s.Literal}}),Object.defineProperty(i,"IntegerLiteral",{enumerable:!0,get:function(){return s.IntegerLiteral}}),Object.defineProperty(i,"FloatLiteral",{enumerable:!0,get:function(){return s.FloatLiteral}}),Object.defineProperty(i,"NonLexicalLiteral",{enumerable:!0,get:function(){return s.NonLexicalLiteral}}),Object.defineProperty(i,"StringLiteral",{enumerable:!0,get:function(){return s.StringLiteral}}),Object.defineProperty(i,"isNonLexicalLiteral",{enumerable:!0,get:function(){return s.isNonLexicalLiteral}});var l=ZN();Object.defineProperty(i,"addDurationToDateTime",{enumerable:!0,get:function(){return l.addDurationToDateTime}}),Object.defineProperty(i,"elapsedDuration",{enumerable:!0,get:function(){return l.elapsedDuration}});var d=X1();Object.defineProperty(i,"parseDateTime",{enumerable:!0,get:function(){return d.parseDateTime}}),Object.defineProperty(i,"parseDayTimeDuration",{enumerable:!0,get:function(){return d.parseDayTimeDuration}}),Object.defineProperty(i,"parseDuration",{enumerable:!0,get:function(){return d.parseDuration}}),Object.defineProperty(i,"parseTime",{enumerable:!0,get:function(){return d.parseTime}}),Object.defineProperty(i,"parseYearMonthDuration",{enumerable:!0,get:function(){return d.parseYearMonthDuration}}),Object.defineProperty(i,"parseXSDDecimal",{enumerable:!0,get:function(){return d.parseXSDDecimal}}),Object.defineProperty(i,"parseXSDFloat",{enumerable:!0,get:function(){return d.parseXSDFloat}}),Object.defineProperty(i,"parseDate",{enumerable:!0,get:function(){return d.parseDate}});var f=nm();Object.defineProperty(i,"trimToYearMonthDuration",{enumerable:!0,get:function(){return f.trimToYearMonthDuration}}),Object.defineProperty(i,"trimToDayTimeDuration",{enumerable:!0,get:function(){return f.trimToDayTimeDuration}})})(Ub)),Ub}var MO;function kN(){if(MO)return zn;MO=1,Object.defineProperty(zn,"__esModule",{value:!0}),zn.TermFunctionBase=zn.ExpressionFunctionBase=void 0;const i=pe(),r=$();class o{constructor({arity:e,operator:a,apply:u}){this.arity=e,this.operator=a,this.apply=u}checkArity(e){return Array.isArray(this.arity)?this.arity.includes(e.length):this.arity===Number.POSITIVE_INFINITY?!0:e.length===this.arity}}zn.ExpressionFunctionBase=o;class n extends o{constructor({arity:e,operator:a,overloads:u}){super({arity:e,operator:a,apply:async({args:c,exprEval:s,mapping:l})=>this.applyOnTerms(await Promise.all(c.map(d=>s.evaluatorExpressionEvaluation(d,l))),s)}),this.supportsTermExpressions=!0,this.overloads=u}applyOnTerms(e,a){return(this.overloads.search(e,a.context.getSafe(i.KeysExpressionEvaluator.superTypeProvider),a.context.getSafe(i.KeysInitQuery.functionArgumentsCache))??this.handleInvalidTypes(e))(a)(e)}handleInvalidTypes(e){throw new r.InvalidArgumentTypes(e,this.operator)}}return zn.TermFunctionBase=n,zn}var NO;function K(){return NO||(NO=1,(function(i){var r=Gn&&Gn.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Gn&&Gn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(MN(),i),o(k9(),i),o(ex(),i),o(kN(),i)})(Gn)),Gn}var kn={},tl={},IO;function eI(){if(IO)return tl;IO=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.ActorQueryOperation=void 0;const i=ae();let r=class extends i.Actor{constructor(n){super(n)}};return tl.ActorQueryOperation=r,tl}var rl={},ei={},nl={},qO;function Mx(){if(qO)return nl;qO=1,Object.defineProperty(nl,"__esModule",{value:!0}),nl.MetadataValidationState=void 0;let i=class{constructor(){this.invalidateListeners=[],this.valid=!0}addInvalidateListener(o){this.invalidateListeners.push(o)}invalidate(){if(this.valid){this.valid=!1;for(const o of this.invalidateListeners)o()}}};return nl.MetadataValidationState=i,nl}var pr={},LO;function Nx(){if(LO)return pr;LO=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.cachifyMetadata=pr.validateMetadataBindings=pr.validateMetadataQuads=pr.getMetadataBindings=pr.getMetadataQuads=void 0;function i(e){return t(()=>new Promise((a,u)=>{e.getProperty("metadata",c=>a(c)),e.on("error",u)}).then(a=>o(a)))}pr.getMetadataQuads=i;function r(e){return t(()=>new Promise((a,u)=>{e.getProperty("metadata",c=>a(c)),e.on("error",u)}).then(a=>n(a)))}pr.getMetadataBindings=r;function o(e){for(const a of["cardinality"])if(!(a in e))throw new Error(`Invalid metadata: missing ${a} in ${JSON.stringify(e)}`);return e}pr.validateMetadataQuads=o;function n(e){for(const a of["cardinality","variables"])if(!(a in e))throw new Error(`Invalid metadata: missing ${a} in ${JSON.stringify(e)}`);return e}pr.validateMetadataBindings=n;function t(e){let a;return()=>(a||(a=e(),a.then(u=>u.state.addInvalidateListener(()=>{a=void 0})).catch(()=>{})),a)}return pr.cachifyMetadata=t,pr}var xO;function cr(){return xO||(xO=1,(function(i){var r=ei&&ei.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ei&&ei.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Mx(),i),o(Nx(),i)})(ei)),ei}var BO;function tI(){if(BO)return rl;BO=1,Object.defineProperty(rl,"__esModule",{value:!0}),rl.ActorQueryOperationTyped=void 0;const i=pe(),r=ae(),o=cr(),n=eI();let t=class extends n.ActorQueryOperation{constructor(a,u){if(super({...a,operationName:u}),!this.operationName)throw new Error('A valid "operationName" argument must be provided.')}async test(a){if(!a.operation)return(0,r.failTest)("Missing field 'operation' in a query operation action.");if(a.operation.type!==this.operationName)return(0,r.failTest)(`Actor ${this.name} only supports ${this.operationName} operations, but got ${a.operation.type}`);const u=a.operation;return this.testOperation(u,a.context)}async run(a,u){const c=a.context.get(i.KeysInitQuery.physicalQueryPlanLogger);c&&(c.logOperation(a.operation.type,void 0,a.operation,a.context.get(i.KeysInitQuery.physicalQueryPlanNode),this.name,{}),a.context=a.context.set(i.KeysInitQuery.physicalQueryPlanNode,a.operation));const s=a.operation,l=a.context.set(i.KeysQueryOperation.operation,s),d=await this.runOperation(s,l,u);return"metadata"in d&&(d.metadata=(0,o.cachifyMetadata)(d.metadata)),d}};return rl.ActorQueryOperationTyped=t,rl}var il={},CO;function Ix(){if(CO)return il;CO=1,Object.defineProperty(il,"__esModule",{value:!0}),il.ActorQueryOperationTypedMediated=void 0;const i=tI();let r=class extends i.ActorQueryOperationTyped{constructor(n,t){super(n,t)}};return il.ActorQueryOperationTypedMediated=r,il}var al={},QO;function qx(){if(QO)return al;QO=1,Object.defineProperty(al,"__esModule",{value:!0}),al.BusQueryOperation=void 0;const i=ae();let r=class extends i.BusIndexed{constructor(n){super({...n,actorIdentifierFields:["operationName"],actionIdentifierFields:["operation","type"]})}};return al.BusQueryOperation=r,al}var UO;function at(){return UO||(UO=1,(function(i){var r=kn&&kn.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=kn&&kn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(eI(),i),o(tI(),i),o(Ix(),i),o(qx(),i)})(kn)),kn}var ti={},ol={},ri={},ul={},VO;function Lx(){if(VO)return ul;VO=1,Object.defineProperty(ul,"__esModule",{value:!0}),ul.ActorContextPreprocess=void 0;const i=ae();let r=class extends i.Actor{constructor(n){super(n)}};return ul.ActorContextPreprocess=r,ul}var GO;function _m(){return GO||(GO=1,(function(i){var r=ri&&ri.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ri&&ri.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Lx(),i)})(ri)),ri}var XO;function xx(){if(XO)return ol;XO=1,Object.defineProperty(ol,"__esModule",{value:!0}),ol.ActorContextPreprocessConvertShortcuts=void 0;const i=_m(),r=ae();let o=class rI extends i.ActorContextPreprocess{constructor(t){super(t)}async test(t){return(0,r.passTestVoid)()}async run(t){return{context:rI.expandShortcuts(t.context,this.contextKeyShortcuts)}}static expandShortcuts(t,e){for(const a of t.keys())e[a.name]&&(t=t.set(new r.ActionContextKey(e[a.name]),t.get(a)).delete(a));return t}};return ol.ActorContextPreprocessConvertShortcuts=o,ol}var zO;function Bx(){return zO||(zO=1,(function(i){var r=ti&&ti.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ti&&ti.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(xx(),i)})(ti)),ti}var ni={},sl={},ii={},cl={},HO;function nI(){if(HO)return cl;HO=1,Object.defineProperty(cl,"__esModule",{value:!0}),cl.BlankNode=void 0;class i{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return cl.BlankNode=i,cl}var ll={},dl={},$O;function iI(){if($O)return dl;$O=1,Object.defineProperty(dl,"__esModule",{value:!0}),dl.DefaultGraph=void 0;class i{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return dl.DefaultGraph=i,i.INSTANCE=new i,dl}var fl={},pl={},JO;function x0(){if(JO)return pl;JO=1,Object.defineProperty(pl,"__esModule",{value:!0}),pl.NamedNode=void 0;class i{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return pl.NamedNode=i,pl}var KO;function aI(){if(KO)return fl;KO=1,Object.defineProperty(fl,"__esModule",{value:!0}),fl.Literal=void 0;const i=x0();class r{constructor(n,t){this.termType="Literal",this.value=n,typeof t=="string"?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return fl.Literal=r,r.RDF_LANGUAGE_STRING=new i.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new i.NamedNode("http://www.w3.org/2001/XMLSchema#string"),fl}var hl={},YO;function oI(){if(YO)return hl;YO=1,Object.defineProperty(hl,"__esModule",{value:!0}),hl.Quad=void 0;class i{constructor(o,n,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=n,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return hl.Quad=i,hl}var yl={},WO;function uI(){if(WO)return yl;WO=1,Object.defineProperty(yl,"__esModule",{value:!0}),yl.Variable=void 0;class i{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return yl.Variable=i,yl}var ZO;function Cx(){if(ZO)return ll;ZO=1,Object.defineProperty(ll,"__esModule",{value:!0}),ll.DataFactory=void 0;const i=nI(),r=iI(),o=aI(),n=x0(),t=oI(),e=uI();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new i.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return r.DefaultGraph.INSTANCE}quad(s,l,d,f){return new t.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return ll.DataFactory=u,ll}var kO;function Qx(){return kO||(kO=1,(function(i){var r=ii&&ii.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ii&&ii.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(nI(),i),o(Cx(),i),o(iI(),i),o(aI(),i),o(x0(),i),o(oI(),i),o(uI(),i)})(ii)),ii}var e3;function Ux(){if(e3)return sl;e3=1,Object.defineProperty(sl,"__esModule",{value:!0}),sl.ActorContextPreprocessSetDefaults=void 0;const i=_m(),r=pe(),o=ae(),n=Qx();let t=class extends i.ActorContextPreprocess{constructor(a){super(a),this.defaultFunctionArgumentsCache={}}async test(a){return(0,o.passTestVoid)()}async run(a){let u=a.context;if(a.initialize){u=u.setDefault(r.KeysInitQuery.queryTimestamp,new Date).setDefault(r.KeysInitQuery.queryTimestampHighResolution,performance.now()).setDefault(r.KeysQuerySourceIdentify.sourceIds,new Map).setDefault(r.KeysCore.log,this.logger).setDefault(r.KeysInitQuery.functionArgumentsCache,this.defaultFunctionArgumentsCache).setDefault(r.KeysQuerySourceIdentify.hypermediaSourcesAggregatedStores,new Map).setDefault(r.KeysInitQuery.dataFactory,new n.DataFactory);let c={language:"sparql",version:"1.1"};u.has(r.KeysInitQuery.queryFormat)?(c=u.get(r.KeysInitQuery.queryFormat),c.language==="graphql"&&(u=u.setDefault(r.KeysInitQuery.graphqlSingularizeVariables,{}))):u=u.set(r.KeysInitQuery.queryFormat,c),!u.has(r.KeysInitQuery.extensionFunctionsAlwaysPushdown)&&!u.has(r.KeysInitQuery.extensionFunctions)&&(u=u.set(r.KeysInitQuery.extensionFunctionsAlwaysPushdown,!0))}return{context:u}}};return sl.ActorContextPreprocessSetDefaults=t,sl}var t3;function Vx(){return t3||(t3=1,(function(i){var r=ni&&ni.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ni&&ni.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Ux(),i)})(ni)),ni}var ai={},_l={},r3;function Gx(){if(r3)return _l;r3=1,Object.defineProperty(_l,"__esModule",{value:!0}),_l.ActorContextPreprocessSourceToDestination=void 0;const i=_m(),r=pe(),o=ae();let n=class extends i.ActorContextPreprocess{constructor(e){super(e)}async test(e){return(0,o.passTestVoid)()}async run(e){if(e.context.get(r.KeysInitQuery.querySourcesUnidentified)&&!e.context.get(r.KeysRdfUpdateQuads.destination)){const a=e.context.get(r.KeysInitQuery.querySourcesUnidentified);if(a.length===1)return{context:e.context.set(r.KeysRdfUpdateQuads.destination,a[0])}}return e}};return _l.ActorContextPreprocessSourceToDestination=n,_l}var n3;function Xx(){return n3||(n3=1,(function(i){var r=ai&&ai.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ai&&ai.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Gx(),i)})(ai)),ai}var oi={},ml={},gl={},kb={},bl={},i3;function zx(){if(i3)return bl;i3=1,Object.defineProperty(bl,"__esModule",{value:!0}),bl.LinkedList=void 0;class i{constructor(){this._length=0,this._head=null,this._tail=null}get length(){return this._length}get first(){var o;return(o=this._head)===null||o===void 0?void 0:o.value}get last(){var o;return(o=this._tail)===null||o===void 0?void 0:o.value}get empty(){return this._head===null}push(o){const n={value:o,next:null};this._tail===null?this._head=this._tail=n:this._tail.next=this._tail=n,this._length++}shift(){if(this._head===null)return;const{value:o,next:n}=this._head;return this._head=n,n===null&&(this._tail=null),this._length--,o}clear(){this._length=0,this._head=this._tail=null}}return bl.LinkedList=i,bl}var vl={};let e1=1;const B0=new Map;let t1=!1,C0,sI=(i,...r)=>(B0.set(e1,[i,r]),C0(e1),e1++),Q0=i=>{B0.delete(i)};function U0(i){if(t1)setTimeout(U0,0,i);else{const r=B0.get(i);if(r){t1=!0;try{r[0](...r[1])}finally{Q0(i),t1=!1}}}}function Hx(){const i=new MessageChannel;i.port1.onmessage=r=>{U0(r.data)},C0=r=>{i.port2.postMessage(r)}}function $x(){const i=`setImmediate$${Math.random()}$`;window.addEventListener("message",r=>{typeof r.data=="string"&&r.data.startsWith(i)&&U0(+r.data.slice(i.length))}),C0=r=>{window.postMessage(i+r,"*")}}const Hm=typeof self>"u"?typeof global>"u"?void 0:global:self;Hm.setImmediate?(sI=Hm.setImmediate,Q0=Hm.clearImmediate):Hm.importScripts?Hx():$x();const Jx=Object.freeze(Object.defineProperty({__proto__:null,get clearImmediate(){return Q0},get setImmediate(){return sI}},Symbol.toStringTag,{value:"Module"})),Kx=wM(Jx);var a3;function Yx(){if(a3)return vl;a3=1,Object.defineProperty(vl,"__esModule",{value:!0}),vl.createTaskScheduler=void 0;const i=Kx,r=Promise.resolve(void 0);function o(n=i.setImmediate){const t=typeof queueMicrotask=="function"?queueMicrotask:u=>r.then(u);let e=0,a=null;return u=>{a!==null?a.push(u):++e<100?t(u):(a=[u],n(()=>{for(const c of a)t(c);a=null,e=0}))}}return vl.createTaskScheduler=o,vl}var o3;function Ye(){return o3||(o3=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.isIterator=i.isIterable=i.isSourceExpression=i.isPromise=i.isEventEmitter=i.isFunction=i.range=i.union=i.fromIterable=i.fromIterator=i.fromArray=i.single=i.empty=i.wrap=i.WrappingIterator=i.ClonedIterator=i.UnionIterator=i.MultiTransformIterator=i.SimpleTransformIterator=i.TransformIterator=i.BufferedIterator=i.MappingIterator=i.DESTINATION=i.identity=i.IntegerIterator=i.ArrayIterator=i.SingletonIterator=i.EmptyIterator=i.AsyncIterator=i.DESTROYED=i.ENDED=i.CLOSED=i.CLOSING=i.OPEN=i.INIT=i.setTaskScheduler=i.getTaskScheduler=i.scheduleTask=i.LinkedList=void 0;const r=N5(),o=zx();Object.defineProperty(i,"LinkedList",{enumerable:!0,get:function(){return o.LinkedList}});let t=Yx().createTaskScheduler();function e(w){t(w)}i.scheduleTask=e;function a(){return t}i.getTaskScheduler=a;function u(w){t=w}i.setTaskScheduler=u,i.INIT=1,i.OPEN=2,i.CLOSING=4,i.CLOSED=8,i.ENDED=16,i.DESTROYED=32;class c extends r.EventEmitter{constructor(T=i.OPEN){super(),this._readable=!1,this._state=T,this.on("newListener",s)}_changeState(T,A=!1){const D=T>this._state&&this._state<i.ENDED;return D&&(this._state=T,T===i.ENDED&&(A?t(()=>this.emit("end")):this.emit("end"))),D}read(){return null}forEach(T,A){this.on("data",Oe(T,A))}close(){this._changeState(i.CLOSED)&&this._endAsync()}destroy(T){this.done||this._destroy(T,A=>{T=T||A,T&&this.emit("error",T),this._end(!0)})}_destroy(T,A){A()}_end(T=!1){this._changeState(T?i.DESTROYED:i.ENDED)&&(this._readable=!1,this.removeAllListeners("readable"),this.removeAllListeners("data"),this.removeAllListeners("end"))}_endAsync(){t(()=>this._end())}get readable(){return this._readable}set readable(T){T=!!T&&!this.done,this._readable!==T&&(this._readable=T,T&&t(()=>this.emit("readable")))}get closed(){return this._state>=i.CLOSING}get ended(){return this._state===i.ENDED}get destroyed(){return this._state===i.DESTROYED}get done(){return this._state>=i.ENDED}toString(){const T=this._toStringDetails();return`[${this.constructor.name}${T?` ${T}`:""}]`}_toStringDetails(){return""}toArray(T){const A=[],D=typeof T?.limit=="number"?T.limit:1/0;return this.ended||D<=0?Promise.resolve(A):new Promise((x,I)=>{const U=()=>x(A),X=V=>{A.push(V),A.length>=D&&(this.removeListener("error",I),this.removeListener("data",X),this.removeListener("end",U),x(A))};this.on("error",I),this.on("data",X),this.on("end",U)})}getProperty(T,A){const D=this._properties;if(!A)return D&&D[T];if(D&&T in D)t(()=>A(D[T]));else{let x;(x=this._propertyCallbacks)||(this._propertyCallbacks=x=Object.create(null)),T in x?x[T].push(A):x[T]=[A]}}setProperty(T,A){const D=this._properties||(this._properties=Object.create(null));D[T]=A;const x=this._propertyCallbacks||{},I=x[T];if(I){delete x[T],t(()=>{for(const U of I)U(A)});for(T in x)return;delete this._propertyCallbacks}}getProperties(){const T=this._properties,A={};for(const D in T)A[D]=T[D];return A}setProperties(T){for(const A in T)this.setProperty(A,T[A])}copyProperties(T,A){for(const D of A)T.getProperty(D,x=>this.setProperty(D,x))}transform(T){return new F(this,T)}map(T,A){return new m(this,Oe(T,A))}filter(T,A){return this.map(function(D){return T.call(A||this,D)?D:null})}uniq(T=_){const A=new Set;return this.filter(function(D){const x=T.call(this,D);return A.has(x)?!1:(A.add(x),!0)})}prepend(T){return this.transform({prepend:T})}append(T){return this.transform({append:T})}surround(T,A){return this.transform({prepend:T,append:A})}skip(T){return this.map(A=>T-- >0?null:A)}take(T){return this.transform({limit:T})}range(T,A){return this.transform({offset:T,limit:Math.max(A-T+1,0)})}clone(){return new C(this)}[Symbol.asyncIterator](){const T=this;let A=null,D=null,x=null;T.addListener("readable",I),T.addListener("end",I),T.addListener("error",U);function I(){if(A!==null)if(x!==null)U(x);else if(T.done)A({done:!0,value:void 0}),A=D=null,X();else{const V=T.read();V!==null&&(A({done:!1,value:V}),A=D=null)}}function U(V){D!==null?(D(V),A=D=x=null,X()):x===null&&(x=V)}function X(){T.removeListener("readable",I),T.removeListener("end",I),T.removeListener("error",U)}return{next(){return new Promise((V,Y)=>{A=V,D=Y,I()})}}}}i.AsyncIterator=c;function s(w){w==="data"&&(this.removeListener("newListener",s),d(this,"readable",l),this.readable&&t(()=>l.call(this)))}function l(){let w;for(;this.listenerCount("data")!==0&&(w=this.read())!==null;)this.emit("data",w);this.listenerCount("data")===0&&!this.done&&(this.removeListener("readable",l),d(this,"newListener",s))}function d(w,T,A){w.listeners(T).includes(A)||w.on(T,A)}class f extends c{constructor(){super(),this._changeState(i.ENDED,!0)}}i.EmptyIterator=f;class h extends c{constructor(T){super(),this._item=T,T===null?this.close():this.readable=!0}read(){const T=this._item;return this._item=null,this.close(),T}_toStringDetails(){return this._item===null?"":`(${this._item})`}}i.SingletonIterator=h;class p extends c{constructor(T=[],{autoStart:A=!0,preserve:D=!0}={}){super();const x=D||!Array.isArray(T)?[...T]:T;this._index=0,this._sourceStarted=A!==!1,this._truncateThreshold=D?-1:64,this._sourceStarted&&x.length===0?this.close():this._buffer=x,this.readable=!0}read(){this._sourceStarted||(this._sourceStarted=!0);let T=null;return this._buffer&&(this._index<this._buffer.length&&(T=this._buffer[this._index++]),this._index===this._buffer.length?(delete this._buffer,this.close()):this._index===this._truncateThreshold&&(this._buffer.splice(0,this._truncateThreshold),this._index=0)),T}_toStringDetails(){return`(${this._buffer?this._buffer.length-this._index:0})`}_destroy(T,A){delete this._buffer,A()}toArray(T={}){if(!this._buffer)return Promise.resolve([]);const{length:A}=this._buffer,D=this._index,x=typeof T.limit!="number"?A:D+T.limit,I=this._buffer.slice(D,x);return this._index=x,x>=A&&this.close(),Promise.resolve(I)}}i.ArrayIterator=p;class y extends c{constructor({start:T=0,step:A=1,end:D}={}){super(),Number.isFinite(T)&&(T=Math.trunc(T)),this._next=T,Number.isFinite(A)&&(A=Math.trunc(A)),this._step=A;const x=A>=0,I=x?1/0:-1/0;Number.isFinite(D)?D=Math.trunc(D):D!==-I&&(D=I),this._last=D,!Number.isFinite(T)||(x?T>D:T<D)?this.close():this.readable=!0}read(){if(this.closed)return null;const T=this._next,A=this._step,D=this._last,x=this._next+=A;return(A>=0?x>D:x<D)&&this.close(),T}_toStringDetails(){return`(${this._next}...${this._last})`}}i.IntegerIterator=y;function _(w){return w}i.identity=_,i.DESTINATION=Symbol("destination");class m extends c{constructor(T,A=_,D={}){super(),this._map=A,this._source=O(T),this._destroySource=D.destroySource!==!1,T.done?this.close():(this._source[i.DESTINATION]=this,this._source.on("end",Q),this._source.on("error",j),this._source.on("readable",E),this.readable=this._source.readable)}read(){if(!this.done){if(this._source.readable){let T,A;for(;(T=this._source.read())!==null;)if((A=this._map(T))!==null)return A}this.readable=!1,this._source.done&&this.close()}return null}_end(T){this._source.removeListener("end",Q),this._source.removeListener("error",j),this._source.removeListener("readable",E),delete this._source[i.DESTINATION],this._destroySource&&this._source.destroy(),super._end(T)}}i.MappingIterator=m;function O(w,T=!1){if(!w||!me(w.read)||!me(w.on))throw new TypeError(`Invalid source: ${w}`);if(!T&&w[i.DESTINATION])throw new Error("The source already has a destination");return w}class v extends c{constructor({maxBufferSize:T=4,autoStart:A=!0}={}){super(i.INIT),this._buffer=new o.LinkedList,this._maxBufferSize=4,this._reading=!0,this._pushedCount=0,this.maxBufferSize=T,t(()=>this._init(A)),this._sourceStarted=A!==!1}get maxBufferSize(){return this._maxBufferSize}set maxBufferSize(T){T!==1/0&&(T=Number.isFinite(T)?Math.max(Math.trunc(T),1):4),this._maxBufferSize!==T&&(this._maxBufferSize=T,this._state===i.OPEN&&this._fillBuffer())}_init(T){let A=!1;this._reading=!0,this._begin(()=>{if(A)throw new Error("done callback called multiple times");A=!0,this._reading=!1,this._changeState(i.OPEN),T?this._fillBufferAsync():this.readable=!0})}_begin(T){T()}read(){if(this.done)return null;this._sourceStarted||(this._sourceStarted=!0);const T=this._buffer;let A;return T.empty?(A=null,this.readable=!1):A=T.shift(),!this._reading&&T.length<this._maxBufferSize&&(this.closed?T.empty&&this._endAsync():this._fillBufferAsync()),A}_read(T,A){A()}_push(T){this.done||(this._pushedCount++,this._buffer.push(T),this.readable=!0)}_fillBuffer(){let T;this._reading||(this.closed?this._completeClose():(T=Math.min(this._maxBufferSize-this._buffer.length,128))>0&&(this._pushedCount=0,this._reading=!0,this._read(T,()=>{if(!T)throw new Error("done callback called multiple times");T=0,this._reading=!1,this.closed?this._completeClose():this._pushedCount&&(this.readable=!0,this._buffer.length<this._maxBufferSize/2&&this._fillBufferAsync())})))}_fillBufferAsync(){this._reading||(this._reading=!0,t(()=>{this._reading=!1,this._fillBuffer()}))}close(){this._reading?this._changeState(i.CLOSING):this._completeClose()}_completeClose(){this._changeState(i.CLOSED)&&(this._reading=!0,this._flush(()=>{if(!this._reading)throw new Error("done callback called multiple times");this._reading=!1,this._buffer.empty&&this._endAsync()}))}_destroy(T,A){this._buffer.clear(),A()}_flush(T){T()}_toStringDetails(){const T=this._buffer;return`{${T.empty?"":`next: ${T.first}, `}buffer: ${T.length}}`}}i.BufferedIterator=v;class S extends v{constructor(T,A=T||{}){super(A),this._boundPush=D=>this._push(D),Fe(T)||(T=A.source),Se(T)?this.source=T:T&&(this._createSource=be(T)?()=>T:T,this._sourceStarted&&this._loadSourceAsync()),this._optional=!!A.optional,this._destroySource=A.destroySource!==!1}get source(){return me(this._createSource)&&this._loadSourceAsync(),this._source}set source(T){const A=this._source=this._validateSource(T);A[i.DESTINATION]=this,this.done?this._destroySource&&A.destroy():A.done?this.close():(A.on("end",z),A.on("readable",g),A.on("error",j))}_loadSourceAsync(){me(this._createSource)&&(Promise.resolve(this._createSource()).then(T=>{delete this._createSource,this.source=T,this._fillBuffer()},T=>this.emit("error",T)),this._createSource=null)}_validateSource(T,A=!1){if(this._source||typeof this._createSource<"u")throw new Error("The source cannot be changed after it has been set");return O(T,A)}_read(T,A){const D=()=>{this._pushedCount<T&&!this.closed?t(()=>this._readAndTransform(D,A)):A()};this._readAndTransform(D,A)}_readAndTransform(T,A){let D;const x=this.source;!x||x.done||(D=x.read())===null?A():this._optional?this._optionalTransform(D,T):this._transform(D,T,this._boundPush)}_optionalTransform(T,A){const D=this._pushedCount;this._transform(T,()=>{D===this._pushedCount&&this._push(T),A()},this._boundPush)}_transform(T,A,D){D(T),A()}_closeWhenDone(){this.close()}_end(T){const A=this._source;A&&(A.removeListener("end",z),A.removeListener("error",j),A.removeListener("readable",g),delete A[i.DESTINATION],this._destroySource&&A.destroy()),super._end(T)}}i.TransformIterator=S;function E(){this[i.DESTINATION].readable=!0}function j(w){this[i.DESTINATION].emit("error",w)}function Q(){this[i.DESTINATION].close()}function z(){this[i.DESTINATION]._closeWhenDone()}function g(){this[i.DESTINATION]._sourceStarted!==!1&&this[i.DESTINATION]._fillBuffer()}class F extends S{constructor(T,A){if(super(T,A),this._offset=0,this._limit=1/0,this._filter=D=>!0,A=A||(Fe(T)?null:T),A){const D=me(A)?A:A.transform,{limit:x,offset:I,filter:U,map:X,prepend:V,append:Y}=A;I===1/0||x===-1/0?this._limit=0:(Number.isFinite(I)&&(this._offset=Math.max(Math.trunc(I),0)),Number.isFinite(x)&&(this._limit=Math.max(Math.trunc(x),0)),me(U)&&(this._filter=U),me(X)&&(this._map=X),this._transform=me(D)?D:null),V&&(this._prepender=Se(V)?V:Z(V)),Y&&(this._appender=Se(Y)?Y:Z(Y))}}_read(T,A){const D=()=>this._readAndTransformSimple(T,x,A);this._readAndTransformSimple(T,x,A);function x(){t(D)}}_readAndTransformSimple(T,A,D){let x;const{source:I}=this;if(!I||I.done){D();return}for(this._limit===0&&this.close();!this.closed&&this._pushedCount<T&&(x=I.read())!==null;){if(!this._filter(x)||this._offset!==0&&this._offset--)continue;const U=typeof this._map>"u"?x:this._map(x);if(U===null)this._optional&&this._push(x);else if(!me(this._transform))this._push(U);else{this._optional?this._optionalTransform(U,A):this._transform(U,A,this._boundPush);return}--this._limit===0&&this.close()}D()}_begin(T){this._insert(this._prepender,T),delete this._prepender}_flush(T){this._insert(this._appender,T),delete this._appender}_insert(T,A){const D=I=>this._push(I);!T||T.done?A():(T.on("data",D),T.on("end",x));function x(){T.removeListener("data",D),T.removeListener("end",x),A()}}}i.SimpleTransformIterator=F;class P extends S{constructor(T,A){if(super(T,A),this._transformerQueue=[],A){const D=me(A)?A:A.multiTransform;D&&(this._createTransformer=D)}}_read(T,A){const D=this._transformerQueue,x=this._optional;let I,U;for(;(I=D[0])&&I.transformer.done;){x&&I.item!==null&&(T--,this._push(I.item)),D.shift();const{transformer:V}=I;V.removeListener("end",g),V.removeListener("readable",g),V.removeListener("error",j)}const{source:X}=this;for(;X&&!X.done&&D.length<this.maxBufferSize&&(U=X.read(),U!==null);){const V=this._createTransformer(U)||new f;V[i.DESTINATION]=this,V.on("end",g),V.on("readable",g),V.on("error",j),D.push({transformer:V,item:U})}if(I=D[0],I){const{transformer:V}=I;for(;T-- >0&&(U=V.read())!==null;)this._push(U),x&&(I.item=null)}else X&&X.done&&this.close();A()}_createTransformer(T){return new h(T)}_closeWhenDone(){this._transformerQueue.length||this.close()}_end(T){if(super._end(T),this._destroySource)for(const A of this._transformerQueue)A.transformer.destroy()}}i.MultiTransformIterator=P;class R extends v{constructor(T,A={}){super(A),this._sources=[],this._currentSource=-1;const D=A.autoStart!==!1;if(Se(T))T.on("error",x=>this.emit("error",x)),this._pending={loading:!1,sources:T},D&&this._loadSources();else if(Array.isArray(T)&&T.length>0)for(const x of T)this._addSource(x);else D&&this.close();this._destroySources=A.destroySources!==!1}_loadSources(){const T=this._pending.sources;this._pending.loading=!0,T.done?(delete this._pending,this.close()):(T.on("data",A=>{this._addSource(A),this._fillBufferAsync()}),T.on("end",()=>{delete this._pending,this._fillBuffer()}))}_addSource(T){be(T)&&(T=J(T)),T.done||(this._sources.push(T),T[i.DESTINATION]=this,T.on("error",j),T.on("readable",g),T.on("end",M))}_removeEmptySources(){this._sources=this._sources.filter((T,A)=>(T.done&&A<=this._currentSource&&this._currentSource--,!T.done)),this._fillBuffer()}_read(T,A){var D;((D=this._pending)===null||D===void 0?void 0:D.loading)===!1&&this._loadSources();let x=0,I;for(;x!==(x=T);)for(let U=0;U<this._sources.length&&T>0;U++)this._currentSource=(this._currentSource+1)%this._sources.length,(I=this._sources[this._currentSource].read())!==null&&(T--,this._push(I));!this._pending&&this._sources.length===0&&this.close(),A()}_end(T=!1){if(super._end(T),this._destroySources){for(const A of this._sources)A.destroy();this._pending&&(this._pending.sources.destroy(),delete this._pending)}}}i.UnionIterator=R;function M(){this[i.DESTINATION]._removeEmptySources()}class C extends S{constructor(T){super(T,{autoStart:!1}),this._readPosition=0,this._reading=!1,T&&(this.readable=!0)}_init(){}close(){c.prototype.close.call(this)}get source(){return super.source}set source(T){const A=this._source=this._validateSource(T),D=A&&A[i.DESTINATION]||(A[i.DESTINATION]=new H(A));this.done?this._destroySource&&A.destroy():D.endsAt(0)?this.close():(D.register(this),(A._sourceStarted===!1||D.readAt(0)!==null)&&(this.readable=!0));const x=this._propertyCallbacks;for(const I in x){const U=x[I];for(const X of U)this._getSourceProperty(I,X)}}_validateSource(T,A=!1){const D=T&&T[i.DESTINATION];return super._validateSource(T,!D||D instanceof H)}getProperty(T,A){const{source:D}=this,x=this._properties,I=x&&T in x;if(!A)return I?x&&x[T]:D&&D.getProperty(T);super.getProperty(T,A),D&&!I&&this._getSourceProperty(T,A)}_getSourceProperty(T,A){this.source.getProperty(T,D=>{(!this._properties||!(T in this._properties))&&A(D)})}getProperties(){const T=this.source?this.source.getProperties():{},A=this._properties;for(const D in A)T[D]=A[D];return T}_toStringDetails(){return`{source: ${this.source?this.source.toString():"none"}}`}read(){this._sourceStarted||(this._sourceStarted=!0);const T=this.source;let A=null;if(!this.done&&T){const D=T[i.DESTINATION];(A=D.readAt(this._readPosition))!==null?this._readPosition++:this.readable=!1,D.endsAt(this._readPosition)&&this.close()}return A}_end(T){const A=this.source,D=A?.[i.DESTINATION];D&&D.unregister(this),v.prototype._end.call(this,T)}}i.ClonedIterator=C;class H{constructor(T){if(this._history=[],this._trackers=new Set,this._source=T,!T.done){const A=()=>{for(const I of this._trackers)I.readable=!0},D=I=>{for(const U of this._trackers)U.emit("error",I)},x=()=>{for(const I of this._trackers)I._sourceStarted!==!1&&I._readPosition===this._history.length&&I.close();this._trackers.clear(),T.removeListener("end",x),T.removeListener("error",D),T.removeListener("readable",A)};T.on("end",x),T.on("error",D),T.on("readable",A)}}register(T){this._source.done||this._trackers.add(T)}unregister(T){this._trackers.delete(T)}readAt(T){let A=null;return T<this._history.length?A=this._history[T]:!this._source.done&&(A=this._source.read())!==null&&(this._history[T]=A),A}endsAt(T){return this._source.done&&this._history.length===T}}class G extends c{constructor(T,A){super(),this._source=null,this._destroySource=A?.destroySource!==!1,be(T)?(this._source=new c,T.then(D=>{this._source=null,this.source=D}).catch(D=>this.emit("error",D))):T&&(this.source=T)}set source(T){let A=T;if(this._source!==null)throw new Error("The source cannot be changed after it has been set");if(q(A)&&(A=A[Symbol.iterator]()),b(A)){let D=A;A=new r.EventEmitter,A.read=()=>{if(D!==null){let x;for(;!(x=D.next()).done;)if(x.value!==null)return x.value;D=null,this.close()}return null}}else A=O(A);if(this.done){this._destroySource&&me(A.destroy)&&A.destroy();return}A[i.DESTINATION]=this,A.on("end",Q),A.on("error",j),A.on("readable",E),this._source=A,this.readable=A.readable!==!1}read(){if(this._source!==null&&this._source.readable!==!1){const T=this._source.read();if(T!==null)return T;this.readable=!1}return null}_end(T=!1){this._source!==null&&(this._source.removeListener("end",Q),this._source.removeListener("error",j),this._source.removeListener("readable",E),delete this._source[i.DESTINATION],this._destroySource&&me(this._source.destroy)&&this._source.destroy(),this._source=null),super._end(T)}}i.WrappingIterator=G;function J(w,T){if(T&&("autoStart"in T||"optional"in T||"source"in T||"maxBufferSize"in T))return w&&!Se(w)&&(w=new G(w)),new S(w,T);if(!w)return ne();if(be(w))return new G(w,T);if(w instanceof c)return w;if(Array.isArray(w))return Z(w);if(q(w)||b(w)||Se(w))return new G(w,T);throw new TypeError(`Invalid source: ${w}`)}i.wrap=J;function ne(){return new f}i.empty=ne;function te(w){return new h(w)}i.single=te;function Z(w){return new p(w)}i.fromArray=Z;function ye(w){return new G(w)}i.fromIterator=ye;function ve(w){return new G(w)}i.fromIterable=ve;function Te(w){return new R(w)}i.union=Te;function ee(w,T,A){return new y({start:w,end:T,step:A})}i.range=ee;function Oe(w,T){return T?w.bind(T):w}function me(w){return typeof w=="function"}i.isFunction=me;function Se(w){return me(w?.on)}i.isEventEmitter=Se;function be(w){return me(w?.then)}i.isPromise=be;function Fe(w){return w&&(Se(w)||be(w)||me(w))}i.isSourceExpression=Fe;function q(w){return w&&Symbol.iterator in w}i.isIterable=q;function b(w){return me(w?.next)}i.isIterator=b})(kb)),kb}var r1={},ui={},Tl={},u3;function Wx(){if(u3)return Tl;u3=1,Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.BlankNodeScoped=void 0;let i=class{constructor(o,n){this.termType="BlankNode",this.value=o,this.skolemized=n}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}};return Tl.BlankNodeScoped=i,Tl}var Ol={},s3;function Zx(){if(s3)return Ol;s3=1,Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.BlankNodeBindingsScoped=void 0;let i=class{constructor(o){this.termType="BlankNode",this.singleBindingsScope=!0,this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}};return Ol.BlankNodeBindingsScoped=i,Ol}var c3;function V0(){return c3||(c3=1,(function(i){var r=ui&&ui.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ui&&ui.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Wx(),i),o(Zx(),i)})(ui)),ui}var si={},Ee={},ci={},Sl={},l3;function cI(){if(l3)return Sl;l3=1,Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.BlankNode=void 0;class i{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return Sl.BlankNode=i,Sl}var Fl={},Al={},d3;function lI(){if(d3)return Al;d3=1,Object.defineProperty(Al,"__esModule",{value:!0}),Al.DefaultGraph=void 0;class i{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return Al.DefaultGraph=i,i.INSTANCE=new i,Al}var wl={},El={},f3;function G0(){if(f3)return El;f3=1,Object.defineProperty(El,"__esModule",{value:!0}),El.NamedNode=void 0;class i{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return El.NamedNode=i,El}var p3;function dI(){if(p3)return wl;p3=1,Object.defineProperty(wl,"__esModule",{value:!0}),wl.Literal=void 0;const i=G0();class r{constructor(n,t){this.termType="Literal",this.value=n,typeof t=="string"?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return wl.Literal=r,r.RDF_LANGUAGE_STRING=new i.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new i.NamedNode("http://www.w3.org/2001/XMLSchema#string"),wl}var jl={},h3;function fI(){if(h3)return jl;h3=1,Object.defineProperty(jl,"__esModule",{value:!0}),jl.Quad=void 0;class i{constructor(o,n,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=n,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return jl.Quad=i,jl}var Rl={},y3;function pI(){if(y3)return Rl;y3=1,Object.defineProperty(Rl,"__esModule",{value:!0}),Rl.Variable=void 0;class i{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return Rl.Variable=i,Rl}var _3;function kx(){if(_3)return Fl;_3=1,Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.DataFactory=void 0;const i=cI(),r=lI(),o=dI(),n=G0(),t=fI(),e=pI();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new i.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return r.DefaultGraph.INSTANCE}quad(s,l,d,f){return new t.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Fl.DataFactory=u,Fl}var m3;function e7(){return m3||(m3=1,(function(i){var r=ci&&ci.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ci&&ci.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(cI(),i),o(kx(),i),o(lI(),i),o(dI(),i),o(G0(),i),o(fI(),i),o(pI(),i)})(ci)),ci}var g3;function hI(){if(g3)return Ee;g3=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.matchPatternMappings=Ee.matchPatternComplete=Ee.matchPattern=Ee.matchTerm=Ee.getValueNestedPath=Ee.someTermsNested=Ee.someTerms=Ee.everyTermsNested=Ee.everyTerms=Ee.reduceTermsNested=Ee.reduceTerms=Ee.mapTermsNested=Ee.mapTerms=Ee.filterQuadTermNamesNested=Ee.filterQuadTermNames=Ee.filterTermsNested=Ee.filterTerms=Ee.forEachTermsNested=Ee.forEachTerms=Ee.collectNamedTerms=Ee.getNamedTerms=Ee.getTermsNested=Ee.getTerms=Ee.TRIPLE_TERM_NAMES=Ee.QUAD_TERM_NAMES=void 0;const i=e7(),r=new i.DataFactory;Ee.QUAD_TERM_NAMES=["subject","predicate","object","graph"],Ee.TRIPLE_TERM_NAMES=["subject","predicate","object"];function o(g,F){return F&&g.graph.termType==="DefaultGraph"?[g.subject,g.predicate,g.object]:[g.subject,g.predicate,g.object,g.graph]}Ee.getTerms=o;function n(g,F){const P=[];for(const R of o(g,F))R.termType==="Quad"?n(R,F).forEach(M=>P.push(M)):P.push(R);return P}Ee.getTermsNested=n;function t(g){return[{key:"subject",value:g.subject},{key:"predicate",value:g.predicate},{key:"object",value:g.object},{key:"graph",value:g.graph}]}Ee.getNamedTerms=t;function e(g,F,P){const R={};return g.forEach(M=>R[M.key]=M.value),F&&(R.subject=R.subject||F("subject"),R.predicate=R.predicate||F("predicate"),R.object=R.object||F("object"),R.graph=R.graph||F("graph")),(P||r).quad(R.subject,R.predicate,R.object,R.graph)}Ee.collectNamedTerms=e;function a(g,F){F(g.subject,"subject"),F(g.predicate,"predicate"),F(g.object,"object"),F(g.graph,"graph")}Ee.forEachTerms=a;function u(g,F,P=[]){g.subject.termType==="Quad"?u(g.subject,F,[...P,"subject"]):F(g.subject,[...P,"subject"]),g.predicate.termType==="Quad"?u(g.predicate,F,[...P,"predicate"]):F(g.predicate,[...P,"predicate"]),g.object.termType==="Quad"?u(g.object,F,[...P,"object"]):F(g.object,[...P,"object"]),g.graph.termType==="Quad"?u(g.graph,F,[...P,"graph"]):F(g.graph,[...P,"graph"])}Ee.forEachTermsNested=u;function c(g,F){const P=[];return F(g.subject,"subject")&&P.push(g.subject),F(g.predicate,"predicate")&&P.push(g.predicate),F(g.object,"object")&&P.push(g.object),F(g.graph,"graph")&&P.push(g.graph),P}Ee.filterTerms=c;function s(g,F,P=[]){let R=[];return g.subject.termType==="Quad"?R=[...R,...s(g.subject,F,[...P,"subject"])]:F(g.subject,[...P,"subject"])&&R.push(g.subject),g.predicate.termType==="Quad"?R=[...R,...s(g.predicate,F,[...P,"predicate"])]:F(g.predicate,[...P,"predicate"])&&R.push(g.predicate),g.object.termType==="Quad"?R=[...R,...s(g.object,F,[...P,"object"])]:F(g.object,[...P,"object"])&&R.push(g.object),g.graph.termType==="Quad"?R=[...R,...s(g.graph,F,[...P,"graph"])]:F(g.graph,[...P,"graph"])&&R.push(g.graph),R}Ee.filterTermsNested=s;function l(g,F){const P=[];return F(g.subject,"subject")&&P.push("subject"),F(g.predicate,"predicate")&&P.push("predicate"),F(g.object,"object")&&P.push("object"),F(g.graph,"graph")&&P.push("graph"),P}Ee.filterQuadTermNames=l;function d(g,F,P=[]){let R=[];const M=[...P,"subject"];g.subject.termType==="Quad"?R=[...R,...d(g.subject,F,M)]:F(g.subject,M)&&R.push(M);const C=[...P,"predicate"];g.predicate.termType==="Quad"?R=[...R,...d(g.predicate,F,C)]:F(g.predicate,C)&&R.push(C);const H=[...P,"object"];g.object.termType==="Quad"?R=[...R,...d(g.object,F,H)]:F(g.object,H)&&R.push(H);const G=[...P,"graph"];return g.graph.termType==="Quad"?R=[...R,...d(g.graph,F,G)]:F(g.graph,G)&&R.push(G),R}Ee.filterQuadTermNamesNested=d;function f(g,F,P){return(P||r).quad(F(g.subject,"subject"),F(g.predicate,"predicate"),F(g.object,"object"),F(g.graph,"graph"))}Ee.mapTerms=f;function h(g,F,P,R=[]){return(P||r).quad(g.subject.termType==="Quad"?h(g.subject,F,P,[...R,"subject"]):F(g.subject,[...R,"subject"]),g.predicate.termType==="Quad"?h(g.predicate,F,P,[...R,"predicate"]):F(g.predicate,[...R,"predicate"]),g.object.termType==="Quad"?h(g.object,F,P,[...R,"object"]):F(g.object,[...R,"object"]),g.graph.termType==="Quad"?h(g.graph,F,P,[...R,"graph"]):F(g.graph,[...R,"graph"]))}Ee.mapTermsNested=h;function p(g,F,P){let R=P;return R=F(R,g.subject,"subject"),R=F(R,g.predicate,"predicate"),R=F(R,g.object,"object"),F(R,g.graph,"graph")}Ee.reduceTerms=p;function y(g,F,P,R=[]){let M=P;return g.subject.termType==="Quad"?M=y(g.subject,F,M,[...R,"subject"]):M=F(M,g.subject,[...R,"subject"]),g.predicate.termType==="Quad"?M=y(g.predicate,F,M,[...R,"predicate"]):M=F(M,g.predicate,[...R,"predicate"]),g.object.termType==="Quad"?M=y(g.object,F,M,[...R,"object"]):M=F(M,g.object,[...R,"object"]),g.graph.termType==="Quad"?M=y(g.graph,F,M,[...R,"graph"]):M=F(M,g.graph,[...R,"graph"]),M}Ee.reduceTermsNested=y;function _(g,F){return F(g.subject,"subject")&&F(g.predicate,"predicate")&&F(g.object,"object")&&F(g.graph,"graph")}Ee.everyTerms=_;function m(g,F,P=[]){return(g.subject.termType==="Quad"?m(g.subject,F,[...P,"subject"]):F(g.subject,[...P,"subject"]))&&(g.predicate.termType==="Quad"?m(g.predicate,F,[...P,"predicate"]):F(g.predicate,[...P,"predicate"]))&&(g.object.termType==="Quad"?m(g.object,F,[...P,"object"]):F(g.object,[...P,"object"]))&&(g.graph.termType==="Quad"?m(g.graph,F,[...P,"graph"]):F(g.graph,[...P,"graph"]))}Ee.everyTermsNested=m;function O(g,F){return F(g.subject,"subject")||F(g.predicate,"predicate")||F(g.object,"object")||F(g.graph,"graph")}Ee.someTerms=O;function v(g,F,P=[]){return(g.subject.termType==="Quad"?v(g.subject,F,[...P,"subject"]):F(g.subject,[...P,"subject"]))||(g.predicate.termType==="Quad"?v(g.predicate,F,[...P,"predicate"]):F(g.predicate,[...P,"predicate"]))||(g.object.termType==="Quad"?v(g.object,F,[...P,"object"]):F(g.object,[...P,"object"]))||(g.graph.termType==="Quad"?v(g.graph,F,[...P,"graph"]):F(g.graph,[...P,"graph"]))}Ee.someTermsNested=v;function S(g,F){if(F.length===0)return g;if(g.termType==="Quad")return S(g[F[0]],F.slice(1));throw new Error(`Tried to get ${F[0]} from term of type ${g.termType}`)}Ee.getValueNestedPath=S;function E(g,F){return!F||F.termType==="Variable"||F.termType==="Quad"&&g.termType==="Quad"&&Q(g,F)||F.equals(g)}Ee.matchTerm=E;function j(g,F,P,R,M){return E(g.subject,F)&&E(g.predicate,P)&&E(g.object,R)&&E(g.graph,M)}Ee.matchPattern=j;function Q(g,F){return j(g,F.subject,F.predicate,F.object,F.graph)}Ee.matchPatternComplete=Q;function z(g,F,P={}){const R={};function M(C,H){return _(C,(G,J)=>{var ne,te;const Z=H[J];switch(G.termType){case"Variable":return P.skipVarMapping&&Z.termType==="Variable"||((te=(ne=R[G.value])===null||ne===void 0?void 0:ne.equals(Z))!==null&&te!==void 0?te:(R[G.value]=Z,!0));case"Quad":return Z.termType==="Quad"&&M(G,Z);default:return G.equals(Z)}})}return M(F,g)&&(P.returnMappings?R:!0)}return Ee.matchPatternMappings=z,Ee}var bt={},b3;function t7(){if(b3)return bt;b3=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.getQuads=bt.getDefaultGraphs=bt.getVariables=bt.getLiterals=bt.getBlankNodes=bt.getNamedNodes=bt.getTermsOfType=bt.uniqTerms=bt.TERM_TYPES=void 0;const i=sr();bt.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function r(s){const l={};return s.filter(d=>{const f=(0,i.termToString)(d);return!(f in l)&&(l[f]=!0)})}bt.uniqTerms=r;function o(s,l){return s.filter(d=>d.termType===l)}bt.getTermsOfType=o;function n(s){return o(s,"NamedNode")}bt.getNamedNodes=n;function t(s){return o(s,"BlankNode")}bt.getBlankNodes=t;function e(s){return o(s,"Literal")}bt.getLiterals=e;function a(s){return o(s,"Variable")}bt.getVariables=a;function u(s){return o(s,"DefaultGraph")}bt.getDefaultGraphs=u;function c(s){return o(s,"Quad")}return bt.getQuads=c,bt}var v3;function vn(){return v3||(v3=1,(function(i){var r=si&&si.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=si&&si.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(hI(),i),o(t7(),i)})(si)),si}var T3;function X0(){return T3||(T3=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.deskolemizeOperation=i.deskolemizeQuad=i.deskolemizeTermNestedThrowing=i.deskolemizeTerm=i.skolemizeBindingsStream=i.skolemizeQuadStream=i.skolemizeBindings=i.skolemizeQuad=i.skolemizeTerm=i.getSourceId=i.SKOLEM_PREFIX=void 0;const r=V0(),o=vn(),n=Ie();i.SKOLEM_PREFIX="urn:comunica_skolem:source_";function t(p,y){let _=p.get(y.referenceValue);return _===void 0&&(_=`${p.size}`,p.set(y.referenceValue,_)),_}i.getSourceId=t;function e(p,y,_){return y.termType==="BlankNode"?new r.BlankNodeScoped(`bc_${_}_${y.value}`,p.namedNode(`${i.SKOLEM_PREFIX}${_}:${y.value}`)):y}i.skolemizeTerm=e;function a(p,y,_){return(0,o.mapTermsNested)(y,m=>e(p,m,_))}i.skolemizeQuad=a;function u(p,y,_){return y.map(m=>m.termType==="Quad"?a(p,m,_):e(p,m,_))}i.skolemizeBindings=u;function c(p,y,_){const m=y.map(v=>a(p,v,_));function O(){y.getProperty("metadata",v=>{m.setProperty("metadata",v),v.state.addInvalidateListener(O)})}return O(),m}i.skolemizeQuadStream=c;function s(p,y,_){const m=y.map(v=>u(p,v,_));function O(){y.getProperty("metadata",v=>{m.setProperty("metadata",v),v.state.addInvalidateListener(O)})}return O(),m}i.skolemizeBindingsStream=s;function l(p,y,_){if(y.termType==="BlankNode"&&"skolemized"in y&&(y=y.skolemized),y.termType==="NamedNode"&&y.value.startsWith(i.SKOLEM_PREFIX)){const m=y.value.indexOf(":",i.SKOLEM_PREFIX.length);if(y.value.slice(i.SKOLEM_PREFIX.length,m)===_){const v=y.value.slice(m+1,y.value.length);return p.blankNode(v)}return null}return y}i.deskolemizeTerm=l;function d(p,y,_){if(y.termType==="Quad")return(0,o.mapTermsNested)(y,O=>{const v=l(p,O,_);if(!v)throw new Error("Skolemized term is not in scope for this source");return v});const m=l(p,y,_);if(m===null)throw new Error("Skolemized term is not in scope for this source");return m}i.deskolemizeTermNestedThrowing=d;function f(p,y,_){return(0,o.mapTermsNested)(y,m=>l(p,m,_)??m)}i.deskolemizeQuad=f;function h(p,y,_){const m=new n.Factory;try{return n.Util.mapOperation(y,{[n.Algebra.types.PATTERN](O,v){return{result:Object.assign(v.createPattern(d(p,O.subject,_),d(p,O.predicate,_),d(p,O.object,_),d(p,O.graph,_)),{metadata:O.metadata}),recurse:!1}},[n.Algebra.types.PATH](O,v){return{result:Object.assign(v.createPath(d(p,O.subject,_),O.predicate,d(p,O.object,_),d(p,O.graph,_)),{metadata:O.metadata}),recurse:!1}}},m)}catch{}}i.deskolemizeOperation=h})(r1)),r1}var O3;function yI(){if(O3)return gl;O3=1,Object.defineProperty(gl,"__esModule",{value:!0}),gl.QuerySourceSkolemized=void 0;const i=pe(),r=cr(),o=Ye(),n=X0();let t=class{constructor(a,u){this.innerSource=a,this.sourceId=u}async getSelectorShape(a){return this.innerSource.getSelectorShape(a)}queryBindings(a,u,c){const s=u.getSafe(i.KeysInitQuery.dataFactory),l=(0,n.deskolemizeOperation)(s,a,this.sourceId);if(!l){const d=new o.ArrayIterator([],{autoStart:!1});return d.setProperty("metadata",{state:new r.MetadataValidationState,cardinality:{type:"exact",value:0},variables:[]}),d}return(0,n.skolemizeBindingsStream)(s,this.innerSource.queryBindings(l,u,c),this.sourceId)}queryBoolean(a,u){return this.innerSource.queryBoolean(a,u)}queryQuads(a,u){const c=u.getSafe(i.KeysInitQuery.dataFactory),s=(0,n.deskolemizeOperation)(c,a,this.sourceId);if(!s){const l=new o.ArrayIterator([],{autoStart:!1});return l.setProperty("metadata",{state:new r.MetadataValidationState,cardinality:{type:"exact",value:0}}),l}return(0,n.skolemizeQuadStream)(c,this.innerSource.queryQuads(s,u),this.sourceId)}queryVoid(a,u){return this.innerSource.queryVoid(a,u)}get referenceValue(){return this.innerSource.referenceValue}toString(){return`${this.innerSource.toString()}(SkolemID:${this.sourceId})`}};return gl.QuerySourceSkolemized=t,gl}var S3;function r7(){if(S3)return ml;S3=1,Object.defineProperty(ml,"__esModule",{value:!0}),ml.ActorContextPreprocessQuerySourceSkolemize=void 0;const i=_m(),r=pe(),o=ae(),n=yI(),t=X0();let e=class extends i.ActorContextPreprocess{constructor(u){super(u)}async test(u){return(0,o.passTestVoid)()}async run(u){let c=u.context;if(c.has(r.KeysQueryOperation.querySources)){c.has(r.KeysQuerySourceIdentify.sourceIds)||(c=c.set(r.KeysQuerySourceIdentify.sourceIds,new Map));const s=c.getSafe(r.KeysQuerySourceIdentify.sourceIds);let l=c.getSafe(r.KeysQueryOperation.querySources);l=l.map(d=>({source:new n.QuerySourceSkolemized(d.source,(0,t.getSourceId)(s,d.source)),context:d.context})),c=c.set(r.KeysQueryOperation.querySources,l)}return{context:c}}};return ml.ActorContextPreprocessQuerySourceSkolemize=e,ml}var F3;function _I(){return F3||(F3=1,(function(i){var r=oi&&oi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=oi&&oi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(r7(),i),o(yI(),i),o(X0(),i)})(oi)),oi}var li={},Dl={},A3;function n7(){if(A3)return Dl;A3=1,Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.MediatorCombinePipeline=void 0;const i=ae();let r=class extends i.Mediator{constructor(n){super(n)}async mediate(n){let t;try{t=this.publish(n)}catch{return n}if(this.filterFailures){const c=[];for(const s of t)(await s.reply).isPassed()&&c.push(s);t=c}const e=[];if(t=await Promise.all(t.map(async({actor:c,reply:s},l)=>{try{const d=await s,f=d.getOrThrow();return e[l]=d.getSideData(),{actor:c,reply:f}}catch(d){throw new Error(this.constructFailureMessage(n,[d.message]))}})),this.order){const c=s=>{const l=this.field?s[this.field]:s;if(typeof l!="number")throw new TypeError("Cannot order elements that are not numbers.");return l};t=t.sort((s,l)=>(this.order==="increasing"?1:-1)*(c(s.reply)-c(l.reply)))}let a=n,u=0;for(const{actor:c}of t)a={...a,...await c.runObservable(a,e[u++])};return a}mediateWith(){throw new Error("Method not supported.")}};return Dl.MediatorCombinePipeline=r,Dl}var w3;function E3(){return w3||(w3=1,(function(i){var r=li&&li.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=li&&li.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(n7(),i)})(li)),li}var di={},Pl={},fi={},Ml={},j3;function i7(){if(j3)return Ml;j3=1,Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.ActorHashBindings=void 0;const i=ae();let r=class extends i.Actor{constructor(n){super(n)}};return Ml.ActorHashBindings=r,Ml}var R3;function a7(){return R3||(R3=1,(function(i){var r=fi&&fi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=fi&&fi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(i7(),i)})(fi)),fi}var D3;function o7(){if(D3)return Pl;D3=1,Object.defineProperty(Pl,"__esModule",{value:!0}),Pl.ActorHashBindingsMurmur=void 0;const i=a7(),r=ae(),o=q0();let n=class extends i.ActorHashBindings{async test(e){return(0,r.passTestVoid)()}async run(e){return{hashFunction:(a,u)=>{let c=o();for(const s of u)c=c.hash(a.get(s)?.value??"UNDEF");return c.result()}}}};return Pl.ActorHashBindingsMurmur=n,Pl}var P3;function u7(){return P3||(P3=1,(function(i){var r=di&&di.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=di&&di.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(o7(),i)})(di)),di}var pi={},Nl={},M3;function s7(){if(M3)return Nl;M3=1,Object.defineProperty(Nl,"__esModule",{value:!0}),Nl.MediatorRace=void 0;const i=ae();let r=class extends i.Mediator{constructor(n){super(n)}mediateWith(n,t){return new Promise((e,a)=>{const u=[];for(const c of t)c.reply.then(s=>{s.isPassed()?e((0,i.passTestWithSideData)(c.actor,s.getSideData())):(u.push(s.getFailMessage()),u.length===t.length&&e((0,i.failTest)(this.constructFailureMessage(n,u))))}).catch(s=>{a(s)})})}};return Nl.MediatorRace=r,Nl}var N3;function Ur(){return N3||(N3=1,(function(i){var r=pi&&pi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=pi&&pi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(s7(),i)})(pi)),pi}var hi={},Il={},yi={},ql={},I3;function c7(){if(I3)return ql;I3=1,Object.defineProperty(ql,"__esModule",{value:!0}),ql.ActorHashQuads=void 0;const i=ae();let r=class extends i.Actor{constructor(n){super(n)}};return ql.ActorHashQuads=r,ql}var q3;function l7(){return q3||(q3=1,(function(i){var r=yi&&yi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=yi&&yi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(c7(),i)})(yi)),yi}var L3;function d7(){if(L3)return Il;L3=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.ActorHashQuadsMurmur=void 0;const i=l7(),r=ae(),o=q0();let n=class extends i.ActorHashQuads{async test(e){return(0,r.passTestVoid)()}async run(e){return{hashFunction:a=>{const u=o(a.subject.value);return u.hash(a.predicate.value),u.hash(a.object.value),u.hash(a.graph.value),u.result()}}}};return Il.ActorHashQuadsMurmur=n,Il}var x3;function f7(){return x3||(x3=1,(function(i){var r=hi&&hi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=hi&&hi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(d7(),i)})(hi)),hi}var _i={},Ll={},mi={},xl={},B3;function p7(){if(B3)return xl;B3=1,Object.defineProperty(xl,"__esModule",{value:!0}),xl.ActorOptimizeQueryOperation=void 0;const i=ae();let r=class extends i.Actor{constructor(n){super(n)}};return xl.ActorOptimizeQueryOperation=r,xl}var C3;function gr(){return C3||(C3=1,(function(i){var r=mi&&mi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=mi&&mi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(p7(),i)})(mi)),mi}var Q3;function h7(){if(Q3)return Ll;Q3=1,Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.ActorOptimizeQueryOperationRewriteCopy=void 0;const i=gr(),r=pe(),o=ae(),n=Ie();let t=class extends i.ActorOptimizeQueryOperation{constructor(a){super(a)}async test(a){return(0,o.passTestVoid)()}async run(a){const u=a.context.getSafe(r.KeysInitQuery.dataFactory),c=new n.Factory(u);return{operation:n.Util.mapOperation(a.operation,{[n.Algebra.types.COPY](l,d){let f;return typeof l.destination=="string"&&typeof l.source=="string"&&l.destination===l.source||typeof l.destination!="string"&&typeof l.source!="string"&&l.destination.equals(l.source)?f=d.createCompositeUpdate([]):f=d.createCompositeUpdate([d.createDrop(l.destination,!0),d.createAdd(l.source,l.destination,l.silent)]),{result:f,recurse:!1}}},c),context:a.context}}};return Ll.ActorOptimizeQueryOperationRewriteCopy=t,Ll}var U3;function y7(){return U3||(U3=1,(function(i){var r=_i&&_i.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=_i&&_i.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(h7(),i)})(_i)),_i}var gi={},Bl={},V3;function _7(){if(V3)return Bl;V3=1,Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.ActorOptimizeQueryOperationRewriteMove=void 0;const i=gr(),r=pe(),o=ae(),n=Ie();let t=class extends i.ActorOptimizeQueryOperation{constructor(a){super(a)}async test(a){return(0,o.passTestVoid)()}async run(a){const u=a.context.getSafe(r.KeysInitQuery.dataFactory),c=new n.Factory(u);return{operation:n.Util.mapOperation(a.operation,{[n.Algebra.types.MOVE](l,d){let f;if(typeof l.destination=="string"&&typeof l.source=="string"&&l.destination===l.source||typeof l.destination!="string"&&typeof l.source!="string"&&l.destination.equals(l.source))f=d.createCompositeUpdate([]);else{const h=[d.createDrop(l.destination,!0),d.createAdd(l.source,l.destination,l.silent),d.createDrop(l.source)];f=d.createCompositeUpdate(h)}return{result:f,recurse:!1}}},c),context:a.context}}};return Bl.ActorOptimizeQueryOperationRewriteMove=t,Bl}var G3;function m7(){return G3||(G3=1,(function(i){var r=gi&&gi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=gi&&gi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(_7(),i)})(gi)),gi}var bi={},Cl={},vi={},Ql={},X3;function mI(){if(X3)return Ql;X3=1,Object.defineProperty(Ql,"__esModule",{value:!0}),Ql.BlankNode=void 0;class i{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return Ql.BlankNode=i,Ql}var Ul={},Vl={},z3;function gI(){if(z3)return Vl;z3=1,Object.defineProperty(Vl,"__esModule",{value:!0}),Vl.DefaultGraph=void 0;class i{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return Vl.DefaultGraph=i,i.INSTANCE=new i,Vl}var Gl={},Xl={},H3;function z0(){if(H3)return Xl;H3=1,Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.NamedNode=void 0;class i{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return Xl.NamedNode=i,Xl}var $3;function bI(){if($3)return Gl;$3=1,Object.defineProperty(Gl,"__esModule",{value:!0}),Gl.Literal=void 0;const i=z0();class r{constructor(n,t){this.termType="Literal",this.value=n,typeof t=="string"?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return Gl.Literal=r,r.RDF_LANGUAGE_STRING=new i.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new i.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Gl}var zl={},J3;function vI(){if(J3)return zl;J3=1,Object.defineProperty(zl,"__esModule",{value:!0}),zl.Quad=void 0;class i{constructor(o,n,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=n,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return zl.Quad=i,zl}var Hl={},K3;function TI(){if(K3)return Hl;K3=1,Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.Variable=void 0;class i{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return Hl.Variable=i,Hl}var Y3;function g7(){if(Y3)return Ul;Y3=1,Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.DataFactory=void 0;const i=mI(),r=gI(),o=bI(),n=z0(),t=vI(),e=TI();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new i.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return r.DefaultGraph.INSTANCE}quad(s,l,d,f){return new t.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Ul.DataFactory=u,Ul}var W3;function b7(){return W3||(W3=1,(function(i){var r=vi&&vi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=vi&&vi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(mI(),i),o(g7(),i),o(gI(),i),o(bI(),i),o(z0(),i),o(vI(),i),o(TI(),i)})(vi)),vi}var Z3;function v7(){if(Z3)return Cl;Z3=1,Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.ActorOptimizeQueryOperationRewriteAdd=void 0;const i=gr(),r=pe(),o=ae(),n=b7(),t=Ie(),e=new n.DataFactory;let a=class extends i.ActorOptimizeQueryOperation{constructor(c){super(c)}async test(c){return(0,o.passTestVoid)()}async run(c){const s=c.context.getSafe(r.KeysInitQuery.dataFactory),l=new t.Factory(s);return{operation:t.Util.mapOperation(c.operation,{[t.Algebra.types.ADD](f,h){const p=f.destination==="DEFAULT"?e.defaultGraph():f.destination,y=f.source==="DEFAULT"?e.defaultGraph():f.source;return{result:h.createDeleteInsert(void 0,[h.createPattern(e.variable("s"),e.variable("p"),e.variable("o"),p)],h.createPattern(e.variable("s"),e.variable("p"),e.variable("o"),y)),recurse:!1}}},l),context:c.context}}};return Cl.ActorOptimizeQueryOperationRewriteAdd=a,Cl}var k3;function T7(){return k3||(k3=1,(function(i){var r=bi&&bi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=bi&&bi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(v7(),i)})(bi)),bi}var Ti={},$l={},Oi={},Zt={},Si={},Jl={},eS;function OI(){if(eS)return Jl;eS=1,Object.defineProperty(Jl,"__esModule",{value:!0}),Jl.BlankNode=void 0;class i{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return Jl.BlankNode=i,Jl}var Kl={},Yl={},tS;function SI(){if(tS)return Yl;tS=1,Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.DefaultGraph=void 0;class i{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return Yl.DefaultGraph=i,i.INSTANCE=new i,Yl}var Wl={},Zl={},rS;function H0(){if(rS)return Zl;rS=1,Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.NamedNode=void 0;class i{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return Zl.NamedNode=i,Zl}var nS;function FI(){if(nS)return Wl;nS=1,Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.Literal=void 0;const i=H0();class r{constructor(n,t){this.termType="Literal",this.value=n,typeof t=="string"?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return Wl.Literal=r,r.RDF_LANGUAGE_STRING=new i.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new i.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Wl}var kl={},iS;function AI(){if(iS)return kl;iS=1,Object.defineProperty(kl,"__esModule",{value:!0}),kl.Quad=void 0;class i{constructor(o,n,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=n,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return kl.Quad=i,kl}var ed={},aS;function wI(){if(aS)return ed;aS=1,Object.defineProperty(ed,"__esModule",{value:!0}),ed.Variable=void 0;class i{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return ed.Variable=i,ed}var oS;function O7(){if(oS)return Kl;oS=1,Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.DataFactory=void 0;const i=OI(),r=SI(),o=FI(),n=H0(),t=AI(),e=wI();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new i.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return r.DefaultGraph.INSTANCE}quad(s,l,d,f){return new t.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Kl.DataFactory=u,Kl}var uS;function S7(){return uS||(uS=1,(function(i){var r=Si&&Si.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Si&&Si.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(OI(),i),o(O7(),i),o(SI(),i),o(FI(),i),o(H0(),i),o(AI(),i),o(wI(),i)})(Si)),Si}var sS;function F7(){if(sS)return Zt;sS=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.estimateNpsCardinality=Zt.estimateJoinCardinality=Zt.estimateUnionCardinality=Zt.estimateSliceCardinality=Zt.estimateMinusCardinality=Zt.estimateCardinality=void 0;const i=S7(),r=Ie(),o=new i.DataFactory,n=new r.Factory(o);function t(l,d){const f=d.getCardinality(l);if(f)return f;switch(l.type){case r.Algebra.types.ASK:return{type:"exact",value:1,dataset:d.uri};case r.Algebra.types.LOAD:case r.Algebra.types.DELETE_INSERT:case r.Algebra.types.ADD:case r.Algebra.types.COMPOSITE_UPDATE:case r.Algebra.types.CLEAR:case r.Algebra.types.NOP:case r.Algebra.types.DROP:case r.Algebra.types.CREATE:case r.Algebra.types.MOVE:case r.Algebra.types.COPY:return{type:"exact",value:0,dataset:d.uri};case r.Algebra.types.PROJECT:case r.Algebra.types.FILTER:case r.Algebra.types.ORDER_BY:case r.Algebra.types.GROUP:case r.Algebra.types.CONSTRUCT:case r.Algebra.types.DISTINCT:case r.Algebra.types.REDUCED:case r.Algebra.types.EXTEND:case r.Algebra.types.FROM:case r.Algebra.types.GRAPH:return t(l.input,d);case r.Algebra.types.ZERO_OR_ONE_PATH:case r.Algebra.types.ZERO_OR_MORE_PATH:case r.Algebra.types.ONE_OR_MORE_PATH:case r.Algebra.types.INV:return t(l.path,d);case r.Algebra.types.PATH:return t(l.predicate,d);case r.Algebra.types.NPS:return s(l,d);case r.Algebra.types.LINK:return t(n.createPattern(o.variable("s"),l.iri,o.variable("o")),d);case r.Algebra.types.UNION:case r.Algebra.types.SEQ:case r.Algebra.types.ALT:return u(l.input,d);case r.Algebra.types.BGP:return c(l.patterns,d);case r.Algebra.types.JOIN:case r.Algebra.types.LEFT_JOIN:return c(l.input,d);case r.Algebra.types.SLICE:return a(l,d);case r.Algebra.types.MINUS:return e(l,d);case r.Algebra.types.VALUES:return{type:"exact",value:l.bindings.length,dataset:d.uri};case r.Algebra.types.SERVICE:case r.Algebra.types.DESCRIBE:case r.Algebra.types.EXPRESSION:case r.Algebra.types.PATTERN:return{type:"estimate",value:Number.POSITIVE_INFINITY,dataset:d.uri}}}Zt.estimateCardinality=t;function e(l,d){const f=t(l.input[0],d),h=t(l.input[1],d);return{type:"estimate",value:Math.max(f.value-h.value,0),dataset:d.uri}}Zt.estimateMinusCardinality=e;function a(l,d){const f=t(l.input,d);return f.value>0&&(f.value=Math.max(f.value-l.start,0),l.length!==void 0&&(f.value=Math.min(f.value,l.length))),f}Zt.estimateSliceCardinality=a;function u(l,d){const f={type:"exact",value:0,dataset:d.uri};for(const h of l){const p=t(h,d);p.type==="estimate"&&f.type==="exact"&&(f.type=p.type),f.value+=p.value}return f}Zt.estimateUnionCardinality=u;function c(l,d){const f=[];for(const p of l){const y=r.Util.inScopeVariables(p).map(m=>m.value),_=f.find(m=>y.some(O=>m.vars.has(O)));if(_){_.ops.push(p);for(const m of y)_.vars.add(m)}else f.push({ops:[p],vars:new Set(y)})}return{type:"estimate",value:f.map(p=>Math.min(...p.ops.map(y=>t(y,d).value))).reduce((p,y)=>p*y,1),dataset:d.uri}}Zt.estimateJoinCardinality=c;function s(l,d){const f=n.createSeq([...l.iris].reverse().map(_=>n.createLink(_))),h=t(f,d),p=n.createPattern(o.variable("s"),o.variable("p"),o.variable("o")),y=t(p,d);return{type:"estimate",value:Math.max(0,y.value-h.value),dataset:d.uri}}return Zt.estimateNpsCardinality=s,Zt}var td={},cS;function A7(){if(cS)return td;cS=1,Object.defineProperty(td,"__esModule",{value:!0}),td.getExpressionVariables=void 0;const i=vn(),r=Ie();function o(n){switch(n.expressionType){case r.Algebra.expressionTypes.AGGREGATE:case r.Algebra.expressionTypes.WILDCARD:throw new Error(`Getting expression variables is not supported for ${n.expressionType}`);case r.Algebra.expressionTypes.EXISTENCE:return r.Util.inScopeVariables(n.input);case r.Algebra.expressionTypes.NAMED:return[];case r.Algebra.expressionTypes.OPERATOR:return(0,i.uniqTerms)(n.args.flatMap(t=>o(t)));case r.Algebra.expressionTypes.TERM:return n.term.termType==="Variable"?[n.term]:[]}}return td.getExpressionVariables=o,td}var rd={},lS;function w7(){if(lS)return rd;lS=1,Object.defineProperty(rd,"__esModule",{value:!0}),rd.doesShapeAcceptOperation=void 0;const i=Ie();function r(u,c,s){return o(u,u,c,s)}rd.doesShapeAcceptOperation=r;function o(u,c,s,l){if(c.type==="conjunction")return c.children.every(f=>o(u,f,s,l));if(c.type==="disjunction")return c.children.some(f=>o(u,f,s,l));if(c.type==="negation")return!o(c.child,c.child,s,l);if(c.type==="arity")return o(u,c.child,s,l);if((l?.joinBindings&&!c.joinBindings)??(l?.filterBindings&&!c.filterBindings))return!1;const d=c.operation;switch(d.operationType){case"type":return d.type===i.Algebra.types.EXPRESSION&&a(s)&&!("extensionFunctions"in d&&d.extensionFunctions?.includes(s.name.value))||!n(u,c.children,s,l)&&!t(u,s,l)?!1:d.type===s.type;case"pattern":return!n(u,c.children,s,l)&&!t(u,s,l)?!1:d.pattern.type===s.type;case"wildcard":{if(l?.wildcardAcceptAllExtensionFunctions)return!0;if(a(s))return!1;let f=!1;return i.Util.recurseOperation(s,{[i.Algebra.types.EXPRESSION](h){return a(h)&&!r(u,h,l)?(f=!0,!1):!0}}),!f}}}function n(u,c,s,l){if(a(s)||a(s.expression))return!1;if(c){const d=s.input?Array.isArray(s.input)?s.input:[s.input]:s.patterns??[];for(const[f,h]of c.entries())if(!d[f]||!o(u,h,d[f],l))return!1;return!0}return!1}function t(u,c,s){return c.input&&!(Array.isArray(c.input)?c.input:[c.input]).every(d=>o(u,u,d,s))||c.expression&&a(c.expression)&&!o(u,u,c.expression,s)?!1:!(c.patterns&&!c.patterns.every(l=>o(u,u,l,s)))}function e(u){return/^https?:\/\/www\.w3\.org\//u.test(u)}function a(u){return u&&u.type===i.Algebra.types.EXPRESSION&&u.expressionType===i.Algebra.expressionTypes.NAMED&&!e(u.name.value)}return rd}var vt={},dS;function E7(){if(dS)return vt;dS=1,Object.defineProperty(vt,"__esModule",{value:!0}),vt.removeOperationSource=vt.assignOperationSource=vt.getOperationSource=vt.testReadOnly=vt.validateQueryOutput=vt.getSafeVoid=vt.getSafeBoolean=vt.getSafeQuads=vt.getSafeBindings=void 0;const i=pe(),r=ae();function o(d){return a(d,"bindings"),d}vt.getSafeBindings=o;function n(d){return a(d,"quads"),d}vt.getSafeQuads=n;function t(d){return a(d,"boolean"),d}vt.getSafeBoolean=t;function e(d){return a(d,"void"),d}vt.getSafeVoid=e;function a(d,f){if(d.type!==f)throw new Error(`Invalid query output type: Expected '${f}' but got '${d.type}'`)}vt.validateQueryOutput=a;function u(d){return d.get(i.KeysQueryOperation.readOnly)?(0,r.failTest)("Attempted a write operation in read-only mode"):(0,r.passTestVoid)()}vt.testReadOnly=u;function c(d){return d.metadata?.scopedSource}vt.getOperationSource=c;function s(d,f){return d={...d},d.metadata=d.metadata?{...d.metadata}:{},d.metadata.scopedSource=f,d}vt.assignOperationSource=s;function l(d){delete d.metadata?.scopedSource,d.metadata&&Object.keys(d.metadata).length===0&&delete d.metadata}return vt.removeOperationSource=l,vt}var Fi={},fS;function j7(){if(fS)return Fi;fS=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.materializeOperation=Fi.materializeTerm=void 0;const i=sr(),r=vn(),o=Ie();function n(a,u){if(a.termType==="Variable"){const c=u.get(a);if(c)return c}return a.termType==="Quad"&&(0,r.someTermsNested)(a,c=>c.termType==="Variable")?(0,r.mapTermsNested)(a,c=>n(c,u)):a}Fi.materializeTerm=n;function t(a,u,c,s,l={}){return l={strictTargetVariables:"strictTargetVariables"in l?l.strictTargetVariables:!1,bindFilter:"bindFilter"in l?l.bindFilter:!0,originalBindings:"originalBindings"in l?l.originalBindings:u},o.Util.mapOperation(a,{path(d,f){return{recurse:!1,result:Object.assign(f.createPath(n(d.subject,u),d.predicate,n(d.object,u),n(d.graph,u)),{metadata:d.metadata})}},pattern(d,f){return{recurse:!1,result:Object.assign(f.createPattern(n(d.subject,u),n(d.predicate,u),n(d.object,u),n(d.graph,u)),{metadata:d.metadata})}},join(d,f){return{recurse:!1,result:f.createJoin(d.input.map(h=>t(h,u,c,s,l)),d.input.every(h=>!h.metadata))}},extend(d){if(u.has(d.variable)){if(l.strictTargetVariables)throw new Error(`Tried to bind variable ${(0,i.termToString)(d.variable)} in a BIND operator.`);return{recurse:!0,result:t(d.input,u,c,s,l)}}return{recurse:!0,result:d}},group(d,f){if(l.strictTargetVariables){for(const p of d.variables)if(u.has(p))throw new Error(`Tried to bind variable ${(0,i.termToString)(p)} in a GROUP BY operator.`);return{recurse:!0,result:d}}const h=d.variables.filter(p=>!u.has(p));return{recurse:!0,result:f.createGroup(d.input,h,d.aggregates)}},filter(d,f){const h=l.originalBindings;if(d.expression.expressionType!=="operator"||h.size===0)return{recurse:!1,result:d};const p=e(f,h),y=t(d.expression,u,c,s,l),_=f.createJoin([...p,t(d.input,u,c,s,l)]);return{recurse:!1,result:f.createFilter(_,y)}},project(d,f){const h=e(f,l.originalBindings,d.variables);let p=t(d.input,u,c,s,l);return h.length>0&&(p=f.createJoin([...h,p])),{recurse:!1,result:f.createProject(p,d.variables)}},values(d,f){if(l.strictTargetVariables){for(const h of d.variables)if(u.has(h))throw new Error(`Tried to bind variable ${(0,i.termToString)(h)} in a VALUES operator.`)}else{const h=d.variables.filter(y=>!u.has(y)),p=d.bindings.map(y=>{const _={...y};let m=!0;return u.forEach((O,v)=>{const S=(0,i.termToString)(v);S in _&&(O.equals(_[S])||(m=!1),delete _[S])}),m?_:void 0}).filter(Boolean);return{recurse:!0,result:f.createValues(h,p)}}return{recurse:!1,result:d}},expression(d,f){if(!l.bindFilter)return{recurse:!1,result:d};if(d.expressionType==="term")return{recurse:!1,result:f.createTermExpression(n(d.term,u))};if(d.expressionType==="operator")return d.operator==="bound"&&d.args.length===1&&d.args[0].expressionType==="term"&&[...u.keys()].some(h=>d.args[0].term.equals(h))?{recurse:!1,result:f.createTermExpression(f.dataFactory.literal("true",f.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#boolean")))}:{recurse:!0,result:d};if(d.expressionType==="aggregate"&&"variable"in d&&u.has(d.variable)){if(l.strictTargetVariables)throw new Error(`Tried to bind ${(0,i.termToString)(d.variable)} in a ${d.aggregator} aggregate.`);return{recurse:!0,result:d}}return{recurse:!0,result:d}}},c)}Fi.materializeOperation=t;function e(a,u,c){const s=[];for(const[l,d]of u)if(!c||c.some(f=>f.equals(l))){const f={[(0,i.termToString)(l)]:d};s.push(a.createValues([l],[f]))}return s}return Fi}var pS;function Ue(){return pS||(pS=1,(function(i){var r=Oi&&Oi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Oi&&Oi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(F7(),i),o(A7(),i),o(w7(),i),o(E7(),i),o(j7(),i)})(Oi)),Oi}var hS;function R7(){if(hS)return $l;hS=1,Object.defineProperty($l,"__esModule",{value:!0}),$l.ActorOptimizeQueryOperationGroupSources=void 0;const i=gr(),r=pe(),o=ae(),n=Ue(),t=Ie();let e=class extends i.ActorOptimizeQueryOperation{constructor(u){super(u)}async test(u){return(0,n.getOperationSource)(u.operation)?(0,o.failTest)(`Actor ${this.name} does not work with top-level operation sources.`):(0,o.passTestVoid)()}async run(u){return{operation:await this.groupOperation(u.operation,u.context),context:u.context}}async groupOperation(u,c){const s=c.getSafe(r.KeysInitQuery.dataFactory),l=new t.Factory(s);if((0,n.getOperationSource)(u)??!("input"in u))return u;if(!Array.isArray(u.input)){const p=await this.groupOperation(u.input,c);if(p.metadata?.scopedSource){const y=(0,n.getOperationSource)(p);u=await this.moveSourceAnnotationUpwardsIfPossible(u,[p],y,c)}return{...u,input:p}}const d=await Promise.all(u.input.map(p=>this.groupOperation(p,c))),f=this.clusterOperationsWithEqualSources(d);if(f.length===1){const p=f[0],y=(0,n.getOperationSource)(f[0][0]);return{...await this.moveSourceAnnotationUpwardsIfPossible(u,p,y,c),input:p}}if(f.length===d.length)return{...u,input:d};let h;switch(u.type){case t.Algebra.types.JOIN:h=l.createJoin.bind(l);break;case t.Algebra.types.UNION:h=l.createUnion.bind(l);break;case t.Algebra.types.ALT:h=l.createAlt.bind(l);break;case t.Algebra.types.SEQ:h=l.createSeq.bind(l);break;default:throw new Error(`Unsupported operation '${u.type}' detected while grouping sources`)}return await this.groupOperationMulti(f,h,c)}async groupOperationMulti(u,c,s){let l=!0;const d=await Promise.all(u.map(async f=>{const h=(0,n.getOperationSource)(f[0]),p=await this.moveSourceAnnotationUpwardsIfPossible(c(f,!0),f,h,s);return(0,n.getOperationSource)(p)&&(l=!1),p}));return c(d,l)}clusterOperationsWithEqualSources(u){const c=new Map,s=[];for(const d of u){const f=(0,n.getOperationSource)(d);f?(c.has(f)||c.set(f,[]),c.get(f).push(d)):s.push(d)}const l=[];s.length>0&&l.push(s);for(const[d,f]of c.entries())l.push(f.map(h=>(0,n.assignOperationSource)(h,d)));return l}async moveSourceAnnotationUpwardsIfPossible(u,c,s,l){if(s&&this.isPossibleToMoveSourceAnnotationUpwards(u,await s.source.getSelectorShape(l),l)){this.logDebug(l,`Hoist ${c.length} source-specific operations into a single ${u.type} operation for ${s.source.toString()}`),u=(0,n.assignOperationSource)(u,s);for(const d of c)(0,n.removeOperationSource)(d)}return u}isPossibleToMoveSourceAnnotationUpwards(u,c,s){const l=s.get(r.KeysInitQuery.extensionFunctionsAlwaysPushdown);if((0,n.doesShapeAcceptOperation)(c,u,{wildcardAcceptAllExtensionFunctions:l})){const d=s.get(r.KeysInitQuery.extensionFunctions),f=u.expression;return!d||f?.expressionType!==t.Algebra.expressionTypes.NAMED||!(f?.name.value in d)||(0,n.doesShapeAcceptOperation)(c,f,{wildcardAcceptAllExtensionFunctions:l})}return!1}};return $l.ActorOptimizeQueryOperationGroupSources=e,$l}var yS;function D7(){return yS||(yS=1,(function(i){var r=Ti&&Ti.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ti&&Ti.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(R7(),i)})(Ti)),Ti}var Ai={},nd={},_S;function P7(){if(_S)return nd;_S=1,Object.defineProperty(nd,"__esModule",{value:!0}),nd.ActorOptimizeQueryOperationConstructDistinct=void 0;const i=gr(),r=RN(),o=ae(),n=Ie();let t=class extends i.ActorOptimizeQueryOperation{constructor(a){super(a)}async test(a){return a.context.has(r.KeysInitQuery.distinctConstruct)?(0,o.passTestVoid)():(0,o.failTest)(`${this.name} was not enabled by the query.`)}async run(a){return{operation:n.Util.mapOperation(a.operation,{construct(c,s){return{recurse:!1,result:s.createDistinct(s.createConstruct(c.input,c.template))}}}),context:a.context.delete(r.KeysInitQuery.distinctConstruct)}}};return nd.ActorOptimizeQueryOperationConstructDistinct=t,nd}var mS;function M7(){return mS||(mS=1,(function(i){var r=Ai&&Ai.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ai&&Ai.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(P7(),i)})(Ai)),Ai}var wi={},id={},Ei={},ad={},gS;function N7(){if(gS)return ad;gS=1,Object.defineProperty(ad,"__esModule",{value:!0}),ad.ActorRdfJoinEntriesSort=void 0;const i=ae();let r=class extends i.Actor{constructor(n){super(n)}};return ad.ActorRdfJoinEntriesSort=r,ad}var bS;function I7(){return bS||(bS=1,(function(i){var r=Ei&&Ei.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ei&&Ei.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(N7(),i)})(Ei)),Ei}var vS;function q7(){if(vS)return id;vS=1,Object.defineProperty(id,"__esModule",{value:!0}),id.ActorRdfJoinEntriesSortCardinality=void 0;const i=I7(),r=ae();let o=class extends i.ActorRdfJoinEntriesSort{constructor(t){super(t)}async test(t){return(0,r.passTest)({accuracy:t.entries.length===0?1:t.entries.reduce((e,a)=>e+(Number.isFinite(a.metadata.cardinality.value)?1:0),0)/t.entries.length})}async run(t){return{entries:[...t.entries].sort((a,u)=>a.metadata.cardinality.value-u.metadata.cardinality.value)}}};return id.ActorRdfJoinEntriesSortCardinality=o,id}var TS;function L7(){return TS||(TS=1,(function(i){var r=wi&&wi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=wi&&wi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(q7(),i)})(wi)),wi}var ji={},od={},OS;function x7(){if(OS)return od;OS=1,Object.defineProperty(od,"__esModule",{value:!0}),od.MediatorNumber=void 0;const i=ae();let r=class extends i.Mediator{constructor(n){super(n),this.indexPicker=this.createIndexPicker()}createIndexPicker(){switch(this.type){case"min":return n=>n.reduce((t,e,a)=>{const u=this.getOrDefault(e[this.field],Number.POSITIVE_INFINITY);return u!==null&&(Number.isNaN(t[0])||t[0]>u)?[u,a]:t},[Number.NaN,-1])[1];case"max":return n=>n.reduce((t,e,a)=>{const u=this.getOrDefault(e[this.field],Number.NEGATIVE_INFINITY);return u!==null&&(Number.isNaN(t[0])||t[0]<u)?[u,a]:t},[Number.NaN,-1])[1];default:throw new Error(`No valid "type" value was given, must be either 'min' or 'max', but got: ${this.type}`)}}getOrDefault(n,t){return n===void 0?t:n}async mediateWith(n,t){let e=await Promise.all(t.map(({reply:l})=>l));const a=[];if(this.ignoreFailures){const l={};l[this.field]=null,e=e.map(d=>d.isFailed()?(a.push(d.getFailMessage()),(0,i.passTestWithSideData)(l,void 0)):d)}const u=[],c=e.map((l,d)=>{const f=l.getOrThrow();return u[d]=l.getSideData(),f}),s=this.indexPicker(c);return s<0?(0,i.failTest)(this.constructFailureMessage(n,a)):(0,i.passTestWithSideData)(t[s].actor,u[s])}};return od.MediatorNumber=r,od}var SS;function n1(){return SS||(SS=1,(function(i){var r=ji&&ji.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ji&&ji.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(x7(),i)})(ji)),ji}var Ri={},Di={},Pi={},ud={},FS;function B7(){if(FS)return ud;FS=1,Object.defineProperty(ud,"__esModule",{value:!0}),ud.ActorRdfJoinSelectivity=void 0;const i=ae();let r=class extends i.Actor{constructor(n){super(n)}};return ud.ActorRdfJoinSelectivity=r,ud}var AS;function C7(){return AS||(AS=1,(function(i){var r=Pi&&Pi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Pi&&Pi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(B7(),i)})(Pi)),Pi}var wS;function Q7(){if(wS)return Di;wS=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.JoinTypes=Di.ActorRdfJoinSelectivityVariableCounting=void 0;const i=C7(),r=ae(),o=Ie();let n=class Zu extends i.ActorRdfJoinSelectivity{constructor(a){super(a)}async test(a){return(0,r.passTest)({accuracy:.5})}static getPatternCost(a){let u=1;return a.subject.termType==="Variable"&&(u+=4),(a.predicate.termType==="Variable"||a.type===o.Algebra.types.PATH)&&(u+=1),a.object.termType==="Variable"&&(u+=2),a.graph.termType==="Variable"&&(u+=1),u/9}static getJoinTypes(a,u){const c=[];return a.subject.termType==="Variable"?(a.subject.equals(u.subject)&&c.push(t.unboundSS),u.type==="pattern"&&a.subject.equals(u.predicate)&&c.push(t.unboundSP),a.subject.equals(u.object)&&c.push(t.unboundSO),a.subject.equals(u.graph)&&c.push(t.unboundSG)):(a.subject.equals(u.subject)&&c.push(t.boundSS),u.type==="pattern"&&a.subject.equals(u.predicate)&&c.push(t.boundSP),a.subject.equals(u.object)&&c.push(t.boundSO),a.subject.equals(u.graph)&&c.push(t.boundSG)),a.type==="pattern"&&(a.predicate.termType==="Variable"?(a.predicate.equals(u.subject)&&c.push(t.unboundPS),u.type==="pattern"&&a.predicate.equals(u.predicate)&&c.push(t.unboundPP),a.predicate.equals(u.object)&&c.push(t.unboundPO),a.predicate.equals(u.graph)&&c.push(t.unboundPG)):(a.predicate.equals(u.subject)&&c.push(t.boundPS),u.type==="pattern"&&a.predicate.equals(u.predicate)&&c.push(t.boundPP),a.predicate.equals(u.object)&&c.push(t.boundPO),a.predicate.equals(u.graph)&&c.push(t.boundPG))),a.object.termType==="Variable"?(a.object.equals(u.subject)&&c.push(t.unboundOS),u.type==="pattern"&&a.object.equals(u.predicate)&&c.push(t.unboundOP),a.object.equals(u.object)&&c.push(t.unboundOO),a.object.equals(u.graph)&&c.push(t.unboundOG)):(a.object.equals(u.subject)&&c.push(t.boundOS),u.type==="pattern"&&a.object.equals(u.predicate)&&c.push(t.boundOP),a.object.equals(u.object)&&c.push(t.boundOO),a.object.equals(u.graph)&&c.push(t.boundOG)),a.graph.termType==="Variable"?(a.graph.equals(u.subject)&&c.push(t.unboundGS),u.type==="pattern"&&a.graph.equals(u.predicate)&&c.push(t.unboundGP),a.graph.equals(u.object)&&c.push(t.unboundGO),a.graph.equals(u.graph)&&c.push(t.unboundGG)):(a.graph.equals(u.subject)&&c.push(t.boundGS),u.type==="pattern"&&a.graph.equals(u.predicate)&&c.push(t.boundGP),a.graph.equals(u.object)&&c.push(t.boundGO),a.graph.equals(u.graph)&&c.push(t.boundGG)),c}static getOperationsPairwiseJoinCost(a,u){let c=Zu.MAX_PAIRWISE_COST;for(const s of Zu.getJoinTypes(a,u))switch(s){case t.boundSS:c-=4;break;case t.boundSP:c-=6;break;case t.boundSO:c-=2;break;case t.boundSG:c-=6;break;case t.boundPS:c-=6;break;case t.boundPP:return 1;case t.boundPO:c-=6;break;case t.boundPG:c-=6;break;case t.boundOS:c-=2;break;case t.boundOP:c-=6;break;case t.boundOO:c-=2;break;case t.boundOG:c-=6;break;case t.boundGS:c-=6;break;case t.boundGP:c-=6;break;case t.boundGO:c-=6;break;case t.boundGG:c-=6;break;case t.unboundSS:c-=2;break;case t.unboundSP:c-=3;break;case t.unboundSO:c-=1;break;case t.unboundSG:c-=3;break;case t.unboundPS:c-=3;break;case t.unboundPP:c-=3;break;case t.unboundPO:c-=3;break;case t.unboundPG:c-=3;break;case t.unboundOS:c-=1;break;case t.unboundOP:c-=3;break;case t.unboundOO:c-=1;break;case t.unboundOG:c-=3;break;case t.unboundGS:c-=3;break;case t.unboundGP:c-=3;break;case t.unboundGO:c-=3;break;case t.unboundGG:c-=3;break}return c/Zu.MAX_PAIRWISE_COST}static getOperationsJoinCost(a){const u=[];for(const l of a)o.Util.recurseOperation(l,{[o.Algebra.types.PATTERN](d){return u.push(d),!1},[o.Algebra.types.PATH](d){return u.push(d),!1}});let c=0,s=0;for(const l of u)for(const d of u)l!==d&&(c+=Zu.getOperationsPairwiseJoinCost(l,d),s++);return s===0?1:c/s*u.reduce((l,d)=>l*Zu.getPatternCost(d),1)}async run(a){return a.entries.length<=1?{selectivity:1}:{selectivity:Zu.getOperationsJoinCost(a.entries.map(u=>u.operation))}}};Di.ActorRdfJoinSelectivityVariableCounting=n,n.MAX_PAIRWISE_COST=82;var t;return(function(e){e[e.boundSS=0]="boundSS",e[e.boundSP=1]="boundSP",e[e.boundSO=2]="boundSO",e[e.boundSG=3]="boundSG",e[e.boundPS=4]="boundPS",e[e.boundPP=5]="boundPP",e[e.boundPO=6]="boundPO",e[e.boundPG=7]="boundPG",e[e.boundOS=8]="boundOS",e[e.boundOP=9]="boundOP",e[e.boundOO=10]="boundOO",e[e.boundOG=11]="boundOG",e[e.boundGS=12]="boundGS",e[e.boundGP=13]="boundGP",e[e.boundGO=14]="boundGO",e[e.boundGG=15]="boundGG",e[e.unboundSS=16]="unboundSS",e[e.unboundSP=17]="unboundSP",e[e.unboundSO=18]="unboundSO",e[e.unboundSG=19]="unboundSG",e[e.unboundPS=20]="unboundPS",e[e.unboundPP=21]="unboundPP",e[e.unboundPO=22]="unboundPO",e[e.unboundPG=23]="unboundPG",e[e.unboundOS=24]="unboundOS",e[e.unboundOP=25]="unboundOP",e[e.unboundOO=26]="unboundOO",e[e.unboundOG=27]="unboundOG",e[e.unboundGS=28]="unboundGS",e[e.unboundGP=29]="unboundGP",e[e.unboundGO=30]="unboundGO",e[e.unboundGG=31]="unboundGG"})(t||(Di.JoinTypes=t={})),Di}var ES;function U7(){return ES||(ES=1,(function(i){var r=Ri&&Ri.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ri&&Ri.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Q7(),i)})(Ri)),Ri}var Mi={},sd={},Ni={},cd={},jS;function V7(){if(jS)return cd;jS=1,Object.defineProperty(cd,"__esModule",{value:!0}),cd.ActorRdfMetadataAccumulate=void 0;const i=ae();let r=class extends i.Actor{constructor(n){super(n)}};return cd.ActorRdfMetadataAccumulate=r,cd}var RS;function $0(){return RS||(RS=1,(function(i){var r=Ni&&Ni.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ni&&Ni.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(V7(),i)})(Ni)),Ni}var DS;function G7(){if(DS)return sd;DS=1,Object.defineProperty(sd,"__esModule",{value:!0}),sd.ActorRdfMetadataAccumulateCardinality=void 0;const i=$0(),r=ae();let o=class extends i.ActorRdfMetadataAccumulate{constructor(t){super(t)}async test(t){return(0,r.passTestVoid)()}async run(t){if(t.mode==="initialize")return{metadata:{cardinality:{type:"exact",value:0}}};const e={...t.accumulatedMetadata.cardinality};if(e.dataset){if(t.accumulatedMetadata.defaultGraph===e.dataset&&e.dataset!==t.appendingMetadata.cardinality.dataset)return{metadata:{cardinality:t.appendingMetadata.cardinality}};if(t.appendingMetadata.cardinality.dataset){if(e.dataset!==t.appendingMetadata.cardinality.dataset&&t.appendingMetadata.subsetOf===e.dataset)return{metadata:{cardinality:t.appendingMetadata.cardinality}};if(e.dataset===t.appendingMetadata.cardinality.dataset)return{metadata:{cardinality:e}};delete e.dataset}else return{metadata:{cardinality:e}}}return!t.appendingMetadata.cardinality||!Number.isFinite(t.appendingMetadata.cardinality.value)?(e.type="estimate",e.value=Number.POSITIVE_INFINITY):(t.appendingMetadata.cardinality.type==="estimate"&&(e.type="estimate"),e.value+=t.appendingMetadata.cardinality.value),{metadata:{cardinality:e}}}};return sd.ActorRdfMetadataAccumulateCardinality=o,sd}var PS;function X7(){return PS||(PS=1,(function(i){var r=Mi&&Mi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Mi&&Mi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(G7(),i)})(Mi)),Mi}var Ii={},ld={},MS;function z7(){if(MS)return ld;MS=1,Object.defineProperty(ld,"__esModule",{value:!0}),ld.ActorRdfMetadataAccumulatePageSize=void 0;const i=$0(),r=ae();let o=class extends i.ActorRdfMetadataAccumulate{constructor(t){super(t)}async test(t){return(0,r.passTestVoid)()}async run(t){return t.mode==="initialize"?{metadata:{}}:{metadata:{..."pageSize"in t.accumulatedMetadata||"pageSize"in t.appendingMetadata?{pageSize:(t.accumulatedMetadata.pageSize??0)+(t.appendingMetadata.pageSize??0)}:{}}}}};return ld.ActorRdfMetadataAccumulatePageSize=o,ld}var NS;function H7(){return NS||(NS=1,(function(i){var r=Ii&&Ii.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ii&&Ii.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(z7(),i)})(Ii)),Ii}var qi={},dd={},IS;function $7(){if(IS)return dd;IS=1,Object.defineProperty(dd,"__esModule",{value:!0}),dd.ActorRdfMetadataAccumulateRequestTime=void 0;const i=$0(),r=ae();let o=class extends i.ActorRdfMetadataAccumulate{constructor(t){super(t)}async test(t){return(0,r.passTestVoid)()}async run(t){return t.mode==="initialize"?{metadata:{}}:{metadata:{..."requestTime"in t.accumulatedMetadata||"requestTime"in t.appendingMetadata?{requestTime:(t.accumulatedMetadata.requestTime??0)+(t.appendingMetadata.requestTime??0)}:{}}}}};return dd.ActorRdfMetadataAccumulateRequestTime=o,dd}var qS;function J7(){return qS||(qS=1,(function(i){var r=qi&&qi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=qi&&qi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o($7(),i)})(qi)),qi}var Li={},fd={},LS;function K7(){if(LS)return fd;LS=1,Object.defineProperty(fd,"__esModule",{value:!0}),fd.MediatorCombineUnion=void 0;const i=ae();let r=class extends i.Mediator{constructor(n){super(n),this.combiner=this.createCombiner()}async mediate(n){let t;try{t=this.publish(n)}catch{t=[]}if(this.filterFailures){const u=[];for(const c of t)(await c.reply).isPassed()&&u.push(c);t=u}const e=[];await Promise.all(t.map(async({reply:u},c)=>{const s=await u,l=s.getOrThrow();return e[c]=s.getSideData(),l}));const a=await Promise.all(t.map((u,c)=>u.actor.runObservable(n,e[c])));return this.combiner(a)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return n=>{const t={};return t[this.field]={},[{}].concat(n.map(e=>e[this.field])).forEach(e=>{t[this.field]={...e,...t[this.field]}}),t}}};return fd.MediatorCombineUnion=r,fd}var xS;function $m(){return xS||(xS=1,(function(i){var r=Li&&Li.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Li&&Li.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(K7(),i)})(Li)),Li}var xi={},pd={},Bi={},hd={},BS;function EI(){if(BS)return hd;BS=1,Object.defineProperty(hd,"__esModule",{value:!0}),hd.ActorRdfUpdateQuads=void 0;const i=ae();let r=class extends i.Actor{constructor(n){super(n)}};return hd.ActorRdfUpdateQuads=r,hd}var nn={},CS;function Y7(){if(CS)return nn;CS=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.ActorRdfUpdateQuadsDestination=nn.deskolemize=nn.deskolemizeStream=void 0;const i=_I(),r=pe(),o=ae(),n=EI();function t(u,c,s){return c?.map(l=>(0,i.deskolemizeQuad)(u,l,s))}nn.deskolemizeStream=t;function e(u){const c=u.context.getSafe(r.KeysInitQuery.dataFactory),s=u.context.get(r.KeysRdfUpdateQuads.destination),l=u.context.get(r.KeysQuerySourceIdentify.sourceIds)?.get(s);return l?{...u,quadStreamInsert:t(c,u.quadStreamInsert,l),quadStreamDelete:t(c,u.quadStreamDelete,l)}:u}nn.deskolemize=e;let a=class extends n.ActorRdfUpdateQuads{async test(c){return(0,o.passTestVoid)()}async run(c){const s=await this.getDestination(c.context);return await this.getOutput(s,e(c))}async getOutput(c,s){return{execute:async()=>{await c.update({insert:s.quadStreamInsert,delete:s.quadStreamDelete}),await(s.deleteGraphs?c.deleteGraphs(s.deleteGraphs.graphs,s.deleteGraphs.requireExistence,s.deleteGraphs.dropGraphs):Promise.resolve()),await(s.createGraphs?c.createGraphs(s.createGraphs.graphs,s.createGraphs.requireNonExistence):Promise.resolve())}}}};return nn.ActorRdfUpdateQuadsDestination=a,nn}var i1={},QS;function W7(){return QS||(QS=1,Object.defineProperty(i1,"__esModule",{value:!0})),i1}var kt={},US;function Z7(){if(US)return kt;US=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.getContextDestinationUrl=kt.getContextDestination=kt.getDataDestinationContext=kt.getDataDestinationValue=kt.getDataDestinationType=kt.isDataDestinationRawType=void 0;const i=pe();function r(u){return typeof u=="string"||"remove"in u}kt.isDataDestinationRawType=r;function o(u){return typeof u=="string"?"":"remove"in u?"rdfjsStore":u.type}kt.getDataDestinationType=o;function n(u){return r(u)?u:u.value}kt.getDataDestinationValue=n;function t(u,c){return typeof u=="string"||"remove"in u||!u.context?c:c.merge(u.context)}kt.getDataDestinationContext=t;function e(u){return u.get(i.KeysRdfUpdateQuads.destination)}kt.getContextDestination=e;function a(u){if(u){let c=n(u);if(typeof c=="string"){const s=c.indexOf("#");return s>=0&&(c=c.slice(0,s)),c}}}return kt.getContextDestinationUrl=a,kt}var VS;function jI(){return VS||(VS=1,(function(i){var r=Bi&&Bi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Bi&&Bi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(EI(),i),o(Y7(),i),o(W7(),i),o(Z7(),i)})(Bi)),Bi}var yd={},_d={},GS;function k7(){if(GS)return _d;GS=1,Object.defineProperty(_d,"__esModule",{value:!0}),_d.promisifyEventEmitter=void 0;function i(r,o){return new Promise((n,t)=>{r.on("end",()=>n(o)),r.on("error",t)})}return _d.promisifyEventEmitter=i,_d}var XS;function e8(){if(XS)return yd;XS=1,Object.defineProperty(yd,"__esModule",{value:!0}),yd.RdfJsQuadDestination=void 0;const i=k7(),r=sr();let o=class{constructor(t,e){this.dataFactory=t,this.store=e}async update(t){t.delete&&await(0,i.promisifyEventEmitter)(this.store.remove(t.delete)),t.insert&&await(0,i.promisifyEventEmitter)(this.store.import(t.insert))}async deleteGraphs(t,e,a){switch(t){case"ALL":await(0,i.promisifyEventEmitter)(this.store.deleteGraph(this.dataFactory.defaultGraph()));case"NAMED":const u=this.store.match(),c={};u.on("data",s=>{s.graph.termType!=="DefaultGraph"&&(c[(0,r.termToString)(s.graph)]=!0)}),await(0,i.promisifyEventEmitter)(u),await Promise.all(Object.keys(c).map(s=>(0,i.promisifyEventEmitter)(this.store.deleteGraph((0,r.stringToTerm)(s,this.dataFactory)))));break;default:for(const s of Array.isArray(t)?t:[t])await(0,i.promisifyEventEmitter)(this.store.deleteGraph(s))}}async createGraphs(t,e){if(e)for(const a of t){const u=this.store.match(void 0,void 0,void 0,a);await new Promise((c,s)=>{u.once("data",()=>{s(new Error(`Unable to create graph ${a.value} as it already exists`))}),u.on("end",c),u.on("error",s)})}}};return yd.RdfJsQuadDestination=o,yd}var zS;function t8(){if(zS)return pd;zS=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.ActorRdfUpdateQuadsRdfJsStore=void 0;const i=jI(),r=pe(),o=ae(),n=e8();let t=class extends i.ActorRdfUpdateQuadsDestination{constructor(a){super(a)}async test(a){const u=(0,i.getContextDestination)(a.context);return!u||typeof u=="string"||!("remove"in u)&&"value"in u&&!u.value?.remove?(0,o.failTest)(`${this.name} received an invalid rdfjsStore.`):(0,o.passTestVoid)()}async getDestination(a){const u=(0,i.getContextDestination)(a);return new n.RdfJsQuadDestination(a.getSafe(r.KeysInitQuery.dataFactory),"remove"in u?u:u.value)}};return pd.ActorRdfUpdateQuadsRdfJsStore=t,pd}var HS;function r8(){return HS||(HS=1,(function(i){var r=xi&&xi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=xi&&xi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(t8(),i)})(xi)),xi}var Ci={},md={},Qi={},gd={},$S;function n8(){if($S)return gd;$S=1,Object.defineProperty(gd,"__esModule",{value:!0}),gd.ActorQueryParse=void 0;const i=ae();let r=class extends i.Actor{constructor(n){super(n)}};return gd.ActorQueryParse=r,gd}var JS;function i8(){return JS||(JS=1,(function(i){var r=Qi&&Qi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Qi&&Qi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(n8(),i)})(Qi)),Qi}var KS;function a8(){if(KS)return md;KS=1,Object.defineProperty(md,"__esModule",{value:!0}),md.ActorQueryParseSparql=void 0;const i=i8(),r=pe(),o=ae(),n=Ie(),t=Lg();let e=class extends i.ActorQueryParse{constructor(u){super(u),this.prefixes=Object.freeze(this.prefixes)}async test(u){return u.queryFormat&&u.queryFormat.language!=="sparql"?(0,o.failTest)("This actor can only parse SPARQL queries"):(0,o.passTestVoid)()}async run(u){const c=u.context.getSafe(r.KeysInitQuery.dataFactory),l=new t.Parser({prefixes:this.prefixes,baseIRI:u.baseIRI,sparqlStar:!0,factory:c}).parse(u.query);return{baseIRI:l.type==="query"?l.base:void 0,operation:(0,n.translate)(l,{quads:!0,prefixes:this.prefixes,blankToVariable:!0,baseIRI:u.baseIRI,dataFactory:c})}}};return md.ActorQueryParseSparql=e,md}var YS;function o8(){return YS||(YS=1,(function(i){var r=Ci&&Ci.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ci&&Ci.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(a8(),i)})(Ci)),Ci}var Ui={},bd={},vd={},WS;function u8(){if(WS)return vd;WS=1,Object.defineProperty(vd,"__esModule",{value:!0}),vd.ExpressionFunctionBnode=void 0;const i=K(),r=pe(),o=V0(),n=$();let t=class z1 extends i.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:n.SparqlOperator.BNODE,apply:async a=>{const{args:u,mapping:c,exprEval:s}=a,l=u.length===1?await s.evaluatorExpressionEvaluation(u[0],c):void 0;let d;if(l){const h=z1.bnodeTree.search([l],s.context.getSafe(r.KeysExpressionEvaluator.superTypeProvider),s.context.getSafe(r.KeysInitQuery.functionArgumentsCache));if(!h)throw new n.InvalidArgumentTypes(u,n.SparqlOperator.BNODE);d=h(s)([l]).str()}const f=new o.BlankNodeBindingsScoped(d??`BNODE_${z1.bnodeCounter++}`);return new n.BlankNode(f)}})}checkArity(a){return a.length===0||a.length===1}};return vd.ExpressionFunctionBnode=t,t.bnodeTree=(0,n.declare)(n.SparqlOperator.BNODE).onString1(()=>e=>e).collect(),t.bnodeCounter=0,vd}var ZS;function s8(){if(ZS)return bd;ZS=1,Object.defineProperty(bd,"__esModule",{value:!0}),bd.ActorFunctionFactoryExpressionBnode=void 0;const i=K(),r=$(),o=u8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.BNODE],termFunction:!1})}async run(e){return new o.ExpressionFunctionBnode}};return bd.ActorFunctionFactoryExpressionBnode=n,bd}var kS;function c8(){return kS||(kS=1,(function(i){var r=Ui&&Ui.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ui&&Ui.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(s8(),i)})(Ui)),Ui}var Vi={},Td={},Od={},eF;function l8(){if(eF)return Od;eF=1,Object.defineProperty(Od,"__esModule",{value:!0}),Od.ExpressionFunctionCoalesce=void 0;const i=K(),r=$();let o=class extends i.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:r.SparqlOperator.COALESCE,apply:async({args:t,mapping:e,exprEval:a})=>{const u=[];for(const c of t)try{return await a.evaluatorExpressionEvaluation(c,e)}catch(s){u.push(s)}throw new r.CoalesceError(u)}})}};return Od.ExpressionFunctionCoalesce=o,Od}var tF;function d8(){if(tF)return Td;tF=1,Object.defineProperty(Td,"__esModule",{value:!0}),Td.ActorFunctionFactoryExpressionCoalesce=void 0;const i=K(),r=$(),o=l8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.COALESCE],termFunction:!1})}async run(e){return new o.ExpressionFunctionCoalesce}};return Td.ActorFunctionFactoryExpressionCoalesce=n,Td}var rF;function f8(){return rF||(rF=1,(function(i){var r=Vi&&Vi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Vi&&Vi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(d8(),i)})(Vi)),Vi}var Gi={},Sd={},Fd={},nF;function p8(){if(nF)return Fd;nF=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.ExpressionFunctionBound=void 0;const i=K(),r=pe(),o=bn(),n=$();let t=class extends i.ExpressionFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.BOUND,apply:async({args:a,mapping:u,exprEval:c})=>{const s=a[0];if(s.expressionType!==o.ExpressionType.Variable)throw new n.InvalidArgumentTypes(a,n.SparqlOperator.BOUND);const l=u.has((0,n.expressionToVar)(c.context.getSafe(r.KeysInitQuery.dataFactory),s));return(0,n.bool)(l)}})}};return Fd.ExpressionFunctionBound=t,Fd}var iF;function h8(){if(iF)return Sd;iF=1,Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.ActorFunctionFactoryExpressionBound=void 0;const i=K(),r=$(),o=p8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.BOUND],termFunction:!1})}async run(e){return new o.ExpressionFunctionBound}};return Sd.ActorFunctionFactoryExpressionBound=n,Sd}var aF;function y8(){return aF||(aF=1,(function(i){var r=Gi&&Gi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Gi&&Gi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(h8(),i)})(Gi)),Gi}var Xi={},Ad={},zi={},wd={},oF;function RI(){if(oF)return wd;oF=1,Object.defineProperty(wd,"__esModule",{value:!0}),wd.BlankNode=void 0;class i{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return wd.BlankNode=i,wd}var Ed={},jd={},uF;function DI(){if(uF)return jd;uF=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.DefaultGraph=void 0;class i{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return jd.DefaultGraph=i,i.INSTANCE=new i,jd}var Rd={},Dd={},sF;function J0(){if(sF)return Dd;sF=1,Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.NamedNode=void 0;class i{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return Dd.NamedNode=i,Dd}var cF;function PI(){if(cF)return Rd;cF=1,Object.defineProperty(Rd,"__esModule",{value:!0}),Rd.Literal=void 0;const i=J0();class r{constructor(n,t){this.termType="Literal",this.value=n,typeof t=="string"?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return Rd.Literal=r,r.RDF_LANGUAGE_STRING=new i.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new i.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Rd}var Pd={},lF;function MI(){if(lF)return Pd;lF=1,Object.defineProperty(Pd,"__esModule",{value:!0}),Pd.Quad=void 0;class i{constructor(o,n,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=n,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return Pd.Quad=i,Pd}var Md={},dF;function NI(){if(dF)return Md;dF=1,Object.defineProperty(Md,"__esModule",{value:!0}),Md.Variable=void 0;class i{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return Md.Variable=i,Md}var fF;function _8(){if(fF)return Ed;fF=1,Object.defineProperty(Ed,"__esModule",{value:!0}),Ed.DataFactory=void 0;const i=RI(),r=DI(),o=PI(),n=J0(),t=MI(),e=NI();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new i.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return r.DefaultGraph.INSTANCE}quad(s,l,d,f){return new t.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Ed.DataFactory=u,Ed}var pF;function m8(){return pF||(pF=1,(function(i){var r=zi&&zi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=zi&&zi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(RI(),i),o(_8(),i),o(DI(),i),o(PI(),i),o(J0(),i),o(MI(),i),o(NI(),i)})(zi)),zi}var Nd={},hF;function g8(){if(hF)return Nd;hF=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.NamedExtension=void 0;const i=kN(),r=pe(),o=$();let n=class extends i.ExpressionFunctionBase{constructor({operator:e,functionDefinition:a}){super({arity:Number.POSITIVE_INFINITY,operator:e,apply:async({args:u,exprEval:c,mapping:s})=>{const l=await Promise.all(u.map(d=>c.evaluatorExpressionEvaluation(d,s)));try{return new o.TermTransformer(c.context.getSafe(r.KeysExpressionEvaluator.superTypeProvider)).transformRDFTermUnsafe(await a(l.map(d=>d.toRDF(c.context.getSafe(r.KeysInitQuery.dataFactory)))))}catch(d){throw new o.ExtensionFunctionError(this.operator,d)}}})}};return Nd.NamedExtension=n,Nd}var yF;function b8(){if(yF)return Ad;yF=1,Object.defineProperty(Ad,"__esModule",{value:!0}),Ad.ActorFunctionFactoryExpressionExtensions=void 0;const i=K(),r=pe(),o=ae(),n=m8(),t=g8();let e=class extends i.ActorFunctionFactory{constructor(u){super(u)}async test({context:u,functionName:c}){return await u.getSafe(r.KeysExpressionEvaluator.extensionFunctionCreator)(new n.DataFactory().namedNode(c))?(0,o.passTestVoid)():(0,o.failTest)(`Actor ${this.name} can only provide non-termExpression implementations for functions that are provided through config entries like: ${r.KeysInitQuery.extensionFunctionCreator.name} or ${r.KeysInitQuery.extensionFunctions.name}`)}async run({context:u,functionName:c}){const l=await u.getSafe(r.KeysExpressionEvaluator.extensionFunctionCreator)(new n.DataFactory().namedNode(c));return new t.NamedExtension({operator:c,functionDefinition:l})}};return Ad.ActorFunctionFactoryExpressionExtensions=e,Ad}var _F;function v8(){return _F||(_F=1,(function(i){var r=Xi&&Xi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Xi&&Xi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(b8(),i)})(Xi)),Xi}var Hi={},Id={},qd={},mF;function T8(){if(mF)return qd;mF=1,Object.defineProperty(qd,"__esModule",{value:!0}),qd.ExpressionFunctionConcat=void 0;const i=K(),r=pe(),o=$();let n=class H1 extends i.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:o.SparqlOperator.CONCAT,apply:async e=>{const{args:a,mapping:u,exprEval:c}=e,s=a.map(async p=>c.evaluatorExpressionEvaluation(p,u)).map(async p=>{const y=H1.concatTree.search([await p],c.context.getSafe(r.KeysExpressionEvaluator.superTypeProvider),c.context.getSafe(r.KeysInitQuery.functionArgumentsCache));if(!y)throw new o.InvalidArgumentTypes(a,o.SparqlOperator.CONCAT);return y(c)([await p])}),l=await Promise.all(s),f=l.map(p=>p.typedValue).join(""),h=H1.langAllEqual(l)?l[0].language:void 0;return h?(0,o.langString)(f,h):(0,o.string)(f)}})}static langAllEqual(e){return e.length>0&&e.every(a=>a.language===e[0].language)}};return qd.ExpressionFunctionConcat=n,n.concatTree=(0,o.declare)(o.SparqlOperator.CONCAT).onStringly1(()=>t=>t).collect(),qd}var gF;function O8(){if(gF)return Id;gF=1,Object.defineProperty(Id,"__esModule",{value:!0}),Id.ActorFunctionFactoryExpressionConcat=void 0;const i=K(),r=$(),o=T8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.CONCAT],termFunction:!1})}async run(e){return new o.ExpressionFunctionConcat}};return Id.ActorFunctionFactoryExpressionConcat=n,Id}var bF;function S8(){return bF||(bF=1,(function(i){var r=Hi&&Hi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Hi&&Hi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(O8(),i)})(Hi)),Hi}var $i={},Ld={},xd={},vF;function F8(){if(vF)return xd;vF=1,Object.defineProperty(xd,"__esModule",{value:!0}),xd.ExpressionFunctionIf=void 0;const i=K(),r=$();let o=class extends i.ExpressionFunctionBase{constructor(){super({arity:3,operator:r.SparqlOperator.IF,apply:async({args:t,mapping:e,exprEval:a})=>(await a.evaluatorExpressionEvaluation(t[0],e)).coerceEBV()?a.evaluatorExpressionEvaluation(t[1],e):a.evaluatorExpressionEvaluation(t[2],e)})}};return xd.ExpressionFunctionIf=o,xd}var TF;function A8(){if(TF)return Ld;TF=1,Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.ActorFunctionFactoryExpressionIf=void 0;const i=K(),r=$(),o=F8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.IF],termFunction:!1})}async run(e){return new o.ExpressionFunctionIf}};return Ld.ActorFunctionFactoryExpressionIf=n,Ld}var OF;function w8(){return OF||(OF=1,(function(i){var r=$i&&$i.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=$i&&$i.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(A8(),i)})($i)),$i}var Ji={},Bd={},Cd={},SF;function E8(){if(SF)return Cd;SF=1,Object.defineProperty(Cd,"__esModule",{value:!0}),Cd.ExpressionFunctionLogicalAnd=void 0;const i=K(),r=$();let o=class extends i.ExpressionFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.LOGICAL_AND,apply:async({args:t,mapping:e,exprEval:a})=>{const[u,c]=t;try{if(!(await a.evaluatorExpressionEvaluation(u,e)).coerceEBV())return(0,r.bool)(!1);const f=(await a.evaluatorExpressionEvaluation(c,e)).coerceEBV();return(0,r.bool)(f)}catch(s){if((await a.evaluatorExpressionEvaluation(c,e)).coerceEBV())throw s;return(0,r.bool)(!1)}}})}};return Cd.ExpressionFunctionLogicalAnd=o,Cd}var FF;function j8(){if(FF)return Bd;FF=1,Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.ActorFunctionFactoryExpressionLogicalAnd=void 0;const i=K(),r=$(),o=E8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.LOGICAL_AND],termFunction:!1})}async run(e){return new o.ExpressionFunctionLogicalAnd}};return Bd.ActorFunctionFactoryExpressionLogicalAnd=n,Bd}var AF;function R8(){return AF||(AF=1,(function(i){var r=Ji&&Ji.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ji&&Ji.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(j8(),i)})(Ji)),Ji}var Ki={},Qd={},Ud={},wF;function D8(){if(wF)return Ud;wF=1,Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.ExpressionFunctionLogicalOr=void 0;const i=K(),r=$();let o=class extends i.ExpressionFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.LOGICAL_OR,apply:async({args:t,mapping:e,exprEval:a})=>{const[u,c]=t;try{if((await a.evaluatorExpressionEvaluation(u,e)).coerceEBV())return(0,r.bool)(!0);const f=(await a.evaluatorExpressionEvaluation(c,e)).coerceEBV();return(0,r.bool)(f)}catch(s){if(!(await a.evaluatorExpressionEvaluation(c,e)).coerceEBV())throw s;return(0,r.bool)(!0)}}})}};return Ud.ExpressionFunctionLogicalOr=o,Ud}var EF;function P8(){if(EF)return Qd;EF=1,Object.defineProperty(Qd,"__esModule",{value:!0}),Qd.ActorFunctionFactoryExpressionLogicalOr=void 0;const i=K(),r=$(),o=D8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.LOGICAL_OR],termFunction:!1})}async run(e){return new o.ExpressionFunctionLogicalOr}};return Qd.ActorFunctionFactoryExpressionLogicalOr=n,Qd}var jF;function M8(){return jF||(jF=1,(function(i){var r=Ki&&Ki.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ki&&Ki.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(P8(),i)})(Ki)),Ki}var Yi={},Vd={},Gd={},RF;function N8(){if(RF)return Gd;RF=1,Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.ExpressionFunctionSameTerm=void 0;const i=K(),r=pe(),o=$();let n=class extends i.ExpressionFunctionBase{constructor(){super({arity:2,operator:o.SparqlOperator.SAME_TERM,apply:async({args:e,mapping:a,exprEval:u})=>{const c=u.context.getSafe(r.KeysInitQuery.dataFactory),[s,l]=e.map(h=>u.evaluatorExpressionEvaluation(h,a)),[d,f]=await Promise.all([s,l]);return(0,o.bool)(d.toRDF(c).equals(f.toRDF(c)))}})}};return Gd.ExpressionFunctionSameTerm=n,Gd}var DF;function I8(){if(DF)return Vd;DF=1,Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.ActorFunctionFactoryExpressionSameTerm=void 0;const i=K(),r=$(),o=N8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.SAME_TERM],termFunction:!1})}async run(e){return new o.ExpressionFunctionSameTerm}};return Vd.ActorFunctionFactoryExpressionSameTerm=n,Vd}var PF;function q8(){return PF||(PF=1,(function(i){var r=Yi&&Yi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Yi&&Yi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(I8(),i)})(Yi)),Yi}var Wi={},Xd={},zd={},MF;function L8(){if(MF)return zd;MF=1,Object.defineProperty(zd,"__esModule",{value:!0}),zd.TermFunctionAbs=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.ABS,overloads:(0,r.declare)(r.SparqlOperator.ABS).numericConverter(()=>t=>Math.abs(t)).collect()})}};return zd.TermFunctionAbs=o,zd}var NF;function x8(){if(NF)return Xd;NF=1,Object.defineProperty(Xd,"__esModule",{value:!0}),Xd.ActorFunctionFactoryTermAbs=void 0;const i=K(),r=$(),o=L8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.ABS],termFunction:!0})}async run(e){return new o.TermFunctionAbs}};return Xd.ActorFunctionFactoryTermAbs=n,Xd}var IF;function B8(){return IF||(IF=1,(function(i){var r=Wi&&Wi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Wi&&Wi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(x8(),i)})(Wi)),Wi}var Zi={},Hd={},$d={},fg={exports:{}},C8=fg.exports,qF;function Qg(){return qF||(qF=1,(function(i){(function(r){var o,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,t=Math.ceil,e=Math.floor,a="[BigNumber Error] ",u=a+"Number primitive has more than 15 significant digits: ",c=1e14,s=14,l=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,h=1e9;function p(j){var Q,z,g,F=ee.prototype={constructor:ee,toString:null,valueOf:null},P=new ee(1),R=20,M=4,C=-7,H=21,G=-1e7,J=1e7,ne=!1,te=1,Z=0,ye={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},ve="0123456789abcdefghijklmnopqrstuvwxyz",Te=!0;function ee(q,b){var w,T,A,D,x,I,U,X,V=this;if(!(V instanceof ee))return new ee(q,b);if(b==null){if(q&&q._isBigNumber===!0){V.s=q.s,!q.c||q.e>J?V.c=V.e=null:q.e<G?V.c=[V.e=0]:(V.e=q.e,V.c=q.c.slice());return}if((I=typeof q=="number")&&q*0==0){if(V.s=1/q<0?(q=-q,-1):1,q===~~q){for(D=0,x=q;x>=10;x/=10,D++);D>J?V.c=V.e=null:(V.e=D,V.c=[q]);return}X=String(q)}else{if(!n.test(X=String(q)))return g(V,X,I);V.s=X.charCodeAt(0)==45?(X=X.slice(1),-1):1}(D=X.indexOf("."))>-1&&(X=X.replace(".","")),(x=X.search(/e/i))>0?(D<0&&(D=x),D+=+X.slice(x+1),X=X.substring(0,x)):D<0&&(D=X.length)}else{if(O(b,2,ve.length,"Base"),b==10&&Te)return V=new ee(q),be(V,R+V.e+1,M);if(X=String(q),I=typeof q=="number"){if(q*0!=0)return g(V,X,I,b);if(V.s=1/q<0?(X=X.slice(1),-1):1,ee.DEBUG&&X.replace(/^0\.0*|\./,"").length>15)throw Error(u+q)}else V.s=X.charCodeAt(0)===45?(X=X.slice(1),-1):1;for(w=ve.slice(0,b),D=x=0,U=X.length;x<U;x++)if(w.indexOf(T=X.charAt(x))<0){if(T=="."){if(x>D){D=U;continue}}else if(!A&&(X==X.toUpperCase()&&(X=X.toLowerCase())||X==X.toLowerCase()&&(X=X.toUpperCase()))){A=!0,x=-1,D=0;continue}return g(V,String(q),I,b)}I=!1,X=z(X,b,10,V.s),(D=X.indexOf("."))>-1?X=X.replace(".",""):D=X.length}for(x=0;X.charCodeAt(x)===48;x++);for(U=X.length;X.charCodeAt(--U)===48;);if(X=X.slice(x,++U)){if(U-=x,I&&ee.DEBUG&&U>15&&(q>l||q!==e(q)))throw Error(u+V.s*q);if((D=D-x-1)>J)V.c=V.e=null;else if(D<G)V.c=[V.e=0];else{if(V.e=D,V.c=[],x=(D+1)%s,D<0&&(x+=s),x<U){for(x&&V.c.push(+X.slice(0,x)),U-=s;x<U;)V.c.push(+X.slice(x,x+=s));x=s-(X=X.slice(x)).length}else x-=U;for(;x--;X+="0");V.c.push(+X)}}else V.c=[V.e=0]}ee.clone=p,ee.ROUND_UP=0,ee.ROUND_DOWN=1,ee.ROUND_CEIL=2,ee.ROUND_FLOOR=3,ee.ROUND_HALF_UP=4,ee.ROUND_HALF_DOWN=5,ee.ROUND_HALF_EVEN=6,ee.ROUND_HALF_CEIL=7,ee.ROUND_HALF_FLOOR=8,ee.EUCLID=9,ee.config=ee.set=function(q){var b,w;if(q!=null)if(typeof q=="object"){if(q.hasOwnProperty(b="DECIMAL_PLACES")&&(w=q[b],O(w,0,h,b),R=w),q.hasOwnProperty(b="ROUNDING_MODE")&&(w=q[b],O(w,0,8,b),M=w),q.hasOwnProperty(b="EXPONENTIAL_AT")&&(w=q[b],w&&w.pop?(O(w[0],-h,0,b),O(w[1],0,h,b),C=w[0],H=w[1]):(O(w,-h,h,b),C=-(H=w<0?-w:w))),q.hasOwnProperty(b="RANGE"))if(w=q[b],w&&w.pop)O(w[0],-h,-1,b),O(w[1],1,h,b),G=w[0],J=w[1];else if(O(w,-h,h,b),w)G=-(J=w<0?-w:w);else throw Error(a+b+" cannot be zero: "+w);if(q.hasOwnProperty(b="CRYPTO"))if(w=q[b],w===!!w)if(w)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ne=w;else throw ne=!w,Error(a+"crypto unavailable");else ne=w;else throw Error(a+b+" not true or false: "+w);if(q.hasOwnProperty(b="MODULO_MODE")&&(w=q[b],O(w,0,9,b),te=w),q.hasOwnProperty(b="POW_PRECISION")&&(w=q[b],O(w,0,h,b),Z=w),q.hasOwnProperty(b="FORMAT"))if(w=q[b],typeof w=="object")ye=w;else throw Error(a+b+" not an object: "+w);if(q.hasOwnProperty(b="ALPHABET"))if(w=q[b],typeof w=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(w))Te=w.slice(0,10)=="0123456789",ve=w;else throw Error(a+b+" invalid: "+w)}else throw Error(a+"Object expected: "+q);return{DECIMAL_PLACES:R,ROUNDING_MODE:M,EXPONENTIAL_AT:[C,H],RANGE:[G,J],CRYPTO:ne,MODULO_MODE:te,POW_PRECISION:Z,FORMAT:ye,ALPHABET:ve}},ee.isBigNumber=function(q){if(!q||q._isBigNumber!==!0)return!1;if(!ee.DEBUG)return!0;var b,w,T=q.c,A=q.e,D=q.s;e:if({}.toString.call(T)=="[object Array]"){if((D===1||D===-1)&&A>=-h&&A<=h&&A===e(A)){if(T[0]===0){if(A===0&&T.length===1)return!0;break e}if(b=(A+1)%s,b<1&&(b+=s),String(T[0]).length==b){for(b=0;b<T.length;b++)if(w=T[b],w<0||w>=c||w!==e(w))break e;if(w!==0)return!0}}}else if(T===null&&A===null&&(D===null||D===1||D===-1))return!0;throw Error(a+"Invalid BigNumber: "+q)},ee.maximum=ee.max=function(){return me(arguments,-1)},ee.minimum=ee.min=function(){return me(arguments,1)},ee.random=(function(){var q=9007199254740992,b=Math.random()*q&2097151?function(){return e(Math.random()*q)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(w){var T,A,D,x,I,U=0,X=[],V=new ee(P);if(w==null?w=R:O(w,0,h),x=t(w/s),ne)if(crypto.getRandomValues){for(T=crypto.getRandomValues(new Uint32Array(x*=2));U<x;)I=T[U]*131072+(T[U+1]>>>11),I>=9e15?(A=crypto.getRandomValues(new Uint32Array(2)),T[U]=A[0],T[U+1]=A[1]):(X.push(I%1e14),U+=2);U=x/2}else if(crypto.randomBytes){for(T=crypto.randomBytes(x*=7);U<x;)I=(T[U]&31)*281474976710656+T[U+1]*1099511627776+T[U+2]*4294967296+T[U+3]*16777216+(T[U+4]<<16)+(T[U+5]<<8)+T[U+6],I>=9e15?crypto.randomBytes(7).copy(T,U):(X.push(I%1e14),U+=7);U=x/7}else throw ne=!1,Error(a+"crypto unavailable");if(!ne)for(;U<x;)I=b(),I<9e15&&(X[U++]=I%1e14);for(x=X[--U],w%=s,x&&w&&(I=d[s-w],X[U]=e(x/I)*I);X[U]===0;X.pop(),U--);if(U<0)X=[D=0];else{for(D=-1;X[0]===0;X.splice(0,1),D-=s);for(U=1,I=X[0];I>=10;I/=10,U++);U<s&&(D-=s-U)}return V.e=D,V.c=X,V}})(),ee.sum=function(){for(var q=1,b=arguments,w=new ee(b[0]);q<b.length;)w=w.plus(b[q++]);return w},z=(function(){var q="0123456789";function b(w,T,A,D){for(var x,I=[0],U,X=0,V=w.length;X<V;){for(U=I.length;U--;I[U]*=T);for(I[0]+=D.indexOf(w.charAt(X++)),x=0;x<I.length;x++)I[x]>A-1&&(I[x+1]==null&&(I[x+1]=0),I[x+1]+=I[x]/A|0,I[x]%=A)}return I.reverse()}return function(w,T,A,D,x){var I,U,X,V,Y,ue,se,de,_e=w.indexOf("."),ge=R,fe=M;for(_e>=0&&(V=Z,Z=0,w=w.replace(".",""),de=new ee(T),ue=de.pow(w.length-_e),Z=V,de.c=b(E(_(ue.c),ue.e,"0"),10,A,q),de.e=de.c.length),se=b(w,T,A,x?(I=ve,q):(I=q,ve)),X=V=se.length;se[--V]==0;se.pop());if(!se[0])return I.charAt(0);if(_e<0?--X:(ue.c=se,ue.e=X,ue.s=D,ue=Q(ue,de,ge,fe,A),se=ue.c,Y=ue.r,X=ue.e),U=X+ge+1,_e=se[U],V=A/2,Y=Y||U<0||se[U+1]!=null,Y=fe<4?(_e!=null||Y)&&(fe==0||fe==(ue.s<0?3:2)):_e>V||_e==V&&(fe==4||Y||fe==6&&se[U-1]&1||fe==(ue.s<0?8:7)),U<1||!se[0])w=Y?E(I.charAt(1),-ge,I.charAt(0)):I.charAt(0);else{if(se.length=U,Y)for(--A;++se[--U]>A;)se[U]=0,U||(++X,se=[1].concat(se));for(V=se.length;!se[--V];);for(_e=0,w="";_e<=V;w+=I.charAt(se[_e++]));w=E(w,X,I.charAt(0))}return w}})(),Q=(function(){function q(T,A,D){var x,I,U,X,V=0,Y=T.length,ue=A%f,se=A/f|0;for(T=T.slice();Y--;)U=T[Y]%f,X=T[Y]/f|0,x=se*U+X*ue,I=ue*U+x%f*f+V,V=(I/D|0)+(x/f|0)+se*X,T[Y]=I%D;return V&&(T=[V].concat(T)),T}function b(T,A,D,x){var I,U;if(D!=x)U=D>x?1:-1;else for(I=U=0;I<D;I++)if(T[I]!=A[I]){U=T[I]>A[I]?1:-1;break}return U}function w(T,A,D,x){for(var I=0;D--;)T[D]-=I,I=T[D]<A[D]?1:0,T[D]=I*x+T[D]-A[D];for(;!T[0]&&T.length>1;T.splice(0,1));}return function(T,A,D,x,I){var U,X,V,Y,ue,se,de,_e,ge,fe,he,je,Le,Be,Ce,Pe,qe,Me=T.s==A.s?1:-1,We=T.c,Ze=A.c;if(!We||!We[0]||!Ze||!Ze[0])return new ee(!T.s||!A.s||(We?Ze&&We[0]==Ze[0]:!Ze)?NaN:We&&We[0]==0||!Ze?Me*0:Me/0);for(_e=new ee(Me),ge=_e.c=[],X=T.e-A.e,Me=D+X+1,I||(I=c,X=y(T.e/s)-y(A.e/s),Me=Me/s|0),V=0;Ze[V]==(We[V]||0);V++);if(Ze[V]>(We[V]||0)&&X--,Me<0)ge.push(1),Y=!0;else{for(Be=We.length,Pe=Ze.length,V=0,Me+=2,ue=e(I/(Ze[0]+1)),ue>1&&(Ze=q(Ze,ue,I),We=q(We,ue,I),Pe=Ze.length,Be=We.length),Le=Pe,fe=We.slice(0,Pe),he=fe.length;he<Pe;fe[he++]=0);qe=Ze.slice(),qe=[0].concat(qe),Ce=Ze[0],Ze[1]>=I/2&&Ce++;do{if(ue=0,U=b(Ze,fe,Pe,he),U<0){if(je=fe[0],Pe!=he&&(je=je*I+(fe[1]||0)),ue=e(je/Ce),ue>1)for(ue>=I&&(ue=I-1),se=q(Ze,ue,I),de=se.length,he=fe.length;b(se,fe,de,he)==1;)ue--,w(se,Pe<de?qe:Ze,de,I),de=se.length,U=1;else ue==0&&(U=ue=1),se=Ze.slice(),de=se.length;if(de<he&&(se=[0].concat(se)),w(fe,se,he,I),he=fe.length,U==-1)for(;b(Ze,fe,Pe,he)<1;)ue++,w(fe,Pe<he?qe:Ze,he,I),he=fe.length}else U===0&&(ue++,fe=[0]);ge[V++]=ue,fe[0]?fe[he++]=We[Le]||0:(fe=[We[Le]],he=1)}while((Le++<Be||fe[0]!=null)&&Me--);Y=fe[0]!=null,ge[0]||ge.splice(0,1)}if(I==c){for(V=1,Me=ge[0];Me>=10;Me/=10,V++);be(_e,D+(_e.e=V+X*s-1)+1,x,Y)}else _e.e=X,_e.r=+Y;return _e}})();function Oe(q,b,w,T){var A,D,x,I,U;if(w==null?w=M:O(w,0,8),!q.c)return q.toString();if(A=q.c[0],x=q.e,b==null)U=_(q.c),U=T==1||T==2&&(x<=C||x>=H)?S(U,x):E(U,x,"0");else if(q=be(new ee(q),b,w),D=q.e,U=_(q.c),I=U.length,T==1||T==2&&(b<=D||D<=C)){for(;I<b;U+="0",I++);U=S(U,D)}else if(b-=x+(T===2&&D>x),U=E(U,D,"0"),D+1>I){if(--b>0)for(U+=".";b--;U+="0");}else if(b+=D-I,b>0)for(D+1==I&&(U+=".");b--;U+="0");return q.s<0&&A?"-"+U:U}function me(q,b){for(var w,T,A=1,D=new ee(q[0]);A<q.length;A++)T=new ee(q[A]),(!T.s||(w=m(D,T))===b||w===0&&D.s===b)&&(D=T);return D}function Se(q,b,w){for(var T=1,A=b.length;!b[--A];b.pop());for(A=b[0];A>=10;A/=10,T++);return(w=T+w*s-1)>J?q.c=q.e=null:w<G?q.c=[q.e=0]:(q.e=w,q.c=b),q}g=(function(){var q=/^(-?)0([xbo])(?=\w[\w.]*$)/i,b=/^([^.]+)\.$/,w=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,A=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(D,x,I,U){var X,V=I?x:x.replace(A,"");if(T.test(V))D.s=isNaN(V)?null:V<0?-1:1;else{if(!I&&(V=V.replace(q,function(Y,ue,se){return X=(se=se.toLowerCase())=="x"?16:se=="b"?2:8,!U||U==X?ue:Y}),U&&(X=U,V=V.replace(b,"$1").replace(w,"0.$1")),x!=V))return new ee(V,X);if(ee.DEBUG)throw Error(a+"Not a"+(U?" base "+U:"")+" number: "+x);D.s=null}D.c=D.e=null}})();function be(q,b,w,T){var A,D,x,I,U,X,V,Y=q.c,ue=d;if(Y){e:{for(A=1,I=Y[0];I>=10;I/=10,A++);if(D=b-A,D<0)D+=s,x=b,U=Y[X=0],V=e(U/ue[A-x-1]%10);else if(X=t((D+1)/s),X>=Y.length)if(T){for(;Y.length<=X;Y.push(0));U=V=0,A=1,D%=s,x=D-s+1}else break e;else{for(U=I=Y[X],A=1;I>=10;I/=10,A++);D%=s,x=D-s+A,V=x<0?0:e(U/ue[A-x-1]%10)}if(T=T||b<0||Y[X+1]!=null||(x<0?U:U%ue[A-x-1]),T=w<4?(V||T)&&(w==0||w==(q.s<0?3:2)):V>5||V==5&&(w==4||T||w==6&&(D>0?x>0?U/ue[A-x]:0:Y[X-1])%10&1||w==(q.s<0?8:7)),b<1||!Y[0])return Y.length=0,T?(b-=q.e+1,Y[0]=ue[(s-b%s)%s],q.e=-b||0):Y[0]=q.e=0,q;if(D==0?(Y.length=X,I=1,X--):(Y.length=X+1,I=ue[s-D],Y[X]=x>0?e(U/ue[A-x]%ue[x])*I:0),T)for(;;)if(X==0){for(D=1,x=Y[0];x>=10;x/=10,D++);for(x=Y[0]+=I,I=1;x>=10;x/=10,I++);D!=I&&(q.e++,Y[0]==c&&(Y[0]=1));break}else{if(Y[X]+=I,Y[X]!=c)break;Y[X--]=0,I=1}for(D=Y.length;Y[--D]===0;Y.pop());}q.e>J?q.c=q.e=null:q.e<G&&(q.c=[q.e=0])}return q}function Fe(q){var b,w=q.e;return w===null?q.toString():(b=_(q.c),b=w<=C||w>=H?S(b,w):E(b,w,"0"),q.s<0?"-"+b:b)}return F.absoluteValue=F.abs=function(){var q=new ee(this);return q.s<0&&(q.s=1),q},F.comparedTo=function(q,b){return m(this,new ee(q,b))},F.decimalPlaces=F.dp=function(q,b){var w,T,A,D=this;if(q!=null)return O(q,0,h),b==null?b=M:O(b,0,8),be(new ee(D),q+D.e+1,b);if(!(w=D.c))return null;if(T=((A=w.length-1)-y(this.e/s))*s,A=w[A])for(;A%10==0;A/=10,T--);return T<0&&(T=0),T},F.dividedBy=F.div=function(q,b){return Q(this,new ee(q,b),R,M)},F.dividedToIntegerBy=F.idiv=function(q,b){return Q(this,new ee(q,b),0,1)},F.exponentiatedBy=F.pow=function(q,b){var w,T,A,D,x,I,U,X,V,Y=this;if(q=new ee(q),q.c&&!q.isInteger())throw Error(a+"Exponent not an integer: "+Fe(q));if(b!=null&&(b=new ee(b)),I=q.e>14,!Y.c||!Y.c[0]||Y.c[0]==1&&!Y.e&&Y.c.length==1||!q.c||!q.c[0])return V=new ee(Math.pow(+Fe(Y),I?q.s*(2-v(q)):+Fe(q))),b?V.mod(b):V;if(U=q.s<0,b){if(b.c?!b.c[0]:!b.s)return new ee(NaN);T=!U&&Y.isInteger()&&b.isInteger(),T&&(Y=Y.mod(b))}else{if(q.e>9&&(Y.e>0||Y.e<-1||(Y.e==0?Y.c[0]>1||I&&Y.c[1]>=24e7:Y.c[0]<8e13||I&&Y.c[0]<=9999975e7)))return D=Y.s<0&&v(q)?-0:0,Y.e>-1&&(D=1/D),new ee(U?1/D:D);Z&&(D=t(Z/s+2))}for(I?(w=new ee(.5),U&&(q.s=1),X=v(q)):(A=Math.abs(+Fe(q)),X=A%2),V=new ee(P);;){if(X){if(V=V.times(Y),!V.c)break;D?V.c.length>D&&(V.c.length=D):T&&(V=V.mod(b))}if(A){if(A=e(A/2),A===0)break;X=A%2}else if(q=q.times(w),be(q,q.e+1,1),q.e>14)X=v(q);else{if(A=+Fe(q),A===0)break;X=A%2}Y=Y.times(Y),D?Y.c&&Y.c.length>D&&(Y.c.length=D):T&&(Y=Y.mod(b))}return T?V:(U&&(V=P.div(V)),b?V.mod(b):D?be(V,Z,M,x):V)},F.integerValue=function(q){var b=new ee(this);return q==null?q=M:O(q,0,8),be(b,b.e+1,q)},F.isEqualTo=F.eq=function(q,b){return m(this,new ee(q,b))===0},F.isFinite=function(){return!!this.c},F.isGreaterThan=F.gt=function(q,b){return m(this,new ee(q,b))>0},F.isGreaterThanOrEqualTo=F.gte=function(q,b){return(b=m(this,new ee(q,b)))===1||b===0},F.isInteger=function(){return!!this.c&&y(this.e/s)>this.c.length-2},F.isLessThan=F.lt=function(q,b){return m(this,new ee(q,b))<0},F.isLessThanOrEqualTo=F.lte=function(q,b){return(b=m(this,new ee(q,b)))===-1||b===0},F.isNaN=function(){return!this.s},F.isNegative=function(){return this.s<0},F.isPositive=function(){return this.s>0},F.isZero=function(){return!!this.c&&this.c[0]==0},F.minus=function(q,b){var w,T,A,D,x=this,I=x.s;if(q=new ee(q,b),b=q.s,!I||!b)return new ee(NaN);if(I!=b)return q.s=-b,x.plus(q);var U=x.e/s,X=q.e/s,V=x.c,Y=q.c;if(!U||!X){if(!V||!Y)return V?(q.s=-b,q):new ee(Y?x:NaN);if(!V[0]||!Y[0])return Y[0]?(q.s=-b,q):new ee(V[0]?x:M==3?-0:0)}if(U=y(U),X=y(X),V=V.slice(),I=U-X){for((D=I<0)?(I=-I,A=V):(X=U,A=Y),A.reverse(),b=I;b--;A.push(0));A.reverse()}else for(T=(D=(I=V.length)<(b=Y.length))?I:b,I=b=0;b<T;b++)if(V[b]!=Y[b]){D=V[b]<Y[b];break}if(D&&(A=V,V=Y,Y=A,q.s=-q.s),b=(T=Y.length)-(w=V.length),b>0)for(;b--;V[w++]=0);for(b=c-1;T>I;){if(V[--T]<Y[T]){for(w=T;w&&!V[--w];V[w]=b);--V[w],V[T]+=c}V[T]-=Y[T]}for(;V[0]==0;V.splice(0,1),--X);return V[0]?Se(q,V,X):(q.s=M==3?-1:1,q.c=[q.e=0],q)},F.modulo=F.mod=function(q,b){var w,T,A=this;return q=new ee(q,b),!A.c||!q.s||q.c&&!q.c[0]?new ee(NaN):!q.c||A.c&&!A.c[0]?new ee(A):(te==9?(T=q.s,q.s=1,w=Q(A,q,0,3),q.s=T,w.s*=T):w=Q(A,q,0,te),q=A.minus(w.times(q)),!q.c[0]&&te==1&&(q.s=A.s),q)},F.multipliedBy=F.times=function(q,b){var w,T,A,D,x,I,U,X,V,Y,ue,se,de,_e,ge,fe=this,he=fe.c,je=(q=new ee(q,b)).c;if(!he||!je||!he[0]||!je[0])return!fe.s||!q.s||he&&!he[0]&&!je||je&&!je[0]&&!he?q.c=q.e=q.s=null:(q.s*=fe.s,!he||!je?q.c=q.e=null:(q.c=[0],q.e=0)),q;for(T=y(fe.e/s)+y(q.e/s),q.s*=fe.s,U=he.length,Y=je.length,U<Y&&(de=he,he=je,je=de,A=U,U=Y,Y=A),A=U+Y,de=[];A--;de.push(0));for(_e=c,ge=f,A=Y;--A>=0;){for(w=0,ue=je[A]%ge,se=je[A]/ge|0,x=U,D=A+x;D>A;)X=he[--x]%ge,V=he[x]/ge|0,I=se*X+V*ue,X=ue*X+I%ge*ge+de[D]+w,w=(X/_e|0)+(I/ge|0)+se*V,de[D--]=X%_e;de[D]=w}return w?++T:de.splice(0,1),Se(q,de,T)},F.negated=function(){var q=new ee(this);return q.s=-q.s||null,q},F.plus=function(q,b){var w,T=this,A=T.s;if(q=new ee(q,b),b=q.s,!A||!b)return new ee(NaN);if(A!=b)return q.s=-b,T.minus(q);var D=T.e/s,x=q.e/s,I=T.c,U=q.c;if(!D||!x){if(!I||!U)return new ee(A/0);if(!I[0]||!U[0])return U[0]?q:new ee(I[0]?T:A*0)}if(D=y(D),x=y(x),I=I.slice(),A=D-x){for(A>0?(x=D,w=U):(A=-A,w=I),w.reverse();A--;w.push(0));w.reverse()}for(A=I.length,b=U.length,A-b<0&&(w=U,U=I,I=w,b=A),A=0;b;)A=(I[--b]=I[b]+U[b]+A)/c|0,I[b]=c===I[b]?0:I[b]%c;return A&&(I=[A].concat(I),++x),Se(q,I,x)},F.precision=F.sd=function(q,b){var w,T,A,D=this;if(q!=null&&q!==!!q)return O(q,1,h),b==null?b=M:O(b,0,8),be(new ee(D),q,b);if(!(w=D.c))return null;if(A=w.length-1,T=A*s+1,A=w[A]){for(;A%10==0;A/=10,T--);for(A=w[0];A>=10;A/=10,T++);}return q&&D.e+1>T&&(T=D.e+1),T},F.shiftedBy=function(q){return O(q,-l,l),this.times("1e"+q)},F.squareRoot=F.sqrt=function(){var q,b,w,T,A,D=this,x=D.c,I=D.s,U=D.e,X=R+4,V=new ee("0.5");if(I!==1||!x||!x[0])return new ee(!I||I<0&&(!x||x[0])?NaN:x?D:1/0);if(I=Math.sqrt(+Fe(D)),I==0||I==1/0?(b=_(x),(b.length+U)%2==0&&(b+="0"),I=Math.sqrt(+b),U=y((U+1)/2)-(U<0||U%2),I==1/0?b="5e"+U:(b=I.toExponential(),b=b.slice(0,b.indexOf("e")+1)+U),w=new ee(b)):w=new ee(I+""),w.c[0]){for(U=w.e,I=U+X,I<3&&(I=0);;)if(A=w,w=V.times(A.plus(Q(D,A,X,1))),_(A.c).slice(0,I)===(b=_(w.c)).slice(0,I))if(w.e<U&&--I,b=b.slice(I-3,I+1),b=="9999"||!T&&b=="4999"){if(!T&&(be(A,A.e+R+2,0),A.times(A).eq(D))){w=A;break}X+=4,I+=4,T=1}else{(!+b||!+b.slice(1)&&b.charAt(0)=="5")&&(be(w,w.e+R+2,1),q=!w.times(w).eq(D));break}}return be(w,w.e+R+1,M,q)},F.toExponential=function(q,b){return q!=null&&(O(q,0,h),q++),Oe(this,q,b,1)},F.toFixed=function(q,b){return q!=null&&(O(q,0,h),q=q+this.e+1),Oe(this,q,b)},F.toFormat=function(q,b,w){var T,A=this;if(w==null)q!=null&&b&&typeof b=="object"?(w=b,b=null):q&&typeof q=="object"?(w=q,q=b=null):w=ye;else if(typeof w!="object")throw Error(a+"Argument not an object: "+w);if(T=A.toFixed(q,b),A.c){var D,x=T.split("."),I=+w.groupSize,U=+w.secondaryGroupSize,X=w.groupSeparator||"",V=x[0],Y=x[1],ue=A.s<0,se=ue?V.slice(1):V,de=se.length;if(U&&(D=I,I=U,U=D,de-=D),I>0&&de>0){for(D=de%I||I,V=se.substr(0,D);D<de;D+=I)V+=X+se.substr(D,I);U>0&&(V+=X+se.slice(D)),ue&&(V="-"+V)}T=Y?V+(w.decimalSeparator||"")+((U=+w.fractionGroupSize)?Y.replace(new RegExp("\\d{"+U+"}\\B","g"),"$&"+(w.fractionGroupSeparator||"")):Y):V}return(w.prefix||"")+T+(w.suffix||"")},F.toFraction=function(q){var b,w,T,A,D,x,I,U,X,V,Y,ue,se=this,de=se.c;if(q!=null&&(I=new ee(q),!I.isInteger()&&(I.c||I.s!==1)||I.lt(P)))throw Error(a+"Argument "+(I.isInteger()?"out of range: ":"not an integer: ")+Fe(I));if(!de)return new ee(se);for(b=new ee(P),X=w=new ee(P),T=U=new ee(P),ue=_(de),D=b.e=ue.length-se.e-1,b.c[0]=d[(x=D%s)<0?s+x:x],q=!q||I.comparedTo(b)>0?D>0?b:X:I,x=J,J=1/0,I=new ee(ue),U.c[0]=0;V=Q(I,b,0,1),A=w.plus(V.times(T)),A.comparedTo(q)!=1;)w=T,T=A,X=U.plus(V.times(A=X)),U=A,b=I.minus(V.times(A=b)),I=A;return A=Q(q.minus(w),T,0,1),U=U.plus(A.times(X)),w=w.plus(A.times(T)),U.s=X.s=se.s,D=D*2,Y=Q(X,T,D,M).minus(se).abs().comparedTo(Q(U,w,D,M).minus(se).abs())<1?[X,T]:[U,w],J=x,Y},F.toNumber=function(){return+Fe(this)},F.toPrecision=function(q,b){return q!=null&&O(q,1,h),Oe(this,q,b,2)},F.toString=function(q){var b,w=this,T=w.s,A=w.e;return A===null?T?(b="Infinity",T<0&&(b="-"+b)):b="NaN":(q==null?b=A<=C||A>=H?S(_(w.c),A):E(_(w.c),A,"0"):q===10&&Te?(w=be(new ee(w),R+A+1,M),b=E(_(w.c),w.e,"0")):(O(q,2,ve.length,"Base"),b=z(E(_(w.c),A,"0"),10,q,T,!0)),T<0&&w.c[0]&&(b="-"+b)),b},F.valueOf=F.toJSON=function(){return Fe(this)},F._isBigNumber=!0,j!=null&&ee.set(j),ee}function y(j){var Q=j|0;return j>0||j===Q?Q:Q-1}function _(j){for(var Q,z,g=1,F=j.length,P=j[0]+"";g<F;){for(Q=j[g++]+"",z=s-Q.length;z--;Q="0"+Q);P+=Q}for(F=P.length;P.charCodeAt(--F)===48;);return P.slice(0,F+1||1)}function m(j,Q){var z,g,F=j.c,P=Q.c,R=j.s,M=Q.s,C=j.e,H=Q.e;if(!R||!M)return null;if(z=F&&!F[0],g=P&&!P[0],z||g)return z?g?0:-M:R;if(R!=M)return R;if(z=R<0,g=C==H,!F||!P)return g?0:!F^z?1:-1;if(!g)return C>H^z?1:-1;for(M=(C=F.length)<(H=P.length)?C:H,R=0;R<M;R++)if(F[R]!=P[R])return F[R]>P[R]^z?1:-1;return C==H?0:C>H^z?1:-1}function O(j,Q,z,g){if(j<Q||j>z||j!==e(j))throw Error(a+(g||"Argument")+(typeof j=="number"?j<Q||j>z?" out of range: ":" not an integer: ":" not a primitive number: ")+String(j))}function v(j){var Q=j.c.length-1;return y(j.e/s)==Q&&j.c[Q]%2!=0}function S(j,Q){return(j.length>1?j.charAt(0)+"."+j.slice(1):j)+(Q<0?"e":"e+")+Q}function E(j,Q,z){var g,F;if(Q<0){for(F=z+".";++Q;F+=z);j=F+j}else if(g=j.length,++Q>g){for(F=z,Q-=g;--Q;F+=z);j+=F}else Q<g&&(j=j.slice(0,Q)+"."+j.slice(Q));return j}o=p(),o.default=o.BigNumber=o,i.exports?i.exports=o:(r||(r=typeof self<"u"&&self?self:window),r.BigNumber=o)})(C8)})(fg)),fg.exports}var LF;function Q8(){if(LF)return $d;LF=1,Object.defineProperty($d,"__esModule",{value:!0}),$d.TermFunctionAddition=void 0;const i=K(),r=$(),o=Qg();let n=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.ADDITION,overloads:(0,r.declare)(r.SparqlOperator.ADDITION).arithmetic(()=>(e,a)=>new o.BigNumber(e).plus(a).toNumber()).set([r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,a])=>new r.DateTimeLiteral((0,r.addDurationToDateTime)(e.typedValue,(0,r.defaultedDurationRepresentation)(a.typedValue)))).copy({from:[r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_DAY_TIME_DURATION],to:[r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([r.TypeURL.XSD_DATE,r.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,a])=>new r.DateLiteral((0,r.addDurationToDateTime)((0,r.defaultedDateTimeRepresentation)(e.typedValue),(0,r.defaultedDurationRepresentation)(a.typedValue)))).copy({from:[r.TypeURL.XSD_DATE,r.TypeURL.XSD_DAY_TIME_DURATION],to:[r.TypeURL.XSD_DATE,r.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([r.TypeURL.XSD_TIME,r.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,a])=>new r.TimeLiteral((0,r.addDurationToDateTime)((0,r.defaultedDateTimeRepresentation)(e.typedValue),(0,r.defaultedDurationRepresentation)(a.typedValue)))).copy({from:[r.TypeURL.XSD_TIME,r.TypeURL.XSD_DAY_TIME_DURATION],to:[r.TypeURL.XSD_TIME,r.TypeURL.XSD_YEAR_MONTH_DURATION]}).collect()})}};return $d.TermFunctionAddition=n,$d}var xF;function U8(){if(xF)return Hd;xF=1,Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.ActorFunctionFactoryTermAddition=void 0;const i=K(),r=$(),o=Q8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.ADDITION],termFunction:!0})}async run(e){return new o.TermFunctionAddition}};return Hd.ActorFunctionFactoryTermAddition=n,Hd}var BF;function V8(){return BF||(BF=1,(function(i){var r=Zi&&Zi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Zi&&Zi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(U8(),i)})(Zi)),Zi}var ki={},Jd={},Kd={},CF;function G8(){if(CF)return Kd;CF=1,Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.TermFunctionCeil=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.CEIL,overloads:(0,r.declare)(r.SparqlOperator.CEIL).numericConverter(()=>t=>Math.ceil(t)).collect()})}};return Kd.TermFunctionCeil=o,Kd}var QF;function X8(){if(QF)return Jd;QF=1,Object.defineProperty(Jd,"__esModule",{value:!0}),Jd.ActorFunctionFactoryTermCeil=void 0;const i=K(),r=$(),o=G8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.CEIL],termFunction:!0})}async run(e){return new o.TermFunctionCeil}};return Jd.ActorFunctionFactoryTermCeil=n,Jd}var UF;function z8(){return UF||(UF=1,(function(i){var r=ki&&ki.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ki&&ki.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(X8(),i)})(ki)),ki}var ea={},Yd={},Wd={},VF;function H8(){if(VF)return Wd;VF=1,Object.defineProperty(Wd,"__esModule",{value:!0}),Wd.TermFunctionContains=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.CONTAINS,overloads:(0,r.declare)(r.SparqlOperator.CONTAINS).onBinaryTyped([r.TypeAlias.SPARQL_STRINGLY,r.TypeURL.XSD_STRING],()=>(t,e)=>(0,r.bool)(t.includes(e))).onBinary([r.TypeURL.RDF_LANG_STRING,r.TypeURL.RDF_LANG_STRING],()=>(t,e)=>{if(t.language!==e.language)throw new r.IncompatibleLanguageOperation(t,e);return(0,r.bool)(t.typedValue.includes(e.typedValue))}).collect()})}};return Wd.TermFunctionContains=o,Wd}var GF;function $8(){if(GF)return Yd;GF=1,Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.ActorFunctionFactoryTermContains=void 0;const i=K(),r=$(),o=H8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.CONTAINS],termFunction:!0})}async run(e){return new o.TermFunctionContains}};return Yd.ActorFunctionFactoryTermContains=n,Yd}var XF;function J8(){return XF||(XF=1,(function(i){var r=ea&&ea.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ea&&ea.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o($8(),i)})(ea)),ea}var ta={},Zd={},kd={},zF;function K8(){if(zF)return kd;zF=1,Object.defineProperty(kd,"__esModule",{value:!0}),kd.TermFunctionDatatype=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.DATATYPE,overloads:(0,r.declare)(r.SparqlOperator.DATATYPE).onLiteral1(()=>t=>new r.NamedNode(t.dataType)).collect()})}};return kd.TermFunctionDatatype=o,kd}var HF;function Y8(){if(HF)return Zd;HF=1,Object.defineProperty(Zd,"__esModule",{value:!0}),Zd.ActorFunctionFactoryTermDatatype=void 0;const i=K(),r=$(),o=K8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.DATATYPE],termFunction:!0})}async run(e){return new o.TermFunctionDatatype}};return Zd.ActorFunctionFactoryTermDatatype=n,Zd}var $F;function W8(){return $F||($F=1,(function(i){var r=ta&&ta.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ta&&ta.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Y8(),i)})(ta)),ta}var ra={},ef={},tf={},JF;function Z8(){if(JF)return tf;JF=1,Object.defineProperty(tf,"__esModule",{value:!0}),tf.TermFunctionDay=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.DAY,overloads:(0,r.declare)(r.SparqlOperator.DAY).onDateTime1(()=>t=>(0,r.integer)(t.typedValue.day)).set([r.TypeURL.XSD_DATE],()=>([t])=>(0,r.integer)(t.typedValue.day)).collect()})}};return tf.TermFunctionDay=o,tf}var KF;function k8(){if(KF)return ef;KF=1,Object.defineProperty(ef,"__esModule",{value:!0}),ef.ActorFunctionFactoryTermDay=void 0;const i=K(),r=$(),o=Z8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.DAY],termFunction:!0})}async run(e){return new o.TermFunctionDay}};return ef.ActorFunctionFactoryTermDay=n,ef}var YF;function eB(){return YF||(YF=1,(function(i){var r=ra&&ra.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ra&&ra.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(k8(),i)})(ra)),ra}var na={},rf={},nf={},WF;function tB(){if(WF)return nf;WF=1,Object.defineProperty(nf,"__esModule",{value:!0}),nf.TermFunctionEncodeForUri=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.ENCODE_FOR_URI,overloads:(0,r.declare)(r.SparqlOperator.ENCODE_FOR_URI).onStringly1Typed(()=>t=>(0,r.string)(encodeURI(t))).collect()})}};return nf.TermFunctionEncodeForUri=o,nf}var ZF;function rB(){if(ZF)return rf;ZF=1,Object.defineProperty(rf,"__esModule",{value:!0}),rf.ActorFunctionFactoryTermEncodeForUri=void 0;const i=K(),r=$(),o=tB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.ENCODE_FOR_URI],termFunction:!0})}async run(e){return new o.TermFunctionEncodeForUri}};return rf.ActorFunctionFactoryTermEncodeForUri=n,rf}var kF;function nB(){return kF||(kF=1,(function(i){var r=na&&na.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=na&&na.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(rB(),i)})(na)),na}var ia={},af={},of={},eA;function iB(){if(eA)return of;eA=1,Object.defineProperty(of,"__esModule",{value:!0}),of.TermFunctionDivision=void 0;const i=K(),r=$(),o=Qg();let n=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.DIVISION,overloads:(0,r.declare)(r.SparqlOperator.DIVISION).arithmetic(()=>(e,a)=>new o.BigNumber(e).div(a).toNumber()).onBinaryTyped([r.TypeURL.XSD_INTEGER,r.TypeURL.XSD_INTEGER],()=>(e,a)=>{if(a===0)throw new r.ExpressionError("Integer division by 0");return(0,r.decimal)(new o.BigNumber(e).div(a).toNumber())}).collect()})}};return of.TermFunctionDivision=n,of}var tA;function aB(){if(tA)return af;tA=1,Object.defineProperty(af,"__esModule",{value:!0}),af.ActorFunctionFactoryTermDivision=void 0;const i=K(),r=$(),o=iB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.DIVISION],termFunction:!0})}async run(e){return new o.TermFunctionDivision}};return af.ActorFunctionFactoryTermDivision=n,af}var rA;function oB(){return rA||(rA=1,(function(i){var r=ia&&ia.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ia&&ia.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(aB(),i)})(ia)),ia}var aa={},uf={},sf={},nA;function uB(){if(nA)return sf;nA=1,Object.defineProperty(sf,"__esModule",{value:!0}),sf.TermFunctionEquality=void 0;const i=K(),r=pe(),o=$();let n=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:o.SparqlOperator.EQUAL,overloads:(0,o.declare)(o.SparqlOperator.EQUAL).numberTest(()=>(e,a)=>e===a).stringTest(()=>(e,a)=>e.localeCompare(a)===0).set([o.TypeURL.RDF_LANG_STRING,o.TypeURL.RDF_LANG_STRING],()=>([e,a])=>(0,o.bool)(e.str()===a.str()&&e.language===a.language)).set([o.TypeAlias.SPARQL_STRINGLY,o.TypeAlias.SPARQL_STRINGLY],()=>()=>(0,o.bool)(!1)).booleanTest(()=>(e,a)=>e===a).dateTimeTest(e=>(a,u)=>(0,o.toUTCDate)(a,e.context.getSafe(r.KeysExpressionEvaluator.defaultTimeZone)).getTime()===(0,o.toUTCDate)(u,e.context.getSafe(r.KeysExpressionEvaluator.defaultTimeZone)).getTime()).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],to:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_DATE]}).set(["quad","quad"],e=>([a,u])=>(0,o.bool)(this.applyOnTerms([a.subject,u.subject],e).coerceEBV()&&this.applyOnTerms([a.predicate,u.predicate],e).coerceEBV()&&this.applyOnTerms([a.object,u.object],e).coerceEBV()&&this.applyOnTerms([a.graph,u.graph],e).coerceEBV()),!1).set(["term","term"],e=>([a,u])=>{const c=a.toRDF(e.context.getSafe(r.KeysInitQuery.dataFactory)),s=u.toRDF(e.context.getSafe(r.KeysInitQuery.dataFactory)),l=c.equals(s);if(!l&&c.termType==="Literal"&&s.termType==="Literal")throw new o.RDFEqualTypeError([a,u]);return(0,o.bool)(l)},!1).set([o.TypeURL.XSD_DURATION,o.TypeURL.XSD_DURATION],()=>([e,a])=>(0,o.bool)((0,o.yearMonthDurationsToMonths)((0,o.defaultedYearMonthDurationRepresentation)(e.typedValue))===(0,o.yearMonthDurationsToMonths)((0,o.defaultedYearMonthDurationRepresentation)(a.typedValue))&&(0,o.dayTimeDurationsToSeconds)((0,o.defaultedDayTimeDurationRepresentation)(e.typedValue))===(0,o.dayTimeDurationsToSeconds)((0,o.defaultedDayTimeDurationRepresentation)(a.typedValue)))).set([o.TypeURL.XSD_TIME,o.TypeURL.XSD_TIME],e=>([a,u])=>(0,o.bool)((0,o.toUTCDate)((0,o.defaultedDateTimeRepresentation)(a.typedValue),e.context.getSafe(r.KeysExpressionEvaluator.defaultTimeZone)).getTime()===(0,o.toUTCDate)((0,o.defaultedDateTimeRepresentation)(u.typedValue),e.context.getSafe(r.KeysExpressionEvaluator.defaultTimeZone)).getTime())).collect()})}};return sf.TermFunctionEquality=n,sf}var iA;function sB(){if(iA)return uf;iA=1,Object.defineProperty(uf,"__esModule",{value:!0}),uf.ActorFunctionFactoryTermEquality=void 0;const i=K(),r=$(),o=uB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.EQUAL],termFunction:!0})}async run(e){return new o.TermFunctionEquality}};return uf.ActorFunctionFactoryTermEquality=n,uf}var aA;function cB(){return aA||(aA=1,(function(i){var r=aa&&aa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=aa&&aa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(sB(),i)})(aa)),aa}var oa={},cf={},lf={},oA;function lB(){if(oA)return lf;oA=1,Object.defineProperty(lf,"__esModule",{value:!0}),lf.TermFunctionFloor=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.FLOOR,overloads:(0,r.declare)(r.SparqlOperator.FLOOR).numericConverter(()=>t=>Math.floor(t)).collect()})}};return lf.TermFunctionFloor=o,lf}var uA;function dB(){if(uA)return cf;uA=1,Object.defineProperty(cf,"__esModule",{value:!0}),cf.ActorFunctionFactoryTermFloor=void 0;const i=K(),r=$(),o=lB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.FLOOR],termFunction:!0})}async run(e){return new o.TermFunctionFloor}};return cf.ActorFunctionFactoryTermFloor=n,cf}var sA;function fB(){return sA||(sA=1,(function(i){var r=oa&&oa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=oa&&oa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(dB(),i)})(oa)),oa}var ua={},df={},ff={},cA;function pB(){if(cA)return ff;cA=1,Object.defineProperty(ff,"__esModule",{value:!0}),ff.TermFunctionHours=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.HOURS,overloads:(0,r.declare)(r.SparqlOperator.HOURS).onDateTime1(()=>t=>(0,r.integer)(t.typedValue.hours)).set([r.TypeURL.XSD_TIME],()=>([t])=>(0,r.integer)(t.typedValue.hours)).collect()})}};return ff.TermFunctionHours=o,ff}var lA;function hB(){if(lA)return df;lA=1,Object.defineProperty(df,"__esModule",{value:!0}),df.ActorFunctionFactoryTermHours=void 0;const i=K(),r=$(),o=pB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.HOURS],termFunction:!0})}async run(e){return new o.TermFunctionHours}};return df.ActorFunctionFactoryTermHours=n,df}var dA;function yB(){return dA||(dA=1,(function(i){var r=ua&&ua.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ua&&ua.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(hB(),i)})(ua)),ua}var sa={},pf={},hf={},fA;function _B(){if(fA)return hf;fA=1,Object.defineProperty(hf,"__esModule",{value:!0}),hf.TermFunctionIsIri=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.IS_IRI,overloads:(0,r.declare)(r.SparqlOperator.IS_IRI).onTerm1(()=>t=>(0,r.bool)(t.termType==="namedNode")).collect()})}};return hf.TermFunctionIsIri=o,hf}var pA;function mB(){if(pA)return pf;pA=1,Object.defineProperty(pf,"__esModule",{value:!0}),pf.ActorFunctionFactoryTermIsIri=void 0;const i=K(),r=$(),o=_B();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.IS_IRI,r.SparqlOperator.IS_URI],termFunction:!0})}async run(e){return new o.TermFunctionIsIri}};return pf.ActorFunctionFactoryTermIsIri=n,pf}var hA;function gB(){return hA||(hA=1,(function(i){var r=sa&&sa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=sa&&sa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(mB(),i)})(sa)),sa}var ca={},yf={},_f={},yA;function bB(){if(yA)return _f;yA=1,Object.defineProperty(_f,"__esModule",{value:!0}),_f.TermFunctionIsBlank=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.IS_BLANK,overloads:(0,r.declare)(r.SparqlOperator.IS_BLANK).onTerm1(()=>t=>(0,r.bool)(t.termType==="blankNode")).collect()})}};return _f.TermFunctionIsBlank=o,_f}var _A;function vB(){if(_A)return yf;_A=1,Object.defineProperty(yf,"__esModule",{value:!0}),yf.ActorFunctionFactoryTermIsBlank=void 0;const i=K(),r=$(),o=bB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.IS_BLANK],termFunction:!0})}async run(e){return new o.TermFunctionIsBlank}};return yf.ActorFunctionFactoryTermIsBlank=n,yf}var mA;function TB(){return mA||(mA=1,(function(i){var r=ca&&ca.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ca&&ca.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(vB(),i)})(ca)),ca}var la={},mf={},gf={},gA;function OB(){if(gA)return gf;gA=1,Object.defineProperty(gf,"__esModule",{value:!0}),gf.TermFunctionIsLiteral=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.IS_LITERAL,overloads:(0,r.declare)(r.SparqlOperator.IS_LITERAL).onTerm1(()=>t=>(0,r.bool)(t.termType==="literal")).collect()})}};return gf.TermFunctionIsLiteral=o,gf}var bA;function SB(){if(bA)return mf;bA=1,Object.defineProperty(mf,"__esModule",{value:!0}),mf.ActorFunctionFactoryTermIsLiteral=void 0;const i=K(),r=$(),o=OB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.IS_LITERAL],termFunction:!0})}async run(e){return new o.TermFunctionIsLiteral}};return mf.ActorFunctionFactoryTermIsLiteral=n,mf}var vA;function FB(){return vA||(vA=1,(function(i){var r=la&&la.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=la&&la.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(SB(),i)})(la)),la}var da={},bf={},vf={},TA;function AB(){if(TA)return vf;TA=1,Object.defineProperty(vf,"__esModule",{value:!0}),vf.TermFunctionIri=void 0;const i=K(),r=pe(),o=$(),n=I5();let t=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:o.SparqlOperator.IRI,overloads:(0,o.declare)(o.SparqlOperator.IRI).set(["namedNode"],a=>u=>{const c=u[0],s=(0,n.resolve)(c.str(),a.context.get(r.KeysInitQuery.baseIRI)??"");return new o.NamedNode(s)}).onString1(a=>u=>{const c=(0,n.resolve)(u.str(),a.context.get(r.KeysInitQuery.baseIRI)??"");return new o.NamedNode(c)}).collect()})}};return vf.TermFunctionIri=t,vf}var OA;function wB(){if(OA)return bf;OA=1,Object.defineProperty(bf,"__esModule",{value:!0}),bf.ActorFunctionFactoryTermIri=void 0;const i=K(),r=$(),o=AB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.IRI,r.SparqlOperator.URI],termFunction:!0})}async run(e){return new o.TermFunctionIri}};return bf.ActorFunctionFactoryTermIri=n,bf}var SA;function EB(){return SA||(SA=1,(function(i){var r=da&&da.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=da&&da.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(wB(),i)})(da)),da}var fa={},Tf={},Of={},FA;function jB(){if(FA)return Of;FA=1,Object.defineProperty(Of,"__esModule",{value:!0}),Of.TermFunctionIsNumeric=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.IS_NUMERIC,overloads:(0,r.declare)(r.SparqlOperator.IS_NUMERIC).onNumeric1(()=>()=>(0,r.bool)(!0)).onTerm1(()=>()=>(0,r.bool)(!1)).collect()})}};return Of.TermFunctionIsNumeric=o,Of}var AA;function RB(){if(AA)return Tf;AA=1,Object.defineProperty(Tf,"__esModule",{value:!0}),Tf.ActorFunctionFactoryTermIsNumeric=void 0;const i=K(),r=$(),o=jB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.IS_NUMERIC],termFunction:!0})}async run(e){return new o.TermFunctionIsNumeric}};return Tf.ActorFunctionFactoryTermIsNumeric=n,Tf}var wA;function DB(){return wA||(wA=1,(function(i){var r=fa&&fa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=fa&&fa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(RB(),i)})(fa)),fa}var pa={},Sf={},Ff={},EA;function PB(){if(EA)return Ff;EA=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.TermFunctionLang=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.LANG,overloads:(0,r.declare)(r.SparqlOperator.LANG).onLiteral1(()=>t=>(0,r.string)(t.language??"")).collect()})}};return Ff.TermFunctionLang=o,Ff}var jA;function MB(){if(jA)return Sf;jA=1,Object.defineProperty(Sf,"__esModule",{value:!0}),Sf.ActorFunctionFactoryTermLang=void 0;const i=K(),r=$(),o=PB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.LANG],termFunction:!0})}async run(e){return new o.TermFunctionLang}};return Sf.ActorFunctionFactoryTermLang=n,Sf}var RA;function NB(){return RA||(RA=1,(function(i){var r=pa&&pa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=pa&&pa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(MB(),i)})(pa)),pa}var ha={},Af={},wf={},DA;function IB(){if(DA)return wf;DA=1,Object.defineProperty(wf,"__esModule",{value:!0}),wf.TermFunctionIsTriple=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.IS_TRIPLE,overloads:(0,r.declare)(r.SparqlOperator.IS_TRIPLE).onTerm1(()=>t=>(0,r.bool)(t.termType==="quad")).collect()})}};return wf.TermFunctionIsTriple=o,wf}var PA;function qB(){if(PA)return Af;PA=1,Object.defineProperty(Af,"__esModule",{value:!0}),Af.ActorFunctionFactoryTermIsTriple=void 0;const i=K(),r=$(),o=IB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.IS_TRIPLE],termFunction:!0})}async run(e){return new o.TermFunctionIsTriple}};return Af.ActorFunctionFactoryTermIsTriple=n,Af}var MA;function LB(){return MA||(MA=1,(function(i){var r=ha&&ha.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ha&&ha.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(qB(),i)})(ha)),ha}var ya={},Ef={},jf={},NA;function xB(){if(NA)return jf;NA=1,Object.defineProperty(jf,"__esModule",{value:!0}),jf.TermFunctionLangmatches=void 0;const i=K(),r=$();let o=class Es extends i.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.LANG_MATCHES,overloads:(0,r.declare)(r.SparqlOperator.LANG_MATCHES).onBinaryTyped([r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING],()=>(t,e)=>(0,r.bool)(Es.langMatches(t,e))).collect()})}static langMatches(t,e){const a=t.split("-"),u=e.split("-");if(!Es.matchLangTag(u[0],a[0])&&!Es.isWildCard(a[0]))return!1;let c=1,s=1;for(;s<u.length;){if(Es.isWildCard(u[s])){s++;continue}if(c===a.length)return!1;if(Es.matchLangTag(u[s],a[c])){c++,s++;continue}if(a[c].length===1)return!1;c++}return!0}static isWildCard(t){return t==="*"}static matchLangTag(t,e){return new RegExp(`/${t}/`,"iu").test(`/${e}/`)}};return jf.TermFunctionLangmatches=o,jf}var IA;function BB(){if(IA)return Ef;IA=1,Object.defineProperty(Ef,"__esModule",{value:!0}),Ef.ActorFunctionFactoryTermLangmatches=void 0;const i=K(),r=$(),o=xB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.LANG_MATCHES],termFunction:!0})}async run(e){return new o.TermFunctionLangmatches}};return Ef.ActorFunctionFactoryTermLangmatches=n,Ef}var qA;function CB(){return qA||(qA=1,(function(i){var r=ya&&ya.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ya&&ya.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(BB(),i)})(ya)),ya}var _a={},Rf={},Df={},LA;function QB(){if(LA)return Df;LA=1,Object.defineProperty(Df,"__esModule",{value:!0}),Df.TermFunctionMinutes=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.MINUTES,overloads:(0,r.declare)(r.SparqlOperator.MINUTES).onDateTime1(()=>t=>(0,r.integer)(t.typedValue.minutes)).set([r.TypeURL.XSD_TIME],()=>([t])=>(0,r.integer)(t.typedValue.minutes)).collect()})}};return Df.TermFunctionMinutes=o,Df}var xA;function UB(){if(xA)return Rf;xA=1,Object.defineProperty(Rf,"__esModule",{value:!0}),Rf.ActorFunctionFactoryTermMinutes=void 0;const i=K(),r=$(),o=QB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.MINUTES],termFunction:!0})}async run(e){return new o.TermFunctionMinutes}};return Rf.ActorFunctionFactoryTermMinutes=n,Rf}var BA;function VB(){return BA||(BA=1,(function(i){var r=_a&&_a.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=_a&&_a.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(UB(),i)})(_a)),_a}var ma={},Pf={},Mf={},CA;function GB(){if(CA)return Mf;CA=1,Object.defineProperty(Mf,"__esModule",{value:!0}),Mf.TermFunctionLcase=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.LCASE,overloads:(0,r.declare)(r.SparqlOperator.LCASE).onString1Typed(()=>t=>(0,r.string)(t.toLowerCase())).onLangString1(()=>t=>(0,r.langString)(t.typedValue.toLowerCase(),t.language)).collect()})}};return Mf.TermFunctionLcase=o,Mf}var QA;function XB(){if(QA)return Pf;QA=1,Object.defineProperty(Pf,"__esModule",{value:!0}),Pf.ActorFunctionFactoryTermLcase=void 0;const i=K(),r=$(),o=GB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.LCASE],termFunction:!0})}async run(e){return new o.TermFunctionLcase}};return Pf.ActorFunctionFactoryTermLcase=n,Pf}var UA;function zB(){return UA||(UA=1,(function(i){var r=ma&&ma.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ma&&ma.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(XB(),i)})(ma)),ma}var ga={},Nf={},If={},a1={exports:{}},VA;function HB(){return VA||(VA=1,(function(i,r){(function(o){i.exports=o()})(function(o){var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function t(m,O){var v=m[0],S=m[1],E=m[2],j=m[3];v+=(S&E|~S&j)+O[0]-680876936|0,v=(v<<7|v>>>25)+S|0,j+=(v&S|~v&E)+O[1]-389564586|0,j=(j<<12|j>>>20)+v|0,E+=(j&v|~j&S)+O[2]+606105819|0,E=(E<<17|E>>>15)+j|0,S+=(E&j|~E&v)+O[3]-1044525330|0,S=(S<<22|S>>>10)+E|0,v+=(S&E|~S&j)+O[4]-176418897|0,v=(v<<7|v>>>25)+S|0,j+=(v&S|~v&E)+O[5]+1200080426|0,j=(j<<12|j>>>20)+v|0,E+=(j&v|~j&S)+O[6]-1473231341|0,E=(E<<17|E>>>15)+j|0,S+=(E&j|~E&v)+O[7]-45705983|0,S=(S<<22|S>>>10)+E|0,v+=(S&E|~S&j)+O[8]+1770035416|0,v=(v<<7|v>>>25)+S|0,j+=(v&S|~v&E)+O[9]-1958414417|0,j=(j<<12|j>>>20)+v|0,E+=(j&v|~j&S)+O[10]-42063|0,E=(E<<17|E>>>15)+j|0,S+=(E&j|~E&v)+O[11]-1990404162|0,S=(S<<22|S>>>10)+E|0,v+=(S&E|~S&j)+O[12]+1804603682|0,v=(v<<7|v>>>25)+S|0,j+=(v&S|~v&E)+O[13]-40341101|0,j=(j<<12|j>>>20)+v|0,E+=(j&v|~j&S)+O[14]-1502002290|0,E=(E<<17|E>>>15)+j|0,S+=(E&j|~E&v)+O[15]+1236535329|0,S=(S<<22|S>>>10)+E|0,v+=(S&j|E&~j)+O[1]-165796510|0,v=(v<<5|v>>>27)+S|0,j+=(v&E|S&~E)+O[6]-1069501632|0,j=(j<<9|j>>>23)+v|0,E+=(j&S|v&~S)+O[11]+643717713|0,E=(E<<14|E>>>18)+j|0,S+=(E&v|j&~v)+O[0]-373897302|0,S=(S<<20|S>>>12)+E|0,v+=(S&j|E&~j)+O[5]-701558691|0,v=(v<<5|v>>>27)+S|0,j+=(v&E|S&~E)+O[10]+38016083|0,j=(j<<9|j>>>23)+v|0,E+=(j&S|v&~S)+O[15]-660478335|0,E=(E<<14|E>>>18)+j|0,S+=(E&v|j&~v)+O[4]-405537848|0,S=(S<<20|S>>>12)+E|0,v+=(S&j|E&~j)+O[9]+568446438|0,v=(v<<5|v>>>27)+S|0,j+=(v&E|S&~E)+O[14]-1019803690|0,j=(j<<9|j>>>23)+v|0,E+=(j&S|v&~S)+O[3]-187363961|0,E=(E<<14|E>>>18)+j|0,S+=(E&v|j&~v)+O[8]+1163531501|0,S=(S<<20|S>>>12)+E|0,v+=(S&j|E&~j)+O[13]-1444681467|0,v=(v<<5|v>>>27)+S|0,j+=(v&E|S&~E)+O[2]-51403784|0,j=(j<<9|j>>>23)+v|0,E+=(j&S|v&~S)+O[7]+1735328473|0,E=(E<<14|E>>>18)+j|0,S+=(E&v|j&~v)+O[12]-1926607734|0,S=(S<<20|S>>>12)+E|0,v+=(S^E^j)+O[5]-378558|0,v=(v<<4|v>>>28)+S|0,j+=(v^S^E)+O[8]-2022574463|0,j=(j<<11|j>>>21)+v|0,E+=(j^v^S)+O[11]+1839030562|0,E=(E<<16|E>>>16)+j|0,S+=(E^j^v)+O[14]-35309556|0,S=(S<<23|S>>>9)+E|0,v+=(S^E^j)+O[1]-1530992060|0,v=(v<<4|v>>>28)+S|0,j+=(v^S^E)+O[4]+1272893353|0,j=(j<<11|j>>>21)+v|0,E+=(j^v^S)+O[7]-155497632|0,E=(E<<16|E>>>16)+j|0,S+=(E^j^v)+O[10]-1094730640|0,S=(S<<23|S>>>9)+E|0,v+=(S^E^j)+O[13]+681279174|0,v=(v<<4|v>>>28)+S|0,j+=(v^S^E)+O[0]-358537222|0,j=(j<<11|j>>>21)+v|0,E+=(j^v^S)+O[3]-722521979|0,E=(E<<16|E>>>16)+j|0,S+=(E^j^v)+O[6]+76029189|0,S=(S<<23|S>>>9)+E|0,v+=(S^E^j)+O[9]-640364487|0,v=(v<<4|v>>>28)+S|0,j+=(v^S^E)+O[12]-421815835|0,j=(j<<11|j>>>21)+v|0,E+=(j^v^S)+O[15]+530742520|0,E=(E<<16|E>>>16)+j|0,S+=(E^j^v)+O[2]-995338651|0,S=(S<<23|S>>>9)+E|0,v+=(E^(S|~j))+O[0]-198630844|0,v=(v<<6|v>>>26)+S|0,j+=(S^(v|~E))+O[7]+1126891415|0,j=(j<<10|j>>>22)+v|0,E+=(v^(j|~S))+O[14]-1416354905|0,E=(E<<15|E>>>17)+j|0,S+=(j^(E|~v))+O[5]-57434055|0,S=(S<<21|S>>>11)+E|0,v+=(E^(S|~j))+O[12]+1700485571|0,v=(v<<6|v>>>26)+S|0,j+=(S^(v|~E))+O[3]-1894986606|0,j=(j<<10|j>>>22)+v|0,E+=(v^(j|~S))+O[10]-1051523|0,E=(E<<15|E>>>17)+j|0,S+=(j^(E|~v))+O[1]-2054922799|0,S=(S<<21|S>>>11)+E|0,v+=(E^(S|~j))+O[8]+1873313359|0,v=(v<<6|v>>>26)+S|0,j+=(S^(v|~E))+O[15]-30611744|0,j=(j<<10|j>>>22)+v|0,E+=(v^(j|~S))+O[6]-1560198380|0,E=(E<<15|E>>>17)+j|0,S+=(j^(E|~v))+O[13]+1309151649|0,S=(S<<21|S>>>11)+E|0,v+=(E^(S|~j))+O[4]-145523070|0,v=(v<<6|v>>>26)+S|0,j+=(S^(v|~E))+O[11]-1120210379|0,j=(j<<10|j>>>22)+v|0,E+=(v^(j|~S))+O[2]+718787259|0,E=(E<<15|E>>>17)+j|0,S+=(j^(E|~v))+O[9]-343485551|0,S=(S<<21|S>>>11)+E|0,m[0]=v+m[0]|0,m[1]=S+m[1]|0,m[2]=E+m[2]|0,m[3]=j+m[3]|0}function e(m){var O=[],v;for(v=0;v<64;v+=4)O[v>>2]=m.charCodeAt(v)+(m.charCodeAt(v+1)<<8)+(m.charCodeAt(v+2)<<16)+(m.charCodeAt(v+3)<<24);return O}function a(m){var O=[],v;for(v=0;v<64;v+=4)O[v>>2]=m[v]+(m[v+1]<<8)+(m[v+2]<<16)+(m[v+3]<<24);return O}function u(m){var O=m.length,v=[1732584193,-271733879,-1732584194,271733878],S,E,j,Q,z,g;for(S=64;S<=O;S+=64)t(v,e(m.substring(S-64,S)));for(m=m.substring(S-64),E=m.length,j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S=0;S<E;S+=1)j[S>>2]|=m.charCodeAt(S)<<(S%4<<3);if(j[S>>2]|=128<<(S%4<<3),S>55)for(t(v,j),S=0;S<16;S+=1)j[S]=0;return Q=O*8,Q=Q.toString(16).match(/(.*?)(.{0,8})$/),z=parseInt(Q[2],16),g=parseInt(Q[1],16)||0,j[14]=z,j[15]=g,t(v,j),v}function c(m){var O=m.length,v=[1732584193,-271733879,-1732584194,271733878],S,E,j,Q,z,g;for(S=64;S<=O;S+=64)t(v,a(m.subarray(S-64,S)));for(m=S-64<O?m.subarray(S-64):new Uint8Array(0),E=m.length,j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S=0;S<E;S+=1)j[S>>2]|=m[S]<<(S%4<<3);if(j[S>>2]|=128<<(S%4<<3),S>55)for(t(v,j),S=0;S<16;S+=1)j[S]=0;return Q=O*8,Q=Q.toString(16).match(/(.*?)(.{0,8})$/),z=parseInt(Q[2],16),g=parseInt(Q[1],16)||0,j[14]=z,j[15]=g,t(v,j),v}function s(m){var O="",v;for(v=0;v<4;v+=1)O+=n[m>>v*8+4&15]+n[m>>v*8&15];return O}function l(m){var O;for(O=0;O<m.length;O+=1)m[O]=s(m[O]);return m.join("")}l(u("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&(function(){function m(O,v){return O=O|0||0,O<0?Math.max(O+v,0):Math.min(O,v)}ArrayBuffer.prototype.slice=function(O,v){var S=this.byteLength,E=m(O,S),j=S,Q,z,g,F;return v!==o&&(j=m(v,S)),E>j?new ArrayBuffer(0):(Q=j-E,z=new ArrayBuffer(Q),g=new Uint8Array(z),F=new Uint8Array(this,E,Q),g.set(F),z)}})();function d(m){return/[\u0080-\uFFFF]/.test(m)&&(m=unescape(encodeURIComponent(m))),m}function f(m,O){var v=m.length,S=new ArrayBuffer(v),E=new Uint8Array(S),j;for(j=0;j<v;j+=1)E[j]=m.charCodeAt(j);return O?E:S}function h(m){return String.fromCharCode.apply(null,new Uint8Array(m))}function p(m,O,v){var S=new Uint8Array(m.byteLength+O.byteLength);return S.set(new Uint8Array(m)),S.set(new Uint8Array(O),m.byteLength),S}function y(m){var O=[],v=m.length,S;for(S=0;S<v-1;S+=2)O.push(parseInt(m.substr(S,2),16));return String.fromCharCode.apply(String,O)}function _(){this.reset()}return _.prototype.append=function(m){return this.appendBinary(d(m)),this},_.prototype.appendBinary=function(m){this._buff+=m,this._length+=m.length;var O=this._buff.length,v;for(v=64;v<=O;v+=64)t(this._hash,e(this._buff.substring(v-64,v)));return this._buff=this._buff.substring(v-64),this},_.prototype.end=function(m){var O=this._buff,v=O.length,S,E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j;for(S=0;S<v;S+=1)E[S>>2]|=O.charCodeAt(S)<<(S%4<<3);return this._finish(E,v),j=l(this._hash),m&&(j=y(j)),this.reset(),j},_.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},_.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},_.prototype.setState=function(m){return this._buff=m.buff,this._length=m.length,this._hash=m.hash,this},_.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},_.prototype._finish=function(m,O){var v=O,S,E,j;if(m[v>>2]|=128<<(v%4<<3),v>55)for(t(this._hash,m),v=0;v<16;v+=1)m[v]=0;S=this._length*8,S=S.toString(16).match(/(.*?)(.{0,8})$/),E=parseInt(S[2],16),j=parseInt(S[1],16)||0,m[14]=E,m[15]=j,t(this._hash,m)},_.hash=function(m,O){return _.hashBinary(d(m),O)},_.hashBinary=function(m,O){var v=u(m),S=l(v);return O?y(S):S},_.ArrayBuffer=function(){this.reset()},_.ArrayBuffer.prototype.append=function(m){var O=p(this._buff.buffer,m),v=O.length,S;for(this._length+=m.byteLength,S=64;S<=v;S+=64)t(this._hash,a(O.subarray(S-64,S)));return this._buff=S-64<v?new Uint8Array(O.buffer.slice(S-64)):new Uint8Array(0),this},_.ArrayBuffer.prototype.end=function(m){var O=this._buff,v=O.length,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E,j;for(E=0;E<v;E+=1)S[E>>2]|=O[E]<<(E%4<<3);return this._finish(S,v),j=l(this._hash),m&&(j=y(j)),this.reset(),j},_.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},_.ArrayBuffer.prototype.getState=function(){var m=_.prototype.getState.call(this);return m.buff=h(m.buff),m},_.ArrayBuffer.prototype.setState=function(m){return m.buff=f(m.buff,!0),_.prototype.setState.call(this,m)},_.ArrayBuffer.prototype.destroy=_.prototype.destroy,_.ArrayBuffer.prototype._finish=_.prototype._finish,_.ArrayBuffer.hash=function(m,O){var v=c(new Uint8Array(m)),S=l(v);return O?y(S):S},_})})(a1)),a1.exports}var GA;function $B(){if(GA)return If;GA=1,Object.defineProperty(If,"__esModule",{value:!0}),If.TermFunctionMd5=void 0;const i=K(),r=$(),o=HB();let n=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.MD5,overloads:(0,r.declare)(r.SparqlOperator.MD5).onString1Typed(()=>e=>(0,r.string)((0,o.hash)(e))).collect()})}};return If.TermFunctionMd5=n,If}var XA;function JB(){if(XA)return Nf;XA=1,Object.defineProperty(Nf,"__esModule",{value:!0}),Nf.ActorFunctionFactoryTermMd5=void 0;const i=K(),r=$(),o=$B();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.MD5],termFunction:!0})}async run(e){return new o.TermFunctionMd5}};return Nf.ActorFunctionFactoryTermMd5=n,Nf}var zA;function KB(){return zA||(zA=1,(function(i){var r=ga&&ga.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ga&&ga.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(JB(),i)})(ga)),ga}var ba={},qf={},Lf={},HA;function YB(){if(HA)return Lf;HA=1,Object.defineProperty(Lf,"__esModule",{value:!0}),Lf.TermFunctionMonth=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.MONTH,overloads:(0,r.declare)(r.SparqlOperator.MONTH).onDateTime1(()=>t=>(0,r.integer)(t.typedValue.month)).set([r.TypeURL.XSD_DATE],()=>([t])=>(0,r.integer)(t.typedValue.month)).collect()})}};return Lf.TermFunctionMonth=o,Lf}var $A;function WB(){if($A)return qf;$A=1,Object.defineProperty(qf,"__esModule",{value:!0}),qf.ActorFunctionFactoryTermMonth=void 0;const i=K(),r=$(),o=YB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.MONTH],termFunction:!0})}async run(e){return new o.TermFunctionMonth}};return qf.ActorFunctionFactoryTermMonth=n,qf}var JA;function ZB(){return JA||(JA=1,(function(i){var r=ba&&ba.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ba&&ba.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(WB(),i)})(ba)),ba}var va={},xf={},Bf={},KA;function kB(){if(KA)return Bf;KA=1,Object.defineProperty(Bf,"__esModule",{value:!0}),Bf.TermFunctionNot=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.NOT,overloads:(0,r.declare)(r.SparqlOperator.NOT).onTerm1(()=>t=>(0,r.bool)(!t.coerceEBV())).collect()})}};return Bf.TermFunctionNot=o,Bf}var YA;function eC(){if(YA)return xf;YA=1,Object.defineProperty(xf,"__esModule",{value:!0}),xf.ActorFunctionFactoryTermNot=void 0;const i=K(),r=$(),o=kB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.NOT],termFunction:!0})}async run(e){return new o.TermFunctionNot}};return xf.ActorFunctionFactoryTermNot=n,xf}var WA;function tC(){return WA||(WA=1,(function(i){var r=va&&va.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=va&&va.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(eC(),i)})(va)),va}var Ta={},Cf={},Qf={},ZA;function rC(){if(ZA)return Qf;ZA=1,Object.defineProperty(Qf,"__esModule",{value:!0}),Qf.TermFunctionMultiplication=void 0;const i=K(),r=$(),o=Qg();let n=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.MULTIPLICATION,overloads:(0,r.declare)(r.SparqlOperator.MULTIPLICATION).arithmetic(()=>(e,a)=>new o.BigNumber(e).times(a).toNumber()).collect()})}};return Qf.TermFunctionMultiplication=n,Qf}var kA;function nC(){if(kA)return Cf;kA=1,Object.defineProperty(Cf,"__esModule",{value:!0}),Cf.ActorFunctionFactoryTermMultiplication=void 0;const i=K(),r=$(),o=rC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.MULTIPLICATION],termFunction:!0})}async run(e){return new o.TermFunctionMultiplication}};return Cf.ActorFunctionFactoryTermMultiplication=n,Cf}var ew;function iC(){return ew||(ew=1,(function(i){var r=Ta&&Ta.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ta&&Ta.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(nC(),i)})(Ta)),Ta}var Oa={},Uf={},Vf={},tw;function aC(){if(tw)return Vf;tw=1,Object.defineProperty(Vf,"__esModule",{value:!0}),Vf.TermFunctionNow=void 0;const i=K(),r=pe(),o=$();let n=class extends i.TermFunctionBase{constructor(){super({arity:0,operator:o.SparqlOperator.NOW,overloads:(0,o.declare)(o.SparqlOperator.NOW).set([],e=>()=>new o.DateTimeLiteral((0,o.toDateTimeRepresentation)({date:e.context.getSafe(r.KeysInitQuery.queryTimestamp),timeZone:e.context.getSafe(r.KeysExpressionEvaluator.defaultTimeZone)}))).collect()})}};return Vf.TermFunctionNow=n,Vf}var rw;function oC(){if(rw)return Uf;rw=1,Object.defineProperty(Uf,"__esModule",{value:!0}),Uf.ActorFunctionFactoryTermNow=void 0;const i=K(),r=$(),o=aC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.NOW],termFunction:!0})}async run(e){return new o.TermFunctionNow}};return Uf.ActorFunctionFactoryTermNow=n,Uf}var nw;function uC(){return nw||(nw=1,(function(i){var r=Oa&&Oa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Oa&&Oa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(oC(),i)})(Oa)),Oa}var Sa={},Gf={},Xf={},iw;function sC(){if(iw)return Xf;iw=1,Object.defineProperty(Xf,"__esModule",{value:!0}),Xf.TermFunctionObject=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.OBJECT,overloads:(0,r.declare)(r.SparqlOperator.OBJECT).onQuad1(()=>t=>t.object).collect()})}};return Xf.TermFunctionObject=o,Xf}var aw;function cC(){if(aw)return Gf;aw=1,Object.defineProperty(Gf,"__esModule",{value:!0}),Gf.ActorFunctionFactoryTermObject=void 0;const i=K(),r=$(),o=sC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.OBJECT],termFunction:!0})}async run(e){return new o.TermFunctionObject}};return Gf.ActorFunctionFactoryTermObject=n,Gf}var ow;function lC(){return ow||(ow=1,(function(i){var r=Sa&&Sa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Sa&&Sa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(cC(),i)})(Sa)),Sa}var Fa={},zf={},Hf={},uw;function dC(){if(uw)return Hf;uw=1,Object.defineProperty(Hf,"__esModule",{value:!0}),Hf.TermFunctionPredicate=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.PREDICATE,overloads:(0,r.declare)(r.SparqlOperator.PREDICATE).onQuad1(()=>t=>t.predicate).collect()})}};return Hf.TermFunctionPredicate=o,Hf}var sw;function fC(){if(sw)return zf;sw=1,Object.defineProperty(zf,"__esModule",{value:!0}),zf.ActorFunctionFactoryTermPredicate=void 0;const i=K(),r=$(),o=dC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.PREDICATE],termFunction:!0})}async run(e){return new o.TermFunctionPredicate}};return zf.ActorFunctionFactoryTermPredicate=n,zf}var cw;function pC(){return cw||(cw=1,(function(i){var r=Fa&&Fa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Fa&&Fa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(fC(),i)})(Fa)),Fa}var Aa={},$f={},Jf={},lw;function hC(){if(lw)return Jf;lw=1,Object.defineProperty(Jf,"__esModule",{value:!0}),Jf.TermFunctionRand=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:0,operator:r.SparqlOperator.RAND,overloads:(0,r.declare)(r.SparqlOperator.RAND).set([],()=>()=>(0,r.double)(Math.random())).collect()})}};return Jf.TermFunctionRand=o,Jf}var dw;function yC(){if(dw)return $f;dw=1,Object.defineProperty($f,"__esModule",{value:!0}),$f.ActorFunctionFactoryTermRand=void 0;const i=K(),r=$(),o=hC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.RAND],termFunction:!0})}async run(e){return new o.TermFunctionRand}};return $f.ActorFunctionFactoryTermRand=n,$f}var fw;function _C(){return fw||(fw=1,(function(i){var r=Aa&&Aa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Aa&&Aa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(yC(),i)})(Aa)),Aa}var wa={},Kf={},Yf={},Ea={},Wf={},Zf={},pw;function II(){if(pw)return Zf;pw=1,Object.defineProperty(Zf,"__esModule",{value:!0}),Zf.TermFunctionRegex=void 0;const i=K(),r=$();let o=class ln extends i.TermFunctionBase{constructor(){super({arity:[2,3],operator:r.SparqlOperator.REGEX,overloads:(0,r.declare)(r.SparqlOperator.REGEX).onBinaryTyped([r.TypeAlias.SPARQL_STRINGLY,r.TypeURL.XSD_STRING],ln.regex2).onTernaryTyped([r.TypeAlias.SPARQL_STRINGLY,r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING],ln.regex3).collect()})}static regex2(){return(t,e)=>(0,r.bool)(ln.matches(t,e))}static regex3(){return(t,e,a)=>(0,r.bool)(ln.matches(t,e,a))}static matches(t,e,a=""){return a=ln.cleanFlags(a),a.includes("x")&&(e=ln.flagX(e)),a.includes("q")&&(e=ln.flagQ(e)),new RegExp(e,a.replaceAll(/[qx]/gu,"")).test(t)}static cleanFlags(t){if(!/^[imsxq]*$/u.test(t))throw new Error("Invalid flags");const e=[...t].find((a,u,c)=>c.indexOf(a)!==u);if(e)throw new Error(`Duplicate flag: ${e}`);return t?.includes("q")&&(t=t.replaceAll(/[msx]/gu,"")),`${t}u`}static flagX(t){if(!t)return t;let e=t[0];for(;["	",`
`,"\r"," "].includes(e);)t=t.slice(1),e=t[0];let a=e==="[";for(let u=1;u<t.length;u++){const c=t[u];["	",`
`,"\r"," "].includes(c)&&!a?(t=t.slice(0,u)+t.slice(u+1),u--):c==="["&&e!=="\\"?a=!0:c==="]"&&e!=="\\"&&(a=!1),e=c}return t}static flagQ(t){return t.replaceAll(/([?+*.{}()[\]\\|])/gu,"\\$1").replaceAll(/^\^/gu,"\\^").replaceAll(/\$$/gu,"\\$")}};return Zf.TermFunctionRegex=o,Zf}var hw;function mC(){if(hw)return Wf;hw=1,Object.defineProperty(Wf,"__esModule",{value:!0}),Wf.ActorFunctionFactoryTermRegex=void 0;const i=K(),r=$(),o=II();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.REGEX],termFunction:!0})}async run(e){return new o.TermFunctionRegex}};return Wf.ActorFunctionFactoryTermRegex=n,Wf}var yw;function qI(){return yw||(yw=1,(function(i){var r=Ea&&Ea.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ea&&Ea.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(mC(),i),o(II(),i)})(Ea)),Ea}var _w;function gC(){if(_w)return Yf;_w=1,Object.defineProperty(Yf,"__esModule",{value:!0}),Yf.TermFunctionReplace=void 0;const i=qI(),r=K(),o=$();let n=class z_ extends r.TermFunctionBase{constructor(){super({arity:[3,4],operator:o.SparqlOperator.REPLACE,overloads:(0,o.declare)(o.SparqlOperator.REPLACE).onTernaryTyped([o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING],()=>(e,a,u)=>(0,o.string)(z_.replace(e,a,u))).set([o.TypeURL.RDF_LANG_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING],()=>([e,a,u])=>{const c=z_.replace(e.typedValue,a.typedValue,u.typedValue);return(0,o.langString)(c,e.language)}).onQuaternaryTyped([o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING],()=>(e,a,u,c)=>(0,o.string)(z_.replace(e,a,u,c))).set([o.TypeURL.RDF_LANG_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING],()=>([e,a,u,c])=>{const s=z_.replace(e.typedValue,a.typedValue,u.typedValue,c.typedValue);return(0,o.langString)(s,e.language)}).collect()})}static replace(e,a,u,c=""){return c=i.TermFunctionRegex.cleanFlags(c),c.includes("x")&&(a=i.TermFunctionRegex.flagX(a)),c.includes("q")?a=i.TermFunctionRegex.flagQ(a):u=u.replaceAll("$0",()=>"$&"),c=`${c.replaceAll(/[qx]/gu,"")}g`,e.replaceAll(new RegExp(a,c),u)}};return Yf.TermFunctionReplace=n,Yf}var mw;function bC(){if(mw)return Kf;mw=1,Object.defineProperty(Kf,"__esModule",{value:!0}),Kf.ActorFunctionFactoryTermReplace=void 0;const i=K(),r=$(),o=gC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.REPLACE],termFunction:!0})}async run(e){return new o.TermFunctionReplace}};return Kf.ActorFunctionFactoryTermReplace=n,Kf}var gw;function vC(){return gw||(gw=1,(function(i){var r=wa&&wa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=wa&&wa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(bC(),i)})(wa)),wa}var ja={},kf={},ep={},bw;function TC(){if(bw)return ep;bw=1,Object.defineProperty(ep,"__esModule",{value:!0}),ep.TermFunctionRound=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.ROUND,overloads:(0,r.declare)(r.SparqlOperator.ROUND).numericConverter(()=>t=>Math.round(t)).collect()})}};return ep.TermFunctionRound=o,ep}var vw;function OC(){if(vw)return kf;vw=1,Object.defineProperty(kf,"__esModule",{value:!0}),kf.ActorFunctionFactoryTermRound=void 0;const i=K(),r=$(),o=TC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.ROUND],termFunction:!0})}async run(e){return new o.TermFunctionRound}};return kf.ActorFunctionFactoryTermRound=n,kf}var Tw;function SC(){return Tw||(Tw=1,(function(i){var r=ja&&ja.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ja&&ja.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(OC(),i)})(ja)),ja}var Ra={},tp={},rp={},o1={},nt={},u1,Ow;function mm(){if(Ow)return u1;Ow=1,u1=i;function i(r,o){if(!r)throw new Error(o||"Assertion failed")}return i.equal=function(o,n,t){if(o!=n)throw new Error(t||"Assertion failed: "+o+" != "+n)},u1}var Jm={exports:{}},Sw;function FC(){return Sw||(Sw=1,typeof Object.create=="function"?Jm.exports=function(r,o){o&&(r.super_=o,r.prototype=Object.create(o.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:Jm.exports=function(r,o){if(o){r.super_=o;var n=function(){};n.prototype=o.prototype,r.prototype=new n,r.prototype.constructor=r}}),Jm.exports}var Fw;function Jr(){if(Fw)return nt;Fw=1;var i=mm(),r=FC();nt.inherits=r;function o(R,M){return(R.charCodeAt(M)&64512)!==55296||M<0||M+1>=R.length?!1:(R.charCodeAt(M+1)&64512)===56320}function n(R,M){if(Array.isArray(R))return R.slice();if(!R)return[];var C=[];if(typeof R=="string")if(M){if(M==="hex")for(R=R.replace(/[^a-z0-9]+/ig,""),R.length%2!==0&&(R="0"+R),G=0;G<R.length;G+=2)C.push(parseInt(R[G]+R[G+1],16))}else for(var H=0,G=0;G<R.length;G++){var J=R.charCodeAt(G);J<128?C[H++]=J:J<2048?(C[H++]=J>>6|192,C[H++]=J&63|128):o(R,G)?(J=65536+((J&1023)<<10)+(R.charCodeAt(++G)&1023),C[H++]=J>>18|240,C[H++]=J>>12&63|128,C[H++]=J>>6&63|128,C[H++]=J&63|128):(C[H++]=J>>12|224,C[H++]=J>>6&63|128,C[H++]=J&63|128)}else for(G=0;G<R.length;G++)C[G]=R[G]|0;return C}nt.toArray=n;function t(R){for(var M="",C=0;C<R.length;C++)M+=u(R[C].toString(16));return M}nt.toHex=t;function e(R){var M=R>>>24|R>>>8&65280|R<<8&16711680|(R&255)<<24;return M>>>0}nt.htonl=e;function a(R,M){for(var C="",H=0;H<R.length;H++){var G=R[H];M==="little"&&(G=e(G)),C+=c(G.toString(16))}return C}nt.toHex32=a;function u(R){return R.length===1?"0"+R:R}nt.zero2=u;function c(R){return R.length===7?"0"+R:R.length===6?"00"+R:R.length===5?"000"+R:R.length===4?"0000"+R:R.length===3?"00000"+R:R.length===2?"000000"+R:R.length===1?"0000000"+R:R}nt.zero8=c;function s(R,M,C,H){var G=C-M;i(G%4===0);for(var J=new Array(G/4),ne=0,te=M;ne<J.length;ne++,te+=4){var Z;H==="big"?Z=R[te]<<24|R[te+1]<<16|R[te+2]<<8|R[te+3]:Z=R[te+3]<<24|R[te+2]<<16|R[te+1]<<8|R[te],J[ne]=Z>>>0}return J}nt.join32=s;function l(R,M){for(var C=new Array(R.length*4),H=0,G=0;H<R.length;H++,G+=4){var J=R[H];M==="big"?(C[G]=J>>>24,C[G+1]=J>>>16&255,C[G+2]=J>>>8&255,C[G+3]=J&255):(C[G+3]=J>>>24,C[G+2]=J>>>16&255,C[G+1]=J>>>8&255,C[G]=J&255)}return C}nt.split32=l;function d(R,M){return R>>>M|R<<32-M}nt.rotr32=d;function f(R,M){return R<<M|R>>>32-M}nt.rotl32=f;function h(R,M){return R+M>>>0}nt.sum32=h;function p(R,M,C){return R+M+C>>>0}nt.sum32_3=p;function y(R,M,C,H){return R+M+C+H>>>0}nt.sum32_4=y;function _(R,M,C,H,G){return R+M+C+H+G>>>0}nt.sum32_5=_;function m(R,M,C,H){var G=R[M],J=R[M+1],ne=H+J>>>0,te=(ne<H?1:0)+C+G;R[M]=te>>>0,R[M+1]=ne}nt.sum64=m;function O(R,M,C,H){var G=M+H>>>0,J=(G<M?1:0)+R+C;return J>>>0}nt.sum64_hi=O;function v(R,M,C,H){var G=M+H;return G>>>0}nt.sum64_lo=v;function S(R,M,C,H,G,J,ne,te){var Z=0,ye=M;ye=ye+H>>>0,Z+=ye<M?1:0,ye=ye+J>>>0,Z+=ye<J?1:0,ye=ye+te>>>0,Z+=ye<te?1:0;var ve=R+C+G+ne+Z;return ve>>>0}nt.sum64_4_hi=S;function E(R,M,C,H,G,J,ne,te){var Z=M+H+J+te;return Z>>>0}nt.sum64_4_lo=E;function j(R,M,C,H,G,J,ne,te,Z,ye){var ve=0,Te=M;Te=Te+H>>>0,ve+=Te<M?1:0,Te=Te+J>>>0,ve+=Te<J?1:0,Te=Te+te>>>0,ve+=Te<te?1:0,Te=Te+ye>>>0,ve+=Te<ye?1:0;var ee=R+C+G+ne+Z+ve;return ee>>>0}nt.sum64_5_hi=j;function Q(R,M,C,H,G,J,ne,te,Z,ye){var ve=M+H+J+te+ye;return ve>>>0}nt.sum64_5_lo=Q;function z(R,M,C){var H=M<<32-C|R>>>C;return H>>>0}nt.rotr64_hi=z;function g(R,M,C){var H=R<<32-C|M>>>C;return H>>>0}nt.rotr64_lo=g;function F(R,M,C){return R>>>C}nt.shr64_hi=F;function P(R,M,C){var H=R<<32-C|M>>>C;return H>>>0}return nt.shr64_lo=P,nt}var s1={},Aw;function gm(){if(Aw)return s1;Aw=1;var i=Jr(),r=mm();function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return s1.BlockHash=o,o.prototype.update=function(t,e){if(t=i.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){t=this.pending;var a=t.length%this._delta8;this.pending=t.slice(t.length-a,t.length),this.pending.length===0&&(this.pending=null),t=i.join32(t,0,t.length-a,this.endian);for(var u=0;u<t.length;u+=this._delta32)this._update(t,u,u+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),r(this.pending===null),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,a=e-(t+this.padLength)%e,u=new Array(a+this.padLength);u[0]=128;for(var c=1;c<a;c++)u[c]=0;if(t<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)u[c++]=0;u[c++]=0,u[c++]=0,u[c++]=0,u[c++]=0,u[c++]=t>>>24&255,u[c++]=t>>>16&255,u[c++]=t>>>8&255,u[c++]=t&255}else for(u[c++]=t&255,u[c++]=t>>>8&255,u[c++]=t>>>16&255,u[c++]=t>>>24&255,u[c++]=0,u[c++]=0,u[c++]=0,u[c++]=0,s=8;s<this.padLength;s++)u[c++]=0;return u},s1}var Da={},Vr={},ww;function LI(){if(ww)return Vr;ww=1;var i=Jr(),r=i.rotr32;function o(l,d,f,h){if(l===0)return n(d,f,h);if(l===1||l===3)return e(d,f,h);if(l===2)return t(d,f,h)}Vr.ft_1=o;function n(l,d,f){return l&d^~l&f}Vr.ch32=n;function t(l,d,f){return l&d^l&f^d&f}Vr.maj32=t;function e(l,d,f){return l^d^f}Vr.p32=e;function a(l){return r(l,2)^r(l,13)^r(l,22)}Vr.s0_256=a;function u(l){return r(l,6)^r(l,11)^r(l,25)}Vr.s1_256=u;function c(l){return r(l,7)^r(l,18)^l>>>3}Vr.g0_256=c;function s(l){return r(l,17)^r(l,19)^l>>>10}return Vr.g1_256=s,Vr}var c1,Ew;function AC(){if(Ew)return c1;Ew=1;var i=Jr(),r=gm(),o=LI(),n=i.rotl32,t=i.sum32,e=i.sum32_5,a=o.ft_1,u=r.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function s(){if(!(this instanceof s))return new s;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return i.inherits(s,u),c1=s,s.blockSize=512,s.outSize=160,s.hmacStrength=80,s.padLength=64,s.prototype._update=function(d,f){for(var h=this.W,p=0;p<16;p++)h[p]=d[f+p];for(;p<h.length;p++)h[p]=n(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);var y=this.h[0],_=this.h[1],m=this.h[2],O=this.h[3],v=this.h[4];for(p=0;p<h.length;p++){var S=~~(p/20),E=e(n(y,5),a(S,_,m,O),v,h[p],c[S]);v=O,O=m,m=n(_,30),_=y,y=E}this.h[0]=t(this.h[0],y),this.h[1]=t(this.h[1],_),this.h[2]=t(this.h[2],m),this.h[3]=t(this.h[3],O),this.h[4]=t(this.h[4],v)},s.prototype._digest=function(d){return d==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")},c1}var l1,jw;function xI(){if(jw)return l1;jw=1;var i=Jr(),r=gm(),o=LI(),n=mm(),t=i.sum32,e=i.sum32_4,a=i.sum32_5,u=o.ch32,c=o.maj32,s=o.s0_256,l=o.s1_256,d=o.g0_256,f=o.g1_256,h=r.BlockHash,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;h.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=p,this.W=new Array(64)}return i.inherits(y,h),l1=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(m,O){for(var v=this.W,S=0;S<16;S++)v[S]=m[O+S];for(;S<v.length;S++)v[S]=e(f(v[S-2]),v[S-7],d(v[S-15]),v[S-16]);var E=this.h[0],j=this.h[1],Q=this.h[2],z=this.h[3],g=this.h[4],F=this.h[5],P=this.h[6],R=this.h[7];for(n(this.k.length===v.length),S=0;S<v.length;S++){var M=a(R,l(g),u(g,F,P),this.k[S],v[S]),C=t(s(E),c(E,j,Q));R=P,P=F,F=g,g=t(z,M),z=Q,Q=j,j=E,E=t(M,C)}this.h[0]=t(this.h[0],E),this.h[1]=t(this.h[1],j),this.h[2]=t(this.h[2],Q),this.h[3]=t(this.h[3],z),this.h[4]=t(this.h[4],g),this.h[5]=t(this.h[5],F),this.h[6]=t(this.h[6],P),this.h[7]=t(this.h[7],R)},y.prototype._digest=function(m){return m==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")},l1}var d1,Rw;function wC(){if(Rw)return d1;Rw=1;var i=Jr(),r=xI();function o(){if(!(this instanceof o))return new o;r.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return i.inherits(o,r),d1=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(t){return t==="hex"?i.toHex32(this.h.slice(0,7),"big"):i.split32(this.h.slice(0,7),"big")},d1}var f1,Dw;function BI(){if(Dw)return f1;Dw=1;var i=Jr(),r=gm(),o=mm(),n=i.rotr64_hi,t=i.rotr64_lo,e=i.shr64_hi,a=i.shr64_lo,u=i.sum64,c=i.sum64_hi,s=i.sum64_lo,l=i.sum64_4_hi,d=i.sum64_4_lo,f=i.sum64_5_hi,h=i.sum64_5_lo,p=r.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _(){if(!(this instanceof _))return new _;p.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}i.inherits(_,p),f1=_,_.blockSize=1024,_.outSize=512,_.hmacStrength=192,_.padLength=128,_.prototype._prepareBlock=function(C,H){for(var G=this.W,J=0;J<32;J++)G[J]=C[H+J];for(;J<G.length;J+=2){var ne=P(G[J-4],G[J-3]),te=R(G[J-4],G[J-3]),Z=G[J-14],ye=G[J-13],ve=g(G[J-30],G[J-29]),Te=F(G[J-30],G[J-29]),ee=G[J-32],Oe=G[J-31];G[J]=l(ne,te,Z,ye,ve,Te,ee,Oe),G[J+1]=d(ne,te,Z,ye,ve,Te,ee,Oe)}},_.prototype._update=function(C,H){this._prepareBlock(C,H);var G=this.W,J=this.h[0],ne=this.h[1],te=this.h[2],Z=this.h[3],ye=this.h[4],ve=this.h[5],Te=this.h[6],ee=this.h[7],Oe=this.h[8],me=this.h[9],Se=this.h[10],be=this.h[11],Fe=this.h[12],q=this.h[13],b=this.h[14],w=this.h[15];o(this.k.length===G.length);for(var T=0;T<G.length;T+=2){var A=b,D=w,x=Q(Oe,me),I=z(Oe,me),U=m(Oe,me,Se,be,Fe),X=O(Oe,me,Se,be,Fe,q),V=this.k[T],Y=this.k[T+1],ue=G[T],se=G[T+1],de=f(A,D,x,I,U,X,V,Y,ue,se),_e=h(A,D,x,I,U,X,V,Y,ue,se);A=E(J,ne),D=j(J,ne),x=v(J,ne,te,Z,ye),I=S(J,ne,te,Z,ye,ve);var ge=c(A,D,x,I),fe=s(A,D,x,I);b=Fe,w=q,Fe=Se,q=be,Se=Oe,be=me,Oe=c(Te,ee,de,_e),me=s(ee,ee,de,_e),Te=ye,ee=ve,ye=te,ve=Z,te=J,Z=ne,J=c(de,_e,ge,fe),ne=s(de,_e,ge,fe)}u(this.h,0,J,ne),u(this.h,2,te,Z),u(this.h,4,ye,ve),u(this.h,6,Te,ee),u(this.h,8,Oe,me),u(this.h,10,Se,be),u(this.h,12,Fe,q),u(this.h,14,b,w)},_.prototype._digest=function(C){return C==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")};function m(M,C,H,G,J){var ne=M&H^~M&J;return ne<0&&(ne+=4294967296),ne}function O(M,C,H,G,J,ne){var te=C&G^~C&ne;return te<0&&(te+=4294967296),te}function v(M,C,H,G,J){var ne=M&H^M&J^H&J;return ne<0&&(ne+=4294967296),ne}function S(M,C,H,G,J,ne){var te=C&G^C&ne^G&ne;return te<0&&(te+=4294967296),te}function E(M,C){var H=n(M,C,28),G=n(C,M,2),J=n(C,M,7),ne=H^G^J;return ne<0&&(ne+=4294967296),ne}function j(M,C){var H=t(M,C,28),G=t(C,M,2),J=t(C,M,7),ne=H^G^J;return ne<0&&(ne+=4294967296),ne}function Q(M,C){var H=n(M,C,14),G=n(M,C,18),J=n(C,M,9),ne=H^G^J;return ne<0&&(ne+=4294967296),ne}function z(M,C){var H=t(M,C,14),G=t(M,C,18),J=t(C,M,9),ne=H^G^J;return ne<0&&(ne+=4294967296),ne}function g(M,C){var H=n(M,C,1),G=n(M,C,8),J=e(M,C,7),ne=H^G^J;return ne<0&&(ne+=4294967296),ne}function F(M,C){var H=t(M,C,1),G=t(M,C,8),J=a(M,C,7),ne=H^G^J;return ne<0&&(ne+=4294967296),ne}function P(M,C){var H=n(M,C,19),G=n(C,M,29),J=e(M,C,6),ne=H^G^J;return ne<0&&(ne+=4294967296),ne}function R(M,C){var H=t(M,C,19),G=t(C,M,29),J=a(M,C,6),ne=H^G^J;return ne<0&&(ne+=4294967296),ne}return f1}var p1,Pw;function EC(){if(Pw)return p1;Pw=1;var i=Jr(),r=BI();function o(){if(!(this instanceof o))return new o;r.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return i.inherits(o,r),p1=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(t){return t==="hex"?i.toHex32(this.h.slice(0,12),"big"):i.split32(this.h.slice(0,12),"big")},p1}var Mw;function jC(){return Mw||(Mw=1,Da.sha1=AC(),Da.sha224=wC(),Da.sha256=xI(),Da.sha384=EC(),Da.sha512=BI()),Da}var h1={},Nw;function RC(){if(Nw)return h1;Nw=1;var i=Jr(),r=gm(),o=i.rotl32,n=i.sum32,t=i.sum32_3,e=i.sum32_4,a=r.BlockHash;function u(){if(!(this instanceof u))return new u;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}i.inherits(u,a),h1.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(_,m){for(var O=this.h[0],v=this.h[1],S=this.h[2],E=this.h[3],j=this.h[4],Q=O,z=v,g=S,F=E,P=j,R=0;R<80;R++){var M=n(o(e(O,c(R,v,S,E),_[d[R]+m],s(R)),h[R]),j);O=j,j=E,E=o(S,10),S=v,v=M,M=n(o(e(Q,c(79-R,z,g,F),_[f[R]+m],l(R)),p[R]),P),Q=P,P=F,F=o(g,10),g=z,z=M}M=t(this.h[1],S,F),this.h[1]=t(this.h[2],E,P),this.h[2]=t(this.h[3],j,Q),this.h[3]=t(this.h[4],O,z),this.h[4]=t(this.h[0],v,g),this.h[0]=M},u.prototype._digest=function(_){return _==="hex"?i.toHex32(this.h,"little"):i.split32(this.h,"little")};function c(y,_,m,O){return y<=15?_^m^O:y<=31?_&m|~_&O:y<=47?(_|~m)^O:y<=63?_&O|m&~O:_^(m|~O)}function s(y){return y<=15?0:y<=31?1518500249:y<=47?1859775393:y<=63?2400959708:2840853838}function l(y){return y<=15?1352829926:y<=31?1548603684:y<=47?1836072691:y<=63?2053994217:0}var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],p=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return h1}var y1,Iw;function DC(){if(Iw)return y1;Iw=1;var i=Jr(),r=mm();function o(n,t,e){if(!(this instanceof o))return new o(n,t,e);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(i.toArray(t,e))}return y1=o,o.prototype._init=function(t){t.length>this.blockSize&&(t=new this.Hash().update(t).digest()),r(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=new this.Hash().update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=new this.Hash().update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)},y1}var qw;function Ug(){return qw||(qw=1,(function(i){var r=i;r.utils=Jr(),r.common=gm(),r.sha=jC(),r.ripemd=RC(),r.hmac=DC(),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160})(o1)),o1}var Lw;function PC(){if(Lw)return rp;Lw=1,Object.defineProperty(rp,"__esModule",{value:!0}),rp.TermFunctionSha1=void 0;const i=K(),r=$(),o=Ug();let n=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.SHA1,overloads:(0,r.declare)(r.SparqlOperator.SHA1).onString1Typed(()=>e=>(0,r.string)((0,o.sha1)().update(e).digest("hex"))).collect()})}};return rp.TermFunctionSha1=n,rp}var xw;function MC(){if(xw)return tp;xw=1,Object.defineProperty(tp,"__esModule",{value:!0}),tp.ActorFunctionFactoryTermSha1=void 0;const i=K(),r=$(),o=PC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.SHA1],termFunction:!0})}async run(e){return new o.TermFunctionSha1}};return tp.ActorFunctionFactoryTermSha1=n,tp}var Bw;function NC(){return Bw||(Bw=1,(function(i){var r=Ra&&Ra.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ra&&Ra.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(MC(),i)})(Ra)),Ra}var Pa={},np={},ip={},Cw;function IC(){if(Cw)return ip;Cw=1,Object.defineProperty(ip,"__esModule",{value:!0}),ip.TermFunctionSeconds=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.SECONDS,overloads:(0,r.declare)(r.SparqlOperator.SECONDS).onDateTime1(()=>t=>(0,r.decimal)(t.typedValue.seconds)).set([r.TypeURL.XSD_TIME],()=>([t])=>(0,r.integer)(t.typedValue.seconds)).collect()})}};return ip.TermFunctionSeconds=o,ip}var Qw;function qC(){if(Qw)return np;Qw=1,Object.defineProperty(np,"__esModule",{value:!0}),np.ActorFunctionFactoryTermSeconds=void 0;const i=K(),r=$(),o=IC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.SECONDS],termFunction:!0})}async run(e){return new o.TermFunctionSeconds}};return np.ActorFunctionFactoryTermSeconds=n,np}var Uw;function LC(){return Uw||(Uw=1,(function(i){var r=Pa&&Pa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Pa&&Pa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(qC(),i)})(Pa)),Pa}var Ma={},ap={},op={},Vw;function xC(){if(Vw)return op;Vw=1,Object.defineProperty(op,"__esModule",{value:!0}),op.TermFunctionSha256=void 0;const i=K(),r=$(),o=Ug();let n=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.SHA256,overloads:(0,r.declare)(r.SparqlOperator.SHA256).onString1Typed(()=>e=>(0,r.string)((0,o.sha256)().update(e).digest("hex"))).collect()})}};return op.TermFunctionSha256=n,op}var Gw;function BC(){if(Gw)return ap;Gw=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.ActorFunctionFactoryTermSha256=void 0;const i=K(),r=$(),o=xC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.SHA256],termFunction:!0})}async run(e){return new o.TermFunctionSha256}};return ap.ActorFunctionFactoryTermSha256=n,ap}var Xw;function CC(){return Xw||(Xw=1,(function(i){var r=Ma&&Ma.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ma&&Ma.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(BC(),i)})(Ma)),Ma}var Na={},up={},sp={},zw;function QC(){if(zw)return sp;zw=1,Object.defineProperty(sp,"__esModule",{value:!0}),sp.TermFunctionSha384=void 0;const i=K(),r=$(),o=Ug();let n=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.SHA384,overloads:(0,r.declare)(r.SparqlOperator.SHA384).onString1Typed(()=>e=>(0,r.string)((0,o.sha384)().update(e).digest("hex"))).collect()})}};return sp.TermFunctionSha384=n,sp}var Hw;function UC(){if(Hw)return up;Hw=1,Object.defineProperty(up,"__esModule",{value:!0}),up.ActorFunctionFactoryTermSha384=void 0;const i=K(),r=$(),o=QC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.SHA384],termFunction:!0})}async run(e){return new o.TermFunctionSha384}};return up.ActorFunctionFactoryTermSha384=n,up}var $w;function VC(){return $w||($w=1,(function(i){var r=Na&&Na.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Na&&Na.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(UC(),i)})(Na)),Na}var Ia={},cp={},lp={},Jw;function GC(){if(Jw)return lp;Jw=1,Object.defineProperty(lp,"__esModule",{value:!0}),lp.TermFunctionSha512=void 0;const i=K(),r=$(),o=Ug();let n=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.SHA512,overloads:(0,r.declare)(r.SparqlOperator.SHA512).onString1Typed(()=>e=>(0,r.string)((0,o.sha512)().update(e).digest("hex"))).collect()})}};return lp.TermFunctionSha512=n,lp}var Kw;function XC(){if(Kw)return cp;Kw=1,Object.defineProperty(cp,"__esModule",{value:!0}),cp.ActorFunctionFactoryTermSha512=void 0;const i=K(),r=$(),o=GC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.SHA512],termFunction:!0})}async run(e){return new o.TermFunctionSha512}};return cp.ActorFunctionFactoryTermSha512=n,cp}var Yw;function zC(){return Yw||(Yw=1,(function(i){var r=Ia&&Ia.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ia&&Ia.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(XC(),i)})(Ia)),Ia}var qa={},dp={},fp={},Ww;function HC(){if(Ww)return fp;Ww=1,Object.defineProperty(fp,"__esModule",{value:!0}),fp.TermFunctionStrAfter=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.STRAFTER,overloads:(0,r.declare)(r.SparqlOperator.STRAFTER).onBinaryTyped([r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING],()=>(t,e)=>(0,r.string)(t.slice(t.indexOf(e)).slice(e.length))).onBinary([r.TypeURL.RDF_LANG_STRING,r.TypeURL.XSD_STRING],()=>(t,e)=>{const[a,u]=[t.typedValue,e.typedValue],c=a.slice(a.indexOf(u)).slice(u.length);return c||!u?(0,r.langString)(c,t.language):(0,r.string)(c)}).onBinary([r.TypeURL.RDF_LANG_STRING,r.TypeURL.RDF_LANG_STRING],()=>(t,e)=>{if(t.language!==e.language)throw new r.IncompatibleLanguageOperation(t,e);const[a,u]=[t.typedValue,e.typedValue],c=a.slice(a.indexOf(u)).slice(u.length);return c||!u?(0,r.langString)(c,t.language):(0,r.string)(c)}).collect()})}};return fp.TermFunctionStrAfter=o,fp}var Zw;function $C(){if(Zw)return dp;Zw=1,Object.defineProperty(dp,"__esModule",{value:!0}),dp.ActorFunctionFactoryTermStrAfter=void 0;const i=K(),r=$(),o=HC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.STRAFTER],termFunction:!0})}async run(e){return new o.TermFunctionStrAfter}};return dp.ActorFunctionFactoryTermStrAfter=n,dp}var kw;function JC(){return kw||(kw=1,(function(i){var r=qa&&qa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=qa&&qa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o($C(),i)})(qa)),qa}var La={},pp={},hp={},eE;function KC(){if(eE)return hp;eE=1,Object.defineProperty(hp,"__esModule",{value:!0}),hp.TermFunctionStrBefore=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.STRBEFORE,overloads:(0,r.declare)(r.SparqlOperator.STRBEFORE).onBinaryTyped([r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING],()=>(t,e)=>(0,r.string)(t.slice(0,Math.max(0,t.indexOf(e))))).onBinary([r.TypeURL.RDF_LANG_STRING,r.TypeURL.XSD_STRING],()=>(t,e)=>{const[a,u]=[t.typedValue,e.typedValue],c=t.typedValue.slice(0,Math.max(0,a.indexOf(u)));return c||!u?(0,r.langString)(c,t.language):(0,r.string)(c)}).onBinary([r.TypeURL.RDF_LANG_STRING,r.TypeURL.RDF_LANG_STRING],()=>(t,e)=>{if(t.language!==e.language)throw new r.IncompatibleLanguageOperation(t,e);const[a,u]=[t.typedValue,e.typedValue],c=t.typedValue.slice(0,Math.max(0,a.indexOf(u)));return c||!u?(0,r.langString)(c,t.language):(0,r.string)(c)}).collect()})}};return hp.TermFunctionStrBefore=o,hp}var tE;function YC(){if(tE)return pp;tE=1,Object.defineProperty(pp,"__esModule",{value:!0}),pp.ActorFunctionFactoryTermStrBefore=void 0;const i=K(),r=$(),o=KC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.STRBEFORE],termFunction:!0})}async run(e){return new o.TermFunctionStrBefore}};return pp.ActorFunctionFactoryTermStrBefore=n,pp}var rE;function WC(){return rE||(rE=1,(function(i){var r=La&&La.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=La&&La.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(YC(),i)})(La)),La}var xa={},yp={},_p={},nE;function ZC(){if(nE)return _p;nE=1,Object.defineProperty(_p,"__esModule",{value:!0}),_p.TermFunctionStrDt=void 0;const i=K(),r=pe(),o=$();let n=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:o.SparqlOperator.STRDT,overloads:(0,o.declare)(o.SparqlOperator.STRDT).set([o.TypeURL.XSD_STRING,"namedNode"],e=>([a,u])=>{const c=e.context.getSafe(r.KeysInitQuery.dataFactory),s=c.literal(a.typedValue,c.namedNode(u.value));return new o.TermTransformer(e.context.getSafe(r.KeysExpressionEvaluator.superTypeProvider)).transformLiteral(s)}).collect()})}};return _p.TermFunctionStrDt=n,_p}var iE;function kC(){if(iE)return yp;iE=1,Object.defineProperty(yp,"__esModule",{value:!0}),yp.ActorFunctionFactoryTermStrDt=void 0;const i=K(),r=$(),o=ZC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.STRDT],termFunction:!0})}async run(e){return new o.TermFunctionStrDt}};return yp.ActorFunctionFactoryTermStrDt=n,yp}var aE;function eQ(){return aE||(aE=1,(function(i){var r=xa&&xa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=xa&&xa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(kC(),i)})(xa)),xa}var Ba={},mp={},gp={},oE;function tQ(){if(oE)return gp;oE=1,Object.defineProperty(gp,"__esModule",{value:!0}),gp.TermFunctionStrEnds=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.STRENDS,overloads:(0,r.declare)(r.SparqlOperator.STRENDS).onBinaryTyped([r.TypeAlias.SPARQL_STRINGLY,r.TypeURL.XSD_STRING],()=>(t,e)=>(0,r.bool)(t.endsWith(e))).onBinary([r.TypeURL.RDF_LANG_STRING,r.TypeURL.RDF_LANG_STRING],()=>(t,e)=>{if(t.language!==e.language)throw new r.IncompatibleLanguageOperation(t,e);return(0,r.bool)(t.typedValue.endsWith(e.typedValue))}).collect()})}};return gp.TermFunctionStrEnds=o,gp}var uE;function rQ(){if(uE)return mp;uE=1,Object.defineProperty(mp,"__esModule",{value:!0}),mp.ActorFunctionFactoryTermStrEnds=void 0;const i=K(),r=$(),o=tQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.STRENDS],termFunction:!0})}async run(e){return new o.TermFunctionStrEnds}};return mp.ActorFunctionFactoryTermStrEnds=n,mp}var sE;function nQ(){return sE||(sE=1,(function(i){var r=Ba&&Ba.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ba&&Ba.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(rQ(),i)})(Ba)),Ba}var Ca={},bp={},vp={},cE;function iQ(){if(cE)return vp;cE=1,Object.defineProperty(vp,"__esModule",{value:!0}),vp.TermFunctionStrLang=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.STRLANG,overloads:(0,r.declare)(r.SparqlOperator.STRLANG).onBinaryTyped([r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING],()=>(t,e)=>new r.LangStringLiteral(t,e.toLowerCase())).collect()})}};return vp.TermFunctionStrLang=o,vp}var lE;function aQ(){if(lE)return bp;lE=1,Object.defineProperty(bp,"__esModule",{value:!0}),bp.ActorFunctionFactoryTermStrLang=void 0;const i=K(),r=$(),o=iQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.STRLANG],termFunction:!0})}async run(e){return new o.TermFunctionStrLang}};return bp.ActorFunctionFactoryTermStrLang=n,bp}var dE;function oQ(){return dE||(dE=1,(function(i){var r=Ca&&Ca.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ca&&Ca.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(aQ(),i)})(Ca)),Ca}var Qa={},Tp={},Op={},fE;function uQ(){if(fE)return Op;fE=1,Object.defineProperty(Op,"__esModule",{value:!0}),Op.TermFunctionStrLen=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.STRLEN,overloads:(0,r.declare)(r.SparqlOperator.STRLEN).onStringly1(()=>t=>(0,r.integer)([...t.typedValue].length)).collect()})}};return Op.TermFunctionStrLen=o,Op}var pE;function sQ(){if(pE)return Tp;pE=1,Object.defineProperty(Tp,"__esModule",{value:!0}),Tp.ActorFunctionFactoryTermStrLen=void 0;const i=K(),r=$(),o=uQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.STRLEN],termFunction:!0})}async run(e){return new o.TermFunctionStrLen}};return Tp.ActorFunctionFactoryTermStrLen=n,Tp}var hE;function cQ(){return hE||(hE=1,(function(i){var r=Qa&&Qa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Qa&&Qa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(sQ(),i)})(Qa)),Qa}var Ua={},Sp={},Fp={},yE;function lQ(){if(yE)return Fp;yE=1,Object.defineProperty(Fp,"__esModule",{value:!0}),Fp.TermFunctionStrStarts=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.STRSTARTS,overloads:(0,r.declare)(r.SparqlOperator.STRSTARTS).onBinaryTyped([r.TypeAlias.SPARQL_STRINGLY,r.TypeURL.XSD_STRING],()=>(t,e)=>(0,r.bool)(t.startsWith(e))).onBinary([r.TypeURL.RDF_LANG_STRING,r.TypeURL.RDF_LANG_STRING],()=>(t,e)=>{if(t.language!==e.language)throw new r.IncompatibleLanguageOperation(t,e);return(0,r.bool)(t.typedValue.startsWith(e.typedValue))}).collect()})}};return Fp.TermFunctionStrStarts=o,Fp}var _E;function dQ(){if(_E)return Sp;_E=1,Object.defineProperty(Sp,"__esModule",{value:!0}),Sp.ActorFunctionFactoryTermStrStarts=void 0;const i=K(),r=$(),o=lQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.STRSTARTS],termFunction:!0})}async run(e){return new o.TermFunctionStrStarts}};return Sp.ActorFunctionFactoryTermStrStarts=n,Sp}var mE;function fQ(){return mE||(mE=1,(function(i){var r=Ua&&Ua.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ua&&Ua.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(dQ(),i)})(Ua)),Ua}var Va={},Ap={},wp={},gE;function pQ(){if(gE)return wp;gE=1,Object.defineProperty(wp,"__esModule",{value:!0}),wp.TermFunctionStr=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.STR,overloads:(0,r.declare)(r.SparqlOperator.STR).onTerm1(()=>t=>(0,r.string)(t.str())).collect()})}};return wp.TermFunctionStr=o,wp}var bE;function hQ(){if(bE)return Ap;bE=1,Object.defineProperty(Ap,"__esModule",{value:!0}),Ap.ActorFunctionFactoryTermStr=void 0;const i=K(),r=$(),o=pQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.STR],termFunction:!0})}async run(e){return new o.TermFunctionStr}};return Ap.ActorFunctionFactoryTermStr=n,Ap}var vE;function yQ(){return vE||(vE=1,(function(i){var r=Va&&Va.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Va&&Va.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(hQ(),i)})(Va)),Va}var Ga={},Ep={},jp={},_1={},Km={},TE;function _Q(){return TE||(TE=1,Object.defineProperty(Km,"__esModule",{value:!0}),Km.default="ffffffff-ffff-ffff-ffff-ffffffffffff"),Km}var Ym={},OE;function mQ(){return OE||(OE=1,Object.defineProperty(Ym,"__esModule",{value:!0}),Ym.default="00000000-0000-0000-0000-000000000000"),Ym}var Wm={},Zm={},km={},SE;function gQ(){return SE||(SE=1,Object.defineProperty(km,"__esModule",{value:!0}),km.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i),km}var FE;function Vg(){if(FE)return Zm;FE=1,Object.defineProperty(Zm,"__esModule",{value:!0});const i=gQ();function r(o){return typeof o=="string"&&i.default.test(o)}return Zm.default=r,Zm}var AE;function Gg(){if(AE)return Wm;AE=1,Object.defineProperty(Wm,"__esModule",{value:!0});const i=Vg();function r(o){if(!(0,i.default)(o))throw TypeError("Invalid UUID");let n;return Uint8Array.of((n=parseInt(o.slice(0,8),16))>>>24,n>>>16&255,n>>>8&255,n&255,(n=parseInt(o.slice(9,13),16))>>>8,n&255,(n=parseInt(o.slice(14,18),16))>>>8,n&255,(n=parseInt(o.slice(19,23),16))>>>8,n&255,(n=parseInt(o.slice(24,36),16))/1099511627776&255,n/4294967296&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255)}return Wm.default=r,Wm}var Fs={},wE;function Tn(){if(wE)return Fs;wE=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.unsafeStringify=void 0;const i=Vg(),r=[];for(let t=0;t<256;++t)r.push((t+256).toString(16).slice(1));function o(t,e=0){return(r[t[e+0]]+r[t[e+1]]+r[t[e+2]]+r[t[e+3]]+"-"+r[t[e+4]]+r[t[e+5]]+"-"+r[t[e+6]]+r[t[e+7]]+"-"+r[t[e+8]]+r[t[e+9]]+"-"+r[t[e+10]]+r[t[e+11]]+r[t[e+12]]+r[t[e+13]]+r[t[e+14]]+r[t[e+15]]).toLowerCase()}Fs.unsafeStringify=o;function n(t,e=0){const a=o(t,e);if(!(0,i.default)(a))throw TypeError("Stringified UUID is invalid");return a}return Fs.default=n,Fs}var As={},eg={},EE;function K0(){if(EE)return eg;EE=1,Object.defineProperty(eg,"__esModule",{value:!0});let i;const r=new Uint8Array(16);function o(){if(!i){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");i=crypto.getRandomValues.bind(crypto)}return i(r)}return eg.default=o,eg}var jE;function CI(){if(jE)return As;jE=1,Object.defineProperty(As,"__esModule",{value:!0}),As.updateV1State=void 0;const i=K0(),r=Tn(),o={};function n(a,u,c){let s;const l=a?._v6??!1;if(a){const d=Object.keys(a);d.length===1&&d[0]==="_v6"&&(a=void 0)}if(a)s=e(a.random??a.rng?.()??(0,i.default)(),a.msecs,a.nsecs,a.clockseq,a.node,u,c);else{const d=Date.now(),f=(0,i.default)();t(o,d,f),s=e(f,o.msecs,o.nsecs,l?void 0:o.clockseq,l?void 0:o.node,u,c)}return u??(0,r.unsafeStringify)(s)}function t(a,u,c){return a.msecs??=-1/0,a.nsecs??=0,u===a.msecs?(a.nsecs++,a.nsecs>=1e4&&(a.node=void 0,a.nsecs=0)):u>a.msecs?a.nsecs=0:u<a.msecs&&(a.node=void 0),a.node||(a.node=c.slice(10,16),a.node[0]|=1,a.clockseq=(c[8]<<8|c[9])&16383),a.msecs=u,a}As.updateV1State=t;function e(a,u,c,s,l,d,f=0){if(a.length<16)throw new Error("Random bytes length must be >= 16");if(!d)d=new Uint8Array(16),f=0;else if(f<0||f+16>d.length)throw new RangeError(`UUID byte range ${f}:${f+15} is out of buffer bounds`);u??=Date.now(),c??=0,s??=(a[8]<<8|a[9])&16383,l??=a.slice(10,16),u+=122192928e5;const h=((u&268435455)*1e4+c)%4294967296;d[f++]=h>>>24&255,d[f++]=h>>>16&255,d[f++]=h>>>8&255,d[f++]=h&255;const p=u/4294967296*1e4&268435455;d[f++]=p>>>8&255,d[f++]=p&255,d[f++]=p>>>24&15|16,d[f++]=p>>>16&255,d[f++]=s>>>8|128,d[f++]=s&255;for(let y=0;y<6;++y)d[f++]=l[y];return d}return As.default=n,As}var tg={},RE;function QI(){if(RE)return tg;RE=1,Object.defineProperty(tg,"__esModule",{value:!0});const i=Gg(),r=Tn();function o(t){const e=typeof t=="string"?(0,i.default)(t):t,a=n(e);return typeof t=="string"?(0,r.unsafeStringify)(a):a}tg.default=o;function n(t){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}return tg}var m1={},rg={},DE;function bQ(){if(DE)return rg;DE=1,Object.defineProperty(rg,"__esModule",{value:!0});function i(f){const h=t(f),p=n(h,f.length*8);return r(p)}function r(f){const h=new Uint8Array(f.length*4);for(let p=0;p<f.length*4;p++)h[p]=f[p>>2]>>>p%4*8&255;return h}function o(f){return(f+64>>>9<<4)+14+1}function n(f,h){const p=new Uint32Array(o(h)).fill(0);p.set(f),p[h>>5]|=128<<h%32,p[p.length-1]=h,f=p;let y=1732584193,_=-271733879,m=-1732584194,O=271733878;for(let v=0;v<f.length;v+=16){const S=y,E=_,j=m,Q=O;y=c(y,_,m,O,f[v],7,-680876936),O=c(O,y,_,m,f[v+1],12,-389564586),m=c(m,O,y,_,f[v+2],17,606105819),_=c(_,m,O,y,f[v+3],22,-1044525330),y=c(y,_,m,O,f[v+4],7,-176418897),O=c(O,y,_,m,f[v+5],12,1200080426),m=c(m,O,y,_,f[v+6],17,-1473231341),_=c(_,m,O,y,f[v+7],22,-45705983),y=c(y,_,m,O,f[v+8],7,1770035416),O=c(O,y,_,m,f[v+9],12,-1958414417),m=c(m,O,y,_,f[v+10],17,-42063),_=c(_,m,O,y,f[v+11],22,-1990404162),y=c(y,_,m,O,f[v+12],7,1804603682),O=c(O,y,_,m,f[v+13],12,-40341101),m=c(m,O,y,_,f[v+14],17,-1502002290),_=c(_,m,O,y,f[v+15],22,1236535329),y=s(y,_,m,O,f[v+1],5,-165796510),O=s(O,y,_,m,f[v+6],9,-1069501632),m=s(m,O,y,_,f[v+11],14,643717713),_=s(_,m,O,y,f[v],20,-373897302),y=s(y,_,m,O,f[v+5],5,-701558691),O=s(O,y,_,m,f[v+10],9,38016083),m=s(m,O,y,_,f[v+15],14,-660478335),_=s(_,m,O,y,f[v+4],20,-405537848),y=s(y,_,m,O,f[v+9],5,568446438),O=s(O,y,_,m,f[v+14],9,-1019803690),m=s(m,O,y,_,f[v+3],14,-187363961),_=s(_,m,O,y,f[v+8],20,1163531501),y=s(y,_,m,O,f[v+13],5,-1444681467),O=s(O,y,_,m,f[v+2],9,-51403784),m=s(m,O,y,_,f[v+7],14,1735328473),_=s(_,m,O,y,f[v+12],20,-1926607734),y=l(y,_,m,O,f[v+5],4,-378558),O=l(O,y,_,m,f[v+8],11,-2022574463),m=l(m,O,y,_,f[v+11],16,1839030562),_=l(_,m,O,y,f[v+14],23,-35309556),y=l(y,_,m,O,f[v+1],4,-1530992060),O=l(O,y,_,m,f[v+4],11,1272893353),m=l(m,O,y,_,f[v+7],16,-155497632),_=l(_,m,O,y,f[v+10],23,-1094730640),y=l(y,_,m,O,f[v+13],4,681279174),O=l(O,y,_,m,f[v],11,-358537222),m=l(m,O,y,_,f[v+3],16,-722521979),_=l(_,m,O,y,f[v+6],23,76029189),y=l(y,_,m,O,f[v+9],4,-640364487),O=l(O,y,_,m,f[v+12],11,-421815835),m=l(m,O,y,_,f[v+15],16,530742520),_=l(_,m,O,y,f[v+2],23,-995338651),y=d(y,_,m,O,f[v],6,-198630844),O=d(O,y,_,m,f[v+7],10,1126891415),m=d(m,O,y,_,f[v+14],15,-1416354905),_=d(_,m,O,y,f[v+5],21,-57434055),y=d(y,_,m,O,f[v+12],6,1700485571),O=d(O,y,_,m,f[v+3],10,-1894986606),m=d(m,O,y,_,f[v+10],15,-1051523),_=d(_,m,O,y,f[v+1],21,-2054922799),y=d(y,_,m,O,f[v+8],6,1873313359),O=d(O,y,_,m,f[v+15],10,-30611744),m=d(m,O,y,_,f[v+6],15,-1560198380),_=d(_,m,O,y,f[v+13],21,1309151649),y=d(y,_,m,O,f[v+4],6,-145523070),O=d(O,y,_,m,f[v+11],10,-1120210379),m=d(m,O,y,_,f[v+2],15,718787259),_=d(_,m,O,y,f[v+9],21,-343485551),y=e(y,S),_=e(_,E),m=e(m,j),O=e(O,Q)}return Uint32Array.of(y,_,m,O)}function t(f){if(f.length===0)return new Uint32Array;const h=new Uint32Array(o(f.length*8)).fill(0);for(let p=0;p<f.length;p++)h[p>>2]|=(f[p]&255)<<p%4*8;return h}function e(f,h){const p=(f&65535)+(h&65535);return(f>>16)+(h>>16)+(p>>16)<<16|p&65535}function a(f,h){return f<<h|f>>>32-h}function u(f,h,p,y,_,m){return e(a(e(e(h,f),e(y,m)),_),p)}function c(f,h,p,y,_,m,O){return u(h&p|~h&y,f,h,_,m,O)}function s(f,h,p,y,_,m,O){return u(h&y|p&~y,f,h,_,m,O)}function l(f,h,p,y,_,m,O){return u(h^p^y,f,h,_,m,O)}function d(f,h,p,y,_,m,O){return u(p^(h|~y),f,h,_,m,O)}return rg.default=i,rg}var Gr={},PE;function Sg(){if(PE)return Gr;PE=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.URL=Gr.DNS=Gr.stringToBytes=void 0;const i=Gg(),r=Tn();function o(t){t=unescape(encodeURIComponent(t));const e=new Uint8Array(t.length);for(let a=0;a<t.length;++a)e[a]=t.charCodeAt(a);return e}Gr.stringToBytes=o,Gr.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Gr.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function n(t,e,a,u,c,s){const l=typeof a=="string"?o(a):a,d=typeof u=="string"?(0,i.default)(u):u;if(typeof u=="string"&&(u=(0,i.default)(u)),u?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+l.length);if(f.set(d),f.set(l,d.length),f=e(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,c){s=s||0;for(let h=0;h<16;++h)c[s+h]=f[h];return c}return(0,r.unsafeStringify)(f)}return Gr.default=n,Gr}var ME;function vQ(){return ME||(ME=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.URL=i.DNS=void 0;const r=bQ(),o=Sg();var n=Sg();Object.defineProperty(i,"DNS",{enumerable:!0,get:function(){return n.DNS}}),Object.defineProperty(i,"URL",{enumerable:!0,get:function(){return n.URL}});function t(e,a,u,c){return(0,o.default)(48,r.default,e,a,u,c)}t.DNS=o.DNS,t.URL=o.URL,i.default=t})(m1)),m1}var ng={},ig={},NE;function TQ(){if(NE)return ig;NE=1,Object.defineProperty(ig,"__esModule",{value:!0});const i=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);return ig.default={randomUUID:i},ig}var IE;function OQ(){if(IE)return ng;IE=1,Object.defineProperty(ng,"__esModule",{value:!0});const i=TQ(),r=K0(),o=Tn();function n(t,e,a){if(i.default.randomUUID&&!e&&!t)return i.default.randomUUID();t=t||{};const u=t.random??t.rng?.()??(0,r.default)();if(u.length<16)throw new Error("Random bytes length must be >= 16");if(u[6]=u[6]&15|64,u[8]=u[8]&63|128,e){if(a=a||0,a<0||a+16>e.length)throw new RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`);for(let c=0;c<16;++c)e[a+c]=u[c];return e}return(0,o.unsafeStringify)(u)}return ng.default=n,ng}var g1={},ag={},qE;function SQ(){if(qE)return ag;qE=1,Object.defineProperty(ag,"__esModule",{value:!0});function i(n,t,e,a){switch(n){case 0:return t&e^~t&a;case 1:return t^e^a;case 2:return t&e^t&a^e&a;case 3:return t^e^a}}function r(n,t){return n<<t|n>>>32-t}function o(n){const t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520],a=new Uint8Array(n.length+1);a.set(n),a[n.length]=128,n=a;const u=n.length/4+2,c=Math.ceil(u/16),s=new Array(c);for(let l=0;l<c;++l){const d=new Uint32Array(16);for(let f=0;f<16;++f)d[f]=n[l*64+f*4]<<24|n[l*64+f*4+1]<<16|n[l*64+f*4+2]<<8|n[l*64+f*4+3];s[l]=d}s[c-1][14]=(n.length-1)*8/Math.pow(2,32),s[c-1][14]=Math.floor(s[c-1][14]),s[c-1][15]=(n.length-1)*8&4294967295;for(let l=0;l<c;++l){const d=new Uint32Array(80);for(let m=0;m<16;++m)d[m]=s[l][m];for(let m=16;m<80;++m)d[m]=r(d[m-3]^d[m-8]^d[m-14]^d[m-16],1);let f=e[0],h=e[1],p=e[2],y=e[3],_=e[4];for(let m=0;m<80;++m){const O=Math.floor(m/20),v=r(f,5)+i(O,h,p,y)+_+t[O]+d[m]>>>0;_=y,y=p,p=r(h,30)>>>0,h=f,f=v}e[0]=e[0]+f>>>0,e[1]=e[1]+h>>>0,e[2]=e[2]+p>>>0,e[3]=e[3]+y>>>0,e[4]=e[4]+_>>>0}return Uint8Array.of(e[0]>>24,e[0]>>16,e[0]>>8,e[0],e[1]>>24,e[1]>>16,e[1]>>8,e[1],e[2]>>24,e[2]>>16,e[2]>>8,e[2],e[3]>>24,e[3]>>16,e[3]>>8,e[3],e[4]>>24,e[4]>>16,e[4]>>8,e[4])}return ag.default=o,ag}var LE;function FQ(){return LE||(LE=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.URL=i.DNS=void 0;const r=SQ(),o=Sg();var n=Sg();Object.defineProperty(i,"DNS",{enumerable:!0,get:function(){return n.DNS}}),Object.defineProperty(i,"URL",{enumerable:!0,get:function(){return n.URL}});function t(e,a,u,c){return(0,o.default)(80,r.default,e,a,u,c)}t.DNS=o.DNS,t.URL=o.URL,i.default=t})(g1)),g1}var og={},xE;function AQ(){if(xE)return og;xE=1,Object.defineProperty(og,"__esModule",{value:!0});const i=Tn(),r=CI(),o=QI();function n(t,e,a){t??={},a??=0;let u=(0,r.default)({...t,_v6:!0},new Uint8Array(16));if(u=(0,o.default)(u),e){for(let c=0;c<16;c++)e[a+c]=u[c];return e}return(0,i.unsafeStringify)(u)}return og.default=n,og}var ug={},BE;function wQ(){if(BE)return ug;BE=1,Object.defineProperty(ug,"__esModule",{value:!0});const i=Gg(),r=Tn();function o(t){const e=typeof t=="string"?(0,i.default)(t):t,a=n(e);return typeof t=="string"?(0,r.unsafeStringify)(a):a}ug.default=o;function n(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}return ug}var ws={},CE;function EQ(){if(CE)return ws;CE=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.updateV7State=void 0;const i=K0(),r=Tn(),o={};function n(a,u,c){let s;if(a)s=e(a.random??a.rng?.()??(0,i.default)(),a.msecs,a.seq,u,c);else{const l=Date.now(),d=(0,i.default)();t(o,l,d),s=e(d,o.msecs,o.seq,u,c)}return u??(0,r.unsafeStringify)(s)}function t(a,u,c){return a.msecs??=-1/0,a.seq??=0,u>a.msecs?(a.seq=c[6]<<23|c[7]<<16|c[8]<<8|c[9],a.msecs=u):(a.seq=a.seq+1|0,a.seq===0&&a.msecs++),a}ws.updateV7State=t;function e(a,u,c,s,l=0){if(a.length<16)throw new Error("Random bytes length must be >= 16");if(!s)s=new Uint8Array(16),l=0;else if(l<0||l+16>s.length)throw new RangeError(`UUID byte range ${l}:${l+15} is out of buffer bounds`);return u??=Date.now(),c??=a[6]*127<<24|a[7]<<16|a[8]<<8|a[9],s[l++]=u/1099511627776&255,s[l++]=u/4294967296&255,s[l++]=u/16777216&255,s[l++]=u/65536&255,s[l++]=u/256&255,s[l++]=u&255,s[l++]=112|c>>>28&15,s[l++]=c>>>20&255,s[l++]=128|c>>>14&63,s[l++]=c>>>6&255,s[l++]=c<<2&255|a[10]&3,s[l++]=a[11],s[l++]=a[12],s[l++]=a[13],s[l++]=a[14],s[l++]=a[15],s}return ws.default=n,ws}var sg={},QE;function jQ(){if(QE)return sg;QE=1,Object.defineProperty(sg,"__esModule",{value:!0});const i=Vg();function r(o){if(!(0,i.default)(o))throw TypeError("Invalid UUID");return parseInt(o.slice(14,15),16)}return sg.default=r,sg}var UE;function UI(){return UE||(UE=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.version=i.validate=i.v7=i.v6ToV1=i.v6=i.v5=i.v4=i.v3=i.v1ToV6=i.v1=i.stringify=i.parse=i.NIL=i.MAX=void 0;var r=_Q();Object.defineProperty(i,"MAX",{enumerable:!0,get:function(){return r.default}});var o=mQ();Object.defineProperty(i,"NIL",{enumerable:!0,get:function(){return o.default}});var n=Gg();Object.defineProperty(i,"parse",{enumerable:!0,get:function(){return n.default}});var t=Tn();Object.defineProperty(i,"stringify",{enumerable:!0,get:function(){return t.default}});var e=CI();Object.defineProperty(i,"v1",{enumerable:!0,get:function(){return e.default}});var a=QI();Object.defineProperty(i,"v1ToV6",{enumerable:!0,get:function(){return a.default}});var u=vQ();Object.defineProperty(i,"v3",{enumerable:!0,get:function(){return u.default}});var c=OQ();Object.defineProperty(i,"v4",{enumerable:!0,get:function(){return c.default}});var s=FQ();Object.defineProperty(i,"v5",{enumerable:!0,get:function(){return s.default}});var l=AQ();Object.defineProperty(i,"v6",{enumerable:!0,get:function(){return l.default}});var d=wQ();Object.defineProperty(i,"v6ToV1",{enumerable:!0,get:function(){return d.default}});var f=EQ();Object.defineProperty(i,"v7",{enumerable:!0,get:function(){return f.default}});var h=Vg();Object.defineProperty(i,"validate",{enumerable:!0,get:function(){return h.default}});var p=jQ();Object.defineProperty(i,"version",{enumerable:!0,get:function(){return p.default}})})(_1)),_1}var VE;function RQ(){if(VE)return jp;VE=1,Object.defineProperty(jp,"__esModule",{value:!0}),jp.TermFunctionStrUuid=void 0;const i=K(),r=$(),o=UI();let n=class extends i.TermFunctionBase{constructor(){super({arity:0,operator:r.SparqlOperator.STRUUID,overloads:(0,r.declare)(r.SparqlOperator.STRUUID).set([],()=>()=>(0,r.string)(o.v4())).collect()})}};return jp.TermFunctionStrUuid=n,jp}var GE;function DQ(){if(GE)return Ep;GE=1,Object.defineProperty(Ep,"__esModule",{value:!0}),Ep.ActorFunctionFactoryTermStrUuid=void 0;const i=K(),r=$(),o=RQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.STRUUID],termFunction:!0})}async run(e){return new o.TermFunctionStrUuid}};return Ep.ActorFunctionFactoryTermStrUuid=n,Ep}var XE;function PQ(){return XE||(XE=1,(function(i){var r=Ga&&Ga.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ga&&Ga.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(DQ(),i)})(Ga)),Ga}var Xa={},Rp={},Dp={},zE;function MQ(){if(zE)return Dp;zE=1,Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.TermFunctionSubStr=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:[2,3],operator:r.SparqlOperator.SUBSTR,overloads:(0,r.declare)(r.SparqlOperator.SUBSTR).onBinaryTyped([r.TypeURL.XSD_STRING,r.TypeURL.XSD_INTEGER],()=>(t,e)=>(0,r.string)([...t].slice(e-1).join(""))).onBinary([r.TypeURL.RDF_LANG_STRING,r.TypeURL.XSD_INTEGER],()=>(t,e)=>{const a=[...t.typedValue].slice(e.typedValue-1).join("");return(0,r.langString)(a,t.language)}).onTernaryTyped([r.TypeURL.XSD_STRING,r.TypeURL.XSD_INTEGER,r.TypeURL.XSD_INTEGER],()=>(t,e,a)=>(0,r.string)([...t].slice(e-1,a+e-1).join(""))).onTernary([r.TypeURL.RDF_LANG_STRING,r.TypeURL.XSD_INTEGER,r.TypeURL.XSD_INTEGER],()=>(t,e,a)=>{const u=[...t.typedValue].slice(e.typedValue-1,a.typedValue+e.typedValue-1).join("");return(0,r.langString)(u,t.language)}).collect()})}};return Dp.TermFunctionSubStr=o,Dp}var HE;function NQ(){if(HE)return Rp;HE=1,Object.defineProperty(Rp,"__esModule",{value:!0}),Rp.ActorFunctionFactoryTermSubStr=void 0;const i=K(),r=$(),o=MQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.SUBSTR],termFunction:!0})}async run(e){return new o.TermFunctionSubStr}};return Rp.ActorFunctionFactoryTermSubStr=n,Rp}var $E;function IQ(){return $E||($E=1,(function(i){var r=Xa&&Xa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Xa&&Xa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(NQ(),i)})(Xa)),Xa}var za={},Pp={},Mp={},JE;function qQ(){if(JE)return Mp;JE=1,Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.TermFunctionTimezone=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.TIMEZONE,overloads:(0,r.declare)(r.SparqlOperator.TIMEZONE).onDateTime1(()=>t=>{const e={hours:t.typedValue.zoneHours,minutes:t.typedValue.zoneMinutes};if(e.hours===void 0&&e.minutes===void 0)throw new r.InvalidTimezoneCall(t.str());return new r.DayTimeDurationLiteral(e)}).copy({from:[r.TypeURL.XSD_DATE_TIME],to:[r.TypeURL.XSD_DATE]}).copy({from:[r.TypeURL.XSD_DATE_TIME],to:[r.TypeURL.XSD_TIME]}).collect()})}};return Mp.TermFunctionTimezone=o,Mp}var KE;function LQ(){if(KE)return Pp;KE=1,Object.defineProperty(Pp,"__esModule",{value:!0}),Pp.ActorFunctionFactoryTermTimezone=void 0;const i=K(),r=$(),o=qQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.TIMEZONE],termFunction:!0})}async run(e){return new o.TermFunctionTimezone}};return Pp.ActorFunctionFactoryTermTimezone=n,Pp}var YE;function xQ(){return YE||(YE=1,(function(i){var r=za&&za.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=za&&za.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(LQ(),i)})(za)),za}var Ha={},Np={},Ip={},WE;function BQ(){if(WE)return Ip;WE=1,Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.TermFunctionSubtraction=void 0;const i=K(),r=pe(),o=$(),n=Qg();let t=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:o.SparqlOperator.SUBTRACTION,overloads:(0,o.declare)(o.SparqlOperator.SUBTRACTION).arithmetic(()=>(a,u)=>new n.BigNumber(a).minus(u).toNumber()).set([o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],a=>([u,c])=>new o.DayTimeDurationLiteral((0,o.elapsedDuration)(u.typedValue,c.typedValue,a.context.getSafe(r.KeysExpressionEvaluator.defaultTimeZone)))).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],to:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_DATE]}).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],to:[o.TypeURL.XSD_TIME,o.TypeURL.XSD_TIME]}).set([o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DAY_TIME_DURATION],()=>([a,u])=>new o.DateTimeLiteral((0,o.addDurationToDateTime)(a.typedValue,(0,o.defaultedDurationRepresentation)((0,o.negateDuration)(u.typedValue))))).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DAY_TIME_DURATION],to:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([o.TypeURL.XSD_DATE,o.TypeURL.XSD_DAY_TIME_DURATION],()=>([a,u])=>new o.DateLiteral((0,o.addDurationToDateTime)((0,o.defaultedDateTimeRepresentation)(a.typedValue),(0,o.defaultedDurationRepresentation)((0,o.negateDuration)(u.typedValue))))).copy({from:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_DAY_TIME_DURATION],to:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([o.TypeURL.XSD_TIME,o.TypeURL.XSD_DAY_TIME_DURATION],()=>([a,u])=>new o.TimeLiteral((0,o.addDurationToDateTime)((0,o.defaultedDateTimeRepresentation)(a.typedValue),(0,o.defaultedDurationRepresentation)((0,o.negateDuration)(u.typedValue))))).collect()})}};return Ip.TermFunctionSubtraction=t,Ip}var ZE;function CQ(){if(ZE)return Np;ZE=1,Object.defineProperty(Np,"__esModule",{value:!0}),Np.ActorFunctionFactoryTermSubtraction=void 0;const i=K(),r=$(),o=BQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.SUBTRACTION],termFunction:!0})}async run(e){return new o.TermFunctionSubtraction}};return Np.ActorFunctionFactoryTermSubtraction=n,Np}var kE;function QQ(){return kE||(kE=1,(function(i){var r=Ha&&Ha.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ha&&Ha.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(CQ(),i)})(Ha)),Ha}var $a={},qp={},Lp={},ej;function UQ(){if(ej)return Lp;ej=1,Object.defineProperty(Lp,"__esModule",{value:!0}),Lp.TermFunctionSubject=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.SUBJECT,overloads:(0,r.declare)(r.SparqlOperator.SUBJECT).onQuad1(()=>t=>t.subject).collect()})}};return Lp.TermFunctionSubject=o,Lp}var tj;function VQ(){if(tj)return qp;tj=1,Object.defineProperty(qp,"__esModule",{value:!0}),qp.ActorFunctionFactoryTermSubject=void 0;const i=K(),r=$(),o=UQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.SUBJECT],termFunction:!0})}async run(e){return new o.TermFunctionSubject}};return qp.ActorFunctionFactoryTermSubject=n,qp}var rj;function GQ(){return rj||(rj=1,(function(i){var r=$a&&$a.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=$a&&$a.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(VQ(),i)})($a)),$a}var Ja={},xp={},Bp={},nj;function XQ(){if(nj)return Bp;nj=1,Object.defineProperty(Bp,"__esModule",{value:!0}),Bp.TermFunctionTz=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.TZ,overloads:(0,r.declare)(r.SparqlOperator.TZ).onDateTime1(()=>t=>(0,r.string)((0,r.extractRawTimeZone)(t.str()))).copy({from:[r.TypeURL.XSD_DATE_TIME],to:[r.TypeURL.XSD_DATE]}).copy({from:[r.TypeURL.XSD_DATE_TIME],to:[r.TypeURL.XSD_TIME]}).collect()})}};return Bp.TermFunctionTz=o,Bp}var ij;function zQ(){if(ij)return xp;ij=1,Object.defineProperty(xp,"__esModule",{value:!0}),xp.ActorFunctionFactoryTermTz=void 0;const i=K(),r=$(),o=XQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.TZ],termFunction:!0})}async run(e){return new o.TermFunctionTz}};return xp.ActorFunctionFactoryTermTz=n,xp}var aj;function HQ(){return aj||(aj=1,(function(i){var r=Ja&&Ja.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ja&&Ja.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(zQ(),i)})(Ja)),Ja}var Ka={},Cp={},Qp={},oj;function $Q(){if(oj)return Qp;oj=1,Object.defineProperty(Qp,"__esModule",{value:!0}),Qp.TermFunctionUnaryMinus=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.UMINUS,overloads:(0,r.declare)(r.SparqlOperator.UMINUS).numericConverter(()=>t=>-t).collect()})}};return Qp.TermFunctionUnaryMinus=o,Qp}var uj;function JQ(){if(uj)return Cp;uj=1,Object.defineProperty(Cp,"__esModule",{value:!0}),Cp.ActorFunctionFactoryTermUnaryMinus=void 0;const i=K(),r=$(),o=$Q();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.UMINUS],termFunction:!0})}async run(e){return new o.TermFunctionUnaryMinus}};return Cp.ActorFunctionFactoryTermUnaryMinus=n,Cp}var sj;function KQ(){return sj||(sj=1,(function(i){var r=Ka&&Ka.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ka&&Ka.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(JQ(),i)})(Ka)),Ka}var Ya={},Up={},Vp={},cj;function YQ(){if(cj)return Vp;cj=1,Object.defineProperty(Vp,"__esModule",{value:!0}),Vp.TermFunctionUnaryPlus=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.UPLUS,overloads:(0,r.declare)(r.SparqlOperator.UPLUS).numericConverter(()=>t=>t).collect()})}};return Vp.TermFunctionUnaryPlus=o,Vp}var lj;function WQ(){if(lj)return Up;lj=1,Object.defineProperty(Up,"__esModule",{value:!0}),Up.ActorFunctionFactoryTermUnaryPlus=void 0;const i=K(),r=$(),o=YQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.UPLUS],termFunction:!0})}async run(e){return new o.TermFunctionUnaryPlus}};return Up.ActorFunctionFactoryTermUnaryPlus=n,Up}var dj;function ZQ(){return dj||(dj=1,(function(i){var r=Ya&&Ya.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ya&&Ya.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(WQ(),i)})(Ya)),Ya}var Wa={},Gp={},Xp={},fj;function kQ(){if(fj)return Xp;fj=1,Object.defineProperty(Xp,"__esModule",{value:!0}),Xp.TermFunctionTriple=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:3,operator:r.SparqlOperator.TRIPLE,overloads:(0,r.declare)(r.SparqlOperator.TRIPLE).onTerm3(t=>(...e)=>new r.Quad(e[0],e[1],e[2],new r.DefaultGraph)).collect()})}};return Xp.TermFunctionTriple=o,Xp}var pj;function eU(){if(pj)return Gp;pj=1,Object.defineProperty(Gp,"__esModule",{value:!0}),Gp.ActorFunctionFactoryTermTriple=void 0;const i=K(),r=$(),o=kQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.TRIPLE],termFunction:!0})}async run(e){return new o.TermFunctionTriple}};return Gp.ActorFunctionFactoryTermTriple=n,Gp}var hj;function tU(){return hj||(hj=1,(function(i){var r=Wa&&Wa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Wa&&Wa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(eU(),i)})(Wa)),Wa}var Za={},zp={},Hp={},yj;function rU(){if(yj)return Hp;yj=1,Object.defineProperty(Hp,"__esModule",{value:!0}),Hp.TermFunctionUcase=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.UCASE,overloads:(0,r.declare)(r.SparqlOperator.UCASE).onString1Typed(()=>t=>(0,r.string)(t.toUpperCase())).onLangString1(()=>t=>(0,r.langString)(t.typedValue.toUpperCase(),t.language)).collect()})}};return Hp.TermFunctionUcase=o,Hp}var _j;function nU(){if(_j)return zp;_j=1,Object.defineProperty(zp,"__esModule",{value:!0}),zp.ActorFunctionFactoryTermUcase=void 0;const i=K(),r=$(),o=rU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.UCASE],termFunction:!0})}async run(e){return new o.TermFunctionUcase}};return zp.ActorFunctionFactoryTermUcase=n,zp}var mj;function iU(){return mj||(mj=1,(function(i){var r=Za&&Za.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Za&&Za.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(nU(),i)})(Za)),Za}var ka={},$p={},Jp={},gj;function aU(){if(gj)return Jp;gj=1,Object.defineProperty(Jp,"__esModule",{value:!0}),Jp.TermFunctionUuid=void 0;const i=K(),r=$(),o=UI();let n=class extends i.TermFunctionBase{constructor(){super({arity:0,operator:r.SparqlOperator.UUID,overloads:(0,r.declare)(r.SparqlOperator.UUID).set([],()=>()=>new r.NamedNode(`urn:uuid:${o.v4()}`)).collect()})}};return Jp.TermFunctionUuid=n,Jp}var bj;function oU(){if(bj)return $p;bj=1,Object.defineProperty($p,"__esModule",{value:!0}),$p.ActorFunctionFactoryTermUuid=void 0;const i=K(),r=$(),o=aU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.UUID],termFunction:!0})}async run(e){return new o.TermFunctionUuid}};return $p.ActorFunctionFactoryTermUuid=n,$p}var vj;function uU(){return vj||(vj=1,(function(i){var r=ka&&ka.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ka&&ka.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(oU(),i)})(ka)),ka}var eo={},Kp={},Yp={},Tj;function sU(){if(Tj)return Yp;Tj=1,Object.defineProperty(Yp,"__esModule",{value:!0}),Yp.TermFunctionXsdToBoolean=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_BOOLEAN,overloads:(0,r.declare)(r.TypeURL.XSD_BOOLEAN).onNumeric1(()=>t=>(0,r.bool)(t.coerceEBV()),!0).onUnary(r.TypeURL.XSD_BOOLEAN,()=>t=>(0,r.bool)(t.coerceEBV()),!0).onUnary(r.TypeURL.XSD_STRING,()=>t=>{switch(t.str()){case"true":return(0,r.bool)(!0);case"false":return(0,r.bool)(!1);case"1":return(0,r.bool)(!0);case"0":return(0,r.bool)(!1);default:throw new r.CastError(t,r.TypeURL.XSD_BOOLEAN)}},!1).collect()})}};return Yp.TermFunctionXsdToBoolean=o,Yp}var Oj;function cU(){if(Oj)return Kp;Oj=1,Object.defineProperty(Kp,"__esModule",{value:!0}),Kp.ActorFunctionFactoryTermXsdToBoolean=void 0;const i=K(),r=$(),o=sU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_BOOLEAN],termFunction:!0})}async run(e){return new o.TermFunctionXsdToBoolean}};return Kp.ActorFunctionFactoryTermXsdToBoolean=n,Kp}var Sj;function lU(){return Sj||(Sj=1,(function(i){var r=eo&&eo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=eo&&eo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(cU(),i)})(eo)),eo}var to={},Wp={},Zp={},Fj;function dU(){if(Fj)return Zp;Fj=1,Object.defineProperty(Zp,"__esModule",{value:!0}),Zp.TermFunctionXsdToDate=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_DATE,overloads:(0,r.declare)(r.TypeURL.XSD_DATE).onUnary(r.TypeURL.XSD_DATE,()=>t=>new r.DateLiteral(t.typedValue,t.strValue)).onUnary(r.TypeURL.XSD_DATE_TIME,()=>t=>new r.DateLiteral(t.typedValue)).onStringly1(()=>t=>new r.DateLiteral((0,r.parseDate)(t.str()))).collect()})}};return Zp.TermFunctionXsdToDate=o,Zp}var Aj;function fU(){if(Aj)return Wp;Aj=1,Object.defineProperty(Wp,"__esModule",{value:!0}),Wp.ActorFunctionFactoryTermXsdToDate=void 0;const i=K(),r=$(),o=dU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_DATE],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDate}};return Wp.ActorFunctionFactoryTermXsdToDate=n,Wp}var wj;function pU(){return wj||(wj=1,(function(i){var r=to&&to.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=to&&to.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(fU(),i)})(to)),to}var ro={},kp={},eh={},Ej;function hU(){if(Ej)return eh;Ej=1,Object.defineProperty(eh,"__esModule",{value:!0}),eh.TermFunctionXsdToDecimal=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_DECIMAL,overloads:(0,r.declare)(r.TypeURL.XSD_DECIMAL).onNumeric1(()=>t=>{const e=(0,r.parseXSDDecimal)(t.str());if(e===void 0)throw new r.CastError(t,r.TypeURL.XSD_DECIMAL);return(0,r.decimal)(e)}).onString1(()=>t=>{const e=t.str(),a=/^([+-])?(\d+(\.\d+)?)$/u.test(e)?(0,r.parseXSDDecimal)(e):void 0;if(a===void 0)throw new r.CastError(t,r.TypeURL.XSD_DECIMAL);return(0,r.decimal)(a)},!1).onBoolean1Typed(()=>t=>(0,r.decimal)(t?1:0)).collect()})}};return eh.TermFunctionXsdToDecimal=o,eh}var jj;function yU(){if(jj)return kp;jj=1,Object.defineProperty(kp,"__esModule",{value:!0}),kp.ActorFunctionFactoryTermXsdToDecimal=void 0;const i=K(),r=$(),o=hU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_DECIMAL],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDecimal}};return kp.ActorFunctionFactoryTermXsdToDecimal=n,kp}var Rj;function _U(){return Rj||(Rj=1,(function(i){var r=ro&&ro.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ro&&ro.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(yU(),i)})(ro)),ro}var no={},th={},rh={},Dj;function mU(){if(Dj)return rh;Dj=1,Object.defineProperty(rh,"__esModule",{value:!0}),rh.TermFunctionXsdToDuration=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_DAY_TIME_DURATION,overloads:(0,r.declare)(r.TypeURL.XSD_DURATION).onUnary(r.TypeURL.XSD_DURATION,()=>t=>new r.DurationLiteral(t.typedValue,t.strValue)).onStringly1(()=>t=>new r.DurationLiteral((0,r.parseDuration)(t.str()))).collect()})}};return rh.TermFunctionXsdToDuration=o,rh}var Pj;function gU(){if(Pj)return th;Pj=1,Object.defineProperty(th,"__esModule",{value:!0}),th.ActorFunctionFactoryTermXsdToDuration=void 0;const i=K(),r=$(),o=mU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_DURATION],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDuration}};return th.ActorFunctionFactoryTermXsdToDuration=n,th}var Mj;function bU(){return Mj||(Mj=1,(function(i){var r=no&&no.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=no&&no.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(gU(),i)})(no)),no}var io={},nh={},ih={},Nj;function vU(){if(Nj)return ih;Nj=1,Object.defineProperty(ih,"__esModule",{value:!0}),ih.TermFunctionXsdToDayTimeDuration=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_DAY_TIME_DURATION,overloads:(0,r.declare)(r.TypeURL.XSD_DAY_TIME_DURATION).onUnary(r.TypeURL.XSD_DURATION,()=>t=>new r.DayTimeDurationLiteral((0,r.trimToDayTimeDuration)(t.typedValue))).onStringly1(()=>t=>new r.DayTimeDurationLiteral((0,r.parseDayTimeDuration)(t.str()))).collect()})}};return ih.TermFunctionXsdToDayTimeDuration=o,ih}var Ij;function TU(){if(Ij)return nh;Ij=1,Object.defineProperty(nh,"__esModule",{value:!0}),nh.ActorFunctionFactoryTermXsdToDayTimeDuration=void 0;const i=K(),r=$(),o=vU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_DAY_TIME_DURATION],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDayTimeDuration}};return nh.ActorFunctionFactoryTermXsdToDayTimeDuration=n,nh}var qj;function OU(){return qj||(qj=1,(function(i){var r=io&&io.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=io&&io.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(TU(),i)})(io)),io}var ao={},ah={},oh={},Lj;function SU(){if(Lj)return oh;Lj=1,Object.defineProperty(oh,"__esModule",{value:!0}),oh.TermFunctionXsdToDouble=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_DOUBLE,overloads:(0,r.declare)(r.TypeURL.XSD_DOUBLE).onNumeric1(()=>t=>(0,r.double)(t.typedValue)).onBoolean1Typed(()=>t=>(0,r.double)(t?1:0)).onUnary(r.TypeURL.XSD_STRING,()=>t=>{const e=(0,r.parseXSDFloat)(t.str());if(e===void 0)throw new r.CastError(t,r.TypeURL.XSD_DOUBLE);return(0,r.double)(e)},!1).collect()})}};return oh.TermFunctionXsdToDouble=o,oh}var xj;function FU(){if(xj)return ah;xj=1,Object.defineProperty(ah,"__esModule",{value:!0}),ah.ActorFunctionFactoryTermXsdToDouble=void 0;const i=K(),r=$(),o=SU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_DOUBLE],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDouble}};return ah.ActorFunctionFactoryTermXsdToDouble=n,ah}var Bj;function AU(){return Bj||(Bj=1,(function(i){var r=ao&&ao.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ao&&ao.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(FU(),i)})(ao)),ao}var oo={},uh={},sh={},Cj;function wU(){if(Cj)return sh;Cj=1,Object.defineProperty(sh,"__esModule",{value:!0}),sh.TermFunctionXsdToFloat=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_FLOAT,overloads:(0,r.declare)(r.TypeURL.XSD_FLOAT).onNumeric1(()=>t=>(0,r.float)(t.typedValue)).onBoolean1Typed(()=>t=>(0,r.float)(t?1:0)).onUnary(r.TypeURL.XSD_STRING,()=>t=>{const e=(0,r.parseXSDFloat)(t.str());if(e===void 0)throw new r.CastError(t,r.TypeURL.XSD_FLOAT);return(0,r.float)(e)},!1).collect()})}};return sh.TermFunctionXsdToFloat=o,sh}var Qj;function EU(){if(Qj)return uh;Qj=1,Object.defineProperty(uh,"__esModule",{value:!0}),uh.ActorFunctionFactoryTermXsdToFloat=void 0;const i=K(),r=$(),o=wU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_FLOAT],termFunction:!0})}async run(e){return new o.TermFunctionXsdToFloat}};return uh.ActorFunctionFactoryTermXsdToFloat=n,uh}var Uj;function jU(){return Uj||(Uj=1,(function(i){var r=oo&&oo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=oo&&oo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(EU(),i)})(oo)),oo}var uo={},ch={},lh={},Vj;function RU(){if(Vj)return lh;Vj=1,Object.defineProperty(lh,"__esModule",{value:!0}),lh.TermFunctionXsdToDatetime=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_DATE_TIME,overloads:(0,r.declare)(r.TypeURL.XSD_DATE_TIME).onUnary(r.TypeURL.XSD_DATE_TIME,()=>t=>t).onUnary(r.TypeURL.XSD_STRING,()=>t=>(0,r.dateTime)((0,r.parseDateTime)(t.str()),t.str()),!1).onUnary(r.TypeURL.XSD_DATE,()=>t=>new r.DateTimeLiteral({...t.typedValue,hours:0,minutes:0,seconds:0})).collect()})}};return lh.TermFunctionXsdToDatetime=o,lh}var Gj;function DU(){if(Gj)return ch;Gj=1,Object.defineProperty(ch,"__esModule",{value:!0}),ch.ActorFunctionFactoryTermXsdToDatetime=void 0;const i=K(),r=$(),o=RU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_DATE_TIME],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDatetime}};return ch.ActorFunctionFactoryTermXsdToDatetime=n,ch}var Xj;function PU(){return Xj||(Xj=1,(function(i){var r=uo&&uo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=uo&&uo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(DU(),i)})(uo)),uo}var so={},dh={},fh={},zj;function MU(){if(zj)return fh;zj=1,Object.defineProperty(fh,"__esModule",{value:!0}),fh.TermFunctionXsdToInteger=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_INTEGER,overloads:(0,r.declare)(r.TypeURL.XSD_INTEGER).onBoolean1Typed(()=>t=>(0,r.integer)(t?1:0)).onNumeric1(()=>t=>{if(!Number.isFinite(t.typedValue))throw new r.CastError(t,r.TypeURL.XSD_INTEGER);return(0,r.integer)(Math.trunc(t.typedValue))}).onString1(()=>t=>{const e=t.str(),a=/^\d+$/u.test(e)?Number.parseInt(e,10):void 0;if(a===void 0)throw new r.CastError(t,r.TypeURL.XSD_INTEGER);return(0,r.integer)(a)}).collect()})}};return fh.TermFunctionXsdToInteger=o,fh}var Hj;function NU(){if(Hj)return dh;Hj=1,Object.defineProperty(dh,"__esModule",{value:!0}),dh.ActorFunctionFactoryTermXsdToInteger=void 0;const i=K(),r=$(),o=MU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_INTEGER],termFunction:!0})}async run(e){return new o.TermFunctionXsdToInteger}};return dh.ActorFunctionFactoryTermXsdToInteger=n,dh}var $j;function IU(){return $j||($j=1,(function(i){var r=so&&so.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=so&&so.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(NU(),i)})(so)),so}var co={},ph={},hh={},Jj;function qU(){if(Jj)return hh;Jj=1,Object.defineProperty(hh,"__esModule",{value:!0}),hh.TermFunctionXsdToString=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_STRING,overloads:(0,r.declare)(r.TypeURL.XSD_STRING).onNumeric1(()=>t=>(0,r.string)((0,r.float)(t.typedValue).str())).onBoolean1Typed(()=>t=>(0,r.string)((0,r.bool)(t).str())).onTerm1(()=>t=>(0,r.string)(t.str())).collect()})}};return hh.TermFunctionXsdToString=o,hh}var Kj;function LU(){if(Kj)return ph;Kj=1,Object.defineProperty(ph,"__esModule",{value:!0}),ph.ActorFunctionFactoryTermXsdToString=void 0;const i=K(),r=$(),o=qU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_STRING],termFunction:!0})}async run(e){return new o.TermFunctionXsdToString}};return ph.ActorFunctionFactoryTermXsdToString=n,ph}var Yj;function xU(){return Yj||(Yj=1,(function(i){var r=co&&co.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=co&&co.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(LU(),i)})(co)),co}var lo={},yh={},_h={},Wj;function BU(){if(Wj)return _h;Wj=1,Object.defineProperty(_h,"__esModule",{value:!0}),_h.TermFunctionXsdToYearMonthDuration=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_YEAR_MONTH_DURATION,overloads:(0,r.declare)(r.TypeURL.XSD_YEAR_MONTH_DURATION).onUnary(r.TypeURL.XSD_DURATION,()=>t=>new r.YearMonthDurationLiteral((0,r.trimToYearMonthDuration)(t.typedValue))).onStringly1(()=>t=>new r.YearMonthDurationLiteral((0,r.parseYearMonthDuration)(t.str()))).collect()})}};return _h.TermFunctionXsdToYearMonthDuration=o,_h}var Zj;function CU(){if(Zj)return yh;Zj=1,Object.defineProperty(yh,"__esModule",{value:!0}),yh.ActorFunctionFactoryTermXsdToYearMonthDuration=void 0;const i=K(),r=$(),o=BU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_YEAR_MONTH_DURATION],termFunction:!0})}async run(e){return new o.TermFunctionXsdToYearMonthDuration}};return yh.ActorFunctionFactoryTermXsdToYearMonthDuration=n,yh}var kj;function QU(){return kj||(kj=1,(function(i){var r=lo&&lo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=lo&&lo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(CU(),i)})(lo)),lo}var fo={},mh={},gh={},eR;function UU(){if(eR)return gh;eR=1,Object.defineProperty(gh,"__esModule",{value:!0}),gh.TermFunctionXsdToTime=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_TIME,overloads:(0,r.declare)(r.TypeURL.XSD_TIME).onUnary(r.TypeURL.XSD_TIME,()=>t=>new r.TimeLiteral(t.typedValue,t.strValue)).onUnary(r.TypeURL.XSD_DATE_TIME,()=>t=>new r.TimeLiteral(t.typedValue)).onStringly1(()=>t=>new r.TimeLiteral((0,r.parseTime)(t.str()))).collect()})}};return gh.TermFunctionXsdToTime=o,gh}var tR;function VU(){if(tR)return mh;tR=1,Object.defineProperty(mh,"__esModule",{value:!0}),mh.ActorFunctionFactoryTermXsdToTime=void 0;const i=K(),r=$(),o=UU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_TIME],termFunction:!0})}async run(e){return new o.TermFunctionXsdToTime}};return mh.ActorFunctionFactoryTermXsdToTime=n,mh}var rR;function GU(){return rR||(rR=1,(function(i){var r=fo&&fo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=fo&&fo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(VU(),i)})(fo)),fo}var po={},bh={},vh={},nR;function XU(){if(nR)return vh;nR=1,Object.defineProperty(vh,"__esModule",{value:!0}),vh.TermFunctionYear=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.YEAR,overloads:(0,r.declare)(r.SparqlOperator.YEAR).onDateTime1(()=>t=>(0,r.integer)(t.typedValue.year)).set([r.TypeURL.XSD_DATE],()=>([t])=>(0,r.integer)(t.typedValue.year)).collect()})}};return vh.TermFunctionYear=o,vh}var iR;function zU(){if(iR)return bh;iR=1,Object.defineProperty(bh,"__esModule",{value:!0}),bh.ActorFunctionFactoryTermYear=void 0;const i=K(),r=$(),o=XU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.YEAR],termFunction:!0})}async run(e){return new o.TermFunctionYear}};return bh.ActorFunctionFactoryTermYear=n,bh}var aR;function HU(){return aR||(aR=1,(function(i){var r=po&&po.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=po&&po.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(zU(),i)})(po)),po}var ho={},Th={},oR;function $U(){if(oR)return Th;oR=1,Object.defineProperty(Th,"__esModule",{value:!0}),Th.ActorQueryOperationSource=void 0;const i=at(),r=pe(),o=ae(),n=cr(),t=Ue(),e=Ie();let a=class extends i.ActorQueryOperation{constructor(c){super(c)}async test(c){return(0,t.getOperationSource)(c.operation)?(0,o.passTest)({httpRequests:1}):(0,o.failTest)(`Actor ${this.name} requires an operation with source annotation.`)}async run(c){const s=c.context.get(r.KeysInitQuery.physicalQueryPlanLogger);s&&(s.logOperation(c.operation.type,void 0,c.operation,c.context.get(r.KeysInitQuery.physicalQueryPlanNode),this.name,{}),c.context=c.context.set(r.KeysInitQuery.physicalQueryPlanNode,c.operation));const l=(0,t.getOperationSource)(c.operation),d=l.context?c.context.merge(l.context):c.context;let f=!1;if(e.Util.recurseOperation(c.operation,{construct(){return f=!0,!1}}),f){const y=l.source.queryQuads(c.operation,d),_=(0,n.getMetadataQuads)(y);return{type:"quads",quadStream:y,metadata:_}}switch(c.operation.type){case e.Algebra.types.ASK:return{type:"boolean",execute:()=>l.source.queryBoolean(c.operation,d)};case e.Algebra.types.COMPOSITE_UPDATE:case e.Algebra.types.DELETE_INSERT:case e.Algebra.types.LOAD:case e.Algebra.types.CLEAR:case e.Algebra.types.CREATE:case e.Algebra.types.DROP:case e.Algebra.types.ADD:case e.Algebra.types.MOVE:case e.Algebra.types.COPY:return{type:"void",execute:()=>l.source.queryVoid(c.operation,d)}}const h=l.source.queryBindings(c.operation,d),p=(0,n.getMetadataBindings)(h);return{type:"bindings",bindingsStream:h,metadata:p}}};return Th.ActorQueryOperationSource=a,Th}var uR;function JU(){return uR||(uR=1,(function(i){var r=ho&&ho.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ho&&ho.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o($U(),i)})(ho)),ho}var yo={},Oh={},sR;function KU(){if(sR)return Oh;sR=1,Object.defineProperty(Oh,"__esModule",{value:!0}),Oh.MediatorJoinCoefficientsFixed=void 0;const i=pe(),r=ae();let o=class extends r.Mediator{constructor(t){super(t)}async mediateWith(t,e){const a=[],u=e.map(({reply:y})=>y),c=(await Promise.all(u)).map(y=>{if(y.isFailed()){a.push(y.getFailMessage());return}return{value:y.get(),sideData:y.getSideData()}});let s=c.map(y=>{if(y)return y.value.iterations*this.cpuWeight+y.value.persistedItems*this.memoryWeight+y.value.blockingItems*this.timeWeight+y.value.requestTime*this.ioWeight});const l=Math.max(...s.filter(y=>y!==void 0)),d=t.context.get(i.KeysQueryOperation.limitIndicator);d&&(s=s.map((y,_)=>y!==void 0&&(c[_]?.value).blockingItems>0&&(c[_]?.value).iterations>d?y+l:y));let f=-1,h=Number.POSITIVE_INFINITY;for(const[y,_]of s.entries())_!==void 0&&(f===-1||_<h)&&(f=y,h=_);if(f<0)return(0,r.failTest)(this.constructFailureMessage(t,a));const p=e[f].actor;return p.includeInLogs&&r.Actor.getContextLogger(t.context)?.debug(`Determined physical join operator '${p.logicalType}-${p.physicalName}'`,{entries:t.entries.length,variables:await Promise.all(t.entries.map(async y=>(await y.output.metadata()).variables.map(_=>_.variable.value))),costs:Object.fromEntries(s.map((y,_)=>[`${e[_].actor.logicalType}-${e[_].actor.physicalName}`,y]).filter(y=>y[1]!==void 0)),coefficients:Object.fromEntries(c.map((y,_)=>[`${e[_].actor.logicalType}-${e[_].actor.physicalName}`,y?.value]).filter(y=>y[1]!==void 0))}),(0,r.passTestWithSideData)(p,c[f].sideData)}};return Oh.MediatorJoinCoefficientsFixed=o,Oh}var cR;function YU(){return cR||(cR=1,(function(i){var r=yo&&yo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=yo&&yo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(KU(),i)})(yo)),yo}var _o={},Sh={},lR;function VI(){if(lR)return Sh;lR=1,Object.defineProperty(Sh,"__esModule",{value:!0}),Sh.ActorHttpInvalidate=void 0;const i=ae();let r=class extends i.Actor{constructor(n){super(n)}};return Sh.ActorHttpInvalidate=r,Sh}var Fh={},dR;function WU(){if(dR)return Fh;dR=1,Object.defineProperty(Fh,"__esModule",{value:!0}),Fh.ActorHttpInvalidateListenable=void 0;const i=ae(),r=VI();let o=class extends r.ActorHttpInvalidate{constructor(t){super(t),this.invalidateListeners=[],this.invalidateListeners=[]}addInvalidateListener(t){this.invalidateListeners.push(t)}async test(t){return(0,i.passTestVoid)()}async run(t){for(const e of this.invalidateListeners)e(t);return{}}};return Fh.ActorHttpInvalidateListenable=o,Fh}var fR;function pR(){return fR||(fR=1,(function(i){var r=_o&&_o.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=_o&&_o.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(VI(),i),o(WU(),i)})(_o)),_o}var mo={},Ah={},hR;function ZU(){if(hR)return Ah;hR=1,Object.defineProperty(Ah,"__esModule",{value:!0}),Ah.MediatorAll=void 0;const i=ae();let r=class extends i.Mediator{constructor(n){super(n)}async mediate(n){const t=[];let e;try{e=this.publish(n)}catch{e=[]}for(const u of e){const c=await u.reply;c.isPassed()&&t.push({actor:u.actor,sideData:c.getSideData()})}return(await Promise.all(t.map(u=>u.actor.runObservable(n,u.sideData))))[0]}async mediateWith(){throw new Error("Unsupported operation: MediatorAll#mediateWith")}};return Ah.MediatorAll=r,Ah}var yR;function kU(){return yR||(yR=1,(function(i){var r=mo&&mo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=mo&&mo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(ZU(),i)})(mo)),mo}var go={},wh={},bo={},Eh={},vo={},jh={},_R;function eV(){if(_R)return jh;_R=1,Object.defineProperty(jh,"__esModule",{value:!0}),jh.ChunkedIterator=void 0;const i=Ye();let r=class extends i.TransformIterator{constructor(n,t,e){super(n,e),this.chunk=[],this.blockSize=t}consumeChunkAsIterator(){const n=new i.ArrayIterator(this.chunk,{autoStart:!1});return this.chunk=[],n}_transform(n,t,e){this.chunk.push(n),this.chunk.length>=this.blockSize&&e(this.consumeChunkAsIterator()),t()}_flush(n){this.chunk.length>0&&this._push(this.consumeChunkAsIterator()),super._flush(n)}};return jh.ChunkedIterator=r,jh}var Rh={},mR;function tV(){if(mR)return Rh;mR=1,Object.defineProperty(Rh,"__esModule",{value:!0}),Rh.ClosableIterator=void 0;const i=Ye();let r=class extends i.AsyncIterator{constructor(a,u){super(),this.onClose=u.onClose,this._source=a,this._source[i.DESTINATION]=this,this._source.on("end",t),this._source.on("error",n),this._source.on("readable",o),this.readable=this._source.readable}read(){const a=this._source.read();return a||(this.readable=!1,this._source.done&&this.close()),a}_end(a){this.onClose(),this._source.removeListener("end",t),this._source.removeListener("error",n),this._source.removeListener("readable",o),delete this._source[i.DESTINATION],this._source.destroy(),super._end(a)}};Rh.ClosableIterator=r;function o(){this[i.DESTINATION].readable=!0}function n(e){this[i.DESTINATION].emit("error",e)}function t(){this[i.DESTINATION].close()}return Rh}var Dh={},gR;function rV(){if(gR)return Dh;gR=1,Object.defineProperty(Dh,"__esModule",{value:!0}),Dh.ClosableTransformIterator=void 0;const i=Ye();let r=class extends i.TransformIterator{constructor(n,t){super(n,t),this.onClose=t.onClose}_end(n){this.onClose(),super._end(n)}};return Dh.ClosableTransformIterator=r,Dh}var Ph={},bR;function nV(){if(bR)return Ph;bR=1,Object.defineProperty(Ph,"__esModule",{value:!0}),Ph.instrumentIterator=void 0;function i(o){const n={count:0,timeSelf:0,timeLife:0};return r(o,n,!0),new Promise(t=>{o.on("end",()=>{t(n)})})}Ph.instrumentIterator=i;function r(o,n,t){if(!("_profileInstrumented"in o)){if(o._profileInstrumented=!0,"_read"in o){const a=o._read;o._read=(u,c)=>{const s=performance.now();a.call(o,u,()=>{n.timeSelf+=performance.now()-s,c()})}}const e=o.read;if(o.read=()=>{const a=performance.now(),u=e.call(o);return t&&u&&n.count++,n.timeSelf+=performance.now()-a,u},t){const a=performance.now();o.on("end",()=>{n.timeLife=performance.now()-a})}"_source"in o&&r(o._source,n,!1)}}return Ph}var vR;function cs(){return vR||(vR=1,(function(i){var r=vo&&vo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=vo&&vo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(eV(),i),o(tV(),i),o(rV(),i),o(nV(),i)})(vo)),vo}var TR;function iV(){if(TR)return Eh;TR=1,Object.defineProperty(Eh,"__esModule",{value:!0}),Eh.ActorRdfJoin=void 0;const i=pe(),r=ae(),o=cs(),n=cr();let t=class dn extends r.Actor{constructor(a,u){super(a),this.includeInLogs=!0,this.logicalType=u.logicalType,this.physicalName=u.physicalName,this.limitEntries=u.limitEntries??Number.POSITIVE_INFINITY,this.limitEntriesMin=u.limitEntriesMin??!1,this.canHandleUndefs=u.canHandleUndefs??!1,this.isLeaf=u.isLeaf??!0,this.requiresVariableOverlap=u.requiresVariableOverlap??!1,this.canHandleOperationRequired=u.canHandleOperationRequired??!1}static overlappingVariables(a){const u={};for(const c of a)for(const s of c.variables){u[s.variable.value]||(u[s.variable.value]={variable:s.variable,canBeUndef:s.canBeUndef,occurrences:0});const l=u[s.variable.value];l.canBeUndef=l.canBeUndef||s.canBeUndef,l.occurrences++}return Object.values(u).filter(c=>c.occurrences===a.length).map(c=>({variable:c.variable,canBeUndef:c.canBeUndef}))}static joinVariables(a,u,c=!1){const s={};let l=!0;for(const d of u){for(const f of d.variables)s[f.variable.value]=s[f.variable.value]||f.canBeUndef||!l&&c&&!(f.variable.value in s);l=!1}return Object.entries(s).map(([d,f])=>({variable:a.variable(d),canBeUndef:f}))}static joinBindings(...a){if(a.length===0)return null;if(a.length===1)return a[0];let u=a[0];for(const c of a.slice(1)){const s=u.merge(c);if(!s)return null;u=s}return u}static getCardinality(a){return a.cardinality}static async getMetadatas(a){return await Promise.all(a.map(u=>u.output.metadata()))}static async getEntriesWithMetadatas(a){const u=await dn.getMetadatas(a);return a.map((c,s)=>({...c,metadata:u[s]}))}static getRequestInitialTimes(a){return a.map(u=>u.pageSize?0:u.requestTime??0)}static getRequestItemTimes(a){return a.map(u=>u.pageSize?(u.requestTime??0)/u.pageSize:0)}constructState(a){const u=new n.MetadataValidationState,c=()=>u.invalidate();for(const s of a)s.state.addInvalidateListener(c);return u}async constructResultMetadata(a,u,c,s={},l=!1){let d;if(s.cardinality)d=s.cardinality;else{let f=!1;d=u.reduce((h,p)=>{const y=dn.getCardinality(p);return y.value===0&&(f=!0),{type:y.type==="estimate"?"estimate":h.type,value:h.value*(l?Math.max(1,y.value):y.value)}},{type:"exact",value:1}),(!f||l)&&(d.value*=(await this.mediatorJoinSelectivity.mediate({entries:a,context:c})).selectivity,d.value===0&&(d.value=Number.MIN_VALUE))}return{state:this.constructState(u),...s,cardinality:{type:d.type,value:d.value},variables:dn.joinVariables(c.getSafe(i.KeysInitQuery.dataFactory),u,l)}}static async sortJoinEntries(a,u,c){if(u.some(f=>f.metadata.variables.some(h=>h.canBeUndef)))return(0,r.passTest)(u);const l={};for(const f of u)for(const h of f.metadata.variables){let p=l[h.variable.value];p||(p=0),l[h.variable.value]=++p}const d=[];for(const[f,h]of Object.entries(l))h>=2&&d.push(f);return d.length===0?(0,r.failTest)("Bind join can only join entries with at least one common variable"):(0,r.passTest)((await a.mediate({entries:u,context:c})).entries)}async test(a){if(a.type!==this.logicalType)return(0,r.failTest)(`${this.name} can only handle logical joins of type '${this.logicalType}', while '${a.type}' was given.`);if(a.entries.length<=1)return(0,r.failTest)(`${this.name} requires at least two join entries.`);const u=a.entries.some(l=>l.operationRequired);if(!this.canHandleOperationRequired&&u)return(0,r.failTest)(`${this.name} does not work with operationRequired.`);if(this.limitEntriesMin?a.entries.length<this.limitEntries:a.entries.length>this.limitEntries)return(0,r.failTest)(`${this.name} requires ${this.limitEntries} join entries at ${this.limitEntriesMin?"least":"most"}. The input contained ${a.entries.length}.`);for(const l of a.entries)if(l.output.type!=="bindings")return(0,r.failTest)(`Invalid type of a join entry: Expected 'bindings' but got '${l.output.type}'`);const c=await dn.getMetadatas(a.entries);let s;return!this.canHandleUndefs&&(s=dn.overlappingVariables(c),s.some(l=>l.canBeUndef))?(0,r.failTest)(`Actor ${this.name} can not join streams containing undefs`):this.requiresVariableOverlap&&(s??dn.overlappingVariables(c)).length===0&&!u?(0,r.failTest)(`Actor ${this.name} can only join entries with at least one common variable`):await this.getJoinCoefficients(a,{metadatas:c})}async run(a,u){let c;a.context.has(i.KeysInitQuery.physicalQueryPlanLogger)&&(c=a.context.get(i.KeysInitQuery.physicalQueryPlanNode),a.context=a.context.set(i.KeysInitQuery.physicalQueryPlanNode,a));const s=a.context.get(i.KeysInitQuery.physicalQueryPlanLogger);let l;this.includeInLogs&&s&&(l={},s.stashChildren(c,h=>h.logicalOperator.startsWith("join")),s.logOperation(`join-${this.logicalType}`,this.physicalName,a,c,this.name,l));const{result:d,physicalPlanMetadata:f}=await this.getOutput(a,u);if(l){(0,o.instrumentIterator)(d.bindingsStream).then(p=>{s.appendMetadata(a,{cardinalityReal:p.count,timeSelf:p.timeSelf,timeLife:p.timeLife})}),Object.assign(l,f);const h=u.metadatas.map(dn.getCardinality);if(l.cardinalities=h,l.joinCoefficients=(await this.getJoinCoefficients(a,u)).getOrThrow(),this.isLeaf)for(let p=0;p<a.entries.length;p++){const y=a.entries[p];s.unstashChild(y.operation,a),s.appendMetadata(y.operation,{cardinality:h[p]})}}return d.metadata=(0,n.cachifyMetadata)(d.metadata),d}};return Eh.ActorRdfJoin=t,Eh}var OR;function nr(){return OR||(OR=1,(function(i){var r=bo&&bo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=bo&&bo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(iV(),i)})(bo)),bo}var SR;function aV(){if(SR)return wh;SR=1,Object.defineProperty(wh,"__esModule",{value:!0}),wh.ActorRdfJoinSingle=void 0;const i=nr(),r=ae();let o=class extends i.ActorRdfJoin{constructor(t){super(t,{logicalType:"inner",physicalName:"single",limitEntries:1}),this.includeInLogs=!1}async test(t){return t.entries.length!==1?(0,r.failTest)(`Actor ${this.name} can only join a single entry`):await this.getJoinCoefficients(t,void 0)}async getOutput(t){return{result:t.entries[0].output}}async getJoinCoefficients(t,e){return(0,r.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},e)}};return wh.ActorRdfJoinSingle=o,wh}var FR;function oV(){return FR||(FR=1,(function(i){var r=go&&go.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=go&&go.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(aV(),i)})(go)),go}var To={},Mh={},AR;function uV(){if(AR)return Mh;AR=1,Object.defineProperty(Mh,"__esModule",{value:!0}),Mh.ActorRdfJoinMultiEmpty=void 0;const i=nr(),r=pe(),o=ae(),n=cr(),t=Ye();let e=class extends i.ActorRdfJoin{constructor(u){super(u,{logicalType:"inner",physicalName:"multi-empty",canHandleUndefs:!0})}async test(u){return(await i.ActorRdfJoin.getMetadatas(u.entries)).every(c=>i.ActorRdfJoin.getCardinality(c).value>0)?(0,o.failTest)(`Actor ${this.name} can only join entries where at least one is empty`):super.test(u)}async getOutput(u){for(const s of u.entries)s.output.bindingsStream.close();const c=u.context.getSafe(r.KeysInitQuery.dataFactory);return{result:{bindingsStream:new t.ArrayIterator([],{autoStart:!1}),metadata:async()=>({state:new n.MetadataValidationState,cardinality:{type:"exact",value:0},variables:i.ActorRdfJoin.joinVariables(c,await i.ActorRdfJoin.getMetadatas(u.entries))}),type:"bindings"}}}async getJoinCoefficients(u,c){return(0,o.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},c)}};return Mh.ActorRdfJoinMultiEmpty=e,Mh}var wR;function sV(){return wR||(wR=1,(function(i){var r=To&&To.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=To&&To.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(uV(),i)})(To)),To}var Oo={},Nh={},So={},Ih={},ER;function cV(){if(ER)return Ih;ER=1,Object.defineProperty(Ih,"__esModule",{value:!0}),Ih.BindingsIndexDef=void 0;let i=class{constructor(o,n){this.keys=o.map(t=>t.variable),this.hashFn=n,this.index={}}put(o,n){return this.index[this.hashFn(o,this.keys)]=n}get(o){const n=this.getFirst(o);return n?[n]:[]}getFirst(o){return this.index[this.hashFn(o,this.keys)]}values(){return Object.values(this.index)}};return Ih.BindingsIndexDef=i,Ih}var qh={},jR;function lV(){if(jR)return qh;jR=1,Object.defineProperty(qh,"__esModule",{value:!0}),qh.BindingsIndexUndef=void 0;let i=class{constructor(o,n,t){this.data={},this.keys=o.map(e=>e.variable),this.hashFn=n,this.allowDisjointDomains=t&&this.keys.length>0}put(o,n){if(this.allowDisjointDomains||this.isBindingsValid(o)){let t=this.data;for(let e=0;e<this.keys.length;e++){const a=this.keys[e],u=this.hashFn(o.get(a));let c=t[u];c||(c=t[u]=e===this.keys.length-1?n:{}),t=c}}return n}isBindingsValid(o){let n=!1;for(const t of this.keys)if(o.has(t)){n=!0;break}return n}get(o){return this.allowDisjointDomains||this.isBindingsValid(o)?this.getRecursive(o,this.keys,[this.data]):[]}getRecursive(o,n,t){if(n.length===0)return t;let e;[e,...n]=n;const a=[];for(const u of t){const c=this.hashFn(o?.get(e));if(c){const s=[u[c],u[""]].filter(Boolean);if(s.length===0)continue;a.push(this.getRecursive(o,n,s))}else{const s=Object.values(u);if(s.length===0)continue;a.push(this.getRecursive(o,n,s))}}return a.flat()}getFirst(o,n=!0){if(this.allowDisjointDomains||this.isBindingsValid(o))return this.getRecursiveFirst(o,this.keys,[this.data],n)}getRecursiveFirst(o,n,t,e){if(n.length===0)return t[0];let a;[a,...n]=n;for(const u of t){const c=this.hashFn(o.get(a));if(c||!e){const s=[u[c],u[""]].filter(Boolean);if(s.length===0)continue;const l=this.getRecursiveFirst(o,n,s,e);if(l)return l}else{const s=Object.values(u);if(s.length===0)continue;const l=this.getRecursiveFirst(o,n,s,e);if(l)return l}}}values(){return this.keys.length===0?[]:this.getRecursive(void 0,this.keys,[this.data])}};return qh.BindingsIndexUndef=i,qh}var b1={},RR;function dV(){return RR||(RR=1,Object.defineProperty(b1,"__esModule",{value:!0})),b1}var DR;function Y0(){return DR||(DR=1,(function(i){var r=So&&So.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=So&&So.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(cV(),i),o(lV(),i),o(dV(),i)})(So)),So}var v1,PR;function fV(){if(PR)return v1;PR=1;let i=Ye(),r=i.MultiTransformIterator,o=i.SimpleTransformIterator;class n extends r{constructor(e,a,u,c){super(e,c),this.funRight=a,this.funJoin=u}_createTransformer(e){return new o(this.funRight(e),{transform:(a,u,c)=>{let s=this.funJoin(e,a);s!==null&&c(s),u()}})}}return v1=n,v1}var T1,MR;function pV(){if(MR)return T1;MR=1;let i=Ye().AsyncIterator;class r extends i{constructor(n,t,e,a){super(),this.addedDataListener=!1,this.left=n,this.right=t,this.funHash=e,this.funJoin=a,this.leftMap=new Map,this.match=null,this.matches=[],this.matchIdx=0,this.left.on("error",c=>this.destroy(c)),this.right.on("error",c=>this.destroy(c)),this.readable=!1,this.left.on("end",u.bind(this));function u(){this.readable=!0,this.right.on("readable",()=>this.readable=!0),this.right.on("end",()=>{this.hasResults()||this._end()})}this.on("newListener",c=>{c==="data"&&this._addDataListenerIfNeeded()}),this.left.readable&&this._addDataListenerIfNeeded(),this.left.on("readable",()=>this._addDataListenerIfNeeded())}hasResults(){return!this.right.ended||this.matchIdx<this.matches.length}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(this._addDataListenerIfNeeded();;){if(this.ended||!this.readable)return null;for(;this.matchIdx<this.matches.length;){let t=this.matches[this.matchIdx++],e=this.funJoin(t,this.match);if(e!==null)return e}if(this.hasResults()||this._end(),this.match=this.right.read(),this.match===null)return this.readable=!1,null;let n=this.funHash(this.match);this.matches=this.leftMap.get(n)||[],this.matchIdx=0}}_addDataListenerIfNeeded(){this.addedDataListener||(this.addedDataListener=!0,this._addDataListener())}_addDataListener(){this.left.on("data",n.bind(this));function n(t){let e=this.funHash(t),a=this.leftMap.get(e);a||(a=[],this.leftMap.set(e,a)),a.push(t)}}}return T1=r,T1}var O1,NR;function hV(){if(NR)return O1;NR=1;const{MultiTransformIterator:i,SimpleTransformIterator:r,scheduleTask:o}=Ye();class n extends i{constructor(e,a,u,c){super(e,c),this.right=a,this.funJoin=u,this.on("end",()=>this.right.close())}_end(){super._end(),o(()=>this.right.destroy())}_createTransformer(e){return new r(this.right.clone(),{transform:(a,u,c)=>{let s=this.funJoin(e,a);s!==null&&c(s),u()}})}}return O1=n,O1}var S1,IR;function yV(){if(IR)return S1;IR=1;let i=Ye().AsyncIterator;class r extends i{constructor(n,t,e,a){super(),this.left=n,this.right=t,this.funHash=e,this.funJoin=a,this.usedLeft=!1,this.leftMap=new Map,this.rightMap=new Map,this.on("end",()=>this._cleanup()),this.match=null,this.matches=[],this.matchIdx=0,(this.left.readable||this.right.readable)&&(this.readable=!0),this.left.on("error",u=>this.destroy(u)),this.right.on("error",u=>this.destroy(u)),this.left.on("readable",()=>this.readable=!0),this.right.on("readable",()=>this.readable=!0),this.left.on("end",()=>{this.hasResults()||this._end()}),this.right.on("end",()=>{this.hasResults()||this._end()})}hasResults(){return!this.left.ended||!this.right.ended||!!this.matches&&this.matchIdx<this.matches.length}_cleanup(){this.leftMap=null,this.rightMap=null,this.matches=null}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(;;){if(this.ended)return null;for(;this.matchIdx<this.matches.length;){let e=this.matches[this.matchIdx++],a=this.usedLeft?this.funJoin(this.match,e):this.funJoin(e,this.match);if(a!==null)return a}this.hasResults()||this._end();let n=null;for(let e=0;e<2&&(n=this.usedLeft?this.right.read():this.left.read(),this.usedLeft=!this.usedLeft,n===null);++e);if(this.done||n===null)return this.readable=!1,null;let t=this.funHash(n);if(this.usedLeft&&this.right.done)this.leftMap=null;else if(this.left.done)this.rightMap=null;else{let e=this.usedLeft?this.leftMap:this.rightMap;e.has(t)||e.set(t,[]);let a=e.get(t);a||(a=[],e.set(t,a)),a.push(n)}this.match=n,this.matches=(this.usedLeft?this.rightMap:this.leftMap).get(t)||[],this.matchIdx=0}}}return S1=r,S1}var F1,qR;function _V(){if(qR)return F1;qR=1;let i=Ye().AsyncIterator;class r extends i{constructor(n){super(),Array.isArray(n)||(n=Array.prototype.slice.call(arguments)),this.streams=n;for(let t of n)t.on("readable",()=>this.emit("readable")),t.on("end",()=>this._removeStream(t));this.streams.length===0&&this.close(),this.idx=this.streams.length-1}_removeStream(n){let t=this.streams.indexOf(n);t<0||(this.streams.splice(t,1),this.idx>=this.streams.length&&--this.idx,this.streams.length===0&&this._end())}close(){super.close();for(let n of this.streams)n.close()}read(){for(let n=0;n<this.streams.length;++n){this.idx=(this.idx+1)%this.streams.length;let t=this.streams[this.idx].read();if(t!==null)return t}return null}}return F1=r,F1}var A1,LR;function Xg(){if(LR)return A1;LR=1;const i=fV(),r=pV(),o=hV(),n=yV(),t=_V();return A1={DynamicNestedLoopJoin:i,HashJoin:r,NestedLoopJoin:o,SymmetricHashJoin:n,MergeStream:t},A1}var xR;function mV(){if(xR)return Nh;xR=1,Object.defineProperty(Nh,"__esModule",{value:!0}),Nh.ActorRdfJoinHash=void 0;const i=nr(),r=ae(),o=Y0(),n=cs(),t=Ye(),e=Xg(),a=sr();let u=class extends i.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:`hash-${s.canHandleUndefs?"undef":"def"}`,limitEntries:2,requiresVariableOverlap:!0,canHandleUndefs:s.canHandleUndefs})}async getOutput(s,l){const d=l.metadatas;let f;const h=i.ActorRdfJoin.overlappingVariables(d);if(this.canHandleUndefs){const p=l.entriesSorted[0].output,y=l.entriesSorted[1].output;f=new n.ClosableTransformIterator(async()=>{const _=new o.BindingsIndexUndef(h,m=>m&&m.termType!=="Variable"?(0,a.termToString)(m):"",!0);return await new Promise(m=>{p.bindingsStream.on("data",O=>{(_.getFirst(O,!1)??_.put(O,[])).push(O)}),p.bindingsStream.on("end",m),p.bindingsStream.on("error",O=>{f.emit("error",O)})}),new t.MultiTransformIterator(y.bindingsStream,{multiTransform:m=>new t.ArrayIterator(_.get(m).flat().map(O=>i.ActorRdfJoin.joinBindings(m,O)).filter(O=>O!==null),{autoStart:!1}),autoStart:!1})},{autoStart:!1,onClose(){p.bindingsStream.destroy(),y.bindingsStream.destroy()}})}else{const{hashFunction:p}=await this.mediatorHashBindings.mediate({context:s.context}),y=h.map(_=>_.variable);f=new e.HashJoin(l.entriesSorted[0].output.bindingsStream,l.entriesSorted[1].output.bindingsStream,_=>p(_,y),i.ActorRdfJoin.joinBindings)}return{result:{type:"bindings",bindingsStream:f,metadata:async()=>await this.constructResultMetadata(l.entriesSorted,d,s.context)}}}async getJoinCoefficients(s,l){let d=s.entries;l.metadatas[1].cardinality.value<l.metadatas[0].cardinality.value&&(l.metadatas=[l.metadatas[1],l.metadatas[0]],d=[s.entries[1],s.entries[0]]);const{metadatas:f}=l,h=i.ActorRdfJoin.getRequestInitialTimes(f),p=i.ActorRdfJoin.getRequestItemTimes(f);let y=f[0].cardinality.value+f[1].cardinality.value;return this.canHandleUndefs||(y*=.8),(0,r.passTestWithSideData)({iterations:y,persistedItems:f[0].cardinality.value,blockingItems:f[0].cardinality.value,requestTime:h[0]+f[0].cardinality.value*p[0]+h[1]+f[1].cardinality.value*p[1]},{...l,entriesSorted:d})}};return Nh.ActorRdfJoinHash=u,Nh}var BR;function CR(){return BR||(BR=1,(function(i){var r=Oo&&Oo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Oo&&Oo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(mV(),i)})(Oo)),Oo}var Fo={},Lh={},QR;function gV(){if(QR)return Lh;QR=1,Object.defineProperty(Lh,"__esModule",{value:!0}),Lh.ActorRdfJoinSymmetricHash=void 0;const i=nr(),r=ae(),o=Xg();let n=class extends i.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"symmetric-hash",limitEntries:2,requiresVariableOverlap:!0})}async getOutput(e){const a=await i.ActorRdfJoin.getMetadatas(e.entries),u=i.ActorRdfJoin.overlappingVariables(a),{hashFunction:c}=await this.mediatorHashBindings.mediate({context:e.context}),s=u.map(d=>d.variable);return{result:{type:"bindings",bindingsStream:new o.SymmetricHashJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,d=>c(d,s),i.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(e.entries,a,e.context)}}}async getJoinCoefficients(e,a){const{metadatas:u}=a,c=i.ActorRdfJoin.getRequestInitialTimes(u),s=i.ActorRdfJoin.getRequestItemTimes(u);return(0,r.passTestWithSideData)({iterations:u[0].cardinality.value+u[1].cardinality.value,persistedItems:u[0].cardinality.value+u[1].cardinality.value,blockingItems:0,requestTime:c[0]+u[0].cardinality.value*s[0]+c[1]+u[1].cardinality.value*s[1]},a)}};return Lh.ActorRdfJoinSymmetricHash=n,Lh}var UR;function bV(){return UR||(UR=1,(function(i){var r=Fo&&Fo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Fo&&Fo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(gV(),i)})(Fo)),Fo}var Ao={},xh={},VR;function vV(){if(VR)return xh;VR=1,Object.defineProperty(xh,"__esModule",{value:!0}),xh.ActorRdfJoinNestedLoop=void 0;const i=nr(),r=ae(),o=Xg();let n=class extends i.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){return{result:{type:"bindings",bindingsStream:new o.NestedLoopJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,i.ActorRdfJoin.joinBindings,{autoStart:!1}),metadata:async()=>await this.constructResultMetadata(e.entries,await i.ActorRdfJoin.getMetadatas(e.entries),e.context)}}}async getJoinCoefficients(e,a){const{metadatas:u}=a,c=i.ActorRdfJoin.getRequestInitialTimes(u),s=i.ActorRdfJoin.getRequestItemTimes(u);return(0,r.passTestWithSideData)({iterations:u[0].cardinality.value*u[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:c[0]+u[0].cardinality.value*s[0]+c[1]+u[1].cardinality.value*s[1]},a)}};return xh.ActorRdfJoinNestedLoop=n,xh}var GR;function TV(){return GR||(GR=1,(function(i){var r=Ao&&Ao.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ao&&Ao.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(vV(),i)})(Ao)),Ao}var wo={},Bh={},Eo={},Ch={},jo={},XR;function GI(){if(XR)return jo;XR=1,Object.defineProperty(jo,"__esModule",{value:!0}),jo.bindingsToCompactString=jo.bindingsToString=void 0;const i=sr();function r(n){const t={};for(const e of n.keys())t[e.value]=(0,i.termToString)(n.get(e));return JSON.stringify(t,null,"  ")}jo.bindingsToString=r;function o(n,t){return t.map(e=>{const a=n.get(e);return a?(0,i.termToString)(a):""}).join("")}return jo.bindingsToCompactString=o,jo}var zR;function XI(){if(zR)return Ch;zR=1,Object.defineProperty(Ch,"__esModule",{value:!0}),Ch.Bindings=void 0;const i=ae(),r=P0,o=GI();let n=class Gt{constructor(e,a,u){this.type="bindings",this.dataFactory=e,this.entries=a,this.contextHolder=u}has(e){return this.entries.has(typeof e=="string"?e:e.value)}get(e){return this.entries.get(typeof e=="string"?e:e.value)}set(e,a){return new Gt(this.dataFactory,this.entries.set(typeof e=="string"?e:e.value,a),this.contextHolder)}delete(e){return new Gt(this.dataFactory,this.entries.delete(typeof e=="string"?e:e.value),this.contextHolder)}keys(){return this.mapIterable(this.iteratorToIterable(this.entries.keys()),e=>this.dataFactory.variable(e))}values(){return this.iteratorToIterable(this.entries.values())}forEach(e){for(const[a,u]of this.entries.entries())e(u,this.dataFactory.variable(a))}get size(){return this.entries.size}[Symbol.iterator](){return this.mapIterable(this.iteratorToIterable(this.entries.entries()),([e,a])=>[this.dataFactory.variable(e),a])[Symbol.iterator]()}equals(e){if(!e)return!1;if(this===e)return!0;if(this.size!==e.size)return!1;for(const a of this.keys())if(!this.get(a)?.equals(e.get(a)))return!1;return!0}filter(e){return new Gt(this.dataFactory,(0,r.Map)(this.entries.filter((a,u)=>e(a,this.dataFactory.variable(u)))),this.contextHolder)}map(e){return new Gt(this.dataFactory,(0,r.Map)(this.entries.map((a,u)=>e(a,this.dataFactory.variable(u)))),this.contextHolder)}merge(e){if(this.size<e.size&&e instanceof Gt)return e.merge(this);let a=this.entries;if(e instanceof Gt)for(const[u,c]of e.entries){const s=this.entries.get(u);if(s&&!s.equals(c))return;a=a.set(u,c)}else for(const[u,c]of e){const s=this.entries.get(u.value);if(s&&!s.equals(c))return;a=a.set(u.value,c)}return this.createBindingsWithContexts(a,e)}mergeWith(e,a){if(this.size<a.size&&a instanceof Gt)return a.mergeWith(e,this);let u=this.entries;if(a instanceof Gt)for(const[c,s]of a.entries){const l=this.entries.get(c);let d;l&&!l.equals(s)?d=e(l,s,this.dataFactory.variable(c)):d=s,u=u.set(c,d)}else for(const[c,s]of a){const l=this.entries.get(c.value);let d;l&&!l.equals(s)?d=e(l,s,c):d=s,u=u.set(c.value,d)}return this.createBindingsWithContexts(u,a)}createBindingsWithContexts(e,a){if(this.contextHolder&&this.contextHolder.context){let u=this.contextHolder.context;return"contextHolder"in a&&a.contextHolder&&a.contextHolder.context&&(u=Gt.mergeContext(this.contextHolder.contextMergeHandlers,u,a.contextHolder.context)),new Gt(this.dataFactory,e,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:u})}return new Gt(this.dataFactory,e,a.contextHolder)}static mergeContext(e,a,u){const c=[...a.keys(),...u.keys()],s={},l={},d=new Set(u.keys().map(h=>h.name)),f=a.keys().filter(h=>d.has(h.name));for(const h of c){if(l[h.name]===1)continue;l[h.name]=1;const p=f.some(y=>y.name===h.name);if(e[h.name]&&p){s[h.name]=e[h.name].run(a.get(h),u.get(h));continue}!e[h.name]&&p||(s[h.name]=a.get(h)||u.get(h))}return new i.ActionContext(s)}setContextEntry(e,a){return this.setContextEntryRaw(e,a)}setContextEntryRaw(e,a){return this.contextHolder&&this.contextHolder.context?new Gt(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:this.contextHolder.context.set(e,a)}):new Gt(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder?.contextMergeHandlers??{},context:new i.ActionContext().set(e,a)})}deleteContextEntry(e){return this.deleteContextEntryRaw(e)}deleteContextEntryRaw(e){return this.contextHolder?new Gt(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:this.contextHolder.context?.delete(e)}):new Gt(this.dataFactory,this.entries)}getContext(){return this.contextHolder?.context}getContextEntry(e){return this.getContext()?.get(e)}toString(){return(0,o.bindingsToString)(this)}*mapIterable(e,a){for(const u of e)yield a(u)}iteratorToIterable(e){return{[Symbol.iterator]:()=>e}}};return Ch.Bindings=n,Ch}var Qh={},HR;function OV(){if(HR)return Qh;HR=1,Object.defineProperty(Qh,"__esModule",{value:!0}),Qh.BindingsFactory=void 0;const i=P0,r=XI();let o=class zI{constructor(t,e){this.dataFactory=t,this.contextMergeHandlers=e}static async create(t,e,a){return new zI(a,(await t.mediate({context:e})).mergeHandlers)}bindings(t=[]){return new r.Bindings(this.dataFactory,(0,i.Map)(t.map(([e,a])=>[e.value,a])),this.contextMergeHandlers?{contextMergeHandlers:this.contextMergeHandlers}:void 0)}fromBindings(t){return this.bindings([...t])}fromRecord(t){return this.bindings(Object.entries(t).map(([e,a])=>[this.dataFactory.variable(e),a]))}};return Qh.BindingsFactory=o,Qh}var $R;function _t(){return $R||($R=1,(function(i){var r=Eo&&Eo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Eo&&Eo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(XI(),i),o(OV(),i),o(GI(),i)})(Eo)),Eo}var JR;function SV(){if(JR)return Bh;JR=1,Object.defineProperty(Bh,"__esModule",{value:!0}),Bh.ActorRdfJoinMinusHash=void 0;const i=nr(),r=ae(),o=_t(),n=Y0(),t=cs(),e=sr();let a=class HI extends i.ActorRdfJoin{constructor(c){super(c,{logicalType:"minus",physicalName:`hash-${c.canHandleUndefs?"undef":"def"}`,limitEntries:2,canHandleUndefs:c.canHandleUndefs})}static constructIndex(c,s){return c?new n.BindingsIndexUndef(s,l=>l&&l.termType!=="Variable"?(0,e.termToString)(l):"",!1):new n.BindingsIndexDef(s,o.bindingsToCompactString)}async getOutput(c){const s=c.entries[1].output,l=c.entries[0].output,d=await i.ActorRdfJoin.getMetadatas(c.entries);let f=i.ActorRdfJoin.overlappingVariables(d);if(c.graphVariableFromParentScope&&(f=f.filter(p=>!p.variable.equals(c.graphVariableFromParentScope))),f.length===0)return s.bindingsStream.destroy(),{result:l};const h=new t.ClosableTransformIterator(async()=>{const p=HI.constructIndex(this.canHandleUndefs,f);return await new Promise(y=>{s.bindingsStream.on("data",_=>p.put(_,!0)),s.bindingsStream.on("end",y),s.bindingsStream.on("error",_=>h.emit("error",_))}),l.bindingsStream.filter(y=>!p.getFirst(y,!0))},{autoStart:!1,onClose(){s.bindingsStream.destroy(),l.bindingsStream.destroy()}});return{result:{type:"bindings",bindingsStream:h,metadata:l.metadata}}}async getJoinCoefficients(c,s){const{metadatas:l}=s,d=i.ActorRdfJoin.getRequestInitialTimes(l),f=i.ActorRdfJoin.getRequestItemTimes(l);let h=l[0].cardinality.value+l[1].cardinality.value;return this.canHandleUndefs||(h*=.8),(0,r.passTestWithSideData)({iterations:h,persistedItems:l[0].cardinality.value,blockingItems:l[0].cardinality.value,requestTime:d[0]+l[0].cardinality.value*f[0]+d[1]+l[1].cardinality.value*f[1]},s)}};return Bh.ActorRdfJoinMinusHash=a,Bh}var KR;function YR(){return KR||(KR=1,(function(i){var r=wo&&wo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=wo&&wo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(SV(),i)})(wo)),wo}var Ro={},Uh={},WR;function FV(){if(WR)return Uh;WR=1,Object.defineProperty(Uh,"__esModule",{value:!0}),Uh.ActorRdfJoinOptionalHash=void 0;const i=nr(),r=ae(),o=_t(),n=Y0(),t=cs(),e=Ye(),a=sr();let u=class $1 extends i.ActorRdfJoin{constructor(s){super(s,{logicalType:"optional",physicalName:`hash-${s.canHandleUndefs?"undef":"def"}-${s.blocking?"blocking":"nonblocking"}`,limitEntries:2,canHandleUndefs:s.canHandleUndefs,requiresVariableOverlap:!0})}static constructIndex(s,l){return s?new n.BindingsIndexUndef(l,d=>d&&d.termType!=="Variable"?(0,a.termToString)(d):"",!0):new n.BindingsIndexDef(l,o.bindingsToCompactString)}async getOutput(s){const l=s.entries[1].output,d=s.entries[0].output,f=await i.ActorRdfJoin.getMetadatas(s.entries),h=i.ActorRdfJoin.overlappingVariables(f);let p;return this.blocking?p=new t.ClosableTransformIterator(async()=>{const y=$1.constructIndex(this.canHandleUndefs,h);return await new Promise(_=>{l.bindingsStream.on("data",m=>{(y.getFirst(m,!0)??y.put(m,[])).push(m)}),l.bindingsStream.on("end",_),l.bindingsStream.on("error",m=>{p.emit("error",m)})}),new e.MultiTransformIterator(d.bindingsStream,{multiTransform:_=>new e.ArrayIterator(y.get(_).flat().map(m=>i.ActorRdfJoin.joinBindings(_,m)).filter(m=>m!==null),{autoStart:!1}),optional:!0,autoStart:!1})},{autoStart:!1,onClose(){l.bindingsStream.destroy(),d.bindingsStream.destroy()}}):p=new t.ClosableTransformIterator(async()=>{const y=$1.constructIndex(this.canHandleUndefs,h);let _=!0;return l.bindingsStream.on("data",m=>{(y.getFirst(m,!0)??y.put(m,new e.BufferedIterator({autoStart:!1})))._push(m)}),l.bindingsStream.on("end",()=>{for(const m of y.values())m.close();_=!1}),l.bindingsStream.on("error",m=>{p.emit("error",m)}),new e.MultiTransformIterator(d.bindingsStream,{multiTransform:m=>{let O=y.get(m);return O.length===0&&(_?O=[y.put(m,new e.BufferedIterator({autoStart:!1}))]:O=[]),new e.UnionIterator(O.map(S=>S.clone()),{autoStart:!1}).map(S=>i.ActorRdfJoin.joinBindings(m,S))},optional:!0,autoStart:!1})},{autoStart:!1,onClose(){l.bindingsStream.destroy(),d.bindingsStream.destroy()}}),{result:{type:"bindings",bindingsStream:p,metadata:async()=>await this.constructResultMetadata(s.entries,f,s.context,{},!0)}}}async getJoinCoefficients(s,l){const{metadatas:d}=l,f=i.ActorRdfJoin.getRequestInitialTimes(d),h=i.ActorRdfJoin.getRequestItemTimes(d);let p=d[0].cardinality.value+d[1].cardinality.value;return this.canHandleUndefs||(p*=.8),this.blocking&&(p*=.9),(0,r.passTestWithSideData)({iterations:p,persistedItems:d[0].cardinality.value,blockingItems:this.blocking?d[0].cardinality.value:0,requestTime:f[0]+d[0].cardinality.value*h[0]+f[1]+d[1].cardinality.value*h[1]},l)}};return Uh.ActorRdfJoinOptionalHash=u,Uh}var ZR;function cg(){return ZR||(ZR=1,(function(i){var r=Ro&&Ro.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ro&&Ro.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(FV(),i)})(Ro)),Ro}var Do={},Vh={},kR;function AV(){if(kR)return Vh;kR=1,Object.defineProperty(Vh,"__esModule",{value:!0}),Vh.ActorRdfJoinOptionalNestedLoop=void 0;const i=nr(),r=ae(),o=Xg();let n=class extends i.ActorRdfJoin{constructor(e){super(e,{logicalType:"optional",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){return{result:{type:"bindings",bindingsStream:new o.NestedLoopJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,i.ActorRdfJoin.joinBindings,{optional:!0,autoStart:!1}),metadata:async()=>await this.constructResultMetadata(e.entries,await i.ActorRdfJoin.getMetadatas(e.entries),e.context,{},!0)}}}async getJoinCoefficients(e,a){const{metadatas:u}=a,c=i.ActorRdfJoin.getRequestInitialTimes(u),s=i.ActorRdfJoin.getRequestItemTimes(u);return(0,r.passTestWithSideData)({iterations:u[0].cardinality.value*u[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:c[0]+u[0].cardinality.value*s[0]+c[1]+u[1].cardinality.value*s[1]},a)}};return Vh.ActorRdfJoinOptionalNestedLoop=n,Vh}var eD;function wV(){return eD||(eD=1,(function(i){var r=Do&&Do.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Do&&Do.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(AV(),i)})(Do)),Do}var Po={},Gh={},Mo={},Xh={},tD;function EV(){if(tD)return Xh;tD=1,Object.defineProperty(Xh,"__esModule",{value:!0}),Xh.ActorBindingsAggregatorFactory=void 0;const i=ae();let r=class extends i.Actor{constructor(n){super(n),this.mediatorExpressionEvaluatorFactory=n.mediatorExpressionEvaluatorFactory}};return Xh.ActorBindingsAggregatorFactory=r,Xh}var zh={},rD;function jV(){if(rD)return zh;rD=1,Object.defineProperty(zh,"__esModule",{value:!0}),zh.AggregateEvaluator=void 0;const i=pe(),r=$(),o=sr();let n=class{constructor(e,a,u=!1){this.evaluator=e,this.distinct=a,this.throwError=u,this.errorOccurred=!1,this.errorOccurred=!1,this.superTypeProvider=e.context.getSafe(i.KeysExpressionEvaluator.superTypeProvider),this.termTransformer=new r.TermTransformer(this.superTypeProvider),this.variableValues=new Set}emptyValueTerm(){}emptyValue(){const e=this.emptyValueTerm();if(e===void 0&&this.throwError)throw new r.EmptyAggregateError;return e}async putBindings(e){if(!this.errorOccurred)try{const a=await this.evaluator.evaluate(e);if(!a||this.errorOccurred)return;(!this.distinct||!this.variableValues.has(o.termToString(a)))&&(this.putTerm(a),this.distinct&&this.variableValues.add(o.termToString(a)))}catch(a){this.safeThrow(a)}}async result(){if(!this.errorOccurred)return this.termResult()}safeThrow(e){if(this.throwError)throw e;this.errorOccurred=!0}termToNumericOrError(e){if(e.termType!=="Literal")throw new Error(`Term with value ${e.value} has type ${e.termType} and is not a numeric literal`);if(!r.isSubTypeOf(e.datatype.value,r.TypeAlias.SPARQL_NUMERIC,this.superTypeProvider))throw new Error(`Term datatype ${e.datatype.value} with value ${e.value} has type ${e.termType} and is not a numeric literal`);return this.termTransformer.transformLiteral(e)}};return zh.AggregateEvaluator=n,zh}var nD;function $t(){return nD||(nD=1,(function(i){var r=Mo&&Mo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Mo&&Mo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(EV(),i),o(jV(),i)})(Mo)),Mo}var Hh={},iD;function $I(){if(iD)return Hh;iD=1,Object.defineProperty(Hh,"__esModule",{value:!0}),Hh.CountAggregator=void 0;const i=$t(),r=$();let o=class extends i.AggregateEvaluator{constructor(t,e,a){super(t,e,a),this.state=void 0}emptyValueTerm(){return(0,r.typedLiteral)("0",r.TypeURL.XSD_INTEGER)}putTerm(t){this.state===void 0&&(this.state=0),this.state++}termResult(){return this.state===void 0?this.emptyValue():(0,r.typedLiteral)(String(this.state),r.TypeURL.XSD_INTEGER)}};return Hh.CountAggregator=o,Hh}var aD;function RV(){if(aD)return Gh;aD=1,Object.defineProperty(Gh,"__esModule",{value:!0}),Gh.ActorBindingsAggregatorFactoryCount=void 0;const i=$t(),r=ae(),o=Ie(),n=$I();let t=class extends i.ActorBindingsAggregatorFactory{constructor(a){super(a)}async test(a){return a.expr.aggregator!=="count"||a.expr.expression.expressionType===o.Algebra.expressionTypes.WILDCARD?(0,r.failTest)("This actor only supports the 'count' aggregator without wildcard."):(0,r.passTestVoid)()}async run({context:a,expr:u}){return new n.CountAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:u.expression,context:a}),u.distinct)}};return Gh.ActorBindingsAggregatorFactoryCount=t,Gh}var oD;function DV(){return oD||(oD=1,(function(i){var r=Po&&Po.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Po&&Po.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(RV(),i),o($I(),i)})(Po)),Po}var No={},$h={},Jh={},uD;function JI(){if(uD)return Jh;uD=1,Object.defineProperty(Jh,"__esModule",{value:!0}),Jh.GroupConcatAggregator=void 0;const i=$t(),r=$();let o=class extends i.AggregateEvaluator{constructor(t,e,a,u,c){super(t,e,c),this.dataFactory=a,this.state=void 0,this.lastLanguageValid=!0,this.lastLanguage=void 0,this.separator=u??" "}emptyValueTerm(){return r.typedLiteral("",r.TypeURL.XSD_STRING)}putTerm(t){this.state===void 0?(this.state=t.value,t.termType==="Literal"&&(this.lastLanguage=t.language)):(this.state+=this.separator+t.value,this.lastLanguageValid&&t.termType==="Literal"&&this.lastLanguage!==t.language&&(this.lastLanguageValid=!1,this.lastLanguage=void 0))}termResult(){return this.state===void 0?this.emptyValue():this.lastLanguageValid&&this.lastLanguage?r.langString(this.state,this.lastLanguage).toRDF(this.dataFactory):r.typedLiteral(this.state,r.TypeURL.XSD_STRING)}};return Jh.GroupConcatAggregator=o,Jh}var sD;function PV(){if(sD)return $h;sD=1,Object.defineProperty($h,"__esModule",{value:!0}),$h.ActorBindingsAggregatorFactoryGroupConcat=void 0;const i=$t(),r=pe(),o=ae(),n=JI();let t=class extends i.ActorBindingsAggregatorFactory{constructor(a){super(a)}async test(a){return a.expr.aggregator!=="group_concat"?(0,o.failTest)("This actor only supports the 'group_concat' aggregator."):(0,o.passTestVoid)()}async run({context:a,expr:u}){return new n.GroupConcatAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:u.expression,context:a}),u.distinct,a.getSafe(r.KeysInitQuery.dataFactory),u.separator)}};return $h.ActorBindingsAggregatorFactoryGroupConcat=t,$h}var cD;function MV(){return cD||(cD=1,(function(i){var r=No&&No.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=No&&No.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(PV(),i),o(JI(),i)})(No)),No}var Io={},Kh={},Yh={},lD;function KI(){if(lD)return Yh;lD=1,Object.defineProperty(Yh,"__esModule",{value:!0}),Yh.SampleAggregator=void 0;const i=$t();let r=class extends i.AggregateEvaluator{constructor(n,t,e){super(n,t,e),this.state=void 0}putTerm(n){this.state===void 0&&(this.state=n)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return Yh.SampleAggregator=r,Yh}var dD;function NV(){if(dD)return Kh;dD=1,Object.defineProperty(Kh,"__esModule",{value:!0}),Kh.ActorBindingsAggregatorFactorySample=void 0;const i=$t(),r=ae(),o=KI();let n=class extends i.ActorBindingsAggregatorFactory{constructor(e){super(e)}async test(e){return e.expr.aggregator!=="sample"?(0,r.failTest)("This actor only supports the 'sample' aggregator."):(0,r.passTestVoid)()}async run({context:e,expr:a}){return new o.SampleAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:a.expression,context:e}),a.distinct)}};return Kh.ActorBindingsAggregatorFactorySample=n,Kh}var fD;function IV(){return fD||(fD=1,(function(i){var r=Io&&Io.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Io&&Io.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(NV(),i),o(KI(),i)})(Io)),Io}var qo={},Wh={},Zh={},pD;function YI(){if(pD)return Zh;pD=1,Object.defineProperty(Zh,"__esModule",{value:!0}),Zh.WildcardCountAggregator=void 0;const i=$t(),r=$(),o=sr();let n=class extends i.AggregateEvaluator{constructor(e,a,u){super(e,a,u),this.bindingValues=new Map,this.state=void 0}putTerm(e){}async putBindings(e){this.handleDistinct(e)||(this.state===void 0&&(this.state=0),this.state+=1)}emptyValueTerm(){return(0,r.typedLiteral)("0",r.TypeURL.XSD_INTEGER)}termResult(){return this.state===void 0?this.emptyValue():(0,r.typedLiteral)(String(this.state),r.TypeURL.XSD_INTEGER)}handleDistinct(e){if(this.distinct){const a=[...e];a.sort((d,f)=>d[0].value.localeCompare(f[0].value));const u=a.map(([d])=>d.value).join(","),c=a.map(([,d])=>o.termToString(d)).join(","),s=this.bindingValues.get(u),l=s!==void 0&&s.has(c);return s||this.bindingValues.set(u,new Set),this.bindingValues.get(u).add(c),l}return!1}};return Zh.WildcardCountAggregator=n,Zh}var hD;function qV(){if(hD)return Wh;hD=1,Object.defineProperty(Wh,"__esModule",{value:!0}),Wh.ActorBindingsAggregatorFactoryWildcardCount=void 0;const i=$t(),r=ae(),o=YI();let n=class extends i.ActorBindingsAggregatorFactory{constructor(e){super(e)}async test(e){return e.expr.aggregator!=="count"||e.expr.expression.expressionType!=="wildcard"?(0,r.failTest)("This actor only supports the 'count' aggregator with wildcard."):(0,r.passTestVoid)()}async run({context:e,expr:a}){return new o.WildcardCountAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:a.expression,context:e}),a.distinct)}};return Wh.ActorBindingsAggregatorFactoryWildcardCount=n,Wh}var yD;function LV(){return yD||(yD=1,(function(i){var r=qo&&qo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=qo&&qo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(qV(),i),o(YI(),i)})(qo)),qo}var Lo={},kh={},ey={},_D;function WI(){if(_D)return ey;_D=1,Object.defineProperty(ey,"__esModule",{value:!0}),ey.AverageAggregator=void 0;const i=$t(),r=$();let o=class extends i.AggregateEvaluator{constructor(t,e,a,u,c,s){super(t,e,s),this.dataFactory=a,this.additionFunction=u,this.divisionFunction=c,this.state=void 0}emptyValueTerm(){return r.typedLiteral("0",r.TypeURL.XSD_INTEGER)}putTerm(t){if(this.state===void 0){const e=this.termToNumericOrError(t);this.state={sum:e,count:1}}else{const e=this.termToNumericOrError(t);this.state.sum=this.additionFunction.applyOnTerms([this.state.sum,e],this.evaluator),this.state.count++}}termResult(){if(this.state===void 0)return this.emptyValue();const t=new r.IntegerLiteral(this.state.count);return this.divisionFunction.applyOnTerms([this.state.sum,t],this.evaluator).toRDF(this.dataFactory)}};return ey.AverageAggregator=o,ey}var mD;function xV(){if(mD)return kh;mD=1,Object.defineProperty(kh,"__esModule",{value:!0}),kh.ActorBindingsAggregatorFactoryAverage=void 0;const i=$t(),r=pe(),o=ae(),n=$(),t=WI();let e=class extends i.ActorBindingsAggregatorFactory{constructor(u){super(u),this.mediatorFunctionFactory=u.mediatorFunctionFactory}async test(u){return u.expr.aggregator!=="avg"?(0,o.failTest)("This actor only supports the 'avg' aggregator."):(0,o.passTestVoid)()}async run({context:u,expr:c}){return new t.AverageAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:c.expression,context:u}),c.distinct,u.getSafe(r.KeysInitQuery.dataFactory),await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.ADDITION,context:u,requireTermExpression:!0}),await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.DIVISION,context:u,requireTermExpression:!0}))}};return kh.ActorBindingsAggregatorFactoryAverage=e,kh}var gD;function BV(){return gD||(gD=1,(function(i){var r=Lo&&Lo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Lo&&Lo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(xV(),i),o(WI(),i)})(Lo)),Lo}var xo={},ty={},ry={},bD;function ZI(){if(bD)return ry;bD=1,Object.defineProperty(ry,"__esModule",{value:!0}),ry.SumAggregator=void 0;const i=$t(),r=$();let o=class extends i.AggregateEvaluator{constructor(t,e,a,u,c){super(t,e,c),this.dataFactory=a,this.additionFunction=u,this.state=void 0}emptyValueTerm(){return(0,r.typedLiteral)("0",r.TypeURL.XSD_INTEGER)}putTerm(t){if(this.state===void 0)this.state=this.termToNumericOrError(t);else{const e=this.termToNumericOrError(t);this.state=this.additionFunction.applyOnTerms([this.state,e],this.evaluator)}}termResult(){return this.state===void 0?this.emptyValue():this.state.toRDF(this.dataFactory)}};return ry.SumAggregator=o,ry}var vD;function CV(){if(vD)return ty;vD=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.ActorBindingsAggregatorFactorySum=void 0;const i=$t(),r=pe(),o=ae(),n=$(),t=ZI();let e=class extends i.ActorBindingsAggregatorFactory{constructor(u){super(u),this.mediatorFunctionFactory=u.mediatorFunctionFactory}async test(u){return u.expr.aggregator!=="sum"?(0,o.failTest)("This actor only supports the 'sum' aggregator."):(0,o.passTestVoid)()}async run({expr:u,context:c}){return new t.SumAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:u.expression,context:c}),u.distinct,c.getSafe(r.KeysInitQuery.dataFactory),await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.ADDITION,context:c,requireTermExpression:!0}))}};return ty.ActorBindingsAggregatorFactorySum=e,ty}var TD;function QV(){return TD||(TD=1,(function(i){var r=xo&&xo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=xo&&xo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(CV(),i),o(ZI(),i)})(xo)),xo}var Bo={},ny={},iy={},OD;function UV(){if(OD)return iy;OD=1,Object.defineProperty(iy,"__esModule",{value:!0}),iy.ExpressionFunctionIn=void 0;const i=K(),r=$();let o=class extends i.ExpressionFunctionBase{constructor(t){super({arity:Number.POSITIVE_INFINITY,operator:r.SparqlOperator.IN,apply:async e=>{const{args:a,mapping:u,exprEval:c}=e,[s,...l]=a,d=await c.evaluatorExpressionEvaluation(s,u);return await this.inRecursive(d,{...e,args:l},[])}}),this.equalityFunction=t}checkArity(t){return t.length>0}async inRecursive(t,e,a){const{args:u,mapping:c,exprEval:s}=e;if(u.length===0)return a.every(d=>!d)?(0,r.bool)(!1):Promise.reject(new r.InError(a));try{const l=u.shift(),d=await s.evaluatorExpressionEvaluation(l,c);return this.equalityFunction.applyOnTerms([t,d],s).typedValue?(0,r.bool)(!0):this.inRecursive(t,e,[...a,!1])}catch(l){return this.inRecursive(t,e,[...a,l])}}};return iy.ExpressionFunctionIn=o,iy}var SD;function VV(){if(SD)return ny;SD=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.ActorFunctionFactoryExpressionIn=void 0;const i=K(),r=$(),o=UV();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.IN],termFunction:!1}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:r.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.ExpressionFunctionIn(a)}};return ny.ActorFunctionFactoryExpressionIn=n,ny}var FD;function GV(){return FD||(FD=1,(function(i){var r=Bo&&Bo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Bo&&Bo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(VV(),i)})(Bo)),Bo}var Co={},ay={},oy={},AD;function XV(){if(AD)return oy;AD=1,Object.defineProperty(oy,"__esModule",{value:!0}),oy.ExpressionFunctionNotIn=void 0;const i=K(),r=$();let o=class extends i.ExpressionFunctionBase{constructor(t){super({arity:Number.POSITIVE_INFINITY,operator:r.SparqlOperator.NOT_IN,apply:async e=>{const a=await this.inFunction.apply(e);return(0,r.bool)(!a.typedValue)}}),this.inFunction=t}checkArity(t){return t.length>0}};return oy.ExpressionFunctionNotIn=o,oy}var wD;function zV(){if(wD)return ay;wD=1,Object.defineProperty(ay,"__esModule",{value:!0}),ay.ActorFunctionFactoryExpressionNotIn=void 0;const i=K(),r=$(),o=XV();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.NOT_IN],termFunction:!1}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:r.SparqlOperator.IN,context:e.context,arguments:e.arguments});return new o.ExpressionFunctionNotIn(a)}};return ay.ActorFunctionFactoryExpressionNotIn=n,ay}var ED;function HV(){return ED||(ED=1,(function(i){var r=Co&&Co.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Co&&Co.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(zV(),i)})(Co)),Co}var Qo={},uy={},sy={},jD;function $V(){if(jD)return sy;jD=1,Object.defineProperty(sy,"__esModule",{value:!0}),sy.TermFunctionGreaterThan=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(t){super({arity:2,operator:r.SparqlOperator.GT,overloads:(0,r.declare)(r.SparqlOperator.GT).set(["term","term"],e=>([a,u])=>this.lessThanFunction.applyOnTerms([u,a],e)).collect()}),this.lessThanFunction=t}};return sy.TermFunctionGreaterThan=o,sy}var RD;function JV(){if(RD)return uy;RD=1,Object.defineProperty(uy,"__esModule",{value:!0}),uy.ActorFunctionFactoryTermGreaterThan=void 0;const i=K(),r=$(),o=$V();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.GT],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:r.SparqlOperator.LT,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionGreaterThan(a)}};return uy.ActorFunctionFactoryTermGreaterThan=n,uy}var DD;function KV(){return DD||(DD=1,(function(i){var r=Qo&&Qo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Qo&&Qo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(JV(),i)})(Qo)),Qo}var Uo={},cy={},ly={},PD;function YV(){if(PD)return ly;PD=1,Object.defineProperty(ly,"__esModule",{value:!0}),ly.TermFunctionGreaterThanEqual=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(t){super({arity:2,operator:r.SparqlOperator.GTE,overloads:(0,r.declare)(r.SparqlOperator.GTE).set(["term","term"],e=>([a,u])=>this.lessThanEqualFunction.applyOnTerms([u,a],e)).collect()}),this.lessThanEqualFunction=t}};return ly.TermFunctionGreaterThanEqual=o,ly}var MD;function WV(){if(MD)return cy;MD=1,Object.defineProperty(cy,"__esModule",{value:!0}),cy.ActorFunctionFactoryTermGreaterThanEqual=void 0;const i=K(),r=$(),o=YV();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.GTE],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:r.SparqlOperator.LTE,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionGreaterThanEqual(a)}};return cy.ActorFunctionFactoryTermGreaterThanEqual=n,cy}var ND;function ZV(){return ND||(ND=1,(function(i){var r=Uo&&Uo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Uo&&Uo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(WV(),i)})(Uo)),Uo}var Vo={},dy={},fy={},ID;function kV(){if(ID)return fy;ID=1,Object.defineProperty(fy,"__esModule",{value:!0}),fy.TermFunctionInequality=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(t){super({arity:2,operator:r.SparqlOperator.NOT_EQUAL,overloads:(0,r.declare)(r.SparqlOperator.NOT_EQUAL).set(["term","term"],e=>([a,u])=>(0,r.bool)(!this.equalityFunction.applyOnTerms([a,u],e).typedValue)).collect()}),this.equalityFunction=t}};return fy.TermFunctionInequality=o,fy}var qD;function eG(){if(qD)return dy;qD=1,Object.defineProperty(dy,"__esModule",{value:!0}),dy.ActorFunctionFactoryTermInequality=void 0;const i=K(),r=$(),o=kV();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.NOT_EQUAL],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:r.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionInequality(a)}};return dy.ActorFunctionFactoryTermInequality=n,dy}var LD;function tG(){return LD||(LD=1,(function(i){var r=Vo&&Vo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Vo&&Vo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(eG(),i)})(Vo)),Vo}var Go={},py={},hy={},xD;function rG(){if(xD)return hy;xD=1,Object.defineProperty(hy,"__esModule",{value:!0}),hy.TermFunctionLesserThan=void 0;const i=K(),r=pe(),o=$();let n=class extends i.TermFunctionBase{constructor(e){super({arity:2,operator:o.SparqlOperator.LT,overloads:(0,o.declare)(o.SparqlOperator.LT).numberTest(()=>(a,u)=>a<u).stringTest(()=>(a,u)=>a.localeCompare(u)===-1).booleanTest(()=>(a,u)=>a<u).dateTimeTest(a=>(u,c)=>(0,o.toUTCDate)(u,a.context.getSafe(r.KeysExpressionEvaluator.defaultTimeZone)).getTime()<(0,o.toUTCDate)(c,a.context.getSafe(r.KeysExpressionEvaluator.defaultTimeZone)).getTime()).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],to:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_DATE]}).set([o.TypeURL.XSD_YEAR_MONTH_DURATION,o.TypeURL.XSD_YEAR_MONTH_DURATION],()=>([a,u])=>(0,o.bool)((0,o.yearMonthDurationsToMonths)((0,o.defaultedYearMonthDurationRepresentation)(a.typedValue))<(0,o.yearMonthDurationsToMonths)((0,o.defaultedYearMonthDurationRepresentation)(u.typedValue)))).set([o.TypeURL.XSD_DAY_TIME_DURATION,o.TypeURL.XSD_DAY_TIME_DURATION],()=>([a,u])=>(0,o.bool)((0,o.dayTimeDurationsToSeconds)((0,o.defaultedDayTimeDurationRepresentation)(a.typedValue))<(0,o.dayTimeDurationsToSeconds)((0,o.defaultedDayTimeDurationRepresentation)(u.typedValue)))).set([o.TypeURL.XSD_TIME,o.TypeURL.XSD_TIME],a=>([u,c])=>(0,o.bool)((0,o.toUTCDate)((0,o.defaultedDateTimeRepresentation)(u.typedValue),a.context.getSafe(r.KeysExpressionEvaluator.defaultTimeZone)).getTime()<(0,o.toUTCDate)((0,o.defaultedDateTimeRepresentation)(c.typedValue),a.context.getSafe(r.KeysExpressionEvaluator.defaultTimeZone)).getTime())).set(["quad","quad"],a=>([u,c])=>{const s=this.quadComponentTest(u.subject,c.subject,a);if(s!==void 0)return(0,o.bool)(s);const l=this.quadComponentTest(u.predicate,c.predicate,a);if(l!==void 0)return(0,o.bool)(l);const d=this.quadComponentTest(u.object,c.object,a);return d!==void 0?(0,o.bool)(d):(0,o.bool)(this.quadComponentTest(u.graph,c.graph,a)??!1)},!1).collect()}),this.equalityFunction=e}quadComponentTest(e,a,u){return this.equalityFunction.applyOnTerms([e,a],u).typedValue?void 0:this.applyOnTerms([e,a],u).typedValue}};return hy.TermFunctionLesserThan=n,hy}var BD;function nG(){if(BD)return py;BD=1,Object.defineProperty(py,"__esModule",{value:!0}),py.ActorFunctionFactoryTermLesserThan=void 0;const i=K(),r=$(),o=rG();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.LT],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:r.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionLesserThan(a)}};return py.ActorFunctionFactoryTermLesserThan=n,py}var CD;function iG(){return CD||(CD=1,(function(i){var r=Go&&Go.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Go&&Go.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(nG(),i)})(Go)),Go}var Xo={},yy={},_y={},QD;function aG(){if(QD)return _y;QD=1,Object.defineProperty(_y,"__esModule",{value:!0}),_y.TermFunctionLesserThanEqual=void 0;const i=K(),r=$();let o=class extends i.TermFunctionBase{constructor(t,e){super({arity:2,operator:r.SparqlOperator.LTE,overloads:(0,r.declare)(r.SparqlOperator.LTE).set(["term","term"],a=>([u,c])=>(0,r.bool)(this.lessThanFunction.applyOnTerms([u,c],a).typedValue||this.equalityFunction.applyOnTerms([u,c],a).typedValue)).collect()}),this.equalityFunction=t,this.lessThanFunction=e}};return _y.TermFunctionLesserThanEqual=o,_y}var UD;function oG(){if(UD)return yy;UD=1,Object.defineProperty(yy,"__esModule",{value:!0}),yy.ActorFunctionFactoryTermLesserThanEqual=void 0;const i=K(),r=$(),o=aG();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.LTE],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:r.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments}),u=await this.mediatorFunctionFactory.mediate({functionName:r.SparqlOperator.LT,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionLesserThanEqual(a,u)}};return yy.ActorFunctionFactoryTermLesserThanEqual=n,yy}var VD;function uG(){return VD||(VD=1,(function(i){var r=Xo&&Xo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Xo&&Xo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(oG(),i)})(Xo)),Xo}var zo={},my={},GD;function sG(){if(GD)return my;GD=1,Object.defineProperty(my,"__esModule",{value:!0}),my.ActorQueryOperationAsk=void 0;const i=at(),r=ae(),o=Ue();let n=class extends i.ActorQueryOperationTypedMediated{constructor(e){super(e,"ask")}async testOperation(e,a){return(0,r.passTestVoid)()}async runOperation(e,a){const u=await this.mediatorQueryOperation.mediate({operation:e.input,context:a}),{bindingsStream:c}=(0,o.getSafeBindings)(u);return{type:"boolean",execute:async()=>(await c.take(1).toArray()).length===1}}};return my.ActorQueryOperationAsk=n,my}var XD;function cG(){return XD||(XD=1,(function(i){var r=zo&&zo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=zo&&zo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(sG(),i)})(zo)),zo}var Ho={},gy={},zD;function lG(){if(zD)return gy;zD=1,Object.defineProperty(gy,"__esModule",{value:!0}),gy.ActorQueryOperationBgpJoin=void 0;const i=at(),r=pe(),o=ae(),n=Ie();let t=class extends i.ActorQueryOperationTypedMediated{constructor(a){super(a,"bgp")}async testOperation(a,u){return(0,o.passTestVoid)()}async runOperation(a,u){const c=u.getSafe(r.KeysInitQuery.dataFactory),s=new n.Factory(c);return this.mediatorQueryOperation.mediate({operation:s.createJoin(a.patterns),context:u})}};return gy.ActorQueryOperationBgpJoin=t,gy}var HD;function dG(){return HD||(HD=1,(function(i){var r=Ho&&Ho.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ho&&Ho.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(lG(),i)})(Ho)),Ho}var $o={},by={},w1={},Mr={},$D;function fG(){if($D)return Mr;$D=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.termToString=o,Mr.getLiteralValue=n,Mr.getLiteralType=t,Mr.getLiteralLanguage=e,Mr.getLiteralDirection=a,Mr.stringToTerm=u,Mr.quadToStringQuad=c,Mr.stringQuadToQuad=s;const i=ns(),r=new i.DataFactory;function o(l){if(l)switch(l.termType){case"NamedNode":return l.value;case"BlankNode":return"_:"+l.value;case"Literal":const d=l;return'"'+d.value+'"'+(d.datatype&&d.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+d.datatype.value:"")+(d.language?"@"+d.language:"")+(d.direction?"--"+d.direction:"");case"Quad":return`<<${o(l.subject)} ${o(l.predicate)} ${o(l.object)}${l.graph.termType==="DefaultGraph"?"":" "+o(l.graph)}>>`;case"Variable":return"?"+l.value;case"DefaultGraph":return l.value}}function n(l){const d=/^"([^]*)"/.exec(l);if(!d)throw new Error(l+" is not a literal");return d[1]}function t(l){const d=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(l);if(!d)throw new Error(l+" is not a literal");return d[1]||(d[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function e(l){const d=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(l);if(!d)throw new Error(l+" is not a literal");if(d[1]){let f=d[1].toLowerCase();const h=f.indexOf("--");return h>=0&&(f=f.slice(0,h)),f}return""}function a(l){const d=l.indexOf("--",l.lastIndexOf('"'));if(d>=0){const f=l.slice(d+2,l.length);if(f==="ltr"||f==="rtl")return f;throw new Error(l+" is not a literal with a valid direction")}return""}function u(l,d){if(d=d||r,!l||!l.length)return d.defaultGraph();switch(l[0]){case"_":return d.blankNode(l.substr(2));case"?":if(!d.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return d.variable(l.substr(1));case'"':const f=e(l),h=a(l),p=d.namedNode(t(l));return d.literal(n(l),f?{language:f,direction:h}:p);default:if(l[0]==="<"&&l.length>4&&l[1]==="<"&&l[l.length-1]===">"&&l[l.length-2]===">"){const y=l.slice(2,-2).trim();let _=[],m=0,O=0,v=!1;for(let S=0;S<y.length;S++){const E=y[S];if(E==="<"&&m++,E===">"){if(m===0)throw new Error("Found closing tag without opening tag in "+l);m--}if(E==='"'){let j=!1,Q=S;for(;Q-- >0&&y[Q]==="\\";)j=!j;j||(v=!v)}if(E===" "&&!v&&m===0){for(_.push(y.slice(O,S));y[S+1]===" ";)S+=1;O=S+1}}if(m!==0)throw new Error("Found opening tag without closing tag in "+l);if(_.push(y.slice(O,y.length)),_.length!==3&&_.length!==4)throw new Error("Nested quad syntax error "+l);return _=_.map(S=>S.startsWith("<")&&!S.includes(" ")?S.slice(1,-1):S),d.quad(u(_[0]),u(_[1]),u(_[2]),_[3]?u(_[3]):void 0)}return d.namedNode(l)}}function c(l){return{subject:o(l.subject),predicate:o(l.predicate),object:o(l.object),graph:o(l.graph)}}function s(l,d){return d=d||r,d.quad(u(l.subject,d),u(l.predicate,d),u(l.object,d),u(l.graph,d))}return Mr}var JD;function pG(){return JD||(JD=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.termToString=i.stringToTerm=i.stringQuadToQuad=i.quadToStringQuad=i.getLiteralValue=i.getLiteralType=i.getLiteralDirection=i.getLiteralLanguage=void 0;const r=fG();Object.defineProperty(i,"getLiteralLanguage",{enumerable:!0,get:function(){return r.getLiteralLanguage}}),Object.defineProperty(i,"getLiteralDirection",{enumerable:!0,get:function(){return r.getLiteralDirection}}),Object.defineProperty(i,"getLiteralType",{enumerable:!0,get:function(){return r.getLiteralType}}),Object.defineProperty(i,"getLiteralValue",{enumerable:!0,get:function(){return r.getLiteralValue}}),Object.defineProperty(i,"quadToStringQuad",{enumerable:!0,get:function(){return r.quadToStringQuad}}),Object.defineProperty(i,"stringQuadToQuad",{enumerable:!0,get:function(){return r.stringQuadToQuad}}),Object.defineProperty(i,"stringToTerm",{enumerable:!0,get:function(){return r.stringToTerm}}),Object.defineProperty(i,"termToString",{enumerable:!0,get:function(){return r.termToString}})})(w1)),w1}var KD;function hG(){if(KD)return by;KD=1,Object.defineProperty(by,"__esModule",{value:!0}),by.ActorQueryOperationDistinctIdentity=void 0;const i=at(),r=ae(),o=Ue(),n=pG();let t=class extends i.ActorQueryOperationTypedMediated{constructor(a){super(a,"distinct")}async testOperation(a,u){return(0,r.passTestVoid)()}async runOperation(a,u){const c=await this.mediatorQueryOperation.mediate({operation:a.input,context:u});if(c.type==="quads"){const f=(0,o.getSafeQuads)(c);return{type:"quads",quadStream:f.quadStream.filter(await this.newIdentityFilterQuads()),metadata:f.metadata}}const s=(0,o.getSafeBindings)(c),l=(await s.metadata()).variables.map(f=>f.variable);return{type:"bindings",bindingsStream:s.bindingsStream.filter(await this.newIdentityFilter(l)),metadata:s.metadata}}async newIdentityFilter(a){const u={};return c=>{const s=a.map(l=>n.termToString(c.get(l))).join("-");return!(s in u)&&(u[s]=!0)}}async newIdentityFilterQuads(){const a={};return u=>{const c=Object.values(n.quadToStringQuad(u)).join(" ");return!(c in a)&&(a[c]=!0)}}};return by.ActorQueryOperationDistinctIdentity=t,by}var YD;function yG(){return YD||(YD=1,(function(i){var r=$o&&$o.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=$o&&$o.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(hG(),i)})($o)),$o}var Jo={},vy={},WD;function _G(){if(WD)return vy;WD=1,Object.defineProperty(vy,"__esModule",{value:!0}),vy.ActorQueryOperationExtend=void 0;const i=at(),r=ae(),o=_t(),n=$(),t=Ue();let e=class extends i.ActorQueryOperationTypedMediated{constructor(u){super(u,"extend"),this.mediatorExpressionEvaluatorFactory=u.mediatorExpressionEvaluatorFactory}async testOperation(){return(0,r.passTestVoid)()}async runOperation(u,c){const{expression:s,input:l,variable:d}=u,f=(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:l,context:c}));if((await f.metadata()).variables.some(_=>_.variable.equals(d)))throw new Error(`Illegal binding to variable '${d.value}' that has already been bound`);const h=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:s,context:c}),p=async(_,m,O)=>{try{const v=await h.evaluate(_),S=_.set(d,v);O(S)}catch(v){(0,n.isExpressionError)(v)?(O(_),this.logWarn(c,`Expression error for extend operation (${v.message})with bindings '${(0,o.bindingsToString)(_)}'`)):y.emit("error",v)}m()},y=f.bindingsStream.transform({autoStart:!1,transform:p});return{type:"bindings",bindingsStream:y,async metadata(){const _=await f.metadata();return{..._,variables:[..._.variables,{variable:d,canBeUndef:!1}]}}}}};return vy.ActorQueryOperationExtend=e,vy}var ZD;function mG(){return ZD||(ZD=1,(function(i){var r=Jo&&Jo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Jo&&Jo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(_G(),i)})(Jo)),Jo}var Ko={},Ty={},kD;function gG(){if(kD)return Ty;kD=1,Object.defineProperty(Ty,"__esModule",{value:!0}),Ty.ActorQueryOperationFilter=void 0;const i=at(),r=ae(),o=_t(),n=$(),t=Ue();let e=class extends i.ActorQueryOperationTypedMediated{constructor(u){super(u,"filter"),this.mediatorExpressionEvaluatorFactory=u.mediatorExpressionEvaluatorFactory}async testOperation(){return(0,r.passTestVoid)()}async runOperation(u,c){const s=await this.mediatorQueryOperation.mediate({operation:u.input,context:c}),l=(0,t.getSafeBindings)(s);(0,t.validateQueryOutput)(l,"bindings");const d=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:u.expression,context:c}),f=async(p,y,_)=>{try{await d.evaluateAsEBV(p)&&_(p)}catch(m){(0,n.isExpressionError)(m)?this.logWarn(c,"Error occurred while filtering.",()=>({error:m,bindings:(0,o.bindingsToString)(p)})):h.emit("error",m)}y()},h=l.bindingsStream.transform({transform:f,autoStart:!1});return{type:"bindings",bindingsStream:h,metadata:l.metadata}}};return Ty.ActorQueryOperationFilter=e,Ty}var eP;function bG(){return eP||(eP=1,(function(i){var r=Ko&&Ko.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ko&&Ko.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(gG(),i)})(Ko)),Ko}var Yo={},Oy={},Sy={},tP;function kI(){if(tP)return Sy;tP=1,Object.defineProperty(Sy,"__esModule",{value:!0}),Sy.BindingsToQuadsIterator=void 0;const i=Ye(),r=vn();let o=class H_ extends i.MultiTransformIterator{constructor(t,e,a){super(a,{autoStart:!1}),this.dataFactory=t,this.template=e,this.blankNodeCounter=0}static bindTerm(t,e){return e.termType==="Variable"?t.get(e):e}static bindQuad(t,e){try{return(0,r.mapTermsNested)(e,a=>{const u=H_.bindTerm(t,a);if(!u)throw new Error("Unbound term");return u})}catch{}}static localizeBlankNode(t,e,a){return a.termType==="BlankNode"?t.blankNode(`${a.value}${e}`):a}static localizeQuad(t,e,a){return(0,r.mapTermsNested)(a,u=>H_.localizeBlankNode(t,e,u))}bindTemplate(t,e,a){return e.map(H_.localizeQuad.bind(null,this.dataFactory,a)).map(c=>H_.bindQuad.bind(null,t)(c)).filter(Boolean)}_createTransformer(t){return new i.ArrayIterator(this.bindTemplate(t,this.template,this.blankNodeCounter++),{autoStart:!1})}};return Sy.BindingsToQuadsIterator=o,Sy}var rP;function vG(){if(rP)return Oy;rP=1,Object.defineProperty(Oy,"__esModule",{value:!0}),Oy.ActorQueryOperationConstruct=void 0;const i=at(),r=pe(),o=ae(),n=Ue(),t=vn(),e=Ie(),a=kI();let u=class e5 extends i.ActorQueryOperationTypedMediated{constructor(s){super(s,"construct")}static getVariables(s){return(0,t.uniqTerms)([].concat.apply([],s.map(l=>(0,t.getVariables)((0,t.getTermsNested)(l)))))}async testOperation(s,l){return(0,o.passTestVoid)()}async runOperation(s,l){const d=l.getSafe(r.KeysInitQuery.dataFactory),f=e5.getVariables(s.template),h={type:e.Algebra.types.PROJECT,input:s.input,variables:f},p=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:h,context:l})),y=new a.BindingsToQuadsIterator(d,s.template,p.bindingsStream);return{metadata:()=>p.metadata().then(m=>({...m,order:void 0,cardinality:{type:m.cardinality.type,value:m.cardinality.value*s.template.length},availableOrders:void 0})),quadStream:y,type:"quads"}}};return Oy.ActorQueryOperationConstruct=u,Oy}var nP;function t5(){return nP||(nP=1,(function(i){var r=Yo&&Yo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Yo&&Yo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(vG(),i),o(kI(),i)})(Yo)),Yo}var Wo={},Fy={},iP;function TG(){if(iP)return Fy;iP=1,Object.defineProperty(Fy,"__esModule",{value:!0}),Fy.ActorQueryOperationFromQuad=void 0;const i=at(),r=pe(),o=ae(),n=Ie();let t=class vr extends i.ActorQueryOperationTypedMediated{constructor(a){super(a,"from")}static copyOperation(a,u){const c={};for(const s of Object.keys(a))Array.isArray(a[s])&&s!=="template"?s==="variables"?c[s]=a[s]:c[s]=a[s].map(u):vr.ALGEBRA_TYPES.includes(a[s].type)?c[s]=u(a[s]):c[s]=a[s];return c}static applyOperationDefaultGraph(a,u,c){if(u.type==="bgp"&&u.patterns.length>0||u.type==="path"||u.type==="pattern"){if(u.type==="bgp")return vr.joinOperations(a,u.patterns.map(l=>{if(l.graph.termType!=="DefaultGraph")return a.createBgp([l]);const d=c.map(f=>a.createBgp([Object.assign(a.createPattern(l.subject,l.predicate,l.object,f),{metadata:l.metadata})]));return vr.unionOperations(a,d)}));if(u.graph.termType!=="DefaultGraph")return u;const s=c.map(l=>u.type==="path"?a.createPath(u.subject,u.predicate,u.object,l):Object.assign(a.createPattern(u.subject,u.predicate,u.object,l),{metadata:u.metadata}));return vr.unionOperations(a,s)}return vr.copyOperation(u,s=>this.applyOperationDefaultGraph(a,s,c))}static applyOperationNamedGraph(a,u,c,s){if(u.type==="bgp"&&u.patterns.length>0||u.type==="path"||u.type==="pattern"){const l=u.type==="bgp"?u.patterns[0].graph:u.graph;if(l.termType==="DefaultGraph")return{type:n.Algebra.types.BGP,patterns:[]};if(l.termType==="Variable"){if(c.length===1){const f=c[0],h={};h[`?${l.value}`]=f;const p=a.createValues([l],[h]);let y;return u.type==="bgp"?y=a.createBgp(u.patterns.map(_=>a.createPattern(_.subject,_.predicate,_.object,f))):u.type==="path"?y=a.createPath(u.subject,u.predicate,u.object,f):y=a.createPattern(u.subject,u.predicate,u.object,f),a.createJoin([p,y])}return vr.unionOperations(a,c.map(f=>vr.applyOperationNamedGraph(a,u,[f],s)))}return[...c,...s].some(f=>f.equals(l))?u:{type:n.Algebra.types.BGP,patterns:[]}}return vr.copyOperation(u,l=>this.applyOperationNamedGraph(a,l,c,s))}static joinOperations(a,u){if(u.length===1)return u[0];if(u.length>1)return a.createJoin(u);throw new Error("A join can only be applied on at least one operation")}static unionOperations(a,u){if(u.length===1)return u[0];if(u.length>1)return a.createUnion(u);throw new Error("A union can only be applied on at least one operation")}static createOperation(a,u){let c=u.input;return u.default.length>0&&(c=vr.applyOperationDefaultGraph(a,c,u.default)),(u.named.length>0||u.default.length>0)&&(c=vr.applyOperationNamedGraph(a,c,u.named,u.default)),c}async testOperation(a,u){return(0,o.passTestVoid)()}async runOperation(a,u){const c=u.getSafe(r.KeysInitQuery.dataFactory),s=new n.Factory(c),l=vr.createOperation(s,a);return this.mediatorQueryOperation.mediate({operation:l,context:u})}};return Fy.ActorQueryOperationFromQuad=t,t.ALGEBRA_TYPES=Object.keys(n.Algebra.types).map(e=>n.Algebra.types[e]),Fy}var aP;function OG(){return aP||(aP=1,(function(i){var r=Wo&&Wo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Wo&&Wo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(TG(),i)})(Wo)),Wo}var Zo={},Ay={},oP;function SG(){if(oP)return Ay;oP=1,Object.defineProperty(Ay,"__esModule",{value:!0}),Ay.ActorQueryOperationProject=void 0;const i=at(),r=pe(),o=ae(),n=V0(),t=Ue();let e=class extends i.ActorQueryOperationTypedMediated{constructor(u){super(u,"project")}async testOperation(u,c){return(0,o.passTestVoid)()}async runOperation(u,c){const s=c.getSafe(r.KeysInitQuery.dataFactory),l=(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:u.input,context:c})),d=await l.metadata(),f=Object.fromEntries(d.variables.map(v=>[v.variable.value,v])),h=u.variables.map(v=>({variable:v,canBeUndef:!1})),p=Object.fromEntries(h.map(v=>[v.variable.value,v])),y=d.variables.filter(v=>!(v.variable.value in p)),_=h.map(v=>({variable:v.variable,canBeUndef:!(v.variable.value in f)||f[v.variable.value].canBeUndef}));let m=y.length===0?l.bindingsStream:l.bindingsStream.map(v=>{for(const S of y)v=v.delete(S.variable);return v}),O=0;return m=m.map(v=>{O++;const S=new Map;return v.map(E=>{if(E instanceof n.BlankNodeBindingsScoped){let j=S.get(E.value);return j||(j=s.blankNode(`${E.value}${O}`),S.set(E.value,j)),j}return E})}),{type:"bindings",bindingsStream:m,metadata:async()=>({...d,variables:_})}}};return Ay.ActorQueryOperationProject=e,Ay}var uP;function FG(){return uP||(uP=1,(function(i){var r=Zo&&Zo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Zo&&Zo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(SG(),i)})(Zo)),Zo}var ko={},wy={},sP;function AG(){if(sP)return wy;sP=1,Object.defineProperty(wy,"__esModule",{value:!0}),wy.ActorQueryOperationReducedHash=void 0;const i=at(),r=ae(),o=Ue(),n=Cg();let t=class extends i.ActorQueryOperationTypedMediated{constructor(a){super(a,"reduced")}async testOperation(a,u){return(0,r.passTestVoid)()}async runOperation(a,u){const c=(0,o.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:a.input,context:u})),s=(await c.metadata()).variables.map(d=>d.variable);return{type:"bindings",bindingsStream:c.bindingsStream.filter(await this.newHashFilter(u,s)),metadata:c.metadata}}async newHashFilter(a,u){const{hashFunction:c}=await this.mediatorHashBindings.mediate({context:a}),s=new n.LRUCache({max:this.cacheSize});return l=>{const d=c(l,u);return s.has(d)?!1:(s.set(d,!0),!0)}}};return wy.ActorQueryOperationReducedHash=t,wy}var cP;function wG(){return cP||(cP=1,(function(i){var r=ko&&ko.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ko&&ko.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(AG(),i)})(ko)),ko}var eu={},Ey={},lP;function EG(){if(lP)return Ey;lP=1,Object.defineProperty(Ey,"__esModule",{value:!0}),Ey.ActorQueryOperationSlice=void 0;const i=at(),r=pe(),o=ae();let n=class extends i.ActorQueryOperationTypedMediated{constructor(e){super(e,"slice")}async testOperation(e,a){return(0,o.passTestVoid)()}async runOperation(e,a){e.length&&(a=a.set(r.KeysQueryOperation.limitIndicator,e.length));const u=await this.mediatorQueryOperation.mediate({operation:e.input,context:a});return u.type==="bindings"?{type:"bindings",bindingsStream:this.sliceStream(u.bindingsStream,e),metadata:this.sliceMetadata(u,e)}:u.type==="quads"?{type:"quads",quadStream:this.sliceStream(u.quadStream,e),metadata:this.sliceMetadata(u,e)}:u}sliceStream(e,a){const u=!!a.length||a.length===0,{start:c}=a,s=u?a.start+a.length-1:Number.POSITIVE_INFINITY;return e.transform({offset:c,limit:Math.max(s-c+1,0),autoStart:!1})}sliceMetadata(e,a){const u=!!a.length||a.length===0;return()=>e.metadata().then(c=>{const s={...c.cardinality};return Number.isFinite(s.value)&&(s.value=Math.max(0,s.value-a.start),u&&(s.value=Math.min(s.value,a.length))),{...c,cardinality:s}})}};return Ey.ActorQueryOperationSlice=n,Ey}var dP;function jG(){return dP||(dP=1,(function(i){var r=eu&&eu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=eu&&eu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(EG(),i)})(eu)),eu}var tu={},jy={},fP;function RG(){if(fP)return jy;fP=1,Object.defineProperty(jy,"__esModule",{value:!0}),jy.ActorQueryOperationUnion=void 0;const i=at(),r=ae(),o=cr(),n=Ue(),t=Ye();let e=class pg extends i.ActorQueryOperationTypedMediated{constructor(u){super(u,"union")}static unionVariables(u){const c={};for(const s of u)for(const l of s){c[l.variable.value]||(c[l.variable.value]={variable:l.variable,canBeUndef:l.canBeUndef,occurrences:0});const d=c[l.variable.value];d.canBeUndef=d.canBeUndef||l.canBeUndef,d.occurrences++}return Object.values(c).map(s=>s.occurrences===u.length?{variable:s.variable,canBeUndef:s.canBeUndef}:{variable:s.variable,canBeUndef:!0})}static async unionMetadata(u,c,s,l){let d=(await l.mediate({mode:"initialize",context:s})).metadata;for(const h of u)d={...h,...(await l.mediate({mode:"append",accumulatedMetadata:d,appendingMetadata:h,context:s})).metadata};d.state=new o.MetadataValidationState;const f=()=>d.state.invalidate();for(const h of u)h.state.addInvalidateListener(f);if(c){const h=u.map(p=>p.variables);d.variables=pg.unionVariables(h)}return d}async testOperation(u,c){return(0,r.passTestVoid)()}async runOperation(u,c){const s=await Promise.all(u.input.map(d=>this.mediatorQueryOperation.mediate({operation:d,context:c})));let l;for(const d of s)if(l===void 0)l=d.type;else if(l!==d.type)throw new Error(`Unable to union ${l} and ${d.type}`);if(l==="bindings"||u.input.length===0){const d=s.map(n.getSafeBindings);return{type:"bindings",bindingsStream:new t.UnionIterator(d.map(p=>p.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(d.map(p=>p.metadata())).then(p=>pg.unionMetadata(p,!0,c,this.mediatorRdfMetadataAccumulate))}}if(l==="quads"){const d=s.map(n.getSafeQuads);return{type:"quads",quadStream:new t.UnionIterator(d.map(p=>p.quadStream),{autoStart:!1}),metadata:()=>Promise.all(d.map(p=>p.metadata())).then(p=>pg.unionMetadata(p,!1,c,this.mediatorRdfMetadataAccumulate))}}throw new Error(`Unable to union ${l}`)}};return jy.ActorQueryOperationUnion=e,jy}var pP;function r5(){return pP||(pP=1,(function(i){var r=tu&&tu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=tu&&tu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(RG(),i)})(tu)),tu}var ru={},Ry={},nu={},Dy={},Py={},hP;function n5(){if(hP)return Py;hP=1,Object.defineProperty(Py,"__esModule",{value:!0}),Py.PathVariableObjectIterator=void 0;const i=Ue(),r=Ye(),o=sr();let n=class extends r.BufferedIterator{constructor(e,a,u,c,s,l,d,f=16){super({autoStart:!1}),this.algebraFactory=e,this.subject=a,this.predicate=u,this.graph=c,this.context=s,this.mediatorQueryOperation=l,this.maxRunningOperations=f,this.termHashes=new Map,this.runningOperations=[],this.pendingOperations=[],this.started=!1,this._push(this.subject,d)}getProperty(e,a){return!this.started&&e==="metadata"&&this.startNextOperation(!1).catch(u=>this.emit("error",u)),super.getProperty(e,a)}_end(e){for(const a of this.runningOperations)a.destroy();super._end(e)}_push(e,a=!0){let u;if(a&&(u=(0,o.termToString)(e),this.termHashes.has(u)))return!1;const c=this.algebraFactory.dataFactory.variable("b");return this.pendingOperations.push({variable:c,operation:this.algebraFactory.createPath(e,this.predicate,c,this.graph)}),u&&(this.termHashes.set(u,e),super._push(e)),!0}async startNextOperation(e){this.started=!0;const a=this.pendingOperations.pop(),u=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:a.operation,context:this.context})),c=u.bindingsStream.map(s=>s.get(a.variable));this.runningOperations.push(c),c.on("error",s=>this.destroy(s)),c.on("readable",()=>{e&&this._fillBufferAsync(),this.readable=!0}),c.on("end",()=>{this.runningOperations.splice(this.runningOperations.indexOf(c),1),e&&this._fillBufferAsync(),this.readable=!0}),this.getProperty("metadata")||this.setProperty("metadata",u.metadata)}_read(e,a){const u=this;(async function(){for(;u.runningOperations.length<u.maxRunningOperations&&u.pendingOperations.length!==0;)await u.startNextOperation(!0);let c=0,s,l=!0;for(;!l||c!==(c=e);){l=!0;for(let d=0;d<u.runningOperations.length&&e>0;d++)(s=u.runningOperations[d].read())!==null&&(u._push(s)?e--:l=!1)}u.closeIfNeeded()})().then(()=>{a()},c=>this.destroy(c))}closeIfNeeded(){this.runningOperations.length===0&&this.pendingOperations.length===0&&this.close()}};return Py.PathVariableObjectIterator=n,Py}var yP;function DG(){if(yP)return Dy;yP=1,Object.defineProperty(Dy,"__esModule",{value:!0}),Dy.ActorAbstractPath=void 0;const i=at(),r=pe(),o=ae(),n=Ue(),t=Ye(),e=sr(),a=Ie(),u=n5();let c=class extends i.ActorQueryOperationTypedMediated{constructor(l,d){super(l,"path"),this.predicateType=d}async testOperation(l,d){return l.predicate.type!==this.predicateType?(0,o.failTest)(`This Actor only supports ${this.predicateType} Path operations.`):(0,o.passTestVoid)()}generateVariable(l,d,f){return f?d&&(d.subject.value===f||d.object.value===f)?this.generateVariable(l,d,`${f}b`):l.variable(f):this.generateVariable(l,d,"b")}async isPathArbitraryLengthDistinct(l,d,f){return d.get(r.KeysQueryOperation.isPathArbitraryLengthDistinctKey)?(d=d.set(r.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!1),{context:d,operation:void 0}):(d=d.set(r.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!0),{context:d,operation:(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:l.createDistinct(f),context:d}))})}async predicateStarGraphVariable(l,d,f,h,p,y,_){const m=this.getPathSources(f),O=this.generateVariable(y.dataFactory,y.createPath(l,f,d,h)),v=y.createUnion([this.assignPatternSources(y,y.createPattern(l,O,d,h),m),this.assignPatternSources(y,y.createPattern(d,O,l,h),m)]),S=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:p,operation:v})),E=new Set;return{bindingsStream:new t.MultiTransformIterator(S.bindingsStream,{multiTransform:Q=>{const z=Q.get(h);return E.has(z.value)?new t.EmptyIterator:(E.add(z.value),new t.TransformIterator(async()=>{const g=new t.BufferedIterator;return await this.getObjectsPredicateStar(y,l,f,z,p,{},g,{count:0}),g.map(F=>_.bindings([[d,F],[h,z]]))},{maxBufferSize:128}))},autoStart:!1}),metadata:S.metadata}}async getObjectsPredicateStarEval(l,d,f,h,p,y,_,m){if(h.termType==="Variable")return this.predicateStarGraphVariable(l,f,d,h,p,_,m);const O=new u.PathVariableObjectIterator(_,l,d,h,p,this.mediatorQueryOperation,y);return{bindingsStream:O.map(S=>m.bindings([[f,S]])),async metadata(){const S=await new Promise(E=>{O.getProperty("metadata",j=>E(j()))});return S.cardinality.value++,S}}}async getObjectsPredicateStar(l,d,f,h,p,y,_,m){const O=(0,e.termToString)(d);if(y[O])return;_._push(d),y[O]=d,m.count++;const v=this.generateVariable(l.dataFactory),S=l.createPath(d,f,v,h),E=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:S,context:p}));return E.bindingsStream.on("data",async j=>{const Q=j.get(v);await this.getObjectsPredicateStar(l,Q,f,h,p,y,_,m)}),E.bindingsStream.on("end",()=>{--m.count===0&&_.close()}),E.metadata}async getSubjectAndObjectBindingsPredicateStar(l,d,f,h,p,y,_,m,O,v,S,E,j){const Q=(0,e.termToString)(h)+(0,e.termToString)(y);if(O[Q])return;if(S.count++,O[Q]=!0,v._push(j.bindings([[l,f],[d,h]])),Q in m){const g=await m[Q];for(const F of g)await this.getSubjectAndObjectBindingsPredicateStar(l,d,f,F,p,y,_,m,O,v,S,E,j);--S.count===0&&v.close();return}const z=new Promise(async(g,F)=>{const P=[],R=this.generateVariable(E.dataFactory),M=E.createPath(h,p,R,y),C=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:M,context:_}));C.bindingsStream.on("data",async H=>{const G=H.get(R);P.push(G),await this.getSubjectAndObjectBindingsPredicateStar(l,d,f,G,p,y,_,m,O,v,S,E,j)}),C.bindingsStream.on("error",F),C.bindingsStream.on("end",()=>{--S.count===0&&v.close(),g(P)})});m[Q]=z}getPathSources(l){switch(l.type){case a.Algebra.types.ALT:case a.Algebra.types.SEQ:return l.input.flatMap(d=>this.getPathSources(d));case a.Algebra.types.INV:case a.Algebra.types.ONE_OR_MORE_PATH:case a.Algebra.types.ZERO_OR_MORE_PATH:case a.Algebra.types.ZERO_OR_ONE_PATH:return this.getPathSources(l.path);case a.Algebra.types.LINK:case a.Algebra.types.NPS:{const d=(0,n.getOperationSource)(l);if(!d)throw new Error("Could not find a required source on a link path operation");return[d]}}}assignPatternSources(l,d,f){if(f.length===0)throw new Error("Attempted to assign zero sources to a pattern during property path handling");return f.length===1?(0,n.assignOperationSource)(d,f[0]):l.createUnion(f.map(h=>(0,n.assignOperationSource)(d,h)),!0)}};return Dy.ActorAbstractPath=c,Dy}var _P;function On(){return _P||(_P=1,(function(i){var r=nu&&nu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=nu&&nu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(DG(),i),o(n5(),i)})(nu)),nu}var mP;function PG(){if(mP)return Ry;mP=1,Object.defineProperty(Ry,"__esModule",{value:!0}),Ry.ActorQueryOperationPathAlt=void 0;const i=On(),r=r5(),o=pe(),n=Ue(),t=Ye(),e=Ie();let a=class extends i.ActorAbstractPath{constructor(c){super(c,e.Algebra.types.ALT)}async runOperation(c,s){const l=s.getSafe(o.KeysInitQuery.dataFactory),d=new e.Factory(l),f=c.predicate,h=(await Promise.all(f.input.map(_=>this.mediatorQueryOperation.mediate({context:s,operation:d.createPath(c.subject,_,c.object,c.graph)})))).map(n.getSafeBindings);return{type:"bindings",bindingsStream:new t.UnionIterator(h.map(_=>_.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(h.map(_=>_.metadata())).then(_=>r.ActorQueryOperationUnion.unionMetadata(_,!0,s,this.mediatorRdfMetadataAccumulate))}}};return Ry.ActorQueryOperationPathAlt=a,Ry}var gP;function MG(){return gP||(gP=1,(function(i){var r=ru&&ru.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ru&&ru.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(PG(),i)})(ru)),ru}var iu={},My={},bP;function NG(){if(bP)return My;bP=1,Object.defineProperty(My,"__esModule",{value:!0}),My.ActorQueryOperationPathInv=void 0;const i=On(),r=pe(),o=Ie();let n=class extends i.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.INV)}async runOperation(e,a){const u=a.getSafe(r.KeysInitQuery.dataFactory),c=new o.Factory(u),s=e.predicate,l=c.createPath(e.object,s.path,e.subject,e.graph);return this.mediatorQueryOperation.mediate({operation:l,context:a})}};return My.ActorQueryOperationPathInv=n,My}var vP;function IG(){return vP||(vP=1,(function(i){var r=iu&&iu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=iu&&iu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(NG(),i)})(iu)),iu}var au={},Ny={},TP;function qG(){if(TP)return Ny;TP=1,Object.defineProperty(Ny,"__esModule",{value:!0}),Ny.ActorQueryOperationPathLink=void 0;const i=On(),r=pe(),o=Ie();let n=class extends i.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.LINK)}async runOperation(e,a){const u=a.getSafe(r.KeysInitQuery.dataFactory),c=new o.Factory(u),s=e.predicate,l=Object.assign(c.createPattern(e.subject,s.iri,e.object,e.graph),{metadata:s.metadata});return this.mediatorQueryOperation.mediate({operation:l,context:a})}};return Ny.ActorQueryOperationPathLink=n,Ny}var OP;function LG(){return OP||(OP=1,(function(i){var r=au&&au.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=au&&au.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(qG(),i)})(au)),au}var ou={},Iy={},SP;function xG(){if(SP)return Iy;SP=1,Object.defineProperty(Iy,"__esModule",{value:!0}),Iy.ActorQueryOperationPathNps=void 0;const i=On(),r=pe(),o=Ue(),n=Ie();let t=class extends i.ActorAbstractPath{constructor(a){super(a,n.Algebra.types.NPS)}async runOperation(a,u){const c=u.getSafe(r.KeysInitQuery.dataFactory),s=new n.Factory(c),l=a.predicate,d=this.generateVariable(c,a),f=Object.assign(s.createPattern(a.subject,d,a.object,a.graph),{metadata:l.metadata}),h=(0,o.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:f,context:u}));return{type:"bindings",bindingsStream:h.bindingsStream.map(y=>l.iris.some(_=>_.equals(y.get(d)))?null:y.delete(d)),metadata:h.metadata}}};return Iy.ActorQueryOperationPathNps=t,Iy}var FP;function BG(){return FP||(FP=1,(function(i){var r=ou&&ou.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ou&&ou.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(xG(),i)})(ou)),ou}var uu={},qy={},AP;function CG(){if(AP)return qy;AP=1,Object.defineProperty(qy,"__esModule",{value:!0}),qy.ActorQueryOperationUpdateCompositeUpdate=void 0;const i=at(),r=Ue();let o=class extends i.ActorQueryOperationTypedMediated{constructor(t){super(t,"compositeupdate")}async testOperation(t,e){return(0,r.testReadOnly)(e)}async runOperation(t,e){return{type:"void",execute:()=>(async()=>{for(const u of t.updates)await(0,r.getSafeVoid)(await this.mediatorQueryOperation.mediate({operation:u,context:e})).execute()})()}}};return qy.ActorQueryOperationUpdateCompositeUpdate=o,qy}var wP;function QG(){return wP||(wP=1,(function(i){var r=uu&&uu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=uu&&uu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(CG(),i)})(uu)),uu}var su={},Ly={},EP;function UG(){if(EP)return Ly;EP=1,Object.defineProperty(Ly,"__esModule",{value:!0}),Ly.ActorQueryOperationClear=void 0;const i=at(),r=pe(),o=Ue();let n=class extends i.ActorQueryOperationTypedMediated{constructor(e){super(e,"clear")}async testOperation(e,a){return(0,o.testReadOnly)(a)}async runOperation(e,a){const u=a.getSafe(r.KeysInitQuery.dataFactory);let c;e.source==="DEFAULT"?c=u.defaultGraph():typeof e.source=="string"?c=e.source:c=[e.source];const{execute:s}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:c,requireExistence:!e.silent,dropGraphs:!1},context:a});return{type:"void",execute:s}}};return Ly.ActorQueryOperationClear=n,Ly}var jP;function VG(){return jP||(jP=1,(function(i){var r=su&&su.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=su&&su.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(UG(),i)})(su)),su}var cu={},xy={},RP;function GG(){if(RP)return xy;RP=1,Object.defineProperty(xy,"__esModule",{value:!0}),xy.ActorQueryOperationCreate=void 0;const i=at(),r=Ue();let o=class extends i.ActorQueryOperationTypedMediated{constructor(t){super(t,"create")}async testOperation(t,e){return(0,r.testReadOnly)(e)}async runOperation(t,e){const{execute:a}=await this.mediatorUpdateQuads.mediate({createGraphs:{graphs:[t.source],requireNonExistence:!t.silent},context:e});return{type:"void",execute:a}}};return xy.ActorQueryOperationCreate=o,xy}var DP;function XG(){return DP||(DP=1,(function(i){var r=cu&&cu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=cu&&cu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(GG(),i)})(cu)),cu}var lu={},By={},PP;function zG(){if(PP)return By;PP=1,Object.defineProperty(By,"__esModule",{value:!0}),By.ActorQueryOperationDrop=void 0;const i=at(),r=pe(),o=Ue();let n=class extends i.ActorQueryOperationTypedMediated{constructor(e){super(e,"drop")}async testOperation(e,a){return(0,o.testReadOnly)(a)}async runOperation(e,a){const u=a.getSafe(r.KeysInitQuery.dataFactory);let c;e.source==="DEFAULT"?c=u.defaultGraph():typeof e.source=="string"?c=e.source:c=[e.source];const{execute:s}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:c,requireExistence:!e.silent,dropGraphs:!0},context:a});return{type:"void",execute:s}}};return By.ActorQueryOperationDrop=n,By}var MP;function HG(){return MP||(MP=1,(function(i){var r=lu&&lu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=lu&&lu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(zG(),i)})(lu)),lu}var du={},Cy={},fu={},Qy={},NP;function i5(){if(NP)return Qy;NP=1,Object.defineProperty(Qy,"__esModule",{value:!0}),Qy.BlankNode=void 0;let i=class{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}};return Qy.BlankNode=i,Qy}var Uy={},Vy={},IP;function a5(){if(IP)return Vy;IP=1,Object.defineProperty(Vy,"__esModule",{value:!0}),Vy.DefaultGraph=void 0;let i=class{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}};return Vy.DefaultGraph=i,i.INSTANCE=new i,Vy}var Gy={},Xy={},qP;function W0(){if(qP)return Xy;qP=1,Object.defineProperty(Xy,"__esModule",{value:!0}),Xy.NamedNode=void 0;let i=class{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}};return Xy.NamedNode=i,Xy}var LP;function o5(){if(LP)return Gy;LP=1,Object.defineProperty(Gy,"__esModule",{value:!0}),Gy.Literal=void 0;const i=W0();let r=class J1{constructor(n,t){this.termType="Literal",this.value=n,typeof t=="string"?(this.language=t,this.datatype=J1.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=J1.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}};return Gy.Literal=r,r.RDF_LANGUAGE_STRING=new i.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new i.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Gy}var zy={},xP;function u5(){if(xP)return zy;xP=1,Object.defineProperty(zy,"__esModule",{value:!0}),zy.Quad=void 0;let i=class{constructor(o,n,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=n,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}};return zy.Quad=i,zy}var Hy={},BP;function s5(){if(BP)return Hy;BP=1,Object.defineProperty(Hy,"__esModule",{value:!0}),Hy.Variable=void 0;let i=class{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}};return Hy.Variable=i,Hy}var CP;function $G(){if(CP)return Uy;CP=1,Object.defineProperty(Uy,"__esModule",{value:!0}),Uy.DataFactory=void 0;const i=i5(),r=a5(),o=o5(),n=W0(),t=u5(),e=s5();let a=0,u=class{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new i.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return r.DefaultGraph.INSTANCE}quad(s,l,d,f){return new t.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}};return Uy.DataFactory=u,Uy}var QP;function JG(){return QP||(QP=1,(function(i){var r=fu&&fu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=fu&&fu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(i5(),i),o($G(),i),o(a5(),i),o(o5(),i),o(W0(),i),o(u5(),i),o(s5(),i)})(fu)),fu}var UP;function KG(){if(UP)return Cy;UP=1,Object.defineProperty(Cy,"__esModule",{value:!0}),Cy.ActorQueryOperationJoin=void 0;const i=at(),r=nr(),o=ae(),n=cr(),t=Ue(),e=Ye(),a=JG();let u=class extends i.ActorQueryOperationTypedMediated{constructor(s){super(s,"join")}async testOperation(s,l){return(0,o.passTestVoid)()}async runOperation(s,l){const d=(await Promise.all(s.input.map(async f=>({output:await this.mediatorQueryOperation.mediate({operation:f,context:l}),operation:f})))).map(({output:f,operation:h})=>({output:(0,t.getSafeBindings)(f),operation:h}));if((await Promise.all(d.map(f=>f.output.metadata()))).some(f=>f.cardinality.value===0&&f.cardinality.type==="exact")){for(const f of d)f.output.bindingsStream.close();return{bindingsStream:new e.ArrayIterator([],{autoStart:!1}),metadata:async()=>({state:new n.MetadataValidationState,cardinality:{type:"exact",value:0},variables:r.ActorRdfJoin.joinVariables(new a.DataFactory,await r.ActorRdfJoin.getMetadatas(d))}),type:"bindings"}}return this.mediatorJoin.mediate({type:"inner",entries:d,context:l})}};return Cy.ActorQueryOperationJoin=u,Cy}var VP;function YG(){return VP||(VP=1,(function(i){var r=du&&du.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=du&&du.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(KG(),i)})(du)),du}var pu={},$y={},GP;function WG(){if(GP)return $y;GP=1,Object.defineProperty($y,"__esModule",{value:!0}),$y.ActorQueryOperationMinus=void 0;const i=at(),r=ae(),o=Ue();let n=class extends i.ActorQueryOperationTypedMediated{constructor(e){super(e,"minus")}async testOperation(e,a){return(0,r.passTestVoid)()}async runOperation(e,a){const u=e.metadata?.graphVariableFromParentScope,c=(await Promise.all(e.input.map(async s=>({output:await this.mediatorQueryOperation.mediate({operation:s,context:a}),operation:s})))).map(({output:s,operation:l})=>({output:(0,o.getSafeBindings)(s),operation:l}));return this.mediatorJoin.mediate({type:"minus",entries:c,context:a,graphVariableFromParentScope:u})}};return $y.ActorQueryOperationMinus=n,$y}var XP;function ZG(){return XP||(XP=1,(function(i){var r=pu&&pu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=pu&&pu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(WG(),i)})(pu)),pu}var hu={},Jy={},zP;function kG(){if(zP)return Jy;zP=1,Object.defineProperty(Jy,"__esModule",{value:!0}),Jy.ActorQueryOperationLeftJoin=void 0;const i=at(),r=pe(),o=ae(),n=Ue(),t=Ie();let e=class extends i.ActorQueryOperationTypedMediated{constructor(u){super(u,"leftjoin")}async testOperation(u,c){return(0,o.passTestVoid)()}async runOperation(u,c){const s=c.getSafe(r.KeysInitQuery.dataFactory),l=new t.Factory(s),d=await Promise.all(u.input.map(async(f,h)=>{const p=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:f,context:c}));return u.expression&&h===1?{output:p,operation:l.createFilter(f,u.expression),operationRequired:!0}:{output:p,operation:f}}));return await this.mediatorJoin.mediate({type:"optional",entries:d,context:c})}};return Jy.ActorQueryOperationLeftJoin=e,Jy}var HP;function eX(){return HP||(HP=1,(function(i){var r=hu&&hu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=hu&&hu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(kG(),i)})(hu)),hu}var yu={},Ky={},$P;function tX(){if($P)return Ky;$P=1,Object.defineProperty(Ky,"__esModule",{value:!0}),Ky.ActorQueryOperationPathSeq=void 0;const i=On(),r=pe(),o=Ue(),n=Ie();let t=class extends i.ActorAbstractPath{constructor(a){super(a,n.Algebra.types.SEQ)}async runOperation(a,u){const c=u.getSafe(r.KeysInitQuery.dataFactory),s=new n.Factory(c),l=a.predicate;let d=a.subject;const f=[],h=await Promise.all(l.input.map((_,m)=>{const O=m===l.input.length-1?a.object:this.generateVariable(c,a,`b${m}`),v=s.createPath(d,_,O,a.graph),S=this.mediatorQueryOperation.mediate({context:u,operation:v});return d=O,m<l.input.length-1&&f.push(O),{output:S,operation:v}}).map(async({output:_,operation:m})=>({output:(0,o.getSafeBindings)(await _),operation:m}))),p=(0,o.getSafeBindings)(await this.mediatorJoin.mediate({type:"inner",entries:h,context:u}));return{type:"bindings",bindingsStream:p.bindingsStream.transform({transform(_,m,O){for(const v of f)_=_.delete(v);O(_),m()}}),async metadata(){const _=await p.metadata(),m=_.variables.filter(O=>!f.some(v=>v.value===O.variable.value));return{..._,variables:m}}}}};return Ky.ActorQueryOperationPathSeq=t,Ky}var JP;function rX(){return JP||(JP=1,(function(i){var r=yu&&yu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=yu&&yu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(tX(),i)})(yu)),yu}var _u={},Yy={},KP;function nX(){if(KP)return Yy;KP=1,Object.defineProperty(Yy,"__esModule",{value:!0}),Yy.ActorRdfJoinMultiSmallest=void 0;const i=nr(),r=pe(),o=ae(),n=Ue(),t=Ie();let e=class extends i.ActorRdfJoin{constructor(u){super(u,{logicalType:"inner",physicalName:"multi-smallest",limitEntries:3,limitEntriesMin:!0,canHandleUndefs:!0,isLeaf:!1})}getJoinIndexes(u){for(let c=0;c<u.length;c++)for(let s=c+1;s<u.length;s++)if(this.hasCommonVariables(u[c],u[s]))return[c,s];return[0,1]}hasCommonVariables(u,c){const s=u.metadata.variables.map(d=>d.variable.value),l=new Set(c.metadata.variables.map(d=>d.variable.value));return s.some(d=>l.has(d))}async sortJoinEntries(u,c){return(await this.mediatorJoinEntriesSort.mediate({entries:u,context:c})).entries}async getOutput(u,c){const s=u.context.getSafe(r.KeysInitQuery.dataFactory),l=new t.Factory(s),d=c.sortedEntries,f=await i.ActorRdfJoin.getEntriesWithMetadatas(d),h=this.getJoinIndexes(f),p=d[h[0]],y=d[h[1]];d.splice(h[1],1),d.splice(h[0],1);const _={output:(0,n.getSafeBindings)(await this.mediatorJoin.mediate({type:u.type,entries:[p,y],context:u.context})),operation:l.createJoin([p.operation,y.operation],!1)};return d.push(_),{result:await this.mediatorJoin.mediate({type:u.type,entries:d,context:u.context})}}async getJoinCoefficients(u,c){let{metadatas:s}=c;s=[...s];const l=await this.sortJoinEntries(u.entries.map((h,p)=>({...h,metadata:s[p]})),u.context);s=l.map(h=>h.metadata);const d=i.ActorRdfJoin.getRequestInitialTimes(s),f=i.ActorRdfJoin.getRequestItemTimes(s);return(0,o.passTestWithSideData)({iterations:s.reduce((h,p)=>h*p.cardinality.value,1),persistedItems:0,blockingItems:0,requestTime:s.reduce((h,p,y)=>h+d[y]+p.cardinality.value*f[y],0)},{...c,sortedEntries:l})}};return Yy.ActorRdfJoinMultiSmallest=e,Yy}var YP;function iX(){return YP||(YP=1,(function(i){var r=_u&&_u.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=_u&&_u.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(nX(),i)})(_u)),_u}var mu={},Wy={},WP;function aX(){if(WP)return Wy;WP=1,Object.defineProperty(Wy,"__esModule",{value:!0}),Wy.ActorQueryOperationLoad=void 0;const i=at(),r=pe(),o=Ue(),n=Ie();let t=class extends i.ActorQueryOperationTypedMediated{constructor(a){super(a,"load")}async testOperation(a,u){return(0,o.testReadOnly)(u)}async runOperation(a,u){const c=u.getSafe(r.KeysInitQuery.dataFactory),s=new n.Factory(c);let l=u;a.silent&&(l=l.set(r.KeysInitQuery.lenient,!0));const{querySource:d}=await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{value:a.source.value},context:l});let h=(0,o.getSafeQuads)(await this.mediatorQueryOperation.mediate({operation:s.createConstruct((0,o.assignOperationSource)(s.createPattern(c.variable("s"),c.variable("p"),c.variable("o")),d),[s.createPattern(c.variable("s"),c.variable("p"),c.variable("o"))]),context:l})).quadStream;a.destination&&(h=h.map(y=>c.quad(y.subject,y.predicate,y.object,a.destination)));const{execute:p}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:h,context:u});return{type:"void",execute:p}}};return Wy.ActorQueryOperationLoad=t,Wy}var ZP;function oX(){return ZP||(ZP=1,(function(i){var r=mu&&mu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=mu&&mu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(aX(),i)})(mu)),mu}var gu={},Zy={},ky={},kP;function c5(){if(kP)return ky;kP=1,Object.defineProperty(ky,"__esModule",{value:!0}),ky.MaxAggregator=void 0;const i=$t();let r=class extends i.AggregateEvaluator{constructor(n,t,e,a){super(n,t,a),this.orderByEvaluator=e,this.state=void 0}putTerm(n){if(n.termType!=="Literal")throw new Error(`Term with value ${n.value} has type ${n.termType} and is not a literal`);this.state===void 0?this.state=n:this.orderByEvaluator.orderTypes(this.state,n)===-1&&(this.state=n)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return ky.MaxAggregator=r,ky}var e4;function uX(){if(e4)return Zy;e4=1,Object.defineProperty(Zy,"__esModule",{value:!0}),Zy.ActorBindingsAggregatorFactoryMax=void 0;const i=$t(),r=ae(),o=c5();let n=class extends i.ActorBindingsAggregatorFactory{constructor(e){super(e),this.mediatorTermComparatorFactory=e.mediatorTermComparatorFactory}async test(e){return e.expr.aggregator!=="max"?(0,r.failTest)("This actor only supports the 'max' aggregator."):(0,r.passTestVoid)()}async run({expr:e,context:a}){return new o.MaxAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:e.expression,context:a}),e.distinct,await this.mediatorTermComparatorFactory.mediate({context:a}))}};return Zy.ActorBindingsAggregatorFactoryMax=n,Zy}var t4;function sX(){return t4||(t4=1,(function(i){var r=gu&&gu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=gu&&gu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(uX(),i),o(c5(),i)})(gu)),gu}var bu={},e_={},t_={},r4;function l5(){if(r4)return t_;r4=1,Object.defineProperty(t_,"__esModule",{value:!0}),t_.MinAggregator=void 0;const i=$t();let r=class extends i.AggregateEvaluator{constructor(n,t,e,a){super(n,t,a),this.orderByEvaluator=e,this.state=void 0}putTerm(n){if(n.termType!=="Literal")throw new Error(`Term with value ${n.value} has type ${n.termType} and is not a literal`);this.state===void 0?this.state=n:this.orderByEvaluator.orderTypes(this.state,n)===1&&(this.state=n)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return t_.MinAggregator=r,t_}var n4;function cX(){if(n4)return e_;n4=1,Object.defineProperty(e_,"__esModule",{value:!0}),e_.ActorBindingsAggregatorFactoryMin=void 0;const i=$t(),r=ae(),o=l5();let n=class extends i.ActorBindingsAggregatorFactory{constructor(e){super(e),this.mediatorTermComparatorFactory=e.mediatorTermComparatorFactory}async test(e){return e.expr.aggregator!=="min"?(0,r.failTest)("This actor only supports the 'min' aggregator."):(0,r.passTestVoid)()}async run({context:e,expr:a}){return new o.MinAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:a.expression,context:e}),a.distinct,await this.mediatorTermComparatorFactory.mediate({context:e}))}};return e_.ActorBindingsAggregatorFactoryMin=n,e_}var i4;function lX(){return i4||(i4=1,(function(i){var r=bu&&bu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=bu&&bu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(cX(),i),o(l5(),i)})(bu)),bu}var vu={},r_={},n_={},a4;function dX(){if(a4)return n_;a4=1,Object.defineProperty(n_,"__esModule",{value:!0}),n_.SortIterator=void 0;const i=Ye();let r=class extends i.TransformIterator{constructor(n,t,e){super(n,e);const a=e&&e.window;this.windowLength=Number.isFinite(a)&&a>0?a:Number.POSITIVE_INFINITY,this.sort=t,this.sorted=[]}_read(n,t){let e,{length:a}=this.sorted;for(;a!==this.windowLength&&(e=this.source.read(),e!==null);){let u=0,c=a-1,s,l;for(;u<=c;)s=Math.trunc((u+c)/2),l=this.sort(e,this.sorted[s]),l<0?u=s+1:l>0?c=s-1:(u=s,c=-1);this.sorted.splice(u,0,e),a++}a===this.windowLength&&this._push(this.sorted.pop()),t()}_flush(n){let{length:t}=this.sorted;for(;t--;)this._push(this.sorted.pop());n()}};return n_.SortIterator=r,n_}var o4;function fX(){if(o4)return r_;o4=1,Object.defineProperty(r_,"__esModule",{value:!0}),r_.ActorQueryOperationOrderBy=void 0;const i=at(),r=ae(),o=$(),n=Ue(),t=Ie(),e=dX();let a=class extends i.ActorQueryOperationTypedMediated{constructor(c){super(c,"orderby"),this.window=c.window??Number.POSITIVE_INFINITY,this.mediatorExpressionEvaluatorFactory=c.mediatorExpressionEvaluatorFactory,this.mediatorTermComparatorFactory=c.mediatorTermComparatorFactory}async testOperation(){return(0,r.passTestVoid)()}async runOperation(c,s){const l=await this.mediatorQueryOperation.mediate({operation:c.input,context:s}),d=(0,n.getSafeBindings)(l),f={window:this.window};let{bindingsStream:h}=d;const p=await this.mediatorTermComparatorFactory.mediate({context:s});for(let y=c.expressions.length-1;y>=0;y--){let _=c.expressions[y];const m=this.isAscending(_);_=this.extractSortExpression(_);const O=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:_,context:s}),v=async(j,Q,z)=>{try{const g=await O.evaluate(j);z({bindings:j,result:g})}catch(g){(0,o.isExpressionError)(g)||h.emit("error",g),z({bindings:j,result:void 0})}Q()},S=h.transform({transform:v});h=new e.SortIterator(S,(j,Q)=>{let z=p.orderTypes(j.result,Q.result);return m||(z*=-1),z},f).map(({bindings:j})=>j)}return{type:"bindings",bindingsStream:h,metadata:d.metadata}}extractSortExpression(c){const{expressionType:s,operator:l}=c;return s!==t.Algebra.expressionTypes.OPERATOR?c:l==="desc"?c.args[0]:c}isAscending(c){const{expressionType:s,operator:l}=c;return s!==t.Algebra.expressionTypes.OPERATOR?!0:l!=="desc"}};return r_.ActorQueryOperationOrderBy=a,r_}var u4;function pX(){return u4||(u4=1,(function(i){var r=vu&&vu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=vu&&vu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(fX(),i)})(vu)),vu}var Tu={},i_={},s4;function hX(){if(s4)return i_;s4=1,Object.defineProperty(i_,"__esModule",{value:!0}),i_.ActorOptimizeQueryOperationFilterPushdown=void 0;const i=gr(),r=pe(),o=ae(),n=Ue(),t=vn(),e=Ie();let a=class extends i.ActorOptimizeQueryOperation{constructor(c){super(c)}async test(c){return(0,o.passTestVoid)()}async run(c){const s=c.context.getSafe(r.KeysInitQuery.dataFactory),l=new e.Factory(s);let d=c.operation;const f=this;this.splitConjunctive&&(d=e.Util.mapOperation(d,{filter(m,O){return m.expression.expressionType===e.Algebra.expressionTypes.OPERATOR&&m.expression.operator==="&&"?(f.logDebug(c.context,`Split conjunctive filter into ${m.expression.args.length} nested filters`),{recurse:!0,result:m.expression.args.reduce((v,S)=>O.createFilter(v,S),m.input)}):{recurse:!0,result:m}}},l));const h=this.getSources(d),p=new Map(await Promise.all(h.map(async m=>[m,await m.source.getSelectorShape(c.context)])));let y=!0,_=0;for(;y&&_<this.maxIterations;)y=!1,d=e.Util.mapOperation(d,{filter(m,O){const v=c.context.get(r.KeysInitQuery.extensionFunctions),S=c.context.get(r.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(!f.shouldAttemptPushDown(m,h,p,v,S))return{recurse:!0,result:m};const E=(0,n.getExpressionVariables)(m.expression),[j,Q]=f.filterPushdown(m.expression,E,m.input,O,c.context);return j&&(y=!0),{recurse:!0,result:Q}}}),_++;return _>1&&f.logDebug(c.context,`Pushed down filters in ${_} iterations`),this.mergeConjunctive&&(d=e.Util.mapOperation(d,{filter(m,O){if(m.input.type===e.Algebra.types.FILTER){const{nestedExpressions:v,input:S}=f.getNestedFilterExpressions(m);return f.logDebug(c.context,`Merge ${v.length} nested filters into conjunctive filter`),{recurse:!0,result:O.createFilter(S,v.slice(1).reduce((E,j)=>O.createOperatorExpression("&&",[E,j]),v[0]))}}return{recurse:!0,result:m}}})),{operation:d,context:c.context}}shouldAttemptPushDown(c,s,l,d,f){if(this.aggressivePushdown)return!0;const h=c.expression;return h.expressionType===e.Algebra.expressionTypes.OPERATOR&&h.operator==="="&&(h.args[0].expressionType==="term"&&h.args[0].term.termType!=="Variable"&&h.args[1].expressionType==="term"&&h.args[1].term.termType==="Variable"||h.args[0].expressionType==="term"&&h.args[0].term.termType==="Variable"&&h.args[1].expressionType==="term"&&h.args[1].term.termType!=="Variable")?!0:d&&h.expressionType===e.Algebra.expressionTypes.NAMED&&h.name.value in d&&!s.some(p=>(0,n.doesShapeAcceptOperation)(l.get(p),h))?!1:!!s.some(p=>(0,n.doesShapeAcceptOperation)(l.get(p),c,{wildcardAcceptAllExtensionFunctions:f}))}getSources(c){const s=new Set,l=d=>{const f=(0,n.getOperationSource)(d);return f&&s.add(f),!1};return e.Util.recurseOperation(c,{[e.Algebra.types.PATTERN]:l,[e.Algebra.types.LINK]:l,[e.Algebra.types.NPS]:l,[e.Algebra.types.SERVICE]:l}),[...s]}getOverlappingOperations(c,s){const l=[],d=[],f=[];for(const h of c.input){const p=e.Util.inScopeVariables(h);this.variablesSubSetOf(s,p)?l.push(h):this.variablesIntersect(s,p)?d.push(h):f.push(h)}return{fullyOverlapping:l,partiallyOverlapping:d,notOverlapping:f}}filterPushdown(c,s,l,d,f){if(this.isExpressionFalse(c))return[!0,d.createUnion([])];if(c.expressionType===e.Algebra.expressionTypes.EXISTENCE)return[!1,d.createFilter(l,c)];switch(l.type){case e.Algebra.types.EXTEND:return this.variablesIntersect([l.variable],s)?[!1,d.createFilter(l,c)]:[!0,d.createExtend(this.filterPushdown(c,s,l.input,d,f)[1],l.variable,l.expression)];case e.Algebra.types.FILTER:{const[h,p]=this.filterPushdown(c,s,l.input,d,f);return[h,d.createFilter(p,l.expression)]}case e.Algebra.types.JOIN:{if(l.input.length===0)return[!1,d.createFilter(l,c)];const{fullyOverlapping:h,partiallyOverlapping:p,notOverlapping:y}=this.getOverlappingOperations(l,s),_=[];let m=!1;return h.length>0&&(m=!0,_.push(d.createJoin(h.map(O=>this.filterPushdown(c,s,O,d,f)[1])))),p.length>0&&_.push(d.createFilter(d.createJoin(p,!1),c)),y.length>0&&_.push(...y),_.length>1&&(m=!0),m&&this.logDebug(f,`Push down filter across join entries with ${h.length} fully overlapping, ${p.length} partially overlapping, and ${y.length} not overlapping`),[m,_.length===1?_[0]:d.createJoin(_)]}case e.Algebra.types.NOP:return[!0,l];case e.Algebra.types.PROJECT:return this.variablesIntersect(l.variables,s)?[!0,d.createProject(this.filterPushdown(c,s,l.input,d,f)[1],l.variables)]:[!0,l];case e.Algebra.types.UNION:{const{fullyOverlapping:h,partiallyOverlapping:p,notOverlapping:y}=this.getOverlappingOperations(l,s),_=[];let m=!1;return h.length>0&&(m=!0,_.push(d.createUnion(h.map(O=>this.filterPushdown(c,s,O,d,f)[1])))),p.length>0&&_.push(d.createFilter(d.createUnion(p,!1),c)),y.length>0&&_.push(...y),_.length>1&&(m=!0),m&&this.logDebug(f,`Push down filter across union entries with ${h.length} fully overlapping, ${p.length} partially overlapping, and ${y.length} not overlapping`),[m,_.length===1?_[0]:d.createUnion(_)]}case e.Algebra.types.VALUES:return this.variablesIntersect(l.variables,s)?[!1,d.createFilter(l,c)]:[!0,l];case e.Algebra.types.LEFT_JOIN:{if(this.pushIntoLeftJoins){const h=e.Util.inScopeVariables(l.input[1]);if(!this.variablesIntersect(s,h))return this.logDebug(f,"Push down filter into left join"),[!0,d.createLeftJoin(this.filterPushdown(c,s,l.input[0],d,f)[1],l.input[1],l.expression)]}return[!1,d.createFilter(l,c)]}case e.Algebra.types.PATTERN:{if(this.pushEqualityIntoPatterns){const h=this.getEqualityExpressionPushableIntoPattern(c);if(h){let p=!1;const y=l.metadata;if(l=(0,t.mapTermsNested)(l,_=>_.equals(h.variable)?(p=!0,h.term):_),l.type=e.Algebra.types.PATTERN,l.metadata=y,p)return this.logDebug(f,`Push down filter into pattern for ?${h.variable.value}`),[!0,d.createJoin([l,d.createValues([h.variable],[{[`?${h.variable.value}`]:h.term}])])]}}return[!1,d.createFilter(l,c)]}case e.Algebra.types.PATH:{if(this.pushEqualityIntoPatterns){const h=this.getEqualityExpressionPushableIntoPattern(c);if(h&&(l.subject.equals(h.variable)||l.object.equals(h.variable))){this.logDebug(f,`Push down filter into path for ?${h.variable.value}`);const p=l.metadata;return l=d.createPath(l.subject.equals(h.variable)?h.term:l.subject,l.predicate,l.object.equals(h.variable)?h.term:l.object),l.metadata=p,[!0,d.createJoin([l,d.createValues([h.variable],[{[`?${h.variable.value}`]:h.term}])])]}}return[!1,d.createFilter(l,c)]}case e.Algebra.types.MINUS:case e.Algebra.types.ALT:case e.Algebra.types.ASK:case e.Algebra.types.BGP:case e.Algebra.types.CONSTRUCT:case e.Algebra.types.DESCRIBE:case e.Algebra.types.DISTINCT:case e.Algebra.types.EXPRESSION:case e.Algebra.types.FROM:case e.Algebra.types.GRAPH:case e.Algebra.types.GROUP:case e.Algebra.types.INV:case e.Algebra.types.LINK:case e.Algebra.types.NPS:case e.Algebra.types.ONE_OR_MORE_PATH:case e.Algebra.types.ORDER_BY:case e.Algebra.types.REDUCED:case e.Algebra.types.SEQ:case e.Algebra.types.SERVICE:case e.Algebra.types.SLICE:case e.Algebra.types.ZERO_OR_MORE_PATH:case e.Algebra.types.ZERO_OR_ONE_PATH:case e.Algebra.types.COMPOSITE_UPDATE:case e.Algebra.types.DELETE_INSERT:case e.Algebra.types.LOAD:case e.Algebra.types.CLEAR:case e.Algebra.types.CREATE:case e.Algebra.types.DROP:case e.Algebra.types.ADD:case e.Algebra.types.MOVE:case e.Algebra.types.COPY:return[!1,d.createFilter(l,c)]}}getEqualityExpressionPushableIntoPattern(c){if(c.expressionType===e.Algebra.expressionTypes.OPERATOR&&c.operator==="="){if(c.args[0].expressionType==="term"&&c.args[0].term.termType!=="Variable"&&(c.args[0].term.termType!=="Literal"||this.isLiteralWithCanonicalLexicalForm(c.args[0].term))&&c.args[1].expressionType==="term"&&c.args[1].term.termType==="Variable")return{variable:c.args[1].term,term:c.args[0].term};if(c.args[0].expressionType==="term"&&c.args[0].term.termType==="Variable"&&c.args[1].expressionType==="term"&&c.args[1].term.termType!=="Variable"&&(c.args[1].term.termType!=="Literal"||this.isLiteralWithCanonicalLexicalForm(c.args[1].term)))return{variable:c.args[0].term,term:c.args[1].term}}}isLiteralWithCanonicalLexicalForm(c){switch(c.datatype.value){case"http://www.w3.org/2001/XMLSchema#string":case"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":case"http://www.w3.org/2001/XMLSchema#normalizedString":case"http://www.w3.org/2001/XMLSchema#anyURI":case"http://www.w3.org/2001/XMLSchema#base64Binary":case"http://www.w3.org/2001/XMLSchema#language":case"http://www.w3.org/2001/XMLSchema#Name":case"http://www.w3.org/2001/XMLSchema#NCName":case"http://www.w3.org/2001/XMLSchema#NMTOKEN":case"http://www.w3.org/2001/XMLSchema#token":case"http://www.w3.org/2001/XMLSchema#hexBinary":return!0}return!1}variablesIntersect(c,s){return c.some(l=>s.some(d=>l.equals(d)))}variablesSubSetOf(c,s){return c.length<=s.length&&c.every(l=>s.some(d=>l.equals(d)))}isExpressionFalse(c){return c.term&&c.term.termType==="Literal"&&c.term.value==="false"}getNestedFilterExpressions(c){if(c.input.type===e.Algebra.types.FILTER){const s=this.getNestedFilterExpressions(c.input);return{nestedExpressions:[c.expression,...s.nestedExpressions],input:s.input}}return{nestedExpressions:[c.expression],input:c.input}}};return i_.ActorOptimizeQueryOperationFilterPushdown=a,i_}var c4;function yX(){return c4||(c4=1,(function(i){var r=Tu&&Tu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Tu&&Tu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(hX(),i)})(Tu)),Tu}var Ou={},a_={},l4;function _X(){if(l4)return a_;l4=1,Object.defineProperty(a_,"__esModule",{value:!0}),a_.ActorContextPreprocessQuerySourceIdentify=void 0;const i=_m(),r=pe(),o=ae(),n=Cg();let t=class extends i.ActorContextPreprocess{constructor(a){super(a),this.cache=this.cacheSize?new n.LRUCache({max:this.cacheSize}):void 0;const u=this.cache;u&&this.httpInvalidator.addInvalidateListener(({url:c})=>c?u.delete(c):u.clear())}async test(a){return(0,o.passTestVoid)()}async run(a){let u=a.context;if(u.has(r.KeysInitQuery.querySourcesUnidentified)){const c=a.context.get(r.KeysInitQuery.querySourcesUnidentified),s=await Promise.all(c.map(f=>this.expandSource(f))),l=await Promise.all(s.map(async f=>this.identifySource(f,a.context))),d=a.context.get(r.KeysStatistics.dereferencedLinks);if(d)for(const f of l)d.updateStatistic({url:f.source.referenceValue,metadata:{seed:!0}},f.source);u=a.context.delete(r.KeysInitQuery.querySourcesUnidentified).set(r.KeysQueryOperation.querySources,l)}return{context:u}}async expandSource(a){return typeof a=="string"||"match"in a?{value:a}:{...a,context:(await this.mediatorContextPreprocess.mediate({context:o.ActionContext.ensureActionContext(a.context??{})})).context}}identifySource(a,u){let c;return typeof a.value=="string"&&this.cache&&(c=this.cache.get(a.value)),c||(c=this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:a,context:u}).then(({querySource:s})=>s),typeof a.value=="string"&&this.cache&&this.cache.set(a.value,c)),c}};return a_.ActorContextPreprocessQuerySourceIdentify=t,a_}var d4;function mX(){return d4||(d4=1,(function(i){var r=Ou&&Ou.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ou&&Ou.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(_X(),i)})(Ou)),Ou}var Su={},o_={},Fu={},u_={},f4;function gX(){if(f4)return u_;f4=1,Object.defineProperty(u_,"__esModule",{value:!0}),u_.ActorExpressionEvaluatorFactory=void 0;const i=ae();let r=class extends i.Actor{constructor(n){super(n),this.mediatorQueryOperation=n.mediatorQueryOperation,this.mediatorFunctionFactory=n.mediatorFunctionFactory,this.mediatorMergeBindingsContext=n.mediatorMergeBindingsContext}};return u_.ActorExpressionEvaluatorFactory=r,u_}var p4;function bX(){return p4||(p4=1,(function(i){var r=Fu&&Fu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Fu&&Fu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(gX(),i)})(Fu)),Fu}var s_={},h4;function d5(){if(h4)return s_;h4=1,Object.defineProperty(s_,"__esModule",{value:!0}),s_.AlgebraTransformer=void 0;const i=pe(),r=$(),o=Ie();let n=class hg extends r.TermTransformer{constructor(e,a){super(e.getSafe(i.KeysExpressionEvaluator.superTypeProvider)),this.context=e,this.mediatorFunctionFactory=a}async transformAlgebra(e){const a=o.Algebra.expressionTypes;switch(e.expressionType){case a.TERM:return this.transformTerm(e);case a.OPERATOR:return await this.transformOperator(e);case a.NAMED:return await this.transformNamed(e);case a.EXISTENCE:return hg.transformExistence(e);case a.AGGREGATE:return hg.transformAggregate(e);case a.WILDCARD:return hg.transformWildcard(e)}}static transformWildcard(e){return new r.NamedNode(e.wildcard.value)}async getOperator(e,a){const u=await this.mediatorFunctionFactory.mediate({functionName:e,arguments:a.args,context:this.context}),c=await Promise.all(a.args.map(s=>this.transformAlgebra(s)));if(!u.checkArity(c))throw new r.InvalidArity(c,e);return new r.Operator(e,c,u.apply)}async transformOperator(e){return this.getOperator(e.operator.toLowerCase(),e)}async transformNamed(e){return this.getOperator(e.name.value,e)}static transformAggregate(e){const a=e.aggregator;return new r.Aggregate(a,e)}static transformExistence(e){return new r.Existence(e)}};return s_.AlgebraTransformer=n,s_}var c_={},l_={},y4;function f5(){if(y4)return l_;y4=1,Object.defineProperty(l_,"__esModule",{value:!0}),l_.InternalEvaluator=void 0;const i=pe(),r=bn(),o=$(),n=Ue(),t=Ie(),e=d5();let a=class{constructor(c,s,l,d){this.context=c,this.mediatorQueryOperation=l,this.bindingsFactory=d,this.subEvaluators={[r.ExpressionType.Term]:(f,h)=>this.term(f),[r.ExpressionType.Variable]:(f,h)=>this.variable(f,h),[r.ExpressionType.Operator]:(f,h)=>this.evalFunction(f,h),[r.ExpressionType.Existence]:(f,h)=>this.evalExistence(f,h),[r.ExpressionType.Aggregate]:(f,h)=>this.evalAggregate()},this.transformer=new e.AlgebraTransformer(c,s)}async evaluatorExpressionEvaluation(c,s){return this.subEvaluators[c.expressionType].bind(this)(c,s)}term(c){return c}variable(c,s){const l=s.get(o.expressionToVar(this.context.getSafe(i.KeysInitQuery.dataFactory),c));if(!l)throw new o.UnboundVariableError(c.name,s);return this.transformer.transformRDFTermUnsafe(l)}async evalFunction(c,s){return c.apply({args:c.args,mapping:s,exprEval:this})}async evalExistence(c,s){const l=this.context.getSafe(i.KeysInitQuery.dataFactory),d=new t.Factory(l),f=(0,n.materializeOperation)(c.expression.input,s,d,this.bindingsFactory),h=await this.mediatorQueryOperation.mediate({operation:f,context:this.context}),p=(0,n.getSafeBindings)(h);return await new Promise((y,_)=>{p.bindingsStream.on("end",()=>{y(!1)}),p.bindingsStream.on("error",_),p.bindingsStream.on("data",()=>{p.bindingsStream.close(),y(!0)})}).then(y=>c.expression.not?!y:y).then(y=>new o.BooleanLiteral(y))}evalAggregate(){throw new o.NoAggregator}};return l_.InternalEvaluator=a,l_}var _4;function vX(){if(_4)return c_;_4=1,Object.defineProperty(c_,"__esModule",{value:!0}),c_.ExpressionEvaluator=void 0;const i=pe(),r=f5();let o=class{constructor(t,e,a,u,c){this.context=t,this.expr=e,this.mediatorFunctionFactory=a,this.mediatorQueryOperation=u,this.bindingsFactory=c,this.internalEvaluator=new r.InternalEvaluator(t,a,u,c)}async evaluate(t){return(await this.internalEvaluator.evaluatorExpressionEvaluation(this.expr,t)).toRDF(this.context.getSafe(i.KeysInitQuery.dataFactory))}async evaluateAsEBV(t){return(await this.internalEvaluator.evaluatorExpressionEvaluation(this.expr,t)).coerceEBV()}evaluateAsEvaluatorExpression(t){return this.evaluatorExpressionEvaluation(this.expr,t)}evaluatorExpressionEvaluation(t,e){return this.internalEvaluator.evaluatorExpressionEvaluation(t,e)}};return c_.ExpressionEvaluator=o,c_}var m4;function TX(){if(m4)return o_;m4=1,Object.defineProperty(o_,"__esModule",{value:!0}),o_.ActorExpressionEvaluatorFactoryDefault=void 0;const i=bX(),r=pe(),o=ae(),n=_t(),t=$(),e=d5(),a=vX();let u=class extends i.ActorExpressionEvaluatorFactory{constructor(s){super(s)}async test(s){return(0,o.passTestVoid)()}async run(s){const l=(0,t.prepareEvaluatorActionContext)(s.context);return new a.ExpressionEvaluator(l,await new e.AlgebraTransformer(l,this.mediatorFunctionFactory).transformAlgebra(s.algExpr),this.mediatorFunctionFactory,this.mediatorQueryOperation,await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,s.context.getSafe(r.KeysInitQuery.dataFactory)))}};return o_.ActorExpressionEvaluatorFactoryDefault=u,o_}var g4;function OX(){return g4||(g4=1,(function(i){var r=Su&&Su.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Su&&Su.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(TX(),i)})(Su)),Su}var Au={},d_={},f_={},b4;function SX(){if(b4)return f_;b4=1,Object.defineProperty(f_,"__esModule",{value:!0}),f_.GroupsState=void 0;const i=pe(),r=_t();let o=class{constructor(t,e,a,u,c){this.pattern=t,this.mediatorBindingsAggregatorFactory=e,this.context=a,this.bindingsFactory=u,this.variables=c,this.groups=new Map,this.groupsInitializer=new Map,this.groupVariables=new Set(this.pattern.variables.map(s=>s.value)),this.waitCounter=1,this.resultHasBeenCalled=!1}consumeBindings(t){const e=this.resultCheck();if(e)return e;this.waitCounter++;const a=t.filter((l,d)=>this.groupVariables.has(d.value)),u=this.hashBindings(a);let c=this.groupsInitializer.get(u),s;if(c){const l=c;s=(async()=>{const d=await l;await Promise.all(this.pattern.aggregates.map(async f=>{const h=f.variable.value;await d.aggregators[h].putBindings(t)}))})().then(async()=>{await this.subtractWaitCounterAndCollect()})}else c=(async()=>{const l={};await Promise.all(this.pattern.aggregates.map(async f=>{const h=f.variable.value;l[h]=await this.mediatorBindingsAggregatorFactory.mediate({expr:f,context:this.context}),await l[h].putBindings(t)}));const d={aggregators:l,bindings:a};return this.groups.set(u,d),await this.subtractWaitCounterAndCollect(),d})(),this.groupsInitializer.set(u,c),s=c;return s}async subtractWaitCounterAndCollect(){--this.waitCounter===0&&await this.handleResultCollection()}async handleResultCollection(){const t=this.context.getSafe(i.KeysInitQuery.dataFactory);let e=await Promise.all([...this.groups].map(async([a,u])=>{const{bindings:c,aggregators:s}=u;let l=c;for(const d in s){const f=await s[d].result();f&&(l=l.set(t.variable(d),f))}return l}));if(e.length===0&&this.groupVariables.size===0){const a=[];await Promise.all(this.pattern.aggregates.map(async u=>{const c=u.variable,l=await(await this.mediatorBindingsAggregatorFactory.mediate({expr:u,context:this.context})).result();l!==void 0&&a.push([c,l])})),e=[this.bindingsFactory.bindings(a)]}this.waitResolver(e)}resultCheck(){if(this.resultHasBeenCalled)return Promise.reject(new Error("Calling any function after calling collectResult is invalid."))}async collectResults(){const t=this.resultCheck();if(t)return t;this.resultHasBeenCalled=!0;const e=new Promise(a=>{this.waitResolver=a});return await this.subtractWaitCounterAndCollect(),e}hashBindings(t){return(0,r.bindingsToCompactString)(t,this.variables)}};return f_.GroupsState=o,f_}var v4;function FX(){if(v4)return d_;v4=1,Object.defineProperty(d_,"__esModule",{value:!0}),d_.ActorQueryOperationGroup=void 0;const i=at(),r=pe(),o=ae(),n=_t(),t=Ue(),e=Ye(),a=SX();let u=class extends i.ActorQueryOperationTypedMediated{constructor(s){super(s,"group"),this.mediatorBindingsAggregatorFactory=s.mediatorBindingsAggregatorFactory}async testOperation(){return(0,o.passTestVoid)()}async runOperation(s,l){const d=l.getSafe(r.KeysInitQuery.dataFactory),f=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,l,d),{input:h,aggregates:p}=s,y=await this.mediatorQueryOperation.mediate({operation:h,context:l}),_=(0,t.getSafeBindings)(y),m=[...s.variables,...p.map(S=>S.variable)].map(S=>({variable:S,canBeUndef:!1})),O=(await _.metadata()).variables.map(S=>S.variable);return{type:"bindings",bindingsStream:new e.TransformIterator(()=>new Promise((S,E)=>{const j=new a.GroupsState(s,this.mediatorBindingsAggregatorFactory,l,f,O);_.bindingsStream.on("end",async()=>{try{const Q=new e.ArrayIterator(await j.collectResults(),{autoStart:!1});S(Q)}catch(Q){E(Q)}}),_.bindingsStream.on("error",E),_.bindingsStream.on("data",Q=>{j.consumeBindings(Q).catch(E)})}),{autoStart:!1}),metadata:async()=>({...await _.metadata(),variables:m})}}};return d_.ActorQueryOperationGroup=u,d_}var T4;function AX(){return T4||(T4=1,(function(i){var r=Au&&Au.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Au&&Au.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(FX(),i)})(Au)),Au}var wu={},p_={},O4;function wX(){if(O4)return p_;O4=1,Object.defineProperty(p_,"__esModule",{value:!0}),p_.ActorQueryOperationNop=void 0;const i=at(),r=pe(),o=ae(),n=_t(),t=cr(),e=Ye();let a=class extends i.ActorQueryOperationTypedMediated{constructor(c){super(c,"nop")}async testOperation(c,s){return(0,o.passTestVoid)()}async runOperation(c,s){const l=s.getSafe(r.KeysInitQuery.dataFactory),d=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s,l);return{bindingsStream:new e.SingletonIterator(d.bindings()),metadata:()=>Promise.resolve({state:new t.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]}),type:"bindings"}}};return p_.ActorQueryOperationNop=a,p_}var S4;function EX(){return S4||(S4=1,(function(i){var r=wu&&wu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=wu&&wu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(wX(),i)})(wu)),wu}var Eu={},h_={},F4;function jX(){if(F4)return h_;F4=1,Object.defineProperty(h_,"__esModule",{value:!0}),h_.ActorQueryOperationService=void 0;const i=at(),r=pe(),o=ae(),n=_t(),t=cr(),e=Ue(),a=Ye(),u=Cg();let c=class extends i.ActorQueryOperationTypedMediated{constructor(l){super(l,"service"),l.cacheSize&&l.httpInvalidator&&l.cacheSize>0&&(this.cache=new u.LRUCache({max:l.cacheSize}),l.httpInvalidator.addInvalidateListener(d=>this.handleHttpInvalidateEvent(d)))}async testOperation(l,d){return l.name.termType!=="NamedNode"?(0,o.failTest)(`${this.name} can only query services by IRI, while a ${l.name.termType} was given.`):(0,o.passTestVoid)()}async runOperation(l,d){let f=this.cache?.get(l.name.value);f||(f=(await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{value:l.name.value,type:this.forceSparqlEndpoint?"sparql":void 0},context:d})).querySource,this.cache?.set(l.name.value,f));let h;try{h=(0,e.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:(0,e.assignOperationSource)(l.input,f),context:d}))}catch(p){if(l.silent){const y=d.getSafe(r.KeysInitQuery.dataFactory),_=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,d,y);h={bindingsStream:new a.SingletonIterator(_.bindings()),type:"bindings",metadata:async()=>({state:new t.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]})},this.logWarn(d,`An error occurred when executing a SERVICE clause: ${p.message}`)}else throw p}return h}handleHttpInvalidateEvent(l){l.url?this.cache?.delete(l.url):this.cache?.clear()}};return h_.ActorQueryOperationService=c,h_}var A4;function RX(){return A4||(A4=1,(function(i){var r=Eu&&Eu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Eu&&Eu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(jX(),i)})(Eu)),Eu}var ju={},y_={},w4;function DX(){if(w4)return y_;w4=1,Object.defineProperty(y_,"__esModule",{value:!0}),y_.ActorQueryOperationValues=void 0;const i=at(),r=pe(),o=ae(),n=_t(),t=cr(),e=Ye();let a=class extends i.ActorQueryOperationTyped{constructor(c){super(c,"values")}async testOperation(c,s){return(0,o.passTestVoid)()}async runOperation(c,s){const l=s.getSafe(r.KeysInitQuery.dataFactory),d=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s,l);return{type:"bindings",bindingsStream:new e.ArrayIterator(c.bindings.map(p=>d.bindings(Object.entries(p).map(([y,_])=>[l.variable(y.slice(1)),_])))),metadata:()=>Promise.resolve({state:new t.MetadataValidationState,cardinality:{type:"exact",value:c.bindings.length},variables:c.variables.map(p=>({variable:p,canBeUndef:c.bindings.some(y=>!(`?${p.value}`in y))}))})}}};return y_.ActorQueryOperationValues=a,y_}var E4;function PX(){return E4||(E4=1,(function(i){var r=ju&&ju.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ju&&ju.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(DX(),i)})(ju)),ju}var Ru={},__={},j4;function MX(){if(j4)return __;j4=1,Object.defineProperty(__,"__esModule",{value:!0}),__.ActorQueryOperationPathOneOrMore=void 0;const i=On(),r=pe(),o=_t(),n=Ue(),t=Ye(),e=Ie();let a=class extends i.ActorAbstractPath{constructor(c){super(c,e.Algebra.types.ONE_OR_MORE_PATH)}async runOperation(c,s){const l=s.getSafe(r.KeysInitQuery.dataFactory),d=new e.Factory(l),f=await o.BindingsFactory.create(this.mediatorMergeBindingsContext,s,l),h=await this.isPathArbitraryLengthDistinct(d,s,c);if(h.operation)return h.operation;s=h.context;const p=c.predicate;if(c.subject.termType!=="Variable"&&c.object.termType==="Variable"){const O=c.object,v=await this.getObjectsPredicateStarEval(c.subject,p.path,O,c.graph,s,!1,d,f),S=(c.graph.termType==="Variable"?[O,c.graph]:[O]).map(E=>({variable:E,canBeUndef:!1}));return{type:"bindings",bindingsStream:v.bindingsStream,metadata:async()=>({...await v.metadata(),variables:S})}}if(c.subject.termType==="Variable"&&c.object.termType==="Variable"){const O=d.createDistinct(d.createPath(c.subject,c.predicate.path,c.object,c.graph)),v=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:s,operation:O})),S=c.subject,E=c.object,j={},Q=new t.MultiTransformIterator(v.bindingsStream,{multiTransform:g=>{const F=g.get(S),P=g.get(E),R=c.graph.termType==="Variable"?g.get(c.graph):c.graph;return new t.TransformIterator(async()=>{const M=new t.BufferedIterator;return await this.getSubjectAndObjectBindingsPredicateStar(S,E,F,P,p.path,R,s,j,{},M,{count:0},d,f),M.map(C=>(c.graph.termType==="Variable"&&(C=C.set(c.graph,R)),C))},{autoStart:!1,maxBufferSize:128})},autoStart:!1}),z=(c.graph.termType==="Variable"?[S,E,c.graph]:[S,E]).map(g=>({variable:g,canBeUndef:!1}));return{type:"bindings",bindingsStream:Q,metadata:async()=>({...await v.metadata(),variables:z})}}if(c.subject.termType==="Variable"&&c.object.termType!=="Variable")return this.mediatorQueryOperation.mediate({context:s,operation:d.createPath(c.object,d.createOneOrMorePath(d.createInv(p.path)),c.subject,c.graph)});const y=this.generateVariable(l),_=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:s,operation:d.createPath(c.subject,p,y,c.graph)}));return{type:"bindings",bindingsStream:_.bindingsStream.map(O=>c.object.equals(O.get(y))?c.graph.termType==="Variable"?f.bindings([[c.graph,O.get(c.graph)]]):f.bindings():null),metadata:async()=>({...await _.metadata(),variables:(c.graph.termType==="Variable"?[c.graph]:[]).map(O=>({variable:O,canBeUndef:!1}))})}}};return __.ActorQueryOperationPathOneOrMore=a,__}var R4;function NX(){return R4||(R4=1,(function(i){var r=Ru&&Ru.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ru&&Ru.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(MX(),i)})(Ru)),Ru}var Du={},m_={},D4;function IX(){if(D4)return m_;D4=1,Object.defineProperty(m_,"__esModule",{value:!0}),m_.ActorQueryOperationPathZeroOrMore=void 0;const i=On(),r=pe(),o=_t(),n=Ue(),t=Ye(),e=sr(),a=Ie();let u=class extends i.ActorAbstractPath{constructor(s){super(s,a.Algebra.types.ZERO_OR_MORE_PATH)}async runOperation(s,l){const d=l.getSafe(r.KeysInitQuery.dataFactory),f=new a.Factory(d),h=await o.BindingsFactory.create(this.mediatorMergeBindingsContext,l,d),p=await this.isPathArbitraryLengthDistinct(f,l,s);if(p.operation)return p.operation;l=p.context;const y=s.predicate,_=this.getPathSources(y),m=s.subject.termType==="Variable",O=s.object.termType==="Variable";if(s.subject.termType==="Variable"&&s.object.termType==="Variable"){const z=this.generateVariable(d,s),g=this.assignPatternSources(f,f.createPattern(s.subject,z,s.object,s.graph),_),F=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:l,operation:g})),P=s.subject,R=s.object,M=new Set,C={},H=new t.MultiTransformIterator(F.bindingsStream,{multiTransform:J=>{const ne=J.get(P),te=J.get(R),Z=s.graph.termType==="Variable"?J.get(s.graph):s.graph,ye=(0,e.termToString)(ne)+(0,e.termToString)(Z),ve=(0,e.termToString)(te)+(0,e.termToString)(Z);return new t.TransformIterator(async()=>{if(M.has(ye)&&M.has(ve))return new t.EmptyIterator;const Te=new t.BufferedIterator,ee={count:0};return M.has(ye)||(M.add(ye),await this.getSubjectAndObjectBindingsPredicateStar(P,R,ne,ne,y.path,Z,l,C,{},Te,ee,f,h)),M.has(ve)||(M.add(ve),await this.getSubjectAndObjectBindingsPredicateStar(P,R,te,te,y.path,Z,l,C,{},Te,ee,f,h)),Te.map(Oe=>(s.graph.termType==="Variable"&&(Oe=Oe.set(s.graph,Z)),Oe))},{autoStart:!1,maxBufferSize:128})},autoStart:!1}),G=(s.graph.termType==="Variable"?[P,s.object,s.graph]:[P,s.object]).map(J=>({variable:J,canBeUndef:!1}));return{type:"bindings",bindingsStream:H,metadata:async()=>({...await F.metadata(),variables:G})}}if(!m&&!O){const z=this.generateVariable(d),g=await this.getObjectsPredicateStarEval(s.subject,y.path,z,s.graph,l,!0,f,h);return{type:"bindings",bindingsStream:g.bindingsStream.map(P=>s.object.equals(P.get(z))?s.graph.termType==="Variable"?h.bindings([[s.graph,P.get(s.graph)]]):h.bindings():null),metadata:async()=>({...await g.metadata(),variables:(s.graph.termType==="Variable"?[s.graph]:[]).map(P=>({variable:P,canBeUndef:!1}))})}}const v=m?s.object:s.subject,S=m?s.subject:s.object,E=m?f.createInv(y.path):y.path,j=await this.getObjectsPredicateStarEval(v,E,S,s.graph,l,!0,f,h),Q=(s.graph.termType==="Variable"?[S,s.graph]:[S]).map(z=>({variable:z,canBeUndef:!1}));return{type:"bindings",bindingsStream:j.bindingsStream,metadata:async()=>({...await j.metadata(),variables:Q})}}};return m_.ActorQueryOperationPathZeroOrMore=u,m_}var P4;function qX(){return P4||(P4=1,(function(i){var r=Du&&Du.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Du&&Du.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(IX(),i)})(Du)),Du}var Pu={},g_={},M4;function LX(){if(M4)return g_;M4=1,Object.defineProperty(g_,"__esModule",{value:!0}),g_.ActorQueryOperationPathZeroOrOne=void 0;const i=On(),r=pe(),o=_t(),n=cr(),t=Ue(),e=Ye(),a=Ie();let u=class extends i.ActorAbstractPath{constructor(s){super(s,a.Algebra.types.ZERO_OR_ONE_PATH)}async runOperation(s,l){const d=l.getSafe(r.KeysInitQuery.dataFactory),f=new a.Factory(d),h=await o.BindingsFactory.create(this.mediatorMergeBindingsContext,l,d),p=s.predicate,y=this.getPathSources(p),_=[];if(s.subject.termType!=="Variable"&&s.object.termType!=="Variable"&&s.subject.equals(s.object))return{type:"bindings",bindingsStream:new e.SingletonIterator(h.bindings()),metadata:()=>Promise.resolve({state:new n.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]})};const m=await this.isPathArbitraryLengthDistinct(f,l,s);if(m.operation)return m.operation;l=m.context;const O=(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:l,operation:f.createPath(s.subject,p.path,s.object,s.graph)}));let v;if(s.subject.termType==="Variable"&&s.object.termType==="Variable"){const E=this.generateVariable(d,s),j=(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:l,operation:f.createFilter(this.assignPatternSources(f,f.createPattern(s.subject,E,s.object,s.graph),y),f.createOperatorExpression("=",[f.createTermExpression(s.subject),f.createTermExpression(s.object)]))})).bindingsStream.map(Q=>Q.delete(E));v=new e.UnionIterator([j,O.bindingsStream],{autoStart:!1})}else s.subject.termType==="Variable"&&_.push(h.bindings([[s.subject,s.object]])),s.object.termType==="Variable"&&_.push(h.bindings([[s.object,s.subject]])),v=O.bindingsStream.prepend(_);return{type:"bindings",bindingsStream:v,metadata:async()=>{const E=await O.metadata();return{...E,cardinality:{...E.cardinality,value:E.cardinality.value+1}}}}}};return g_.ActorQueryOperationPathZeroOrOne=u,g_}var N4;function xX(){return N4||(N4=1,(function(i){var r=Pu&&Pu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Pu&&Pu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(LX(),i)})(Pu)),Pu}var Mu={},b_={},I4;function BX(){if(I4)return b_;I4=1,Object.defineProperty(b_,"__esModule",{value:!0}),b_.ActorQueryOperationUpdateDeleteInsert=void 0;const i=t5(),r=at(),o=pe(),n=_t(),t=Ue(),e=Ye();let a=class extends r.ActorQueryOperationTypedMediated{constructor(c){super(c,"deleteinsert"),this.blankNodeCounter=0}async testOperation(c,s){return(0,t.testReadOnly)(s)}async runOperation(c,s){const l=s.getSafe(o.KeysInitQuery.dataFactory),d=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s,l),f=c.where?(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:c.where,context:s})).bindingsStream:new e.ArrayIterator([d.bindings()],{autoStart:!1});let h,p;c.insert&&(h=new i.BindingsToQuadsIterator(l,c.insert.map(i.BindingsToQuadsIterator.localizeQuad.bind(null,l,this.blankNodeCounter)),f.clone()),this.blankNodeCounter++),c.delete&&(p=new i.BindingsToQuadsIterator(l,c.delete.map(i.BindingsToQuadsIterator.localizeQuad.bind(null,l,this.blankNodeCounter)),f.clone()),this.blankNodeCounter++);const{execute:y}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:h,quadStreamDelete:p,context:s});return{type:"void",execute:y}}};return b_.ActorQueryOperationUpdateDeleteInsert=a,b_}var q4;function CX(){return q4||(q4=1,(function(i){var r=Mu&&Mu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Mu&&Mu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(BX(),i)})(Mu)),Mu}var Nu={},v_={},L4;function QX(){if(L4)return v_;L4=1,Object.defineProperty(v_,"__esModule",{value:!0}),v_.ActorRdfJoinNone=void 0;const i=nr(),r=pe(),o=ae(),n=_t(),t=cr(),e=Ye();let a=class extends i.ActorRdfJoin{constructor(c){super(c,{logicalType:"inner",physicalName:"none",limitEntries:0})}async test(c){return c.entries.length>0?(0,o.failTest)(`Actor ${this.name} can only join zero entries`):await this.getJoinCoefficients(c,void 0)}async getOutput(c){const s=c.context.getSafe(r.KeysInitQuery.dataFactory),l=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,c.context,s);return{result:{bindingsStream:new e.ArrayIterator([l.bindings()],{autoStart:!1}),metadata:()=>Promise.resolve({state:new t.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]}),type:"bindings"}}}async getJoinCoefficients(c,s){return(0,o.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},s)}};return v_.ActorRdfJoinNone=a,v_}var x4;function UX(){return x4||(x4=1,(function(i){var r=Nu&&Nu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Nu&&Nu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(QX(),i)})(Nu)),Nu}var Iu={},T_={},qu={},O_={},B4;function VX(){if(B4)return O_;B4=1,Object.defineProperty(O_,"__esModule",{value:!0}),O_.ActorRdfJoinMultiBind=void 0;const i=nr(),r=pe(),o=ae(),n=_t(),t=Ue(),e=Ye(),a=Ie();let u=class p5 extends i.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:"bind",canHandleUndefs:!0,isLeaf:!1})}static createBindStream(s,l,d,f,h,p,y){const _=s==="depth-first",m=O=>{const v=d.map(E=>(0,t.materializeOperation)(E,O,p,y,{bindFilter:!0})),S=E=>E.merge(O);return new e.TransformIterator(async()=>(await f(v,O)).transform({map:S}),{maxBufferSize:128,autoStart:_})};switch(s){case"depth-first":return new e.MultiTransformIterator(l,{autoStart:!1,multiTransform:m,optional:h});case"breadth-first":return new e.UnionIterator(l.transform({map:m,optional:h}),{autoStart:!1});default:throw new Error(`Received request for unknown bind order: ${s}`)}}async getOutput(s,l){const d=s.context.getSafe(r.KeysInitQuery.dataFactory),f=new a.Factory(d),h=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,d),p=l.entriesSorted;this.logDebug(s.context,"First entry for Bind Join: ",()=>({entry:p[0].operation,cardinality:p[0].metadata.cardinality,order:p[0].metadata.order,availableOrders:p[0].metadata.availableOrders}));for(const[v,S]of p.entries())v!==0&&S.output.bindingsStream.close();const y=p[0].output,_=[...p];_.splice(0,1);const m=s.context.set(r.KeysQueryOperation.joinLeftMetadata,p[0].metadata).set(r.KeysQueryOperation.joinRightMetadatas,_.map(v=>v.metadata));return{result:{type:"bindings",bindingsStream:p5.createBindStream(this.bindOrder,y.bindingsStream,_.map(v=>v.operation),async(v,S)=>{const E=v.length===1?v[0]:f.createJoin(v,v.every(Q=>!Q.metadata));return(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:E,context:m?.set(r.KeysQueryOperation.joinBindings,S)})).bindingsStream},!1,f,h),metadata:()=>this.constructResultMetadata(p,p.map(v=>v.metadata),s.context)},physicalPlanMetadata:{bindIndex:l.entriesUnsorted.indexOf(p[0]),bindOperation:p[0].operation,bindOperationCardinality:p[0].metadata.cardinality,bindOrder:this.bindOrder}}}canBindWithOperation(s){let l=!0;return a.Util.recurseOperation(s,{[a.Algebra.types.EXTEND](){return l=!1,!1},[a.Algebra.types.GROUP](){return l=!1,!1}}),l}async getJoinCoefficients(s,l){let{metadatas:d}=l;const f=s.entries.map((g,F)=>({...g,metadata:d[F]})),h=await i.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,f,s.context);if(h.isFailed())return h;const p=h.get();d=p.map(g=>g.metadata);const y=i.ActorRdfJoin.getRequestInitialTimes(d),_=i.ActorRdfJoin.getRequestItemTimes(d),m=[...p],O=[...y],v=[..._];if(m.splice(0,1),O.splice(0,1),v.splice(0,1),m.some(g=>!this.canBindWithOperation(g.operation)))return(0,o.failTest)(`Actor ${this.name} can not bind on Extend and Group operations`);if(m.some(g=>g.operationModified))return(0,o.failTest)(`Actor ${this.name} can not be used over remaining entries with modified operations`);const S=_.some(g=>g>0);if(d[0].cardinality.value*this.minMaxCardinalityRatio/(S?1:3)>Math.max(...d.map(g=>g.cardinality.value)))return(0,o.failTest)(`Actor ${this.name} can only run if the smallest stream is much smaller than largest stream`);const E=await Promise.all(m.map(async g=>(await this.mediatorJoinSelectivity.mediate({entries:[p[0],g],context:s.context})).selectivity*this.selectivityModifier)),j=m.map((g,F)=>g.metadata.cardinality.value*E[F]).reduce((g,F)=>g+F,0),Q=O.reduce((g,F)=>g+F,0),z=v.reduce((g,F)=>g+F,0);return(0,o.passTestWithSideData)({iterations:d[0].cardinality.value*j,persistedItems:0,blockingItems:0,requestTime:y[0]+d[0].cardinality.value*(_[0]+Q+j*z)},{...l,entriesUnsorted:f,entriesSorted:p})}};return O_.ActorRdfJoinMultiBind=u,O_}var C4;function h5(){return C4||(C4=1,(function(i){var r=qu&&qu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=qu&&qu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(VX(),i)})(qu)),qu}var Q4;function GX(){if(Q4)return T_;Q4=1,Object.defineProperty(T_,"__esModule",{value:!0}),T_.ActorRdfJoinOptionalBind=void 0;const i=h5(),r=nr(),o=pe(),n=ae(),t=_t(),e=Ue(),a=Ie();let u=class extends r.ActorRdfJoin{constructor(s){super(s,{logicalType:"optional",physicalName:"bind",limitEntries:2,canHandleUndefs:!0,isLeaf:!1,requiresVariableOverlap:!0,canHandleOperationRequired:!0})}async getOutput(s){const l=s.context.getSafe(o.KeysInitQuery.dataFactory),d=new a.Factory(l),f=await t.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,l);s.entries[1].output.bindingsStream.close();const h=s.context.set(o.KeysQueryOperation.joinLeftMetadata,await s.entries[0].output.metadata()).set(o.KeysQueryOperation.joinRightMetadatas,[await s.entries[1].output.metadata()]);return{result:{type:"bindings",bindingsStream:i.ActorRdfJoinMultiBind.createBindStream(this.bindOrder,s.entries[0].output.bindingsStream,[s.entries[1].operation],async(y,_)=>{const m=y[0];return(0,e.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:m,context:h?.set(o.KeysQueryOperation.joinBindings,_)})).bindingsStream},!0,d,f),metadata:async()=>await this.constructResultMetadata(s.entries,await r.ActorRdfJoin.getMetadatas(s.entries),s.context,{},!0)}}}async getJoinCoefficients(s,l){const{metadatas:d}=l,f=r.ActorRdfJoin.getRequestInitialTimes(d),h=r.ActorRdfJoin.getRequestItemTimes(d);if(s.entries[1].operation.type===a.Algebra.types.EXTEND||s.entries[1].operation.type===a.Algebra.types.GROUP)return(0,n.failTest)(`Actor ${this.name} can not bind on Extend and Group operations`);const p=(await this.mediatorJoinSelectivity.mediate({entries:s.entries,context:s.context})).selectivity*this.selectivityModifier;return(0,n.passTestWithSideData)({iterations:d[0].cardinality.value*d[1].cardinality.value*p,persistedItems:0,blockingItems:0,requestTime:f[0]+d[0].cardinality.value*(h[0]+f[1]+p*d[1].cardinality.value*h[1])},l)}};return T_.ActorRdfJoinOptionalBind=u,T_}var U4;function XX(){return U4||(U4=1,(function(i){var r=Iu&&Iu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Iu&&Iu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(GX(),i)})(Iu)),Iu}var Lu={},S_={},xu={},F_={},V4;function zX(){if(V4)return F_;V4=1,Object.defineProperty(F_,"__esModule",{value:!0}),F_.ActorQueryProcess=void 0;const i=ae();let r=class extends i.Actor{constructor(n){super(n)}};return F_.ActorQueryProcess=r,F_}var G4;function HX(){return G4||(G4=1,(function(i){var r=xu&&xu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=xu&&xu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(zX(),i)})(xu)),xu}var X4;function $X(){if(X4)return S_;X4=1,Object.defineProperty(S_,"__esModule",{value:!0}),S_.ActorQueryProcessSequential=void 0;const i=HX(),r=pe(),o=ae(),n=_t(),t=Ue(),e=Ie();let a=class extends i.ActorQueryProcess{constructor(c){super(c)}async test(c){return c.context.get(r.KeysInitQuery.explain)??c.context.get(new o.ActionContextKey("explain"))?(0,o.failTest)(`${this.name} is not able to explain queries.`):(0,o.passTestVoid)()}async run(c){let{operation:s,context:l}=await this.parse(c.query,c.context);return{operation:s,context:l}=await this.optimize(s,l),{result:await this.evaluate(s,l)}}async parse(c,s){s=(await this.mediatorContextPreprocess.mediate({context:s,initialize:!0})).context;let l;if(typeof c=="string"){s=s.set(r.KeysInitQuery.queryString,c);const d=s.get(r.KeysInitQuery.baseIRI),f=s.get(r.KeysInitQuery.queryFormat),h=await this.mediatorQueryParse.mediate({context:s,query:c,queryFormat:f,baseIRI:d});l=h.operation,h.baseIRI&&(s=s.set(r.KeysInitQuery.baseIRI,h.baseIRI))}else l=c;if(s.has(r.KeysInitQuery.initialBindings)){const d=s.getSafe(r.KeysInitQuery.dataFactory),f=new e.Factory(d),h=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s,d);l=(0,t.materializeOperation)(l,s.get(r.KeysInitQuery.initialBindings),f,h,{strictTargetVariables:!0}),s=s.delete(r.KeysInitQuery.queryString)}return{operation:l,context:s}}async optimize(c,s){return s=s.set(r.KeysInitQuery.query,c),{operation:c,context:s}=await this.mediatorOptimizeQueryOperation.mediate({context:s,operation:c}),s=s.set(r.KeysInitQuery.query,c),{operation:c,context:s}}async evaluate(c,s){const l=await this.mediatorQueryOperation.mediate({context:s,operation:c});return l.context=s,l}};return S_.ActorQueryProcessSequential=a,S_}var z4;function JX(){return z4||(z4=1,(function(i){var r=Lu&&Lu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Lu&&Lu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o($X(),i)})(Lu)),Lu}var Bu={},A_={},Cu={},w_={},H4;function KX(){if(H4)return w_;H4=1,Object.defineProperty(w_,"__esModule",{value:!0}),w_.ActorQuerySourceIdentify=void 0;const i=ae();let r=class extends i.Actor{constructor(n){super(n)}};return w_.ActorQuerySourceIdentify=r,w_}var jt={},$4;function YX(){if($4)return jt;$4=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.filterMatchingQuotedQuads=jt.quadsOrderToBindingsOrder=jt.quadsMetadataToBindingsMetadata=jt.setMetadata=jt.getDuplicateElementLinks=jt.getVariables=jt.isTermVariable=jt.quadsToBindings=void 0;const i=cs(),r=cr(),o=sr(),n=vn(),t=hI();function e(h,p,y,_,m){const O=u(p),v=p.graph.termType==="Variable"&&!m,S=c(p),E=(0,n.reduceTermsNested)(p,(z,g,F)=>(g.termType==="Variable"&&(z[F.join("_")]=g.value),z),{});let j=h;v&&(j=j.filter(z=>z.graph.termType!=="DefaultGraph")),S&&(j=j.filter(z=>{for(const g in S){const F=g.split("_"),P=(0,n.getValueNestedPath)(z,F);for(const R of S[g])if(!P.equals((0,n.getValueNestedPath)(z,R)))return!1}return!0}));const Q=new i.ClosableIterator(j.map(z=>_.bindings(Object.keys(E).map(g=>{const F=g.split("_"),P=E[g],R=(0,n.getValueNestedPath)(z,F);return[y.variable(P),R]}))),{onClose:()=>h.destroy()});return s(y,Q,h,E,O,v||!!S),Q}jt.quadsToBindings=e;function a(h){return h.termType==="Variable"}jt.isTermVariable=a;function u(h){return(0,n.uniqTerms)((0,n.getTermsNested)(h).filter(a))}jt.getVariables=u;function c(h){const p={};let y=!1;if((0,n.forEachTermsNested)(h,(m,O)=>{if(m.termType==="Variable"){const v=(0,o.termToString)(m),S=(p[v]||(p[v]=[])).push(O);y=y||S>1}}),!y)return;const _={};for(const m in p){const O=p[m],v=O.slice(1);v.length>0&&(_[O[0].join("_")]=v)}return _}jt.getDuplicateElementLinks=c;function s(h,p,y,_,m,O){const v=E=>{O&&(E.cardinality.type="estimate"),p.setProperty("metadata",l(h,(0,r.validateMetadataQuads)(E),_,m)),E.state&&E.state.addInvalidateListener(()=>{s(h,p,y,_,m,O)})},S=y.getProperty("metadata");S?v(S):y.getProperty("metadata",v)}jt.setMetadata=s;function l(h,p,y,_){return{...p,order:p.order?d(h,p.order,y):void 0,availableOrders:p.availableOrders?p.availableOrders.map(m=>({cost:m.cost,terms:d(h,m.terms,y)})):void 0,variables:_.map(m=>({variable:m,canBeUndef:!1}))}}jt.quadsMetadataToBindingsMetadata=l;function d(h,p,y){const _={};return p.map(m=>{const O=y[m.term];if(O&&!_[O])return _[O]=!0,{term:h.variable(O),direction:m.direction}}).filter(Boolean)}jt.quadsOrderToBindingsOrder=d;function f(h,p){return(0,n.someTerms)(h,y=>y.termType==="Quad")&&(p=p.filter(y=>(0,t.matchPatternMappings)(y,h))),p}return jt.filterMatchingQuotedQuads=f,jt}var J4;function y5(){return J4||(J4=1,(function(i){var r=Cu&&Cu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Cu&&Cu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(KX(),i),o(YX(),i)})(Cu)),Cu}var E_={},K4;function _5(){if(K4)return E_;K4=1,Object.defineProperty(E_,"__esModule",{value:!0}),E_.QuerySourceRdfJs=void 0;const i=y5(),r=pe(),o=cr(),n=Ye(),t=vn(),e=Ie();let a=class ir{constructor(c,s,l){this.source=c,this.referenceValue=c,this.dataFactory=s,this.bindingsFactory=l;const d=new e.Factory(this.dataFactory);this.selectorShape={type:"operation",operation:{operationType:"pattern",pattern:d.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"))},variablesOptional:[this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o")]},this.dummyDefaultGraph=this.dataFactory.variable("__comunica:defaultGraph")}static nullifyVariables(c,s){return!c||c.termType==="Variable"||!s&&c.termType==="Quad"&&(0,t.someTermsNested)(c,l=>l.termType==="Variable")?void 0:c}static hasDuplicateVariables(c){const s=(0,t.filterTermsNested)(c,l=>l.termType==="Variable");return s.length>1&&(0,t.uniqTerms)(s).length<s.length}async getSelectorShape(){return this.selectorShape}queryBindings(c,s){if(c.type!=="pattern")throw new Error(`Attempted to pass non-pattern operation '${c.type}' to QuerySourceRdfJs`);const l=!!s.get(r.KeysQueryOperation.unionDefaultGraph);if(c.graph.termType==="DefaultGraph"&&l&&(c.graph=this.dummyDefaultGraph),"matchBindings"in this.source&&this.source.matchBindings){const p=this.source.matchBindings(this.bindingsFactory,c.subject,c.predicate,c.object,c.graph);let y=p instanceof n.AsyncIterator?p:(0,n.wrap)(p,{autoStart:!1}),_=!1;if(c.graph.termType==="Variable"&&!l){_=!0;const O=c.graph;y=y.filter(v=>v.get(O).termType!=="DefaultGraph")}c.graph.equals(this.dummyDefaultGraph)&&(y=y.map(O=>O.delete(this.dummyDefaultGraph)),c.graph=this.dataFactory.defaultGraph());const m=(0,i.getVariables)(c).map(O=>({variable:O,canBeUndef:!1}));return this.setMetadata(y,c,s,_,{variables:m}).catch(O=>y.destroy(O)),y}const d=!!("features"in this.source&&this.source.features?.quotedTripleFiltering),f=this.source.match(ir.nullifyVariables(c.subject,d),ir.nullifyVariables(c.predicate,d),ir.nullifyVariables(c.object,d),ir.nullifyVariables(c.graph,d));let h=f instanceof n.AsyncIterator?f:(0,n.wrap)(f,{autoStart:!1});return d||(h=(0,i.filterMatchingQuotedQuads)(c,h)),h.getProperty("metadata")||this.setMetadata(h,c,s).catch(p=>h.destroy(p)),c.graph.equals(this.dummyDefaultGraph)&&(c.graph=this.dataFactory.defaultGraph()),(0,i.quadsToBindings)(h,c,this.dataFactory,this.bindingsFactory,!!s.get(r.KeysQueryOperation.unionDefaultGraph))}async setMetadata(c,s,l,d=!1,f={}){const h=!!("features"in this.source&&this.source.features?.quotedTripleFiltering),p=!!l.get(r.KeysQueryOperation.unionDefaultGraph);s.graph.termType==="DefaultGraph"&&p&&(s.graph=this.dummyDefaultGraph);let y;if("countQuads"in this.source&&this.source.countQuads)y=await this.source.countQuads(ir.nullifyVariables(s.subject,h),ir.nullifyVariables(s.predicate,h),ir.nullifyVariables(s.object,h),ir.nullifyVariables(s.graph,h));else{let m=0;y=await new Promise((O,v)=>{let S=this.source.match(ir.nullifyVariables(s.subject,h),ir.nullifyVariables(s.predicate,h),ir.nullifyVariables(s.object,h),ir.nullifyVariables(s.graph,h));typeof S.on!="function"&&(S=new n.ArrayIterator(S)),S.on("error",v),S.on("end",()=>O(m)),S.on("data",()=>m++)})}const _=!h&&(0,t.someTerms)(s,m=>m.termType==="Quad")||ir.hasDuplicateVariables(s);c.setProperty("metadata",{state:new o.MetadataValidationState,cardinality:{type:_||d?"estimate":"exact",value:y},requestTime:0,...f})}queryQuads(c,s){throw new Error("queryQuads is not implemented in QuerySourceRdfJs")}queryBoolean(c,s){throw new Error("queryBoolean is not implemented in QuerySourceRdfJs")}queryVoid(c,s){throw new Error("queryVoid is not implemented in QuerySourceRdfJs")}toString(){return`QuerySourceRdfJs(${this.source.constructor.name})`}};return E_.QuerySourceRdfJs=a,E_}var Y4;function WX(){if(Y4)return A_;Y4=1,Object.defineProperty(A_,"__esModule",{value:!0}),A_.ActorQuerySourceIdentifyRdfJs=void 0;const i=y5(),r=pe(),o=ae(),n=_t(),t=_5();let e=class extends i.ActorQuerySourceIdentify{constructor(u){super(u)}async test(u){const c=u.querySourceUnidentified;return c.type!==void 0&&c.type!=="rdfjs"?(0,o.failTest)(`${this.name} requires a single query source with rdfjs type to be present in the context.`):typeof c.value=="string"||!("match"in c.value)?(0,o.failTest)(`${this.name} received an invalid rdfjs query source.`):(0,o.passTestVoid)()}async run(u){const c=u.context.getSafe(r.KeysInitQuery.dataFactory);return{querySource:{source:new t.QuerySourceRdfJs(u.querySourceUnidentified.value,c,await n.BindingsFactory.create(this.mediatorMergeBindingsContext,u.context,c)),context:u.querySourceUnidentified.context??new o.ActionContext}}}};return A_.ActorQuerySourceIdentifyRdfJs=e,A_}var E1={},W4;function ZX(){return W4||(W4=1,Object.defineProperty(E1,"__esModule",{value:!0})),E1}var Z4;function kX(){return Z4||(Z4=1,(function(i){var r=Bu&&Bu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Bu&&Bu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(WX(),i),o(ZX(),i),o(_5(),i)})(Bu)),Bu}var Qu={},j_={},Uu={},R_={},k4;function ez(){if(k4)return R_;k4=1,Object.defineProperty(R_,"__esModule",{value:!0}),R_.ActorTermComparatorFactory=void 0;const i=ae();let r=class extends i.Actor{constructor(n){super(n),this.mediatorQueryOperation=n.mediatorQueryOperation,this.mediatorFunctionFactory=n.mediatorFunctionFactory,this.mediatorMergeBindingsContext=n.mediatorMergeBindingsContext}};return R_.ActorTermComparatorFactory=r,R_}var eM;function tz(){return eM||(eM=1,(function(i){var r=Uu&&Uu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Uu&&Uu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(ez(),i)})(Uu)),Uu}var D_={},tM;function rz(){if(tM)return D_;tM=1,Object.defineProperty(D_,"__esModule",{value:!0}),D_.TermComparatorExpressionEvaluator=void 0;let i=class{constructor(o,n,t){this.internalEvaluator=o,this.equalityFunction=n,this.lessThanFunction=t,this._TERM_ORDERING_PRIORITY={Variable:0,BlankNode:1,NamedNode:2,Literal:3,Quad:4,DefaultGraph:5}}orderTypes(o,n){if(o===n)return 0;if(o===void 0)return-1;if(n===void 0)return 1;if(o.termType!==n.termType)return this._TERM_ORDERING_PRIORITY[o.termType]<this._TERM_ORDERING_PRIORITY[n.termType]?-1:1;if(o.equals(n))return 0;if(o.termType==="Quad"&&n.termType==="Quad"){const t=this.orderTypes(o.subject,n.subject);if(t!==0)return t;const e=this.orderTypes(o.predicate,n.predicate);if(e!==0)return e;const a=this.orderTypes(o.object,n.object);return a!==0?a:this.orderTypes(o.graph,n.graph)}return o.termType==="Literal"?this.orderLiteralTypes(o,n):this.comparePrimitives(o.value,n.value)}orderLiteralTypes(o,n){const t=this.internalEvaluator.transformer.transformLiteral(o),e=this.internalEvaluator.transformer.transformLiteral(n);try{return this.equalityFunction.applyOnTerms([t,e],this.internalEvaluator).typedValue?0:this.lessThanFunction.applyOnTerms([t,e],this.internalEvaluator).typedValue?-1:1}catch{const a=this.comparePrimitives(t.dataType,e.dataType);return a!==0?a:this.comparePrimitives(t.str(),e.str())}}comparePrimitives(o,n){return o===n?0:o<n?-1:1}};return D_.TermComparatorExpressionEvaluator=i,D_}var rM;function nz(){if(rM)return j_;rM=1,Object.defineProperty(j_,"__esModule",{value:!0}),j_.ActorTermComparatorFactoryExpressionEvaluator=void 0;const i=f5(),r=tz(),o=pe(),n=ae(),t=_t(),e=$(),a=rz();let u=class extends r.ActorTermComparatorFactory{async test(s){return(0,n.passTestVoid)()}async run({context:s}){return s=e.prepareEvaluatorActionContext(s),new a.TermComparatorExpressionEvaluator(new i.InternalEvaluator(s,this.mediatorFunctionFactory,this.mediatorQueryOperation,await t.BindingsFactory.create(this.mediatorMergeBindingsContext,s,s.getSafe(o.KeysInitQuery.dataFactory))),await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.EQUAL,context:s,requireTermExpression:!0}),await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.LT,context:s,requireTermExpression:!0}))}};return j_.ActorTermComparatorFactoryExpressionEvaluator=u,j_}var nM;function iz(){return nM||(nM=1,(function(i){var r=Qu&&Qu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Qu&&Qu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(nz(),i)})(Qu)),Qu}var Vu={},P_={},iM;function az(){if(iM)return P_;iM=1,Object.defineProperty(P_,"__esModule",{value:!0}),P_.ActorRdfJoinMultiSmallestFilterBindings=void 0;const i=nr(),r=pe(),o=ae(),n=_t(),t=cs(),e=Ue(),a=Ye(),u=Ie();let c=class extends i.ActorRdfJoin{constructor(l){super(l,{logicalType:"inner",physicalName:"multi-smallest-filter-bindings",limitEntries:2,limitEntriesMin:!0,isLeaf:!1})}async sortJoinEntries(l,d){let{entries:f}=await this.mediatorJoinEntriesSort.mediate({entries:l,context:d});f=f.sort((O,v)=>O.operationModified&&!v.operationModified?-1:0);const h=f.splice(0,1)[0];let p,y=-1,_=0;for(const[O,v]of f.entries()){const S=h.metadata.variables.filter(E=>v.metadata.variables.some(j=>E.variable.equals(j.variable))).length;(!p||S>_||S===_&&(v.metadata.variables.length<p.metadata.variables.length||v.metadata.variables.length===p.metadata.variables.length&&v.metadata.cardinality.value<p.metadata.cardinality.value))&&(p=v,y=O,_=S)}if(_===0)return(0,o.failTest)(`Actor ${this.name} can only join with common variables`);const m=f;return m.splice(y,1),(0,o.passTest)({first:h,second:p,remaining:m})}async getOutput(l){const d=l.context.getSafe(r.KeysInitQuery.dataFactory),f=new u.Factory(d),h=await i.ActorRdfJoin.getEntriesWithMetadatas([...l.entries]),{first:p,second:y,remaining:_}=(await this.sortJoinEntries(h,l.context)).getOrThrow(),m=p.output.bindingsStream;p.output.bindingsStream=m.clone();const O=p.metadata.variables.filter(P=>y.metadata.variables.some(R=>P.variable.equals(R.variable))),v={},S=m.clone().map(P=>P.filter((R,M)=>O.some(C=>C.variable.equals(M)))).filter(P=>{const R=(0,n.bindingsToString)(P);return!(R in v)&&(v[R]=!0)}),E=new t.ChunkedIterator(S,this.blockSize,{autoStart:!1}),j=(0,e.getOperationSource)(y.operation),z={output:{type:"bindings",bindingsStream:new a.UnionIterator(E.map(P=>j.source.queryBindings(y.operation,j.context?l.context.merge(j.context):l.context,{filterBindings:{bindings:P,metadata:p.metadata}}))),metadata:y.output.metadata},operation:y.operation,operationModified:!0};y.output.bindingsStream.destroy();const g={output:(0,e.getSafeBindings)(await this.mediatorJoin.mediate({type:l.type,entries:[p,z],context:l.context.set(r.KeysRdfJoin.lastPhysicalJoin,this.physicalName)})),operation:f.createJoin([p.operation,z.operation],!1),operationModified:!0},F=_;return F.unshift(g),{result:await this.mediatorJoin.mediate({type:l.type,entries:F,context:l.context}),physicalPlanMetadata:{firstIndex:h.indexOf(p),secondIndex:h.indexOf(y)}}}async getJoinCoefficients(l,d){let{metadatas:f}=d;if(l.context.get(r.KeysRdfJoin.lastPhysicalJoin)===this.physicalName)return(0,o.failTest)(`Actor ${this.name} can not be called recursively`);f=[...f];const h=await this.sortJoinEntries(l.entries.map((g,F)=>({...g,metadata:f[F]})),l.context);if(h.isFailed())return h;const{first:p,second:y,remaining:_}=h.get(),m=(0,e.getOperationSource)(y.operation);if(!m)return(0,o.failTest)(`Actor ${this.name} can only process if entries[1] has a source`);const O=y.operation,v=await m.source.getSelectorShape(l.context),S=l.context.get(r.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(!(0,e.doesShapeAcceptOperation)(v,O,{filterBindings:!0,wildcardAcceptAllExtensionFunctions:S}))return(0,o.failTest)(`Actor ${this.name} can only process if entries[1] accept filterBindings`);f=[p.metadata,y.metadata,..._.map(g=>g.metadata)];const E=i.ActorRdfJoin.getRequestInitialTimes(f),j=i.ActorRdfJoin.getRequestItemTimes(f),{selectivity:Q}=await this.mediatorJoinSelectivity.mediate({entries:[p,y],context:l.context}),z=_.reduce((g,F)=>g*F.metadata.cardinality.value*this.selectivityModifier,1);return(0,o.passTestWithSideData)({iterations:Q*this.selectivityModifier*y.metadata.cardinality.value*z,persistedItems:p.metadata.cardinality.value,blockingItems:p.metadata.cardinality.value,requestTime:E[0]+f[0].cardinality.value*j[0]+E[1]+z*j[1]},d)}};return P_.ActorRdfJoinMultiSmallestFilterBindings=c,P_}var aM;function oz(){return aM||(aM=1,(function(i){var r=Vu&&Vu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Vu&&Vu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(az(),i)})(Vu)),Vu}var Gu={},M_={},oM;function uz(){if(oM)return M_;oM=1,Object.defineProperty(M_,"__esModule",{value:!0}),M_.ActorOptimizeQueryOperationPruneEmptySourceOperations=void 0;const i=gr(),r=pe(),o=ae(),n=Ue(),t=Ie();let e=class $_ extends i.ActorOptimizeQueryOperation{constructor(u){super(u)}async test(u){return(0,n.getOperationSource)(u.operation)?(0,o.failTest)(`Actor ${this.name} does not work with top-level operation sources.`):(0,o.passTestVoid)()}async run(u){const c=u.context.getSafe(r.KeysInitQuery.dataFactory),s=new t.Factory(c);let l=u.operation;const d=[],f=this;t.Util.recurseOperation(l,{[t.Algebra.types.UNION](p){return f.collectMultiOperationInputs(p.input,d,t.Algebra.types.PATTERN),!0},[t.Algebra.types.ALT](p){return f.collectMultiOperationInputs(p.input,d,t.Algebra.types.LINK),!1},[t.Algebra.types.SERVICE](){return!1}});const h=new Set;return await Promise.all(d.map(async p=>{const y=p.type==="link"?s.createPattern(c.variable("s"),p.iri,c.variable("o")):p;await this.hasSourceResults(s,(0,n.getOperationSource)(p),y,u.context)||h.add(p)})),h.size>0&&(this.logDebug(u.context,`Pruning ${h.size} source-specific operations`),l=t.Util.mapOperation(l,{[t.Algebra.types.UNION](p,y){return f.mapMultiOperation(p,h,_=>y.createUnion(_))},[t.Algebra.types.ALT](p,y){return f.mapMultiOperation(p,h,_=>y.createAlt(_))}},s),l=t.Util.mapOperation(l,{[t.Algebra.types.PROJECT](p,y){return $_.hasEmptyOperation(p)?{recurse:!1,result:y.createUnion([])}:{recurse:!0,result:p}},[t.Algebra.types.LEFT_JOIN](p){return $_.hasEmptyOperation(p.input[1])?{recurse:!0,result:p.input[0]}:{recurse:!0,result:p}}},s)),{operation:l,context:u.context}}static hasEmptyOperation(u){let c=!1;return t.Util.recurseOperation(u,{[t.Algebra.types.UNION](s){return s.input.every(l=>$_.hasEmptyOperation(l))&&(c=!0),!1},[t.Algebra.types.ALT](s){return s.input.length===0&&(c=!0),!1},[t.Algebra.types.LEFT_JOIN](s){return $_.hasEmptyOperation(s.input[0])&&(c=!0),!1}}),c}collectMultiOperationInputs(u,c,s){for(const l of u)(0,n.getOperationSource)(l)&&l.type===s&&c.push(l)}mapMultiOperation(u,c,s){const l=u.input.filter(d=>!c.has(d));return l.length===u.input.length?{result:u,recurse:!0}:l.length===0?{result:s([]),recurse:!1}:l.length===1?{result:l[0],recurse:!0}:{result:s(l),recurse:!0}}async hasSourceResults(u,c,s,l){const d=c.context?l.merge(c.context):l,f=d.get(r.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(d.get(r.KeysQuerySourceIdentify.traverse))return!0;if(this.useAskIfSupported){const y=u.createAsk(s);if((0,n.doesShapeAcceptOperation)(await c.source.getSelectorShape(l),y,{wildcardAcceptAllExtensionFunctions:f}))return c.source.queryBoolean(y,d)}const h=c.source.queryBindings(s,d),p=await new Promise((y,_)=>{h.on("error",_),h.getProperty("metadata",m=>{h.destroy(),y(m.cardinality)})});if(p.type==="estimate"&&p.value>0){const y=u.createAsk(s);if((0,n.doesShapeAcceptOperation)(await c.source.getSelectorShape(l),y,{wildcardAcceptAllExtensionFunctions:f}))return c.source.queryBoolean(y,d)}return p.value>0}};return M_.ActorOptimizeQueryOperationPruneEmptySourceOperations=e,M_}var uM;function sz(){return uM||(uM=1,(function(i){var r=Gu&&Gu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Gu&&Gu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(uz(),i)})(Gu)),Gu}var Xu={},N_={},sM;function cz(){if(sM)return N_;sM=1,Object.defineProperty(N_,"__esModule",{value:!0}),N_.ActorOptimizeQueryOperationLeftjoinExpressionPushdown=void 0;const i=gr(),r=pe(),o=ae(),n=Ue(),t=Ie();let e=class extends i.ActorOptimizeQueryOperation{constructor(u){super(u)}async test(u){return(0,o.passTestVoid)()}async run(u){const c=u.context.getSafe(r.KeysInitQuery.dataFactory),s=new t.Factory(c);let l=u.operation;const d=this;return l=t.Util.mapOperation(l,{leftjoin(f,h){if(f.expression){const p=(0,n.getExpressionVariables)(f.expression),y=t.Util.inScopeVariables(f.input[0]),_=t.Util.inScopeVariables(f.input[1]),m=d.variablesIntersect(p,y),O=d.variablesIntersect(p,_);if(m&&!O)return d.logDebug(u.context,"Pushed down optional expression to left-hand operator"),{recurse:!0,result:h.createLeftJoin(h.createFilter(f.input[0],f.expression),f.input[1])};if(!m&&O)return d.logDebug(u.context,"Pushed down optional expression to right-hand operator"),{recurse:!0,result:h.createLeftJoin(f.input[0],h.createFilter(f.input[1],f.expression))}}return{recurse:!0,result:f}}},s),{operation:l,context:u.context}}variablesIntersect(u,c){return u.some(s=>c.some(l=>s.equals(l)))}};return N_.ActorOptimizeQueryOperationLeftjoinExpressionPushdown=e,N_}var cM;function lz(){return cM||(cM=1,(function(i){var r=Xu&&Xu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Xu&&Xu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(cz(),i)})(Xu)),Xu}var zu={},I_={},lM;function dz(){if(lM)return I_;lM=1,Object.defineProperty(I_,"__esModule",{value:!0}),I_.ActorRdfJoinMultiBindSource=void 0;const i=nr(),r=pe(),o=ae(),n=cs(),t=Ue(),e=Ye(),a=Ie();let u=class extends i.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:"bind-source",canHandleUndefs:!0})}async getOutput(s,l){const d=s.context.getSafe(r.KeysInitQuery.dataFactory),f=new a.Factory(d),h=l.entriesSorted;this.logDebug(s.context,"First entry for Bind Join Source: ",()=>({entry:h[0].operation,cardinality:h[0].metadata.cardinality,order:h[0].metadata.order,availableOrders:h[0].metadata.availableOrders}));for(const[E,j]of h.entries())E!==0&&j.output.bindingsStream.close();const p=h[0].output,y=h[0].metadata,_=[...h];_.splice(0,1);const m=(0,t.getOperationSource)(_[0].operation),O=this.createOperationFromEntries(f,_),v=new n.ChunkedIterator(p.bindingsStream,this.blockSize,{autoStart:!1});return{result:{type:"bindings",bindingsStream:new e.UnionIterator(v.map(E=>m.source.queryBindings(O,m.context?s.context.merge(m.context):s.context,{joinBindings:{bindings:E,metadata:y}}))),metadata:()=>this.constructResultMetadata(h,h.map(E=>E.metadata),s.context)},physicalPlanMetadata:{bindIndex:l.entriesUnsorted.indexOf(h[0])}}}async sortJoinEntries(s,l){const d=await i.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,s,l);return d.isFailed()?d:(s=d.get(),s=s.sort((f,h)=>f.operationModified&&!h.operationModified?-1:0),(0,o.passTest)(s))}async getJoinCoefficients(s,l){let{metadatas:d}=l;const f=s.context.getSafe(r.KeysInitQuery.dataFactory),h=new a.Factory(f),p=s.entries.map((P,R)=>({...P,metadata:d[R]})),y=await this.sortJoinEntries(p,s.context);if(y.isFailed())return y;const _=y.get();d=_.map(P=>P.metadata);const m=i.ActorRdfJoin.getRequestInitialTimes(d),O=i.ActorRdfJoin.getRequestItemTimes(d),v=[..._];[...m],[...O],v.splice(0,1);const S=v.map(P=>(0,t.getOperationSource)(P.operation));if(S.some(P=>!P))return(0,o.failTest)(`Actor ${this.name} can not bind on remaining operations without source annotation`);if(S.some(P=>P!==S[0]))return(0,o.failTest)(`Actor ${this.name} can not bind on remaining operations with non-equal source annotation`);const E=S[0],j=this.createOperationFromEntries(h,v),Q=await E.source.getSelectorShape(s.context),z=s.context.get(r.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(!(0,t.doesShapeAcceptOperation)(Q,j,{joinBindings:!0,wildcardAcceptAllExtensionFunctions:z}))return(0,o.failTest)(`Actor ${this.name} detected a source that can not handle passing down join bindings`);const g=await Promise.all(v.map(async P=>(await this.mediatorJoinSelectivity.mediate({entries:[_[0],P],context:s.context})).selectivity*this.selectivityModifier)),F=v.map((P,R)=>P.metadata.cardinality.value*g[R]).reduce((P,R)=>P+R,0);return(0,o.passTestWithSideData)({iterations:1,persistedItems:d[0].cardinality.value,blockingItems:d[0].cardinality.value,requestTime:m[0]+d[0].cardinality.value*O[0]+m[1]+F*O[1]},{...l,entriesUnsorted:p,entriesSorted:_})}createOperationFromEntries(s,l){return l.length===1?l[0].operation:s.createJoin(l.map(d=>d.operation),!0)}};return I_.ActorRdfJoinMultiBindSource=u,I_}var dM;function fz(){return dM||(dM=1,(function(i){var r=zu&&zu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=zu&&zu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(dz(),i)})(zu)),zu}var Hu={},q_={},fM;function pz(){if(fM)return q_;fM=1,Object.defineProperty(q_,"__esModule",{value:!0}),q_.ActorOptimizeQueryOperationJoinConnected=void 0;const i=gr(),r=pe(),o=ae(),n=Ie();let t=class yg extends i.ActorOptimizeQueryOperation{async test(a){return(0,o.passTestVoid)()}async run(a){const u=a.context.getSafe(r.KeysInitQuery.dataFactory),c=new n.Factory(u);return{operation:n.Util.mapOperation(a.operation,{join(l,d){return{recurse:!1,result:yg.cluster(l,d)}}},c),context:a.context}}static cluster(a,u){const c=a.input.map(f=>({inScopeVariables:Object.fromEntries(n.Util.inScopeVariables(f).map(h=>[h.value,!0])),entries:[f]}));let s,l=c;do s=l,l=yg.clusterIteration(s);while(s.length!==l.length);const d=l.map(f=>f.entries.length===1?f.entries[0]:u.createJoin(f.entries));return d.length===1?d[0]:u.createJoin(d,!1)}static clusterIteration(a){const u=[];for(const c of a){let s=!1;for(const l of u)if(yg.haveOverlappingVariables(c.inScopeVariables,l.inScopeVariables)){l.entries=[...l.entries,...c.entries],l.inScopeVariables={...l.inScopeVariables,...c.inScopeVariables},s=!0;break}s||u.push({inScopeVariables:c.inScopeVariables,entries:c.entries})}return u}static haveOverlappingVariables(a,u){for(const c of Object.keys(a))if(u[c])return!0;return!1}};return q_.ActorOptimizeQueryOperationJoinConnected=t,q_}var pM;function hz(){return pM||(pM=1,(function(i){var r=Hu&&Hu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Hu&&Hu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(pz(),i)})(Hu)),Hu}var $u={},L_={},hM;function yz(){if(hM)return L_;hM=1,Object.defineProperty(L_,"__esModule",{value:!0}),L_.ActorOptimizeQueryOperationBgpToJoin=void 0;const i=gr(),r=pe(),o=ae(),n=Ie();let t=class extends i.ActorOptimizeQueryOperation{async test(a){return(0,o.passTestVoid)()}async run(a){const u=a.context.getSafe(r.KeysInitQuery.dataFactory),c=new n.Factory(u);return{operation:n.Util.mapOperation(a.operation,{bgp(l,d){return{recurse:!1,result:d.createJoin(l.patterns)}}},c),context:a.context}}};return L_.ActorOptimizeQueryOperationBgpToJoin=t,L_}var yM;function _z(){return yM||(yM=1,(function(i){var r=$u&&$u.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=$u&&$u.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(yz(),i)})($u)),$u}var Ju={},x_={},_M;function mz(){if(_M)return x_;_M=1,Object.defineProperty(x_,"__esModule",{value:!0}),x_.ActorOptimizeQueryOperationJoinBgp=void 0;const i=gr(),r=pe(),o=ae(),n=Ie();let t=class extends i.ActorOptimizeQueryOperation{async test(a){return(0,o.passTestVoid)()}async run(a){const u=a.context.getSafe(r.KeysInitQuery.dataFactory),c=new n.Factory(u);return{operation:n.Util.mapOperation(a.operation,{join(l,d){return l.input.every(f=>f.type==="bgp")?{recurse:!1,result:d.createBgp(l.input.flatMap(f=>f.patterns))}:{recurse:!1,result:l}}},c),context:a.context}}};return x_.ActorOptimizeQueryOperationJoinBgp=t,x_}var mM;function gz(){return mM||(mM=1,(function(i){var r=Ju&&Ju.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ju&&Ju.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(mz(),i)})(Ju)),Ju}var Ku={},B_={},gM;function bz(){if(gM)return B_;gM=1,Object.defineProperty(B_,"__esModule",{value:!0}),B_.ActorOptimizeQueryOperationAssignSourcesExhaustive=void 0;const i=gr(),r=jI(),o=pe(),n=ae(),t=Ue(),e=Ie();let a=class extends i.ActorOptimizeQueryOperation{constructor(c){super(c)}async test(c){return(0,n.passTestVoid)()}async run(c){const s=c.context.getSafe(o.KeysInitQuery.dataFactory),l=new e.Factory(s),d=c.context.get(o.KeysQueryOperation.querySources)??[];if(d.length===0)return{operation:c.operation,context:c.context};if(d.length===1){const f=d[0],h=c.context.get(o.KeysRdfUpdateQuads.destination);if(!h||f.source.referenceValue===(0,r.getDataDestinationValue)(h))try{const p=await f.source.getSelectorShape(c.context);if((0,t.doesShapeAcceptOperation)(p,c.operation))return{operation:(0,t.assignOperationSource)(c.operation,f),context:c.context}}catch{}}return{operation:this.assignExhaustive(l,c.operation,d),context:c.context.delete(o.KeysInitQuery.queryString)}}assignExhaustive(c,s,l){const d=this;return e.Util.mapOperation(s,{[e.Algebra.types.PATTERN](f,h){return l.length===1?{result:(0,t.assignOperationSource)(f,l[0]),recurse:!1}:{result:h.createUnion(l.map(p=>(0,t.assignOperationSource)(f,p))),recurse:!1}},[e.Algebra.types.LINK](f,h){return l.length===1?{result:(0,t.assignOperationSource)(f,l[0]),recurse:!1}:{result:h.createAlt(l.map(p=>(0,t.assignOperationSource)(f,p))),recurse:!1}},[e.Algebra.types.NPS](f,h){return l.length===1?{result:(0,t.assignOperationSource)(f,l[0]),recurse:!1}:{result:h.createAlt(l.map(p=>(0,t.assignOperationSource)(f,p))),recurse:!1}},[e.Algebra.types.SERVICE](f){return{result:f,recurse:!1}},[e.Algebra.types.CONSTRUCT](f,h){return{result:h.createConstruct(d.assignExhaustive(c,f.input,l),f.template),recurse:!1}},[e.Algebra.types.DELETE_INSERT](f,h){return{result:h.createDeleteInsert(f.delete,f.insert,f.where?d.assignExhaustive(c,f.where,l):void 0),recurse:!1}}},c)}};return B_.ActorOptimizeQueryOperationAssignSourcesExhaustive=a,B_}var bM;function vz(){return bM||(bM=1,(function(i){var r=Ku&&Ku.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ku&&Ku.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(bz(),i)})(Ku)),Ku}var Yu={},C_={},vM;function Tz(){if(vM)return C_;vM=1,Object.defineProperty(C_,"__esModule",{value:!0}),C_.ActorOptimizeQueryOperationDescribeToConstructsSubject=void 0;const i=gr(),r=pe(),o=ae(),n=Ie();let t=class extends i.ActorOptimizeQueryOperation{constructor(a){super(a)}async test(a){return a.operation.type!==n.Algebra.types.DESCRIBE?(0,o.failTest)(`Actor ${this.name} only supports describe operations, but got ${a.operation.type}`):(0,o.passTest)(!0)}async run(a){const u=a.context.getSafe(r.KeysInitQuery.dataFactory),c=new n.Factory(u),s=a.operation,l=s.terms.filter(f=>f.termType!=="Variable").map(f=>{const h=[u.quad(f,u.variable("__predicate"),u.variable("__object"))];return h.forEach(y=>y.type="pattern"),{input:{type:n.Algebra.types.BGP,patterns:h},template:h,type:"construct"}});if(l.length!==s.terms.length){let f=[];s.terms.filter(h=>h.termType==="Variable").forEach((h,p)=>{const y=[u.quad(h,u.variable(`__predicate${p}`),u.variable(`__object${p}`))];y.forEach(_=>_.type="pattern"),f=[...f,...y]}),l.push({input:{type:n.Algebra.types.JOIN,input:[s.input,{type:n.Algebra.types.BGP,patterns:f}]},template:f,type:n.Algebra.types.CONSTRUCT})}return{operation:c.createUnion(l,!1),context:a.context}}};return C_.ActorOptimizeQueryOperationDescribeToConstructsSubject=t,C_}var TM;function Oz(){return TM||(TM=1,(function(i){var r=Yu&&Yu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Yu&&Yu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Tz(),i)})(Yu)),Yu}var j1,OM;function Sz(){return OM||(OM=1,j1=function(i){const r=new(Z9()).LoggerVoid,o=new(ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/^4.0.0/components/ActorInit.jsonld#ActorInit_default_bus"}),n=new(ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/^4.0.0/components/ActorContextPreprocess.jsonld#ActorContextPreprocess_default_bus"}),t=new(ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-bindings/^4.0.0/components/ActorHashBindings.jsonld#ActorHashBindings_default_bus"}),e=new(ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-quads/^4.0.0/components/ActorHashQuads.jsonld#ActorHashQuads_default_bus"}),a=new(ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/^4.0.0/components/ActorOptimizeQueryOperation.jsonld#ActorOptimizeQueryOperation_default_bus"}),u=new(ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-entries-sort/^4.0.0/components/ActorRdfJoinEntriesSort.jsonld#ActorRdfJoinEntriesSort_default_bus"}),c=new(ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-selectivity/^4.0.0/components/ActorRdfJoinSelectivity.jsonld#ActorRdfJoinSelectivity_default_bus"}),s=new(ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-accumulate/^4.0.0/components/ActorRdfMetadataAccumulate.jsonld#ActorRdfMetadataAccumulate_default_bus"}),l=new(ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-quads/^4.0.0/components/ActorRdfUpdateQuads.jsonld#ActorRdfUpdateQuads_default_bus"}),d=new(ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-parse/^4.0.0/components/ActorQueryParse.jsonld#ActorQueryParse_default_bus"}),f=new(ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-bindings-aggregator-factory/^4.0.0/components/ActorBindingsAggregatorFactory.jsonld#ActorBindingsAggregatorFactory_default_bus"}),h=new(ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-expression-evaluator-factory/^4.0.0/components/ActorExpressionEvaluatorFactory.jsonld#ActorExpressionEvaluatorFactory_default_bus"}),p=new(K()).BusFunctionFactory({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-function-factory/^4.0.0/components/ActorFunctionFactory.jsonld#ActorFunctionFactory_default_bus"}),y=new(at()).BusQueryOperation({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/^4.0.0/components/ActorQueryOperation.jsonld#ActorQueryOperation_default_bus"}),_=new(ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/^4.0.0/components/ActorRdfJoin.jsonld#ActorRdfJoin_default_bus"}),m=new(ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-process/^4.0.0/components/ActorQueryProcess.jsonld#ActorQueryProcess_default_bus"}),O=new(ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify/^4.0.0/components/ActorQuerySourceIdentify.jsonld#ActorQuerySourceIdentify_default_bus"}),v=new(ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-term-comparator-factory/^4.0.0/components/ActorTermComparatorFactory.jsonld#ActorTermComparatorFactory_default_bus"}),S=new(ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/^4.0.0/components/ActorHttpInvalidate.jsonld#ActorHttpInvalidate_default_bus"}),E=new(ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-result-serialize/^4.0.0/components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus"}),j=new(ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-merge-bindings-context/^4.0.0/components/ActorMergeBindingsContext.jsonld#ActorMergeBindingsContext_default_bus"});new(Bx()).ActorContextPreprocessConvertShortcuts({contextKeyShortcuts:{baseIRI:"@comunica/actor-init-query:baseIRI",dataFactory:"@comunica/actor-init-query:dataFactory",datetime:"@comunica/actor-http-memento:datetime",destination:"@comunica/bus-rdf-update-quads:destination",distinctConstruct:"@comunica/actor-init-query:distinctConstruct",explain:"@comunica/actor-init-query:explain",extensionFunctionCreator:"@comunica/actor-init-query:extensionFunctionCreator",extensionFunctions:"@comunica/actor-init-query:extensionFunctions",extensionFunctionsAlwaysPushdown:"@comunica/actor-init-query:extensionFunctionsAlwaysPushdown",fetch:"@comunica/bus-http:fetch",fileBaseIRI:"@comunica/actor-init-query:fileBaseIRI",functionArgumentsCache:"@comunica/actor-init-query:functionArgumentsCache",httpAuth:"@comunica/bus-http:auth",httpBodyTimeout:"@comunica/bus-http:http-body-timeout",httpIncludeCredentials:"@comunica/bus-http:include-credentials",httpProxyHandler:"@comunica/actor-http-proxy:httpProxyHandler",httpRetryCount:"@comunica/bus-http:http-retry-count",httpRetryDelayFallback:"@comunica/bus-http:http-retry-delay-fallback",httpRetryDelayLimit:"@comunica/bus-http:http-retry-delay-limit",httpTimeout:"@comunica/bus-http:http-timeout",initialBindings:"@comunica/actor-init-query:initialBindings",invalidateCache:"@comunica/actor-init-query:invalidateCache",lenient:"@comunica/actor-init-query:lenient",log:"@comunica/core:log",queryFormat:"@comunica/actor-init-query:queryFormat",queryTimestamp:"@comunica/actor-init-query:queryTimestamp",queryTimestampHighResolution:"@comunica/actor-init-query:queryTimestampHighResolution",readOnly:"@comunica/bus-query-operation:readOnly",recoverBrokenLinks:"@comunica/bus-http-wayback:recover-broken-links",sources:"@comunica/actor-init-query:querySourcesUnidentified",traverse:"@comunica/bus-query-source-identify:traverse",unionDefaultGraph:"@comunica/bus-query-operation:unionDefaultGraph"},name:"urn:comunica:default:context-preprocess/actors#convert-shortcuts",bus:n,busFailMessage:"Context preprocessing failed"}),new(Vx()).ActorContextPreprocessSetDefaults({logger:r,name:"urn:comunica:default:context-preprocess/actors#set-defaults",bus:n,busFailMessage:"Context preprocessing failed"}),new(Xx()).ActorContextPreprocessSourceToDestination({name:"urn:comunica:default:context-preprocess/actors#source-to-destination",bus:n,busFailMessage:"Context preprocessing failed"});const Q=new(_I()).ActorContextPreprocessQuerySourceSkolemize({name:"urn:comunica:default:context-preprocess/actors#query-source-skolemize",bus:n,busFailMessage:"Context preprocessing failed"}),z=new(E3()).MediatorCombinePipeline({name:"urn:comunica:default:context-preprocess/mediators#main",bus:n});new(u7()).ActorHashBindingsMurmur({name:"urn:comunica:default:hash-bindings/actors#murmur",bus:t,busFailMessage:"Failed to obtaining hash functions for bindings"});const g=new(Ur()).MediatorRace({name:"urn:comunica:default:hash-bindings/mediators#main",bus:t});new(f7()).ActorHashQuadsMurmur({name:"urn:comunica:default:hash-quads/actors#murmur",bus:e,busFailMessage:"Failed to obtaining hash functions for quads"}),new(y7()).ActorOptimizeQueryOperationRewriteCopy({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-copy",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(m7()).ActorOptimizeQueryOperationRewriteMove({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-move",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(T7()).ActorOptimizeQueryOperationRewriteAdd({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-add",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const F=new(D7()).ActorOptimizeQueryOperationGroupSources({name:"urn:comunica:default:optimize-query-operation/actors#group-sources",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});new(M7()).ActorOptimizeQueryOperationConstructDistinct({name:"urn:comunica:default:optimize-query-operation/actors#construct-distinct",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const P=new(E3()).MediatorCombinePipeline({filterFailures:!0,name:"urn:comunica:default:optimize-query-operation/mediators#main",bus:a});new(L7()).ActorRdfJoinEntriesSortCardinality({name:"urn:comunica:default:rdf-join-entries-sort/actors#cardinality",bus:u,busFailMessage:"Sorting join entries failed: none of the configured actors were able to sort"});const R=new(n1()).MediatorNumber({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-entries-sort/mediators#main",bus:u});new(U7()).ActorRdfJoinSelectivityVariableCounting({name:"urn:comunica:default:rdf-join-selectivity/actors#variable-counting",bus:c,busFailMessage:"Determining join selectivity failed: none of the configured actors were able to calculate selectivities"});const M=new(n1()).MediatorNumber({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-selectivity/mediators#main",bus:c});new(X7()).ActorRdfMetadataAccumulateCardinality({name:"urn:comunica:default:rdf-metadata-accumulate/actors#cardinality",bus:s,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(H7()).ActorRdfMetadataAccumulatePageSize({name:"urn:comunica:default:rdf-metadata-accumulate/actors#pagesize",bus:s,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(J7()).ActorRdfMetadataAccumulateRequestTime({name:"urn:comunica:default:rdf-metadata-accumulate/actors#requesttime",bus:s,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"});const C=new($m()).MediatorCombineUnion({field:"metadata",name:"urn:comunica:default:rdf-metadata-accumulate/mediators#main",bus:s});new(r8()).ActorRdfUpdateQuadsRdfJsStore({name:"urn:comunica:default:rdf-update-quads/actors#rdfjs-store",bus:l,busFailMessage:"RDF updating failed: none of the configured actors were able to handle an update"});const H=new(Ur()).MediatorRace({name:"urn:comunica:default:rdf-update-quads/mediators#main",bus:l});new(o8()).ActorQueryParseSparql({prefixes:{dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",skos:"http://www.w3.org/2008/05/skos#",xsd:"http://www.w3.org/2001/XMLSchema#"},name:"urn:comunica:default:query-parse/actors#sparql",bus:d,busFailMessage:'Query parsing failed: none of the configured parsers were able to the query "${action.query}"'});const G=new(Ur()).MediatorRace({name:"urn:comunica:default:query-parse/mediators#main",bus:d}),J=new(Ur()).MediatorRace({name:"urn:comunica:default:bindings-aggregator-factory/mediators#main",bus:f}),ne=new(Ur()).MediatorRace({name:"urn:comunica:default:expression-evaluator-factory/mediators#main",bus:h});new(c8()).ActorFunctionFactoryExpressionBnode({name:"urn:comunica:default:function-factory/actors#expression-function-bnode",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(f8()).ActorFunctionFactoryExpressionCoalesce({name:"urn:comunica:default:function-factory/actors#expression-function-coalesce",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(y8()).ActorFunctionFactoryExpressionBound({name:"urn:comunica:default:function-factory/actors#expression-function-bound",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(v8()).ActorFunctionFactoryExpressionExtensions({name:"urn:comunica:default:function-factory/actors#expression-function-extensions",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(S8()).ActorFunctionFactoryExpressionConcat({name:"urn:comunica:default:function-factory/actors#expression-function-concat",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(w8()).ActorFunctionFactoryExpressionIf({name:"urn:comunica:default:function-factory/actors#expression-function-if",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(R8()).ActorFunctionFactoryExpressionLogicalAnd({name:"urn:comunica:default:function-factory/actors#expression-function-logical-and",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(M8()).ActorFunctionFactoryExpressionLogicalOr({name:"urn:comunica:default:function-factory/actors#expression-function-logical-or",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(q8()).ActorFunctionFactoryExpressionSameTerm({name:"urn:comunica:default:function-factory/actors#expression-function-same-term",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(B8()).ActorFunctionFactoryTermAbs({name:"urn:comunica:default:function-factory/actors#term-function-abs",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(V8()).ActorFunctionFactoryTermAddition({name:"urn:comunica:default:function-factory/actors#term-function-addition",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(z8()).ActorFunctionFactoryTermCeil({name:"urn:comunica:default:function-factory/actors#term-function-ceil",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(J8()).ActorFunctionFactoryTermContains({name:"urn:comunica:default:function-factory/actors#term-function-contains",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(W8()).ActorFunctionFactoryTermDatatype({name:"urn:comunica:default:function-factory/actors#term-function-datatype",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(eB()).ActorFunctionFactoryTermDay({name:"urn:comunica:default:function-factory/actors#term-function-day",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(nB()).ActorFunctionFactoryTermEncodeForUri({name:"urn:comunica:default:function-factory/actors#term-function-encode-for-uri",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(oB()).ActorFunctionFactoryTermDivision({name:"urn:comunica:default:function-factory/actors#term-function-division",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cB()).ActorFunctionFactoryTermEquality({name:"urn:comunica:default:function-factory/actors#term-function-equality",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(fB()).ActorFunctionFactoryTermFloor({name:"urn:comunica:default:function-factory/actors#term-function-floor",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(yB()).ActorFunctionFactoryTermHours({name:"urn:comunica:default:function-factory/actors#term-function-hours",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(gB()).ActorFunctionFactoryTermIsIri({name:"urn:comunica:default:function-factory/actors#term-function-is-iri",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(TB()).ActorFunctionFactoryTermIsBlank({name:"urn:comunica:default:function-factory/actors#term-function-is-blank",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(FB()).ActorFunctionFactoryTermIsLiteral({name:"urn:comunica:default:function-factory/actors#term-function-is-literal",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(EB()).ActorFunctionFactoryTermIri({name:"urn:comunica:default:function-factory/actors#term-function-iri",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(DB()).ActorFunctionFactoryTermIsNumeric({name:"urn:comunica:default:function-factory/actors#term-function-is-numeric",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(NB()).ActorFunctionFactoryTermLang({name:"urn:comunica:default:function-factory/actors#term-function-lang",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(LB()).ActorFunctionFactoryTermIsTriple({name:"urn:comunica:default:function-factory/actors#term-function-is-triple",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(CB()).ActorFunctionFactoryTermLangmatches({name:"urn:comunica:default:function-factory/actors#term-function-langmatches",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(VB()).ActorFunctionFactoryTermMinutes({name:"urn:comunica:default:function-factory/actors#term-function-minutes",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(zB()).ActorFunctionFactoryTermLcase({name:"urn:comunica:default:function-factory/actors#term-function-lcase",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(KB()).ActorFunctionFactoryTermMd5({name:"urn:comunica:default:function-factory/actors#term-function-md5",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(ZB()).ActorFunctionFactoryTermMonth({name:"urn:comunica:default:function-factory/actors#term-function-month",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(tC()).ActorFunctionFactoryTermNot({name:"urn:comunica:default:function-factory/actors#term-function-not",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(iC()).ActorFunctionFactoryTermMultiplication({name:"urn:comunica:default:function-factory/actors#term-function-multiplication",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(uC()).ActorFunctionFactoryTermNow({name:"urn:comunica:default:function-factory/actors#term-function-now",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(lC()).ActorFunctionFactoryTermObject({name:"urn:comunica:default:function-factory/actors#term-function-object",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(pC()).ActorFunctionFactoryTermPredicate({name:"urn:comunica:default:function-factory/actors#term-function-predicate",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(_C()).ActorFunctionFactoryTermRand({name:"urn:comunica:default:function-factory/actors#term-function-rand",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(vC()).ActorFunctionFactoryTermReplace({name:"urn:comunica:default:function-factory/actors#term-function-replace",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(SC()).ActorFunctionFactoryTermRound({name:"urn:comunica:default:function-factory/actors#term-function-round",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(qI()).ActorFunctionFactoryTermRegex({name:"urn:comunica:default:function-factory/actors#term-function-regex",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(NC()).ActorFunctionFactoryTermSha1({name:"urn:comunica:default:function-factory/actors#term-function-sha1",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(LC()).ActorFunctionFactoryTermSeconds({name:"urn:comunica:default:function-factory/actors#term-function-seconds",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(CC()).ActorFunctionFactoryTermSha256({name:"urn:comunica:default:function-factory/actors#term-function-sha256",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(VC()).ActorFunctionFactoryTermSha384({name:"urn:comunica:default:function-factory/actors#term-function-sha384",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(zC()).ActorFunctionFactoryTermSha512({name:"urn:comunica:default:function-factory/actors#term-function-sha512",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(JC()).ActorFunctionFactoryTermStrAfter({name:"urn:comunica:default:function-factory/actors#term-function-str-after",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(WC()).ActorFunctionFactoryTermStrBefore({name:"urn:comunica:default:function-factory/actors#term-function-str-before",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(eQ()).ActorFunctionFactoryTermStrDt({name:"urn:comunica:default:function-factory/actors#term-function-str-dt",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(nQ()).ActorFunctionFactoryTermStrEnds({name:"urn:comunica:default:function-factory/actors#term-function-str-ends",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(oQ()).ActorFunctionFactoryTermStrLang({name:"urn:comunica:default:function-factory/actors#term-function-str-lang",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cQ()).ActorFunctionFactoryTermStrLen({name:"urn:comunica:default:function-factory/actors#term-function-str-len",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(fQ()).ActorFunctionFactoryTermStrStarts({name:"urn:comunica:default:function-factory/actors#term-function-str-starts",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(yQ()).ActorFunctionFactoryTermStr({name:"urn:comunica:default:function-factory/actors#term-function-str",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(PQ()).ActorFunctionFactoryTermStrUuid({name:"urn:comunica:default:function-factory/actors#term-function-str-uuid",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(IQ()).ActorFunctionFactoryTermSubStr({name:"urn:comunica:default:function-factory/actors#term-function-sub-str",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(xQ()).ActorFunctionFactoryTermTimezone({name:"urn:comunica:default:function-factory/actors#term-function-timezone",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(QQ()).ActorFunctionFactoryTermSubtraction({name:"urn:comunica:default:function-factory/actors#term-function-subtraction",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(GQ()).ActorFunctionFactoryTermSubject({name:"urn:comunica:default:function-factory/actors#term-function-subject",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(HQ()).ActorFunctionFactoryTermTz({name:"urn:comunica:default:function-factory/actors#term-function-tz",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(KQ()).ActorFunctionFactoryTermUnaryMinus({name:"urn:comunica:default:function-factory/actors#term-function-unary-minus",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(ZQ()).ActorFunctionFactoryTermUnaryPlus({name:"urn:comunica:default:function-factory/actors#term-function-unary-plus",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(tU()).ActorFunctionFactoryTermTriple({name:"urn:comunica:default:function-factory/actors#term-function-triple",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(iU()).ActorFunctionFactoryTermUcase({name:"urn:comunica:default:function-factory/actors#term-function-ucase",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(uU()).ActorFunctionFactoryTermUuid({name:"urn:comunica:default:function-factory/actors#term-function-uuid",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(lU()).ActorFunctionFactoryTermXsdToBoolean({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-boolean",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(pU()).ActorFunctionFactoryTermXsdToDate({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-date",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(_U()).ActorFunctionFactoryTermXsdToDecimal({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-decimal",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bU()).ActorFunctionFactoryTermXsdToDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-duration",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(OU()).ActorFunctionFactoryTermXsdToDayTimeDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-day-time-duration",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(AU()).ActorFunctionFactoryTermXsdToDouble({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-double",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(jU()).ActorFunctionFactoryTermXsdToFloat({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-float",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(PU()).ActorFunctionFactoryTermXsdToDatetime({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-datetime",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(IU()).ActorFunctionFactoryTermXsdToInteger({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-integer",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(xU()).ActorFunctionFactoryTermXsdToString({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-string",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(QU()).ActorFunctionFactoryTermXsdToYearMonthDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-year-month-duration",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(GU()).ActorFunctionFactoryTermXsdToTime({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-time",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(HU()).ActorFunctionFactoryTermYear({name:"urn:comunica:default:function-factory/actors#term-function-year",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"});const te=new(Ur()).MediatorRace({name:"urn:comunica:default:function-factory/mediators#main",bus:p});new(JU()).ActorQueryOperationSource({name:"urn:comunica:default:query-operation/actors#source",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const Z=new(n1()).MediatorNumber({field:"httpRequests",type:"min",ignoreFailures:!0,name:"urn:comunica:default:query-operation/mediators#main",bus:y}),ye=new(YU()).MediatorJoinCoefficientsFixed({cpuWeight:10,memoryWeight:1,timeWeight:2,ioWeight:10,name:"urn:comunica:default:rdf-join/mediators#main",bus:_}),ve=new(Ur()).MediatorRace({name:"urn:comunica:default:query-process/mediators#main",bus:m}),Te=new(Ur()).MediatorRace({name:"urn:comunica:default:query-source-identify/mediators#main",bus:O}),ee=new(Ur()).MediatorRace({name:"urn:comunica:default:term-comparator-factory/mediators#main",bus:v}),Oe=new(pR()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-context-preprocess-query-source-identify/^4.0.0/components/ActorContextPreprocessQuerySourceIdentify.jsonld#IActorContextPreprocessQuerySourceIdentifyArgs_default_invalidator",bus:S,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),me=new(kU()).MediatorAll({name:"urn:comunica:default:http-invalidate/mediators#main",bus:S}),Se=new(pR()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-operation-service/^4.0.0/components/ActorQueryOperationService.jsonld#IActorQueryOperationServiceArgs_default_invalidator",bus:S,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),be=new(Ur()).MediatorRace({name:"urn:comunica:default:query-result-serialize/mediators#serialize",bus:E}),Fe=new($m()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:query-result-serialize/mediators#mediaType",bus:E}),q=new($m()).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:query-result-serialize/mediators#mediaTypeFormat",bus:E}),b=new($m()).MediatorCombineUnion({field:"mergeHandlers",name:"urn:comunica:default:merge-bindings-context/mediators#main",bus:j});new(oV()).ActorRdfJoinSingle({mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#inner-single",bus:_,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(sV()).ActorRdfJoinMultiEmpty({mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#inner-multi-empty",bus:_,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});const w=new(CR()).ActorRdfJoinHash({mediatorHashBindings:g,canHandleUndefs:!1,mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#inner-hash-def",bus:_,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),T=new(CR()).ActorRdfJoinHash({mediatorHashBindings:g,canHandleUndefs:!0,mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#inner-hash-undef",bus:_,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),A=new(bV()).ActorRdfJoinSymmetricHash({mediatorHashBindings:g,mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#inner-symmetric-hash",bus:_,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),D=new(TV()).ActorRdfJoinNestedLoop({mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#inner-nested-loop",bus:_,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(YR()).ActorRdfJoinMinusHash({canHandleUndefs:!1,mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#minus-hash-def",bus:_,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(YR()).ActorRdfJoinMinusHash({canHandleUndefs:!0,mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#minus-hash-undef",bus:_,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(cg()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!1,mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-nonblocking",bus:_,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(cg()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!0,mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-blocking",bus:_,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(cg()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!1,mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-nonblocking",bus:_,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(cg()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!0,mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-blocking",bus:_,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(wV()).ActorRdfJoinOptionalNestedLoop({mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#optional-nested-loop",bus:_,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(DV()).ActorBindingsAggregatorFactoryCount({mediatorExpressionEvaluatorFactory:ne,name:"urn:comunica:default:bindings-aggregator-factory/actors#count",bus:f,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(MV()).ActorBindingsAggregatorFactoryGroupConcat({mediatorExpressionEvaluatorFactory:ne,name:"urn:comunica:default:bindings-aggregator-factory/actors#group-concat",bus:f,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(IV()).ActorBindingsAggregatorFactorySample({mediatorExpressionEvaluatorFactory:ne,name:"urn:comunica:default:bindings-aggregator-factory/actors#sample",bus:f,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(LV()).ActorBindingsAggregatorFactoryWildcardCount({mediatorExpressionEvaluatorFactory:ne,name:"urn:comunica:default:bindings-aggregator-factory/actors#wildcard-count",bus:f,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(BV()).ActorBindingsAggregatorFactoryAverage({mediatorFunctionFactory:te,mediatorExpressionEvaluatorFactory:ne,name:"urn:comunica:default:bindings-aggregator-factory/actors#average",bus:f,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(QV()).ActorBindingsAggregatorFactorySum({mediatorFunctionFactory:te,mediatorExpressionEvaluatorFactory:ne,name:"urn:comunica:default:bindings-aggregator-factory/actors#sum",bus:f,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(GV()).ActorFunctionFactoryExpressionIn({mediatorFunctionFactory:te,name:"urn:comunica:default:function-factory/actors#expression-function-in",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(HV()).ActorFunctionFactoryExpressionNotIn({mediatorFunctionFactory:te,name:"urn:comunica:default:function-factory/actors#expression-function-not-in",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(KV()).ActorFunctionFactoryTermGreaterThan({mediatorFunctionFactory:te,name:"urn:comunica:default:function-factory/actors#term-function-greater-than",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(ZV()).ActorFunctionFactoryTermGreaterThanEqual({mediatorFunctionFactory:te,name:"urn:comunica:default:function-factory/actors#term-function-greater-than-equal",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(tG()).ActorFunctionFactoryTermInequality({mediatorFunctionFactory:te,name:"urn:comunica:default:function-factory/actors#term-function-inequality",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(iG()).ActorFunctionFactoryTermLesserThan({mediatorFunctionFactory:te,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(uG()).ActorFunctionFactoryTermLesserThanEqual({mediatorFunctionFactory:te,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than-equal",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cG()).ActorQueryOperationAsk({mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#ask",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(dG()).ActorQueryOperationBgpJoin({mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#bgp",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(yG()).ActorQueryOperationDistinctIdentity({mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#distinct",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(mG()).ActorQueryOperationExtend({mediatorExpressionEvaluatorFactory:ne,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#extend",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(bG()).ActorQueryOperationFilter({mediatorExpressionEvaluatorFactory:ne,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#filter",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(t5()).ActorQueryOperationConstruct({mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#construct",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(OG()).ActorQueryOperationFromQuad({mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#from",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(FG()).ActorQueryOperationProject({mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#project",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(wG()).ActorQueryOperationReducedHash({mediatorHashBindings:g,cacheSize:100,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#reduced",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(jG()).ActorQueryOperationSlice({mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#slice",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(r5()).ActorQueryOperationUnion({mediatorRdfMetadataAccumulate:C,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#union",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(MG()).ActorQueryOperationPathAlt({mediatorRdfMetadataAccumulate:C,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#path-alt",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(IG()).ActorQueryOperationPathInv({mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#path-inv",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(LG()).ActorQueryOperationPathLink({mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#path-link",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(BG()).ActorQueryOperationPathNps({mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#path-nps",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(QG()).ActorQueryOperationUpdateCompositeUpdate({mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#update-composite",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(VG()).ActorQueryOperationClear({mediatorUpdateQuads:H,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#update-clear",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(XG()).ActorQueryOperationCreate({mediatorUpdateQuads:H,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#update-create",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(HG()).ActorQueryOperationDrop({mediatorUpdateQuads:H,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#update-drop",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(YG()).ActorQueryOperationJoin({mediatorJoin:ye,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#join",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(ZG()).ActorQueryOperationMinus({mediatorJoin:ye,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#minus",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(eX()).ActorQueryOperationLeftJoin({mediatorJoin:ye,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#leftjoin",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(rX()).ActorQueryOperationPathSeq({mediatorJoin:ye,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#path-seq",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const x=new(iX()).ActorRdfJoinMultiSmallest({mediatorJoinEntriesSort:R,mediatorJoin:ye,mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest",bus:_,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(oX()).ActorQueryOperationLoad({mediatorUpdateQuads:H,mediatorQuerySourceIdentify:Te,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#update-load",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(sX()).ActorBindingsAggregatorFactoryMax({mediatorTermComparatorFactory:ee,mediatorExpressionEvaluatorFactory:ne,name:"urn:comunica:default:bindings-aggregator-factory/actors#max",bus:f,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(lX()).ActorBindingsAggregatorFactoryMin({mediatorTermComparatorFactory:ee,mediatorExpressionEvaluatorFactory:ne,name:"urn:comunica:default:bindings-aggregator-factory/actors#min",bus:f,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(pX()).ActorQueryOperationOrderBy({mediatorExpressionEvaluatorFactory:ne,mediatorTermComparatorFactory:ee,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#orderby",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const I=new(yX()).ActorOptimizeQueryOperationFilterPushdown({aggressivePushdown:!1,maxIterations:10,splitConjunctive:!0,mergeConjunctive:!0,pushIntoLeftJoins:!0,pushEqualityIntoPatterns:!0,name:"urn:comunica:default:optimize-query-operation/actors#filter-pushdown",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[F]});new(mX()).ActorContextPreprocessQuerySourceIdentify({cacheSize:100,httpInvalidator:Oe,mediatorQuerySourceIdentify:Te,mediatorContextPreprocess:z,name:"urn:comunica:default:context-preprocess/actors#query-source-identify",bus:n,busFailMessage:"Context preprocessing failed",beforeActors:[Q]});const U=new(DN()).ActorInitQuery({mediatorQueryProcess:ve,mediatorQueryResultSerialize:be,mediatorQueryResultSerializeMediaTypeCombiner:Fe,mediatorQueryResultSerializeMediaTypeFormatCombiner:q,mediatorHttpInvalidate:me,defaultQueryInputFormat:"sparql",allowNoSources:!1,name:"urn:comunica:default:init/actors#query",bus:o,busFailMessage:"Initialization failed: none of the configured actors were to initialize"});new(OX()).ActorExpressionEvaluatorFactoryDefault({mediatorQueryOperation:Z,mediatorFunctionFactory:te,mediatorMergeBindingsContext:b,name:"urn:comunica:default:expression-evaluator-factory/actors#default",bus:h,busFailMessage:"Creation of Expression Evaluator failed"}),new(AX()).ActorQueryOperationGroup({mediatorMergeBindingsContext:b,mediatorBindingsAggregatorFactory:J,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#group",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(EX()).ActorQueryOperationNop({mediatorMergeBindingsContext:b,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#nop",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(RX()).ActorQueryOperationService({forceSparqlEndpoint:!1,mediatorMergeBindingsContext:b,mediatorQuerySourceIdentify:Te,httpInvalidator:Se,cacheSize:32,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#service",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(PX()).ActorQueryOperationValues({mediatorMergeBindingsContext:b,name:"urn:comunica:default:query-operation/actors#values",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(NX()).ActorQueryOperationPathOneOrMore({mediatorMergeBindingsContext:b,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#path-one-or-more",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(qX()).ActorQueryOperationPathZeroOrMore({mediatorMergeBindingsContext:b,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#path-zero-or-more",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(xX()).ActorQueryOperationPathZeroOrOne({mediatorMergeBindingsContext:b,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#path-zero-or-one",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(CX()).ActorQueryOperationUpdateDeleteInsert({mediatorUpdateQuads:H,mediatorMergeBindingsContext:b,mediatorQueryOperation:Z,name:"urn:comunica:default:query-operation/actors#update-delete-insert",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(UX()).ActorRdfJoinNone({mediatorMergeBindingsContext:b,mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#inner-none",bus:_,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(XX()).ActorRdfJoinOptionalBind({bindOrder:"depth-first",selectivityModifier:1e-6,mediatorQueryOperation:Z,mediatorMergeBindingsContext:b,mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#optional-bind",bus:_,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(JX()).ActorQueryProcessSequential({mediatorContextPreprocess:z,mediatorQueryParse:G,mediatorOptimizeQueryOperation:P,mediatorQueryOperation:Z,mediatorMergeBindingsContext:b,name:"urn:comunica:default:query-process/actors#sequential",bus:m,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),new(kX()).ActorQuerySourceIdentifyRdfJs({mediatorMergeBindingsContext:b,name:"urn:comunica:default:query-source-identify/actors#rdfjs",bus:O,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}"}),new(iz()).ActorTermComparatorFactoryExpressionEvaluator({mediatorQueryOperation:Z,mediatorFunctionFactory:te,mediatorMergeBindingsContext:b,name:"urn:comunica:default:term-comparator-factory/actors#expression-evaluator",bus:v,busFailMessage:"Creation of term comparator failed"});const X=new(h5()).ActorRdfJoinMultiBind({bindOrder:"depth-first",selectivityModifier:1e-4,minMaxCardinalityRatio:60,mediatorJoinEntriesSort:R,mediatorQueryOperation:Z,mediatorMergeBindingsContext:b,mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind",bus:_,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[x,w,T,A,D]});new(oz()).ActorRdfJoinMultiSmallestFilterBindings({selectivityModifier:1e-4,blockSize:64,mediatorJoinEntriesSort:R,mediatorJoin:ye,mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest-filter-bindings",bus:_,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[x,w,T,A,D]});const V=new(sz()).ActorOptimizeQueryOperationPruneEmptySourceOperations({useAskIfSupported:!1,name:"urn:comunica:default:optimize-query-operation/actors#prune-empty-source-operations",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[I]});new(lz()).ActorOptimizeQueryOperationLeftjoinExpressionPushdown({name:"urn:comunica:default:optimize-query-operation/actors#leftjoin-expression-pushdown",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[I]}),new(fz()).ActorRdfJoinMultiBindSource({selectivityModifier:1e-4,blockSize:16,mediatorJoinEntriesSort:R,mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind-source",bus:_,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[x,X,w,T,A,D]});const Y=new(hz()).ActorOptimizeQueryOperationJoinConnected({name:"urn:comunica:default:optimize-query-operation/actors#join-connected",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[V]}),ue=new(_z()).ActorOptimizeQueryOperationBgpToJoin({name:"urn:comunica:default:optimize-query-operation/actors#bgp-to-join",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Y]}),se=new(gz()).ActorOptimizeQueryOperationJoinBgp({name:"urn:comunica:default:optimize-query-operation/actors#join-bgp",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[ue]}),de=new(vz()).ActorOptimizeQueryOperationAssignSourcesExhaustive({name:"urn:comunica:default:optimize-query-operation/actors#assign-sources-exhaustive",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[se]});return new(Oz()).ActorOptimizeQueryOperationDescribeToConstructsSubject({name:"urn:comunica:default:optimize-query-operation/actors#describe-to-constructs-subject",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[de]}),U}),j1}var SM;function Fz(){if(SM)return sc;SM=1,Object.defineProperty(sc,"__esModule",{value:!0}),sc.QueryEngine=void 0;const i=DN(),r=Sz();let o=class extends i.QueryEngineBase{constructor(t=r()){super(t)}};return sc.QueryEngine=o,sc}var FM;function Az(){return FM||(FM=1,(function(i){var r=qn&&qn.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=qn&&qn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Fz(),i)})(qn)),qn}var wz=Az(),Ez=_t();function jz(i){const r={};for(const[o,n]of[...i])r[o.value]=n;return r}async function m5({bindings:i,dataset:r,factory:o,query:n}){const t=new Dz(r),e=new wz.QueryEngine,u=new Ez.BindingsFactory(o).bindings(i);return(await e.queryBindings(n,{sources:[t],initialBindings:u})).toArray()}function Rz(i){return i?i.map(r=>{let o="";return r.start==="object"&&r.end==="subject"&&(o+="^"),o+=r.predicates.map(n=>`<${n.value}>`).join("|"),r.quantifier==="oneOrMore"?o+="+":r.quantifier==="zeroOrMore"?o+="*":r.quantifier==="zeroOrOne"&&(o+="?"),o}).join("/"):null}class Dz{constructor(r){this.dataset=r}match(r,o,n,t){return q5.Readable.from(this.dataset.match(r,o,n,t))}}function g5(i,r=[]){for(const o of i.out([C5.imports]))g5(o,r);for(const o of i.out([W.declare])){const n=o.out([W.prefix]).value,t=o.out([W.namespace]).value;r.push(`PREFIX ${n}: <${t}>`)}return r}function Pz(i){const r=i.sparql.out([W.select]).value,o=g5(i.sparql.out([W.prefixes])),n=Rz(i.path),t=i.sparql.out([W.message]).terms,e=[...o,r].filter(Boolean).join(`
`).split("$PATH").join(n);return{generic:Mz({message:t,query:e,source:i.sparql.terms})}}function Mz({message:i,query:r,source:o}){return async n=>{const t=n.focusNode.dataset,e=n.factory,a=[[e.variable("this"),n.focusNode.term]],u=await m5({bindings:a,dataset:t,factory:e,query:r});for(const c of u){const s=jz(c),l=c.has("path")&&DM(n.focusNode.node([c.get("path")])),d=n.focusNode.node([c.get("value")||n.focusNode.term]);n.violation(W.SPARQLConstraintComponent,{args:s,message:i,path:l,source:o,value:d})}u.length===0&&n.debug(W.SPARQLConstraintComponent,{source:o})}}const LW=new Map([[W.sparql,Pz]]);async function Nz(i,r){const o=i.out([W.select]).value;if(!o)return[];const n=await m5({dataset:r.focusNode.dataset,factory:r.factory,query:o,bindings:[]}),t=r.factory.variable("this");return n.map(e=>e.get(t)).filter(Boolean)}W.target;export{Qz as V,LW as v};
