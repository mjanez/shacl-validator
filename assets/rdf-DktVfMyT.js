import{c as Yn}from"./charts-BadQMOzK.js";let Gs=class{constructor(e){this.value=e}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value}};Gs.prototype.termType="BlankNode";let qn=class{equals(e){return!!e&&e.termType===this.termType}};qn.prototype.termType="DefaultGraph";qn.prototype.value="";function Zn(s,e){if(!e)return null;if(e.termType==="BlankNode")return s.blankNode(e.value);if(e.termType==="DefaultGraph")return s.defaultGraph();if(e.termType==="Literal")return s.literal(e.value,e.language||s.namedNode(e.datatype.value));if(e.termType==="NamedNode")return s.namedNode(e.value);if(e.termType==="Quad"){const t=s.fromTerm(e.subject),r=s.fromTerm(e.predicate),o=s.fromTerm(e.object),i=s.fromTerm(e.graph);return s.quad(t,r,o,i)}if(e.termType==="Variable")return s.variable(e.value);throw new Error(`unknown termType ${e.termType}`)}let pr=class{constructor(e,t,r,o=""){this.value=e,this.language=t,this.datatype=r,this.direction=o}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)&&(e.direction||"")===this.direction}};pr.prototype.termType="Literal";let er=class{constructor(e){this.value=e}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value}};er.prototype.termType="NamedNode";let Un=class{constructor(e,t,r,o){this.subject=e,this.predicate=t,this.object=r,this.graph=o}equals(e){return!!e&&(e.termType==="Quad"||!e.termType)&&e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)}};Un.prototype.termType="Quad";Un.prototype.value="";let Ws=class{constructor(e){this.value=e}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value}};Ws.prototype.termType="Variable";const Ta=new er("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),ei=new er("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),Aa=new er("http://www.w3.org/2001/XMLSchema#string");let Vs=class{constructor(){this.init()}init(){this._data={blankNodeCounter:0,defaultGraph:new qn}}namedNode(e){return new er(e)}blankNode(e){return e=e||"b"+ ++this._data.blankNodeCounter,new Gs(e)}literal(e,t){return typeof t=="string"?new pr(e,t,ei):typeof t?.language=="string"?new pr(e,t.language,t.direction?Ta:ei,t.direction):new pr(e,"",t||Aa)}variable(e){return new Ws(e)}defaultGraph(){return this._data.defaultGraph}quad(e,t,r,o=this.defaultGraph()){return new Un(e,t,r,o)}fromTerm(e){return Zn(this,e)}fromQuad(e){return Zn(this,e)}};Vs.exports=["blankNode","defaultGraph","fromQuad","fromTerm","literal","namedNode","quad","variable"];const Da=new Vs;function ct(s){return typeof s=="string"||s instanceof String}const Fa="http://www.w3.org/2001/XMLSchema#string";function Oe(s){if(typeof s=="string")return s;if(!s)return"";if(typeof s.id<"u"&&s.termType!=="Quad")return s.id;let e,t,r,o;switch(s.termType){case"NamedNode":return s.value;case"BlankNode":return`_:${s.value}`;case"Variable":return`?${s.value}`;case"DefaultGraph":return"";case"Literal":return s.language?`"${s.value}"@${s.language}`:`"${s.value}"${s.datatype&&s.datatype.value!==Fa?`^^${s.datatype.value}`:""}`;case"Quad":return e=vr(Oe(s.subject)),t=vr(Oe(s.predicate)),r=vr(Oe(s.object)),o=s.graph.termType==="DefaultGraph"?"":` ${Oe(s.graph)}`,`<<${e} ${t} ${r}${o}>>`;default:throw new Error(`Unexpected termType: ${s.termType}`)}}const ja=/^"(.*".*)(?="[^"]*$)/;function vr(s){return s.replace(ja,(e,t)=>`"${t.replace(/"/g,'""')}`)}class La{constructor(e){if(this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._quads=new Map,e)for(const t of e)this.add(t)}get size(){let e=this._size;if(e!==null)return e;e=0;const t=this._graphs;let r,o;for(const i in t)for(const a in r=t[i].subjects)for(const n in o=r[a])e+=Object.keys(o[n]).length;return this._size=e,this._size}add(e){let t=Oe(e.subject),r=Oe(e.predicate),o=Oe(e.object);const i=Oe(e.graph);let a=this._graphs[i];a||(a=this._graphs[i]={subjects:{},predicates:{},objects:{}},Object.freeze(a));const n=this._ids,p=this._entities;return t=n[t]||(n[p[++this._id]=t]=this._id),r=n[r]||(n[p[++this._id]=r]=this._id),o=n[o]||(n[p[++this._id]=o]=this._id),this._addToIndex(a.subjects,t,r,o),this._addToIndex(a.predicates,r,o,t),this._addToIndex(a.objects,o,t,r),this._setQuad(t,r,o,i,e),this._size=null,this}delete(e){let t=Oe(e.subject),r=Oe(e.predicate),o=Oe(e.object);const i=Oe(e.graph),a=this._ids,n=this._graphs;let p,l,d;if(!(t=a[t])||!(r=a[r])||!(o=a[o])||!(p=n[i])||!(l=p.subjects[t])||!(d=l[r])||!(o in d))return this;this._removeFromIndex(p.subjects,t,r,o),this._removeFromIndex(p.predicates,r,o,t),this._removeFromIndex(p.objects,o,t,r),this._size!==null&&this._size--,this._deleteQuad(t,r,o,i);for(t in p.subjects)return this;return delete n[i],this}has(e){const t=Oe(e.subject),r=Oe(e.predicate),o=Oe(e.object),i=Oe(e.graph),a=this._graphs[i];if(!a)return!1;const n=this._ids;let p,l,d;return ct(t)&&!(p=n[t])||ct(r)&&!(l=n[r])||ct(o)&&!(d=n[o])?!1:this._countInIndex(a.objects,d,p,l)===1}match(e,t,r,o){return this._createDataset(this._match(e,t,r,o))}[Symbol.iterator](){return this._match()[Symbol.iterator]()}_addToIndex(e,t,r,o){const i=e[t]||(e[t]={}),a=i[r]||(i[r]={}),n=o in a;return n||(a[o]=null),!n}_removeFromIndex(e,t,r,o){const i=e[t],a=i[r];delete a[o];for(const n in a)return;delete i[r];for(const n in i)return;delete e[t]}_findInIndex(e,t,r,o,i,a,n,p,l,d){let g,y,w;t&&((g=e,e={})[t]=g[t]);for(const m in e)if(y=e[m],y){r&&((g=y,y={})[r]=g[r]);for(const S in y)if(w=y[S],w){const I=o?o in w?[o]:[]:Object.keys(w);for(let v=0;v<I.length;v++){const R={[i]:m,[a]:S,[n]:I[v]},h=this._getQuad(R.subject,R.predicate,R.object,p);if(d)d.push(h);else if(l(h))return!0}}}return d}_countInIndex(e,t,r,o){let i=0,a,n,p;t&&((a=e,e={})[t]=a[t]);for(const l in e)if(n=e[l],n){r&&((a=n,n={})[r]=a[r]);for(const d in n)p=n[d],p&&(o?o in p&&i++:i+=Object.keys(p).length)}return i}_getGraphs(e){return ct(e)?{[e]:this._graphs[e]}:this._graphs}_match(e,t,r,o){e=e&&Oe(e),t=t&&Oe(t),r=r&&Oe(r),o=o&&Oe(o);const i=[],a=this._getGraphs(o),n=this._ids;let p,l,d,g;if(ct(e)&&!(l=n[e])||ct(t)&&!(d=n[t])||ct(r)&&!(g=n[r]))return i;for(const y in a)p=a[y],p&&(l?g?this._findInIndex(p.objects,g,l,d,"object","subject","predicate",y,null,i):this._findInIndex(p.subjects,l,d,null,"subject","predicate","object",y,null,i):d?this._findInIndex(p.predicates,d,g,null,"predicate","object","subject",y,null,i):g?this._findInIndex(p.objects,g,null,null,"object","subject","predicate",y,null,i):this._findInIndex(p.subjects,null,null,null,"subject","predicate","object",y,null,i));return i}_getQuad(e,t,r,o){return this._quads.get(this._toId(e,t,r,o))}_setQuad(e,t,r,o,i){this._quads.set(this._toId(e,t,r,o),i)}_deleteQuad(e,t,r,o){this._quads.delete(this._toId(e,t,r,o))}_createDataset(e){return new this.constructor(e)}_toId(e,t,r,o){return`${e}:${t}:${r}:${o}`}}class Js{dataset(e){return new La(e)}}Js.exports=["dataset"];const al=new Js;var Er={},Ot={},ti;function Oa(){if(ti)return Ot;ti=1,Ot.byteLength=n,Ot.toByteArray=l,Ot.fromByteArray=y;for(var s=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,i=r.length;o<i;++o)s[o]=r[o],e[r.charCodeAt(o)]=o;e[45]=62,e[95]=63;function a(w){var m=w.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=w.indexOf("=");S===-1&&(S=m);var I=S===m?0:4-S%4;return[S,I]}function n(w){var m=a(w),S=m[0],I=m[1];return(S+I)*3/4-I}function p(w,m,S){return(m+S)*3/4-S}function l(w){var m,S=a(w),I=S[0],v=S[1],R=new t(p(w,I,v)),h=0,u=v>0?I-4:I,_;for(_=0;_<u;_+=4)m=e[w.charCodeAt(_)]<<18|e[w.charCodeAt(_+1)]<<12|e[w.charCodeAt(_+2)]<<6|e[w.charCodeAt(_+3)],R[h++]=m>>16&255,R[h++]=m>>8&255,R[h++]=m&255;return v===2&&(m=e[w.charCodeAt(_)]<<2|e[w.charCodeAt(_+1)]>>4,R[h++]=m&255),v===1&&(m=e[w.charCodeAt(_)]<<10|e[w.charCodeAt(_+1)]<<4|e[w.charCodeAt(_+2)]>>2,R[h++]=m>>8&255,R[h++]=m&255),R}function d(w){return s[w>>18&63]+s[w>>12&63]+s[w>>6&63]+s[w&63]}function g(w,m,S){for(var I,v=[],R=m;R<S;R+=3)I=(w[R]<<16&16711680)+(w[R+1]<<8&65280)+(w[R+2]&255),v.push(d(I));return v.join("")}function y(w){for(var m,S=w.length,I=S%3,v=[],R=16383,h=0,u=S-I;h<u;h+=R)v.push(g(w,h,h+R>u?u:h+R));return I===1?(m=w[S-1],v.push(s[m>>2]+s[m<<4&63]+"==")):I===2&&(m=(w[S-2]<<8)+w[S-1],v.push(s[m>>10]+s[m>>4&63]+s[m<<2&63]+"=")),v.join("")}return Ot}var ar={};var ri;function Ca(){return ri||(ri=1,ar.read=function(s,e,t,r,o){var i,a,n=o*8-r-1,p=(1<<n)-1,l=p>>1,d=-7,g=t?o-1:0,y=t?-1:1,w=s[e+g];for(g+=y,i=w&(1<<-d)-1,w>>=-d,d+=n;d>0;i=i*256+s[e+g],g+=y,d-=8);for(a=i&(1<<-d)-1,i>>=-d,d+=r;d>0;a=a*256+s[e+g],g+=y,d-=8);if(i===0)i=1-l;else{if(i===p)return a?NaN:(w?-1:1)*(1/0);a=a+Math.pow(2,r),i=i-l}return(w?-1:1)*a*Math.pow(2,i-r)},ar.write=function(s,e,t,r,o,i){var a,n,p,l=i*8-o-1,d=(1<<l)-1,g=d>>1,y=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=r?0:i-1,m=r?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(n=isNaN(e)?1:0,a=d):(a=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-a))<1&&(a--,p*=2),a+g>=1?e+=y/p:e+=y*Math.pow(2,1-g),e*p>=2&&(a++,p/=2),a+g>=d?(n=0,a=d):a+g>=1?(n=(e*p-1)*Math.pow(2,o),a=a+g):(n=e*Math.pow(2,g-1)*Math.pow(2,o),a=0));o>=8;s[t+w]=n&255,w+=m,n/=256,o-=8);for(a=a<<o|n,l+=o;l>0;s[t+w]=a&255,w+=m,a/=256,l-=8);s[t+w-m]|=S*128}),ar}var ni;function tt(){return ni||(ni=1,(function(s){const e=Oa(),t=Ca(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.Buffer=n,s.SlowBuffer=R,s.INSPECT_MAX_BYTES=50;const o=2147483647;s.kMaxLength=o,n.TYPED_ARRAY_SUPPORT=i(),!n.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const N=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(N,c),N.foo()===42}catch{return!1}}Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}});function a(N){if(N>o)throw new RangeError('The value "'+N+'" is invalid for option "size"');const c=new Uint8Array(N);return Object.setPrototypeOf(c,n.prototype),c}function n(N,c,f){if(typeof N=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(N)}return p(N,c,f)}n.poolSize=8192;function p(N,c,f){if(typeof N=="string")return y(N,c);if(ArrayBuffer.isView(N))return m(N);if(N==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N);if(oe(N,ArrayBuffer)||N&&oe(N.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(oe(N,SharedArrayBuffer)||N&&oe(N.buffer,SharedArrayBuffer)))return S(N,c,f);if(typeof N=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const C=N.valueOf&&N.valueOf();if(C!=null&&C!==N)return n.from(C,c,f);const Z=I(N);if(Z)return Z;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof N[Symbol.toPrimitive]=="function")return n.from(N[Symbol.toPrimitive]("string"),c,f);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N)}n.from=function(N,c,f){return p(N,c,f)},Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array);function l(N){if(typeof N!="number")throw new TypeError('"size" argument must be of type number');if(N<0)throw new RangeError('The value "'+N+'" is invalid for option "size"')}function d(N,c,f){return l(N),N<=0?a(N):c!==void 0?typeof f=="string"?a(N).fill(c,f):a(N).fill(c):a(N)}n.alloc=function(N,c,f){return d(N,c,f)};function g(N){return l(N),a(N<0?0:v(N)|0)}n.allocUnsafe=function(N){return g(N)},n.allocUnsafeSlow=function(N){return g(N)};function y(N,c){if((typeof c!="string"||c==="")&&(c="utf8"),!n.isEncoding(c))throw new TypeError("Unknown encoding: "+c);const f=h(N,c)|0;let C=a(f);const Z=C.write(N,c);return Z!==f&&(C=C.slice(0,Z)),C}function w(N){const c=N.length<0?0:v(N.length)|0,f=a(c);for(let C=0;C<c;C+=1)f[C]=N[C]&255;return f}function m(N){if(oe(N,Uint8Array)){const c=new Uint8Array(N);return S(c.buffer,c.byteOffset,c.byteLength)}return w(N)}function S(N,c,f){if(c<0||N.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(N.byteLength<c+(f||0))throw new RangeError('"length" is outside of buffer bounds');let C;return c===void 0&&f===void 0?C=new Uint8Array(N):f===void 0?C=new Uint8Array(N,c):C=new Uint8Array(N,c,f),Object.setPrototypeOf(C,n.prototype),C}function I(N){if(n.isBuffer(N)){const c=v(N.length)|0,f=a(c);return f.length===0||N.copy(f,0,0,c),f}if(N.length!==void 0)return typeof N.length!="number"||Ee(N.length)?a(0):w(N);if(N.type==="Buffer"&&Array.isArray(N.data))return w(N.data)}function v(N){if(N>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return N|0}function R(N){return+N!=N&&(N=0),n.alloc(+N)}n.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==n.prototype},n.compare=function(c,f){if(oe(c,Uint8Array)&&(c=n.from(c,c.offset,c.byteLength)),oe(f,Uint8Array)&&(f=n.from(f,f.offset,f.byteLength)),!n.isBuffer(c)||!n.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===f)return 0;let C=c.length,Z=f.length;for(let ae=0,ce=Math.min(C,Z);ae<ce;++ae)if(c[ae]!==f[ae]){C=c[ae],Z=f[ae];break}return C<Z?-1:Z<C?1:0},n.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(c,f){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return n.alloc(0);let C;if(f===void 0)for(f=0,C=0;C<c.length;++C)f+=c[C].length;const Z=n.allocUnsafe(f);let ae=0;for(C=0;C<c.length;++C){let ce=c[C];if(oe(ce,Uint8Array))ae+ce.length>Z.length?(n.isBuffer(ce)||(ce=n.from(ce)),ce.copy(Z,ae)):Uint8Array.prototype.set.call(Z,ce,ae);else if(n.isBuffer(ce))ce.copy(Z,ae);else throw new TypeError('"list" argument must be an Array of Buffers');ae+=ce.length}return Z};function h(N,c){if(n.isBuffer(N))return N.length;if(ArrayBuffer.isView(N)||oe(N,ArrayBuffer))return N.byteLength;if(typeof N!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof N);const f=N.length,C=arguments.length>2&&arguments[2]===!0;if(!C&&f===0)return 0;let Z=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":return he(N).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f*2;case"hex":return f>>>1;case"base64":return ue(N).length;default:if(Z)return C?-1:he(N).length;c=(""+c).toLowerCase(),Z=!0}}n.byteLength=h;function u(N,c,f){let C=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((f===void 0||f>this.length)&&(f=this.length),f<=0)||(f>>>=0,c>>>=0,f<=c))return"";for(N||(N="utf8");;)switch(N){case"hex":return Y(this,c,f);case"utf8":case"utf-8":return F(this,c,f);case"ascii":return z(this,c,f);case"latin1":case"binary":return M(this,c,f);case"base64":return D(this,c,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,c,f);default:if(C)throw new TypeError("Unknown encoding: "+N);N=(N+"").toLowerCase(),C=!0}}n.prototype._isBuffer=!0;function _(N,c,f){const C=N[c];N[c]=N[f],N[f]=C}n.prototype.swap16=function(){const c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<c;f+=2)_(this,f,f+1);return this},n.prototype.swap32=function(){const c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<c;f+=4)_(this,f,f+3),_(this,f+1,f+2);return this},n.prototype.swap64=function(){const c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<c;f+=8)_(this,f,f+7),_(this,f+1,f+6),_(this,f+2,f+5),_(this,f+3,f+4);return this},n.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?F(this,0,c):u.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(c){if(!n.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:n.compare(this,c)===0},n.prototype.inspect=function(){let c="";const f=s.INSPECT_MAX_BYTES;return c=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(c+=" ... "),"<Buffer "+c+">"},r&&(n.prototype[r]=n.prototype.inspect),n.prototype.compare=function(c,f,C,Z,ae){if(oe(c,Uint8Array)&&(c=n.from(c,c.offset,c.byteLength)),!n.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(f===void 0&&(f=0),C===void 0&&(C=c?c.length:0),Z===void 0&&(Z=0),ae===void 0&&(ae=this.length),f<0||C>c.length||Z<0||ae>this.length)throw new RangeError("out of range index");if(Z>=ae&&f>=C)return 0;if(Z>=ae)return-1;if(f>=C)return 1;if(f>>>=0,C>>>=0,Z>>>=0,ae>>>=0,this===c)return 0;let ce=ae-Z,xe=C-f;const De=Math.min(ce,xe),Re=this.slice(Z,ae),Te=c.slice(f,C);for(let Ie=0;Ie<De;++Ie)if(Re[Ie]!==Te[Ie]){ce=Re[Ie],xe=Te[Ie];break}return ce<xe?-1:xe<ce?1:0};function T(N,c,f,C,Z){if(N.length===0)return-1;if(typeof f=="string"?(C=f,f=0):f>2147483647?f=2147483647:f<-2147483648&&(f=-2147483648),f=+f,Ee(f)&&(f=Z?0:N.length-1),f<0&&(f=N.length+f),f>=N.length){if(Z)return-1;f=N.length-1}else if(f<0)if(Z)f=0;else return-1;if(typeof c=="string"&&(c=n.from(c,C)),n.isBuffer(c))return c.length===0?-1:B(N,c,f,C,Z);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?Z?Uint8Array.prototype.indexOf.call(N,c,f):Uint8Array.prototype.lastIndexOf.call(N,c,f):B(N,[c],f,C,Z);throw new TypeError("val must be string, number or Buffer")}function B(N,c,f,C,Z){let ae=1,ce=N.length,xe=c.length;if(C!==void 0&&(C=String(C).toLowerCase(),C==="ucs2"||C==="ucs-2"||C==="utf16le"||C==="utf-16le")){if(N.length<2||c.length<2)return-1;ae=2,ce/=2,xe/=2,f/=2}function De(Te,Ie){return ae===1?Te[Ie]:Te.readUInt16BE(Ie*ae)}let Re;if(Z){let Te=-1;for(Re=f;Re<ce;Re++)if(De(N,Re)===De(c,Te===-1?0:Re-Te)){if(Te===-1&&(Te=Re),Re-Te+1===xe)return Te*ae}else Te!==-1&&(Re-=Re-Te),Te=-1}else for(f+xe>ce&&(f=ce-xe),Re=f;Re>=0;Re--){let Te=!0;for(let Ie=0;Ie<xe;Ie++)if(De(N,Re+Ie)!==De(c,Ie)){Te=!1;break}if(Te)return Re}return-1}n.prototype.includes=function(c,f,C){return this.indexOf(c,f,C)!==-1},n.prototype.indexOf=function(c,f,C){return T(this,c,f,C,!0)},n.prototype.lastIndexOf=function(c,f,C){return T(this,c,f,C,!1)};function E(N,c,f,C){f=Number(f)||0;const Z=N.length-f;C?(C=Number(C),C>Z&&(C=Z)):C=Z;const ae=c.length;C>ae/2&&(C=ae/2);let ce;for(ce=0;ce<C;++ce){const xe=parseInt(c.substr(ce*2,2),16);if(Ee(xe))return ce;N[f+ce]=xe}return ce}function P(N,c,f,C){return _e(he(c,N.length-f),N,f,C)}function x(N,c,f,C){return _e(ge(c),N,f,C)}function j(N,c,f,C){return _e(ue(c),N,f,C)}function q(N,c,f,C){return _e(ee(c,N.length-f),N,f,C)}n.prototype.write=function(c,f,C,Z){if(f===void 0)Z="utf8",C=this.length,f=0;else if(C===void 0&&typeof f=="string")Z=f,C=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(C)?(C=C>>>0,Z===void 0&&(Z="utf8")):(Z=C,C=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ae=this.length-f;if((C===void 0||C>ae)&&(C=ae),c.length>0&&(C<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");Z||(Z="utf8");let ce=!1;for(;;)switch(Z){case"hex":return E(this,c,f,C);case"utf8":case"utf-8":return P(this,c,f,C);case"ascii":case"latin1":case"binary":return x(this,c,f,C);case"base64":return j(this,c,f,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,c,f,C);default:if(ce)throw new TypeError("Unknown encoding: "+Z);Z=(""+Z).toLowerCase(),ce=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(N,c,f){return c===0&&f===N.length?e.fromByteArray(N):e.fromByteArray(N.slice(c,f))}function F(N,c,f){f=Math.min(N.length,f);const C=[];let Z=c;for(;Z<f;){const ae=N[Z];let ce=null,xe=ae>239?4:ae>223?3:ae>191?2:1;if(Z+xe<=f){let De,Re,Te,Ie;switch(xe){case 1:ae<128&&(ce=ae);break;case 2:De=N[Z+1],(De&192)===128&&(Ie=(ae&31)<<6|De&63,Ie>127&&(ce=Ie));break;case 3:De=N[Z+1],Re=N[Z+2],(De&192)===128&&(Re&192)===128&&(Ie=(ae&15)<<12|(De&63)<<6|Re&63,Ie>2047&&(Ie<55296||Ie>57343)&&(ce=Ie));break;case 4:De=N[Z+1],Re=N[Z+2],Te=N[Z+3],(De&192)===128&&(Re&192)===128&&(Te&192)===128&&(Ie=(ae&15)<<18|(De&63)<<12|(Re&63)<<6|Te&63,Ie>65535&&Ie<1114112&&(ce=Ie))}}ce===null?(ce=65533,xe=1):ce>65535&&(ce-=65536,C.push(ce>>>10&1023|55296),ce=56320|ce&1023),C.push(ce),Z+=xe}return A(C)}const X=4096;function A(N){const c=N.length;if(c<=X)return String.fromCharCode.apply(String,N);let f="",C=0;for(;C<c;)f+=String.fromCharCode.apply(String,N.slice(C,C+=X));return f}function z(N,c,f){let C="";f=Math.min(N.length,f);for(let Z=c;Z<f;++Z)C+=String.fromCharCode(N[Z]&127);return C}function M(N,c,f){let C="";f=Math.min(N.length,f);for(let Z=c;Z<f;++Z)C+=String.fromCharCode(N[Z]);return C}function Y(N,c,f){const C=N.length;(!c||c<0)&&(c=0),(!f||f<0||f>C)&&(f=C);let Z="";for(let ae=c;ae<f;++ae)Z+=Pe[N[ae]];return Z}function b(N,c,f){const C=N.slice(c,f);let Z="";for(let ae=0;ae<C.length-1;ae+=2)Z+=String.fromCharCode(C[ae]+C[ae+1]*256);return Z}n.prototype.slice=function(c,f){const C=this.length;c=~~c,f=f===void 0?C:~~f,c<0?(c+=C,c<0&&(c=0)):c>C&&(c=C),f<0?(f+=C,f<0&&(f=0)):f>C&&(f=C),f<c&&(f=c);const Z=this.subarray(c,f);return Object.setPrototypeOf(Z,n.prototype),Z};function H(N,c,f){if(N%1!==0||N<0)throw new RangeError("offset is not uint");if(N+c>f)throw new RangeError("Trying to access beyond buffer length")}n.prototype.readUintLE=n.prototype.readUIntLE=function(c,f,C){c=c>>>0,f=f>>>0,C||H(c,f,this.length);let Z=this[c],ae=1,ce=0;for(;++ce<f&&(ae*=256);)Z+=this[c+ce]*ae;return Z},n.prototype.readUintBE=n.prototype.readUIntBE=function(c,f,C){c=c>>>0,f=f>>>0,C||H(c,f,this.length);let Z=this[c+--f],ae=1;for(;f>0&&(ae*=256);)Z+=this[c+--f]*ae;return Z},n.prototype.readUint8=n.prototype.readUInt8=function(c,f){return c=c>>>0,f||H(c,1,this.length),this[c]},n.prototype.readUint16LE=n.prototype.readUInt16LE=function(c,f){return c=c>>>0,f||H(c,2,this.length),this[c]|this[c+1]<<8},n.prototype.readUint16BE=n.prototype.readUInt16BE=function(c,f){return c=c>>>0,f||H(c,2,this.length),this[c]<<8|this[c+1]},n.prototype.readUint32LE=n.prototype.readUInt32LE=function(c,f){return c=c>>>0,f||H(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},n.prototype.readUint32BE=n.prototype.readUInt32BE=function(c,f){return c=c>>>0,f||H(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},n.prototype.readBigUInt64LE=ve(function(c){c=c>>>0,O(c,"offset");const f=this[c],C=this[c+7];(f===void 0||C===void 0)&&G(c,this.length-8);const Z=f+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,ae=this[++c]+this[++c]*2**8+this[++c]*2**16+C*2**24;return BigInt(Z)+(BigInt(ae)<<BigInt(32))}),n.prototype.readBigUInt64BE=ve(function(c){c=c>>>0,O(c,"offset");const f=this[c],C=this[c+7];(f===void 0||C===void 0)&&G(c,this.length-8);const Z=f*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],ae=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+C;return(BigInt(Z)<<BigInt(32))+BigInt(ae)}),n.prototype.readIntLE=function(c,f,C){c=c>>>0,f=f>>>0,C||H(c,f,this.length);let Z=this[c],ae=1,ce=0;for(;++ce<f&&(ae*=256);)Z+=this[c+ce]*ae;return ae*=128,Z>=ae&&(Z-=Math.pow(2,8*f)),Z},n.prototype.readIntBE=function(c,f,C){c=c>>>0,f=f>>>0,C||H(c,f,this.length);let Z=f,ae=1,ce=this[c+--Z];for(;Z>0&&(ae*=256);)ce+=this[c+--Z]*ae;return ae*=128,ce>=ae&&(ce-=Math.pow(2,8*f)),ce},n.prototype.readInt8=function(c,f){return c=c>>>0,f||H(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},n.prototype.readInt16LE=function(c,f){c=c>>>0,f||H(c,2,this.length);const C=this[c]|this[c+1]<<8;return C&32768?C|4294901760:C},n.prototype.readInt16BE=function(c,f){c=c>>>0,f||H(c,2,this.length);const C=this[c+1]|this[c]<<8;return C&32768?C|4294901760:C},n.prototype.readInt32LE=function(c,f){return c=c>>>0,f||H(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},n.prototype.readInt32BE=function(c,f){return c=c>>>0,f||H(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},n.prototype.readBigInt64LE=ve(function(c){c=c>>>0,O(c,"offset");const f=this[c],C=this[c+7];(f===void 0||C===void 0)&&G(c,this.length-8);const Z=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(C<<24);return(BigInt(Z)<<BigInt(32))+BigInt(f+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),n.prototype.readBigInt64BE=ve(function(c){c=c>>>0,O(c,"offset");const f=this[c],C=this[c+7];(f===void 0||C===void 0)&&G(c,this.length-8);const Z=(f<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(Z)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+C)}),n.prototype.readFloatLE=function(c,f){return c=c>>>0,f||H(c,4,this.length),t.read(this,c,!0,23,4)},n.prototype.readFloatBE=function(c,f){return c=c>>>0,f||H(c,4,this.length),t.read(this,c,!1,23,4)},n.prototype.readDoubleLE=function(c,f){return c=c>>>0,f||H(c,8,this.length),t.read(this,c,!0,52,8)},n.prototype.readDoubleBE=function(c,f){return c=c>>>0,f||H(c,8,this.length),t.read(this,c,!1,52,8)};function K(N,c,f,C,Z,ae){if(!n.isBuffer(N))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>Z||c<ae)throw new RangeError('"value" argument is out of bounds');if(f+C>N.length)throw new RangeError("Index out of range")}n.prototype.writeUintLE=n.prototype.writeUIntLE=function(c,f,C,Z){if(c=+c,f=f>>>0,C=C>>>0,!Z){const xe=Math.pow(2,8*C)-1;K(this,c,f,C,xe,0)}let ae=1,ce=0;for(this[f]=c&255;++ce<C&&(ae*=256);)this[f+ce]=c/ae&255;return f+C},n.prototype.writeUintBE=n.prototype.writeUIntBE=function(c,f,C,Z){if(c=+c,f=f>>>0,C=C>>>0,!Z){const xe=Math.pow(2,8*C)-1;K(this,c,f,C,xe,0)}let ae=C-1,ce=1;for(this[f+ae]=c&255;--ae>=0&&(ce*=256);)this[f+ae]=c/ce&255;return f+C},n.prototype.writeUint8=n.prototype.writeUInt8=function(c,f,C){return c=+c,f=f>>>0,C||K(this,c,f,1,255,0),this[f]=c&255,f+1},n.prototype.writeUint16LE=n.prototype.writeUInt16LE=function(c,f,C){return c=+c,f=f>>>0,C||K(this,c,f,2,65535,0),this[f]=c&255,this[f+1]=c>>>8,f+2},n.prototype.writeUint16BE=n.prototype.writeUInt16BE=function(c,f,C){return c=+c,f=f>>>0,C||K(this,c,f,2,65535,0),this[f]=c>>>8,this[f+1]=c&255,f+2},n.prototype.writeUint32LE=n.prototype.writeUInt32LE=function(c,f,C){return c=+c,f=f>>>0,C||K(this,c,f,4,4294967295,0),this[f+3]=c>>>24,this[f+2]=c>>>16,this[f+1]=c>>>8,this[f]=c&255,f+4},n.prototype.writeUint32BE=n.prototype.writeUInt32BE=function(c,f,C){return c=+c,f=f>>>0,C||K(this,c,f,4,4294967295,0),this[f]=c>>>24,this[f+1]=c>>>16,this[f+2]=c>>>8,this[f+3]=c&255,f+4};function W(N,c,f,C,Z){pe(c,C,Z,N,f,7);let ae=Number(c&BigInt(4294967295));N[f++]=ae,ae=ae>>8,N[f++]=ae,ae=ae>>8,N[f++]=ae,ae=ae>>8,N[f++]=ae;let ce=Number(c>>BigInt(32)&BigInt(4294967295));return N[f++]=ce,ce=ce>>8,N[f++]=ce,ce=ce>>8,N[f++]=ce,ce=ce>>8,N[f++]=ce,f}function le(N,c,f,C,Z){pe(c,C,Z,N,f,7);let ae=Number(c&BigInt(4294967295));N[f+7]=ae,ae=ae>>8,N[f+6]=ae,ae=ae>>8,N[f+5]=ae,ae=ae>>8,N[f+4]=ae;let ce=Number(c>>BigInt(32)&BigInt(4294967295));return N[f+3]=ce,ce=ce>>8,N[f+2]=ce,ce=ce>>8,N[f+1]=ce,ce=ce>>8,N[f]=ce,f+8}n.prototype.writeBigUInt64LE=ve(function(c,f=0){return W(this,c,f,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeBigUInt64BE=ve(function(c,f=0){return le(this,c,f,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeIntLE=function(c,f,C,Z){if(c=+c,f=f>>>0,!Z){const De=Math.pow(2,8*C-1);K(this,c,f,C,De-1,-De)}let ae=0,ce=1,xe=0;for(this[f]=c&255;++ae<C&&(ce*=256);)c<0&&xe===0&&this[f+ae-1]!==0&&(xe=1),this[f+ae]=(c/ce>>0)-xe&255;return f+C},n.prototype.writeIntBE=function(c,f,C,Z){if(c=+c,f=f>>>0,!Z){const De=Math.pow(2,8*C-1);K(this,c,f,C,De-1,-De)}let ae=C-1,ce=1,xe=0;for(this[f+ae]=c&255;--ae>=0&&(ce*=256);)c<0&&xe===0&&this[f+ae+1]!==0&&(xe=1),this[f+ae]=(c/ce>>0)-xe&255;return f+C},n.prototype.writeInt8=function(c,f,C){return c=+c,f=f>>>0,C||K(this,c,f,1,127,-128),c<0&&(c=255+c+1),this[f]=c&255,f+1},n.prototype.writeInt16LE=function(c,f,C){return c=+c,f=f>>>0,C||K(this,c,f,2,32767,-32768),this[f]=c&255,this[f+1]=c>>>8,f+2},n.prototype.writeInt16BE=function(c,f,C){return c=+c,f=f>>>0,C||K(this,c,f,2,32767,-32768),this[f]=c>>>8,this[f+1]=c&255,f+2},n.prototype.writeInt32LE=function(c,f,C){return c=+c,f=f>>>0,C||K(this,c,f,4,2147483647,-2147483648),this[f]=c&255,this[f+1]=c>>>8,this[f+2]=c>>>16,this[f+3]=c>>>24,f+4},n.prototype.writeInt32BE=function(c,f,C){return c=+c,f=f>>>0,C||K(this,c,f,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[f]=c>>>24,this[f+1]=c>>>16,this[f+2]=c>>>8,this[f+3]=c&255,f+4},n.prototype.writeBigInt64LE=ve(function(c,f=0){return W(this,c,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeBigInt64BE=ve(function(c,f=0){return le(this,c,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function V(N,c,f,C,Z,ae){if(f+C>N.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("Index out of range")}function J(N,c,f,C,Z){return c=+c,f=f>>>0,Z||V(N,c,f,4),t.write(N,c,f,C,23,4),f+4}n.prototype.writeFloatLE=function(c,f,C){return J(this,c,f,!0,C)},n.prototype.writeFloatBE=function(c,f,C){return J(this,c,f,!1,C)};function Q(N,c,f,C,Z){return c=+c,f=f>>>0,Z||V(N,c,f,8),t.write(N,c,f,C,52,8),f+8}n.prototype.writeDoubleLE=function(c,f,C){return Q(this,c,f,!0,C)},n.prototype.writeDoubleBE=function(c,f,C){return Q(this,c,f,!1,C)},n.prototype.copy=function(c,f,C,Z){if(!n.isBuffer(c))throw new TypeError("argument should be a Buffer");if(C||(C=0),!Z&&Z!==0&&(Z=this.length),f>=c.length&&(f=c.length),f||(f=0),Z>0&&Z<C&&(Z=C),Z===C||c.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(C<0||C>=this.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("sourceEnd out of bounds");Z>this.length&&(Z=this.length),c.length-f<Z-C&&(Z=c.length-f+C);const ae=Z-C;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,C,Z):Uint8Array.prototype.set.call(c,this.subarray(C,Z),f),ae},n.prototype.fill=function(c,f,C,Z){if(typeof c=="string"){if(typeof f=="string"?(Z=f,f=0,C=this.length):typeof C=="string"&&(Z=C,C=this.length),Z!==void 0&&typeof Z!="string")throw new TypeError("encoding must be a string");if(typeof Z=="string"&&!n.isEncoding(Z))throw new TypeError("Unknown encoding: "+Z);if(c.length===1){const ce=c.charCodeAt(0);(Z==="utf8"&&ce<128||Z==="latin1")&&(c=ce)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(f<0||this.length<f||this.length<C)throw new RangeError("Out of range index");if(C<=f)return this;f=f>>>0,C=C===void 0?this.length:C>>>0,c||(c=0);let ae;if(typeof c=="number")for(ae=f;ae<C;++ae)this[ae]=c;else{const ce=n.isBuffer(c)?c:n.from(c,Z),xe=ce.length;if(xe===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(ae=0;ae<C-f;++ae)this[ae+f]=ce[ae%xe]}return this};const U={};function te(N,c,f){U[N]=class extends f{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${N}]`,this.stack,delete this.name}get code(){return N}set code(Z){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Z,writable:!0})}toString(){return`${this.name} [${N}]: ${this.message}`}}}te("ERR_BUFFER_OUT_OF_BOUNDS",function(N){return N?`${N} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),te("ERR_INVALID_ARG_TYPE",function(N,c){return`The "${N}" argument must be of type number. Received type ${typeof c}`},TypeError),te("ERR_OUT_OF_RANGE",function(N,c,f){let C=`The value of "${N}" is out of range.`,Z=f;return Number.isInteger(f)&&Math.abs(f)>2**32?Z=re(String(f)):typeof f=="bigint"&&(Z=String(f),(f>BigInt(2)**BigInt(32)||f<-(BigInt(2)**BigInt(32)))&&(Z=re(Z)),Z+="n"),C+=` It must be ${c}. Received ${Z}`,C},RangeError);function re(N){let c="",f=N.length;const C=N[0]==="-"?1:0;for(;f>=C+4;f-=3)c=`_${N.slice(f-3,f)}${c}`;return`${N.slice(0,f)}${c}`}function fe(N,c,f){O(c,"offset"),(N[c]===void 0||N[c+f]===void 0)&&G(c,N.length-(f+1))}function pe(N,c,f,C,Z,ae){if(N>f||N<c){const ce=typeof c=="bigint"?"n":"";let xe;throw c===0||c===BigInt(0)?xe=`>= 0${ce} and < 2${ce} ** ${(ae+1)*8}${ce}`:xe=`>= -(2${ce} ** ${(ae+1)*8-1}${ce}) and < 2 ** ${(ae+1)*8-1}${ce}`,new U.ERR_OUT_OF_RANGE("value",xe,N)}fe(C,Z,ae)}function O(N,c){if(typeof N!="number")throw new U.ERR_INVALID_ARG_TYPE(c,"number",N)}function G(N,c,f){throw Math.floor(N)!==N?(O(N,f),new U.ERR_OUT_OF_RANGE("offset","an integer",N)):c<0?new U.ERR_BUFFER_OUT_OF_BOUNDS:new U.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${c}`,N)}const se=/[^+/0-9A-Za-z-_]/g;function de(N){if(N=N.split("=")[0],N=N.trim().replace(se,""),N.length<2)return"";for(;N.length%4!==0;)N=N+"=";return N}function he(N,c){c=c||1/0;let f;const C=N.length;let Z=null;const ae=[];for(let ce=0;ce<C;++ce){if(f=N.charCodeAt(ce),f>55295&&f<57344){if(!Z){if(f>56319){(c-=3)>-1&&ae.push(239,191,189);continue}else if(ce+1===C){(c-=3)>-1&&ae.push(239,191,189);continue}Z=f;continue}if(f<56320){(c-=3)>-1&&ae.push(239,191,189),Z=f;continue}f=(Z-55296<<10|f-56320)+65536}else Z&&(c-=3)>-1&&ae.push(239,191,189);if(Z=null,f<128){if((c-=1)<0)break;ae.push(f)}else if(f<2048){if((c-=2)<0)break;ae.push(f>>6|192,f&63|128)}else if(f<65536){if((c-=3)<0)break;ae.push(f>>12|224,f>>6&63|128,f&63|128)}else if(f<1114112){if((c-=4)<0)break;ae.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw new Error("Invalid code point")}return ae}function ge(N){const c=[];for(let f=0;f<N.length;++f)c.push(N.charCodeAt(f)&255);return c}function ee(N,c){let f,C,Z;const ae=[];for(let ce=0;ce<N.length&&!((c-=2)<0);++ce)f=N.charCodeAt(ce),C=f>>8,Z=f%256,ae.push(Z),ae.push(C);return ae}function ue(N){return e.toByteArray(de(N))}function _e(N,c,f,C){let Z;for(Z=0;Z<C&&!(Z+f>=c.length||Z>=N.length);++Z)c[Z+f]=N[Z];return Z}function oe(N,c){return N instanceof c||N!=null&&N.constructor!=null&&N.constructor.name!=null&&N.constructor.name===c.name}function Ee(N){return N!==N}const Pe=(function(){const N="0123456789abcdef",c=new Array(256);for(let f=0;f<16;++f){const C=f*16;for(let Z=0;Z<16;++Z)c[C+Z]=N[f]+N[Z]}return c})();function ve(N){return typeof BigInt>"u"?Me:N}function Me(){throw new Error("BigInt not supported")}})(Er)),Er}var Pa=tt();const Ct="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Pt="http://www.w3.org/2001/XMLSchema#",or="http://www.w3.org/2000/10/swap/",Be={xsd:{decimal:`${Pt}decimal`,boolean:`${Pt}boolean`,double:`${Pt}double`,integer:`${Pt}integer`,string:`${Pt}string`},rdf:{type:`${Ct}type`,nil:`${Ct}nil`,first:`${Ct}first`,rest:`${Ct}rest`,langString:`${Ct}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${or}reify#forSome`,forAll:`${or}reify#forAll`},log:{implies:`${or}log#implies`,isImpliedBy:`${or}log#isImpliedBy`}},{xsd:lr}=Be,ka=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,ii={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},Ma=/[\x00-\x20<>\\"\{\}\|\^\`]/,Ba={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},$a=/$0^/;class qa{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const t in this)!(t in Ba)&&this[t]instanceof RegExp&&(this[t]=$a)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let r=this._input,o=r.length;for(;;){let n,p;for(;n=this._newline.exec(r);)this.comments&&(p=this._comment.exec(n[0]))&&i("comment",p[1],"",this._line,n[0].length),r=r.substr(n[0].length,r.length),o=r.length,this._line++;if(!n&&(n=this._whitespace.exec(r))&&(r=r.substr(n[0].length,r.length)),this._endOfFile.test(r))return t&&(this.comments&&(p=this._comment.exec(r))&&i("comment",p[1],"",this._line,r.length),r=null,i("eof","","",this._line,0)),this._input=r;const l=this._line,d=r[0];let g="",y="",w="",m=null,S=0,I=!1;switch(d){case"^":if(r.length<3)break;if(r[1]==="^"){if(this._previousMarker="^^",r=r.substr(2),r[0]!=="<"){I=!0;break}}else{this._n3Mode&&(S=1,g="^");break}case"<":if(m=this._unescapedIri.exec(r))g="IRI",y=m[1];else if(m=this._iri.exec(r)){if(y=this._unescape(m[1]),y===null||Ma.test(y))return a(this);g="IRI"}else r.length>1&&r[1]==="<"?(g="<<",S=2):this._n3Mode&&r.length>1&&r[1]==="="&&(S=2,this._isImpliedBy?(g="abbreviation",y="<"):(g="inverse",y=">"));break;case">":r.length>1&&r[1]===">"&&(g=">>",S=2);break;case"_":((m=this._blank.exec(r))||t&&(m=this._blank.exec(`${r} `)))&&(g="blank",w="_",y=m[1]);break;case'"':if(m=this._simpleQuotedString.exec(r))y=m[1];else if({value:y,matchLength:S}=this._parseLiteral(r),y===null)return a(this);(m!==null||S!==0)&&(g="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(m=this._simpleApostropheString.exec(r))y=m[1];else if({value:y,matchLength:S}=this._parseLiteral(r),y===null)return a(this);(m!==null||S!==0)&&(g="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(m=this._variable.exec(r))&&(g="var",y=m[0]);break;case"@":this._previousMarker==="literal"&&(m=this._langcode.exec(r))?(g="langcode",y=m[1]):(m=this._keyword.exec(r))&&(g=m[0]);break;case".":if(r.length===1?t:r[1]<"0"||r[1]>"9"){g=".",S=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(m=this._number.exec(r)||t&&(m=this._number.exec(`${r} `)))&&(g="literal",y=m[0],w=typeof m[1]=="string"?lr.double:typeof m[2]=="string"?lr.decimal:lr.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(m=this._sparqlKeyword.exec(r))?g=m[0].toUpperCase():I=!0;break;case"f":case"t":(m=this._boolean.exec(r))?(g="literal",y=m[0],w=lr.boolean):I=!0;break;case"a":(m=this._shortPredicates.exec(r))?(g="abbreviation",y="a"):I=!0;break;case"=":this._n3Mode&&r.length>1&&(g="abbreviation",r[1]!==">"?(S=1,y="="):(S=2,y=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(S=1,g=d);break;case"{":!this._lineMode&&r.length>=2&&(r[1]==="|"?(g="{|",S=2):(g=d,S=1));break;case"|":r.length>=2&&r[1]==="}"&&(g="|}",S=2);break;default:I=!0}if(I&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(m=this._prefix.exec(r))?(g="prefix",y=m[1]||""):((m=this._prefixed.exec(r))||t&&(m=this._prefixed.exec(`${r} `)))&&(g="prefixed",w=m[1]||"",y=this._unescape(m[2]))),this._previousMarker==="^^")switch(g){case"prefixed":g="type";break;case"IRI":g="typeIRI";break;default:g=""}if(!g)return t||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?a(this):this._input=r;const v=S||m[0].length,R=i(g,y,w,l,v);this.previousToken=R,this._previousMarker=g,r=r.substr(v,r.length)}function i(n,p,l,d,g){const y=r?o-r.length:o,w=y+g,m={type:n,value:p,prefix:l,line:d,start:y,end:w};return e(null,m),m}function a(n){e(n._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(e){let t=!1;const r=e.replace(ka,(o,i,a,n)=>{if(typeof i=="string")return String.fromCharCode(Number.parseInt(i,16));if(typeof a=="string"){let p=Number.parseInt(a,16);return p<=65535?String.fromCharCode(Number.parseInt(a,16)):String.fromCharCode(55296+((p-=65536)>>10),56320+(p&1023))}return n in ii?ii[n]:(t=!0,"")});return t?null:r}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],r=t.length;let o=Math.max(this._literalClosingPos,r);for(;(o=e.indexOf(t,o))>0;){let i=0;for(;e[o-i-1]==="\\";)i++;if(i%2===0){const a=e.substring(r,o),n=a.split(/\r\n|\r|\n/).length-1,p=o+r;if(r===1&&n!==0||r===3&&this._lineMode)break;return this._line+=n,{value:this._unescape(a),matchLength:p}}o++}this._literalClosingPos=e.length-r+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,t){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof t=="function")queueMicrotask(()=>this._tokenizeToEnd(t,!0));else{const r=[];let o;if(this._tokenizeToEnd((i,a)=>i?o=i:r.push(a),!0),o)throw o;return r}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",r=>{this._input!==null&&r.length!==0&&(this._pendingBuffer&&(r=Pa.Buffer.concat([this._pendingBuffer,r]),this._pendingBuffer=null),r[r.length-1]&128?this._pendingBuffer=r:(typeof this._input>"u"?this._input=this._readStartingBom(typeof r=="string"?r:r.toString()):this._input+=r,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}}const{rdf:Ua,xsd:yt}=Be;let Tt,Ha=0;const Nt={namedNode:Ks,blankNode:Ys,variable:ea,literal:Zs,defaultGraph:Ja,quad:Mn,triple:Mn,fromTerm:Xt,fromQuad:ta};class ze{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof ze?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}let Qs=class extends ze{get termType(){return"NamedNode"}},gr=class zs extends ze{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&e[t++]==="@"?e.substr(t).toLowerCase():""}get datatype(){return new Qs(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,r=t<e.length?e[t]:"";return r==="^"?e.substr(t+2):r!=="@"?yt.string:Ua.langString}equals(e){return e instanceof zs?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}},Ga=class extends ze{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},Wa=class extends ze{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},Va=class extends ze{constructor(){return super(""),Tt||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};Tt=new Va;function zt(s,e,t){if(e=e||Nt,!s)return e.defaultGraph();switch(s[0]){case"?":return e.variable(s.substr(1));case"_":return e.blankNode(s.substr(2));case'"':if(e===Nt)return new gr(s);if(s[s.length-1]==='"')return e.literal(s.substr(1,s.length-2));const r=s.lastIndexOf('"',s.length-1);return e.literal(s.substr(1,r-1),s[r+1]==="@"?s.substr(r+2):e.namedNode(s.substr(r+3)));case"[":s=JSON.parse(s);break;default:if(!t||!Array.isArray(s))return e.namedNode(s)}return e.quad(zt(s[0],e,!0),zt(s[1],e,!0),zt(s[2],e,!0),s[3]&&zt(s[3],e,!0))}function Rt(s,e){if(typeof s=="string")return s;if(s instanceof ze&&s.termType!=="Quad")return s.id;if(!s)return Tt.id;switch(s.termType){case"NamedNode":return s.value;case"BlankNode":return`_:${s.value}`;case"Variable":return`?${s.value}`;case"DefaultGraph":return"";case"Literal":return`"${s.value}"${s.language?`@${s.language}`:s.datatype&&s.datatype.value!==yt.string?`^^${s.datatype.value}`:""}`;case"Quad":const t=[Rt(s.subject,!0),Rt(s.predicate,!0),Rt(s.object,!0)];return s.graph&&s.graph.termType!=="DefaultGraph"&&t.push(Rt(s.graph,!0)),e?t:JSON.stringify(t);default:throw new Error(`Unexpected termType: ${s.termType}`)}}let Xs=class extends ze{constructor(e,t,r,o){super(""),this._subject=e,this._predicate=t,this._object=r,this._graph=o||Tt}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}};function Ks(s){return new Qs(s)}function Ys(s){return new Ga(s||`n3-${Ha++}`)}function Zs(s,e){if(typeof e=="string")return new gr(`"${s}"@${e.toLowerCase()}`);let t=e?e.value:"";return t===""&&(typeof s=="boolean"?t=yt.boolean:typeof s=="number"&&(Number.isFinite(s)?t=Number.isInteger(s)?yt.integer:yt.double:(t=yt.double,Number.isNaN(s)||(s=s>0?"INF":"-INF")))),t===""||t===yt.string?new gr(`"${s}"`):new gr(`"${s}"^^${t}`)}function ea(s){return new Wa(s)}function Ja(){return Tt}function Mn(s,e,t,r){return new Xs(s,e,t,r)}function Xt(s){if(s instanceof ze)return s;switch(s.termType){case"NamedNode":return Ks(s.value);case"BlankNode":return Ys(s.value);case"Variable":return ea(s.value);case"DefaultGraph":return Tt;case"Literal":return Zs(s.value,s.language||s.datatype);case"Quad":return ta(s);default:throw new Error(`Unexpected termType: ${s.termType}`)}}function ta(s){if(s instanceof Xs)return s;if(s.termType!=="Quad")throw new Error(`Unexpected termType: ${s.termType}`);return Mn(Xt(s.subject),Xt(s.predicate),Xt(s.object),Xt(s.graph))}let si=0;class Qa{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&ra(this,e.factory);const t=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(t),o=/trig/.test(t),i=/triple/.test(t),a=/quad/.test(t),n=this._n3Mode=/n3/.test(t),p=i||a;(this._supportsNamedGraphs=!(r||n))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||o||i||n),this._isImpliedBy=e.isImpliedBy,this._supportsRDFStar=t===""||/star|\*$/.test(t),p&&(this._resolveRelativeIRI=l=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new qa({lineMode:p,n3:n,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){si=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,t,r,o,i){const a=this._n3Mode;this._contextStack.push({type:e,subject:r,predicate:o,object:i,graph:t,inverse:a?this._inversePredicate:!1,blankPrefix:a?this._prefixes._:"",quantified:a?this._quantified:null}),a&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){const r=this._contextStack.pop();if(!r||r.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=r.subject,this._predicate=r.predicate,this._object=r.object,this._graph=r.graph,this._n3Mode&&(this._inversePredicate=r.inverse,this._prefixes._=r.blankPrefix,this._quantified=r.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let r;switch(e.type){case"IRI":case"typeIRI":const o=this._resolveIRI(e.value);if(o===null)return this._error("Invalid IRI",e);r=this._factory.namedNode(o);break;case"type":case"prefixed":const i=this._prefixes[e.prefix];if(i===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);r=this._factory.namedNode(i+e.value);break;case"blank":r=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":r=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${t}`,e):(this._subject=null,t==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,r=null,o=this._readListItem;const i=this._subject,a=this._contextStack,n=a[a.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this._subject=t=this._factory.blankNode()),o=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),a.length!==0&&a[a.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(o=this._readPredicate,this._subject===this.RDF_NIL)return o}else if(o=this._getContextEndReader(),this._object===this.RDF_NIL)return o;r=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,o=this._readListItemDataTypeOrLang):(t=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),o=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((t=this._readEntity(e))===void 0)return}if(r===null&&(this._subject=r=this._factory.blankNode()),i===null?n.predicate===null?n.subject=r:n.object=r:this._emit(i,this.RDF_REST,r,this._graph),t!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,r,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,t,this._graph)}return o}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const r=this._readEntity(e);if(r===void 0)return;t=this._factory.literal(this._literalValue,r),e=null;break;case"langcode":t=this._factory.literal(this._literalValue,e.value),e=null;break}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const r=this._completeLiteral(e);if(r)return this._object=r.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),r.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,r=this._graph;const o=this._subject,i=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,i&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const a=this._predicate,n=this._object;this._subject=this._factory.quad(o,a,n,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(r=this._readEntity(e))!==void 0){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(o!==null){const a=this._predicate,n=this._object;i?this._emit(n,a,o,r):this._emit(o,a,n,r)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t=e.type==="IRI"&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if((t=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,r=t.length&&t[t.length-1];if(r&&r.type==="item"){const o=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,o,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,r;const o=this._factory.blankNode();if((r=this._readEntity(e))!==void 0)return this._predicate===null?(t=this._subject,this._subject=o):(t=this._object,this._object=o),this._emit(t,r,o,this._graph),this._readPath}_readBackwardPath(e){const t=this._factory.blankNode();let r,o;if((r=this._readEntity(e))!==void 0)return this._predicate===null?(o=this._subject,this._subject=t):(o=this._object,this._object=t),this._emit(t,r,o,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const t=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,r,o){this._callback(null,this._factory.quad(e,t,r,o||this.DEFAULTGRAPH))}_error(e,t){const r=new Error(`${e} on line ${t.line}.`);r.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=ur}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let r="",o=-1,i=-1,a=0,n="/";for(;o<t;){switch(n){case":":if(i<0&&e[++o]==="/"&&e[++o]==="/")for(;(i=o+1)<t&&e[i]!=="/";)o=i;break;case"?":case"#":o=t;break;case"/":if(e[o+1]===".")switch(n=e[++o+1],n){case"/":r+=e.substring(a,o-1),a=o+1;break;case void 0:case"?":case"#":return r+e.substring(a,o)+e.substr(o+1);case".":if(n=e[++o+1],n===void 0||n==="/"||n==="?"||n==="#"){if(r+=e.substring(a,o-2),(a=r.lastIndexOf("/"))>=i&&(r=r.substr(0,a)),n!=="/")return`${r}/${e.substr(o+1)}`;a=o+1}}}n=e[++o]}return r+e.substring(a)}parse(e,t,r){let o,i,a;if(t&&(t.onQuad||t.onPrefix||t.onComment)?(o=t.onQuad,i=t.onPrefix,a=t.onComment):(o=t,i=r),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${si++}_`,this._prefixCallback=i||ur,this._inversePredicate=!1,this._quantified=Object.create(null),!o){const p=[];let l;if(this._callback=(d,g)=>{d?l=d:g&&p.push(g)},this._lexer.tokenize(e).every(d=>this._readCallback=this._readCallback(d)),l)throw l;return p}let n=(p,l)=>{p!==null?(this._callback(p),this._callback=ur):this._readCallback&&(this._readCallback=this._readCallback(l))};a&&(this._lexer.comments=!0,n=(p,l)=>{p!==null?(this._callback(p),this._callback=ur):this._readCallback&&(l.type==="comment"?a(l.value):this._readCallback=this._readCallback(l))}),this._callback=o,this._lexer.tokenize(e,n)}}function ur(){}function ra(s,e){s._factory=e,s.DEFAULTGRAPH=e.defaultGraph(),s.RDF_FIRST=e.namedNode(Be.rdf.first),s.RDF_REST=e.namedNode(Be.rdf.rest),s.RDF_NIL=e.namedNode(Be.rdf.nil),s.N3_FORALL=e.namedNode(Be.r.forAll),s.N3_FORSOME=e.namedNode(Be.r.forSome),s.ABBREVIATIONS={a:e.namedNode(Be.rdf.type),"=":e.namedNode(Be.owl.sameAs),">":e.namedNode(Be.log.implies),"<":e.namedNode(Be.log.isImpliedBy)},s.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}ra(Qa.prototype,Nt);function Bn(s){return!!s&&s.termType==="DefaultGraph"}function _r(s){return s.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const za=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,Xa=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,ai="./",Ka="../",Sr="?",oi="#";class Hn{constructor(e){this.base=e,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(e.length+1)}static supports(e){return!za.test(e)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!Hn.supports(this.base))return this._baseMatcher=/.^/;const e=/^[^:]*:\/*/.exec(this.base)[0],t=["^",_r(e)],r=[],o=[],i=/[^/?#]*([/?#])/y;let a,n=0,p=0,l=i.lastIndex=e.length;for(;!n&&!p&&(a=i.exec(this.base));)a[1]===oi?p=i.lastIndex-1:(t.push(_r(a[0]),"(?:"),r.push(")?"),a[1]!==Sr?o.push(l=i.lastIndex):(n=l=i.lastIndex,p=this.base.indexOf(oi,n),this._pathReplacements[n]=Sr));for(let d=0;d<o.length;d++)this._pathReplacements[o[d]]=Ka.repeat(o.length-d-1);return this._pathReplacements[o[o.length-1]]=ai,this._baseLength=p>0?p:this.base.length,t.push(_r(this.base.substring(l,this._baseLength)),n?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...t,...r].join(""))}toRelative(e){const t=this._getBaseMatcher().exec(e);if(!t)return e;const r=t[0].length;if(r===this._baseLength&&r===e.length)return"";const o=this._pathReplacements[r];if(o){const i=e.substring(r);return o!==Sr&&!Xa.test(i)?e:o===ai&&/^[^?#]/.test(i)?i:o+i}return e.substring(r-1)}}const kt=Nt.defaultGraph(),{rdf:Ya,xsd:It}=Be,li=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,ui=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,Za={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class Mt extends ze{equals(e){return e===this}}class na{constructor(e,t){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(t=e,e=null),t=t||{},this._lists=t.lists,e)this._outputStream=e,this._endStream=t.end===void 0?!0:!!t.end;else{let r="";this._outputStream={write(o,i,a){r+=o,a&&a()},end:o=>{o&&o(null,r)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(t.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=kt,this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes),t.baseIRI&&(this._baseIri=new Hn(t.baseIRI)))}get _inDefaultGraph(){return kt.equals(this._graph)}_write(e,t){this._outputStream.write(e,"utf8",t)}_writeQuad(e,t,r,o,i){try{o.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(kt.equals(o)?"":`${this._encodeIriOrBlank(o)} {
`)),this._graph=o,this._subject=null),e.equals(this._subject)?t.equals(this._predicate)?this._write(`, ${this._encodeObject(r)}`,i):this._write(`;
    ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(r)}`,i):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(r)}`,i)}catch(a){i&&i(a)}}_writeQuadLine(e,t,r,o,i){delete this._prefixMatch,this._write(this.quadToString(e,t,r,o),i)}quadToString(e,t,r,o){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(t)} ${this._encodeObject(r)}${o&&o.value?` ${this._encodeIriOrBlank(o)} .
`:` .
`}`}quadsToString(e){let t="";for(const r of e)t+=this.quadToString(r.subject,r.predicate,r.object,r.graph);return t}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let t=e.value;this._baseIri&&(t=this._baseIri.toRelative(t)),li.test(t)&&(t=t.replace(ui,ci));const r=this._prefixRegex.exec(t);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:t:`<${t}>`}_encodeLiteral(e){let t=e.value;if(li.test(t)&&(t=t.replace(ui,ci)),e.language)return`"${t}"@${e.language}`;if(this._lineMode){if(e.datatype.value===It.string)return`"${t}"`}else switch(e.datatype.value){case It.string:return`"${t}"`;case It.boolean:if(t==="true"||t==="false")return t;break;case It.integer:if(/^[+-]?\d+$/.test(t))return t;break;case It.decimal:if(/^[+-]?\d*\.\d+$/.test(t))return t;break;case It.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(t))return t;break}return`"${t}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===Ya.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:t,object:r,graph:o}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(t)} ${this._encodeObject(r)}${Bn(o)?"":` ${this._encodeIriOrBlank(o)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,t,r,o,i){r===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,t):typeof o=="function"?this._writeQuad(e,t,r,kt,o):this._writeQuad(e,t,r,o||kt,i)}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}addPrefix(e,t,r){const o={};o[e]=t,this.addPrefixes(o,r)}addPrefixes(e,t){if(!this._prefixIRIs)return t&&t();let r=!1;for(let o in e){let i=e[o];typeof i!="string"&&(i=i.value),r=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[i]=o+=":",this._write(`@prefix ${o} <${i}>.
`)}if(r){let o="",i="";for(const a in this._prefixIRIs)o+=o?`|${a}`:a,i+=(i?"|":"")+this._prefixIRIs[a];o=_r(o),this._prefixRegex=new RegExp(`^(?:${i})[^/]*$|^(${o})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(r?`
`:"",t)}blank(e,t){let r=e,o,i;switch(e===void 0?r=[]:e.termType?r=[{predicate:e,object:t}]:"length"in e||(r=[e]),i=r.length){case 0:return new Mt("[]");case 1:if(o=r[0],!(o.object instanceof Mt))return new Mt(`[ ${this._encodePredicate(o.predicate)} ${this._encodeObject(o.object)} ]`);default:let a="[";for(let n=0;n<i;n++)o=r[n],o.predicate.equals(e)?a+=`, ${this._encodeObject(o.object)}`:(a+=`${(n?`;
  `:`
  `)+this._encodePredicate(o.predicate)} ${this._encodeObject(o.object)}`,e=o.predicate);return new Mt(`${a}
]`)}}list(e){const t=e&&e.length||0,r=new Array(t);for(let o=0;o<t;o++)r[o]=this._encodeObject(e[o]);return new Mt(`(${r.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let t=e&&((r,o)=>{t=null,e(r,o)});if(this._endStream)try{return this._outputStream.end(t)}catch{}t&&t()}}function ci(s){let e=Za[s];return e===void 0&&(s.length===1?(e=s.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((s.charCodeAt(0)-55296)*1024+s.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}var Ir={exports:{}},Rr={exports:{}},Nr,di;function Fe(){if(di)return Nr;di=1;class s extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let r="";for(let o=0;o<t.length;o++)r+=`    ${t[o].stack}
`;super(r),this.name="AggregateError",this.errors=t}}return Nr={AggregateError:s,ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,r){return e.slice(t,r)},Error,FunctionPrototypeCall(e,t,...r){return e.call(t,...r)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,r){return Object.defineProperty(e,t,r)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,r){return e.then(t,r)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,r){return e.slice(t,r)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,r){return e.set(t,r)},Boolean,Uint8Array},Nr}var Tr={exports:{}},Ar,fi;function ia(){return fi||(fi=1,Ar={format(s,...e){return s.replace(/%([sdifj])/g,function(...[t,r]){const o=e.shift();return r==="f"?o.toFixed(6):r==="j"?JSON.stringify(o):r==="s"&&typeof o=="object"?`${o.constructor!==Object?o.constructor.name:""} {}`.trim():o.toString()})},inspect(s){switch(typeof s){case"string":if(s.includes("'"))if(s.includes('"')){if(!s.includes("`")&&!s.includes("${"))return`\`${s}\``}else return`"${s}"`;return`'${s}'`;case"number":return isNaN(s)?"NaN":Object.is(s,-0)?String(s):s;case"bigint":return`${String(s)}n`;case"boolean":case"undefined":return String(s);case"object":return"{}"}}}),Ar}var Dr,hi;function Ue(){if(hi)return Dr;hi=1;const{format:s,inspect:e}=ia(),{AggregateError:t}=Fe(),r=globalThis.AggregateError||t,o=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],a=/^([A-Z][a-z0-9]*)+$/,n="__node_internal_",p={};function l(I,v){if(!I)throw new p.ERR_INTERNAL_ASSERTION(v)}function d(I){let v="",R=I.length;const h=I[0]==="-"?1:0;for(;R>=h+4;R-=3)v=`_${I.slice(R-3,R)}${v}`;return`${I.slice(0,R)}${v}`}function g(I,v,R){if(typeof v=="function")return l(v.length<=R.length,`Code: ${I}; The provided arguments length (${R.length}) does not match the required ones (${v.length}).`),v(...R);const h=(v.match(/%[dfijoOs]/g)||[]).length;return l(h===R.length,`Code: ${I}; The provided arguments length (${R.length}) does not match the required ones (${h}).`),R.length===0?v:s(v,...R)}function y(I,v,R){R||(R=Error);class h extends R{constructor(..._){super(g(I,v,_))}toString(){return`${this.name} [${I}]: ${this.message}`}}Object.defineProperties(h.prototype,{name:{value:R.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${I}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),h.prototype.code=I,h.prototype[o]=!0,p[I]=h}function w(I){const v=n+I.name;return Object.defineProperty(I,"name",{value:v}),I}function m(I,v){if(I&&v&&I!==v){if(Array.isArray(v.errors))return v.errors.push(I),v;const R=new r([v,I],v.message);return R.code=v.code,R}return I||v}class S extends Error{constructor(v="The operation was aborted",R=void 0){if(R!==void 0&&typeof R!="object")throw new p.ERR_INVALID_ARG_TYPE("options","Object",R);super(v,R),this.code="ABORT_ERR",this.name="AbortError"}}return y("ERR_ASSERTION","%s",Error),y("ERR_INVALID_ARG_TYPE",(I,v,R)=>{l(typeof I=="string","'name' must be a string"),Array.isArray(v)||(v=[v]);let h="The ";I.endsWith(" argument")?h+=`${I} `:h+=`"${I}" ${I.includes(".")?"property":"argument"} `,h+="must be ";const u=[],_=[],T=[];for(const E of v)l(typeof E=="string","All expected entries have to be of type string"),i.includes(E)?u.push(E.toLowerCase()):a.test(E)?_.push(E):(l(E!=="object",'The value "object" should be written as "Object"'),T.push(E));if(_.length>0){const E=u.indexOf("object");E!==-1&&(u.splice(u,E,1),_.push("Object"))}if(u.length>0){switch(u.length){case 1:h+=`of type ${u[0]}`;break;case 2:h+=`one of type ${u[0]} or ${u[1]}`;break;default:{const E=u.pop();h+=`one of type ${u.join(", ")}, or ${E}`}}(_.length>0||T.length>0)&&(h+=" or ")}if(_.length>0){switch(_.length){case 1:h+=`an instance of ${_[0]}`;break;case 2:h+=`an instance of ${_[0]} or ${_[1]}`;break;default:{const E=_.pop();h+=`an instance of ${_.join(", ")}, or ${E}`}}T.length>0&&(h+=" or ")}switch(T.length){case 0:break;case 1:T[0].toLowerCase()!==T[0]&&(h+="an "),h+=`${T[0]}`;break;case 2:h+=`one of ${T[0]} or ${T[1]}`;break;default:{const E=T.pop();h+=`one of ${T.join(", ")}, or ${E}`}}if(R==null)h+=`. Received ${R}`;else if(typeof R=="function"&&R.name)h+=`. Received function ${R.name}`;else if(typeof R=="object"){var B;if((B=R.constructor)!==null&&B!==void 0&&B.name)h+=`. Received an instance of ${R.constructor.name}`;else{const E=e(R,{depth:-1});h+=`. Received ${E}`}}else{let E=e(R,{colors:!1});E.length>25&&(E=`${E.slice(0,25)}...`),h+=`. Received type ${typeof R} (${E})`}return h},TypeError),y("ERR_INVALID_ARG_VALUE",(I,v,R="is invalid")=>{let h=e(v);return h.length>128&&(h=h.slice(0,128)+"..."),`The ${I.includes(".")?"property":"argument"} '${I}' ${R}. Received ${h}`},TypeError),y("ERR_INVALID_RETURN_VALUE",(I,v,R)=>{var h;const u=R!=null&&(h=R.constructor)!==null&&h!==void 0&&h.name?`instance of ${R.constructor.name}`:`type ${typeof R}`;return`Expected ${I} to be returned from the "${v}" function but got ${u}.`},TypeError),y("ERR_MISSING_ARGS",(...I)=>{l(I.length>0,"At least one arg needs to be specified");let v;const R=I.length;switch(I=(Array.isArray(I)?I:[I]).map(h=>`"${h}"`).join(" or "),R){case 1:v+=`The ${I[0]} argument`;break;case 2:v+=`The ${I[0]} and ${I[1]} arguments`;break;default:{const h=I.pop();v+=`The ${I.join(", ")}, and ${h} arguments`}break}return`${v} must be specified`},TypeError),y("ERR_OUT_OF_RANGE",(I,v,R)=>{l(v,'Missing "range" argument');let h;if(Number.isInteger(R)&&Math.abs(R)>2**32)h=d(String(R));else if(typeof R=="bigint"){h=String(R);const u=BigInt(2)**BigInt(32);(R>u||R<-u)&&(h=d(h)),h+="n"}else h=e(R);return`The value of "${I}" is out of range. It must be ${v}. Received ${h}`},RangeError),y("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),y("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),y("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),y("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),y("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),y("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),y("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),y("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),y("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),y("ERR_STREAM_WRITE_AFTER_END","write after end",Error),y("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Dr={AbortError:S,aggregateTwoErrors:w(m),hideStackFrames:w,codes:p},Dr}var Bt={exports:{}},pi;function Zt(){if(pi)return Bt.exports;pi=1;const{AbortController:s,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Bt.exports=s,Bt.exports.AbortSignal=e,Bt.exports.default=s,Bt.exports}var cr={exports:{}},gi;function yr(){if(gi)return cr.exports;gi=1;var s=typeof Reflect=="object"?Reflect:null,e=s&&typeof s.apply=="function"?s.apply:function(_,T,B){return Function.prototype.apply.call(_,T,B)},t;s&&typeof s.ownKeys=="function"?t=s.ownKeys:Object.getOwnPropertySymbols?t=function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:t=function(_){return Object.getOwnPropertyNames(_)};function r(u){console&&console.warn&&console.warn(u)}var o=Number.isNaN||function(_){return _!==_};function i(){i.init.call(this)}cr.exports=i,cr.exports.once=v,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function n(u){if(typeof u!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof u)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(u){if(typeof u!="number"||u<0||o(u))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+u+".");a=u}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(_){if(typeof _!="number"||_<0||o(_))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_+".");return this._maxListeners=_,this};function p(u){return u._maxListeners===void 0?i.defaultMaxListeners:u._maxListeners}i.prototype.getMaxListeners=function(){return p(this)},i.prototype.emit=function(_){for(var T=[],B=1;B<arguments.length;B++)T.push(arguments[B]);var E=_==="error",P=this._events;if(P!==void 0)E=E&&P.error===void 0;else if(!E)return!1;if(E){var x;if(T.length>0&&(x=T[0]),x instanceof Error)throw x;var j=new Error("Unhandled error."+(x?" ("+x.message+")":""));throw j.context=x,j}var q=P[_];if(q===void 0)return!1;if(typeof q=="function")e(q,this,T);else for(var D=q.length,F=m(q,D),B=0;B<D;++B)e(F[B],this,T);return!0};function l(u,_,T,B){var E,P,x;if(n(T),P=u._events,P===void 0?(P=u._events=Object.create(null),u._eventsCount=0):(P.newListener!==void 0&&(u.emit("newListener",_,T.listener?T.listener:T),P=u._events),x=P[_]),x===void 0)x=P[_]=T,++u._eventsCount;else if(typeof x=="function"?x=P[_]=B?[T,x]:[x,T]:B?x.unshift(T):x.push(T),E=p(u),E>0&&x.length>E&&!x.warned){x.warned=!0;var j=new Error("Possible EventEmitter memory leak detected. "+x.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");j.name="MaxListenersExceededWarning",j.emitter=u,j.type=_,j.count=x.length,r(j)}return u}i.prototype.addListener=function(_,T){return l(this,_,T,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(_,T){return l(this,_,T,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(u,_,T){var B={fired:!1,wrapFn:void 0,target:u,type:_,listener:T},E=d.bind(B);return E.listener=T,B.wrapFn=E,E}i.prototype.once=function(_,T){return n(T),this.on(_,g(this,_,T)),this},i.prototype.prependOnceListener=function(_,T){return n(T),this.prependListener(_,g(this,_,T)),this},i.prototype.removeListener=function(_,T){var B,E,P,x,j;if(n(T),E=this._events,E===void 0)return this;if(B=E[_],B===void 0)return this;if(B===T||B.listener===T)--this._eventsCount===0?this._events=Object.create(null):(delete E[_],E.removeListener&&this.emit("removeListener",_,B.listener||T));else if(typeof B!="function"){for(P=-1,x=B.length-1;x>=0;x--)if(B[x]===T||B[x].listener===T){j=B[x].listener,P=x;break}if(P<0)return this;P===0?B.shift():S(B,P),B.length===1&&(E[_]=B[0]),E.removeListener!==void 0&&this.emit("removeListener",_,j||T)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(_){var T,B,E;if(B=this._events,B===void 0)return this;if(B.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):B[_]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete B[_]),this;if(arguments.length===0){var P=Object.keys(B),x;for(E=0;E<P.length;++E)x=P[E],x!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(T=B[_],typeof T=="function")this.removeListener(_,T);else if(T!==void 0)for(E=T.length-1;E>=0;E--)this.removeListener(_,T[E]);return this};function y(u,_,T){var B=u._events;if(B===void 0)return[];var E=B[_];return E===void 0?[]:typeof E=="function"?T?[E.listener||E]:[E]:T?I(E):m(E,E.length)}i.prototype.listeners=function(_){return y(this,_,!0)},i.prototype.rawListeners=function(_){return y(this,_,!1)},i.listenerCount=function(u,_){return typeof u.listenerCount=="function"?u.listenerCount(_):w.call(u,_)},i.prototype.listenerCount=w;function w(u){var _=this._events;if(_!==void 0){var T=_[u];if(typeof T=="function")return 1;if(T!==void 0)return T.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function m(u,_){for(var T=new Array(_),B=0;B<_;++B)T[B]=u[B];return T}function S(u,_){for(;_+1<u.length;_++)u[_]=u[_+1];u.pop()}function I(u){for(var _=new Array(u.length),T=0;T<_.length;++T)_[T]=u[T].listener||u[T];return _}function v(u,_){return new Promise(function(T,B){function E(x){u.removeListener(_,P),B(x)}function P(){typeof u.removeListener=="function"&&u.removeListener("error",E),T([].slice.call(arguments))}h(u,_,P,{once:!0}),_!=="error"&&R(u,E,{once:!0})})}function R(u,_,T){typeof u.on=="function"&&h(u,"error",_,T)}function h(u,_,T,B){if(typeof u.on=="function")B.once?u.once(_,T):u.on(_,T);else if(typeof u.addEventListener=="function")u.addEventListener(_,function E(P){B.once&&u.removeEventListener(_,E),T(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof u)}return cr.exports}var _i;function He(){return _i||(_i=1,(function(s){const e=tt(),{format:t,inspect:r}=ia(),{codes:{ERR_INVALID_ARG_TYPE:o}}=Ue(),{kResistStopPropagation:i,AggregateError:a,SymbolDispose:n}=Fe(),p=globalThis.AbortSignal||Zt().AbortSignal,l=globalThis.AbortController||Zt().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,g=globalThis.Blob||e.Blob,y=typeof g<"u"?function(I){return I instanceof g}:function(I){return!1},w=(S,I)=>{if(S!==void 0&&(S===null||typeof S!="object"||!("aborted"in S)))throw new o(I,"AbortSignal",S)},m=(S,I)=>{if(typeof S!="function")throw new o(I,"Function",S)};s.exports={AggregateError:a,kEmptyObject:Object.freeze({}),once(S){let I=!1;return function(...v){I||(I=!0,S.apply(this,v))}},createDeferredPromise:function(){let S,I;return{promise:new Promise((R,h)=>{S=R,I=h}),resolve:S,reject:I}},promisify(S){return new Promise((I,v)=>{S((R,...h)=>R?v(R):I(...h))})},debuglog(){return function(){}},format:t,inspect:r,types:{isAsyncFunction(S){return S instanceof d},isArrayBufferView(S){return ArrayBuffer.isView(S)}},isBlob:y,deprecate(S,I){return S},addAbortListener:yr().addAbortListener||function(I,v){if(I===void 0)throw new o("signal","AbortSignal",I);w(I,"signal"),m(v,"listener");let R;return I.aborted?queueMicrotask(()=>v()):(I.addEventListener("abort",v,{__proto__:null,once:!0,[i]:!0}),R=()=>{I.removeEventListener("abort",v)}),{__proto__:null,[n](){var h;(h=R)===null||h===void 0||h()}}},AbortSignalAny:p.any||function(I){if(I.length===1)return I[0];const v=new l,R=()=>v.abort();return I.forEach(h=>{w(h,"signals"),h.addEventListener("abort",R,{once:!0})}),v.signal.addEventListener("abort",()=>{I.forEach(h=>h.removeEventListener("abort",R))},{once:!0}),v.signal}},s.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(Tr)),Tr.exports}var dr={},Fr,yi;function tr(){if(yi)return Fr;yi=1;const{ArrayIsArray:s,ArrayPrototypeIncludes:e,ArrayPrototypeJoin:t,ArrayPrototypeMap:r,NumberIsInteger:o,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:a,NumberMIN_SAFE_INTEGER:n,NumberParseInt:p,ObjectPrototypeHasOwnProperty:l,RegExpPrototypeExec:d,String:g,StringPrototypeToUpperCase:y,StringPrototypeTrim:w}=Fe(),{hideStackFrames:m,codes:{ERR_SOCKET_BAD_PORT:S,ERR_INVALID_ARG_TYPE:I,ERR_INVALID_ARG_VALUE:v,ERR_OUT_OF_RANGE:R,ERR_UNKNOWN_SIGNAL:h}}=Ue(),{normalizeEncoding:u}=He(),{isAsyncFunction:_,isArrayBufferView:T}=He().types,B={};function E(ee){return ee===(ee|0)}function P(ee){return ee===ee>>>0}const x=/^[0-7]+$/,j="must be a 32-bit unsigned integer or an octal string";function q(ee,ue,_e){if(typeof ee>"u"&&(ee=_e),typeof ee=="string"){if(d(x,ee)===null)throw new v(ue,ee,j);ee=p(ee,8)}return X(ee,ue),ee}const D=m((ee,ue,_e=n,oe=a)=>{if(typeof ee!="number")throw new I(ue,"number",ee);if(!o(ee))throw new R(ue,"an integer",ee);if(ee<_e||ee>oe)throw new R(ue,`>= ${_e} && <= ${oe}`,ee)}),F=m((ee,ue,_e=-2147483648,oe=2147483647)=>{if(typeof ee!="number")throw new I(ue,"number",ee);if(!o(ee))throw new R(ue,"an integer",ee);if(ee<_e||ee>oe)throw new R(ue,`>= ${_e} && <= ${oe}`,ee)}),X=m((ee,ue,_e=!1)=>{if(typeof ee!="number")throw new I(ue,"number",ee);if(!o(ee))throw new R(ue,"an integer",ee);const oe=_e?1:0,Ee=4294967295;if(ee<oe||ee>Ee)throw new R(ue,`>= ${oe} && <= ${Ee}`,ee)});function A(ee,ue){if(typeof ee!="string")throw new I(ue,"string",ee)}function z(ee,ue,_e=void 0,oe){if(typeof ee!="number")throw new I(ue,"number",ee);if(_e!=null&&ee<_e||oe!=null&&ee>oe||(_e!=null||oe!=null)&&i(ee))throw new R(ue,`${_e!=null?`>= ${_e}`:""}${_e!=null&&oe!=null?" && ":""}${oe!=null?`<= ${oe}`:""}`,ee)}const M=m((ee,ue,_e)=>{if(!e(_e,ee)){const Ee="must be one of: "+t(r(_e,Pe=>typeof Pe=="string"?`'${Pe}'`:g(Pe)),", ");throw new v(ue,ee,Ee)}});function Y(ee,ue){if(typeof ee!="boolean")throw new I(ue,"boolean",ee)}function b(ee,ue,_e){return ee==null||!l(ee,ue)?_e:ee[ue]}const H=m((ee,ue,_e=null)=>{const oe=b(_e,"allowArray",!1),Ee=b(_e,"allowFunction",!1);if(!b(_e,"nullable",!1)&&ee===null||!oe&&s(ee)||typeof ee!="object"&&(!Ee||typeof ee!="function"))throw new I(ue,"Object",ee)}),K=m((ee,ue)=>{if(ee!=null&&typeof ee!="object"&&typeof ee!="function")throw new I(ue,"a dictionary",ee)}),W=m((ee,ue,_e=0)=>{if(!s(ee))throw new I(ue,"Array",ee);if(ee.length<_e){const oe=`must be longer than ${_e}`;throw new v(ue,ee,oe)}});function le(ee,ue){W(ee,ue);for(let _e=0;_e<ee.length;_e++)A(ee[_e],`${ue}[${_e}]`)}function V(ee,ue){W(ee,ue);for(let _e=0;_e<ee.length;_e++)Y(ee[_e],`${ue}[${_e}]`)}function J(ee,ue){W(ee,ue);for(let _e=0;_e<ee.length;_e++){const oe=ee[_e],Ee=`${ue}[${_e}]`;if(oe==null)throw new I(Ee,"AbortSignal",oe);fe(oe,Ee)}}function Q(ee,ue="signal"){if(A(ee,ue),B[ee]===void 0)throw B[y(ee)]!==void 0?new h(ee+" (signals must use all capital letters)"):new h(ee)}const U=m((ee,ue="buffer")=>{if(!T(ee))throw new I(ue,["Buffer","TypedArray","DataView"],ee)});function te(ee,ue){const _e=u(ue),oe=ee.length;if(_e==="hex"&&oe%2!==0)throw new v("encoding",ue,`is invalid for data of length ${oe}`)}function re(ee,ue="Port",_e=!0){if(typeof ee!="number"&&typeof ee!="string"||typeof ee=="string"&&w(ee).length===0||+ee!==+ee>>>0||ee>65535||ee===0&&!_e)throw new S(ue,ee,_e);return ee|0}const fe=m((ee,ue)=>{if(ee!==void 0&&(ee===null||typeof ee!="object"||!("aborted"in ee)))throw new I(ue,"AbortSignal",ee)}),pe=m((ee,ue)=>{if(typeof ee!="function")throw new I(ue,"Function",ee)}),O=m((ee,ue)=>{if(typeof ee!="function"||_(ee))throw new I(ue,"Function",ee)}),G=m((ee,ue)=>{if(ee!==void 0)throw new I(ue,"undefined",ee)});function se(ee,ue,_e){if(!e(_e,ee))throw new I(ue,`('${t(_e,"|")}')`,ee)}const de=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function he(ee,ue){if(typeof ee>"u"||!d(de,ee))throw new v(ue,ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ge(ee){if(typeof ee=="string")return he(ee,"hints"),ee;if(s(ee)){const ue=ee.length;let _e="";if(ue===0)return _e;for(let oe=0;oe<ue;oe++){const Ee=ee[oe];he(Ee,"hints"),_e+=Ee,oe!==ue-1&&(_e+=", ")}return _e}throw new v("hints",ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return Fr={isInt32:E,isUint32:P,parseFileMode:q,validateArray:W,validateStringArray:le,validateBooleanArray:V,validateAbortSignalArray:J,validateBoolean:Y,validateBuffer:U,validateDictionary:K,validateEncoding:te,validateFunction:pe,validateInt32:F,validateInteger:D,validateNumber:z,validateObject:H,validateOneOf:M,validatePlainFunction:O,validatePort:re,validateSignalName:Q,validateString:A,validateUint32:X,validateUndefined:G,validateUnion:se,validateAbortSignal:fe,validateLinkHeaderValue:ge},Fr}var fr={exports:{}},jr={exports:{}},bi;function mt(){if(bi)return jr.exports;bi=1;var s=jr.exports={},e,t;function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=r}catch{e=r}try{typeof clearTimeout=="function"?t=clearTimeout:t=o}catch{t=o}})();function i(S){if(e===setTimeout)return setTimeout(S,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(S,0);try{return e(S,0)}catch{try{return e.call(null,S,0)}catch{return e.call(this,S,0)}}}function a(S){if(t===clearTimeout)return clearTimeout(S);if((t===o||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(S);try{return t(S)}catch{try{return t.call(null,S)}catch{return t.call(this,S)}}}var n=[],p=!1,l,d=-1;function g(){!p||!l||(p=!1,l.length?n=l.concat(n):d=-1,n.length&&y())}function y(){if(!p){var S=i(g);p=!0;for(var I=n.length;I;){for(l=n,n=[];++d<I;)l&&l[d].run();d=-1,I=n.length}l=null,p=!1,a(S)}}s.nextTick=function(S){var I=new Array(arguments.length-1);if(arguments.length>1)for(var v=1;v<arguments.length;v++)I[v-1]=arguments[v];n.push(new w(S,I)),n.length===1&&!p&&i(y)};function w(S,I){this.fun=S,this.array=I}w.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={};function m(){}return s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(S){return[]},s.binding=function(S){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(S){throw new Error("process.chdir is not supported")},s.umask=function(){return 0},jr.exports}var Lr,mi;function rt(){if(mi)return Lr;mi=1;const{SymbolAsyncIterator:s,SymbolIterator:e,SymbolFor:t}=Fe(),r=t("nodejs.stream.destroyed"),o=t("nodejs.stream.errored"),i=t("nodejs.stream.readable"),a=t("nodejs.stream.writable"),n=t("nodejs.stream.disturbed"),p=t("nodejs.webstream.isClosedPromise"),l=t("nodejs.webstream.controllerErrorFunction");function d(b,H=!1){var K;return!!(b&&typeof b.pipe=="function"&&typeof b.on=="function"&&(!H||typeof b.pause=="function"&&typeof b.resume=="function")&&(!b._writableState||((K=b._readableState)===null||K===void 0?void 0:K.readable)!==!1)&&(!b._writableState||b._readableState))}function g(b){var H;return!!(b&&typeof b.write=="function"&&typeof b.on=="function"&&(!b._readableState||((H=b._writableState)===null||H===void 0?void 0:H.writable)!==!1))}function y(b){return!!(b&&typeof b.pipe=="function"&&b._readableState&&typeof b.on=="function"&&typeof b.write=="function")}function w(b){return b&&(b._readableState||b._writableState||typeof b.write=="function"&&typeof b.on=="function"||typeof b.pipe=="function"&&typeof b.on=="function")}function m(b){return!!(b&&!w(b)&&typeof b.pipeThrough=="function"&&typeof b.getReader=="function"&&typeof b.cancel=="function")}function S(b){return!!(b&&!w(b)&&typeof b.getWriter=="function"&&typeof b.abort=="function")}function I(b){return!!(b&&!w(b)&&typeof b.readable=="object"&&typeof b.writable=="object")}function v(b){return m(b)||S(b)||I(b)}function R(b,H){return b==null?!1:H===!0?typeof b[s]=="function":H===!1?typeof b[e]=="function":typeof b[s]=="function"||typeof b[e]=="function"}function h(b){if(!w(b))return null;const H=b._writableState,K=b._readableState,W=H||K;return!!(b.destroyed||b[r]||W!=null&&W.destroyed)}function u(b){if(!g(b))return null;if(b.writableEnded===!0)return!0;const H=b._writableState;return H!=null&&H.errored?!1:typeof H?.ended!="boolean"?null:H.ended}function _(b,H){if(!g(b))return null;if(b.writableFinished===!0)return!0;const K=b._writableState;return K!=null&&K.errored?!1:typeof K?.finished!="boolean"?null:!!(K.finished||H===!1&&K.ended===!0&&K.length===0)}function T(b){if(!d(b))return null;if(b.readableEnded===!0)return!0;const H=b._readableState;return!H||H.errored?!1:typeof H?.ended!="boolean"?null:H.ended}function B(b,H){if(!d(b))return null;const K=b._readableState;return K!=null&&K.errored?!1:typeof K?.endEmitted!="boolean"?null:!!(K.endEmitted||H===!1&&K.ended===!0&&K.length===0)}function E(b){return b&&b[i]!=null?b[i]:typeof b?.readable!="boolean"?null:h(b)?!1:d(b)&&b.readable&&!B(b)}function P(b){return b&&b[a]!=null?b[a]:typeof b?.writable!="boolean"?null:h(b)?!1:g(b)&&b.writable&&!u(b)}function x(b,H){return w(b)?h(b)?!0:!(H?.readable!==!1&&E(b)||H?.writable!==!1&&P(b)):null}function j(b){var H,K;return w(b)?b.writableErrored?b.writableErrored:(H=(K=b._writableState)===null||K===void 0?void 0:K.errored)!==null&&H!==void 0?H:null:null}function q(b){var H,K;return w(b)?b.readableErrored?b.readableErrored:(H=(K=b._readableState)===null||K===void 0?void 0:K.errored)!==null&&H!==void 0?H:null:null}function D(b){if(!w(b))return null;if(typeof b.closed=="boolean")return b.closed;const H=b._writableState,K=b._readableState;return typeof H?.closed=="boolean"||typeof K?.closed=="boolean"?H?.closed||K?.closed:typeof b._closed=="boolean"&&F(b)?b._closed:null}function F(b){return typeof b._closed=="boolean"&&typeof b._defaultKeepAlive=="boolean"&&typeof b._removedConnection=="boolean"&&typeof b._removedContLen=="boolean"}function X(b){return typeof b._sent100=="boolean"&&F(b)}function A(b){var H;return typeof b._consuming=="boolean"&&typeof b._dumped=="boolean"&&((H=b.req)===null||H===void 0?void 0:H.upgradeOrConnect)===void 0}function z(b){if(!w(b))return null;const H=b._writableState,K=b._readableState,W=H||K;return!W&&X(b)||!!(W&&W.autoDestroy&&W.emitClose&&W.closed===!1)}function M(b){var H;return!!(b&&((H=b[n])!==null&&H!==void 0?H:b.readableDidRead||b.readableAborted))}function Y(b){var H,K,W,le,V,J,Q,U,te,re;return!!(b&&((H=(K=(W=(le=(V=(J=b[o])!==null&&J!==void 0?J:b.readableErrored)!==null&&V!==void 0?V:b.writableErrored)!==null&&le!==void 0?le:(Q=b._readableState)===null||Q===void 0?void 0:Q.errorEmitted)!==null&&W!==void 0?W:(U=b._writableState)===null||U===void 0?void 0:U.errorEmitted)!==null&&K!==void 0?K:(te=b._readableState)===null||te===void 0?void 0:te.errored)!==null&&H!==void 0?H:!((re=b._writableState)===null||re===void 0)&&re.errored))}return Lr={isDestroyed:h,kIsDestroyed:r,isDisturbed:M,kIsDisturbed:n,isErrored:Y,kIsErrored:o,isReadable:E,kIsReadable:i,kIsClosedPromise:p,kControllerErrorFunction:l,kIsWritable:a,isClosed:D,isDuplexNodeStream:y,isFinished:x,isIterable:R,isReadableNodeStream:d,isReadableStream:m,isReadableEnded:T,isReadableFinished:B,isReadableErrored:q,isNodeStream:w,isWebStream:v,isWritable:P,isWritableNodeStream:g,isWritableStream:S,isWritableEnded:u,isWritableFinished:_,isWritableErrored:j,isServerRequest:A,isServerResponse:X,willEmitClose:z,isTransformStream:I},Lr}var wi;function lt(){if(wi)return fr.exports;wi=1;const s=mt(),{AbortError:e,codes:t}=Ue(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:o}=t,{kEmptyObject:i,once:a}=He(),{validateAbortSignal:n,validateFunction:p,validateObject:l,validateBoolean:d}=tr(),{Promise:g,PromisePrototypeThen:y,SymbolDispose:w}=Fe(),{isClosed:m,isReadable:S,isReadableNodeStream:I,isReadableStream:v,isReadableFinished:R,isReadableErrored:h,isWritable:u,isWritableNodeStream:_,isWritableStream:T,isWritableFinished:B,isWritableErrored:E,isNodeStream:P,willEmitClose:x,kIsClosedPromise:j}=rt();let q;function D(M){return M.setHeader&&typeof M.abort=="function"}const F=()=>{};function X(M,Y,b){var H,K;if(arguments.length===2?(b=Y,Y=i):Y==null?Y=i:l(Y,"options"),p(b,"callback"),n(Y.signal,"options.signal"),b=a(b),v(M)||T(M))return A(M,Y,b);if(!P(M))throw new r("stream",["ReadableStream","WritableStream","Stream"],M);const W=(H=Y.readable)!==null&&H!==void 0?H:I(M),le=(K=Y.writable)!==null&&K!==void 0?K:_(M),V=M._writableState,J=M._readableState,Q=()=>{M.writable||re()};let U=x(M)&&I(M)===W&&_(M)===le,te=B(M,!1);const re=()=>{te=!0,M.destroyed&&(U=!1),!(U&&(!M.readable||W))&&(!W||fe)&&b.call(M)};let fe=R(M,!1);const pe=()=>{fe=!0,M.destroyed&&(U=!1),!(U&&(!M.writable||le))&&(!le||te)&&b.call(M)},O=ee=>{b.call(M,ee)};let G=m(M);const se=()=>{G=!0;const ee=E(M)||h(M);if(ee&&typeof ee!="boolean")return b.call(M,ee);if(W&&!fe&&I(M,!0)&&!R(M,!1))return b.call(M,new o);if(le&&!te&&!B(M,!1))return b.call(M,new o);b.call(M)},de=()=>{G=!0;const ee=E(M)||h(M);if(ee&&typeof ee!="boolean")return b.call(M,ee);b.call(M)},he=()=>{M.req.on("finish",re)};D(M)?(M.on("complete",re),U||M.on("abort",se),M.req?he():M.on("request",he)):le&&!V&&(M.on("end",Q),M.on("close",Q)),!U&&typeof M.aborted=="boolean"&&M.on("aborted",se),M.on("end",pe),M.on("finish",re),Y.error!==!1&&M.on("error",O),M.on("close",se),G?s.nextTick(se):V!=null&&V.errorEmitted||J!=null&&J.errorEmitted?U||s.nextTick(de):(!W&&(!U||S(M))&&(te||u(M)===!1)||!le&&(!U||u(M))&&(fe||S(M)===!1)||J&&M.req&&M.aborted)&&s.nextTick(de);const ge=()=>{b=F,M.removeListener("aborted",se),M.removeListener("complete",re),M.removeListener("abort",se),M.removeListener("request",he),M.req&&M.req.removeListener("finish",re),M.removeListener("end",Q),M.removeListener("close",Q),M.removeListener("finish",re),M.removeListener("end",pe),M.removeListener("error",O),M.removeListener("close",se)};if(Y.signal&&!G){const ee=()=>{const ue=b;ge(),ue.call(M,new e(void 0,{cause:Y.signal.reason}))};if(Y.signal.aborted)s.nextTick(ee);else{q=q||He().addAbortListener;const ue=q(Y.signal,ee),_e=b;b=a((...oe)=>{ue[w](),_e.apply(M,oe)})}}return ge}function A(M,Y,b){let H=!1,K=F;if(Y.signal)if(K=()=>{H=!0,b.call(M,new e(void 0,{cause:Y.signal.reason}))},Y.signal.aborted)s.nextTick(K);else{q=q||He().addAbortListener;const le=q(Y.signal,K),V=b;b=a((...J)=>{le[w](),V.apply(M,J)})}const W=(...le)=>{H||s.nextTick(()=>b.apply(M,le))};return y(M[j].promise,W,W),F}function z(M,Y){var b;let H=!1;return Y===null&&(Y=i),(b=Y)!==null&&b!==void 0&&b.cleanup&&(d(Y.cleanup,"cleanup"),H=Y.cleanup),new g((K,W)=>{const le=X(M,Y,V=>{H&&le(),V?W(V):K()})})}return fr.exports=X,fr.exports.finished=z,fr.exports}var Or,xi;function At(){if(xi)return Or;xi=1;const s=mt(),{aggregateTwoErrors:e,codes:{ERR_MULTIPLE_CALLBACK:t},AbortError:r}=Ue(),{Symbol:o}=Fe(),{kIsDestroyed:i,isDestroyed:a,isFinished:n,isServerRequest:p}=rt(),l=o("kDestroy"),d=o("kConstruct");function g(x,j,q){x&&(x.stack,j&&!j.errored&&(j.errored=x),q&&!q.errored&&(q.errored=x))}function y(x,j){const q=this._readableState,D=this._writableState,F=D||q;return D!=null&&D.destroyed||q!=null&&q.destroyed?(typeof j=="function"&&j(),this):(g(x,D,q),D&&(D.destroyed=!0),q&&(q.destroyed=!0),F.constructed?w(this,x,j):this.once(l,function(X){w(this,e(X,x),j)}),this)}function w(x,j,q){let D=!1;function F(X){if(D)return;D=!0;const A=x._readableState,z=x._writableState;g(X,z,A),z&&(z.closed=!0),A&&(A.closed=!0),typeof q=="function"&&q(X),X?s.nextTick(m,x,X):s.nextTick(S,x)}try{x._destroy(j||null,F)}catch(X){F(X)}}function m(x,j){I(x,j),S(x)}function S(x){const j=x._readableState,q=x._writableState;q&&(q.closeEmitted=!0),j&&(j.closeEmitted=!0),(q!=null&&q.emitClose||j!=null&&j.emitClose)&&x.emit("close")}function I(x,j){const q=x._readableState,D=x._writableState;D!=null&&D.errorEmitted||q!=null&&q.errorEmitted||(D&&(D.errorEmitted=!0),q&&(q.errorEmitted=!0),x.emit("error",j))}function v(){const x=this._readableState,j=this._writableState;x&&(x.constructed=!0,x.closed=!1,x.closeEmitted=!1,x.destroyed=!1,x.errored=null,x.errorEmitted=!1,x.reading=!1,x.ended=x.readable===!1,x.endEmitted=x.readable===!1),j&&(j.constructed=!0,j.destroyed=!1,j.closed=!1,j.closeEmitted=!1,j.errored=null,j.errorEmitted=!1,j.finalCalled=!1,j.prefinished=!1,j.ended=j.writable===!1,j.ending=j.writable===!1,j.finished=j.writable===!1)}function R(x,j,q){const D=x._readableState,F=x._writableState;if(F!=null&&F.destroyed||D!=null&&D.destroyed)return this;D!=null&&D.autoDestroy||F!=null&&F.autoDestroy?x.destroy(j):j&&(j.stack,F&&!F.errored&&(F.errored=j),D&&!D.errored&&(D.errored=j),q?s.nextTick(I,x,j):I(x,j))}function h(x,j){if(typeof x._construct!="function")return;const q=x._readableState,D=x._writableState;q&&(q.constructed=!1),D&&(D.constructed=!1),x.once(d,j),!(x.listenerCount(d)>1)&&s.nextTick(u,x)}function u(x){let j=!1;function q(D){if(j){R(x,D??new t);return}j=!0;const F=x._readableState,X=x._writableState,A=X||F;F&&(F.constructed=!0),X&&(X.constructed=!0),A.destroyed?x.emit(l,D):D?R(x,D,!0):s.nextTick(_,x)}try{x._construct(D=>{s.nextTick(q,D)})}catch(D){s.nextTick(q,D)}}function _(x){x.emit(d)}function T(x){return x?.setHeader&&typeof x.abort=="function"}function B(x){x.emit("close")}function E(x,j){x.emit("error",j),s.nextTick(B,x)}function P(x,j){!x||a(x)||(!j&&!n(x)&&(j=new r),p(x)?(x.socket=null,x.destroy(j)):T(x)?x.abort():T(x.req)?x.req.abort():typeof x.destroy=="function"?x.destroy(j):typeof x.close=="function"?x.close():j?s.nextTick(E,x,j):s.nextTick(B,x),x.destroyed||(x[i]=!0))}return Or={construct:h,destroyer:P,destroy:y,undestroy:v,errorOrDestroy:R},Or}var Cr,vi;function Gn(){if(vi)return Cr;vi=1;const{ArrayIsArray:s,ObjectSetPrototypeOf:e}=Fe(),{EventEmitter:t}=yr();function r(i){t.call(this,i)}e(r.prototype,t.prototype),e(r,t),r.prototype.pipe=function(i,a){const n=this;function p(S){i.writable&&i.write(S)===!1&&n.pause&&n.pause()}n.on("data",p);function l(){n.readable&&n.resume&&n.resume()}i.on("drain",l),!i._isStdio&&(!a||a.end!==!1)&&(n.on("end",g),n.on("close",y));let d=!1;function g(){d||(d=!0,i.end())}function y(){d||(d=!0,typeof i.destroy=="function"&&i.destroy())}function w(S){m(),t.listenerCount(this,"error")===0&&this.emit("error",S)}o(n,"error",w),o(i,"error",w);function m(){n.removeListener("data",p),i.removeListener("drain",l),n.removeListener("end",g),n.removeListener("close",y),n.removeListener("error",w),i.removeListener("error",w),n.removeListener("end",m),n.removeListener("close",m),i.removeListener("close",m)}return n.on("end",m),n.on("close",m),i.on("close",m),i.emit("pipe",n),i};function o(i,a,n){if(typeof i.prependListener=="function")return i.prependListener(a,n);!i._events||!i._events[a]?i.on(a,n):s(i._events[a])?i._events[a].unshift(n):i._events[a]=[n,i._events[a]]}return Cr={Stream:r,prependListener:o},Cr}var Pr={exports:{}},Ei;function br(){return Ei||(Ei=1,(function(s){const{SymbolDispose:e}=Fe(),{AbortError:t,codes:r}=Ue(),{isNodeStream:o,isWebStream:i,kControllerErrorFunction:a}=rt(),n=lt(),{ERR_INVALID_ARG_TYPE:p}=r;let l;const d=(g,y)=>{if(typeof g!="object"||!("aborted"in g))throw new p(y,"AbortSignal",g)};s.exports.addAbortSignal=function(y,w){if(d(y,"signal"),!o(w)&&!i(w))throw new p("stream",["ReadableStream","WritableStream","Stream"],w);return s.exports.addAbortSignalNoValidate(y,w)},s.exports.addAbortSignalNoValidate=function(g,y){if(typeof g!="object"||!("aborted"in g))return y;const w=o(y)?()=>{y.destroy(new t(void 0,{cause:g.reason}))}:()=>{y[a](new t(void 0,{cause:g.reason}))};if(g.aborted)w();else{l=l||He().addAbortListener;const m=l(g,w);n(y,m[e])}return y}})(Pr)),Pr.exports}var kr,Si;function eo(){if(Si)return kr;Si=1;const{StringPrototypeSlice:s,SymbolIterator:e,TypedArrayPrototypeSet:t,Uint8Array:r}=Fe(),{Buffer:o}=tt(),{inspect:i}=He();return kr=class{constructor(){this.head=null,this.tail=null,this.length=0}push(n){const p={data:n,next:null};this.length>0?this.tail.next=p:this.head=p,this.tail=p,++this.length}unshift(n){const p={data:n,next:this.head};this.length===0&&(this.tail=p),this.head=p,++this.length}shift(){if(this.length===0)return;const n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}clear(){this.head=this.tail=null,this.length=0}join(n){if(this.length===0)return"";let p=this.head,l=""+p.data;for(;(p=p.next)!==null;)l+=n+p.data;return l}concat(n){if(this.length===0)return o.alloc(0);const p=o.allocUnsafe(n>>>0);let l=this.head,d=0;for(;l;)t(p,l.data,d),d+=l.data.length,l=l.next;return p}consume(n,p){const l=this.head.data;if(n<l.length){const d=l.slice(0,n);return this.head.data=l.slice(n),d}return n===l.length?this.shift():p?this._getString(n):this._getBuffer(n)}first(){return this.head.data}*[e](){for(let n=this.head;n;n=n.next)yield n.data}_getString(n){let p="",l=this.head,d=0;do{const g=l.data;if(n>g.length)p+=g,n-=g.length;else{n===g.length?(p+=g,++d,l.next?this.head=l.next:this.head=this.tail=null):(p+=s(g,0,n),this.head=l,l.data=s(g,n));break}++d}while((l=l.next)!==null);return this.length-=d,p}_getBuffer(n){const p=o.allocUnsafe(n),l=n;let d=this.head,g=0;do{const y=d.data;if(n>y.length)t(p,y,l-n),n-=y.length;else{n===y.length?(t(p,y,l-n),++g,d.next?this.head=d.next:this.head=this.tail=null):(t(p,new r(y.buffer,y.byteOffset,n),l-n),this.head=d,d.data=y.slice(n));break}++g}while((d=d.next)!==null);return this.length-=g,p}[Symbol.for("nodejs.util.inspect.custom")](n,p){return i(this,{...p,depth:0,customInspect:!1})}},kr}var Mr,Ii;function mr(){if(Ii)return Mr;Ii=1;const{MathFloor:s,NumberIsInteger:e}=Fe(),{validateInteger:t}=tr(),{ERR_INVALID_ARG_VALUE:r}=Ue().codes;let o=16*1024,i=16;function a(d,g,y){return d.highWaterMark!=null?d.highWaterMark:g?d[y]:null}function n(d){return d?i:o}function p(d,g){t(g,"value",0),d?i=g:o=g}function l(d,g,y,w){const m=a(g,w,y);if(m!=null){if(!e(m)||m<0){const S=w?`options.${y}`:"options.highWaterMark";throw new r(S,m)}return s(m)}return n(d.objectMode)}return Mr={getHighWaterMark:l,getDefaultHighWaterMark:n,setDefaultHighWaterMark:p},Mr}var Br={},hr={exports:{}};var Ri;function to(){return Ri||(Ri=1,(function(s,e){var t=tt(),r=t.Buffer;function o(a,n){for(var p in a)n[p]=a[p]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?s.exports=t:(o(t,e),e.Buffer=i);function i(a,n,p){return r(a,n,p)}i.prototype=Object.create(r.prototype),o(r,i),i.from=function(a,n,p){if(typeof a=="number")throw new TypeError("Argument must not be a number");return r(a,n,p)},i.alloc=function(a,n,p){if(typeof a!="number")throw new TypeError("Argument must be a number");var l=r(a);return n!==void 0?typeof p=="string"?l.fill(n,p):l.fill(n):l.fill(0),l},i.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r(a)},i.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(a)}})(hr,hr.exports)),hr.exports}var Ni;function ro(){if(Ni)return Br;Ni=1;var s=to().Buffer,e=s.isEncoding||function(v){switch(v=""+v,v&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(v){if(!v)return"utf8";for(var R;;)switch(v){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return v;default:if(R)return;v=(""+v).toLowerCase(),R=!0}}function r(v){var R=t(v);if(typeof R!="string"&&(s.isEncoding===e||!e(v)))throw new Error("Unknown encoding: "+v);return R||v}Br.StringDecoder=o;function o(v){this.encoding=r(v);var R;switch(this.encoding){case"utf16le":this.text=g,this.end=y,R=4;break;case"utf8":this.fillLast=p,R=4;break;case"base64":this.text=w,this.end=m,R=3;break;default:this.write=S,this.end=I;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=s.allocUnsafe(R)}o.prototype.write=function(v){if(v.length===0)return"";var R,h;if(this.lastNeed){if(R=this.fillLast(v),R===void 0)return"";h=this.lastNeed,this.lastNeed=0}else h=0;return h<v.length?R?R+this.text(v,h):this.text(v,h):R||""},o.prototype.end=d,o.prototype.text=l,o.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length};function i(v){return v<=127?0:v>>5===6?2:v>>4===14?3:v>>3===30?4:v>>6===2?-1:-2}function a(v,R,h){var u=R.length-1;if(u<h)return 0;var _=i(R[u]);return _>=0?(_>0&&(v.lastNeed=_-1),_):--u<h||_===-2?0:(_=i(R[u]),_>=0?(_>0&&(v.lastNeed=_-2),_):--u<h||_===-2?0:(_=i(R[u]),_>=0?(_>0&&(_===2?_=0:v.lastNeed=_-3),_):0))}function n(v,R,h){if((R[0]&192)!==128)return v.lastNeed=0,"";if(v.lastNeed>1&&R.length>1){if((R[1]&192)!==128)return v.lastNeed=1,"";if(v.lastNeed>2&&R.length>2&&(R[2]&192)!==128)return v.lastNeed=2,""}}function p(v){var R=this.lastTotal-this.lastNeed,h=n(this,v);if(h!==void 0)return h;if(this.lastNeed<=v.length)return v.copy(this.lastChar,R,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,R,0,v.length),this.lastNeed-=v.length}function l(v,R){var h=a(this,v,R);if(!this.lastNeed)return v.toString("utf8",R);this.lastTotal=h;var u=v.length-(h-this.lastNeed);return v.copy(this.lastChar,0,u),v.toString("utf8",R,u)}function d(v){var R=v&&v.length?this.write(v):"";return this.lastNeed?R+"":R}function g(v,R){if((v.length-R)%2===0){var h=v.toString("utf16le",R);if(h){var u=h.charCodeAt(h.length-1);if(u>=55296&&u<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],h.slice(0,-1)}return h}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",R,v.length-1)}function y(v){var R=v&&v.length?this.write(v):"";if(this.lastNeed){var h=this.lastTotal-this.lastNeed;return R+this.lastChar.toString("utf16le",0,h)}return R}function w(v,R){var h=(v.length-R)%3;return h===0?v.toString("base64",R):(this.lastNeed=3-h,this.lastTotal=3,h===1?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",R,v.length-h))}function m(v){var R=v&&v.length?this.write(v):"";return this.lastNeed?R+this.lastChar.toString("base64",0,3-this.lastNeed):R}function S(v){return v.toString(this.encoding)}function I(v){return v&&v.length?this.write(v):""}return Br}var $r,Ti;function sa(){if(Ti)return $r;Ti=1;const s=mt(),{PromisePrototypeThen:e,SymbolAsyncIterator:t,SymbolIterator:r}=Fe(),{Buffer:o}=tt(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:a}=Ue().codes;function n(p,l,d){let g;if(typeof l=="string"||l instanceof o)return new p({objectMode:!0,...d,read(){this.push(l),this.push(null)}});let y;if(l&&l[t])y=!0,g=l[t]();else if(l&&l[r])y=!1,g=l[r]();else throw new i("iterable",["Iterable"],l);const w=new p({objectMode:!0,highWaterMark:1,...d});let m=!1;w._read=function(){m||(m=!0,I())},w._destroy=function(v,R){e(S(v),()=>s.nextTick(R,v),h=>s.nextTick(R,h||v))};async function S(v){const R=v!=null,h=typeof g.throw=="function";if(R&&h){const{value:u,done:_}=await g.throw(v);if(await u,_)return}if(typeof g.return=="function"){const{value:u}=await g.return();await u}}async function I(){for(;;){try{const{value:v,done:R}=y?await g.next():g.next();if(R)w.push(null);else{const h=v&&typeof v.then=="function"?await v:v;if(h===null)throw m=!1,new a;if(w.push(h))continue;m=!1}}catch(v){w.destroy(v)}break}}return w}return $r=n,$r}var qr,Ai;function wr(){if(Ai)return qr;Ai=1;const s=mt(),{ArrayPrototypeIndexOf:e,NumberIsInteger:t,NumberIsNaN:r,NumberParseInt:o,ObjectDefineProperties:i,ObjectKeys:a,ObjectSetPrototypeOf:n,Promise:p,SafeSet:l,SymbolAsyncDispose:d,SymbolAsyncIterator:g,Symbol:y}=Fe();qr=oe,oe.ReadableState=_e;const{EventEmitter:w}=yr(),{Stream:m,prependListener:S}=Gn(),{Buffer:I}=tt(),{addAbortSignal:v}=br(),R=lt();let h=He().debuglog("stream",L=>{h=L});const u=eo(),_=At(),{getHighWaterMark:T,getDefaultHighWaterMark:B}=mr(),{aggregateTwoErrors:E,codes:{ERR_INVALID_ARG_TYPE:P,ERR_METHOD_NOT_IMPLEMENTED:x,ERR_OUT_OF_RANGE:j,ERR_STREAM_PUSH_AFTER_EOF:q,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:D},AbortError:F}=Ue(),{validateObject:X}=tr(),A=y("kPaused"),{StringDecoder:z}=ro(),M=sa();n(oe.prototype,m.prototype),n(oe,m);const Y=()=>{},{errorOrDestroy:b}=_,H=1,K=2,W=4,le=8,V=16,J=32,Q=64,U=128,te=256,re=512,fe=1024,pe=2048,O=4096,G=8192,se=16384,de=32768,he=65536,ge=1<<17,ee=1<<18;function ue(L){return{enumerable:!1,get(){return(this.state&L)!==0},set($){$?this.state|=L:this.state&=~L}}}i(_e.prototype,{objectMode:ue(H),ended:ue(K),endEmitted:ue(W),reading:ue(le),constructed:ue(V),sync:ue(J),needReadable:ue(Q),emittedReadable:ue(U),readableListening:ue(te),resumeScheduled:ue(re),errorEmitted:ue(fe),emitClose:ue(pe),autoDestroy:ue(O),destroyed:ue(G),closed:ue(se),closeEmitted:ue(de),multiAwaitDrain:ue(he),readingMore:ue(ge),dataEmitted:ue(ee)});function _e(L,$,ye){typeof ye!="boolean"&&(ye=$ instanceof et()),this.state=pe|O|V|J,L&&L.objectMode&&(this.state|=H),ye&&L&&L.readableObjectMode&&(this.state|=H),this.highWaterMark=L?T(this,L,"readableHighWaterMark",ye):B(!1),this.buffer=new u,this.length=0,this.pipes=[],this.flowing=null,this[A]=null,L&&L.emitClose===!1&&(this.state&=~pe),L&&L.autoDestroy===!1&&(this.state&=~O),this.errored=null,this.defaultEncoding=L&&L.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,L&&L.encoding&&(this.decoder=new z(L.encoding),this.encoding=L.encoding)}function oe(L){if(!(this instanceof oe))return new oe(L);const $=this instanceof et();this._readableState=new _e(L,this,$),L&&(typeof L.read=="function"&&(this._read=L.read),typeof L.destroy=="function"&&(this._destroy=L.destroy),typeof L.construct=="function"&&(this._construct=L.construct),L.signal&&!$&&v(L.signal,this)),m.call(this,L),_.construct(this,()=>{this._readableState.needReadable&&Z(this,this._readableState)})}oe.prototype.destroy=_.destroy,oe.prototype._undestroy=_.undestroy,oe.prototype._destroy=function(L,$){$(L)},oe.prototype[w.captureRejectionSymbol]=function(L){this.destroy(L)},oe.prototype[d]=function(){let L;return this.destroyed||(L=this.readableEnded?null:new F,this.destroy(L)),new p(($,ye)=>R(this,be=>be&&be!==L?ye(be):$(null)))},oe.prototype.push=function(L,$){return Ee(this,L,$,!1)},oe.prototype.unshift=function(L,$){return Ee(this,L,$,!0)};function Ee(L,$,ye,be){h("readableAddChunk",$);const we=L._readableState;let ke;if((we.state&H)===0&&(typeof $=="string"?(ye=ye||we.defaultEncoding,we.encoding!==ye&&(be&&we.encoding?$=I.from($,ye).toString(we.encoding):($=I.from($,ye),ye=""))):$ instanceof I?ye="":m._isUint8Array($)?($=m._uint8ArrayToBuffer($),ye=""):$!=null&&(ke=new P("chunk",["string","Buffer","Uint8Array"],$))),ke)b(L,ke);else if($===null)we.state&=~le,c(L,we);else if((we.state&H)!==0||$&&$.length>0)if(be)if((we.state&W)!==0)b(L,new D);else{if(we.destroyed||we.errored)return!1;Pe(L,we,$,!0)}else if(we.ended)b(L,new q);else{if(we.destroyed||we.errored)return!1;we.state&=~le,we.decoder&&!ye?($=we.decoder.write($),we.objectMode||$.length!==0?Pe(L,we,$,!1):Z(L,we)):Pe(L,we,$,!1)}else be||(we.state&=~le,Z(L,we));return!we.ended&&(we.length<we.highWaterMark||we.length===0)}function Pe(L,$,ye,be){$.flowing&&$.length===0&&!$.sync&&L.listenerCount("data")>0?(($.state&he)!==0?$.awaitDrainWriters.clear():$.awaitDrainWriters=null,$.dataEmitted=!0,L.emit("data",ye)):($.length+=$.objectMode?1:ye.length,be?$.buffer.unshift(ye):$.buffer.push(ye),($.state&Q)!==0&&f(L)),Z(L,$)}oe.prototype.isPaused=function(){const L=this._readableState;return L[A]===!0||L.flowing===!1},oe.prototype.setEncoding=function(L){const $=new z(L);this._readableState.decoder=$,this._readableState.encoding=this._readableState.decoder.encoding;const ye=this._readableState.buffer;let be="";for(const we of ye)be+=$.write(we);return ye.clear(),be!==""&&ye.push(be),this._readableState.length=be.length,this};const ve=1073741824;function Me(L){if(L>ve)throw new j("size","<= 1GiB",L);return L--,L|=L>>>1,L|=L>>>2,L|=L>>>4,L|=L>>>8,L|=L>>>16,L++,L}function N(L,$){return L<=0||$.length===0&&$.ended?0:($.state&H)!==0?1:r(L)?$.flowing&&$.length?$.buffer.first().length:$.length:L<=$.length?L:$.ended?$.length:0}oe.prototype.read=function(L){h("read",L),L===void 0?L=NaN:t(L)||(L=o(L,10));const $=this._readableState,ye=L;if(L>$.highWaterMark&&($.highWaterMark=Me(L)),L!==0&&($.state&=~U),L===0&&$.needReadable&&(($.highWaterMark!==0?$.length>=$.highWaterMark:$.length>0)||$.ended))return h("read: emitReadable",$.length,$.ended),$.length===0&&$.ended?Le(this):f(this),null;if(L=N(L,$),L===0&&$.ended)return $.length===0&&Le(this),null;let be=($.state&Q)!==0;if(h("need readable",be),($.length===0||$.length-L<$.highWaterMark)&&(be=!0,h("length less than watermark",be)),$.ended||$.reading||$.destroyed||$.errored||!$.constructed)be=!1,h("reading, ended or constructing",be);else if(be){h("do read"),$.state|=le|J,$.length===0&&($.state|=Q);try{this._read($.highWaterMark)}catch(ke){b(this,ke)}$.state&=~J,$.reading||(L=N(ye,$))}let we;return L>0?we=je(L,$):we=null,we===null?($.needReadable=$.length<=$.highWaterMark,L=0):($.length-=L,$.multiAwaitDrain?$.awaitDrainWriters.clear():$.awaitDrainWriters=null),$.length===0&&($.ended||($.needReadable=!0),ye!==L&&$.ended&&Le(this)),we!==null&&!$.errorEmitted&&!$.closeEmitted&&($.dataEmitted=!0,this.emit("data",we)),we};function c(L,$){if(h("onEofChunk"),!$.ended){if($.decoder){const ye=$.decoder.end();ye&&ye.length&&($.buffer.push(ye),$.length+=$.objectMode?1:ye.length)}$.ended=!0,$.sync?f(L):($.needReadable=!1,$.emittedReadable=!0,C(L))}}function f(L){const $=L._readableState;h("emitReadable",$.needReadable,$.emittedReadable),$.needReadable=!1,$.emittedReadable||(h("emitReadable",$.flowing),$.emittedReadable=!0,s.nextTick(C,L))}function C(L){const $=L._readableState;h("emitReadable_",$.destroyed,$.length,$.ended),!$.destroyed&&!$.errored&&($.length||$.ended)&&(L.emit("readable"),$.emittedReadable=!1),$.needReadable=!$.flowing&&!$.ended&&$.length<=$.highWaterMark,Ie(L)}function Z(L,$){!$.readingMore&&$.constructed&&($.readingMore=!0,s.nextTick(ae,L,$))}function ae(L,$){for(;!$.reading&&!$.ended&&($.length<$.highWaterMark||$.flowing&&$.length===0);){const ye=$.length;if(h("maybeReadMore read 0"),L.read(0),ye===$.length)break}$.readingMore=!1}oe.prototype._read=function(L){throw new x("_read()")},oe.prototype.pipe=function(L,$){const ye=this,be=this._readableState;be.pipes.length===1&&(be.multiAwaitDrain||(be.multiAwaitDrain=!0,be.awaitDrainWriters=new l(be.awaitDrainWriters?[be.awaitDrainWriters]:[]))),be.pipes.push(L),h("pipe count=%d opts=%j",be.pipes.length,$);const ke=(!$||$.end!==!1)&&L!==s.stdout&&L!==s.stderr?ir:k;be.endEmitted?s.nextTick(ke):ye.once("end",ke),L.on("unpipe",$e);function $e(ne,ie){h("onunpipe"),ne===ye&&ie&&ie.hasUnpiped===!1&&(ie.hasUnpiped=!0,Ye())}function ir(){h("onend"),L.end()}let Ke,sr=!1;function Ye(){h("cleanup"),L.removeListener("close",jt),L.removeListener("finish",Ce),Ke&&L.removeListener("drain",Ke),L.removeListener("error",vt),L.removeListener("unpipe",$e),ye.removeListener("end",ir),ye.removeListener("end",k),ye.removeListener("data",xt),sr=!0,Ke&&be.awaitDrainWriters&&(!L._writableState||L._writableState.needDrain)&&Ke()}function Ft(){sr||(be.pipes.length===1&&be.pipes[0]===L?(h("false write response, pause",0),be.awaitDrainWriters=L,be.multiAwaitDrain=!1):be.pipes.length>1&&be.pipes.includes(L)&&(h("false write response, pause",be.awaitDrainWriters.size),be.awaitDrainWriters.add(L)),ye.pause()),Ke||(Ke=ce(ye,L),L.on("drain",Ke))}ye.on("data",xt);function xt(ne){h("ondata");const ie=L.write(ne);h("dest.write",ie),ie===!1&&Ft()}function vt(ne){if(h("onerror",ne),k(),L.removeListener("error",vt),L.listenerCount("error")===0){const ie=L._writableState||L._readableState;ie&&!ie.errorEmitted?b(L,ne):L.emit("error",ne)}}S(L,"error",vt);function jt(){L.removeListener("finish",Ce),k()}L.once("close",jt);function Ce(){h("onfinish"),L.removeListener("close",jt),k()}L.once("finish",Ce);function k(){h("unpipe"),ye.unpipe(L)}return L.emit("pipe",ye),L.writableNeedDrain===!0?Ft():be.flowing||(h("pipe resume"),ye.resume()),L};function ce(L,$){return function(){const be=L._readableState;be.awaitDrainWriters===$?(h("pipeOnDrain",1),be.awaitDrainWriters=null):be.multiAwaitDrain&&(h("pipeOnDrain",be.awaitDrainWriters.size),be.awaitDrainWriters.delete($)),(!be.awaitDrainWriters||be.awaitDrainWriters.size===0)&&L.listenerCount("data")&&L.resume()}}oe.prototype.unpipe=function(L){const $=this._readableState,ye={hasUnpiped:!1};if($.pipes.length===0)return this;if(!L){const we=$.pipes;$.pipes=[],this.pause();for(let ke=0;ke<we.length;ke++)we[ke].emit("unpipe",this,{hasUnpiped:!1});return this}const be=e($.pipes,L);return be===-1?this:($.pipes.splice(be,1),$.pipes.length===0&&this.pause(),L.emit("unpipe",this,ye),this)},oe.prototype.on=function(L,$){const ye=m.prototype.on.call(this,L,$),be=this._readableState;return L==="data"?(be.readableListening=this.listenerCount("readable")>0,be.flowing!==!1&&this.resume()):L==="readable"&&!be.endEmitted&&!be.readableListening&&(be.readableListening=be.needReadable=!0,be.flowing=!1,be.emittedReadable=!1,h("on readable",be.length,be.reading),be.length?f(this):be.reading||s.nextTick(De,this)),ye},oe.prototype.addListener=oe.prototype.on,oe.prototype.removeListener=function(L,$){const ye=m.prototype.removeListener.call(this,L,$);return L==="readable"&&s.nextTick(xe,this),ye},oe.prototype.off=oe.prototype.removeListener,oe.prototype.removeAllListeners=function(L){const $=m.prototype.removeAllListeners.apply(this,arguments);return(L==="readable"||L===void 0)&&s.nextTick(xe,this),$};function xe(L){const $=L._readableState;$.readableListening=L.listenerCount("readable")>0,$.resumeScheduled&&$[A]===!1?$.flowing=!0:L.listenerCount("data")>0?L.resume():$.readableListening||($.flowing=null)}function De(L){h("readable nexttick read 0"),L.read(0)}oe.prototype.resume=function(){const L=this._readableState;return L.flowing||(h("resume"),L.flowing=!L.readableListening,Re(this,L)),L[A]=!1,this};function Re(L,$){$.resumeScheduled||($.resumeScheduled=!0,s.nextTick(Te,L,$))}function Te(L,$){h("resume",$.reading),$.reading||L.read(0),$.resumeScheduled=!1,L.emit("resume"),Ie(L),$.flowing&&!$.reading&&L.read(0)}oe.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[A]=!0,this};function Ie(L){const $=L._readableState;for(h("flow",$.flowing);$.flowing&&L.read()!==null;);}oe.prototype.wrap=function(L){let $=!1;L.on("data",be=>{!this.push(be)&&L.pause&&($=!0,L.pause())}),L.on("end",()=>{this.push(null)}),L.on("error",be=>{b(this,be)}),L.on("close",()=>{this.destroy()}),L.on("destroy",()=>{this.destroy()}),this._read=()=>{$&&L.resume&&($=!1,L.resume())};const ye=a(L);for(let be=1;be<ye.length;be++){const we=ye[be];this[we]===void 0&&typeof L[we]=="function"&&(this[we]=L[we].bind(L))}return this},oe.prototype[g]=function(){return Qe(this)},oe.prototype.iterator=function(L){return L!==void 0&&X(L,"options"),Qe(this,L)};function Qe(L,$){typeof L.read!="function"&&(L=oe.wrap(L,{objectMode:!0}));const ye=it(L,$);return ye.stream=L,ye}async function*it(L,$){let ye=Y;function be($e){this===L?(ye(),ye=Y):ye=$e}L.on("readable",be);let we;const ke=R(L,{writable:!1},$e=>{we=$e?E(we,$e):null,ye(),ye=Y});try{for(;;){const $e=L.destroyed?null:L.read();if($e!==null)yield $e;else{if(we)throw we;if(we===null)return;await new p(be)}}}catch($e){throw we=E(we,$e),we}finally{(we||$?.destroyOnReturn!==!1)&&(we===void 0||L._readableState.autoDestroy)?_.destroyer(L,null):(L.off("readable",be),ke())}}i(oe.prototype,{readable:{__proto__:null,get(){const L=this._readableState;return!!L&&L.readable!==!1&&!L.destroyed&&!L.errorEmitted&&!L.endEmitted},set(L){this._readableState&&(this._readableState.readable=!!L)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(L){this._readableState&&(this._readableState.flowing=L)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(L){this._readableState&&(this._readableState.destroyed=L)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(_e.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[A]!==!1},set(L){this[A]=!!L}}}),oe._fromList=je;function je(L,$){if($.length===0)return null;let ye;return $.objectMode?ye=$.buffer.shift():!L||L>=$.length?($.decoder?ye=$.buffer.join(""):$.buffer.length===1?ye=$.buffer.first():ye=$.buffer.concat($.length),$.buffer.clear()):ye=$.buffer.consume(L,$.decoder),ye}function Le(L){const $=L._readableState;h("endReadable",$.endEmitted),$.endEmitted||($.ended=!0,s.nextTick(nr,$,L))}function nr(L,$){if(h("endReadableNT",L.endEmitted,L.length),!L.errored&&!L.closeEmitted&&!L.endEmitted&&L.length===0){if(L.endEmitted=!0,$.emit("end"),$.writable&&$.allowHalfOpen===!1)s.nextTick(st,$);else if(L.autoDestroy){const ye=$._writableState;(!ye||ye.autoDestroy&&(ye.finished||ye.writable===!1))&&$.destroy()}}}function st(L){L.writable&&!L.writableEnded&&!L.destroyed&&L.end()}oe.from=function(L,$){return M(oe,L,$)};let wt;function Dt(){return wt===void 0&&(wt={}),wt}return oe.fromWeb=function(L,$){return Dt().newStreamReadableFromReadableStream(L,$)},oe.toWeb=function(L,$){return Dt().newReadableStreamFromStreamReadable(L,$)},oe.wrap=function(L,$){var ye,be;return new oe({objectMode:(ye=(be=L.readableObjectMode)!==null&&be!==void 0?be:L.objectMode)!==null&&ye!==void 0?ye:!0,...$,destroy(we,ke){_.destroyer(L,we),ke(we)}}).wrap(L)},qr}var Ur,Di;function Wn(){if(Di)return Ur;Di=1;const s=mt(),{ArrayPrototypeSlice:e,Error:t,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:o,ObjectDefineProperties:i,ObjectSetPrototypeOf:a,StringPrototypeToLowerCase:n,Symbol:p,SymbolHasInstance:l}=Fe();Ur=X,X.WritableState=D;const{EventEmitter:d}=yr(),g=Gn().Stream,{Buffer:y}=tt(),w=At(),{addAbortSignal:m}=br(),{getHighWaterMark:S,getDefaultHighWaterMark:I}=mr(),{ERR_INVALID_ARG_TYPE:v,ERR_METHOD_NOT_IMPLEMENTED:R,ERR_MULTIPLE_CALLBACK:h,ERR_STREAM_CANNOT_PIPE:u,ERR_STREAM_DESTROYED:_,ERR_STREAM_ALREADY_FINISHED:T,ERR_STREAM_NULL_VALUES:B,ERR_STREAM_WRITE_AFTER_END:E,ERR_UNKNOWN_ENCODING:P}=Ue().codes,{errorOrDestroy:x}=w;a(X.prototype,g.prototype),a(X,g);function j(){}const q=p("kOnFinished");function D(O,G,se){typeof se!="boolean"&&(se=G instanceof et()),this.objectMode=!!(O&&O.objectMode),se&&(this.objectMode=this.objectMode||!!(O&&O.writableObjectMode)),this.highWaterMark=O?S(this,O,"writableHighWaterMark",se):I(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const de=!!(O&&O.decodeStrings===!1);this.decodeStrings=!de,this.defaultEncoding=O&&O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=b.bind(void 0,G),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,F(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!O||O.emitClose!==!1,this.autoDestroy=!O||O.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[q]=[]}function F(O){O.buffered=[],O.bufferedIndex=0,O.allBuffers=!0,O.allNoop=!0}D.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},o(D.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function X(O){const G=this instanceof et();if(!G&&!r(X,this))return new X(O);this._writableState=new D(O,this,G),O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final),typeof O.construct=="function"&&(this._construct=O.construct),O.signal&&m(O.signal,this)),g.call(this,O),w.construct(this,()=>{const se=this._writableState;se.writing||le(this,se),U(this,se)})}o(X,l,{__proto__:null,value:function(O){return r(this,O)?!0:this!==X?!1:O&&O._writableState instanceof D}}),X.prototype.pipe=function(){x(this,new u)};function A(O,G,se,de){const he=O._writableState;if(typeof se=="function")de=se,se=he.defaultEncoding;else{if(!se)se=he.defaultEncoding;else if(se!=="buffer"&&!y.isEncoding(se))throw new P(se);typeof de!="function"&&(de=j)}if(G===null)throw new B;if(!he.objectMode)if(typeof G=="string")he.decodeStrings!==!1&&(G=y.from(G,se),se="buffer");else if(G instanceof y)se="buffer";else if(g._isUint8Array(G))G=g._uint8ArrayToBuffer(G),se="buffer";else throw new v("chunk",["string","Buffer","Uint8Array"],G);let ge;return he.ending?ge=new E:he.destroyed&&(ge=new _("write")),ge?(s.nextTick(de,ge),x(O,ge,!0),ge):(he.pendingcb++,z(O,he,G,se,de))}X.prototype.write=function(O,G,se){return A(this,O,G,se)===!0},X.prototype.cork=function(){this._writableState.corked++},X.prototype.uncork=function(){const O=this._writableState;O.corked&&(O.corked--,O.writing||le(this,O))},X.prototype.setDefaultEncoding=function(G){if(typeof G=="string"&&(G=n(G)),!y.isEncoding(G))throw new P(G);return this._writableState.defaultEncoding=G,this};function z(O,G,se,de,he){const ge=G.objectMode?1:se.length;G.length+=ge;const ee=G.length<G.highWaterMark;return ee||(G.needDrain=!0),G.writing||G.corked||G.errored||!G.constructed?(G.buffered.push({chunk:se,encoding:de,callback:he}),G.allBuffers&&de!=="buffer"&&(G.allBuffers=!1),G.allNoop&&he!==j&&(G.allNoop=!1)):(G.writelen=ge,G.writecb=he,G.writing=!0,G.sync=!0,O._write(se,de,G.onwrite),G.sync=!1),ee&&!G.errored&&!G.destroyed}function M(O,G,se,de,he,ge,ee){G.writelen=de,G.writecb=ee,G.writing=!0,G.sync=!0,G.destroyed?G.onwrite(new _("write")):se?O._writev(he,G.onwrite):O._write(he,ge,G.onwrite),G.sync=!1}function Y(O,G,se,de){--G.pendingcb,de(se),W(G),x(O,se)}function b(O,G){const se=O._writableState,de=se.sync,he=se.writecb;if(typeof he!="function"){x(O,new h);return}se.writing=!1,se.writecb=null,se.length-=se.writelen,se.writelen=0,G?(G.stack,se.errored||(se.errored=G),O._readableState&&!O._readableState.errored&&(O._readableState.errored=G),de?s.nextTick(Y,O,se,G,he):Y(O,se,G,he)):(se.buffered.length>se.bufferedIndex&&le(O,se),de?se.afterWriteTickInfo!==null&&se.afterWriteTickInfo.cb===he?se.afterWriteTickInfo.count++:(se.afterWriteTickInfo={count:1,cb:he,stream:O,state:se},s.nextTick(H,se.afterWriteTickInfo)):K(O,se,1,he))}function H({stream:O,state:G,count:se,cb:de}){return G.afterWriteTickInfo=null,K(O,G,se,de)}function K(O,G,se,de){for(!G.ending&&!O.destroyed&&G.length===0&&G.needDrain&&(G.needDrain=!1,O.emit("drain"));se-- >0;)G.pendingcb--,de();G.destroyed&&W(G),U(O,G)}function W(O){if(O.writing)return;for(let he=O.bufferedIndex;he<O.buffered.length;++he){var G;const{chunk:ge,callback:ee}=O.buffered[he],ue=O.objectMode?1:ge.length;O.length-=ue,ee((G=O.errored)!==null&&G!==void 0?G:new _("write"))}const se=O[q].splice(0);for(let he=0;he<se.length;he++){var de;se[he]((de=O.errored)!==null&&de!==void 0?de:new _("end"))}F(O)}function le(O,G){if(G.corked||G.bufferProcessing||G.destroyed||!G.constructed)return;const{buffered:se,bufferedIndex:de,objectMode:he}=G,ge=se.length-de;if(!ge)return;let ee=de;if(G.bufferProcessing=!0,ge>1&&O._writev){G.pendingcb-=ge-1;const ue=G.allNoop?j:oe=>{for(let Ee=ee;Ee<se.length;++Ee)se[Ee].callback(oe)},_e=G.allNoop&&ee===0?se:e(se,ee);_e.allBuffers=G.allBuffers,M(O,G,!0,G.length,_e,"",ue),F(G)}else{do{const{chunk:ue,encoding:_e,callback:oe}=se[ee];se[ee++]=null;const Ee=he?1:ue.length;M(O,G,!1,Ee,ue,_e,oe)}while(ee<se.length&&!G.writing);ee===se.length?F(G):ee>256?(se.splice(0,ee),G.bufferedIndex=0):G.bufferedIndex=ee}G.bufferProcessing=!1}X.prototype._write=function(O,G,se){if(this._writev)this._writev([{chunk:O,encoding:G}],se);else throw new R("_write()")},X.prototype._writev=null,X.prototype.end=function(O,G,se){const de=this._writableState;typeof O=="function"?(se=O,O=null,G=null):typeof G=="function"&&(se=G,G=null);let he;if(O!=null){const ge=A(this,O,G);ge instanceof t&&(he=ge)}return de.corked&&(de.corked=1,this.uncork()),he||(!de.errored&&!de.ending?(de.ending=!0,U(this,de,!0),de.ended=!0):de.finished?he=new T("end"):de.destroyed&&(he=new _("end"))),typeof se=="function"&&(he||de.finished?s.nextTick(se,he):de[q].push(se)),this};function V(O){return O.ending&&!O.destroyed&&O.constructed&&O.length===0&&!O.errored&&O.buffered.length===0&&!O.finished&&!O.writing&&!O.errorEmitted&&!O.closeEmitted}function J(O,G){let se=!1;function de(he){if(se){x(O,he??h());return}if(se=!0,G.pendingcb--,he){const ge=G[q].splice(0);for(let ee=0;ee<ge.length;ee++)ge[ee](he);x(O,he,G.sync)}else V(G)&&(G.prefinished=!0,O.emit("prefinish"),G.pendingcb++,s.nextTick(te,O,G))}G.sync=!0,G.pendingcb++;try{O._final(de)}catch(he){de(he)}G.sync=!1}function Q(O,G){!G.prefinished&&!G.finalCalled&&(typeof O._final=="function"&&!G.destroyed?(G.finalCalled=!0,J(O,G)):(G.prefinished=!0,O.emit("prefinish")))}function U(O,G,se){V(G)&&(Q(O,G),G.pendingcb===0&&(se?(G.pendingcb++,s.nextTick((de,he)=>{V(he)?te(de,he):he.pendingcb--},O,G)):V(G)&&(G.pendingcb++,te(O,G))))}function te(O,G){G.pendingcb--,G.finished=!0;const se=G[q].splice(0);for(let de=0;de<se.length;de++)se[de]();if(O.emit("finish"),G.autoDestroy){const de=O._readableState;(!de||de.autoDestroy&&(de.endEmitted||de.readable===!1))&&O.destroy()}}i(X.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(O){this._writableState&&(this._writableState.destroyed=O)}},writable:{__proto__:null,get(){const O=this._writableState;return!!O&&O.writable!==!1&&!O.destroyed&&!O.errored&&!O.ending&&!O.ended},set(O){this._writableState&&(this._writableState.writable=!!O)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const O=this._writableState;return O?!O.destroyed&&!O.ending&&O.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const re=w.destroy;X.prototype.destroy=function(O,G){const se=this._writableState;return!se.destroyed&&(se.bufferedIndex<se.buffered.length||se[q].length)&&s.nextTick(W,se),re.call(this,O,G),this},X.prototype._undestroy=w.undestroy,X.prototype._destroy=function(O,G){G(O)},X.prototype[d.captureRejectionSymbol]=function(O){this.destroy(O)};let fe;function pe(){return fe===void 0&&(fe={}),fe}return X.fromWeb=function(O,G){return pe().newStreamWritableFromWritableStream(O,G)},X.toWeb=function(O){return pe().newWritableStreamFromStreamWritable(O)},Ur}var Hr,Fi;function no(){if(Fi)return Hr;Fi=1;const s=mt(),e=tt(),{isReadable:t,isWritable:r,isIterable:o,isNodeStream:i,isReadableNodeStream:a,isWritableNodeStream:n,isDuplexNodeStream:p,isReadableStream:l,isWritableStream:d}=rt(),g=lt(),{AbortError:y,codes:{ERR_INVALID_ARG_TYPE:w,ERR_INVALID_RETURN_VALUE:m}}=Ue(),{destroyer:S}=At(),I=et(),v=wr(),R=Wn(),{createDeferredPromise:h}=He(),u=sa(),_=globalThis.Blob||e.Blob,T=typeof _<"u"?function(D){return D instanceof _}:function(D){return!1},B=globalThis.AbortController||Zt().AbortController,{FunctionPrototypeCall:E}=Fe();class P extends I{constructor(D){super(D),D?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),D?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Hr=function q(D,F){if(p(D))return D;if(a(D))return j({readable:D});if(n(D))return j({writable:D});if(i(D))return j({writable:!1,readable:!1});if(l(D))return j({readable:v.fromWeb(D)});if(d(D))return j({writable:R.fromWeb(D)});if(typeof D=="function"){const{value:A,write:z,final:M,destroy:Y}=x(D);if(o(A))return u(P,A,{objectMode:!0,write:z,final:M,destroy:Y});const b=A?.then;if(typeof b=="function"){let H;const K=E(b,A,W=>{if(W!=null)throw new m("nully","body",W)},W=>{S(H,W)});return H=new P({objectMode:!0,readable:!1,write:z,final(W){M(async()=>{try{await K,s.nextTick(W,null)}catch(le){s.nextTick(W,le)}})},destroy:Y})}throw new m("Iterable, AsyncIterable or AsyncFunction",F,A)}if(T(D))return q(D.arrayBuffer());if(o(D))return u(P,D,{objectMode:!0,writable:!1});if(l(D?.readable)&&d(D?.writable))return P.fromWeb(D);if(typeof D?.writable=="object"||typeof D?.readable=="object"){const A=D!=null&&D.readable?a(D?.readable)?D?.readable:q(D.readable):void 0,z=D!=null&&D.writable?n(D?.writable)?D?.writable:q(D.writable):void 0;return j({readable:A,writable:z})}const X=D?.then;if(typeof X=="function"){let A;return E(X,D,z=>{z!=null&&A.push(z),A.push(null)},z=>{S(A,z)}),A=new P({objectMode:!0,writable:!1,read(){}})}throw new w(F,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],D)};function x(q){let{promise:D,resolve:F}=h();const X=new B,A=X.signal;return{value:q((async function*(){for(;;){const M=D;D=null;const{chunk:Y,done:b,cb:H}=await M;if(s.nextTick(H),b)return;if(A.aborted)throw new y(void 0,{cause:A.reason});({promise:D,resolve:F}=h()),yield Y}})(),{signal:A}),write(M,Y,b){const H=F;F=null,H({chunk:M,done:!1,cb:b})},final(M){const Y=F;F=null,Y({done:!0,cb:M})},destroy(M,Y){X.abort(),Y(M)}}}function j(q){const D=q.readable&&typeof q.readable.read!="function"?v.wrap(q.readable):q.readable,F=q.writable;let X=!!t(D),A=!!r(F),z,M,Y,b,H;function K(W){const le=b;b=null,le?le(W):W&&H.destroy(W)}return H=new P({readableObjectMode:!!(D!=null&&D.readableObjectMode),writableObjectMode:!!(F!=null&&F.writableObjectMode),readable:X,writable:A}),A&&(g(F,W=>{A=!1,W&&S(D,W),K(W)}),H._write=function(W,le,V){F.write(W,le)?V():z=V},H._final=function(W){F.end(),M=W},F.on("drain",function(){if(z){const W=z;z=null,W()}}),F.on("finish",function(){if(M){const W=M;M=null,W()}})),X&&(g(D,W=>{X=!1,W&&S(D,W),K(W)}),D.on("readable",function(){if(Y){const W=Y;Y=null,W()}}),D.on("end",function(){H.push(null)}),H._read=function(){for(;;){const W=D.read();if(W===null){Y=H._read;return}if(!H.push(W))return}}),H._destroy=function(W,le){!W&&b!==null&&(W=new y),Y=null,z=null,M=null,b===null?le(W):(b=le,S(F,W),S(D,W))},H}return Hr}var Gr,ji;function et(){if(ji)return Gr;ji=1;const{ObjectDefineProperties:s,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:t,ObjectSetPrototypeOf:r}=Fe();Gr=a;const o=wr(),i=Wn();r(a.prototype,o.prototype),r(a,o);{const d=t(i.prototype);for(let g=0;g<d.length;g++){const y=d[g];a.prototype[y]||(a.prototype[y]=i.prototype[y])}}function a(d){if(!(this instanceof a))return new a(d);o.call(this,d),i.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}s(a.prototype,{writable:{__proto__:null,...e(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(i.prototype,"writableLength")},writableFinished:{__proto__:null,...e(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});let n;function p(){return n===void 0&&(n={}),n}a.fromWeb=function(d,g){return p().newStreamDuplexFromReadableWritablePair(d,g)},a.toWeb=function(d){return p().newReadableWritablePairFromDuplex(d)};let l;return a.from=function(d){return l||(l=no()),l(d,"body")},Gr}var Wr,Li;function aa(){if(Li)return Wr;Li=1;const{ObjectSetPrototypeOf:s,Symbol:e}=Fe();Wr=a;const{ERR_METHOD_NOT_IMPLEMENTED:t}=Ue().codes,r=et(),{getHighWaterMark:o}=mr();s(a.prototype,r.prototype),s(a,r);const i=e("kCallback");function a(l){if(!(this instanceof a))return new a(l);const d=l?o(this,l,"readableHighWaterMark",!0):null;d===0&&(l={...l,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:l.writableHighWaterMark||0}),r.call(this,l),this._readableState.sync=!1,this[i]=null,l&&(typeof l.transform=="function"&&(this._transform=l.transform),typeof l.flush=="function"&&(this._flush=l.flush)),this.on("prefinish",p)}function n(l){typeof this._flush=="function"&&!this.destroyed?this._flush((d,g)=>{if(d){l?l(d):this.destroy(d);return}g!=null&&this.push(g),this.push(null),l&&l()}):(this.push(null),l&&l())}function p(){this._final!==n&&n.call(this)}return a.prototype._final=n,a.prototype._transform=function(l,d,g){throw new t("_transform()")},a.prototype._write=function(l,d,g){const y=this._readableState,w=this._writableState,m=y.length;this._transform(l,d,(S,I)=>{if(S){g(S);return}I!=null&&this.push(I),w.ended||m===y.length||y.length<y.highWaterMark?g():this[i]=g})},a.prototype._read=function(){if(this[i]){const l=this[i];this[i]=null,l()}},Wr}var Vr,Oi;function oa(){if(Oi)return Vr;Oi=1;const{ObjectSetPrototypeOf:s}=Fe();Vr=t;const e=aa();s(t.prototype,e.prototype),s(t,e);function t(r){if(!(this instanceof t))return new t(r);e.call(this,r)}return t.prototype._transform=function(r,o,i){i(null,r)},Vr}var Jr,Ci;function Vn(){if(Ci)return Jr;Ci=1;const s=mt(),{ArrayIsArray:e,Promise:t,SymbolAsyncIterator:r,SymbolDispose:o}=Fe(),i=lt(),{once:a}=He(),n=At(),p=et(),{aggregateTwoErrors:l,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:g,ERR_MISSING_ARGS:y,ERR_STREAM_DESTROYED:w,ERR_STREAM_PREMATURE_CLOSE:m},AbortError:S}=Ue(),{validateFunction:I,validateAbortSignal:v}=tr(),{isIterable:R,isReadable:h,isReadableNodeStream:u,isNodeStream:_,isTransformStream:T,isWebStream:B,isReadableStream:E,isReadableFinished:P}=rt(),x=globalThis.AbortController||Zt().AbortController;let j,q,D;function F(W,le,V){let J=!1;W.on("close",()=>{J=!0});const Q=i(W,{readable:le,writable:V},U=>{J=!U});return{destroy:U=>{J||(J=!0,n.destroyer(W,U||new w("pipe")))},cleanup:Q}}function X(W){return I(W[W.length-1],"streams[stream.length - 1]"),W.pop()}function A(W){if(R(W))return W;if(u(W))return z(W);throw new d("val",["Readable","Iterable","AsyncIterable"],W)}async function*z(W){q||(q=wr()),yield*q.prototype[r].call(W)}async function M(W,le,V,{end:J}){let Q,U=null;const te=pe=>{if(pe&&(Q=pe),U){const O=U;U=null,O()}},re=()=>new t((pe,O)=>{Q?O(Q):U=()=>{Q?O(Q):pe()}});le.on("drain",te);const fe=i(le,{readable:!1},te);try{le.writableNeedDrain&&await re();for await(const pe of W)le.write(pe)||await re();J&&(le.end(),await re()),V()}catch(pe){V(Q!==pe?l(Q,pe):pe)}finally{fe(),le.off("drain",te)}}async function Y(W,le,V,{end:J}){T(le)&&(le=le.writable);const Q=le.getWriter();try{for await(const U of W)await Q.ready,Q.write(U).catch(()=>{});await Q.ready,J&&await Q.close(),V()}catch(U){try{await Q.abort(U),V(U)}catch(te){V(te)}}}function b(...W){return H(W,a(X(W)))}function H(W,le,V){if(W.length===1&&e(W[0])&&(W=W[0]),W.length<2)throw new y("streams");const J=new x,Q=J.signal,U=V?.signal,te=[];v(U,"options.signal");function re(){he(new S)}D=D||He().addAbortListener;let fe;U&&(fe=D(U,re));let pe,O;const G=[];let se=0;function de(_e){he(_e,--se===0)}function he(_e,oe){var Ee;if(_e&&(!pe||pe.code==="ERR_STREAM_PREMATURE_CLOSE")&&(pe=_e),!(!pe&&!oe)){for(;G.length;)G.shift()(pe);(Ee=fe)===null||Ee===void 0||Ee[o](),J.abort(),oe&&(pe||te.forEach(Pe=>Pe()),s.nextTick(le,pe,O))}}let ge;for(let _e=0;_e<W.length;_e++){const oe=W[_e],Ee=_e<W.length-1,Pe=_e>0,ve=Ee||V?.end!==!1,Me=_e===W.length-1;if(_(oe)){let N=function(c){c&&c.name!=="AbortError"&&c.code!=="ERR_STREAM_PREMATURE_CLOSE"&&de(c)};if(ve){const{destroy:c,cleanup:f}=F(oe,Ee,Pe);G.push(c),h(oe)&&Me&&te.push(f)}oe.on("error",N),h(oe)&&Me&&te.push(()=>{oe.removeListener("error",N)})}if(_e===0)if(typeof oe=="function"){if(ge=oe({signal:Q}),!R(ge))throw new g("Iterable, AsyncIterable or Stream","source",ge)}else R(oe)||u(oe)||T(oe)?ge=oe:ge=p.from(oe);else if(typeof oe=="function"){if(T(ge)){var ee;ge=A((ee=ge)===null||ee===void 0?void 0:ee.readable)}else ge=A(ge);if(ge=oe(ge,{signal:Q}),Ee){if(!R(ge,!0))throw new g("AsyncIterable",`transform[${_e-1}]`,ge)}else{var ue;j||(j=oa());const N=new j({objectMode:!0}),c=(ue=ge)===null||ue===void 0?void 0:ue.then;if(typeof c=="function")se++,c.call(ge,Z=>{O=Z,Z!=null&&N.write(Z),ve&&N.end(),s.nextTick(de)},Z=>{N.destroy(Z),s.nextTick(de,Z)});else if(R(ge,!0))se++,M(ge,N,de,{end:ve});else if(E(ge)||T(ge)){const Z=ge.readable||ge;se++,M(Z,N,de,{end:ve})}else throw new g("AsyncIterable or Promise","destination",ge);ge=N;const{destroy:f,cleanup:C}=F(ge,!1,!0);G.push(f),Me&&te.push(C)}}else if(_(oe)){if(u(ge)){se+=2;const N=K(ge,oe,de,{end:ve});h(oe)&&Me&&te.push(N)}else if(T(ge)||E(ge)){const N=ge.readable||ge;se++,M(N,oe,de,{end:ve})}else if(R(ge))se++,M(ge,oe,de,{end:ve});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ge);ge=oe}else if(B(oe)){if(u(ge))se++,Y(A(ge),oe,de,{end:ve});else if(E(ge)||R(ge))se++,Y(ge,oe,de,{end:ve});else if(T(ge))se++,Y(ge.readable,oe,de,{end:ve});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ge);ge=oe}else ge=p.from(oe)}return(Q!=null&&Q.aborted||U!=null&&U.aborted)&&s.nextTick(re),ge}function K(W,le,V,{end:J}){let Q=!1;if(le.on("close",()=>{Q||V(new m)}),W.pipe(le,{end:!1}),J){let U=function(){Q=!0,le.end()};P(W)?s.nextTick(U):W.once("end",U)}else V();return i(W,{readable:!0,writable:!1},U=>{const te=W._readableState;U&&U.code==="ERR_STREAM_PREMATURE_CLOSE"&&te&&te.ended&&!te.errored&&!te.errorEmitted?W.once("end",V).once("error",V):V(U)}),i(le,{readable:!1,writable:!0},V)}return Jr={pipelineImpl:H,pipeline:b},Jr}var Qr,Pi;function la(){if(Pi)return Qr;Pi=1;const{pipeline:s}=Vn(),e=et(),{destroyer:t}=At(),{isNodeStream:r,isReadable:o,isWritable:i,isWebStream:a,isTransformStream:n,isWritableStream:p,isReadableStream:l}=rt(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:g,ERR_MISSING_ARGS:y}}=Ue(),w=lt();return Qr=function(...S){if(S.length===0)throw new y("streams");if(S.length===1)return e.from(S[0]);const I=[...S];if(typeof S[0]=="function"&&(S[0]=e.from(S[0])),typeof S[S.length-1]=="function"){const j=S.length-1;S[j]=e.from(S[j])}for(let j=0;j<S.length;++j)if(!(!r(S[j])&&!a(S[j]))){if(j<S.length-1&&!(o(S[j])||l(S[j])||n(S[j])))throw new g(`streams[${j}]`,I[j],"must be readable");if(j>0&&!(i(S[j])||p(S[j])||n(S[j])))throw new g(`streams[${j}]`,I[j],"must be writable")}let v,R,h,u,_;function T(j){const q=u;u=null,q?q(j):j?_.destroy(j):!x&&!P&&_.destroy()}const B=S[0],E=s(S,T),P=!!(i(B)||p(B)||n(B)),x=!!(o(E)||l(E)||n(E));if(_=new e({writableObjectMode:!!(B!=null&&B.writableObjectMode),readableObjectMode:!!(E!=null&&E.readableObjectMode),writable:P,readable:x}),P){if(r(B))_._write=function(q,D,F){B.write(q,D)?F():v=F},_._final=function(q){B.end(),R=q},B.on("drain",function(){if(v){const q=v;v=null,q()}});else if(a(B)){const D=(n(B)?B.writable:B).getWriter();_._write=async function(F,X,A){try{await D.ready,D.write(F).catch(()=>{}),A()}catch(z){A(z)}},_._final=async function(F){try{await D.ready,D.close().catch(()=>{}),R=F}catch(X){F(X)}}}const j=n(E)?E.readable:E;w(j,()=>{if(R){const q=R;R=null,q()}})}if(x){if(r(E))E.on("readable",function(){if(h){const j=h;h=null,j()}}),E.on("end",function(){_.push(null)}),_._read=function(){for(;;){const j=E.read();if(j===null){h=_._read;return}if(!_.push(j))return}};else if(a(E)){const q=(n(E)?E.readable:E).getReader();_._read=async function(){for(;;)try{const{value:D,done:F}=await q.read();if(!_.push(D))return;if(F){_.push(null);return}}catch{return}}}}return _._destroy=function(j,q){!j&&u!==null&&(j=new d),h=null,v=null,R=null,u===null?q(j):(u=q,r(E)&&t(E,j))},_},Qr}var ki;function io(){if(ki)return dr;ki=1;const s=globalThis.AbortController||Zt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:e,ERR_INVALID_ARG_TYPE:t,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:o},AbortError:i}=Ue(),{validateAbortSignal:a,validateInteger:n,validateObject:p}=tr(),l=Fe().Symbol("kWeak"),d=Fe().Symbol("kResistStopPropagation"),{finished:g}=lt(),y=la(),{addAbortSignalNoValidate:w}=br(),{isWritable:m,isNodeStream:S}=rt(),{deprecate:I}=He(),{ArrayPrototypePush:v,Boolean:R,MathFloor:h,Number:u,NumberIsNaN:_,Promise:T,PromiseReject:B,PromiseResolve:E,PromisePrototypeThen:P,Symbol:x}=Fe(),j=x("kEmpty"),q=x("kEof");function D(U,te){if(te!=null&&p(te,"options"),te?.signal!=null&&a(te.signal,"options.signal"),S(U)&&!m(U))throw new e("stream",U,"must be writable");const re=y(this,U);return te!=null&&te.signal&&w(te.signal,re),re}function F(U,te){if(typeof U!="function")throw new t("fn",["Function","AsyncFunction"],U);te!=null&&p(te,"options"),te?.signal!=null&&a(te.signal,"options.signal");let re=1;te?.concurrency!=null&&(re=h(te.concurrency));let fe=re-1;return te?.highWaterMark!=null&&(fe=h(te.highWaterMark)),n(re,"options.concurrency",1),n(fe,"options.highWaterMark",0),fe+=re,async function*(){const O=He().AbortSignalAny([te?.signal].filter(R)),G=this,se=[],de={signal:O};let he,ge,ee=!1,ue=0;function _e(){ee=!0,oe()}function oe(){ue-=1,Ee()}function Ee(){ge&&!ee&&ue<re&&se.length<fe&&(ge(),ge=null)}async function Pe(){try{for await(let ve of G){if(ee)return;if(O.aborted)throw new i;try{if(ve=U(ve,de),ve===j)continue;ve=E(ve)}catch(Me){ve=B(Me)}ue+=1,P(ve,oe,_e),se.push(ve),he&&(he(),he=null),!ee&&(se.length>=fe||ue>=re)&&await new T(Me=>{ge=Me})}se.push(q)}catch(ve){const Me=B(ve);P(Me,oe,_e),se.push(Me)}finally{ee=!0,he&&(he(),he=null)}}Pe();try{for(;;){for(;se.length>0;){const ve=await se[0];if(ve===q)return;if(O.aborted)throw new i;ve!==j&&(yield ve),se.shift(),Ee()}await new T(ve=>{he=ve})}}finally{ee=!0,ge&&(ge(),ge=null)}}.call(this)}function X(U=void 0){return U!=null&&p(U,"options"),U?.signal!=null&&a(U.signal,"options.signal"),async function*(){let re=0;for await(const pe of this){var fe;if(U!=null&&(fe=U.signal)!==null&&fe!==void 0&&fe.aborted)throw new i({cause:U.signal.reason});yield[re++,pe]}}.call(this)}async function A(U,te=void 0){for await(const re of b.call(this,U,te))return!0;return!1}async function z(U,te=void 0){if(typeof U!="function")throw new t("fn",["Function","AsyncFunction"],U);return!await A.call(this,async(...re)=>!await U(...re),te)}async function M(U,te){for await(const re of b.call(this,U,te))return re}async function Y(U,te){if(typeof U!="function")throw new t("fn",["Function","AsyncFunction"],U);async function re(fe,pe){return await U(fe,pe),j}for await(const fe of F.call(this,re,te));}function b(U,te){if(typeof U!="function")throw new t("fn",["Function","AsyncFunction"],U);async function re(fe,pe){return await U(fe,pe)?fe:j}return F.call(this,re,te)}class H extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function K(U,te,re){var fe;if(typeof U!="function")throw new t("reducer",["Function","AsyncFunction"],U);re!=null&&p(re,"options"),re?.signal!=null&&a(re.signal,"options.signal");let pe=arguments.length>1;if(re!=null&&(fe=re.signal)!==null&&fe!==void 0&&fe.aborted){const he=new i(void 0,{cause:re.signal.reason});throw this.once("error",()=>{}),await g(this.destroy(he)),he}const O=new s,G=O.signal;if(re!=null&&re.signal){const he={once:!0,[l]:this,[d]:!0};re.signal.addEventListener("abort",()=>O.abort(),he)}let se=!1;try{for await(const he of this){var de;if(se=!0,re!=null&&(de=re.signal)!==null&&de!==void 0&&de.aborted)throw new i;pe?te=await U(te,he,{signal:G}):(te=he,pe=!0)}if(!se&&!pe)throw new H}finally{O.abort()}return te}async function W(U){U!=null&&p(U,"options"),U?.signal!=null&&a(U.signal,"options.signal");const te=[];for await(const fe of this){var re;if(U!=null&&(re=U.signal)!==null&&re!==void 0&&re.aborted)throw new i(void 0,{cause:U.signal.reason});v(te,fe)}return te}function le(U,te){const re=F.call(this,U,te);return async function*(){for await(const pe of re)yield*pe}.call(this)}function V(U){if(U=u(U),_(U))return 0;if(U<0)throw new o("number",">= 0",U);return U}function J(U,te=void 0){return te!=null&&p(te,"options"),te?.signal!=null&&a(te.signal,"options.signal"),U=V(U),async function*(){var fe;if(te!=null&&(fe=te.signal)!==null&&fe!==void 0&&fe.aborted)throw new i;for await(const O of this){var pe;if(te!=null&&(pe=te.signal)!==null&&pe!==void 0&&pe.aborted)throw new i;U--<=0&&(yield O)}}.call(this)}function Q(U,te=void 0){return te!=null&&p(te,"options"),te?.signal!=null&&a(te.signal,"options.signal"),U=V(U),async function*(){var fe;if(te!=null&&(fe=te.signal)!==null&&fe!==void 0&&fe.aborted)throw new i;for await(const O of this){var pe;if(te!=null&&(pe=te.signal)!==null&&pe!==void 0&&pe.aborted)throw new i;if(U-- >0&&(yield O),U<=0)return}}.call(this)}return dr.streamReturningOperators={asIndexedPairs:I(X,"readable.asIndexedPairs will be removed in a future version."),drop:J,filter:b,flatMap:le,map:F,take:Q,compose:D},dr.promiseReturningOperators={every:z,forEach:Y,reduce:K,toArray:W,some:A,find:M},dr}var zr,Mi;function ua(){if(Mi)return zr;Mi=1;const{ArrayPrototypePop:s,Promise:e}=Fe(),{isIterable:t,isNodeStream:r,isWebStream:o}=rt(),{pipelineImpl:i}=Vn(),{finished:a}=lt();ca();function n(...p){return new e((l,d)=>{let g,y;const w=p[p.length-1];if(w&&typeof w=="object"&&!r(w)&&!t(w)&&!o(w)){const m=s(p);g=m.signal,y=m.end}i(p,(m,S)=>{m?d(m):l(S)},{signal:g,end:y})})}return zr={finished:a,pipeline:n},zr}var Bi;function ca(){if(Bi)return Rr.exports;Bi=1;const{Buffer:s}=tt(),{ObjectDefineProperty:e,ObjectKeys:t,ReflectApply:r}=Fe(),{promisify:{custom:o}}=He(),{streamReturningOperators:i,promiseReturningOperators:a}=io(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:n}}=Ue(),p=la(),{setDefaultHighWaterMark:l,getDefaultHighWaterMark:d}=mr(),{pipeline:g}=Vn(),{destroyer:y}=At(),w=lt(),m=ua(),S=rt(),I=Rr.exports=Gn().Stream;I.isDestroyed=S.isDestroyed,I.isDisturbed=S.isDisturbed,I.isErrored=S.isErrored,I.isReadable=S.isReadable,I.isWritable=S.isWritable,I.Readable=wr();for(const R of t(i)){let u=function(..._){if(new.target)throw n();return I.Readable.from(r(h,this,_))};const h=i[R];e(u,"name",{__proto__:null,value:h.name}),e(u,"length",{__proto__:null,value:h.length}),e(I.Readable.prototype,R,{__proto__:null,value:u,enumerable:!1,configurable:!0,writable:!0})}for(const R of t(a)){let u=function(..._){if(new.target)throw n();return r(h,this,_)};const h=a[R];e(u,"name",{__proto__:null,value:h.name}),e(u,"length",{__proto__:null,value:h.length}),e(I.Readable.prototype,R,{__proto__:null,value:u,enumerable:!1,configurable:!0,writable:!0})}I.Writable=Wn(),I.Duplex=et(),I.Transform=aa(),I.PassThrough=oa(),I.pipeline=g;const{addAbortSignal:v}=br();return I.addAbortSignal=v,I.finished=w,I.destroy=y,I.compose=p,I.setDefaultHighWaterMark=l,I.getDefaultHighWaterMark=d,e(I,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return m}}),e(g,o,{__proto__:null,enumerable:!0,get(){return m.pipeline}}),e(w,o,{__proto__:null,enumerable:!0,get(){return m.finished}}),I.Stream=I,I._isUint8Array=function(h){return h instanceof Uint8Array},I._uint8ArrayToBuffer=function(h){return s.from(h.buffer,h.byteOffset,h.byteLength)},Rr.exports}var $i;function da(){return $i||($i=1,(function(s){const e=ca(),t=ua(),r=e.Readable.destroy;s.exports=e.Readable,s.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,s.exports._isUint8Array=e._isUint8Array,s.exports.isDisturbed=e.isDisturbed,s.exports.isErrored=e.isErrored,s.exports.isReadable=e.isReadable,s.exports.Readable=e.Readable,s.exports.Writable=e.Writable,s.exports.Duplex=e.Duplex,s.exports.Transform=e.Transform,s.exports.PassThrough=e.PassThrough,s.exports.addAbortSignal=e.addAbortSignal,s.exports.finished=e.finished,s.exports.destroy=e.destroy,s.exports.destroy=r,s.exports.pipeline=e.pipeline,s.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return t}}),s.exports.Stream=e.Stream,s.exports.default=s.exports})(Ir)),Ir.exports}var fa=da();const Xr=Symbol("iter");function Yt(s,e,t=4){if(t===0)return Object.assign(s,e);for(const r in e)s[r]=Yt(s[r]||Object.create(null),e[r],t-1);return s}function ha(s,e,t=4){let r=!1;for(const o in s)if(o in e){const i=t===0?null:ha(s[o],e[o],t-1);if(i!==!1)r=r||Object.create(null),r[o]=i;else if(t===3)return!1}return r}function pa(s,e,t=4){let r=!1;for(const o in s)if(!(o in e))r=r||Object.create(null),r[o]=t===0?null:Yt({},s[o],t-1);else if(t!==0){const i=pa(s[o],e[o],t-1);if(i!==!1)r=r||Object.create(null),r[o]=i;else if(t===3)return!1}return r}class so{constructor(e={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=e.factory||Nt}_termFromId(e){if(e[0]==="."){const t=this._entities,r=e.split(".");return this._factory.quad(this._termFromId(t[r[1]]),this._termFromId(t[r[2]]),this._termFromId(t[r[3]]),r[4]&&this._termFromId(t[r[4]]))}return zt(e,this._factory)}_termToNumericId(e){if(e.termType==="Quad"){const t=this._termToNumericId(e.subject),r=this._termToNumericId(e.predicate),o=this._termToNumericId(e.object);let i;return t&&r&&o&&(Bn(e.graph)||(i=this._termToNumericId(e.graph)))&&this._ids[i?`.${t}.${r}.${o}.${i}`:`.${t}.${r}.${o}`]}return this._ids[Rt(e)]}_termToNewNumericId(e){const t=e&&e.termType==="Quad"?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${Bn(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:Rt(e);return this._ids[t]||(this._ids[this._entities[++this._id]=t]=this._id)}createBlankNode(e){let t,r;if(e)for(t=e=`_:${e}`,r=1;this._ids[t];)t=e+r++;else do t=`_:b${this._blankNodeIndex++}`;while(this._ids[t]);return this._ids[t]=++this._id,this._entities[this._id]=t,this._factory.blankNode(t.substr(2))}}class Ge{constructor(e,t){this._size=0,this._graphs=Object.create(null),!t&&e&&!e[0]&&typeof e.match!="function"&&(t=e,e=null),t=t||{},this._factory=t.factory||Nt,this._entityIndex=t.entityIndex||new so({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),e&&this.addAll(e)}get size(){let e=this._size;if(e!==null)return e;e=0;const t=this._graphs;let r,o;for(const i in t)for(const a in r=t[i].subjects)for(const n in o=r[a])e+=Object.keys(o[n]).length;return this._size=e}_addToIndex(e,t,r,o){const i=e[t]||(e[t]={}),a=i[r]||(i[r]={}),n=o in a;return n||(a[o]=null),!n}_removeFromIndex(e,t,r,o){const i=e[t],a=i[r];delete a[o];for(const n in a)return;delete i[r];for(const n in i)return;delete e[t]}*_findInIndex(e,t,r,o,i,a,n,p){let l,d,g;const y=this._entities,w=this._termFromId(y[p]),m={subject:null,predicate:null,object:null};t&&((l=e,e={})[t]=l[t]);for(const S in e)if(d=e[S]){m[i]=this._termFromId(y[S]),r&&((l=d,d={})[r]=l[r]);for(const I in d)if(g=d[I]){m[a]=this._termFromId(y[I]);const v=o?o in g?[o]:[]:Object.keys(g);for(let R=0;R<v.length;R++)m[n]=this._termFromId(y[v[R]]),yield this._factory.quad(m.subject,m.predicate,m.object,w)}}}_loop(e,t){for(const r in e)t(r)}_loopByKey0(e,t,r){let o,i;if(o=e[t])for(i in o)r(i)}_loopByKey1(e,t,r){let o,i;for(o in e)i=e[o],i[t]&&r(o)}_loopBy2Keys(e,t,r,o){let i,a,n;if((i=e[t])&&(a=i[r]))for(n in a)o(n)}_countInIndex(e,t,r,o){let i=0,a,n,p;t&&((a=e,e={})[t]=a[t]);for(const l in e)if(n=e[l]){r&&((a=n,n={})[r]=a[r]);for(const d in n)(p=n[d])&&(o?o in p&&i++:i+=Object.keys(p).length)}return i}_getGraphs(e){return e=e===""?1:e&&(this._termToNumericId(e)||-1),typeof e!="number"?this._graphs:{[e]:this._graphs[e]}}_uniqueEntities(e){const t=Object.create(null);return r=>{r in t||(t[r]=!0,e(this._termFromId(this._entities[r],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,t,r,o){t||(o=e.graph,r=e.object,t=e.predicate,e=e.subject),o=o?this._termToNewNumericId(o):1;let i=this._graphs[o];return i||(i=this._graphs[o]={subjects:{},predicates:{},objects:{}},Object.freeze(i)),e=this._termToNewNumericId(e),t=this._termToNewNumericId(t),r=this._termToNewNumericId(r),this._addToIndex(i.subjects,e,t,r)?(this._addToIndex(i.predicates,t,r,e),this._addToIndex(i.objects,r,e,t),this._size=null,!0):!1}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}delete(e){return this.removeQuad(e),this}has(e,t,r,o){return e&&e.subject&&({subject:e,predicate:t,object:r,graph:o}=e),!this.readQuads(e,t,r,o).next().done}import(e){return e.on("data",t=>{this.addQuad(t)}),e}removeQuad(e,t,r,o){t||({subject:e,predicate:t,object:r,graph:o}=e),o=o?this._termToNumericId(o):1;const i=this._graphs;let a,n,p;if(!(e=e&&this._termToNumericId(e))||!(t=t&&this._termToNumericId(t))||!(r=r&&this._termToNumericId(r))||!(a=i[o])||!(n=a.subjects[e])||!(p=n[t])||!(r in p))return!1;this._removeFromIndex(a.subjects,e,t,r),this._removeFromIndex(a.predicates,t,r,e),this._removeFromIndex(a.objects,r,e,t),this._size!==null&&this._size--;for(e in a.subjects)return!0;return delete i[o],!0}removeQuads(e){for(let t=0;t<e.length;t++)this.removeQuad(e[t])}remove(e){return e.on("data",t=>{this.removeQuad(t)}),e}removeMatches(e,t,r,o){const i=new fa.Readable({objectMode:!0}),a=this.readQuads(e,t,r,o);return i._read=n=>{for(;--n>=0;){const{done:p,value:l}=a.next();if(p){i.push(null);return}i.push(l)}},this.remove(i)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,t,r,o){return[...this.readQuads(e,t,r,o)]}*readQuads(e,t,r,o){const i=this._getGraphs(o);let a,n,p,l;if(!(e&&!(n=this._termToNumericId(e))||t&&!(p=this._termToNumericId(t))||r&&!(l=this._termToNumericId(r))))for(const d in i)(a=i[d])&&(n?l?yield*this._findInIndex(a.objects,l,n,p,"object","subject","predicate",d):yield*this._findInIndex(a.subjects,n,p,null,"subject","predicate","object",d):p?yield*this._findInIndex(a.predicates,p,l,null,"predicate","object","subject",d):l?yield*this._findInIndex(a.objects,l,null,null,"object","subject","predicate",d):yield*this._findInIndex(a.subjects,null,null,null,"subject","predicate","object",d))}match(e,t,r,o){return new at(this,e,t,r,o,{entityIndex:this._entityIndex})}countQuads(e,t,r,o){const i=this._getGraphs(o);let a=0,n,p,l,d;if(e&&!(p=this._termToNumericId(e))||t&&!(l=this._termToNumericId(t))||r&&!(d=this._termToNumericId(r)))return 0;for(const g in i)(n=i[g])&&(e?r?a+=this._countInIndex(n.objects,d,p,l):a+=this._countInIndex(n.subjects,p,l,d):t?a+=this._countInIndex(n.predicates,l,d,p):a+=this._countInIndex(n.objects,d,p,l));return a}forEach(e,t,r,o,i){this.some(a=>(e(a,this),!1),t,r,o,i)}every(e,t,r,o,i){return!this.some(a=>!e(a,this),t,r,o,i)}some(e,t,r,o,i){for(const a of this.readQuads(t,r,o,i))if(e(a,this))return!0;return!1}getSubjects(e,t,r){const o=[];return this.forSubjects(i=>{o.push(i)},e,t,r),o}forSubjects(e,t,r,o){const i=this._getGraphs(o);let a,n,p;if(e=this._uniqueEntities(e),!(t&&!(n=this._termToNumericId(t))||r&&!(p=this._termToNumericId(r))))for(o in i)(a=i[o])&&(n?p?this._loopBy2Keys(a.predicates,n,p,e):this._loopByKey1(a.subjects,n,e):p?this._loopByKey0(a.objects,p,e):this._loop(a.subjects,e))}getPredicates(e,t,r){const o=[];return this.forPredicates(i=>{o.push(i)},e,t,r),o}forPredicates(e,t,r,o){const i=this._getGraphs(o);let a,n,p;if(e=this._uniqueEntities(e),!(t&&!(n=this._termToNumericId(t))||r&&!(p=this._termToNumericId(r))))for(o in i)(a=i[o])&&(n?p?this._loopBy2Keys(a.objects,p,n,e):this._loopByKey0(a.subjects,n,e):p?this._loopByKey1(a.predicates,p,e):this._loop(a.predicates,e))}getObjects(e,t,r){const o=[];return this.forObjects(i=>{o.push(i)},e,t,r),o}forObjects(e,t,r,o){const i=this._getGraphs(o);let a,n,p;if(e=this._uniqueEntities(e),!(t&&!(n=this._termToNumericId(t))||r&&!(p=this._termToNumericId(r))))for(o in i)(a=i[o])&&(n?p?this._loopBy2Keys(a.subjects,n,p,e):this._loopByKey1(a.objects,n,e):p?this._loopByKey0(a.predicates,p,e):this._loop(a.objects,e))}getGraphs(e,t,r){const o=[];return this.forGraphs(i=>{o.push(i)},e,t,r),o}forGraphs(e,t,r,o){for(const i in this._graphs)this.some(a=>(e(a.graph),!0),t,r,o,this._termFromId(this._entities[i]))}createBlankNode(e){return this._entityIndex.createBlankNode(e)}extractLists({remove:e=!1,ignoreErrors:t=!1}={}){const r={},o=t?(()=>!0):((n,p)=>{throw new Error(`${n.value} ${p}`)}),i=this.getQuads(null,Be.rdf.rest,Be.rdf.nil,null),a=e?[...i]:[];return i.forEach(n=>{const p=[];let l=!1,d,g;const y=n.graph;let w=n.subject;for(;w&&!l;){const m=this.getQuads(null,null,w,null),S=this.getQuads(w,null,null,null);let I,v=null,R=null,h=null;for(let u=0;u<S.length&&!l;u++)I=S[u],I.graph.equals(y)?d?l=o(w,"has non-list arcs out"):I.predicate.value===Be.rdf.first?v?l=o(w,"has multiple rdf:first arcs"):a.push(v=I):I.predicate.value===Be.rdf.rest?R?l=o(w,"has multiple rdf:rest arcs"):a.push(R=I):m.length?l=o(w,"can't be subject and object"):(d=I,g="subject"):l=o(w,"not confined to single graph");for(let u=0;u<m.length&&!l;++u)I=m[u],d?l=o(w,"can't have coreferences"):I.predicate.value===Be.rdf.rest?h?l=o(w,"has incoming rdf:rest arcs"):h=I:(d=I,g="object");v?p.unshift(v.object):l=o(w,"has no list head"),w=h&&h.subject}l?e=!1:d&&(r[d[g].value]=p)}),e&&this.removeQuads(a),r}addAll(e){if(e instanceof at&&(e=e.filtered),Array.isArray(e))this.addQuads(e);else if(e instanceof Ge&&e._entityIndex===this._entityIndex)e._size!==0&&(this._graphs=Yt(this._graphs,e._graphs),this._size=null);else for(const t of e)this.add(t);return this}contains(e){if(e instanceof at&&(e=e.filtered),e===this)return!0;if(!(e instanceof Ge)||this._entityIndex!==e._entityIndex)return e.every(l=>this.has(l));const t=this._graphs,r=e._graphs;let o,i,a,n,p;for(const l in r){if(!(o=t[l]))return!1;o=o.subjects;for(const d in i=r[l].subjects){if(!(a=o[d]))return!1;for(const g in n=i[d]){if(!(p=a[g]))return!1;for(const y in n[g])if(!(y in p))return!1}}}return!0}deleteMatches(e,t,r,o){for(const i of this.match(e,t,r,o))this.removeQuad(i);return this}difference(e){if(e&&e instanceof at&&(e=e.filtered),e===this)return new Ge({entityIndex:this._entityIndex});if(e instanceof Ge&&e._entityIndex===this._entityIndex){const t=new Ge({entityIndex:this._entityIndex}),r=pa(this._graphs,e._graphs);return r&&(t._graphs=r,t._size=null),t}return this.filter(t=>!e.has(t))}equals(e){return e instanceof at&&(e=e.filtered),e===this||this.size===e.size&&this.contains(e)}filter(e){const t=new Ge({entityIndex:this._entityIndex});for(const r of this)e(r,this)&&t.add(r);return t}intersection(e){if(e instanceof at&&(e=e.filtered),e===this){const t=new Ge({entityIndex:this._entityIndex});return t._graphs=Yt(Object.create(null),this._graphs),t._size=this._size,t}else if(e instanceof Ge&&this._entityIndex===e._entityIndex){const t=new Ge({entityIndex:this._entityIndex}),r=ha(e._graphs,this._graphs);return r&&(t._graphs=r,t._size=null),t}return this.filter(t=>e.has(t))}map(e){const t=new Ge({entityIndex:this._entityIndex});for(const r of this)t.add(e(r,this));return t}reduce(e,t){const r=this.readQuads();let o=t===void 0?r.next().value:t;for(const i of r)o=e(o,i,this);return o}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new na().quadsToString(this)}union(e){const t=new Ge({entityIndex:this._entityIndex});return t._graphs=Yt(Object.create(null),this._graphs),t._size=this._size,t.addAll(e),t}*[Symbol.iterator](){yield*this.readQuads()}}function Xe(s,e,t=0){const r=e[t];if(r&&!(r in s))return!1;let o=!1;for(const i in r?{[r]:s[r]}:s){const a=t===2?null:Xe(s[i],e,t+1);a!==!1&&(o=o||Object.create(null),o[i]=a)}return o}class at extends fa.Readable{constructor(e,t,r,o,i,a){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:t,predicate:r,object:o,graph:i,options:a})}get filtered(){if(!this._filtered){const{n3Store:e,graph:t,object:r,predicate:o,subject:i}=this,a=this._filtered=new Ge({factory:e._factory,entityIndex:this.options.entityIndex});let n,p,l;if(i&&!(n=a._termToNumericId(i))||o&&!(p=a._termToNumericId(o))||r&&!(l=a._termToNumericId(r)))return a;const d=e._getGraphs(t);for(const g in d){let y,w,m,S;(S=d[g])&&(!n&&p?(w=Xe(S.predicates,[p,l,n]))&&(y=Xe(S.subjects,[n,p,l]),m=Xe(S.objects,[l,n,p])):l?(m=Xe(S.objects,[l,n,p]))&&(y=Xe(S.subjects,[n,p,l]),w=Xe(S.predicates,[p,l,n])):(y=Xe(S.subjects,[n,p,l]))&&(w=Xe(S.predicates,[p,l,n]),m=Xe(S.objects,[l,n,p])),y&&(a._graphs[g]={subjects:y,predicates:w,objects:m}))}a._size=null}return this._filtered}get size(){return this.filtered.size}_read(e){e>0&&!this[Xr]&&(this[Xr]=this[Symbol.iterator]());const t=this[Xr];for(;--e>=0;){const{done:r,value:o}=t.next();if(r){this.push(null);return}this.push(o)}}addAll(e){return this.filtered.addAll(e)}contains(e){return this.filtered.contains(e)}deleteMatches(e,t,r,o){return this.filtered.deleteMatches(e,t,r,o)}difference(e){return this.filtered.difference(e)}equals(e){return this.filtered.equals(e)}every(e,t,r,o,i){return this.filtered.every(e,t,r,o,i)}filter(e){return this.filtered.filter(e)}forEach(e,t,r,o,i){return this.filtered.forEach(e,t,r,o,i)}import(e){return this.filtered.import(e)}intersection(e){return this.filtered.intersection(e)}map(e){return this.filtered.map(e)}some(e,t,r,o,i){return this.filtered.some(e,t,r,o,i)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(e){return this._filtered?this._filtered.union(e):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(e)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(e,t){return this.filtered.reduce(e,t)}toString(){return new na().quadsToString(this)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,t,r,o){return new at(this.filtered,e,t,r,o,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}var Kr={},Yr,qi;function Jn(){return qi||(qi=1,Yr=class ga{constructor(e,t=new Map,r=0){this.prefix=e,this._existing=t,this.counter=r}clone(){const{prefix:e,_existing:t,counter:r}=this;return new ga(e,new Map(t),r)}getId(e){const t=e&&this._existing.get(e);if(t)return t;const r=this.prefix+this.counter;return this.counter++,e&&this._existing.set(e,r),r}hasId(e){return this._existing.has(e)}getOldIds(){return[...this._existing.keys()]}}),Yr}var $t={},Zr={},Ui;function ao(){return Ui||(Ui=1,(function(s,e){if(s.setImmediate)return;var t=1,r={},o=!1,i=s.document,a;function n(R){typeof R!="function"&&(R=new Function(""+R));for(var h=new Array(arguments.length-1),u=0;u<h.length;u++)h[u]=arguments[u+1];var _={callback:R,args:h};return r[t]=_,a(t),t++}function p(R){delete r[R]}function l(R){var h=R.callback,u=R.args;switch(u.length){case 0:h();break;case 1:h(u[0]);break;case 2:h(u[0],u[1]);break;case 3:h(u[0],u[1],u[2]);break;default:h.apply(e,u);break}}function d(R){if(o)setTimeout(d,0,R);else{var h=r[R];if(h){o=!0;try{l(h)}finally{p(R),o=!1}}}}function g(){a=function(R){process.nextTick(function(){d(R)})}}function y(){if(s.postMessage&&!s.importScripts){var R=!0,h=s.onmessage;return s.onmessage=function(){R=!1},s.postMessage("","*"),s.onmessage=h,R}}function w(){var R="setImmediate$"+Math.random()+"$",h=function(u){u.source===s&&typeof u.data=="string"&&u.data.indexOf(R)===0&&d(+u.data.slice(R.length))};s.addEventListener?s.addEventListener("message",h,!1):s.attachEvent("onmessage",h),a=function(u){s.postMessage(R+u,"*")}}function m(){var R=new MessageChannel;R.port1.onmessage=function(h){var u=h.data;d(u)},a=function(h){R.port2.postMessage(h)}}function S(){var R=i.documentElement;a=function(h){var u=i.createElement("script");u.onreadystatechange=function(){d(h),u.onreadystatechange=null,R.removeChild(u),u=null},R.appendChild(u)}}function I(){a=function(R){setTimeout(d,0,R)}}var v=Object.getPrototypeOf&&Object.getPrototypeOf(s);v=v&&v.setTimeout?v:s,{}.toString.call(s.process)==="[object process]"?g():y()?w():s.MessageChannel?m():i&&"onreadystatechange"in i.createElement("script")?S():I(),v.setImmediate=n,v.clearImmediate=p})(typeof self>"u"?typeof Yn>"u"?Zr:Yn:self)),Zr}var Hi;function _a(){if(Hi)return $t;Hi=1,ao(),$t.setImmediate=setImmediate,$t.crypto=globalThis.crypto;const s=[];for(let e=0;e<=255;++e)s.push(e.toString(16).padStart(2,"0"));return $t.bufferToHex=function(t){let r="";const o=new Uint8Array(t);for(let i=0;i<o.length;++i)r+=s[o[i]];return r},$t}var en,Gi;function ya(){if(Gi)return en;Gi=1;const{bufferToHex:s,crypto:e}=_a(),t=new Map([["sha256","SHA-256"],["SHA256","SHA-256"],["SHA-256","SHA-256"],["sha384","SHA-384"],["SHA384","SHA-384"],["SHA-384","SHA-384"],["sha512","SHA-512"],["SHA512","SHA-512"],["SHA-512","SHA-512"]]);return en=class{constructor(o){if(!(e&&e.subtle))throw new Error("crypto.subtle not found.");if(!t.has(o))throw new Error(`Unsupported algorithm "${o}".`);this.algorithm=t.get(o),this._content=""}update(o){this._content+=o}async digest(){const o=new TextEncoder().encode(this._content),i=await e.subtle.digest(this.algorithm,o);return s(i)}},en}var tn,Wi;function ba(){return Wi||(Wi=1,tn=class{constructor(e){this.current=e.sort(),this.done=!1,this.dir=new Map;for(let t=0;t<e.length;++t)this.dir.set(e[t],!0)}hasNext(){return!this.done}next(){const{current:e,dir:t}=this,r=e.slice();let o=null,i=0;const a=e.length;for(let n=0;n<a;++n){const p=e[n],l=t.get(p);(o===null||p>o)&&(l&&n>0&&p>e[n-1]||!l&&n<a-1&&p>e[n+1])&&(o=p,i=n)}if(o===null)this.done=!0;else{const n=t.get(o)?i-1:i+1;e[i]=e[n],e[n]=o;for(const p of e)p>o&&t.set(p,!t.get(p))}return r}}),tn}var rn,Vi;function Qn(){if(Vi)return rn;Vi=1;const e="http://www.w3.org/1999/02/22-rdf-syntax-ns#"+"langString",t="http://www.w3.org/2001/XMLSchema#string",r="NamedNode",o="BlankNode",i="Literal",a="DefaultGraph",n={};(()=>{const u="A-Za-z-----------"+"_",_=u+"0-9---",T="_:((?:["+u+"0-9])(?:(?:["+_+".])*(?:["+_+"]))?)",P='(?:<((?:[^\0- <>"{}|^`\\\\]|'+"\\\\u[0-9A-Fa-f]{4}"+"|"+"\\\\U[0-9A-Fa-f]{8}"+")*)>)",x=T,j='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',q="(?:\\^\\^"+P+")",F="(?:"+j+"(?:"+q+"|"+"(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))"+")?)",X="[ \\t]+",A="[ \\t]*",z="(?:"+P+"|"+x+")"+X,M=P+X,Y="(?:"+P+"|"+x+"|"+F+")"+A,b="(?:\\.|(?:(?:"+P+"|"+x+")"+A+"\\.))";n.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,n.empty=new RegExp("^"+A+"$"),n.quad=new RegExp("^"+A+z+M+Y+b+A+"$")})(),rn=class $n{static parse(u){const _=[],T={},B=u.split(n.eoln);let E=0;for(const P of B){if(E++,n.empty.test(P))continue;const x=P.match(n.quad);if(x===null)throw new Error("N-Quads parse error on line "+E+".");const j={subject:null,predicate:null,object:null,graph:null};if(x[1]!==void 0?j.subject={termType:r,value:R(x[1])}:j.subject={termType:o,value:x[2]},j.predicate={termType:r,value:R(x[3])},x[4]!==void 0?j.object={termType:r,value:R(x[4])}:x[5]!==void 0?j.object={termType:o,value:x[5]}:(j.object={termType:i,value:void 0,datatype:{termType:r}},x[7]!==void 0?j.object.datatype.value=R(x[7]):x[8]!==void 0?(j.object.datatype.value=e,j.object.language=x[8]):j.object.datatype.value=t,j.object.value=w(x[6])),x[9]!==void 0?j.graph={termType:r,value:R(x[9])}:x[10]!==void 0?j.graph={termType:o,value:x[10]}:j.graph={termType:a,value:""},!(j.graph.value in T))T[j.graph.value]=[j],_.push(j);else{let q=!0;const D=T[j.graph.value];for(const F of D)if(p(F,j)){q=!1;break}q&&(D.push(j),_.push(j))}}return _}static serialize(u){const _=[];for(const T of u)_.push($n.serializeQuad(T));return _.sort().join("")}static serializeQuadComponents(u,_,T,B){let E="";return u.termType===r?E+=`<${I(u.value)}>`:E+=`_:${u.value}`,_.termType===r?E+=` <${I(_.value)}> `:E+=` _:${_.value} `,T.termType===r?E+=`<${I(T.value)}>`:T.termType===o?E+=`_:${T.value}`:(E+=`"${g(T.value)}"`,T.datatype.value===e?T.language&&(E+=`@${T.language}`):T.datatype.value!==t&&(E+=`^^<${I(T.datatype.value)}>`)),B.termType===r?E+=` <${I(B.value)}>`:B.termType===o&&(E+=` _:${B.value}`),E+=` .
`,E}static serializeQuad(u){return $n.serializeQuadComponents(u.subject,u.predicate,u.object,u.graph)}};function p(h,u){return!(h.subject.termType===u.subject.termType&&h.object.termType===u.object.termType)||!(h.subject.value===u.subject.value&&h.predicate.value===u.predicate.value&&h.object.value===u.object.value)?!1:h.object.termType!==i?!0:h.object.datatype.termType===u.object.datatype.termType&&h.object.language===u.object.language&&h.object.datatype.value===u.object.datatype.value}const l=/[\u0000-\u001F\u007F"\\]/g,d=[];for(let h=0;h<=127;++h)l.test(String.fromCharCode(h))&&(d[h]="\\u"+h.toString(16).toUpperCase().padStart(4,"0"),l.lastIndex=0);d["\b".codePointAt(0)]="\\b",d["	".codePointAt(0)]="\\t",d[`
`.codePointAt(0)]="\\n",d["\f".codePointAt(0)]="\\f",d["\r".codePointAt(0)]="\\r",d['"'.codePointAt(0)]='\\"',d["\\".codePointAt(0)]="\\\\";function g(h){return l.test(h)?h.replace(l,function(u){return d[u.codePointAt(0)]}):h}const y=/(?:\\([btnfr"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function w(h){return y.test(h)?h.replace(y,function(u,_,T,B){if(_)switch(_){case"b":return"\b";case"t":return"	";case"n":return`
`;case"f":return"\f";case"r":return"\r";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(T)return String.fromCharCode(parseInt(T,16));if(B)return String.fromCodePoint(parseInt(B,16))}):h}const m=/[\u0000-\u0020<>"{}|^`\\]/g,S=[];for(let h=0;h<=127;++h)m.test(String.fromCharCode(h))&&(S[h]="\\u"+h.toString(16).toUpperCase().padStart(4,"0"),m.lastIndex=0);function I(h){return m.test(h)?h.replace(m,function(u){return S[u.codePointAt(0)]}):h}const v=/(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function R(h){return v.test(h)?h.replace(v,function(u,_,T){if(_)return String.fromCharCode(parseInt(_,16));if(T)return String.fromCodePoint(parseInt(T,16))}):h}return rn}var nn,Ji;function oo(){if(Ji)return nn;Ji=1;const s=Jn(),e=ya(),t=ba(),r=Qn(),{setImmediate:o}=_a();nn=class{constructor({createMessageDigest:n=null,messageDigestAlgorithm:p="sha256",canonicalIdMap:l=new Map,maxWorkFactor:d=1,maxDeepIterations:g=-1,signal:y=null}={}){this.name="RDFC-1.0",this.blankNodeInfo=new Map,this.canonicalIssuer=new s("c14n",l),this.createMessageDigest=n||(()=>new e(p)),this.maxWorkFactor=d,this.maxDeepIterations=g,this.remainingDeepIterations=0,this.signal=y,this.quads=null}async main(n){this.quads=n;for(const m of n)this._addBlankNodeQuadInfo({quad:m,component:m.subject}),this._addBlankNodeQuadInfo({quad:m,component:m.object}),this._addBlankNodeQuadInfo({quad:m,component:m.graph});const p=new Map,l=[...this.blankNodeInfo.keys()];let d=0;for(const m of l)++d%100===0&&await this._yield(),await this._hashAndTrackBlankNode({id:m,hashToBlankNodes:p});const g=[...p.keys()].sort(),y=[];for(const m of g){const S=p.get(m);if(S.length>1){y.push(S);continue}const I=S[0];this.canonicalIssuer.getId(I)}if(this.maxDeepIterations<0)if(this.maxWorkFactor===0)this.maxDeepIterations=0;else if(this.maxWorkFactor===1/0)this.maxDeepIterations=1/0;else{const m=y.reduce((S,I)=>S+I.length,0);this.maxDeepIterations=m**this.maxWorkFactor}this.maxDeepIterations>Number.MAX_SAFE_INTEGER&&(this.maxDeepIterations=1/0),this.remainingDeepIterations=this.maxDeepIterations;for(const m of y){const S=[];for(const I of m){if(this.canonicalIssuer.hasId(I))continue;const v=new s("b");v.getId(I);const R=await this.hashNDegreeQuads(I,v);S.push(R)}S.sort(i);for(const I of S){const v=I.issuer.getOldIds();for(const R of v)this.canonicalIssuer.getId(R)}}const w=[];for(const m of this.quads){const S=r.serializeQuadComponents(this._componentWithCanonicalId(m.subject),m.predicate,this._componentWithCanonicalId(m.object),this._componentWithCanonicalId(m.graph));w.push(S)}return w.sort(),w.join("")}async hashFirstDegreeQuads(n){const p=[],l=this.blankNodeInfo.get(n),d=l.quads;for(const y of d)p.push(r.serializeQuadComponents(this.modifyFirstDegreeComponent(n,y.subject,"subject"),y.predicate,this.modifyFirstDegreeComponent(n,y.object,"object"),this.modifyFirstDegreeComponent(n,y.graph,"graph")));p.sort();const g=this.createMessageDigest();for(const y of p)g.update(y);return l.hash=await g.digest(),l.hash}async hashRelatedBlankNode(n,p,l,d){const g=this.createMessageDigest();g.update(d),d!=="g"&&g.update(this.getRelatedPredicate(p));let y;return this.canonicalIssuer.hasId(n)?y="_:"+this.canonicalIssuer.getId(n):l.hasId(n)?y="_:"+l.getId(n):y=this.blankNodeInfo.get(n).hash,g.update(y),g.digest()}async hashNDegreeQuads(n,p){if(this.remainingDeepIterations===0)throw new Error(`Maximum deep iterations exceeded (${this.maxDeepIterations}).`);this.remainingDeepIterations--;const l=this.createMessageDigest(),d=await this.createHashToRelated(n,p),g=[...d.keys()].sort();for(const y of g){l.update(y);let w="",m;const S=new t(d.get(y));let I=0;for(;S.hasNext();){const v=S.next();if(++I%3===0){if(this.signal&&this.signal.aborted)throw new Error(`Abort signal received: "${this.signal.reason}".`);await this._yield()}let R=p.clone(),h="";const u=[];let _=!1;for(const T of v)if(this.canonicalIssuer.hasId(T)?h+="_:"+this.canonicalIssuer.getId(T):(R.hasId(T)||u.push(T),h+="_:"+R.getId(T)),w.length!==0&&h>w){_=!0;break}if(!_){for(const T of u){const B=await this.hashNDegreeQuads(T,R);if(h+="_:"+R.getId(T),h+=`<${B.hash}>`,R=B.issuer,w.length!==0&&h>w){_=!0;break}}_||(w.length===0||h<w)&&(w=h,m=R)}}l.update(w),p=m}return{hash:await l.digest(),issuer:p}}modifyFirstDegreeComponent(n,p){return p.termType!=="BlankNode"?p:{termType:"BlankNode",value:p.value===n?"a":"z"}}getRelatedPredicate(n){return`<${n.predicate.value}>`}async createHashToRelated(n,p){const l=new Map,d=this.blankNodeInfo.get(n).quads;let g=0;for(const y of d)++g%100===0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:y,component:y.subject,position:"s",id:n,issuer:p,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:y,component:y.object,position:"o",id:n,issuer:p,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:y,component:y.graph,position:"g",id:n,issuer:p,hashToRelated:l})]);return l}async _hashAndTrackBlankNode({id:n,hashToBlankNodes:p}){const l=await this.hashFirstDegreeQuads(n),d=p.get(l);d?d.push(n):p.set(l,[n])}_addBlankNodeQuadInfo({quad:n,component:p}){if(p.termType!=="BlankNode")return;const l=p.value,d=this.blankNodeInfo.get(l);d?d.quads.add(n):this.blankNodeInfo.set(l,{quads:new Set([n]),hash:null})}async _addRelatedBlankNodeHash({quad:n,component:p,position:l,id:d,issuer:g,hashToRelated:y}){if(!(p.termType==="BlankNode"&&p.value!==d))return;const w=p.value,m=await this.hashRelatedBlankNode(w,n,g,l),S=y.get(m);S?S.push(w):y.set(m,[w])}_componentWithCanonicalId(n){return n.termType==="BlankNode"&&!n.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(n.value)}:n}async _yield(){return new Promise(n=>o(n))}};function i(a,n){return a.hash<n.hash?-1:a.hash>n.hash?1:0}return nn}var sn,Qi;function lo(){if(Qi)return sn;Qi=1;const s=Jn(),e=ya(),t=ba(),r=Qn();sn=class{constructor({createMessageDigest:a=null,messageDigestAlgorithm:n="sha256",canonicalIdMap:p=new Map,maxWorkFactor:l=1,maxDeepIterations:d=-1,timeout:g=0}={}){this.name="RDFC-1.0",this.blankNodeInfo=new Map,this.canonicalIssuer=new s("c14n",p),this.createMessageDigest=a||(()=>new e(n)),this.maxWorkFactor=l,this.maxDeepIterations=d,this.remainingDeepIterations=0,this.timeout=g,g>0&&(this.startTime=Date.now()),this.quads=null}main(a){this.quads=a;for(const y of a)this._addBlankNodeQuadInfo({quad:y,component:y.subject}),this._addBlankNodeQuadInfo({quad:y,component:y.object}),this._addBlankNodeQuadInfo({quad:y,component:y.graph});const n=new Map,p=[...this.blankNodeInfo.keys()];for(const y of p)this._hashAndTrackBlankNode({id:y,hashToBlankNodes:n});const l=[...n.keys()].sort(),d=[];for(const y of l){const w=n.get(y);if(w.length>1){d.push(w);continue}const m=w[0];this.canonicalIssuer.getId(m)}if(this.maxDeepIterations<0)if(this.maxWorkFactor===0)this.maxDeepIterations=0;else if(this.maxWorkFactor===1/0)this.maxDeepIterations=1/0;else{const y=d.reduce((w,m)=>w+m.length,0);this.maxDeepIterations=y**this.maxWorkFactor}this.maxDeepIterations>Number.MAX_SAFE_INTEGER&&(this.maxDeepIterations=1/0),this.remainingDeepIterations=this.maxDeepIterations;for(const y of d){const w=[];for(const m of y){if(this.canonicalIssuer.hasId(m))continue;const S=new s("b");S.getId(m);const I=this.hashNDegreeQuads(m,S);w.push(I)}w.sort(o);for(const m of w){const S=m.issuer.getOldIds();for(const I of S)this.canonicalIssuer.getId(I)}}const g=[];for(const y of this.quads){const w=r.serializeQuadComponents(this._componentWithCanonicalId(y.subject),y.predicate,this._componentWithCanonicalId(y.object),this._componentWithCanonicalId(y.graph));g.push(w)}return g.sort(),g.join("")}hashFirstDegreeQuads(a){const n=[],p=this.blankNodeInfo.get(a),l=p.quads;for(const g of l)n.push(r.serializeQuadComponents(this.modifyFirstDegreeComponent(a,g.subject,"subject"),g.predicate,this.modifyFirstDegreeComponent(a,g.object,"object"),this.modifyFirstDegreeComponent(a,g.graph,"graph")));n.sort();const d=this.createMessageDigest();for(const g of n)d.update(g);return p.hash=d.digest(),p.hash}hashRelatedBlankNode(a,n,p,l){const d=this.createMessageDigest();d.update(l),l!=="g"&&d.update(this.getRelatedPredicate(n));let g;return this.canonicalIssuer.hasId(a)?g="_:"+this.canonicalIssuer.getId(a):p.hasId(a)?g="_:"+p.getId(a):g=this.blankNodeInfo.get(a).hash,d.update(g),d.digest()}hashNDegreeQuads(a,n){if(this.remainingDeepIterations===0)throw new Error(`Maximum deep iterations exceeded (${this.maxDeepIterations}).`);this.remainingDeepIterations--;const p=this.createMessageDigest(),l=this.createHashToRelated(a,n),d=[...l.keys()].sort();for(const g of d){p.update(g);let y="",w;const m=new t(l.get(g));let S=0;for(;m.hasNext();){const I=m.next();if(++S%3===0&&this.timeout>0&&Date.now()-this.startTime>this.timeout)throw new Error("Canonize timeout.");let v=n.clone(),R="";const h=[];let u=!1;for(const _ of I)if(this.canonicalIssuer.hasId(_)?R+="_:"+this.canonicalIssuer.getId(_):(v.hasId(_)||h.push(_),R+="_:"+v.getId(_)),y.length!==0&&R>y){u=!0;break}if(!u){for(const _ of h){const T=this.hashNDegreeQuads(_,v);if(R+="_:"+v.getId(_),R+=`<${T.hash}>`,v=T.issuer,y.length!==0&&R>y){u=!0;break}}u||(y.length===0||R<y)&&(y=R,w=v)}}p.update(y),n=w}return{hash:p.digest(),issuer:n}}modifyFirstDegreeComponent(a,n){return n.termType!=="BlankNode"?n:{termType:"BlankNode",value:n.value===a?"a":"z"}}getRelatedPredicate(a){return`<${a.predicate.value}>`}createHashToRelated(a,n){const p=new Map,l=this.blankNodeInfo.get(a).quads;for(const d of l)this._addRelatedBlankNodeHash({quad:d,component:d.subject,position:"s",id:a,issuer:n,hashToRelated:p}),this._addRelatedBlankNodeHash({quad:d,component:d.object,position:"o",id:a,issuer:n,hashToRelated:p}),this._addRelatedBlankNodeHash({quad:d,component:d.graph,position:"g",id:a,issuer:n,hashToRelated:p});return p}_hashAndTrackBlankNode({id:a,hashToBlankNodes:n}){const p=this.hashFirstDegreeQuads(a),l=n.get(p);l?l.push(a):n.set(p,[a])}_addBlankNodeQuadInfo({quad:a,component:n}){if(n.termType!=="BlankNode")return;const p=n.value,l=this.blankNodeInfo.get(p);l?l.quads.add(a):this.blankNodeInfo.set(p,{quads:new Set([a]),hash:null})}_addRelatedBlankNodeHash({quad:a,component:n,position:p,id:l,issuer:d,hashToRelated:g}){if(!(n.termType==="BlankNode"&&n.value!==l))return;const y=n.value,w=this.hashRelatedBlankNode(y,a,d,p),m=g.get(w);m?m.push(y):g.set(w,[y])}_componentWithCanonicalId(a){return a.termType==="BlankNode"&&!a.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(a.value)}:a}};function o(i,a){return i.hash<a.hash?-1:i.hash>a.hash?1:0}return sn}var zi;function uo(){return zi||(zi=1,(function(s){const e=oo(),t=lo();function r(a,n){if(n.inputFormat){if(n.inputFormat==="application/n-quads"){if(typeof a!="string")throw new Error("N-Quads input must be a string.");return s.NQuads.parse(a)}throw new Error(`Unknown canonicalization input format: "${n.inputFormat}".`)}return a}function o(a){if(a.format&&a.format!=="application/n-quads")throw new Error(`Unknown canonicalization output format: "${a.format}".`)}function i(){globalThis.RDF_CANONIZE_TRACE_URDNA2015&&console.trace("[rdf-canonize] URDNA2015 is deprecated, use RDFC-1.0")}s.NQuads=Qn(),s.IdentifierIssuer=Jn(),s.canonize=async function(a,n={}){const p=r(a,n);if(o(n),!("algorithm"in n))throw new Error("No RDF Dataset Canonicalization algorithm specified.");if(n.algorithm==="RDFC-1.0")return new e(n).main(p);if(n.algorithm==="URDNA2015"&&!n.rejectURDNA2015)return i(),new e(n).main(p);throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+n.algorithm)},s._canonizeSync=function(a,n={}){const p=r(a,n);if(o(n),!("algorithm"in n))throw new Error("No RDF Dataset Canonicalization algorithm specified.");if(n.algorithm==="RDFC-1.0")return new t(n).main(p);if(n.algorithm==="URDNA2015"&&!n.rejectURDNA2015)return i(),new t(n).main(p);throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+n.algorithm)}})(Kr)),Kr}var an,Xi;function zn(){return Xi||(Xi=1,an=uo()),an}var on,Ki;function We(){if(Ki)return on;Ki=1;const s={};return on=s,s.isArray=Array.isArray,s.isBoolean=e=>typeof e=="boolean"||Object.prototype.toString.call(e)==="[object Boolean]",s.isDouble=e=>s.isNumber(e)&&(String(e).indexOf(".")!==-1||Math.abs(e)>=1e21),s.isEmptyObject=e=>s.isObject(e)&&Object.keys(e).length===0,s.isNumber=e=>typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]",s.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e),s.isObject=e=>Object.prototype.toString.call(e)==="[object Object]",s.isString=e=>typeof e=="string"||Object.prototype.toString.call(e)==="[object String]",s.isUndefined=e=>typeof e>"u",on}var ln,Yi;function nt(){if(Yi)return ln;Yi=1;const s=We(),e={};return ln=e,e.isSubject=t=>s.isObject(t)&&!("@value"in t||"@set"in t||"@list"in t)?Object.keys(t).length>1||!("@id"in t):!1,e.isSubjectReference=t=>s.isObject(t)&&Object.keys(t).length===1&&"@id"in t,e.isValue=t=>s.isObject(t)&&"@value"in t,e.isList=t=>s.isObject(t)&&"@list"in t,e.isGraph=t=>s.isObject(t)&&"@graph"in t&&Object.keys(t).filter(r=>r!=="@id"&&r!=="@index").length===1,e.isSimpleGraph=t=>e.isGraph(t)&&!("@id"in t),e.isBlankNode=t=>{if(s.isObject(t)){if("@id"in t){const r=t["@id"];return!s.isString(r)||r.indexOf("_:")===0}return Object.keys(t).length===0||!("@value"in t||"@set"in t||"@list"in t)}return!1},ln}var un,Zi;function Je(){return Zi||(Zi=1,un=class extends Error{constructor(e="An unspecified JSON-LD error occurred.",t="jsonld.Error",r={}){super(e),this.name=t,this.message=e,this.details=r}}),un}var cn,es;function Ve(){if(es)return cn;es=1;const s=nt(),e=We(),t=zn().IdentifierIssuer,r=Je(),o=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,i=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,a=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,n=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,p=/^@[a-zA-Z]+$/,l={headers:{accept:"application/ld+json, application/json"}},d={};cn=d,d.IdentifierIssuer=t,d.REGEX_BCP47=o,d.REGEX_KEYWORD=p,d.clone=function(y){if(y&&typeof y=="object"){let w;if(e.isArray(y)){w=[];for(let m=0;m<y.length;++m)w[m]=d.clone(y[m])}else if(y instanceof Map){w=new Map;for(const[m,S]of y)w.set(m,d.clone(S))}else if(y instanceof Set){w=new Set;for(const m of y)w.add(d.clone(m))}else if(e.isObject(y)){w={};for(const m in y)w[m]=d.clone(y[m])}else w=y.toString();return w}return y},d.asArray=function(y){return Array.isArray(y)?y:[y]},d.buildHeaders=(y={})=>{if(Object.keys(y).some(m=>m.toLowerCase()==="accept"))throw new RangeError('Accept header may not be specified; only "'+l.headers.accept+'" is supported.');return Object.assign({Accept:l.headers.accept},y)},d.parseLinkHeader=y=>{const w={},m=y.match(i);for(let S=0;S<m.length;++S){let I=m[S].match(a);if(!I)continue;const v={target:I[1]},R=I[2];for(;I=n.exec(R);)v[I[1]]=I[2]===void 0?I[3]:I[2];const h=v.rel||"";Array.isArray(w[h])?w[h].push(v):w.hasOwnProperty(h)?w[h]=[w[h],v]:w[h]=v}return w},d.validateTypeValue=(y,w)=>{if(!e.isString(y)&&!(e.isArray(y)&&y.every(m=>e.isString(m)))){if(w&&e.isObject(y))switch(Object.keys(y).length){case 0:return;case 1:if("@default"in y&&d.asArray(y["@default"]).every(m=>e.isString(m)))return}throw new r('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:y})}},d.hasProperty=(y,w)=>{if(y.hasOwnProperty(w)){const m=y[w];return!e.isArray(m)||m.length>0}return!1},d.hasValue=(y,w,m)=>{if(d.hasProperty(y,w)){let S=y[w];const I=s.isList(S);if(e.isArray(S)||I){I&&(S=S["@list"]);for(let v=0;v<S.length;++v)if(d.compareValues(m,S[v]))return!0}else if(!e.isArray(m))return d.compareValues(m,S)}return!1},d.addValue=(y,w,m,S)=>{if(S=S||{},"propertyIsArray"in S||(S.propertyIsArray=!1),"valueIsArray"in S||(S.valueIsArray=!1),"allowDuplicate"in S||(S.allowDuplicate=!0),"prependValue"in S||(S.prependValue=!1),S.valueIsArray)y[w]=m;else if(e.isArray(m)){m.length===0&&S.propertyIsArray&&!y.hasOwnProperty(w)&&(y[w]=[]),S.prependValue&&(m=m.concat(y[w]),y[w]=[]);for(let I=0;I<m.length;++I)d.addValue(y,w,m[I],S)}else if(y.hasOwnProperty(w)){const I=!S.allowDuplicate&&d.hasValue(y,w,m);!e.isArray(y[w])&&(!I||S.propertyIsArray)&&(y[w]=[y[w]]),I||(S.prependValue?y[w].unshift(m):y[w].push(m))}else y[w]=S.propertyIsArray?[m]:m},d.getValues=(y,w)=>[].concat(y[w]||[]),d.removeProperty=(y,w)=>{delete y[w]},d.removeValue=(y,w,m,S)=>{S=S||{},"propertyIsArray"in S||(S.propertyIsArray=!1);const I=d.getValues(y,w).filter(v=>!d.compareValues(v,m));I.length===0?d.removeProperty(y,w):I.length===1&&!S.propertyIsArray?y[w]=I[0]:y[w]=I},d.relabelBlankNodes=(y,w)=>{w=w||{};const m=w.issuer||new t("_:b");return g(m,y)},d.compareValues=(y,w)=>y===w||s.isValue(y)&&s.isValue(w)&&y["@value"]===w["@value"]&&y["@type"]===w["@type"]&&y["@language"]===w["@language"]&&y["@index"]===w["@index"]?!0:e.isObject(y)&&"@id"in y&&e.isObject(w)&&"@id"in w?y["@id"]===w["@id"]:!1,d.compareShortestLeast=(y,w)=>y.length<w.length?-1:w.length<y.length?1:y===w?0:y<w?-1:1;function g(y,w){if(e.isArray(w))for(let m=0;m<w.length;++m)w[m]=g(y,w[m]);else if(s.isList(w))w["@list"]=g(y,w["@list"]);else if(e.isObject(w)){s.isBlankNode(w)&&(w["@id"]=y.getId(w["@id"]));const m=Object.keys(w).sort();for(let S=0;S<m.length;++S){const I=m[S];I!=="@id"&&(w[I]=g(y,w[I]))}}return w}return cn}var dn,ts;function Xn(){if(ts)return dn;ts=1;const s="http://www.w3.org/1999/02/22-rdf-syntax-ns#",e="http://www.w3.org/2001/XMLSchema#";return dn={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:s,RDF_LIST:s+"List",RDF_FIRST:s+"first",RDF_REST:s+"rest",RDF_NIL:s+"nil",RDF_TYPE:s+"type",RDF_PLAIN_LITERAL:s+"PlainLiteral",RDF_XML_LITERAL:s+"XMLLiteral",RDF_JSON_LITERAL:s+"JSON",RDF_OBJECT:s+"object",RDF_LANGSTRING:s+"langString",XSD:e,XSD_BOOLEAN:e+"boolean",XSD_DOUBLE:e+"double",XSD_INTEGER:e+"integer",XSD_STRING:e+"string"},dn}var fn,rs;function ma(){return rs||(rs=1,fn=class{constructor(){this._requests={}}wrapLoader(e){const t=this;return t._loader=e,function(){return t.add.apply(t,arguments)}}async add(e){let t=this._requests[e];if(t)return Promise.resolve(t);t=this._requests[e]=this._loader(e);try{return await t}finally{delete this._requests[e]}}}),fn}var hn,ns;function ut(){if(ns)return hn;ns=1;const s=We(),e={};hn=e,e.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},e.parse=(r,o)=>{const i={},a=e.parsers[o||"full"],n=a.regex.exec(r);let p=a.keys.length;for(;p--;)i[a.keys[p]]=n[p]===void 0?null:n[p];return(i.scheme==="https"&&i.port==="443"||i.scheme==="http"&&i.port==="80")&&(i.href=i.href.replace(":"+i.port,""),i.authority=i.authority.replace(":"+i.port,""),i.port=null),i.normalizedPath=e.removeDotSegments(i.path),i},e.prependBase=(r,o)=>{if(r===null||e.isAbsolute(o))return o;(!r||s.isString(r))&&(r=e.parse(r||""));const i=e.parse(o),a={protocol:r.protocol||""};if(i.authority!==null)a.authority=i.authority,a.path=i.path,a.query=i.query;else if(a.authority=r.authority,i.path==="")a.path=r.path,i.query!==null?a.query=i.query:a.query=r.query;else{if(i.path.indexOf("/")===0)a.path=i.path;else{let p=r.path;p=p.substr(0,p.lastIndexOf("/")+1),(p.length>0||r.authority)&&p.substr(-1)!=="/"&&(p+="/"),p+=i.path,a.path=p}a.query=i.query}i.path!==""&&(a.path=e.removeDotSegments(a.path));let n=a.protocol;return a.authority!==null&&(n+="//"+a.authority),n+=a.path,a.query!==null&&(n+="?"+a.query),i.fragment!==null&&(n+="#"+i.fragment),n===""&&(n="./"),n},e.removeBase=(r,o)=>{if(r===null)return o;(!r||s.isString(r))&&(r=e.parse(r||""));let i="";if(r.href!==""?i+=(r.protocol||"")+"//"+(r.authority||""):o.indexOf("//")&&(i+="//"),o.indexOf(i)!==0)return o;const a=e.parse(o.substr(i.length)),n=r.normalizedPath.split("/"),p=a.normalizedPath.split("/"),l=a.fragment||a.query?0:1;for(;n.length>0&&p.length>l&&n[0]===p[0];)n.shift(),p.shift();let d="";if(n.length>0){n.pop();for(let g=0;g<n.length;++g)d+="../"}return d+=p.join("/"),a.query!==null&&(d+="?"+a.query),a.fragment!==null&&(d+="#"+a.fragment),d===""&&(d="./"),d},e.removeDotSegments=r=>{if(r.length===0)return"";const o=r.split("/"),i=[];for(;o.length>0;){const a=o.shift(),n=o.length===0;if(a==="."){n&&i.push("");continue}if(a===".."){i.pop(),n&&i.push("");continue}i.push(a)}return r[0]==="/"&&i.length>0&&i[0]!==""&&i.unshift(""),i.length===1&&i[0]===""?"/":i.join("/")};const t=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;return e.isAbsolute=r=>s.isString(r)&&t.test(r),e.isRelative=r=>s.isString(r),hn}var pn,is;function co(){if(is)return pn;is=1;const{parseLinkHeader:s,buildHeaders:e}=Ve(),{LINK_HEADER_CONTEXT:t}=Xn(),r=Je(),o=ma(),{prependBase:i}=ut(),a=/(^|(\r\n))link:/i;pn=({secure:p,headers:l={},xhr:d}={headers:{}})=>{return l=e(l),new o().wrapLoader(y);async function y(w){if(w.indexOf("http:")!==0&&w.indexOf("https:")!==0)throw new r('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:w});if(p&&w.indexOf("https")!==0)throw new r(`URL could not be dereferenced; secure mode is enabled and the URL's scheme is not "https".`,"jsonld.InvalidUrl",{code:"loading document failed",url:w});let m;try{m=await n(d,w,l)}catch(h){throw new r("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:w,cause:h})}if(m.status>=400)throw new r("URL could not be dereferenced: "+m.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:w,httpStatusCode:m.status});let S={contextUrl:null,documentUrl:w,document:m.response},I=null;const v=m.getResponseHeader("Content-Type");let R;if(a.test(m.getAllResponseHeaders())&&(R=m.getResponseHeader("Link")),R&&v!=="application/ld+json"){const h=s(R),u=h[t];if(Array.isArray(u))throw new r("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:w});u&&(S.contextUrl=u.target),I=h.alternate,I&&I.type=="application/ld+json"&&!(v||"").match(/^application\/(\w*\+)?json$/)&&(S=await y(i(w,I.target)))}return S}};function n(p,l,d){p=p||XMLHttpRequest;const g=new p;return new Promise((y,w)=>{g.onload=()=>y(g),g.onerror=m=>w(m),g.open("GET",l,!0);for(const m in d)g.setRequestHeader(m,d[m]);g.send()})}return pn}var gn,ss;function fo(){if(ss)return gn;ss=1;const s=co(),e={};return gn=e,e.setupDocumentLoaders=function(t){typeof XMLHttpRequest<"u"&&(t.documentLoaders.xhr=s,t.useDocumentLoader("xhr"))},e.setupGlobals=function(t){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:t.JsonLdProcessor})},gn}var _n,as;function ho(){return as||(as=1,_n=function(s){s.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),_n}var yn,os;function po(){if(os)return yn;os=1,yn=s,s.Node=o,s.create=s;function s(i){var a=this;if(a instanceof s||(a=new s),a.tail=null,a.head=null,a.length=0,i&&typeof i.forEach=="function")i.forEach(function(l){a.push(l)});else if(arguments.length>0)for(var n=0,p=arguments.length;n<p;n++)a.push(arguments[n]);return a}s.prototype.removeNode=function(i){if(i.list!==this)throw new Error("removing node which does not belong to this list");var a=i.next,n=i.prev;return a&&(a.prev=n),n&&(n.next=a),i===this.head&&(this.head=a),i===this.tail&&(this.tail=n),i.list.length--,i.next=null,i.prev=null,i.list=null,a},s.prototype.unshiftNode=function(i){if(i!==this.head){i.list&&i.list.removeNode(i);var a=this.head;i.list=this,i.next=a,a&&(a.prev=i),this.head=i,this.tail||(this.tail=i),this.length++}},s.prototype.pushNode=function(i){if(i!==this.tail){i.list&&i.list.removeNode(i);var a=this.tail;i.list=this,i.prev=a,a&&(a.next=i),this.tail=i,this.head||(this.head=i),this.length++}},s.prototype.push=function(){for(var i=0,a=arguments.length;i<a;i++)t(this,arguments[i]);return this.length},s.prototype.unshift=function(){for(var i=0,a=arguments.length;i<a;i++)r(this,arguments[i]);return this.length},s.prototype.pop=function(){if(this.tail){var i=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,i}},s.prototype.shift=function(){if(this.head){var i=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,i}},s.prototype.forEach=function(i,a){a=a||this;for(var n=this.head,p=0;n!==null;p++)i.call(a,n.value,p,this),n=n.next},s.prototype.forEachReverse=function(i,a){a=a||this;for(var n=this.tail,p=this.length-1;n!==null;p--)i.call(a,n.value,p,this),n=n.prev},s.prototype.get=function(i){for(var a=0,n=this.head;n!==null&&a<i;a++)n=n.next;if(a===i&&n!==null)return n.value},s.prototype.getReverse=function(i){for(var a=0,n=this.tail;n!==null&&a<i;a++)n=n.prev;if(a===i&&n!==null)return n.value},s.prototype.map=function(i,a){a=a||this;for(var n=new s,p=this.head;p!==null;)n.push(i.call(a,p.value,this)),p=p.next;return n},s.prototype.mapReverse=function(i,a){a=a||this;for(var n=new s,p=this.tail;p!==null;)n.push(i.call(a,p.value,this)),p=p.prev;return n},s.prototype.reduce=function(i,a){var n,p=this.head;if(arguments.length>1)n=a;else if(this.head)p=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var l=0;p!==null;l++)n=i(n,p.value,l),p=p.next;return n},s.prototype.reduceReverse=function(i,a){var n,p=this.tail;if(arguments.length>1)n=a;else if(this.tail)p=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var l=this.length-1;p!==null;l--)n=i(n,p.value,l),p=p.prev;return n},s.prototype.toArray=function(){for(var i=new Array(this.length),a=0,n=this.head;n!==null;a++)i[a]=n.value,n=n.next;return i},s.prototype.toArrayReverse=function(){for(var i=new Array(this.length),a=0,n=this.tail;n!==null;a++)i[a]=n.value,n=n.prev;return i},s.prototype.slice=function(i,a){a=a||this.length,a<0&&(a+=this.length),i=i||0,i<0&&(i+=this.length);var n=new s;if(a<i||a<0)return n;i<0&&(i=0),a>this.length&&(a=this.length);for(var p=0,l=this.head;l!==null&&p<i;p++)l=l.next;for(;l!==null&&p<a;p++,l=l.next)n.push(l.value);return n},s.prototype.sliceReverse=function(i,a){a=a||this.length,a<0&&(a+=this.length),i=i||0,i<0&&(i+=this.length);var n=new s;if(a<i||a<0)return n;i<0&&(i=0),a>this.length&&(a=this.length);for(var p=this.length,l=this.tail;l!==null&&p>a;p--)l=l.prev;for(;l!==null&&p>i;p--,l=l.prev)n.push(l.value);return n},s.prototype.splice=function(i,a,...n){i>this.length&&(i=this.length-1),i<0&&(i=this.length+i);for(var p=0,l=this.head;l!==null&&p<i;p++)l=l.next;for(var d=[],p=0;l&&p<a;p++)d.push(l.value),l=this.removeNode(l);l===null&&(l=this.tail),l!==this.head&&l!==this.tail&&(l=l.prev);for(var p=0;p<n.length;p++)l=e(this,l,n[p]);return d},s.prototype.reverse=function(){for(var i=this.head,a=this.tail,n=i;n!==null;n=n.prev){var p=n.prev;n.prev=n.next,n.next=p}return this.head=a,this.tail=i,this};function e(i,a,n){var p=a===i.head?new o(n,null,a,i):new o(n,a,a.next,i);return p.next===null&&(i.tail=p),p.prev===null&&(i.head=p),i.length++,p}function t(i,a){i.tail=new o(a,i.tail,null,i),i.head||(i.head=i.tail),i.length++}function r(i,a){i.head=new o(a,null,i.head,i),i.tail||(i.tail=i.head),i.length++}function o(i,a,n,p){if(!(this instanceof o))return new o(i,a,n,p);this.list=p,this.value=i,a?(a.next=this,this.prev=a):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{ho()(s)}catch{}return yn}var bn,ls;function wa(){if(ls)return bn;ls=1;const s=po(),e=Symbol("max"),t=Symbol("length"),r=Symbol("lengthCalculator"),o=Symbol("allowStale"),i=Symbol("maxAge"),a=Symbol("dispose"),n=Symbol("noDisposeOnSet"),p=Symbol("lruList"),l=Symbol("cache"),d=Symbol("updateAgeOnGet"),g=()=>1;class y{constructor(u){if(typeof u=="number"&&(u={max:u}),u||(u={}),u.max&&(typeof u.max!="number"||u.max<0))throw new TypeError("max must be a non-negative number");this[e]=u.max||1/0;const _=u.length||g;if(this[r]=typeof _!="function"?g:_,this[o]=u.stale||!1,u.maxAge&&typeof u.maxAge!="number")throw new TypeError("maxAge must be a number");this[i]=u.maxAge||0,this[a]=u.dispose,this[n]=u.noDisposeOnSet||!1,this[d]=u.updateAgeOnGet||!1,this.reset()}set max(u){if(typeof u!="number"||u<0)throw new TypeError("max must be a non-negative number");this[e]=u||1/0,S(this)}get max(){return this[e]}set allowStale(u){this[o]=!!u}get allowStale(){return this[o]}set maxAge(u){if(typeof u!="number")throw new TypeError("maxAge must be a non-negative number");this[i]=u,S(this)}get maxAge(){return this[i]}set lengthCalculator(u){typeof u!="function"&&(u=g),u!==this[r]&&(this[r]=u,this[t]=0,this[p].forEach(_=>{_.length=this[r](_.value,_.key),this[t]+=_.length})),S(this)}get lengthCalculator(){return this[r]}get length(){return this[t]}get itemCount(){return this[p].length}rforEach(u,_){_=_||this;for(let T=this[p].tail;T!==null;){const B=T.prev;R(this,u,T,_),T=B}}forEach(u,_){_=_||this;for(let T=this[p].head;T!==null;){const B=T.next;R(this,u,T,_),T=B}}keys(){return this[p].toArray().map(u=>u.key)}values(){return this[p].toArray().map(u=>u.value)}reset(){this[a]&&this[p]&&this[p].length&&this[p].forEach(u=>this[a](u.key,u.value)),this[l]=new Map,this[p]=new s,this[t]=0}dump(){return this[p].map(u=>m(this,u)?!1:{k:u.key,v:u.value,e:u.now+(u.maxAge||0)}).toArray().filter(u=>u)}dumpLru(){return this[p]}set(u,_,T){if(T=T||this[i],T&&typeof T!="number")throw new TypeError("maxAge must be a number");const B=T?Date.now():0,E=this[r](_,u);if(this[l].has(u)){if(E>this[e])return I(this,this[l].get(u)),!1;const j=this[l].get(u).value;return this[a]&&(this[n]||this[a](u,j.value)),j.now=B,j.maxAge=T,j.value=_,this[t]+=E-j.length,j.length=E,this.get(u),S(this),!0}const P=new v(u,_,E,B,T);return P.length>this[e]?(this[a]&&this[a](u,_),!1):(this[t]+=P.length,this[p].unshift(P),this[l].set(u,this[p].head),S(this),!0)}has(u){if(!this[l].has(u))return!1;const _=this[l].get(u).value;return!m(this,_)}get(u){return w(this,u,!0)}peek(u){return w(this,u,!1)}pop(){const u=this[p].tail;return u?(I(this,u),u.value):null}del(u){I(this,this[l].get(u))}load(u){this.reset();const _=Date.now();for(let T=u.length-1;T>=0;T--){const B=u[T],E=B.e||0;if(E===0)this.set(B.k,B.v);else{const P=E-_;P>0&&this.set(B.k,B.v,P)}}}prune(){this[l].forEach((u,_)=>w(this,_,!1))}}const w=(h,u,_)=>{const T=h[l].get(u);if(T){const B=T.value;if(m(h,B)){if(I(h,T),!h[o])return}else _&&(h[d]&&(T.value.now=Date.now()),h[p].unshiftNode(T));return B.value}},m=(h,u)=>{if(!u||!u.maxAge&&!h[i])return!1;const _=Date.now()-u.now;return u.maxAge?_>u.maxAge:h[i]&&_>h[i]},S=h=>{if(h[t]>h[e])for(let u=h[p].tail;h[t]>h[e]&&u!==null;){const _=u.prev;I(h,u),u=_}},I=(h,u)=>{if(u){const _=u.value;h[a]&&h[a](_.key,_.value),h[t]-=_.length,h[l].delete(_.key),h[p].removeNode(u)}};class v{constructor(u,_,T,B,E){this.key=u,this.value=_,this.length=T,this.now=B,this.maxAge=E||0}}const R=(h,u,_,T)=>{let B=_.value;m(h,B)&&(I(h,_),h[o]||(B=void 0)),B&&u.call(T,B.value,B.key,h)};return bn=y,bn}var mn,us;function go(){if(us)return mn;us=1;const s=wa(),e=10;return mn=class{constructor({document:r}){this.document=r,this.cache=new s({max:e})}getProcessed(r){return this.cache.get(r)}setProcessed(r,o){this.cache.set(r,o)}},mn}var wn,cs;function _o(){if(cs)return wn;cs=1;const{isArray:s,isObject:e,isString:t}=We(),{asArray:r}=Ve(),{prependBase:o}=ut(),i=Je(),a=go(),n=10;wn=class{constructor({sharedCache:g}){this.perOpCache=new Map,this.sharedCache=g}async resolve({activeCtx:g,context:y,documentLoader:w,base:m,cycles:S=new Set}){y&&e(y)&&y["@context"]&&(y=y["@context"]),y=r(y);const I=[];for(const v of y){if(t(v)){let u=this._get(v);u||(u=await this._resolveRemoteContext({activeCtx:g,url:v,documentLoader:w,base:m,cycles:S})),s(u)?I.push(...u):I.push(u);continue}if(v===null){I.push(new a({document:null}));continue}e(v)||p(y);const R=JSON.stringify(v);let h=this._get(R);h||(h=new a({document:v}),this._cacheResolvedContext({key:R,resolved:h,tag:"static"})),I.push(h)}return I}_get(g){let y=this.perOpCache.get(g);if(!y){const w=this.sharedCache.get(g);w&&(y=w.get("static"),y&&this.perOpCache.set(g,y))}return y}_cacheResolvedContext({key:g,resolved:y,tag:w}){if(this.perOpCache.set(g,y),w!==void 0){let m=this.sharedCache.get(g);m||(m=new Map,this.sharedCache.set(g,m)),m.set(w,y)}return y}async _resolveRemoteContext({activeCtx:g,url:y,documentLoader:w,base:m,cycles:S}){y=o(m,y);const{context:I,remoteDoc:v}=await this._fetchContext({activeCtx:g,url:y,documentLoader:w,cycles:S});m=v.documentUrl||y,l({context:I,base:m});const R=await this.resolve({activeCtx:g,context:I,documentLoader:w,base:m,cycles:S});return this._cacheResolvedContext({key:y,resolved:R,tag:v.tag}),R}async _fetchContext({activeCtx:g,url:y,documentLoader:w,cycles:m}){if(m.size>n)throw new i("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:g.processingMode==="json-ld-1.0"?"loading remote context failed":"context overflow",max:n});if(m.has(y))throw new i("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:g.processingMode==="json-ld-1.0"?"recursive context inclusion":"context overflow",url:y});m.add(y);let S,I;try{I=await w(y),S=I.document||null,t(S)&&(S=JSON.parse(S))}catch(v){throw new i(`Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context. URL: "${y}".`,"jsonld.InvalidUrl",{code:"loading remote context failed",url:y,cause:v})}if(!e(S))throw new i(`Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object. URL: "${y}".`,"jsonld.InvalidUrl",{code:"invalid remote context",url:y});return"@context"in S?S={"@context":S["@context"]}:S={"@context":{}},I.contextUrl&&(s(S["@context"])||(S["@context"]=[S["@context"]]),S["@context"].push(I.contextUrl)),{context:S,remoteDoc:I}}};function p(d){throw new i("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:d})}function l({context:d,base:g}){if(!d)return;const y=d["@context"];if(t(y)){d["@context"]=o(g,y);return}if(s(y)){for(let w=0;w<y.length;++w){const m=y[w];if(t(m)){y[w]=o(g,m);continue}e(m)&&l({context:{"@context":m},base:g})}return}if(e(y))for(const w in y)l({context:y[w],base:g})}return wn}var xn,ds;function yo(){return ds||(ds=1,xn=zn().NQuads),xn}var vn,fs;function rr(){if(fs)return vn;fs=1;const s=Je(),{isArray:e}=We(),{asArray:t}=Ve(),r={};vn=r,r.defaultEventHandler=null,r.setupEventHandler=({options:a={}})=>{const n=[].concat(a.safe?r.safeEventHandler:[],a.eventHandler?t(a.eventHandler):[],r.defaultEventHandler?r.defaultEventHandler:[]);return n.length===0?null:n},r.handleEvent=({event:a,options:n})=>{o({event:a,handlers:n.eventHandler})};function o({event:a,handlers:n}){let p=!0;for(let l=0;p&&l<n.length;++l){p=!1;const d=n[l];if(e(d))p=o({event:a,handlers:d});else if(typeof d=="function")d({event:a,next:()=>{p=!0}});else if(typeof d=="object")a.code in d?d[a.code]({event:a,next:()=>{p=!0}}):p=!0;else throw new s("Invalid event handler.","jsonld.InvalidEventHandler",{event:a})}return p}const i=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);return r.safeEventHandler=function({event:n,next:p}){if(n.level==="warning"&&i.has(n.code))throw new s("Safe mode validation error.","jsonld.ValidationError",{event:n});p()},r.logEventHandler=function({event:n,next:p}){console.log(`EVENT: ${n.message}`,{event:n}),p()},r.logWarningEventHandler=function({event:n,next:p}){n.level==="warning"&&console.warn(`WARNING: ${n.message}`,{event:n}),p()},r.unhandledEventHandler=function({event:n}){throw new s("No handler for event.","jsonld.UnhandledEvent",{event:n})},r.setDefaultEventHandler=function({eventHandler:a}={}){r.defaultEventHandler=a?t(a):null},vn}var En,hs;function bt(){if(hs)return En;hs=1;const s=Ve(),e=Je(),{isArray:t,isObject:r,isString:o,isUndefined:i}=We(),{isAbsolute:a,isRelative:n,prependBase:p}=ut(),{handleEvent:l}=rr(),{REGEX_BCP47:d,REGEX_KEYWORD:g,asArray:y,compareShortestLeast:w}=Ve(),m=new Map,S=1e4,I={};En=I,I.process=async({activeCtx:h,localCtx:u,options:_,propagate:T=!0,overrideProtected:B=!1,cycles:E=new Set})=>{if(r(u)&&"@context"in u&&t(u["@context"])&&(u=u["@context"]),y(u).length===0)return h;const x=[],j=[({event:X,next:A})=>{x.push(X),A()}];_.eventHandler&&j.push(_.eventHandler);const q=_;_={..._,eventHandler:j};const D=await _.contextResolver.resolve({activeCtx:h,context:u,documentLoader:_.documentLoader,base:_.base});r(D[0].document)&&typeof D[0].document["@propagate"]=="boolean"&&(T=D[0].document["@propagate"]);let F=h;!T&&!F.previousContext&&(F=F.clone(),F.previousContext=h);for(const X of D){let{document:A}=X;if(h=F,A===null){if(!B&&Object.keys(h.protected).length!==0)throw new e("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});F=h=I.getInitialContext(_).clone();continue}const z=X.getProcessed(h);if(z){if(q.eventHandler)for(const Y of z.events)l({event:Y,options:q});F=h=z.context;continue}if(r(A)&&"@context"in A&&(A=A["@context"]),!r(A))throw new e("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:A});F=F.clone();const M=new Map;if("@version"in A){if(A["@version"]!==1.1)throw new e("Unsupported JSON-LD version: "+A["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:A});if(h.processingMode&&h.processingMode==="json-ld-1.0")throw new e("@version: "+A["@version"]+" not compatible with "+h.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:A});F.processingMode="json-ld-1.1",F["@version"]=A["@version"],M.set("@version",!0)}if(F.processingMode=F.processingMode||h.processingMode,"@base"in A){let Y=A["@base"];if(!(Y===null||a(Y)))if(n(Y))Y=p(F["@base"],Y);else throw new e('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:A});F["@base"]=Y,M.set("@base",!0)}if("@vocab"in A){const Y=A["@vocab"];if(Y===null)delete F["@vocab"];else if(o(Y)){if(!a(Y)&&I.processingMode(F,1))throw new e('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:A});{const b=v(F,Y,{vocab:!0,base:!0},void 0,void 0,_);a(b)||_.eventHandler&&l({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:b}},options:_}),F["@vocab"]=b}}else throw new e('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:A});M.set("@vocab",!0)}if("@language"in A){const Y=A["@language"];if(Y===null)delete F["@language"];else if(o(Y))Y.match(d)||_.eventHandler&&l({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Y}},options:_}),F["@language"]=Y.toLowerCase();else throw new e('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:A});M.set("@language",!0)}if("@direction"in A){const Y=A["@direction"];if(h.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @direction not compatible with "+h.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:A});if(Y===null)delete F["@direction"];else{if(Y!=="ltr"&&Y!=="rtl")throw new e('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:A});F["@direction"]=Y}M.set("@direction",!0)}if("@propagate"in A){const Y=A["@propagate"];if(h.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @propagate not compatible with "+h.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:A});if(typeof Y!="boolean")throw new e("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:u});M.set("@propagate",!0)}if("@import"in A){const Y=A["@import"];if(h.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @import not compatible with "+h.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:A});if(!o(Y))throw new e("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:u});const b=await _.contextResolver.resolve({activeCtx:h,context:Y,documentLoader:_.documentLoader,base:_.base});if(b.length!==1)throw new e("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:u});const H=b[0].getProcessed(h);if(H)A=H;else{const K=b[0].document;if("@import"in K)throw new e("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:u});for(const W in K)A.hasOwnProperty(W)||(A[W]=K[W]);b[0].setProcessed(h,A)}M.set("@import",!0)}M.set("@protected",A["@protected"]||!1);for(const Y in A)if(I.createTermDefinition({activeCtx:F,localCtx:A,term:Y,defined:M,options:_,overrideProtected:B}),r(A[Y])&&"@context"in A[Y]){const b=A[Y]["@context"];let H=!0;if(o(b)){const K=p(_.base,b);E.has(K)?H=!1:E.add(K)}if(H)try{await I.process({activeCtx:F.clone(),localCtx:A[Y]["@context"],overrideProtected:!0,options:_,cycles:E})}catch{throw new e("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:A[Y]["@context"],term:Y})}}X.setProcessed(h,{context:F,events:x})}return F},I.createTermDefinition=({activeCtx:h,localCtx:u,term:_,defined:T,options:B,overrideProtected:E=!1})=>{if(T.has(_)){if(T.get(_))return;throw new e("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:u,term:_})}T.set(_,!1);let P;if(u.hasOwnProperty(_)&&(P=u[_]),_==="@type"&&r(P)&&(P["@container"]||"@set")==="@set"&&I.processingMode(h,1.1)){const A=["@container","@id","@protected"],z=Object.keys(P);if(z.length===0||z.some(M=>!A.includes(M)))throw new e("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:u,term:_})}else{if(I.isKeyword(_))throw new e("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:u,term:_});if(_.match(g)){B.eventHandler&&l({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:_}},options:B});return}else if(_==="")throw new e("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:u})}const x=h.mappings.get(_);h.mappings.has(_)&&h.mappings.delete(_);let j=!1;if((o(P)||P===null)&&(j=!0,P={"@id":P}),!r(P))throw new e("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:u});const q={};h.mappings.set(_,q),q.reverse=!1;const D=["@container","@id","@language","@reverse","@type"];I.processingMode(h,1.1)&&D.push("@context","@direction","@index","@nest","@prefix","@protected");for(const A in P)if(!D.includes(A))throw new e("Invalid JSON-LD syntax; a term definition must not contain "+A,"jsonld.SyntaxError",{code:"invalid term definition",context:u});const F=_.indexOf(":");if(q._termHasColon=F>0,"@reverse"in P){if("@id"in P)throw new e("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:u});if("@nest"in P)throw new e("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:u});const A=P["@reverse"];if(!o(A))throw new e("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:u});if(A.match(g)){B.eventHandler&&l({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:A}},options:B}),x?h.mappings.set(_,x):h.mappings.delete(_);return}const z=v(h,A,{vocab:!0,base:!1},u,T,B);if(!a(z))throw new e("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:u});q["@id"]=z,q.reverse=!0}else if("@id"in P){let A=P["@id"];if(A&&!o(A))throw new e("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:u});if(A===null)q["@id"]=null;else if(!I.isKeyword(A)&&A.match(g)){B.eventHandler&&l({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:A}},options:B}),x?h.mappings.set(_,x):h.mappings.delete(_);return}else if(A!==_){if(A=v(h,A,{vocab:!0,base:!1},u,T,B),!a(A)&&!I.isKeyword(A))throw new e("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:u});if(_.match(/(?::[^:])|\//)){const z=new Map(T).set(_,!0);if(v(h,_,{vocab:!0,base:!1},u,z,B)!==A)throw new e("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:u})}q["@id"]=A,q._prefix=j&&!q._termHasColon&&A.match(/[:\/\?#\[\]@]$/)!==null}}if(!("@id"in q))if(q._termHasColon){const A=_.substr(0,F);if(u.hasOwnProperty(A)&&I.createTermDefinition({activeCtx:h,localCtx:u,term:A,defined:T,options:B}),h.mappings.has(A)){const z=_.substr(F+1);q["@id"]=h.mappings.get(A)["@id"]+z}else q["@id"]=_}else if(_==="@type")q["@id"]=_;else{if(!("@vocab"in h))throw new e("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:u,term:_});q["@id"]=h["@vocab"]+_}if((P["@protected"]===!0||T.get("@protected")===!0&&P["@protected"]!==!1)&&(h.protected[_]=!0,q.protected=!0),T.set(_,!0),"@type"in P){let A=P["@type"];if(!o(A))throw new e("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:u});if(A==="@json"||A==="@none"){if(I.processingMode(h,1))throw new e(`Invalid JSON-LD syntax; an @context @type value must not be "${A}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:u})}else if(A!=="@id"&&A!=="@vocab"){if(A=v(h,A,{vocab:!0,base:!1},u,T,B),!a(A))throw new e("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:u});if(A.indexOf("_:")===0)throw new e("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:u})}q["@type"]=A}if("@container"in P){const A=o(P["@container"])?[P["@container"]]:P["@container"]||[],z=["@list","@set","@index","@language"];let M=!0;const Y=A.includes("@set");if(I.processingMode(h,1.1)){if(z.push("@graph","@id","@type"),A.includes("@list")){if(A.length!==1)throw new e("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:u})}else if(A.includes("@graph")){if(A.some(b=>b!=="@graph"&&b!=="@id"&&b!=="@index"&&b!=="@set"))throw new e("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:u})}else M&=A.length<=(Y?2:1);if(A.includes("@type")&&(q["@type"]=q["@type"]||"@id",!["@id","@vocab"].includes(q["@type"])))throw new e("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:u})}else M&=!t(P["@container"]),M&=A.length<=1;if(M&=A.every(b=>z.includes(b)),M&=!(Y&&A.includes("@list")),!M)throw new e("Invalid JSON-LD syntax; @context @container value must be one of the following: "+z.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:u});if(q.reverse&&!A.every(b=>["@index","@set"].includes(b)))throw new e("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:u});q["@container"]=A}if("@index"in P){if(!("@container"in P)||!q["@container"].includes("@index"))throw new e(`Invalid JSON-LD syntax; @index without @index in @container: "${P["@index"]}" on term "${_}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:u});if(!o(P["@index"])||P["@index"].indexOf("@")===0)throw new e(`Invalid JSON-LD syntax; @index must expand to an IRI: "${P["@index"]}" on term "${_}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:u});q["@index"]=P["@index"]}if("@context"in P&&(q["@context"]=P["@context"]),"@language"in P&&!("@type"in P)){let A=P["@language"];if(A!==null&&!o(A))throw new e("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:u});A!==null&&(A=A.toLowerCase()),q["@language"]=A}if("@prefix"in P){if(_.match(/:|\//))throw new e("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:u});if(I.isKeyword(q["@id"]))throw new e("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:u});if(typeof P["@prefix"]=="boolean")q._prefix=P["@prefix"]===!0;else throw new e("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:u})}if("@direction"in P){const A=P["@direction"];if(A!==null&&A!=="ltr"&&A!=="rtl")throw new e('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:u});q["@direction"]=A}if("@nest"in P){const A=P["@nest"];if(!o(A)||A!=="@nest"&&A.indexOf("@")===0)throw new e("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:u});q["@nest"]=A}const X=q["@id"];if(X==="@context"||X==="@preserve")throw new e("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:u});if(x&&x.protected&&!E&&(h.protected[_]=!0,q.protected=!0,!R(x,q)))throw new e("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:u,term:_})},I.expandIri=(h,u,_,T)=>v(h,u,_,void 0,void 0,T);function v(h,u,_,T,B,E){if(u===null||!o(u)||I.isKeyword(u))return u;if(u.match(g))return null;if(T&&T.hasOwnProperty(u)&&B.get(u)!==!0&&I.createTermDefinition({activeCtx:h,localCtx:T,term:u,defined:B,options:E}),_=_||{},_.vocab){const x=h.mappings.get(u);if(x===null)return null;if(r(x)&&"@id"in x)return x["@id"]}const P=u.indexOf(":");if(P>0){const x=u.substr(0,P),j=u.substr(P+1);if(x==="_"||j.indexOf("//")===0)return u;T&&T.hasOwnProperty(x)&&I.createTermDefinition({activeCtx:h,localCtx:T,term:x,defined:B,options:E});const q=h.mappings.get(x);if(q&&q._prefix)return q["@id"]+j;if(a(u))return u}if(_.vocab&&"@vocab"in h)u=h["@vocab"]+u;else if(_.base){let x,j;"@base"in h?h["@base"]?(j=p(E.base,h["@base"]),x=p(j,u)):(j=h["@base"],x=u):(j=E.base,x=p(E.base,u)),u=x}return u}I.getInitialContext=h=>{const u=JSON.stringify({processingMode:h.processingMode}),_=m.get(u);if(_)return _;const T={processingMode:h.processingMode,mappings:new Map,inverse:null,getInverse:B,clone:x,revertToPreviousContext:j,protected:{}};return m.size===S&&m.clear(),m.set(u,T),T;function B(){const q=this;if(q.inverse)return q.inverse;const D=q.inverse={},F=q.fastCurieMap={},X={},A=(q["@language"]||"@none").toLowerCase(),z=q["@direction"],M=q.mappings,Y=[...M.keys()].sort(w);for(const b of Y){const H=M.get(b);if(H===null)continue;let K=H["@container"]||"@none";if(K=[].concat(K).sort().join(""),H["@id"]===null)continue;const W=y(H["@id"]);for(const le of W){let V=D[le];const J=I.isKeyword(le);if(V)!J&&!H._termHasColon&&X[le].push(b);else if(D[le]=V={},!J&&!H._termHasColon){X[le]=[b];const Q={iri:le,terms:X[le]};le[0]in F?F[le[0]].push(Q):F[le[0]]=[Q]}if(V[K]||(V[K]={"@language":{},"@type":{},"@any":{}}),V=V[K],P(b,V["@any"],"@none"),H.reverse)P(b,V["@type"],"@reverse");else if(H["@type"]==="@none")P(b,V["@any"],"@none"),P(b,V["@language"],"@none"),P(b,V["@type"],"@none");else if("@type"in H)P(b,V["@type"],H["@type"]);else if("@language"in H&&"@direction"in H){const Q=H["@language"],U=H["@direction"];Q&&U?P(b,V["@language"],`${Q}_${U}`.toLowerCase()):Q?P(b,V["@language"],Q.toLowerCase()):U?P(b,V["@language"],`_${U}`):P(b,V["@language"],"@null")}else"@language"in H?P(b,V["@language"],(H["@language"]||"@null").toLowerCase()):"@direction"in H?H["@direction"]?P(b,V["@language"],`_${H["@direction"]}`):P(b,V["@language"],"@none"):z?(P(b,V["@language"],`_${z}`),P(b,V["@language"],"@none"),P(b,V["@type"],"@none")):(P(b,V["@language"],A),P(b,V["@language"],"@none"),P(b,V["@type"],"@none"))}}for(const b in F)E(F,b,1);return D}function E(q,D,F){const X=q[D],A=q[D]={};let z,M;for(const Y of X)z=Y.iri,F>=z.length?M="":M=z[F],M in A?A[M].push(Y):A[M]=[Y];for(const Y in A)Y!==""&&E(A,Y,F+1)}function P(q,D,F){D.hasOwnProperty(F)||(D[F]=q)}function x(){const q={};return q.mappings=s.clone(this.mappings),q.clone=this.clone,q.inverse=null,q.getInverse=this.getInverse,q.protected=s.clone(this.protected),this.previousContext&&(q.previousContext=this.previousContext.clone()),q.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(q["@base"]=this["@base"]),"@language"in this&&(q["@language"]=this["@language"]),"@vocab"in this&&(q["@vocab"]=this["@vocab"]),q}function j(){return this.previousContext?this.previousContext.clone():this}},I.getContextValue=(h,u,_)=>{if(u===null)return _==="@context"?void 0:null;if(h.mappings.has(u)){const T=h.mappings.get(u);if(i(_))return T;if(T.hasOwnProperty(_))return T[_]}if(_==="@language"&&_ in h||_==="@direction"&&_ in h)return h[_];if(_!=="@context")return null},I.processingMode=(h,u)=>u.toString()>="1.1"?!h.processingMode||h.processingMode>="json-ld-"+u.toString():h.processingMode==="json-ld-1.0",I.isKeyword=h=>{if(!o(h)||h[0]!=="@")return!1;switch(h){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};function R(h,u){if(!(h&&typeof h=="object")||!(u&&typeof u=="object"))return h===u;const _=Array.isArray(h);if(_!==Array.isArray(u))return!1;if(_){if(h.length!==u.length)return!1;for(let E=0;E<h.length;++E)if(!R(h[E],u[E]))return!1;return!0}const T=Object.keys(h),B=Object.keys(u);if(T.length!==B.length)return!1;for(const E in h){let P=h[E],x=u[E];if(E==="@container"&&Array.isArray(P)&&Array.isArray(x)&&(P=P.slice().sort(),x=x.slice().sort()),!R(P,x))return!1}return!0}return En}var Sn,ps;function bo(){if(ps)return Sn;ps=1;const s=Je(),{isArray:e,isObject:t,isEmptyObject:r,isString:o,isUndefined:i}=We(),{isList:a,isValue:n,isGraph:p,isSubject:l}=nt(),{expandIri:d,getContextValue:g,isKeyword:y,process:w,processingMode:m}=bt(),{isAbsolute:S}=ut(),{REGEX_BCP47:I,REGEX_KEYWORD:v,addValue:R,asArray:h,getValues:u,validateTypeValue:_}=Ve(),{handleEvent:T}=rr(),B={};Sn=B,B.expand=async({activeCtx:D,activeProperty:F=null,element:X,options:A={},insideList:z=!1,insideIndex:M=!1,typeScopedContext:Y=null})=>{if(X==null)return null;if(F==="@default"&&(A=Object.assign({},A,{isFrame:!1})),!e(X)&&!t(X))return!z&&(F===null||d(D,F,{vocab:!0},A)==="@graph")?(A.eventHandler&&T({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:X}},options:A}),null):x({activeCtx:D,activeProperty:F,value:X,options:A});if(e(X)){let Q=[];const U=g(D,F,"@container")||[];z=z||U.includes("@list");for(let te=0;te<X.length;++te){let re=await B.expand({activeCtx:D,activeProperty:F,element:X[te],options:A,insideIndex:M,typeScopedContext:Y});z&&e(re)&&(re={"@list":re}),re!==null&&(e(re)?Q=Q.concat(re):Q.push(re))}return Q}const b=d(D,F,{vocab:!0},A),H=g(D,F,"@context");Y=Y||(D.previousContext?D:null);let K=Object.keys(X).sort(),W=!M;if(W&&Y&&K.length<=2&&!K.includes("@context"))for(const Q of K){const U=d(Y,Q,{vocab:!0},A);if(U==="@value"){W=!1,D=Y;break}if(U==="@id"&&K.length===1){W=!1;break}}W&&(D=D.revertToPreviousContext()),i(H)||(D=await w({activeCtx:D,localCtx:H,propagate:!0,overrideProtected:!0,options:A})),"@context"in X&&(D=await w({activeCtx:D,localCtx:X["@context"],options:A})),Y=D;let le=null;for(const Q of K)if(d(D,Q,{vocab:!0},A)==="@type"){le=le||Q;const te=X[Q],re=Array.isArray(te)?te.length>1?te.slice().sort():te:[te];for(const fe of re){const pe=g(Y,fe,"@context");i(pe)||(D=await w({activeCtx:D,localCtx:pe,options:A,propagate:!1}))}}let V={};await P({activeCtx:D,activeProperty:F,expandedActiveProperty:b,element:X,expandedParent:V,options:A,insideList:z,typeKey:le,typeScopedContext:Y}),K=Object.keys(V);let J=K.length;if("@value"in V){if("@type"in V&&("@language"in V||"@direction"in V))throw new s('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:V});let Q=J-1;if("@type"in V&&(Q-=1),"@index"in V&&(Q-=1),"@language"in V&&(Q-=1),"@direction"in V&&(Q-=1),Q!==0)throw new s('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:V});const U=V["@value"]===null?[]:h(V["@value"]),te=u(V,"@type");if(!(m(D,1.1)&&te.includes("@json")&&te.length===1))if(U.length===0)A.eventHandler&&T({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:V}},options:A}),V=null;else{if(!U.every(re=>o(re)||r(re))&&"@language"in V)throw new s("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:V});if(!te.every(re=>S(re)&&!(o(re)&&re.indexOf("_:")===0)||r(re)))throw new s('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:V})}}else if("@type"in V&&!e(V["@type"]))V["@type"]=[V["@type"]];else if("@set"in V||"@list"in V){if(J>1&&!(J===2&&"@index"in V))throw new s('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:V});"@set"in V&&(V=V["@set"],K=Object.keys(V),J=K.length)}else J===1&&"@language"in V&&(A.eventHandler&&T({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:V}},options:A}),V=null);return t(V)&&!A.keepFreeFloatingNodes&&!z&&(F===null||b==="@graph"||(g(D,F,"@container")||[]).includes("@graph"))&&(V=E({value:V,count:J,options:A})),V};function E({value:D,count:F,options:X}){if(F===0||"@value"in D||"@list"in D||F===1&&"@id"in D){if(X.eventHandler){let A,z;F===0?(A="empty object",z="Dropping empty object."):"@value"in D?(A="object with only @value",z="Dropping object with only @value."):"@list"in D?(A="object with only @list",z="Dropping object with only @list."):F===1&&"@id"in D&&(A="object with only @id",z="Dropping object with only @id."),T({event:{type:["JsonLdEvent"],code:A,level:"warning",message:z,details:{value:D}},options:X})}return null}return D}async function P({activeCtx:D,activeProperty:F,expandedActiveProperty:X,element:A,expandedParent:z,options:M={},insideList:Y,typeKey:b,typeScopedContext:H}){const K=Object.keys(A).sort(),W=[];let le;const V=A[b]&&d(D,e(A[b])?A[b][0]:A[b],{vocab:!0},{...M,typeExpansion:!0})==="@json";for(const J of K){let Q=A[J],U;if(J==="@context")continue;const te=d(D,J,{vocab:!0},M);if(te===null||!(S(te)||y(te))){M.eventHandler&&T({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:J,expandedProperty:te}},options:M});continue}if(y(te)){if(X==="@reverse")throw new s("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Q});if(te in z&&te!=="@included"&&te!=="@type")throw new s("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:te})}if(te==="@id"){if(!o(Q)){if(!M.isFrame)throw new s('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Q});if(t(Q)){if(!r(Q))throw new s('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Q})}else if(e(Q)){if(!Q.every(O=>o(O)))throw new s('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Q})}else throw new s('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Q})}R(z,"@id",h(Q).map(O=>{if(o(O)){const G=d(D,O,{base:!0},M);return M.eventHandler&&(G===null?T(O===null?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:O}},options:M}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:O}},options:M}):S(G)||T({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:O,expandedId:G}},options:M})),G}return O}),{propertyIsArray:M.isFrame});continue}if(te==="@type"){t(Q)&&(Q=Object.fromEntries(Object.entries(Q).map(([O,G])=>[d(H,O,{vocab:!0}),h(G).map(se=>d(H,se,{base:!0,vocab:!0},{...M,typeExpansion:!0}))]))),_(Q,M.isFrame),R(z,"@type",h(Q).map(O=>{if(o(O)){const G=d(H,O,{base:!0,vocab:!0},{...M,typeExpansion:!0});return G!=="@json"&&!S(G)&&M.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:O}},options:M}),G}return O}),{propertyIsArray:!!M.isFrame});continue}if(te==="@included"&&m(D,1.1)){const O=h(await B.expand({activeCtx:D,activeProperty:F,element:Q,options:M}));if(!O.every(G=>l(G)))throw new s("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:Q});R(z,"@included",O,{propertyIsArray:!0});continue}if(te==="@graph"&&!(t(Q)||e(Q)))throw new s('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Q});if(te==="@value"){le=Q,V&&m(D,1.1)?z["@value"]=Q:R(z,"@value",Q,{propertyIsArray:M.isFrame});continue}if(te==="@language"){if(Q===null)continue;if(!o(Q)&&!M.isFrame)throw new s('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Q});Q=h(Q).map(O=>o(O)?O.toLowerCase():O);for(const O of Q)o(O)&&!O.match(I)&&M.eventHandler&&T({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:O}},options:M});R(z,"@language",Q,{propertyIsArray:M.isFrame});continue}if(te==="@direction"){if(!o(Q)&&!M.isFrame)throw new s('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:Q});Q=h(Q);for(const O of Q)if(o(O)&&O!=="ltr"&&O!=="rtl")throw new s('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:Q});R(z,"@direction",Q,{propertyIsArray:M.isFrame});continue}if(te==="@index"){if(!o(Q))throw new s('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Q});R(z,"@index",Q);continue}if(te==="@reverse"){if(!t(Q))throw new s('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Q});if(U=await B.expand({activeCtx:D,activeProperty:"@reverse",element:Q,options:M}),"@reverse"in U)for(const G in U["@reverse"])R(z,G,U["@reverse"][G],{propertyIsArray:!0});let O=z["@reverse"]||null;for(const G in U){if(G==="@reverse")continue;O===null&&(O=z["@reverse"]={}),R(O,G,[],{propertyIsArray:!0});const se=U[G];for(let de=0;de<se.length;++de){const he=se[de];if(n(he)||a(he))throw new s('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:U});R(O,G,he,{propertyIsArray:!0})}}continue}if(te==="@nest"){W.push(J);continue}let re=D;const fe=g(D,J,"@context");i(fe)||(re=await w({activeCtx:D,localCtx:fe,propagate:!0,overrideProtected:!0,options:M}));const pe=g(D,J,"@container")||[];if(pe.includes("@language")&&t(Q)){const O=g(re,J,"@direction");U=j(re,Q,O,M)}else if(pe.includes("@index")&&t(Q)){const O=pe.includes("@graph"),G=g(re,J,"@index")||"@index",se=G!=="@index"&&d(D,G,{vocab:!0},M);U=await q({activeCtx:re,options:M,activeProperty:J,value:Q,asGraph:O,indexKey:G,propertyIndex:se})}else if(pe.includes("@id")&&t(Q)){const O=pe.includes("@graph");U=await q({activeCtx:re,options:M,activeProperty:J,value:Q,asGraph:O,indexKey:"@id"})}else if(pe.includes("@type")&&t(Q))U=await q({activeCtx:re.revertToPreviousContext(),options:M,activeProperty:J,value:Q,asGraph:!1,indexKey:"@type"});else{const O=te==="@list";if(O||te==="@set"){let G=F;O&&X==="@graph"&&(G=null),U=await B.expand({activeCtx:re,activeProperty:G,element:Q,options:M,insideList:O})}else g(D,J,"@type")==="@json"?U={"@type":"@json","@value":Q}:U=await B.expand({activeCtx:re,activeProperty:J,element:Q,options:M,insideList:!1})}if(!(U===null&&te!=="@value")){if(te!=="@list"&&!a(U)&&pe.includes("@list")&&(U={"@list":h(U)}),pe.includes("@graph")&&!pe.some(O=>O==="@id"||O==="@index")){if(U=h(U),M.isFrame||(U=U.filter(O=>{const G=Object.keys(O).length;return E({value:O,count:G,options:M})!==null})),U.length===0)continue;U=U.map(O=>({"@graph":h(O)}))}if(re.mappings.has(J)&&re.mappings.get(J).reverse){const O=z["@reverse"]=z["@reverse"]||{};U=h(U);for(let G=0;G<U.length;++G){const se=U[G];if(n(se)||a(se))throw new s('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:U});R(O,te,se,{propertyIsArray:!0})}continue}R(z,te,U,{propertyIsArray:!0})}}if("@value"in z&&!(z["@type"]==="@json"&&m(D,1.1))){if((t(le)||e(le))&&!M.isFrame)throw new s('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:le})}for(const J of W){const Q=e(A[J])?A[J]:[A[J]];for(const U of Q){if(!t(U)||Object.keys(U).some(te=>d(D,te,{vocab:!0},M)==="@value"))throw new s("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:U});await P({activeCtx:D,activeProperty:F,expandedActiveProperty:X,element:U,expandedParent:z,options:M,insideList:Y,typeScopedContext:H,typeKey:b})}}}function x({activeCtx:D,activeProperty:F,value:X,options:A}){if(X==null)return null;const z=d(D,F,{vocab:!0},A);if(z==="@id")return d(D,X,{base:!0},A);if(z==="@type")return d(D,X,{vocab:!0,base:!0},{...A,typeExpansion:!0});const M=g(D,F,"@type");if((M==="@id"||z==="@graph")&&o(X)){const b=d(D,X,{base:!0},A);return b===null&&X.match(v)&&A.eventHandler&&T({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:F}},options:A}),{"@id":b}}if(M==="@vocab"&&o(X))return{"@id":d(D,X,{vocab:!0,base:!0},A)};if(y(z))return X;const Y={};if(M&&!["@id","@vocab","@none"].includes(M))Y["@type"]=M;else if(o(X)){const b=g(D,F,"@language");b!==null&&(Y["@language"]=b);const H=g(D,F,"@direction");H!==null&&(Y["@direction"]=H)}return["boolean","number","string"].includes(typeof X)||(X=X.toString()),Y["@value"]=X,Y}function j(D,F,X,A){const z=[],M=Object.keys(F).sort();for(const Y of M){const b=d(D,Y,{vocab:!0},A);let H=F[Y];e(H)||(H=[H]);for(const K of H){if(K===null)continue;if(!o(K))throw new s("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:F});const W={"@value":K};b!=="@none"&&(Y.match(I)||A.eventHandler&&T({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Y}},options:A}),W["@language"]=Y.toLowerCase()),X&&(W["@direction"]=X),z.push(W)}}return z}async function q({activeCtx:D,options:F,activeProperty:X,value:A,asGraph:z,indexKey:M,propertyIndex:Y}){const b=[],H=Object.keys(A).sort(),K=M==="@type";for(let W of H){if(K){const J=g(D,W,"@context");i(J)||(D=await w({activeCtx:D,localCtx:J,propagate:!1,options:F}))}let le=A[W];e(le)||(le=[le]),le=await B.expand({activeCtx:D,activeProperty:X,element:le,options:F,insideList:!1,insideIndex:!0});let V;Y?W==="@none"?V="@none":V=x({activeCtx:D,activeProperty:M,value:W,options:F}):V=d(D,W,{vocab:!0},F),M==="@id"?W=d(D,W,{base:!0},F):K&&(W=V);for(let J of le){if(z&&!p(J)&&(J={"@graph":[J]}),M==="@type")V==="@none"||(J["@type"]?J["@type"]=[W].concat(J["@type"]):J["@type"]=[W]);else{if(n(J)&&!["@language","@type","@index"].includes(M))throw new s(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${M}".`,"jsonld.SyntaxError",{code:"invalid value object",value:J});Y?V!=="@none"&&R(J,Y,V,{propertyIsArray:!0,prependValue:!0}):V!=="@none"&&!(M in J)&&(J[M]=W)}b.push(J)}}return b}return Sn}var In,gs;function xr(){if(gs)return In;gs=1;const{isKeyword:s}=bt(),e=nt(),t=We(),r=Ve(),o=Je(),i={};return In=i,i.createMergedNodeMap=(a,n)=>{n=n||{};const p=n.issuer||new r.IdentifierIssuer("_:b"),l={"@default":{}};return i.createNodeMap(a,l,"@default",p),i.mergeNodeMaps(l)},i.createNodeMap=(a,n,p,l,d,g)=>{if(t.isArray(a)){for(const S of a)i.createNodeMap(S,n,p,l,void 0,g);return}if(!t.isObject(a)){g&&g.push(a);return}if(e.isValue(a)){if("@type"in a){let S=a["@type"];S.indexOf("_:")===0&&(a["@type"]=S=l.getId(S))}g&&g.push(a);return}else if(g&&e.isList(a)){const S=[];i.createNodeMap(a["@list"],n,p,l,d,S),g.push({"@list":S});return}if("@type"in a){const S=a["@type"];for(const I of S)I.indexOf("_:")===0&&l.getId(I)}t.isUndefined(d)&&(d=e.isBlankNode(a)?l.getId(a["@id"]):a["@id"]),g&&g.push({"@id":d});const y=n[p],w=y[d]=y[d]||{};w["@id"]=d;const m=Object.keys(a).sort();for(let S of m){if(S==="@id")continue;if(S==="@reverse"){const v={"@id":d},R=a["@reverse"];for(const h in R){const u=R[h];for(const _ of u){let T=_["@id"];e.isBlankNode(_)&&(T=l.getId(T)),i.createNodeMap(_,n,p,l,T),r.addValue(y[T],h,v,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if(S==="@graph"){d in n||(n[d]={}),i.createNodeMap(a[S],n,d,l);continue}if(S==="@included"){i.createNodeMap(a[S],n,p,l);continue}if(S!=="@type"&&s(S)){if(S==="@index"&&S in w&&(a[S]!==w[S]||a[S]["@id"]!==w[S]["@id"]))throw new o("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:w});w[S]=a[S];continue}const I=a[S];if(S.indexOf("_:")===0&&(S=l.getId(S)),I.length===0){r.addValue(w,S,[],{propertyIsArray:!0});continue}for(let v of I)if(S==="@type"&&(v=v.indexOf("_:")===0?l.getId(v):v),e.isSubject(v)||e.isSubjectReference(v)){if("@id"in v&&!v["@id"])continue;const R=e.isBlankNode(v)?l.getId(v["@id"]):v["@id"];r.addValue(w,S,{"@id":R},{propertyIsArray:!0,allowDuplicate:!1}),i.createNodeMap(v,n,p,l,R)}else if(e.isValue(v))r.addValue(w,S,v,{propertyIsArray:!0,allowDuplicate:!1});else if(e.isList(v)){const R=[];i.createNodeMap(v["@list"],n,p,l,d,R),v={"@list":R},r.addValue(w,S,v,{propertyIsArray:!0,allowDuplicate:!1})}else i.createNodeMap(v,n,p,l,d),r.addValue(w,S,v,{propertyIsArray:!0,allowDuplicate:!1})}},i.mergeNodeMapGraphs=a=>{const n={};for(const p of Object.keys(a).sort())for(const l of Object.keys(a[p]).sort()){const d=a[p][l];l in n||(n[l]={"@id":l});const g=n[l];for(const y of Object.keys(d).sort())if(s(y)&&y!=="@type")g[y]=r.clone(d[y]);else for(const w of d[y])r.addValue(g,y,r.clone(w),{propertyIsArray:!0,allowDuplicate:!1})}return n},i.mergeNodeMaps=a=>{const n=a["@default"],p=Object.keys(a).sort();for(const l of p){if(l==="@default")continue;const d=a[l];let g=n[l];g?"@graph"in g||(g["@graph"]=[]):n[l]=g={"@id":l,"@graph":[]};const y=g["@graph"];for(const w of Object.keys(d).sort()){const m=d[w];e.isSubjectReference(m)||y.push(m)}}return n},In}var Rn,_s;function mo(){if(_s)return Rn;_s=1;const{isSubjectReference:s}=nt(),{createMergedNodeMap:e}=xr(),t={};return Rn=t,t.flatten=r=>{const o=e(r),i=[],a=Object.keys(o).sort();for(let n=0;n<a.length;++n){const p=o[a[n]];s(p)||i.push(p)}return i},Rn}var Nn,ys;function wo(){if(ys)return Nn;ys=1;const s=Je(),e=nt(),t=We(),{REGEX_BCP47:r,addValue:o}=Ve(),{handleEvent:i}=rr(),{RDF_LIST:a,RDF_FIRST:n,RDF_REST:p,RDF_NIL:l,RDF_TYPE:d,RDF_JSON_LITERAL:g,XSD_BOOLEAN:y,XSD_DOUBLE:w,XSD_INTEGER:m,XSD_STRING:S}=Xn(),I={};Nn=I,I.fromRDF=async(h,u)=>{const{useRdfType:_=!1,useNativeTypes:T=!1,rdfDirection:B=null}=u,E={},P={"@default":E},x={};if(B){if(B==="compound-literal")throw new s("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:B});if(B!=="i18n-datatype")throw new s("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:B})}for(const D of h){const F=D.graph.termType==="DefaultGraph"?"@default":D.graph.value;F in P||(P[F]={}),F!=="@default"&&!(F in E)&&(E[F]={"@id":F});const X=P[F],A=R(D.subject),z=D.predicate.value,M=D.object;A in X||(X[A]={"@id":A});const Y=X[A],b=R(M),H=!!b;if(H&&!(b in X)&&(X[b]={"@id":b}),z===d&&!_&&H){o(Y,"@type",b,{propertyIsArray:!0});continue}const K=v(M,T,B,u);if(o(Y,z,K,{propertyIsArray:!0}),H)if(b===l){const W=X[b];"usages"in W||(W.usages=[]),W.usages.push({node:Y,property:z,value:K})}else b in x?x[b]=!1:x[b]={node:Y,property:z,value:K}}for(const D in P){const F=P[D];if(!(l in F))continue;const X=F[l];if(X.usages){for(let A of X.usages){let z=A.node,M=A.property,Y=A.value;const b=[],H=[];let K=Object.keys(z).length;for(;M===p&&t.isObject(x[z["@id"]])&&t.isArray(z[n])&&z[n].length===1&&t.isArray(z[p])&&z[p].length===1&&(K===3||K===4&&t.isArray(z["@type"])&&z["@type"].length===1&&z["@type"][0]===a)&&(b.push(z[n][0]),H.push(z["@id"]),A=x[z["@id"]],z=A.node,M=A.property,Y=A.value,K=Object.keys(z).length,!!e.isBlankNode(z)););delete Y["@id"],Y["@list"]=b.reverse();for(const W of H)delete F[W]}delete X.usages}}const j=[],q=Object.keys(E).sort();for(const D of q){const F=E[D];if(D in P){const X=F["@graph"]=[],A=P[D],z=Object.keys(A).sort();for(const M of z){const Y=A[M];e.isSubjectReference(Y)||X.push(Y)}}e.isSubjectReference(F)||j.push(F)}return j};function v(h,u,_,T){const B=R(h);if(B)return{"@id":B};const E={"@value":h.value};if(h.language)h.language.match(r)||T.eventHandler&&i({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:h.language}},options:T}),E["@language"]=h.language;else{let P=h.datatype.value;if(P||(P=S),P===g){P="@json";try{E["@value"]=JSON.parse(E["@value"])}catch(x){throw new s("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:E["@value"],cause:x})}}if(u)if(P===y)E["@value"]==="true"||E["@value"]==="1"?E["@value"]=!0:E["@value"]==="false"||E["@value"]==="0"?E["@value"]=!1:E["@type"]=P;else if(P===m)if(t.isNumeric(E["@value"])){const x=parseInt(E["@value"],10);x.toFixed(0)===E["@value"]&&(E["@value"]=x)}else E["@type"]=P;else P===w&&t.isNumeric(E["@value"])?E["@value"]=parseFloat(E["@value"]):E["@type"]=P;else if(_==="i18n-datatype"&&P.startsWith("https://www.w3.org/ns/i18n#")){const[,x,j]=P.split(/[#_]/);x.length>0&&(E["@language"]=x,x.match(r)||T.eventHandler&&i({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:x}},options:T})),E["@direction"]=j}else P!==S&&(E["@type"]=P)}return E}function R(h){return h.termType==="NamedNode"?h.value:h.termType==="BlankNode"?"_:"+h.value:null}return Nn}var Tn,bs;function xo(){return bs||(bs=1,Tn=function s(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?s(e.toJSON()):Array.isArray(e)?`[${e.reduce((o,i,a)=>`${o}${a===0?"":","}${s(i===void 0||typeof i=="symbol"?null:i)}`,"")}]`:`{${Object.keys(e).sort().reduce((r,o)=>{if(e[o]===void 0||typeof e[o]=="symbol")return r;const i=r.length===0?"":",";return`${r}${i}${s(o)}:${s(e[o])}`},"")}}`}),Tn}var An,ms;function vo(){if(ms)return An;ms=1;const{createNodeMap:s}=xr(),{isKeyword:e}=bt(),t=nt(),r=xo(),o=Je(),i=We(),a=Ve(),{handleEvent:n}=rr(),{RDF_FIRST:p,RDF_REST:l,RDF_NIL:d,RDF_TYPE:g,RDF_JSON_LITERAL:y,RDF_LANGSTRING:w,XSD_BOOLEAN:m,XSD_DOUBLE:S,XSD_INTEGER:I,XSD_STRING:v}=Xn(),{isAbsolute:R}=ut(),h={};An=h,h.toRDF=(E,P)=>{const x=new a.IdentifierIssuer("_:b"),j={"@default":{}};s(E,j,"@default",x);const q=[],D=Object.keys(j).sort();for(const F of D){let X;if(F==="@default")X={termType:"DefaultGraph",value:""};else if(R(F))X=B(F);else{P.eventHandler&&n({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:F}},options:P});continue}u(q,j[F],X,x,P)}return q};function u(E,P,x,j,q){const D=Object.keys(P).sort();for(const F of D){const X=P[F],A=Object.keys(X).sort();for(let z of A){const M=X[z];if(z==="@type")z=g;else if(e(z))continue;for(const Y of M){const b=B(F);if(!R(F)){q.eventHandler&&n({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:F}},options:q});continue}const H=B(z);if(!R(z)){q.eventHandler&&n({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:z}},options:q});continue}if(H.termType==="BlankNode"&&!q.produceGeneralizedRdf){q.eventHandler&&n({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:j.getOldIds().find(W=>j.getId(W)===z)}},options:q});continue}const K=T(Y,j,E,x,q.rdfDirection,q);K&&E.push({subject:b,predicate:H,object:K,graph:x})}}}}function _(E,P,x,j,q,D){const F={termType:"NamedNode",value:p},X={termType:"NamedNode",value:l},A={termType:"NamedNode",value:d},z=E.pop(),M=z?{termType:"BlankNode",value:P.getId().slice(2)}:A;let Y=M;for(const b of E){const H=T(b,P,x,j,q,D),K={termType:"BlankNode",value:P.getId().slice(2)};x.push({subject:Y,predicate:F,object:H,graph:j}),x.push({subject:Y,predicate:X,object:K,graph:j}),Y=K}if(z){const b=T(z,P,x,j,q,D);x.push({subject:Y,predicate:F,object:b,graph:j}),x.push({subject:Y,predicate:X,object:A,graph:j})}return M}function T(E,P,x,j,q,D){let F;if(t.isValue(E)){F={termType:"Literal",value:void 0,datatype:{termType:"NamedNode"}};let X=E["@value"];const A=E["@type"]||null;if(A==="@json")F.value=r(X),F.datatype.value=y;else if(i.isBoolean(X))F.value=X.toString(),F.datatype.value=A||m;else if(i.isDouble(X)||A===S)i.isDouble(X)||(X=parseFloat(X)),F.value=X.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),F.datatype.value=A||S;else if(i.isNumber(X))F.value=X.toFixed(0),F.datatype.value=A||I;else if("@direction"in E&&q==="i18n-datatype"){const z=(E["@language"]||"").toLowerCase(),M=E["@direction"],Y=`https://www.w3.org/ns/i18n#${z}_${M}`;F.datatype.value=Y,F.value=X}else{if("@direction"in E&&q==="compound-literal")throw new o("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:q});if("@direction"in E&&q)throw new o("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:q});"@language"in E?("@direction"in E&&!q&&D.eventHandler&&n({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:F.value}},options:D}),F.value=X,F.datatype.value=A||w,F.language=E["@language"]):("@direction"in E&&!q&&D.eventHandler&&n({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:F.value}},options:D}),F.value=X,F.datatype.value=A||v)}}else if(t.isList(E)){const X=_(E["@list"],P,x,j,q,D);F={termType:X.termType,value:X.value}}else{const X=i.isObject(E)?E["@id"]:E;F=B(X)}return F.termType==="NamedNode"&&!R(F.value)?(D.eventHandler&&n({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:F.value}},options:D}),null):F}function B(E){return E.startsWith("_:")?{termType:"BlankNode",value:E.slice(2)}:{termType:"NamedNode",value:E}}return An}var Dn,ws;function Eo(){if(ws)return Dn;ws=1;const{isKeyword:s}=bt(),e=nt(),t=We(),r=Ve(),o=ut(),i=Je(),{createNodeMap:a,mergeNodeMapGraphs:n}=xr(),p={};Dn=p,p.frameMergedOrDefault=(u,_,T)=>{const B={options:T,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},E=new r.IdentifierIssuer("_:b");a(u,B.graphMap,"@default",E),T.merged&&(B.graphMap["@merged"]=n(B.graphMap),B.graph="@merged"),B.subjects=B.graphMap[B.graph];const P=[];p.frame(B,Object.keys(B.subjects).sort(),_,P),T.pruneBlankNodeIdentifiers&&(T.bnodesToClear=Object.keys(B.bnodeMap).filter(x=>B.bnodeMap[x].length===1));return T.link={},I(P,T)},p.frame=(u,_,T,B,E=null)=>{y(T),T=T[0];const P=u.options,x={embed:g(T,P,"embed"),explicit:g(T,P,"explicit"),requireAll:g(T,P,"requireAll")};u.link.hasOwnProperty(u.graph)||(u.link[u.graph]={});const j=u.link[u.graph],q=w(u,_,T,x),D=Object.keys(q).sort();for(const F of D){const X=q[F];if(E===null?u.uniqueEmbeds={[u.graph]:{}}:u.uniqueEmbeds[u.graph]=u.uniqueEmbeds[u.graph]||{},x.embed==="@link"&&F in j){v(B,E,j[F]);continue}const A={"@id":F};if(F.indexOf("_:")===0&&r.addValue(u.bnodeMap,F,A,{propertyIsArray:!0}),j[F]=A,(x.embed==="@first"||x.embed==="@last")&&u.is11)throw new i("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:T});if(!(!u.embedded&&u.uniqueEmbeds[u.graph].hasOwnProperty(F))){if(u.embedded&&(x.embed==="@never"||d(X,u.graph,u.subjectStack))){v(B,E,A);continue}if(u.embedded&&(x.embed=="@first"||x.embed=="@once")&&u.uniqueEmbeds[u.graph].hasOwnProperty(F)){v(B,E,A);continue}if(x.embed==="@last"&&F in u.uniqueEmbeds[u.graph]&&S(u,F),u.uniqueEmbeds[u.graph][F]={parent:B,property:E},u.subjectStack.push({subject:X,graph:u.graph}),F in u.graphMap){let z=!1,M=null;"@graph"in T?(M=T["@graph"][0],z=!(F==="@merged"||F==="@default"),t.isObject(M)||(M={})):(z=u.graph!=="@merged",M={}),z&&p.frame({...u,graph:F,embedded:!1},Object.keys(u.graphMap[F]).sort(),[M],A,"@graph")}"@included"in T&&p.frame({...u,embedded:!1},_,T["@included"],A,"@included");for(const z of Object.keys(X).sort()){if(s(z)){if(A[z]=r.clone(X[z]),z==="@type")for(const M of X["@type"])M.indexOf("_:")===0&&r.addValue(u.bnodeMap,M,A,{propertyIsArray:!0});continue}if(!(x.explicit&&!(z in T)))for(const M of X[z]){const Y=z in T?T[z]:l(x);if(e.isList(M)){const b=T[z]&&T[z][0]&&T[z][0]["@list"]?T[z][0]["@list"]:l(x),H={"@list":[]};v(A,z,H);const K=M["@list"];for(const W of K)e.isSubjectReference(W)?p.frame({...u,embedded:!0},[W["@id"]],b,H,"@list"):v(H,"@list",r.clone(W))}else e.isSubjectReference(M)?p.frame({...u,embedded:!0},[M["@id"]],Y,A,z):h(Y[0],M)&&v(A,z,r.clone(M))}}for(const z of Object.keys(T).sort()){if(z==="@type"){if(!t.isObject(T[z][0])||!("@default"in T[z][0]))continue}else if(s(z))continue;const M=T[z][0]||{};if(!g(M,P,"omitDefault")&&!(z in A)){let b="@null";"@default"in M&&(b=r.clone(M["@default"])),t.isArray(b)||(b=[b]),A[z]=[{"@preserve":b}]}}for(const z of Object.keys(T["@reverse"]||{}).sort()){const M=T["@reverse"][z];for(const Y of Object.keys(u.subjects))r.getValues(u.subjects[Y],z).some(H=>H["@id"]===F)&&(A["@reverse"]=A["@reverse"]||{},r.addValue(A["@reverse"],z,[],{propertyIsArray:!0}),p.frame({...u,embedded:!0},[Y],M,A["@reverse"][z],E))}v(B,E,A),u.subjectStack.pop()}}},p.cleanupNull=(u,_)=>{if(t.isArray(u))return u.map(B=>p.cleanupNull(B,_)).filter(B=>B);if(u==="@null")return null;if(t.isObject(u)){if("@id"in u){const T=u["@id"];if(_.link.hasOwnProperty(T)){const B=_.link[T].indexOf(u);if(B!==-1)return _.link[T][B];_.link[T].push(u)}else _.link[T]=[u]}for(const T in u)u[T]=p.cleanupNull(u[T],_)}return u};function l(u){const _={};for(const T in u)u[T]!==void 0&&(_["@"+T]=[u[T]]);return[_]}function d(u,_,T){for(let B=T.length-1;B>=0;--B){const E=T[B];if(E.graph===_&&E.subject["@id"]===u["@id"])return!0}return!1}function g(u,_,T){const B="@"+T;let E=B in u?u[B][0]:_[T];if(T==="embed"){if(E===!0)E="@once";else if(E===!1)E="@never";else if(E!=="@always"&&E!=="@never"&&E!=="@link"&&E!=="@first"&&E!=="@last"&&E!=="@once")throw new i("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:u})}return E}function y(u){if(!t.isArray(u)||u.length!==1||!t.isObject(u[0]))throw new i("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:u});if("@id"in u[0]){for(const _ of r.asArray(u[0]["@id"]))if(!(t.isObject(_)||o.isAbsolute(_))||t.isString(_)&&_.indexOf("_:")===0)throw new i("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:u})}if("@type"in u[0]){for(const _ of r.asArray(u[0]["@type"]))if(!(t.isObject(_)||o.isAbsolute(_)||_==="@json")||t.isString(_)&&_.indexOf("_:")===0)throw new i("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:u})}}function w(u,_,T,B){const E={};for(const P of _){const x=u.graphMap[u.graph][P];m(u,x,T,B)&&(E[P]=x)}return E}function m(u,_,T,B){let E=!0,P=!1;for(const x in T){let j=!1;const q=r.getValues(_,x),D=r.getValues(T,x).length===0;if(x==="@id"){if(t.isEmptyObject(T["@id"][0]||{})?j=!0:T["@id"].length>=0&&(j=T["@id"].includes(q[0])),!B.requireAll)return j}else if(x==="@type"){if(E=!1,D){if(q.length>0)return!1;j=!0}else if(T["@type"].length===1&&t.isEmptyObject(T["@type"][0]))j=q.length>0;else for(const F of T["@type"])t.isObject(F)&&"@default"in F?j=!0:j=j||q.some(X=>X===F);if(!B.requireAll)return j}else{if(s(x))continue;{const F=r.getValues(T,x)[0];let X=!1;if(F&&(y([F]),X="@default"in F),E=!1,q.length===0&&X)continue;if(q.length>0&&D)return!1;if(F===void 0){if(q.length>0)return!1;j=!0}else if(e.isList(F)){const A=F["@list"][0];if(e.isList(q[0])){const z=q[0]["@list"];e.isValue(A)?j=z.some(M=>h(A,M)):(e.isSubject(A)||e.isSubjectReference(A))&&(j=z.some(M=>R(u,A,M,B)))}}else e.isValue(F)?j=q.some(A=>h(F,A)):e.isSubjectReference(F)?j=q.some(A=>R(u,F,A,B)):t.isObject(F)?j=q.length>0:j=!1}}if(!j&&B.requireAll)return!1;P=P||j}return E||P}function S(u,_){const T=u.uniqueEmbeds[u.graph],B=T[_],E=B.parent,P=B.property,x={"@id":_};if(t.isArray(E)){for(let q=0;q<E.length;++q)if(r.compareValues(E[q],x)){E[q]=x;break}}else{const q=t.isArray(E[P]);r.removeValue(E,P,x,{propertyIsArray:q}),r.addValue(E,P,x,{propertyIsArray:q})}const j=q=>{const D=Object.keys(T);for(const F of D)F in T&&t.isObject(T[F].parent)&&T[F].parent["@id"]===q&&(delete T[F],j(F))};j(_)}function I(u,_){if(t.isArray(u))return u.map(T=>I(T,_));if(t.isObject(u)){if("@preserve"in u)return u["@preserve"][0];if(e.isValue(u))return u;if(e.isList(u))return u["@list"]=I(u["@list"],_),u;if("@id"in u){const T=u["@id"];if(_.link.hasOwnProperty(T)){const B=_.link[T].indexOf(u);if(B!==-1)return _.link[T][B];_.link[T].push(u)}else _.link[T]=[u]}for(const T in u){if(T==="@id"&&_.bnodesToClear.includes(u[T])){delete u["@id"];continue}u[T]=I(u[T],_)}}return u}function v(u,_,T){t.isObject(u)?r.addValue(u,_,T,{propertyIsArray:!0}):u.push(T)}function R(u,_,T,B){if(!("@id"in T))return!1;const E=u.subjects[T["@id"]];return E&&m(u,E,_,B)}function h(u,_){const T=_["@value"],B=_["@type"],E=_["@language"],P=u["@value"]?t.isArray(u["@value"])?u["@value"]:[u["@value"]]:[],x=u["@type"]?t.isArray(u["@type"])?u["@type"]:[u["@type"]]:[],j=u["@language"]?t.isArray(u["@language"])?u["@language"]:[u["@language"]]:[];return P.length===0&&x.length===0&&j.length===0?!0:!(!(P.includes(T)||t.isEmptyObject(P[0]))||!(!B&&x.length===0||x.includes(B)||B&&t.isEmptyObject(x[0]))||!(!E&&j.length===0||j.includes(E)||E&&t.isEmptyObject(j[0])))}return Dn}var Fn,xs;function So(){if(xs)return Fn;xs=1;const s=Je(),{isArray:e,isObject:t,isString:r,isUndefined:o}=We(),{isList:i,isValue:a,isGraph:n,isSimpleGraph:p,isSubjectReference:l}=nt(),{expandIri:d,getContextValue:g,isKeyword:y,process:w,processingMode:m}=bt(),{removeBase:S,prependBase:I}=ut(),{REGEX_KEYWORD:v,addValue:R,asArray:h,compareShortestLeast:u}=Ve(),_={};Fn=_,_.compact=async({activeCtx:E,activeProperty:P=null,element:x,options:j={}})=>{if(e(x)){let D=[];for(let F=0;F<x.length;++F){const X=await _.compact({activeCtx:E,activeProperty:P,element:x[F],options:j});X!==null&&D.push(X)}return j.compactArrays&&D.length===1&&(g(E,P,"@container")||[]).length===0&&(D=D[0]),D}const q=g(E,P,"@context");if(o(q)||(E=await w({activeCtx:E,localCtx:q,propagate:!0,overrideProtected:!0,options:j})),t(x)){if(j.link&&"@id"in x&&j.link.hasOwnProperty(x["@id"])){const b=j.link[x["@id"]];for(let H=0;H<b.length;++H)if(b[H].expanded===x)return b[H].compacted}if(a(x)||l(x)){const b=_.compactValue({activeCtx:E,activeProperty:P,value:x,options:j});return j.link&&l(x)&&(j.link.hasOwnProperty(x["@id"])||(j.link[x["@id"]]=[]),j.link[x["@id"]].push({expanded:x,compacted:b})),b}if(i(x)&&(g(E,P,"@container")||[]).includes("@list"))return _.compact({activeCtx:E,activeProperty:P,element:x["@list"],options:j});const D=P==="@reverse",F={},X=E;!a(x)&&!l(x)&&(E=E.revertToPreviousContext());const A=g(X,P,"@context");o(A)||(E=await w({activeCtx:E,localCtx:A,propagate:!0,overrideProtected:!0,options:j})),j.link&&"@id"in x&&(j.link.hasOwnProperty(x["@id"])||(j.link[x["@id"]]=[]),j.link[x["@id"]].push({expanded:x,compacted:F}));let z=x["@type"]||[];z.length>1&&(z=Array.from(z).sort());const M=E;for(const b of z){const H=_.compactIri({activeCtx:M,iri:b,relativeTo:{vocab:!0}}),K=g(X,H,"@context");o(K)||(E=await w({activeCtx:E,localCtx:K,options:j,propagate:!1}))}const Y=Object.keys(x).sort();for(const b of Y){const H=x[b];if(b==="@id"){let K=h(H).map(le=>_.compactIri({activeCtx:E,iri:le,relativeTo:{vocab:!1},base:j.base}));K.length===1&&(K=K[0]);const W=_.compactIri({activeCtx:E,iri:"@id",relativeTo:{vocab:!0}});F[W]=K;continue}if(b==="@type"){let K=h(H).map(Q=>_.compactIri({activeCtx:X,iri:Q,relativeTo:{vocab:!0}}));K.length===1&&(K=K[0]);const W=_.compactIri({activeCtx:E,iri:"@type",relativeTo:{vocab:!0}}),J=(g(E,W,"@container")||[]).includes("@set")&&m(E,1.1)||e(K)&&H.length===0;R(F,W,K,{propertyIsArray:J});continue}if(b==="@reverse"){const K=await _.compact({activeCtx:E,activeProperty:"@reverse",element:H,options:j});for(const W in K)if(E.mappings.has(W)&&E.mappings.get(W).reverse){const le=K[W],J=(g(E,W,"@container")||[]).includes("@set")||!j.compactArrays;R(F,W,le,{propertyIsArray:J}),delete K[W]}if(Object.keys(K).length>0){const W=_.compactIri({activeCtx:E,iri:b,relativeTo:{vocab:!0}});R(F,W,K)}continue}if(b==="@preserve"){const K=await _.compact({activeCtx:E,activeProperty:P,element:H,options:j});e(K)&&K.length===0||R(F,b,K);continue}if(b==="@index"){if((g(E,P,"@container")||[]).includes("@index"))continue;const W=_.compactIri({activeCtx:E,iri:b,relativeTo:{vocab:!0}});R(F,W,H);continue}if(b!=="@graph"&&b!=="@list"&&b!=="@included"&&y(b)){const K=_.compactIri({activeCtx:E,iri:b,relativeTo:{vocab:!0}});R(F,K,H);continue}if(!e(H))throw new s("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(H.length===0){const K=_.compactIri({activeCtx:E,iri:b,value:H,relativeTo:{vocab:!0},reverse:D}),W=E.mappings.has(K)?E.mappings.get(K)["@nest"]:null;let le=F;W&&(B(E,W,j),t(F[W])||(F[W]={}),le=F[W]),R(le,K,H,{propertyIsArray:!0})}for(const K of H){const W=_.compactIri({activeCtx:E,iri:b,value:K,relativeTo:{vocab:!0},reverse:D}),le=E.mappings.has(W)?E.mappings.get(W)["@nest"]:null;let V=F;le&&(B(E,le,j),t(F[le])||(F[le]={}),V=F[le]);const J=g(E,W,"@container")||[],Q=n(K),U=i(K);let te;U?te=K["@list"]:Q&&(te=K["@graph"]);let re=await _.compact({activeCtx:E,activeProperty:W,element:U||Q?te:K,options:j});if(U)if(e(re)||(re=[re]),!J.includes("@list"))re={[_.compactIri({activeCtx:E,iri:"@list",relativeTo:{vocab:!0}})]:re},"@index"in K&&(re[_.compactIri({activeCtx:E,iri:"@index",relativeTo:{vocab:!0}})]=K["@index"]);else{R(V,W,re,{valueIsArray:!0,allowDuplicate:!0});continue}if(Q)if(J.includes("@graph")&&(J.includes("@id")||J.includes("@index")&&p(K))){let fe;V.hasOwnProperty(W)?fe=V[W]:V[W]=fe={};const pe=(J.includes("@id")?K["@id"]:K["@index"])||_.compactIri({activeCtx:E,iri:"@none",relativeTo:{vocab:!0}});R(fe,pe,re,{propertyIsArray:!j.compactArrays||J.includes("@set")})}else J.includes("@graph")&&p(K)?(e(re)&&re.length>1&&(re={"@included":re}),R(V,W,re,{propertyIsArray:!j.compactArrays||J.includes("@set")})):(e(re)&&re.length===1&&j.compactArrays&&(re=re[0]),re={[_.compactIri({activeCtx:E,iri:"@graph",relativeTo:{vocab:!0}})]:re},"@id"in K&&(re[_.compactIri({activeCtx:E,iri:"@id",relativeTo:{vocab:!0}})]=K["@id"]),"@index"in K&&(re[_.compactIri({activeCtx:E,iri:"@index",relativeTo:{vocab:!0}})]=K["@index"]),R(V,W,re,{propertyIsArray:!j.compactArrays||J.includes("@set")}));else if(J.includes("@language")||J.includes("@index")||J.includes("@id")||J.includes("@type")){let fe;V.hasOwnProperty(W)?fe=V[W]:V[W]=fe={};let pe;if(J.includes("@language"))a(re)&&(re=re["@value"]),pe=K["@language"];else if(J.includes("@index")){const O=g(E,W,"@index")||"@index",G=_.compactIri({activeCtx:E,iri:O,relativeTo:{vocab:!0}});if(O==="@index")pe=K["@index"],delete re[G];else{let se;if([pe,...se]=h(re[O]||[]),!r(pe))pe=null;else switch(se.length){case 0:delete re[O];break;case 1:re[O]=se[0];break;default:re[O]=se;break}}}else if(J.includes("@id")){const O=_.compactIri({activeCtx:E,iri:"@id",relativeTo:{vocab:!0}});pe=re[O],delete re[O]}else if(J.includes("@type")){const O=_.compactIri({activeCtx:E,iri:"@type",relativeTo:{vocab:!0}});let G;switch([pe,...G]=h(re[O]||[]),G.length){case 0:delete re[O];break;case 1:re[O]=G[0];break;default:re[O]=G;break}Object.keys(re).length===1&&"@id"in K&&(re=await _.compact({activeCtx:E,activeProperty:W,element:{"@id":K["@id"]},options:j}))}pe||(pe=_.compactIri({activeCtx:E,iri:"@none",relativeTo:{vocab:!0}})),R(fe,pe,re,{propertyIsArray:J.includes("@set")})}else{const fe=!j.compactArrays||J.includes("@set")||J.includes("@list")||e(re)&&re.length===0||b==="@list"||b==="@graph";R(V,W,re,{propertyIsArray:fe})}}}return F}return x},_.compactIri=({activeCtx:E,iri:P,value:x=null,relativeTo:j={vocab:!1},reverse:q=!1,base:D=null})=>{if(P===null)return P;E.isPropertyTermScoped&&E.previousContext&&(E=E.previousContext);const F=E.getInverse();if(y(P)&&P in F&&"@none"in F[P]&&"@type"in F[P]["@none"]&&"@none"in F[P]["@none"]["@type"])return F[P]["@none"]["@type"]["@none"];if(j.vocab&&P in F){const Y=E["@language"]||"@none",b=[];t(x)&&"@index"in x&&!("@graph"in x)&&b.push("@index","@index@set"),t(x)&&"@preserve"in x&&(x=x["@preserve"][0]),n(x)?("@index"in x&&b.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in x&&b.push("@graph@id","@graph@id@set"),b.push("@graph","@graph@set","@set"),"@index"in x||b.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in x||b.push("@graph@id","@graph@id@set")):t(x)&&!a(x)&&b.push("@id","@id@set","@type","@set@type");let H="@language",K="@null";if(q)H="@type",K="@reverse",b.push("@set");else if(i(x)){"@index"in x||b.push("@list");const le=x["@list"];if(le.length===0)H="@any",K="@none";else{let V=le.length===0?Y:null,J=null;for(let Q=0;Q<le.length;++Q){const U=le[Q];let te="@none",re="@none";if(a(U))if("@direction"in U){const fe=(U["@language"]||"").toLowerCase(),pe=U["@direction"];te=`${fe}_${pe}`}else"@language"in U?te=U["@language"].toLowerCase():"@type"in U?re=U["@type"]:te="@null";else re="@id";if(V===null?V=te:te!==V&&a(U)&&(V="@none"),J===null?J=re:re!==J&&(J="@none"),V==="@none"&&J==="@none")break}V=V||"@none",J=J||"@none",J!=="@none"?(H="@type",K=J):K=V}}else{if(a(x))if("@language"in x&&!("@index"in x)){b.push("@language","@language@set"),K=x["@language"];const le=x["@direction"];le&&(K=`${K}_${le}`)}else"@direction"in x&&!("@index"in x)?K=`_${x["@direction"]}`:"@type"in x&&(H="@type",K=x["@type"]);else H="@type",K="@id";b.push("@set")}b.push("@none"),t(x)&&!("@index"in x)&&b.push("@index","@index@set"),a(x)&&Object.keys(x).length===1&&b.push("@language","@language@set");const W=T(E,P,x,b,H,K);if(W!==null)return W}if(j.vocab&&"@vocab"in E){const Y=E["@vocab"];if(P.indexOf(Y)===0&&P!==Y){const b=P.substr(Y.length);if(!E.mappings.has(b))return b}}let X=null;const A=[];let z=E.fastCurieMap;const M=P.length-1;for(let Y=0;Y<M&&P[Y]in z;++Y)z=z[P[Y]],""in z&&A.push(z[""][0]);for(let Y=A.length-1;Y>=0;--Y){const b=A[Y],H=b.terms;for(const K of H){const W=K+":"+P.substr(b.iri.length);E.mappings.get(K)._prefix&&(!E.mappings.has(W)||x===null&&E.mappings.get(W)["@id"]===P)&&(X===null||u(W,X)<0)&&(X=W)}}if(X!==null)return X;for(const[Y,b]of E.mappings)if(b&&b._prefix&&P.startsWith(Y+":"))throw new s(`Absolute IRI "${P}" confused with prefix "${Y}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:E});if(!j.vocab)if("@base"in E)if(E["@base"]){const Y=S(I(D,E["@base"]),P);return v.test(Y)?`./${Y}`:Y}else return P;else return S(D,P);return P},_.compactValue=({activeCtx:E,activeProperty:P,value:x,options:j})=>{if(a(x)){const X=g(E,P,"@type"),A=g(E,P,"@language"),z=g(E,P,"@direction"),M=g(E,P,"@container")||[],Y="@index"in x&&!M.includes("@index");if(!Y&&X!=="@none"&&(x["@type"]===X||"@language"in x&&x["@language"]===A&&"@direction"in x&&x["@direction"]===z||"@language"in x&&x["@language"]===A||"@direction"in x&&x["@direction"]===z))return x["@value"];const b=Object.keys(x).length,H=b===1||b===2&&"@index"in x&&!Y,K="@language"in E,W=r(x["@value"]),le=E.mappings.has(P)&&E.mappings.get(P)["@language"]===null;if(H&&X!=="@none"&&(!K||!W||le))return x["@value"];const V={};return Y&&(V[_.compactIri({activeCtx:E,iri:"@index",relativeTo:{vocab:!0}})]=x["@index"]),"@type"in x?V[_.compactIri({activeCtx:E,iri:"@type",relativeTo:{vocab:!0}})]=_.compactIri({activeCtx:E,iri:x["@type"],relativeTo:{vocab:!0}}):"@language"in x&&(V[_.compactIri({activeCtx:E,iri:"@language",relativeTo:{vocab:!0}})]=x["@language"]),"@direction"in x&&(V[_.compactIri({activeCtx:E,iri:"@direction",relativeTo:{vocab:!0}})]=x["@direction"]),V[_.compactIri({activeCtx:E,iri:"@value",relativeTo:{vocab:!0}})]=x["@value"],V}const q=d(E,P,{vocab:!0},j),D=g(E,P,"@type"),F=_.compactIri({activeCtx:E,iri:x["@id"],relativeTo:{vocab:D==="@vocab"},base:j.base});return D==="@id"||D==="@vocab"||q==="@graph"?F:{[_.compactIri({activeCtx:E,iri:"@id",relativeTo:{vocab:!0}})]:F}};function T(E,P,x,j,q,D){D===null&&(D="@null");const F=[];if((D==="@id"||D==="@reverse")&&t(x)&&"@id"in x){D==="@reverse"&&F.push("@reverse");const A=_.compactIri({activeCtx:E,iri:x["@id"],relativeTo:{vocab:!0}});E.mappings.has(A)&&E.mappings.get(A)&&E.mappings.get(A)["@id"]===x["@id"]?F.push.apply(F,["@vocab","@id"]):F.push.apply(F,["@id","@vocab"])}else{F.push(D);const A=F.find(z=>z.includes("_"));A&&F.push(A.replace(/^[^_]+_/,"_"))}F.push("@none");const X=E.inverse[P];for(const A of j){if(!(A in X))continue;const z=X[A][q];for(const M of F)if(M in z)return z[M]}return null}function B(E,P,x){if(d(E,P,{vocab:!0},x)!=="@nest")throw new s("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}return Fn}var jn,vs;function Io(){return vs||(vs=1,jn=s=>{class e{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(e,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(e.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:e}),e.compact=function(t,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):s.compact(t,r)},e.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):s.expand(t)},e.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):s.flatten(t)},e}),jn}var Ln,Es;function Ro(){if(Es)return Ln;Es=1;const s=zn(),e=fo(),t=Ve(),r=_o(),o=t.IdentifierIssuer,i=Je(),a=wa(),n=yo(),{expand:p}=bo(),{flatten:l}=mo(),{fromRDF:d}=wo(),{toRDF:g}=vo(),{frameMergedOrDefault:y,cleanupNull:w}=Eo(),{isArray:m,isObject:S,isString:I}=We(),{isSubjectReference:v}=nt(),{expandIri:R,getInitialContext:h,process:u,processingMode:_}=bt(),{compact:T,compactIri:B}=So(),{createNodeMap:E,createMergedNodeMap:P,mergeNodeMaps:x}=xr(),{logEventHandler:j,logWarningEventHandler:q,safeEventHandler:D,setDefaultEventHandler:F,setupEventHandler:X,strictEventHandler:A,unhandledEventHandler:z}=rr(),M=function(b){const H={},W=new a({max:100});b.compact=async function(V,J,Q){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(J===null)throw new i("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(V===null)return null;Q=le(Q,{base:I(V)?V:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new o("_:b"),contextResolver:new r({sharedCache:W})}),Q.link&&(Q.skipExpansion=!0),Q.compactToRelative||delete Q.base;let U;Q.skipExpansion?U=V:U=await b.expand(V,Q);const te=await b.processContext(h(Q),J,Q);let re=await T({activeCtx:te,element:U,options:Q});Q.compactArrays&&!Q.graph&&m(re)?re.length===1?re=re[0]:re.length===0&&(re={}):Q.graph&&S(re)&&(re=[re]),S(J)&&"@context"in J&&(J=J["@context"]),J=t.clone(J),m(J)||(J=[J]);const fe=J;J=[];for(let O=0;O<fe.length;++O)(!S(fe[O])||Object.keys(fe[O]).length>0)&&J.push(fe[O]);const pe=J.length>0;if(J.length===1&&(J=J[0]),m(re)){const O=B({activeCtx:te,iri:"@graph",relativeTo:{vocab:!0}}),G=re;re={},pe&&(re["@context"]=J),re[O]=G}else if(S(re)&&pe){const O=re;re={"@context":J};for(const G in O)re[G]=O[G]}return re},b.expand=async function(V,J){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");J=le(J,{keepFreeFloatingNodes:!1,contextResolver:new r({sharedCache:W})});const Q={},U=[];if("expandContext"in J){const pe=t.clone(J.expandContext);S(pe)&&"@context"in pe?Q.expandContext=pe:Q.expandContext={"@context":pe},U.push(Q.expandContext)}let te;if(!I(V))Q.input=t.clone(V);else{const pe=await b.get(V,J);te=pe.documentUrl,Q.input=pe.document,pe.contextUrl&&(Q.remoteContext={"@context":pe.contextUrl},U.push(Q.remoteContext))}"base"in J||(J.base=te||"");let re=h(J);for(const pe of U)re=await u({activeCtx:re,localCtx:pe,options:J});let fe=await p({activeCtx:re,element:Q.input,options:J});return S(fe)&&"@graph"in fe&&Object.keys(fe).length===1?fe=fe["@graph"]:fe===null&&(fe=[]),m(fe)||(fe=[fe]),fe},b.flatten=async function(V,J,Q){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");typeof J=="function"?J=null:J=J||null,Q=le(Q,{base:I(V)?V:"",contextResolver:new r({sharedCache:W})});const U=await b.expand(V,Q),te=l(U);return J===null?te:(Q.graph=!0,Q.skipExpansion=!0,await b.compact(te,J,Q))},b.frame=async function(V,J,Q){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(Q=le(Q,{base:I(V)?V:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new r({sharedCache:W})}),I(J)){const de=await b.get(J,Q);if(J=de.document,de.contextUrl){let he=J["@context"];he?m(he)?he.push(de.contextUrl):he=[he,de.contextUrl]:he=de.contextUrl,J["@context"]=he}}const U=J?J["@context"]||{}:{},te=await b.processContext(h(Q),U,Q);Q.hasOwnProperty("omitGraph")||(Q.omitGraph=_(te,1.1)),Q.hasOwnProperty("pruneBlankNodeIdentifiers")||(Q.pruneBlankNodeIdentifiers=_(te,1.1));const re=await b.expand(V,Q),fe={...Q};fe.isFrame=!0,fe.keepFreeFloatingNodes=!0;const pe=await b.expand(J,fe),O=Object.keys(J).map(de=>R(te,de,{vocab:!0}));fe.merged=!O.includes("@graph"),fe.is11=_(te,1.1);const G=y(re,pe,fe);fe.graph=!Q.omitGraph,fe.skipExpansion=!0,fe.link={},fe.framing=!0;let se=await b.compact(G,U,fe);return fe.link={},se=w(se,fe),se},b.link=async function(V,J,Q){const U={};return J&&(U["@context"]=J),U["@embed"]="@link",b.frame(V,U,Q)},b.normalize=b.canonize=async function(V,J){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");J=le(J,{skipExpansion:!1,safe:!0,contextResolver:new r({sharedCache:W})});const Q=Object.assign({},{algorithm:"RDFC-1.0"},J.canonizeOptions||null);if("inputFormat"in J){if(J.inputFormat!=="application/n-quads")throw new i("Unknown canonicalization input format.","jsonld.CanonizeError");const re=n.parse(V);return s.canonize(re,Q)}const U={...J};delete U.format,delete U.canonizeOptions,U.produceGeneralizedRdf=!1;const te=await b.toRDF(V,U);return s.canonize(te,Q)},b.fromRDF=async function(V,J){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");J=le(J,{format:I(V)?"application/n-quads":void 0});const{format:Q}=J;let{rdfParser:U}=J;if(Q){if(U=U||H[Q],!U)throw new i("Unknown input format.","jsonld.UnknownFormat",{format:Q})}else U=()=>V;const te=await U(V);return d(te,J)},b.toRDF=async function(V,J){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");J=le(J,{skipExpansion:!1,contextResolver:new r({sharedCache:W})});let Q;J.skipExpansion?Q=V:Q=await b.expand(V,J);const U=g(Q,J);if(J.format){if(J.format==="application/n-quads")return n.serialize(U);throw new i("Unknown output format.","jsonld.UnknownFormat",{format:J.format})}return U},b.createNodeMap=async function(V,J){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");J=le(J,{base:I(V)?V:"",contextResolver:new r({sharedCache:W})});const Q=await b.expand(V,J);return P(Q,J)},b.merge=async function(V,J,Q){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!m(V))throw new TypeError('Could not merge, "docs" must be an array.');typeof J=="function"?J=null:J=J||null,Q=le(Q,{contextResolver:new r({sharedCache:W})});const U=await Promise.all(V.map(de=>{const he={...Q};return b.expand(de,he)}));let te=!0;"mergeNodes"in Q&&(te=Q.mergeNodes);const re=Q.issuer||new o("_:b"),fe={"@default":{}};for(let de=0;de<U.length;++de){const he=t.relabelBlankNodes(U[de],{issuer:new o("_:b"+de+"-")}),ge=te||de===0?fe:{"@default":{}};if(E(he,ge,"@default",re),ge!==fe)for(const ee in ge){const ue=ge[ee];if(!(ee in fe)){fe[ee]=ue;continue}const _e=fe[ee];for(const oe in ue)oe in _e||(_e[oe]=ue[oe])}}const pe=x(fe),O=[],G=Object.keys(pe).sort();for(let de=0;de<G.length;++de){const he=pe[G[de]];v(he)||O.push(he)}return J===null?O:(Q.graph=!0,Q.skipExpansion=!0,await b.compact(O,J,Q))},Object.defineProperty(b,"documentLoader",{get:()=>b._documentLoader,set:V=>b._documentLoader=V}),b.documentLoader=async V=>{throw new i("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:V})},b.get=async function(V,J){let Q;typeof J.documentLoader=="function"?Q=J.documentLoader:Q=b.documentLoader;const U=await Q(V);try{if(!U.document)throw new i("No remote document found at the given URL.","jsonld.NullRemoteDocument");I(U.document)&&(U.document=JSON.parse(U.document))}catch(te){throw new i("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:te,remoteDoc:U})}return U},b.processContext=async function(V,J,Q){return Q=le(Q,{base:"",contextResolver:new r({sharedCache:W})}),J===null?h(Q):(J=t.clone(J),S(J)&&"@context"in J||(J={"@context":J}),u({activeCtx:V,localCtx:J,options:Q}))},b.getContextValue=bt().getContextValue,b.documentLoaders={},b.useDocumentLoader=function(V){if(!(V in b.documentLoaders))throw new i('Unknown document loader type: "'+V+'"',"jsonld.UnknownDocumentLoader",{type:V});b.documentLoader=b.documentLoaders[V].apply(b,Array.prototype.slice.call(arguments,1))},b.registerRDFParser=function(V,J){H[V]=J},b.unregisterRDFParser=function(V){delete H[V]},b.registerRDFParser("application/n-quads",n.parse),b.url=ut(),b.logEventHandler=j,b.logWarningEventHandler=q,b.safeEventHandler=D,b.setDefaultEventHandler=F,b.strictEventHandler=A,b.unhandledEventHandler=z,b.util=t,Object.assign(b,t),b.promises=b,b.RequestQueue=ma(),b.JsonLdProcessor=Io()(b),e.setupGlobals(b),e.setupDocumentLoaders(b);function le(V,{documentLoader:J=b.documentLoader,...Q}){if(V&&"compactionMap"in V)throw new i('"compactionMap" not supported.',"jsonld.OptionsError");if(V&&"expansionMap"in V)throw new i('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:J},Q,V,{eventHandler:X({options:V})})}return b},Y=function(){return M(function(){return Y()})};return M(Y),Ln=Y,Ln}var vl=Ro(),dt={},ft={},ht={},Ze={},Ss;function No(){if(Ss)return Ze;Ss=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.removeDotSegmentsOfPath=Ze.removeDotSegments=Ze.resolve=void 0;function s(o,i){i=i||"";const a=i.indexOf("#");if(a>0&&(i=i.substr(0,a)),!o.length){if(i.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${i}' for value '${o}'`);return i}if(o.startsWith("?")){const w=i.indexOf("?");return w>0&&(i=i.substr(0,w)),i+o}if(o.startsWith("#"))return i+o;if(!i.length){const w=o.indexOf(":");if(w<0)throw new Error(`Found invalid relative IRI '${o}' for a missing baseIRI`);return t(o,w)}const n=o.indexOf(":");if(n>=0)return t(o,n);const p=i.indexOf(":");if(p<0)throw new Error(`Found invalid baseIRI '${i}' for value '${o}'`);const l=i.substr(0,p+1);if(o.indexOf("//")===0)return l+t(o,n);let d;if(i.indexOf("//",p)===p+1){if(d=i.indexOf("/",p+3),d<0)return i.length>p+3?i+"/"+t(o,n):l+t(o,n)}else if(d=i.indexOf("/",p+1),d<0)return l+t(o,n);if(o.indexOf("/")===0)return i.substr(0,d)+e(o);let g=i.substr(d);const y=g.lastIndexOf("/");return y>=0&&y<g.length-1&&(g=g.substr(0,y+1),o[0]==="."&&o[1]!=="."&&o[1]!=="/"&&o[2]&&(o=o.substr(1))),o=g+o,o=e(o),i.substr(0,d)+o}Ze.resolve=s;function e(o){const i=[];let a=0;for(;a<o.length;)switch(o[a]){case"/":if(o[a+1]===".")if(o[a+2]==="."){if(!r(o[a+3])){i.push([]),a++;break}i.pop(),o[a+3]||i.push([]),a+=3}else{if(!r(o[a+2])){i.push([]),a++;break}o[a+2]||i.push([]),a+=2}else i.push([]),a++;break;case"#":case"?":i.length||i.push([]),i[i.length-1].push(o.substr(a)),a=o.length;break;default:i.length||i.push([]),i[i.length-1].push(o[a]),a++;break}return"/"+i.map(n=>n.join("")).join("/")}Ze.removeDotSegments=e;function t(o,i){let a=i+1;i>=0?o[i+1]==="/"&&o[i+2]==="/"&&(a=i+3):o[0]==="/"&&o[1]==="/"&&(a=2);const n=o.indexOf("/",a);if(n<0)return o;const p=o.substr(0,n),l=o.substr(n);return p+e(l)}Ze.removeDotSegmentsOfPath=t;function r(o){return!o||o==="#"||o==="?"||o==="/"}return Ze}var Is;function To(){return Is||(Is=1,(function(s){var e=ht&&ht.__createBinding||(Object.create?(function(r,o,i,a){a===void 0&&(a=i),Object.defineProperty(r,a,{enumerable:!0,get:function(){return o[i]}})}):(function(r,o,i,a){a===void 0&&(a=i),r[a]=o[i]})),t=ht&&ht.__exportStar||function(r,o){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,r,i)};Object.defineProperty(s,"__esModule",{value:!0}),t(No(),s)})(ht)),ht}var pt={},On={},Rs;function Ao(){return Rs||(Rs=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.CHAR=`	
\r ---`,s.S=` 	\r
`,s.NAME_START_CHAR=":A-Z_a-z-----------",s.NAME_CHAR="-"+s.NAME_START_CHAR+".0-9--",s.CHAR_RE=new RegExp("^["+s.CHAR+"]$","u"),s.S_RE=new RegExp("^["+s.S+"]+$","u"),s.NAME_START_CHAR_RE=new RegExp("^["+s.NAME_START_CHAR+"]$","u"),s.NAME_CHAR_RE=new RegExp("^["+s.NAME_CHAR+"]$","u"),s.NAME_RE=new RegExp("^["+s.NAME_START_CHAR+"]["+s.NAME_CHAR+"]*$","u"),s.NMTOKEN_RE=new RegExp("^["+s.NAME_CHAR+"]+$","u");var e=9,t=10,r=13,o=32;s.S_LIST=[o,t,r,e];function i(l){return l>=o&&l<=55295||l===t||l===r||l===e||l>=57344&&l<=65533||l>=65536&&l<=1114111}s.isChar=i;function a(l){return l===o||l===t||l===r||l===e}s.isS=a;function n(l){return l>=65&&l<=90||l>=97&&l<=122||l===58||l===95||l===8204||l===8205||l>=192&&l<=214||l>=216&&l<=246||l>=248&&l<=767||l>=880&&l<=893||l>=895&&l<=8191||l>=8304&&l<=8591||l>=11264&&l<=12271||l>=12289&&l<=55295||l>=63744&&l<=64975||l>=65008&&l<=65533||l>=65536&&l<=983039}s.isNameStartChar=n;function p(l){return n(l)||l>=48&&l<=57||l===45||l===46||l===183||l>=768&&l<=879||l>=8255&&l<=8256}s.isNameChar=p})(On)),On}var Cn={},Ns;function Do(){return Ns||(Ns=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.CHAR="---",s.RESTRICTED_CHAR="-\b\v\f---",s.S=` 	\r
`,s.NAME_START_CHAR=":A-Z_a-z-----------",s.NAME_CHAR="-"+s.NAME_START_CHAR+".0-9--",s.CHAR_RE=new RegExp("^["+s.CHAR+"]$","u"),s.RESTRICTED_CHAR_RE=new RegExp("^["+s.RESTRICTED_CHAR+"]$","u"),s.S_RE=new RegExp("^["+s.S+"]+$","u"),s.NAME_START_CHAR_RE=new RegExp("^["+s.NAME_START_CHAR+"]$","u"),s.NAME_CHAR_RE=new RegExp("^["+s.NAME_CHAR+"]$","u"),s.NAME_RE=new RegExp("^["+s.NAME_START_CHAR+"]["+s.NAME_CHAR+"]*$","u"),s.NMTOKEN_RE=new RegExp("^["+s.NAME_CHAR+"]+$","u");var e=9,t=10,r=13,o=32;s.S_LIST=[o,t,r,e];function i(g){return g>=1&&g<=55295||g>=57344&&g<=65533||g>=65536&&g<=1114111}s.isChar=i;function a(g){return g>=1&&g<=8||g===11||g===12||g>=14&&g<=31||g>=127&&g<=132||g>=134&&g<=159}s.isRestrictedChar=a;function n(g){return g===9||g===10||g===13||g>31&&g<127||g===133||g>159&&g<=55295||g>=57344&&g<=65533||g>=65536&&g<=1114111}s.isCharAndNotRestricted=n;function p(g){return g===o||g===t||g===r||g===e}s.isS=p;function l(g){return g>=65&&g<=90||g>=97&&g<=122||g===58||g===95||g===8204||g===8205||g>=192&&g<=214||g>=216&&g<=246||g>=248&&g<=767||g>=880&&g<=893||g>=895&&g<=8191||g>=8304&&g<=8591||g>=11264&&g<=12271||g>=12289&&g<=55295||g>=63744&&g<=64975||g>=65008&&g<=65533||g>=65536&&g<=983039}s.isNameStartChar=l;function d(g){return l(g)||g>=48&&g<=57||g===45||g===46||g===183||g>=768&&g<=879||g>=8255&&g<=8256}s.isNameChar=d})(Cn)),Cn}var Pn={},Ts;function Fo(){return Ts||(Ts=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.NC_NAME_START_CHAR="A-Z_a-z------------",s.NC_NAME_CHAR="-"+s.NC_NAME_START_CHAR+".0-9--",s.NC_NAME_START_CHAR_RE=new RegExp("^["+s.NC_NAME_START_CHAR+"]$","u"),s.NC_NAME_CHAR_RE=new RegExp("^["+s.NC_NAME_CHAR+"]$","u"),s.NC_NAME_RE=new RegExp("^["+s.NC_NAME_START_CHAR+"]["+s.NC_NAME_CHAR+"]*$","u");function e(r){return r>=65&&r<=90||r===95||r>=97&&r<=122||r>=192&&r<=214||r>=216&&r<=246||r>=248&&r<=767||r>=880&&r<=893||r>=895&&r<=8191||r>=8204&&r<=8205||r>=8304&&r<=8591||r>=11264&&r<=12271||r>=12289&&r<=55295||r>=63744&&r<=64975||r>=65008&&r<=65533||r>=65536&&r<=983039}s.isNCNameStartChar=e;function t(r){return e(r)||r===45||r===46||r>=48&&r<=57||r===183||r>=768&&r<=879||r>=8255&&r<=8256}s.isNCNameChar=t})(Pn)),Pn}var As;function jo(){if(As)return pt;As=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.SaxesParser=pt.EVENTS=void 0;const s=Ao(),e=Do(),t=Fo();var r=s.isS,o=s.isChar,i=s.isNameStartChar,a=s.isNameChar,n=s.S_LIST,p=s.NAME_RE,l=e.isChar,d=t.isNCNameStartChar,g=t.isNCNameChar,y=t.NC_NAME_RE;const w="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/2000/xmlns/",S={__proto__:null,xml:w,xmlns:m},I={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},v=-1,R=-2,h=0,u=1,_=2,T=3,B=4,E=5,P=6,x=7,j=8,q=9,D=10,F=11,X=12,A=13,z=14,M=15,Y=16,b=17,H=18,K=19,W=20,le=21,V=22,J=23,Q=24,U=25,te=26,re=27,fe=28,pe=29,O=30,G=31,se=32,de=33,he=34,ge=35,ee=36,ue=37,_e=38,oe=39,Ee=40,Pe=41,ve=42,Me=43,N=44,c=9,f=10,C=13,Z=32,ae=33,ce=34,xe=38,De=39,Re=45,Te=47,Ie=59,Qe=60,it=61,je=62,Le=63,nr=91,st=93,wt=133,Dt=8232,L=Ce=>Ce===ce||Ce===De,$=[ce,De],ye=[...$,nr,je],be=[...$,Qe,st],we=[it,Le,...n],ke=[...n,je,xe,Qe];function $e(Ce,k,ne){switch(k){case"xml":ne!==w&&Ce.fail(`xml prefix must be bound to ${w}.`);break;case"xmlns":ne!==m&&Ce.fail(`xmlns prefix must be bound to ${m}.`);break}switch(ne){case m:Ce.fail(k===""?`the default namespace may not be set to ${ne}.`:`may not assign a prefix (even "xmlns") to the URI ${m}.`);break;case w:switch(k){case"xml":break;case"":Ce.fail(`the default namespace may not be set to ${ne}.`);break;default:Ce.fail("may not assign the xml namespace to another prefix.")}break}}function ir(Ce,k){for(const ne of Object.keys(k))$e(Ce,ne,k[ne])}const Ke=Ce=>y.test(Ce),sr=Ce=>p.test(Ce),Ye=0,Ft=1,xt=2;pt.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const vt={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};class jt{get closed(){return this._closed}constructor(k){this.opt=k??{},this.fragmentOpt=!!this.opt.fragment;const ne=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,ne){this.nameStartCheck=d,this.nameCheck=g,this.isName=Ke,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},S);const ie=this.opt.additionalNamespaces;ie!=null&&(ir(this,ie),Object.assign(this.ns,ie))}else this.nameStartCheck=i,this.nameCheck=a,this.isName=sr,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}_init(){var k;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=Ye,this.attribList=[];const{fragmentOpt:ne}=this;this.state=ne?A:h,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=ne,this.xmlDeclPossible=!ne,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:ie}=this.opt;if(ie===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");ie="1.0"}this.setXMLVersion(ie),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(I),(k=this.readyHandler)===null||k===void 0||k.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(k,ne){this[vt[k]]=ne}off(k){this[vt[k]]=void 0}makeError(k){var ne;let ie=(ne=this.fileName)!==null&&ne!==void 0?ne:"";return this.trackPosition&&(ie.length>0&&(ie+=":"),ie+=`${this.line}:${this.column}`),ie.length>0&&(ie+=": "),new Error(ie+k)}fail(k){const ne=this.makeError(k),ie=this.errorHandler;if(ie===void 0)throw ne;return ie(ne),this}write(k){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let ne=!1;k===null?(ne=!0,k=""):typeof k=="object"&&(k=k.toString()),this.carriedFromPrevious!==void 0&&(k=`${this.carriedFromPrevious}${k}`,this.carriedFromPrevious=void 0);let ie=k.length;const me=k.charCodeAt(ie-1);!ne&&(me===C||me>=55296&&me<=56319)&&(this.carriedFromPrevious=k[ie-1],ie--,k=k.slice(0,ie));const{stateTable:Se}=this;for(this.chunk=k,this.i=0;this.i<ie;)Se[this.state].call(this);return this.chunkPosition+=ie,ne?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:k,i:ne}=this;if(this.prevI=ne,this.i=ne+1,ne>=k.length)return v;const ie=k.charCodeAt(ne);if(this.column++,ie<55296){if(ie>=Z||ie===c)return ie;switch(ie){case f:return this.line++,this.column=0,this.positionAtNewLine=this.position,f;case C:return k.charCodeAt(ne+1)===f&&(this.i=ne+2),this.line++,this.column=0,this.positionAtNewLine=this.position,R;default:return this.fail("disallowed character."),ie}}if(ie>56319)return ie>=57344&&ie<=65533||this.fail("disallowed character."),ie;const me=65536+(ie-55296)*1024+(k.charCodeAt(ne+1)-56320);return this.i=ne+2,me>1114111&&this.fail("disallowed character."),me}getCode11(){const{chunk:k,i:ne}=this;if(this.prevI=ne,this.i=ne+1,ne>=k.length)return v;const ie=k.charCodeAt(ne);if(this.column++,ie<55296){if(ie>31&&ie<127||ie>159&&ie!==Dt||ie===c)return ie;switch(ie){case f:return this.line++,this.column=0,this.positionAtNewLine=this.position,f;case C:{const Se=k.charCodeAt(ne+1);(Se===f||Se===wt)&&(this.i=ne+2)}case wt:case Dt:return this.line++,this.column=0,this.positionAtNewLine=this.position,R;default:return this.fail("disallowed character."),ie}}if(ie>56319)return ie>=57344&&ie<=65533||this.fail("disallowed character."),ie;const me=65536+(ie-55296)*1024+(k.charCodeAt(ne+1)-56320);return this.i=ne+2,me>1114111&&this.fail("disallowed character."),me}getCodeNorm(){const k=this.getCode();return k===R?f:k}unget(){this.i=this.prevI,this.column--}captureTo(k){let{i:ne}=this;const{chunk:ie}=this;for(;;){const me=this.getCode(),Se=me===R,Ae=Se?f:me;if(Ae===v||k.includes(Ae))return this.text+=ie.slice(ne,this.prevI),Ae;Se&&(this.text+=`${ie.slice(ne,this.prevI)}
`,ne=this.i)}}captureToChar(k){let{i:ne}=this;const{chunk:ie}=this;for(;;){let me=this.getCode();switch(me){case R:this.text+=`${ie.slice(ne,this.prevI)}
`,ne=this.i,me=f;break;case v:return this.text+=ie.slice(ne),!1}if(me===k)return this.text+=ie.slice(ne,this.prevI),!0}}captureNameChars(){const{chunk:k,i:ne}=this;for(;;){const ie=this.getCode();if(ie===v)return this.name+=k.slice(ne),v;if(!a(ie))return this.name+=k.slice(ne,this.prevI),ie===R?f:ie}}skipSpaces(){for(;;){const k=this.getCodeNorm();if(k===v||!r(k))return k}}setXMLVersion(k){this.currentXMLVersion=k,k==="1.0"?(this.isChar=o,this.getCode=this.getCode10):(this.isChar=l,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=u}sBeginWhitespace(){const k=this.i,ne=this.skipSpaces();switch(this.prevI!==k&&(this.xmlDeclPossible=!1),ne){case Qe:if(this.state=M,this.text.length!==0)throw new Error("no-empty text at start");break;case v:break;default:this.unget(),this.state=A,this.xmlDeclPossible=!1}}sDoctype(){var k;const ne=this.captureTo(ye);switch(ne){case je:{(k=this.doctypeHandler)===null||k===void 0||k.call(this,this.text),this.text="",this.state=A,this.doctype=!0;break}case v:break;default:this.text+=String.fromCodePoint(ne),ne===nr?this.state=B:L(ne)&&(this.state=T,this.q=ne)}}sDoctypeQuote(){const k=this.q;this.captureToChar(k)&&(this.text+=String.fromCodePoint(k),this.q=null,this.state=_)}sDTD(){const k=this.captureTo(be);k!==v&&(this.text+=String.fromCodePoint(k),k===st?this.state=_:k===Qe?this.state=P:L(k)&&(this.state=E,this.q=k))}sDTDQuoted(){const k=this.q;this.captureToChar(k)&&(this.text+=String.fromCodePoint(k),this.state=B,this.q=null)}sDTDOpenWaka(){const k=this.getCodeNorm();switch(this.text+=String.fromCodePoint(k),k){case ae:this.state=x,this.openWakaBang="";break;case Le:this.state=F;break;default:this.state=B}}sDTDOpenWakaBang(){const k=String.fromCodePoint(this.getCodeNorm()),ne=this.openWakaBang+=k;this.text+=k,ne!=="-"&&(this.state=ne==="--"?j:B,this.openWakaBang="")}sDTDComment(){this.captureToChar(Re)&&(this.text+="-",this.state=q)}sDTDCommentEnding(){const k=this.getCodeNorm();this.text+=String.fromCodePoint(k),this.state=k===Re?D:j}sDTDCommentEnded(){const k=this.getCodeNorm();this.text+=String.fromCodePoint(k),k===je?this.state=B:(this.fail("malformed comment."),this.state=j)}sDTDPI(){this.captureToChar(Le)&&(this.text+="?",this.state=X)}sDTDPIEnding(){const k=this.getCodeNorm();this.text+=String.fromCodePoint(k),k===je&&(this.state=B)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:k}=this;const{chunk:ne}=this;e:for(;;)switch(this.getCode()){case R:this.entity+=`${ne.slice(k,this.prevI)}
`,k=this.i;break;case Ie:{const{entityReturnState:ie}=this,me=this.entity+ne.slice(k,this.prevI);this.state=ie;let Se;me===""?(this.fail("empty entity name."),Se="&;"):(Se=this.parseEntity(me),this.entity=""),(ie!==A||this.textHandler!==void 0)&&(this.text+=Se);break e}case v:this.entity+=ne.slice(k);break e}}sOpenWaka(){const k=this.getCode();if(i(k))this.state=he,this.unget(),this.xmlDeclPossible=!1;else switch(k){case Te:this.state=Me,this.xmlDeclPossible=!1;break;case ae:this.state=Y,this.openWakaBang="",this.xmlDeclPossible=!1;break;case Le:this.state=J;break;default:this.fail("disallowed character in tag name"),this.state=A,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=W,this.openWakaBang="";break;case"--":this.state=b,this.openWakaBang="";break;case"DOCTYPE":this.state=_,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(Re)&&(this.state=H)}sCommentEnding(){var k;const ne=this.getCodeNorm();ne===Re?(this.state=K,(k=this.commentHandler)===null||k===void 0||k.call(this,this.text),this.text=""):(this.text+=`-${String.fromCodePoint(ne)}`,this.state=b)}sCommentEnded(){const k=this.getCodeNorm();k!==je?(this.fail("malformed comment."),this.text+=`--${String.fromCodePoint(k)}`,this.state=b):this.state=A}sCData(){this.captureToChar(st)&&(this.state=le)}sCDataEnding(){const k=this.getCodeNorm();k===st?this.state=V:(this.text+=`]${String.fromCodePoint(k)}`,this.state=W)}sCDataEnding2(){var k;const ne=this.getCodeNorm();switch(ne){case je:{(k=this.cdataHandler)===null||k===void 0||k.call(this,this.text),this.text="",this.state=A;break}case st:this.text+="]";break;default:this.text+=`]]${String.fromCodePoint(ne)}`,this.state=W}}sPIFirstChar(){const k=this.getCodeNorm();this.nameStartCheck(k)?(this.piTarget+=String.fromCodePoint(k),this.state=Q):k===Le||r(k)?(this.fail("processing instruction without a target."),this.state=k===Le?te:U):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(k),this.state=Q)}sPIRest(){const{chunk:k,i:ne}=this;for(;;){const ie=this.getCodeNorm();if(ie===v){this.piTarget+=k.slice(ne);return}if(!this.nameCheck(ie)){this.piTarget+=k.slice(ne,this.prevI);const me=ie===Le;me||r(ie)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=me?de:re):this.state=me?te:U:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(ie));break}}}sPIBody(){if(this.text.length===0){const k=this.getCodeNorm();k===Le?this.state=te:r(k)||(this.text=String.fromCodePoint(k))}else this.captureToChar(Le)&&(this.state=te)}sPIEnding(){var k;const ne=this.getCodeNorm();if(ne===je){const{piTarget:ie}=this;ie.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(k=this.piHandler)===null||k===void 0||k.call(this,{target:ie,body:this.text}),this.piTarget=this.text="",this.state=A}else ne===Le?this.text+="?":(this.text+=`?${String.fromCodePoint(ne)}`,this.state=U);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const k=this.skipSpaces();if(k===Le){this.state=de;return}k!==v&&(this.state=fe,this.name=String.fromCodePoint(k))}sXMLDeclName(){const k=this.captureTo(we);if(k===Le){this.state=de,this.name+=this.text,this.text="",this.fail("XML declaration is incomplete.");return}if(r(k)||k===it){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail(`expected one of ${this.xmlDeclExpects.join(", ")}`)}this.state=k===it?O:pe}}sXMLDeclEq(){const k=this.getCodeNorm();if(k===Le){this.state=de,this.fail("XML declaration is incomplete.");return}r(k)||(k!==it&&this.fail("value required."),this.state=O)}sXMLDeclValueStart(){const k=this.getCodeNorm();if(k===Le){this.state=de,this.fail("XML declaration is incomplete.");return}r(k)||(L(k)?this.q=k:(this.fail("value must be quoted."),this.q=Z),this.state=G)}sXMLDeclValue(){const k=this.captureTo([this.q,Le]);if(k===Le){this.state=de,this.text="",this.fail("XML declaration is incomplete.");return}if(k===v)return;const ne=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const ie=ne;this.xmlDecl.version=ie,/^1\.[0-9]+$/.test(ie)?this.opt.forceXMLVersion||this.setXMLVersion(ie):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(ne)||this.fail("encoding value must match 	/^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=ne;break;case"standalone":ne!=="yes"&&ne!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=ne;break}this.name="",this.state=se}sXMLDeclSeparator(){const k=this.getCodeNorm();if(k===Le){this.state=de;return}r(k)||(this.fail("whitespace required."),this.unget()),this.state=re}sXMLDeclEnding(){var k;this.getCodeNorm()===je?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(k=this.xmldeclHandler)===null||k===void 0||k.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=A):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var k;const ne=this.captureNameChars();if(ne===v)return;const ie=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=ie.ns=Object.create(null)),(k=this.openTagStartHandler)===null||k===void 0||k.call(this,ie),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),ne){case je:this.openTag();break;case Te:this.state=ge;break;default:r(ne)||this.fail("disallowed character in tag name."),this.state=ee}}sOpenTagSlash(){this.getCode()===je?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=ee)}sAttrib(){const k=this.skipSpaces();k!==v&&(i(k)?(this.unget(),this.state=ue):k===je?this.openTag():k===Te?this.state=ge:this.fail("disallowed character in attribute name."))}sAttribName(){const k=this.captureNameChars();k===it?this.state=oe:r(k)?this.state=_e:k===je?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):k!==v&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const k=this.skipSpaces();switch(k){case v:return;case it:this.state=oe;break;default:this.fail("attribute without value."),this.text="",this.name="",k===je?this.openTag():i(k)?(this.unget(),this.state=ue):(this.fail("disallowed character in attribute name."),this.state=ee)}}sAttribValue(){const k=this.getCodeNorm();L(k)?(this.q=k,this.state=Ee):r(k)||(this.fail("unquoted attribute value."),this.state=ve,this.unget())}sAttribValueQuoted(){const{q:k,chunk:ne}=this;let{i:ie}=this;for(;;)switch(this.getCode()){case k:this.pushAttrib(this.name,this.text+ne.slice(ie,this.prevI)),this.name=this.text="",this.q=null,this.state=Pe;return;case xe:this.text+=ne.slice(ie,this.prevI),this.state=z,this.entityReturnState=Ee;return;case f:case R:case c:this.text+=`${ne.slice(ie,this.prevI)} `,ie=this.i;break;case Qe:this.text+=ne.slice(ie,this.prevI),this.fail("disallowed character.");return;case v:this.text+=ne.slice(ie);return}}sAttribValueClosed(){const k=this.getCodeNorm();r(k)?this.state=ee:k===je?this.openTag():k===Te?this.state=ge:i(k)?(this.fail("no whitespace between attributes."),this.unget(),this.state=ue):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const k=this.captureTo(ke);switch(k){case xe:this.state=z,this.entityReturnState=ve;break;case Qe:this.fail("disallowed character.");break;case v:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",k===je?this.openTag():this.state=ee}}sCloseTag(){const k=this.captureNameChars();k===je?this.closeTag():r(k)?this.state=N:k!==v&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case je:this.closeTag();break;case v:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:k,forbiddenState:ne}=this;const{chunk:ie,textHandler:me}=this;e:for(;;)switch(this.getCode()){case Qe:{if(this.state=M,me!==void 0){const{text:Se}=this,Ae=ie.slice(k,this.prevI);Se.length!==0?(me(Se+Ae),this.text=""):Ae.length!==0&&me(Ae)}ne=Ye;break e}case xe:this.state=z,this.entityReturnState=A,me!==void 0&&(this.text+=ie.slice(k,this.prevI)),ne=Ye;break e;case st:switch(ne){case Ye:ne=Ft;break;case Ft:ne=xt;break;case xt:break;default:throw new Error("impossible state")}break;case je:ne===xt&&this.fail('the string "]]>" is disallowed in char data.'),ne=Ye;break;case R:me!==void 0&&(this.text+=`${ie.slice(k,this.prevI)}
`),k=this.i,ne=Ye;break;case v:me!==void 0&&(this.text+=ie.slice(k));break e;default:ne=Ye}this.forbiddenState=ne}handleTextOutsideRoot(){let{i:k}=this;const{chunk:ne,textHandler:ie}=this;let me=!1;e:for(;;){const Se=this.getCode();switch(Se){case Qe:{if(this.state=M,ie!==void 0){const{text:Ae}=this,qe=ne.slice(k,this.prevI);Ae.length!==0?(ie(Ae+qe),this.text=""):qe.length!==0&&ie(qe)}break e}case xe:this.state=z,this.entityReturnState=A,ie!==void 0&&(this.text+=ne.slice(k,this.prevI)),me=!0;break e;case R:ie!==void 0&&(this.text+=`${ne.slice(k,this.prevI)}
`),k=this.i;break;case v:ie!==void 0&&(this.text+=ne.slice(k));break e;default:r(Se)||(me=!0)}}me&&(!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(k,ne){var ie;const{prefix:me,local:Se}=this.qname(k),Ae={name:k,prefix:me,local:Se,value:ne};if(this.attribList.push(Ae),(ie=this.attributeHandler)===null||ie===void 0||ie.call(this,Ae),me==="xmlns"){const qe=ne.trim();this.currentXMLVersion==="1.0"&&qe===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[Se]=qe,$e(this,Se,qe)}else if(k==="xmlns"){const qe=ne.trim();this.topNS[""]=qe,$e(this,"",qe)}}pushAttribPlain(k,ne){var ie;const me={name:k,value:ne};this.attribList.push(me),(ie=this.attributeHandler)===null||ie===void 0||ie.call(this,me)}end(){var k,ne;this.sawRoot||this.fail("document must contain a root element.");const{tags:ie}=this;for(;ie.length>0;){const Se=ie.pop();this.fail(`unclosed tag: ${Se.name}`)}this.state!==h&&this.state!==A&&this.fail("unexpected end.");const{text:me}=this;return me.length!==0&&((k=this.textHandler)===null||k===void 0||k.call(this,me),this.text=""),this._closed=!0,(ne=this.endHandler)===null||ne===void 0||ne.call(this),this._init(),this}resolve(k){var ne,ie;let me=this.topNS[k];if(me!==void 0)return me;const{tags:Se}=this;for(let Ae=Se.length-1;Ae>=0;Ae--)if(me=Se[Ae].ns[k],me!==void 0)return me;return me=this.ns[k],me!==void 0?me:(ie=(ne=this.opt).resolvePrefix)===null||ie===void 0?void 0:ie.call(ne,k)}qname(k){const ne=k.indexOf(":");if(ne===-1)return{prefix:"",local:k};const ie=k.slice(ne+1),me=k.slice(0,ne);return(me===""||ie===""||ie.includes(":"))&&this.fail(`malformed name: ${k}.`),{prefix:me,local:ie}}processAttribsNS(){var k;const{attribList:ne}=this,ie=this.tag;{const{prefix:Ae,local:qe}=this.qname(ie.name);ie.prefix=Ae,ie.local=qe;const Et=ie.uri=(k=this.resolve(Ae))!==null&&k!==void 0?k:"";Ae!==""&&(Ae==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),Et===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(Ae)}.`),ie.uri=Ae))}if(ne.length===0)return;const{attributes:me}=ie,Se=new Set;for(const Ae of ne){const{name:qe,prefix:Et,local:Na}=Ae;let St,Lt;Et===""?(St=qe==="xmlns"?m:"",Lt=qe):(St=this.resolve(Et),St===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(Et)}.`),St=Et),Lt=`{${St}}${Na}`),Se.has(Lt)&&this.fail(`duplicate attribute: ${Lt}.`),Se.add(Lt),Ae.uri=St,me[qe]=Ae}this.attribList=[]}processAttribsPlain(){const{attribList:k}=this,ne=this.tag.attributes;for(const{name:ie,value:me}of k)ne[ie]!==void 0&&this.fail(`duplicate attribute: ${ie}.`),ne[ie]=me;this.attribList=[]}openTag(){var k;this.processAttribs();const{tags:ne}=this,ie=this.tag;ie.isSelfClosing=!1,(k=this.openTagHandler)===null||k===void 0||k.call(this,ie),ne.push(ie),this.state=A,this.name=""}openSelfClosingTag(){var k,ne,ie;this.processAttribs();const{tags:me}=this,Se=this.tag;Se.isSelfClosing=!0,(k=this.openTagHandler)===null||k===void 0||k.call(this,Se),(ne=this.closeTagHandler)===null||ne===void 0||ne.call(this,Se),(this.tag=(ie=me[me.length-1])!==null&&ie!==void 0?ie:null)===null&&(this.closedRoot=!0),this.state=A,this.name=""}closeTag(){const{tags:k,name:ne}=this;if(this.state=A,this.name="",ne===""){this.fail("weird empty close tag."),this.text+="</>";return}const ie=this.closeTagHandler;let me=k.length;for(;me-- >0;){const Se=this.tag=k.pop();if(this.topNS=Se.ns,ie?.(Se),Se.name===ne)break;this.fail("unexpected close tag.")}me===0?this.closedRoot=!0:me<0&&(this.fail(`unmatched closing tag: ${ne}.`),this.text+=`</${ne}>`)}parseEntity(k){if(k[0]!=="#"){const ie=this.ENTITIES[k];return ie!==void 0?ie:(this.fail(this.isName(k)?"undefined entity.":"disallowed character in entity name."),`&${k};`)}let ne=NaN;return k[1]==="x"&&/^#x[0-9a-f]+$/i.test(k)?ne=parseInt(k.slice(2),16):/^#[0-9]+$/.test(k)&&(ne=parseInt(k.slice(1),10)),this.isChar(ne)?String.fromCodePoint(ne):(this.fail("malformed character entity."),`&${k};`)}}return pt.SaxesParser=jt,pt}var qt={},Ds;function Lo(){if(Ds)return qt;Ds=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.ParseError=void 0;let s=class extends Error{constructor(t,r){const o=t.saxParser;super(t.trackPosition?`Line ${o.line} column ${o.column+1}: ${r}`:r)}};return qt.ParseError=s,qt}var gt={},Ut={},Fs;function xa(){if(Fs)return Ut;Fs=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.BlankNode=void 0;let s=class{constructor(t){this.termType="BlankNode",this.value=t}equals(t){return!!t&&t.termType==="BlankNode"&&t.value===this.value}};return Ut.BlankNode=s,Ut}var Ht={},Gt={},js;function va(){if(js)return Gt;js=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.DefaultGraph=void 0;let s=class{constructor(){this.termType="DefaultGraph",this.value=""}equals(t){return!!t&&t.termType==="DefaultGraph"}};return Gt.DefaultGraph=s,s.INSTANCE=new s,Gt}var Wt={},Vt={},Ls;function Kn(){if(Ls)return Vt;Ls=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.NamedNode=void 0;let s=class{constructor(t){this.termType="NamedNode",this.value=t}equals(t){return!!t&&t.termType==="NamedNode"&&t.value===this.value}};return Vt.NamedNode=s,Vt}var Os;function Ea(){if(Os)return Wt;Os=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.Literal=void 0;const s=Kn();let e=class Kt{constructor(r,o){this.termType="Literal",this.value=r,typeof o=="string"?(this.language=o,this.datatype=Kt.RDF_LANGUAGE_STRING,this.direction=""):o?"termType"in o?(this.language="",this.datatype=o,this.direction=""):(this.language=o.language,this.datatype=o.direction?Kt.RDF_DIRECTIONAL_LANGUAGE_STRING:Kt.RDF_LANGUAGE_STRING,this.direction=o.direction||""):(this.language="",this.datatype=Kt.XSD_STRING,this.direction="")}equals(r){return!!r&&r.termType==="Literal"&&r.value===this.value&&r.language===this.language&&(r.direction===this.direction||!r.direction&&this.direction==="")&&this.datatype.equals(r.datatype)}};return Wt.Literal=e,e.RDF_LANGUAGE_STRING=new s.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),e.RDF_DIRECTIONAL_LANGUAGE_STRING=new s.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),e.XSD_STRING=new s.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Wt}var Jt={},Cs;function Sa(){if(Cs)return Jt;Cs=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.Quad=void 0;let s=class{constructor(t,r,o,i){this.termType="Quad",this.value="",this.subject=t,this.predicate=r,this.object=o,this.graph=i}equals(t){return!!t&&(t.termType==="Quad"||!t.termType)&&this.subject.equals(t.subject)&&this.predicate.equals(t.predicate)&&this.object.equals(t.object)&&this.graph.equals(t.graph)}};return Jt.Quad=s,Jt}var Qt={},Ps;function Ia(){if(Ps)return Qt;Ps=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.Variable=void 0;let s=class{constructor(t){this.termType="Variable",this.value=t}equals(t){return!!t&&t.termType==="Variable"&&t.value===this.value}};return Qt.Variable=s,Qt}var ks;function Oo(){if(ks)return Ht;ks=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.DataFactory=void 0;const s=xa(),e=va(),t=Ea(),r=Kn(),o=Sa(),i=Ia();let a=0,n=class{constructor(l){this.blankNodeCounter=0,l=l||{},this.blankNodePrefix=l.blankNodePrefix||`df_${a++}_`}namedNode(l){return new r.NamedNode(l)}blankNode(l){return new s.BlankNode(l||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(l,d){return new t.Literal(l,d)}variable(l){return new i.Variable(l)}defaultGraph(){return e.DefaultGraph.INSTANCE}quad(l,d,g,y){return new o.Quad(l,d,g,y||this.defaultGraph())}fromTerm(l){switch(l.termType){case"NamedNode":return this.namedNode(l.value);case"BlankNode":return this.blankNode(l.value);case"Literal":return l.language?this.literal(l.value,l.language):l.datatype.equals(t.Literal.XSD_STRING)?this.literal(l.value):this.literal(l.value,this.fromTerm(l.datatype));case"Variable":return this.variable(l.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(l.subject),this.fromTerm(l.predicate),this.fromTerm(l.object),this.fromTerm(l.graph))}}fromQuad(l){return this.fromTerm(l)}resetBlankNodeCounter(){this.blankNodeCounter=0}};return Ht.DataFactory=n,Ht}var Ms;function Co(){return Ms||(Ms=1,(function(s){var e=gt&&gt.__createBinding||(Object.create?(function(r,o,i,a){a===void 0&&(a=i);var n=Object.getOwnPropertyDescriptor(o,i);(!n||("get"in n?!o.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(r,a,n)}):(function(r,o,i,a){a===void 0&&(a=i),r[a]=o[i]})),t=gt&&gt.__exportStar||function(r,o){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,r,i)};Object.defineProperty(s,"__esModule",{value:!0}),t(xa(),s),t(Oo(),s),t(va(),s),t(Ea(),s),t(Kn(),s),t(Sa(),s),t(Ia(),s)})(gt)),gt}var _t={},kn={},Bs;function Po(){return Bs||(Bs=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.validateIri=s.IriValidationStrategy=void 0;function e(){const n="[!$&'()*+,;=]",p="%[a-fA-F0-9]{2}",l="([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",d=`${l}\\.${l}\\.${l}\\.${l}`,g="[a-fA-F0-9]{1,4}",y=`(${g}:${g}|${d})`,w=`((${g}:){6}${y}|::(${g}:){5}${y}|(${g})?::(${g}:){4}${y}|((${g}:){0,1}${g})?::(${g}:){3}${y}|((${g}:){0,2}${g})?::(${g}:){2}${y}|((${g}:){0,3}${g})?::${g}:${y}|((${g}:){0,4}${g})?::${y}|((${g}:){0,5}${g})?::${g}|((${g}:){0,6}${g})?::)`,m=`v[a-fA-F0-9]+\\.(${n}|${n}|":)+`,S=`\\[(${w}|${m})\\]`,I="[0-9]*",v="[a-zA-Z][a-zA-Z0-9+\\-.]*",h="[---]",T="[a-zA-Z0-9\\-._~-----------------]",B=`(${T}|${p}|${n}|[:@])*`,E=`(${B}|[\\/?])*`,P=`(${B}|${h}|[\\/?])*`,x=`(${B})+`,j=`(${B})*`,q="",D=`${x}(\\/${j})*`,F=`\\/(${x}(\\/${j})*)?`,X=`(\\/${j})*`,A=`(${T}|${p}|${n})*`,z=`(${S}|${d}|${A})`,b=`(\\/\\/${`(${`(${T}|${p}|${n}|:)*`}@)?${z}(:${I})?`}${X}|${F}|${D}|${q})`,H=`^${v}:${b}(\\?${P})?(#${E})?$`;return new RegExp(H,"u")}const t=e(),r=/^[A-Za-z][\d+-.A-Za-z]*:[^\u0000-\u0020"<>\\^`{|}]*$/u;var o;(function(a){a.Strict="strict",a.Pragmatic="pragmatic",a.None="none"})(o=s.IriValidationStrategy||(s.IriValidationStrategy={}));function i(a,n=o.Strict){switch(n){case o.Strict:return t.test(a)?void 0:new Error(`Invalid IRI according to RFC 3987: '${a}'`);case o.Pragmatic:return r.test(a)?void 0:new Error(`Invalid IRI according to RDF Turtle: '${a}'`);case o.None:return;default:return new Error(`Not supported validation strategy "${n}"`)}}s.validateIri=i})(kn)),kn}var $s;function ko(){return $s||($s=1,(function(s){var e=_t&&_t.__createBinding||(Object.create?(function(r,o,i,a){a===void 0&&(a=i);var n=Object.getOwnPropertyDescriptor(o,i);(!n||("get"in n?!o.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(r,a,n)}):(function(r,o,i,a){a===void 0&&(a=i),r[a]=o[i]})),t=_t&&_t.__exportStar||function(r,o){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,r,i)};Object.defineProperty(s,"__esModule",{value:!0}),t(Po(),s)})(_t)),_t}var qs;function Mo(){if(qs)return ft;qs=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.ParseType=ft.RdfXmlParser=void 0;const s=To(),e=jo(),t=da(),r=Lo(),o=Co(),i=ko();let a=class Ne extends t.Transform{constructor(l){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},l&&(Object.assign(this,l),this.options=l),this.dataFactory||(this.dataFactory=new o.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.validateUri!==!1&&(this.validateUri=!0),this.iriValidationStrategy||(this.iriValidationStrategy=this.validateUri?i.IriValidationStrategy.Pragmatic:i.IriValidationStrategy.None),this.parseUnsupportedVersions=!!l?.parseUnsupportedVersions,this.version=l?.version,this.saxParser=new e.SaxesParser({xmlns:!0,position:this.trackPosition}),this.attachSaxListeners()}import(l){const d=new t.PassThrough({readableObjectMode:!0});l.on("error",y=>g.emit("error",y)),l.on("data",y=>d.push(y)),l.on("end",()=>d.push(null));const g=d.pipe(new Ne(this.options));return g}_transform(l,d,g){if(this.version){const y=this.version;if(this.version=void 0,!this.isValidVersion(y))return g(this.newParseError(`Detected unsupported version as media type parameter: ${y}`))}try{this.saxParser.write(l)}catch(y){return g(y)}g()}newParseError(l){return new r.ParseError(this,l)}valueToUri(l,d){return this.uriToNamedNode((0,s.resolve)(l,d.baseIRI))}uriToNamedNode(l){const d=(0,i.validateIri)(l,this.iriValidationStrategy);if(d instanceof Error)throw this.newParseError(d.message);return this.dataFactory.namedNode(l)}validateNcname(l){if(!Ne.NCNAME_MATCHER.test(l))throw this.newParseError(`Not a valid NCName: ${l}`)}createLiteral(l,d){return this.dataFactory.literal(l,d.datatype?d.datatype:d.language?{language:d.language,direction:d.rdfVersion?d.direction:void 0}:void 0)}isValidVersion(l){return this.parseUnsupportedVersions||Ne.SUPPORTED_VERSIONS.includes(l)}attachSaxListeners(){this.saxParser.on("error",l=>this.emit("error",l)),this.saxParser.on("opentag",this.onTag.bind(this)),this.saxParser.on("text",this.onText.bind(this)),this.saxParser.on("cdata",this.onText.bind(this)),this.saxParser.on("closetag",this.onCloseTag.bind(this)),this.saxParser.on("doctype",this.onDoctype.bind(this))}onTag(l){const d=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let g=n.RESOURCE;if(d&&(d.hadChildren=!0,g=d.childrenParseType),d&&d.childrenStringTags){const w=l.name;let m="";for(const{key:R,value:h}of d.namespaces||[])m+=` ${R}="${h}"`;for(const R in l.attributes)m+=` ${R}="${l.attributes[R].value}"`;const I=`<${`${w}${m}`}>`;d.childrenStringTags.push(I);const v={childrenStringTags:d.childrenStringTags};v.childrenStringEmitClosingTag=`</${w}>`,this.activeTagStack.push(v);return}const y={};d?(y.language=d.language,y.direction=d.direction,y.baseIRI=d.baseIRI,y.childrenTripleTerms=d.childrenTripleTerms,y.rdfVersion=d.rdfVersion):y.baseIRI=this.baseIRI,this.activeTagStack.push(y),g===n.RESOURCE?this.onTagResource(l,y,d,!d):this.onTagProperty(l,y,d);for(const w in l.attributes){const m=l.attributes[w];m.prefix==="xmlns"&&(y.namespaces||(y.namespaces=[]),y.namespaces.push({key:`${m.prefix}:${m.local}`,value:m.value}))}d&&d.namespaces&&(y.namespaces=[...y.namespaces||[],...d.namespaces])}onTagResource(l,d,g,y){d.childrenParseType=n.PROPERTY;let w=!0;if(l.uri===Ne.RDF){if(!y&&Ne.FORBIDDEN_NODE_ELEMENTS.indexOf(l.local)>=0)throw this.newParseError(`Illegal node element name: ${l.local}`);switch(l.local){case"RDF":d.childrenParseType=n.RESOURCE;case"Description":w=!1}}const m=[],S=[];let I=null,v=!1,R=!1,h=null;for(const u in l.attributes){const _=l.attributes[u];if(_.uri===Ne.RDF&&_.local==="version"){this.setVersion(d,_.value);continue}else if(g&&_.uri===Ne.RDF)switch(_.local){case"about":if(I)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${_.value} and ${I} where found.`);I=_.value;continue;case"ID":if(I)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${_.value} and ${I} where found.`);this.validateNcname(_.value),I="#"+_.value,v=!0;continue;case"nodeID":if(I)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${_.value} and ${I} where found.`);this.validateNcname(_.value),I=_.value,R=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":h=_.value;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(_.uri===Ne.XML){if(_.local==="lang"){d.language=_.value===""?null:_.value.toLowerCase();continue}else if(_.local==="base"){d.baseIRI=(0,s.resolve)(_.value,d.baseIRI);continue}}else if(_.uri===Ne.ITS&&_.local==="dir"){this.setDirection(d,_.value);continue}_.prefix!=="xml"&&_.prefix!=="xmlns"&&(_.prefix!==""||_.local!=="xmlns")&&_.uri&&(m.push(this.uriToNamedNode(_.uri+_.local)),S.push(_.value))}if(I!==null&&(d.subject=R?this.dataFactory.blankNode(I):this.valueToUri(I,d),v&&this.claimNodeId(d.subject)),d.subject||(d.subject=this.dataFactory.blankNode()),w){const u=this.uriToNamedNode(l.uri+l.local);this.emitTriple(d.subject,this.dataFactory.namedNode(Ne.RDF+"type"),u,g?g.reifiedStatementId:null,d.childrenTripleTerms,d.reifier)}if(g){if(g.predicate)if(g.childrenCollectionSubject){const u=this.dataFactory.blankNode(),_=this.dataFactory.namedNode(Ne.RDF+"rest"),T=g.childrenCollectionPredicate.equals(_);this.emitTriple(g.childrenCollectionSubject,g.childrenCollectionPredicate,u,T?null:g.reifiedStatementId,g.childrenTripleTerms,T?null:g.reifier),this.emitTriple(u,this.dataFactory.namedNode(Ne.RDF+"first"),d.subject,null,d.childrenTripleTerms),g.childrenCollectionSubject=u,g.childrenCollectionPredicate=_}else{g.childrenTagsToTripleTerms||(this.emitTriple(g.subject,g.predicate,d.subject,g.reifiedStatementId,g.childrenTripleTerms,g.reifier),g.predicateEmitted=!0);for(let u=0;u<g.predicateSubPredicates.length;u++)this.emitTriple(d.subject,g.predicateSubPredicates[u],g.predicateSubObjects[u],null,g.childrenTripleTerms,g.reifier);g.predicateSubPredicates=[],g.predicateSubObjects=[]}for(let u=0;u<m.length;u++){const _=this.createLiteral(S[u],d);this.emitTriple(d.subject,m[u],_,g.reifiedStatementId,g.childrenTripleTerms,g.reifier)}h&&this.emitTriple(d.subject,this.dataFactory.namedNode(Ne.RDF+"type"),this.uriToNamedNode(h),null,d.childrenTripleTerms,d.reifier)}}onTagProperty(l,d,g){if(d.childrenParseType=n.RESOURCE,d.subject=g.subject,l.uri===Ne.RDF&&l.local==="li"?(g.listItemCounter||(g.listItemCounter=1),d.predicate=this.uriToNamedNode(l.uri+"_"+g.listItemCounter++)):d.predicate=this.uriToNamedNode(l.uri+l.local),l.uri===Ne.RDF&&Ne.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(l.local)>=0)throw this.newParseError(`Illegal property element name: ${l.local}`);d.predicateSubPredicates=[],d.predicateSubObjects=[];let y=!1,w=!1,m=null,S=!0;const I=[],v=[];for(const R in l.attributes){const h=l.attributes[R];if(h.uri===Ne.RDF&&h.local==="version"){this.setVersion(d,h.value);continue}else if(h.uri===Ne.RDF)switch(h.local){case"resource":if(m)throw this.newParseError(`Found both rdf:resource (${h.value}) and rdf:nodeID (${m}).`);if(y)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${h.value})`);d.hadChildren=!0,m=h.value,S=!1;continue;case"datatype":if(w)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${h.value}).`);if(y)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${h.value})`);d.datatype=this.valueToUri(h.value,d);continue;case"nodeID":if(w)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${h.value}).`);if(d.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${h.value}).`);if(y)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${h.value})`);this.validateNcname(h.value),d.hadChildren=!0,m=h.value,S=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(w)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(d.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${d.datatype.value})`);if(m)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${m})`);if(h.value==="Resource"){y=!0,d.childrenParseType=n.PROPERTY;const u=this.dataFactory.blankNode();this.emitTriple(d.subject,d.predicate,u,d.reifiedStatementId,d.childrenTripleTerms,d.reifier),d.subject=u,d.predicate=null}else h.value==="Collection"?(y=!0,d.hadChildren=!0,d.childrenCollectionSubject=d.subject,d.childrenCollectionPredicate=d.predicate,S=!1):h.value==="Literal"?(y=!0,d.childrenTagsToString=!0,d.childrenStringTags=[]):h.value==="Triple"&&(y=!0,d.childrenTagsToTripleTerms=!0,d.childrenTripleTerms=[]);continue;case"ID":this.validateNcname(h.value),d.reifiedStatementId=this.valueToUri("#"+h.value,d),this.claimNodeId(d.reifiedStatementId);continue;case"annotation":d.reifier=this.dataFactory.namedNode(h.value);continue;case"annotationNodeID":d.reifier=this.dataFactory.blankNode(h.value);continue}else if(h.uri===Ne.XML&&h.local==="lang"){d.language=h.value===""?null:h.value.toLowerCase();continue}else if(h.uri===Ne.ITS&&h.local==="dir"){this.setDirection(d,h.value);continue}else if(h.uri===Ne.ITS&&h.local==="version")continue;if(h.prefix!=="xml"&&h.prefix!=="xmlns"&&(h.prefix!==""||h.local!=="xmlns")&&h.uri){if(y||d.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${h.value}`);d.hadChildren=!0,w=!0,I.push(this.uriToNamedNode(h.uri+h.local)),v.push(this.createLiteral(h.value,d))}}if(m!==null){const R=d.subject;d.subject=S?this.dataFactory.blankNode(m):this.valueToUri(m,d),this.emitTriple(R,d.predicate,d.subject,d.reifiedStatementId,d.childrenTripleTerms,d.reifier);for(let h=0;h<I.length;h++)this.emitTriple(d.subject,I[h],v[h],null,d.childrenTripleTerms,d.reifier);d.predicateEmitted=!0}else S&&(d.predicateSubPredicates=I,d.predicateSubObjects=v,d.predicateEmitted=!1)}emitTriple(l,d,g,y,w,m){const S=this.dataFactory.quad(l,d,g,this.defaultGraph);w?w.push(S):this.push(S),m&&this.push(this.dataFactory.quad(m,this.dataFactory.namedNode(Ne.RDF+"reifies"),S)),y&&(this.push(this.dataFactory.quad(y,this.dataFactory.namedNode(Ne.RDF+"type"),this.dataFactory.namedNode(Ne.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(y,this.dataFactory.namedNode(Ne.RDF+"subject"),l,this.defaultGraph)),this.push(this.dataFactory.quad(y,this.dataFactory.namedNode(Ne.RDF+"predicate"),d,this.defaultGraph)),this.push(this.dataFactory.quad(y,this.dataFactory.namedNode(Ne.RDF+"object"),g,this.defaultGraph)))}claimNodeId(l){if(!this.allowDuplicateRdfIds){if(this.nodeIds[l.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${l.value}'.`);this.nodeIds[l.value]=!0}}onText(l){const d=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;d&&(d.childrenStringTags?d.childrenStringTags.push(l):d.predicate&&(d.text=l))}onCloseTag(){const l=this.activeTagStack.pop(),d=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;if(l.childrenStringEmitClosingTag&&l.childrenStringTags.push(l.childrenStringEmitClosingTag),l.childrenTagsToString&&(l.datatype=this.dataFactory.namedNode(Ne.RDF+"XMLLiteral"),l.text=l.childrenStringTags.join(""),l.hadChildren=!1),l.childrenTagsToTripleTerms&&l.predicate&&l.rdfVersion){if(l.childrenTripleTerms.length!==1)throw this.newParseError(`Expected exactly one triple term in rdf:parseType="Triple" but got ${l.childrenTripleTerms.length}`);for(const g of l.childrenTripleTerms)this.emitTriple(l.subject,l.predicate,g,null,d.childrenTripleTerms,d.reifier);l.predicateEmitted=!0}if(l.childrenCollectionSubject)this.emitTriple(l.childrenCollectionSubject,l.childrenCollectionPredicate,this.dataFactory.namedNode(Ne.RDF+"nil"),null,l.childrenTripleTerms);else if(l.predicate){if(!l.hadChildren&&l.childrenParseType!==n.PROPERTY)this.emitTriple(l.subject,l.predicate,this.createLiteral(l.text||"",l),l.reifiedStatementId,l.childrenTripleTerms,l.reifier);else if(!l.predicateEmitted){const g=this.dataFactory.blankNode();this.emitTriple(l.subject,l.predicate,g,l.reifiedStatementId,l.childrenTripleTerms,l.reifier);for(let y=0;y<l.predicateSubPredicates.length;y++)this.emitTriple(g,l.predicateSubPredicates[y],l.predicateSubObjects[y],null,l.childrenTripleTerms)}}}onDoctype(l){l.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(d,g,y)=>(this.saxParser.ENTITIES[g]=y,""))}setDirection(l,d){if(d){if(d!=="ltr"&&d!=="rtl")throw this.newParseError(`Base directions must either be 'ltr' or 'rtl', while '${d}' was found.`);l.direction=d}else delete l.direction}setVersion(l,d){if(l.rdfVersion=d,this.emit("version",d),!this.isValidVersion(d))throw this.newParseError(`Detected unsupported version: ${d}`)}};ft.RdfXmlParser=a,a.MIME_TYPE="application/rdf+xml",a.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",a.XML="http://www.w3.org/XML/1998/namespace",a.ITS="http://www.w3.org/2005/11/its",a.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],a.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],a.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,a.SUPPORTED_VERSIONS=["1.2","1.2-basic","1.1"];var n;return(function(p){p[p.RESOURCE=0]="RESOURCE",p[p.PROPERTY=1]="PROPERTY"})(n||(ft.ParseType=n={})),ft}var Us;function Bo(){return Us||(Us=1,(function(s){var e=dt&&dt.__createBinding||(Object.create?(function(r,o,i,a){a===void 0&&(a=i);var n=Object.getOwnPropertyDescriptor(o,i);(!n||("get"in n?!o.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(r,a,n)}):(function(r,o,i,a){a===void 0&&(a=i),r[a]=o[i]})),t=dt&&dt.__exportStar||function(r,o){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,r,i)};Object.defineProperty(s,"__esModule",{value:!0}),t(Mo(),s)})(dt)),dt}var Dl=Bo();function $o(s){return"_:"+s.value}function qo(s,e){return[...s].map(t=>e(t)).join(`
`)+`
`}function Uo(){return""}function Ra(s){return"<"+s.value+">"}const Ho=/["\\\\\n\r]/,Go=/["\\\\\n\r]/g,Wo={'"':'\\"',"\\":"\\\\","\n":"\\n","\r":"\\r"};function Vo(s){return Wo[s]}function Jo(s){return Ho.test(s)?s.replace(Go,Vo):s}function Qo(s){const e=Jo(s.value);return s.datatype.value==="http://www.w3.org/2001/XMLSchema#string"?'"'+e+'"':s.datatype.value==="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?'"'+e+'"@'+s.language:'"'+e+'"^^'+Ra(s.datatype)}function zo(s,e){const t=e(s.subject),r=e(s.predicate),o=e(s.object),i=e(s.graph);return`${t} ${r} ${o} ${i?i+" ":""}.`}function Xo(s){return"?"+s.value}function ot(s){if(!s)return null;if(s.termType==="BlankNode")return $o(s);if(s.termType==="DefaultGraph")return Uo();if(s.termType==="Literal")return Qo(s);if(s.termType==="NamedNode")return Ra(s);if(s.termType==="Quad"||s.subject&&s.predicate&&s.object&&s.graph)return zo(s,ot);if(s.termType==="Variable")return Xo(s);if(s[Symbol.iterator])return qo(s,ot);throw new Error(`unknown termType ${s.termType}`)}class Fl{constructor(e){if(this.index=new Map,e)for(const[t,r]of e)this.set(t,r)}get size(){return this.index.size}clear(){this.index.clear()}delete(e){return this.index.delete(ot(e))}*entries(){for(const[,{term:e,value:t}]of this.index)yield[e,t]}forEach(e,t){for(const r of this.entries())e.call(t,r[1],r[0],this)}get(e){const t=this.index.get(ot(e));return t&&t.value}has(e){return this.index.has(ot(e))}*keys(){for(const[,{term:e}]of this.index)yield e}set(e,t){const r=ot(e);return this.index.set(r,{term:e,value:t}),this}*values(){for(const[,{value:e}]of this.index)yield e}[Symbol.iterator](){return this.entries()[Symbol.iterator]()}}function Hs(s){try{return ot(s)}catch{return null}}class jl{constructor(e){if(this.index=new Map,e)for(const t of e)this.add(t)}get size(){return this.index.size}add(e){const t=ot(e);return this.index.has(t)||this.index.set(t,e),this}clear(){this.index.clear()}delete(e){return e?this.index.delete(Hs(e)):!1}entries(){return this.values().entries()}forEach(e,t){return this.values().forEach(e,t)}has(e){return e?this.index.has(Hs(e)):!1}values(){return new Set(this.index.values())}keys(){return this.values()}[Symbol.iterator](){return this.index.values()}}const Ko={apply:(s,e,t)=>s(t[0]),get:(s,e)=>s(e)};function Ll(s,{factory:e=Da}={}){const t=(r="")=>e.namedNode(`${s}${r.raw||r}`);return typeof Proxy>"u"?t:new Proxy(t,Ko)}export{Qa as N,jl as T,Fl as a,mt as b,yr as c,To as d,fa as e,Da as f,Ge as g,Dl as h,na as i,vl as j,al as k,Ll as n,Co as r,ot as t};
