var J5=Object.defineProperty;var j2=n=>{throw TypeError(n)};var K5=(n,t,o)=>t in n?J5(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o;var Rt=(n,t,o)=>K5(n,typeof t!="symbol"?t+"":t,o),f0=(n,t,o)=>t.has(n)||j2("Cannot "+o);var ie=(n,t,o)=>(f0(n,t,"read from private field"),o?o.call(n):t.get(n)),ot=(n,t,o)=>t.has(n)?j2("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,o),He=(n,t,o,i)=>(f0(n,t,"write to private field"),i?i.call(n,o):t.set(n,o),o),Ve=(n,t,o)=>(f0(n,t,"access private method"),o);var Rm=(n,t,o,i)=>({set _(r){He(n,t,r,o)},get _(){return ie(n,t,i)}});import{c as jm,g as W5,a as wL}from"./icons-CgqllJ05.js";function Y5(n){return"_:"+n.value}function Z5(n,t){return[...n].map(o=>t(o)).join(`
`)+`
`}function k5(){return""}function AL(n){return"<"+n.value+">"}const e6=/["\\\\\n\r]/,t6=/["\\\\\n\r]/g,r6={'"':'\\"',"\\":"\\\\","\n":"\\n","\r":"\\r"};function n6(n){return r6[n]}function i6(n){return e6.test(n)?n.replace(t6,n6):n}function a6(n){const t=i6(n.value);return n.datatype.value==="http://www.w3.org/2001/XMLSchema#string"?'"'+t+'"':n.datatype.value==="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?'"'+t+'"@'+n.language:'"'+t+'"^^'+AL(n.datatype)}function o6(n,t){const o=t(n.subject),i=t(n.predicate),r=t(n.object),e=t(n.graph);return`${o} ${i} ${r} ${e?e+" ":""}.`}function u6(n){return"?"+n.value}function Ar(n){if(!n)return null;if(n.termType==="BlankNode")return Y5(n);if(n.termType==="DefaultGraph")return k5();if(n.termType==="Literal")return a6(n);if(n.termType==="NamedNode")return AL(n);if(n.termType==="Quad"||n.subject&&n.predicate&&n.object&&n.graph)return o6(n,Ar);if(n.termType==="Variable")return u6(n);if(n[Symbol.iterator])return Z5(n,Ar);throw new Error(`unknown termType ${n.termType}`)}class js{constructor(t){if(this.index=new Map,t)for(const[o,i]of t)this.set(o,i)}get size(){return this.index.size}clear(){this.index.clear()}delete(t){return this.index.delete(Ar(t))}*entries(){for(const[,{term:t,value:o}]of this.index)yield[t,o]}forEach(t,o){for(const i of this.entries())t.call(o,i[1],i[0],this)}get(t){const o=this.index.get(Ar(t));return o&&o.value}has(t){return this.index.has(Ar(t))}*keys(){for(const[,{term:t}]of this.index)yield t}set(t,o){const i=Ar(t);return this.index.set(i,{term:t,value:o}),this}*values(){for(const[,{value:t}]of this.index)yield t}[Symbol.iterator](){return this.entries()[Symbol.iterator]()}}class D2{constructor({dataset:t,end:o,quad:i,start:r}){this.dataset=t,this.end=o,this.quad=i,this.start=r}get term(){return this.quad[this.end]}get graph(){return this.quad.graph}get startTerm(){return this.quad[this.start]}}function P2(n){try{return Ar(n)}catch{return null}}class Lr{constructor(t){if(this.index=new Map,t)for(const o of t)this.add(o)}get size(){return this.index.size}add(t){const o=Ar(t);return this.index.has(o)||this.index.set(o,t),this}clear(){this.index.clear()}delete(t){return t?this.index.delete(P2(t)):!1}entries(){return this.values().entries()}forEach(t,o){return this.values().forEach(t,o)}has(t){return t?this.index.has(P2(t)):!1}values(){return new Set(this.index.values())}keys(){return this.values()}[Symbol.iterator](){return this.index.values()}}let FL=class{constructor(t){this.value=t}equals(t){return!!t&&t.termType===this.termType&&t.value===this.value}};FL.prototype.termType="BlankNode";let Cv=class{equals(t){return!!t&&t.termType===this.termType}};Cv.prototype.termType="DefaultGraph";Cv.prototype.value="";function N2(n,t){if(!t)return null;if(t.termType==="BlankNode")return n.blankNode(t.value);if(t.termType==="DefaultGraph")return n.defaultGraph();if(t.termType==="Literal")return n.literal(t.value,t.language||n.namedNode(t.datatype.value));if(t.termType==="NamedNode")return n.namedNode(t.value);if(t.termType==="Quad"){const o=n.fromTerm(t.subject),i=n.fromTerm(t.predicate),r=n.fromTerm(t.object),e=n.fromTerm(t.graph);return n.quad(o,i,r,e)}if(t.termType==="Variable")return n.variable(t.value);throw new Error(`unknown termType ${t.termType}`)}let nb=class{constructor(t,o,i,r=""){this.value=t,this.language=o,this.datatype=i,this.direction=r}equals(t){return!!t&&t.termType===this.termType&&t.value===this.value&&t.language===this.language&&t.datatype.equals(this.datatype)&&(t.direction||"")===this.direction}};nb.prototype.termType="Literal";let Gg=class{constructor(t){this.value=t}equals(t){return!!t&&t.termType===this.termType&&t.value===this.value}};Gg.prototype.termType="NamedNode";let Qv=class{constructor(t,o,i,r){this.subject=t,this.predicate=o,this.object=i,this.graph=r}equals(t){return!!t&&(t.termType==="Quad"||!t.termType)&&t.subject.equals(this.subject)&&t.predicate.equals(this.predicate)&&t.object.equals(this.object)&&t.graph.equals(this.graph)}};Qv.prototype.termType="Quad";Qv.prototype.value="";let EL=class{constructor(t){this.value=t}equals(t){return!!t&&t.termType===this.termType&&t.value===this.value}};EL.prototype.termType="Variable";const s6=new Gg("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),M2=new Gg("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),c6=new Gg("http://www.w3.org/2001/XMLSchema#string");let RL=class{constructor(){this.init()}init(){this._data={blankNodeCounter:0,defaultGraph:new Cv}}namedNode(t){return new Gg(t)}blankNode(t){return t=t||"b"+ ++this._data.blankNodeCounter,new FL(t)}literal(t,o){return typeof o=="string"?new nb(t,o,M2):typeof o?.language=="string"?new nb(t,o.language,o.direction?s6:M2,o.direction):new nb(t,"",o||c6)}variable(t){return new EL(t)}defaultGraph(){return this._data.defaultGraph}quad(t,o,i,r=this.defaultGraph()){return new Qv(t,o,i,r)}fromTerm(t){return N2(this,t)}fromQuad(t){return N2(this,t)}};RL.exports=["blankNode","defaultGraph","fromQuad","fromTerm","literal","namedNode","quad","variable"];const Uv=new RL,l6={apply:(n,t,o)=>n(o[0]),get:(n,t)=>n(t)};function xr(n,{factory:t=Uv}={}){const o=(i="")=>t.namedNode(`${n}${i.raw||i}`);return typeof Proxy>"u"?o:new Proxy(o,l6)}xr("http://www.w3.org/2001/XMLSchema#");const tn=xr("http://www.w3.org/1999/02/22-rdf-syntax-ns#");xr("http://www.w3.org/2000/01/rdf-schema#");class _t{static add({ptr:t,start:o,end:i,subjects:r=[null],predicates:e=[null],objects:a=[null],graphs:u,callback:c}={}){if(!t.factory)throw new Error("add operation requires a factory");let s=()=>{};c&&(s=l=>{c(new D2({dataset:t.dataset,start:o,end:i,quad:l}))});for(const l of r)for(const f of e)for(const d of a)for(const h of u){const p={subject:l,predicate:f,object:d,graph:h};p[o]=t.term;const y=t.factory.quad(p.subject,p.predicate,p.object,p.graph);t.dataset.add(y),s(y)}return t}static addList({ptr:t,predicates:o,items:i,graphs:r}){if(t.isAny())throw new Error("can't attach a list to an any ptr");for(const e of o)for(const a of r){const u=i.map(()=>t.factory.blankNode());t.dataset.add(t.factory.quad(t.term,e,u[0]||tn.nil,a));for(let c=0;c<u.length;c++)t.dataset.add(t.factory.quad(u[c],tn.first,i[c],a)),t.dataset.add(t.factory.quad(u[c],tn.rest,u[c+1]||tn.nil,a))}return t}static delete({ptr:t,start:o,subjects:i=[null],predicates:r=[null],objects:e=[null]}){for(const a of i)for(const u of r)for(const c of e){const s={subject:a,predicate:u,object:c};s[o]=t.term;const l=t.dataset.match(s.subject,s.predicate,s.object);for(const f of l)t.dataset.delete(f)}return t}static deleteList({ptr:t,predicates:o}){const i=[];for(const r of o)for(const e of t.dataset.match(t.term,r)){let a=e.object;for(i.push(e);!tn.nil.equals(a);){a=i[i.length-1].object;const u=t.dataset.match(a);if(u.size===0)break;for(const c of u)i.push(c)}}for(const r of i)t.dataset.delete(r);return t}static execute({ptr:t,operation:o="traverse",quantifier:i,start:r,end:e,subjects:a,predicates:u,objects:c,graphs:s,items:l,callback:f}={}){if(o==="add")return _t.add({ptr:t,start:r,end:e,subjects:a,predicates:u,objects:c,graphs:s,callback:f});if(o==="addList")return _t.addList({ptr:t,predicates:u,items:l,graphs:s});if(o==="delete")return _t.delete({ptr:t,start:r,subjects:a,predicates:u,objects:c});if(o==="deleteList")return _t.deleteList({ptr:t,predicates:u});if(o==="isList")return _t.isList({ptr:t});if(o==="list")return _t.list({ptr:t});if(o==="traverse")return _t.traverse({ptr:t,quantifier:i,start:r,end:e,subjects:a,predicates:u,objects:c,graphs:s});throw new Error(`unknown operation ${o}`)}static isList({ptr:t}){return t.isAny()?!1:!!(tn.nil.equals(t.term)||_t.traverse({ptr:t,predicates:[tn.first]}).length===1)}static list({ptr:t}){if(t.isList())return{*[Symbol.iterator](){for(;t&&!t.term.equals(tn.nil);){const o=t.out([tn.first]);if(o.length!==1)throw new Error(`Invalid list: rdf:first count not equals one on ${t.value}`);const i=t.out([tn.rest]);if(i.length!==1)throw new Error(`Invalid list: rdf:rest count not equals one on ${t.value}`);yield o[0],t=i[0]}}}}static traverse({ptr:t,quantifier:o="one",start:i="subject",end:r="object",subjects:e=[null],predicates:a=[null],objects:u=[null],graphs:c=[null],callback:s}){if(o==="one")return _t.traverseOne({ptr:t,start:i,end:r,subjects:e,predicates:a,objects:u,graphs:c,callback:s});if(o==="oneOrMore"){const l=_t.traverse({ptr:t,end:r,start:i,subjects:e,predicates:a,objects:u,graphs:c,callback:s});return _t.traverseMore({ptrs:l,end:r,start:i,subjects:e,predicates:a,objects:u,graphs:c,callback:s})}if(o==="zeroOrMore")return _t.traverseMore({ptrs:[t],end:r,start:i,subjects:e,predicates:a,objects:u,graphs:c,callback:s});if(o==="zeroOrOne")return[t,..._t.traverse({ptr:t,end:r,start:i,subjects:e,predicates:a,objects:u,graphs:c,callback:s})];throw new Error(`unknown quantifier ${o}`)}static traverseMore({ptrs:t,end:o,start:i,subjects:r,predicates:e,objects:a,graphs:u,callback:c}={}){let s=[...t],l,f;do{l=[];for(const d of t)l=[...l,..._t.traverseOne({ptr:d,end:o,start:i,subjects:r,predicates:e,objects:a,graphs:u,callback:c})];f&&(l=l.filter(d=>!f.has(d.term))),t=l,s=[...s,...l],f=new Lr(s.map(d=>d.term))}while(l.length>0);return s}static traverseOne({ptr:t,start:o,end:i,subjects:r,predicates:e,objects:a,graphs:u,callback:c=(s,l)=>l.extend(s)}={}){const s=[];for(const l of r)for(const f of e)for(const d of a)for(const h of u){const p={subject:l,predicate:f,object:d,graph:h};p[o]=t.term;for(const y of t.dataset.match(p.subject,p.predicate,p.object,p.graph))s.push(c(new D2({dataset:t.dataset,end:i,quad:y,start:o}),t))}return s}}function I2(n,t){return t?o=>t(n.extend(o)):()=>{}}class L2{constructor({dataset:t,edges:o=[],factory:i,graph:r,term:e}){if(!t&&o.length===0)throw new Error("dataset or edges is required");if(o.length===0&&typeof e>"u")throw new Error("edges or term must be given");if(o.length>0&&e)throw new Error("edges or term must be given");this.dataset=t||o[o.length-1].dataset,this.edges=o,this.factory=i,this._graph=r,o.length===0&&(this._term=e)}get edge(){return this.edges[this.edges.length-1]}get graph(){return typeof this._graph=="object"?this._graph:this.edge&&this.edge.graph}get length(){return this._term!==void 0?1:this.edges.length+1}get startTerm(){return this._term||this.edges[0].startTerm}get term(){return this._term!==void 0?this._term:this.edge.term}get value(){const t=this.term;return t===null?void 0:t.value}addIn(t,o,i){return _t.add({ptr:this,start:"object",end:"subject",subjects:o,predicates:t,graphs:[this.graph||this.factory.defaultGraph()],callback:I2(this,i)})}addList(t,o){return _t.addList({ptr:this,predicates:t,graphs:[this.graph||this.factory.defaultGraph()],items:o})}addOut(t,o,i){return _t.add({ptr:this,start:"subject",end:"object",predicates:t,objects:o,graphs:[this.graph||this.factory.defaultGraph()],callback:I2(this,i)})}deleteIn(t,o){return _t.delete({ptr:this,start:"object",subjects:o,predicates:t})}deleteList(t){return _t.deleteList({ptr:this,predicates:t})}deleteOut(t,o){return _t.delete({ptr:this,start:"subject",predicates:t,objects:o})}execute({operation:t,quantifier:o,start:i,end:r,subjects:e,predicates:a,objects:u,graphs:c,items:s,callback:l}){return _t.execute({ptr:this,operation:t,quantifier:o,start:i,end:r,subjects:e,predicates:a,objects:u,graphs:c,items:s,callback:l})}extend(t){return new this.constructor({dataset:this.dataset,edges:[...this.edges,t],factory:this.factory,graph:this._graph})}hasIn(t,o){return _t.traverse({ptr:this,start:"object",end:"object",subjects:o,predicates:t,graphs:[this.graph]})}hasOut(t,o){return _t.traverse({ptr:this,start:"subject",end:"subject",predicates:t,objects:o,graphs:[this.graph]})}in(t,o){return _t.traverse({ptr:this,start:"object",end:"subject",subjects:o,predicates:t,graphs:[this.graph]})}isAny(){return!this.term}isList(){return _t.isList({ptr:this})}list(){return _t.list({ptr:this})}*nodes(){for(let t=0;t<this.length;t++)this._term!==void 0?yield{dataset:this.dataset,term:this._term}:this.edges.length>t?yield{dataset:this.edges[t].dataset,term:this.edges[t].startTerm}:this.edges.length===t&&(yield{dataset:this.edges[t-1].dataset,term:this.edges[t-1].term})}out(t,o){return _t.traverse({ptr:this,predicates:t,objects:o,graphs:[this.graph]})}*quads(){for(const{quad:t}of this.edges)yield t}trim(){return new this.constructor({dataset:this.dataset,factory:this.factory,graph:this.graph,term:this.term})}}function x2(n,t){return n?n.equals(t):n===t}function f6(n,t){return!(n.dataset!==t.dataset||!x2(n.graph,t.graph)||!x2(n.term,t.term))}function q2(n,t){return t?o=>t(new n.constructor({factory:n.factory,ptrs:[o]})):()=>{}}class db{constructor({dataset:t,factory:o,ptrs:i,terms:r,graphs:e}){if(this.factory=o,i)this.ptrs=[...i];else{this.ptrs=[];for(const a of r||[null])for(const u of e||[null])this.ptrs.push(new L2({dataset:t,factory:o,graph:u,term:a}))}}get dataset(){const t=new Set(this.datasets);return t.size!==1?null:t[Symbol.iterator]().next().value}get datasets(){return this.ptrs.map(t=>t.dataset)}get term(){const t=new Lr(this.terms);if(t.size===1)return t[Symbol.iterator]().next().value}get terms(){return this.ptrs.map(t=>t.term)}get value(){const t=this.term;return t?.value}get values(){return this.ptrs.map(t=>t.value)}addIn(t,o,i){const r=q2(this,i);for(const e of this.ptrs)e.addIn(t,o,r);return this}addList(t,o){if(this.isAny())throw new Error("can't attach a list to an any ptr");for(const i of this.ptrs)i.addList(t,o);return this}addOut(t,o,i){const r=q2(this,i);for(const e of this.ptrs)e.addOut(t,o,r);return this}clone(t){return new this.constructor({factory:this.factory,ptrs:this.ptrs,...t})}deleteIn(t,o){for(const i of this.ptrs)i.deleteIn(t,o);return this}deleteList(t){for(const o of this.ptrs)o.deleteList(t);return this}deleteOut(t,o){for(const i of this.ptrs)i.deleteOut(t,o);return this}distinct(){const t=this.ptrs.reduce((o,i)=>(o.some(r=>f6(r,i))||o.push(i.trim()),o),[]);return this.clone({ptrs:t})}execute(t){return this.clone({ptrs:this.ptrs.flatMap(o=>o.execute(t))})}executeAll(t){let o=this;for(const i of t)o=o.execute(i);return o}filter(t){return this.clone({ptrs:[...this].filter(t).map(o=>o.ptrs[0])})}hasIn(t,o){return this.clone({ptrs:this.ptrs.flatMap(i=>i.hasIn(t,o))})}hasOut(t,o){return this.clone({ptrs:this.ptrs.flatMap(i=>i.hasOut(t,o))})}in(t,o){return this.clone({ptrs:this.ptrs.flatMap(i=>i.in(t,o))})}isAny(){return this.ptrs.length>0&&this.ptrs.some(t=>t.isAny())}isList(){return this.ptrs.length!==1?!1:this.ptrs[0].isList()}list(){if(!this.isList())return;const t=this.ptrs[0].list(),o=this;return(function*(){for(const i of t)yield o.clone({ptrs:[i]})})()}map(t){return[...this].map(t)}node(t){const o=this.dataset,i=[...t].map(r=>new L2({dataset:o,factory:this.factory,term:r}));return this.clone({ptrs:i})}out(t,o){return this.clone({ptrs:this.ptrs.flatMap(i=>i.out(t,o))})}*quads(){for(const{edges:t}of this.ptrs)for(const{quad:o}of t)yield o}trim(){return this.clone({ptrs:this.ptrs.map(t=>t.trim())})}*[Symbol.iterator](){for(const t of this.ptrs)yield this.clone({ptrs:[t]})}}const d6=xr("http://www.w3.org/2002/07/owl#"),Es=xr("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),p6=xr("http://www.w3.org/2000/01/rdf-schema#"),ve=xr("http://www.w3.org/ns/shacl#"),yv=xr("https://schemas.link/shacl-next#"),Vv=xr("http://www.w3.org/2001/XMLSchema#");function h6(n){return n?`{${[...n.quads()].map(t=>Ar(t)).join(" ")}}`:"{}"}function y6(n){return n?`{${n.map(t=>h6(t)).join(" ")}}`:"{}"}var d0,B2;function _6(){if(B2)return d0;B2=1;var n=/\s/;function t(o){for(var i=o.length;i--&&n.test(o.charAt(i)););return i}return d0=t,d0}var p0,C2;function g6(){if(C2)return p0;C2=1;var n=_6(),t=/^\s+/;function o(i){return i&&i.slice(0,n(i)+1).replace(t,"")}return p0=o,p0}var h0,Q2;function m6(){if(Q2)return h0;Q2=1;function n(t){var o=typeof t;return t!=null&&(o=="object"||o=="function")}return h0=n,h0}var y0,U2;function b6(){if(U2)return y0;U2=1;var n=typeof jm=="object"&&jm&&jm.Object===Object&&jm;return y0=n,y0}var _0,V2;function v6(){if(V2)return _0;V2=1;var n=b6(),t=typeof self=="object"&&self&&self.Object===Object&&self,o=n||t||Function("return this")();return _0=o,_0}var g0,G2;function jL(){if(G2)return g0;G2=1;var n=v6(),t=n.Symbol;return g0=t,g0}var m0,X2;function T6(){if(X2)return m0;X2=1;var n=jL(),t=Object.prototype,o=t.hasOwnProperty,i=t.toString,r=n?n.toStringTag:void 0;function e(a){var u=o.call(a,r),c=a[r];try{a[r]=void 0;var s=!0}catch{}var l=i.call(a);return s&&(u?a[r]=c:delete a[r]),l}return m0=e,m0}var b0,z2;function O6(){if(z2)return b0;z2=1;var n=Object.prototype,t=n.toString;function o(i){return t.call(i)}return b0=o,b0}var v0,$2;function S6(){if($2)return v0;$2=1;var n=jL(),t=T6(),o=O6(),i="[object Null]",r="[object Undefined]",e=n?n.toStringTag:void 0;function a(u){return u==null?u===void 0?r:i:e&&e in Object(u)?t(u):o(u)}return v0=a,v0}var T0,H2;function w6(){if(H2)return T0;H2=1;function n(t){return t!=null&&typeof t=="object"}return T0=n,T0}var O0,J2;function A6(){if(J2)return O0;J2=1;var n=S6(),t=w6(),o="[object Symbol]";function i(r){return typeof r=="symbol"||t(r)&&n(r)==o}return O0=i,O0}var S0,K2;function F6(){if(K2)return S0;K2=1;var n=g6(),t=m6(),o=A6(),i=NaN,r=/^[-+]0x[0-9a-f]+$/i,e=/^0b[01]+$/i,a=/^0o[0-7]+$/i,u=parseInt;function c(s){if(typeof s=="number")return s;if(o(s))return i;if(t(s)){var l=typeof s.valueOf=="function"?s.valueOf():s;s=t(l)?l+"":l}if(typeof s!="string")return s===0?s:+s;s=n(s);var f=e.test(s);return f||a.test(s)?u(s.slice(2),f?2:8):r.test(s)?i:+s}return S0=c,S0}var w0,W2;function E6(){if(W2)return w0;W2=1;var n=F6(),t=1/0,o=17976931348623157e292;function i(r){if(!r)return r===0?r:0;if(r=n(r),r===t||r===-t){var e=r<0?-1:1;return e*o}return r===r?r:0}return w0=i,w0}var A0,Y2;function R6(){if(Y2)return A0;Y2=1;var n=E6();function t(o){var i=n(o),r=i%1;return i===i?r?i-r:i:0}return A0=t,A0}var F0,Z2;function j6(){if(Z2)return F0;Z2=1;var n=R6(),t="Expected a function";function o(i,r){var e;if(typeof r!="function")throw new TypeError(t);return i=n(i),function(){return--i>0&&(e=r.apply(this,arguments)),i<=1&&(r=void 0),e}}return F0=o,F0}var E0,k2;function D6(){if(k2)return E0;k2=1;var n=j6();function t(o){return n(2,o)}return E0=t,E0}var P6=D6();const Hr=W5(P6);let eO=class{constructor({details:t,factory:o,options:i,results:r=[]}={}){this.details=t,this.factory=o,this.options=i,this.results=r,this._conforms=Hr(()=>!this.results.some(e=>e.severity.equals(ve.Info)||e.severity.equals(ve.Violation)||e.severity.equals(ve.Warning))),this._ptr=Hr(()=>this.build())}get conforms(){return this._conforms()}get dataset(){return this.ptr.dataset}get ptr(){return this._ptr()}get term(){return this.ptr.term}build(){const t=new db({dataset:this.factory.dataset(),factory:this.factory,terms:[this.factory.blankNode()]});t.addOut([Es.type],[ve.ValidationReport]).addOut([ve.conforms],[this.factory.literal(this.conforms.toString(),Vv.boolean)]);for(const o of this.results)t.addOut([ve.result],[this.factory.blankNode()],i=>{o.build(i,this.options)});return t}coverage(){return this.results.flatMap(t=>t.coverage())}};function N6(n,t){return Object.entries(t).reduce((o,[i,r])=>(r&&r.termType&&(r=Ar(r)),o.replace(`{$${i}}`,r).replace(`{?${i}}`,r)),n)}let M6=class{constructor({args:t={},constraintComponent:o,factory:i,focusNode:r,message:e=[],path:a,results:u=[],severity:c,shape:s,source:l=[],value:f,valuePaths:d=[]}={}){this.args=t,this.constraintComponent=o,this.factory=i,this.focusNode=r,this.path=a||s.path,this.results=u,this.severity=c,this.shape=s,this.source=l,this.value=f,this.valuePaths=d,this._message=Hr(()=>(this.shape.message.length>0&&(e=this.shape.message),e.length===0&&(e=this.shape.ptr.node([this.constraintComponent]).out([ve.message]).terms),e.map(h=>i.literal(N6(h.value,t),h.language||null))))}get message(){return this._message()}build(t,{details:o}={}){t.addOut([Es.type],[ve.ValidationResult]).addOut([ve.focusNode],this.focusNode.terms).addOut([ve.resultSeverity],[this.severity]).addOut([ve.sourceConstraint],this.source).addOut([ve.sourceConstraintComponent],[this.constraintComponent]).addOut([ve.sourceShape],this.shape.ptr.terms),this.message&&t.addOut([ve.resultMessage],this.message);const i=r=>{if(r.quantifier==="one")return r.predicates.length>1?t.node([this.factory.blankNode()]).addList([ve.alternativePath],r.predicates):r.start==="object"?t.node([this.factory.blankNode()]).addOut([ve.inversePath],[r.predicates[0]]):t.node([r.predicates[0]]);if(r.quantifier==="oneOrMore")return t.node([this.factory.blankNode()]).addOut([ve.oneOrMorePath],[r.predicates[0]]);if(r.quantifier==="zeroOrMore")return t.node([this.factory.blankNode()]).addOut([ve.zeroOrMorePath],[r.predicates[0]]);if(r.quantifier==="zeroOrOne")return t.node([this.factory.blankNode()]).addOut([ve.zeroOrOnePath],[r.predicates[0]])};if(this.path&&(this.path.length===1?t.addOut([ve.resultPath],i(this.path[0]).terms):t.addList([ve.resultPath],this.path.map(r=>i(r).term))),typeof this.value<"u"&&t.addOut([ve.value],this.value.terms),o)for(const r of this.results)t.addOut([ve.detail],[this.factory.blankNode()],e=>{r.build(e,{details:o})})}coverage(){return[...this.valuePaths.flatMap(t=>[...t.quads()]),...this.results.flatMap(t=>t.coverage())]}},I6=class DL{constructor({factory:t,focusNode:o,options:i={debug:!1,details:!1},processed:r=new Set,report:e=new eO({factory:t,options:i}),results:a=new Map,shape:u,value:c,valueOrNode:s,valuePaths:l,values:f}={}){this.factory=t,this.focusNode=o,this.options=i,this.processed=r,this.report=e,this.results=a,this.shape=u,this.value=c,this.valuePaths=l,this.valueOrNode=s,this.values=f}create({child:t,focusNode:o=this.focusNode,shape:i=this.shape,value:r=this.value,valueOrNode:e=this.valueOrNode,valuePaths:a=this.valuePaths,values:u=this.values}={}){return new DL({factory:this.factory,focusNode:o,options:this.options,processed:this.processed,report:t?new eO({factory:this.factory,options:this.options}):this.report,results:this.results,shape:i,value:r,valueOrNode:e,valuePaths:a,values:u})}id({shape:t=this.shape}={}){return`${Ar(t.ptr.term)} - ${Ar(this.focusNode.term)} - ${y6(this.valuePaths)}`}result(t){const o=new M6({factory:this.factory,focusNode:this.focusNode,shape:this.shape,value:this.value,valuePaths:this.valuePaths,...t}),i=this.id();this.results.has(i)?this.results.get(i).add(o):this.results.set(i,new Set([o])),this.report.results.push(o)}debug(t,o){this.options.debug&&this.result({severity:yv.Debug,constraintComponent:t,...o})}trace(t,o){this.options.trace&&this.result({severity:yv.Trace,constraintComponent:t,...o})}test(t,o,i){t?this.debug(o,i):this.violation(o,i)}violation(t,o){this.result({constraintComponent:t,severity:this.shape.severity||ve.Violation,...o})}};function L6(){return{generic:x6()}}function x6(){return n=>{n.trace(yv.TraversalConstraintComponent,{args:{},message:[n.factory.literal("Traversal")],value:n.valueOrNode})}}class q6{constructor(t){this.validations=new js(t)}compile(t){const o=t.validator.options.coverage;if(t.deactivated)return[];let i=!1;const r=new Set;for(const e of t.ptr.execute({start:"subject",end:"predicate"})){const a=this.validations.get(e.term);a&&(r.add(a),e.term.equals(ve.property)&&(i=!0))}return o&&t.isPropertyShape&&!i&&r.add(L6),[...r].map(e=>e(t)).filter(Boolean)}}var ii={},ai={},Pc={},tO;function PL(){if(tO)return Pc;tO=1,Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.BlankNode=void 0;class n{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return Pc.BlankNode=n,Pc}var Nc={},Mc={},rO;function NL(){if(rO)return Mc;rO=1,Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.DefaultGraph=void 0;class n{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return Mc.DefaultGraph=n,n.INSTANCE=new n,Mc}var Ic={},Lc={},nO;function Gv(){if(nO)return Lc;nO=1,Object.defineProperty(Lc,"__esModule",{value:!0}),Lc.NamedNode=void 0;class n{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return Lc.NamedNode=n,Lc}var iO;function ML(){if(iO)return Ic;iO=1,Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.Literal=void 0;const n=Gv();class t{constructor(i,r){this.termType="Literal",this.value=i,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING,this.direction=""):r?"termType"in r?(this.language="",this.datatype=r,this.direction=""):(this.language=r.language,this.datatype=r.direction?t.RDF_DIRECTIONAL_LANGUAGE_STRING:t.RDF_LANGUAGE_STRING,this.direction=r.direction||""):(this.language="",this.datatype=t.XSD_STRING,this.direction="")}equals(i){return!!i&&i.termType==="Literal"&&i.value===this.value&&i.language===this.language&&(i.direction===this.direction||!i.direction&&this.direction==="")&&this.datatype.equals(i.datatype)}}return Ic.Literal=t,t.RDF_LANGUAGE_STRING=new n.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.RDF_DIRECTIONAL_LANGUAGE_STRING=new n.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),t.XSD_STRING=new n.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Ic}var xc={},aO;function IL(){if(aO)return xc;aO=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.Quad=void 0;class n{constructor(o,i,r,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=i,this.object=r,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return xc.Quad=n,xc}var qc={},oO;function LL(){if(oO)return qc;oO=1,Object.defineProperty(qc,"__esModule",{value:!0}),qc.Variable=void 0;class n{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return qc.Variable=n,qc}var uO;function B6(){if(uO)return Nc;uO=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.DataFactory=void 0;const n=PL(),t=NL(),o=ML(),i=Gv(),r=IL(),e=LL();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new i.NamedNode(s)}blankNode(s){return new n.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,f,d){return new r.Quad(s,l,f,d||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Nc.DataFactory=u,Nc}var sO;function Ds(){return sO||(sO=1,(function(n){var t=ai&&ai.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ai&&ai.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(PL(),n),o(B6(),n),o(NL(),n),o(ML(),n),o(Gv(),n),o(IL(),n),o(LL(),n)})(ai)),ai}var oi={},Bc={},Cc={},cO;function ec(){if(cO)return Cc;cO=1,Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.Translator=void 0;let n=class{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(o){throw new Error(`Invalid RDF ${o.datatype.value} value: '${o.value}'`)}registerHandler(o,i,r){for(const e of i)this.supportedRdfDatatypes.push(e),this.fromRdfHandlers[e.value]=o;for(const e of r){let a=this.toRdfHandlers[e];a||(this.toRdfHandlers[e]=a=[]),a.push(o)}}fromRdf(o,i){const r=this.fromRdfHandlers[o.datatype.value];return r?r.fromRdf(o,i):o.value}toRdf(o,i){const r=this.toRdfHandlers[typeof o];if(r)for(const e of r){const a=e.toRdf(o,i);if(a)return a}throw new Error(`Invalid JavaScript value: '${o}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}};return Cc.Translator=n,Cc}var lO;function C6(){if(lO)return Bc;lO=1,Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.TypeHandlerBoolean=void 0;const n=ec();let t=class xL{fromRdf(i,r){switch(i.value){case"true":return!0;case"false":return!1;case"1":return!0;case"0":return!1}return r&&n.Translator.incorrectRdfDataType(i),!1}toRdf(i,{datatype:r,dataFactory:e}){return e.literal(i?"true":"false",r||e.namedNode(xL.TYPE))}};return Bc.TypeHandlerBoolean=t,t.TYPE="http://www.w3.org/2001/XMLSchema#boolean",Bc}var Qc={},fO;function Q6(){if(fO)return Qc;fO=1,Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.TypeHandlerDate=void 0;const n=ec();let t=class _v{fromRdf(i,r){switch(r&&!i.value.match(_v.VALIDATORS[i.datatype.value.substr(33,i.datatype.value.length)])&&n.Translator.incorrectRdfDataType(i),i.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(i.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const e=i.value.split("-");return new Date(0,parseInt(e[0],10)-1,parseInt(e[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(i.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(i.value+"-01");default:return new Date(i.value)}}toRdf(i,{datatype:r,dataFactory:e}){if(r=r||e.namedNode(_v.TYPES[0]),!(i instanceof Date))return null;const a=i;let u;switch(r.value){case"http://www.w3.org/2001/XMLSchema#gDay":u=String(a.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":u=a.getUTCMonth()+1+"-"+a.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":u=String(a.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":u=a.getUTCFullYear()+"-"+(a.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":u=a.toISOString().replace(/T.*$/,"");break;default:u=a.toISOString()}return e.literal(u,r)}};return Qc.TypeHandlerDate=t,t.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],t.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/},Qc}var Uc={},dO;function U6(){if(dO)return Uc;dO=1,Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.TypeHandlerNumberDouble=void 0;const n=ec();let t=class qL{fromRdf(i,r){const e=parseFloat(i.value);return r&&isNaN(e)&&n.Translator.incorrectRdfDataType(i),e}toRdf(i,{datatype:r,dataFactory:e}){return r=r||e.namedNode(qL.TYPES[0]),isNaN(i)?e.literal("NaN",r):isFinite(i)?i%1===0?null:e.literal(i.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),r):e.literal(i>0?"INF":"-INF",r)}};return Uc.TypeHandlerNumberDouble=t,t.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"],Uc}var Vc={},pO;function V6(){if(pO)return Vc;pO=1,Object.defineProperty(Vc,"__esModule",{value:!0}),Vc.TypeHandlerNumberInteger=void 0;const n=ec();let t=class wg{fromRdf(i,r){const e=parseInt(i.value,10);return r&&(isNaN(e)||i.value.indexOf(".")>=0)&&n.Translator.incorrectRdfDataType(i),e}toRdf(i,{datatype:r,dataFactory:e}){return e.literal(String(i),r||(i<=wg.MAX_INT&&i>=wg.MIN_INT?e.namedNode(wg.TYPES[0]):e.namedNode(wg.TYPES[1])))}};return Vc.TypeHandlerNumberInteger=t,t.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],t.MAX_INT=2147483647,t.MIN_INT=-2147483648,Vc}var Gc={},hO;function G6(){if(hO)return Gc;hO=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.TypeHandlerString=void 0;let n=class{fromRdf(o){return o.value}toRdf(o,{datatype:i,dataFactory:r}){return r.literal(o,i)}};return Gc.TypeHandlerString=n,n.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"],Gc}var yO;function _O(){return yO||(yO=1,(function(n){var t=oi&&oi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=oi&&oi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(C6(),n),o(Q6(),n),o(U6(),n),o(V6(),n),o(G6(),n)})(oi)),oi}var R0={},gO;function X6(){return gO||(gO=1,Object.defineProperty(R0,"__esModule",{value:!0})),R0}var mO;function z6(){return mO||(mO=1,(function(n){var t=ii&&ii.__createBinding||(Object.create?(function(h,p,y,b){b===void 0&&(b=y);var _=Object.getOwnPropertyDescriptor(p,y);(!_||("get"in _?!p.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return p[y]}}),Object.defineProperty(h,b,_)}):(function(h,p,y,b){b===void 0&&(b=y),h[b]=p[y]})),o=ii&&ii.__exportStar||function(h,p){for(var y in h)y!=="default"&&!Object.prototype.hasOwnProperty.call(p,y)&&t(p,h,y)};Object.defineProperty(n,"__esModule",{value:!0}),n.fromRdf=c,n.toRdf=s,n.getTermRaw=l,n.getSupportedRdfDatatypes=f,n.getSupportedJavaScriptPrimitives=d;const i=Ds(),r=_O(),e=ec();o(_O(),n),o(X6(),n),o(ec(),n);const a=new i.DataFactory,u=new e.Translator;u.registerHandler(new r.TypeHandlerString,r.TypeHandlerString.TYPES.map(h=>a.namedNode(h)),["string"]),u.registerHandler(new r.TypeHandlerBoolean,[r.TypeHandlerBoolean.TYPE].map(h=>a.namedNode(h)),["boolean"]),u.registerHandler(new r.TypeHandlerNumberDouble,r.TypeHandlerNumberDouble.TYPES.map(h=>a.namedNode(h)),["number"]),u.registerHandler(new r.TypeHandlerNumberInteger,r.TypeHandlerNumberInteger.TYPES.map(h=>a.namedNode(h)),["number"]),u.registerHandler(new r.TypeHandlerDate,r.TypeHandlerDate.TYPES.map(h=>a.namedNode(h)),["object"]);function c(h,p){return u.fromRdf(h,p)}function s(h,p){return p&&"namedNode"in p&&(p={dataFactory:p}),p=p||{},p&&!p.dataFactory&&(p.dataFactory=a),u.toRdf(h,p)}function l(h,p){return h.termType==="Literal"?c(h,p):h.value}function f(){return u.getSupportedRdfDatatypes()}function d(){return u.getSupportedJavaScriptPrimitives()}})(ii)),ii}var Lg=z6();function bO(n){if(n.term.termType!=="BlankNode")return{quantifier:"one",start:"subject",end:"object",predicates:[n.term]};const t=n.out([ve.alternativePath]);if(t.ptrs.length===1&&t.ptrs[0].isList())return{quantifier:"one",start:"subject",end:"object",predicates:[...t.list()].map(a=>a.term)};const o=n.out([ve.inversePath]);if(o.term)return{quantifier:"one",start:"object",end:"subject",predicates:[o.term]};const i=n.out([ve.oneOrMorePath]);if(i.term)return{quantifier:"oneOrMore",start:"subject",end:"object",predicates:[i.term]};const r=n.out([ve.zeroOrMorePath]);if(r.term)return{quantifier:"zeroOrMore",start:"subject",end:"object",predicates:[r.term]};const e=n.out([ve.zeroOrOnePath]);if(e.term)return{quantifier:"zeroOrOne",start:"subject",end:"object",predicates:[e.term]}}function BL(n){return n.terms.length===0?null:n.ptrs[0].isList()?[...n.list()].map(t=>bO(t)):[bO(n)]}class $6{constructor(t){this.shape=t,this._compiled=Hr(()=>this.shape.validator.registry.compile(t))}get compiled(){return this._compiled()}async validate(t){return t.focusNode.dataset.size===0||(this.shape.isPropertyShape?await this.validateProperty(t):await this.validateNode(t)),t}async validateNode(t){const o=t.create({shape:this.shape,valueOrNode:t.value||t.focusNode});for(const i of this.compiled)i.node&&await i.node(o),i.generic&&await i.generic(o)}async validateProperty(t){let o;this.shape.isSparqlShape?o=t.focusNode:o=t.focusNode.executeAll(this.shape.path);const i=o.node(new Lr(o.terms)),r=[...o].reduce((a,u)=>{const c=u.term,s=o.node([c]);return a.has(c)||a.set(c,{value:s,valuePaths:[]}),a.get(c).valuePaths.push(u),a},new js).values(),e=t.create({shape:this.shape,values:i});for(const a of this.compiled)a.property&&await a.property(e);for(const{value:a,valuePaths:u}of r){const c=t.create({shape:this.shape,value:a,valueOrNode:a,valuePaths:u});for(const s of this.compiled)s.generic&&await s.generic(c)}}}function gv(n){const t=new Lr,i=new db({dataset:n.dataset,terms:n.terms}).execute({quantifier:"zeroOrMore",start:"object",end:"subject",predicates:[p6.subClassOf]});for(const r of i.ptrs)for(const{term:e}of r.nodes())t.add(e);return t}class H6{constructor(t,{registry:o}){this.registry=o,this.targetClass=new Lr([...gv(t.hasOut([Es.type],[ve.NodeShape])),...gv(t.out([ve.targetClass]))]),this.targetNode=t.out([ve.targetNode]).terms,this.targetObjectsOf=t.out([ve.targetObjectsOf]).terms,this.targetSubjectsOf=t.out([ve.targetSubjectsOf]).terms,this.targets=[...t.out([ve.target])]}async resolve(t){const o=t.focusNode.node([null]),i=[...t.focusNode.hasOut([Es.type],this.targetClass).ptrs,...t.focusNode.node(this.targetNode).ptrs,...o.execute({start:"object",end:"object",predicates:this.targetObjectsOf}).ptrs,...o.execute({start:"subject",end:"subject",predicates:this.targetSubjectsOf}).ptrs];for(const e of this.targets)for(const[,a]of this.registry.targetResolvers){const u=await a(e,t);i.push(...t.focusNode.node(u).ptrs)}const r=t.focusNode.clone({ptrs:i});return r.node([...new Lr(r.terms)])}}class J6{constructor(t,{validator:o}){this.ptr=t,this.validator=o,this._deactivated=Hr(()=>{const i=this.ptr.out([ve.deactivated]).term;return i&&Lg.fromRdf(i)}),this._message=Hr(()=>this.ptr.out([ve.message]).terms),this._path=Hr(()=>BL(this.ptr.out([ve.path]))),this._severity=Hr(()=>this.ptr.out([ve.severity]).term),this._shapeValidator=Hr(()=>new $6(this)),this._sparql=Hr(()=>this.ptr.out([ve.sparql])),this._targetResolver=Hr(()=>new H6(this.ptr,{registry:this.validator.targetResolverRegistry}))}get deactivated(){return this._deactivated()}get isPropertyShape(){return!!this.path}get isSparqlShape(){return this.sparql.terms.length>0}get path(){return this._path()}get targetResolver(){return this._targetResolver()}get message(){return this._message()}get severity(){return this._severity()}get shapeValidator(){return this._shapeValidator()}get sparql(){return this._sparql()}async resolveTargets(t){return this.targetResolver.resolve(t)}async validate(t){const o=t.id({shape:this});if(t.processed.has(o)){if(t.results.has(o))for(const i of t.results.get(o))t.report.results.push(i);return t}return t.processed.add(o),this.shapeValidator.validate(t)}}class K6{constructor(t){this.targetResolvers=new js(t)}}function W6(n){const t=parseInt(n.ptr.out([ve.maxCount]).value);return{property:Y6(t)}}function Y6(n){return t=>{t.test(t.values.terms.length<=n,ve.MaxCountConstraintComponent,{args:{maxCount:n},message:[t.factory.literal("More than {$maxCount} values")]})}}function Z6(n){const t=parseInt(n.ptr.out([ve.minCount]).value);return{property:k6(t)}}function k6(n){return t=>{t.test(t.values.terms.length>=n,ve.MinCountConstraintComponent,{args:{minCount:n},message:[t.factory.literal("Less than {$minCount} values")]})}}async function e9(n,t){for(const o of n)if(!await t(o))return!1;return!0}async function t9(n,t){return(await Promise.all(n.map(o=>t(o)))).filter(Boolean)}async function vb(n,t){return Promise.all(n.map(t))}async function r9(n,t){for(const o of n)if(await t(o))return!0;return!1}function n9(n){const t=[...n.ptr.out([ve.and])].flatMap(o=>[...o.list()]).map(o=>n.validator.shape(o));return{generic:i9(t)}}function i9(n){return async t=>{const o=await vb(n,async r=>(await r.validate(t.create({child:!0,focusNode:t.valueOrNode}))).report),i=o.every(r=>r.conforms);t.test(i,ve.AndConstraintComponent,{results:o.flatMap(r=>r.results),value:t.valueOrNode})}}function a9(n){const t=n.validator.shape(n.ptr.out([ve.not]));return{generic:o9(t)}}function o9(n){return async t=>{const o=(await n.validate(t.create({child:!0,focusNode:t.valueOrNode}))).report,i=!o.conforms;t.test(i,ve.NotConstraintComponent,{args:{not:n.ptr.term},message:[t.factory.literal("Value does have shape {$not}")],results:o.results,value:t.valueOrNode})}}function u9(n){const t=[...n.ptr.out([ve.or])].flatMap(o=>[...o.list()]).map(o=>n.validator.shape(o));return{generic:s9(t)}}function s9(n){return async t=>{let o=[],i;if(t.options.debug||t.options.details){const r=await vb(n,async e=>(await e.validate(t.create({child:!0,focusNode:t.valueOrNode}))).report);o=r.flatMap(e=>e.results),i=r.some(e=>e.conforms)}else i=await r9(n,async r=>(await r.validate(t.create({child:!0,focusNode:t.valueOrNode}))).report.conforms);t.test(i,ve.OrConstraintComponent,{results:o,value:t.valueOrNode})}}function c9(n){const t=[...n.ptr.out([ve.xone])].flatMap(o=>[...o.list()]).map(o=>n.validator.shape(o));return{generic:l9(t)}}function l9(n){return async t=>{const o=await vb(n,async r=>(await r.validate(t.create({child:!0,focusNode:t.valueOrNode}))).report),i=o.filter(r=>r.conforms).length===1;t.test(i,ve.XoneConstraintComponent,{results:o.flatMap(r=>r.results),value:t.valueOrNode})}}function f9(n){if(!Lg.fromRdf(n.ptr.out([ve.closed]).term))return null;const o=n.ptr.out([ve.property]).map(e=>n.validator.shape(e)),i=new Lr(o.filter(e=>!e.deactivated).map(e=>e.path[0].predicates[0])),r=new Lr([...n.ptr.out([ve.ignoredProperties]).list()||[]].map(e=>e.term));return{node:d9(i,r)}}function d9(n,t){return o=>{const i=o.focusNode.execute({start:"subject",end:"predicate"}).filter(r=>t.has(r.term)?!1:!n.has(r.term));if(i.ptrs.length>0)for(const r of i)o.violation(ve.ClosedConstraintComponent,{message:[o.factory.literal("Predicate is not allowed (closed shape)")],path:[{quantifier:"one",start:"subject",end:"object",predicates:[r.term]}],value:o.focusNode.node([[...r.quads()][0].object])});else o.debug(ve.ClosedConstraintComponent)}}function p9(n){const t=n.ptr.out([ve.hasValue]).term;return{node:h9(t),property:y9(t)}}function h9(n){return t=>{t.test(n.equals(t.valueOrNode.term),ve.HasValueConstraintComponent,{args:{hasValue:n},message:[t.factory.literal("Value must be {$hasValue}")]})}}function y9(n){return t=>{const o=[...t.values].some(i=>n.equals(i.term));t.test(o,ve.HasValueConstraintComponent,{args:{hasValue:n},message:[t.factory.literal("Missing expected value {$hasValue}")]})}}function _9(n){const t=new Lr([...n.ptr.out([ve.in]).list()].map(o=>o.term));return{generic:g9(t)}}function g9(n){return t=>{t.test(n.has(t.valueOrNode.term),ve.InConstraintComponent,{args:{in:[...n].map(o=>o.value).join(", ")},message:[t.factory.literal("Value is not in {$in}")],value:t.valueOrNode})}}function pc(n,t){if(!n||n.termType!=="Literal"||!t||t.termType!=="Literal"||vO(n)!==vO(t))return null;const o=Lg.fromRdf(n),i=Lg.fromRdf(t);return typeof o!=typeof i?null:typeof o=="string"?o.localeCompare(i):o-i}function vO(n){const t=/^.*(((\+|-)\d{2}:\d{2})|Z)$/;return Vv.dateTime.equals(n.datatype)&&t.test(n.value)}function m9(n){const t=n.ptr.out([ve.disjoint]).term;return{generic:b9(t)}}function b9(n){return t=>{const o=t.focusNode.dataset.match(t.focusNode.term,n,t.valueOrNode.term);t.test(o.size===0,ve.DisjointConstraintComponent,{args:{disjoint:n},message:[t.factory.literal("Value node must not also be one of the values of {$disjoint}")],value:t.valueOrNode})}}function v9(n){const t=n.ptr.out([ve.equals]).term;return{node:T9(t),property:O9(t)}}function T9(n){return t=>{const o=t.focusNode.out([n]),i=o.filter(e=>!e.term.equals(t.focusNode.term)),r=o.terms.length!==0&&i.terms.length===0;t.test(r,ve.EqualsConstraintComponent,{args:{equals:n},message:[t.factory.literal("Must have same values as {$equals}")],value:i.terms[0]&&t.focusNode.node([i.terms[0]])||t.focusNode})}}function O9(n){return t=>{const o=new Lr(t.focusNode.out([n]).terms),i=new Lr(t.values.terms),r=[...i].filter(u=>!o.has(u)),e=[...o].filter(u=>!i.has(u)),a=[...r,...e];for(const u of a)t.violation(ve.EqualsConstraintComponent,{args:{equals:n},message:[t.factory.literal("Must have same values as {$equals}")],value:t.focusNode.node([u])});a.length===0&&t.debug(ve.EqualsConstraintComponent,{args:{equals:n},message:[t.factory.literal("Must have same values as {$equals}")]})}}function S9(n){const t=n.ptr.out([ve.lessThan]).term;return{property:w9(t)}}function w9(n){return t=>{const o=t.focusNode.out([n]).terms;for(const i of t.values)for(const r of o){const e=pc(i.term,r);e===null||e>=0?t.violation(ve.LessThanConstraintComponent,{args:{lessThan:n},message:[t.factory.literal("Value is not less than value of {$lessThan}")],value:i}):t.debug(ve.LessThanConstraintComponent,{args:{lessThan:n},message:[t.factory.literal("Value is not less than value of {$lessThan}")],value:i})}}}function A9(n){const t=n.ptr.out([ve.lessThanOrEquals]).term;return{property:F9(t)}}function F9(n){return t=>{const o=t.focusNode.out([n]).terms;for(const i of t.values)for(const r of o){const e=pc(i.term,r);e===null||e>0?t.violation(ve.LessThanOrEqualsConstraintComponent,{args:{lessThanOrEquals:n},message:[t.factory.literal("Value is not less than or equal to value of {$lessThanOrEquals}")],value:i}):t.debug(ve.LessThanOrEqualsConstraintComponent,{args:{lessThanOrEquals:n},message:[t.factory.literal("Value is not less than or equal to value of {$lessThanOrEquals}")],value:i})}}}function E9(n){const t=n.ptr.out([ve.maxExclusive]).term;return{generic:R9(t)}}function R9(n){return t=>{const o=pc(t.valueOrNode.term,n);t.test(o!==null&&o<0,ve.MaxExclusiveConstraintComponent,{args:{maxExclusive:n},message:[t.factory.literal("Value is not less than {$maxExclusive}")],value:t.valueOrNode})}}function j9(n){const t=n.ptr.out([ve.maxInclusive]).term;return{generic:D9(t)}}function D9(n){return t=>{const o=pc(t.valueOrNode.term,n);t.test(o!==null&&o<=0,ve.MaxInclusiveConstraintComponent,{args:{maxInclusive:n},message:[t.factory.literal("Value is not less than or equal to {$maxInclusive}")],value:t.valueOrNode})}}function P9(n){const t=n.ptr.out([ve.minExclusive]).term;return{generic:N9(t)}}function N9(n){return t=>{const o=pc(t.valueOrNode.term,n);t.test(o!==null&&o>0,ve.MinExclusiveConstraintComponent,{args:{minExclusive:n},message:[t.factory.literal("Value is not greater than {$minExclusive}")],value:t.valueOrNode})}}function M9(n){const t=n.ptr.out([ve.minInclusive]).term;return{generic:I9(t)}}function I9(n){return t=>{const o=pc(t.valueOrNode.term,n);t.test(o!==null&&o>=0,ve.MinInclusiveConstraintComponent,{args:{minInclusive:n},message:[t.factory.literal("Value is not greater than or equal to {$minInclusive}")],value:t.valueOrNode})}}function L9(n){const t=[...n.ptr.out([ve.node])].map(o=>n.validator.shape(o));return{generic:x9(t)}}function x9(n){return async t=>{for(const o of n){const i=await o.validate(t.create({child:!0,focusNode:t.valueOrNode}));t.test(i.report.conforms,ve.NodeConstraintComponent,{args:{node:o.ptr.term},message:[t.factory.literal("Value does not have shape {$node}")],results:i.report.results,value:t.valueOrNode})}}}function q9(n){const t=[...n.ptr.out([ve.property])].map(o=>n.validator.shape(o));return{generic:B9(t)}}function B9(n){return async t=>{const o=t.create({focusNode:t.valueOrNode});for(const i of n)await i.validate(o)}}function C9(n){const t=n.validator.shape(n.ptr.out([ve.qualifiedValueShape])),o=n.ptr.out([ve.qualifiedValueShapesDisjoint]).term,i=o?Lg.fromRdf(o):!1,r=n.ptr.out([ve.qualifiedMaxCount]).term,e=r?parseInt(r.value):null,a=n.ptr.out([ve.qualifiedMinCount]).term,u=a?parseInt(a.value):null;return{property:Q9(t,i,e,u)}}function Q9(n,t,o,i){return async r=>{const e=[];let a=[];t&&(a=new Set(r.shape.ptr.in([ve.property]).out([ve.property]).out([ve.qualifiedValueShape]).filter(c=>!c.term.equals(n.ptr.term)).map(c=>r.shape.validator.shape(c))));const u=(await t9(r.values,async c=>{const s=(await n.validate(r.create({child:!0,focusNode:c}))).report;if(e.push(s.results),!s.conforms)return!1;if(a.length===0)return!0;if(r.options.debug||r.options.details){const l=await vb([...a],async f=>(await f.validate(r.create({child:!0,focusNode:c}))).report);return e.push(l.flatMap(f=>f.results)),!l.every(f=>f.conforms)}else return!await e9([...a],async l=>(await l.validate(r.create({child:!0,focusNode:c}))).report.conforms)})).length;o!==null&&r.test(u<=o,ve.QualifiedMaxCountConstraintComponent,{args:{qualifiedMaxCount:o,qualifiedValueShape:n.ptr.term,qualifiedValueShapesDisjoint:t},message:[r.factory.literal("More than {$qualifiedMaxCount} values have shape {$qualifiedValueShape}")],results:e.flat()}),i!==null&&r.test(u>=i,ve.QualifiedMinCountConstraintComponent,{args:{qualifiedMinCount:i,qualifiedValueShape:n.ptr.term,qualifiedValueShapesDisjoint:t},message:[r.factory.literal("Less than {$qualifiedMinCount} values have shape {$qualifiedValueShape}")],results:e.flat()})}}function U9(n,t){return t?t.slice(0,n.length)===n:!1}function V9(n){const t=[...new Set([...n.ptr.out([ve.languageIn]).list()].map(o=>o.value))];return{generic:G9(t)}}function G9(n){return t=>{const o=n.some(i=>U9(i,t.valueOrNode.term.language));t.test(o,ve.LanguageInConstraintComponent,{args:{languageIn:n.join(", ")},message:[t.factory.literal("Language does not match any of {$languageIn}")],value:t.valueOrNode})}}function X9(n){const t=parseInt(n.ptr.out([ve.maxLength]).value);return{generic:z9(t)}}function z9(n){return t=>{const o=t.valueOrNode.term.termType!=="BlankNode"&&t.valueOrNode.value.length<=n;t.test(o,ve.MaxLengthConstraintComponent,{args:{maxLength:n},message:[t.factory.literal("Value has more than {$maxLength} characters")],value:t.valueOrNode})}}function $9(n){const t=parseInt(n.ptr.out([ve.minLength]).value);return{generic:H9(t)}}function H9(n){return t=>{const o=t.valueOrNode.term.termType!=="BlankNode"&&t.valueOrNode.value.length>=n;t.test(o,ve.MinLengthConstraintComponent,{args:{minLength:n},message:[t.factory.literal("Value has less than {$minLength} characters")],value:t.valueOrNode})}}function J9(n){const t=n.ptr.out([ve.pattern]).value,o=n.ptr.out([ve.flags]).value,i=new RegExp(t,o);return{generic:K9(t,o,i)}}function K9(n,t,o){return i=>{i.test(o.test(i.valueOrNode.term.value),ve.PatternConstraintComponent,{args:{flags:t,pattern:n},message:[i.factory.literal('Value does not match pattern "{$pattern}"')],value:i.valueOrNode})}}function W9(n){const t=n.ptr.out([ve.uniqueLang]).term;return t.value==="true"&&Vv.boolean.equals(t.datatype)?{property:Y9()}:null}function Y9(){return n=>{const o=Object.entries(n.values.terms.reduce((i,r)=>(r.language&&(i[r.language]=(i[r.language]||0)+1),i),{})).filter(([,i])=>i>1);for(const[i]of o)n.violation(ve.UniqueLangConstraintComponent,{args:{lang:i},message:[n.factory.literal('Language "{?lang}" used more than once')]});o.length===0&&n.debug(ve.UniqueLangConstraintComponent)}}const ib=xr("http://www.w3.org/ns/shacl#"),CL=xr("https://schemas.link/shacl-next#");class tc{constructor({results:t=[]}={}){this.results=t}get conforms(){return!this.results.some(t=>t.severity.equals(ib.Info)||t.severity.equals(ib.Violation)||t.severity.equals(ib.Warning))}}function Z9(n,t){return Object.entries(t).reduce((o,[i,r])=>(r&&r.termType&&(r=Ar(r)),o.replace(`{$${i}}`,r).replace(`{?${i}}`,r)),n)}class pb{constructor({args:t={},factory:o,message:i=[],severity:r=ib.Violation}={}){this.severity=r,this.message=i.map(e=>o.literal(Z9(e.value,t),e.language||null))}}class Xv{constructor({factory:t=Uv}={}){this.factory=t}clone({factory:t}={}){return new Xv({factory:t||this.factory})}validate(){return new tc}validateSimple(){return!0}}class hc extends Xv{constructor({datatypes:t,factory:o}={}){super({factory:o}),this.datatypes=[];for(const i of Array.isArray(t)?t:[t])i&&this.datatypes.push(this.factory.fromTerm(i))}clone({factory:t}={}){return new hc({datatypes:this.datatypes,factory:t||this.factory})}}class k9{constructor({factory:t=Uv,validations:o}={}){if(this.factory=t,this.validations=new js,o)for(const i of Object.values(o)){const r=i.clone({factory:this.factory});for(const e of r.datatypes)this.validations.set(e,r)}}validate(t){const o=this.validations.get(t.datatype);return o?o.validate(t):new tc}validateSimple(t){const o=this.validations.get(t.datatype);return o?o.validateSimple(t):!0}}class Et extends hc{constructor(t,o,{factory:i}={}){super({datatypes:o,factory:i}),this.message=[this.factory.literal("term value {$this} matches pattern {$pattern}")],this.patterns=Array.isArray(t)?t:[t]}clone({factory:t}={}){return new Et(this.patterns,this.datatypes,{factory:t||this.factory})}validate(t){const o=this.patterns.map(i=>{let r;i.test(t.value)&&(r=CL.Debug);const e={pattern:this.factory.literal(i.toString()),this:t};return new pb({args:e,factory:this.factory,message:this.message,severity:r})});return new tc({results:o})}validateSimple(t){return this.patterns.every(o=>o.test(t.value))}}const e8=/^([-+]?[0-9]+)$/;class lr extends Et{constructor(t=null,o=null,i,{factory:r}={}){super(e8,i,{factory:r}),this.maxInclusive=null,this.minInclusive=null,typeof o=="string"&&(this.maxInclusive=BigInt(o)),typeof t=="string"&&(this.minInclusive=BigInt(t))}clone({factory:t}={}){return new lr(this.minInclusive?.toString(),this.maxInclusive?.toString(),this.datatypes,{factory:t||this.factory})}validate(t){const o=super.validate(t).results;if(!CL.Debug.equals(o[0].severity))return new tc({results:o});const i=BigInt(t.value);if(this.minInclusive!==null&&i<this.minInclusive){const r=`term value "${t.value}" is less than "${this.minInclusive.toString()}"`,e=[this.factory.literal(r)];o.push(new pb({factory:this.factory,message:e}))}if(this.maxInclusive!==null&&i>this.maxInclusive){const r=`term value "${t.value}" is greater than "${this.maxInclusive.toString()}"`,e=[this.factory.literal(r)];o.push(new pb({factory:this.factory,message:e}))}return new tc({results:o})}validateSimple(t){if(!super.validateSimple(t))return!1;const o=BigInt(t.value);return!(this.minInclusive!==null&&o<this.minInclusive||this.maxInclusive!==null&&o>this.maxInclusive)}}class zv extends hc{constructor(t,o,{factory:i}={}){super({datatypes:o,factory:i}),this.values=new Set(t)}clone({factory:t}={}){return new zv(this.values,this.datatypes,{factory:t||this.factory})}validate(t){const o=[];if(!this.values.has(t.value)){const i=`term value "${t.value}" is not included in the list: ${[...this.values].join(",")}`,r=[this.factory.literal(i)];o.push(new pb({factory:this.factory,message:r}))}return new tc({results:o})}validateSimple(t){return this.values.has(t.value)}}const rt={xsd:xr("http://www.w3.org/2001/XMLSchema#")},t8=new hc({datatypes:rt.xsd.anySimpleType}),r8=new hc({datatypes:rt.xsd.anyAtomicType}),Tb=/^([^\ud8ff-\udfff\ufffe-\uffff]*)$/,n8=/^((\+|-)?([0-9]+(\.[0-9]*)?|\.[0-9]+))$/,QL=/^((\+|-)?([0-9]+(\.[0-9]*)?|\.[0-9]+)([Ee](\+|-)?[0-9]+)?|(\+|-)?INF|NaN)$/,$v=/^(-?P((([0-9]+Y([0-9]+M)?([0-9]+D)?|([0-9]+M)([0-9]+D)?|([0-9]+D))(T(([0-9]+H)([0-9]+M)?([0-9]+(\.[0-9]+)?S)?|([0-9]+M)([0-9]+(\.[0-9]+)?S)?|([0-9]+(\.[0-9]+)?S)))?)|(T(([0-9]+H)([0-9]+M)?([0-9]+(\.[0-9]+)?S)?|([0-9]+M)([0-9]+(\.[0-9]+)?S)?|([0-9]+(\.[0-9]+)?S)))))$/,UL=/^(-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?))(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,i8=/^((([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?))(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,a8=/^(-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,o8=/^(-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,u8=/^(-?([1-9][0-9]{3,}|0[0-9]{3})(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,s8=/^(--(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,c8=/^(---(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,l8=/^(--(0[1-9]|1[0-2])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,f8=/^(([0-9a-fA-F]{2})*)$/,d8=/^(((([A-Za-z0-9+/] ?){4})*(([A-Za-z0-9+/] ?){3}[A-Za-z0-9+/]|([A-Za-z0-9+/] ?){2}[AEIMQUYcgkosw048] ?=|[A-Za-z0-9+/] ?[AQgw] ?= ?=))?)$/,p8=new Et(Tb,rt.xsd.string),h8=new zv(["1","true","0","false"],rt.xsd.boolean),y8=new Et(n8,rt.xsd.decimal),_8=new Et(QL,rt.xsd.float),g8=new Et(QL,rt.xsd.double),m8=new Et($v,rt.xsd.duration),b8=new Et(UL,rt.xsd.dateTime),v8=new Et(i8,rt.xsd.time),T8=new Et(a8,rt.xsd.date),O8=new Et(o8,rt.xsd.gYearMonth),S8=new Et(u8,rt.xsd.gYear),w8=new Et(s8,rt.xsd.gMonthDay),A8=new Et(c8,rt.xsd.gDay),F8=new Et(l8,rt.xsd.gMonth),E8=new Et(f8,rt.xsd.hexBinary),R8=new Et(d8,rt.xsd.base64Binary),j8=new Et(Tb,rt.xsd.anyURI),VL=/^([^\u000d\u000a\u0009]*)$/,D8=/^([^ ]+( [^ ]+)*)*$/,P8=/^([a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*)$/,N8=/^([^DT]*)$/,M8=/^([^YM]*[DT].*)$/,I8=/^(.*(Z|(\+|-)[0-9][0-9]:[0-9][0-9]))$/,L8=new Et([Tb,VL],rt.xsd.normalizedString),x8=new Et([Tb,VL,D8],rt.xsd.token),q8=new Et(P8,rt.xsd.language),B8=new lr(null,null,rt.xsd.integer),C8=new lr(null,"0",rt.xsd.nonPositiveInteger),Q8=new lr(null,"-1",rt.xsd.negativeInteger),U8=new lr("-9223372036854775808","9223372036854775807",rt.xsd.long),V8=new lr("-2147483648","2147483647",rt.xsd.int),G8=new lr("-32768","32767",rt.xsd.short),X8=new lr("-128","127",rt.xsd.byte),z8=new lr("0",null,rt.xsd.nonNegativeInteger),$8=new lr("0","18446744073709551615",rt.xsd.unsignedLong),H8=new lr("0","4294967295",rt.xsd.unsignedInt),J8=new lr("0","65535",rt.xsd.unsignedShort),K8=new lr("0","255",rt.xsd.unsignedByte),W8=new lr("1",null,rt.xsd.positiveInteger),Y8=new Et([$v,N8],rt.xsd.yearMonthDuration),Z8=new Et([$v,M8],rt.xsd.dayTimeDuration),k8=new Et([UL,I8],rt.xsd.dateTimeStamp),e7=Object.freeze(Object.defineProperty({__proto__:null,anyAtomicType:r8,anySimpleType:t8,anyURI:j8,base64Binary:R8,boolean:h8,byte:X8,date:T8,dateTime:b8,dateTimeStamp:k8,dayTimeDuration:Z8,decimal:y8,double:g8,duration:m8,float:_8,gDay:A8,gMonth:F8,gMonthDay:w8,gYear:S8,gYearMonth:O8,hexBinary:E8,int:V8,integer:B8,language:q8,long:U8,negativeInteger:Q8,nonNegativeInteger:z8,nonPositiveInteger:C8,normalizedString:L8,positiveInteger:W8,short:G8,string:p8,time:v8,token:x8,unsignedByte:K8,unsignedInt:H8,unsignedLong:$8,unsignedShort:J8,yearMonthDuration:Y8},Symbol.toStringTag,{value:"Module"}));class t7 extends k9{constructor({factory:t}={}){super({factory:t,validations:{...e7}})}}const r7=new js([[ve.BlankNode,new Set(["BlankNode"])],[ve.BlankNodeOrIRI,new Set(["BlankNode","NamedNode"])],[ve.BlankNodeOrLiteral,new Set(["BlankNode","Literal"])],[ve.IRI,new Set(["NamedNode"])],[ve.IRIOrLiteral,new Set(["NamedNode","Literal"])],[ve.Literal,new Set(["Literal"])]]);function n7(n){const t=n.ptr.out([ve.class]).map(o=>gv(o));return{generic:i7(t)}}function i7(n){return t=>{const o=new Lr(t.valueOrNode.out([Es.type]).terms);for(const i of n){const r=[...o].some(e=>i.has(e));t.test(r,ve.ClassConstraintComponent,{value:t.valueOrNode})}}}function a7(n){const t=n.ptr.out([ve.datatype]).term,o=new t7;return{generic:o7(t,o)}}function o7(n,t){return o=>{const i=n.equals(o.valueOrNode.term.datatype)&&t.validateSimple(o.valueOrNode.term);o.test(i,ve.DatatypeConstraintComponent,{args:{datatype:n},message:[o.factory.literal("Value does not have datatype {$datatype}")],value:o.valueOrNode})}}function u7(n){const t=n.ptr.out([ve.nodeKind]).term,o=r7.get(t);return{generic:s7(t,o)}}function s7(n,t){return o=>{o.test(t.has(o.valueOrNode.term.termType),ve.NodeKindConstraintComponent,{args:{nodeKind:n},message:[o.factory.literal("Value does not have node kind {$nodeKind}")],value:o.valueOrNode})}}const c7=new js([[ve.maxCount,W6],[ve.minCount,Z6],[ve.and,n9],[ve.not,a9],[ve.or,u9],[ve.xone,c9],[ve.closed,f9],[ve.hasValue,p9],[ve.in,_9],[ve.disjoint,m9],[ve.equals,v9],[ve.lessThan,S9],[ve.lessThanOrEquals,A9],[ve.maxExclusive,E9],[ve.maxInclusive,j9],[ve.minExclusive,P9],[ve.minInclusive,M9],[ve.node,L9],[ve.property,q9],[ve.qualifiedValueShape,C9],[ve.languageIn,V9],[ve.maxLength,X9],[ve.minLength,$9],[ve.pattern,J9],[ve.uniqueLang,W9],[ve.class,n7],[ve.datatype,a7],[ve.nodeKind,u7]]);class zK{constructor(t,{factory:o,...i}){if(this.factory=o,this.options=i,this.registry=new q6(c7),this.targetResolverRegistry=new K6(this.options.targetResolvers||[]),this.shapesPtr=new db({dataset:t,factory:o}),this.shapes=new js,this.options.coverage&&(this.options.debug=!0,this.options.details=!0,this.options.trace=!0),this.options.validations)for(const[e,a]of this.options.validations)this.registry.validations.set(e,a);const r=[...this.shapesPtr.hasOut([ve.targetClass]),...this.shapesPtr.hasOut([ve.targetNode]),...this.shapesPtr.hasOut([ve.targetObjectsOf]),...this.shapesPtr.hasOut([ve.targetSubjectsOf]),...this.shapesPtr.hasOut([ve.target]),...this.shapesPtr.hasOut([Es.type],[ve.NodeShape]),...this.shapesPtr.hasOut([Es.type],[ve.PropertyShape])];for(const e of r)this.shape(e)}shape(t){if(!t.term)return null;let o=this.shapes.get(t.term);return o||(o=new J6(t,{validator:this}),this.shapes.set(t.term,o)),o}async validate(t,o){const i=new db({...t,factory:this.factory}),r=new I6({factory:this.factory,focusNode:i,options:this.options,validator:this});o?o=o.map(e=>this.shape(this.shapesPtr.node(e.terms))):o=this.shapes.values();for(const e of o){const a=r.create({shape:e});let u;i.isAny()?u=await e.resolveTargets(a):u=i;for(const c of u)await e.validate(a.create({focusNode:c}))}return r.report}}var ui={},Xc={},si={},zc={},ci={},$c={},li={},fi={};var hb="@@__IMMUTABLE_INDEXED__@@";function _r(n){return!!(n&&n[hb])}var yb="@@__IMMUTABLE_KEYED__@@";function Tt(n){return!!(n&&n[yb])}function Ob(n){return Tt(n)||_r(n)}var GL="@@__IMMUTABLE_ITERABLE__@@";function gr(n){return!!(n&&n[GL])}var zt=function(t){return gr(t)?t:er(t)},qr=(function(n){function t(o){return Tt(o)?o:Qn(o)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t})(zt),Ps=(function(n){function t(o){return _r(o)?o:Cr(o)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t})(zt),yc=(function(n){function t(o){return gr(o)&&!Ob(o)?o:bc(o)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t})(zt);zt.Keyed=qr;zt.Indexed=Ps;zt.Set=yc;var _c=0,Er=1,Rr=2,mv=typeof Symbol=="function"&&Symbol.iterator,XL="@@iterator",Sb=mv||XL,at=function(t){this.next=t};at.prototype.toString=function(){return"[Iterator]"};at.KEYS=_c;at.VALUES=Er;at.ENTRIES=Rr;at.prototype.inspect=at.prototype.toSource=function(){return this.toString()};at.prototype[Sb]=function(){return this};function At(n,t,o,i){var r=n===_c?t:n===Er?o:[t,o];return i?i.value=r:i={value:r,done:!1},i}function kt(){return{value:void 0,done:!0}}function Hv(n){return Array.isArray(n)?!0:!!wb(n)}function TO(n){return!!(n&&typeof n.next=="function")}function bv(n){var t=wb(n);return t&&t.call(n)}function wb(n){var t=n&&(mv&&n[mv]||n[XL]);if(typeof t=="function")return t}function l7(n){var t=wb(n);return t&&t===n.entries}function f7(n){var t=wb(n);return t&&t===n.keys}var Xg="delete",bt=5,Fr=1<<bt,sr=Fr-1,it={};function vv(){return{value:!1}}function Ir(n){n&&(n.value=!0)}function Jv(){}function rc(n){return n.size===void 0&&(n.size=n.__iterate(zL)),n.size}function xn(n,t){if(typeof t!="number"){var o=t>>>0;if(""+o!==t||o===4294967295)return NaN;t=o}return t<0?rc(n)+t:t}function zL(){return!0}function zg(n,t,o){return(n===0&&!HL(n)||o!==void 0&&n<=-o)&&(t===void 0||o!==void 0&&t>=o)}function gc(n,t){return $L(n,t,0)}function $g(n,t){return $L(n,t,t)}function $L(n,t,o){return n===void 0?o:HL(n)?t===1/0?t:Math.max(0,t+n)|0:t===void 0||t===n?n:Math.min(t,n)|0}function HL(n){return n<0||n===0&&1/n===-1/0}var JL="@@__IMMUTABLE_RECORD__@@";function Cn(n){return!!(n&&n[JL])}function Br(n){return gr(n)||Cn(n)}var qn="@@__IMMUTABLE_ORDERED__@@";function Jr(n){return!!(n&&n[qn])}var KL="@@__IMMUTABLE_SEQ__@@";function Ab(n){return!!(n&&n[KL])}var mc=Object.prototype.hasOwnProperty;function Kv(n){return Array.isArray(n)||typeof n=="string"?!0:n&&typeof n=="object"&&Number.isInteger(n.length)&&n.length>=0&&(n.length===0?Object.keys(n).length===1:n.hasOwnProperty(n.length-1))}var er=(function(n){function t(o){return o==null?Yv():Br(o)?o.toSeq():p7(o)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.toSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq {","}")},t.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},t.prototype.__iterate=function(i,r){var e=this._cache;if(e){for(var a=e.length,u=0;u!==a;){var c=e[r?a-++u:u++];if(i(c[1],c[0],this)===!1)break}return u}return this.__iterateUncached(i,r)},t.prototype.__iterator=function(i,r){var e=this._cache;if(e){var a=e.length,u=0;return new at(function(){if(u===a)return kt();var c=e[r?a-++u:u++];return At(i,c[0],c[1])})}return this.__iteratorUncached(i,r)},t})(zt),Qn=(function(n){function t(o){return o==null?Yv().toKeyedSeq():gr(o)?Tt(o)?o.toSeq():o.fromEntrySeq():Cn(o)?o.toSeq():Zv(o)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.toKeyedSeq=function(){return this},t})(er),Cr=(function(n){function t(o){return o==null?Yv():gr(o)?Tt(o)?o.entrySeq():o.toIndexedSeq():Cn(o)?o.toSeq().entrySeq():WL(o)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toIndexedSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq [","]")},t})(er),bc=(function(n){function t(o){return(gr(o)&&!Ob(o)?o:Cr(o)).toSetSeq()}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSetSeq=function(){return this},t})(er);er.isSeq=Ab;er.Keyed=Qn;er.Set=bc;er.Indexed=Cr;er.prototype[KL]=!0;var nc=(function(n){function t(o){this._array=o,this.size=o.length}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.get=function(i,r){return this.has(i)?this._array[xn(this,i)]:r},t.prototype.__iterate=function(i,r){for(var e=this._array,a=e.length,u=0;u!==a;){var c=r?a-++u:u++;if(i(e[c],c,this)===!1)break}return u},t.prototype.__iterator=function(i,r){var e=this._array,a=e.length,u=0;return new at(function(){if(u===a)return kt();var c=r?a-++u:u++;return At(i,c,e[c])})},t})(Cr),Wv=(function(n){function t(o){var i=Object.keys(o).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(o):[]);this._object=o,this._keys=i,this.size=i.length}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.get=function(i,r){return r!==void 0&&!this.has(i)?r:this._object[i]},t.prototype.has=function(i){return mc.call(this._object,i)},t.prototype.__iterate=function(i,r){for(var e=this._object,a=this._keys,u=a.length,c=0;c!==u;){var s=a[r?u-++c:c++];if(i(e[s],s,this)===!1)break}return c},t.prototype.__iterator=function(i,r){var e=this._object,a=this._keys,u=a.length,c=0;return new at(function(){if(c===u)return kt();var s=a[r?u-++c:c++];return At(i,s,e[s])})},t})(Qn);Wv.prototype[qn]=!0;var d7=(function(n){function t(o){this._collection=o,this.size=o.length||o.size}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(i,r){if(r)return this.cacheResult().__iterate(i,r);var e=this._collection,a=bv(e),u=0;if(TO(a))for(var c;!(c=a.next()).done&&i(c.value,u++,this)!==!1;);return u},t.prototype.__iteratorUncached=function(i,r){if(r)return this.cacheResult().__iterator(i,r);var e=this._collection,a=bv(e);if(!TO(a))return new at(kt);var u=0;return new at(function(){var c=a.next();return c.done?c:At(i,u++,c.value)})},t})(Cr),OO;function Yv(){return OO||(OO=new nc([]))}function Zv(n){var t=kv(n);if(t)return t.fromEntrySeq();if(typeof n=="object")return new Wv(n);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+n)}function WL(n){var t=kv(n);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+n)}function p7(n){var t=kv(n);if(t)return l7(n)?t.fromEntrySeq():f7(n)?t.toSetSeq():t;if(typeof n=="object")return new Wv(n);throw new TypeError("Expected Array or collection object of values, or keyed object: "+n)}function kv(n){return Kv(n)?new nc(n):Hv(n)?new d7(n):void 0}function Hg(){return this.__ensureOwner()}function Jg(){return this.__ownerID?this:this.__ensureOwner(new Jv)}var Hc=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(t,o){t|=0,o|=0;var i=t&65535,r=o&65535;return i*r+((t>>>16)*r+i*(o>>>16)<<16>>>0)|0};function Fb(n){return n>>>1&1073741824|n&3221225471}var h7=Object.prototype.valueOf;function hr(n){if(n==null)return SO(n);if(typeof n.hashCode=="function")return Fb(n.hashCode(n));var t=v7(n);if(t==null)return SO(t);switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return y7(t);case"string":return t.length>T7?_7(t):Tv(t);case"object":case"function":return m7(t);case"symbol":return g7(t);default:if(typeof t.toString=="function")return Tv(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}}function SO(n){return n===null?1108378658:1108378659}function y7(n){if(n!==n||n===1/0)return 0;var t=n|0;for(t!==n&&(t^=n*4294967295);n>4294967295;)n/=4294967295,t^=n;return Fb(t)}function _7(n){var t=P0[n];return t===void 0&&(t=Tv(n),D0===O7&&(D0=0,P0={}),D0++,P0[n]=t),t}function Tv(n){for(var t=0,o=0;o<n.length;o++)t=31*t+n.charCodeAt(o)|0;return Fb(t)}function g7(n){var t=FO[n];return t!==void 0||(t=YL(),FO[n]=t),t}function m7(n){var t;if(Ov&&(t=Sv.get(n),t!==void 0)||(t=n[Fs],t!==void 0)||!AO&&(t=n.propertyIsEnumerable&&n.propertyIsEnumerable[Fs],t!==void 0||(t=b7(n),t!==void 0)))return t;if(t=YL(),Ov)Sv.set(n,t);else{if(wO!==void 0&&wO(n)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(AO)Object.defineProperty(n,Fs,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(n.propertyIsEnumerable!==void 0&&n.propertyIsEnumerable===n.constructor.prototype.propertyIsEnumerable)n.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},n.propertyIsEnumerable[Fs]=t;else if(n.nodeType!==void 0)n[Fs]=t;else throw new Error("Unable to set a non-enumerable property on object.")}return t}var wO=Object.isExtensible,AO=(function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}})();function b7(n){if(n&&n.nodeType>0)switch(n.nodeType){case 1:return n.uniqueID;case 9:return n.documentElement&&n.documentElement.uniqueID}}function v7(n){return n.valueOf!==h7&&typeof n.valueOf=="function"?n.valueOf(n):n}function YL(){var n=++j0;return j0&1073741824&&(j0=0),n}var Ov=typeof WeakMap=="function",Sv;Ov&&(Sv=new WeakMap);var FO=Object.create(null),j0=0,Fs="__immutablehash__";typeof Symbol=="function"&&(Fs=Symbol(Fs));var T7=16,O7=255,D0=0,P0={},Eb=(function(n){function t(o,i){this._iter=o,this._useKeys=i,this.size=o.size}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.get=function(i,r){return this._iter.get(i,r)},t.prototype.has=function(i){return this._iter.has(i)},t.prototype.valueSeq=function(){return this._iter.valueSeq()},t.prototype.reverse=function(){var i=this,r=eT(this,!0);return this._useKeys||(r.valueSeq=function(){return i._iter.toSeq().reverse()}),r},t.prototype.map=function(i,r){var e=this,a=rx(this,i,r);return this._useKeys||(a.valueSeq=function(){return e._iter.toSeq().map(i,r)}),a},t.prototype.__iterate=function(i,r){var e=this;return this._iter.__iterate(function(a,u){return i(a,u,e)},r)},t.prototype.__iterator=function(i,r){return this._iter.__iterator(i,r)},t})(Qn);Eb.prototype[qn]=!0;var ZL=(function(n){function t(o){this._iter=o,this.size=o.size}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.includes=function(i){return this._iter.includes(i)},t.prototype.__iterate=function(i,r){var e=this,a=0;return r&&rc(this),this._iter.__iterate(function(u){return i(u,r?e.size-++a:a++,e)},r)},t.prototype.__iterator=function(i,r){var e=this,a=this._iter.__iterator(Er,r),u=0;return r&&rc(this),new at(function(){var c=a.next();return c.done?c:At(i,r?e.size-++u:u++,c.value,c)})},t})(Cr),kL=(function(n){function t(o){this._iter=o,this.size=o.size}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.has=function(i){return this._iter.includes(i)},t.prototype.__iterate=function(i,r){var e=this;return this._iter.__iterate(function(a){return i(a,a,e)},r)},t.prototype.__iterator=function(i,r){var e=this._iter.__iterator(Er,r);return new at(function(){var a=e.next();return a.done?a:At(i,a.value,a.value,a)})},t})(bc),ex=(function(n){function t(o){this._iter=o,this.size=o.size}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.entrySeq=function(){return this._iter.toSeq()},t.prototype.__iterate=function(i,r){var e=this;return this._iter.__iterate(function(a){if(a){RO(a);var u=gr(a);return i(u?a.get(1):a[1],u?a.get(0):a[0],e)}},r)},t.prototype.__iterator=function(i,r){var e=this._iter.__iterator(Er,r);return new at(function(){for(;;){var a=e.next();if(a.done)return a;var u=a.value;if(u){RO(u);var c=gr(u);return At(i,c?u.get(0):u[0],c?u.get(1):u[1],a)}}})},t})(Qn);ZL.prototype.cacheResult=Eb.prototype.cacheResult=kL.prototype.cacheResult=ex.prototype.cacheResult=nT;function tx(n){var t=ln(n);return t._iter=n,t.size=n.size,t.flip=function(){return n},t.reverse=function(){var o=n.reverse.apply(this);return o.flip=function(){return n.reverse()},o},t.has=function(o){return n.includes(o)},t.includes=function(o){return n.has(o)},t.cacheResult=nT,t.__iterateUncached=function(o,i){var r=this;return n.__iterate(function(e,a){return o(a,e,r)!==!1},i)},t.__iteratorUncached=function(o,i){if(o===Rr){var r=n.__iterator(o,i);return new at(function(){var e=r.next();if(!e.done){var a=e.value[0];e.value[0]=e.value[1],e.value[1]=a}return e})}return n.__iterator(o===Er?_c:Er,i)},t}function rx(n,t,o){var i=ln(n);return i.size=n.size,i.has=function(r){return n.has(r)},i.get=function(r,e){var a=n.get(r,it);return a===it?e:t.call(o,a,r,n)},i.__iterateUncached=function(r,e){var a=this;return n.__iterate(function(u,c,s){return r(t.call(o,u,c,s),c,a)!==!1},e)},i.__iteratorUncached=function(r,e){var a=n.__iterator(Rr,e);return new at(function(){var u=a.next();if(u.done)return u;var c=u.value,s=c[0];return At(r,s,t.call(o,c[1],s,n),u)})},i}function eT(n,t){var o=this,i=ln(n);return i._iter=n,i.size=n.size,i.reverse=function(){return n},n.flip&&(i.flip=function(){var r=tx(n);return r.reverse=function(){return n.flip()},r}),i.get=function(r,e){return n.get(t?r:-1-r,e)},i.has=function(r){return n.has(t?r:-1-r)},i.includes=function(r){return n.includes(r)},i.cacheResult=nT,i.__iterate=function(r,e){var a=this,u=0;return e&&rc(n),n.__iterate(function(c,s){return r(c,t?s:e?a.size-++u:u++,a)},!e)},i.__iterator=function(r,e){var a=0;e&&rc(n);var u=n.__iterator(Rr,!e);return new at(function(){var c=u.next();if(c.done)return c;var s=c.value;return At(r,t?s[0]:e?o.size-++a:a++,s[1],c)})},i}function nx(n,t,o,i){var r=ln(n);return i&&(r.has=function(e){var a=n.get(e,it);return a!==it&&!!t.call(o,a,e,n)},r.get=function(e,a){var u=n.get(e,it);return u!==it&&t.call(o,u,e,n)?u:a}),r.__iterateUncached=function(e,a){var u=this,c=0;return n.__iterate(function(s,l,f){if(t.call(o,s,l,f))return c++,e(s,i?l:c-1,u)},a),c},r.__iteratorUncached=function(e,a){var u=n.__iterator(Rr,a),c=0;return new at(function(){for(;;){var s=u.next();if(s.done)return s;var l=s.value,f=l[0],d=l[1];if(t.call(o,d,f,n))return At(e,i?f:c++,d,s)}})},r}function S7(n,t,o){var i=Ns().asMutable();return n.__iterate(function(r,e){i.update(t.call(o,r,e,n),0,function(a){return a+1})}),i.asImmutable()}function w7(n,t,o){var i=Tt(n),r=(Jr(n)?cn():Ns()).asMutable();n.__iterate(function(a,u){r.update(t.call(o,a,u,n),function(c){return c=c||[],c.push(i?[u,a]:a),c})});var e=rT(n);return r.map(function(a){return mt(n,e(a))}).asImmutable()}function A7(n,t,o){var i=Tt(n),r=[[],[]];n.__iterate(function(a,u){r[t.call(o,a,u,n)?1:0].push(i?[u,a]:a)});var e=rT(n);return r.map(function(a){return mt(n,e(a))})}function tT(n,t,o,i){var r=n.size;if(zg(t,o,r))return n;if(typeof r>"u"&&(t<0||o<0))return tT(n.toSeq().cacheResult(),t,o,i);var e=gc(t,r),a=$g(o,r),u=a-e,c;u===u&&(c=u<0?0:u);var s=ln(n);return s.size=c===0?c:n.size&&c||void 0,!i&&Ab(n)&&c>=0&&(s.get=function(l,f){return l=xn(this,l),l>=0&&l<c?n.get(l+e,f):f}),s.__iterateUncached=function(l,f){var d=this;if(c===0)return 0;if(f)return this.cacheResult().__iterate(l,f);var h=0,p=!0,y=0;return n.__iterate(function(b,_){if(!(p&&(p=h++<e)))return y++,l(b,i?_:y-1,d)!==!1&&y!==c}),y},s.__iteratorUncached=function(l,f){if(c!==0&&f)return this.cacheResult().__iterator(l,f);if(c===0)return new at(kt);var d=n.__iterator(l,f),h=0,p=0;return new at(function(){for(;h++<e;)d.next();if(++p>c)return kt();var y=d.next();return i||l===Er||y.done?y:l===_c?At(l,p-1,void 0,y):At(l,p-1,y.value[1],y)})},s}function F7(n,t,o){var i=ln(n);return i.__iterateUncached=function(r,e){var a=this;if(e)return this.cacheResult().__iterate(r,e);var u=0;return n.__iterate(function(c,s,l){return t.call(o,c,s,l)&&++u&&r(c,s,a)}),u},i.__iteratorUncached=function(r,e){var a=this;if(e)return this.cacheResult().__iterator(r,e);var u=n.__iterator(Rr,e),c=!0;return new at(function(){if(!c)return kt();var s=u.next();if(s.done)return s;var l=s.value,f=l[0],d=l[1];return t.call(o,d,f,a)?r===Rr?s:At(r,f,d,s):(c=!1,kt())})},i}function ix(n,t,o,i){var r=ln(n);return r.__iterateUncached=function(e,a){var u=this;if(a)return this.cacheResult().__iterate(e,a);var c=!0,s=0;return n.__iterate(function(l,f,d){if(!(c&&(c=t.call(o,l,f,d))))return s++,e(l,i?f:s-1,u)}),s},r.__iteratorUncached=function(e,a){var u=this;if(a)return this.cacheResult().__iterator(e,a);var c=n.__iterator(Rr,a),s=!0,l=0;return new at(function(){var f,d,h;do{if(f=c.next(),f.done)return i||e===Er?f:e===_c?At(e,l++,void 0,f):At(e,l++,f.value[1],f);var p=f.value;d=p[0],h=p[1],s&&(s=t.call(o,h,d,u))}while(s);return e===Rr?f:At(e,d,h,f)})},r}var E7=(function(n){function t(o){this._wrappedIterables=o.flatMap(function(i){return i._wrappedIterables?i._wrappedIterables:[i]}),this.size=this._wrappedIterables.reduce(function(i,r){if(i!==void 0){var e=r.size;if(e!==void 0)return i+e}},0),this[yb]=this._wrappedIterables[0][yb],this[hb]=this._wrappedIterables[0][hb],this[qn]=this._wrappedIterables[0][qn]}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(i,r){if(this._wrappedIterables.length!==0){if(r)return this.cacheResult().__iterate(i,r);for(var e=0,a=Tt(this),u=a?Rr:Er,c=this._wrappedIterables[e].__iterator(u,r),s=!0,l=0;s;){for(var f=c.next();f.done;){if(e++,e===this._wrappedIterables.length)return l;c=this._wrappedIterables[e].__iterator(u,r),f=c.next()}var d=a?i(f.value[1],f.value[0],this):i(f.value,l,this);s=d!==!1,l++}return l}},t.prototype.__iteratorUncached=function(i,r){var e=this;if(this._wrappedIterables.length===0)return new at(kt);if(r)return this.cacheResult().__iterator(i,r);var a=0,u=this._wrappedIterables[a].__iterator(i,r);return new at(function(){for(var c=u.next();c.done;){if(a++,a===e._wrappedIterables.length)return c;u=e._wrappedIterables[a].__iterator(i,r),c=u.next()}return c})},t})(er);function R7(n,t){var o=Tt(n),i=[n].concat(t).map(function(e){return gr(e)?o&&(e=qr(e)):e=o?Zv(e):WL(Array.isArray(e)?e:[e]),e}).filter(function(e){return e.size!==0});if(i.length===0)return n;if(i.length===1){var r=i[0];if(r===n||o&&Tt(r)||_r(n)&&_r(r))return r}return new E7(i)}function ax(n,t,o){var i=ln(n);return i.__iterateUncached=function(r,e){if(e)return this.cacheResult().__iterate(r,e);var a=0,u=!1;function c(s,l){s.__iterate(function(f,d){return(!t||l<t)&&gr(f)?c(f,l+1):(a++,r(f,o?d:a-1,i)===!1&&(u=!0)),!u},e)}return c(n,0),a},i.__iteratorUncached=function(r,e){if(e)return this.cacheResult().__iterator(r,e);var a=n.__iterator(r,e),u=[],c=0;return new at(function(){for(;a;){var s=a.next();if(s.done!==!1){a=u.pop();continue}var l=s.value;if(r===Rr&&(l=l[1]),(!t||u.length<t)&&gr(l))u.push(a),a=l.__iterator(r,e);else return o?s:At(r,c++,l,s)}return kt()})},i}function j7(n,t,o){var i=rT(n);return n.toSeq().map(function(r,e){return i(t.call(o,r,e,n))}).flatten(!0)}function D7(n,t){var o=ln(n);return o.size=n.size&&n.size*2-1,o.__iterateUncached=function(i,r){var e=this,a=0;return n.__iterate(function(u){return(!a||i(t,a++,e)!==!1)&&i(u,a++,e)!==!1},r),a},o.__iteratorUncached=function(i,r){var e=n.__iterator(Er,r),a=0,u;return new at(function(){return(!u||a%2)&&(u=e.next(),u.done)?u:a%2?At(i,a++,t):At(i,a++,u.value,u)})},o}function ic(n,t,o){t||(t=ox);var i=Tt(n),r=0,e=n.toSeq().map(function(a,u){return[u,a,r++,o?o(a,u,n):a]}).valueSeq().toArray();return e.sort(function(a,u){return t(a[3],u[3])||a[2]-u[2]}).forEach(i?function(a,u){e[u].length=2}:function(a,u){e[u]=a[1]}),i?Qn(e):_r(n)?Cr(e):bc(e)}function Dm(n,t,o){if(t||(t=ox),o){var i=n.toSeq().map(function(r,e){return[r,o(r,e,n)]}).reduce(function(r,e){return EO(t,r[1],e[1])?e:r});return i&&i[0]}return n.reduce(function(r,e){return EO(t,r,e)?e:r})}function EO(n,t,o){var i=n(o,t);return i===0&&o!==t&&(o==null||o!==o)||i>0}function Pm(n,t,o,i){var r=ln(n),e=new nc(o).map(function(a){return a.size});return r.size=i?e.max():e.min(),r.__iterate=function(a,u){for(var c=this.__iterator(Er,u),s,l=0;!(s=c.next()).done&&a(s.value,l++,this)!==!1;);return l},r.__iteratorUncached=function(a,u){var c=o.map(function(f){return f=zt(f),bv(u?f.reverse():f)}),s=0,l=!1;return new at(function(){var f;return l||(f=c.map(function(d){return d.next()}),l=i?f.every(function(d){return d.done}):f.some(function(d){return d.done})),l?kt():At(a,s++,t.apply(null,f.map(function(d){return d.value})))})},r}function mt(n,t){return n===t?n:Ab(n)?t:n.constructor(t)}function RO(n){if(n!==Object(n))throw new TypeError("Expected [K, V] tuple: "+n)}function rT(n){return Tt(n)?qr:_r(n)?Ps:yc}function ln(n){return Object.create((Tt(n)?Qn:_r(n)?Cr:bc).prototype)}function nT(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):er.prototype.cacheResult.call(this)}function ox(n,t){return n===void 0&&t===void 0?0:n===void 0?1:t===void 0?-1:n>t?1:n<t?-1:0}function wv(n){return!!(n&&typeof n.equals=="function"&&typeof n.hashCode=="function")}function Xt(n,t){if(n===t||n!==n&&t!==t)return!0;if(!n||!t)return!1;if(typeof n.valueOf=="function"&&typeof t.valueOf=="function"){if(n=n.valueOf(),t=t.valueOf(),n===t||n!==n&&t!==t)return!0;if(!n||!t)return!1}return!!(wv(n)&&wv(t)&&n.equals(t))}function iT(n,t,o,i){return Ms(n,[t],o,i)}function ux(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return cx(this,n)}function sx(n){for(var t=[],o=arguments.length-1;o-- >0;)t[o]=arguments[o+1];if(typeof n!="function")throw new TypeError("Invalid merger function: "+n);return cx(this,t,n)}function cx(n,t,o){for(var i=[],r=0;r<t.length;r++){var e=qr(t[r]);e.size!==0&&i.push(e)}return i.length===0?n:n.toSeq().size===0&&!n.__ownerID&&i.length===1?Cn(n)?n:n.constructor(i[0]):n.withMutations(function(a){for(var u=o?function(s,l){iT(a,l,it,function(f){return f===it?s:o(f,s,l)})}:function(s,l){a.set(l,s)},c=0;c<i.length;c++)i[c].forEach(u)})}var P7=Object.prototype.toString;function aT(n){if(!n||typeof n!="object"||P7.call(n)!=="[object Object]")return!1;var t=Object.getPrototypeOf(n);if(t===null)return!0;for(var o=t,i=Object.getPrototypeOf(t);i!==null;)o=i,i=Object.getPrototypeOf(o);return o===t}function Bn(n){return typeof n=="object"&&(Br(n)||Array.isArray(n)||aT(n))}function un(n,t){t=t||0;for(var o=Math.max(0,n.length-t),i=new Array(o),r=0;r<o;r++)i[r]=n[r+t];return i}function _b(n){if(Array.isArray(n))return un(n);var t={};for(var o in n)mc.call(n,o)&&(t[o]=n[o]);return t}function N7(n){for(var t=[],o=arguments.length-1;o-- >0;)t[o]=arguments[o+1];return Wg(n,t)}function M7(n,t){for(var o=[],i=arguments.length-2;i-- >0;)o[i]=arguments[i+2];return Wg(t,o,n)}function I7(n){for(var t=[],o=arguments.length-1;o-- >0;)t[o]=arguments[o+1];return Kg(n,t)}function L7(n,t){for(var o=[],i=arguments.length-2;i-- >0;)o[i]=arguments[i+2];return Kg(t,o,n)}function Kg(n,t,o){return Wg(n,t,x7(o))}function Wg(n,t,o){if(!Bn(n))throw new TypeError("Cannot merge into non-data-structure value: "+n);if(Br(n))return typeof o=="function"&&n.mergeWith?n.mergeWith.apply(n,[o].concat(t)):n.merge?n.merge.apply(n,t):n.concat.apply(n,t);for(var i=Array.isArray(n),r=n,e=i?Ps:qr,a=i?function(c){r===n&&(r=_b(r)),r.push(c)}:function(c,s){var l=mc.call(r,s),f=l&&o?o(r[s],c,s):c;(!l||f!==r[s])&&(r===n&&(r=_b(r)),r[s]=f)},u=0;u<t.length;u++)e(t[u]).forEach(a);return r}function x7(n){function t(o,i,r){return Bn(o)&&Bn(i)&&q7(o,i)?Wg(o,[i],t):n?n(o,i,r):i}return t}function q7(n,t){var o=er(n),i=er(t);return _r(o)===_r(i)&&Tt(o)===Tt(i)}function lx(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return Kg(this,n)}function fx(n){for(var t=[],o=arguments.length-1;o-- >0;)t[o]=arguments[o+1];return Kg(this,t,n)}function oT(n){for(var t=[],o=arguments.length-1;o-- >0;)t[o]=arguments[o+1];return Ms(this,n,sn(),function(i){return Kg(i,t)})}function uT(n){for(var t=[],o=arguments.length-1;o-- >0;)t[o]=arguments[o+1];return Ms(this,n,sn(),function(i){return Wg(i,t)})}function dx(n,t,o){return Ms(n,t,it,function(){return o})}function sT(n,t){return dx(this,n,t)}function cT(n,t,o){return arguments.length===1?n(this):iT(this,n,t,o)}function lT(n,t,o){return Ms(this,n,t,o)}function fT(){return this.__altered}function Yg(n){var t=this.asMutable();return n(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}var px="@@__IMMUTABLE_MAP__@@";function Rb(n){return!!(n&&n[px])}function Mg(n,t){if(!n)throw new Error(t)}function wr(n){Mg(n!==1/0,"Cannot perform this action with an infinite size.")}var Ns=(function(n){function t(o){return o==null?sn():Rb(o)&&!Jr(o)?o:sn().withMutations(function(i){var r=n(o);wr(r.size),r.forEach(function(e,a){return i.set(a,e)})})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(i,r){return this._root?this._root.get(0,void 0,i,r):r},t.prototype.set=function(i,r){return PO(this,i,r)},t.prototype.remove=function(i){return PO(this,i,it)},t.prototype.deleteAll=function(i){var r=zt(i);return r.size===0?this:this.withMutations(function(e){r.forEach(function(a){return e.remove(a)})})},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):sn()},t.prototype.sort=function(i){return cn(ic(this,i))},t.prototype.sortBy=function(i,r){return cn(ic(this,r,i))},t.prototype.map=function(i,r){var e=this;return this.withMutations(function(a){a.forEach(function(u,c){a.set(c,i.call(r,u,c,e))})})},t.prototype.__iterator=function(i,r){return new B7(this,i,r)},t.prototype.__iterate=function(i,r){var e=this,a=0;return this._root&&this._root.iterate(function(u){return a++,i(u[1],u[0],e)},r),a},t.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?dT(this.size,this._root,i,this.__hash):this.size===0?sn():(this.__ownerID=i,this.__altered=!1,this)},t})(qr);Ns.isMap=Rb;var Ft=Ns.prototype;Ft[px]=!0;Ft[Xg]=Ft.remove;Ft.removeAll=Ft.deleteAll;Ft.setIn=sT;Ft.removeIn=Ft.deleteIn=_T;Ft.update=cT;Ft.updateIn=lT;Ft.merge=Ft.concat=ux;Ft.mergeWith=sx;Ft.mergeDeep=lx;Ft.mergeDeepWith=fx;Ft.mergeIn=uT;Ft.mergeDeepIn=oT;Ft.withMutations=Yg;Ft.wasAltered=fT;Ft.asImmutable=Hg;Ft["@@transducer/init"]=Ft.asMutable=Jg;Ft["@@transducer/step"]=function(n,t){return n.set(t[0],t[1])};Ft["@@transducer/result"]=function(n){return n.asImmutable()};var xg=function(t,o){this.ownerID=t,this.entries=o};xg.prototype.get=function(t,o,i,r){for(var e=this.entries,a=0,u=e.length;a<u;a++)if(Xt(i,e[a][0]))return e[a][1];return r};xg.prototype.update=function(t,o,i,r,e,a,u){for(var c=e===it,s=this.entries,l=0,f=s.length;l<f&&!Xt(r,s[l][0]);l++);var d=l<f;if(d?s[l][1]===e:c)return this;if(Ir(u),(c||!d)&&Ir(a),!(c&&s.length===1)){if(!d&&!c&&s.length>=X7)return C7(t,s,r,e);var h=t&&t===this.ownerID,p=h?s:un(s);return d?c?l===f-1?p.pop():p[l]=p.pop():p[l]=[r,e]:p.push([r,e]),h?(this.entries=p,this):new xg(t,p)}};var ac=function(t,o,i){this.ownerID=t,this.bitmap=o,this.nodes=i};ac.prototype.get=function(t,o,i,r){o===void 0&&(o=hr(i));var e=1<<((t===0?o:o>>>t)&sr),a=this.bitmap;return(a&e)===0?r:this.nodes[hx(a&e-1)].get(t+bt,o,i,r)};ac.prototype.update=function(t,o,i,r,e,a,u){i===void 0&&(i=hr(r));var c=(o===0?i:i>>>o)&sr,s=1<<c,l=this.bitmap,f=(l&s)!==0;if(!f&&e===it)return this;var d=hx(l&s-1),h=this.nodes,p=f?h[d]:void 0,y=pT(p,t,o+bt,i,r,e,a,u);if(y===p)return this;if(!f&&y&&h.length>=z7)return U7(t,h,l,c,y);if(f&&!y&&h.length===2&&NO(h[d^1]))return h[d^1];if(f&&y&&h.length===1&&NO(y))return y;var b=t&&t===this.ownerID,_=f?y?l:l^s:l|s,T=f?y?yx(h,d,y,b):G7(h,d,b):V7(h,d,y,b);return b?(this.bitmap=_,this.nodes=T,this):new ac(t,_,T)};var qg=function(t,o,i){this.ownerID=t,this.count=o,this.nodes=i};qg.prototype.get=function(t,o,i,r){o===void 0&&(o=hr(i));var e=(t===0?o:o>>>t)&sr,a=this.nodes[e];return a?a.get(t+bt,o,i,r):r};qg.prototype.update=function(t,o,i,r,e,a,u){i===void 0&&(i=hr(r));var c=(o===0?i:i>>>o)&sr,s=e===it,l=this.nodes,f=l[c];if(s&&!f)return this;var d=pT(f,t,o+bt,i,r,e,a,u);if(d===f)return this;var h=this.count;if(!f)h++;else if(!d&&(h--,h<$7))return Q7(t,l,h,c);var p=t&&t===this.ownerID,y=yx(l,c,d,p);return p?(this.count=h,this.nodes=y,this):new qg(t,h,y)};var oc=function(t,o,i){this.ownerID=t,this.keyHash=o,this.entries=i};oc.prototype.get=function(t,o,i,r){for(var e=this.entries,a=0,u=e.length;a<u;a++)if(Xt(i,e[a][0]))return e[a][1];return r};oc.prototype.update=function(t,o,i,r,e,a,u){i===void 0&&(i=hr(r));var c=e===it;if(i!==this.keyHash)return c?this:(Ir(u),Ir(a),hT(this,t,o,i,[r,e]));for(var s=this.entries,l=0,f=s.length;l<f&&!Xt(r,s[l][0]);l++);var d=l<f;if(d?s[l][1]===e:c)return this;if(Ir(u),(c||!d)&&Ir(a),c&&f===2)return new On(t,this.keyHash,s[l^1]);var h=t&&t===this.ownerID,p=h?s:un(s);return d?c?l===f-1?p.pop():p[l]=p.pop():p[l]=[r,e]:p.push([r,e]),h?(this.entries=p,this):new oc(t,this.keyHash,p)};var On=function(t,o,i){this.ownerID=t,this.keyHash=o,this.entry=i};On.prototype.get=function(t,o,i,r){return Xt(i,this.entry[0])?this.entry[1]:r};On.prototype.update=function(t,o,i,r,e,a,u){var c=e===it,s=Xt(r,this.entry[0]);if(s?e===this.entry[1]:c)return this;if(Ir(u),c){Ir(a);return}return s?t&&t===this.ownerID?(this.entry[1]=e,this):new On(t,this.keyHash,[r,e]):(Ir(a),hT(this,t,o,hr(r),[r,e]))};xg.prototype.iterate=oc.prototype.iterate=function(n,t){for(var o=this.entries,i=0,r=o.length-1;i<=r;i++)if(n(o[t?r-i:i])===!1)return!1};ac.prototype.iterate=qg.prototype.iterate=function(n,t){for(var o=this.nodes,i=0,r=o.length-1;i<=r;i++){var e=o[t?r-i:i];if(e&&e.iterate(n,t)===!1)return!1}};On.prototype.iterate=function(n,t){return n(this.entry)};var B7=(function(n){function t(o,i,r){this._type=i,this._reverse=r,this._stack=o._root&&jO(o._root)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.next=function(){for(var i=this._type,r=this._stack;r;){var e=r.node,a=r.index++,u=void 0;if(e.entry){if(a===0)return N0(i,e.entry)}else if(e.entries){if(u=e.entries.length-1,a<=u)return N0(i,e.entries[this._reverse?u-a:a])}else if(u=e.nodes.length-1,a<=u){var c=e.nodes[this._reverse?u-a:a];if(c){if(c.entry)return N0(i,c.entry);r=this._stack=jO(c,r)}continue}r=this._stack=this._stack.__prev}return kt()},t})(at);function N0(n,t){return At(n,t[0],t[1])}function jO(n,t){return{node:n,index:0,__prev:t}}function dT(n,t,o,i){var r=Object.create(Ft);return r.size=n,r._root=t,r.__ownerID=o,r.__hash=i,r.__altered=!1,r}var DO;function sn(){return DO||(DO=dT(0))}function PO(n,t,o){var i,r;if(n._root){var e=vv(),a=vv();if(i=pT(n._root,n.__ownerID,0,void 0,t,o,e,a),!a.value)return n;r=n.size+(e.value?o===it?-1:1:0)}else{if(o===it)return n;r=1,i=new xg(n.__ownerID,[[t,o]])}return n.__ownerID?(n.size=r,n._root=i,n.__hash=void 0,n.__altered=!0,n):i?dT(r,i):sn()}function pT(n,t,o,i,r,e,a,u){return n?n.update(t,o,i,r,e,a,u):e===it?n:(Ir(u),Ir(a),new On(t,i,[r,e]))}function NO(n){return n.constructor===On||n.constructor===oc}function hT(n,t,o,i,r){if(n.keyHash===i)return new oc(t,i,[n.entry,r]);var e=(o===0?n.keyHash:n.keyHash>>>o)&sr,a=(o===0?i:i>>>o)&sr,u,c=e===a?[hT(n,t,o+bt,i,r)]:(u=new On(t,i,r),e<a?[n,u]:[u,n]);return new ac(t,1<<e|1<<a,c)}function C7(n,t,o,i){n||(n=new Jv);for(var r=new On(n,hr(o),[o,i]),e=0;e<t.length;e++){var a=t[e];r=r.update(n,0,void 0,a[0],a[1])}return r}function Q7(n,t,o,i){for(var r=0,e=0,a=new Array(o),u=0,c=1,s=t.length;u<s;u++,c<<=1){var l=t[u];l!==void 0&&u!==i&&(r|=c,a[e++]=l)}return new ac(n,r,a)}function U7(n,t,o,i,r){for(var e=0,a=new Array(Fr),u=0;o!==0;u++,o>>>=1)a[u]=o&1?t[e++]:void 0;return a[i]=r,new qg(n,e+1,a)}function hx(n){return n-=n>>1&1431655765,n=(n&858993459)+(n>>2&858993459),n=n+(n>>4)&252645135,n+=n>>8,n+=n>>16,n&127}function yx(n,t,o,i){var r=i?n:un(n);return r[t]=o,r}function V7(n,t,o,i){var r=n.length+1;if(i&&t+1===r)return n[t]=o,n;for(var e=new Array(r),a=0,u=0;u<r;u++)u===t?(e[u]=o,a=-1):e[u]=n[u+a];return e}function G7(n,t,o){var i=n.length-1;if(o&&t===i)return n.pop(),n;for(var r=new Array(i),e=0,a=0;a<i;a++)a===t&&(e=1),r[a]=n[a+e];return r}var X7=Fr/4,z7=Fr/2,$7=Fr/4;function _x(n){if(Kv(n)&&typeof n!="string")return n;if(Jr(n))return n.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+n)}function Bg(n){try{return typeof n=="string"?JSON.stringify(n):String(n)}catch{return JSON.stringify(n)}}function gx(n,t){return Br(n)?n.has(t):Bn(n)&&mc.call(n,t)}function yT(n,t,o){return Br(n)?n.get(t,o):gx(n,t)?typeof n.get=="function"?n.get(t):n[t]:o}function mx(n,t){if(!Bn(n))throw new TypeError("Cannot update non-data-structure value: "+n);if(Br(n)){if(!n.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+n);return n.remove(t)}if(!mc.call(n,t))return n;var o=_b(n);return Array.isArray(o)?o.splice(t,1):delete o[t],o}function bx(n,t,o){if(!Bn(n))throw new TypeError("Cannot update non-data-structure value: "+n);if(Br(n)){if(!n.set)throw new TypeError("Cannot update immutable value without .set() method: "+n);return n.set(t,o)}if(mc.call(n,t)&&o===n[t])return n;var i=_b(n);return i[t]=o,i}function Ms(n,t,o,i){i||(i=o,o=void 0);var r=vx(Br(n),n,_x(t),0,o,i);return r===it?o:r}function vx(n,t,o,i,r,e){var a=t===it;if(i===o.length){var u=a?r:t,c=e(u);return c===u?t:c}if(!a&&!Bn(t))throw new TypeError("Cannot update within non-data-structure value in path ["+Array.from(o).slice(0,i).map(Bg)+"]: "+t);var s=o[i],l=a?it:yT(t,s,it),f=vx(l===it?n:Br(l),l,o,i+1,r,e);return f===l?t:f===it?mx(t,s):bx(a?n?sn():{}:t,s,f)}function Tx(n,t){return Ms(n,t,function(){return it})}function _T(n){return Tx(this,n)}var Ox="@@__IMMUTABLE_LIST__@@";function gT(n){return!!(n&&n[Ox])}var Zg=(function(n){function t(o){var i=ab();if(o==null)return i;if(gT(o))return o;var r=n(o),e=r.size;return e===0?i:(wr(e),e>0&&e<Fr?Cg(0,e,bt,null,new Ln(r.toArray())):i.withMutations(function(a){a.setSize(e),r.forEach(function(u,c){return a.set(c,u)})}))}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(i,r){if(i=xn(this,i),i>=0&&i<this.size){i+=this._origin;var e=Sx(this,i);return e&&e.array[i&sr]}return r},t.prototype.set=function(i,r){return H7(this,i,r)},t.prototype.remove=function(i){return this.has(i)?i===0?this.shift():i===this.size-1?this.pop():this.splice(i,1):this},t.prototype.insert=function(i,r){return this.splice(i,0,r)},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=bt,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):ab()},t.prototype.push=function(){var i=arguments,r=this.size;return this.withMutations(function(e){In(e,0,r+i.length);for(var a=0;a<i.length;a++)e.set(r+a,i[a])})},t.prototype.pop=function(){return In(this,0,-1)},t.prototype.unshift=function(){var i=arguments;return this.withMutations(function(r){In(r,-i.length);for(var e=0;e<i.length;e++)r.set(e,i[e])})},t.prototype.shift=function(){return In(this,1)},t.prototype.shuffle=function(i){return i===void 0&&(i=Math.random),this.withMutations(function(r){for(var e=r.size,a,u;e;)a=Math.floor(i()*e--),u=r.get(a),r.set(a,r.get(e)),r.set(e,u)})},t.prototype.concat=function(){for(var i=arguments,r=[],e=0;e<arguments.length;e++){var a=i[e],u=n(typeof a!="string"&&Hv(a)?a:[a]);u.size!==0&&r.push(u)}return r.length===0?this:this.size===0&&!this.__ownerID&&r.length===1?this.constructor(r[0]):this.withMutations(function(c){r.forEach(function(s){return s.forEach(function(l){return c.push(l)})})})},t.prototype.setSize=function(i){return In(this,0,i)},t.prototype.map=function(i,r){var e=this;return this.withMutations(function(a){for(var u=0;u<e.size;u++)a.set(u,i.call(r,a.get(u),u,e))})},t.prototype.slice=function(i,r){var e=this.size;return zg(i,r,e)?this:In(this,gc(i,e),$g(r,e))},t.prototype.__iterator=function(i,r){var e=r?this.size:0,a=MO(this,r);return new at(function(){var u=a();return u===Ig?kt():At(i,r?--e:e++,u)})},t.prototype.__iterate=function(i,r){for(var e=r?this.size:0,a=MO(this,r),u;(u=a())!==Ig&&i(u,r?--e:e++,this)!==!1;);return e},t.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?Cg(this._origin,this._capacity,this._level,this._root,this._tail,i,this.__hash):this.size===0?ab():(this.__ownerID=i,this.__altered=!1,this)},t})(Ps);Zg.isList=gT;var Ct=Zg.prototype;Ct[Ox]=!0;Ct[Xg]=Ct.remove;Ct.merge=Ct.concat;Ct.setIn=sT;Ct.deleteIn=Ct.removeIn=_T;Ct.update=cT;Ct.updateIn=lT;Ct.mergeIn=uT;Ct.mergeDeepIn=oT;Ct.withMutations=Yg;Ct.wasAltered=fT;Ct.asImmutable=Hg;Ct["@@transducer/init"]=Ct.asMutable=Jg;Ct["@@transducer/step"]=function(n,t){return n.push(t)};Ct["@@transducer/result"]=function(n){return n.asImmutable()};var Ln=function(t,o){this.array=t,this.ownerID=o};Ln.prototype.removeBefore=function(t,o,i){if((i&(1<<o+bt)-1)===0||this.array.length===0)return this;var r=i>>>o&sr;if(r>=this.array.length)return new Ln([],t);var e=r===0,a;if(o>0){var u=this.array[r];if(a=u&&u.removeBefore(t,o-bt,i),a===u&&e)return this}if(e&&!a)return this;var c=uc(this,t);if(!e)for(var s=0;s<r;s++)c.array[s]=void 0;return a&&(c.array[r]=a),c};Ln.prototype.removeAfter=function(t,o,i){if(i===(o?1<<o+bt:Fr)||this.array.length===0)return this;var r=i-1>>>o&sr;if(r>=this.array.length)return this;var e;if(o>0){var a=this.array[r];if(e=a&&a.removeAfter(t,o-bt,i),e===a&&r===this.array.length-1)return this}var u=uc(this,t);return u.array.splice(r+1),e&&(u.array[r]=e),u};var Ig={};function MO(n,t){var o=n._origin,i=n._capacity,r=Qg(i),e=n._tail;return a(n._root,n._level,0);function a(s,l,f){return l===0?u(s,f):c(s,l,f)}function u(s,l){var f=l===r?e&&e.array:s&&s.array,d=l>o?0:o-l,h=i-l;return h>Fr&&(h=Fr),function(){if(d===h)return Ig;var p=t?--h:d++;return f&&f[p]}}function c(s,l,f){var d,h=s&&s.array,p=f>o?0:o-f>>l,y=(i-f>>l)+1;return y>Fr&&(y=Fr),function(){for(;;){if(d){var b=d();if(b!==Ig)return b;d=null}if(p===y)return Ig;var _=t?--y:p++;d=a(h&&h[_],l-bt,f+(_<<l))}}}}function Cg(n,t,o,i,r,e,a){var u=Object.create(Ct);return u.size=t-n,u._origin=n,u._capacity=t,u._level=o,u._root=i,u._tail=r,u.__ownerID=e,u.__hash=a,u.__altered=!1,u}function ab(){return Cg(0,0,bt)}function H7(n,t,o){if(t=xn(n,t),t!==t)return n;if(t>=n.size||t<0)return n.withMutations(function(a){t<0?In(a,t).set(0,o):In(a,0,t+1).set(t,o)});t+=n._origin;var i=n._tail,r=n._root,e=vv();return t>=Qg(n._capacity)?i=Av(i,n.__ownerID,0,t,o,e):r=Av(r,n.__ownerID,n._level,t,o,e),e.value?n.__ownerID?(n._root=r,n._tail=i,n.__hash=void 0,n.__altered=!0,n):Cg(n._origin,n._capacity,n._level,r,i):n}function Av(n,t,o,i,r,e){var a=i>>>o&sr,u=n&&a<n.array.length;if(!u&&r===void 0)return n;var c;if(o>0){var s=n&&n.array[a],l=Av(s,t,o-bt,i,r,e);return l===s?n:(c=uc(n,t),c.array[a]=l,c)}return u&&n.array[a]===r?n:(e&&Ir(e),c=uc(n,t),r===void 0&&a===c.array.length-1?c.array.pop():c.array[a]=r,c)}function uc(n,t){return t&&n&&t===n.ownerID?n:new Ln(n?n.array.slice():[],t)}function Sx(n,t){if(t>=Qg(n._capacity))return n._tail;if(t<1<<n._level+bt){for(var o=n._root,i=n._level;o&&i>0;)o=o.array[t>>>i&sr],i-=bt;return o}}function In(n,t,o){t!==void 0&&(t|=0),o!==void 0&&(o|=0);var i=n.__ownerID||new Jv,r=n._origin,e=n._capacity,a=r+t,u=o===void 0?e:o<0?e+o:r+o;if(a===r&&u===e)return n;if(a>=u)return n.clear();for(var c=n._level,s=n._root,l=0;a+l<0;)s=new Ln(s&&s.array.length?[void 0,s]:[],i),c+=bt,l+=1<<c;l&&(a+=l,r+=l,u+=l,e+=l);for(var f=Qg(e),d=Qg(u);d>=1<<c+bt;)s=new Ln(s&&s.array.length?[s]:[],i),c+=bt;var h=n._tail,p=d<f?Sx(n,u-1):d>f?new Ln([],i):h;if(h&&d>f&&a<e&&h.array.length){s=uc(s,i);for(var y=s,b=c;b>bt;b-=bt){var _=f>>>b&sr;y=y.array[_]=uc(y.array[_],i)}y.array[f>>>bt&sr]=h}if(u<e&&(p=p&&p.removeAfter(i,0,u)),a>=d)a-=d,u-=d,c=bt,s=null,p=p&&p.removeBefore(i,0,a);else if(a>r||d<f){for(l=0;s;){var T=a>>>c&sr;if(T!==d>>>c&sr)break;T&&(l+=(1<<c)*T),c-=bt,s=s.array[T]}s&&a>r&&(s=s.removeBefore(i,c,a-l)),s&&d<f&&(s=s.removeAfter(i,c,d-l)),l&&(a-=l,u-=l)}return n.__ownerID?(n.size=u-a,n._origin=a,n._capacity=u,n._level=c,n._root=s,n._tail=p,n.__hash=void 0,n.__altered=!0,n):Cg(a,u,c,s,p)}function Qg(n){return n<Fr?0:n-1>>>bt<<bt}function mT(n){return Rb(n)&&Jr(n)}var cn=(function(n){function t(o){return o==null?Ag():mT(o)?o:Ag().withMutations(function(i){var r=qr(o);wr(r.size),r.forEach(function(e,a){return i.set(a,e)})})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},t.prototype.get=function(i,r){var e=this._map.get(i);return e!==void 0?this._list.get(e)[1]:r},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):Ag()},t.prototype.set=function(i,r){return LO(this,i,r)},t.prototype.remove=function(i){return LO(this,i,it)},t.prototype.__iterate=function(i,r){var e=this;return this._list.__iterate(function(a){return a&&i(a[1],a[0],e)},r)},t.prototype.__iterator=function(i,r){return this._list.fromEntrySeq().__iterator(i,r)},t.prototype.__ensureOwner=function(i){if(i===this.__ownerID)return this;var r=this._map.__ensureOwner(i),e=this._list.__ensureOwner(i);return i?bT(r,e,i,this.__hash):this.size===0?Ag():(this.__ownerID=i,this.__altered=!1,this._map=r,this._list=e,this)},t})(Ns);cn.isOrderedMap=mT;cn.prototype[qn]=!0;cn.prototype[Xg]=cn.prototype.remove;function bT(n,t,o,i){var r=Object.create(cn.prototype);return r.size=n?n.size:0,r._map=n,r._list=t,r.__ownerID=o,r.__hash=i,r.__altered=!1,r}var IO;function Ag(){return IO||(IO=bT(sn(),ab()))}function LO(n,t,o){var i=n._map,r=n._list,e=i.get(t),a=e!==void 0,u,c;if(o===it){if(!a)return n;r.size>=Fr&&r.size>=i.size*2?(c=r.filter(function(s,l){return s!==void 0&&e!==l}),u=c.toKeyedSeq().map(function(s){return s[0]}).flip().toMap(),n.__ownerID&&(u.__ownerID=c.__ownerID=n.__ownerID)):(u=i.remove(t),c=e===r.size-1?r.pop():r.set(e,void 0))}else if(a){if(o===r.get(e)[1])return n;u=i,c=r.set(e,[t,o])}else u=i.set(t,r.size),c=r.set(r.size,[t,o]);return n.__ownerID?(n.size=u.size,n._map=u,n._list=c,n.__hash=void 0,n.__altered=!0,n):bT(u,c)}var wx="@@__IMMUTABLE_STACK__@@";function gb(n){return!!(n&&n[wx])}var jb=(function(n){function t(o){return o==null?Nm():gb(o)?o:Nm().pushAll(o)}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(i,r){var e=this._head;for(i=xn(this,i);e&&i--;)e=e.next;return e?e.value:r},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var i=arguments;if(arguments.length===0)return this;for(var r=this.size+arguments.length,e=this._head,a=arguments.length-1;a>=0;a--)e={value:i[a],next:e};return this.__ownerID?(this.size=r,this._head=e,this.__hash=void 0,this.__altered=!0,this):Fg(r,e)},t.prototype.pushAll=function(i){if(i=n(i),i.size===0)return this;if(this.size===0&&gb(i))return i;wr(i.size);var r=this.size,e=this._head;return i.__iterate(function(a){r++,e={value:a,next:e}},!0),this.__ownerID?(this.size=r,this._head=e,this.__hash=void 0,this.__altered=!0,this):Fg(r,e)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Nm()},t.prototype.slice=function(i,r){if(zg(i,r,this.size))return this;var e=gc(i,this.size),a=$g(r,this.size);if(a!==this.size)return n.prototype.slice.call(this,i,r);for(var u=this.size-e,c=this._head;e--;)c=c.next;return this.__ownerID?(this.size=u,this._head=c,this.__hash=void 0,this.__altered=!0,this):Fg(u,c)},t.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?Fg(this.size,this._head,i,this.__hash):this.size===0?Nm():(this.__ownerID=i,this.__altered=!1,this)},t.prototype.__iterate=function(i,r){var e=this;if(r)return new nc(this.toArray()).__iterate(function(c,s){return i(c,s,e)},r);for(var a=0,u=this._head;u&&i(u.value,a++,this)!==!1;)u=u.next;return a},t.prototype.__iterator=function(i,r){if(r)return new nc(this.toArray()).__iterator(i,r);var e=0,a=this._head;return new at(function(){if(a){var u=a.value;return a=a.next,At(i,e++,u)}return kt()})},t})(Ps);jb.isStack=gb;var cr=jb.prototype;cr[wx]=!0;cr.shift=cr.pop;cr.unshift=cr.push;cr.unshiftAll=cr.pushAll;cr.withMutations=Yg;cr.wasAltered=fT;cr.asImmutable=Hg;cr["@@transducer/init"]=cr.asMutable=Jg;cr["@@transducer/step"]=function(n,t){return n.unshift(t)};cr["@@transducer/result"]=function(n){return n.asImmutable()};function Fg(n,t,o,i){var r=Object.create(cr);return r.size=n,r._head=t,r.__ownerID=o,r.__hash=i,r.__altered=!1,r}var xO;function Nm(){return xO||(xO=Fg(0))}function qO(n,t,o,i,r,e){return wr(n.size),n.__iterate(function(a,u,c){r?(r=!1,o=a):o=t.call(i,o,a,u,c)},e),o}function J7(n,t){return t}function K7(n,t){return[t,n]}function M0(n){return function(){for(var t=[],o=arguments.length;o--;)t[o]=arguments[o];return!n.apply(this,t)}}function BO(n){return function(){for(var t=[],o=arguments.length;o--;)t[o]=arguments[o];return-n.apply(this,t)}}function CO(n,t){return n<t?1:n>t?-1:0}function vT(n,t){if(n===t)return!0;if(!gr(t)||n.size!==void 0&&t.size!==void 0&&n.size!==t.size||n.__hash!==void 0&&t.__hash!==void 0&&n.__hash!==t.__hash||Tt(n)!==Tt(t)||_r(n)!==_r(t)||Jr(n)!==Jr(t))return!1;if(n.size===0&&t.size===0)return!0;var o=!Ob(n);if(Jr(n)){var i=n.entries();return t.every(function(c,s){var l=i.next().value;return l&&Xt(l[1],c)&&(o||Xt(l[0],s))})&&i.next().done}var r=!1;if(n.size===void 0)if(t.size===void 0)typeof n.cacheResult=="function"&&n.cacheResult();else{r=!0;var e=n;n=t,t=e}var a=!0,u=t.__iterate(function(c,s){if(o?!n.has(c):r?!Xt(c,n.get(s,it)):!Xt(n.get(s,it),c))return a=!1,!1});return a&&n.size===u}var Ax=(function(n){function t(o,i,r){if(r===void 0&&(r=1),!(this instanceof t))return new t(o,i,r);if(Mg(r!==0,"Cannot step a Range by 0"),Mg(o!==void 0,"You must define a start value when using Range"),Mg(i!==void 0,"You must define an end value when using Range"),r=Math.abs(r),i<o&&(r=-r),this._start=o,this._end=i,this._step=r,this.size=Math.max(0,Math.ceil((i-o)/r-1)+1),this.size===0){if(I0)return I0;I0=this}}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},t.prototype.get=function(i,r){return this.has(i)?this._start+xn(this,i)*this._step:r},t.prototype.includes=function(i){var r=(i-this._start)/this._step;return r>=0&&r<this.size&&r===Math.floor(r)},t.prototype.slice=function(i,r){return zg(i,r,this.size)?this:(i=gc(i,this.size),r=$g(r,this.size),r<=i?new t(0,0):new t(this.get(i,this._end),this.get(r,this._end),this._step))},t.prototype.indexOf=function(i){var r=i-this._start;if(r%this._step===0){var e=r/this._step;if(e>=0&&e<this.size)return e}return-1},t.prototype.lastIndexOf=function(i){return this.indexOf(i)},t.prototype.__iterate=function(i,r){for(var e=this.size,a=this._step,u=r?this._start+(e-1)*a:this._start,c=0;c!==e&&i(u,r?e-++c:c++,this)!==!1;)u+=r?-a:a;return c},t.prototype.__iterator=function(i,r){var e=this.size,a=this._step,u=r?this._start+(e-1)*a:this._start,c=0;return new at(function(){if(c===e)return kt();var s=u;return u+=r?-a:a,At(i,r?e-++c:c++,s)})},t.prototype.equals=function(i){return i instanceof t?this._start===i._start&&this._end===i._end&&this._step===i._step:vT(this,i)},t})(Cr),I0,Fx="@@__IMMUTABLE_SET__@@";function Db(n){return!!(n&&n[Fx])}var kg=(function(n){function t(o){return o==null?Eg():Db(o)&&!Jr(o)?o:Eg().withMutations(function(i){var r=n(o);wr(r.size),r.forEach(function(e){return i.add(e)})})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(i){return this(qr(i).keySeq())},t.intersect=function(i){return i=zt(i).toArray(),i.length?Yt.intersect.apply(t(i.pop()),i):Eg()},t.union=function(i){return i=zt(i).toArray(),i.length?Yt.union.apply(t(i.pop()),i):Eg()},t.prototype.toString=function(){return this.__toString("Set {","}")},t.prototype.has=function(i){return this._map.has(i)},t.prototype.add=function(i){return Mm(this,this._map.set(i,i))},t.prototype.remove=function(i){return Mm(this,this._map.remove(i))},t.prototype.clear=function(){return Mm(this,this._map.clear())},t.prototype.map=function(i,r){var e=this,a=!1,u=Mm(this,this._map.mapEntries(function(c){var s=c[1],l=i.call(r,s,s,e);return l!==s&&(a=!0),[l,l]},r));return a?u:this},t.prototype.union=function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];return i=i.filter(function(e){return e.size!==0}),i.length===0?this:this.size===0&&!this.__ownerID&&i.length===1?this.constructor(i[0]):this.withMutations(function(e){for(var a=0;a<i.length;a++)typeof i[a]=="string"?e.add(i[a]):n(i[a]).forEach(function(u){return e.add(u)})})},t.prototype.intersect=function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];if(i.length===0)return this;i=i.map(function(a){return n(a)});var e=[];return this.forEach(function(a){i.every(function(u){return u.includes(a)})||e.push(a)}),this.withMutations(function(a){e.forEach(function(u){a.remove(u)})})},t.prototype.subtract=function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];if(i.length===0)return this;i=i.map(function(a){return n(a)});var e=[];return this.forEach(function(a){i.some(function(u){return u.includes(a)})&&e.push(a)}),this.withMutations(function(a){e.forEach(function(u){a.remove(u)})})},t.prototype.sort=function(i){return cc(ic(this,i))},t.prototype.sortBy=function(i,r){return cc(ic(this,r,i))},t.prototype.wasAltered=function(){return this._map.wasAltered()},t.prototype.__iterate=function(i,r){var e=this;return this._map.__iterate(function(a){return i(a,a,e)},r)},t.prototype.__iterator=function(i,r){return this._map.__iterator(i,r)},t.prototype.__ensureOwner=function(i){if(i===this.__ownerID)return this;var r=this._map.__ensureOwner(i);return i?this.__make(r,i):this.size===0?this.__empty():(this.__ownerID=i,this._map=r,this)},t})(yc);kg.isSet=Db;var Yt=kg.prototype;Yt[Fx]=!0;Yt[Xg]=Yt.remove;Yt.merge=Yt.concat=Yt.union;Yt.withMutations=Yg;Yt.asImmutable=Hg;Yt["@@transducer/init"]=Yt.asMutable=Jg;Yt["@@transducer/step"]=function(n,t){return n.add(t)};Yt["@@transducer/result"]=function(n){return n.asImmutable()};Yt.__empty=Eg;Yt.__make=Ex;function Mm(n,t){return n.__ownerID?(n.size=t.size,n._map=t,n):t===n._map?n:t.size===0?n.__empty():n.__make(t)}function Ex(n,t){var o=Object.create(Yt);return o.size=n?n.size:0,o._map=n,o.__ownerID=t,o}var QO;function Eg(){return QO||(QO=Ex(sn()))}function TT(n,t,o){for(var i=_x(t),r=0;r!==i.length;)if(n=yT(n,i[r++],it),n===it)return o;return n}function Rx(n,t){return TT(this,n,t)}function jx(n,t){return TT(n,t,it)!==it}function W7(n){return jx(this,n)}function Dx(){wr(this.size);var n={};return this.__iterate(function(t,o){n[o]=t}),n}function mb(n){if(!n||typeof n!="object")return n;if(!gr(n)){if(!Bn(n))return n;n=er(n)}if(Tt(n)){var t={};return n.__iterate(function(i,r){t[r]=mb(i)}),t}var o=[];return n.__iterate(function(i){o.push(mb(i))}),o}function Y7(n){if(n.size===1/0)return 0;var t=Jr(n),o=Tt(n),i=t?1:0;return n.__iterate(o?t?function(r,e){i=31*i+UO(hr(r),hr(e))|0}:function(r,e){i=i+UO(hr(r),hr(e))|0}:t?function(r){i=31*i+hr(r)|0}:function(r){i=i+hr(r)|0}),Z7(n.size,i)}function Z7(n,t){return t=Hc(t,3432918353),t=Hc(t<<15|t>>>-15,461845907),t=Hc(t<<13|t>>>-13,5),t=(t+3864292196|0)^n,t=Hc(t^t>>>16,2246822507),t=Hc(t^t>>>13,3266489909),t=Fb(t^t>>>16),t}function UO(n,t){return n^t+2654435769+(n<<6)+(n>>2)|0}function Is(n,t){var o=function(i){n.prototype[i]=t[i]};return Object.keys(t).forEach(o),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(o),n}zt.Iterator=at;Is(zt,{toArray:function(){wr(this.size);var t=new Array(this.size||0),o=Tt(this),i=0;return this.__iterate(function(r,e){t[i++]=o?[e,r]:r}),t},toIndexedSeq:function(){return new ZL(this)},toJS:function(){return mb(this)},toKeyedSeq:function(){return new Eb(this,!0)},toMap:function(){return Ns(this.toKeyedSeq())},toObject:Dx,toOrderedMap:function(){return cn(this.toKeyedSeq())},toOrderedSet:function(){return cc(Tt(this)?this.valueSeq():this)},toSet:function(){return kg(Tt(this)?this.valueSeq():this)},toSetSeq:function(){return new kL(this)},toSeq:function(){return _r(this)?this.toIndexedSeq():Tt(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return jb(Tt(this)?this.valueSeq():this)},toList:function(){return Zg(Tt(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,o){return this.size===0?t+o:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+o},concat:function(){for(var t=[],o=arguments.length;o--;)t[o]=arguments[o];return mt(this,R7(this,t))},includes:function(t){return this.some(function(o){return Xt(o,t)})},entries:function(){return this.__iterator(Rr)},every:function(t,o){wr(this.size);var i=!0;return this.__iterate(function(r,e,a){if(!t.call(o,r,e,a))return i=!1,!1}),i},filter:function(t,o){return mt(this,nx(this,t,o,!0))},partition:function(t,o){return A7(this,t,o)},find:function(t,o,i){var r=this.findEntry(t,o);return r?r[1]:i},forEach:function(t,o){return wr(this.size),this.__iterate(o?t.bind(o):t)},join:function(t){wr(this.size),t=t!==void 0?""+t:",";var o="",i=!0;return this.__iterate(function(r){i?i=!1:o+=t,o+=r!=null?r.toString():""}),o},keys:function(){return this.__iterator(_c)},map:function(t,o){return mt(this,rx(this,t,o))},reduce:function(t,o,i){return qO(this,t,o,i,arguments.length<2,!1)},reduceRight:function(t,o,i){return qO(this,t,o,i,arguments.length<2,!0)},reverse:function(){return mt(this,eT(this,!0))},slice:function(t,o){return mt(this,tT(this,t,o,!0))},some:function(t,o){wr(this.size);var i=!1;return this.__iterate(function(r,e,a){if(t.call(o,r,e,a))return i=!0,!1}),i},sort:function(t){return mt(this,ic(this,t))},values:function(){return this.__iterator(Er)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(t,o){return rc(t?this.toSeq().filter(t,o):this)},countBy:function(t,o){return S7(this,t,o)},equals:function(t){return vT(this,t)},entrySeq:function(){var t=this;if(t._cache)return new nc(t._cache);var o=t.toSeq().map(K7).toIndexedSeq();return o.fromEntrySeq=function(){return t.toSeq()},o},filterNot:function(t,o){return this.filter(M0(t),o)},findEntry:function(t,o,i){var r=i;return this.__iterate(function(e,a,u){if(t.call(o,e,a,u))return r=[a,e],!1}),r},findKey:function(t,o){var i=this.findEntry(t,o);return i&&i[0]},findLast:function(t,o,i){return this.toKeyedSeq().reverse().find(t,o,i)},findLastEntry:function(t,o,i){return this.toKeyedSeq().reverse().findEntry(t,o,i)},findLastKey:function(t,o){return this.toKeyedSeq().reverse().findKey(t,o)},first:function(t){return this.find(zL,null,t)},flatMap:function(t,o){return mt(this,j7(this,t,o))},flatten:function(t){return mt(this,ax(this,t,!0))},fromEntrySeq:function(){return new ex(this)},get:function(t,o){return this.find(function(i,r){return Xt(r,t)},void 0,o)},getIn:Rx,groupBy:function(t,o){return w7(this,t,o)},has:function(t){return this.get(t,it)!==it},hasIn:W7,isSubset:function(t){return t=typeof t.includes=="function"?t:zt(t),this.every(function(o){return t.includes(o)})},isSuperset:function(t){return t=typeof t.isSubset=="function"?t:zt(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(o){return Xt(o,t)})},keySeq:function(){return this.toSeq().map(J7).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Dm(this,t)},maxBy:function(t,o){return Dm(this,o,t)},min:function(t){return Dm(this,t?BO(t):CO)},minBy:function(t,o){return Dm(this,o?BO(o):CO,t)},rest:function(){return this.slice(1)},skip:function(t){return t===0?this:this.slice(Math.max(0,t))},skipLast:function(t){return t===0?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,o){return mt(this,ix(this,t,o,!0))},skipUntil:function(t,o){return this.skipWhile(M0(t),o)},sortBy:function(t,o){return mt(this,ic(this,o,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,o){return mt(this,F7(this,t,o))},takeUntil:function(t,o){return this.takeWhile(M0(t),o)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Y7(this))}});var tr=zt.prototype;tr[GL]=!0;tr[Sb]=tr.values;tr.toJSON=tr.toArray;tr.__toStringMapper=Bg;tr.inspect=tr.toSource=function(){return this.toString()};tr.chain=tr.flatMap;tr.contains=tr.includes;Is(qr,{flip:function(){return mt(this,tx(this))},mapEntries:function(t,o){var i=this,r=0;return mt(this,this.toSeq().map(function(e,a){return t.call(o,[a,e],r++,i)}).fromEntrySeq())},mapKeys:function(t,o){var i=this;return mt(this,this.toSeq().flip().map(function(r,e){return t.call(o,r,e,i)}).flip())}});var em=qr.prototype;em[yb]=!0;em[Sb]=tr.entries;em.toJSON=Dx;em.__toStringMapper=function(n,t){return Bg(t)+": "+Bg(n)};Is(Ps,{toKeyedSeq:function(){return new Eb(this,!1)},filter:function(t,o){return mt(this,nx(this,t,o,!1))},findIndex:function(t,o){var i=this.findEntry(t,o);return i?i[0]:-1},indexOf:function(t){var o=this.keyOf(t);return o===void 0?-1:o},lastIndexOf:function(t){var o=this.lastKeyOf(t);return o===void 0?-1:o},reverse:function(){return mt(this,eT(this,!1))},slice:function(t,o){return mt(this,tT(this,t,o,!1))},splice:function(t,o){var i=arguments.length;if(o=Math.max(o||0,0),i===0||i===2&&!o)return this;t=gc(t,t<0?this.count():this.size);var r=this.slice(0,t);return mt(this,i===1?r:r.concat(un(arguments,2),this.slice(t+o)))},findLastIndex:function(t,o){var i=this.findLastEntry(t,o);return i?i[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return mt(this,ax(this,t,!1))},get:function(t,o){return t=xn(this,t),t<0||this.size===1/0||this.size!==void 0&&t>this.size?o:this.find(function(i,r){return r===t},void 0,o)},has:function(t){return t=xn(this,t),t>=0&&(this.size!==void 0?this.size===1/0||t<this.size:this.indexOf(t)!==-1)},interpose:function(t){return mt(this,D7(this,t))},interleave:function(){var t=[this].concat(un(arguments)),o=Pm(this.toSeq(),Cr.of,t),i=o.flatten(!0);return o.size&&(i.size=o.size*t.length),mt(this,i)},keySeq:function(){return Ax(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,o){return mt(this,ix(this,t,o,!1))},zip:function(){var t=[this].concat(un(arguments));return mt(this,Pm(this,VO,t))},zipAll:function(){var t=[this].concat(un(arguments));return mt(this,Pm(this,VO,t,!0))},zipWith:function(t){var o=un(arguments);return o[0]=this,mt(this,Pm(this,t,o))}});var vc=Ps.prototype;vc[hb]=!0;vc[qn]=!0;Is(yc,{get:function(t,o){return this.has(t)?t:o},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});var sc=yc.prototype;sc.has=tr.includes;sc.contains=sc.includes;sc.keys=sc.values;Is(Qn,em);Is(Cr,vc);Is(bc,sc);function VO(){return un(arguments)}function OT(n){return Db(n)&&Jr(n)}var cc=(function(n){function t(o){return o==null?Fv():OT(o)?o:Fv().withMutations(function(i){var r=yc(o);wr(r.size),r.forEach(function(e){return i.add(e)})})}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(i){return this(qr(i).keySeq())},t.prototype.toString=function(){return this.__toString("OrderedSet {","}")},t})(kg);cc.isOrderedSet=OT;var Ls=cc.prototype;Ls[qn]=!0;Ls.zip=vc.zip;Ls.zipWith=vc.zipWith;Ls.zipAll=vc.zipAll;Ls.__empty=Fv;Ls.__make=Px;function Px(n,t){var o=Object.create(Ls);return o.size=n?n.size:0,o._map=n,o.__ownerID=t,o}var GO;function Fv(){return GO||(GO=Px(Ag()))}var k7={LeftThenRight:-1,RightThenLeft:1};function eB(n){if(Cn(n))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(Br(n))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(n===null||typeof n!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var Gt=function(t,o){var i;eB(t);var r=function(u){var c=this;if(u instanceof r)return u;if(!(this instanceof r))return new r(u);if(!i){i=!0;var s=Object.keys(t),l=e._indices={};e._name=o,e._keys=s,e._defaultValues=t;for(var f=0;f<s.length;f++){var d=s[f];l[d]=f,e[d]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+wT(this)+' with property "'+d+'" since that property name is part of the Record API.'):tB(e,d)}}return this.__ownerID=void 0,this._values=Zg().withMutations(function(h){h.setSize(c._keys.length),qr(u).forEach(function(p,y){h.set(c._indices[y],p===c._defaultValues[y]?void 0:p)})}),this},e=r.prototype=Object.create(Ot);return e.constructor=r,o&&(r.displayName=o),r};Gt.prototype.toString=function(){for(var t=wT(this)+" { ",o=this._keys,i,r=0,e=o.length;r!==e;r++)i=o[r],t+=(r?", ":"")+i+": "+Bg(this.get(i));return t+" }"};Gt.prototype.equals=function(t){return this===t||Cn(t)&&lc(this).equals(lc(t))};Gt.prototype.hashCode=function(){return lc(this).hashCode()};Gt.prototype.has=function(t){return this._indices.hasOwnProperty(t)};Gt.prototype.get=function(t,o){if(!this.has(t))return o;var i=this._indices[t],r=this._values.get(i);return r===void 0?this._defaultValues[t]:r};Gt.prototype.set=function(t,o){if(this.has(t)){var i=this._values.set(this._indices[t],o===this._defaultValues[t]?void 0:o);if(i!==this._values&&!this.__ownerID)return ST(this,i)}return this};Gt.prototype.remove=function(t){return this.set(t)};Gt.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:ST(this,t)};Gt.prototype.wasAltered=function(){return this._values.wasAltered()};Gt.prototype.toSeq=function(){return lc(this)};Gt.prototype.toJS=function(){return mb(this)};Gt.prototype.entries=function(){return this.__iterator(Rr)};Gt.prototype.__iterator=function(t,o){return lc(this).__iterator(t,o)};Gt.prototype.__iterate=function(t,o){return lc(this).__iterate(t,o)};Gt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var o=this._values.__ensureOwner(t);return t?ST(this,o,t):(this.__ownerID=t,this._values=o,this)};Gt.isRecord=Cn;Gt.getDescriptiveName=wT;var Ot=Gt.prototype;Ot[JL]=!0;Ot[Xg]=Ot.remove;Ot.deleteIn=Ot.removeIn=_T;Ot.getIn=Rx;Ot.hasIn=tr.hasIn;Ot.merge=ux;Ot.mergeWith=sx;Ot.mergeIn=uT;Ot.mergeDeep=lx;Ot.mergeDeepWith=fx;Ot.mergeDeepIn=oT;Ot.setIn=sT;Ot.update=cT;Ot.updateIn=lT;Ot.withMutations=Yg;Ot.asMutable=Jg;Ot.asImmutable=Hg;Ot[Sb]=Ot.entries;Ot.toJSON=Ot.toObject=tr.toObject;Ot.inspect=Ot.toSource=function(){return this.toString()};function ST(n,t,o){var i=Object.create(Object.getPrototypeOf(n));return i._values=t,i.__ownerID=o,i}function wT(n){return n.constructor.displayName||n.constructor.name||"Record"}function lc(n){return Zv(n._keys.map(function(t){return[t,n.get(t)]}))}function tB(n,t){try{Object.defineProperty(n,t,{get:function(){return this.get(t)},set:function(o){Mg(this.__ownerID,"Cannot set on an immutable record."),this.set(t,o)}})}catch{}}var rB=(function(n){function t(o,i){if(!(this instanceof t))return new t(o,i);if(this._value=o,this.size=i===void 0?1/0:Math.max(0,i),this.size===0){if(L0)return L0;L0=this}}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},t.prototype.get=function(i,r){return this.has(i)?this._value:r},t.prototype.includes=function(i){return Xt(this._value,i)},t.prototype.slice=function(i,r){var e=this.size;return zg(i,r,e)?this:new t(this._value,$g(r,e)-gc(i,e))},t.prototype.reverse=function(){return this},t.prototype.indexOf=function(i){return Xt(this._value,i)?0:-1},t.prototype.lastIndexOf=function(i){return Xt(this._value,i)?this.size:-1},t.prototype.__iterate=function(i,r){for(var e=this.size,a=0;a!==e&&i(this._value,r?e-++a:a++,this)!==!1;);return a},t.prototype.__iterator=function(i,r){var e=this,a=this.size,u=0;return new at(function(){return u===a?kt():At(i,r?a-++u:u++,e._value)})},t.prototype.equals=function(i){return i instanceof t?Xt(this._value,i._value):vT(this,i)},t})(Cr),L0;function nB(n,t){return Nx([],t||iB,n,"",t&&t.length>2?[]:void 0,{"":n})}function Nx(n,t,o,i,r,e){if(typeof o!="string"&&!Br(o)&&(Kv(o)||Hv(o)||aT(o))){if(~n.indexOf(o))throw new TypeError("Cannot convert circular structure to Immutable");n.push(o),r&&i!==""&&r.push(i);var a=t.call(e,i,er(o).map(function(u,c){return Nx(n,t,u,c,r,o)}),r&&r.slice());return n.pop(),r&&r.pop(),a}return o}function iB(n,t){return _r(t)?t.toList():Tt(t)?t.toMap():t.toSet()}var aB="5.1.4",oB=zt;const uB=Object.freeze(Object.defineProperty({__proto__:null,Collection:zt,Iterable:oB,List:Zg,Map:Ns,OrderedMap:cn,OrderedSet:cc,PairSorting:k7,Range:Ax,Record:Gt,Repeat:rB,Seq:er,Set:kg,Stack:jb,fromJS:nB,get:yT,getIn:TT,has:gx,hasIn:jx,hash:hr,is:Xt,isAssociative:Ob,isCollection:gr,isImmutable:Br,isIndexed:_r,isKeyed:Tt,isList:gT,isMap:Rb,isOrdered:Jr,isOrderedMap:mT,isOrderedSet:OT,isPlainObject:aT,isRecord:Cn,isSeq:Ab,isSet:Db,isStack:gb,isValueObject:wv,merge:N7,mergeDeep:I7,mergeDeepWith:L7,mergeWith:M7,remove:mx,removeIn:Tx,set:bx,setIn:dx,update:iT,updateIn:Ms,version:aB},Symbol.toStringTag,{value:"Module"})),AT=wL(uB);var XO;function Mx(){if(XO)return fi;XO=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.ActionContextKey=fi.ActionContext=void 0;const n=AT;let t=class Rg{constructor(r={}){this.map=(0,n.Map)(r)}setDefault(r,e){return this.has(r)?this:this.set(r,e)}set(r,e){return this.setRaw(r.name,e)}setRaw(r,e){return new Rg(this.map.set(r,e))}delete(r){return new Rg(this.map.delete(r.name))}get(r){return this.getRaw(r.name)}getRaw(r){return this.map.get(r)}getSafe(r){if(!this.has(r))throw new Error(`Context entry ${r.name} is required but not available`);return this.get(r)}has(r){return this.hasRaw(r.name)}hasRaw(r){return this.map.has(r)}merge(...r){let e=this;for(const a of r)for(const u of a.keys())e=e.set(u,a.get(u));return e}keys(){return[...this.map.keys()].map(r=>new o(r))}toJS(){return this.map.toJS()}toString(){return`ActionContext(${JSON.stringify(this.map.toJS())})`}[Symbol.for("nodejs.util.inspect.custom")](){return`ActionContext(${JSON.stringify(this.map.toJS(),null,"  ")})`}static ensureActionContext(r){return r instanceof Rg?r:new Rg((0,n.Map)(r??{}))}};fi.ActionContext=t;class o{constructor(r){this.name=r}}return fi.ActionContextKey=o,fi}var Jc={},zO;function Ix(){if(zO)return Jc;zO=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.Bus=void 0;let n=class{constructor(o){this.actors=[],this.observers=[],this.dependencyLinks=new Map,Object.assign(this,o),this.failMessage=`All actors over bus ${this.name} failed to handle an action`}subscribe(o){this.actors.push(o),this.reorderForDependencies()}subscribeObserver(o){this.observers.push(o)}unsubscribe(o){const i=this.actors.indexOf(o);return i>=0?(this.actors.splice(i,1),!0):!1}unsubscribeObserver(o){const i=this.observers.indexOf(o);return i>=0?(this.observers.splice(i,1),!0):!1}publish(o){return this.actors.map(i=>({actor:i,reply:i.test(o)}))}onRun(o,i,r){for(const e of this.observers)e.onRun(o,i,r)}addDependencies(o,i){for(const r of i){let e=this.dependencyLinks.get(r);e||(e=[],this.dependencyLinks.set(r,e)),e.push(o)}this.reorderForDependencies()}reorderForDependencies(){if(this.dependencyLinks.size>0){const o=[];for(const i of this.dependencyLinks.keys()){const r=this.actors.indexOf(i);r>=0&&(this.actors.splice(r,1),o.push(i))}for(;o.length>0;){let i=-1;for(let e=0;e<o.length;e++){let a=!0;for(const u of this.dependencyLinks.get(o[e]))if(!this.actors.includes(u)&&o.includes(u)){a=!1;break}if(a){i=e;break}}if(i<0)throw new Error(`Cyclic dependency links detected in bus ${this.name}`);const r=o.splice(i,1)[0];this.actors.push(r)}}}};return Jc.Bus=n,Jc}var Kc={},$O;function sB(){if($O)return Kc;$O=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.BusIndexed=void 0;const n=Ix();let t=class extends n.Bus{constructor(i){super(i),this.actorsIndex={}}subscribe(i){const r=this.getActorIdentifiers(i)??["_undefined_"];for(const e of r){let a=this.actorsIndex[e];a||(a=this.actorsIndex[e]=[]),a.push(i),super.subscribe(i)}}unsubscribe(i){const r=this.getActorIdentifiers(i)??["_undefined_"];let e=!1;for(const a of r){const u=this.actorsIndex[a];if(u){const c=u.indexOf(i);c>=0&&u.splice(c,1),u.length===0&&delete this.actorsIndex[a]}e=e||super.unsubscribe(i)}return e}publish(i){const r=this.getActionIdentifier(i);return r?[...this.actorsIndex[r]||[],...this.actorsIndex._undefined_||[]].map(a=>({actor:a,reply:a.test(i)})):super.publish(i)}getActorIdentifiers(i){const r=this.actorIdentifierFields.reduce((e,a)=>e[a],i);if(r)return Array.isArray(r)?r:[r]}getActionIdentifier(i){return this.actionIdentifierFields.reduce((r,e)=>r[e],i)}};return Kc.BusIndexed=t,Kc}var Wc={},HO;function Lx(){if(HO)return Wc;HO=1,Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.CONTEXT_KEY_LOGGER=void 0;const n=Mx();return Wc.CONTEXT_KEY_LOGGER=new n.ActionContextKey("@comunica/core:log"),Wc}var Yc={},JO;function cB(){if(JO)return Yc;JO=1,Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.ActionObserver=void 0;let n=class{constructor(o){Object.assign(this,o)}};return Yc.ActionObserver=n,Yc}var Zc={},KO;function lB(){if(KO)return Zc;KO=1,Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.Actor=void 0;const n=Lx();let t=class ws{constructor(i){this.beforeActors=[],Object.assign(this,i),this.bus.subscribe(this),this.beforeActors.length>0&&this.bus.addDependencies(this,this.beforeActors),i.busFailMessage&&(this.bus.failMessage=i.busFailMessage)}static getContextLogger(i){return i.get(n.CONTEXT_KEY_LOGGER)}runObservable(i,r){const e=this.run(i,r);return this.bus.onRun(this,i,e),e}getDefaultLogData(i,r){const e=r?r():{};return e.actor=this.name,e}logTrace(i,r,e){const a=ws.getContextLogger(i);a&&a.trace(r,this.getDefaultLogData(i,e))}logDebug(i,r,e){const a=ws.getContextLogger(i);a&&a.debug(r,this.getDefaultLogData(i,e))}logInfo(i,r,e){const a=ws.getContextLogger(i);a&&a.info(r,this.getDefaultLogData(i,e))}logWarn(i,r,e){const a=ws.getContextLogger(i);a&&a.warn(r,this.getDefaultLogData(i,e))}logError(i,r,e){const a=ws.getContextLogger(i);a&&a.error(r,this.getDefaultLogData(i,e))}logFatal(i,r,e){const a=ws.getContextLogger(i);a&&a.fatal(r,this.getDefaultLogData(i,e))}};return Zc.Actor=t,Zc}var kc={},WO;function fB(){if(WO)return kc;WO=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.Mediator=void 0;let n=class Ev{constructor(o){Object.assign(this,o)}publish(o){const i=this.bus.publish(o);if(i.length===0)throw new Error(`No actors are able to reply to a message in the bus ${this.bus.name}`);return i}async mediateActor(o){return await this.mediateWith(o,this.publish(o))}async mediateTestable(o){return(await this.mediateActor(o)).mapAsync((r,e)=>r.runObservable(o,e))}async mediate(o){return(await this.mediateTestable(o)).getOrThrow()}constructFailureMessage(o,i){const r=`
        `;return`${this.bus.failMessage.replaceAll(/\$\{(.*?)\}/gu,(a,u)=>Ev.getObjectValue({action:o},u.split("."))||a)}
    Error messages of failing actors:${r}${i.join(r)}`}static getObjectValue(o,i){if(i.length===0)return o;if(o)return Ev.getObjectValue(o[i[0]],i.slice(1))}};return kc.Mediator=n,kc}var Kt={},YO;function dB(){if(YO)return Kt;YO=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.TestResultFailed=Kt.TestResultPassed=Kt.failTest=Kt.passTestVoidWithSideData=Kt.passTestWithSideData=Kt.passTestVoid=Kt.passTest=void 0;function n(u){return new e(u,void 0)}Kt.passTest=n;function t(){return new e(!0,void 0)}Kt.passTestVoid=t;function o(u,c){return new e(u,c)}Kt.passTestWithSideData=o;function i(u){return new e(!0,u)}Kt.passTestVoidWithSideData=i;function r(u){return new a(u)}Kt.failTest=r;class e{constructor(c,s){this.value=c,this.sideData=s}isPassed(){return!0}isFailed(){return!1}get(){return this.value}getOrThrow(){return this.value}getSideData(){return this.sideData}getFailMessage(){}map(c){return new e(c(this.value,this.sideData),this.sideData)}async mapAsync(c){return new e(await c(this.value,this.sideData),this.sideData)}}Kt.TestResultPassed=e;class a{constructor(c){this.failMessage=c}isPassed(){return!1}isFailed(){return!0}get(){}getOrThrow(){throw new Error(this.getFailMessage())}getSideData(){throw new Error(this.getFailMessage())}getFailMessage(){return this.failMessage}map(){return this}async mapAsync(){return this}}return Kt.TestResultFailed=a,Kt}var ZO;function Ae(){return ZO||(ZO=1,(function(n){var t=li&&li.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=li&&li.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Mx(),n),o(Ix(),n),o(sB(),n),o(Lx(),n),o(cB(),n),o(lB(),n),o(fB(),n),o(dB(),n)})(li)),li}var kO;function pB(){if(kO)return $c;kO=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.ActorInit=void 0;const n=Ae();let t=class extends n.Actor{constructor(i){super(i)}};return $c.ActorInit=t,$c}var eS;function hB(){return eS||(eS=1,(function(n){var t=ci&&ci.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ci&&ci.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(pB(),n)})(ci)),ci}var tS;function xx(){if(tS)return zc;tS=1,Object.defineProperty(zc,"__esModule",{value:!0}),zc.ActorInitQueryBase=void 0;const n=hB(),t=Ae();let o=class extends n.ActorInit{async test(r){return(0,t.passTestVoid)()}async run(r){throw new Error("ActorInitSparql#run is not supported in the browser.")}};return zc.ActorInitQueryBase=o,zc}var el={},x0={exports:{}},rS;function Un(){if(rS)return x0.exports;rS=1;var n=x0.exports={},t,o;function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=i}catch{t=i}try{typeof clearTimeout=="function"?o=clearTimeout:o=r}catch{o=r}})();function e(y){if(t===setTimeout)return setTimeout(y,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(y,0);try{return t(y,0)}catch{try{return t.call(null,y,0)}catch{return t.call(this,y,0)}}}function a(y){if(o===clearTimeout)return clearTimeout(y);if((o===r||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(y);try{return o(y)}catch{try{return o.call(null,y)}catch{return o.call(this,y)}}}var u=[],c=!1,s,l=-1;function f(){!c||!s||(c=!1,s.length?u=s.concat(u):l=-1,u.length&&d())}function d(){if(!c){var y=e(f);c=!0;for(var b=u.length;b;){for(s=u,u=[];++l<b;)s&&s[l].run();l=-1,b=u.length}s=null,c=!1,a(y)}}n.nextTick=function(y){var b=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)b[_-1]=arguments[_];u.push(new h(y,b)),u.length===1&&!c&&e(d)};function h(y,b){this.fun=y,this.array=b}h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={};function p(){}return n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(y){return[]},n.binding=function(y){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(y){throw new Error("process.chdir is not supported")},n.umask=function(){return 0},x0.exports}var nS;function yB(){if(nS)return el;nS=1,Object.defineProperty(el,"__esModule",{value:!0}),el.ActorInitQuery=void 0;const n=xx();typeof process>"u"&&(globalThis.process=Un());class t extends n.ActorInitQueryBase{}return el.ActorInitQuery=t,el}var tl={},di={},ut={},iS;function qx(){if(iS)return ut;iS=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.KeysStatistics=ut.KeysRdfJoin=ut.KeysMergeBindingsContext=ut.KeysRdfUpdateQuads=ut.KeysQuerySourceIdentify=ut.KeysRdfParseHtmlScript=ut.KeysRdfParseJsonLd=ut.KeysQueryOperation=ut.KeysExpressionEvaluator=ut.KeysInitQuery=ut.KeysHttpProxy=ut.KeysHttpMemento=ut.KeysHttpWayback=ut.KeysHttp=ut.KeysCore=void 0;const n=Ae();return ut.KeysCore={log:n.CONTEXT_KEY_LOGGER},ut.KeysHttp={includeCredentials:new n.ActionContextKey("@comunica/bus-http:include-credentials"),auth:new n.ActionContextKey("@comunica/bus-http:auth"),fetch:new n.ActionContextKey("@comunica/bus-http:fetch"),httpTimeout:new n.ActionContextKey("@comunica/bus-http:http-timeout"),httpBodyTimeout:new n.ActionContextKey("@comunica/bus-http:http-body-timeout"),httpRetryCount:new n.ActionContextKey("@comunica/bus-http:http-retry-count"),httpRetryDelayFallback:new n.ActionContextKey("@comunica/bus-http:http-retry-delay-fallback"),httpRetryDelayLimit:new n.ActionContextKey("@comunica/bus-http:http-retry-delay-limit"),httpRetryStatusCodes:new n.ActionContextKey("@comunica/bus-http:http-retry-status-codes")},ut.KeysHttpWayback={recoverBrokenLinks:new n.ActionContextKey("@comunica/bus-http:recover-broken-links")},ut.KeysHttpMemento={datetime:new n.ActionContextKey("@comunica/actor-http-memento:datetime")},ut.KeysHttpProxy={httpProxyHandler:new n.ActionContextKey("@comunica/actor-http-proxy:httpProxyHandler")},ut.KeysInitQuery={querySourcesUnidentified:new n.ActionContextKey("@comunica/actor-init-query:querySourcesUnidentified"),initialBindings:new n.ActionContextKey("@comunica/actor-init-query:initialBindings"),queryFormat:new n.ActionContextKey("@comunica/actor-init-query:queryFormat"),graphqlSingularizeVariables:new n.ActionContextKey("@comunica/actor-init-query:singularizeVariables"),lenient:new n.ActionContextKey("@comunica/actor-init-query:lenient"),queryString:new n.ActionContextKey("@comunica/actor-init-query:queryString"),query:new n.ActionContextKey("@comunica/actor-init-query:query"),baseIRI:new n.ActionContextKey("@comunica/actor-init-query:baseIRI"),fileBaseIRI:new n.ActionContextKey("@comunica/actor-init-query:fileBaseIRI"),functionArgumentsCache:new n.ActionContextKey("@comunica/actor-init-query:functionArgumentsCache"),queryTimestamp:new n.ActionContextKey("@comunica/actor-init-query:queryTimestamp"),queryTimestampHighResolution:new n.ActionContextKey("@comunica/actor-init-query:queryTimestampHighResolution"),extensionFunctionCreator:new n.ActionContextKey("@comunica/actor-init-query:extensionFunctionCreator"),extensionFunctions:new n.ActionContextKey("@comunica/actor-init-query:extensionFunctions"),extensionFunctionsAlwaysPushdown:new n.ActionContextKey("@comunica/actor-init-query:extensionFunctionsAlwaysPushdown"),cliArgsHandlers:new n.ActionContextKey("@comunica/actor-init-query:cliArgsHandlers"),explain:new n.ActionContextKey("@comunica/actor-init-query:explain"),physicalQueryPlanLogger:new n.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanLogger"),physicalQueryPlanNode:new n.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanNode"),jsonLdContext:new n.ActionContextKey("@context"),invalidateCache:new n.ActionContextKey("@comunica/actor-init-query:invalidateCache"),dataFactory:new n.ActionContextKey("@comunica/actor-init-query:dataFactory"),distinctConstruct:new n.ActionContextKey("@comunica/actor-init-query:distinctConstruct")},ut.KeysExpressionEvaluator={extensionFunctionCreator:new n.ActionContextKey("@comunica/utils-expression-evaluator:extensionFunctionCreator"),superTypeProvider:new n.ActionContextKey("@comunica/utils-expression-evaluator:superTypeProvider"),defaultTimeZone:new n.ActionContextKey("@comunica/utils-expression-evaluator:defaultTimeZone"),actionContext:new n.ActionContextKey("@comunica/utils-expression-evaluator:actionContext")},ut.KeysQueryOperation={operation:new n.ActionContextKey("@comunica/bus-query-operation:operation"),joinLeftMetadata:new n.ActionContextKey("@comunica/bus-query-operation:joinLeftMetadata"),joinRightMetadatas:new n.ActionContextKey("@comunica/bus-query-operation:joinRightMetadatas"),joinBindings:new n.ActionContextKey("@comunica/bus-query-operation:joinBindings"),readOnly:new n.ActionContextKey("@comunica/bus-query-operation:readOnly"),isPathArbitraryLengthDistinctKey:new n.ActionContextKey("@comunica/bus-query-operation:isPathArbitraryLengthDistinct"),limitIndicator:new n.ActionContextKey("@comunica/bus-query-operation:limitIndicator"),unionDefaultGraph:new n.ActionContextKey("@comunica/bus-query-operation:unionDefaultGraph"),querySources:new n.ActionContextKey("@comunica/bus-query-operation:querySources")},ut.KeysRdfParseJsonLd={documentLoader:new n.ActionContextKey("@comunica/actor-rdf-parse-jsonld:documentLoader"),strictValues:new n.ActionContextKey("@comunica/actor-rdf-parse-jsonld:strictValues"),parserOptions:new n.ActionContextKey("@comunica/actor-rdf-parse-jsonld:parserOptions")},ut.KeysRdfParseHtmlScript={processingHtmlScript:new n.ActionContextKey("@comunica/actor-rdf-parse-html-script:processingHtmlScript"),extractAllScripts:new n.ActionContextKey("extractAllScripts")},ut.KeysQuerySourceIdentify={sourceIds:new n.ActionContextKey("@comunica/bus-query-source-identify:sourceIds"),hypermediaSourcesAggregatedStores:new n.ActionContextKey("@comunica/bus-query-source-identify:hypermediaSourcesAggregatedStores"),traverse:new n.ActionContextKey("@comunica/bus-query-source-identify:traverse")},ut.KeysRdfUpdateQuads={destination:new n.ActionContextKey("@comunica/bus-rdf-update-quads:destination")},ut.KeysMergeBindingsContext={sourcesBinding:new n.ActionContextKey("@comunica/bus-merge-bindings-context:sourcesBinding")},ut.KeysRdfJoin={lastPhysicalJoin:new n.ActionContextKey("@comunica/bus-rdf-join:lastPhysicalJoin")},ut.KeysStatistics={discoveredLinks:new n.ActionContextKey("@comunica/statistic:discoveredLinks"),dereferencedLinks:new n.ActionContextKey("@comunica/statistic:dereferencedLinks"),intermediateResults:new n.ActionContextKey("@comunica/statistic:intermediateResults")},ut}var aS;function Be(){return aS||(aS=1,(function(n){var t=di&&di.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=di&&di.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(qx(),n)})(di)),di}var oS;function _B(){if(oS)return tl;oS=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.QueryEngineBase=void 0;const n=Be(),t=Ae();let o=class Rv{constructor(r){this.actorInitQuery=r}async queryBindings(r,e){return this.queryOfType(r,e,"bindings")}async queryQuads(r,e){return this.queryOfType(r,e,"quads")}async queryBoolean(r,e){return this.queryOfType(r,e,"boolean")}async queryVoid(r,e){return this.queryOfType(r,e,"void")}async queryOfType(r,e,a){const u=await this.query(r,e);if(u.resultType===a)return await u.execute();throw new Error(`Query result type '${a}' was expected, while '${u.resultType}' was found.`)}async query(r,e){const a=await this.queryOrExplain(r,e);if("explain"in a)throw new Error("Tried to explain a query when in query-only mode");return a}async explain(r,e,a){return e.explain=a,await this.queryOrExplain(r,e)}async queryOrExplain(r,e){const a=t.ActionContext.ensureActionContext(e);a.get(n.KeysInitQuery.invalidateCache)&&await this.invalidateHttpCache();const{result:u}=await this.actorInitQuery.mediatorQueryProcess.mediate({query:r,context:a});return"explain"in u?u:Rv.internalToFinalResult(u)}async getResultMediaTypes(r){return r=t.ActionContext.ensureActionContext(r),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeCombiner.mediate({context:r,mediaTypes:!0})).mediaTypes}async getResultMediaTypeFormats(r){return r=t.ActionContext.ensureActionContext(r),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeFormatCombiner.mediate({context:r,mediaTypeFormats:!0})).mediaTypeFormats}async resultToString(r,e,a){if(a=t.ActionContext.ensureActionContext(a),!e)switch(r.resultType){case"bindings":e="application/json";break;case"quads":e="application/trig";break;default:e="simple";break}const u={...await Rv.finalToInternalResult(r),context:a};return(await this.actorInitQuery.mediatorQueryResultSerialize.mediate({context:a,handle:u,handleMediaType:e})).handle}invalidateHttpCache(r,e){return e=t.ActionContext.ensureActionContext(e),this.actorInitQuery.mediatorHttpInvalidate.mediate({url:r,context:e})}static internalToFinalResult(r){switch(r.type){case"bindings":return{resultType:"bindings",execute:async()=>r.bindingsStream,metadata:async()=>{const e=await r.metadata();return e.variables=e.variables.map(a=>a.variable),e},context:r.context};case"quads":return{resultType:"quads",execute:async()=>r.quadStream,metadata:async()=>await r.metadata(),context:r.context};case"boolean":return{resultType:"boolean",execute:async()=>r.execute(),context:r.context};case"void":return{resultType:"void",execute:async()=>r.execute(),context:r.context}}}static async finalToInternalResult(r){switch(r.resultType){case"bindings":return{type:"bindings",bindingsStream:await r.execute(),metadata:async()=>{const e=await r.metadata();return e.variables=e.variables.map(a=>({variable:a,canBeUndef:!1})),e}};case"quads":return{type:"quads",quadStream:await r.execute(),metadata:async()=>await r.metadata()};case"boolean":return{type:"boolean",execute:()=>r.execute()};case"void":return{type:"void",execute:()=>r.execute()}}}};return tl.QueryEngineBase=o,tl}var uS;function Bx(){return uS||(uS=1,(function(n){var t=si&&si.__createBinding||(Object.create?(function(r,e,a,u){u===void 0&&(u=a);var c=Object.getOwnPropertyDescriptor(e,a);(!c||("get"in c?!e.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return e[a]}}),Object.defineProperty(r,u,c)}):(function(r,e,a,u){u===void 0&&(u=a),r[u]=e[a]})),o=si&&si.__exportStar||function(r,e){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(e,a)&&t(e,r,a)};Object.defineProperty(n,"__esModule",{value:!0}),n.QueryEngineBase=void 0,o(xx(),n),o(yB(),n);var i=_B();Object.defineProperty(n,"QueryEngineBase",{enumerable:!0,get:function(){return i.QueryEngineBase}})})(si)),si}var pi={},rl={},hi={},q0={},sS;function gB(){return sS||(sS=1,Object.defineProperty(q0,"__esModule",{value:!0})),q0}var B0={},cS;function mB(){return cS||(cS=1,Object.defineProperty(B0,"__esModule",{value:!0})),B0}var C0={},lS;function bB(){return lS||(lS=1,Object.defineProperty(C0,"__esModule",{value:!0})),C0}var Q0={},fS;function vB(){return fS||(fS=1,Object.defineProperty(Q0,"__esModule",{value:!0})),Q0}var U0={},dS;function TB(){return dS||(dS=1,Object.defineProperty(U0,"__esModule",{value:!0})),U0}var V0={},pS;function OB(){return pS||(pS=1,Object.defineProperty(V0,"__esModule",{value:!0})),V0}var G0={},hS;function SB(){return hS||(hS=1,Object.defineProperty(G0,"__esModule",{value:!0})),G0}var X0={},yS;function wB(){return yS||(yS=1,Object.defineProperty(X0,"__esModule",{value:!0})),X0}var z0={},_S;function AB(){return _S||(_S=1,Object.defineProperty(z0,"__esModule",{value:!0})),z0}var $0={},gS;function FB(){return gS||(gS=1,Object.defineProperty($0,"__esModule",{value:!0})),$0}var H0={},mS;function EB(){return mS||(mS=1,Object.defineProperty(H0,"__esModule",{value:!0})),H0}var J0={},bS;function RB(){return bS||(bS=1,Object.defineProperty(J0,"__esModule",{value:!0})),J0}var K0={},vS;function jB(){return vS||(vS=1,Object.defineProperty(K0,"__esModule",{value:!0})),K0}var W0={},TS;function DB(){return TS||(TS=1,Object.defineProperty(W0,"__esModule",{value:!0})),W0}var Y0={},OS;function PB(){return OS||(OS=1,Object.defineProperty(Y0,"__esModule",{value:!0})),Y0}var Z0={},SS;function NB(){return SS||(SS=1,Object.defineProperty(Z0,"__esModule",{value:!0})),Z0}var k0={},wS;function MB(){return wS||(wS=1,Object.defineProperty(k0,"__esModule",{value:!0})),k0}var e1={},AS;function IB(){return AS||(AS=1,Object.defineProperty(e1,"__esModule",{value:!0})),e1}var t1={},FS;function LB(){return FS||(FS=1,Object.defineProperty(t1,"__esModule",{value:!0})),t1}var nl={},ES;function xB(){if(ES)return nl;ES=1,Object.defineProperty(nl,"__esModule",{value:!0}),nl.Logger=void 0;let n=class Cx{static getLevelOrdinal(o){return Cx.LEVELS[o]}};return nl.Logger=n,n.LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},nl}var il={},RS;function qB(){if(RS)return il;RS=1,Object.defineProperty(il,"__esModule",{value:!0}),il.ExpressionType=void 0;var n;return(function(t){t.Aggregate="aggregate",t.Existence="existence",t.Operator="operator",t.Term="term",t.Variable="variable"})(n||(il.ExpressionType=n={})),il}var jS;function Vn(){return jS||(jS=1,(function(n){var t=hi&&hi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=hi&&hi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(gB(),n),o(mB(),n),o(bB(),n),o(vB(),n),o(TB(),n),o(OB(),n),o(SB(),n),o(wB(),n),o(AB(),n),o(FB(),n),o(EB(),n),o(RB(),n),o(jB(),n),o(DB(),n),o(PB(),n),o(NB(),n),o(MB(),n),o(IB(),n),o(LB(),n),o(xB(),n),o(qB(),n)})(hi)),hi}var DS;function BB(){if(DS)return rl;DS=1,Object.defineProperty(rl,"__esModule",{value:!0}),rl.LoggerVoid=void 0;const n=Vn();let t=class extends n.Logger{debug(){}error(){}fatal(){}info(){}trace(){}warn(){}};return rl.LoggerVoid=t,rl}var PS;function CB(){return PS||(PS=1,(function(n){var t=pi&&pi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=pi&&pi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(BB(),n)})(pi)),pi}var yi={},_i={},NS;function Qx(){if(NS)return _i;NS=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.MediatorFunctionFactory=_i.ActorFunctionFactory=void 0;const n=Ae();let t=class extends n.Actor{constructor(r){super(r)}};_i.ActorFunctionFactory=t;class o extends n.Mediator{}return _i.MediatorFunctionFactory=o,_i}var al={},MS;function QB(){if(MS)return al;MS=1,Object.defineProperty(al,"__esModule",{value:!0}),al.ActorFunctionFactoryDedicated=void 0;const n=Ae(),t=Qx();let o=class extends t.ActorFunctionFactory{constructor(r){super(r)}async test(r){return this.functionNames.includes(r.functionName)&&(this.termFunction||!r.requireTermExpression)?(0,n.passTestVoid)():(0,n.failTest)(`Actor ${this.name} can not provide implementation for "${r.functionName}", only for ${this.termFunction?"":"non-termExpression "}${this.functionNames.join(" and ")}.`)}};return al.ActorFunctionFactoryDedicated=o,al}var ol={},IS;function UB(){if(IS)return ol;IS=1,Object.defineProperty(ol,"__esModule",{value:!0}),ol.BusFunctionFactory=void 0;const n=Ae();let t=class extends n.BusIndexed{constructor(i){super({...i,actorIdentifierFields:["functionNames"],actionIdentifierFields:["functionName"]})}};return ol.BusFunctionFactory=t,ol}var gi={},r1={},ul={},n1={},Wt={},mi={},sl={},LS;function Ux(){if(LS)return sl;LS=1,Object.defineProperty(sl,"__esModule",{value:!0}),sl.BlankNode=void 0;class n{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return sl.BlankNode=n,sl}var cl={},ll={},xS;function Vx(){if(xS)return ll;xS=1,Object.defineProperty(ll,"__esModule",{value:!0}),ll.DefaultGraph=void 0;class n{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return ll.DefaultGraph=n,n.INSTANCE=new n,ll}var fl={},dl={},qS;function FT(){if(qS)return dl;qS=1,Object.defineProperty(dl,"__esModule",{value:!0}),dl.NamedNode=void 0;class n{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return dl.NamedNode=n,dl}var BS;function Gx(){if(BS)return fl;BS=1,Object.defineProperty(fl,"__esModule",{value:!0}),fl.Literal=void 0;const n=FT();class t{constructor(i,r){this.termType="Literal",this.value=i,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(i){return!!i&&i.termType==="Literal"&&i.value===this.value&&i.language===this.language&&this.datatype.equals(i.datatype)}}return fl.Literal=t,t.RDF_LANGUAGE_STRING=new n.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new n.NamedNode("http://www.w3.org/2001/XMLSchema#string"),fl}var pl={},CS;function Xx(){if(CS)return pl;CS=1,Object.defineProperty(pl,"__esModule",{value:!0}),pl.Quad=void 0;class n{constructor(o,i,r,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=i,this.object=r,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return pl.Quad=n,pl}var hl={},QS;function zx(){if(QS)return hl;QS=1,Object.defineProperty(hl,"__esModule",{value:!0}),hl.Variable=void 0;class n{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return hl.Variable=n,hl}var US;function VB(){if(US)return cl;US=1,Object.defineProperty(cl,"__esModule",{value:!0}),cl.DataFactory=void 0;const n=Ux(),t=Vx(),o=Gx(),i=FT(),r=Xx(),e=zx();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new i.NamedNode(s)}blankNode(s){return new n.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,f,d){return new r.Quad(s,l,f,d||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return cl.DataFactory=u,cl}var VS;function GB(){return VS||(VS=1,(function(n){var t=mi&&mi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=mi&&mi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Ux(),n),o(VB(),n),o(Vx(),n),o(Gx(),n),o(FT(),n),o(Xx(),n),o(zx(),n)})(mi)),mi}var GS;function XB(){if(GS)return Wt;GS=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.stringQuadToQuad=Wt.quadToStringQuad=Wt.stringToTerm=Wt.getLiteralLanguage=Wt.getLiteralType=Wt.getLiteralValue=Wt.termToString=void 0;const n=GB(),t=new n.DataFactory;function o(s){if(s)switch(s.termType){case"NamedNode":return s.value;case"BlankNode":return"_:"+s.value;case"Literal":const l=s;return'"'+l.value+'"'+(l.datatype&&l.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&l.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?"^^"+l.datatype.value:"")+(l.language?"@"+l.language:"");case"Quad":return`<<${o(s.subject)} ${o(s.predicate)} ${o(s.object)}${s.graph.termType==="DefaultGraph"?"":" "+o(s.graph)}>>`;case"Variable":return"?"+s.value;case"DefaultGraph":return s.value}}Wt.termToString=o;function i(s){const l=/^"([^]*)"/.exec(s);if(!l)throw new Error(s+" is not a literal");return l[1]}Wt.getLiteralValue=i;function r(s){const l=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(s);if(!l)throw new Error(s+" is not a literal");return l[1]||(l[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}Wt.getLiteralType=r;function e(s){const l=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(s);if(!l)throw new Error(s+" is not a literal");return l[1]?l[1].toLowerCase():""}Wt.getLiteralLanguage=e;function a(s,l){if(l=l||t,!s||!s.length)return l.defaultGraph();switch(s[0]){case"_":return l.blankNode(s.substr(2));case"?":if(!l.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return l.variable(s.substr(1));case'"':const f=e(s),d=l.namedNode(r(s));return l.literal(i(s),f||d);default:if(s[0]==="<"&&s.length>4&&s[1]==="<"&&s[s.length-1]===">"&&s[s.length-2]===">"){const h=s.slice(2,-2).trim();let p=[],y=0,b=0,_=!1;for(let T=0;T<h.length;T++){const m=h[T];if(m==="<"&&y++,m===">"){if(y===0)throw new Error("Found closing tag without opening tag in "+s);y--}if(m==='"'){let A=!1,E=T;for(;E-- >0&&h[E]==="\\";)A=!A;A||(_=!_)}if(m===" "&&!_&&y===0){for(p.push(h.slice(b,T));h[T+1]===" ";)T+=1;b=T+1}}if(y!==0)throw new Error("Found opening tag without closing tag in "+s);if(p.push(h.slice(b,h.length)),p.length!==3&&p.length!==4)throw new Error("Nested quad syntax error "+s);return p=p.map(T=>T.startsWith("<")&&!T.includes(" ")?T.slice(1,-1):T),l.quad(a(p[0]),a(p[1]),a(p[2]),p[3]?a(p[3]):void 0)}return l.namedNode(s)}}Wt.stringToTerm=a;function u(s){return{subject:o(s.subject),predicate:o(s.predicate),object:o(s.object),graph:o(s.graph)}}Wt.quadToStringQuad=u;function c(s,l){return l=l||t,l.quad(a(s.subject,l),a(s.predicate,l),a(s.object,l),a(s.graph,l))}return Wt.stringQuadToQuad=c,Wt}var XS;function mr(){return XS||(XS=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.termToString=n.stringToTerm=n.stringQuadToQuad=n.quadToStringQuad=n.getLiteralValue=n.getLiteralType=n.getLiteralLanguage=void 0;const t=XB();Object.defineProperty(n,"getLiteralLanguage",{enumerable:!0,get:function(){return t.getLiteralLanguage}}),Object.defineProperty(n,"getLiteralType",{enumerable:!0,get:function(){return t.getLiteralType}}),Object.defineProperty(n,"getLiteralValue",{enumerable:!0,get:function(){return t.getLiteralValue}}),Object.defineProperty(n,"quadToStringQuad",{enumerable:!0,get:function(){return t.quadToStringQuad}}),Object.defineProperty(n,"stringQuadToQuad",{enumerable:!0,get:function(){return t.stringQuadToQuad}}),Object.defineProperty(n,"stringToTerm",{enumerable:!0,get:function(){return t.stringToTerm}}),Object.defineProperty(n,"termToString",{enumerable:!0,get:function(){return t.termToString}})})(n1)),n1}var Ur={},Nr={},i1,zS;function zB(){return zS||(zS=1,i1=function n(t,o){if(t===o)return!0;if(t&&o&&typeof t=="object"&&typeof o=="object"){if(t.constructor!==o.constructor)return!1;var i,r,e;if(Array.isArray(t)){if(i=t.length,i!=o.length)return!1;for(r=i;r--!==0;)if(!n(t[r],o[r]))return!1;return!0}if(t instanceof Map&&o instanceof Map){if(t.size!==o.size)return!1;for(r of t.entries())if(!o.has(r[0]))return!1;for(r of t.entries())if(!n(r[1],o.get(r[0])))return!1;return!0}if(t instanceof Set&&o instanceof Set){if(t.size!==o.size)return!1;for(r of t.entries())if(!o.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(o)){if(i=t.length,i!=o.length)return!1;for(r=i;r--!==0;)if(t[r]!==o[r])return!1;return!0}if(t.constructor===RegExp)return t.source===o.source&&t.flags===o.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===o.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===o.toString();if(e=Object.keys(t),i=e.length,i!==Object.keys(o).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(o,e[r]))return!1;for(r=i;r--!==0;){var a=e[r];if(!n(t[a],o[a]))return!1}return!0}return t!==t&&o!==o}),i1}var a1={},Vr={},$S;function $B(){if($S)return Vr;$S=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.termToString=o,Vr.getLiteralValue=i,Vr.getLiteralType=r,Vr.getLiteralLanguage=e,Vr.getLiteralDirection=a,Vr.stringToTerm=u,Vr.quadToStringQuad=c,Vr.stringQuadToQuad=s;const n=Ds(),t=new n.DataFactory;function o(l){if(l)switch(l.termType){case"NamedNode":return l.value;case"BlankNode":return"_:"+l.value;case"Literal":const f=l;return'"'+f.value+'"'+(f.datatype&&f.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&f.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&f.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+f.datatype.value:"")+(f.language?"@"+f.language:"")+(f.direction?"--"+f.direction:"");case"Quad":return`<<${o(l.subject)} ${o(l.predicate)} ${o(l.object)}${l.graph.termType==="DefaultGraph"?"":" "+o(l.graph)}>>`;case"Variable":return"?"+l.value;case"DefaultGraph":return l.value}}function i(l){const f=/^"([^]*)"/.exec(l);if(!f)throw new Error(l+" is not a literal");return f[1]}function r(l){const f=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(l);if(!f)throw new Error(l+" is not a literal");return f[1]||(f[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function e(l){const f=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(l);if(!f)throw new Error(l+" is not a literal");if(f[1]){let d=f[1].toLowerCase();const h=d.indexOf("--");return h>=0&&(d=d.slice(0,h)),d}return""}function a(l){const f=l.indexOf("--",l.lastIndexOf('"'));if(f>=0){const d=l.slice(f+2,l.length);if(d==="ltr"||d==="rtl")return d;throw new Error(l+" is not a literal with a valid direction")}return""}function u(l,f){if(f=f||t,!l||!l.length)return f.defaultGraph();switch(l[0]){case"_":return f.blankNode(l.substr(2));case"?":if(!f.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return f.variable(l.substr(1));case'"':const d=e(l),h=a(l),p=f.namedNode(r(l));return f.literal(i(l),d?{language:d,direction:h}:p);default:if(l[0]==="<"&&l.length>4&&l[1]==="<"&&l[l.length-1]===">"&&l[l.length-2]===">"){const y=l.slice(2,-2).trim();let b=[],_=0,T=0,m=!1;for(let A=0;A<y.length;A++){const E=y[A];if(E==="<"&&_++,E===">"){if(_===0)throw new Error("Found closing tag without opening tag in "+l);_--}if(E==='"'){let j=!1,X=A;for(;X-- >0&&y[X]==="\\";)j=!j;j||(m=!m)}if(E===" "&&!m&&_===0){for(b.push(y.slice(T,A));y[A+1]===" ";)A+=1;T=A+1}}if(_!==0)throw new Error("Found opening tag without closing tag in "+l);if(b.push(y.slice(T,y.length)),b.length!==3&&b.length!==4)throw new Error("Nested quad syntax error "+l);return b=b.map(A=>A.startsWith("<")&&!A.includes(" ")?A.slice(1,-1):A),f.quad(u(b[0]),u(b[1]),u(b[2]),b[3]?u(b[3]):void 0)}return f.namedNode(l)}}function c(l){return{subject:o(l.subject),predicate:o(l.predicate),object:o(l.object),graph:o(l.graph)}}function s(l,f){return f=f||t,f.quad(u(l.subject,f),u(l.predicate,f),u(l.object,f),u(l.graph,f))}return Vr}var HS;function Pb(){return HS||(HS=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.termToString=n.stringToTerm=n.stringQuadToQuad=n.quadToStringQuad=n.getLiteralValue=n.getLiteralType=n.getLiteralDirection=n.getLiteralLanguage=void 0;const t=$B();Object.defineProperty(n,"getLiteralLanguage",{enumerable:!0,get:function(){return t.getLiteralLanguage}}),Object.defineProperty(n,"getLiteralDirection",{enumerable:!0,get:function(){return t.getLiteralDirection}}),Object.defineProperty(n,"getLiteralType",{enumerable:!0,get:function(){return t.getLiteralType}}),Object.defineProperty(n,"getLiteralValue",{enumerable:!0,get:function(){return t.getLiteralValue}}),Object.defineProperty(n,"quadToStringQuad",{enumerable:!0,get:function(){return t.quadToStringQuad}}),Object.defineProperty(n,"stringQuadToQuad",{enumerable:!0,get:function(){return t.stringQuadToQuad}}),Object.defineProperty(n,"stringToTerm",{enumerable:!0,get:function(){return t.stringToTerm}}),Object.defineProperty(n,"termToString",{enumerable:!0,get:function(){return t.termToString}})})(a1)),a1}var o1={},JS;function tm(){return JS||(JS=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.expressionTypes=n.types=void 0,(function(t){t.ALT="alt",t.ASK="ask",t.BGP="bgp",t.CONSTRUCT="construct",t.DESCRIBE="describe",t.DISTINCT="distinct",t.EXPRESSION="expression",t.EXTEND="extend",t.FILTER="filter",t.FROM="from",t.GRAPH="graph",t.GROUP="group",t.INV="inv",t.JOIN="join",t.LEFT_JOIN="leftjoin",t.LINK="link",t.MINUS="minus",t.NOP="nop",t.NPS="nps",t.ONE_OR_MORE_PATH="OneOrMorePath",t.ORDER_BY="orderby",t.PATH="path",t.PATTERN="pattern",t.PROJECT="project",t.REDUCED="reduced",t.SEQ="seq",t.SERVICE="service",t.SLICE="slice",t.UNION="union",t.VALUES="values",t.ZERO_OR_MORE_PATH="ZeroOrMorePath",t.ZERO_OR_ONE_PATH="ZeroOrOnePath",t.COMPOSITE_UPDATE="compositeupdate",t.DELETE_INSERT="deleteinsert",t.LOAD="load",t.CLEAR="clear",t.CREATE="create",t.DROP="drop",t.ADD="add",t.MOVE="move",t.COPY="copy"})(n.types||(n.types={})),(function(t){t.AGGREGATE="aggregate",t.EXISTENCE="existence",t.NAMED="named",t.OPERATOR="operator",t.TERM="term",t.WILDCARD="wildcard"})(n.expressionTypes||(n.expressionTypes={}))})(o1)),o1}var rn={},u1={},KS;function $x(){if(KS)return u1;KS=1;let n=class{constructor(){return t||this}equals(i){return i&&this.termType===i.termType}};Object.defineProperty(n.prototype,"value",{enumerable:!0,value:"*"}),Object.defineProperty(n.prototype,"termType",{enumerable:!0,value:"Wildcard"});var t=new n;return u1.Wildcard=n,u1}var s1,WS;function HB(){if(WS)return s1;WS=1;var n=(function(){var t=function(Se,Oe,je,xe){for(je=je||{},xe=Se.length;xe--;je[Se[xe]]=Oe);return je},o=[6,12,13,15,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],i=[2,247],r=[100,110,113,115,116,123,126,131,329,330,331,332,333],e=[2,409],a=[1,18],u=[1,27],c=[13,16,45,197,224,229,308],s=[28,29,53],l=[28,53],f=[1,42],d=[1,45],h=[1,41],p=[1,44],y=[123,126],b=[1,67],_=[39,45,87],T=[13,16,45,197,224,308],m=[1,87],A=[2,281],E=[1,86],j=[13,16,45,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],X=[6,28,29,53,63,70,73,81,83,85],K=[6,13,16,28,29,53,63,70,73,81,83,85,87,308],O=[6,13,16,28,29,45,53,63,70,73,81,82,83,85,87,89,197,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314],S=[6,13,16,28,29,31,39,45,47,48,53,63,70,73,81,82,83,85,87,89,109,112,121,123,126,128,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,337,338,340,341,342,343,344,345,346],L=[13,16,308],N=[112,132,327,334],I=[13,16,112,132,308],V=[1,111],re=[1,117],Y=[112,132,327,328,334],ce=[13,16,112,132,308,328],ae=[28,29,45,53,87],pe=[1,138],U=[1,151],le=[1,128],me=[1,127],te=[1,129],de=[1,140],Ee=[1,141],Re=[1,142],De=[1,143],fe=[1,144],_e=[1,145],q=[1,147],w=[1,148],D=[2,457],g=[1,158],F=[1,159],M=[1,160],Q=[1,152],x=[1,153],$=[1,156],B=[1,171],H=[1,172],ne=[1,173],ue=[1,174],Te=[1,175],Fe=[1,176],Z=[1,167],oe=[1,168],P=[1,169],v=[1,170],R=[1,157],C=[1,166],k=[1,161],se=[1,162],he=[1,163],Ie=[1,164],Me=[1,165],Ue=[6,13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],Ce=[1,195],z=[6,31,73,81,83,85],be=[2,285],we=[1,199],Le=[1,201],Qe=[6,31,70,73,81,83,85],Ke=[2,283],Ge=[1,207],nt=[1,218],ct=[1,223],W=[1,219],ee=[1,225],Pe=[1,226],Ne=[1,224],qe=[6,63,70,73,81,83,85],lt=[1,236],Qt=[2,334],Oc=[1,243],Kr=[1,241],Lt=[6,193],qs=[2,349],Sc=[2,339],Qr=[28,128],Bs=[47,48,193,272],An=[47,48,193,242,272],Wr=[47,48,193,242,246,272],Dr=[47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,341,342,343,344,345,346],vt=[39,47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,338,341,342,343,344,345,346],Pr=[1,271],KT=[1,270],xt=[6,13,16,29,31,39,45,47,48,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],WT=[1,281],YT=[1,280],nr=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],wc=[45,89],um=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],sm=[13,16,31,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],cm=[31,89],lm=[48,87],Jn=[6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338],Yr=[6,13,16,39,45,48,82,87,89,231,263,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338,340],ZT=[1,313],Cs=[6,85],Xb=[6,31,81,83,85],kT=[2,361],dn=[2,353],Kn=[1,343],Ac=[31,112,335],pn=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],zb=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335],e2=[6,109,193],Wn=[31,112],qt=[13,16,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],$b=[1,390],Hb=[1,391],Fn=[13,16,87,197,308,314],t2=[13,16,39,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],fm=[1,417],dm=[1,418],r2=[13,16,48,197,229,308],En=[6,31,85],n2=[6,13,16,31,45,73,81,83,85,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],Jb=[6,13,16,29,31,45,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,231,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,346,347,348,349,350,351],Yn=[29,31,85,112,159,160,161,163,164],pm=[1,443],hm=[1,444],i2=[1,449],Zn=[31,112,193,232,318,335],ym=[13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],a2=[13,16,31,45,48,82,87,89,112,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Kb=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Fc=[13,16,31,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Ec=[31,45],o2=[1,507],u2=[1,508],s2=[6,13,16,29,31,39,45,47,48,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,336,338,341,342,343,344,345,346,347,348,349,350,351],_m=[29,31,85,112,159,160,161,163,164,335],kn=[6,13,16,31,45,70,73,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],c2=[13,16,31,45,48,82,87,89,112,193,197,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],l2=[2,352],Wb=[13,16,197,308,314],f2=[1,565],Qs=[6,13,16,31,45,76,78,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],d2=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],hn=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],p2=[13,16,87,308],yn=[2,364],Us=[29,31,85,112,159,160,161,163,164,193,232,318,335],gm=[31,112,193,232,272,318,335],_n=[2,359],h2=[13,16,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],mm=[29,31,85,112,159,160,161,163,164,193,232,272,318,335],y2=[13,16,31,45,82,87,89,112,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],_2=[2,347],Yb={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Query:7,Qry:8,Query_option0:9,Prologue_repetition0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectClauseWildcard:17,Qry_repetition0:18,WhereClause:19,SolutionModifierNoGroup:20,SelectClauseVars:21,Qry_repetition1:22,SolutionModifier:23,CONSTRUCT:24,ConstructTemplate:25,Qry_repetition2:26,Qry_repetition3:27,WHERE:28,"{":29,Qry_option0:30,"}":31,DESCRIBE:32,Qry_group0:33,Qry_repetition4:34,Qry_option1:35,ASK:36,Qry_repetition5:37,SelectClauseBase:38,"*":39,SelectClauseVars_repetition_plus0:40,SELECT:41,SelectClauseBase_option0:42,SelectClauseItem:43,Var:44,"(":45,Expression:46,AS:47,")":48,SubSelect:49,SubSelect_option0:50,SubSelect_option1:51,DatasetClause:52,FROM:53,DatasetClause_option0:54,iri:55,WhereClause_option0:56,GroupGraphPattern:57,SolutionModifier_option0:58,SolutionModifierNoGroup_option0:59,SolutionModifierNoGroup_option1:60,SolutionModifierNoGroup_option2:61,GroupClause:62,GROUP:63,BY:64,GroupClause_repetition_plus0:65,GroupCondition:66,BuiltInCall:67,FunctionCall:68,HavingClause:69,HAVING:70,HavingClause_repetition_plus0:71,OrderClause:72,ORDER:73,OrderClause_repetition_plus0:74,OrderCondition:75,ASC:76,BrackettedExpression:77,DESC:78,Constraint:79,LimitOffsetClauses:80,LIMIT:81,INTEGER:82,OFFSET:83,ValuesClause:84,VALUES:85,InlineData:86,VAR:87,InlineData_repetition0:88,NIL:89,InlineData_repetition1:90,InlineData_repetition_plus2:91,InlineData_repetition3:92,DataBlock:93,DataBlockValueList:94,DataBlockValueList_repetition_plus0:95,Update:96,Update_repetition0:97,Update1:98,Update_option0:99,LOAD:100,Update1_option0:101,Update1_option1:102,Update1_group0:103,Update1_option2:104,GraphRefAll:105,Update1_group1:106,Update1_option3:107,GraphOrDefault:108,TO:109,CREATE:110,Update1_option4:111,GRAPH:112,INSERTDATA:113,QuadPattern:114,DELETEDATA:115,DELETEWHERE:116,Update1_option5:117,InsertDeleteClause:118,Update1_repetition0:119,IntoGraphClause:120,INTO:121,GraphRef:122,DELETE:123,InsertDeleteClause_option0:124,InsertClause:125,INSERT:126,UsingClause:127,USING:128,UsingClause_option0:129,WithClause:130,WITH:131,DEFAULT:132,GraphOrDefault_option0:133,GraphRefAll_group0:134,Quads:135,Quads_option0:136,Quads_repetition0:137,QuadsNotTriples:138,VarOrIri:139,QuadsNotTriples_option0:140,QuadsNotTriples_option1:141,QuadsNotTriples_option2:142,TriplesTemplate:143,TriplesTemplate_repetition0:144,TriplesSameSubject:145,TriplesTemplate_option0:146,GroupGraphPatternSub:147,GroupGraphPatternSub_option0:148,GroupGraphPatternSub_repetition0:149,GroupGraphPatternSubTail:150,GraphPatternNotTriples:151,GroupGraphPatternSubTail_option0:152,GroupGraphPatternSubTail_option1:153,TriplesBlock:154,TriplesBlock_repetition0:155,TriplesSameSubjectPath:156,TriplesBlock_option0:157,GroupOrUnionGraphPattern:158,OPTIONAL:159,MINUS:160,SERVICE:161,GraphPatternNotTriples_option0:162,FILTER:163,BIND:164,InlineDataOneVar:165,InlineDataFull:166,InlineDataOneVar_repetition0:167,InlineDataFull_repetition0:168,InlineDataFull_repetition_plus1:169,InlineDataFull_repetition2:170,DataBlockValue:171,Literal:172,QuotedTriple:173,UNDEF:174,GroupOrUnionGraphPattern_repetition0:175,ArgList:176,ArgList_option0:177,ArgList_repetition0:178,ExpressionList:179,ExpressionList_repetition0:180,ConstructTemplate_option0:181,ConstructTriples:182,ConstructTriples_repetition0:183,ConstructTriples_option0:184,VarOrTermOrQuotedTP:185,PropertyListNotEmpty:186,TriplesNode:187,PropertyList:188,PropertyList_option0:189,VerbObjectList:190,PropertyListNotEmpty_repetition0:191,SemiOptionalVerbObjectList:192,";":193,SemiOptionalVerbObjectList_option0:194,Verb:195,ObjectList:196,a:197,ObjectList_repetition0:198,Object:199,GraphNode:200,Object_option0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,O:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmptyTail:207,O_group0:208,ObjectListPath:209,ObjectListPath_repetition0:210,ObjectPath:211,GraphNodePath:212,ObjectPath_option0:213,Path:214,Path_repetition0:215,PathSequence:216,PathSequence_repetition0:217,PathEltOrInverse:218,PathElt:219,PathPrimary:220,PathElt_option0:221,PathEltOrInverse_option0:222,IriOrA:223,"!":224,PathNegatedPropertySet:225,PathOneInPropertySet:226,PathNegatedPropertySet_repetition0:227,PathNegatedPropertySet_option0:228,"^":229,TriplesNode_repetition_plus0:230,"[":231,"]":232,TriplesNodePath_repetition_plus0:233,VarOrTermOrQuotedTPExpr:234,VarOrTerm:235,GraphTerm:236,BlankNode:237,ConditionalOrExpression:238,ConditionalAndExpression:239,ConditionalOrExpression_repetition0:240,ConditionalOrExpressionTail:241,"||":242,RelationalExpression:243,ConditionalAndExpression_repetition0:244,ConditionalAndExpressionTail:245,"&&":246,NumericExpression:247,RelationalExpression_group0:248,RelationalExpression_option0:249,IN:250,MultiplicativeExpression:251,NumericExpression_repetition0:252,AdditiveExpressionTail:253,AdditiveExpressionTail_group0:254,NumericLiteralPositive:255,AdditiveExpressionTail_repetition0:256,NumericLiteralNegative:257,AdditiveExpressionTail_repetition1:258,UnaryExpression:259,MultiplicativeExpression_repetition0:260,MultiplicativeExpressionTail:261,MultiplicativeExpressionTail_group0:262,"+":263,PrimaryExpression:264,"-":265,ExprQuotedTP:266,Aggregate:267,FUNC_ARITY0:268,FUNC_ARITY1:269,FUNC_ARITY1_SPARQL_STAR:270,FUNC_ARITY2:271,",":272,FUNC_ARITY3:273,FUNC_ARITY3_SPARQL_STAR:274,BuiltInCall_group0:275,BOUND:276,BNODE:277,BuiltInCall_option0:278,EXISTS:279,COUNT:280,Aggregate_option0:281,Aggregate_group0:282,FUNC_AGGREGATE:283,Aggregate_option1:284,GROUP_CONCAT:285,Aggregate_option2:286,Aggregate_option3:287,GroupConcatSeparator:288,SEPARATOR:289,"=":290,String:291,LANGTAG:292,"^^":293,DECIMAL:294,DOUBLE:295,BOOLEAN:296,INTEGER_POSITIVE:297,DECIMAL_POSITIVE:298,DOUBLE_POSITIVE:299,INTEGER_NEGATIVE:300,DECIMAL_NEGATIVE:301,DOUBLE_NEGATIVE:302,STRING_LITERAL1:303,STRING_LITERAL2:304,STRING_LITERAL_LONG1:305,STRING_LITERAL_LONG2:306,PrefixedName:307,PNAME_LN:308,BLANK_NODE_LABEL:309,ANON:310,QuotedTP:311,"<<":312,qtSubjectOrObject:313,">>":314,DataValueTerm:315,AnnotationPattern:316,"{|":317,"|}":318,AnnotationPatternPath:319,ExprVarOrTerm:320,QueryOrUpdate_group0_option0:321,Prologue_repetition0_group0:322,Qry_group0_repetition_plus0:323,SelectClauseBase_option0_group0:324,DISTINCT:325,REDUCED:326,NAMED:327,SILENT:328,CLEAR:329,DROP:330,ADD:331,MOVE:332,COPY:333,ALL:334,".":335,UNION:336,"|":337,"/":338,PathElt_option0_group0:339,"?":340,"!=":341,"<":342,">":343,"<=":344,">=":345,NOT:346,CONCAT:347,COALESCE:348,SUBSTR:349,REGEX:350,REPLACE:351,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",24:"CONSTRUCT",28:"WHERE",29:"{",31:"}",32:"DESCRIBE",36:"ASK",39:"*",41:"SELECT",45:"(",47:"AS",48:")",53:"FROM",63:"GROUP",64:"BY",70:"HAVING",73:"ORDER",76:"ASC",78:"DESC",81:"LIMIT",82:"INTEGER",83:"OFFSET",85:"VALUES",87:"VAR",89:"NIL",100:"LOAD",109:"TO",110:"CREATE",112:"GRAPH",113:"INSERTDATA",115:"DELETEDATA",116:"DELETEWHERE",121:"INTO",123:"DELETE",126:"INSERT",128:"USING",131:"WITH",132:"DEFAULT",159:"OPTIONAL",160:"MINUS",161:"SERVICE",163:"FILTER",164:"BIND",174:"UNDEF",193:";",197:"a",224:"!",229:"^",231:"[",232:"]",242:"||",246:"&&",250:"IN",263:"+",265:"-",268:"FUNC_ARITY0",269:"FUNC_ARITY1",270:"FUNC_ARITY1_SPARQL_STAR",271:"FUNC_ARITY2",272:",",273:"FUNC_ARITY3",274:"FUNC_ARITY3_SPARQL_STAR",276:"BOUND",277:"BNODE",279:"EXISTS",280:"COUNT",283:"FUNC_AGGREGATE",285:"GROUP_CONCAT",289:"SEPARATOR",290:"=",292:"LANGTAG",293:"^^",294:"DECIMAL",295:"DOUBLE",296:"BOOLEAN",297:"INTEGER_POSITIVE",298:"DECIMAL_POSITIVE",299:"DOUBLE_POSITIVE",300:"INTEGER_NEGATIVE",301:"DECIMAL_NEGATIVE",302:"DOUBLE_NEGATIVE",303:"STRING_LITERAL1",304:"STRING_LITERAL2",305:"STRING_LITERAL_LONG1",306:"STRING_LITERAL_LONG2",308:"PNAME_LN",309:"BLANK_NODE_LABEL",310:"ANON",312:"<<",314:">>",317:"{|",318:"|}",325:"DISTINCT",326:"REDUCED",327:"NAMED",328:"SILENT",329:"CLEAR",330:"DROP",331:"ADD",332:"MOVE",333:"COPY",334:"ALL",335:".",336:"UNION",337:"|",338:"/",340:"?",341:"!=",342:"<",343:">",344:"<=",345:">=",346:"NOT",347:"CONCAT",348:"COALESCE",349:"SUBSTR",350:"REGEX",351:"REPLACE"},productions_:[0,[3,3],[7,2],[4,1],[11,2],[14,3],[8,4],[8,4],[8,5],[8,7],[8,5],[8,4],[17,2],[21,2],[38,2],[43,1],[43,5],[49,4],[49,4],[52,3],[19,2],[23,2],[20,3],[62,3],[66,1],[66,1],[66,3],[66,5],[66,1],[69,2],[72,3],[75,2],[75,2],[75,1],[75,1],[80,2],[80,2],[80,4],[80,4],[84,2],[86,4],[86,4],[86,6],[86,2],[94,3],[96,3],[98,4],[98,3],[98,5],[98,4],[98,2],[98,2],[98,2],[98,5],[120,2],[118,3],[118,1],[125,2],[127,3],[130,2],[108,1],[108,2],[122,2],[105,1],[105,1],[114,3],[135,2],[138,7],[143,3],[57,3],[57,3],[147,2],[150,3],[154,3],[151,1],[151,2],[151,2],[151,3],[151,4],[151,2],[151,6],[151,1],[93,1],[93,1],[165,4],[166,4],[166,6],[171,1],[171,1],[171,1],[171,1],[158,2],[79,1],[79,1],[79,1],[68,2],[176,1],[176,5],[179,1],[179,4],[25,3],[182,3],[145,2],[145,2],[188,1],[186,2],[192,2],[190,2],[195,1],[195,1],[196,2],[199,2],[156,2],[156,2],[202,2],[207,1],[207,2],[205,2],[209,2],[211,2],[214,2],[216,2],[219,2],[218,2],[220,1],[220,2],[220,3],[225,1],[225,1],[225,4],[226,1],[226,2],[187,3],[187,3],[203,3],[203,3],[200,1],[200,1],[212,1],[212,1],[234,1],[235,1],[235,1],[139,1],[139,1],[44,1],[236,1],[236,1],[236,1],[236,1],[46,1],[238,2],[241,2],[239,2],[245,2],[243,1],[243,3],[243,4],[247,2],[253,2],[253,2],[253,2],[251,2],[261,2],[259,2],[259,2],[259,2],[259,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[77,3],[67,1],[67,2],[67,4],[67,4],[67,6],[67,8],[67,8],[67,2],[67,4],[67,2],[67,4],[67,3],[267,5],[267,5],[267,6],[288,4],[172,1],[172,2],[172,3],[172,1],[172,1],[172,1],[172,1],[172,1],[172,1],[255,1],[255,1],[255,1],[257,1],[257,1],[257,1],[291,1],[291,1],[291,1],[291,1],[55,1],[55,1],[307,1],[307,1],[237,1],[237,1],[311,5],[173,5],[313,1],[313,1],[313,1],[313,1],[313,1],[315,1],[315,1],[315,1],[185,1],[185,1],[185,1],[316,3],[319,3],[266,5],[320,1],[320,1],[320,1],[223,1],[223,1],[321,0],[321,1],[5,1],[5,1],[5,1],[9,0],[9,1],[322,1],[322,1],[10,0],[10,2],[18,0],[18,2],[22,0],[22,2],[26,0],[26,2],[27,0],[27,2],[30,0],[30,1],[323,1],[323,2],[33,1],[33,1],[34,0],[34,2],[35,0],[35,1],[37,0],[37,2],[40,1],[40,2],[324,1],[324,1],[42,0],[42,1],[50,0],[50,1],[51,0],[51,1],[54,0],[54,1],[56,0],[56,1],[58,0],[58,1],[59,0],[59,1],[60,0],[60,1],[61,0],[61,1],[65,1],[65,2],[71,1],[71,2],[74,1],[74,2],[88,0],[88,2],[90,0],[90,2],[91,1],[91,2],[92,0],[92,2],[95,1],[95,2],[97,0],[97,4],[99,0],[99,2],[101,0],[101,1],[102,0],[102,1],[103,1],[103,1],[104,0],[104,1],[106,1],[106,1],[106,1],[107,0],[107,1],[111,0],[111,1],[117,0],[117,1],[119,0],[119,2],[124,0],[124,1],[129,0],[129,1],[133,0],[133,1],[134,1],[134,1],[134,1],[136,0],[136,1],[137,0],[137,2],[140,0],[140,1],[141,0],[141,1],[142,0],[142,1],[144,0],[144,3],[146,0],[146,1],[148,0],[148,1],[149,0],[149,2],[152,0],[152,1],[153,0],[153,1],[155,0],[155,3],[157,0],[157,1],[162,0],[162,1],[167,0],[167,2],[168,0],[168,2],[169,1],[169,2],[170,0],[170,2],[175,0],[175,3],[177,0],[177,1],[178,0],[178,3],[180,0],[180,3],[181,0],[181,1],[183,0],[183,3],[184,0],[184,1],[189,0],[189,1],[191,0],[191,2],[194,0],[194,1],[198,0],[198,3],[201,0],[201,1],[204,0],[204,1],[206,0],[206,2],[208,1],[208,1],[210,0],[210,3],[213,0],[213,1],[215,0],[215,3],[217,0],[217,3],[339,1],[339,1],[339,1],[221,0],[221,1],[222,0],[222,1],[227,0],[227,3],[228,0],[228,1],[230,1],[230,2],[233,1],[233,2],[240,0],[240,2],[244,0],[244,2],[248,1],[248,1],[248,1],[248,1],[248,1],[248,1],[249,0],[249,1],[252,0],[252,2],[254,1],[254,1],[256,0],[256,2],[258,0],[258,2],[260,0],[260,2],[262,1],[262,1],[275,1],[275,1],[275,1],[275,1],[275,1],[278,0],[278,1],[281,0],[281,1],[282,1],[282,1],[284,0],[284,1],[286,0],[286,1],[287,0],[287,1]],performAction:function(Oe,je,xe,Xe,$e,G,vr){var J=G.length-1;switch($e){case 1:if(G[J-1]=G[J-1]||{},tt.base&&(G[J-1].base=tt.base),tt.base="",G[J-1].prefixes=tt.prefixes,tt.prefixes=null,tt.pathOnly){if(G[J-1].type==="path"||"termType"in G[J-1])return G[J-1];throw new Error("Received full SPARQL query in path only mode")}else if(G[J-1].type==="path"||"termType"in G[J-1])throw new Error("Received only path in full SPARQL mode");if(G[J-1].type==="update"){const et={};for(const dt of G[J-1].updates)if(dt.updateType==="insert"){const Ye={};for(const Ht of dt.insert)if(Ht.type==="bgp"||Ht.type==="graph")for(const Jt of Ht.triples)Jt.subject.termType==="BlankNode"&&(Ye[Jt.subject.value]=!0),Jt.predicate.termType==="BlankNode"&&(Ye[Jt.predicate.value]=!0),Jt.object.termType==="BlankNode"&&(Ye[Jt.object.value]=!0);for(const Ht of Object.keys(Ye)){if(et[Ht])throw new Error("Detected reuse blank node across different INSERT DATA clauses");et[Ht]=!0}}}return G[J-1];case 2:this.$={...G[J-1],...G[J],type:"query"};break;case 4:tt.base=Rc(G[J]);break;case 5:tt.prefixes||(tt.prefixes={}),G[J-1]=G[J-1].substr(0,G[J-1].length-1),G[J]=Rc(G[J]),tt.prefixes[G[J-1]]=G[J];break;case 6:this.$={...G[J-3],...ri(G[J-2]),...G[J-1],...G[J]};break;case 7:if(!tt.skipValidation&&(a0(G[J-3].variables.map(dt=>i0(dt.expression))).some(dt=>dt.aggregation==="count"&&!(dt.expression instanceof bm))||G[J].group)){for(const dt of G[J-3].variables)if(dt.termType==="Variable"){if(!G[J].group||!G[J].group.map(Ye=>$s(Ye)).includes($s(dt)))throw Error("Projection of ungrouped variable (?"+$s(dt)+")")}else if(i0(dt.expression).length===0){const Ye=z5(dt.expression);for(const Ht of Ye)if(!G[J].group||!G[J].group.map||!G[J].group.map(Jt=>$s(Jt)).includes($s(Ht)))throw Error("Use of ungrouped variable in projection of operation (?"+$s(Ht)+")")}}const Hs=G[J-1].where.filter(et=>et.type==="query");if(Hs.length>0){const et=G[J-3].variables.filter(Ye=>Ye.variable&&Ye.variable.value).map(Ye=>Ye.variable.value),dt=a0(Hs.map(Ye=>Ye.variables)).map(Ye=>Ye.value||Ye.variable.value);for(const Ye of et)if(dt.indexOf(Ye)>=0)throw Error("Target id of 'AS' (?"+Ye+") already used in subquery")}this.$=Pt(G[J-3],ri(G[J-2]),G[J-1],G[J]);break;case 8:this.$=Pt({queryType:"CONSTRUCT",template:G[J-3]},ri(G[J-2]),G[J-1],G[J]);break;case 9:this.$=Pt({queryType:"CONSTRUCT",template:G[J-2]=G[J-2]?G[J-2].triples:[]},ri(G[J-5]),{where:[{type:"bgp",triples:Vs([],G[J-2])}]},G[J]);break;case 10:this.$=Pt({queryType:"DESCRIBE",variables:G[J-3]==="*"?[new bm]:G[J-3]},ri(G[J-2]),G[J-1],G[J]);break;case 11:this.$=Pt({queryType:"ASK"},ri(G[J-2]),G[J-1],G[J]);break;case 12:this.$=Pt(G[J-1],{variables:[new bm]});break;case 13:const c0=G[J].map(et=>et.value||et.variable.value),Am=$5(c0);if(Am.length>0)throw Error("Two or more of the resulting columns have the same name (?"+Am[0]+")");this.$=Pt(G[J-1],{variables:G[J]});break;case 14:this.$=Pt({queryType:"SELECT"},G[J]&&(G[J-1]=ir(G[J]),G[J]={},G[J][G[J-1]]=!0,G[J]));break;case 16:case 27:this.$=Gs(G[J-3],{variable:G[J-1]});break;case 17:case 18:this.$=Pt(G[J-3],G[J-2],G[J-1],G[J],{type:"query"});break;case 19:case 58:this.$={iri:G[J],named:!!G[J-1]};break;case 20:this.$={where:G[J].patterns};break;case 21:this.$=Pt(G[J-1],G[J]);break;case 22:this.$=Pt(G[J-2],G[J-1],G[J]);break;case 23:this.$={group:G[J]};break;case 24:case 25:case 28:case 31:case 33:case 34:this.$=Gs(G[J]);break;case 26:this.$=Gs(G[J-1]);break;case 29:this.$={having:G[J]};break;case 30:this.$={order:G[J]};break;case 32:this.$=Gs(G[J],{descending:!0});break;case 35:this.$={limit:zs(G[J])};break;case 36:this.$={offset:zs(G[J])};break;case 37:this.$={limit:zs(G[J-2]),offset:zs(G[J])};break;case 38:this.$={limit:zs(G[J]),offset:zs(G[J-2])};break;case 39:case 43:this.$={type:"values",values:G[J]};break;case 40:case 84:this.$=G[J-1].map(et=>({[G[J-3]]:et}));break;case 41:case 85:this.$=G[J-1].map(()=>({}));break;case 42:case 86:var Rn=G[J-4].length;G[J-4]=G[J-4].map(Zb),this.$=G[J-1].map(function(et){if(et.length!==Rn)throw Error("Inconsistent VALUES length");for(var dt={},Ye=0;Ye<Rn;Ye++)dt["?"+G[J-4][Ye].value]=et[Ye];return dt});break;case 44:case 65:case 100:case 126:case 175:this.$=G[J-1];break;case 45:this.$={type:"update",updates:ti(G[J-2],G[J-1])};break;case 46:this.$=Pt({type:"load",silent:!!G[J-2],source:G[J-1]},G[J]&&{destination:G[J]});break;case 47:this.$={type:ir(G[J-2]),silent:!!G[J-1],graph:G[J]};break;case 48:this.$={type:ir(G[J-4]),silent:!!G[J-3],source:G[J-2],destination:G[J]};break;case 49:this.$={type:"create",silent:!!G[J-2],graph:{type:"graph",name:G[J]}};break;case 50:this.$={updateType:"insert",insert:E2(G[J])};break;case 51:this.$={updateType:"delete",delete:s0(E2(G[J]))};break;case 52:this.$={updateType:"deletewhere",delete:s0(G[J])};break;case 53:this.$={updateType:"insertdelete",...G[J-4],...G[J-3],...ri(G[J-2],"using"),where:G[J].patterns};break;case 54:case 57:case 62:case 167:case 191:case 236:this.$=G[J];break;case 55:this.$={delete:s0(G[J-1]),insert:G[J]||[]};break;case 56:this.$={delete:[],insert:G[J]};break;case 59:this.$={graph:G[J]};break;case 60:this.$={type:"graph",default:!0};break;case 61:case 63:this.$={type:"graph",name:G[J]};break;case 64:this.$={[ir(G[J])]:!0};break;case 66:this.$=G[J-1]?Zr(G[J],[G[J-1]]):Zr(G[J]);break;case 67:var Om=Pt(G[J-3]||{triples:[]},{type:"graph",name:G[J-5]});this.$=G[J]?[Om,G[J]]:[Om];break;case 68:case 73:this.$={type:"bgp",triples:Zr(G[J-2],[G[J-1]])};break;case 69:this.$={type:"group",patterns:[G[J-1]]};break;case 70:for(const et of G[J-1].filter(dt=>dt.type==="bind")){const dt=G[J-1].indexOf(et),Ye=new Set;for(const Ht of G[J-1].slice(0,dt))(Ht.type==="group"||Ht.type==="bgp")&&A2(Ht).forEach(Jt=>Ye.add(Jt));if(Ye.has(et.variable.value))throw Error("Variable used to bind is already bound (?"+et.variable.value+")")}this.$={type:"group",patterns:G[J-1]};break;case 71:this.$=G[J-1]?Zr([G[J-1]],G[J]):Zr(G[J]);break;case 72:this.$=G[J]?[G[J-2],G[J]]:G[J-2];break;case 75:this.$=Pt(G[J],{type:"optional"});break;case 76:this.$=Pt(G[J],{type:"minus"});break;case 77:this.$=Pt(G[J],{type:"graph",name:G[J-1]});break;case 78:this.$=Pt(G[J],{type:"service",name:G[J-1],silent:!!G[J-2]});break;case 79:this.$={type:"filter",expression:G[J]};break;case 80:this.$={type:"bind",variable:G[J-1],expression:G[J-3]};break;case 89:this.$=Dc(G[J]);break;case 90:this.$=void 0;break;case 91:this.$=G[J-1].length?{type:"union",patterns:Zr(G[J-1].map(e0),[e0(G[J])])}:G[J];break;case 95:this.$={...G[J],function:G[J-1]};break;case 96:this.$={type:"functionCall",args:[]};break;case 97:this.$={type:"functionCall",args:ti(G[J-2],G[J-1]),distinct:!!G[J-3]};break;case 98:case 115:case 128:case 247:case 249:case 251:case 253:case 255:case 263:case 267:case 297:case 299:case 303:case 307:case 328:case 341:case 349:case 355:case 361:case 367:case 369:case 373:case 375:case 379:case 381:case 385:case 391:case 395:case 401:case 405:case 409:case 411:case 420:case 428:case 430:case 440:case 444:case 446:case 448:this.$=[];break;case 99:this.$=ti(G[J-2],G[J-1]);break;case 101:this.$=Zr(G[J-2],[G[J-1]]);break;case 102:case 112:this.$=u0(G[J].map(et=>Pt(gn(G[J-1]),et)));break;case 103:this.$=u0(Vs(G[J].map(et=>Pt(gn(G[J-1].entity),et)),G[J-1].triples));break;case 105:this.$=Zr([G[J-1]],G[J]);break;case 106:this.$=Zr(G[J]);break;case 107:this.$=n0(G[J-1],G[J]);break;case 109:case 237:this.$=tt.factory.namedNode(L5);break;case 110:case 118:this.$=ti(G[J-1],G[J]);break;case 111:this.$=G[J]?{annotation:G[J],object:G[J-1]}:G[J-1];break;case 113:this.$=G[J]?u0(Vs(G[J].map(et=>Pt(gn(G[J-1].entity),et)),G[J-1].triples)):G[J-1].triples;break;case 114:this.$=n0(...G[J-1],G[J]);break;case 116:this.$=n0(...G[J]);break;case 117:case 159:case 163:this.$=[G[J-1],G[J]];break;case 119:this.$=G[J]?{object:G[J-1],annotation:G[J]}:G[J-1];break;case 120:this.$=G[J-1].length?Xs("|",ti(G[J-1],G[J])):G[J];break;case 121:this.$=G[J-1].length?Xs("/",ti(G[J-1],G[J])):G[J];break;case 122:this.$=G[J]?Xs(G[J],[G[J-1]]):G[J-1];break;case 123:this.$=G[J-1]?Xs(G[J-1],[G[J]]):G[J];break;case 125:case 131:this.$=Xs(G[J-1],[G[J]]);break;case 129:this.$=Xs("|",ti(G[J-2],G[J-1]));break;case 132:case 134:this.$=G5(G[J-1]);break;case 133:case 135:this.$=X5(G[J-1]);break;case 140:this.$={entity:G[J],triples:[]};break;case 145:this.$=Zb(G[J]);break;case 149:this.$=tt.factory.namedNode(g2);break;case 151:case 153:case 158:case 162:this.$=kb(G[J-1],G[J]);break;case 152:this.$=["||",G[J]];break;case 154:this.$=["&&",G[J]];break;case 156:this.$=$t(G[J-1],[G[J-2],G[J]]);break;case 157:this.$=$t(G[J-2]?"notin":"in",[G[J-3],G[J]]);break;case 160:this.$=["+",kb(G[J-1],G[J])];break;case 161:var Sm=kr(G[J-1].value.replace("-",""),G[J-1].datatype);this.$=["-",kb(Sm,G[J])];break;case 164:this.$=$t("UPLUS",[G[J]]);break;case 165:this.$=$t(G[J-1],[G[J]]);break;case 166:this.$=$t("UMINUS",[G[J]]);break;case 177:this.$=$t(ir(G[J-1]));break;case 178:this.$=$t(ir(G[J-3]),[G[J-1]]);break;case 179:this.$=Dc($t(ir(G[J-3]),[G[J-1]]));break;case 180:this.$=$t(ir(G[J-5]),[G[J-3],G[J-1]]);break;case 181:this.$=$t(ir(G[J-7]),[G[J-5],G[J-3],G[J-1]]);break;case 182:this.$=Dc($t(ir(G[J-7]),[G[J-5],G[J-3],G[J-1]]));break;case 183:this.$=$t(ir(G[J-1]),G[J]);break;case 184:this.$=$t("bound",[Zb(G[J-1])]);break;case 185:this.$=$t(G[J-1],[]);break;case 186:this.$=$t(G[J-3],[G[J-1]]);break;case 187:this.$=$t(G[J-2]?"notexists":"exists",[e0(G[J])]);break;case 188:case 189:this.$=Gs(G[J-1],{type:"aggregate",aggregation:ir(G[J-4]),distinct:!!G[J-2]});break;case 190:this.$=Gs(G[J-2],{type:"aggregate",aggregation:ir(G[J-5]),distinct:!!G[J-3],separator:typeof G[J-1]=="string"?G[J-1]:" "});break;case 192:this.$=kr(G[J]);break;case 193:this.$=C5(G[J-1],ir(G[J].substr(1)));break;case 194:this.$=kr(G[J-2],G[J]);break;case 195:case 204:this.$=kr(G[J],m2);break;case 196:case 205:this.$=kr(G[J],b2);break;case 197:case 206:this.$=kr(ir(G[J]),v2);break;case 200:this.$=kr(G[J].toLowerCase(),B5);break;case 201:this.$=kr(G[J].substr(1),m2);break;case 202:this.$=kr(G[J].substr(1),b2);break;case 203:this.$=kr(G[J].substr(1).toLowerCase(),v2);break;case 207:case 208:this.$=w2(G[J],1);break;case 209:case 210:this.$=w2(G[J],3);break;case 211:this.$=tt.factory.namedNode(Rc(G[J]));break;case 213:var wm=G[J].indexOf(":"),Nt=G[J].substr(0,wm),en=tt.prefixes[Nt];if(!en)throw new Error("Unknown prefix: "+Nt);var ni=Rc(en+G[J].substr(wm+1));this.$=tt.factory.namedNode(ni);break;case 214:if(G[J]=G[J].substr(0,G[J].length-1),!(G[J]in tt.prefixes))throw new Error("Unknown prefix: "+G[J]);var ni=Rc(tt.prefixes[G[J]]);this.$=tt.factory.namedNode(ni);break;case 215:this.$=jc(G[J].replace(/^(_:)/,""));break;case 216:this.$=jc();break;case 217:case 218:case 232:this.$=Dc(t0(G[J-3],G[J-2],G[J-1]));break;case 230:case 231:this.$=Dc(G[J-1]);break;case 248:case 250:case 252:case 254:case 256:case 260:case 264:case 268:case 270:case 292:case 294:case 296:case 298:case 300:case 302:case 304:case 306:case 329:case 342:case 356:case 368:case 370:case 372:case 374:case 392:case 402:case 425:case 427:case 429:case 431:case 441:case 445:case 447:case 449:G[J-1].push(G[J]);break;case 259:case 269:case 291:case 293:case 295:case 301:case 305:case 371:case 424:case 426:this.$=[G[J]];break;case 308:G[J-3].push(G[J-2]);break;case 350:case 362:case 376:case 380:case 382:case 386:case 396:case 406:case 410:case 412:case 421:G[J-2].push(G[J-1]);break}},table:[t(o,i,{3:1,4:2,10:3}),{1:[3]},t(r,[2,307],{5:4,7:5,321:6,214:7,8:8,96:9,215:10,17:11,21:12,97:16,38:17,6:[2,238],13:e,16:e,45:e,197:e,224:e,229:e,308:e,24:[1,13],32:[1,14],36:[1,15],41:a}),t([6,13,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],[2,3],{322:19,11:20,14:21,12:[1,22],15:[1,23]}),{6:[1,24]},{6:[2,240]},{6:[2,241]},{6:[2,242]},{6:[2,243],9:25,84:26,85:u},{6:[2,239]},t(c,[2,411],{216:28,217:29}),t(s,[2,249],{18:30}),t(s,[2,251],{22:31}),t(l,[2,255],{25:32,27:33,29:[1,34]}),{13:f,16:d,33:35,39:[1,37],44:39,55:40,87:h,139:38,307:43,308:p,323:36},t(s,[2,267],{37:46}),t(y,[2,326],{98:47,103:49,106:50,117:55,130:61,100:[1,48],110:[1,51],113:[1,52],115:[1,53],116:[1,54],131:[1,62],329:[1,56],330:[1,57],331:[1,58],332:[1,59],333:[1,60]}),{39:[1,63],40:64,43:65,44:66,45:b,87:h},t(_,[2,273],{42:68,324:69,325:[1,70],326:[1,71]}),t(o,[2,248]),t(o,[2,245]),t(o,[2,246]),{13:[1,72]},{16:[1,73]},{1:[2,1]},{6:[2,2]},{6:[2,244]},{45:[1,77],85:[1,78],86:74,87:[1,75],89:[1,76]},t([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],[2,120],{337:[1,79]}),t(T,[2,418],{218:80,222:81,229:[1,82]}),{19:83,28:m,29:A,52:84,53:E,56:85},{19:88,28:m,29:A,52:89,53:E,56:85},t(s,[2,253],{26:90}),{28:[1,91],52:92,53:E},t(j,[2,385],{181:93,182:94,183:95,31:[2,383]}),t(X,[2,263],{34:96}),t(X,[2,261],{44:39,55:40,307:43,139:97,13:f,16:d,87:h,308:p}),t(X,[2,262]),t(K,[2,259]),t(O,[2,143]),t(O,[2,144]),t([6,13,16,28,29,31,39,45,47,48,53,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,145]),t(S,[2,211]),t(S,[2,212]),t(S,[2,213]),t(S,[2,214]),{19:98,28:m,29:A,52:99,53:E,56:85},{6:[2,309],99:100,193:[1,101]},t(L,[2,311],{101:102,328:[1,103]}),t(N,[2,317],{104:104,328:[1,105]}),t(I,[2,322],{107:106,328:[1,107]}),{111:108,112:[2,324],328:[1,109]},{29:V,114:110},{29:V,114:112},{29:V,114:113},{118:114,123:[1,115],125:116,126:re},t(Y,[2,315]),t(Y,[2,316]),t(ce,[2,319]),t(ce,[2,320]),t(ce,[2,321]),t(y,[2,327]),{13:f,16:d,55:118,307:43,308:p},t(s,[2,12]),t(s,[2,13],{44:66,43:119,45:b,87:h}),t(ae,[2,269]),t(ae,[2,15]),{13:f,16:d,44:136,45:pe,46:120,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},t(_,[2,14]),t(_,[2,274]),t(_,[2,271]),t(_,[2,272]),t(o,[2,4]),{13:[1,177]},t(Ue,[2,39]),{29:[1,178]},{29:[1,179]},{87:[1,181],91:180},{45:[1,187],87:[1,185],89:[1,186],93:182,165:183,166:184},t(c,[2,410]),t([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337],[2,121],{338:[1,188]}),{13:f,16:d,45:[1,193],55:194,197:Ce,219:189,220:190,223:191,224:[1,192],307:43,308:p},t(T,[2,419]),t(z,be,{20:196,59:197,69:198,70:we}),t(s,[2,250]),{29:Le,57:200},t(L,[2,279],{54:202,327:[1,203]}),{29:[2,282]},t(Qe,Ke,{23:204,58:205,62:206,63:Ge}),t(s,[2,252]),{19:208,28:m,29:A,52:209,53:E,56:85},{29:[1,210]},t(l,[2,256]),{31:[1,211]},{31:[2,384]},{13:f,16:d,44:215,45:nt,55:220,82:U,87:h,89:ct,145:212,172:221,185:213,187:214,231:W,236:216,237:222,255:154,257:155,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,309:ee,310:Pe,311:217,312:Ne},t(qe,[2,265],{56:85,35:227,52:228,19:229,28:m,29:A,53:E}),t(K,[2,260]),t(Qe,Ke,{58:205,62:206,23:230,63:Ge}),t(s,[2,268]),{6:[2,45]},t(o,i,{10:3,4:231}),{13:f,16:d,55:232,307:43,308:p},t(L,[2,312]),{105:233,112:lt,122:234,132:[1,237],134:235,327:[1,238],334:[1,239]},t(N,[2,318]),t(L,Qt,{108:240,133:242,112:Oc,132:Kr}),t(I,[2,323]),{112:[1,244]},{112:[2,325]},t(Lt,[2,50]),t(j,qs,{135:245,136:246,143:247,144:248,31:Sc,112:Sc}),t(Lt,[2,51]),t(Lt,[2,52]),t(Qr,[2,328],{119:249}),{29:V,114:250},t(Qr,[2,56]),{29:V,114:251},t(y,[2,59]),t(ae,[2,270]),{47:[1,252]},t(Bs,[2,150]),t(An,[2,428],{240:253}),t(Wr,[2,430],{244:254}),t(Wr,[2,155],{248:255,249:256,250:[2,438],290:[1,257],341:[1,258],342:[1,259],343:[1,260],344:[1,261],345:[1,262],346:[1,263]}),t(Dr,[2,440],{252:264}),t(vt,[2,448],{260:265}),{13:f,16:d,44:136,45:pe,55:133,67:132,68:134,77:131,82:U,87:h,172:135,255:154,257:155,264:266,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},{13:f,16:d,44:136,45:pe,55:133,67:132,68:134,77:131,82:U,87:h,172:135,255:154,257:155,264:267,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},{13:f,16:d,44:136,45:pe,55:133,67:132,68:134,77:131,82:U,87:h,172:135,255:154,257:155,264:268,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},t(vt,[2,167]),t(vt,[2,168]),t(vt,[2,169]),t(vt,[2,170],{176:269,45:Pr,89:KT}),t(vt,[2,171]),t(vt,[2,172]),t(vt,[2,173]),t(vt,[2,174]),{13:f,16:d,44:136,45:pe,46:272,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},t(xt,[2,176]),{89:[1,273]},{45:[1,274]},{45:[1,275]},{45:[1,276]},{45:[1,277]},{45:[1,278]},{45:WT,89:YT,179:279},{45:[1,282]},{45:[1,284],89:[1,283]},{279:[1,285]},t(nr,[2,192],{292:[1,286],293:[1,287]}),t(nr,[2,195]),t(nr,[2,196]),t(nr,[2,197]),t(nr,[2,198]),t(nr,[2,199]),t(nr,[2,200]),{13:f,16:d,44:39,55:40,82:U,87:h,139:289,172:291,255:154,257:155,266:290,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,320:288},{45:[1,292]},{45:[1,293]},{45:[1,294]},t(wc,[2,452]),t(wc,[2,453]),t(wc,[2,454]),t(wc,[2,455]),t(wc,[2,456]),{279:[2,458]},t(um,[2,207]),t(um,[2,208]),t(um,[2,209]),t(um,[2,210]),t(nr,[2,201]),t(nr,[2,202]),t(nr,[2,203]),t(nr,[2,204]),t(nr,[2,205]),t(nr,[2,206]),t(o,[2,5]),t(sm,[2,297],{88:295}),t(cm,[2,299],{90:296}),{48:[1,297],87:[1,298]},t(lm,[2,301]),t(Ue,[2,43]),t(Ue,[2,82]),t(Ue,[2,83]),{29:[1,299]},{29:[1,300]},{87:[1,302],169:301},t(c,[2,412]),t(Jn,[2,123]),t(Jn,[2,416],{221:303,339:304,39:[1,306],263:[1,307],340:[1,305]}),t(Yr,[2,124]),{13:f,16:d,45:[1,311],55:194,89:[1,310],197:Ce,223:312,225:308,226:309,229:ZT,307:43,308:p},t(c,e,{215:10,214:314}),t(Yr,[2,236]),t(Yr,[2,237]),t(Cs,[2,6]),t(Xb,[2,287],{60:315,72:316,73:[1,317]}),t(z,[2,286]),{13:f,16:d,45:pe,55:323,67:321,68:322,71:318,77:320,79:319,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,307:43,308:p,346:C,347:k,348:se,349:he,350:Ie,351:Me},t([6,31,63,70,73,81,83,85],[2,20]),t(j,kT,{38:17,49:324,147:325,17:326,21:327,148:328,154:329,155:330,29:dn,31:dn,85:dn,112:dn,159:dn,160:dn,161:dn,163:dn,164:dn,41:a}),{13:f,16:d,55:331,307:43,308:p},t(L,[2,280]),t(Cs,[2,7]),t(z,be,{59:197,69:198,20:332,70:we}),t(Qe,[2,284]),{64:[1,333]},t(Qe,Ke,{58:205,62:206,23:334,63:Ge}),t(s,[2,254]),t(j,qs,{144:248,30:335,143:336,31:[2,257]}),t(s,[2,100]),{31:[2,387],184:337,335:[1,338]},{13:f,16:d,44:39,55:40,87:h,139:342,186:339,190:340,195:341,197:Kn,307:43,308:p},t(Ac,[2,389],{44:39,55:40,307:43,190:340,195:341,139:342,188:344,189:345,186:346,13:f,16:d,87:h,197:Kn,308:p}),t(pn,[2,227]),t(pn,[2,228]),t(pn,[2,229]),{13:f,16:d,44:215,45:nt,55:220,82:U,87:h,89:ct,172:221,185:351,187:350,200:348,230:347,231:W,234:349,236:216,237:222,255:154,257:155,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,309:ee,310:Pe,311:217,312:Ne},{13:f,16:d,44:39,55:40,87:h,139:342,186:352,190:340,195:341,197:Kn,307:43,308:p},t(pn,[2,146]),t(pn,[2,147]),t(pn,[2,148]),t(pn,[2,149]),{13:f,16:d,44:354,55:355,82:U,87:h,172:357,237:356,255:154,257:155,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,309:ee,310:Pe,311:358,312:Ne,313:353},t(zb,[2,215]),t(zb,[2,216]),t(Qe,Ke,{58:205,62:206,23:359,63:Ge}),t(X,[2,264]),t(qe,[2,266]),t(Cs,[2,11]),t(r,[2,308],{6:[2,310]}),t(Lt,[2,313],{102:360,120:361,121:[1,362]}),t(Lt,[2,47]),t(Lt,[2,63]),t(Lt,[2,64]),{13:f,16:d,55:363,307:43,308:p},t(Lt,[2,336]),t(Lt,[2,337]),t(Lt,[2,338]),{109:[1,364]},t(e2,[2,60]),{13:f,16:d,55:365,307:43,308:p},t(L,[2,335]),{13:f,16:d,55:366,307:43,308:p},{31:[1,367]},t(Wn,[2,341],{137:368}),t(Wn,[2,340]),{13:f,16:d,44:215,45:nt,55:220,82:U,87:h,89:ct,145:369,172:221,185:213,187:214,231:W,236:216,237:222,255:154,257:155,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,309:ee,310:Pe,311:217,312:Ne},{28:[1,370],127:371,128:[1,372]},t(Qr,[2,330],{124:373,125:374,126:re}),t(Qr,[2,57]),{44:375,87:h},t(Bs,[2,151],{241:376,242:[1,377]}),t(An,[2,153],{245:378,246:[1,379]}),{13:f,16:d,44:136,45:pe,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,247:380,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},{250:[1,381]},t(qt,[2,432]),t(qt,[2,433]),t(qt,[2,434]),t(qt,[2,435]),t(qt,[2,436]),t(qt,[2,437]),{250:[2,439]},t([47,48,193,242,246,250,272,290,341,342,343,344,345,346],[2,158],{253:382,254:383,255:384,257:385,263:[1,386],265:[1,387],297:B,298:H,299:ne,300:ue,301:Te,302:Fe}),t(Dr,[2,162],{261:388,262:389,39:$b,338:Hb}),t(vt,[2,164]),t(vt,[2,165]),t(vt,[2,166]),t(xt,[2,95]),t(xt,[2,96]),t(qt,[2,377],{177:392,325:[1,393]}),{48:[1,394]},t(xt,[2,177]),{13:f,16:d,44:136,45:pe,46:395,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},{13:f,16:d,44:136,45:pe,46:396,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},{13:f,16:d,44:136,45:pe,46:397,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},{13:f,16:d,44:136,45:pe,46:398,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},{13:f,16:d,44:136,45:pe,46:399,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},t(xt,[2,183]),t(xt,[2,98]),t(qt,[2,381],{180:400}),{87:[1,401]},t(xt,[2,185]),{13:f,16:d,44:136,45:pe,46:402,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},{29:Le,57:403},t(nr,[2,193]),{13:f,16:d,55:404,307:43,308:p},{13:f,16:d,44:39,55:40,87:h,139:342,195:405,197:Kn,307:43,308:p},t(Fn,[2,233]),t(Fn,[2,234]),t(Fn,[2,235]),t(t2,[2,459],{281:406,325:[1,407]}),t(qt,[2,463],{284:408,325:[1,409]}),t(qt,[2,465],{286:410,325:[1,411]}),{13:f,16:d,31:[1,412],55:414,82:U,171:413,172:415,173:416,174:fm,255:154,257:155,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:dm},{31:[1,419],89:[1,420]},{29:[1,421]},t(lm,[2,302]),t(sm,[2,367],{167:422}),t(cm,[2,369],{168:423}),{48:[1,424],87:[1,425]},t(lm,[2,371]),t(Jn,[2,122]),t(Jn,[2,417]),t(Jn,[2,413]),t(Jn,[2,414]),t(Jn,[2,415]),t(Yr,[2,125]),t(Yr,[2,127]),t(Yr,[2,128]),t(r2,[2,420],{227:426}),t(Yr,[2,130]),{13:f,16:d,55:194,197:Ce,223:427,307:43,308:p},{48:[1,428]},t(En,[2,289],{61:429,80:430,81:[1,431],83:[1,432]}),t(Xb,[2,288]),{64:[1,433]},t(z,[2,29],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:434,13:f,16:d,45:pe,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,276:q,277:w,279:D,280:g,283:F,285:M,308:p,346:C,347:k,348:se,349:he,350:Ie,351:Me}),t(n2,[2,293]),t(Jb,[2,92]),t(Jb,[2,93]),t(Jb,[2,94]),{45:Pr,89:KT,176:269},{31:[1,435]},{31:[1,436]},{19:437,28:m,29:A,56:85},{19:438,28:m,29:A,56:85},t(Yn,[2,355],{149:439}),t(Yn,[2,354]),{13:f,16:d,44:215,45:pm,55:220,82:U,87:h,89:ct,156:440,172:221,185:441,203:442,231:hm,236:216,237:222,255:154,257:155,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,309:ee,310:Pe,311:217,312:Ne},t(X,[2,19]),t(En,[2,21]),{13:f,16:d,44:450,45:i2,55:323,65:445,66:446,67:447,68:448,87:h,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,307:43,308:p,346:C,347:k,348:se,349:he,350:Ie,351:Me},t(Cs,[2,8]),{31:[1,451]},{31:[2,258]},{31:[2,101]},t(j,[2,386],{31:[2,388]}),t(Ac,[2,102]),t(Zn,[2,391],{191:452}),t(j,[2,395],{196:453,198:454}),t(j,[2,108]),t(j,[2,109]),t(Ac,[2,103]),t(Ac,[2,104]),t(Ac,[2,390]),{13:f,16:d,44:215,45:nt,48:[1,455],55:220,82:U,87:h,89:ct,172:221,185:351,187:350,200:456,231:W,234:349,236:216,237:222,255:154,257:155,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,309:ee,310:Pe,311:217,312:Ne},t(ym,[2,424]),t(a2,[2,136]),t(a2,[2,137]),t(Kb,[2,140]),{232:[1,457]},{13:f,16:d,44:39,55:40,87:h,139:342,195:458,197:Kn,307:43,308:p},t(Fn,[2,219]),t(Fn,[2,220]),t(Fn,[2,221]),t(Fn,[2,222]),t(Fn,[2,223]),t(Cs,[2,10]),t(Lt,[2,46]),t(Lt,[2,314]),{112:lt,122:459},t(Lt,[2,62]),t(L,Qt,{133:242,108:460,112:Oc,132:Kr}),t(e2,[2,61]),t(Lt,[2,49]),t([6,28,126,128,193],[2,65]),{31:[2,66],112:[1,462],138:461},t(Wn,[2,351],{146:463,335:[1,464]}),{29:Le,57:465},t(Qr,[2,329]),t(L,[2,332],{129:466,327:[1,467]}),t(Qr,[2,55]),t(Qr,[2,331]),{48:[1,468]},t(An,[2,429]),{13:f,16:d,44:136,45:pe,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,239:469,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},t(Wr,[2,431]),{13:f,16:d,44:136,45:pe,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,243:470,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},t(Wr,[2,156]),{45:WT,89:YT,179:471},t(Dr,[2,441]),{13:f,16:d,44:136,45:pe,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,251:472,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},t(vt,[2,444],{256:473}),t(vt,[2,446],{258:474}),t(qt,[2,442]),t(qt,[2,443]),t(vt,[2,449]),{13:f,16:d,44:136,45:pe,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,255:154,257:155,259:475,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},t(qt,[2,450]),t(qt,[2,451]),t(qt,[2,379],{178:476}),t(qt,[2,378]),t([6,13,16,29,31,39,45,47,48,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,175]),{48:[1,477]},{48:[1,478]},{272:[1,479]},{272:[1,480]},{272:[1,481]},{13:f,16:d,44:136,45:pe,46:482,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},{48:[1,483]},{48:[1,484]},t(xt,[2,187]),t(nr,[2,194]),{13:f,16:d,44:39,55:40,82:U,87:h,139:289,172:291,255:154,257:155,266:290,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,320:485},{13:f,16:d,39:[1,487],44:136,45:pe,46:488,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,282:486,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},t(t2,[2,460]),{13:f,16:d,44:136,45:pe,46:489,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},t(qt,[2,464]),{13:f,16:d,44:136,45:pe,46:490,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},t(qt,[2,466]),t(Ue,[2,40]),t(sm,[2,298]),t(Fc,[2,87]),t(Fc,[2,88]),t(Fc,[2,89]),t(Fc,[2,90]),{13:f,16:d,55:492,82:U,172:493,255:154,257:155,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,311:494,312:Ne,315:491},t(Ue,[2,41]),t(cm,[2,300]),t(Ec,[2,303],{92:495}),{13:f,16:d,31:[1,496],55:414,82:U,171:497,172:415,173:416,174:fm,255:154,257:155,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:dm},{31:[1,498],89:[1,499]},{29:[1,500]},t(lm,[2,372]),{13:f,16:d,48:[2,422],55:194,197:Ce,223:312,226:502,228:501,229:ZT,307:43,308:p},t(Yr,[2,131]),t(Yr,[2,126]),t(En,[2,22]),t(En,[2,290]),{82:[1,503]},{82:[1,504]},{13:f,16:d,44:510,45:pe,55:323,67:321,68:322,74:505,75:506,76:o2,77:320,78:u2,79:509,87:h,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,307:43,308:p,346:C,347:k,348:se,349:he,350:Ie,351:Me},t(n2,[2,294]),t(s2,[2,69]),t(s2,[2,70]),t(z,be,{59:197,69:198,20:511,70:we}),t(Qe,Ke,{58:205,62:206,23:512,63:Ge}),{29:[2,375],31:[2,71],84:522,85:u,112:[1,518],150:513,151:514,158:515,159:[1,516],160:[1,517],161:[1,519],163:[1,520],164:[1,521],175:523},t(Yn,[2,363],{157:524,335:[1,525]}),t(c,e,{215:10,202:526,205:527,208:528,214:529,44:530,87:h}),t(_m,[2,399],{215:10,205:527,208:528,214:529,44:530,204:531,202:532,13:e,16:e,45:e,197:e,224:e,229:e,308:e,87:h}),{13:f,16:d,44:215,45:pm,55:220,82:U,87:h,89:ct,172:221,185:351,203:536,212:534,231:hm,233:533,234:535,236:216,237:222,255:154,257:155,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,309:ee,310:Pe,311:217,312:Ne},t(c,e,{215:10,205:527,208:528,214:529,44:530,202:537,87:h}),t(Qe,[2,23],{307:43,267:139,275:146,278:149,55:323,67:447,68:448,44:450,66:538,13:f,16:d,45:i2,87:h,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,276:q,277:w,279:D,280:g,283:F,285:M,308:p,346:C,347:k,348:se,349:he,350:Ie,351:Me}),t(kn,[2,291]),t(kn,[2,24]),t(kn,[2,25]),{13:f,16:d,44:136,45:pe,46:539,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},t(kn,[2,28]),t(Qe,Ke,{58:205,62:206,23:540,63:Ge}),t([31,112,232,318,335],[2,105],{192:541,193:[1,542]}),t(Zn,[2,107]),{13:f,16:d,44:215,45:nt,55:220,82:U,87:h,89:ct,172:221,185:351,187:350,199:543,200:544,231:W,234:349,236:216,237:222,255:154,257:155,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,309:ee,310:Pe,311:217,312:Ne},t(c2,[2,132]),t(ym,[2,425]),t(c2,[2,133]),{13:f,16:d,44:354,55:355,82:U,87:h,172:357,237:356,255:154,257:155,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,309:ee,310:Pe,311:358,312:Ne,313:545},t(Lt,[2,54]),t(Lt,[2,48]),t(Wn,[2,342]),{13:f,16:d,44:39,55:40,87:h,139:546,307:43,308:p},t(Wn,[2,68]),t(j,[2,350],{31:l2,112:l2}),t(Lt,[2,53]),{13:f,16:d,55:547,307:43,308:p},t(L,[2,333]),t(ae,[2,16]),t(An,[2,152]),t(Wr,[2,154]),t(Wr,[2,157]),t(Dr,[2,159]),t(Dr,[2,160],{262:389,261:548,39:$b,338:Hb}),t(Dr,[2,161],{262:389,261:549,39:$b,338:Hb}),t(vt,[2,163]),{13:f,16:d,44:136,45:pe,46:550,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},t(xt,[2,178]),t(xt,[2,179]),{13:f,16:d,44:136,45:pe,46:551,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},{13:f,16:d,44:136,45:pe,46:552,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},{13:f,16:d,44:136,45:pe,46:553,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},{48:[1,554],272:[1,555]},t(xt,[2,184]),t(xt,[2,186]),{314:[1,556]},{48:[1,557]},{48:[2,461]},{48:[2,462]},{48:[1,558]},{48:[2,467],193:[1,561],287:559,288:560},{13:f,16:d,55:194,197:Ce,223:562,307:43,308:p},t(Wb,[2,224]),t(Wb,[2,225]),t(Wb,[2,226]),{31:[1,563],45:f2,94:564},t(Ue,[2,84]),t(sm,[2,368]),t(Ue,[2,85]),t(cm,[2,370]),t(Ec,[2,373],{170:566}),{48:[1,567]},{48:[2,423],337:[1,568]},t(En,[2,35],{83:[1,569]}),t(En,[2,36],{81:[1,570]}),t(Xb,[2,30],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:509,44:510,75:571,13:f,16:d,45:pe,76:o2,78:u2,87:h,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,276:q,277:w,279:D,280:g,283:F,285:M,308:p,346:C,347:k,348:se,349:he,350:Ie,351:Me}),t(Qs,[2,295]),{45:pe,77:572},{45:pe,77:573},t(Qs,[2,33]),t(Qs,[2,34]),{31:[2,275],50:574,84:575,85:u},{31:[2,277],51:576,84:577,85:u},t(Yn,[2,356]),t(d2,[2,357],{152:578,335:[1,579]}),t(hn,[2,74]),{29:Le,57:580},{29:Le,57:581},{13:f,16:d,44:39,55:40,87:h,139:582,307:43,308:p},t(p2,[2,365],{162:583,328:[1,584]}),{13:f,16:d,45:pe,55:323,67:321,68:322,77:320,79:585,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,307:43,308:p,346:C,347:k,348:se,349:he,350:Ie,351:Me},{45:[1,586]},t(hn,[2,81]),{29:Le,57:587},t(Yn,[2,73]),t(j,[2,362],{29:yn,31:yn,85:yn,112:yn,159:yn,160:yn,161:yn,163:yn,164:yn}),t(_m,[2,112]),t(Us,[2,401],{206:588}),t(j,[2,405],{209:589,210:590}),t(j,[2,403]),t(j,[2,404]),t(_m,[2,113]),t(_m,[2,400]),{13:f,16:d,44:215,45:pm,48:[1,591],55:220,82:U,87:h,89:ct,172:221,185:351,203:536,212:592,231:hm,234:535,236:216,237:222,255:154,257:155,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,309:ee,310:Pe,311:217,312:Ne},t(ym,[2,426]),t(Kb,[2,138]),t(Kb,[2,139]),{232:[1,593]},t(kn,[2,292]),{47:[1,595],48:[1,594]},t(Cs,[2,9]),t(Zn,[2,392]),t(Zn,[2,393],{44:39,55:40,307:43,195:341,139:342,194:596,190:597,13:f,16:d,87:h,197:Kn,308:p}),t(Zn,[2,110],{272:[1,598]}),t(gm,[2,397],{201:599,316:600,317:[1,601]}),{314:[1,602]},{29:[1,603]},t(Qr,[2,58]),t(vt,[2,445]),t(vt,[2,447]),{48:[1,604],272:[1,605]},{48:[1,606]},{272:[1,607]},{272:[1,608]},t(xt,[2,99]),t(qt,[2,382]),t([13,16,39,47,48,87,193,197,242,246,250,263,265,272,290,297,298,299,300,301,302,308,314,338,341,342,343,344,345,346],[2,232]),t(xt,[2,188]),t(xt,[2,189]),{48:[1,609]},{48:[2,468]},{289:[1,610]},{13:f,16:d,55:492,82:U,172:493,255:154,257:155,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,311:494,312:Ne,315:611},t(Ue,[2,42]),t(Ec,[2,304]),{13:f,16:d,55:414,82:U,95:612,171:613,172:415,173:416,174:fm,255:154,257:155,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:dm},{31:[1,614],45:f2,94:615},t(Yr,[2,129]),t(r2,[2,421]),{82:[1,616]},{82:[1,617]},t(Qs,[2,296]),t(Qs,[2,31]),t(Qs,[2,32]),{31:[2,17]},{31:[2,276]},{31:[2,18]},{31:[2,278]},t(j,kT,{155:330,153:618,154:619,29:_n,31:_n,85:_n,112:_n,159:_n,160:_n,161:_n,163:_n,164:_n}),t(d2,[2,358]),t(hn,[2,75]),t(hn,[2,76]),{29:Le,57:620},{13:f,16:d,44:39,55:40,87:h,139:621,307:43,308:p},t(p2,[2,366]),t(hn,[2,79]),{13:f,16:d,44:136,45:pe,46:622,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},t(hn,[2,91],{336:[1,623]}),t([29,31,85,112,159,160,161,163,164,232,318,335],[2,114],{207:624,193:[1,625]}),t(Us,[2,117]),{13:f,16:d,44:215,45:pm,55:220,82:U,87:h,89:ct,172:221,185:351,203:536,211:626,212:627,231:hm,234:535,236:216,237:222,255:154,257:155,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,309:ee,310:Pe,311:217,312:Ne},t(pn,[2,134]),t(ym,[2,427]),t(pn,[2,135]),t(kn,[2,26]),{44:628,87:h},t(Zn,[2,106]),t(Zn,[2,394]),t(j,[2,396]),t(gm,[2,111]),t(gm,[2,398]),{13:f,16:d,44:39,55:40,87:h,139:342,186:629,190:340,195:341,197:Kn,307:43,308:p},t(zb,[2,217]),t(j,qs,{144:248,140:630,143:631,31:[2,343]}),t(xt,[2,97]),t(qt,[2,380]),t(xt,[2,180]),{13:f,16:d,44:136,45:pe,46:632,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},{13:f,16:d,44:136,45:pe,46:633,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:le,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:te,266:137,267:139,268:de,269:Ee,270:Re,271:De,273:fe,274:_e,275:146,276:q,277:w,278:149,279:D,280:g,283:F,285:M,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:R,346:C,347:k,348:se,349:he,350:Ie,351:Me},t(xt,[2,190]),{290:[1,634]},{314:[1,635]},{13:f,16:d,48:[1,636],55:414,82:U,171:637,172:415,173:416,174:fm,255:154,257:155,291:150,294:Q,295:x,296:$,297:B,298:H,299:ne,300:ue,301:Te,302:Fe,303:Z,304:oe,305:P,306:v,307:43,308:p,312:dm},t(h2,[2,305]),t(Ue,[2,86]),t(Ec,[2,374]),t(En,[2,37]),t(En,[2,38]),t(Yn,[2,72]),t(Yn,[2,360]),t(hn,[2,77]),{29:Le,57:638},{47:[1,639]},{29:[2,376]},t(Us,[2,402]),t(Us,[2,115],{215:10,208:528,214:529,44:530,205:640,13:e,16:e,45:e,197:e,224:e,229:e,308:e,87:h}),t(Us,[2,118],{272:[1,641]}),t(mm,[2,407],{213:642,319:643,317:[1,644]}),{48:[1,645]},{318:[1,646]},{31:[1,647]},{31:[2,344]},{48:[1,648]},{48:[1,649]},{291:650,303:Z,304:oe,305:P,306:v},t(Fc,[2,218]),t(Ec,[2,44]),t(h2,[2,306]),t(hn,[2,78]),{44:651,87:h},t(Us,[2,116]),t(j,[2,406]),t(mm,[2,119]),t(mm,[2,408]),t(c,e,{215:10,205:527,208:528,214:529,44:530,202:652,87:h}),t(kn,[2,27]),t(gm,[2,230]),t(y2,[2,345],{141:653,335:[1,654]}),t(xt,[2,181]),t(xt,[2,182]),{48:[2,191]},{48:[1,655]},{318:[1,656]},t(j,qs,{144:248,142:657,143:658,31:_2,112:_2}),t(y2,[2,346]),t(hn,[2,80]),t(mm,[2,231]),t(Wn,[2,67]),t(Wn,[2,348])],defaultActions:{5:[2,240],6:[2,241],7:[2,242],9:[2,239],24:[2,1],25:[2,2],26:[2,244],87:[2,282],94:[2,384],100:[2,45],109:[2,325],166:[2,458],263:[2,439],336:[2,258],337:[2,101],487:[2,461],488:[2,462],560:[2,468],574:[2,17],575:[2,276],576:[2,18],577:[2,278],623:[2,376],631:[2,344],650:[2,191]},parseError:function(Oe,je){if(je.recoverable)this.trace(Oe);else{var xe=new Error(Oe);throw xe.hash=je,xe}},parse:function(Oe){var je=this,xe=[0],Xe=[null],$e=[],G=this.table,vr="",J=0,Rn=0,Om=2,Sm=1,wm=$e.slice.call(arguments,1),Nt=Object.create(this.lexer),en={yy:{}};for(var ni in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ni)&&(en.yy[ni]=this.yy[ni]);Nt.setInput(Oe,en.yy),en.yy.lexer=Nt,en.yy.parser=this,typeof Nt.yylloc>"u"&&(Nt.yylloc={});var Hs=Nt.yylloc;$e.push(Hs);var c0=Nt.options&&Nt.options.ranges;typeof en.yy.parseError=="function"?this.parseError=en.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var Am=function(){var Js;return Js=Nt.lex()||Sm,typeof Js!="number"&&(Js=je.symbols_[Js]||Js),Js},et,dt,Ye,Ht,Jt={},Fm,mn,R2,Em;;){if(dt=xe[xe.length-1],this.defaultActions[dt]?Ye=this.defaultActions[dt]:((et===null||typeof et>"u")&&(et=Am()),Ye=G[dt]&&G[dt][et]),typeof Ye>"u"||!Ye.length||!Ye[0]){var l0="";Em=[];for(Fm in G[dt])this.terminals_[Fm]&&Fm>Om&&Em.push("'"+this.terminals_[Fm]+"'");Nt.showPosition?l0="Parse error on line "+(J+1)+`:
`+Nt.showPosition()+`
Expecting `+Em.join(", ")+", got '"+(this.terminals_[et]||et)+"'":l0="Parse error on line "+(J+1)+": Unexpected "+(et==Sm?"end of input":"'"+(this.terminals_[et]||et)+"'"),this.parseError(l0,{text:Nt.match,token:this.terminals_[et]||et,line:Nt.yylineno,loc:Hs,expected:Em})}if(Ye[0]instanceof Array&&Ye.length>1)throw new Error("Parse Error: multiple actions possible at state: "+dt+", token: "+et);switch(Ye[0]){case 1:xe.push(et),Xe.push(Nt.yytext),$e.push(Nt.yylloc),xe.push(Ye[1]),et=null,Rn=Nt.yyleng,vr=Nt.yytext,J=Nt.yylineno,Hs=Nt.yylloc;break;case 2:if(mn=this.productions_[Ye[1]][1],Jt.$=Xe[Xe.length-mn],Jt._$={first_line:$e[$e.length-(mn||1)].first_line,last_line:$e[$e.length-1].last_line,first_column:$e[$e.length-(mn||1)].first_column,last_column:$e[$e.length-1].last_column},c0&&(Jt._$.range=[$e[$e.length-(mn||1)].range[0],$e[$e.length-1].range[1]]),Ht=this.performAction.apply(Jt,[vr,Rn,J,en.yy,Ye[1],Xe,$e].concat(wm)),typeof Ht<"u")return Ht;mn&&(xe=xe.slice(0,-1*mn*2),Xe=Xe.slice(0,-1*mn),$e=$e.slice(0,-1*mn)),xe.push(this.productions_[Ye[1]][0]),Xe.push(Jt.$),$e.push(Jt._$),R2=G[xe[xe.length-2]][xe[xe.length-1]],xe.push(R2);break;case 3:return!0}}return!0}},bm=$x().Wildcard,vm="http://www.w3.org/1999/02/22-rdf-syntax-ns#",L5=vm+"type",x5=vm+"first",q5=vm+"rest",g2=vm+"nil",Tm="http://www.w3.org/2001/XMLSchema#",m2=Tm+"integer",b2=Tm+"decimal",v2=Tm+"double",B5=Tm+"boolean",ei="",T2="",O2="";function ir(Se){return Se.toLowerCase()}function ti(Se,Oe){return Se.push(Oe),Se}function Vs(Se,Oe){return Se.push.apply(Se,Oe),Se}function Pt(Se){Se||(Se={});for(var Oe=1,je=arguments.length,xe;Oe<je&&(xe=arguments[Oe]||{});Oe++)for(var Xe in xe)Se[Xe]=xe[Xe];return Se}function Zr(){for(var Se=[],Oe=0,je=arguments.length;Oe<je;Oe++)Se=Se.concat.apply(Se,arguments[Oe]);return Se}function Rc(Se){if(Se[0]==="<"&&(Se=Se.substring(1,Se.length-1)),/^[a-z][a-z0-9.+-]*:/i.test(Se))return Se;if(!tt.base)throw new Error("Cannot resolve relative IRI "+Se+" because no base IRI was set.");switch(ei!==tt.base&&(ei=tt.base,T2=ei.replace(/[^\/:]*$/,""),O2=ei.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),Se[0]){case void 0:return ei;case"#":return ei+Se;case"?":return ei.replace(/(?:\?.*)?$/,Se);case"/":return O2+Se;default:return T2+Se}}function Zb(Se){if(Se){var Oe=Se[0];if(Oe==="?"||Oe==="$")return tt.factory.variable(Se.substr(1))}return Se}function $t(Se,Oe){return{type:"operation",operator:Se,args:Oe||[]}}function Gs(Se,Oe){var je={expression:Se==="*"?new bm:Se};if(Oe)for(var xe in Oe)je[xe]=Oe[xe];return je}function Xs(Se,Oe){return{type:"path",pathType:Se,items:Oe}}function kb(Se,Oe){for(var je=0,xe=Oe.length,Xe;je<xe&&(Xe=Oe[je]);je++)Se=$t(Xe[0],[Se,Xe[1]]);return Se}function ri(Se,Oe){var je=[],xe=[],Xe=Se.length,$e,G={};if(!Xe)return null;for(var vr=0;vr<Xe&&($e=Se[vr]);vr++)($e.named?xe:je).push($e.iri);return G[Oe||"from"]={default:je,named:xe},G}function zs(Se){return parseInt(Se,10)}function e0(Se){return Se.type==="group"&&Se.patterns.length===1?Se.patterns[0]:Se}function kr(Se,Oe){return Oe&&Oe.termType!=="NamedNode"&&(Oe=tt.factory.namedNode(Oe)),tt.factory.literal(Se,Oe)}function C5(Se,Oe){return tt.factory.literal(Se,Oe)}function t0(Se,Oe,je){if(!("termType"in Oe))throw new Error("Nested triples cannot contain paths");return tt.factory.quad(Se,Oe,je)}function gn(Se,Oe,je,xe){var Xe={};return Se!=null&&(Xe.subject=Se),Oe!=null&&(Xe.predicate=Oe),je!=null&&(Xe.object=je),xe!=null&&(Xe.annotations=xe),Xe}function jc(Se){return typeof Se=="string"?Se.startsWith("e_")?tt.factory.blankNode(Se):tt.factory.blankNode("e_"+Se):tt.factory.blankNode("g_"+S2++)}var S2=0;tt._resetBlanks=function(){S2=0};var Q5=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,U5={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:`
`,r:"\r",f:"\f"},V5=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,r0=String.fromCharCode;function w2(Se,Oe){Se=Se.substring(Oe,Se.length-Oe);try{Se=Se.replace(Q5,function(je,xe,Xe,$e){var G;if(xe){if(G=parseInt(xe,16),isNaN(G))throw new Error;return r0(G)}else if(Xe){if(G=parseInt(Xe,16),isNaN(G))throw new Error;return G<65535?r0(G):r0(55296+((G-=65536)>>10),56320+(G&1023))}else{var vr=U5[$e];if(!vr)throw new Error;return vr}})}catch{return""}if(V5.exec(Se))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+Se);return Se}function G5(Se){var Oe=jc(),je=Oe,xe=[],Xe,$e=[];Se.forEach(function(Rn){xe.push(Rn.entity),Vs($e,Rn.triples)});for(var G=0,vr=0,J=xe.length,Xe=Array(J*2);G<J;)Xe[vr++]=gn(je,tt.factory.namedNode(x5),xe[G]),Xe[vr++]=gn(je,tt.factory.namedNode(q5),je=++G<J?jc():tt.factory.namedNode(g2));return{entity:Oe,triples:Vs(Xe,$e)}}function X5(Se){var Oe=jc();return{entity:Oe,triples:Se.map(function(je){return Pt(gn(Oe),je)})}}function n0(Se,Oe,je){var xe=[],Xe=[];return Oe.forEach(function($e){let G=null;$e.annotation&&(G=$e.annotation,$e=$e.object),xe.push(gn(null,Se,$e.entity,G)),Vs(Xe,$e.triples)}),Zr(xe,je||[],Xe)}function $s(Se){return Se.variable?Se.variable.value:Se.value||Se.expression.value}function i0(Se){if(!Se)return[];if(Se.type==="aggregate")return[Se];if(Se.type==="operation"){const Oe=[];for(const je of Se.args)Oe.push(...i0(je));return Oe}return[]}function z5(Se){const Oe=new Set,je=function(xe){xe&&(xe.termType==="Variable"?Oe.add(xe):xe.type==="operation"&&xe.args.forEach(je))};return je(Se),Oe}function a0(Se,Oe=1,je=[]){for(const xe of Se)Oe>0&&xe instanceof Array?a0(xe,Oe-1,je):je.push(xe);return je}function o0(Se){return Se.termType==="Variable"}function A2(Se){if(Se.triples){const Oe=[];for(const je of Se.triples)o0(je.subject)&&Oe.push(je.subject.value),o0(je.predicate)&&Oe.push(je.predicate.value),o0(je.object)&&Oe.push(je.object.value);return Oe}else if(Se.patterns){const Oe=[];for(const je of Se.patterns)Oe.push(...A2(je));return Oe}return[]}function $5(Se){const Oe=Se.slice().sort(),je=[];for(let xe=0;xe<Oe.length-1;xe++)Oe[xe+1]==Oe[xe]&&je.push(Oe[xe]);return je}function Dc(Se){if(!tt.sparqlStar)throw new Error("SPARQL-star support is not enabled");return Se}function F2(Se,Oe,je){for(const xe of Oe){const Xe=gn("subject"in xe?xe.subject:Se,xe.predicate,xe.object);je.push(Xe),xe.annotations&&F2(t0(Se,xe.predicate,xe.object),xe.annotations,je)}}function u0(Se){if(tt.sparqlStar){const Oe=[];return Se.forEach(je=>{const xe=gn(je.subject,je.predicate,je.object);Oe.push(xe),je.annotations&&F2(t0(je.subject,je.predicate,je.object),je.annotations,Oe)}),Oe}return Se}function E2(Se){for(const Oe of Se){if(Oe.type==="graph"&&Oe.name.termType==="Variable")throw new Error("Detected illegal variable in GRAPH");if(Oe.type==="bgp"||Oe.type==="graph"){for(const je of Oe.triples)if(je.subject.termType==="Variable"||je.predicate.termType==="Variable"||je.object.termType==="Variable")throw new Error("Detected illegal variable in BGP")}}return Se}function s0(Se){for(const Oe of Se)if(Oe.type==="bgp"){for(const je of Oe.triples)if(je.subject.termType==="BlankNode"||je.predicate.termType==="BlankNode"||je.object.termType==="BlankNode")throw new Error("Detected illegal blank node in BGP")}return Se}var H5=(function(){var Se={EOF:1,parseError:function(je,xe){if(this.yy.parser)this.yy.parser.parseError(je,xe);else throw new Error(je)},setInput:function(Oe,je){return this.yy=je||this.yy||{},this._input=Oe,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Oe=this._input[0];this.yytext+=Oe,this.yyleng++,this.offset++,this.match+=Oe,this.matched+=Oe;var je=Oe.match(/(?:\r\n?|\n).*/g);return je?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Oe},unput:function(Oe){var je=Oe.length,xe=Oe.split(/(?:\r\n?|\n)/g);this._input=Oe+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-je),this.offset-=je;var Xe=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),xe.length-1&&(this.yylineno-=xe.length-1);var $e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:xe?(xe.length===Xe.length?this.yylloc.first_column:0)+Xe[Xe.length-xe.length].length-xe[0].length:this.yylloc.first_column-je},this.options.ranges&&(this.yylloc.range=[$e[0],$e[0]+this.yyleng-je]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Oe){this.unput(this.match.slice(Oe))},pastInput:function(){var Oe=this.matched.substr(0,this.matched.length-this.match.length);return(Oe.length>20?"...":"")+Oe.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Oe=this.match;return Oe.length<20&&(Oe+=this._input.substr(0,20-Oe.length)),(Oe.substr(0,20)+(Oe.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Oe=this.pastInput(),je=new Array(Oe.length+1).join("-");return Oe+this.upcomingInput()+`
`+je+"^"},test_match:function(Oe,je){var xe,Xe,$e;if(this.options.backtrack_lexer&&($e={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&($e.yylloc.range=this.yylloc.range.slice(0))),Xe=Oe[0].match(/(?:\r\n?|\n).*/g),Xe&&(this.yylineno+=Xe.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Xe?Xe[Xe.length-1].length-Xe[Xe.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Oe[0].length},this.yytext+=Oe[0],this.match+=Oe[0],this.matches=Oe,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Oe[0].length),this.matched+=Oe[0],xe=this.performAction.call(this,this.yy,this,je,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),xe)return xe;if(this._backtrack){for(var G in $e)this[G]=$e[G];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Oe,je,xe,Xe;this._more||(this.yytext="",this.match="");for(var $e=this._currentRules(),G=0;G<$e.length;G++)if(xe=this._input.match(this.rules[$e[G]]),xe&&(!je||xe[0].length>je[0].length)){if(je=xe,Xe=G,this.options.backtrack_lexer){if(Oe=this.test_match(xe,$e[G]),Oe!==!1)return Oe;if(this._backtrack){je=!1;continue}else return!1}else if(!this.options.flex)break}return je?(Oe=this.test_match(je,$e[Xe]),Oe!==!1?Oe:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var je=this.next();return je||this.lex()},begin:function(je){this.conditionStack.push(je)},popState:function(){var je=this.conditionStack.length-1;return je>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(je){return je=this.conditionStack.length-1-Math.abs(je||0),je>=0?this.conditionStack[je]:"INITIAL"},pushState:function(je){this.begin(je)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(je,xe,Xe,$e){switch(Xe){case 0:break;case 1:return 12;case 2:return 15;case 3:return 41;case 4:return 325;case 5:return 326;case 6:return 45;case 7:return 47;case 8:return 48;case 9:return 39;case 10:return 24;case 11:return 28;case 12:return 29;case 13:return 31;case 14:return 32;case 15:return 36;case 16:return 53;case 17:return 327;case 18:return 63;case 19:return 64;case 20:return 70;case 21:return 73;case 22:return 76;case 23:return 78;case 24:return 81;case 25:return 83;case 26:return 85;case 27:return 193;case 28:return 100;case 29:return 328;case 30:return 121;case 31:return 329;case 32:return 330;case 33:return 110;case 34:return 331;case 35:return 109;case 36:return 332;case 37:return 333;case 38:return 113;case 39:return 115;case 40:return 116;case 41:return 131;case 42:return 123;case 43:return 126;case 44:return 128;case 45:return 132;case 46:return 112;case 47:return 334;case 48:return 335;case 49:return 159;case 50:return 161;case 51:return 164;case 52:return 174;case 53:return 160;case 54:return 336;case 55:return 163;case 56:return 312;case 57:return 314;case 58:return 317;case 59:return 318;case 60:return 272;case 61:return 197;case 62:return 337;case 63:return 338;case 64:return 229;case 65:return 340;case 66:return 263;case 67:return 224;case 68:return 231;case 69:return 232;case 70:return 242;case 71:return 246;case 72:return 290;case 73:return 341;case 74:return 342;case 75:return 343;case 76:return 344;case 77:return 345;case 78:return 250;case 79:return 346;case 80:return 265;case 81:return 276;case 82:return 277;case 83:return 268;case 84:return 269;case 85:return 270;case 86:return 271;case 87:return 347;case 88:return 348;case 89:return 273;case 90:return 274;case 91:return 350;case 92:return 349;case 93:return 351;case 94:return 279;case 95:return 280;case 96:return 283;case 97:return 285;case 98:return 289;case 99:return 293;case 100:return 296;case 101:return 13;case 102:return 16;case 103:return 308;case 104:return 309;case 105:return 87;case 106:return 292;case 107:return 82;case 108:return 294;case 109:return 295;case 110:return 297;case 111:return 298;case 112:return 299;case 113:return 300;case 114:return 301;case 115:return 302;case 116:return"EXPONENT";case 117:return 303;case 118:return 304;case 119:return 305;case 120:return 306;case 121:return 89;case 122:return 310;case 123:return 6;case 124:return"INVALID";case 125:console.log(xe.yytext);break}},rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:\{\|)/i,/^(?:\|\})/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(SUBJECT|PREDICATE|OBJECT|isTRIPLE))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:TRIPLE)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],inclusive:!0}}};return Se})();Yb.lexer=H5;function tt(){this.yy={}}return tt.prototype=Yb,Yb.Parser=tt,new tt})();return s1=n,s1}var c1,YS;function JB(){if(YS)return c1;YS=1;var n="http://www.w3.org/2001/XMLSchema#integer",t="http://www.w3.org/2001/XMLSchema#string";function o(d){this._options=d=d||{};var h=d.prefixes||{};this._prefixByIri={};var p=[];for(var y in h){var b=h[y];u(b)&&(this._prefixByIri[b]=y,p.push(b))}var _=p.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+_+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=d.sparqlStar,this._indent=u(d.indent)?d.indent:"  ",this._newline=u(d.newline)?d.newline:`
`,this._explicitDatatype=!!d.explicitDatatype}o.prototype.toQuery=function(d){var h="";return d.queryType&&(h+=d.queryType.toUpperCase()+" "),d.reduced&&(h+="REDUCED "),d.distinct&&(h+="DISTINCT "),d.variables?h+=l(d.variables,void 0,function(p){return/^[?$]/.test(p)?p:c(p)?this.toEntity(p):"("+this.toExpression(p.expression)+" AS "+a(p.variable)+")"},this)+" ":d.template&&(h+=this.group(d.template,!0)+this._newline),d.from&&(h+=this.graphs("FROM ",d.from.default)+this.graphs("FROM NAMED ",d.from.named)),d.where&&(h+="WHERE "+this.group(d.where,!0)+this._newline),d.updates&&(h+=l(d.updates,";"+this._newline,this.toUpdate,this)),d.group&&(h+="GROUP BY "+l(d.group,void 0,function(p){var y=c(p.expression)?this.toEntity(p.expression):"("+this.toExpression(p.expression)+")";return p.variable?"("+y+" AS "+a(p.variable)+")":y},this)+this._newline),d.having&&(h+="HAVING ("+l(d.having,void 0,this.toExpression,this)+")"+this._newline),d.order&&(h+="ORDER BY "+l(d.order,void 0,function(p){var y="("+this.toExpression(p.expression)+")";return p.descending?"DESC "+y:y},this)+this._newline),d.offset&&(h+="OFFSET "+d.offset+this._newline),d.limit&&(h+="LIMIT "+d.limit+this._newline),d.values&&(h+=this.values(d)),h=this.baseAndPrefixes(d)+h,h.trim()},o.prototype.baseAndPrefixes=function(d){var h=d.base?"BASE <"+d.base+">"+this._newline:"",p="";for(var y in d.prefixes)(this._options.allPrefixes||this._usedPrefixes[y])&&(p+="PREFIX "+y+": <"+d.prefixes[y]+">"+this._newline);return h+p},o.prototype.toPattern=function(d){var h=d.type||d instanceof Array&&"array"||(d.subject&&d.predicate&&d.object?"triple":"");if(!(h in this))throw new Error("Unknown entry type: "+h);return this[h](d)},o.prototype.triple=function(d){return this.toEntity(d.subject)+" "+this.toEntity(d.predicate)+" "+this.toEntity(d.object)+"."},o.prototype.array=function(d){return l(d,this._newline,this.toPattern,this)},o.prototype.bgp=function(d){return this.encodeTriples(d.triples)},o.prototype.encodeTriples=function(d){if(!d.length)return"";for(var h=[],p=void 0,y=void 0,b=0;b<d.length;b++){var _=d[b];s(_.subject,p)?s(_.predicate,y)?h.push(","):(y=_.predicate,h.push(";"+this._newline,this._indent,this.toEntity(y))):(p&&h.push("."+this._newline),p=_.subject,y=_.predicate,h.push(this.toEntity(p)," ",this.toEntity(y))),h.push(" ",this.toEntity(_.object))}return h.push("."),h.join("")},o.prototype.graph=function(d){return"GRAPH "+this.toEntity(d.name)+" "+this.group(d)},o.prototype.graphs=function(d,h){return!h||h.length===0?"":l(h,"",function(p){return d+this.toEntity(p)+this._newline},this)},o.prototype.group=function(d,h){return d=h!==!0?this.array(d.patterns||d.triples):this.toPattern(d.type!=="group"?d:d.patterns),d.indexOf(this._newline)===-1?"{ "+d+" }":"{"+this._newline+this.indent(d)+this._newline+"}"},o.prototype.query=function(d){return this.toQuery(d)},o.prototype.filter=function(d){return"FILTER("+this.toExpression(d.expression)+")"},o.prototype.bind=function(d){return"BIND("+this.toExpression(d.expression)+" AS "+a(d.variable)+")"},o.prototype.optional=function(d){return"OPTIONAL "+this.group(d)},o.prototype.union=function(d){return l(d.patterns,this._newline+"UNION"+this._newline,function(h){return this.group(h,!0)},this)},o.prototype.minus=function(d){return"MINUS "+this.group(d)},o.prototype.values=function(d){var h=Object.keys(d.values.reduce(function(b,_){for(var T in _)b[T]=!0;return b},{})),p,y;return h.length===1?p=y="":(p="(",y=")"),"VALUES "+p+h.join(" ")+y+" {"+this._newline+l(d.values,this._newline,function(b){return"  "+p+l(h,void 0,function(_){return b[_]?this.toEntity(b[_]):"UNDEF"},this)+y},this)+this._newline+"}"},o.prototype.service=function(d){return"SERVICE "+(d.silent?"SILENT ":"")+this.toEntity(d.name)+" "+this.group(d)},o.prototype.toExpression=function(d){if(c(d))return this.toEntity(d);switch(d.type.toLowerCase()){case"aggregate":return d.aggregation.toUpperCase()+"("+(d.distinct?"DISTINCT ":"")+this.toExpression(d.expression)+(typeof d.separator=="string"?'; SEPARATOR = "'+d.separator.replace(i,r)+'"':"")+")";case"functioncall":return this.toEntity(d.function)+"("+l(d.args,", ",this.toExpression,this)+")";case"operation":var h=d.operator.toUpperCase(),p=d.args||[];switch(d.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(c(p[0])?this.toEntity(p[0]):"("+this.toExpression(p[0])+")")+" "+h+" "+(c(p[1])?this.toEntity(p[1]):"("+this.toExpression(p[1])+")");case"!":return"!("+this.toExpression(p[0])+")";case"uplus":return"+("+this.toExpression(p[0])+")";case"uminus":return"-("+this.toExpression(p[0])+")";case"notin":h="NOT IN";case"in":return this.toExpression(p[0])+" "+h+"("+(u(p[1])?p[1]:l(p[1],", ",this.toExpression,this))+")";case"notexists":h="NOT EXISTS";case"exists":return h+" "+this.group(p[0],!0);default:return h+"("+l(p,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+d.type)}},o.prototype.toEntity=function(d){if(c(d))switch(d.termType){case"Wildcard":return"*";case"Variable":return a(d);case"BlankNode":return"_:"+d.value;case"Literal":var h=d.value||"",p=d.language||"",y=d.datatype;if(d='"'+h.replace(i,r)+'"',p)d+="@"+p;else if(y){if(!this._explicitDatatype)switch(y.value){case t:return d;case n:if(/^\d+$/.test(h))return h+" "}d+="^^"+this.encodeIRI(y.value)}return d;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return d.graph&&d.graph.termType!=="DefaultGraph"?"<< GRAPH "+this.toEntity(d.graph)+" { "+this.toEntity(d.subject)+" "+this.toEntity(d.predicate)+" "+this.toEntity(d.object)+" }  >>":"<< "+this.toEntity(d.subject)+" "+this.toEntity(d.predicate)+" "+this.toEntity(d.object)+" >>";default:return this.encodeIRI(d.value)}else{var b=d.items.map(this.toEntity,this),_=d.pathType;switch(_){case"^":case"!":return _+b[0];case"*":case"+":case"?":return"("+b[0]+_+")";default:return"("+b.join(_)+")"}}};var i=/["\\\t\n\r\b\f]/g,r=function(d){return e[d]},e={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};o.prototype.encodeIRI=function(d){var h=this._prefixRegex.exec(d);if(h){var p=this._prefixByIri[h[1]];return this._usedPrefixes[p]=!0,p+":"+h[2]}return"<"+d+">"},o.prototype.toUpdate=function(d){switch(d.type||d.updateType){case"load":return"LOAD"+(d.source?" "+this.toEntity(d.source):"")+(d.destination?" INTO GRAPH "+this.toEntity(d.destination):"");case"insert":return"INSERT DATA "+this.group(d.insert,!0);case"delete":return"DELETE DATA "+this.group(d.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(d.delete,!0);case"insertdelete":return(d.graph?"WITH "+this.toEntity(d.graph)+this._newline:"")+(d.delete.length?"DELETE "+this.group(d.delete,!0)+this._newline:"")+(d.insert.length?"INSERT "+this.group(d.insert,!0)+this._newline:"")+(d.using?this.graphs("USING ",d.using.default):"")+(d.using?this.graphs("USING NAMED ",d.using.named):"")+"WHERE "+this.group(d.where,!0);case"add":case"copy":case"move":return d.type.toUpperCase()+" "+(d.silent?"SILENT ":"")+(d.source.default?"DEFAULT":this.toEntity(d.source.name))+" TO "+this.toEntity(d.destination.name);case"create":case"clear":case"drop":return d.type.toUpperCase()+(d.silent?" SILENT ":" ")+(d.graph.default?"DEFAULT":d.graph.named?"NAMED":d.graph.all?"ALL":"GRAPH "+this.toEntity(d.graph.name));default:throw new Error("Unknown update query type: "+d.type)}},o.prototype.indent=function(d){return d.replace(/^/gm,this._indent)};function a(d){return"?"+d.value}function u(d){return typeof d=="string"}function c(d){return typeof d.termType=="string"}function s(d,h){if(!d||!c(d)||!h||!c(h)||d.termType!==h.termType)return!1;switch(d.termType){case"Literal":return d.value===h.value&&d.language===h.language&&s(d.datatype,h.datatype);case"Quad":return s(d.subject,h.subject)&&s(d.predicate,h.predicate)&&s(d.object,h.object)&&s(d.graph,h.graph);default:return d.value===h.value}}function l(d,h,p,y){return d.map(p,y).join(u(h)?h:" ")}function f(d={}){return{stringify:function(h){var p=Object.create(d);return p.prefixes=h.prefixes,new o(p).toQuery(h)},createGenerator:function(){return new o(d)}}}return c1={Generator:f},c1}var bi={},yl={},ZS;function Hx(){if(ZS)return yl;ZS=1,Object.defineProperty(yl,"__esModule",{value:!0}),yl.BlankNode=void 0;class n{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return yl.BlankNode=n,yl}var _l={},gl={},kS;function Jx(){if(kS)return gl;kS=1,Object.defineProperty(gl,"__esModule",{value:!0}),gl.DefaultGraph=void 0;class n{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return gl.DefaultGraph=n,n.INSTANCE=new n,gl}var ml={},bl={},ew;function ET(){if(ew)return bl;ew=1,Object.defineProperty(bl,"__esModule",{value:!0}),bl.NamedNode=void 0;class n{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return bl.NamedNode=n,bl}var tw;function Kx(){if(tw)return ml;tw=1,Object.defineProperty(ml,"__esModule",{value:!0}),ml.Literal=void 0;const n=ET();class t{constructor(i,r){this.termType="Literal",this.value=i,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(i){return!!i&&i.termType==="Literal"&&i.value===this.value&&i.language===this.language&&this.datatype.equals(i.datatype)}}return ml.Literal=t,t.RDF_LANGUAGE_STRING=new n.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new n.NamedNode("http://www.w3.org/2001/XMLSchema#string"),ml}var vl={},rw;function Wx(){if(rw)return vl;rw=1,Object.defineProperty(vl,"__esModule",{value:!0}),vl.Quad=void 0;class n{constructor(o,i,r,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=i,this.object=r,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return vl.Quad=n,vl}var Tl={},nw;function Yx(){if(nw)return Tl;nw=1,Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.Variable=void 0;class n{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return Tl.Variable=n,Tl}var iw;function KB(){if(iw)return _l;iw=1,Object.defineProperty(_l,"__esModule",{value:!0}),_l.DataFactory=void 0;const n=Hx(),t=Jx(),o=Kx(),i=ET(),r=Wx(),e=Yx();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new i.NamedNode(s)}blankNode(s){return new n.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,f,d){return new r.Quad(s,l,f,d||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return _l.DataFactory=u,_l}var aw;function WB(){return aw||(aw=1,(function(n){var t=bi&&bi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=bi&&bi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Hx(),n),o(KB(),n),o(Jx(),n),o(Kx(),n),o(ET(),n),o(Wx(),n),o(Yx(),n)})(bi)),bi}var l1,ow;function Nb(){if(ow)return l1;ow=1;const{Parser:n}=HB(),{Generator:t}=JB(),{Wildcard:o}=$x(),{DataFactory:i}=WB();function r({prefixes:e,baseIRI:a,factory:u,pathOnly:c,sparqlStar:s,skipValidation:l,skipUngroupedVariableCheck:f}={}){const d={};for(const p in e??{})d[p]=e[p];const h=new n;return h.parse=function(){return n.base=a||"",n.prefixes=Object.create(d),n.factory=u||new i,n.sparqlStar=!!s,n.pathOnly=!!c,n.skipValidation=!!l||!!f,n.prototype.parse.apply(h,arguments)},h._resetBlanks=n._resetBlanks,h}return l1={Parser:r,Generator:t,Wildcard:o},l1}var uw;function Mb(){if(uw)return rn;uw=1;var n=rn&&rn.__createBinding||(Object.create?(function(c,s,l,f){f===void 0&&(f=l);var d=Object.getOwnPropertyDescriptor(s,l);(!d||("get"in d?!s.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(c,f,d)}):(function(c,s,l,f){f===void 0&&(f=l),c[f]=s[l]})),t=rn&&rn.__setModuleDefault||(Object.create?(function(c,s){Object.defineProperty(c,"default",{enumerable:!0,value:s})}):function(c,s){c.default=s}),o=rn&&rn.__importStar||function(c){if(c&&c.__esModule)return c;var s={};if(c!=null)for(var l in c)l!=="default"&&Object.prototype.hasOwnProperty.call(c,l)&&n(s,c,l);return t(s,c),s};Object.defineProperty(rn,"__esModule",{value:!0});const i=o(tm()),r=Ds(),e=Pb(),a=Nb();class u{constructor(s){this.dataFactory=s||new r.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(s,l=!0){return this.flattenMulti({type:i.types.ALT,input:s},l)}createAsk(s){return{type:i.types.ASK,input:s}}createBoundAggregate(s,l,f,d,h){const p=this.createAggregateExpression(l,f,d,h);return p.variable=s,p}createBgp(s){return{type:i.types.BGP,patterns:s}}createConstruct(s,l){return{type:i.types.CONSTRUCT,input:s,template:l}}createDescribe(s,l){return{type:i.types.DESCRIBE,input:s,terms:l}}createDistinct(s){return{type:i.types.DISTINCT,input:s}}createExtend(s,l,f){return{type:i.types.EXTEND,input:s,variable:l,expression:f}}createFrom(s,l,f){return{type:i.types.FROM,input:s,default:l,named:f}}createFilter(s,l){return{type:i.types.FILTER,input:s,expression:l}}createGraph(s,l){return{type:i.types.GRAPH,input:s,name:l}}createGroup(s,l,f){return{type:i.types.GROUP,input:s,variables:l,aggregates:f}}createInv(s){return{type:i.types.INV,path:s}}createJoin(s,l=!0){return this.flattenMulti({type:i.types.JOIN,input:s},l)}createLeftJoin(s,l,f){return f?{type:i.types.LEFT_JOIN,input:[s,l],expression:f}:{type:i.types.LEFT_JOIN,input:[s,l]}}createLink(s){return{type:i.types.LINK,iri:s}}createMinus(s,l){return{type:i.types.MINUS,input:[s,l]}}createNop(){return{type:i.types.NOP}}createNps(s){return{type:i.types.NPS,iris:s}}createOneOrMorePath(s){return{type:i.types.ONE_OR_MORE_PATH,path:s}}createOrderBy(s,l){return{type:i.types.ORDER_BY,input:s,expressions:l}}createPath(s,l,f,d){return d?{type:i.types.PATH,subject:s,predicate:l,object:f,graph:d}:{type:i.types.PATH,subject:s,predicate:l,object:f,graph:this.dataFactory.defaultGraph()}}createPattern(s,l,f,d){const h=this.dataFactory.quad(s,l,f,d);return h.type=i.types.PATTERN,h}createProject(s,l){return{type:i.types.PROJECT,input:s,variables:l}}createReduced(s){return{type:i.types.REDUCED,input:s}}createSeq(s,l=!0){return this.flattenMulti({type:i.types.SEQ,input:s},l)}createService(s,l,f){return{type:i.types.SERVICE,input:s,name:l,silent:!!f}}createSlice(s,l,f){return l=l||0,f!==void 0?{type:i.types.SLICE,input:s,start:l,length:f}:{type:i.types.SLICE,input:s,start:l}}createUnion(s,l=!0){return this.flattenMulti({type:i.types.UNION,input:s},l)}createValues(s,l){return{type:i.types.VALUES,variables:s,bindings:l}}createZeroOrMorePath(s){return{type:i.types.ZERO_OR_MORE_PATH,path:s}}createZeroOrOnePath(s){return{type:i.types.ZERO_OR_ONE_PATH,path:s}}createAggregateExpression(s,l,f,d){return d?{type:i.types.EXPRESSION,expressionType:i.expressionTypes.AGGREGATE,aggregator:s,expression:l,separator:d,distinct:f}:{type:i.types.EXPRESSION,expressionType:i.expressionTypes.AGGREGATE,aggregator:s,expression:l,distinct:f}}createExistenceExpression(s,l){return{type:i.types.EXPRESSION,expressionType:i.expressionTypes.EXISTENCE,not:s,input:l}}createNamedExpression(s,l){return{type:i.types.EXPRESSION,expressionType:i.expressionTypes.NAMED,name:s,args:l}}createOperatorExpression(s,l){return{type:i.types.EXPRESSION,expressionType:i.expressionTypes.OPERATOR,operator:s,args:l}}createTermExpression(s){return{type:i.types.EXPRESSION,expressionType:i.expressionTypes.TERM,term:s}}createWildcardExpression(){return{type:i.types.EXPRESSION,expressionType:i.expressionTypes.WILDCARD,wildcard:new a.Wildcard}}createTerm(s){return s[0]==="$"&&(s=s.replace("$","?")),(0,e.stringToTerm)(s,this.dataFactory)}createCompositeUpdate(s){return{type:i.types.COMPOSITE_UPDATE,updates:s}}createDeleteInsert(s,l,f){const d={type:i.types.DELETE_INSERT};return s&&(d.delete=s),l&&(d.insert=l),f&&(d.where=f),d}createLoad(s,l,f){const d={type:i.types.LOAD,source:s};return l&&(d.destination=l),this.addSilent(d,!!f)}createClear(s,l){return this.addSilent({type:i.types.CLEAR,source:s},!!l)}createCreate(s,l){return this.addSilent({type:i.types.CREATE,source:s},!!l)}createDrop(s,l){return this.addSilent({type:i.types.DROP,source:s},!!l)}createAdd(s,l,f){return this.addSilent({type:i.types.ADD,source:s,destination:l},!!f)}createMove(s,l,f){return this.addSilent({type:i.types.MOVE,source:s,destination:l},!!f)}createCopy(s,l,f){return this.addSilent({type:i.types.COPY,source:s,destination:l},!!f)}addSilent(s,l){return l&&(s.silent=l),s}flattenMulti(s,l){if(!l)return s;const f=s.type,d=s.input;let h=[];for(const p of d)p.type===f?h.push(...p.input):h.push(p);return s.input=h,s}}return rn.default=u,rn}var Ks={},vi={},pt={},sw;function YB(){if(sw)return pt;sw=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.TRIPLE_TERM_NAMES=pt.QUAD_TERM_NAMES=void 0,pt.getTerms=o,pt.getTermsNested=i,pt.getNamedTerms=r,pt.collectNamedTerms=e,pt.forEachTerms=a,pt.forEachTermsNested=u,pt.filterTerms=c,pt.filterTermsNested=s,pt.filterQuadTermNames=l,pt.filterQuadTermNamesNested=f,pt.mapTerms=d,pt.mapTermsNested=h,pt.reduceTerms=p,pt.reduceTermsNested=y,pt.everyTerms=b,pt.everyTermsNested=_,pt.someTerms=T,pt.someTermsNested=m,pt.getValueNestedPath=A,pt.matchTerm=E,pt.matchPattern=j,pt.matchPatternComplete=X,pt.matchPatternMappings=K;const n=Ds(),t=new n.DataFactory;pt.QUAD_TERM_NAMES=["subject","predicate","object","graph"],pt.TRIPLE_TERM_NAMES=["subject","predicate","object"];function o(O,S){return S&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}function i(O,S){const L=[];for(const N of o(O,S))N.termType==="Quad"?i(N,S).forEach(I=>L.push(I)):L.push(N);return L}function r(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}function e(O,S,L){const N={};return O.forEach(I=>N[I.key]=I.value),S&&(N.subject=N.subject||S("subject"),N.predicate=N.predicate||S("predicate"),N.object=N.object||S("object"),N.graph=N.graph||S("graph")),(L||t).quad(N.subject,N.predicate,N.object,N.graph)}function a(O,S){S(O.subject,"subject"),S(O.predicate,"predicate"),S(O.object,"object"),S(O.graph,"graph")}function u(O,S,L=[]){O.subject.termType==="Quad"?u(O.subject,S,[...L,"subject"]):S(O.subject,[...L,"subject"]),O.predicate.termType==="Quad"?u(O.predicate,S,[...L,"predicate"]):S(O.predicate,[...L,"predicate"]),O.object.termType==="Quad"?u(O.object,S,[...L,"object"]):S(O.object,[...L,"object"]),O.graph.termType==="Quad"?u(O.graph,S,[...L,"graph"]):S(O.graph,[...L,"graph"])}function c(O,S){const L=[];return S(O.subject,"subject")&&L.push(O.subject),S(O.predicate,"predicate")&&L.push(O.predicate),S(O.object,"object")&&L.push(O.object),S(O.graph,"graph")&&L.push(O.graph),L}function s(O,S,L=[]){let N=[];return O.subject.termType==="Quad"?N=[...N,...s(O.subject,S,[...L,"subject"])]:S(O.subject,[...L,"subject"])&&N.push(O.subject),O.predicate.termType==="Quad"?N=[...N,...s(O.predicate,S,[...L,"predicate"])]:S(O.predicate,[...L,"predicate"])&&N.push(O.predicate),O.object.termType==="Quad"?N=[...N,...s(O.object,S,[...L,"object"])]:S(O.object,[...L,"object"])&&N.push(O.object),O.graph.termType==="Quad"?N=[...N,...s(O.graph,S,[...L,"graph"])]:S(O.graph,[...L,"graph"])&&N.push(O.graph),N}function l(O,S){const L=[];return S(O.subject,"subject")&&L.push("subject"),S(O.predicate,"predicate")&&L.push("predicate"),S(O.object,"object")&&L.push("object"),S(O.graph,"graph")&&L.push("graph"),L}function f(O,S,L=[]){let N=[];const I=[...L,"subject"];O.subject.termType==="Quad"?N=[...N,...f(O.subject,S,I)]:S(O.subject,I)&&N.push(I);const V=[...L,"predicate"];O.predicate.termType==="Quad"?N=[...N,...f(O.predicate,S,V)]:S(O.predicate,V)&&N.push(V);const re=[...L,"object"];O.object.termType==="Quad"?N=[...N,...f(O.object,S,re)]:S(O.object,re)&&N.push(re);const Y=[...L,"graph"];return O.graph.termType==="Quad"?N=[...N,...f(O.graph,S,Y)]:S(O.graph,Y)&&N.push(Y),N}function d(O,S,L){return(L||t).quad(S(O.subject,"subject"),S(O.predicate,"predicate"),S(O.object,"object"),S(O.graph,"graph"))}function h(O,S,L,N=[]){return(L||t).quad(O.subject.termType==="Quad"?h(O.subject,S,L,[...N,"subject"]):S(O.subject,[...N,"subject"]),O.predicate.termType==="Quad"?h(O.predicate,S,L,[...N,"predicate"]):S(O.predicate,[...N,"predicate"]),O.object.termType==="Quad"?h(O.object,S,L,[...N,"object"]):S(O.object,[...N,"object"]),O.graph.termType==="Quad"?h(O.graph,S,L,[...N,"graph"]):S(O.graph,[...N,"graph"]))}function p(O,S,L){let N=L;return N=S(N,O.subject,"subject"),N=S(N,O.predicate,"predicate"),N=S(N,O.object,"object"),S(N,O.graph,"graph")}function y(O,S,L,N=[]){let I=L;return O.subject.termType==="Quad"?I=y(O.subject,S,I,[...N,"subject"]):I=S(I,O.subject,[...N,"subject"]),O.predicate.termType==="Quad"?I=y(O.predicate,S,I,[...N,"predicate"]):I=S(I,O.predicate,[...N,"predicate"]),O.object.termType==="Quad"?I=y(O.object,S,I,[...N,"object"]):I=S(I,O.object,[...N,"object"]),O.graph.termType==="Quad"?I=y(O.graph,S,I,[...N,"graph"]):I=S(I,O.graph,[...N,"graph"]),I}function b(O,S){return S(O.subject,"subject")&&S(O.predicate,"predicate")&&S(O.object,"object")&&S(O.graph,"graph")}function _(O,S,L=[]){return(O.subject.termType==="Quad"?_(O.subject,S,[...L,"subject"]):S(O.subject,[...L,"subject"]))&&(O.predicate.termType==="Quad"?_(O.predicate,S,[...L,"predicate"]):S(O.predicate,[...L,"predicate"]))&&(O.object.termType==="Quad"?_(O.object,S,[...L,"object"]):S(O.object,[...L,"object"]))&&(O.graph.termType==="Quad"?_(O.graph,S,[...L,"graph"]):S(O.graph,[...L,"graph"]))}function T(O,S){return S(O.subject,"subject")||S(O.predicate,"predicate")||S(O.object,"object")||S(O.graph,"graph")}function m(O,S,L=[]){return(O.subject.termType==="Quad"?m(O.subject,S,[...L,"subject"]):S(O.subject,[...L,"subject"]))||(O.predicate.termType==="Quad"?m(O.predicate,S,[...L,"predicate"]):S(O.predicate,[...L,"predicate"]))||(O.object.termType==="Quad"?m(O.object,S,[...L,"object"]):S(O.object,[...L,"object"]))||(O.graph.termType==="Quad"?m(O.graph,S,[...L,"graph"]):S(O.graph,[...L,"graph"]))}function A(O,S){if(S.length===0)return O;if(O.termType==="Quad")return A(O[S[0]],S.slice(1));throw new Error(`Tried to get ${S[0]} from term of type ${O.termType}`)}function E(O,S){return!S||S.termType==="Variable"||S.termType==="Quad"&&O.termType==="Quad"&&X(O,S)||S.equals(O)}function j(O,S,L,N,I){return E(O.subject,S)&&E(O.predicate,L)&&E(O.object,N)&&E(O.graph,I)}function X(O,S){return j(O,S.subject,S.predicate,S.object,S.graph)}function K(O,S,L={}){const N={};function I(V,re){return b(V,(Y,ce)=>{var ae,pe;const U=re[ce];switch(Y.termType){case"Variable":return L.skipVarMapping&&U.termType==="Variable"||((pe=(ae=N[Y.value])===null||ae===void 0?void 0:ae.equals(U))!==null&&pe!==void 0?pe:(N[Y.value]=U,!0));case"Quad":return U.termType==="Quad"&&I(Y,U);default:return Y.equals(U)}})}return I(S,O)&&(L.returnMappings?N:!0)}return pt}var Tr={},cw;function ZB(){if(cw)return Tr;cw=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.TERM_TYPES=void 0,Tr.uniqTerms=t,Tr.getTermsOfType=o,Tr.getNamedNodes=i,Tr.getBlankNodes=r,Tr.getLiterals=e,Tr.getVariables=a,Tr.getDefaultGraphs=u,Tr.getQuads=c;const n=Pb();Tr.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function t(s){const l={};return s.filter(f=>{const d=(0,n.termToString)(f);return!(d in l)&&(l[d]=!0)})}function o(s,l){return s.filter(f=>f.termType===l)}function i(s){return o(s,"NamedNode")}function r(s){return o(s,"BlankNode")}function e(s){return o(s,"Literal")}function a(s){return o(s,"Variable")}function u(s){return o(s,"DefaultGraph")}function c(s){return o(s,"Quad")}return Tr}var lw;function kB(){return lw||(lw=1,(function(n){var t=vi&&vi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=vi&&vi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(YB(),n),o(ZB(),n)})(vi)),vi}var fw;function RT(){if(fw)return Ks;fw=1;var n=Ks&&Ks.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ks,"__esModule",{value:!0});const t=tm(),o=n(Mb()),i=kB();class r{static flatten(a){return Array.prototype.concat(...a).filter(u=>u)}static objectify(a){if(a.termType){if(a.termType==="Quad")return{type:"pattern",termType:"Quad",subject:r.objectify(a.subject),predicate:r.objectify(a.predicate),object:r.objectify(a.object),graph:r.objectify(a.graph)};{let u={termType:a.termType,value:a.value};return a.language&&(u.language=a.language),a.datatype&&(u.datatype=r.objectify(a.datatype)),u}}if(Array.isArray(a))return a.map(u=>r.objectify(u));if(a===Object(a)){let u={};for(let c of Object.keys(a))u[c]=r.objectify(a[c]);return u}return a}static inScopeVariables(a){const u=[];function c(l){u.find(f=>l.value===f.value)||u.push(l)}function s(l){l.subject.termType==="Variable"&&c(l.subject),l.predicate.termType==="Variable"&&c(l.predicate),l.object.termType==="Variable"&&c(l.object),l.graph.termType==="Variable"&&c(l.graph),l.subject.termType==="Quad"&&s(l.subject),l.predicate.termType==="Quad"&&s(l.predicate),l.object.termType==="Quad"&&s(l.object),l.graph.termType==="Quad"&&s(l.graph)}return r.recurseOperation(a,{[t.types.EXPRESSION]:l=>(l.expressionType===t.expressionTypes.AGGREGATE&&l.variable&&c(l.variable),!0),[t.types.EXTEND]:l=>(c(l.variable),!0),[t.types.GRAPH]:l=>(l.name.termType==="Variable"&&c(l.name),!0),[t.types.GROUP]:l=>(l.variables.forEach(c),!0),[t.types.PATH]:l=>(l.subject.termType==="Variable"&&c(l.subject),l.object.termType==="Variable"&&c(l.object),l.graph.termType==="Variable"&&c(l.graph),l.subject.termType==="Quad"&&s(l.subject),l.object.termType==="Quad"&&s(l.object),l.graph.termType==="Quad"&&s(l.graph),!0),[t.types.PATTERN]:l=>(s(l),!0),[t.types.PROJECT]:l=>(l.variables.forEach(c),!1),[t.types.SERVICE]:l=>(l.name.termType==="Variable"&&c(l.name),!0),[t.types.VALUES]:l=>(l.variables.forEach(c),!0)}),u}static recurseOperation(a,u){let c=a,s=!0;const l=u[a.type];if(l&&(s=l(a)),!s)return;let f=d=>r.recurseOperation(d,u);switch(c.type){case t.types.ALT:c.input.map(f);break;case t.types.ASK:f(c.input);break;case t.types.BGP:c.patterns.forEach(f);break;case t.types.CONSTRUCT:f(c.input),c.template.map(f);break;case t.types.DESCRIBE:f(c.input);break;case t.types.DISTINCT:f(c.input);break;case t.types.EXPRESSION:c.expressionType===t.expressionTypes.EXISTENCE&&f(c.input);break;case t.types.EXTEND:f(c.input),f(c.expression);break;case t.types.FILTER:f(c.input),f(c.expression);break;case t.types.FROM:f(c.input);break;case t.types.GRAPH:f(c.input);break;case t.types.GROUP:f(c.input),c.aggregates.forEach(f);break;case t.types.INV:f(c.path);break;case t.types.JOIN:c.input.map(f);break;case t.types.LEFT_JOIN:c.input.map(f),c.expression&&f(c.expression);break;case t.types.LINK:break;case t.types.MINUS:c.input.map(f);break;case t.types.NOP:break;case t.types.NPS:break;case t.types.ONE_OR_MORE_PATH:f(c.path);break;case t.types.ORDER_BY:f(c.input),c.expressions.forEach(f);break;case t.types.PATH:f(c.predicate);break;case t.types.PATTERN:break;case t.types.PROJECT:f(c.input);break;case t.types.REDUCED:f(c.input);break;case t.types.SEQ:c.input.map(f);break;case t.types.SERVICE:f(c.input);break;case t.types.SLICE:f(c.input);break;case t.types.UNION:c.input.map(f);break;case t.types.VALUES:break;case t.types.ZERO_OR_MORE_PATH:f(c.path);break;case t.types.ZERO_OR_ONE_PATH:f(c.path);break;case t.types.COMPOSITE_UPDATE:c.updates.forEach(d=>f(d));break;case t.types.DELETE_INSERT:c.delete&&c.delete.forEach(d=>f(d)),c.insert&&c.insert.forEach(d=>f(d)),c.where&&f(c.where);break;case t.types.LOAD:break;case t.types.CLEAR:break;case t.types.CREATE:break;case t.types.DROP:break;case t.types.ADD:break;case t.types.MOVE:break;case t.types.COPY:break;default:throw new Error(`Unknown Operation type ${c.type}`)}}static mapOperation(a,u,c){let s=a,l=!0,f=!0;c=c||new o.default;const d=u[a.type];if(d){const y=d(a,c);s=y.result,l=y.recurse,f=y.copyMetadata!==!1}let h;if(f&&(s.metadata||a.metadata)&&(h={...s.metadata,...a.metadata}),!l)return h&&(s.metadata=h),s;let p=y=>r.mapOperation(y,u,c);switch(s.type){case t.types.ALT:s=c.createAlt(s.input.map(p));break;case t.types.ASK:s=c.createAsk(p(s.input));break;case t.types.BGP:s=c.createBgp(s.patterns.map(p));break;case t.types.CONSTRUCT:s=c.createConstruct(p(s.input),s.template.map(p));break;case t.types.DESCRIBE:s=c.createDescribe(p(s.input),s.terms);break;case t.types.DISTINCT:s=c.createDistinct(p(s.input));break;case t.types.EXPRESSION:s=r.mapExpression(s,u,c);break;case t.types.EXTEND:s=c.createExtend(p(s.input),s.variable,p(s.expression));break;case t.types.FILTER:s=c.createFilter(p(s.input),p(s.expression));break;case t.types.FROM:s=c.createFrom(p(s.input),[...s.default],[...s.named]);break;case t.types.GRAPH:s=c.createGraph(p(s.input),s.name);break;case t.types.GROUP:s=c.createGroup(p(s.input),[].concat(s.variables),s.aggregates.map(p));break;case t.types.INV:s=c.createInv(p(s.path));break;case t.types.JOIN:s=c.createJoin(s.input.map(p));break;case t.types.LEFT_JOIN:s=c.createLeftJoin(p(s.input[0]),p(s.input[1]),s.expression?p(s.expression):void 0);break;case t.types.LINK:s=c.createLink(s.iri);break;case t.types.MINUS:s=c.createMinus(p(s.input[0]),p(s.input[1]));break;case t.types.NOP:s=c.createNop();break;case t.types.NPS:s=c.createNps([].concat(s.iris));break;case t.types.ONE_OR_MORE_PATH:s=c.createOneOrMorePath(p(s.path));break;case t.types.ORDER_BY:s=c.createOrderBy(p(s.input),s.expressions.map(p));break;case t.types.PATH:s=c.createPath(s.subject,p(s.predicate),s.object,s.graph);break;case t.types.PATTERN:s=c.createPattern(s.subject,s.predicate,s.object,s.graph);break;case t.types.PROJECT:s=c.createProject(p(s.input),[...s.variables]);break;case t.types.REDUCED:s=c.createReduced(p(s.input));break;case t.types.SEQ:s=c.createSeq(s.input.map(p));break;case t.types.SERVICE:s=c.createService(p(s.input),s.name,s.silent);break;case t.types.SLICE:s=c.createSlice(p(s.input),s.start,s.length);break;case t.types.UNION:s=c.createUnion(s.input.map(p));break;case t.types.VALUES:s=c.createValues([].concat(s.variables),s.bindings.map(y=>Object.assign({},y)));break;case t.types.ZERO_OR_MORE_PATH:s=c.createZeroOrMorePath(p(s.path));break;case t.types.ZERO_OR_ONE_PATH:s=c.createZeroOrOnePath(p(s.path));break;case t.types.COMPOSITE_UPDATE:s=c.createCompositeUpdate(s.updates.map(p));break;case t.types.DELETE_INSERT:s=c.createDeleteInsert(s.delete?s.delete.map(p):void 0,s.insert?s.insert.map(p):void 0,s.where?p(s.where):void 0);break;case t.types.LOAD:s=c.createLoad(s.source,s.destination,s.silent);break;case t.types.CLEAR:s=c.createClear(s.source,s.silent);break;case t.types.CREATE:s=c.createCreate(s.source,s.silent);break;case t.types.DROP:s=c.createDrop(s.source,s.silent);break;case t.types.ADD:s=c.createAdd(s.source,s.destination);break;case t.types.MOVE:s=c.createMove(s.source,s.destination);break;case t.types.COPY:s=c.createCopy(s.source,s.destination);break;default:throw new Error(`Unknown Operation type ${s.type}`)}return h&&(s.metadata=h),s}static mapExpression(a,u,c){let s=a,l=!0;c=c||new o.default;const f=u[a.expressionType];if(f&&({result:s,recurse:l}=f(a,c)),!l)return s;let d=h=>r.mapOperation(h,u,c);switch(a.expressionType){case t.expressionTypes.AGGREGATE:return a.variable?c.createBoundAggregate(a.variable,a.aggregator,d(a.expression),a.distinct,a.separator):c.createAggregateExpression(a.aggregator,d(a.expression),a.distinct,a.separator);case t.expressionTypes.EXISTENCE:return c.createExistenceExpression(a.not,d(a.input));case t.expressionTypes.NAMED:return c.createNamedExpression(a.name,a.args.map(d));case t.expressionTypes.OPERATOR:return c.createOperatorExpression(a.operator,a.args.map(d));case t.expressionTypes.TERM:return c.createTermExpression(a.term);case t.expressionTypes.WILDCARD:return c.createWildcardExpression();default:throw new Error(`Unknown Expression type ${a.expressionType}`)}}static cloneOperation(a){return r.mapOperation(a,{})}static cloneExpression(a){return r.mapExpression(a,{})}static createUniqueVariable(a,u,c){let s=0,l=a;for(;u[l];)l=`${a}${s++}`;return c.variable(l)}static isSimpleTerm(a){return a.termType!==void 0&&a.termType!=="Quad"&&a.termType!=="Wildcard"}static isQuad(a){return a.termType==="Quad"}static hasQuadVariables(a){return(0,i.someTermsNested)(a,u=>u.termType==="Variable")}static isWildcard(a){return a.termType==="Wildcard"}}return Ks.default=r,Ks}var dw;function eC(){if(dw)return Nr;dw=1;var n=Nr&&Nr.__createBinding||(Object.create?(function(w,D,g,F){F===void 0&&(F=g);var M=Object.getOwnPropertyDescriptor(D,g);(!M||("get"in M?!D.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return D[g]}}),Object.defineProperty(w,F,M)}):(function(w,D,g,F){F===void 0&&(F=g),w[F]=D[g]})),t=Nr&&Nr.__setModuleDefault||(Object.create?(function(w,D){Object.defineProperty(w,"default",{enumerable:!0,value:D})}):function(w,D){w.default=D}),o=Nr&&Nr.__importStar||function(w){if(w&&w.__esModule)return w;var D={};if(w!=null)for(var g in w)g!=="default"&&Object.prototype.hasOwnProperty.call(w,g)&&n(D,w,g);return t(D,w),D},i=Nr&&Nr.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(Nr,"__esModule",{value:!0});const r=zB(),e=Pb(),a=o(tm()),u=i(Mb()),c=i(RT()),s=Nb().Parser,l=a.types;let f=new Set,d=0,h=!1,p;function y(w,D){D=D||{},p=new u.default(D.dataFactory);let g;if(_(w)){let F=new s(D);F._resetBlanks(),g=F.parse(w)}else g=w;return b(g,D.quads,D.blankToVariable)}Nr.default=y;function b(w,D,g){if(f=new Set,d=0,h=!!D,!w.type)return p.createNop();if(w.type!=="query"&&w.type!=="update")throw new Error("Translate only works on complete query or update objects.");let F;if(E(w),w.type==="query"){const M={type:"group",patterns:w.where||[]};F=X(M),F=U(w,F)}else w.type==="update"&&(F=te(w));return g&&(F=q(F)),F}function _(w){return typeof w=="string"}function T(w){return!!w?.termType}function m(w){return w.subject&&w.predicate&&w.object}function A(w){return w?.termType==="Variable"}function E(w){if(T(w))A(w)&&f.add(`?${w.value}`);else if(Array.isArray(w))for(const D of w)E(D);else if(w&&typeof w=="object")for(let D of Object.keys(w))D.startsWith("?")?f.add(D):D.startsWith("$")&&f.add(`?${D.slice(1)}`),E(w[D])}function j(w){let D={};if(m(w)){const g=[j(w.subject),j(w.predicate),j(w.object),w.graph?j(w.graph):{}];Object.assign(D,...g)}else if(T(w))A(w)&&(D[w.value]=w);else if(w.type==="bgp"){const g=w.triples;Object.assign(D,...g.map(j))}else if(w.type==="path")Object.assign(D,...w.items.map(j));else if(w.type==="group"||w.type==="union"||w.type==="optional")Object.assign(D,...w.patterns.map(j));else if(w.type==="service"||w.type==="graph")Object.assign(D,j(w.name)),Object.assign(D,...w.patterns.map(j));else if(w.type==="bind")Object.assign(D,j(w.variable));else if(w.type==="values"){if(w.values.length>0){const g=Object.keys(w.values[0]).map(F=>p.createTerm(F));Object.assign(D,...g.map(j))}}else if(w.type==="query"&&(w.queryType==="SELECT"||w.queryType==="DESCRIBE")){w.where&&w.variables.some(c.default.isWildcard)&&Object.assign(D,...w.where.map(j));for(const g of w.variables)A(g)?Object.assign(D,j(g)):g.variable&&Object.assign(D,j(g.variable));if(w.queryType==="SELECT"){if(w.group)for(const g of w.group)g.variable&&Object.assign(D,j(g.variable));if(w.values){const g={type:"values",values:w.values};Object.assign(D,j(g))}}}return D}function X(w){if(w.type==="bgp")return O(w);if(w.type==="union")return p.createUnion(w.patterns.map(D=>(D.type!=="group"&&(D={type:"group",patterns:[D]}),X(D))));if(w.type==="graph"){const D={type:"group",patterns:w.patterns};let g=X(D);return h?g=Y(g,w.name):g=p.createGraph(g,w.name),g}if(w.type==="values")return pe(w);if(w.type==="query")return b(w,h,!1);if(w.type==="group"){let D=[],g=[];for(let Q of w.patterns)(Q.type==="filter"?D:g).push(Q);let F=g.reduce(ce,p.createBgp([])),M=D.map(Q=>K(Q.expression));return M.length>0&&(F=p.createFilter(F,M.reduce((Q,x)=>p.createOperatorExpression("&&",[Q,x])))),F}throw new Error(`Unexpected type: ${w.type}`)}function K(w){if(c.default.isSimpleTerm(w))return p.createTermExpression(w);if(c.default.isQuad(w))return c.default.hasQuadVariables(w)?p.createOperatorExpression("triple",[K(w.subject),K(w.predicate),K(w.object)]):p.createTermExpression(w);if(c.default.isWildcard(w))return p.createWildcardExpression();if("aggregation"in w)return p.createAggregateExpression(w.aggregation,K(w.expression),!!w.distinct,w.separator);if("function"in w)return p.createNamedExpression(w.function,w.args.map(K));if("operator"in w)return w.operator==="exists"||w.operator==="notexists"?p.createExistenceExpression(w.operator==="notexists",X(w.args[0])):((w.operator==="in"||w.operator==="notin")&&(w.args=[w.args[0]].concat(w.args[1])),p.createOperatorExpression(w.operator,w.args.map(K)));throw new Error(`Unknown expression: ${JSON.stringify(w)}`)}function O(w){let D=[],g=[];for(let F of w.triples)if("pathType"in F.predicate){let M=S(F);for(let Q of M)Q.type===l.PATH?(D.length>0&&g.push(p.createBgp(D)),D=[],g.push(Q)):D.push(Q)}else D.push(V(F));return D.length>0&&g.push(p.createBgp(D)),g.length===1?g[0]:p.createJoin(g)}function S(w){let D=w.subject,g=L(w.predicate),F=w.object;return N(D,g,F)}function L(w){if(c.default.isSimpleTerm(w)){if(w.termType==="NamedNode")return p.createLink(w);throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(w)}`)}if(w.pathType==="^")return p.createInv(L(w.items[0]));if(w.pathType==="!"){let D=[],g=[],F;"pathType"in w.items[0]&&w.items[0].pathType==="|"?F=w.items[0].items:F=w.items;for(let x of F)if(c.default.isSimpleTerm(x))D.push(x);else if(x.pathType==="^")g.push(x.items[0]);else throw new Error(`Unexpected item: ${JSON.stringify(x)}`);let M=p.createNps(D),Q=p.createInv(p.createNps(g));return g.length===0?M:D.length===0?Q:p.createAlt([M,Q])}if(w.pathType==="/")return p.createSeq(w.items.map(L));if(w.pathType==="|")return p.createAlt(w.items.map(L));if(w.pathType==="*")return p.createZeroOrMorePath(L(w.items[0]));if(w.pathType==="+")return p.createOneOrMorePath(L(w.items[0]));if(w.pathType==="?")return p.createZeroOrOnePath(L(w.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(w)}`)}function N(w,D,g){if(D.type===l.LINK)return[p.createPattern(w,D.iri,g)];if(D.type===l.INV)return N(g,D.path,w);if(D.type===l.SEQ){let F=w;return c.default.flatten(D.input.map((M,Q)=>{const x=Q===D.input.length-1?g:I(),$=N(F,M,x);return x.termType==="Variable"&&(F=x),$}))}return[p.createPath(w,D,g)]}function I(){let w=`?var${d++}`;return f.has(w)?I():(f.add(w),p.createTerm(w))}function V(w){if("pathType"in w.predicate)throw new Error("Trying to translate property path to quad.");return p.createPattern(w.subject,w.predicate,w.object,w.graph)}let re=Object.values(l);function Y(w,D,g){if(w.type===l.GRAPH){if(g)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");w=Y(w.input,w.name)}else if(w.type!==l.SERVICE)if(w.type===l.BGP)w.patterns=w.patterns.map(F=>(g&&(F.subject.equals(D)&&(F.subject=g),F.predicate.equals(D)&&(F.predicate=g),F.object.equals(D)&&(F.object=g)),F.graph.termType==="DefaultGraph"&&(F.graph=D),F));else if(w.type===l.PATH)g&&(w.subject.equals(D)&&(w.subject=g),w.object.equals(D)&&(w.object=g)),w.graph.termType==="DefaultGraph"&&(w.graph=D);else if(w.type===l.PROJECT&&!g)w.variables.some(F=>F.equals(D))||(g=I()),w.input=Y(w.input,D,g);else if(w.type===l.EXTEND&&!g)w.variable.equals(D)&&(g=I()),w.input=Y(w.input,D,g);else if(w.type===l.MINUS&&D.termType==="Variable")w.metadata={graphVariableFromParentScope:D},w.input=[Y(w.input[0],D,g),Y(w.input[1],D,g)];else for(let F of Object.keys(w))Array.isArray(w[F])?w[F]=w[F].map(M=>Y(M,D,g)):re.indexOf(w[F].type)>=0?w[F]=Y(w[F],D,g):g&&A(w[F])&&w[F].equals(D)&&(w[F]=g);return w}function ce(w,D){if(D.type==="optional"){const g=X({type:"group",patterns:D.patterns});g.type===l.FILTER?w=p.createLeftJoin(w,g.input,g.expression):w=p.createLeftJoin(w,g)}else if(D.type==="minus"){const g=X({type:"group",patterns:D.patterns});w=p.createMinus(w,g)}else if(D.type==="bind")w=p.createExtend(w,D.variable,K(D.expression));else if(D.type==="service"){const g={type:"group",patterns:D.patterns},F=p.createService(X(g),D.name,D.silent);w=ae(w,F)}else{const g=X(D);w=ae(w,g)}return w}function ae(w,D){return w.type===l.BGP&&D.type===l.BGP?w=p.createBgp([...w.patterns,...D.patterns]):w.type===l.BGP&&w.patterns.length===0?w=D:D.type===l.BGP&&D.patterns.length===0||(w=p.createJoin([w,D])),w}function pe(w){let D=(w.values.length===0?[]:Object.keys(w.values[0])).map(p.createTerm.bind(p)),g=w.values.map(F=>{let M=Object.keys(F);M=M.filter(x=>F[x]!==void 0);let Q={};for(let x of M)Q[x]=F[x];return Q});return p.createValues(D,g)}function U(w,D){const g=w,F=[],M={};if(g.variables=g.variables&&g.variables.map(x=>le(x,M)),g.having=g.having&&g.having.map(x=>le(x,M)),g.order=g.order&&g.order.map(x=>le(x,M)),g.group||Object.keys(M).length>0){const x=Object.keys(M).map(B=>me(M[B],p.createTerm(B))),$=[];if(g.group)for(const B of g.group)if(c.default.isSimpleTerm(B.expression))$.push(B.expression);else{const H="variable"in B?B.variable:I();D=p.createExtend(D,H,K(B.expression)),$.push(H)}D=p.createGroup(D,$,x)}if(g.having)for(let x of g.having)D=p.createFilter(D,K(x));w.values&&(D=p.createJoin([D,pe(w)]));let Q=[];if(w.queryType==="SELECT"||w.queryType==="DESCRIBE")if(w.variables.some(x=>x&&c.default.isWildcard(x)))Q=Object.values(j(w)).sort((x,$)=>x.value.localeCompare($.value));else for(let x of w.variables)A(x)||!("variable"in x)?Q.push(x):x.variable&&(Q.push(x.variable),F.push(x));for(let x of F)D=p.createExtend(D,x.variable,K(x.expression));return g.order&&(D=p.createOrderBy(D,g.order.map(x=>{let $=K(x.expression);return x.descending&&($=p.createOperatorExpression("desc",[$])),$}))),w.queryType==="SELECT"&&(D=p.createProject(D,Q)),g.distinct&&(D=p.createDistinct(D)),g.reduced&&(D=p.createReduced(D)),w.queryType==="CONSTRUCT"?D=p.createConstruct(D,(w.template||[]).map(V)):w.queryType==="ASK"?D=p.createAsk(D):w.queryType==="DESCRIBE"&&(D=p.createDescribe(D,Q)),(g.offset||g.limit)&&(D=p.createSlice(D,g.offset||0,g.limit)),g.from&&(D=p.createFrom(D,g.from.default,g.from.named)),D}function le(w,D){if("type"in w&&w.type==="aggregate"){let g=!1,F;for(let M of Object.keys(D))if(r(D[M],w)){F=p.createTerm(M),g=!0;break}return g||(F=I(),D[(0,e.termToString)(F)]=w),F}return"expression"in w&&w.expression?{...w,expression:le(w.expression,D)}:"args"in w&&w.args?{...w,args:w.args.map(g=>le(g,D))}:w}function me(w,D){if(w.type!=="aggregate"||!w.aggregation)throw new Error(`Unexpected input: ${JSON.stringify(w)}`);const g=K(w);return g.variable=D,g}function te(w){return w.updates.length===1?de(w.updates[0]):p.createCompositeUpdate(w.updates.map(de))}function de(w){if("type"in w){if(w.type==="load")return fe(w);if(w.type==="clear"||w.type==="create"||w.type==="drop")return De(w);if(w.type==="add"||w.type==="copy"||w.type==="move")return _e(w)}else if(w.updateType==="insertdelete"||w.updateType==="deletewhere"||w.updateType==="delete"||w.updateType==="insert")return Ee(w);throw new Error(`Unknown update type ${JSON.stringify(w)}`)}function Ee(w){if(!h)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");let D=[],g=[],F;if(w.delete&&(D=c.default.flatten(w.delete.map(M=>Re(M,w.graph)))),w.insert&&(g=c.default.flatten(w.insert.map(M=>Re(M,w.graph)))),w.where&&w.where.length>0){F=X({type:"group",patterns:w.where});const M=w.using;M?F=p.createFrom(F,M.default,M.named):w.graph&&(F=Y(F,w.graph))}else w.updateType==="deletewhere"&&D.length>0&&(F=p.createBgp(D));return p.createDeleteInsert(D.length>0?D:void 0,g.length>0?g:void 0,F)}function Re(w,D){let g=D;w.type==="graph"&&(g=w.name);let F=w.triples;return g&&(F=F.map(M=>Object.assign(M,{graph:g}))),F.map(V)}function De(w){let D;switch(c.default.isSimpleTerm(w.graph)?D=w.graph:w.graph.all?D="ALL":w.graph.default?D="DEFAULT":w.graph.named?D="NAMED":D=w.graph.name,w.type){case"clear":return p.createClear(D,w.silent);case"create":return p.createCreate(D,w.silent);case"drop":return p.createDrop(D,w.silent)}}function fe(w){return p.createLoad(w.source,w.destination,w.silent)}function _e(w){const D=w.source.default?"DEFAULT":w.source.name,g=w.destination.default?"DEFAULT":w.destination.name;switch(w.type){case"copy":return p.createCopy(D,g,w.silent);case"move":return p.createMove(D,g,w.silent);case"add":return p.createAdd(D,g,w.silent)}}function q(w){const D={},g=Array.from(f).reduce((M,Q)=>(M[Q]=!0,M),{});return c.default.mapOperation(w,{[a.types.DELETE_INSERT]:M=>({result:p.createDeleteInsert(M.delete,M.insert,M.where&&q(M.where)),recurse:!1}),[a.types.PATH]:(M,Q)=>({result:Q.createPath(F(M.subject),M.predicate,F(M.object),F(M.graph)),recurse:!1}),[a.types.PATTERN]:(M,Q)=>({result:Q.createPattern(F(M.subject),F(M.predicate),F(M.object),F(M.graph)),recurse:!1}),[a.types.CONSTRUCT]:M=>({result:p.createConstruct(q(M.input),M.template),recurse:!1})});function F(M){if(M.termType==="BlankNode"){let Q=D[M.value];return Q||(Q=c.default.createUniqueVariable(M.value,g,p.dataFactory),g[Q.value]=!0,D[M.value]=Q),Q}return M.termType==="Quad"?p.dataFactory.quad(F(M.subject),F(M.predicate),F(M.object),F(M.graph)):M}}return Nr}var ar={},Ti={},Bt={},f1={},Gr={},pw;function tC(){if(pw)return Gr;pw=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.termToString=o,Gr.getLiteralValue=i,Gr.getLiteralType=r,Gr.getLiteralLanguage=e,Gr.getLiteralDirection=a,Gr.stringToTerm=u,Gr.quadToStringQuad=c,Gr.stringQuadToQuad=s;const n=Ds(),t=new n.DataFactory;function o(l){if(l)switch(l.termType){case"NamedNode":return l.value;case"BlankNode":return"_:"+l.value;case"Literal":const f=l;return'"'+f.value+'"'+(f.datatype&&f.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&f.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&f.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+f.datatype.value:"")+(f.language?"@"+f.language:"")+(f.direction?"--"+f.direction:"");case"Quad":return`<<${o(l.subject)} ${o(l.predicate)} ${o(l.object)}${l.graph.termType==="DefaultGraph"?"":" "+o(l.graph)}>>`;case"Variable":return"?"+l.value;case"DefaultGraph":return l.value}}function i(l){const f=/^"([^]*)"/.exec(l);if(!f)throw new Error(l+" is not a literal");return f[1]}function r(l){const f=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(l);if(!f)throw new Error(l+" is not a literal");return f[1]||(f[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function e(l){const f=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(l);if(!f)throw new Error(l+" is not a literal");if(f[1]){let d=f[1].toLowerCase();const h=d.indexOf("--");return h>=0&&(d=d.slice(0,h)),d}return""}function a(l){const f=l.indexOf("--",l.lastIndexOf('"'));if(f>=0){const d=l.slice(f+2,l.length);if(d==="ltr"||d==="rtl")return d;throw new Error(l+" is not a literal with a valid direction")}return""}function u(l,f){if(f=f||t,!l||!l.length)return f.defaultGraph();switch(l[0]){case"_":return f.blankNode(l.substr(2));case"?":if(!f.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return f.variable(l.substr(1));case'"':const d=e(l),h=a(l),p=f.namedNode(r(l));return f.literal(i(l),d?{language:d,direction:h}:p);default:if(l[0]==="<"&&l.length>4&&l[1]==="<"&&l[l.length-1]===">"&&l[l.length-2]===">"){const y=l.slice(2,-2).trim();let b=[],_=0,T=0,m=!1;for(let A=0;A<y.length;A++){const E=y[A];if(E==="<"&&_++,E===">"){if(_===0)throw new Error("Found closing tag without opening tag in "+l);_--}if(E==='"'){let j=!1,X=A;for(;X-- >0&&y[X]==="\\";)j=!j;j||(m=!m)}if(E===" "&&!m&&_===0){for(b.push(y.slice(T,A));y[A+1]===" ";)A+=1;T=A+1}}if(_!==0)throw new Error("Found opening tag without closing tag in "+l);if(b.push(y.slice(T,y.length)),b.length!==3&&b.length!==4)throw new Error("Nested quad syntax error "+l);return b=b.map(A=>A.startsWith("<")&&!A.includes(" ")?A.slice(1,-1):A),f.quad(u(b[0]),u(b[1]),u(b[2]),b[3]?u(b[3]):void 0)}return f.namedNode(l)}}function c(l){return{subject:o(l.subject),predicate:o(l.predicate),object:o(l.object),graph:o(l.graph)}}function s(l,f){return f=f||t,f.quad(u(l.subject,f),u(l.predicate,f),u(l.object,f),u(l.graph,f))}return Gr}var hw;function Zx(){return hw||(hw=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.termToString=n.stringToTerm=n.stringQuadToQuad=n.quadToStringQuad=n.getLiteralValue=n.getLiteralType=n.getLiteralDirection=n.getLiteralLanguage=void 0;const t=tC();Object.defineProperty(n,"getLiteralLanguage",{enumerable:!0,get:function(){return t.getLiteralLanguage}}),Object.defineProperty(n,"getLiteralDirection",{enumerable:!0,get:function(){return t.getLiteralDirection}}),Object.defineProperty(n,"getLiteralType",{enumerable:!0,get:function(){return t.getLiteralType}}),Object.defineProperty(n,"getLiteralValue",{enumerable:!0,get:function(){return t.getLiteralValue}}),Object.defineProperty(n,"quadToStringQuad",{enumerable:!0,get:function(){return t.quadToStringQuad}}),Object.defineProperty(n,"stringQuadToQuad",{enumerable:!0,get:function(){return t.stringQuadToQuad}}),Object.defineProperty(n,"stringToTerm",{enumerable:!0,get:function(){return t.stringToTerm}}),Object.defineProperty(n,"termToString",{enumerable:!0,get:function(){return t.termToString}})})(f1)),f1}var Oi={},ht={},yw;function rC(){if(yw)return ht;yw=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.TRIPLE_TERM_NAMES=ht.QUAD_TERM_NAMES=void 0,ht.getTerms=o,ht.getTermsNested=i,ht.getNamedTerms=r,ht.collectNamedTerms=e,ht.forEachTerms=a,ht.forEachTermsNested=u,ht.filterTerms=c,ht.filterTermsNested=s,ht.filterQuadTermNames=l,ht.filterQuadTermNamesNested=f,ht.mapTerms=d,ht.mapTermsNested=h,ht.reduceTerms=p,ht.reduceTermsNested=y,ht.everyTerms=b,ht.everyTermsNested=_,ht.someTerms=T,ht.someTermsNested=m,ht.getValueNestedPath=A,ht.matchTerm=E,ht.matchPattern=j,ht.matchPatternComplete=X,ht.matchPatternMappings=K;const n=Ds(),t=new n.DataFactory;ht.QUAD_TERM_NAMES=["subject","predicate","object","graph"],ht.TRIPLE_TERM_NAMES=["subject","predicate","object"];function o(O,S){return S&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}function i(O,S){const L=[];for(const N of o(O,S))N.termType==="Quad"?i(N,S).forEach(I=>L.push(I)):L.push(N);return L}function r(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}function e(O,S,L){const N={};return O.forEach(I=>N[I.key]=I.value),S&&(N.subject=N.subject||S("subject"),N.predicate=N.predicate||S("predicate"),N.object=N.object||S("object"),N.graph=N.graph||S("graph")),(L||t).quad(N.subject,N.predicate,N.object,N.graph)}function a(O,S){S(O.subject,"subject"),S(O.predicate,"predicate"),S(O.object,"object"),S(O.graph,"graph")}function u(O,S,L=[]){O.subject.termType==="Quad"?u(O.subject,S,[...L,"subject"]):S(O.subject,[...L,"subject"]),O.predicate.termType==="Quad"?u(O.predicate,S,[...L,"predicate"]):S(O.predicate,[...L,"predicate"]),O.object.termType==="Quad"?u(O.object,S,[...L,"object"]):S(O.object,[...L,"object"]),O.graph.termType==="Quad"?u(O.graph,S,[...L,"graph"]):S(O.graph,[...L,"graph"])}function c(O,S){const L=[];return S(O.subject,"subject")&&L.push(O.subject),S(O.predicate,"predicate")&&L.push(O.predicate),S(O.object,"object")&&L.push(O.object),S(O.graph,"graph")&&L.push(O.graph),L}function s(O,S,L=[]){let N=[];return O.subject.termType==="Quad"?N=[...N,...s(O.subject,S,[...L,"subject"])]:S(O.subject,[...L,"subject"])&&N.push(O.subject),O.predicate.termType==="Quad"?N=[...N,...s(O.predicate,S,[...L,"predicate"])]:S(O.predicate,[...L,"predicate"])&&N.push(O.predicate),O.object.termType==="Quad"?N=[...N,...s(O.object,S,[...L,"object"])]:S(O.object,[...L,"object"])&&N.push(O.object),O.graph.termType==="Quad"?N=[...N,...s(O.graph,S,[...L,"graph"])]:S(O.graph,[...L,"graph"])&&N.push(O.graph),N}function l(O,S){const L=[];return S(O.subject,"subject")&&L.push("subject"),S(O.predicate,"predicate")&&L.push("predicate"),S(O.object,"object")&&L.push("object"),S(O.graph,"graph")&&L.push("graph"),L}function f(O,S,L=[]){let N=[];const I=[...L,"subject"];O.subject.termType==="Quad"?N=[...N,...f(O.subject,S,I)]:S(O.subject,I)&&N.push(I);const V=[...L,"predicate"];O.predicate.termType==="Quad"?N=[...N,...f(O.predicate,S,V)]:S(O.predicate,V)&&N.push(V);const re=[...L,"object"];O.object.termType==="Quad"?N=[...N,...f(O.object,S,re)]:S(O.object,re)&&N.push(re);const Y=[...L,"graph"];return O.graph.termType==="Quad"?N=[...N,...f(O.graph,S,Y)]:S(O.graph,Y)&&N.push(Y),N}function d(O,S,L){return(L||t).quad(S(O.subject,"subject"),S(O.predicate,"predicate"),S(O.object,"object"),S(O.graph,"graph"))}function h(O,S,L,N=[]){return(L||t).quad(O.subject.termType==="Quad"?h(O.subject,S,L,[...N,"subject"]):S(O.subject,[...N,"subject"]),O.predicate.termType==="Quad"?h(O.predicate,S,L,[...N,"predicate"]):S(O.predicate,[...N,"predicate"]),O.object.termType==="Quad"?h(O.object,S,L,[...N,"object"]):S(O.object,[...N,"object"]),O.graph.termType==="Quad"?h(O.graph,S,L,[...N,"graph"]):S(O.graph,[...N,"graph"]))}function p(O,S,L){let N=L;return N=S(N,O.subject,"subject"),N=S(N,O.predicate,"predicate"),N=S(N,O.object,"object"),S(N,O.graph,"graph")}function y(O,S,L,N=[]){let I=L;return O.subject.termType==="Quad"?I=y(O.subject,S,I,[...N,"subject"]):I=S(I,O.subject,[...N,"subject"]),O.predicate.termType==="Quad"?I=y(O.predicate,S,I,[...N,"predicate"]):I=S(I,O.predicate,[...N,"predicate"]),O.object.termType==="Quad"?I=y(O.object,S,I,[...N,"object"]):I=S(I,O.object,[...N,"object"]),O.graph.termType==="Quad"?I=y(O.graph,S,I,[...N,"graph"]):I=S(I,O.graph,[...N,"graph"]),I}function b(O,S){return S(O.subject,"subject")&&S(O.predicate,"predicate")&&S(O.object,"object")&&S(O.graph,"graph")}function _(O,S,L=[]){return(O.subject.termType==="Quad"?_(O.subject,S,[...L,"subject"]):S(O.subject,[...L,"subject"]))&&(O.predicate.termType==="Quad"?_(O.predicate,S,[...L,"predicate"]):S(O.predicate,[...L,"predicate"]))&&(O.object.termType==="Quad"?_(O.object,S,[...L,"object"]):S(O.object,[...L,"object"]))&&(O.graph.termType==="Quad"?_(O.graph,S,[...L,"graph"]):S(O.graph,[...L,"graph"]))}function T(O,S){return S(O.subject,"subject")||S(O.predicate,"predicate")||S(O.object,"object")||S(O.graph,"graph")}function m(O,S,L=[]){return(O.subject.termType==="Quad"?m(O.subject,S,[...L,"subject"]):S(O.subject,[...L,"subject"]))||(O.predicate.termType==="Quad"?m(O.predicate,S,[...L,"predicate"]):S(O.predicate,[...L,"predicate"]))||(O.object.termType==="Quad"?m(O.object,S,[...L,"object"]):S(O.object,[...L,"object"]))||(O.graph.termType==="Quad"?m(O.graph,S,[...L,"graph"]):S(O.graph,[...L,"graph"]))}function A(O,S){if(S.length===0)return O;if(O.termType==="Quad")return A(O[S[0]],S.slice(1));throw new Error(`Tried to get ${S[0]} from term of type ${O.termType}`)}function E(O,S){return!S||S.termType==="Variable"||S.termType==="Quad"&&O.termType==="Quad"&&X(O,S)||S.equals(O)}function j(O,S,L,N,I){return E(O.subject,S)&&E(O.predicate,L)&&E(O.object,N)&&E(O.graph,I)}function X(O,S){return j(O,S.subject,S.predicate,S.object,S.graph)}function K(O,S,L={}){const N={};function I(V,re){return b(V,(Y,ce)=>{var ae,pe;const U=re[ce];switch(Y.termType){case"Variable":return L.skipVarMapping&&U.termType==="Variable"||((pe=(ae=N[Y.value])===null||ae===void 0?void 0:ae.equals(U))!==null&&pe!==void 0?pe:(N[Y.value]=U,!0));case"Quad":return U.termType==="Quad"&&I(Y,U);default:return Y.equals(U)}})}return I(S,O)&&(L.returnMappings?N:!0)}return ht}var Or={},_w;function nC(){if(_w)return Or;_w=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.TERM_TYPES=void 0,Or.uniqTerms=t,Or.getTermsOfType=o,Or.getNamedNodes=i,Or.getBlankNodes=r,Or.getLiterals=e,Or.getVariables=a,Or.getDefaultGraphs=u,Or.getQuads=c;const n=Zx();Or.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function t(s){const l={};return s.filter(f=>{const d=(0,n.termToString)(f);return!(d in l)&&(l[d]=!0)})}function o(s,l){return s.filter(f=>f.termType===l)}function i(s){return o(s,"NamedNode")}function r(s){return o(s,"BlankNode")}function e(s){return o(s,"Literal")}function a(s){return o(s,"Variable")}function u(s){return o(s,"DefaultGraph")}function c(s){return o(s,"Quad")}return Or}var gw;function iC(){return gw||(gw=1,(function(n){var t=Oi&&Oi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Oi&&Oi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(rC(),n),o(nC(),n)})(Oi)),Oi}var d1={exports:{}};var mw;function jT(){return mw||(mw=1,(function(n){(function(){var t;function o(i,r){var e=this instanceof o?this:t;if(e.reset(r),typeof i=="string"&&i.length>0&&e.hash(i),e!==this)return e}o.prototype.hash=function(i){var r,e,a,u,c;switch(c=i.length,this.len+=c,e=this.k1,a=0,this.rem){case 0:e^=c>a?i.charCodeAt(a++)&65535:0;case 1:e^=c>a?(i.charCodeAt(a++)&65535)<<8:0;case 2:e^=c>a?(i.charCodeAt(a++)&65535)<<16:0;case 3:e^=c>a?(i.charCodeAt(a)&255)<<24:0,e^=c>a?(i.charCodeAt(a++)&65280)>>8:0}if(this.rem=c+this.rem&3,c-=this.rem,c>0){for(r=this.h1;e=e*11601+(e&65535)*3432906752&4294967295,e=e<<15|e>>>17,e=e*13715+(e&65535)*461832192&4294967295,r^=e,r=r<<13|r>>>19,r=r*5+3864292196&4294967295,!(a>=c);)e=i.charCodeAt(a++)&65535^(i.charCodeAt(a++)&65535)<<8^(i.charCodeAt(a++)&65535)<<16,u=i.charCodeAt(a++),e^=(u&255)<<24^(u&65280)>>8;switch(e=0,this.rem){case 3:e^=(i.charCodeAt(a+2)&65535)<<16;case 2:e^=(i.charCodeAt(a+1)&65535)<<8;case 1:e^=i.charCodeAt(a)&65535}this.h1=r}return this.k1=e,this},o.prototype.result=function(){var i,r;return i=this.k1,r=this.h1,i>0&&(i=i*11601+(i&65535)*3432906752&4294967295,i=i<<15|i>>>17,i=i*13715+(i&65535)*461832192&4294967295,r^=i),r^=this.len,r^=r>>>16,r=r*51819+(r&65535)*2246770688&4294967295,r^=r>>>13,r=r*44597+(r&65535)*3266445312&4294967295,r^=r>>>16,r>>>0},o.prototype.reset=function(i){return this.h1=typeof i=="number"?i:0,this.rem=this.k1=this.len=0,this},t=new o,n.exports=o})()})(d1)),d1.exports}var bw;function aC(){if(bw)return Bt;bw=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.isomorphic=i,Bt.getBijection=r,Bt.getBijectionInner=e,Bt.hashValues=u,Bt.hasValue=c,Bt.getQuadsWithBlankNodes=s,Bt.getQuadsWithoutBlankNodes=l,Bt.indexGraph=f,Bt.deindexGraph=d,Bt.uniqGraph=h,Bt.getGraphBlankNodes=p,Bt.hashTerms=y,Bt.hashTerm=b,Bt.hashNumber=_,Bt.quadToSignature=T,Bt.termToSignature=m,Bt.isTermGrounded=A;const n=Zx(),t=iC(),o=jT();function i(E,j){return!!r(E,j)}function r(E,j){const X=f(l(E)),K=f(l(j));if(Object.keys(X).length!==Object.keys(K).length)return null;for(const I in X)if(X[I]!==K[I])return null;const O=h(s(E)),S=h(s(j)),L=p(E),N=p(j);return e(O,S,L,N)}function e(E,j,X,K,O,S){O||(O={}),S||(S={});const[L,N]=y(E,X,O),[I,V]=y(j,K,S);if(Object.keys(L).length!==Object.keys(I).length)return null;for(const Y in L)if(!c(I,L[Y]))return null;let re={};for(const Y of X){const ce=(0,n.termToString)(Y),ae=N[ce];for(const pe in V)if(V[pe]===ae){re[ce]=pe,delete V[pe];break}}if(!a(Object.keys(re).sort(),X.map(n.termToString).sort())||!a(u(re).sort(),K.map(n.termToString).sort())){re=null;for(const Y of X){const ce=(0,n.termToString)(Y);if(!L[ce])for(const ae of K){const pe=(0,n.termToString)(ae);if(!I[pe]&&N[ce]===V[pe]){const U=_(ce);re=e(E,j,X,K,Object.assign(Object.assign({},L),{[ce]:U}),Object.assign(Object.assign({},I),{[pe]:U}))}}}}return re}function a(E,j){if(E.length!==j.length)return!1;for(let X=E.length;X--;)if(E[X]!==j[X])return!1;return!0}function u(E){const j=[];for(const X in E)j.push(E[X]);return j}function c(E,j){for(const X in E)if(E[X]===j)return!0;return!1}function s(E){return E.filter(j=>(0,t.someTerms)(j,X=>X.termType==="BlankNode"||X.termType==="Quad"&&(0,t.getTermsNested)(X).some(K=>K.termType==="BlankNode")))}function l(E){return E.filter(j=>(0,t.everyTerms)(j,X=>X.termType!=="BlankNode"&&!(X.termType==="Quad"&&(0,t.getTermsNested)(X).some(K=>K.termType==="BlankNode"))))}function f(E){const j={};for(const X of E)j[JSON.stringify((0,n.quadToStringQuad)(X))]=!0;return j}function d(E){return Object.keys(E).map(j=>(0,n.stringQuadToQuad)(JSON.parse(j)))}function h(E){return d(f(E))}function p(E){return(0,t.uniqTerms)(E.map(j=>(0,t.getBlankNodes)((0,t.getTermsNested)(j))).reduce((j,X)=>j.concat(X),[]))}function y(E,j,X){const K=Object.assign({},X),O={};let S=!0;for(;S;){const L=Object.keys(K).length;for(const I of j){const V=(0,n.termToString)(I);if(!K[V]){const[re,Y]=b(I,E,K);re&&(K[V]=Y),O[V]=Y}}const N=new Map;for(const I in O){const V=O[I];N.get(V)===void 0?N.set(V,I):N.set(V,!1)}for(const[I,V]of N.entries())V&&(K[V]=I);S=L!==Object.keys(K).length}return[K,O]}function b(E,j,X){const K=[];let O=!0;for(const L of j){const N=(0,t.getTermsNested)(L);if(N.some(I=>I.equals(E))){K.push(T(L,X,E));for(const I of N)!A(I,X)&&!I.equals(E)&&(O=!1)}}const S=_(K.sort().join(""));return[O,S]}function _(E){return o().hash(E).result()}function T(E,j,X){return(0,t.getTerms)(E).map(K=>m(K,j,X)).join("|")}function m(E,j,X){var K;return E.equals(X)?"@self":E.termType==="BlankNode"?((K=j[(0,n.termToString)(E)])===null||K===void 0?void 0:K.toString())||"@blank":E.termType==="Quad"?`<${T(E,j,X)}>`:(0,n.termToString)(E)}function A(E,j){return E.termType!=="BlankNode"&&!(E.termType==="Quad"&&(0,t.getTermsNested)(E).some(X=>!A(X,j)))||!!j[(0,n.termToString)(E)]}return Bt}var vw;function oC(){return vw||(vw=1,(function(n){var t=Ti&&Ti.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ti&&Ti.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(aC(),n)})(Ti)),Ti}var Tw;function uC(){if(Tw)return ar;Tw=1;var n=ar&&ar.__createBinding||(Object.create?(function(z,be,we,Le){Le===void 0&&(Le=we);var Qe=Object.getOwnPropertyDescriptor(be,we);(!Qe||("get"in Qe?!be.__esModule:Qe.writable||Qe.configurable))&&(Qe={enumerable:!0,get:function(){return be[we]}}),Object.defineProperty(z,Le,Qe)}):(function(z,be,we,Le){Le===void 0&&(Le=we),z[Le]=be[we]})),t=ar&&ar.__setModuleDefault||(Object.create?(function(z,be){Object.defineProperty(z,"default",{enumerable:!0,value:be})}):function(z,be){z.default=be}),o=ar&&ar.__importStar||function(z){if(z&&z.__esModule)return z;var be={};if(z!=null)for(var we in z)we!=="default"&&Object.prototype.hasOwnProperty.call(z,we)&&n(be,z,we);return t(be,z),be},i=ar&&ar.__importDefault||function(z){return z&&z.__esModule?z:{default:z}};Object.defineProperty(ar,"__esModule",{value:!0}),ar.toSparqlJs=ar.toSparql=void 0;const r=oC(),e=Pb(),a=Nb(),u=o(tm()),c=i(Mb()),s=i(RT()),l=u.types,f=u.expressionTypes;let d;const h=new c.default;function p(z,be={}){return new a.Generator(be).stringify(y(z))}ar.toSparql=p;function y(z){b(),z=Me(z);let be=_(z);return be.type==="group"?be.patterns[0]:be}ar.toSparqlJs=y;function b(){d={project:!1,extend:[],group:[],aggregates:[],order:[]}}function _(z){switch(z.type!==l.EXTEND&&z.type!==l.ORDER_BY&&z.type!==l.GRAPH&&(d.project=!1),z.type){case l.EXPRESSION:return T(z);case l.ASK:return fe(z,l.ASK);case l.BGP:return I(z);case l.CONSTRUCT:return V(z);case l.DESCRIBE:return fe(z,l.DESCRIBE);case l.DISTINCT:return re(z);case l.EXTEND:return Y(z);case l.FROM:return ce(z);case l.FILTER:return ae(z);case l.GRAPH:return pe(z);case l.GROUP:return U(z);case l.JOIN:return le(z);case l.LEFT_JOIN:return me(z);case l.MINUS:return te(z);case l.NOP:return{};case l.ORDER_BY:return de(z);case l.PATH:return Ee(z);case l.PATTERN:return Re(z);case l.PROJECT:return fe(z,l.PROJECT);case l.REDUCED:return q(z);case l.SERVICE:return w(z);case l.SLICE:return D(z);case l.UNION:return g(z);case l.VALUES:return F(z);case l.COMPOSITE_UPDATE:return Te(z);case l.DELETE_INSERT:return Fe(z);case l.LOAD:return Z(z);case l.CLEAR:return oe(z);case l.CREATE:return P(z);case l.DROP:return v(z);case l.ADD:return C(z);case l.MOVE:return k(z);case l.COPY:return se(z)}throw new Error(`Unknown Operation type ${z.type}`)}function T(z){switch(z.expressionType){case f.AGGREGATE:return E(z);case f.EXISTENCE:return j(z);case f.NAMED:return X(z);case f.OPERATOR:return K(z);case f.TERM:return O(z);case f.WILDCARD:return S(z)}throw new Error(`Unknown Expression Operation type ${z.expressionType}`)}function m(z){switch(z.type){case l.ALT:return M(z);case l.INV:return Q(z);case l.LINK:return x(z);case l.NPS:return $(z);case l.ONE_OR_MORE_PATH:return B(z);case l.SEQ:return H(z);case l.ZERO_OR_MORE_PATH:return ne(z);case l.ZERO_OR_ONE_PATH:return ue(z)}throw new Error(`Unknown Path type ${z.type}`)}function A(z){return(0,e.termToString)(z)}function E(z){const be={expression:T(z.expression),type:"aggregate",aggregation:z.aggregator,distinct:z.distinct};return z.separator&&(be.separator=z.separator),be}function j(z){return{type:"operation",operator:z.not?"notexists":"exists",args:[{type:"group",patterns:s.default.flatten([_(z.input)])}]}}function X(z){return{type:"functionCall",function:z.name,args:z.args.map(T)}}function K(z){if(z.operator==="desc"){const we={expression:T(z.args[0])};return we.descending=!0,we}const be={type:"operation",operator:z.operator,args:z.args.map(T)};return(be.operator==="in"||be.operator==="notin")&&(be.args=[be.args[0]].concat([be.args.slice(1)])),be}function O(z){return z.term}function S(z){return z.wildcard}function L(z){return Array.isArray(z)?z.length===1?z[0]:{type:"group",patterns:z}:z}function N(z){return z}function I(z){let be=z.patterns.map(Re);return be.length===0?null:{type:"bgp",triples:be}}function V(z){return{type:"query",prefixes:{},queryType:"CONSTRUCT",template:z.template.map(Re),where:s.default.flatten([_(z.input)])}}function re(z){let be=_(z.input);return be.patterns[0].distinct=!0,be}function Y(z){return d.project?(d.extend.push(z),_(z.input)):s.default.flatten([_(z.input),{type:"bind",variable:z.variable,expression:T(z.expression)}])}function ce(z){const be=_(z.input);let we=be;return be.type==="group"&&(we=be.patterns[0]),we.from={default:z.default,named:z.named},be}function ae(z){return{type:"group",patterns:s.default.flatten([_(z.input),{type:"filter",expression:T(z.expression)}])}}function pe(z){return{type:"graph",patterns:s.default.flatten([_(z.input)]),name:z.name}}function U(z){const be=_(z.input),we=z.aggregates.map(N);return d.aggregates.push(...we),d.group.push(...z.variables),be}function le(z){return s.default.flatten(z.input.map(_)).reduce((we,Le)=>(Le.type!=="bgp"||we.length==0||we[we.length-1].type!=="bgp"?we.push(Le):we[we.length-1].triples.push(...Le.triples),we),[])}function me(z){const be={type:"optional",patterns:[_(z.input[1])]};return z.expression&&be.patterns.push({type:"filter",expression:T(z.expression)}),be.patterns=s.default.flatten(be.patterns),s.default.flatten([_(z.input[0]),be])}function te(z){let be=_(z.input[1]);return be.type==="group"&&(be=be.patterns),Array.isArray(be)||(be=[be]),s.default.flatten([_(z.input[0]),{type:"minus",patterns:be}])}function de(z){return d.order.push(...z.expressions),_(z.input)}function Ee(z){return{type:"bgp",triples:[{subject:z.subject,predicate:m(z.predicate),object:z.object}]}}function Re(z){return{subject:z.subject,predicate:z.predicate,object:z.object}}function De(z,be){let we=s.default.isSimpleTerm(z)?A(z):z;if(typeof we=="string"){if(be[we])return be[we]}else if(Array.isArray(z))z=z.map(Le=>De(Le,be));else for(let Le of Object.keys(z))z[Le]=De(z[Le],be);return z}function fe(z,be){const we={type:"query",prefixes:{}},Le=we;let Qe;be===l.PROJECT?(we.queryType="SELECT",Qe=z.variables):be===l.ASK?we.queryType="ASK":be===l.DESCRIBE&&(we.queryType="DESCRIBE",Qe=z.terms);const Ke=d.extend,Ge=d.group,nt=d.aggregates,ct=d.order;b(),d.project=!0;let W=s.default.flatten([_(z.input)]);W.length===1&&W[0].type==="group"&&(W=W[0].patterns),we.where=W;let ee={};for(let qe of d.aggregates)ee[A(qe.variable)]=T(qe);let Pe={};for(let qe=d.extend.length-1;qe>=0;--qe){let lt=d.extend[qe];Pe[A(lt.variable)]=De(T(lt.expression),ee)}d.group.length>0&&(Le.group=d.group.map(qe=>{let lt=A(qe);if(Pe[lt]){let Qt=Pe[lt];return delete Pe[lt],{variable:qe,expression:Qt}}return{expression:qe}})),d.order.length>0&&(Le.order=d.order.map(_).map(qe=>qe.descending?qe:{expression:qe})),Qe&&(Le.variables=Qe.map(qe=>{let lt=A(qe);if(Pe[lt]){let Qt=Pe[lt];return delete Pe[lt],{variable:qe,expression:Qt}}return qe}),Le.variables.length===0&&(Le.variables=[new a.Wildcard]));const Ne=Object.entries(Pe);if(Ne.length>0){Le.where=Le.where||[];for(const[qe,lt]of Ne)Le.where.push({type:"bind",variable:(0,e.stringToTerm)(qe),expression:lt})}if(we.where.length>0&&we.where[we.where.length-1].type==="filter"){const qe=we.where[we.where.length-1];_e(qe,Object.keys(ee))&&(Le.having=s.default.flatten([De(qe.expression,ee)]),we.where.splice(-1))}return d.extend=Ke,d.group=Ge,d.aggregates=nt,d.order=ct,{type:"group",patterns:[Le]}}function _e(z,be){return s.default.isSimpleTerm(z)?be.indexOf(A(z))>=0:Array.isArray(z)?z.some(we=>_e(we,be)):z===Object(z)?Object.keys(z).some(we=>_e(z[we],be)):be.indexOf(z)>=0}function q(z){let be=_(z.input);return be.patterns[0].reduced=!0,be}function w(z){let be=_(z.input);return be.type==="group"&&(be=be.patterns),Array.isArray(be)||(be=[be]),{type:"service",name:z.name,silent:z.silent,patterns:be}}function D(z){let be=_(z.input),we=be;return be.type&&be.type==="group"&&(we=be.patterns[0]),z.start!==0&&(we.offset=z.start),z.length!==void 0&&(we.limit=z.length),be}function g(z){return{type:"union",patterns:z.input.map(_).map(L)}}function F(z){return{type:"values",values:z.bindings.map(be=>{let we={};for(let Le of z.variables){let Qe=`?${Le.value}`;be[Qe]?we[Qe]=be[Qe]:we[Qe]=void 0}return we})}}function M(z){const be=z.input.map(m);return be.every(we=>"pathType"in we&&we.pathType==="!")?{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:s.default.flatten(be.map(we=>we.items))}]}:{type:"path",pathType:"|",items:be}}function Q(z){if(z.path.type===l.NPS){const be=z.path.iris.map(we=>({type:"path",pathType:"^",items:[we]}));return be.length<=1?{type:"path",pathType:"!",items:be}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:be}]}}return{type:"path",pathType:"^",items:[m(z.path)]}}function x(z){return z.iri}function $(z){return z.iris.length<=1?{type:"path",pathType:"!",items:z.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:z.iris}]}}function B(z){return{type:"path",pathType:"+",items:[m(z.path)]}}function H(z){return{type:"path",pathType:"/",items:z.input.map(m)}}function ne(z){return{type:"path",pathType:"*",items:[m(z.path)]}}function ue(z){return{type:"path",pathType:"?",items:[m(z.path)]}}function Te(z){const be=z.updates.map(we=>_(we).updates[0]);return{prefixes:{},type:"update",updates:be}}function Fe(z){var be;let we=z.where,Le;if(we&&we.type===l.FROM){let Ke=we;we=Ke.input,Le={default:Ke.default,named:Ke.named}}const Qe=[{updateType:"insertdelete",delete:Ie(z.delete||[]),insert:Ie(z.insert||[])}];if(Le&&(Qe[0].using=Le),!we||we.type===l.BGP&&we.patterns.length===0)Qe[0].where=[];else{const Ke=[];let Ge=_(Ue(we,Ke));if(Ge.type==="group"?Qe[0].where=Ge.patterns:Qe[0].where=[Ge],Ke.length>0){if(Ke.length!==1)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");((be=Ke[0])===null||be===void 0?void 0:be.value)!==""&&(Qe[0].where=[{type:"graph",patterns:Qe[0].where,name:Ke[0]}])}}return!z.delete&&!z.where?(Qe[0].updateType="insert",delete Qe[0].delete,delete Qe[0].where):!z.insert&&!z.where?(delete Qe[0].insert,delete Qe[0].where,z.delete.some(Ke=>Ke.subject.termType==="Variable"||Ke.predicate.termType==="Variable"||Ke.object.termType==="Variable")?Qe[0].updateType="deletewhere":Qe[0].updateType="delete"):!z.insert&&z.where&&z.where.type==="bgp"&&(0,r.isomorphic)(z.delete,z.where.patterns)&&(delete Qe[0].where,Qe[0].updateType="deletewhere"),{prefixes:{},type:"update",updates:Qe}}function Z(z){const be=[{type:"load",silent:!!z.silent,source:z.source}];return z.destination&&(be[0].destination=z.destination),{prefixes:{},type:"update",updates:be}}function oe(z){return R(z,"clear")}function P(z){return R(z,"create")}function v(z){return R(z,"drop")}function R(z,be){const we=[{type:be,silent:!!z.silent}];return z.source==="DEFAULT"?we[0].graph={default:!0}:z.source==="NAMED"?we[0].graph={named:!0}:z.source==="ALL"?we[0].graph={all:!0}:we[0].graph={type:"graph",name:z.source},{prefixes:{},type:"update",updates:we}}function C(z){return he(z,"add")}function k(z){return he(z,"move")}function se(z){return he(z,"copy")}function he(z,be){const we=[{type:be,silent:!!z.silent}];return we[0].source=z.source==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:z.source},we[0].destination=z.destination==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:z.destination},{prefixes:{},type:"update",updates:we}}function Ie(z){if(!z)return[];const be={};return z.forEach(we=>{const Le=we.graph.value;be[Le]||(be[Le]=[]),be[Le].push(we)}),Object.keys(be).map(we=>we===""?{type:"bgp",triples:be[we].map(Re)}:{type:"graph",triples:be[we].map(Re),name:be[we][0].graph})}function Me(z){return Ue(z,[])}function Ue(z,be){if(Array.isArray(z))return z.map(Ge=>Ue(Ge,be));if(!z.type||z.type===l.DELETE_INSERT)return z;if((z.type===l.PATTERN||z.type===l.PATH)&&z.graph)return be.push(z.graph),z.graph.name!==""?z.type===l.PATTERN?h.createPattern(z.subject,z.predicate,z.object):h.createPath(z.subject,z.predicate,z.object):z;const we={},Le={},Qe={};for(let Ge of Object.keys(z)){const nt=[];if(we[Ge]=Ue(z[Ge],nt),nt.length>0){Le[Ge]=nt;for(const ct of nt)Qe[ct.value]=ct}}const Ke=Object.keys(Qe);if(Ke.length>0)if(Ke.length===1&&![l.PROJECT,l.SERVICE].includes(z.type))be.push(Qe[Ke[0]]);else{if(z.type===l.BGP)return Ce(z,Le.patterns);for(let Ge of Object.keys(Le)){const nt=we[Ge];Array.isArray(nt)?we[Ge]=nt.map((ct,W)=>Le[Ge][0].value===""?ct:h.createGraph(ct,Le[Ge][W])):Le[Ge][0].value!==""&&(we[Ge]=h.createGraph(nt,Le[Ge][0]))}}return we}function Ce(z,be){var we;const Le={};for(let Ge=0;Ge<z.patterns.length;++Ge){const nt=z.patterns[Ge],ct=be[Ge].value;Le[ct]=(we=Le[ct])!==null&&we!==void 0?we:{patterns:[],graph:be[Ge]},Le[ct].patterns.push(nt)}let Qe=[];for(const[Ge,{patterns:nt,graph:ct}]of Object.entries(Le)){const W=h.createBgp(nt);Qe.push(Ge===""?W:h.createGraph(W,ct))}let Ke=Qe[0];for(let Ge=1;Ge<Qe.length;++Ge)Ke=h.createJoin([Ke,Qe[Ge]]);return Ke}return ar}var Ow;function We(){return Ow||(Ow=1,(function(n){var t=Ur&&Ur.__createBinding||(Object.create?(function(l,f,d,h){h===void 0&&(h=d);var p=Object.getOwnPropertyDescriptor(f,d);(!p||("get"in p?!f.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return f[d]}}),Object.defineProperty(l,h,p)}):(function(l,f,d,h){h===void 0&&(h=d),l[h]=f[d]})),o=Ur&&Ur.__setModuleDefault||(Object.create?(function(l,f){Object.defineProperty(l,"default",{enumerable:!0,value:f})}):function(l,f){l.default=f}),i=Ur&&Ur.__importStar||function(l){if(l&&l.__esModule)return l;var f={};if(l!=null)for(var d in l)d!=="default"&&Object.prototype.hasOwnProperty.call(l,d)&&t(f,l,d);return o(f,l),f},r=Ur&&Ur.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(n,"__esModule",{value:!0}),n.Util=n.toSparqlJs=n.toSparql=n.Factory=n.Algebra=n.translate=void 0;const e=r(eC());n.translate=e.default;const a=i(tm());n.Algebra=a;const u=r(Mb());n.Factory=u.default;const c=uC();Object.defineProperty(n,"toSparql",{enumerable:!0,get:function(){return c.toSparql}}),Object.defineProperty(n,"toSparqlJs",{enumerable:!0,get:function(){return c.toSparqlJs}});const s=r(RT());n.Util=s.default})(Ur)),Ur}var Si={},Ol={},Sw;function sC(){if(Sw)return Ol;Sw=1,Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.asTermType=void 0;function n(t){if(t==="namedNode"||t==="literal"||t==="blankNode"||t==="quad")return t}return Ol.asTermType=n,Ol}var Sl={},ww;function cC(){if(ww)return Sl;ww=1,Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.Variable=void 0;const n=Vn();class t{constructor(i){this.expressionType=n.ExpressionType.Variable,this.name=i}}return Sl.Variable=t,Sl}var Je={},Xr={},wi={},wl={},Aw;function kx(){if(Aw)return wl;Aw=1,Object.defineProperty(wl,"__esModule",{value:!0}),wl.BlankNode=void 0;class n{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return wl.BlankNode=n,wl}var Al={},Fl={},Fw;function eq(){if(Fw)return Fl;Fw=1,Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.DefaultGraph=void 0;class n{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return Fl.DefaultGraph=n,n.INSTANCE=new n,Fl}var El={},Rl={},Ew;function DT(){if(Ew)return Rl;Ew=1,Object.defineProperty(Rl,"__esModule",{value:!0}),Rl.NamedNode=void 0;class n{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return Rl.NamedNode=n,Rl}var Rw;function tq(){if(Rw)return El;Rw=1,Object.defineProperty(El,"__esModule",{value:!0}),El.Literal=void 0;const n=DT();class t{constructor(i,r){this.termType="Literal",this.value=i,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(i){return!!i&&i.termType==="Literal"&&i.value===this.value&&i.language===this.language&&this.datatype.equals(i.datatype)}}return El.Literal=t,t.RDF_LANGUAGE_STRING=new n.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new n.NamedNode("http://www.w3.org/2001/XMLSchema#string"),El}var jl={},jw;function rq(){if(jw)return jl;jw=1,Object.defineProperty(jl,"__esModule",{value:!0}),jl.Quad=void 0;class n{constructor(o,i,r,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=i,this.object=r,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return jl.Quad=n,jl}var Dl={},Dw;function nq(){if(Dw)return Dl;Dw=1,Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.Variable=void 0;class n{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return Dl.Variable=n,Dl}var Pw;function lC(){if(Pw)return Al;Pw=1,Object.defineProperty(Al,"__esModule",{value:!0}),Al.DataFactory=void 0;const n=kx(),t=eq(),o=tq(),i=DT(),r=rq(),e=nq();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new i.NamedNode(s)}blankNode(s){return new n.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,f,d){return new r.Quad(s,l,f,d||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Al.DataFactory=u,Al}var Nw;function fC(){return Nw||(Nw=1,(function(n){var t=wi&&wi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=wi&&wi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(kx(),n),o(lC(),n),o(eq(),n),o(tq(),n),o(DT(),n),o(rq(),n),o(nq(),n)})(wi)),wi}var Mw;function Rs(){if(Mw)return Xr;Mw=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.SparqlOperator=Xr.TypeURL=Xr.typedLiteral=Xr.TypeAlias=void 0;const n=fC();var t;(function(a){a.SPARQL_NUMERIC="SPARQL_NUMERIC",a.SPARQL_STRINGLY="SPARQL_STRINGLY"})(t||(Xr.TypeAlias=t={}));const o=new n.DataFactory;function i(a,u){return o.literal(a,o.namedNode(u))}Xr.typedLiteral=i;var r;(function(a){a.XSD_ANY_URI="http://www.w3.org/2001/XMLSchema#anyURI",a.XSD_STRING="http://www.w3.org/2001/XMLSchema#string",a.RDF_LANG_STRING="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",a.XSD_BOOLEAN="http://www.w3.org/2001/XMLSchema#boolean",a.XSD_DATE_TIME="http://www.w3.org/2001/XMLSchema#dateTime",a.XSD_DATE_TIME_STAMP="http://www.w3.org/2001/XMLSchema#dateTimeStamp",a.XSD_DATE="http://www.w3.org/2001/XMLSchema#date",a.XSD_G_MONTH="http://www.w3.org/2001/XMLSchema#gMonth",a.XSD_G_MONTHDAY="http://www.w3.org/2001/XMLSchema#gMonthDay",a.XSD_G_YEAR="http://www.w3.org/2001/XMLSchema#gYear",a.XSD_G_YEAR_MONTH="http://www.w3.org/2001/XMLSchema#gYearMonth",a.XSD_TIME="http://www.w3.org/2001/XMLSchema#time",a.XSD_G_DAY="http://www.w3.org/2001/XMLSchema#gDay",a.XSD_DECIMAL="http://www.w3.org/2001/XMLSchema#decimal",a.XSD_FLOAT="http://www.w3.org/2001/XMLSchema#float",a.XSD_DOUBLE="http://www.w3.org/2001/XMLSchema#double",a.XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",a.XSD_NON_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonPositiveInteger",a.XSD_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#negativeInteger",a.XSD_LONG="http://www.w3.org/2001/XMLSchema#long",a.XSD_INT="http://www.w3.org/2001/XMLSchema#int",a.XSD_SHORT="http://www.w3.org/2001/XMLSchema#short",a.XSD_BYTE="http://www.w3.org/2001/XMLSchema#byte",a.XSD_NON_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonNegativeInteger",a.XSD_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#positiveInteger",a.XSD_UNSIGNED_LONG="http://www.w3.org/2001/XMLSchema#unsignedLong",a.XSD_UNSIGNED_INT="http://www.w3.org/2001/XMLSchema#unsignedInt",a.XSD_UNSIGNED_SHORT="http://www.w3.org/2001/XMLSchema#unsignedShort",a.XSD_UNSIGNED_BYTE="http://www.w3.org/2001/XMLSchema#unsignedByte",a.XSD_NORMALIZED_STRING="http://www.w3.org/2001/XMLSchema#normalizedString",a.XSD_TOKEN="http://www.w3.org/2001/XMLSchema#token",a.XSD_LANGUAGE="http://www.w3.org/2001/XMLSchema#language",a.XSD_NM_TOKEN="http://www.w3.org/2001/XMLSchema#NMTOKEN",a.XSD_NAME="http://www.w3.org/2001/XMLSchema#name",a.XSD_NC_NAME="http://www.w3.org/2001/XMLSchema#NCName",a.XSD_ENTITY="http://www.w3.org/2001/XMLSchema#ENTITY",a.XSD_ID="http://www.w3.org/2001/XMLSchema#ID",a.XSD_ID_REF="http://www.w3.org/2001/XMLSchema#IDREF",a.XSD_DURATION="http://www.w3.org/2001/XMLSchema#duration",a.XSD_YEAR_MONTH_DURATION="http://www.w3.org/2001/XMLSchema#yearMonthDuration",a.XSD_DAY_TIME_DURATION="http://www.w3.org/2001/XMLSchema#dayTimeDuration",a.XSD_UNTYPED_ATOMIC="http://www.w3.org/2001/XMLSchema#untypedAtomic"})(r||(Xr.TypeURL=r={}));var e;return(function(a){a.NOT="!",a.UMINUS="uminus",a.UPLUS="uplus",a.LOGICAL_OR="||",a.LOGICAL_AND="&&",a.EQUAL="=",a.NOT_EQUAL="!=",a.LT="<",a.GT=">",a.LTE="<=",a.GTE=">=",a.SAME_TERM="sameterm",a.IN="in",a.NOT_IN="notin",a.MULTIPLICATION="*",a.DIVISION="/",a.ADDITION="+",a.SUBTRACTION="-",a.IS_IRI="isiri",a.IS_URI="isuri",a.IS_BLANK="isblank",a.IS_LITERAL="isliteral",a.IS_NUMERIC="isnumeric",a.STR="str",a.LANG="lang",a.DATATYPE="datatype",a.IRI="iri",a.URI="uri",a.BNODE="bnode",a.STRDT="strdt",a.STRLANG="strlang",a.UUID="uuid",a.STRUUID="struuid",a.STRLEN="strlen",a.SUBSTR="substr",a.UCASE="ucase",a.LCASE="lcase",a.STRSTARTS="strstarts",a.STRENDS="strends",a.CONTAINS="contains",a.STRBEFORE="strbefore",a.STRAFTER="strafter",a.ENCODE_FOR_URI="encode_for_uri",a.CONCAT="concat",a.LANG_MATCHES="langmatches",a.REGEX="regex",a.REPLACE="replace",a.ABS="abs",a.ROUND="round",a.CEIL="ceil",a.FLOOR="floor",a.RAND="rand",a.NOW="now",a.YEAR="year",a.MONTH="month",a.DAY="day",a.HOURS="hours",a.MINUTES="minutes",a.SECONDS="seconds",a.TIMEZONE="timezone",a.TZ="tz",a.MD5="md5",a.SHA1="sha1",a.SHA256="sha256",a.SHA384="sha384",a.SHA512="sha512",a.TRIPLE="triple",a.SUBJECT="subject",a.PREDICATE="predicate",a.OBJECT="object",a.IS_TRIPLE="istriple",a.BOUND="bound",a.IF="if",a.COALESCE="coalesce"})(e||(Xr.SparqlOperator=e={})),Xr}var Ze={},Iw;function fc(){if(Iw)return Ze;Iw=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.NoAggregator=Ze.ExtensionFunctionError=Ze.InvalidExpression=Ze.InvalidArity=Ze.UnexpectedError=Ze.ParseError=Ze.EmptyAggregateError=Ze.IncompatibleLanguageOperation=Ze.InvalidTimezoneCall=Ze.CastError=Ze.InvalidArgumentTypes=Ze.InError=Ze.CoalesceError=Ze.RDFEqualTypeError=Ze.EBVCoercionError=Ze.UnboundVariableError=Ze.InvalidLexicalForm=Ze.isExpressionError=Ze.ExpressionError=void 0;class n extends Error{}Ze.ExpressionError=n;function t(A){return A instanceof n}Ze.isExpressionError=t;class o extends n{constructor(E){super(`Invalid lexical form '${m(E)}'`),this.arg=E}}Ze.InvalidLexicalForm=o;class i extends n{constructor(E,j){super(`Unbound variable '${m(E)}'`),this.variable=E,this.bindings=j}}Ze.UnboundVariableError=i;class r extends n{constructor(E){super(`Cannot coerce term to EBV '${m(E)}'`),this.arg=E}}Ze.EBVCoercionError=r;class e extends n{constructor(E){super("Equality test for literals with unsupported datatypes"),this.args=E}}Ze.RDFEqualTypeError=e;class a extends n{constructor(E){super("All COALESCE arguments threw errors"),this.errors=E}}Ze.CoalesceError=a;class u extends n{constructor(E){super(`Some argument to IN errorred and none where equal. ${E.map(j=>`(${j.toString()}) `).join("and ")}`),this.errors=E}}Ze.InError=u;class c extends n{constructor(E,j){super(`Argument types not valid for operator: '${m(j)}' with '${m(E)}`),this.args=E,this.op=j}}Ze.InvalidArgumentTypes=c;class s extends n{constructor(E,j){super(`Invalid cast: '${m(E)}' to '${m(j)}'`),this.arg=E}}Ze.CastError=s;class l extends n{constructor(E){super(`TIMEZONE call on ${E} which has no timezone`),this.dateString=E}}Ze.InvalidTimezoneCall=l;class f extends n{constructor(E,j){super(`Operation on incompatible language literals '${m(E)}' and '${m(j)}'`),this.arg1=E,this.arg2=j}}Ze.IncompatibleLanguageOperation=f;class d extends n{constructor(){super("Empty aggregate expression")}}Ze.EmptyAggregateError=d;class h extends n{constructor(E,j){super(`Failed to parse "${E}" as ${j}.`)}}Ze.ParseError=h;class p extends Error{constructor(E,j){super(`Programmer Error '${E}'`),this.payload=j}}Ze.UnexpectedError=p;class y extends Error{constructor(E,j){super(`The number of args does not match the arity of the operator '${m(j)}'.`),this.args=E,this.op=j}}Ze.InvalidArity=y;class b extends Error{constructor(E){super(`Invalid SPARQL Expression '${m(E)}'`)}}Ze.InvalidExpression=b;class _ extends Error{constructor(E,j){j instanceof Error?super(`Error thrown in ${E}: ${j.message}${j.stack?`
${j.stack}`:""}`):super(`Error thrown in ${E}`)}}Ze.ExtensionFunctionError=_;class T extends Error{constructor(E){super(`Aggregate expression ${m(E)} found, but no aggregate hook provided.`)}}Ze.NoAggregator=T;function m(A){return JSON.stringify(A)}return Ze}var zr={},Lw;function dC(){if(Lw)return zr;Lw=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.serializeDuration=zr.serializeTime=zr.serializeDate=zr.serializeDateTime=void 0;function n(a,u=2){return a.toLocaleString(void 0,{minimumIntegerDigits:u,useGrouping:!1})}function t(a){return`${i({year:a.year,month:a.month,day:a.day})}T${r(a)}`}zr.serializeDateTime=t;function o(a){return a.zoneHours===void 0||a.zoneMinutes===void 0?"":a.zoneHours===0&&a.zoneMinutes===0?"Z":`${a.zoneHours>=0?`+${n(a.zoneHours)}`:n(a.zoneHours)}:${n(Math.abs(a.zoneMinutes))}`}function i(a){return`${n(a.year,4)}-${n(a.month)}-${n(a.day)}${o(a)}`}zr.serializeDate=i;function r(a){return`${n(a.hours)}:${n(a.minutes)}:${n(a.seconds)}${o(a)}`}zr.serializeTime=r;function e(a,u="PT0S"){if(!Object.values(a).some(b=>(b||0)!==0))return u;const c=Object.values(a).some(b=>(b||0)<0)?"-":"",s=a.year?`${Math.abs(a.year)}Y`:"",l=a.month?`${Math.abs(a.month)}M`:"",f=a.day?`${Math.abs(a.day)}D`:"",d=`${c}P${s}${l}${f}`;if(!(a.hours||a.minutes||a.seconds))return d;const h=a.hours?`${Math.abs(a.hours)}H`:"",p=a.minutes?`${Math.abs(a.minutes)}M`:"",y=a.seconds?`${Math.abs(a.seconds)}S`:"";return`${d}T${h}${p}${y}`}return zr.serializeDuration=e,zr}var p1={},St={},Pl={},xw;function iq(){if(xw)return Pl;xw=1,Object.defineProperty(Pl,"__esModule",{value:!0}),Pl.OverloadTree=void 0;const n=dc(),t=Ib();let o=class jv{constructor(r,e){this.identifier=r,this.implementation=void 0,this.generalOverloads=Object.create(null),this.literalOverLoads=[],this.depth=e??0,this.promotionCount=void 0}getSubtree(r){const e=(0,t.asGeneralType)(r);if(e)return this.generalOverloads[e];for(const[a,u]of this.literalOverLoads)if(r===a)return u}getImplementationExact(r){let e=this;for(const a of r)if(e=e.getSubtree(a),!e)return;return e.implementation}search(r,e,a){let u=a[this.identifier],c=0;for(;c<r.length&&u?.cache;){const f=r[c],d=(0,n.isLiteralTermExpression)(f);u=u.cache[d?d.dataType:f.termType],c++}if(c===r.length&&u?.func)return u.func;const s=[],l=0;if(r.length===0)return this.implementation;for(s.push(...this.getSubTreeWithArg(r[l],e).map(f=>({node:f,index:l+1})));s.length>0;){const{index:f,node:d}=s.pop();if(f===r.length&&d.implementation)return this.addToCache(a,r,d.implementation),d.implementation;s.push(...d.getSubTreeWithArg(r[f],e).map(h=>({node:h,index:f+1})))}}addToCache(r,e,a){function u(s,l){return l in s||(s[l]={}),s[l]}let c=u(r,this.identifier);for(const s of e){const l=(0,n.isLiteralTermExpression)(s),f=l?l.dataType:s.termType;c.cache=c.cache??{},c=u(c.cache,f)}c.func=a}addOverload(r,e){this._addOverload([...r],e,0)}_addOverload(r,e,a){const[u,...c]=r;if(!u){(this.promotionCount===void 0||a<=this.promotionCount)&&(this.promotionCount=a,this.implementation=e);return}let s=this.getSubtree(u);if(!s){const l=new jv(this.identifier,this.depth+1),f=(0,t.asGeneralType)(u);f&&(this.generalOverloads[f]=l);const d=(0,t.asOverrideType)(u);d&&this.literalOverLoads.push([d,l]),s=l}if(s._addOverload(c,e,a),t.typePromotion[u])for(const l of t.typePromotion[u])this.addPromotedOverload(l.typeToPromote,e,l.conversionFunction,c,a)}addPromotedOverload(r,e,a,u,c){let s=this.getSubtree(r);if(!s){const l=new jv(this.identifier,this.depth+1);this.literalOverLoads.push([r,l]),s=l}s._addOverload(u,l=>f=>e(l)([...f.slice(0,this.depth),a(f[this.depth]),...f.slice(this.depth+1,f.length)]),c+1)}getSubTreeWithArg(r,e){const a=[],u=(0,n.isLiteralTermExpression)(r);if(this.generalOverloads.term&&a.push(this.generalOverloads.term),this.generalOverloads[r.termType]&&a.push(this.generalOverloads[r.termType]),u){const c=(0,t.asKnownLiteralType)(u.dataType);let s;c?s=t.superTypeDictTable[c]:s=(0,t.getSuperTypes)(u.dataType,e);const l=this.literalOverLoads.filter(([f,d])=>f in s).map(([f,d])=>[s[f],d]);l.sort(([f,d],[h,p])=>f-h),a.push(...l.map(([f,d])=>d))}return a}};return Pl.OverloadTree=o,Pl}var qw;function aq(){if(qw)return St;qw=1,Object.defineProperty(St,"__esModule",{value:!0}),St.expressionToVar=St.dateTime=St.langString=St.string=St.double=St.float=St.decimal=St.integer=St.bool=St.Builder=St.declare=void 0;const n=Be(),t=dc(),o=dc(),i=Rs(),r=Rs(),e=fc(),a=iq();function u(T){return new c(T)}St.declare=u;class c{constructor(m){this.overloadTree=new a.OverloadTree(m),this.collected=!1}collect(){if(this.collected)throw new Error("Builders can only be collected once!");return this.collected=!0,this.overloadTree}static wrapInvalidLexicalProtected(m){return A=>E=>{for(const[j,X]of E.entries())if(X instanceof o.NonLexicalLiteral)throw new e.InvalidLexicalForm(E[j].toRDF(A.context.getSafe(n.KeysInitQuery.dataFactory)));return m(A)(E)}}set(m,A,E=!0){return this.overloadTree.addOverload(m,E?c.wrapInvalidLexicalProtected(A):A),this}copy({from:m,to:A}){const E=this.overloadTree.getImplementationExact(m);if(!E)throw new e.UnexpectedError("Tried to copy implementation, but types not found",{from:m,to:A});return this.set(A,E)}onUnary(m,A,E=!0){return this.set([m],j=>([X])=>A(j)(X),E)}onUnaryTyped(m,A,E=!0){return this.set([m],j=>([X])=>A(j)(X.typedValue),E)}onBinary(m,A,E=!0){return this.set(m,j=>([X,K])=>A(j)(X,K),E)}onBinaryTyped(m,A,E=!0){return this.set(m,j=>([X,K])=>A(j)(X.typedValue,K.typedValue),E)}onTernaryTyped(m,A,E=!0){return this.set(m,j=>([X,K,O])=>A(j)(X.typedValue,K.typedValue,O.typedValue),E)}onTernary(m,A,E=!0){return this.set(m,j=>([X,K,O])=>A(j)(X,K,O),E)}onQuaternaryTyped(m,A,E=!0){return this.set(m,j=>([X,K,O,S])=>A(j)(X.typedValue,K.typedValue,O.typedValue,S.typedValue),E)}onTerm1(m,A=!1){return this.set(["term"],E=>([j])=>m(E)(j),A)}onTerm3(m){return this.set(["term","term","term"],A=>([E,j,X])=>m(A)(E,j,X))}onQuad1(m){return this.set(["quad"],A=>([E])=>m(A)(E))}onLiteral1(m,A=!0){return this.set(["literal"],E=>([j])=>m(E)(j),A)}onBoolean1(m,A=!0){return this.set([i.TypeURL.XSD_BOOLEAN],E=>([j])=>m(E)(j),A)}onBoolean1Typed(m,A=!0){return this.set([i.TypeURL.XSD_BOOLEAN],E=>([j])=>m(E)(j.typedValue),A)}onString1(m,A=!0){return this.set([i.TypeURL.XSD_STRING],E=>([j])=>m(E)(j),A)}onString1Typed(m,A=!0){return this.set([i.TypeURL.XSD_STRING],E=>([j])=>m(E)(j.typedValue),A)}onLangString1(m,A=!0){return this.set([i.TypeURL.RDF_LANG_STRING],E=>([j])=>m(E)(j),A)}onStringly1(m,A=!0){return this.set([i.TypeAlias.SPARQL_STRINGLY],E=>([j])=>m(E)(j),A)}onStringly1Typed(m,A=!0){return this.set([i.TypeAlias.SPARQL_STRINGLY],E=>([j])=>m(E)(j.typedValue),A)}onNumeric1(m,A=!0){return this.set([i.TypeAlias.SPARQL_NUMERIC],E=>([j])=>m(E)(j),A)}onDateTime1(m,A=!0){return this.set([i.TypeURL.XSD_DATE_TIME],E=>([j])=>m(E)(j),A)}numericConverter(m,A=!0){const E=j=>X=>m(j)(X.typedValue);return this.onUnary(r.TypeURL.XSD_INTEGER,j=>X=>l(E(j)(X)),A).onUnary(r.TypeURL.XSD_DECIMAL,j=>X=>f(E(j)(X)),A).onUnary(r.TypeURL.XSD_FLOAT,j=>X=>d(E(j)(X)),A).onUnary(r.TypeURL.XSD_DOUBLE,j=>X=>h(E(j)(X)),A)}arithmetic(m,A=!0){const E=j=>(X,K)=>m(j)(X.typedValue,K.typedValue);return this.onBinary([r.TypeURL.XSD_INTEGER,r.TypeURL.XSD_INTEGER],j=>(X,K)=>l(E(j)(X,K)),A).onBinary([r.TypeURL.XSD_DECIMAL,r.TypeURL.XSD_DECIMAL],j=>(X,K)=>f(E(j)(X,K)),A).onBinary([r.TypeURL.XSD_FLOAT,r.TypeURL.XSD_FLOAT],j=>(X,K)=>d(E(j)(X,K)),A).onBinary([r.TypeURL.XSD_DOUBLE,r.TypeURL.XSD_DOUBLE],j=>(X,K)=>h(E(j)(X,K)),A)}numberTest(m){return this.numeric(A=>([E,j])=>{const X=m(A)(E.typedValue,j.typedValue);return s(X)})}stringTest(m,A=!0){return this.set([i.TypeURL.XSD_STRING,i.TypeURL.XSD_STRING],E=>([j,X])=>{const K=m(E)(j.typedValue,X.typedValue);return s(K)},A)}booleanTest(m,A=!0){return this.set([i.TypeURL.XSD_BOOLEAN,i.TypeURL.XSD_BOOLEAN],E=>([j,X])=>{const K=m(E)(j.typedValue,X.typedValue);return s(K)},A)}dateTimeTest(m,A=!0){return this.set([i.TypeURL.XSD_DATE_TIME,i.TypeURL.XSD_DATE_TIME],E=>([j,X])=>{const K=m(E)(j.typedValue,X.typedValue);return s(K)},A)}numeric(m){return this.set([i.TypeAlias.SPARQL_NUMERIC,i.TypeAlias.SPARQL_NUMERIC],m)}}St.Builder=c;function s(T){return new t.BooleanLiteral(T)}St.bool=s;function l(T){return new t.IntegerLiteral(T)}St.integer=l;function f(T){return new t.DecimalLiteral(T)}St.decimal=f;function d(T){return new t.FloatLiteral(T)}St.float=d;function h(T){return new t.DoubleLiteral(T)}St.double=h;function p(T){return new t.StringLiteral(T)}St.string=p;function y(T,m){return new t.LangStringLiteral(T,m)}St.langString=y;function b(T,m){return new t.DateTimeLiteral(T,m)}St.dateTime=b;function _(T,m){return T.variable(m.name.slice(1))}return St.expressionToVar=_,St}var Bw;function Ib(){return Bw||(Bw=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.typePromotion=n.isSubTypeOf=n.getSuperTypeDict=n.isInternalSubType=n.asGeneralType=n.asOverrideType=n.asKnownLiteralType=n.asTypeAlias=n.typeAliasCheck=n.extensionTableInit=n.getSuperTypes=n.superTypeDictTable=n.extensionTableInput=void 0;const t=dc(),o=aq(),i=Rs();n.extensionTableInput={[i.TypeURL.XSD_DATE_TIME_STAMP]:i.TypeURL.XSD_DATE_TIME,[i.TypeURL.XSD_DAY_TIME_DURATION]:i.TypeURL.XSD_DURATION,[i.TypeURL.XSD_YEAR_MONTH_DURATION]:i.TypeURL.XSD_DURATION,[i.TypeURL.RDF_LANG_STRING]:i.TypeAlias.SPARQL_STRINGLY,[i.TypeURL.XSD_STRING]:i.TypeAlias.SPARQL_STRINGLY,[i.TypeURL.XSD_NORMALIZED_STRING]:i.TypeURL.XSD_STRING,[i.TypeURL.XSD_TOKEN]:i.TypeURL.XSD_NORMALIZED_STRING,[i.TypeURL.XSD_LANGUAGE]:i.TypeURL.XSD_TOKEN,[i.TypeURL.XSD_NM_TOKEN]:i.TypeURL.XSD_TOKEN,[i.TypeURL.XSD_NAME]:i.TypeURL.XSD_TOKEN,[i.TypeURL.XSD_NC_NAME]:i.TypeURL.XSD_NAME,[i.TypeURL.XSD_ENTITY]:i.TypeURL.XSD_NC_NAME,[i.TypeURL.XSD_ID]:i.TypeURL.XSD_NC_NAME,[i.TypeURL.XSD_ID_REF]:i.TypeURL.XSD_NC_NAME,[i.TypeURL.XSD_UNTYPED_ATOMIC]:i.TypeURL.XSD_STRING,[i.TypeURL.XSD_DOUBLE]:i.TypeAlias.SPARQL_NUMERIC,[i.TypeURL.XSD_FLOAT]:i.TypeAlias.SPARQL_NUMERIC,[i.TypeURL.XSD_DECIMAL]:i.TypeAlias.SPARQL_NUMERIC,[i.TypeURL.XSD_INTEGER]:i.TypeURL.XSD_DECIMAL,[i.TypeURL.XSD_NON_POSITIVE_INTEGER]:i.TypeURL.XSD_INTEGER,[i.TypeURL.XSD_NEGATIVE_INTEGER]:i.TypeURL.XSD_NON_POSITIVE_INTEGER,[i.TypeURL.XSD_LONG]:i.TypeURL.XSD_INTEGER,[i.TypeURL.XSD_INT]:i.TypeURL.XSD_LONG,[i.TypeURL.XSD_SHORT]:i.TypeURL.XSD_INT,[i.TypeURL.XSD_BYTE]:i.TypeURL.XSD_SHORT,[i.TypeURL.XSD_NON_NEGATIVE_INTEGER]:i.TypeURL.XSD_INTEGER,[i.TypeURL.XSD_POSITIVE_INTEGER]:i.TypeURL.XSD_NON_NEGATIVE_INTEGER,[i.TypeURL.XSD_UNSIGNED_LONG]:i.TypeURL.XSD_NON_NEGATIVE_INTEGER,[i.TypeURL.XSD_UNSIGNED_INT]:i.TypeURL.XSD_UNSIGNED_LONG,[i.TypeURL.XSD_UNSIGNED_SHORT]:i.TypeURL.XSD_UNSIGNED_INT,[i.TypeURL.XSD_UNSIGNED_BYTE]:i.TypeURL.XSD_UNSIGNED_SHORT,[i.TypeURL.XSD_DATE_TIME]:"term",[i.TypeURL.XSD_BOOLEAN]:"term",[i.TypeURL.XSD_DATE]:"term",[i.TypeURL.XSD_G_MONTH]:"term",[i.TypeURL.XSD_G_MONTHDAY]:"term",[i.TypeURL.XSD_G_YEAR]:"term",[i.TypeURL.XSD_G_YEAR_MONTH]:"term",[i.TypeURL.XSD_TIME]:"term",[i.TypeURL.XSD_G_DAY]:"term",[i.TypeURL.XSD_DURATION]:"term",[i.TypeAlias.SPARQL_NUMERIC]:"term",[i.TypeAlias.SPARQL_STRINGLY]:"term",[i.TypeURL.XSD_ANY_URI]:"term"},n.superTypeDictTable=Object.create(null);function r(y,b){const _=b.cache.get(y);if(_)return _;const T=b.discoverer(y);if(T==="term"){const E=Object.create(null);return E.__depth=0,E[y]=0,b.cache.set(y,E),E}let m;const A=s(T);return A?m={...n.superTypeDictTable[A]}:m={...r(T,b)},m.__depth++,m[y]=m.__depth,b.cache.set(y,m),m}n.getSuperTypes=r;function e(){for(const[y,b]of Object.entries(n.extensionTableInput)){const _=y;n.superTypeDictTable[_]||a(_,b,n.superTypeDictTable)}}n.extensionTableInit=e,e();function a(y,b,_){if(b==="term"||b===void 0){const T=Object.create(null);T.__depth=0,T[y]=0,_[y]=T;return}_[b]||a(b,n.extensionTableInput[b],_),_[y]={..._[b],[y]:_[b].__depth+1,__depth:_[b].__depth+1}}n.typeAliasCheck=Object.create(null);function u(){for(const y of Object.values(i.TypeAlias))n.typeAliasCheck[y]=!0}u();function c(y){if(y in n.typeAliasCheck)return y}n.asTypeAlias=c;function s(y){if(y in n.superTypeDictTable)return y}n.asKnownLiteralType=s;function l(y){if(s(y)??y==="term")return y}n.asOverrideType=l;function f(y){if(y==="term"||(0,t.asTermType)(y))return y}n.asGeneralType=f;function d(y,b){return y!=="term"&&n.superTypeDictTable[y]&&n.superTypeDictTable[y][b]!==void 0}n.isInternalSubType=d;function h(y,b){const _=s(y);return _?n.superTypeDictTable[_]:r(y,b)}n.getSuperTypeDict=h;function p(y,b,_){return y==="term"?!1:h(y,_)[b]!==void 0}n.isSubTypeOf=p,n.typePromotion={[i.TypeURL.XSD_STRING]:[{typeToPromote:i.TypeURL.XSD_ANY_URI,conversionFunction:y=>(0,o.string)(y.str())}],[i.TypeURL.XSD_DOUBLE]:[{typeToPromote:i.TypeURL.XSD_FLOAT,conversionFunction:y=>(0,o.double)(y.typedValue)},{typeToPromote:i.TypeURL.XSD_DECIMAL,conversionFunction:y=>(0,o.double)(y.typedValue)}],[i.TypeURL.XSD_FLOAT]:[{typeToPromote:i.TypeURL.XSD_DECIMAL,conversionFunction:y=>(0,o.float)(y.typedValue)}]}})(p1)),p1}var Cw;function pC(){if(Cw)return Je;Cw=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.isNonLexicalLiteral=Je.NonLexicalLiteral=Je.YearMonthDurationLiteral=Je.DayTimeDurationLiteral=Je.DurationLiteral=Je.DateLiteral=Je.TimeLiteral=Je.DateTimeLiteral=Je.StringLiteral=Je.LangStringLiteral=Je.BooleanLiteral=Je.DoubleLiteral=Je.FloatLiteral=Je.DecimalLiteral=Je.IntegerLiteral=Je.NumericLiteral=Je.Literal=Je.isLiteralTermExpression=Je.DefaultGraph=Je.Quad=Je.BlankNode=Je.NamedNode=Je.Term=void 0;const n=Vn(),t=Rs(),o=Rs(),i=fc(),r=dC(),e=Ib();let a=class{constructor(){this.expressionType=n.ExpressionType.Term}str(){throw new i.InvalidArgumentTypes([this],t.SparqlOperator.STR)}coerceEBV(){throw new i.EBVCoercionError(this)}};Je.Term=a;class u extends a{constructor(V){super(),this.value=V,this.termType="namedNode"}toRDF(V){return V.namedNode(this.value)}str(){return this.value}}Je.NamedNode=u;class c extends a{constructor(V){super(),this.termType="blankNode",this.value=V}toRDF(V){return typeof this.value=="string"?V.blankNode(this.value):this.value}}Je.BlankNode=c;class s extends a{constructor(V,re,Y,ce){super(),this.subject=V,this.predicate=re,this.object=Y,this.graph=ce,this.termType="quad"}toRDF(V){return V.quad(this.subject.toRDF(V),this.predicate.toRDF(V),this.object.toRDF(V),this.graph.toRDF(V))}str(){return`Quad: [${this.subject.str()}, ${this.predicate.str()}, ${this.object.str()}, ${this.graph.str()}]`}}Je.Quad=s;class l extends a{constructor(){super(),this.termType="defaultGraph"}toRDF(V){return V.defaultGraph()}str(){return"DefaultGraph"}}Je.DefaultGraph=l;function f(I){if(I.termType==="literal")return I}Je.isLiteralTermExpression=f;class d extends a{constructor(V,re,Y,ce){super(),this.typedValue=V,this.dataType=re,this.strValue=Y,this.language=ce,this.termType="literal"}toRDF(V){return V.literal(this.strValue??this.str(),this.language??V.namedNode(this.dataType))}str(){return this.strValue??this.typedValue.toString()}}Je.Literal=d;class h extends d{constructor(V,re,Y,ce){super(V,re,Y,ce),this.typedValue=V,this.strValue=Y,this.language=ce}coerceEBV(){return!!this.typedValue}toRDF(V){const re=super.toRDF(V);return Number.isFinite(this.typedValue)||(re.value=re.value.replace("Infinity","INF")),re}str(){return this.strValue??this.specificFormatter(this.typedValue)}}Je.NumericLiteral=h;class p extends h{constructor(V,re,Y,ce){super(V,re??o.TypeURL.XSD_INTEGER,Y,ce),this.typedValue=V,this.strValue=Y,this.language=ce}specificFormatter(V){return V.toFixed(0)}}Je.IntegerLiteral=p;class y extends h{constructor(V,re,Y,ce){super(V,re??o.TypeURL.XSD_DECIMAL,Y,ce),this.typedValue=V,this.strValue=Y,this.language=ce}specificFormatter(V){return V.toString()}}Je.DecimalLiteral=y;class b extends h{constructor(V,re,Y,ce){super(V,re??o.TypeURL.XSD_FLOAT,Y,ce),this.typedValue=V,this.strValue=Y,this.language=ce}specificFormatter(V){return V.toString()}}Je.FloatLiteral=b;class _ extends h{constructor(V,re,Y,ce){super(V,re??o.TypeURL.XSD_DOUBLE,Y,ce),this.typedValue=V,this.strValue=Y,this.language=ce}specificFormatter(V){if(!Number.isFinite(V))return V>0?"INF":V<0?"-INF":"NaN";const re=V.toExponential(),[Y,ce]=re.split("e"),ae=ce.replace(/\+/u,"");return`${Y.includes(".")?Y:`${Y}.0`}E${ae}`}}Je.DoubleLiteral=_;class T extends d{constructor(V,re,Y){super(V,Y??o.TypeURL.XSD_BOOLEAN,re),this.typedValue=V,this.strValue=re}coerceEBV(){return this.typedValue}}Je.BooleanLiteral=T;class m extends d{constructor(V,re,Y){super(V,Y??o.TypeURL.RDF_LANG_STRING,V,re),this.typedValue=V,this.language=re}coerceEBV(){return this.str().length>0}}Je.LangStringLiteral=m;class A extends d{constructor(V,re){super(V,re??o.TypeURL.XSD_STRING,V),this.typedValue=V}coerceEBV(){return this.str().length>0}}Je.StringLiteral=A;class E extends d{constructor(V,re,Y){super(V,Y??o.TypeURL.XSD_DATE_TIME,re),this.typedValue=V,this.strValue=re}str(){return(0,r.serializeDateTime)(this.typedValue)}}Je.DateTimeLiteral=E;class j extends d{constructor(V,re,Y){super(V,Y??o.TypeURL.XSD_TIME,re),this.typedValue=V,this.strValue=re}str(){return(0,r.serializeTime)(this.typedValue)}}Je.TimeLiteral=j;class X extends d{constructor(V,re,Y){super(V,Y??o.TypeURL.XSD_DATE,re),this.typedValue=V,this.strValue=re}str(){return(0,r.serializeDate)(this.typedValue)}}Je.DateLiteral=X;class K extends d{constructor(V,re,Y){super(V,Y??o.TypeURL.XSD_DURATION,re),this.typedValue=V,this.strValue=re}str(){return(0,r.serializeDuration)(this.typedValue)}}Je.DurationLiteral=K;class O extends K{constructor(V,re,Y){super(V,re,Y??o.TypeURL.XSD_DAY_TIME_DURATION),this.typedValue=V,this.strValue=re}}Je.DayTimeDurationLiteral=O;class S extends d{constructor(V,re,Y){super(V,Y??o.TypeURL.XSD_YEAR_MONTH_DURATION,re),this.typedValue=V,this.strValue=re}str(){return(0,r.serializeDuration)(this.typedValue,"P0M")}}Je.YearMonthDurationLiteral=S;class L extends d{constructor(V,re,Y,ce,ae){super({toString:()=>"undefined"},re,ce,ae),this.openWorldType=Y}coerceEBV(){if((0,e.isSubTypeOf)(this.dataType,o.TypeURL.XSD_BOOLEAN,this.openWorldType)||(0,e.isSubTypeOf)(this.dataType,o.TypeAlias.SPARQL_NUMERIC,this.openWorldType))return!1;throw new i.EBVCoercionError(this)}toRDF(V){return V.literal(this.str(),this.language??V.namedNode(this.dataType))}str(){return this.strValue??""}}Je.NonLexicalLiteral=L;function N(I){if(I instanceof L)return I}return Je.isNonLexicalLiteral=N,Je}var Nl={},Qw;function hC(){if(Qw)return Nl;Qw=1,Object.defineProperty(Nl,"__esModule",{value:!0}),Nl.Operator=void 0;const n=Vn();let t=class{constructor(i,r,e){this.name=i,this.args=r,this.apply=e,this.expressionType=n.ExpressionType.Operator}};return Nl.Operator=t,Nl}var Ml={},Uw;function yC(){if(Uw)return Ml;Uw=1,Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.Aggregate=void 0;const n=Vn();let t=class{constructor(i,r){this.name=i,this.expression=r,this.expressionType=n.ExpressionType.Aggregate}};return Ml.Aggregate=t,Ml}var Il={},Vw;function _C(){if(Vw)return Il;Vw=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.Existence=void 0;const n=Vn();let t=class{constructor(i){this.expression=i,this.expressionType=n.ExpressionType.Existence}};return Il.Existence=t,Il}var Gw;function dc(){return Gw||(Gw=1,(function(n){var t=Si&&Si.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Si&&Si.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(sC(),n),o(cC(),n),o(pC(),n),o(hC(),n),o(yC(),n),o(_C(),n)})(Si)),Si}var Ut={},st={},Xw;function Ug(){if(Xw)return st;Xw=1,Object.defineProperty(st,"__esModule",{value:!0}),st.extractTimeZone=st.extractRawTimeZone=st.dayTimeDurationsToSeconds=st.yearMonthDurationsToMonths=st.trimToDayTimeDuration=st.trimToYearMonthDuration=st.toUTCDate=st.toJSDate=st.negateDuration=st.toDateTimeRepresentation=st.defaultedDateTimeRepresentation=st.simplifyDurationRepresentation=st.defaultedDurationRepresentation=st.defaultedYearMonthDurationRepresentation=st.defaultedDayTimeDurationRepresentation=void 0;function n(y){return{day:y.day??0,hours:y.hours??0,minutes:y.minutes??0,seconds:y.seconds??0}}st.defaultedDayTimeDurationRepresentation=n;function t(y){return{year:y.year??0,month:y.month??0}}st.defaultedYearMonthDurationRepresentation=t;function o(y){return{...n(y),...t(y)}}st.defaultedDurationRepresentation=o;function i(y){const b=o(y),_={},T=b.year+Math.trunc(b.month/12);T&&(_.year=T,b.month%=12),b.month&&(_.month=b.month);const m=b.day+Math.trunc(b.hours/24)+Math.trunc(b.minutes/1440)+Math.trunc(b.seconds/(1440*60));m&&(_.day=m,b.hours%=24,b.minutes%=1440,b.seconds%=1440*60);const A=b.hours+Math.trunc(b.minutes/60)+Math.trunc(b.seconds/3600);A&&(_.hours=A,b.minutes%=60,b.seconds%=3600);const E=b.minutes+Math.trunc(b.seconds/60);return E&&(_.minutes=E,b.seconds%=60),b.seconds&&(_.seconds=b.seconds),_}st.simplifyDurationRepresentation=i;function r(y){return{...y,day:y.day??1,hours:y.hours??0,month:y.month??1,year:y.year??0,seconds:y.seconds??0,minutes:y.minutes??0}}st.defaultedDateTimeRepresentation=r;function e({date:y,timeZone:b}){return{year:y.getFullYear(),month:y.getMonth()+1,day:y.getDate(),hours:y.getHours(),minutes:y.getMinutes(),seconds:y.getSeconds(),zoneHours:b.zoneHours,zoneMinutes:b.zoneMinutes}}st.toDateTimeRepresentation=e;function a(y){return{year:y.year===void 0?void 0:-1*y.year,month:y.month===void 0?void 0:-1*y.month,day:y.day===void 0?void 0:-1*y.day,hours:y.hours===void 0?void 0:-1*y.hours,minutes:y.minutes===void 0?void 0:-1*y.minutes,seconds:y.seconds===void 0?void 0:-1*y.seconds}}st.negateDuration=a;function u(y){const b=new Date(y.year,y.month-1,y.day,y.hours,y.minutes,Math.trunc(y.seconds),y.seconds%1*1e3);return y.year>=0&&y.year<100&&b.setFullYear(b.getFullYear()-1900),b}st.toJSDate=u;function c(y,b){const _=u(r(y)),T=_.getTimezoneOffset(),m=y.zoneHours??b.zoneHours,A=y.zoneMinutes??b.zoneMinutes;return new Date(_.getTime()-(T+m*60+A)*60*1e3)}st.toUTCDate=c;function s(y){return{year:y.year,month:y.month}}st.trimToYearMonthDuration=s;function l(y){return{day:y.day,hours:y.hours,minutes:y.minutes,seconds:y.seconds}}st.trimToDayTimeDuration=l;function f(y){return y.year*12+y.month}st.yearMonthDurationsToMonths=f;function d(y){return((y.day*24+y.hours)*60+y.minutes)*60+y.seconds}st.dayTimeDurationsToSeconds=d;function h(y){return/(Z|([+-]\d\d:\d\d))?$/u.exec(y)[0]}st.extractRawTimeZone=h;function p(y){return{zoneHours:y.getTimezoneOffset()/60,zoneMinutes:y.getTimezoneOffset()%60}}return st.extractTimeZone=p,st}var bn={},zw;function oq(){if(zw)return bn;zw=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.elapsedDuration=bn.addDurationToDateTime=bn.maximumDayInMonthFor=void 0;const n=Ug();function t(e,a,u=0){const c=e-u,s=a-u,l=Math.floor(c/s);return{intDiv:l,remainder:e-l*s}}function o(e,a){const{intDiv:u,remainder:c}=t(a,13,1),s=e+u;return[1,3,5,7,8,10,12].includes(c)?31:[4,6,9,11].includes(c)?30:c===2&&(t(s,400).remainder===0||t(s,100).remainder!==0&&t(s,4).remainder===0)?29:28}bn.maximumDayInMonthFor=o;function i(e,a){const u={...e};let c=t(e.month+a.month,13,1);for(u.month=c.remainder,u.year=e.year+a.year+c.intDiv,c=t(e.seconds+a.seconds,60),u.seconds=c.remainder,c=t(e.minutes+a.minutes+c.intDiv,60),u.minutes=c.remainder,c=t(e.hours+a.hours+c.intDiv,24),u.hours=c.remainder,u.day=e.day+a.day+c.intDiv;;){let s;if(u.day<1)u.day+=o(u.year,u.month-1),s=-1;else if(u.day>o(u.year,u.month))u.day-=o(u.year,u.month),s=1;else break;c=t(u.month+s,13,1),u.month=c.remainder,u.year+=c.intDiv}return u}bn.addDurationToDateTime=i;function r(e,a,u){const c=(0,n.toUTCDate)(e,u),s=(0,n.toUTCDate)(a,u),l=c.getTime()-s.getTime();return{day:Math.floor(l/(1e3*60*60*24)),hours:Math.floor(l%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(l%(1e3*60*60)/(1e3*60)),seconds:l%(1e3*60)}}return bn.elapsedDuration=r,bn}var $w;function Dv(){if($w)return Ut;$w=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.parseDayTimeDuration=Ut.parseYearMonthDuration=Ut.parseDuration=Ut.parseTime=Ut.parseDate=Ut.parseDateTime=Ut.parseXSDDecimal=Ut.parseXSDFloat=void 0;const n=Ug(),t=fc(),o=oq();function i(h){const p=Number(h);return Number.isNaN(p)?h==="NaN"?Number.NaN:h==="INF"||h==="+INF"?Number.POSITIVE_INFINITY:h==="-INF"?Number.NEGATIVE_INFINITY:void 0:p}Ut.parseXSDFloat=i;function r(h){const p=Number(h);return Number.isNaN(p)?void 0:p}Ut.parseXSDDecimal=r;function e(h){const[p,y]=h.split("T");if(y===void 0)throw new t.ParseError(h,"dateTime");return{...u(p),...c(y)}}Ut.parseDateTime=e;function a(h){if(h==="")return{zoneHours:void 0,zoneMinutes:void 0};if(h==="Z")return{zoneHours:0,zoneMinutes:0};const y=h.replaceAll(/^([+|-])(\d\d):(\d\d)$/gu,"$11!$2!$3").split("!").map(Number);return{zoneHours:y[0]*y[1],zoneMinutes:y[0]*y[2]}}function u(h){const p=h.replaceAll(/^(-)?([123456789]*\d{4})-(\d\d)-(\d\d)(Z|([+-]\d\d:\d\d))?$/gu,"$11!$2!$3!$4!$5");if(p===h)throw new t.ParseError(h,"date");const y=p.split("!"),b=y.slice(0,-1).map(Number),_={year:b[0]*b[1],month:b[2],day:b[3],...a(y[4])};if(!(_.month>=1&&_.month<=12)||!(_.day>=1&&_.day<=(0,o.maximumDayInMonthFor)(_.year,_.month)))throw new t.ParseError(h,"date");return _}Ut.parseDate=u;function c(h){const p=h.replaceAll(/^(\d\d):(\d\d):(\d\d(\.\d+)?)(Z|([+-]\d\d:\d\d))?$/gu,"$1!$2!$3!$5");if(p===h)throw new t.ParseError(h,"time");const y=p.split("!"),b=y.slice(0,-1).map(Number),_={hours:b[0],minutes:b[1],seconds:b[2],...a(y[3])};if(_.seconds>=60||_.minutes>=60||_.hours>24||_.hours===24&&(_.minutes!==0||_.seconds!==0))throw new t.ParseError(h,"time");return _}function s(h){const p=c(h);return p.hours%=24,p}Ut.parseTime=s;function l(h){const[p,y]=h.split("T"),b=p.replaceAll(/^(-)?P(\d+Y)?(\d+M)?(\d+D)?$/gu,"$11S!$2!$3!$4");if(b===p)throw new t.ParseError(h,"duration");const _=b.split("!");if(y!==void 0){const A=y.replaceAll(/^(\d+H)?(\d+M)?(\d+(\.\d+)?S)?$/gu,"$1!$2!$3");if(y===""||y===A)throw new t.ParseError(h,"duration");_.push(...A.split("!"))}const T=_.map(A=>A.slice(0,-1));if(!T.slice(1).some(Boolean))throw new t.ParseError(h,"duration");const m=Number(T[0]);return(0,n.simplifyDurationRepresentation)({year:T[1]?m*Number(T[1]):void 0,month:T[2]?m*Number(T[2]):void 0,day:T[3]?m*Number(T[3]):void 0,hours:T[4]?m*Number(T[4]):void 0,minutes:T[5]?m*Number(T[5]):void 0,seconds:T[6]?m*Number(T[6]):void 0})}Ut.parseDuration=l;function f(h){const p=l(h);if(["hours","minutes","seconds","day"].some(y=>!!p[y]))throw new t.ParseError(h,"yearMonthDuration");return p}Ut.parseYearMonthDuration=f;function d(h){const p=l(h);if(["year","month"].some(y=>!!p[y]))throw new t.ParseError(h,"dayTimeDuration");return p}return Ut.parseDayTimeDuration=d,Ut}var Hw;function gC(){if(Hw)return ul;Hw=1,Object.defineProperty(ul,"__esModule",{value:!0}),ul.TermTransformer=void 0;const n=mr(),t=We(),o=dc(),i=Rs(),r=fc(),e=fc(),a=Dv(),u=Dv(),c=Ib();let s=class{constructor(f){this.superTypeProvider=f}transformRDFTermUnsafe(f){return this.transformTerm({term:f,type:t.Algebra.types.EXPRESSION,expressionType:t.Algebra.expressionTypes.TERM})}transformTerm(f){if(!f.term)throw new r.InvalidExpression(f);switch(f.term.termType){case"Variable":return new o.Variable(n.termToString(f.term));case"Literal":return this.transformLiteral(f.term);case"NamedNode":return new o.NamedNode(f.term.value);case"BlankNode":return new o.BlankNode(f.term.value);case"Quad":return new o.Quad(this.transformRDFTermUnsafe(f.term.subject),this.transformRDFTermUnsafe(f.term.predicate),this.transformRDFTermUnsafe(f.term.object),this.transformRDFTermUnsafe(f.term.graph));case"DefaultGraph":return new o.DefaultGraph}}transformLiteral(f){if(!f.datatype||[null,void 0,""].includes(f.datatype.value))return f.language?new o.LangStringLiteral(f.value,f.language):new o.StringLiteral(f.value);const d=f.datatype.value,h=(0,c.getSuperTypeDict)(d,this.superTypeProvider);try{if(i.TypeURL.XSD_STRING in h)return new o.StringLiteral(f.value,d);if(i.TypeURL.RDF_LANG_STRING in h)return new o.LangStringLiteral(f.value,f.language);if(i.TypeURL.XSD_YEAR_MONTH_DURATION in h)return new o.YearMonthDurationLiteral((0,a.parseYearMonthDuration)(f.value),f.value,d);if(i.TypeURL.XSD_DAY_TIME_DURATION in h)return new o.DayTimeDurationLiteral((0,a.parseDayTimeDuration)(f.value),f.value,d);if(i.TypeURL.XSD_DURATION in h)return new o.DurationLiteral((0,a.parseDuration)(f.value),f.value,d);if(i.TypeURL.XSD_DATE_TIME in h){const b=new Date(f.value);return Number.isNaN(b.getTime())?new o.NonLexicalLiteral(void 0,d,this.superTypeProvider,f.value):new o.DateTimeLiteral((0,a.parseDateTime)(f.value),f.value,d)}if(i.TypeURL.XSD_DATE in h)return new o.DateLiteral((0,a.parseDate)(f.value),f.value,d);if(i.TypeURL.XSD_TIME in h)return new o.TimeLiteral((0,a.parseTime)(f.value),f.value,d);if(i.TypeURL.XSD_BOOLEAN in h)return f.value!=="true"&&f.value!=="false"&&f.value!=="1"&&f.value!=="0"?new o.NonLexicalLiteral(void 0,d,this.superTypeProvider,f.value):new o.BooleanLiteral(f.value==="true"||f.value==="1",f.value);if(i.TypeURL.XSD_DECIMAL in h){const b=u.parseXSDDecimal(f.value);return b===void 0?new o.NonLexicalLiteral(void 0,d,this.superTypeProvider,f.value):i.TypeURL.XSD_INTEGER in h?new o.IntegerLiteral(b,d,f.value):new o.DecimalLiteral(b,d,f.value)}const p=i.TypeURL.XSD_FLOAT in h,y=i.TypeURL.XSD_DOUBLE in h;if(p||y){const b=u.parseXSDFloat(f.value);return b===void 0?new o.NonLexicalLiteral(void 0,d,this.superTypeProvider,f.value):p?new o.FloatLiteral(b,d,f.value):new o.DoubleLiteral(b,d,f.value)}return new o.Literal(f.value,d,f.value)}catch(p){if((0,e.isExpressionError)(p))return new o.NonLexicalLiteral(void 0,d,this.superTypeProvider,f.value);throw p}}};return ul.TermTransformer=s,ul}var Ll={},xl={},Jw;function Lb(){var d,p,y,b,_,T,m,A,E,j,X,K,O,S,L,N,I,V,re,Y,ce,ae,pe,U,le,me,te,Pv,Ee,Re,De,fe,uq,q,w,D,jn,Dn,Nv,ob,ub,wt,Mv,jg,Pn,Iv;if(Jw)return xl;Jw=1,Object.defineProperty(xl,"__esModule",{value:!0}),xl.LRUCache=void 0;const n=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,t=new Set,o=typeof process=="object"&&process?process:{},i=(Fe,Z,oe,P)=>{typeof o.emitWarning=="function"?o.emitWarning(Fe,Z,oe,P):console.error(`[${oe}] ${Z}: ${Fe}`)};let r=globalThis.AbortController,e=globalThis.AbortSignal;if(typeof r>"u"){e=class{constructor(){Rt(this,"onabort");Rt(this,"_onabort",[]);Rt(this,"reason");Rt(this,"aborted",!1)}addEventListener(P,v){this._onabort.push(v)}},r=class{constructor(){Rt(this,"signal",new e);Z()}abort(P){if(!this.signal.aborted){this.signal.reason=P,this.signal.aborted=!0;for(const v of this.signal._onabort)v(P);this.signal.onabort?.(P)}}};let Fe=o.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const Z=()=>{Fe&&(Fe=!1,i("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",Z))}}const a=Fe=>!t.has(Fe),u=Fe=>Fe&&Fe===Math.floor(Fe)&&Fe>0&&isFinite(Fe),c=Fe=>u(Fe)?Fe<=Math.pow(2,8)?Uint8Array:Fe<=Math.pow(2,16)?Uint16Array:Fe<=Math.pow(2,32)?Uint32Array:Fe<=Number.MAX_SAFE_INTEGER?s:null:null;class s extends Array{constructor(Z){super(Z),this.fill(0)}}const h=class h{constructor(Z,oe){Rt(this,"heap");Rt(this,"length");if(!ie(h,d))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new oe(Z),this.length=0}static create(Z){const oe=c(Z);if(!oe)return[];He(h,d,!0);const P=new h(Z,oe);return He(h,d,!1),P}push(Z){this.heap[this.length++]=Z}pop(){return this.heap[--this.length]}};d=new WeakMap,ot(h,d,!1);let l=h;const Te=class Te{constructor(Z){ot(this,te);ot(this,b);ot(this,_);ot(this,T);ot(this,m);ot(this,A);ot(this,E);Rt(this,"ttl");Rt(this,"ttlResolution");Rt(this,"ttlAutopurge");Rt(this,"updateAgeOnGet");Rt(this,"updateAgeOnHas");Rt(this,"allowStale");Rt(this,"noDisposeOnSet");Rt(this,"noUpdateTTL");Rt(this,"maxEntrySize");Rt(this,"sizeCalculation");Rt(this,"noDeleteOnFetchRejection");Rt(this,"noDeleteOnStaleGet");Rt(this,"allowStaleOnFetchAbort");Rt(this,"allowStaleOnFetchRejection");Rt(this,"ignoreFetchAbort");ot(this,j);ot(this,X);ot(this,K);ot(this,O);ot(this,S);ot(this,L);ot(this,N);ot(this,I);ot(this,V);ot(this,re);ot(this,Y);ot(this,ce);ot(this,ae);ot(this,pe);ot(this,U);ot(this,le);ot(this,me);ot(this,Ee,()=>{});ot(this,Re,()=>{});ot(this,De,()=>{});ot(this,fe,()=>!1);ot(this,q,Z=>{});ot(this,w,(Z,oe,P)=>{});ot(this,D,(Z,oe,P,v)=>{if(P||v)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});Rt(this,p,"LRUCache");const{max:oe=0,ttl:P,ttlResolution:v=1,ttlAutopurge:R,updateAgeOnGet:C,updateAgeOnHas:k,allowStale:se,dispose:he,disposeAfter:Ie,noDisposeOnSet:Me,noUpdateTTL:Ue,maxSize:Ce=0,maxEntrySize:z=0,sizeCalculation:be,fetchMethod:we,memoMethod:Le,noDeleteOnFetchRejection:Qe,noDeleteOnStaleGet:Ke,allowStaleOnFetchRejection:Ge,allowStaleOnFetchAbort:nt,ignoreFetchAbort:ct}=Z;if(oe!==0&&!u(oe))throw new TypeError("max option must be a nonnegative integer");const W=oe?c(oe):Array;if(!W)throw new Error("invalid max value: "+oe);if(He(this,b,oe),He(this,_,Ce),this.maxEntrySize=z||ie(this,_),this.sizeCalculation=be,this.sizeCalculation){if(!ie(this,_)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Le!==void 0&&typeof Le!="function")throw new TypeError("memoMethod must be a function if defined");if(He(this,E,Le),we!==void 0&&typeof we!="function")throw new TypeError("fetchMethod must be a function if specified");if(He(this,A,we),He(this,le,!!we),He(this,K,new Map),He(this,O,new Array(oe).fill(void 0)),He(this,S,new Array(oe).fill(void 0)),He(this,L,new W(oe)),He(this,N,new W(oe)),He(this,I,0),He(this,V,0),He(this,re,l.create(oe)),He(this,j,0),He(this,X,0),typeof he=="function"&&He(this,T,he),typeof Ie=="function"?(He(this,m,Ie),He(this,Y,[])):(He(this,m,void 0),He(this,Y,void 0)),He(this,U,!!ie(this,T)),He(this,me,!!ie(this,m)),this.noDisposeOnSet=!!Me,this.noUpdateTTL=!!Ue,this.noDeleteOnFetchRejection=!!Qe,this.allowStaleOnFetchRejection=!!Ge,this.allowStaleOnFetchAbort=!!nt,this.ignoreFetchAbort=!!ct,this.maxEntrySize!==0){if(ie(this,_)!==0&&!u(ie(this,_)))throw new TypeError("maxSize must be a positive integer if specified");if(!u(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Ve(this,te,uq).call(this)}if(this.allowStale=!!se,this.noDeleteOnStaleGet=!!Ke,this.updateAgeOnGet=!!C,this.updateAgeOnHas=!!k,this.ttlResolution=u(v)||v===0?v:1,this.ttlAutopurge=!!R,this.ttl=P||0,this.ttl){if(!u(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Ve(this,te,Pv).call(this)}if(ie(this,b)===0&&this.ttl===0&&ie(this,_)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!ie(this,b)&&!ie(this,_)){const ee="LRU_CACHE_UNBOUNDED";a(ee)&&(t.add(ee),i("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",ee,Te))}}static unsafeExposeInternals(Z){return{starts:ie(Z,ae),ttls:ie(Z,pe),sizes:ie(Z,ce),keyMap:ie(Z,K),keyList:ie(Z,O),valList:ie(Z,S),next:ie(Z,L),prev:ie(Z,N),get head(){return ie(Z,I)},get tail(){return ie(Z,V)},free:ie(Z,re),isBackgroundFetch:oe=>{var P;return Ve(P=Z,te,wt).call(P,oe)},backgroundFetch:(oe,P,v,R)=>{var C;return Ve(C=Z,te,ub).call(C,oe,P,v,R)},moveToTail:oe=>{var P;return Ve(P=Z,te,jg).call(P,oe)},indexes:oe=>{var P;return Ve(P=Z,te,jn).call(P,oe)},rindexes:oe=>{var P;return Ve(P=Z,te,Dn).call(P,oe)},isStale:oe=>{var P;return ie(P=Z,fe).call(P,oe)}}}get max(){return ie(this,b)}get maxSize(){return ie(this,_)}get calculatedSize(){return ie(this,X)}get size(){return ie(this,j)}get fetchMethod(){return ie(this,A)}get memoMethod(){return ie(this,E)}get dispose(){return ie(this,T)}get disposeAfter(){return ie(this,m)}getRemainingTTL(Z){return ie(this,K).has(Z)?1/0:0}*entries(){for(const Z of Ve(this,te,jn).call(this))ie(this,S)[Z]!==void 0&&ie(this,O)[Z]!==void 0&&!Ve(this,te,wt).call(this,ie(this,S)[Z])&&(yield[ie(this,O)[Z],ie(this,S)[Z]])}*rentries(){for(const Z of Ve(this,te,Dn).call(this))ie(this,S)[Z]!==void 0&&ie(this,O)[Z]!==void 0&&!Ve(this,te,wt).call(this,ie(this,S)[Z])&&(yield[ie(this,O)[Z],ie(this,S)[Z]])}*keys(){for(const Z of Ve(this,te,jn).call(this)){const oe=ie(this,O)[Z];oe!==void 0&&!Ve(this,te,wt).call(this,ie(this,S)[Z])&&(yield oe)}}*rkeys(){for(const Z of Ve(this,te,Dn).call(this)){const oe=ie(this,O)[Z];oe!==void 0&&!Ve(this,te,wt).call(this,ie(this,S)[Z])&&(yield oe)}}*values(){for(const Z of Ve(this,te,jn).call(this))ie(this,S)[Z]!==void 0&&!Ve(this,te,wt).call(this,ie(this,S)[Z])&&(yield ie(this,S)[Z])}*rvalues(){for(const Z of Ve(this,te,Dn).call(this))ie(this,S)[Z]!==void 0&&!Ve(this,te,wt).call(this,ie(this,S)[Z])&&(yield ie(this,S)[Z])}[(y=Symbol.iterator,p=Symbol.toStringTag,y)](){return this.entries()}find(Z,oe={}){for(const P of Ve(this,te,jn).call(this)){const v=ie(this,S)[P],R=Ve(this,te,wt).call(this,v)?v.__staleWhileFetching:v;if(R!==void 0&&Z(R,ie(this,O)[P],this))return this.get(ie(this,O)[P],oe)}}forEach(Z,oe=this){for(const P of Ve(this,te,jn).call(this)){const v=ie(this,S)[P],R=Ve(this,te,wt).call(this,v)?v.__staleWhileFetching:v;R!==void 0&&Z.call(oe,R,ie(this,O)[P],this)}}rforEach(Z,oe=this){for(const P of Ve(this,te,Dn).call(this)){const v=ie(this,S)[P],R=Ve(this,te,wt).call(this,v)?v.__staleWhileFetching:v;R!==void 0&&Z.call(oe,R,ie(this,O)[P],this)}}purgeStale(){let Z=!1;for(const oe of Ve(this,te,Dn).call(this,{allowStale:!0}))ie(this,fe).call(this,oe)&&(Ve(this,te,Pn).call(this,ie(this,O)[oe],"expire"),Z=!0);return Z}info(Z){const oe=ie(this,K).get(Z);if(oe===void 0)return;const P=ie(this,S)[oe],v=Ve(this,te,wt).call(this,P)?P.__staleWhileFetching:P;if(v===void 0)return;const R={value:v};if(ie(this,pe)&&ie(this,ae)){const C=ie(this,pe)[oe],k=ie(this,ae)[oe];if(C&&k){const se=C-(n.now()-k);R.ttl=se,R.start=Date.now()}}return ie(this,ce)&&(R.size=ie(this,ce)[oe]),R}dump(){const Z=[];for(const oe of Ve(this,te,jn).call(this,{allowStale:!0})){const P=ie(this,O)[oe],v=ie(this,S)[oe],R=Ve(this,te,wt).call(this,v)?v.__staleWhileFetching:v;if(R===void 0||P===void 0)continue;const C={value:R};if(ie(this,pe)&&ie(this,ae)){C.ttl=ie(this,pe)[oe];const k=n.now()-ie(this,ae)[oe];C.start=Math.floor(Date.now()-k)}ie(this,ce)&&(C.size=ie(this,ce)[oe]),Z.unshift([P,C])}return Z}load(Z){this.clear();for(const[oe,P]of Z){if(P.start){const v=Date.now()-P.start;P.start=n.now()-v}this.set(oe,P.value,P)}}set(Z,oe,P={}){var Ue,Ce,z;if(oe===void 0)return this.delete(Z),this;const{ttl:v=this.ttl,start:R,noDisposeOnSet:C=this.noDisposeOnSet,sizeCalculation:k=this.sizeCalculation,status:se}=P;let{noUpdateTTL:he=this.noUpdateTTL}=P;const Ie=ie(this,D).call(this,Z,oe,P.size||0,k);if(this.maxEntrySize&&Ie>this.maxEntrySize)return se&&(se.set="miss",se.maxEntrySizeExceeded=!0),Ve(this,te,Pn).call(this,Z,"set"),this;let Me=ie(this,j)===0?void 0:ie(this,K).get(Z);if(Me===void 0)Me=ie(this,j)===0?ie(this,V):ie(this,re).length!==0?ie(this,re).pop():ie(this,j)===ie(this,b)?Ve(this,te,ob).call(this,!1):ie(this,j),ie(this,O)[Me]=Z,ie(this,S)[Me]=oe,ie(this,K).set(Z,Me),ie(this,L)[ie(this,V)]=Me,ie(this,N)[Me]=ie(this,V),He(this,V,Me),Rm(this,j)._++,ie(this,w).call(this,Me,Ie,se),se&&(se.set="add"),he=!1;else{Ve(this,te,jg).call(this,Me);const be=ie(this,S)[Me];if(oe!==be){if(ie(this,le)&&Ve(this,te,wt).call(this,be)){be.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:we}=be;we!==void 0&&!C&&(ie(this,U)&&((Ue=ie(this,T))==null||Ue.call(this,we,Z,"set")),ie(this,me)&&ie(this,Y)?.push([we,Z,"set"]))}else C||(ie(this,U)&&((Ce=ie(this,T))==null||Ce.call(this,be,Z,"set")),ie(this,me)&&ie(this,Y)?.push([be,Z,"set"]));if(ie(this,q).call(this,Me),ie(this,w).call(this,Me,Ie,se),ie(this,S)[Me]=oe,se){se.set="replace";const we=be&&Ve(this,te,wt).call(this,be)?be.__staleWhileFetching:be;we!==void 0&&(se.oldValue=we)}}else se&&(se.set="update")}if(v!==0&&!ie(this,pe)&&Ve(this,te,Pv).call(this),ie(this,pe)&&(he||ie(this,De).call(this,Me,v,R),se&&ie(this,Re).call(this,se,Me)),!C&&ie(this,me)&&ie(this,Y)){const be=ie(this,Y);let we;for(;we=be?.shift();)(z=ie(this,m))==null||z.call(this,...we)}return this}pop(){var Z;try{for(;ie(this,j);){const oe=ie(this,S)[ie(this,I)];if(Ve(this,te,ob).call(this,!0),Ve(this,te,wt).call(this,oe)){if(oe.__staleWhileFetching)return oe.__staleWhileFetching}else if(oe!==void 0)return oe}}finally{if(ie(this,me)&&ie(this,Y)){const oe=ie(this,Y);let P;for(;P=oe?.shift();)(Z=ie(this,m))==null||Z.call(this,...P)}}}has(Z,oe={}){const{updateAgeOnHas:P=this.updateAgeOnHas,status:v}=oe,R=ie(this,K).get(Z);if(R!==void 0){const C=ie(this,S)[R];if(Ve(this,te,wt).call(this,C)&&C.__staleWhileFetching===void 0)return!1;if(ie(this,fe).call(this,R))v&&(v.has="stale",ie(this,Re).call(this,v,R));else return P&&ie(this,Ee).call(this,R),v&&(v.has="hit",ie(this,Re).call(this,v,R)),!0}else v&&(v.has="miss");return!1}peek(Z,oe={}){const{allowStale:P=this.allowStale}=oe,v=ie(this,K).get(Z);if(v===void 0||!P&&ie(this,fe).call(this,v))return;const R=ie(this,S)[v];return Ve(this,te,wt).call(this,R)?R.__staleWhileFetching:R}async fetch(Z,oe={}){const{allowStale:P=this.allowStale,updateAgeOnGet:v=this.updateAgeOnGet,noDeleteOnStaleGet:R=this.noDeleteOnStaleGet,ttl:C=this.ttl,noDisposeOnSet:k=this.noDisposeOnSet,size:se=0,sizeCalculation:he=this.sizeCalculation,noUpdateTTL:Ie=this.noUpdateTTL,noDeleteOnFetchRejection:Me=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:Ue=this.allowStaleOnFetchRejection,ignoreFetchAbort:Ce=this.ignoreFetchAbort,allowStaleOnFetchAbort:z=this.allowStaleOnFetchAbort,context:be,forceRefresh:we=!1,status:Le,signal:Qe}=oe;if(!ie(this,le))return Le&&(Le.fetch="get"),this.get(Z,{allowStale:P,updateAgeOnGet:v,noDeleteOnStaleGet:R,status:Le});const Ke={allowStale:P,updateAgeOnGet:v,noDeleteOnStaleGet:R,ttl:C,noDisposeOnSet:k,size:se,sizeCalculation:he,noUpdateTTL:Ie,noDeleteOnFetchRejection:Me,allowStaleOnFetchRejection:Ue,allowStaleOnFetchAbort:z,ignoreFetchAbort:Ce,status:Le,signal:Qe};let Ge=ie(this,K).get(Z);if(Ge===void 0){Le&&(Le.fetch="miss");const nt=Ve(this,te,ub).call(this,Z,Ge,Ke,be);return nt.__returned=nt}else{const nt=ie(this,S)[Ge];if(Ve(this,te,wt).call(this,nt)){const Ne=P&&nt.__staleWhileFetching!==void 0;return Le&&(Le.fetch="inflight",Ne&&(Le.returnedStale=!0)),Ne?nt.__staleWhileFetching:nt.__returned=nt}const ct=ie(this,fe).call(this,Ge);if(!we&&!ct)return Le&&(Le.fetch="hit"),Ve(this,te,jg).call(this,Ge),v&&ie(this,Ee).call(this,Ge),Le&&ie(this,Re).call(this,Le,Ge),nt;const W=Ve(this,te,ub).call(this,Z,Ge,Ke,be),Pe=W.__staleWhileFetching!==void 0&&P;return Le&&(Le.fetch=ct?"stale":"refresh",Pe&&ct&&(Le.returnedStale=!0)),Pe?W.__staleWhileFetching:W.__returned=W}}async forceFetch(Z,oe={}){const P=await this.fetch(Z,oe);if(P===void 0)throw new Error("fetch() returned undefined");return P}memo(Z,oe={}){const P=ie(this,E);if(!P)throw new Error("no memoMethod provided to constructor");const{context:v,forceRefresh:R,...C}=oe,k=this.get(Z,C);if(!R&&k!==void 0)return k;const se=P(Z,k,{options:C,context:v});return this.set(Z,se,C),se}get(Z,oe={}){const{allowStale:P=this.allowStale,updateAgeOnGet:v=this.updateAgeOnGet,noDeleteOnStaleGet:R=this.noDeleteOnStaleGet,status:C}=oe,k=ie(this,K).get(Z);if(k!==void 0){const se=ie(this,S)[k],he=Ve(this,te,wt).call(this,se);return C&&ie(this,Re).call(this,C,k),ie(this,fe).call(this,k)?(C&&(C.get="stale"),he?(C&&P&&se.__staleWhileFetching!==void 0&&(C.returnedStale=!0),P?se.__staleWhileFetching:void 0):(R||Ve(this,te,Pn).call(this,Z,"expire"),C&&P&&(C.returnedStale=!0),P?se:void 0)):(C&&(C.get="hit"),he?se.__staleWhileFetching:(Ve(this,te,jg).call(this,k),v&&ie(this,Ee).call(this,k),se))}else C&&(C.get="miss")}delete(Z){return Ve(this,te,Pn).call(this,Z,"delete")}clear(){return Ve(this,te,Iv).call(this,"delete")}};b=new WeakMap,_=new WeakMap,T=new WeakMap,m=new WeakMap,A=new WeakMap,E=new WeakMap,j=new WeakMap,X=new WeakMap,K=new WeakMap,O=new WeakMap,S=new WeakMap,L=new WeakMap,N=new WeakMap,I=new WeakMap,V=new WeakMap,re=new WeakMap,Y=new WeakMap,ce=new WeakMap,ae=new WeakMap,pe=new WeakMap,U=new WeakMap,le=new WeakMap,me=new WeakMap,te=new WeakSet,Pv=function(){const Z=new s(ie(this,b)),oe=new s(ie(this,b));He(this,pe,Z),He(this,ae,oe),He(this,De,(R,C,k=n.now())=>{if(oe[R]=C!==0?k:0,Z[R]=C,C!==0&&this.ttlAutopurge){const se=setTimeout(()=>{ie(this,fe).call(this,R)&&Ve(this,te,Pn).call(this,ie(this,O)[R],"expire")},C+1);se.unref&&se.unref()}}),He(this,Ee,R=>{oe[R]=Z[R]!==0?n.now():0}),He(this,Re,(R,C)=>{if(Z[C]){const k=Z[C],se=oe[C];if(!k||!se)return;R.ttl=k,R.start=se,R.now=P||v();const he=R.now-se;R.remainingTTL=k-he}});let P=0;const v=()=>{const R=n.now();if(this.ttlResolution>0){P=R;const C=setTimeout(()=>P=0,this.ttlResolution);C.unref&&C.unref()}return R};this.getRemainingTTL=R=>{const C=ie(this,K).get(R);if(C===void 0)return 0;const k=Z[C],se=oe[C];if(!k||!se)return 1/0;const he=(P||v())-se;return k-he},He(this,fe,R=>{const C=oe[R],k=Z[R];return!!k&&!!C&&(P||v())-C>k})},Ee=new WeakMap,Re=new WeakMap,De=new WeakMap,fe=new WeakMap,uq=function(){const Z=new s(ie(this,b));He(this,X,0),He(this,ce,Z),He(this,q,oe=>{He(this,X,ie(this,X)-Z[oe]),Z[oe]=0}),He(this,D,(oe,P,v,R)=>{if(Ve(this,te,wt).call(this,P))return 0;if(!u(v))if(R){if(typeof R!="function")throw new TypeError("sizeCalculation must be a function");if(v=R(P,oe),!u(v))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return v}),He(this,w,(oe,P,v)=>{if(Z[oe]=P,ie(this,_)){const R=ie(this,_)-Z[oe];for(;ie(this,X)>R;)Ve(this,te,ob).call(this,!0)}He(this,X,ie(this,X)+Z[oe]),v&&(v.entrySize=P,v.totalCalculatedSize=ie(this,X))})},q=new WeakMap,w=new WeakMap,D=new WeakMap,jn=function*({allowStale:Z=this.allowStale}={}){if(ie(this,j))for(let oe=ie(this,V);!(!Ve(this,te,Nv).call(this,oe)||((Z||!ie(this,fe).call(this,oe))&&(yield oe),oe===ie(this,I)));)oe=ie(this,N)[oe]},Dn=function*({allowStale:Z=this.allowStale}={}){if(ie(this,j))for(let oe=ie(this,I);!(!Ve(this,te,Nv).call(this,oe)||((Z||!ie(this,fe).call(this,oe))&&(yield oe),oe===ie(this,V)));)oe=ie(this,L)[oe]},Nv=function(Z){return Z!==void 0&&ie(this,K).get(ie(this,O)[Z])===Z},ob=function(Z){var R;const oe=ie(this,I),P=ie(this,O)[oe],v=ie(this,S)[oe];return ie(this,le)&&Ve(this,te,wt).call(this,v)?v.__abortController.abort(new Error("evicted")):(ie(this,U)||ie(this,me))&&(ie(this,U)&&((R=ie(this,T))==null||R.call(this,v,P,"evict")),ie(this,me)&&ie(this,Y)?.push([v,P,"evict"])),ie(this,q).call(this,oe),Z&&(ie(this,O)[oe]=void 0,ie(this,S)[oe]=void 0,ie(this,re).push(oe)),ie(this,j)===1?(He(this,I,He(this,V,0)),ie(this,re).length=0):He(this,I,ie(this,L)[oe]),ie(this,K).delete(P),Rm(this,j)._--,oe},ub=function(Z,oe,P,v){const R=oe===void 0?void 0:ie(this,S)[oe];if(Ve(this,te,wt).call(this,R))return R;const C=new r,{signal:k}=P;k?.addEventListener("abort",()=>C.abort(k.reason),{signal:C.signal});const se={signal:C.signal,options:P,context:v},he=(be,we=!1)=>{const{aborted:Le}=C.signal,Qe=P.ignoreFetchAbort&&be!==void 0;if(P.status&&(Le&&!we?(P.status.fetchAborted=!0,P.status.fetchError=C.signal.reason,Qe&&(P.status.fetchAbortIgnored=!0)):P.status.fetchResolved=!0),Le&&!Qe&&!we)return Me(C.signal.reason);const Ke=Ce;return ie(this,S)[oe]===Ce&&(be===void 0?Ke.__staleWhileFetching?ie(this,S)[oe]=Ke.__staleWhileFetching:Ve(this,te,Pn).call(this,Z,"fetch"):(P.status&&(P.status.fetchUpdated=!0),this.set(Z,be,se.options))),be},Ie=be=>(P.status&&(P.status.fetchRejected=!0,P.status.fetchError=be),Me(be)),Me=be=>{const{aborted:we}=C.signal,Le=we&&P.allowStaleOnFetchAbort,Qe=Le||P.allowStaleOnFetchRejection,Ke=Qe||P.noDeleteOnFetchRejection,Ge=Ce;if(ie(this,S)[oe]===Ce&&(!Ke||Ge.__staleWhileFetching===void 0?Ve(this,te,Pn).call(this,Z,"fetch"):Le||(ie(this,S)[oe]=Ge.__staleWhileFetching)),Qe)return P.status&&Ge.__staleWhileFetching!==void 0&&(P.status.returnedStale=!0),Ge.__staleWhileFetching;if(Ge.__returned===Ge)throw be},Ue=(be,we)=>{var Qe;const Le=(Qe=ie(this,A))==null?void 0:Qe.call(this,Z,R,se);Le&&Le instanceof Promise&&Le.then(Ke=>be(Ke===void 0?void 0:Ke),we),C.signal.addEventListener("abort",()=>{(!P.ignoreFetchAbort||P.allowStaleOnFetchAbort)&&(be(void 0),P.allowStaleOnFetchAbort&&(be=Ke=>he(Ke,!0)))})};P.status&&(P.status.fetchDispatched=!0);const Ce=new Promise(Ue).then(he,Ie),z=Object.assign(Ce,{__abortController:C,__staleWhileFetching:R,__returned:void 0});return oe===void 0?(this.set(Z,z,{...se.options,status:void 0}),oe=ie(this,K).get(Z)):ie(this,S)[oe]=z,z},wt=function(Z){if(!ie(this,le))return!1;const oe=Z;return!!oe&&oe instanceof Promise&&oe.hasOwnProperty("__staleWhileFetching")&&oe.__abortController instanceof r},Mv=function(Z,oe){ie(this,N)[oe]=Z,ie(this,L)[Z]=oe},jg=function(Z){Z!==ie(this,V)&&(Z===ie(this,I)?He(this,I,ie(this,L)[Z]):Ve(this,te,Mv).call(this,ie(this,N)[Z],ie(this,L)[Z]),Ve(this,te,Mv).call(this,ie(this,V),Z),He(this,V,Z))},Pn=function(Z,oe){var v,R;let P=!1;if(ie(this,j)!==0){const C=ie(this,K).get(Z);if(C!==void 0)if(P=!0,ie(this,j)===1)Ve(this,te,Iv).call(this,oe);else{ie(this,q).call(this,C);const k=ie(this,S)[C];if(Ve(this,te,wt).call(this,k)?k.__abortController.abort(new Error("deleted")):(ie(this,U)||ie(this,me))&&(ie(this,U)&&((v=ie(this,T))==null||v.call(this,k,Z,oe)),ie(this,me)&&ie(this,Y)?.push([k,Z,oe])),ie(this,K).delete(Z),ie(this,O)[C]=void 0,ie(this,S)[C]=void 0,C===ie(this,V))He(this,V,ie(this,N)[C]);else if(C===ie(this,I))He(this,I,ie(this,L)[C]);else{const se=ie(this,N)[C];ie(this,L)[se]=ie(this,L)[C];const he=ie(this,L)[C];ie(this,N)[he]=ie(this,N)[C]}Rm(this,j)._--,ie(this,re).push(C)}}if(ie(this,me)&&ie(this,Y)?.length){const C=ie(this,Y);let k;for(;k=C?.shift();)(R=ie(this,m))==null||R.call(this,...k)}return P},Iv=function(Z){var oe,P;for(const v of Ve(this,te,Dn).call(this,{allowStale:!0})){const R=ie(this,S)[v];if(Ve(this,te,wt).call(this,R))R.__abortController.abort(new Error("deleted"));else{const C=ie(this,O)[v];ie(this,U)&&((oe=ie(this,T))==null||oe.call(this,R,C,Z)),ie(this,me)&&ie(this,Y)?.push([R,C,Z])}}if(ie(this,K).clear(),ie(this,S).fill(void 0),ie(this,O).fill(void 0),ie(this,pe)&&ie(this,ae)&&(ie(this,pe).fill(0),ie(this,ae).fill(0)),ie(this,ce)&&ie(this,ce).fill(0),He(this,I,0),He(this,V,0),ie(this,re).length=0,He(this,X,0),He(this,j,0),ie(this,me)&&ie(this,Y)){const v=ie(this,Y);let R;for(;R=v?.shift();)(P=ie(this,m))==null||P.call(this,...R)}};let f=Te;return xl.LRUCache=f,xl}var Kw;function mC(){if(Kw)return Ll;Kw=1,Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.prepareEvaluatorActionContext=void 0;const n=Be(),t=Lb(),o=Ug();function i(r){let e=r;if(e.has(n.KeysInitQuery.extensionFunctionCreator)&&e.has(n.KeysInitQuery.extensionFunctions))throw new Error("Illegal simultaneous usage of extensionFunctionCreator and extensionFunctions in context");if(e.has(n.KeysInitQuery.extensionFunctionCreator))e=e.set(n.KeysExpressionEvaluator.extensionFunctionCreator,e.get(n.KeysInitQuery.extensionFunctionCreator));else if(e.has(n.KeysInitQuery.extensionFunctions)){const a=e.getSafe(n.KeysInitQuery.extensionFunctions);e=e.set(n.KeysExpressionEvaluator.extensionFunctionCreator,async u=>a[u.value])}else e=e.setDefault(n.KeysExpressionEvaluator.extensionFunctionCreator,async()=>{});return e=e.setDefault(n.KeysExpressionEvaluator.defaultTimeZone,(0,o.extractTimeZone)(e.getSafe(n.KeysInitQuery.queryTimestamp))),e=e.setDefault(n.KeysExpressionEvaluator.superTypeProvider,{cache:new t.LRUCache({max:1e3}),discoverer:()=>"term"}),e}return Ll.prepareEvaluatorActionContext=i,Ll}var Ww;function ye(){return Ww||(Ww=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.LangStringLiteral=n.TimeLiteral=n.DurationLiteral=n.DateLiteral=n.DayTimeDurationLiteral=n.DateTimeLiteral=n.yearMonthDurationsToMonths=n.toUTCDate=n.toDateTimeRepresentation=n.negateDuration=n.extractRawTimeZone=n.defaultedYearMonthDurationRepresentation=n.defaultedDurationRepresentation=n.defaultedDayTimeDurationRepresentation=n.defaultedDateTimeRepresentation=n.dayTimeDurationsToSeconds=n.isSubTypeOf=n.SparqlOperator=n.TypeAlias=n.TypeURL=n.typedLiteral=n.InvalidArity=n.InvalidLexicalForm=n.ExtensionFunctionError=n.CastError=n.UnboundVariableError=n.NoAggregator=n.InError=n.CoalesceError=n.InvalidArgumentTypes=n.InvalidTimezoneCall=n.IncompatibleLanguageOperation=n.RDFEqualTypeError=n.EmptyAggregateError=n.isExpressionError=n.ExpressionError=n.Builder=n.expressionToVar=n.float=n.decimal=n.langString=n.dateTime=n.integer=n.double=n.string=n.bool=n.declare=n.prepareEvaluatorActionContext=n.OverloadTree=n.TermTransformer=void 0,n.trimToDayTimeDuration=n.trimToYearMonthDuration=n.parseDate=n.parseXSDFloat=n.parseXSDDecimal=n.parseYearMonthDuration=n.parseTime=n.parseDuration=n.parseDayTimeDuration=n.parseDateTime=n.elapsedDuration=n.addDurationToDateTime=n.isNonLexicalLiteral=n.StringLiteral=n.NonLexicalLiteral=n.FloatLiteral=n.IntegerLiteral=n.Literal=n.Existence=n.Aggregate=n.DoubleLiteral=n.DefaultGraph=n.DecimalLiteral=n.BlankNode=n.BooleanLiteral=n.NumericLiteral=n.Variable=n.NamedNode=n.Operator=n.Quad=n.YearMonthDurationLiteral=n.Term=void 0;var t=gC();Object.defineProperty(n,"TermTransformer",{enumerable:!0,get:function(){return t.TermTransformer}});var o=iq();Object.defineProperty(n,"OverloadTree",{enumerable:!0,get:function(){return o.OverloadTree}});var i=mC();Object.defineProperty(n,"prepareEvaluatorActionContext",{enumerable:!0,get:function(){return i.prepareEvaluatorActionContext}});var r=aq();Object.defineProperty(n,"declare",{enumerable:!0,get:function(){return r.declare}}),Object.defineProperty(n,"bool",{enumerable:!0,get:function(){return r.bool}}),Object.defineProperty(n,"string",{enumerable:!0,get:function(){return r.string}}),Object.defineProperty(n,"double",{enumerable:!0,get:function(){return r.double}}),Object.defineProperty(n,"integer",{enumerable:!0,get:function(){return r.integer}}),Object.defineProperty(n,"dateTime",{enumerable:!0,get:function(){return r.dateTime}}),Object.defineProperty(n,"langString",{enumerable:!0,get:function(){return r.langString}}),Object.defineProperty(n,"decimal",{enumerable:!0,get:function(){return r.decimal}}),Object.defineProperty(n,"float",{enumerable:!0,get:function(){return r.float}}),Object.defineProperty(n,"expressionToVar",{enumerable:!0,get:function(){return r.expressionToVar}}),Object.defineProperty(n,"Builder",{enumerable:!0,get:function(){return r.Builder}});var e=fc();Object.defineProperty(n,"ExpressionError",{enumerable:!0,get:function(){return e.ExpressionError}}),Object.defineProperty(n,"isExpressionError",{enumerable:!0,get:function(){return e.isExpressionError}}),Object.defineProperty(n,"EmptyAggregateError",{enumerable:!0,get:function(){return e.EmptyAggregateError}}),Object.defineProperty(n,"RDFEqualTypeError",{enumerable:!0,get:function(){return e.RDFEqualTypeError}}),Object.defineProperty(n,"IncompatibleLanguageOperation",{enumerable:!0,get:function(){return e.IncompatibleLanguageOperation}}),Object.defineProperty(n,"InvalidTimezoneCall",{enumerable:!0,get:function(){return e.InvalidTimezoneCall}}),Object.defineProperty(n,"InvalidArgumentTypes",{enumerable:!0,get:function(){return e.InvalidArgumentTypes}}),Object.defineProperty(n,"CoalesceError",{enumerable:!0,get:function(){return e.CoalesceError}}),Object.defineProperty(n,"InError",{enumerable:!0,get:function(){return e.InError}}),Object.defineProperty(n,"NoAggregator",{enumerable:!0,get:function(){return e.NoAggregator}}),Object.defineProperty(n,"UnboundVariableError",{enumerable:!0,get:function(){return e.UnboundVariableError}}),Object.defineProperty(n,"CastError",{enumerable:!0,get:function(){return e.CastError}}),Object.defineProperty(n,"ExtensionFunctionError",{enumerable:!0,get:function(){return e.ExtensionFunctionError}}),Object.defineProperty(n,"InvalidLexicalForm",{enumerable:!0,get:function(){return e.InvalidLexicalForm}}),Object.defineProperty(n,"InvalidArity",{enumerable:!0,get:function(){return e.InvalidArity}});var a=Rs();Object.defineProperty(n,"typedLiteral",{enumerable:!0,get:function(){return a.typedLiteral}}),Object.defineProperty(n,"TypeURL",{enumerable:!0,get:function(){return a.TypeURL}}),Object.defineProperty(n,"TypeAlias",{enumerable:!0,get:function(){return a.TypeAlias}}),Object.defineProperty(n,"SparqlOperator",{enumerable:!0,get:function(){return a.SparqlOperator}});var u=Ib();Object.defineProperty(n,"isSubTypeOf",{enumerable:!0,get:function(){return u.isSubTypeOf}});var c=Ug();Object.defineProperty(n,"dayTimeDurationsToSeconds",{enumerable:!0,get:function(){return c.dayTimeDurationsToSeconds}}),Object.defineProperty(n,"defaultedDateTimeRepresentation",{enumerable:!0,get:function(){return c.defaultedDateTimeRepresentation}}),Object.defineProperty(n,"defaultedDayTimeDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedDayTimeDurationRepresentation}}),Object.defineProperty(n,"defaultedDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedDurationRepresentation}}),Object.defineProperty(n,"defaultedYearMonthDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedYearMonthDurationRepresentation}}),Object.defineProperty(n,"extractRawTimeZone",{enumerable:!0,get:function(){return c.extractRawTimeZone}}),Object.defineProperty(n,"negateDuration",{enumerable:!0,get:function(){return c.negateDuration}}),Object.defineProperty(n,"toDateTimeRepresentation",{enumerable:!0,get:function(){return c.toDateTimeRepresentation}}),Object.defineProperty(n,"toUTCDate",{enumerable:!0,get:function(){return c.toUTCDate}}),Object.defineProperty(n,"yearMonthDurationsToMonths",{enumerable:!0,get:function(){return c.yearMonthDurationsToMonths}});var s=dc();Object.defineProperty(n,"DateTimeLiteral",{enumerable:!0,get:function(){return s.DateTimeLiteral}}),Object.defineProperty(n,"DayTimeDurationLiteral",{enumerable:!0,get:function(){return s.DayTimeDurationLiteral}}),Object.defineProperty(n,"DateLiteral",{enumerable:!0,get:function(){return s.DateLiteral}}),Object.defineProperty(n,"DurationLiteral",{enumerable:!0,get:function(){return s.DurationLiteral}}),Object.defineProperty(n,"TimeLiteral",{enumerable:!0,get:function(){return s.TimeLiteral}}),Object.defineProperty(n,"LangStringLiteral",{enumerable:!0,get:function(){return s.LangStringLiteral}}),Object.defineProperty(n,"Term",{enumerable:!0,get:function(){return s.Term}}),Object.defineProperty(n,"YearMonthDurationLiteral",{enumerable:!0,get:function(){return s.YearMonthDurationLiteral}}),Object.defineProperty(n,"Quad",{enumerable:!0,get:function(){return s.Quad}}),Object.defineProperty(n,"Operator",{enumerable:!0,get:function(){return s.Operator}}),Object.defineProperty(n,"NamedNode",{enumerable:!0,get:function(){return s.NamedNode}}),Object.defineProperty(n,"Variable",{enumerable:!0,get:function(){return s.Variable}}),Object.defineProperty(n,"NumericLiteral",{enumerable:!0,get:function(){return s.NumericLiteral}}),Object.defineProperty(n,"BooleanLiteral",{enumerable:!0,get:function(){return s.BooleanLiteral}}),Object.defineProperty(n,"BlankNode",{enumerable:!0,get:function(){return s.BlankNode}}),Object.defineProperty(n,"DecimalLiteral",{enumerable:!0,get:function(){return s.DecimalLiteral}}),Object.defineProperty(n,"DefaultGraph",{enumerable:!0,get:function(){return s.DefaultGraph}}),Object.defineProperty(n,"DoubleLiteral",{enumerable:!0,get:function(){return s.DoubleLiteral}}),Object.defineProperty(n,"Aggregate",{enumerable:!0,get:function(){return s.Aggregate}}),Object.defineProperty(n,"Existence",{enumerable:!0,get:function(){return s.Existence}}),Object.defineProperty(n,"Literal",{enumerable:!0,get:function(){return s.Literal}}),Object.defineProperty(n,"IntegerLiteral",{enumerable:!0,get:function(){return s.IntegerLiteral}}),Object.defineProperty(n,"FloatLiteral",{enumerable:!0,get:function(){return s.FloatLiteral}}),Object.defineProperty(n,"NonLexicalLiteral",{enumerable:!0,get:function(){return s.NonLexicalLiteral}}),Object.defineProperty(n,"StringLiteral",{enumerable:!0,get:function(){return s.StringLiteral}}),Object.defineProperty(n,"isNonLexicalLiteral",{enumerable:!0,get:function(){return s.isNonLexicalLiteral}});var l=oq();Object.defineProperty(n,"addDurationToDateTime",{enumerable:!0,get:function(){return l.addDurationToDateTime}}),Object.defineProperty(n,"elapsedDuration",{enumerable:!0,get:function(){return l.elapsedDuration}});var f=Dv();Object.defineProperty(n,"parseDateTime",{enumerable:!0,get:function(){return f.parseDateTime}}),Object.defineProperty(n,"parseDayTimeDuration",{enumerable:!0,get:function(){return f.parseDayTimeDuration}}),Object.defineProperty(n,"parseDuration",{enumerable:!0,get:function(){return f.parseDuration}}),Object.defineProperty(n,"parseTime",{enumerable:!0,get:function(){return f.parseTime}}),Object.defineProperty(n,"parseYearMonthDuration",{enumerable:!0,get:function(){return f.parseYearMonthDuration}}),Object.defineProperty(n,"parseXSDDecimal",{enumerable:!0,get:function(){return f.parseXSDDecimal}}),Object.defineProperty(n,"parseXSDFloat",{enumerable:!0,get:function(){return f.parseXSDFloat}}),Object.defineProperty(n,"parseDate",{enumerable:!0,get:function(){return f.parseDate}});var d=Ug();Object.defineProperty(n,"trimToYearMonthDuration",{enumerable:!0,get:function(){return d.trimToYearMonthDuration}}),Object.defineProperty(n,"trimToDayTimeDuration",{enumerable:!0,get:function(){return d.trimToDayTimeDuration}})})(r1)),r1}var Yw;function sq(){if(Yw)return gi;Yw=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.TermFunctionBase=gi.ExpressionFunctionBase=void 0;const n=Be(),t=ye();class o{constructor({arity:e,operator:a,apply:u}){this.arity=e,this.operator=a,this.apply=u}checkArity(e){return Array.isArray(this.arity)?this.arity.includes(e.length):this.arity===Number.POSITIVE_INFINITY?!0:e.length===this.arity}}gi.ExpressionFunctionBase=o;class i extends o{constructor({arity:e,operator:a,overloads:u}){super({arity:e,operator:a,apply:async({args:c,exprEval:s,mapping:l})=>this.applyOnTerms(await Promise.all(c.map(f=>s.evaluatorExpressionEvaluation(f,l))),s)}),this.supportsTermExpressions=!0,this.overloads=u}applyOnTerms(e,a){return(this.overloads.search(e,a.context.getSafe(n.KeysExpressionEvaluator.superTypeProvider),a.context.getSafe(n.KeysInitQuery.functionArgumentsCache))??this.handleInvalidTypes(e))(a)(e)}handleInvalidTypes(e){throw new t.InvalidArgumentTypes(e,this.operator)}}return gi.TermFunctionBase=i,gi}var Zw;function ge(){return Zw||(Zw=1,(function(n){var t=yi&&yi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=yi&&yi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Qx(),n),o(QB(),n),o(UB(),n),o(sq(),n)})(yi)),yi}var Ai={},ql={},kw;function cq(){if(kw)return ql;kw=1,Object.defineProperty(ql,"__esModule",{value:!0}),ql.ActorQueryOperation=void 0;const n=Ae();let t=class extends n.Actor{constructor(i){super(i)}};return ql.ActorQueryOperation=t,ql}var Bl={},Fi={},Cl={},e3;function bC(){if(e3)return Cl;e3=1,Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.MetadataValidationState=void 0;let n=class{constructor(){this.invalidateListeners=[],this.valid=!0}addInvalidateListener(o){this.invalidateListeners.push(o)}invalidate(){if(this.valid){this.valid=!1;for(const o of this.invalidateListeners)o()}}};return Cl.MetadataValidationState=n,Cl}var Sr={},t3;function vC(){if(t3)return Sr;t3=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.cachifyMetadata=Sr.validateMetadataBindings=Sr.validateMetadataQuads=Sr.getMetadataBindings=Sr.getMetadataQuads=void 0;function n(e){return r(()=>new Promise((a,u)=>{e.getProperty("metadata",c=>a(c)),e.on("error",u)}).then(a=>o(a)))}Sr.getMetadataQuads=n;function t(e){return r(()=>new Promise((a,u)=>{e.getProperty("metadata",c=>a(c)),e.on("error",u)}).then(a=>i(a)))}Sr.getMetadataBindings=t;function o(e){for(const a of["cardinality"])if(!(a in e))throw new Error(`Invalid metadata: missing ${a} in ${JSON.stringify(e)}`);return e}Sr.validateMetadataQuads=o;function i(e){for(const a of["cardinality","variables"])if(!(a in e))throw new Error(`Invalid metadata: missing ${a} in ${JSON.stringify(e)}`);return e}Sr.validateMetadataBindings=i;function r(e){let a;return()=>(a||(a=e(),a.then(u=>u.state.addInvalidateListener(()=>{a=void 0})).catch(()=>{})),a)}return Sr.cachifyMetadata=r,Sr}var r3;function br(){return r3||(r3=1,(function(n){var t=Fi&&Fi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Fi&&Fi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(bC(),n),o(vC(),n)})(Fi)),Fi}var n3;function lq(){if(n3)return Bl;n3=1,Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.ActorQueryOperationTyped=void 0;const n=Be(),t=Ae(),o=br(),i=cq();let r=class extends i.ActorQueryOperation{constructor(a,u){if(super({...a,operationName:u}),!this.operationName)throw new Error('A valid "operationName" argument must be provided.')}async test(a){if(!a.operation)return(0,t.failTest)("Missing field 'operation' in a query operation action.");if(a.operation.type!==this.operationName)return(0,t.failTest)(`Actor ${this.name} only supports ${this.operationName} operations, but got ${a.operation.type}`);const u=a.operation;return this.testOperation(u,a.context)}async run(a,u){const c=a.context.get(n.KeysInitQuery.physicalQueryPlanLogger);c&&(c.logOperation(a.operation.type,void 0,a.operation,a.context.get(n.KeysInitQuery.physicalQueryPlanNode),this.name,{}),a.context=a.context.set(n.KeysInitQuery.physicalQueryPlanNode,a.operation));const s=a.operation,l=a.context.set(n.KeysQueryOperation.operation,s),f=await this.runOperation(s,l,u);return"metadata"in f&&(f.metadata=(0,o.cachifyMetadata)(f.metadata)),f}};return Bl.ActorQueryOperationTyped=r,Bl}var Ql={},i3;function TC(){if(i3)return Ql;i3=1,Object.defineProperty(Ql,"__esModule",{value:!0}),Ql.ActorQueryOperationTypedMediated=void 0;const n=lq();let t=class extends n.ActorQueryOperationTyped{constructor(i,r){super(i,r)}};return Ql.ActorQueryOperationTypedMediated=t,Ql}var Ul={},a3;function OC(){if(a3)return Ul;a3=1,Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.BusQueryOperation=void 0;const n=Ae();let t=class extends n.BusIndexed{constructor(i){super({...i,actorIdentifierFields:["operationName"],actionIdentifierFields:["operation","type"]})}};return Ul.BusQueryOperation=t,Ul}var o3;function gt(){return o3||(o3=1,(function(n){var t=Ai&&Ai.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ai&&Ai.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(cq(),n),o(lq(),n),o(TC(),n),o(OC(),n)})(Ai)),Ai}var Ei={},Vl={},Ri={},Gl={},u3;function SC(){if(u3)return Gl;u3=1,Object.defineProperty(Gl,"__esModule",{value:!0}),Gl.ActorContextPreprocess=void 0;const n=Ae();let t=class extends n.Actor{constructor(i){super(i)}};return Gl.ActorContextPreprocess=t,Gl}var s3;function rm(){return s3||(s3=1,(function(n){var t=Ri&&Ri.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ri&&Ri.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(SC(),n)})(Ri)),Ri}var c3;function wC(){if(c3)return Vl;c3=1,Object.defineProperty(Vl,"__esModule",{value:!0}),Vl.ActorContextPreprocessConvertShortcuts=void 0;const n=rm(),t=Ae();let o=class fq extends n.ActorContextPreprocess{constructor(r){super(r)}async test(r){return(0,t.passTestVoid)()}async run(r){return{context:fq.expandShortcuts(r.context,this.contextKeyShortcuts)}}static expandShortcuts(r,e){for(const a of r.keys())e[a.name]&&(r=r.set(new t.ActionContextKey(e[a.name]),r.get(a)).delete(a));return r}};return Vl.ActorContextPreprocessConvertShortcuts=o,Vl}var l3;function AC(){return l3||(l3=1,(function(n){var t=Ei&&Ei.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ei&&Ei.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(wC(),n)})(Ei)),Ei}var ji={},Xl={},Di={},zl={},f3;function dq(){if(f3)return zl;f3=1,Object.defineProperty(zl,"__esModule",{value:!0}),zl.BlankNode=void 0;class n{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return zl.BlankNode=n,zl}var $l={},Hl={},d3;function pq(){if(d3)return Hl;d3=1,Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.DefaultGraph=void 0;class n{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return Hl.DefaultGraph=n,n.INSTANCE=new n,Hl}var Jl={},Kl={},p3;function PT(){if(p3)return Kl;p3=1,Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.NamedNode=void 0;class n{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return Kl.NamedNode=n,Kl}var h3;function hq(){if(h3)return Jl;h3=1,Object.defineProperty(Jl,"__esModule",{value:!0}),Jl.Literal=void 0;const n=PT();class t{constructor(i,r){this.termType="Literal",this.value=i,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(i){return!!i&&i.termType==="Literal"&&i.value===this.value&&i.language===this.language&&this.datatype.equals(i.datatype)}}return Jl.Literal=t,t.RDF_LANGUAGE_STRING=new n.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new n.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Jl}var Wl={},y3;function yq(){if(y3)return Wl;y3=1,Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.Quad=void 0;class n{constructor(o,i,r,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=i,this.object=r,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return Wl.Quad=n,Wl}var Yl={},_3;function _q(){if(_3)return Yl;_3=1,Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.Variable=void 0;class n{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return Yl.Variable=n,Yl}var g3;function FC(){if(g3)return $l;g3=1,Object.defineProperty($l,"__esModule",{value:!0}),$l.DataFactory=void 0;const n=dq(),t=pq(),o=hq(),i=PT(),r=yq(),e=_q();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new i.NamedNode(s)}blankNode(s){return new n.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,f,d){return new r.Quad(s,l,f,d||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return $l.DataFactory=u,$l}var m3;function EC(){return m3||(m3=1,(function(n){var t=Di&&Di.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Di&&Di.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(dq(),n),o(FC(),n),o(pq(),n),o(hq(),n),o(PT(),n),o(yq(),n),o(_q(),n)})(Di)),Di}var b3;function RC(){if(b3)return Xl;b3=1,Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.ActorContextPreprocessSetDefaults=void 0;const n=rm(),t=Be(),o=Ae(),i=EC();let r=class extends n.ActorContextPreprocess{constructor(a){super(a),this.defaultFunctionArgumentsCache={}}async test(a){return(0,o.passTestVoid)()}async run(a){let u=a.context;if(a.initialize){u=u.setDefault(t.KeysInitQuery.queryTimestamp,new Date).setDefault(t.KeysInitQuery.queryTimestampHighResolution,performance.now()).setDefault(t.KeysQuerySourceIdentify.sourceIds,new Map).setDefault(t.KeysCore.log,this.logger).setDefault(t.KeysInitQuery.functionArgumentsCache,this.defaultFunctionArgumentsCache).setDefault(t.KeysQuerySourceIdentify.hypermediaSourcesAggregatedStores,new Map).setDefault(t.KeysInitQuery.dataFactory,new i.DataFactory);let c={language:"sparql",version:"1.1"};u.has(t.KeysInitQuery.queryFormat)?(c=u.get(t.KeysInitQuery.queryFormat),c.language==="graphql"&&(u=u.setDefault(t.KeysInitQuery.graphqlSingularizeVariables,{}))):u=u.set(t.KeysInitQuery.queryFormat,c),!u.has(t.KeysInitQuery.extensionFunctionsAlwaysPushdown)&&!u.has(t.KeysInitQuery.extensionFunctions)&&(u=u.set(t.KeysInitQuery.extensionFunctionsAlwaysPushdown,!0))}return{context:u}}};return Xl.ActorContextPreprocessSetDefaults=r,Xl}var v3;function jC(){return v3||(v3=1,(function(n){var t=ji&&ji.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ji&&ji.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(RC(),n)})(ji)),ji}var Pi={},Zl={},T3;function DC(){if(T3)return Zl;T3=1,Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.ActorContextPreprocessSourceToDestination=void 0;const n=rm(),t=Be(),o=Ae();let i=class extends n.ActorContextPreprocess{constructor(e){super(e)}async test(e){return(0,o.passTestVoid)()}async run(e){if(e.context.get(t.KeysInitQuery.querySourcesUnidentified)&&!e.context.get(t.KeysRdfUpdateQuads.destination)){const a=e.context.get(t.KeysInitQuery.querySourcesUnidentified);if(a.length===1)return{context:e.context.set(t.KeysRdfUpdateQuads.destination,a[0])}}return e}};return Zl.ActorContextPreprocessSourceToDestination=i,Zl}var O3;function PC(){return O3||(O3=1,(function(n){var t=Pi&&Pi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Pi&&Pi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(DC(),n)})(Pi)),Pi}var Ni={},kl={},ef={},h1={},Im={exports:{}},S3;function nm(){if(S3)return Im.exports;S3=1;var n=typeof Reflect=="object"?Reflect:null,t=n&&typeof n.apply=="function"?n.apply:function(E,j,X){return Function.prototype.apply.call(E,j,X)},o;n&&typeof n.ownKeys=="function"?o=n.ownKeys:Object.getOwnPropertySymbols?o=function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:o=function(E){return Object.getOwnPropertyNames(E)};function i(A){console&&console.warn&&console.warn(A)}var r=Number.isNaN||function(E){return E!==E};function e(){e.init.call(this)}Im.exports=e,Im.exports.once=_,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var a=10;function u(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(A){if(typeof A!="number"||A<0||r(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");a=A}}),e.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(E){if(typeof E!="number"||E<0||r(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this};function c(A){return A._maxListeners===void 0?e.defaultMaxListeners:A._maxListeners}e.prototype.getMaxListeners=function(){return c(this)},e.prototype.emit=function(E){for(var j=[],X=1;X<arguments.length;X++)j.push(arguments[X]);var K=E==="error",O=this._events;if(O!==void 0)K=K&&O.error===void 0;else if(!K)return!1;if(K){var S;if(j.length>0&&(S=j[0]),S instanceof Error)throw S;var L=new Error("Unhandled error."+(S?" ("+S.message+")":""));throw L.context=S,L}var N=O[E];if(N===void 0)return!1;if(typeof N=="function")t(N,this,j);else for(var I=N.length,V=p(N,I),X=0;X<I;++X)t(V[X],this,j);return!0};function s(A,E,j,X){var K,O,S;if(u(j),O=A._events,O===void 0?(O=A._events=Object.create(null),A._eventsCount=0):(O.newListener!==void 0&&(A.emit("newListener",E,j.listener?j.listener:j),O=A._events),S=O[E]),S===void 0)S=O[E]=j,++A._eventsCount;else if(typeof S=="function"?S=O[E]=X?[j,S]:[S,j]:X?S.unshift(j):S.push(j),K=c(A),K>0&&S.length>K&&!S.warned){S.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+S.length+" "+String(E)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=A,L.type=E,L.count=S.length,i(L)}return A}e.prototype.addListener=function(E,j){return s(this,E,j,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(E,j){return s(this,E,j,!0)};function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(A,E,j){var X={fired:!1,wrapFn:void 0,target:A,type:E,listener:j},K=l.bind(X);return K.listener=j,X.wrapFn=K,K}e.prototype.once=function(E,j){return u(j),this.on(E,f(this,E,j)),this},e.prototype.prependOnceListener=function(E,j){return u(j),this.prependListener(E,f(this,E,j)),this},e.prototype.removeListener=function(E,j){var X,K,O,S,L;if(u(j),K=this._events,K===void 0)return this;if(X=K[E],X===void 0)return this;if(X===j||X.listener===j)--this._eventsCount===0?this._events=Object.create(null):(delete K[E],K.removeListener&&this.emit("removeListener",E,X.listener||j));else if(typeof X!="function"){for(O=-1,S=X.length-1;S>=0;S--)if(X[S]===j||X[S].listener===j){L=X[S].listener,O=S;break}if(O<0)return this;O===0?X.shift():y(X,O),X.length===1&&(K[E]=X[0]),K.removeListener!==void 0&&this.emit("removeListener",E,L||j)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(E){var j,X,K;if(X=this._events,X===void 0)return this;if(X.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):X[E]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete X[E]),this;if(arguments.length===0){var O=Object.keys(X),S;for(K=0;K<O.length;++K)S=O[K],S!=="removeListener"&&this.removeAllListeners(S);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(j=X[E],typeof j=="function")this.removeListener(E,j);else if(j!==void 0)for(K=j.length-1;K>=0;K--)this.removeListener(E,j[K]);return this};function d(A,E,j){var X=A._events;if(X===void 0)return[];var K=X[E];return K===void 0?[]:typeof K=="function"?j?[K.listener||K]:[K]:j?b(K):p(K,K.length)}e.prototype.listeners=function(E){return d(this,E,!0)},e.prototype.rawListeners=function(E){return d(this,E,!1)},e.listenerCount=function(A,E){return typeof A.listenerCount=="function"?A.listenerCount(E):h.call(A,E)},e.prototype.listenerCount=h;function h(A){var E=this._events;if(E!==void 0){var j=E[A];if(typeof j=="function")return 1;if(j!==void 0)return j.length}return 0}e.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]};function p(A,E){for(var j=new Array(E),X=0;X<E;++X)j[X]=A[X];return j}function y(A,E){for(;E+1<A.length;E++)A[E]=A[E+1];A.pop()}function b(A){for(var E=new Array(A.length),j=0;j<E.length;++j)E[j]=A[j].listener||A[j];return E}function _(A,E){return new Promise(function(j,X){function K(S){A.removeListener(E,O),X(S)}function O(){typeof A.removeListener=="function"&&A.removeListener("error",K),j([].slice.call(arguments))}m(A,E,O,{once:!0}),E!=="error"&&T(A,K,{once:!0})})}function T(A,E,j){typeof A.on=="function"&&m(A,"error",E,j)}function m(A,E,j,X){if(typeof A.on=="function")X.once?A.once(E,j):A.on(E,j);else if(typeof A.addEventListener=="function")A.addEventListener(E,function K(O){X.once&&A.removeEventListener(E,K),j(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}return Im.exports}var tf={},w3;function NC(){if(w3)return tf;w3=1,Object.defineProperty(tf,"__esModule",{value:!0}),tf.LinkedList=void 0;class n{constructor(){this._length=0,this._head=null,this._tail=null}get length(){return this._length}get first(){var o;return(o=this._head)===null||o===void 0?void 0:o.value}get last(){var o;return(o=this._tail)===null||o===void 0?void 0:o.value}get empty(){return this._head===null}push(o){const i={value:o,next:null};this._tail===null?this._head=this._tail=i:this._tail.next=this._tail=i,this._length++}shift(){if(this._head===null)return;const{value:o,next:i}=this._head;return this._head=i,i===null&&(this._tail=null),this._length--,o}clear(){this._length=0,this._head=this._tail=null}}return tf.LinkedList=n,tf}var rf={};let y1=1;const NT=new Map;let _1=!1,MT,gq=(n,...t)=>(NT.set(y1,[n,t]),MT(y1),y1++),IT=n=>{NT.delete(n)};function LT(n){if(_1)setTimeout(LT,0,n);else{const t=NT.get(n);if(t){_1=!0;try{t[0](...t[1])}finally{IT(n),_1=!1}}}}function MC(){const n=new MessageChannel;n.port1.onmessage=t=>{LT(t.data)},MT=t=>{n.port2.postMessage(t)}}function IC(){const n=`setImmediate$${Math.random()}$`;window.addEventListener("message",t=>{typeof t.data=="string"&&t.data.startsWith(n)&&LT(+t.data.slice(n.length))}),MT=t=>{window.postMessage(n+t,"*")}}const Lm=typeof self>"u"?typeof global>"u"?void 0:global:self;Lm.setImmediate?(gq=Lm.setImmediate,IT=Lm.clearImmediate):Lm.importScripts?MC():IC();const LC=Object.freeze(Object.defineProperty({__proto__:null,get clearImmediate(){return IT},get setImmediate(){return gq}},Symbol.toStringTag,{value:"Module"})),xC=wL(LC);var A3;function qC(){if(A3)return rf;A3=1,Object.defineProperty(rf,"__esModule",{value:!0}),rf.createTaskScheduler=void 0;const n=xC,t=Promise.resolve(void 0);function o(i=n.setImmediate){const r=typeof queueMicrotask=="function"?queueMicrotask:u=>t.then(u);let e=0,a=null;return u=>{a!==null?a.push(u):++e<100?r(u):(a=[u],i(()=>{for(const c of a)r(c);a=null,e=0}))}}return rf.createTaskScheduler=o,rf}var F3;function ft(){return F3||(F3=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isIterator=n.isIterable=n.isSourceExpression=n.isPromise=n.isEventEmitter=n.isFunction=n.range=n.union=n.fromIterable=n.fromIterator=n.fromArray=n.single=n.empty=n.wrap=n.WrappingIterator=n.ClonedIterator=n.UnionIterator=n.MultiTransformIterator=n.SimpleTransformIterator=n.TransformIterator=n.BufferedIterator=n.MappingIterator=n.DESTINATION=n.identity=n.IntegerIterator=n.ArrayIterator=n.SingletonIterator=n.EmptyIterator=n.AsyncIterator=n.DESTROYED=n.ENDED=n.CLOSED=n.CLOSING=n.OPEN=n.INIT=n.setTaskScheduler=n.getTaskScheduler=n.scheduleTask=n.LinkedList=void 0;const t=nm(),o=NC();Object.defineProperty(n,"LinkedList",{enumerable:!0,get:function(){return o.LinkedList}});let r=qC().createTaskScheduler();function e(D){r(D)}n.scheduleTask=e;function a(){return r}n.getTaskScheduler=a;function u(D){r=D}n.setTaskScheduler=u,n.INIT=1,n.OPEN=2,n.CLOSING=4,n.CLOSED=8,n.ENDED=16,n.DESTROYED=32;class c extends t.EventEmitter{constructor(g=n.OPEN){super(),this._readable=!1,this._state=g,this.on("newListener",s)}_changeState(g,F=!1){const M=g>this._state&&this._state<n.ENDED;return M&&(this._state=g,g===n.ENDED&&(F?r(()=>this.emit("end")):this.emit("end"))),M}read(){return null}forEach(g,F){this.on("data",Ee(g,F))}close(){this._changeState(n.CLOSED)&&this._endAsync()}destroy(g){this.done||this._destroy(g,F=>{g=g||F,g&&this.emit("error",g),this._end(!0)})}_destroy(g,F){F()}_end(g=!1){this._changeState(g?n.DESTROYED:n.ENDED)&&(this._readable=!1,this.removeAllListeners("readable"),this.removeAllListeners("data"),this.removeAllListeners("end"))}_endAsync(){r(()=>this._end())}get readable(){return this._readable}set readable(g){g=!!g&&!this.done,this._readable!==g&&(this._readable=g,g&&r(()=>this.emit("readable")))}get closed(){return this._state>=n.CLOSING}get ended(){return this._state===n.ENDED}get destroyed(){return this._state===n.DESTROYED}get done(){return this._state>=n.ENDED}toString(){const g=this._toStringDetails();return`[${this.constructor.name}${g?` ${g}`:""}]`}_toStringDetails(){return""}toArray(g){const F=[],M=typeof g?.limit=="number"?g.limit:1/0;return this.ended||M<=0?Promise.resolve(F):new Promise((Q,x)=>{const $=()=>Q(F),B=H=>{F.push(H),F.length>=M&&(this.removeListener("error",x),this.removeListener("data",B),this.removeListener("end",$),Q(F))};this.on("error",x),this.on("data",B),this.on("end",$)})}getProperty(g,F){const M=this._properties;if(!F)return M&&M[g];if(M&&g in M)r(()=>F(M[g]));else{let Q;(Q=this._propertyCallbacks)||(this._propertyCallbacks=Q=Object.create(null)),g in Q?Q[g].push(F):Q[g]=[F]}}setProperty(g,F){const M=this._properties||(this._properties=Object.create(null));M[g]=F;const Q=this._propertyCallbacks||{},x=Q[g];if(x){delete Q[g],r(()=>{for(const $ of x)$(F)});for(g in Q)return;delete this._propertyCallbacks}}getProperties(){const g=this._properties,F={};for(const M in g)F[M]=g[M];return F}setProperties(g){for(const F in g)this.setProperty(F,g[F])}copyProperties(g,F){for(const M of F)g.getProperty(M,Q=>this.setProperty(M,Q))}transform(g){return new S(this,g)}map(g,F){return new _(this,Ee(g,F))}filter(g,F){return this.map(function(M){return g.call(F||this,M)?M:null})}uniq(g=b){const F=new Set;return this.filter(function(M){const Q=g.call(this,M);return F.has(Q)?!1:(F.add(Q),!0)})}prepend(g){return this.transform({prepend:g})}append(g){return this.transform({append:g})}surround(g,F){return this.transform({prepend:g,append:F})}skip(g){return this.map(F=>g-- >0?null:F)}take(g){return this.transform({limit:g})}range(g,F){return this.transform({offset:g,limit:Math.max(F-g+1,0)})}clone(){return new V(this)}[Symbol.asyncIterator](){const g=this;let F=null,M=null,Q=null;g.addListener("readable",x),g.addListener("end",x),g.addListener("error",$);function x(){if(F!==null)if(Q!==null)$(Q);else if(g.done)F({done:!0,value:void 0}),F=M=null,B();else{const H=g.read();H!==null&&(F({done:!1,value:H}),F=M=null)}}function $(H){M!==null?(M(H),F=M=Q=null,B()):Q===null&&(Q=H)}function B(){g.removeListener("readable",x),g.removeListener("end",x),g.removeListener("error",$)}return{next(){return new Promise((H,ne)=>{F=H,M=ne,x()})}}}}n.AsyncIterator=c;function s(D){D==="data"&&(this.removeListener("newListener",s),f(this,"readable",l),this.readable&&r(()=>l.call(this)))}function l(){let D;for(;this.listenerCount("data")!==0&&(D=this.read())!==null;)this.emit("data",D);this.listenerCount("data")===0&&!this.done&&(this.removeListener("readable",l),f(this,"newListener",s))}function f(D,g,F){D.listeners(g).includes(F)||D.on(g,F)}class d extends c{constructor(){super(),this._changeState(n.ENDED,!0)}}n.EmptyIterator=d;class h extends c{constructor(g){super(),this._item=g,g===null?this.close():this.readable=!0}read(){const g=this._item;return this._item=null,this.close(),g}_toStringDetails(){return this._item===null?"":`(${this._item})`}}n.SingletonIterator=h;class p extends c{constructor(g=[],{autoStart:F=!0,preserve:M=!0}={}){super();const Q=M||!Array.isArray(g)?[...g]:g;this._index=0,this._sourceStarted=F!==!1,this._truncateThreshold=M?-1:64,this._sourceStarted&&Q.length===0?this.close():this._buffer=Q,this.readable=!0}read(){this._sourceStarted||(this._sourceStarted=!0);let g=null;return this._buffer&&(this._index<this._buffer.length&&(g=this._buffer[this._index++]),this._index===this._buffer.length?(delete this._buffer,this.close()):this._index===this._truncateThreshold&&(this._buffer.splice(0,this._truncateThreshold),this._index=0)),g}_toStringDetails(){return`(${this._buffer?this._buffer.length-this._index:0})`}_destroy(g,F){delete this._buffer,F()}toArray(g={}){if(!this._buffer)return Promise.resolve([]);const{length:F}=this._buffer,M=this._index,Q=typeof g.limit!="number"?F:M+g.limit,x=this._buffer.slice(M,Q);return this._index=Q,Q>=F&&this.close(),Promise.resolve(x)}}n.ArrayIterator=p;class y extends c{constructor({start:g=0,step:F=1,end:M}={}){super(),Number.isFinite(g)&&(g=Math.trunc(g)),this._next=g,Number.isFinite(F)&&(F=Math.trunc(F)),this._step=F;const Q=F>=0,x=Q?1/0:-1/0;Number.isFinite(M)?M=Math.trunc(M):M!==-x&&(M=x),this._last=M,!Number.isFinite(g)||(Q?g>M:g<M)?this.close():this.readable=!0}read(){if(this.closed)return null;const g=this._next,F=this._step,M=this._last,Q=this._next+=F;return(F>=0?Q>M:Q<M)&&this.close(),g}_toStringDetails(){return`(${this._next}...${this._last})`}}n.IntegerIterator=y;function b(D){return D}n.identity=b,n.DESTINATION=Symbol("destination");class _ extends c{constructor(g,F=b,M={}){super(),this._map=F,this._source=T(g),this._destroySource=M.destroySource!==!1,g.done?this.close():(this._source[n.DESTINATION]=this,this._source.on("end",X),this._source.on("error",j),this._source.on("readable",E),this.readable=this._source.readable)}read(){if(!this.done){if(this._source.readable){let g,F;for(;(g=this._source.read())!==null;)if((F=this._map(g))!==null)return F}this.readable=!1,this._source.done&&this.close()}return null}_end(g){this._source.removeListener("end",X),this._source.removeListener("error",j),this._source.removeListener("readable",E),delete this._source[n.DESTINATION],this._destroySource&&this._source.destroy(),super._end(g)}}n.MappingIterator=_;function T(D,g=!1){if(!D||!Re(D.read)||!Re(D.on))throw new TypeError(`Invalid source: ${D}`);if(!g&&D[n.DESTINATION])throw new Error("The source already has a destination");return D}class m extends c{constructor({maxBufferSize:g=4,autoStart:F=!0}={}){super(n.INIT),this._buffer=new o.LinkedList,this._maxBufferSize=4,this._reading=!0,this._pushedCount=0,this.maxBufferSize=g,r(()=>this._init(F)),this._sourceStarted=F!==!1}get maxBufferSize(){return this._maxBufferSize}set maxBufferSize(g){g!==1/0&&(g=Number.isFinite(g)?Math.max(Math.trunc(g),1):4),this._maxBufferSize!==g&&(this._maxBufferSize=g,this._state===n.OPEN&&this._fillBuffer())}_init(g){let F=!1;this._reading=!0,this._begin(()=>{if(F)throw new Error("done callback called multiple times");F=!0,this._reading=!1,this._changeState(n.OPEN),g?this._fillBufferAsync():this.readable=!0})}_begin(g){g()}read(){if(this.done)return null;this._sourceStarted||(this._sourceStarted=!0);const g=this._buffer;let F;return g.empty?(F=null,this.readable=!1):F=g.shift(),!this._reading&&g.length<this._maxBufferSize&&(this.closed?g.empty&&this._endAsync():this._fillBufferAsync()),F}_read(g,F){F()}_push(g){this.done||(this._pushedCount++,this._buffer.push(g),this.readable=!0)}_fillBuffer(){let g;this._reading||(this.closed?this._completeClose():(g=Math.min(this._maxBufferSize-this._buffer.length,128))>0&&(this._pushedCount=0,this._reading=!0,this._read(g,()=>{if(!g)throw new Error("done callback called multiple times");g=0,this._reading=!1,this.closed?this._completeClose():this._pushedCount&&(this.readable=!0,this._buffer.length<this._maxBufferSize/2&&this._fillBufferAsync())})))}_fillBufferAsync(){this._reading||(this._reading=!0,r(()=>{this._reading=!1,this._fillBuffer()}))}close(){this._reading?this._changeState(n.CLOSING):this._completeClose()}_completeClose(){this._changeState(n.CLOSED)&&(this._reading=!0,this._flush(()=>{if(!this._reading)throw new Error("done callback called multiple times");this._reading=!1,this._buffer.empty&&this._endAsync()}))}_destroy(g,F){this._buffer.clear(),F()}_flush(g){g()}_toStringDetails(){const g=this._buffer;return`{${g.empty?"":`next: ${g.first}, `}buffer: ${g.length}}`}}n.BufferedIterator=m;class A extends m{constructor(g,F=g||{}){super(F),this._boundPush=M=>this._push(M),_e(g)||(g=F.source),De(g)?this.source=g:g&&(this._createSource=fe(g)?()=>g:g,this._sourceStarted&&this._loadSourceAsync()),this._optional=!!F.optional,this._destroySource=F.destroySource!==!1}get source(){return Re(this._createSource)&&this._loadSourceAsync(),this._source}set source(g){const F=this._source=this._validateSource(g);F[n.DESTINATION]=this,this.done?this._destroySource&&F.destroy():F.done?this.close():(F.on("end",K),F.on("readable",O),F.on("error",j))}_loadSourceAsync(){Re(this._createSource)&&(Promise.resolve(this._createSource()).then(g=>{delete this._createSource,this.source=g,this._fillBuffer()},g=>this.emit("error",g)),this._createSource=null)}_validateSource(g,F=!1){if(this._source||typeof this._createSource<"u")throw new Error("The source cannot be changed after it has been set");return T(g,F)}_read(g,F){const M=()=>{this._pushedCount<g&&!this.closed?r(()=>this._readAndTransform(M,F)):F()};this._readAndTransform(M,F)}_readAndTransform(g,F){let M;const Q=this.source;!Q||Q.done||(M=Q.read())===null?F():this._optional?this._optionalTransform(M,g):this._transform(M,g,this._boundPush)}_optionalTransform(g,F){const M=this._pushedCount;this._transform(g,()=>{M===this._pushedCount&&this._push(g),F()},this._boundPush)}_transform(g,F,M){M(g),F()}_closeWhenDone(){this.close()}_end(g){const F=this._source;F&&(F.removeListener("end",K),F.removeListener("error",j),F.removeListener("readable",O),delete F[n.DESTINATION],this._destroySource&&F.destroy()),super._end(g)}}n.TransformIterator=A;function E(){this[n.DESTINATION].readable=!0}function j(D){this[n.DESTINATION].emit("error",D)}function X(){this[n.DESTINATION].close()}function K(){this[n.DESTINATION]._closeWhenDone()}function O(){this[n.DESTINATION]._sourceStarted!==!1&&this[n.DESTINATION]._fillBuffer()}class S extends A{constructor(g,F){if(super(g,F),this._offset=0,this._limit=1/0,this._filter=M=>!0,F=F||(_e(g)?null:g),F){const M=Re(F)?F:F.transform,{limit:Q,offset:x,filter:$,map:B,prepend:H,append:ne}=F;x===1/0||Q===-1/0?this._limit=0:(Number.isFinite(x)&&(this._offset=Math.max(Math.trunc(x),0)),Number.isFinite(Q)&&(this._limit=Math.max(Math.trunc(Q),0)),Re($)&&(this._filter=$),Re(B)&&(this._map=B),this._transform=Re(M)?M:null),H&&(this._prepender=De(H)?H:U(H)),ne&&(this._appender=De(ne)?ne:U(ne))}}_read(g,F){const M=()=>this._readAndTransformSimple(g,Q,F);this._readAndTransformSimple(g,Q,F);function Q(){r(M)}}_readAndTransformSimple(g,F,M){let Q;const{source:x}=this;if(!x||x.done){M();return}for(this._limit===0&&this.close();!this.closed&&this._pushedCount<g&&(Q=x.read())!==null;){if(!this._filter(Q)||this._offset!==0&&this._offset--)continue;const $=typeof this._map>"u"?Q:this._map(Q);if($===null)this._optional&&this._push(Q);else if(!Re(this._transform))this._push($);else{this._optional?this._optionalTransform($,F):this._transform($,F,this._boundPush);return}--this._limit===0&&this.close()}M()}_begin(g){this._insert(this._prepender,g),delete this._prepender}_flush(g){this._insert(this._appender,g),delete this._appender}_insert(g,F){const M=x=>this._push(x);!g||g.done?F():(g.on("data",M),g.on("end",Q));function Q(){g.removeListener("data",M),g.removeListener("end",Q),F()}}}n.SimpleTransformIterator=S;class L extends A{constructor(g,F){if(super(g,F),this._transformerQueue=[],F){const M=Re(F)?F:F.multiTransform;M&&(this._createTransformer=M)}}_read(g,F){const M=this._transformerQueue,Q=this._optional;let x,$;for(;(x=M[0])&&x.transformer.done;){Q&&x.item!==null&&(g--,this._push(x.item)),M.shift();const{transformer:H}=x;H.removeListener("end",O),H.removeListener("readable",O),H.removeListener("error",j)}const{source:B}=this;for(;B&&!B.done&&M.length<this.maxBufferSize&&($=B.read(),$!==null);){const H=this._createTransformer($)||new d;H[n.DESTINATION]=this,H.on("end",O),H.on("readable",O),H.on("error",j),M.push({transformer:H,item:$})}if(x=M[0],x){const{transformer:H}=x;for(;g-- >0&&($=H.read())!==null;)this._push($),Q&&(x.item=null)}else B&&B.done&&this.close();F()}_createTransformer(g){return new h(g)}_closeWhenDone(){this._transformerQueue.length||this.close()}_end(g){if(super._end(g),this._destroySource)for(const F of this._transformerQueue)F.transformer.destroy()}}n.MultiTransformIterator=L;class N extends m{constructor(g,F={}){super(F),this._sources=[],this._currentSource=-1;const M=F.autoStart!==!1;if(De(g))g.on("error",Q=>this.emit("error",Q)),this._pending={loading:!1,sources:g},M&&this._loadSources();else if(Array.isArray(g)&&g.length>0)for(const Q of g)this._addSource(Q);else M&&this.close();this._destroySources=F.destroySources!==!1}_loadSources(){const g=this._pending.sources;this._pending.loading=!0,g.done?(delete this._pending,this.close()):(g.on("data",F=>{this._addSource(F),this._fillBufferAsync()}),g.on("end",()=>{delete this._pending,this._fillBuffer()}))}_addSource(g){fe(g)&&(g=ce(g)),g.done||(this._sources.push(g),g[n.DESTINATION]=this,g.on("error",j),g.on("readable",O),g.on("end",I))}_removeEmptySources(){this._sources=this._sources.filter((g,F)=>(g.done&&F<=this._currentSource&&this._currentSource--,!g.done)),this._fillBuffer()}_read(g,F){var M;((M=this._pending)===null||M===void 0?void 0:M.loading)===!1&&this._loadSources();let Q=0,x;for(;Q!==(Q=g);)for(let $=0;$<this._sources.length&&g>0;$++)this._currentSource=(this._currentSource+1)%this._sources.length,(x=this._sources[this._currentSource].read())!==null&&(g--,this._push(x));!this._pending&&this._sources.length===0&&this.close(),F()}_end(g=!1){if(super._end(g),this._destroySources){for(const F of this._sources)F.destroy();this._pending&&(this._pending.sources.destroy(),delete this._pending)}}}n.UnionIterator=N;function I(){this[n.DESTINATION]._removeEmptySources()}class V extends A{constructor(g){super(g,{autoStart:!1}),this._readPosition=0,this._reading=!1,g&&(this.readable=!0)}_init(){}close(){c.prototype.close.call(this)}get source(){return super.source}set source(g){const F=this._source=this._validateSource(g),M=F&&F[n.DESTINATION]||(F[n.DESTINATION]=new re(F));this.done?this._destroySource&&F.destroy():M.endsAt(0)?this.close():(M.register(this),(F._sourceStarted===!1||M.readAt(0)!==null)&&(this.readable=!0));const Q=this._propertyCallbacks;for(const x in Q){const $=Q[x];for(const B of $)this._getSourceProperty(x,B)}}_validateSource(g,F=!1){const M=g&&g[n.DESTINATION];return super._validateSource(g,!M||M instanceof re)}getProperty(g,F){const{source:M}=this,Q=this._properties,x=Q&&g in Q;if(!F)return x?Q&&Q[g]:M&&M.getProperty(g);super.getProperty(g,F),M&&!x&&this._getSourceProperty(g,F)}_getSourceProperty(g,F){this.source.getProperty(g,M=>{(!this._properties||!(g in this._properties))&&F(M)})}getProperties(){const g=this.source?this.source.getProperties():{},F=this._properties;for(const M in F)g[M]=F[M];return g}_toStringDetails(){return`{source: ${this.source?this.source.toString():"none"}}`}read(){this._sourceStarted||(this._sourceStarted=!0);const g=this.source;let F=null;if(!this.done&&g){const M=g[n.DESTINATION];(F=M.readAt(this._readPosition))!==null?this._readPosition++:this.readable=!1,M.endsAt(this._readPosition)&&this.close()}return F}_end(g){const F=this.source,M=F?.[n.DESTINATION];M&&M.unregister(this),m.prototype._end.call(this,g)}}n.ClonedIterator=V;class re{constructor(g){if(this._history=[],this._trackers=new Set,this._source=g,!g.done){const F=()=>{for(const x of this._trackers)x.readable=!0},M=x=>{for(const $ of this._trackers)$.emit("error",x)},Q=()=>{for(const x of this._trackers)x._sourceStarted!==!1&&x._readPosition===this._history.length&&x.close();this._trackers.clear(),g.removeListener("end",Q),g.removeListener("error",M),g.removeListener("readable",F)};g.on("end",Q),g.on("error",M),g.on("readable",F)}}register(g){this._source.done||this._trackers.add(g)}unregister(g){this._trackers.delete(g)}readAt(g){let F=null;return g<this._history.length?F=this._history[g]:!this._source.done&&(F=this._source.read())!==null&&(this._history[g]=F),F}endsAt(g){return this._source.done&&this._history.length===g}}class Y extends c{constructor(g,F){super(),this._source=null,this._destroySource=F?.destroySource!==!1,fe(g)?(this._source=new c,g.then(M=>{this._source=null,this.source=M}).catch(M=>this.emit("error",M))):g&&(this.source=g)}set source(g){let F=g;if(this._source!==null)throw new Error("The source cannot be changed after it has been set");if(q(F)&&(F=F[Symbol.iterator]()),w(F)){let M=F;F=new t.EventEmitter,F.read=()=>{if(M!==null){let Q;for(;!(Q=M.next()).done;)if(Q.value!==null)return Q.value;M=null,this.close()}return null}}else F=T(F);if(this.done){this._destroySource&&Re(F.destroy)&&F.destroy();return}F[n.DESTINATION]=this,F.on("end",X),F.on("error",j),F.on("readable",E),this._source=F,this.readable=F.readable!==!1}read(){if(this._source!==null&&this._source.readable!==!1){const g=this._source.read();if(g!==null)return g;this.readable=!1}return null}_end(g=!1){this._source!==null&&(this._source.removeListener("end",X),this._source.removeListener("error",j),this._source.removeListener("readable",E),delete this._source[n.DESTINATION],this._destroySource&&Re(this._source.destroy)&&this._source.destroy(),this._source=null),super._end(g)}}n.WrappingIterator=Y;function ce(D,g){if(g&&("autoStart"in g||"optional"in g||"source"in g||"maxBufferSize"in g))return D&&!De(D)&&(D=new Y(D)),new A(D,g);if(!D)return ae();if(fe(D))return new Y(D,g);if(D instanceof c)return D;if(Array.isArray(D))return U(D);if(q(D)||w(D)||De(D))return new Y(D,g);throw new TypeError(`Invalid source: ${D}`)}n.wrap=ce;function ae(){return new d}n.empty=ae;function pe(D){return new h(D)}n.single=pe;function U(D){return new p(D)}n.fromArray=U;function le(D){return new Y(D)}n.fromIterator=le;function me(D){return new Y(D)}n.fromIterable=me;function te(D){return new N(D)}n.union=te;function de(D,g,F){return new y({start:D,end:g,step:F})}n.range=de;function Ee(D,g){return g?D.bind(g):D}function Re(D){return typeof D=="function"}n.isFunction=Re;function De(D){return Re(D?.on)}n.isEventEmitter=De;function fe(D){return Re(D?.then)}n.isPromise=fe;function _e(D){return D&&(De(D)||fe(D)||Re(D))}n.isSourceExpression=_e;function q(D){return D&&Symbol.iterator in D}n.isIterable=q;function w(D){return Re(D?.next)}n.isIterator=w})(h1)),h1}var g1={},Mi={},nf={},E3;function BC(){if(E3)return nf;E3=1,Object.defineProperty(nf,"__esModule",{value:!0}),nf.BlankNodeScoped=void 0;let n=class{constructor(o,i){this.termType="BlankNode",this.value=o,this.skolemized=i}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}};return nf.BlankNodeScoped=n,nf}var af={},R3;function CC(){if(R3)return af;R3=1,Object.defineProperty(af,"__esModule",{value:!0}),af.BlankNodeBindingsScoped=void 0;let n=class{constructor(o){this.termType="BlankNode",this.singleBindingsScope=!0,this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}};return af.BlankNodeBindingsScoped=n,af}var j3;function xT(){return j3||(j3=1,(function(n){var t=Mi&&Mi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Mi&&Mi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(BC(),n),o(CC(),n)})(Mi)),Mi}var Ii={},ze={},Li={},of={},D3;function mq(){if(D3)return of;D3=1,Object.defineProperty(of,"__esModule",{value:!0}),of.BlankNode=void 0;class n{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return of.BlankNode=n,of}var uf={},sf={},P3;function bq(){if(P3)return sf;P3=1,Object.defineProperty(sf,"__esModule",{value:!0}),sf.DefaultGraph=void 0;class n{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return sf.DefaultGraph=n,n.INSTANCE=new n,sf}var cf={},lf={},N3;function qT(){if(N3)return lf;N3=1,Object.defineProperty(lf,"__esModule",{value:!0}),lf.NamedNode=void 0;class n{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return lf.NamedNode=n,lf}var M3;function vq(){if(M3)return cf;M3=1,Object.defineProperty(cf,"__esModule",{value:!0}),cf.Literal=void 0;const n=qT();class t{constructor(i,r){this.termType="Literal",this.value=i,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(i){return!!i&&i.termType==="Literal"&&i.value===this.value&&i.language===this.language&&this.datatype.equals(i.datatype)}}return cf.Literal=t,t.RDF_LANGUAGE_STRING=new n.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new n.NamedNode("http://www.w3.org/2001/XMLSchema#string"),cf}var ff={},I3;function Tq(){if(I3)return ff;I3=1,Object.defineProperty(ff,"__esModule",{value:!0}),ff.Quad=void 0;class n{constructor(o,i,r,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=i,this.object=r,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return ff.Quad=n,ff}var df={},L3;function Oq(){if(L3)return df;L3=1,Object.defineProperty(df,"__esModule",{value:!0}),df.Variable=void 0;class n{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return df.Variable=n,df}var x3;function QC(){if(x3)return uf;x3=1,Object.defineProperty(uf,"__esModule",{value:!0}),uf.DataFactory=void 0;const n=mq(),t=bq(),o=vq(),i=qT(),r=Tq(),e=Oq();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new i.NamedNode(s)}blankNode(s){return new n.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,f,d){return new r.Quad(s,l,f,d||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return uf.DataFactory=u,uf}var q3;function UC(){return q3||(q3=1,(function(n){var t=Li&&Li.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Li&&Li.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(mq(),n),o(QC(),n),o(bq(),n),o(vq(),n),o(qT(),n),o(Tq(),n),o(Oq(),n)})(Li)),Li}var B3;function Sq(){if(B3)return ze;B3=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.matchPatternMappings=ze.matchPatternComplete=ze.matchPattern=ze.matchTerm=ze.getValueNestedPath=ze.someTermsNested=ze.someTerms=ze.everyTermsNested=ze.everyTerms=ze.reduceTermsNested=ze.reduceTerms=ze.mapTermsNested=ze.mapTerms=ze.filterQuadTermNamesNested=ze.filterQuadTermNames=ze.filterTermsNested=ze.filterTerms=ze.forEachTermsNested=ze.forEachTerms=ze.collectNamedTerms=ze.getNamedTerms=ze.getTermsNested=ze.getTerms=ze.TRIPLE_TERM_NAMES=ze.QUAD_TERM_NAMES=void 0;const n=UC(),t=new n.DataFactory;ze.QUAD_TERM_NAMES=["subject","predicate","object","graph"],ze.TRIPLE_TERM_NAMES=["subject","predicate","object"];function o(O,S){return S&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}ze.getTerms=o;function i(O,S){const L=[];for(const N of o(O,S))N.termType==="Quad"?i(N,S).forEach(I=>L.push(I)):L.push(N);return L}ze.getTermsNested=i;function r(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}ze.getNamedTerms=r;function e(O,S,L){const N={};return O.forEach(I=>N[I.key]=I.value),S&&(N.subject=N.subject||S("subject"),N.predicate=N.predicate||S("predicate"),N.object=N.object||S("object"),N.graph=N.graph||S("graph")),(L||t).quad(N.subject,N.predicate,N.object,N.graph)}ze.collectNamedTerms=e;function a(O,S){S(O.subject,"subject"),S(O.predicate,"predicate"),S(O.object,"object"),S(O.graph,"graph")}ze.forEachTerms=a;function u(O,S,L=[]){O.subject.termType==="Quad"?u(O.subject,S,[...L,"subject"]):S(O.subject,[...L,"subject"]),O.predicate.termType==="Quad"?u(O.predicate,S,[...L,"predicate"]):S(O.predicate,[...L,"predicate"]),O.object.termType==="Quad"?u(O.object,S,[...L,"object"]):S(O.object,[...L,"object"]),O.graph.termType==="Quad"?u(O.graph,S,[...L,"graph"]):S(O.graph,[...L,"graph"])}ze.forEachTermsNested=u;function c(O,S){const L=[];return S(O.subject,"subject")&&L.push(O.subject),S(O.predicate,"predicate")&&L.push(O.predicate),S(O.object,"object")&&L.push(O.object),S(O.graph,"graph")&&L.push(O.graph),L}ze.filterTerms=c;function s(O,S,L=[]){let N=[];return O.subject.termType==="Quad"?N=[...N,...s(O.subject,S,[...L,"subject"])]:S(O.subject,[...L,"subject"])&&N.push(O.subject),O.predicate.termType==="Quad"?N=[...N,...s(O.predicate,S,[...L,"predicate"])]:S(O.predicate,[...L,"predicate"])&&N.push(O.predicate),O.object.termType==="Quad"?N=[...N,...s(O.object,S,[...L,"object"])]:S(O.object,[...L,"object"])&&N.push(O.object),O.graph.termType==="Quad"?N=[...N,...s(O.graph,S,[...L,"graph"])]:S(O.graph,[...L,"graph"])&&N.push(O.graph),N}ze.filterTermsNested=s;function l(O,S){const L=[];return S(O.subject,"subject")&&L.push("subject"),S(O.predicate,"predicate")&&L.push("predicate"),S(O.object,"object")&&L.push("object"),S(O.graph,"graph")&&L.push("graph"),L}ze.filterQuadTermNames=l;function f(O,S,L=[]){let N=[];const I=[...L,"subject"];O.subject.termType==="Quad"?N=[...N,...f(O.subject,S,I)]:S(O.subject,I)&&N.push(I);const V=[...L,"predicate"];O.predicate.termType==="Quad"?N=[...N,...f(O.predicate,S,V)]:S(O.predicate,V)&&N.push(V);const re=[...L,"object"];O.object.termType==="Quad"?N=[...N,...f(O.object,S,re)]:S(O.object,re)&&N.push(re);const Y=[...L,"graph"];return O.graph.termType==="Quad"?N=[...N,...f(O.graph,S,Y)]:S(O.graph,Y)&&N.push(Y),N}ze.filterQuadTermNamesNested=f;function d(O,S,L){return(L||t).quad(S(O.subject,"subject"),S(O.predicate,"predicate"),S(O.object,"object"),S(O.graph,"graph"))}ze.mapTerms=d;function h(O,S,L,N=[]){return(L||t).quad(O.subject.termType==="Quad"?h(O.subject,S,L,[...N,"subject"]):S(O.subject,[...N,"subject"]),O.predicate.termType==="Quad"?h(O.predicate,S,L,[...N,"predicate"]):S(O.predicate,[...N,"predicate"]),O.object.termType==="Quad"?h(O.object,S,L,[...N,"object"]):S(O.object,[...N,"object"]),O.graph.termType==="Quad"?h(O.graph,S,L,[...N,"graph"]):S(O.graph,[...N,"graph"]))}ze.mapTermsNested=h;function p(O,S,L){let N=L;return N=S(N,O.subject,"subject"),N=S(N,O.predicate,"predicate"),N=S(N,O.object,"object"),S(N,O.graph,"graph")}ze.reduceTerms=p;function y(O,S,L,N=[]){let I=L;return O.subject.termType==="Quad"?I=y(O.subject,S,I,[...N,"subject"]):I=S(I,O.subject,[...N,"subject"]),O.predicate.termType==="Quad"?I=y(O.predicate,S,I,[...N,"predicate"]):I=S(I,O.predicate,[...N,"predicate"]),O.object.termType==="Quad"?I=y(O.object,S,I,[...N,"object"]):I=S(I,O.object,[...N,"object"]),O.graph.termType==="Quad"?I=y(O.graph,S,I,[...N,"graph"]):I=S(I,O.graph,[...N,"graph"]),I}ze.reduceTermsNested=y;function b(O,S){return S(O.subject,"subject")&&S(O.predicate,"predicate")&&S(O.object,"object")&&S(O.graph,"graph")}ze.everyTerms=b;function _(O,S,L=[]){return(O.subject.termType==="Quad"?_(O.subject,S,[...L,"subject"]):S(O.subject,[...L,"subject"]))&&(O.predicate.termType==="Quad"?_(O.predicate,S,[...L,"predicate"]):S(O.predicate,[...L,"predicate"]))&&(O.object.termType==="Quad"?_(O.object,S,[...L,"object"]):S(O.object,[...L,"object"]))&&(O.graph.termType==="Quad"?_(O.graph,S,[...L,"graph"]):S(O.graph,[...L,"graph"]))}ze.everyTermsNested=_;function T(O,S){return S(O.subject,"subject")||S(O.predicate,"predicate")||S(O.object,"object")||S(O.graph,"graph")}ze.someTerms=T;function m(O,S,L=[]){return(O.subject.termType==="Quad"?m(O.subject,S,[...L,"subject"]):S(O.subject,[...L,"subject"]))||(O.predicate.termType==="Quad"?m(O.predicate,S,[...L,"predicate"]):S(O.predicate,[...L,"predicate"]))||(O.object.termType==="Quad"?m(O.object,S,[...L,"object"]):S(O.object,[...L,"object"]))||(O.graph.termType==="Quad"?m(O.graph,S,[...L,"graph"]):S(O.graph,[...L,"graph"]))}ze.someTermsNested=m;function A(O,S){if(S.length===0)return O;if(O.termType==="Quad")return A(O[S[0]],S.slice(1));throw new Error(`Tried to get ${S[0]} from term of type ${O.termType}`)}ze.getValueNestedPath=A;function E(O,S){return!S||S.termType==="Variable"||S.termType==="Quad"&&O.termType==="Quad"&&X(O,S)||S.equals(O)}ze.matchTerm=E;function j(O,S,L,N,I){return E(O.subject,S)&&E(O.predicate,L)&&E(O.object,N)&&E(O.graph,I)}ze.matchPattern=j;function X(O,S){return j(O,S.subject,S.predicate,S.object,S.graph)}ze.matchPatternComplete=X;function K(O,S,L={}){const N={};function I(V,re){return b(V,(Y,ce)=>{var ae,pe;const U=re[ce];switch(Y.termType){case"Variable":return L.skipVarMapping&&U.termType==="Variable"||((pe=(ae=N[Y.value])===null||ae===void 0?void 0:ae.equals(U))!==null&&pe!==void 0?pe:(N[Y.value]=U,!0));case"Quad":return U.termType==="Quad"&&I(Y,U);default:return Y.equals(U)}})}return I(S,O)&&(L.returnMappings?N:!0)}return ze.matchPatternMappings=K,ze}var Mt={},C3;function VC(){if(C3)return Mt;C3=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.getQuads=Mt.getDefaultGraphs=Mt.getVariables=Mt.getLiterals=Mt.getBlankNodes=Mt.getNamedNodes=Mt.getTermsOfType=Mt.uniqTerms=Mt.TERM_TYPES=void 0;const n=mr();Mt.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function t(s){const l={};return s.filter(f=>{const d=(0,n.termToString)(f);return!(d in l)&&(l[d]=!0)})}Mt.uniqTerms=t;function o(s,l){return s.filter(f=>f.termType===l)}Mt.getTermsOfType=o;function i(s){return o(s,"NamedNode")}Mt.getNamedNodes=i;function r(s){return o(s,"BlankNode")}Mt.getBlankNodes=r;function e(s){return o(s,"Literal")}Mt.getLiterals=e;function a(s){return o(s,"Variable")}Mt.getVariables=a;function u(s){return o(s,"DefaultGraph")}Mt.getDefaultGraphs=u;function c(s){return o(s,"Quad")}return Mt.getQuads=c,Mt}var Q3;function Gn(){return Q3||(Q3=1,(function(n){var t=Ii&&Ii.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ii&&Ii.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Sq(),n),o(VC(),n)})(Ii)),Ii}var U3;function BT(){return U3||(U3=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.deskolemizeOperation=n.deskolemizeQuad=n.deskolemizeTermNestedThrowing=n.deskolemizeTerm=n.skolemizeBindingsStream=n.skolemizeQuadStream=n.skolemizeBindings=n.skolemizeQuad=n.skolemizeTerm=n.getSourceId=n.SKOLEM_PREFIX=void 0;const t=xT(),o=Gn(),i=We();n.SKOLEM_PREFIX="urn:comunica_skolem:source_";function r(p,y){let b=p.get(y.referenceValue);return b===void 0&&(b=`${p.size}`,p.set(y.referenceValue,b)),b}n.getSourceId=r;function e(p,y,b){return y.termType==="BlankNode"?new t.BlankNodeScoped(`bc_${b}_${y.value}`,p.namedNode(`${n.SKOLEM_PREFIX}${b}:${y.value}`)):y}n.skolemizeTerm=e;function a(p,y,b){return(0,o.mapTermsNested)(y,_=>e(p,_,b))}n.skolemizeQuad=a;function u(p,y,b){return y.map(_=>_.termType==="Quad"?a(p,_,b):e(p,_,b))}n.skolemizeBindings=u;function c(p,y,b){const _=y.map(m=>a(p,m,b));function T(){y.getProperty("metadata",m=>{_.setProperty("metadata",m),m.state.addInvalidateListener(T)})}return T(),_}n.skolemizeQuadStream=c;function s(p,y,b){const _=y.map(m=>u(p,m,b));function T(){y.getProperty("metadata",m=>{_.setProperty("metadata",m),m.state.addInvalidateListener(T)})}return T(),_}n.skolemizeBindingsStream=s;function l(p,y,b){if(y.termType==="BlankNode"&&"skolemized"in y&&(y=y.skolemized),y.termType==="NamedNode"&&y.value.startsWith(n.SKOLEM_PREFIX)){const _=y.value.indexOf(":",n.SKOLEM_PREFIX.length);if(y.value.slice(n.SKOLEM_PREFIX.length,_)===b){const m=y.value.slice(_+1,y.value.length);return p.blankNode(m)}return null}return y}n.deskolemizeTerm=l;function f(p,y,b){if(y.termType==="Quad")return(0,o.mapTermsNested)(y,T=>{const m=l(p,T,b);if(!m)throw new Error("Skolemized term is not in scope for this source");return m});const _=l(p,y,b);if(_===null)throw new Error("Skolemized term is not in scope for this source");return _}n.deskolemizeTermNestedThrowing=f;function d(p,y,b){return(0,o.mapTermsNested)(y,_=>l(p,_,b)??_)}n.deskolemizeQuad=d;function h(p,y,b){const _=new i.Factory;try{return i.Util.mapOperation(y,{[i.Algebra.types.PATTERN](T,m){return{result:Object.assign(m.createPattern(f(p,T.subject,b),f(p,T.predicate,b),f(p,T.object,b),f(p,T.graph,b)),{metadata:T.metadata}),recurse:!1}},[i.Algebra.types.PATH](T,m){return{result:Object.assign(m.createPath(f(p,T.subject,b),T.predicate,f(p,T.object,b),f(p,T.graph,b)),{metadata:T.metadata}),recurse:!1}}},_)}catch{}}n.deskolemizeOperation=h})(g1)),g1}var V3;function wq(){if(V3)return ef;V3=1,Object.defineProperty(ef,"__esModule",{value:!0}),ef.QuerySourceSkolemized=void 0;const n=Be(),t=br(),o=ft(),i=BT();let r=class{constructor(a,u){this.innerSource=a,this.sourceId=u}async getSelectorShape(a){return this.innerSource.getSelectorShape(a)}queryBindings(a,u,c){const s=u.getSafe(n.KeysInitQuery.dataFactory),l=(0,i.deskolemizeOperation)(s,a,this.sourceId);if(!l){const f=new o.ArrayIterator([],{autoStart:!1});return f.setProperty("metadata",{state:new t.MetadataValidationState,cardinality:{type:"exact",value:0},variables:[]}),f}return(0,i.skolemizeBindingsStream)(s,this.innerSource.queryBindings(l,u,c),this.sourceId)}queryBoolean(a,u){return this.innerSource.queryBoolean(a,u)}queryQuads(a,u){const c=u.getSafe(n.KeysInitQuery.dataFactory),s=(0,i.deskolemizeOperation)(c,a,this.sourceId);if(!s){const l=new o.ArrayIterator([],{autoStart:!1});return l.setProperty("metadata",{state:new t.MetadataValidationState,cardinality:{type:"exact",value:0}}),l}return(0,i.skolemizeQuadStream)(c,this.innerSource.queryQuads(s,u),this.sourceId)}queryVoid(a,u){return this.innerSource.queryVoid(a,u)}get referenceValue(){return this.innerSource.referenceValue}toString(){return`${this.innerSource.toString()}(SkolemID:${this.sourceId})`}};return ef.QuerySourceSkolemized=r,ef}var G3;function GC(){if(G3)return kl;G3=1,Object.defineProperty(kl,"__esModule",{value:!0}),kl.ActorContextPreprocessQuerySourceSkolemize=void 0;const n=rm(),t=Be(),o=Ae(),i=wq(),r=BT();let e=class extends n.ActorContextPreprocess{constructor(u){super(u)}async test(u){return(0,o.passTestVoid)()}async run(u){let c=u.context;if(c.has(t.KeysQueryOperation.querySources)){c.has(t.KeysQuerySourceIdentify.sourceIds)||(c=c.set(t.KeysQuerySourceIdentify.sourceIds,new Map));const s=c.getSafe(t.KeysQuerySourceIdentify.sourceIds);let l=c.getSafe(t.KeysQueryOperation.querySources);l=l.map(f=>({source:new i.QuerySourceSkolemized(f.source,(0,r.getSourceId)(s,f.source)),context:f.context})),c=c.set(t.KeysQueryOperation.querySources,l)}return{context:c}}};return kl.ActorContextPreprocessQuerySourceSkolemize=e,kl}var X3;function Aq(){return X3||(X3=1,(function(n){var t=Ni&&Ni.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ni&&Ni.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(GC(),n),o(wq(),n),o(BT(),n)})(Ni)),Ni}var xi={},pf={},z3;function XC(){if(z3)return pf;z3=1,Object.defineProperty(pf,"__esModule",{value:!0}),pf.MediatorCombinePipeline=void 0;const n=Ae();let t=class extends n.Mediator{constructor(i){super(i)}async mediate(i){let r;try{r=this.publish(i)}catch{return i}if(this.filterFailures){const c=[];for(const s of r)(await s.reply).isPassed()&&c.push(s);r=c}const e=[];if(r=await Promise.all(r.map(async({actor:c,reply:s},l)=>{try{const f=await s,d=f.getOrThrow();return e[l]=f.getSideData(),{actor:c,reply:d}}catch(f){throw new Error(this.constructFailureMessage(i,[f.message]))}})),this.order){const c=s=>{const l=this.field?s[this.field]:s;if(typeof l!="number")throw new TypeError("Cannot order elements that are not numbers.");return l};r=r.sort((s,l)=>(this.order==="increasing"?1:-1)*(c(s.reply)-c(l.reply)))}let a=i,u=0;for(const{actor:c}of r)a={...a,...await c.runObservable(a,e[u++])};return a}mediateWith(){throw new Error("Method not supported.")}};return pf.MediatorCombinePipeline=t,pf}var $3;function H3(){return $3||($3=1,(function(n){var t=xi&&xi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=xi&&xi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(XC(),n)})(xi)),xi}var qi={},hf={},Bi={},yf={},J3;function zC(){if(J3)return yf;J3=1,Object.defineProperty(yf,"__esModule",{value:!0}),yf.ActorHashBindings=void 0;const n=Ae();let t=class extends n.Actor{constructor(i){super(i)}};return yf.ActorHashBindings=t,yf}var K3;function $C(){return K3||(K3=1,(function(n){var t=Bi&&Bi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Bi&&Bi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(zC(),n)})(Bi)),Bi}var W3;function HC(){if(W3)return hf;W3=1,Object.defineProperty(hf,"__esModule",{value:!0}),hf.ActorHashBindingsMurmur=void 0;const n=$C(),t=Ae(),o=jT();let i=class extends n.ActorHashBindings{async test(e){return(0,t.passTestVoid)()}async run(e){return{hashFunction:(a,u)=>{let c=o();for(const s of u)c=c.hash(a.get(s)?.value??"UNDEF");return c.result()}}}};return hf.ActorHashBindingsMurmur=i,hf}var Y3;function JC(){return Y3||(Y3=1,(function(n){var t=qi&&qi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=qi&&qi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(HC(),n)})(qi)),qi}var Ci={},_f={},Z3;function KC(){if(Z3)return _f;Z3=1,Object.defineProperty(_f,"__esModule",{value:!0}),_f.MediatorRace=void 0;const n=Ae();let t=class extends n.Mediator{constructor(i){super(i)}mediateWith(i,r){return new Promise((e,a)=>{const u=[];for(const c of r)c.reply.then(s=>{s.isPassed()?e((0,n.passTestWithSideData)(c.actor,s.getSideData())):(u.push(s.getFailMessage()),u.length===r.length&&e((0,n.failTest)(this.constructFailureMessage(i,u))))}).catch(s=>{a(s)})})}};return _f.MediatorRace=t,_f}var k3;function nn(){return k3||(k3=1,(function(n){var t=Ci&&Ci.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ci&&Ci.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(KC(),n)})(Ci)),Ci}var Qi={},gf={},Ui={},mf={},eA;function WC(){if(eA)return mf;eA=1,Object.defineProperty(mf,"__esModule",{value:!0}),mf.ActorHashQuads=void 0;const n=Ae();let t=class extends n.Actor{constructor(i){super(i)}};return mf.ActorHashQuads=t,mf}var tA;function YC(){return tA||(tA=1,(function(n){var t=Ui&&Ui.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ui&&Ui.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(WC(),n)})(Ui)),Ui}var rA;function ZC(){if(rA)return gf;rA=1,Object.defineProperty(gf,"__esModule",{value:!0}),gf.ActorHashQuadsMurmur=void 0;const n=YC(),t=Ae(),o=jT();let i=class extends n.ActorHashQuads{async test(e){return(0,t.passTestVoid)()}async run(e){return{hashFunction:a=>{const u=o(a.subject.value);return u.hash(a.predicate.value),u.hash(a.object.value),u.hash(a.graph.value),u.result()}}}};return gf.ActorHashQuadsMurmur=i,gf}var nA;function kC(){return nA||(nA=1,(function(n){var t=Qi&&Qi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Qi&&Qi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(ZC(),n)})(Qi)),Qi}var Vi={},bf={},Gi={},vf={},iA;function eQ(){if(iA)return vf;iA=1,Object.defineProperty(vf,"__esModule",{value:!0}),vf.ActorOptimizeQueryOperation=void 0;const n=Ae();let t=class extends n.Actor{constructor(i){super(i)}};return vf.ActorOptimizeQueryOperation=t,vf}var aA;function jr(){return aA||(aA=1,(function(n){var t=Gi&&Gi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Gi&&Gi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(eQ(),n)})(Gi)),Gi}var oA;function tQ(){if(oA)return bf;oA=1,Object.defineProperty(bf,"__esModule",{value:!0}),bf.ActorOptimizeQueryOperationRewriteCopy=void 0;const n=jr(),t=Be(),o=Ae(),i=We();let r=class extends n.ActorOptimizeQueryOperation{constructor(a){super(a)}async test(a){return(0,o.passTestVoid)()}async run(a){const u=a.context.getSafe(t.KeysInitQuery.dataFactory),c=new i.Factory(u);return{operation:i.Util.mapOperation(a.operation,{[i.Algebra.types.COPY](l,f){let d;return typeof l.destination=="string"&&typeof l.source=="string"&&l.destination===l.source||typeof l.destination!="string"&&typeof l.source!="string"&&l.destination.equals(l.source)?d=f.createCompositeUpdate([]):d=f.createCompositeUpdate([f.createDrop(l.destination,!0),f.createAdd(l.source,l.destination,l.silent)]),{result:d,recurse:!1}}},c),context:a.context}}};return bf.ActorOptimizeQueryOperationRewriteCopy=r,bf}var uA;function rQ(){return uA||(uA=1,(function(n){var t=Vi&&Vi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Vi&&Vi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(tQ(),n)})(Vi)),Vi}var Xi={},Tf={},sA;function nQ(){if(sA)return Tf;sA=1,Object.defineProperty(Tf,"__esModule",{value:!0}),Tf.ActorOptimizeQueryOperationRewriteMove=void 0;const n=jr(),t=Be(),o=Ae(),i=We();let r=class extends n.ActorOptimizeQueryOperation{constructor(a){super(a)}async test(a){return(0,o.passTestVoid)()}async run(a){const u=a.context.getSafe(t.KeysInitQuery.dataFactory),c=new i.Factory(u);return{operation:i.Util.mapOperation(a.operation,{[i.Algebra.types.MOVE](l,f){let d;if(typeof l.destination=="string"&&typeof l.source=="string"&&l.destination===l.source||typeof l.destination!="string"&&typeof l.source!="string"&&l.destination.equals(l.source))d=f.createCompositeUpdate([]);else{const h=[f.createDrop(l.destination,!0),f.createAdd(l.source,l.destination,l.silent),f.createDrop(l.source)];d=f.createCompositeUpdate(h)}return{result:d,recurse:!1}}},c),context:a.context}}};return Tf.ActorOptimizeQueryOperationRewriteMove=r,Tf}var cA;function iQ(){return cA||(cA=1,(function(n){var t=Xi&&Xi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Xi&&Xi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(nQ(),n)})(Xi)),Xi}var zi={},Of={},$i={},Sf={},lA;function Fq(){if(lA)return Sf;lA=1,Object.defineProperty(Sf,"__esModule",{value:!0}),Sf.BlankNode=void 0;class n{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return Sf.BlankNode=n,Sf}var wf={},Af={},fA;function Eq(){if(fA)return Af;fA=1,Object.defineProperty(Af,"__esModule",{value:!0}),Af.DefaultGraph=void 0;class n{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return Af.DefaultGraph=n,n.INSTANCE=new n,Af}var Ff={},Ef={},dA;function CT(){if(dA)return Ef;dA=1,Object.defineProperty(Ef,"__esModule",{value:!0}),Ef.NamedNode=void 0;class n{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return Ef.NamedNode=n,Ef}var pA;function Rq(){if(pA)return Ff;pA=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.Literal=void 0;const n=CT();class t{constructor(i,r){this.termType="Literal",this.value=i,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(i){return!!i&&i.termType==="Literal"&&i.value===this.value&&i.language===this.language&&this.datatype.equals(i.datatype)}}return Ff.Literal=t,t.RDF_LANGUAGE_STRING=new n.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new n.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Ff}var Rf={},hA;function jq(){if(hA)return Rf;hA=1,Object.defineProperty(Rf,"__esModule",{value:!0}),Rf.Quad=void 0;class n{constructor(o,i,r,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=i,this.object=r,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return Rf.Quad=n,Rf}var jf={},yA;function Dq(){if(yA)return jf;yA=1,Object.defineProperty(jf,"__esModule",{value:!0}),jf.Variable=void 0;class n{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return jf.Variable=n,jf}var _A;function aQ(){if(_A)return wf;_A=1,Object.defineProperty(wf,"__esModule",{value:!0}),wf.DataFactory=void 0;const n=Fq(),t=Eq(),o=Rq(),i=CT(),r=jq(),e=Dq();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new i.NamedNode(s)}blankNode(s){return new n.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,f,d){return new r.Quad(s,l,f,d||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return wf.DataFactory=u,wf}var gA;function oQ(){return gA||(gA=1,(function(n){var t=$i&&$i.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=$i&&$i.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Fq(),n),o(aQ(),n),o(Eq(),n),o(Rq(),n),o(CT(),n),o(jq(),n),o(Dq(),n)})($i)),$i}var mA;function uQ(){if(mA)return Of;mA=1,Object.defineProperty(Of,"__esModule",{value:!0}),Of.ActorOptimizeQueryOperationRewriteAdd=void 0;const n=jr(),t=Be(),o=Ae(),i=oQ(),r=We(),e=new i.DataFactory;let a=class extends n.ActorOptimizeQueryOperation{constructor(c){super(c)}async test(c){return(0,o.passTestVoid)()}async run(c){const s=c.context.getSafe(t.KeysInitQuery.dataFactory),l=new r.Factory(s);return{operation:r.Util.mapOperation(c.operation,{[r.Algebra.types.ADD](d,h){const p=d.destination==="DEFAULT"?e.defaultGraph():d.destination,y=d.source==="DEFAULT"?e.defaultGraph():d.source;return{result:h.createDeleteInsert(void 0,[h.createPattern(e.variable("s"),e.variable("p"),e.variable("o"),p)],h.createPattern(e.variable("s"),e.variable("p"),e.variable("o"),y)),recurse:!1}}},l),context:c.context}}};return Of.ActorOptimizeQueryOperationRewriteAdd=a,Of}var bA;function sQ(){return bA||(bA=1,(function(n){var t=zi&&zi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=zi&&zi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(uQ(),n)})(zi)),zi}var Hi={},Df={},Ji={},or={},Ki={},Pf={},vA;function Pq(){if(vA)return Pf;vA=1,Object.defineProperty(Pf,"__esModule",{value:!0}),Pf.BlankNode=void 0;class n{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return Pf.BlankNode=n,Pf}var Nf={},Mf={},TA;function Nq(){if(TA)return Mf;TA=1,Object.defineProperty(Mf,"__esModule",{value:!0}),Mf.DefaultGraph=void 0;class n{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return Mf.DefaultGraph=n,n.INSTANCE=new n,Mf}var If={},Lf={},OA;function QT(){if(OA)return Lf;OA=1,Object.defineProperty(Lf,"__esModule",{value:!0}),Lf.NamedNode=void 0;class n{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return Lf.NamedNode=n,Lf}var SA;function Mq(){if(SA)return If;SA=1,Object.defineProperty(If,"__esModule",{value:!0}),If.Literal=void 0;const n=QT();class t{constructor(i,r){this.termType="Literal",this.value=i,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(i){return!!i&&i.termType==="Literal"&&i.value===this.value&&i.language===this.language&&this.datatype.equals(i.datatype)}}return If.Literal=t,t.RDF_LANGUAGE_STRING=new n.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new n.NamedNode("http://www.w3.org/2001/XMLSchema#string"),If}var xf={},wA;function Iq(){if(wA)return xf;wA=1,Object.defineProperty(xf,"__esModule",{value:!0}),xf.Quad=void 0;class n{constructor(o,i,r,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=i,this.object=r,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return xf.Quad=n,xf}var qf={},AA;function Lq(){if(AA)return qf;AA=1,Object.defineProperty(qf,"__esModule",{value:!0}),qf.Variable=void 0;class n{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return qf.Variable=n,qf}var FA;function cQ(){if(FA)return Nf;FA=1,Object.defineProperty(Nf,"__esModule",{value:!0}),Nf.DataFactory=void 0;const n=Pq(),t=Nq(),o=Mq(),i=QT(),r=Iq(),e=Lq();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new i.NamedNode(s)}blankNode(s){return new n.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,f,d){return new r.Quad(s,l,f,d||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Nf.DataFactory=u,Nf}var EA;function lQ(){return EA||(EA=1,(function(n){var t=Ki&&Ki.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ki&&Ki.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Pq(),n),o(cQ(),n),o(Nq(),n),o(Mq(),n),o(QT(),n),o(Iq(),n),o(Lq(),n)})(Ki)),Ki}var RA;function fQ(){if(RA)return or;RA=1,Object.defineProperty(or,"__esModule",{value:!0}),or.estimateNpsCardinality=or.estimateJoinCardinality=or.estimateUnionCardinality=or.estimateSliceCardinality=or.estimateMinusCardinality=or.estimateCardinality=void 0;const n=lQ(),t=We(),o=new n.DataFactory,i=new t.Factory(o);function r(l,f){const d=f.getCardinality(l);if(d)return d;switch(l.type){case t.Algebra.types.ASK:return{type:"exact",value:1,dataset:f.uri};case t.Algebra.types.LOAD:case t.Algebra.types.DELETE_INSERT:case t.Algebra.types.ADD:case t.Algebra.types.COMPOSITE_UPDATE:case t.Algebra.types.CLEAR:case t.Algebra.types.NOP:case t.Algebra.types.DROP:case t.Algebra.types.CREATE:case t.Algebra.types.MOVE:case t.Algebra.types.COPY:return{type:"exact",value:0,dataset:f.uri};case t.Algebra.types.PROJECT:case t.Algebra.types.FILTER:case t.Algebra.types.ORDER_BY:case t.Algebra.types.GROUP:case t.Algebra.types.CONSTRUCT:case t.Algebra.types.DISTINCT:case t.Algebra.types.REDUCED:case t.Algebra.types.EXTEND:case t.Algebra.types.FROM:case t.Algebra.types.GRAPH:return r(l.input,f);case t.Algebra.types.ZERO_OR_ONE_PATH:case t.Algebra.types.ZERO_OR_MORE_PATH:case t.Algebra.types.ONE_OR_MORE_PATH:case t.Algebra.types.INV:return r(l.path,f);case t.Algebra.types.PATH:return r(l.predicate,f);case t.Algebra.types.NPS:return s(l,f);case t.Algebra.types.LINK:return r(i.createPattern(o.variable("s"),l.iri,o.variable("o")),f);case t.Algebra.types.UNION:case t.Algebra.types.SEQ:case t.Algebra.types.ALT:return u(l.input,f);case t.Algebra.types.BGP:return c(l.patterns,f);case t.Algebra.types.JOIN:case t.Algebra.types.LEFT_JOIN:return c(l.input,f);case t.Algebra.types.SLICE:return a(l,f);case t.Algebra.types.MINUS:return e(l,f);case t.Algebra.types.VALUES:return{type:"exact",value:l.bindings.length,dataset:f.uri};case t.Algebra.types.SERVICE:case t.Algebra.types.DESCRIBE:case t.Algebra.types.EXPRESSION:case t.Algebra.types.PATTERN:return{type:"estimate",value:Number.POSITIVE_INFINITY,dataset:f.uri}}}or.estimateCardinality=r;function e(l,f){const d=r(l.input[0],f),h=r(l.input[1],f);return{type:"estimate",value:Math.max(d.value-h.value,0),dataset:f.uri}}or.estimateMinusCardinality=e;function a(l,f){const d=r(l.input,f);return d.value>0&&(d.value=Math.max(d.value-l.start,0),l.length!==void 0&&(d.value=Math.min(d.value,l.length))),d}or.estimateSliceCardinality=a;function u(l,f){const d={type:"exact",value:0,dataset:f.uri};for(const h of l){const p=r(h,f);p.type==="estimate"&&d.type==="exact"&&(d.type=p.type),d.value+=p.value}return d}or.estimateUnionCardinality=u;function c(l,f){const d=[];for(const p of l){const y=t.Util.inScopeVariables(p).map(_=>_.value),b=d.find(_=>y.some(T=>_.vars.has(T)));if(b){b.ops.push(p);for(const _ of y)b.vars.add(_)}else d.push({ops:[p],vars:new Set(y)})}return{type:"estimate",value:d.map(p=>Math.min(...p.ops.map(y=>r(y,f).value))).reduce((p,y)=>p*y,1),dataset:f.uri}}or.estimateJoinCardinality=c;function s(l,f){const d=i.createSeq([...l.iris].reverse().map(b=>i.createLink(b))),h=r(d,f),p=i.createPattern(o.variable("s"),o.variable("p"),o.variable("o")),y=r(p,f);return{type:"estimate",value:Math.max(0,y.value-h.value),dataset:f.uri}}return or.estimateNpsCardinality=s,or}var Bf={},jA;function dQ(){if(jA)return Bf;jA=1,Object.defineProperty(Bf,"__esModule",{value:!0}),Bf.getExpressionVariables=void 0;const n=Gn(),t=We();function o(i){switch(i.expressionType){case t.Algebra.expressionTypes.AGGREGATE:case t.Algebra.expressionTypes.WILDCARD:throw new Error(`Getting expression variables is not supported for ${i.expressionType}`);case t.Algebra.expressionTypes.EXISTENCE:return t.Util.inScopeVariables(i.input);case t.Algebra.expressionTypes.NAMED:return[];case t.Algebra.expressionTypes.OPERATOR:return(0,n.uniqTerms)(i.args.flatMap(r=>o(r)));case t.Algebra.expressionTypes.TERM:return i.term.termType==="Variable"?[i.term]:[]}}return Bf.getExpressionVariables=o,Bf}var Cf={},DA;function pQ(){if(DA)return Cf;DA=1,Object.defineProperty(Cf,"__esModule",{value:!0}),Cf.doesShapeAcceptOperation=void 0;const n=We();function t(u,c,s){return o(u,u,c,s)}Cf.doesShapeAcceptOperation=t;function o(u,c,s,l){if(c.type==="conjunction")return c.children.every(d=>o(u,d,s,l));if(c.type==="disjunction")return c.children.some(d=>o(u,d,s,l));if(c.type==="negation")return!o(c.child,c.child,s,l);if(c.type==="arity")return o(u,c.child,s,l);if((l?.joinBindings&&!c.joinBindings)??(l?.filterBindings&&!c.filterBindings))return!1;const f=c.operation;switch(f.operationType){case"type":return f.type===n.Algebra.types.EXPRESSION&&a(s)&&!("extensionFunctions"in f&&f.extensionFunctions?.includes(s.name.value))||!i(u,c.children,s,l)&&!r(u,s,l)?!1:f.type===s.type;case"pattern":return!i(u,c.children,s,l)&&!r(u,s,l)?!1:f.pattern.type===s.type;case"wildcard":{if(l?.wildcardAcceptAllExtensionFunctions)return!0;if(a(s))return!1;let d=!1;return n.Util.recurseOperation(s,{[n.Algebra.types.EXPRESSION](h){return a(h)&&!t(u,h,l)?(d=!0,!1):!0}}),!d}}}function i(u,c,s,l){if(a(s)||a(s.expression))return!1;if(c){const f=s.input?Array.isArray(s.input)?s.input:[s.input]:s.patterns??[];for(const[d,h]of c.entries())if(!f[d]||!o(u,h,f[d],l))return!1;return!0}return!1}function r(u,c,s){return c.input&&!(Array.isArray(c.input)?c.input:[c.input]).every(f=>o(u,u,f,s))||c.expression&&a(c.expression)&&!o(u,u,c.expression,s)?!1:!(c.patterns&&!c.patterns.every(l=>o(u,u,l,s)))}function e(u){return/^https?:\/\/www\.w3\.org\//u.test(u)}function a(u){return u&&u.type===n.Algebra.types.EXPRESSION&&u.expressionType===n.Algebra.expressionTypes.NAMED&&!e(u.name.value)}return Cf}var It={},PA;function hQ(){if(PA)return It;PA=1,Object.defineProperty(It,"__esModule",{value:!0}),It.removeOperationSource=It.assignOperationSource=It.getOperationSource=It.testReadOnly=It.validateQueryOutput=It.getSafeVoid=It.getSafeBoolean=It.getSafeQuads=It.getSafeBindings=void 0;const n=Be(),t=Ae();function o(f){return a(f,"bindings"),f}It.getSafeBindings=o;function i(f){return a(f,"quads"),f}It.getSafeQuads=i;function r(f){return a(f,"boolean"),f}It.getSafeBoolean=r;function e(f){return a(f,"void"),f}It.getSafeVoid=e;function a(f,d){if(f.type!==d)throw new Error(`Invalid query output type: Expected '${d}' but got '${f.type}'`)}It.validateQueryOutput=a;function u(f){return f.get(n.KeysQueryOperation.readOnly)?(0,t.failTest)("Attempted a write operation in read-only mode"):(0,t.passTestVoid)()}It.testReadOnly=u;function c(f){return f.metadata?.scopedSource}It.getOperationSource=c;function s(f,d){return f={...f},f.metadata=f.metadata?{...f.metadata}:{},f.metadata.scopedSource=d,f}It.assignOperationSource=s;function l(f){delete f.metadata?.scopedSource,f.metadata&&Object.keys(f.metadata).length===0&&delete f.metadata}return It.removeOperationSource=l,It}var Wi={},NA;function yQ(){if(NA)return Wi;NA=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.materializeOperation=Wi.materializeTerm=void 0;const n=mr(),t=Gn(),o=We();function i(a,u){if(a.termType==="Variable"){const c=u.get(a);if(c)return c}return a.termType==="Quad"&&(0,t.someTermsNested)(a,c=>c.termType==="Variable")?(0,t.mapTermsNested)(a,c=>i(c,u)):a}Wi.materializeTerm=i;function r(a,u,c,s,l={}){return l={strictTargetVariables:"strictTargetVariables"in l?l.strictTargetVariables:!1,bindFilter:"bindFilter"in l?l.bindFilter:!0,originalBindings:"originalBindings"in l?l.originalBindings:u},o.Util.mapOperation(a,{path(f,d){return{recurse:!1,result:Object.assign(d.createPath(i(f.subject,u),f.predicate,i(f.object,u),i(f.graph,u)),{metadata:f.metadata})}},pattern(f,d){return{recurse:!1,result:Object.assign(d.createPattern(i(f.subject,u),i(f.predicate,u),i(f.object,u),i(f.graph,u)),{metadata:f.metadata})}},join(f,d){return{recurse:!1,result:d.createJoin(f.input.map(h=>r(h,u,c,s,l)),f.input.every(h=>!h.metadata))}},extend(f){if(u.has(f.variable)){if(l.strictTargetVariables)throw new Error(`Tried to bind variable ${(0,n.termToString)(f.variable)} in a BIND operator.`);return{recurse:!0,result:r(f.input,u,c,s,l)}}return{recurse:!0,result:f}},group(f,d){if(l.strictTargetVariables){for(const p of f.variables)if(u.has(p))throw new Error(`Tried to bind variable ${(0,n.termToString)(p)} in a GROUP BY operator.`);return{recurse:!0,result:f}}const h=f.variables.filter(p=>!u.has(p));return{recurse:!0,result:d.createGroup(f.input,h,f.aggregates)}},filter(f,d){const h=l.originalBindings;if(f.expression.expressionType!=="operator"||h.size===0)return{recurse:!1,result:f};const p=e(d,h),y=r(f.expression,u,c,s,l),b=d.createJoin([...p,r(f.input,u,c,s,l)]);return{recurse:!1,result:d.createFilter(b,y)}},project(f,d){const h=e(d,l.originalBindings,f.variables);let p=r(f.input,u,c,s,l);return h.length>0&&(p=d.createJoin([...h,p])),{recurse:!1,result:d.createProject(p,f.variables)}},values(f,d){if(l.strictTargetVariables){for(const h of f.variables)if(u.has(h))throw new Error(`Tried to bind variable ${(0,n.termToString)(h)} in a VALUES operator.`)}else{const h=f.variables.filter(y=>!u.has(y)),p=f.bindings.map(y=>{const b={...y};let _=!0;return u.forEach((T,m)=>{const A=(0,n.termToString)(m);A in b&&(T.equals(b[A])||(_=!1),delete b[A])}),_?b:void 0}).filter(Boolean);return{recurse:!0,result:d.createValues(h,p)}}return{recurse:!1,result:f}},expression(f,d){if(!l.bindFilter)return{recurse:!1,result:f};if(f.expressionType==="term")return{recurse:!1,result:d.createTermExpression(i(f.term,u))};if(f.expressionType==="operator")return f.operator==="bound"&&f.args.length===1&&f.args[0].expressionType==="term"&&[...u.keys()].some(h=>f.args[0].term.equals(h))?{recurse:!1,result:d.createTermExpression(d.dataFactory.literal("true",d.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#boolean")))}:{recurse:!0,result:f};if(f.expressionType==="aggregate"&&"variable"in f&&u.has(f.variable)){if(l.strictTargetVariables)throw new Error(`Tried to bind ${(0,n.termToString)(f.variable)} in a ${f.aggregator} aggregate.`);return{recurse:!0,result:f}}return{recurse:!0,result:f}}},c)}Wi.materializeOperation=r;function e(a,u,c){const s=[];for(const[l,f]of u)if(!c||c.some(d=>d.equals(l))){const d={[(0,n.termToString)(l)]:f};s.push(a.createValues([l],[d]))}return s}return Wi}var MA;function ke(){return MA||(MA=1,(function(n){var t=Ji&&Ji.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ji&&Ji.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(fQ(),n),o(dQ(),n),o(pQ(),n),o(hQ(),n),o(yQ(),n)})(Ji)),Ji}var IA;function _Q(){if(IA)return Df;IA=1,Object.defineProperty(Df,"__esModule",{value:!0}),Df.ActorOptimizeQueryOperationGroupSources=void 0;const n=jr(),t=Be(),o=Ae(),i=ke(),r=We();let e=class extends n.ActorOptimizeQueryOperation{constructor(u){super(u)}async test(u){return(0,i.getOperationSource)(u.operation)?(0,o.failTest)(`Actor ${this.name} does not work with top-level operation sources.`):(0,o.passTestVoid)()}async run(u){return{operation:await this.groupOperation(u.operation,u.context),context:u.context}}async groupOperation(u,c){const s=c.getSafe(t.KeysInitQuery.dataFactory),l=new r.Factory(s);if((0,i.getOperationSource)(u)??!("input"in u))return u;if(!Array.isArray(u.input)){const p=await this.groupOperation(u.input,c);if(p.metadata?.scopedSource){const y=(0,i.getOperationSource)(p);u=await this.moveSourceAnnotationUpwardsIfPossible(u,[p],y,c)}return{...u,input:p}}const f=await Promise.all(u.input.map(p=>this.groupOperation(p,c))),d=this.clusterOperationsWithEqualSources(f);if(d.length===1){const p=d[0],y=(0,i.getOperationSource)(d[0][0]);return{...await this.moveSourceAnnotationUpwardsIfPossible(u,p,y,c),input:p}}if(d.length===f.length)return{...u,input:f};let h;switch(u.type){case r.Algebra.types.JOIN:h=l.createJoin.bind(l);break;case r.Algebra.types.UNION:h=l.createUnion.bind(l);break;case r.Algebra.types.ALT:h=l.createAlt.bind(l);break;case r.Algebra.types.SEQ:h=l.createSeq.bind(l);break;default:throw new Error(`Unsupported operation '${u.type}' detected while grouping sources`)}return await this.groupOperationMulti(d,h,c)}async groupOperationMulti(u,c,s){let l=!0;const f=await Promise.all(u.map(async d=>{const h=(0,i.getOperationSource)(d[0]),p=await this.moveSourceAnnotationUpwardsIfPossible(c(d,!0),d,h,s);return(0,i.getOperationSource)(p)&&(l=!1),p}));return c(f,l)}clusterOperationsWithEqualSources(u){const c=new Map,s=[];for(const f of u){const d=(0,i.getOperationSource)(f);d?(c.has(d)||c.set(d,[]),c.get(d).push(f)):s.push(f)}const l=[];s.length>0&&l.push(s);for(const[f,d]of c.entries())l.push(d.map(h=>(0,i.assignOperationSource)(h,f)));return l}async moveSourceAnnotationUpwardsIfPossible(u,c,s,l){if(s&&this.isPossibleToMoveSourceAnnotationUpwards(u,await s.source.getSelectorShape(l),l)){this.logDebug(l,`Hoist ${c.length} source-specific operations into a single ${u.type} operation for ${s.source.toString()}`),u=(0,i.assignOperationSource)(u,s);for(const f of c)(0,i.removeOperationSource)(f)}return u}isPossibleToMoveSourceAnnotationUpwards(u,c,s){const l=s.get(t.KeysInitQuery.extensionFunctionsAlwaysPushdown);if((0,i.doesShapeAcceptOperation)(c,u,{wildcardAcceptAllExtensionFunctions:l})){const f=s.get(t.KeysInitQuery.extensionFunctions),d=u.expression;return!f||d?.expressionType!==r.Algebra.expressionTypes.NAMED||!(d?.name.value in f)||(0,i.doesShapeAcceptOperation)(c,d,{wildcardAcceptAllExtensionFunctions:l})}return!1}};return Df.ActorOptimizeQueryOperationGroupSources=e,Df}var LA;function gQ(){return LA||(LA=1,(function(n){var t=Hi&&Hi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Hi&&Hi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(_Q(),n)})(Hi)),Hi}var Yi={},Qf={},xA;function mQ(){if(xA)return Qf;xA=1,Object.defineProperty(Qf,"__esModule",{value:!0}),Qf.ActorOptimizeQueryOperationConstructDistinct=void 0;const n=jr(),t=qx(),o=Ae(),i=We();let r=class extends n.ActorOptimizeQueryOperation{constructor(a){super(a)}async test(a){return a.context.has(t.KeysInitQuery.distinctConstruct)?(0,o.passTestVoid)():(0,o.failTest)(`${this.name} was not enabled by the query.`)}async run(a){return{operation:i.Util.mapOperation(a.operation,{construct(c,s){return{recurse:!1,result:s.createDistinct(s.createConstruct(c.input,c.template))}}}),context:a.context.delete(t.KeysInitQuery.distinctConstruct)}}};return Qf.ActorOptimizeQueryOperationConstructDistinct=r,Qf}var qA;function bQ(){return qA||(qA=1,(function(n){var t=Yi&&Yi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Yi&&Yi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(mQ(),n)})(Yi)),Yi}var Zi={},Uf={},ki={},Vf={},BA;function vQ(){if(BA)return Vf;BA=1,Object.defineProperty(Vf,"__esModule",{value:!0}),Vf.ActorRdfJoinEntriesSort=void 0;const n=Ae();let t=class extends n.Actor{constructor(i){super(i)}};return Vf.ActorRdfJoinEntriesSort=t,Vf}var CA;function TQ(){return CA||(CA=1,(function(n){var t=ki&&ki.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ki&&ki.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(vQ(),n)})(ki)),ki}var QA;function OQ(){if(QA)return Uf;QA=1,Object.defineProperty(Uf,"__esModule",{value:!0}),Uf.ActorRdfJoinEntriesSortCardinality=void 0;const n=TQ(),t=Ae();let o=class extends n.ActorRdfJoinEntriesSort{constructor(r){super(r)}async test(r){return(0,t.passTest)({accuracy:r.entries.length===0?1:r.entries.reduce((e,a)=>e+(Number.isFinite(a.metadata.cardinality.value)?1:0),0)/r.entries.length})}async run(r){return{entries:[...r.entries].sort((a,u)=>a.metadata.cardinality.value-u.metadata.cardinality.value)}}};return Uf.ActorRdfJoinEntriesSortCardinality=o,Uf}var UA;function SQ(){return UA||(UA=1,(function(n){var t=Zi&&Zi.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Zi&&Zi.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(OQ(),n)})(Zi)),Zi}var ea={},Gf={},VA;function wQ(){if(VA)return Gf;VA=1,Object.defineProperty(Gf,"__esModule",{value:!0}),Gf.MediatorNumber=void 0;const n=Ae();let t=class extends n.Mediator{constructor(i){super(i),this.indexPicker=this.createIndexPicker()}createIndexPicker(){switch(this.type){case"min":return i=>i.reduce((r,e,a)=>{const u=this.getOrDefault(e[this.field],Number.POSITIVE_INFINITY);return u!==null&&(Number.isNaN(r[0])||r[0]>u)?[u,a]:r},[Number.NaN,-1])[1];case"max":return i=>i.reduce((r,e,a)=>{const u=this.getOrDefault(e[this.field],Number.NEGATIVE_INFINITY);return u!==null&&(Number.isNaN(r[0])||r[0]<u)?[u,a]:r},[Number.NaN,-1])[1];default:throw new Error(`No valid "type" value was given, must be either 'min' or 'max', but got: ${this.type}`)}}getOrDefault(i,r){return i===void 0?r:i}async mediateWith(i,r){let e=await Promise.all(r.map(({reply:l})=>l));const a=[];if(this.ignoreFailures){const l={};l[this.field]=null,e=e.map(f=>f.isFailed()?(a.push(f.getFailMessage()),(0,n.passTestWithSideData)(l,void 0)):f)}const u=[],c=e.map((l,f)=>{const d=l.getOrThrow();return u[f]=l.getSideData(),d}),s=this.indexPicker(c);return s<0?(0,n.failTest)(this.constructFailureMessage(i,a)):(0,n.passTestWithSideData)(r[s].actor,u[s])}};return Gf.MediatorNumber=t,Gf}var GA;function m1(){return GA||(GA=1,(function(n){var t=ea&&ea.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ea&&ea.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(wQ(),n)})(ea)),ea}var ta={},ra={},na={},Xf={},XA;function AQ(){if(XA)return Xf;XA=1,Object.defineProperty(Xf,"__esModule",{value:!0}),Xf.ActorRdfJoinSelectivity=void 0;const n=Ae();let t=class extends n.Actor{constructor(i){super(i)}};return Xf.ActorRdfJoinSelectivity=t,Xf}var zA;function FQ(){return zA||(zA=1,(function(n){var t=na&&na.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=na&&na.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(AQ(),n)})(na)),na}var $A;function EQ(){if($A)return ra;$A=1,Object.defineProperty(ra,"__esModule",{value:!0}),ra.JoinTypes=ra.ActorRdfJoinSelectivityVariableCounting=void 0;const n=FQ(),t=Ae(),o=We();let i=class As extends n.ActorRdfJoinSelectivity{constructor(a){super(a)}async test(a){return(0,t.passTest)({accuracy:.5})}static getPatternCost(a){let u=1;return a.subject.termType==="Variable"&&(u+=4),(a.predicate.termType==="Variable"||a.type===o.Algebra.types.PATH)&&(u+=1),a.object.termType==="Variable"&&(u+=2),a.graph.termType==="Variable"&&(u+=1),u/9}static getJoinTypes(a,u){const c=[];return a.subject.termType==="Variable"?(a.subject.equals(u.subject)&&c.push(r.unboundSS),u.type==="pattern"&&a.subject.equals(u.predicate)&&c.push(r.unboundSP),a.subject.equals(u.object)&&c.push(r.unboundSO),a.subject.equals(u.graph)&&c.push(r.unboundSG)):(a.subject.equals(u.subject)&&c.push(r.boundSS),u.type==="pattern"&&a.subject.equals(u.predicate)&&c.push(r.boundSP),a.subject.equals(u.object)&&c.push(r.boundSO),a.subject.equals(u.graph)&&c.push(r.boundSG)),a.type==="pattern"&&(a.predicate.termType==="Variable"?(a.predicate.equals(u.subject)&&c.push(r.unboundPS),u.type==="pattern"&&a.predicate.equals(u.predicate)&&c.push(r.unboundPP),a.predicate.equals(u.object)&&c.push(r.unboundPO),a.predicate.equals(u.graph)&&c.push(r.unboundPG)):(a.predicate.equals(u.subject)&&c.push(r.boundPS),u.type==="pattern"&&a.predicate.equals(u.predicate)&&c.push(r.boundPP),a.predicate.equals(u.object)&&c.push(r.boundPO),a.predicate.equals(u.graph)&&c.push(r.boundPG))),a.object.termType==="Variable"?(a.object.equals(u.subject)&&c.push(r.unboundOS),u.type==="pattern"&&a.object.equals(u.predicate)&&c.push(r.unboundOP),a.object.equals(u.object)&&c.push(r.unboundOO),a.object.equals(u.graph)&&c.push(r.unboundOG)):(a.object.equals(u.subject)&&c.push(r.boundOS),u.type==="pattern"&&a.object.equals(u.predicate)&&c.push(r.boundOP),a.object.equals(u.object)&&c.push(r.boundOO),a.object.equals(u.graph)&&c.push(r.boundOG)),a.graph.termType==="Variable"?(a.graph.equals(u.subject)&&c.push(r.unboundGS),u.type==="pattern"&&a.graph.equals(u.predicate)&&c.push(r.unboundGP),a.graph.equals(u.object)&&c.push(r.unboundGO),a.graph.equals(u.graph)&&c.push(r.unboundGG)):(a.graph.equals(u.subject)&&c.push(r.boundGS),u.type==="pattern"&&a.graph.equals(u.predicate)&&c.push(r.boundGP),a.graph.equals(u.object)&&c.push(r.boundGO),a.graph.equals(u.graph)&&c.push(r.boundGG)),c}static getOperationsPairwiseJoinCost(a,u){let c=As.MAX_PAIRWISE_COST;for(const s of As.getJoinTypes(a,u))switch(s){case r.boundSS:c-=4;break;case r.boundSP:c-=6;break;case r.boundSO:c-=2;break;case r.boundSG:c-=6;break;case r.boundPS:c-=6;break;case r.boundPP:return 1;case r.boundPO:c-=6;break;case r.boundPG:c-=6;break;case r.boundOS:c-=2;break;case r.boundOP:c-=6;break;case r.boundOO:c-=2;break;case r.boundOG:c-=6;break;case r.boundGS:c-=6;break;case r.boundGP:c-=6;break;case r.boundGO:c-=6;break;case r.boundGG:c-=6;break;case r.unboundSS:c-=2;break;case r.unboundSP:c-=3;break;case r.unboundSO:c-=1;break;case r.unboundSG:c-=3;break;case r.unboundPS:c-=3;break;case r.unboundPP:c-=3;break;case r.unboundPO:c-=3;break;case r.unboundPG:c-=3;break;case r.unboundOS:c-=1;break;case r.unboundOP:c-=3;break;case r.unboundOO:c-=1;break;case r.unboundOG:c-=3;break;case r.unboundGS:c-=3;break;case r.unboundGP:c-=3;break;case r.unboundGO:c-=3;break;case r.unboundGG:c-=3;break}return c/As.MAX_PAIRWISE_COST}static getOperationsJoinCost(a){const u=[];for(const l of a)o.Util.recurseOperation(l,{[o.Algebra.types.PATTERN](f){return u.push(f),!1},[o.Algebra.types.PATH](f){return u.push(f),!1}});let c=0,s=0;for(const l of u)for(const f of u)l!==f&&(c+=As.getOperationsPairwiseJoinCost(l,f),s++);return s===0?1:c/s*u.reduce((l,f)=>l*As.getPatternCost(f),1)}async run(a){return a.entries.length<=1?{selectivity:1}:{selectivity:As.getOperationsJoinCost(a.entries.map(u=>u.operation))}}};ra.ActorRdfJoinSelectivityVariableCounting=i,i.MAX_PAIRWISE_COST=82;var r;return(function(e){e[e.boundSS=0]="boundSS",e[e.boundSP=1]="boundSP",e[e.boundSO=2]="boundSO",e[e.boundSG=3]="boundSG",e[e.boundPS=4]="boundPS",e[e.boundPP=5]="boundPP",e[e.boundPO=6]="boundPO",e[e.boundPG=7]="boundPG",e[e.boundOS=8]="boundOS",e[e.boundOP=9]="boundOP",e[e.boundOO=10]="boundOO",e[e.boundOG=11]="boundOG",e[e.boundGS=12]="boundGS",e[e.boundGP=13]="boundGP",e[e.boundGO=14]="boundGO",e[e.boundGG=15]="boundGG",e[e.unboundSS=16]="unboundSS",e[e.unboundSP=17]="unboundSP",e[e.unboundSO=18]="unboundSO",e[e.unboundSG=19]="unboundSG",e[e.unboundPS=20]="unboundPS",e[e.unboundPP=21]="unboundPP",e[e.unboundPO=22]="unboundPO",e[e.unboundPG=23]="unboundPG",e[e.unboundOS=24]="unboundOS",e[e.unboundOP=25]="unboundOP",e[e.unboundOO=26]="unboundOO",e[e.unboundOG=27]="unboundOG",e[e.unboundGS=28]="unboundGS",e[e.unboundGP=29]="unboundGP",e[e.unboundGO=30]="unboundGO",e[e.unboundGG=31]="unboundGG"})(r||(ra.JoinTypes=r={})),ra}var HA;function RQ(){return HA||(HA=1,(function(n){var t=ta&&ta.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ta&&ta.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(EQ(),n)})(ta)),ta}var ia={},zf={},aa={},$f={},JA;function jQ(){if(JA)return $f;JA=1,Object.defineProperty($f,"__esModule",{value:!0}),$f.ActorRdfMetadataAccumulate=void 0;const n=Ae();let t=class extends n.Actor{constructor(i){super(i)}};return $f.ActorRdfMetadataAccumulate=t,$f}var KA;function UT(){return KA||(KA=1,(function(n){var t=aa&&aa.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=aa&&aa.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(jQ(),n)})(aa)),aa}var WA;function DQ(){if(WA)return zf;WA=1,Object.defineProperty(zf,"__esModule",{value:!0}),zf.ActorRdfMetadataAccumulateCardinality=void 0;const n=UT(),t=Ae();let o=class extends n.ActorRdfMetadataAccumulate{constructor(r){super(r)}async test(r){return(0,t.passTestVoid)()}async run(r){if(r.mode==="initialize")return{metadata:{cardinality:{type:"exact",value:0}}};const e={...r.accumulatedMetadata.cardinality};if(e.dataset){if(r.accumulatedMetadata.defaultGraph===e.dataset&&e.dataset!==r.appendingMetadata.cardinality.dataset)return{metadata:{cardinality:r.appendingMetadata.cardinality}};if(r.appendingMetadata.cardinality.dataset){if(e.dataset!==r.appendingMetadata.cardinality.dataset&&r.appendingMetadata.subsetOf===e.dataset)return{metadata:{cardinality:r.appendingMetadata.cardinality}};if(e.dataset===r.appendingMetadata.cardinality.dataset)return{metadata:{cardinality:e}};delete e.dataset}else return{metadata:{cardinality:e}}}return!r.appendingMetadata.cardinality||!Number.isFinite(r.appendingMetadata.cardinality.value)?(e.type="estimate",e.value=Number.POSITIVE_INFINITY):(r.appendingMetadata.cardinality.type==="estimate"&&(e.type="estimate"),e.value+=r.appendingMetadata.cardinality.value),{metadata:{cardinality:e}}}};return zf.ActorRdfMetadataAccumulateCardinality=o,zf}var YA;function PQ(){return YA||(YA=1,(function(n){var t=ia&&ia.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ia&&ia.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(DQ(),n)})(ia)),ia}var oa={},Hf={},ZA;function NQ(){if(ZA)return Hf;ZA=1,Object.defineProperty(Hf,"__esModule",{value:!0}),Hf.ActorRdfMetadataAccumulatePageSize=void 0;const n=UT(),t=Ae();let o=class extends n.ActorRdfMetadataAccumulate{constructor(r){super(r)}async test(r){return(0,t.passTestVoid)()}async run(r){return r.mode==="initialize"?{metadata:{}}:{metadata:{..."pageSize"in r.accumulatedMetadata||"pageSize"in r.appendingMetadata?{pageSize:(r.accumulatedMetadata.pageSize??0)+(r.appendingMetadata.pageSize??0)}:{}}}}};return Hf.ActorRdfMetadataAccumulatePageSize=o,Hf}var kA;function MQ(){return kA||(kA=1,(function(n){var t=oa&&oa.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=oa&&oa.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(NQ(),n)})(oa)),oa}var ua={},Jf={},eF;function IQ(){if(eF)return Jf;eF=1,Object.defineProperty(Jf,"__esModule",{value:!0}),Jf.ActorRdfMetadataAccumulateRequestTime=void 0;const n=UT(),t=Ae();let o=class extends n.ActorRdfMetadataAccumulate{constructor(r){super(r)}async test(r){return(0,t.passTestVoid)()}async run(r){return r.mode==="initialize"?{metadata:{}}:{metadata:{..."requestTime"in r.accumulatedMetadata||"requestTime"in r.appendingMetadata?{requestTime:(r.accumulatedMetadata.requestTime??0)+(r.appendingMetadata.requestTime??0)}:{}}}}};return Jf.ActorRdfMetadataAccumulateRequestTime=o,Jf}var tF;function LQ(){return tF||(tF=1,(function(n){var t=ua&&ua.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ua&&ua.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(IQ(),n)})(ua)),ua}var sa={},Kf={},rF;function xQ(){if(rF)return Kf;rF=1,Object.defineProperty(Kf,"__esModule",{value:!0}),Kf.MediatorCombineUnion=void 0;const n=Ae();let t=class extends n.Mediator{constructor(i){super(i),this.combiner=this.createCombiner()}async mediate(i){let r;try{r=this.publish(i)}catch{r=[]}if(this.filterFailures){const u=[];for(const c of r)(await c.reply).isPassed()&&u.push(c);r=u}const e=[];await Promise.all(r.map(async({reply:u},c)=>{const s=await u,l=s.getOrThrow();return e[c]=s.getSideData(),l}));const a=await Promise.all(r.map((u,c)=>u.actor.runObservable(i,e[c])));return this.combiner(a)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return i=>{const r={};return r[this.field]={},[{}].concat(i.map(e=>e[this.field])).forEach(e=>{r[this.field]={...e,...r[this.field]}}),r}}};return Kf.MediatorCombineUnion=t,Kf}var nF;function xm(){return nF||(nF=1,(function(n){var t=sa&&sa.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=sa&&sa.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(xQ(),n)})(sa)),sa}var ca={},Wf={},la={},Yf={},iF;function xq(){if(iF)return Yf;iF=1,Object.defineProperty(Yf,"__esModule",{value:!0}),Yf.ActorRdfUpdateQuads=void 0;const n=Ae();let t=class extends n.Actor{constructor(i){super(i)}};return Yf.ActorRdfUpdateQuads=t,Yf}var vn={},aF;function qQ(){if(aF)return vn;aF=1,Object.defineProperty(vn,"__esModule",{value:!0}),vn.ActorRdfUpdateQuadsDestination=vn.deskolemize=vn.deskolemizeStream=void 0;const n=Aq(),t=Be(),o=Ae(),i=xq();function r(u,c,s){return c?.map(l=>(0,n.deskolemizeQuad)(u,l,s))}vn.deskolemizeStream=r;function e(u){const c=u.context.getSafe(t.KeysInitQuery.dataFactory),s=u.context.get(t.KeysRdfUpdateQuads.destination),l=u.context.get(t.KeysQuerySourceIdentify.sourceIds)?.get(s);return l?{...u,quadStreamInsert:r(c,u.quadStreamInsert,l),quadStreamDelete:r(c,u.quadStreamDelete,l)}:u}vn.deskolemize=e;let a=class extends i.ActorRdfUpdateQuads{async test(c){return(0,o.passTestVoid)()}async run(c){const s=await this.getDestination(c.context);return await this.getOutput(s,e(c))}async getOutput(c,s){return{execute:async()=>{await c.update({insert:s.quadStreamInsert,delete:s.quadStreamDelete}),await(s.deleteGraphs?c.deleteGraphs(s.deleteGraphs.graphs,s.deleteGraphs.requireExistence,s.deleteGraphs.dropGraphs):Promise.resolve()),await(s.createGraphs?c.createGraphs(s.createGraphs.graphs,s.createGraphs.requireNonExistence):Promise.resolve())}}}};return vn.ActorRdfUpdateQuadsDestination=a,vn}var b1={},oF;function BQ(){return oF||(oF=1,Object.defineProperty(b1,"__esModule",{value:!0})),b1}var ur={},uF;function CQ(){if(uF)return ur;uF=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.getContextDestinationUrl=ur.getContextDestination=ur.getDataDestinationContext=ur.getDataDestinationValue=ur.getDataDestinationType=ur.isDataDestinationRawType=void 0;const n=Be();function t(u){return typeof u=="string"||"remove"in u}ur.isDataDestinationRawType=t;function o(u){return typeof u=="string"?"":"remove"in u?"rdfjsStore":u.type}ur.getDataDestinationType=o;function i(u){return t(u)?u:u.value}ur.getDataDestinationValue=i;function r(u,c){return typeof u=="string"||"remove"in u||!u.context?c:c.merge(u.context)}ur.getDataDestinationContext=r;function e(u){return u.get(n.KeysRdfUpdateQuads.destination)}ur.getContextDestination=e;function a(u){if(u){let c=i(u);if(typeof c=="string"){const s=c.indexOf("#");return s>=0&&(c=c.slice(0,s)),c}}}return ur.getContextDestinationUrl=a,ur}var sF;function qq(){return sF||(sF=1,(function(n){var t=la&&la.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=la&&la.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(xq(),n),o(qQ(),n),o(BQ(),n),o(CQ(),n)})(la)),la}var Zf={},kf={},cF;function QQ(){if(cF)return kf;cF=1,Object.defineProperty(kf,"__esModule",{value:!0}),kf.promisifyEventEmitter=void 0;function n(t,o){return new Promise((i,r)=>{t.on("end",()=>i(o)),t.on("error",r)})}return kf.promisifyEventEmitter=n,kf}var lF;function UQ(){if(lF)return Zf;lF=1,Object.defineProperty(Zf,"__esModule",{value:!0}),Zf.RdfJsQuadDestination=void 0;const n=QQ(),t=mr();let o=class{constructor(r,e){this.dataFactory=r,this.store=e}async update(r){r.delete&&await(0,n.promisifyEventEmitter)(this.store.remove(r.delete)),r.insert&&await(0,n.promisifyEventEmitter)(this.store.import(r.insert))}async deleteGraphs(r,e,a){switch(r){case"ALL":await(0,n.promisifyEventEmitter)(this.store.deleteGraph(this.dataFactory.defaultGraph()));case"NAMED":const u=this.store.match(),c={};u.on("data",s=>{s.graph.termType!=="DefaultGraph"&&(c[(0,t.termToString)(s.graph)]=!0)}),await(0,n.promisifyEventEmitter)(u),await Promise.all(Object.keys(c).map(s=>(0,n.promisifyEventEmitter)(this.store.deleteGraph((0,t.stringToTerm)(s,this.dataFactory)))));break;default:for(const s of Array.isArray(r)?r:[r])await(0,n.promisifyEventEmitter)(this.store.deleteGraph(s))}}async createGraphs(r,e){if(e)for(const a of r){const u=this.store.match(void 0,void 0,void 0,a);await new Promise((c,s)=>{u.once("data",()=>{s(new Error(`Unable to create graph ${a.value} as it already exists`))}),u.on("end",c),u.on("error",s)})}}};return Zf.RdfJsQuadDestination=o,Zf}var fF;function VQ(){if(fF)return Wf;fF=1,Object.defineProperty(Wf,"__esModule",{value:!0}),Wf.ActorRdfUpdateQuadsRdfJsStore=void 0;const n=qq(),t=Be(),o=Ae(),i=UQ();let r=class extends n.ActorRdfUpdateQuadsDestination{constructor(a){super(a)}async test(a){const u=(0,n.getContextDestination)(a.context);return!u||typeof u=="string"||!("remove"in u)&&"value"in u&&!u.value?.remove?(0,o.failTest)(`${this.name} received an invalid rdfjsStore.`):(0,o.passTestVoid)()}async getDestination(a){const u=(0,n.getContextDestination)(a);return new i.RdfJsQuadDestination(a.getSafe(t.KeysInitQuery.dataFactory),"remove"in u?u:u.value)}};return Wf.ActorRdfUpdateQuadsRdfJsStore=r,Wf}var dF;function GQ(){return dF||(dF=1,(function(n){var t=ca&&ca.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ca&&ca.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(VQ(),n)})(ca)),ca}var fa={},ed={},da={},td={},pF;function XQ(){if(pF)return td;pF=1,Object.defineProperty(td,"__esModule",{value:!0}),td.ActorQueryParse=void 0;const n=Ae();let t=class extends n.Actor{constructor(i){super(i)}};return td.ActorQueryParse=t,td}var hF;function zQ(){return hF||(hF=1,(function(n){var t=da&&da.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=da&&da.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(XQ(),n)})(da)),da}var yF;function $Q(){if(yF)return ed;yF=1,Object.defineProperty(ed,"__esModule",{value:!0}),ed.ActorQueryParseSparql=void 0;const n=zQ(),t=Be(),o=Ae(),i=We(),r=Nb();let e=class extends n.ActorQueryParse{constructor(u){super(u),this.prefixes=Object.freeze(this.prefixes)}async test(u){return u.queryFormat&&u.queryFormat.language!=="sparql"?(0,o.failTest)("This actor can only parse SPARQL queries"):(0,o.passTestVoid)()}async run(u){const c=u.context.getSafe(t.KeysInitQuery.dataFactory),l=new r.Parser({prefixes:this.prefixes,baseIRI:u.baseIRI,sparqlStar:!0,factory:c}).parse(u.query);return{baseIRI:l.type==="query"?l.base:void 0,operation:(0,i.translate)(l,{quads:!0,prefixes:this.prefixes,blankToVariable:!0,baseIRI:u.baseIRI,dataFactory:c})}}};return ed.ActorQueryParseSparql=e,ed}var _F;function HQ(){return _F||(_F=1,(function(n){var t=fa&&fa.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=fa&&fa.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o($Q(),n)})(fa)),fa}var pa={},rd={},nd={},gF;function JQ(){if(gF)return nd;gF=1,Object.defineProperty(nd,"__esModule",{value:!0}),nd.ExpressionFunctionBnode=void 0;const n=ge(),t=Be(),o=xT(),i=ye();let r=class Lv extends n.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:i.SparqlOperator.BNODE,apply:async a=>{const{args:u,mapping:c,exprEval:s}=a,l=u.length===1?await s.evaluatorExpressionEvaluation(u[0],c):void 0;let f;if(l){const h=Lv.bnodeTree.search([l],s.context.getSafe(t.KeysExpressionEvaluator.superTypeProvider),s.context.getSafe(t.KeysInitQuery.functionArgumentsCache));if(!h)throw new i.InvalidArgumentTypes(u,i.SparqlOperator.BNODE);f=h(s)([l]).str()}const d=new o.BlankNodeBindingsScoped(f??`BNODE_${Lv.bnodeCounter++}`);return new i.BlankNode(d)}})}checkArity(a){return a.length===0||a.length===1}};return nd.ExpressionFunctionBnode=r,r.bnodeTree=(0,i.declare)(i.SparqlOperator.BNODE).onString1(()=>e=>e).collect(),r.bnodeCounter=0,nd}var mF;function KQ(){if(mF)return rd;mF=1,Object.defineProperty(rd,"__esModule",{value:!0}),rd.ActorFunctionFactoryExpressionBnode=void 0;const n=ge(),t=ye(),o=JQ();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.BNODE],termFunction:!1})}async run(e){return new o.ExpressionFunctionBnode}};return rd.ActorFunctionFactoryExpressionBnode=i,rd}var bF;function WQ(){return bF||(bF=1,(function(n){var t=pa&&pa.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=pa&&pa.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(KQ(),n)})(pa)),pa}var ha={},id={},ad={},vF;function YQ(){if(vF)return ad;vF=1,Object.defineProperty(ad,"__esModule",{value:!0}),ad.ExpressionFunctionCoalesce=void 0;const n=ge(),t=ye();let o=class extends n.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:t.SparqlOperator.COALESCE,apply:async({args:r,mapping:e,exprEval:a})=>{const u=[];for(const c of r)try{return await a.evaluatorExpressionEvaluation(c,e)}catch(s){u.push(s)}throw new t.CoalesceError(u)}})}};return ad.ExpressionFunctionCoalesce=o,ad}var TF;function ZQ(){if(TF)return id;TF=1,Object.defineProperty(id,"__esModule",{value:!0}),id.ActorFunctionFactoryExpressionCoalesce=void 0;const n=ge(),t=ye(),o=YQ();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.COALESCE],termFunction:!1})}async run(e){return new o.ExpressionFunctionCoalesce}};return id.ActorFunctionFactoryExpressionCoalesce=i,id}var OF;function kQ(){return OF||(OF=1,(function(n){var t=ha&&ha.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ha&&ha.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(ZQ(),n)})(ha)),ha}var ya={},od={},ud={},SF;function eU(){if(SF)return ud;SF=1,Object.defineProperty(ud,"__esModule",{value:!0}),ud.ExpressionFunctionBound=void 0;const n=ge(),t=Be(),o=Vn(),i=ye();let r=class extends n.ExpressionFunctionBase{constructor(){super({arity:1,operator:i.SparqlOperator.BOUND,apply:async({args:a,mapping:u,exprEval:c})=>{const s=a[0];if(s.expressionType!==o.ExpressionType.Variable)throw new i.InvalidArgumentTypes(a,i.SparqlOperator.BOUND);const l=u.has((0,i.expressionToVar)(c.context.getSafe(t.KeysInitQuery.dataFactory),s));return(0,i.bool)(l)}})}};return ud.ExpressionFunctionBound=r,ud}var wF;function tU(){if(wF)return od;wF=1,Object.defineProperty(od,"__esModule",{value:!0}),od.ActorFunctionFactoryExpressionBound=void 0;const n=ge(),t=ye(),o=eU();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.BOUND],termFunction:!1})}async run(e){return new o.ExpressionFunctionBound}};return od.ActorFunctionFactoryExpressionBound=i,od}var AF;function rU(){return AF||(AF=1,(function(n){var t=ya&&ya.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ya&&ya.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(tU(),n)})(ya)),ya}var _a={},sd={},ga={},cd={},FF;function Bq(){if(FF)return cd;FF=1,Object.defineProperty(cd,"__esModule",{value:!0}),cd.BlankNode=void 0;class n{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return cd.BlankNode=n,cd}var ld={},fd={},EF;function Cq(){if(EF)return fd;EF=1,Object.defineProperty(fd,"__esModule",{value:!0}),fd.DefaultGraph=void 0;class n{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return fd.DefaultGraph=n,n.INSTANCE=new n,fd}var dd={},pd={},RF;function VT(){if(RF)return pd;RF=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.NamedNode=void 0;class n{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return pd.NamedNode=n,pd}var jF;function Qq(){if(jF)return dd;jF=1,Object.defineProperty(dd,"__esModule",{value:!0}),dd.Literal=void 0;const n=VT();class t{constructor(i,r){this.termType="Literal",this.value=i,typeof r=="string"?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(i){return!!i&&i.termType==="Literal"&&i.value===this.value&&i.language===this.language&&this.datatype.equals(i.datatype)}}return dd.Literal=t,t.RDF_LANGUAGE_STRING=new n.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new n.NamedNode("http://www.w3.org/2001/XMLSchema#string"),dd}var hd={},DF;function Uq(){if(DF)return hd;DF=1,Object.defineProperty(hd,"__esModule",{value:!0}),hd.Quad=void 0;class n{constructor(o,i,r,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=i,this.object=r,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return hd.Quad=n,hd}var yd={},PF;function Vq(){if(PF)return yd;PF=1,Object.defineProperty(yd,"__esModule",{value:!0}),yd.Variable=void 0;class n{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return yd.Variable=n,yd}var NF;function nU(){if(NF)return ld;NF=1,Object.defineProperty(ld,"__esModule",{value:!0}),ld.DataFactory=void 0;const n=Bq(),t=Cq(),o=Qq(),i=VT(),r=Uq(),e=Vq();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new i.NamedNode(s)}blankNode(s){return new n.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,f,d){return new r.Quad(s,l,f,d||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return ld.DataFactory=u,ld}var MF;function iU(){return MF||(MF=1,(function(n){var t=ga&&ga.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ga&&ga.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Bq(),n),o(nU(),n),o(Cq(),n),o(Qq(),n),o(VT(),n),o(Uq(),n),o(Vq(),n)})(ga)),ga}var _d={},IF;function aU(){if(IF)return _d;IF=1,Object.defineProperty(_d,"__esModule",{value:!0}),_d.NamedExtension=void 0;const n=sq(),t=Be(),o=ye();let i=class extends n.ExpressionFunctionBase{constructor({operator:e,functionDefinition:a}){super({arity:Number.POSITIVE_INFINITY,operator:e,apply:async({args:u,exprEval:c,mapping:s})=>{const l=await Promise.all(u.map(f=>c.evaluatorExpressionEvaluation(f,s)));try{return new o.TermTransformer(c.context.getSafe(t.KeysExpressionEvaluator.superTypeProvider)).transformRDFTermUnsafe(await a(l.map(f=>f.toRDF(c.context.getSafe(t.KeysInitQuery.dataFactory)))))}catch(f){throw new o.ExtensionFunctionError(this.operator,f)}}})}};return _d.NamedExtension=i,_d}var LF;function oU(){if(LF)return sd;LF=1,Object.defineProperty(sd,"__esModule",{value:!0}),sd.ActorFunctionFactoryExpressionExtensions=void 0;const n=ge(),t=Be(),o=Ae(),i=iU(),r=aU();let e=class extends n.ActorFunctionFactory{constructor(u){super(u)}async test({context:u,functionName:c}){return await u.getSafe(t.KeysExpressionEvaluator.extensionFunctionCreator)(new i.DataFactory().namedNode(c))?(0,o.passTestVoid)():(0,o.failTest)(`Actor ${this.name} can only provide non-termExpression implementations for functions that are provided through config entries like: ${t.KeysInitQuery.extensionFunctionCreator.name} or ${t.KeysInitQuery.extensionFunctions.name}`)}async run({context:u,functionName:c}){const l=await u.getSafe(t.KeysExpressionEvaluator.extensionFunctionCreator)(new i.DataFactory().namedNode(c));return new r.NamedExtension({operator:c,functionDefinition:l})}};return sd.ActorFunctionFactoryExpressionExtensions=e,sd}var xF;function uU(){return xF||(xF=1,(function(n){var t=_a&&_a.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=_a&&_a.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(oU(),n)})(_a)),_a}var ma={},gd={},md={},qF;function sU(){if(qF)return md;qF=1,Object.defineProperty(md,"__esModule",{value:!0}),md.ExpressionFunctionConcat=void 0;const n=ge(),t=Be(),o=ye();let i=class xv extends n.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:o.SparqlOperator.CONCAT,apply:async e=>{const{args:a,mapping:u,exprEval:c}=e,s=a.map(async p=>c.evaluatorExpressionEvaluation(p,u)).map(async p=>{const y=xv.concatTree.search([await p],c.context.getSafe(t.KeysExpressionEvaluator.superTypeProvider),c.context.getSafe(t.KeysInitQuery.functionArgumentsCache));if(!y)throw new o.InvalidArgumentTypes(a,o.SparqlOperator.CONCAT);return y(c)([await p])}),l=await Promise.all(s),d=l.map(p=>p.typedValue).join(""),h=xv.langAllEqual(l)?l[0].language:void 0;return h?(0,o.langString)(d,h):(0,o.string)(d)}})}static langAllEqual(e){return e.length>0&&e.every(a=>a.language===e[0].language)}};return md.ExpressionFunctionConcat=i,i.concatTree=(0,o.declare)(o.SparqlOperator.CONCAT).onStringly1(()=>r=>r).collect(),md}var BF;function cU(){if(BF)return gd;BF=1,Object.defineProperty(gd,"__esModule",{value:!0}),gd.ActorFunctionFactoryExpressionConcat=void 0;const n=ge(),t=ye(),o=sU();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.CONCAT],termFunction:!1})}async run(e){return new o.ExpressionFunctionConcat}};return gd.ActorFunctionFactoryExpressionConcat=i,gd}var CF;function lU(){return CF||(CF=1,(function(n){var t=ma&&ma.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ma&&ma.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(cU(),n)})(ma)),ma}var ba={},bd={},vd={},QF;function fU(){if(QF)return vd;QF=1,Object.defineProperty(vd,"__esModule",{value:!0}),vd.ExpressionFunctionIf=void 0;const n=ge(),t=ye();let o=class extends n.ExpressionFunctionBase{constructor(){super({arity:3,operator:t.SparqlOperator.IF,apply:async({args:r,mapping:e,exprEval:a})=>(await a.evaluatorExpressionEvaluation(r[0],e)).coerceEBV()?a.evaluatorExpressionEvaluation(r[1],e):a.evaluatorExpressionEvaluation(r[2],e)})}};return vd.ExpressionFunctionIf=o,vd}var UF;function dU(){if(UF)return bd;UF=1,Object.defineProperty(bd,"__esModule",{value:!0}),bd.ActorFunctionFactoryExpressionIf=void 0;const n=ge(),t=ye(),o=fU();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IF],termFunction:!1})}async run(e){return new o.ExpressionFunctionIf}};return bd.ActorFunctionFactoryExpressionIf=i,bd}var VF;function pU(){return VF||(VF=1,(function(n){var t=ba&&ba.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ba&&ba.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(dU(),n)})(ba)),ba}var va={},Td={},Od={},GF;function hU(){if(GF)return Od;GF=1,Object.defineProperty(Od,"__esModule",{value:!0}),Od.ExpressionFunctionLogicalAnd=void 0;const n=ge(),t=ye();let o=class extends n.ExpressionFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.LOGICAL_AND,apply:async({args:r,mapping:e,exprEval:a})=>{const[u,c]=r;try{if(!(await a.evaluatorExpressionEvaluation(u,e)).coerceEBV())return(0,t.bool)(!1);const d=(await a.evaluatorExpressionEvaluation(c,e)).coerceEBV();return(0,t.bool)(d)}catch(s){if((await a.evaluatorExpressionEvaluation(c,e)).coerceEBV())throw s;return(0,t.bool)(!1)}}})}};return Od.ExpressionFunctionLogicalAnd=o,Od}var XF;function yU(){if(XF)return Td;XF=1,Object.defineProperty(Td,"__esModule",{value:!0}),Td.ActorFunctionFactoryExpressionLogicalAnd=void 0;const n=ge(),t=ye(),o=hU();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LOGICAL_AND],termFunction:!1})}async run(e){return new o.ExpressionFunctionLogicalAnd}};return Td.ActorFunctionFactoryExpressionLogicalAnd=i,Td}var zF;function _U(){return zF||(zF=1,(function(n){var t=va&&va.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=va&&va.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(yU(),n)})(va)),va}var Ta={},Sd={},wd={},$F;function gU(){if($F)return wd;$F=1,Object.defineProperty(wd,"__esModule",{value:!0}),wd.ExpressionFunctionLogicalOr=void 0;const n=ge(),t=ye();let o=class extends n.ExpressionFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.LOGICAL_OR,apply:async({args:r,mapping:e,exprEval:a})=>{const[u,c]=r;try{if((await a.evaluatorExpressionEvaluation(u,e)).coerceEBV())return(0,t.bool)(!0);const d=(await a.evaluatorExpressionEvaluation(c,e)).coerceEBV();return(0,t.bool)(d)}catch(s){if(!(await a.evaluatorExpressionEvaluation(c,e)).coerceEBV())throw s;return(0,t.bool)(!0)}}})}};return wd.ExpressionFunctionLogicalOr=o,wd}var HF;function mU(){if(HF)return Sd;HF=1,Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.ActorFunctionFactoryExpressionLogicalOr=void 0;const n=ge(),t=ye(),o=gU();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LOGICAL_OR],termFunction:!1})}async run(e){return new o.ExpressionFunctionLogicalOr}};return Sd.ActorFunctionFactoryExpressionLogicalOr=i,Sd}var JF;function bU(){return JF||(JF=1,(function(n){var t=Ta&&Ta.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ta&&Ta.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(mU(),n)})(Ta)),Ta}var Oa={},Ad={},Fd={},KF;function vU(){if(KF)return Fd;KF=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.ExpressionFunctionSameTerm=void 0;const n=ge(),t=Be(),o=ye();let i=class extends n.ExpressionFunctionBase{constructor(){super({arity:2,operator:o.SparqlOperator.SAME_TERM,apply:async({args:e,mapping:a,exprEval:u})=>{const c=u.context.getSafe(t.KeysInitQuery.dataFactory),[s,l]=e.map(h=>u.evaluatorExpressionEvaluation(h,a)),[f,d]=await Promise.all([s,l]);return(0,o.bool)(f.toRDF(c).equals(d.toRDF(c)))}})}};return Fd.ExpressionFunctionSameTerm=i,Fd}var WF;function TU(){if(WF)return Ad;WF=1,Object.defineProperty(Ad,"__esModule",{value:!0}),Ad.ActorFunctionFactoryExpressionSameTerm=void 0;const n=ge(),t=ye(),o=vU();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SAME_TERM],termFunction:!1})}async run(e){return new o.ExpressionFunctionSameTerm}};return Ad.ActorFunctionFactoryExpressionSameTerm=i,Ad}var YF;function OU(){return YF||(YF=1,(function(n){var t=Oa&&Oa.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Oa&&Oa.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(TU(),n)})(Oa)),Oa}var Sa={},Ed={},Rd={},ZF;function SU(){if(ZF)return Rd;ZF=1,Object.defineProperty(Rd,"__esModule",{value:!0}),Rd.TermFunctionAbs=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.ABS,overloads:(0,t.declare)(t.SparqlOperator.ABS).numericConverter(()=>r=>Math.abs(r)).collect()})}};return Rd.TermFunctionAbs=o,Rd}var kF;function wU(){if(kF)return Ed;kF=1,Object.defineProperty(Ed,"__esModule",{value:!0}),Ed.ActorFunctionFactoryTermAbs=void 0;const n=ge(),t=ye(),o=SU();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.ABS],termFunction:!0})}async run(e){return new o.TermFunctionAbs}};return Ed.ActorFunctionFactoryTermAbs=i,Ed}var eE;function AU(){return eE||(eE=1,(function(n){var t=Sa&&Sa.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Sa&&Sa.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(wU(),n)})(Sa)),Sa}var wa={},jd={},Dd={},sb={exports:{}},FU=sb.exports,tE;function xb(){return tE||(tE=1,(function(n){(function(t){var o,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,r=Math.ceil,e=Math.floor,a="[BigNumber Error] ",u=a+"Number primitive has more than 15 significant digits: ",c=1e14,s=14,l=9007199254740991,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,h=1e9;function p(j){var X,K,O,S=de.prototype={constructor:de,toString:null,valueOf:null},L=new de(1),N=20,I=4,V=-7,re=21,Y=-1e7,ce=1e7,ae=!1,pe=1,U=0,le={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},me="0123456789abcdefghijklmnopqrstuvwxyz",te=!0;function de(q,w){var D,g,F,M,Q,x,$,B,H=this;if(!(H instanceof de))return new de(q,w);if(w==null){if(q&&q._isBigNumber===!0){H.s=q.s,!q.c||q.e>ce?H.c=H.e=null:q.e<Y?H.c=[H.e=0]:(H.e=q.e,H.c=q.c.slice());return}if((x=typeof q=="number")&&q*0==0){if(H.s=1/q<0?(q=-q,-1):1,q===~~q){for(M=0,Q=q;Q>=10;Q/=10,M++);M>ce?H.c=H.e=null:(H.e=M,H.c=[q]);return}B=String(q)}else{if(!i.test(B=String(q)))return O(H,B,x);H.s=B.charCodeAt(0)==45?(B=B.slice(1),-1):1}(M=B.indexOf("."))>-1&&(B=B.replace(".","")),(Q=B.search(/e/i))>0?(M<0&&(M=Q),M+=+B.slice(Q+1),B=B.substring(0,Q)):M<0&&(M=B.length)}else{if(T(w,2,me.length,"Base"),w==10&&te)return H=new de(q),fe(H,N+H.e+1,I);if(B=String(q),x=typeof q=="number"){if(q*0!=0)return O(H,B,x,w);if(H.s=1/q<0?(B=B.slice(1),-1):1,de.DEBUG&&B.replace(/^0\.0*|\./,"").length>15)throw Error(u+q)}else H.s=B.charCodeAt(0)===45?(B=B.slice(1),-1):1;for(D=me.slice(0,w),M=Q=0,$=B.length;Q<$;Q++)if(D.indexOf(g=B.charAt(Q))<0){if(g=="."){if(Q>M){M=$;continue}}else if(!F&&(B==B.toUpperCase()&&(B=B.toLowerCase())||B==B.toLowerCase()&&(B=B.toUpperCase()))){F=!0,Q=-1,M=0;continue}return O(H,String(q),x,w)}x=!1,B=K(B,w,10,H.s),(M=B.indexOf("."))>-1?B=B.replace(".",""):M=B.length}for(Q=0;B.charCodeAt(Q)===48;Q++);for($=B.length;B.charCodeAt(--$)===48;);if(B=B.slice(Q,++$)){if($-=Q,x&&de.DEBUG&&$>15&&(q>l||q!==e(q)))throw Error(u+H.s*q);if((M=M-Q-1)>ce)H.c=H.e=null;else if(M<Y)H.c=[H.e=0];else{if(H.e=M,H.c=[],Q=(M+1)%s,M<0&&(Q+=s),Q<$){for(Q&&H.c.push(+B.slice(0,Q)),$-=s;Q<$;)H.c.push(+B.slice(Q,Q+=s));Q=s-(B=B.slice(Q)).length}else Q-=$;for(;Q--;B+="0");H.c.push(+B)}}else H.c=[H.e=0]}de.clone=p,de.ROUND_UP=0,de.ROUND_DOWN=1,de.ROUND_CEIL=2,de.ROUND_FLOOR=3,de.ROUND_HALF_UP=4,de.ROUND_HALF_DOWN=5,de.ROUND_HALF_EVEN=6,de.ROUND_HALF_CEIL=7,de.ROUND_HALF_FLOOR=8,de.EUCLID=9,de.config=de.set=function(q){var w,D;if(q!=null)if(typeof q=="object"){if(q.hasOwnProperty(w="DECIMAL_PLACES")&&(D=q[w],T(D,0,h,w),N=D),q.hasOwnProperty(w="ROUNDING_MODE")&&(D=q[w],T(D,0,8,w),I=D),q.hasOwnProperty(w="EXPONENTIAL_AT")&&(D=q[w],D&&D.pop?(T(D[0],-h,0,w),T(D[1],0,h,w),V=D[0],re=D[1]):(T(D,-h,h,w),V=-(re=D<0?-D:D))),q.hasOwnProperty(w="RANGE"))if(D=q[w],D&&D.pop)T(D[0],-h,-1,w),T(D[1],1,h,w),Y=D[0],ce=D[1];else if(T(D,-h,h,w),D)Y=-(ce=D<0?-D:D);else throw Error(a+w+" cannot be zero: "+D);if(q.hasOwnProperty(w="CRYPTO"))if(D=q[w],D===!!D)if(D)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ae=D;else throw ae=!D,Error(a+"crypto unavailable");else ae=D;else throw Error(a+w+" not true or false: "+D);if(q.hasOwnProperty(w="MODULO_MODE")&&(D=q[w],T(D,0,9,w),pe=D),q.hasOwnProperty(w="POW_PRECISION")&&(D=q[w],T(D,0,h,w),U=D),q.hasOwnProperty(w="FORMAT"))if(D=q[w],typeof D=="object")le=D;else throw Error(a+w+" not an object: "+D);if(q.hasOwnProperty(w="ALPHABET"))if(D=q[w],typeof D=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(D))te=D.slice(0,10)=="0123456789",me=D;else throw Error(a+w+" invalid: "+D)}else throw Error(a+"Object expected: "+q);return{DECIMAL_PLACES:N,ROUNDING_MODE:I,EXPONENTIAL_AT:[V,re],RANGE:[Y,ce],CRYPTO:ae,MODULO_MODE:pe,POW_PRECISION:U,FORMAT:le,ALPHABET:me}},de.isBigNumber=function(q){if(!q||q._isBigNumber!==!0)return!1;if(!de.DEBUG)return!0;var w,D,g=q.c,F=q.e,M=q.s;e:if({}.toString.call(g)=="[object Array]"){if((M===1||M===-1)&&F>=-h&&F<=h&&F===e(F)){if(g[0]===0){if(F===0&&g.length===1)return!0;break e}if(w=(F+1)%s,w<1&&(w+=s),String(g[0]).length==w){for(w=0;w<g.length;w++)if(D=g[w],D<0||D>=c||D!==e(D))break e;if(D!==0)return!0}}}else if(g===null&&F===null&&(M===null||M===1||M===-1))return!0;throw Error(a+"Invalid BigNumber: "+q)},de.maximum=de.max=function(){return Re(arguments,-1)},de.minimum=de.min=function(){return Re(arguments,1)},de.random=(function(){var q=9007199254740992,w=Math.random()*q&2097151?function(){return e(Math.random()*q)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(D){var g,F,M,Q,x,$=0,B=[],H=new de(L);if(D==null?D=N:T(D,0,h),Q=r(D/s),ae)if(crypto.getRandomValues){for(g=crypto.getRandomValues(new Uint32Array(Q*=2));$<Q;)x=g[$]*131072+(g[$+1]>>>11),x>=9e15?(F=crypto.getRandomValues(new Uint32Array(2)),g[$]=F[0],g[$+1]=F[1]):(B.push(x%1e14),$+=2);$=Q/2}else if(crypto.randomBytes){for(g=crypto.randomBytes(Q*=7);$<Q;)x=(g[$]&31)*281474976710656+g[$+1]*1099511627776+g[$+2]*4294967296+g[$+3]*16777216+(g[$+4]<<16)+(g[$+5]<<8)+g[$+6],x>=9e15?crypto.randomBytes(7).copy(g,$):(B.push(x%1e14),$+=7);$=Q/7}else throw ae=!1,Error(a+"crypto unavailable");if(!ae)for(;$<Q;)x=w(),x<9e15&&(B[$++]=x%1e14);for(Q=B[--$],D%=s,Q&&D&&(x=f[s-D],B[$]=e(Q/x)*x);B[$]===0;B.pop(),$--);if($<0)B=[M=0];else{for(M=-1;B[0]===0;B.splice(0,1),M-=s);for($=1,x=B[0];x>=10;x/=10,$++);$<s&&(M-=s-$)}return H.e=M,H.c=B,H}})(),de.sum=function(){for(var q=1,w=arguments,D=new de(w[0]);q<w.length;)D=D.plus(w[q++]);return D},K=(function(){var q="0123456789";function w(D,g,F,M){for(var Q,x=[0],$,B=0,H=D.length;B<H;){for($=x.length;$--;x[$]*=g);for(x[0]+=M.indexOf(D.charAt(B++)),Q=0;Q<x.length;Q++)x[Q]>F-1&&(x[Q+1]==null&&(x[Q+1]=0),x[Q+1]+=x[Q]/F|0,x[Q]%=F)}return x.reverse()}return function(D,g,F,M,Q){var x,$,B,H,ne,ue,Te,Fe,Z=D.indexOf("."),oe=N,P=I;for(Z>=0&&(H=U,U=0,D=D.replace(".",""),Fe=new de(g),ue=Fe.pow(D.length-Z),U=H,Fe.c=w(E(b(ue.c),ue.e,"0"),10,F,q),Fe.e=Fe.c.length),Te=w(D,g,F,Q?(x=me,q):(x=q,me)),B=H=Te.length;Te[--H]==0;Te.pop());if(!Te[0])return x.charAt(0);if(Z<0?--B:(ue.c=Te,ue.e=B,ue.s=M,ue=X(ue,Fe,oe,P,F),Te=ue.c,ne=ue.r,B=ue.e),$=B+oe+1,Z=Te[$],H=F/2,ne=ne||$<0||Te[$+1]!=null,ne=P<4?(Z!=null||ne)&&(P==0||P==(ue.s<0?3:2)):Z>H||Z==H&&(P==4||ne||P==6&&Te[$-1]&1||P==(ue.s<0?8:7)),$<1||!Te[0])D=ne?E(x.charAt(1),-oe,x.charAt(0)):x.charAt(0);else{if(Te.length=$,ne)for(--F;++Te[--$]>F;)Te[$]=0,$||(++B,Te=[1].concat(Te));for(H=Te.length;!Te[--H];);for(Z=0,D="";Z<=H;D+=x.charAt(Te[Z++]));D=E(D,B,x.charAt(0))}return D}})(),X=(function(){function q(g,F,M){var Q,x,$,B,H=0,ne=g.length,ue=F%d,Te=F/d|0;for(g=g.slice();ne--;)$=g[ne]%d,B=g[ne]/d|0,Q=Te*$+B*ue,x=ue*$+Q%d*d+H,H=(x/M|0)+(Q/d|0)+Te*B,g[ne]=x%M;return H&&(g=[H].concat(g)),g}function w(g,F,M,Q){var x,$;if(M!=Q)$=M>Q?1:-1;else for(x=$=0;x<M;x++)if(g[x]!=F[x]){$=g[x]>F[x]?1:-1;break}return $}function D(g,F,M,Q){for(var x=0;M--;)g[M]-=x,x=g[M]<F[M]?1:0,g[M]=x*Q+g[M]-F[M];for(;!g[0]&&g.length>1;g.splice(0,1));}return function(g,F,M,Q,x){var $,B,H,ne,ue,Te,Fe,Z,oe,P,v,R,C,k,se,he,Ie,Me=g.s==F.s?1:-1,Ue=g.c,Ce=F.c;if(!Ue||!Ue[0]||!Ce||!Ce[0])return new de(!g.s||!F.s||(Ue?Ce&&Ue[0]==Ce[0]:!Ce)?NaN:Ue&&Ue[0]==0||!Ce?Me*0:Me/0);for(Z=new de(Me),oe=Z.c=[],B=g.e-F.e,Me=M+B+1,x||(x=c,B=y(g.e/s)-y(F.e/s),Me=Me/s|0),H=0;Ce[H]==(Ue[H]||0);H++);if(Ce[H]>(Ue[H]||0)&&B--,Me<0)oe.push(1),ne=!0;else{for(k=Ue.length,he=Ce.length,H=0,Me+=2,ue=e(x/(Ce[0]+1)),ue>1&&(Ce=q(Ce,ue,x),Ue=q(Ue,ue,x),he=Ce.length,k=Ue.length),C=he,P=Ue.slice(0,he),v=P.length;v<he;P[v++]=0);Ie=Ce.slice(),Ie=[0].concat(Ie),se=Ce[0],Ce[1]>=x/2&&se++;do{if(ue=0,$=w(Ce,P,he,v),$<0){if(R=P[0],he!=v&&(R=R*x+(P[1]||0)),ue=e(R/se),ue>1)for(ue>=x&&(ue=x-1),Te=q(Ce,ue,x),Fe=Te.length,v=P.length;w(Te,P,Fe,v)==1;)ue--,D(Te,he<Fe?Ie:Ce,Fe,x),Fe=Te.length,$=1;else ue==0&&($=ue=1),Te=Ce.slice(),Fe=Te.length;if(Fe<v&&(Te=[0].concat(Te)),D(P,Te,v,x),v=P.length,$==-1)for(;w(Ce,P,he,v)<1;)ue++,D(P,he<v?Ie:Ce,v,x),v=P.length}else $===0&&(ue++,P=[0]);oe[H++]=ue,P[0]?P[v++]=Ue[C]||0:(P=[Ue[C]],v=1)}while((C++<k||P[0]!=null)&&Me--);ne=P[0]!=null,oe[0]||oe.splice(0,1)}if(x==c){for(H=1,Me=oe[0];Me>=10;Me/=10,H++);fe(Z,M+(Z.e=H+B*s-1)+1,Q,ne)}else Z.e=B,Z.r=+ne;return Z}})();function Ee(q,w,D,g){var F,M,Q,x,$;if(D==null?D=I:T(D,0,8),!q.c)return q.toString();if(F=q.c[0],Q=q.e,w==null)$=b(q.c),$=g==1||g==2&&(Q<=V||Q>=re)?A($,Q):E($,Q,"0");else if(q=fe(new de(q),w,D),M=q.e,$=b(q.c),x=$.length,g==1||g==2&&(w<=M||M<=V)){for(;x<w;$+="0",x++);$=A($,M)}else if(w-=Q+(g===2&&M>Q),$=E($,M,"0"),M+1>x){if(--w>0)for($+=".";w--;$+="0");}else if(w+=M-x,w>0)for(M+1==x&&($+=".");w--;$+="0");return q.s<0&&F?"-"+$:$}function Re(q,w){for(var D,g,F=1,M=new de(q[0]);F<q.length;F++)g=new de(q[F]),(!g.s||(D=_(M,g))===w||D===0&&M.s===w)&&(M=g);return M}function De(q,w,D){for(var g=1,F=w.length;!w[--F];w.pop());for(F=w[0];F>=10;F/=10,g++);return(D=g+D*s-1)>ce?q.c=q.e=null:D<Y?q.c=[q.e=0]:(q.e=D,q.c=w),q}O=(function(){var q=/^(-?)0([xbo])(?=\w[\w.]*$)/i,w=/^([^.]+)\.$/,D=/^\.([^.]+)$/,g=/^-?(Infinity|NaN)$/,F=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(M,Q,x,$){var B,H=x?Q:Q.replace(F,"");if(g.test(H))M.s=isNaN(H)?null:H<0?-1:1;else{if(!x&&(H=H.replace(q,function(ne,ue,Te){return B=(Te=Te.toLowerCase())=="x"?16:Te=="b"?2:8,!$||$==B?ue:ne}),$&&(B=$,H=H.replace(w,"$1").replace(D,"0.$1")),Q!=H))return new de(H,B);if(de.DEBUG)throw Error(a+"Not a"+($?" base "+$:"")+" number: "+Q);M.s=null}M.c=M.e=null}})();function fe(q,w,D,g){var F,M,Q,x,$,B,H,ne=q.c,ue=f;if(ne){e:{for(F=1,x=ne[0];x>=10;x/=10,F++);if(M=w-F,M<0)M+=s,Q=w,$=ne[B=0],H=e($/ue[F-Q-1]%10);else if(B=r((M+1)/s),B>=ne.length)if(g){for(;ne.length<=B;ne.push(0));$=H=0,F=1,M%=s,Q=M-s+1}else break e;else{for($=x=ne[B],F=1;x>=10;x/=10,F++);M%=s,Q=M-s+F,H=Q<0?0:e($/ue[F-Q-1]%10)}if(g=g||w<0||ne[B+1]!=null||(Q<0?$:$%ue[F-Q-1]),g=D<4?(H||g)&&(D==0||D==(q.s<0?3:2)):H>5||H==5&&(D==4||g||D==6&&(M>0?Q>0?$/ue[F-Q]:0:ne[B-1])%10&1||D==(q.s<0?8:7)),w<1||!ne[0])return ne.length=0,g?(w-=q.e+1,ne[0]=ue[(s-w%s)%s],q.e=-w||0):ne[0]=q.e=0,q;if(M==0?(ne.length=B,x=1,B--):(ne.length=B+1,x=ue[s-M],ne[B]=Q>0?e($/ue[F-Q]%ue[Q])*x:0),g)for(;;)if(B==0){for(M=1,Q=ne[0];Q>=10;Q/=10,M++);for(Q=ne[0]+=x,x=1;Q>=10;Q/=10,x++);M!=x&&(q.e++,ne[0]==c&&(ne[0]=1));break}else{if(ne[B]+=x,ne[B]!=c)break;ne[B--]=0,x=1}for(M=ne.length;ne[--M]===0;ne.pop());}q.e>ce?q.c=q.e=null:q.e<Y&&(q.c=[q.e=0])}return q}function _e(q){var w,D=q.e;return D===null?q.toString():(w=b(q.c),w=D<=V||D>=re?A(w,D):E(w,D,"0"),q.s<0?"-"+w:w)}return S.absoluteValue=S.abs=function(){var q=new de(this);return q.s<0&&(q.s=1),q},S.comparedTo=function(q,w){return _(this,new de(q,w))},S.decimalPlaces=S.dp=function(q,w){var D,g,F,M=this;if(q!=null)return T(q,0,h),w==null?w=I:T(w,0,8),fe(new de(M),q+M.e+1,w);if(!(D=M.c))return null;if(g=((F=D.length-1)-y(this.e/s))*s,F=D[F])for(;F%10==0;F/=10,g--);return g<0&&(g=0),g},S.dividedBy=S.div=function(q,w){return X(this,new de(q,w),N,I)},S.dividedToIntegerBy=S.idiv=function(q,w){return X(this,new de(q,w),0,1)},S.exponentiatedBy=S.pow=function(q,w){var D,g,F,M,Q,x,$,B,H,ne=this;if(q=new de(q),q.c&&!q.isInteger())throw Error(a+"Exponent not an integer: "+_e(q));if(w!=null&&(w=new de(w)),x=q.e>14,!ne.c||!ne.c[0]||ne.c[0]==1&&!ne.e&&ne.c.length==1||!q.c||!q.c[0])return H=new de(Math.pow(+_e(ne),x?q.s*(2-m(q)):+_e(q))),w?H.mod(w):H;if($=q.s<0,w){if(w.c?!w.c[0]:!w.s)return new de(NaN);g=!$&&ne.isInteger()&&w.isInteger(),g&&(ne=ne.mod(w))}else{if(q.e>9&&(ne.e>0||ne.e<-1||(ne.e==0?ne.c[0]>1||x&&ne.c[1]>=24e7:ne.c[0]<8e13||x&&ne.c[0]<=9999975e7)))return M=ne.s<0&&m(q)?-0:0,ne.e>-1&&(M=1/M),new de($?1/M:M);U&&(M=r(U/s+2))}for(x?(D=new de(.5),$&&(q.s=1),B=m(q)):(F=Math.abs(+_e(q)),B=F%2),H=new de(L);;){if(B){if(H=H.times(ne),!H.c)break;M?H.c.length>M&&(H.c.length=M):g&&(H=H.mod(w))}if(F){if(F=e(F/2),F===0)break;B=F%2}else if(q=q.times(D),fe(q,q.e+1,1),q.e>14)B=m(q);else{if(F=+_e(q),F===0)break;B=F%2}ne=ne.times(ne),M?ne.c&&ne.c.length>M&&(ne.c.length=M):g&&(ne=ne.mod(w))}return g?H:($&&(H=L.div(H)),w?H.mod(w):M?fe(H,U,I,Q):H)},S.integerValue=function(q){var w=new de(this);return q==null?q=I:T(q,0,8),fe(w,w.e+1,q)},S.isEqualTo=S.eq=function(q,w){return _(this,new de(q,w))===0},S.isFinite=function(){return!!this.c},S.isGreaterThan=S.gt=function(q,w){return _(this,new de(q,w))>0},S.isGreaterThanOrEqualTo=S.gte=function(q,w){return(w=_(this,new de(q,w)))===1||w===0},S.isInteger=function(){return!!this.c&&y(this.e/s)>this.c.length-2},S.isLessThan=S.lt=function(q,w){return _(this,new de(q,w))<0},S.isLessThanOrEqualTo=S.lte=function(q,w){return(w=_(this,new de(q,w)))===-1||w===0},S.isNaN=function(){return!this.s},S.isNegative=function(){return this.s<0},S.isPositive=function(){return this.s>0},S.isZero=function(){return!!this.c&&this.c[0]==0},S.minus=function(q,w){var D,g,F,M,Q=this,x=Q.s;if(q=new de(q,w),w=q.s,!x||!w)return new de(NaN);if(x!=w)return q.s=-w,Q.plus(q);var $=Q.e/s,B=q.e/s,H=Q.c,ne=q.c;if(!$||!B){if(!H||!ne)return H?(q.s=-w,q):new de(ne?Q:NaN);if(!H[0]||!ne[0])return ne[0]?(q.s=-w,q):new de(H[0]?Q:I==3?-0:0)}if($=y($),B=y(B),H=H.slice(),x=$-B){for((M=x<0)?(x=-x,F=H):(B=$,F=ne),F.reverse(),w=x;w--;F.push(0));F.reverse()}else for(g=(M=(x=H.length)<(w=ne.length))?x:w,x=w=0;w<g;w++)if(H[w]!=ne[w]){M=H[w]<ne[w];break}if(M&&(F=H,H=ne,ne=F,q.s=-q.s),w=(g=ne.length)-(D=H.length),w>0)for(;w--;H[D++]=0);for(w=c-1;g>x;){if(H[--g]<ne[g]){for(D=g;D&&!H[--D];H[D]=w);--H[D],H[g]+=c}H[g]-=ne[g]}for(;H[0]==0;H.splice(0,1),--B);return H[0]?De(q,H,B):(q.s=I==3?-1:1,q.c=[q.e=0],q)},S.modulo=S.mod=function(q,w){var D,g,F=this;return q=new de(q,w),!F.c||!q.s||q.c&&!q.c[0]?new de(NaN):!q.c||F.c&&!F.c[0]?new de(F):(pe==9?(g=q.s,q.s=1,D=X(F,q,0,3),q.s=g,D.s*=g):D=X(F,q,0,pe),q=F.minus(D.times(q)),!q.c[0]&&pe==1&&(q.s=F.s),q)},S.multipliedBy=S.times=function(q,w){var D,g,F,M,Q,x,$,B,H,ne,ue,Te,Fe,Z,oe,P=this,v=P.c,R=(q=new de(q,w)).c;if(!v||!R||!v[0]||!R[0])return!P.s||!q.s||v&&!v[0]&&!R||R&&!R[0]&&!v?q.c=q.e=q.s=null:(q.s*=P.s,!v||!R?q.c=q.e=null:(q.c=[0],q.e=0)),q;for(g=y(P.e/s)+y(q.e/s),q.s*=P.s,$=v.length,ne=R.length,$<ne&&(Fe=v,v=R,R=Fe,F=$,$=ne,ne=F),F=$+ne,Fe=[];F--;Fe.push(0));for(Z=c,oe=d,F=ne;--F>=0;){for(D=0,ue=R[F]%oe,Te=R[F]/oe|0,Q=$,M=F+Q;M>F;)B=v[--Q]%oe,H=v[Q]/oe|0,x=Te*B+H*ue,B=ue*B+x%oe*oe+Fe[M]+D,D=(B/Z|0)+(x/oe|0)+Te*H,Fe[M--]=B%Z;Fe[M]=D}return D?++g:Fe.splice(0,1),De(q,Fe,g)},S.negated=function(){var q=new de(this);return q.s=-q.s||null,q},S.plus=function(q,w){var D,g=this,F=g.s;if(q=new de(q,w),w=q.s,!F||!w)return new de(NaN);if(F!=w)return q.s=-w,g.minus(q);var M=g.e/s,Q=q.e/s,x=g.c,$=q.c;if(!M||!Q){if(!x||!$)return new de(F/0);if(!x[0]||!$[0])return $[0]?q:new de(x[0]?g:F*0)}if(M=y(M),Q=y(Q),x=x.slice(),F=M-Q){for(F>0?(Q=M,D=$):(F=-F,D=x),D.reverse();F--;D.push(0));D.reverse()}for(F=x.length,w=$.length,F-w<0&&(D=$,$=x,x=D,w=F),F=0;w;)F=(x[--w]=x[w]+$[w]+F)/c|0,x[w]=c===x[w]?0:x[w]%c;return F&&(x=[F].concat(x),++Q),De(q,x,Q)},S.precision=S.sd=function(q,w){var D,g,F,M=this;if(q!=null&&q!==!!q)return T(q,1,h),w==null?w=I:T(w,0,8),fe(new de(M),q,w);if(!(D=M.c))return null;if(F=D.length-1,g=F*s+1,F=D[F]){for(;F%10==0;F/=10,g--);for(F=D[0];F>=10;F/=10,g++);}return q&&M.e+1>g&&(g=M.e+1),g},S.shiftedBy=function(q){return T(q,-l,l),this.times("1e"+q)},S.squareRoot=S.sqrt=function(){var q,w,D,g,F,M=this,Q=M.c,x=M.s,$=M.e,B=N+4,H=new de("0.5");if(x!==1||!Q||!Q[0])return new de(!x||x<0&&(!Q||Q[0])?NaN:Q?M:1/0);if(x=Math.sqrt(+_e(M)),x==0||x==1/0?(w=b(Q),(w.length+$)%2==0&&(w+="0"),x=Math.sqrt(+w),$=y(($+1)/2)-($<0||$%2),x==1/0?w="5e"+$:(w=x.toExponential(),w=w.slice(0,w.indexOf("e")+1)+$),D=new de(w)):D=new de(x+""),D.c[0]){for($=D.e,x=$+B,x<3&&(x=0);;)if(F=D,D=H.times(F.plus(X(M,F,B,1))),b(F.c).slice(0,x)===(w=b(D.c)).slice(0,x))if(D.e<$&&--x,w=w.slice(x-3,x+1),w=="9999"||!g&&w=="4999"){if(!g&&(fe(F,F.e+N+2,0),F.times(F).eq(M))){D=F;break}B+=4,x+=4,g=1}else{(!+w||!+w.slice(1)&&w.charAt(0)=="5")&&(fe(D,D.e+N+2,1),q=!D.times(D).eq(M));break}}return fe(D,D.e+N+1,I,q)},S.toExponential=function(q,w){return q!=null&&(T(q,0,h),q++),Ee(this,q,w,1)},S.toFixed=function(q,w){return q!=null&&(T(q,0,h),q=q+this.e+1),Ee(this,q,w)},S.toFormat=function(q,w,D){var g,F=this;if(D==null)q!=null&&w&&typeof w=="object"?(D=w,w=null):q&&typeof q=="object"?(D=q,q=w=null):D=le;else if(typeof D!="object")throw Error(a+"Argument not an object: "+D);if(g=F.toFixed(q,w),F.c){var M,Q=g.split("."),x=+D.groupSize,$=+D.secondaryGroupSize,B=D.groupSeparator||"",H=Q[0],ne=Q[1],ue=F.s<0,Te=ue?H.slice(1):H,Fe=Te.length;if($&&(M=x,x=$,$=M,Fe-=M),x>0&&Fe>0){for(M=Fe%x||x,H=Te.substr(0,M);M<Fe;M+=x)H+=B+Te.substr(M,x);$>0&&(H+=B+Te.slice(M)),ue&&(H="-"+H)}g=ne?H+(D.decimalSeparator||"")+(($=+D.fractionGroupSize)?ne.replace(new RegExp("\\d{"+$+"}\\B","g"),"$&"+(D.fractionGroupSeparator||"")):ne):H}return(D.prefix||"")+g+(D.suffix||"")},S.toFraction=function(q){var w,D,g,F,M,Q,x,$,B,H,ne,ue,Te=this,Fe=Te.c;if(q!=null&&(x=new de(q),!x.isInteger()&&(x.c||x.s!==1)||x.lt(L)))throw Error(a+"Argument "+(x.isInteger()?"out of range: ":"not an integer: ")+_e(x));if(!Fe)return new de(Te);for(w=new de(L),B=D=new de(L),g=$=new de(L),ue=b(Fe),M=w.e=ue.length-Te.e-1,w.c[0]=f[(Q=M%s)<0?s+Q:Q],q=!q||x.comparedTo(w)>0?M>0?w:B:x,Q=ce,ce=1/0,x=new de(ue),$.c[0]=0;H=X(x,w,0,1),F=D.plus(H.times(g)),F.comparedTo(q)!=1;)D=g,g=F,B=$.plus(H.times(F=B)),$=F,w=x.minus(H.times(F=w)),x=F;return F=X(q.minus(D),g,0,1),$=$.plus(F.times(B)),D=D.plus(F.times(g)),$.s=B.s=Te.s,M=M*2,ne=X(B,g,M,I).minus(Te).abs().comparedTo(X($,D,M,I).minus(Te).abs())<1?[B,g]:[$,D],ce=Q,ne},S.toNumber=function(){return+_e(this)},S.toPrecision=function(q,w){return q!=null&&T(q,1,h),Ee(this,q,w,2)},S.toString=function(q){var w,D=this,g=D.s,F=D.e;return F===null?g?(w="Infinity",g<0&&(w="-"+w)):w="NaN":(q==null?w=F<=V||F>=re?A(b(D.c),F):E(b(D.c),F,"0"):q===10&&te?(D=fe(new de(D),N+F+1,I),w=E(b(D.c),D.e,"0")):(T(q,2,me.length,"Base"),w=K(E(b(D.c),F,"0"),10,q,g,!0)),g<0&&D.c[0]&&(w="-"+w)),w},S.valueOf=S.toJSON=function(){return _e(this)},S._isBigNumber=!0,j!=null&&de.set(j),de}function y(j){var X=j|0;return j>0||j===X?X:X-1}function b(j){for(var X,K,O=1,S=j.length,L=j[0]+"";O<S;){for(X=j[O++]+"",K=s-X.length;K--;X="0"+X);L+=X}for(S=L.length;L.charCodeAt(--S)===48;);return L.slice(0,S+1||1)}function _(j,X){var K,O,S=j.c,L=X.c,N=j.s,I=X.s,V=j.e,re=X.e;if(!N||!I)return null;if(K=S&&!S[0],O=L&&!L[0],K||O)return K?O?0:-I:N;if(N!=I)return N;if(K=N<0,O=V==re,!S||!L)return O?0:!S^K?1:-1;if(!O)return V>re^K?1:-1;for(I=(V=S.length)<(re=L.length)?V:re,N=0;N<I;N++)if(S[N]!=L[N])return S[N]>L[N]^K?1:-1;return V==re?0:V>re^K?1:-1}function T(j,X,K,O){if(j<X||j>K||j!==e(j))throw Error(a+(O||"Argument")+(typeof j=="number"?j<X||j>K?" out of range: ":" not an integer: ":" not a primitive number: ")+String(j))}function m(j){var X=j.c.length-1;return y(j.e/s)==X&&j.c[X]%2!=0}function A(j,X){return(j.length>1?j.charAt(0)+"."+j.slice(1):j)+(X<0?"e":"e+")+X}function E(j,X,K){var O,S;if(X<0){for(S=K+".";++X;S+=K);j=S+j}else if(O=j.length,++X>O){for(S=K,X-=O;--X;S+=K);j+=S}else X<O&&(j=j.slice(0,X)+"."+j.slice(X));return j}o=p(),o.default=o.BigNumber=o,n.exports?n.exports=o:(t||(t=typeof self<"u"&&self?self:window),t.BigNumber=o)})(FU)})(sb)),sb.exports}var rE;function EU(){if(rE)return Dd;rE=1,Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.TermFunctionAddition=void 0;const n=ge(),t=ye(),o=xb();let i=class extends n.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.ADDITION,overloads:(0,t.declare)(t.SparqlOperator.ADDITION).arithmetic(()=>(e,a)=>new o.BigNumber(e).plus(a).toNumber()).set([t.TypeURL.XSD_DATE_TIME,t.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,a])=>new t.DateTimeLiteral((0,t.addDurationToDateTime)(e.typedValue,(0,t.defaultedDurationRepresentation)(a.typedValue)))).copy({from:[t.TypeURL.XSD_DATE_TIME,t.TypeURL.XSD_DAY_TIME_DURATION],to:[t.TypeURL.XSD_DATE_TIME,t.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([t.TypeURL.XSD_DATE,t.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,a])=>new t.DateLiteral((0,t.addDurationToDateTime)((0,t.defaultedDateTimeRepresentation)(e.typedValue),(0,t.defaultedDurationRepresentation)(a.typedValue)))).copy({from:[t.TypeURL.XSD_DATE,t.TypeURL.XSD_DAY_TIME_DURATION],to:[t.TypeURL.XSD_DATE,t.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([t.TypeURL.XSD_TIME,t.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,a])=>new t.TimeLiteral((0,t.addDurationToDateTime)((0,t.defaultedDateTimeRepresentation)(e.typedValue),(0,t.defaultedDurationRepresentation)(a.typedValue)))).copy({from:[t.TypeURL.XSD_TIME,t.TypeURL.XSD_DAY_TIME_DURATION],to:[t.TypeURL.XSD_TIME,t.TypeURL.XSD_YEAR_MONTH_DURATION]}).collect()})}};return Dd.TermFunctionAddition=i,Dd}var nE;function RU(){if(nE)return jd;nE=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.ActorFunctionFactoryTermAddition=void 0;const n=ge(),t=ye(),o=EU();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.ADDITION],termFunction:!0})}async run(e){return new o.TermFunctionAddition}};return jd.ActorFunctionFactoryTermAddition=i,jd}var iE;function jU(){return iE||(iE=1,(function(n){var t=wa&&wa.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=wa&&wa.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(RU(),n)})(wa)),wa}var Aa={},Pd={},Nd={},aE;function DU(){if(aE)return Nd;aE=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.TermFunctionCeil=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.CEIL,overloads:(0,t.declare)(t.SparqlOperator.CEIL).numericConverter(()=>r=>Math.ceil(r)).collect()})}};return Nd.TermFunctionCeil=o,Nd}var oE;function PU(){if(oE)return Pd;oE=1,Object.defineProperty(Pd,"__esModule",{value:!0}),Pd.ActorFunctionFactoryTermCeil=void 0;const n=ge(),t=ye(),o=DU();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.CEIL],termFunction:!0})}async run(e){return new o.TermFunctionCeil}};return Pd.ActorFunctionFactoryTermCeil=i,Pd}var uE;function NU(){return uE||(uE=1,(function(n){var t=Aa&&Aa.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Aa&&Aa.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(PU(),n)})(Aa)),Aa}var Fa={},Md={},Id={},sE;function MU(){if(sE)return Id;sE=1,Object.defineProperty(Id,"__esModule",{value:!0}),Id.TermFunctionContains=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.CONTAINS,overloads:(0,t.declare)(t.SparqlOperator.CONTAINS).onBinaryTyped([t.TypeAlias.SPARQL_STRINGLY,t.TypeURL.XSD_STRING],()=>(r,e)=>(0,t.bool)(r.includes(e))).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.RDF_LANG_STRING],()=>(r,e)=>{if(r.language!==e.language)throw new t.IncompatibleLanguageOperation(r,e);return(0,t.bool)(r.typedValue.includes(e.typedValue))}).collect()})}};return Id.TermFunctionContains=o,Id}var cE;function IU(){if(cE)return Md;cE=1,Object.defineProperty(Md,"__esModule",{value:!0}),Md.ActorFunctionFactoryTermContains=void 0;const n=ge(),t=ye(),o=MU();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.CONTAINS],termFunction:!0})}async run(e){return new o.TermFunctionContains}};return Md.ActorFunctionFactoryTermContains=i,Md}var lE;function LU(){return lE||(lE=1,(function(n){var t=Fa&&Fa.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Fa&&Fa.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(IU(),n)})(Fa)),Fa}var Ea={},Ld={},xd={},fE;function xU(){if(fE)return xd;fE=1,Object.defineProperty(xd,"__esModule",{value:!0}),xd.TermFunctionDatatype=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.DATATYPE,overloads:(0,t.declare)(t.SparqlOperator.DATATYPE).onLiteral1(()=>r=>new t.NamedNode(r.dataType)).collect()})}};return xd.TermFunctionDatatype=o,xd}var dE;function qU(){if(dE)return Ld;dE=1,Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.ActorFunctionFactoryTermDatatype=void 0;const n=ge(),t=ye(),o=xU();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.DATATYPE],termFunction:!0})}async run(e){return new o.TermFunctionDatatype}};return Ld.ActorFunctionFactoryTermDatatype=i,Ld}var pE;function BU(){return pE||(pE=1,(function(n){var t=Ea&&Ea.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ea&&Ea.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(qU(),n)})(Ea)),Ea}var Ra={},qd={},Bd={},hE;function CU(){if(hE)return Bd;hE=1,Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.TermFunctionDay=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.DAY,overloads:(0,t.declare)(t.SparqlOperator.DAY).onDateTime1(()=>r=>(0,t.integer)(r.typedValue.day)).set([t.TypeURL.XSD_DATE],()=>([r])=>(0,t.integer)(r.typedValue.day)).collect()})}};return Bd.TermFunctionDay=o,Bd}var yE;function QU(){if(yE)return qd;yE=1,Object.defineProperty(qd,"__esModule",{value:!0}),qd.ActorFunctionFactoryTermDay=void 0;const n=ge(),t=ye(),o=CU();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.DAY],termFunction:!0})}async run(e){return new o.TermFunctionDay}};return qd.ActorFunctionFactoryTermDay=i,qd}var _E;function UU(){return _E||(_E=1,(function(n){var t=Ra&&Ra.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ra&&Ra.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(QU(),n)})(Ra)),Ra}var ja={},Cd={},Qd={},gE;function VU(){if(gE)return Qd;gE=1,Object.defineProperty(Qd,"__esModule",{value:!0}),Qd.TermFunctionEncodeForUri=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.ENCODE_FOR_URI,overloads:(0,t.declare)(t.SparqlOperator.ENCODE_FOR_URI).onStringly1Typed(()=>r=>(0,t.string)(encodeURI(r))).collect()})}};return Qd.TermFunctionEncodeForUri=o,Qd}var mE;function GU(){if(mE)return Cd;mE=1,Object.defineProperty(Cd,"__esModule",{value:!0}),Cd.ActorFunctionFactoryTermEncodeForUri=void 0;const n=ge(),t=ye(),o=VU();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.ENCODE_FOR_URI],termFunction:!0})}async run(e){return new o.TermFunctionEncodeForUri}};return Cd.ActorFunctionFactoryTermEncodeForUri=i,Cd}var bE;function XU(){return bE||(bE=1,(function(n){var t=ja&&ja.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ja&&ja.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(GU(),n)})(ja)),ja}var Da={},Ud={},Vd={},vE;function zU(){if(vE)return Vd;vE=1,Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.TermFunctionDivision=void 0;const n=ge(),t=ye(),o=xb();let i=class extends n.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.DIVISION,overloads:(0,t.declare)(t.SparqlOperator.DIVISION).arithmetic(()=>(e,a)=>new o.BigNumber(e).div(a).toNumber()).onBinaryTyped([t.TypeURL.XSD_INTEGER,t.TypeURL.XSD_INTEGER],()=>(e,a)=>{if(a===0)throw new t.ExpressionError("Integer division by 0");return(0,t.decimal)(new o.BigNumber(e).div(a).toNumber())}).collect()})}};return Vd.TermFunctionDivision=i,Vd}var TE;function $U(){if(TE)return Ud;TE=1,Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.ActorFunctionFactoryTermDivision=void 0;const n=ge(),t=ye(),o=zU();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.DIVISION],termFunction:!0})}async run(e){return new o.TermFunctionDivision}};return Ud.ActorFunctionFactoryTermDivision=i,Ud}var OE;function HU(){return OE||(OE=1,(function(n){var t=Da&&Da.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Da&&Da.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o($U(),n)})(Da)),Da}var Pa={},Gd={},Xd={},SE;function JU(){if(SE)return Xd;SE=1,Object.defineProperty(Xd,"__esModule",{value:!0}),Xd.TermFunctionEquality=void 0;const n=ge(),t=Be(),o=ye();let i=class extends n.TermFunctionBase{constructor(){super({arity:2,operator:o.SparqlOperator.EQUAL,overloads:(0,o.declare)(o.SparqlOperator.EQUAL).numberTest(()=>(e,a)=>e===a).stringTest(()=>(e,a)=>e.localeCompare(a)===0).set([o.TypeURL.RDF_LANG_STRING,o.TypeURL.RDF_LANG_STRING],()=>([e,a])=>(0,o.bool)(e.str()===a.str()&&e.language===a.language)).set([o.TypeAlias.SPARQL_STRINGLY,o.TypeAlias.SPARQL_STRINGLY],()=>()=>(0,o.bool)(!1)).booleanTest(()=>(e,a)=>e===a).dateTimeTest(e=>(a,u)=>(0,o.toUTCDate)(a,e.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime()===(0,o.toUTCDate)(u,e.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime()).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],to:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_DATE]}).set(["quad","quad"],e=>([a,u])=>(0,o.bool)(this.applyOnTerms([a.subject,u.subject],e).coerceEBV()&&this.applyOnTerms([a.predicate,u.predicate],e).coerceEBV()&&this.applyOnTerms([a.object,u.object],e).coerceEBV()&&this.applyOnTerms([a.graph,u.graph],e).coerceEBV()),!1).set(["term","term"],e=>([a,u])=>{const c=a.toRDF(e.context.getSafe(t.KeysInitQuery.dataFactory)),s=u.toRDF(e.context.getSafe(t.KeysInitQuery.dataFactory)),l=c.equals(s);if(!l&&c.termType==="Literal"&&s.termType==="Literal")throw new o.RDFEqualTypeError([a,u]);return(0,o.bool)(l)},!1).set([o.TypeURL.XSD_DURATION,o.TypeURL.XSD_DURATION],()=>([e,a])=>(0,o.bool)((0,o.yearMonthDurationsToMonths)((0,o.defaultedYearMonthDurationRepresentation)(e.typedValue))===(0,o.yearMonthDurationsToMonths)((0,o.defaultedYearMonthDurationRepresentation)(a.typedValue))&&(0,o.dayTimeDurationsToSeconds)((0,o.defaultedDayTimeDurationRepresentation)(e.typedValue))===(0,o.dayTimeDurationsToSeconds)((0,o.defaultedDayTimeDurationRepresentation)(a.typedValue)))).set([o.TypeURL.XSD_TIME,o.TypeURL.XSD_TIME],e=>([a,u])=>(0,o.bool)((0,o.toUTCDate)((0,o.defaultedDateTimeRepresentation)(a.typedValue),e.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime()===(0,o.toUTCDate)((0,o.defaultedDateTimeRepresentation)(u.typedValue),e.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime())).collect()})}};return Xd.TermFunctionEquality=i,Xd}var wE;function KU(){if(wE)return Gd;wE=1,Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.ActorFunctionFactoryTermEquality=void 0;const n=ge(),t=ye(),o=JU();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.EQUAL],termFunction:!0})}async run(e){return new o.TermFunctionEquality}};return Gd.ActorFunctionFactoryTermEquality=i,Gd}var AE;function WU(){return AE||(AE=1,(function(n){var t=Pa&&Pa.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Pa&&Pa.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(KU(),n)})(Pa)),Pa}var Na={},zd={},$d={},FE;function YU(){if(FE)return $d;FE=1,Object.defineProperty($d,"__esModule",{value:!0}),$d.TermFunctionFloor=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.FLOOR,overloads:(0,t.declare)(t.SparqlOperator.FLOOR).numericConverter(()=>r=>Math.floor(r)).collect()})}};return $d.TermFunctionFloor=o,$d}var EE;function ZU(){if(EE)return zd;EE=1,Object.defineProperty(zd,"__esModule",{value:!0}),zd.ActorFunctionFactoryTermFloor=void 0;const n=ge(),t=ye(),o=YU();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.FLOOR],termFunction:!0})}async run(e){return new o.TermFunctionFloor}};return zd.ActorFunctionFactoryTermFloor=i,zd}var RE;function kU(){return RE||(RE=1,(function(n){var t=Na&&Na.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Na&&Na.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(ZU(),n)})(Na)),Na}var Ma={},Hd={},Jd={},jE;function eV(){if(jE)return Jd;jE=1,Object.defineProperty(Jd,"__esModule",{value:!0}),Jd.TermFunctionHours=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.HOURS,overloads:(0,t.declare)(t.SparqlOperator.HOURS).onDateTime1(()=>r=>(0,t.integer)(r.typedValue.hours)).set([t.TypeURL.XSD_TIME],()=>([r])=>(0,t.integer)(r.typedValue.hours)).collect()})}};return Jd.TermFunctionHours=o,Jd}var DE;function tV(){if(DE)return Hd;DE=1,Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.ActorFunctionFactoryTermHours=void 0;const n=ge(),t=ye(),o=eV();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.HOURS],termFunction:!0})}async run(e){return new o.TermFunctionHours}};return Hd.ActorFunctionFactoryTermHours=i,Hd}var PE;function rV(){return PE||(PE=1,(function(n){var t=Ma&&Ma.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ma&&Ma.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(tV(),n)})(Ma)),Ma}var Ia={},Kd={},Wd={},NE;function nV(){if(NE)return Wd;NE=1,Object.defineProperty(Wd,"__esModule",{value:!0}),Wd.TermFunctionIsIri=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.IS_IRI,overloads:(0,t.declare)(t.SparqlOperator.IS_IRI).onTerm1(()=>r=>(0,t.bool)(r.termType==="namedNode")).collect()})}};return Wd.TermFunctionIsIri=o,Wd}var ME;function iV(){if(ME)return Kd;ME=1,Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.ActorFunctionFactoryTermIsIri=void 0;const n=ge(),t=ye(),o=nV();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IS_IRI,t.SparqlOperator.IS_URI],termFunction:!0})}async run(e){return new o.TermFunctionIsIri}};return Kd.ActorFunctionFactoryTermIsIri=i,Kd}var IE;function aV(){return IE||(IE=1,(function(n){var t=Ia&&Ia.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ia&&Ia.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(iV(),n)})(Ia)),Ia}var La={},Yd={},Zd={},LE;function oV(){if(LE)return Zd;LE=1,Object.defineProperty(Zd,"__esModule",{value:!0}),Zd.TermFunctionIsBlank=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.IS_BLANK,overloads:(0,t.declare)(t.SparqlOperator.IS_BLANK).onTerm1(()=>r=>(0,t.bool)(r.termType==="blankNode")).collect()})}};return Zd.TermFunctionIsBlank=o,Zd}var xE;function uV(){if(xE)return Yd;xE=1,Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.ActorFunctionFactoryTermIsBlank=void 0;const n=ge(),t=ye(),o=oV();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IS_BLANK],termFunction:!0})}async run(e){return new o.TermFunctionIsBlank}};return Yd.ActorFunctionFactoryTermIsBlank=i,Yd}var qE;function sV(){return qE||(qE=1,(function(n){var t=La&&La.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=La&&La.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(uV(),n)})(La)),La}var xa={},kd={},ep={},BE;function cV(){if(BE)return ep;BE=1,Object.defineProperty(ep,"__esModule",{value:!0}),ep.TermFunctionIsLiteral=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.IS_LITERAL,overloads:(0,t.declare)(t.SparqlOperator.IS_LITERAL).onTerm1(()=>r=>(0,t.bool)(r.termType==="literal")).collect()})}};return ep.TermFunctionIsLiteral=o,ep}var CE;function lV(){if(CE)return kd;CE=1,Object.defineProperty(kd,"__esModule",{value:!0}),kd.ActorFunctionFactoryTermIsLiteral=void 0;const n=ge(),t=ye(),o=cV();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IS_LITERAL],termFunction:!0})}async run(e){return new o.TermFunctionIsLiteral}};return kd.ActorFunctionFactoryTermIsLiteral=i,kd}var QE;function fV(){return QE||(QE=1,(function(n){var t=xa&&xa.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=xa&&xa.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(lV(),n)})(xa)),xa}var qa={},tp={},rp={},Ba={},Tn={},UE;function dV(){if(UE)return Tn;UE=1,Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.removeDotSegmentsOfPath=Tn.removeDotSegments=Tn.resolve=void 0;function n(r,e){e=e||"";const a=e.indexOf("#");if(a>0&&(e=e.substr(0,a)),!r.length){if(e.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${e}' for value '${r}'`);return e}if(r.startsWith("?")){const h=e.indexOf("?");return h>0&&(e=e.substr(0,h)),e+r}if(r.startsWith("#"))return e+r;if(!e.length){const h=r.indexOf(":");if(h<0)throw new Error(`Found invalid relative IRI '${r}' for a missing baseIRI`);return o(r,h)}const u=r.indexOf(":");if(u>=0)return o(r,u);const c=e.indexOf(":");if(c<0)throw new Error(`Found invalid baseIRI '${e}' for value '${r}'`);const s=e.substr(0,c+1);if(r.indexOf("//")===0)return s+o(r,u);let l;if(e.indexOf("//",c)===c+1){if(l=e.indexOf("/",c+3),l<0)return e.length>c+3?e+"/"+o(r,u):s+o(r,u)}else if(l=e.indexOf("/",c+1),l<0)return s+o(r,u);if(r.indexOf("/")===0)return e.substr(0,l)+t(r);let f=e.substr(l);const d=f.lastIndexOf("/");return d>=0&&d<f.length-1&&(f=f.substr(0,d+1),r[0]==="."&&r[1]!=="."&&r[1]!=="/"&&r[2]&&(r=r.substr(1))),r=f+r,r=t(r),e.substr(0,l)+r}Tn.resolve=n;function t(r){const e=[];let a=0;for(;a<r.length;)switch(r[a]){case"/":if(r[a+1]===".")if(r[a+2]==="."){if(!i(r[a+3])){e.push([]),a++;break}e.pop(),r[a+3]||e.push([]),a+=3}else{if(!i(r[a+2])){e.push([]),a++;break}r[a+2]||e.push([]),a+=2}else e.push([]),a++;break;case"#":case"?":e.length||e.push([]),e[e.length-1].push(r.substr(a)),a=r.length;break;default:e.length||e.push([]),e[e.length-1].push(r[a]),a++;break}return"/"+e.map(u=>u.join("")).join("/")}Tn.removeDotSegments=t;function o(r,e){let a=e+1;e>=0?r[e+1]==="/"&&r[e+2]==="/"&&(a=e+3):r[0]==="/"&&r[1]==="/"&&(a=2);const u=r.indexOf("/",a);if(u<0)return r;const c=r.substr(0,u),s=r.substr(u);return c+t(s)}Tn.removeDotSegmentsOfPath=o;function i(r){return!r||r==="#"||r==="?"||r==="/"}return Tn}var VE;function pV(){return VE||(VE=1,(function(n){var t=Ba&&Ba.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e),Object.defineProperty(i,a,{enumerable:!0,get:function(){return r[e]}})}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ba&&Ba.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(dV(),n)})(Ba)),Ba}var GE;function hV(){if(GE)return rp;GE=1,Object.defineProperty(rp,"__esModule",{value:!0}),rp.TermFunctionIri=void 0;const n=ge(),t=Be(),o=ye(),i=pV();let r=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:o.SparqlOperator.IRI,overloads:(0,o.declare)(o.SparqlOperator.IRI).set(["namedNode"],a=>u=>{const c=u[0],s=(0,i.resolve)(c.str(),a.context.get(t.KeysInitQuery.baseIRI)??"");return new o.NamedNode(s)}).onString1(a=>u=>{const c=(0,i.resolve)(u.str(),a.context.get(t.KeysInitQuery.baseIRI)??"");return new o.NamedNode(c)}).collect()})}};return rp.TermFunctionIri=r,rp}var XE;function yV(){if(XE)return tp;XE=1,Object.defineProperty(tp,"__esModule",{value:!0}),tp.ActorFunctionFactoryTermIri=void 0;const n=ge(),t=ye(),o=hV();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IRI,t.SparqlOperator.URI],termFunction:!0})}async run(e){return new o.TermFunctionIri}};return tp.ActorFunctionFactoryTermIri=i,tp}var zE;function _V(){return zE||(zE=1,(function(n){var t=qa&&qa.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=qa&&qa.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(yV(),n)})(qa)),qa}var Ca={},np={},ip={},$E;function gV(){if($E)return ip;$E=1,Object.defineProperty(ip,"__esModule",{value:!0}),ip.TermFunctionIsNumeric=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.IS_NUMERIC,overloads:(0,t.declare)(t.SparqlOperator.IS_NUMERIC).onNumeric1(()=>()=>(0,t.bool)(!0)).onTerm1(()=>()=>(0,t.bool)(!1)).collect()})}};return ip.TermFunctionIsNumeric=o,ip}var HE;function mV(){if(HE)return np;HE=1,Object.defineProperty(np,"__esModule",{value:!0}),np.ActorFunctionFactoryTermIsNumeric=void 0;const n=ge(),t=ye(),o=gV();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IS_NUMERIC],termFunction:!0})}async run(e){return new o.TermFunctionIsNumeric}};return np.ActorFunctionFactoryTermIsNumeric=i,np}var JE;function bV(){return JE||(JE=1,(function(n){var t=Ca&&Ca.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ca&&Ca.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(mV(),n)})(Ca)),Ca}var Qa={},ap={},op={},KE;function vV(){if(KE)return op;KE=1,Object.defineProperty(op,"__esModule",{value:!0}),op.TermFunctionLang=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.LANG,overloads:(0,t.declare)(t.SparqlOperator.LANG).onLiteral1(()=>r=>(0,t.string)(r.language??"")).collect()})}};return op.TermFunctionLang=o,op}var WE;function TV(){if(WE)return ap;WE=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.ActorFunctionFactoryTermLang=void 0;const n=ge(),t=ye(),o=vV();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LANG],termFunction:!0})}async run(e){return new o.TermFunctionLang}};return ap.ActorFunctionFactoryTermLang=i,ap}var YE;function OV(){return YE||(YE=1,(function(n){var t=Qa&&Qa.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Qa&&Qa.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(TV(),n)})(Qa)),Qa}var Ua={},up={},sp={},ZE;function SV(){if(ZE)return sp;ZE=1,Object.defineProperty(sp,"__esModule",{value:!0}),sp.TermFunctionIsTriple=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.IS_TRIPLE,overloads:(0,t.declare)(t.SparqlOperator.IS_TRIPLE).onTerm1(()=>r=>(0,t.bool)(r.termType==="quad")).collect()})}};return sp.TermFunctionIsTriple=o,sp}var kE;function wV(){if(kE)return up;kE=1,Object.defineProperty(up,"__esModule",{value:!0}),up.ActorFunctionFactoryTermIsTriple=void 0;const n=ge(),t=ye(),o=SV();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IS_TRIPLE],termFunction:!0})}async run(e){return new o.TermFunctionIsTriple}};return up.ActorFunctionFactoryTermIsTriple=i,up}var eR;function AV(){return eR||(eR=1,(function(n){var t=Ua&&Ua.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ua&&Ua.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(wV(),n)})(Ua)),Ua}var Va={},cp={},lp={},tR;function FV(){if(tR)return lp;tR=1,Object.defineProperty(lp,"__esModule",{value:!0}),lp.TermFunctionLangmatches=void 0;const n=ge(),t=ye();let o=class ks extends n.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.LANG_MATCHES,overloads:(0,t.declare)(t.SparqlOperator.LANG_MATCHES).onBinaryTyped([t.TypeURL.XSD_STRING,t.TypeURL.XSD_STRING],()=>(r,e)=>(0,t.bool)(ks.langMatches(r,e))).collect()})}static langMatches(r,e){const a=r.split("-"),u=e.split("-");if(!ks.matchLangTag(u[0],a[0])&&!ks.isWildCard(a[0]))return!1;let c=1,s=1;for(;s<u.length;){if(ks.isWildCard(u[s])){s++;continue}if(c===a.length)return!1;if(ks.matchLangTag(u[s],a[c])){c++,s++;continue}if(a[c].length===1)return!1;c++}return!0}static isWildCard(r){return r==="*"}static matchLangTag(r,e){return new RegExp(`/${r}/`,"iu").test(`/${e}/`)}};return lp.TermFunctionLangmatches=o,lp}var rR;function EV(){if(rR)return cp;rR=1,Object.defineProperty(cp,"__esModule",{value:!0}),cp.ActorFunctionFactoryTermLangmatches=void 0;const n=ge(),t=ye(),o=FV();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LANG_MATCHES],termFunction:!0})}async run(e){return new o.TermFunctionLangmatches}};return cp.ActorFunctionFactoryTermLangmatches=i,cp}var nR;function RV(){return nR||(nR=1,(function(n){var t=Va&&Va.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Va&&Va.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(EV(),n)})(Va)),Va}var Ga={},fp={},dp={},iR;function jV(){if(iR)return dp;iR=1,Object.defineProperty(dp,"__esModule",{value:!0}),dp.TermFunctionMinutes=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.MINUTES,overloads:(0,t.declare)(t.SparqlOperator.MINUTES).onDateTime1(()=>r=>(0,t.integer)(r.typedValue.minutes)).set([t.TypeURL.XSD_TIME],()=>([r])=>(0,t.integer)(r.typedValue.minutes)).collect()})}};return dp.TermFunctionMinutes=o,dp}var aR;function DV(){if(aR)return fp;aR=1,Object.defineProperty(fp,"__esModule",{value:!0}),fp.ActorFunctionFactoryTermMinutes=void 0;const n=ge(),t=ye(),o=jV();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.MINUTES],termFunction:!0})}async run(e){return new o.TermFunctionMinutes}};return fp.ActorFunctionFactoryTermMinutes=i,fp}var oR;function PV(){return oR||(oR=1,(function(n){var t=Ga&&Ga.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ga&&Ga.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(DV(),n)})(Ga)),Ga}var Xa={},pp={},hp={},uR;function NV(){if(uR)return hp;uR=1,Object.defineProperty(hp,"__esModule",{value:!0}),hp.TermFunctionLcase=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.LCASE,overloads:(0,t.declare)(t.SparqlOperator.LCASE).onString1Typed(()=>r=>(0,t.string)(r.toLowerCase())).onLangString1(()=>r=>(0,t.langString)(r.typedValue.toLowerCase(),r.language)).collect()})}};return hp.TermFunctionLcase=o,hp}var sR;function MV(){if(sR)return pp;sR=1,Object.defineProperty(pp,"__esModule",{value:!0}),pp.ActorFunctionFactoryTermLcase=void 0;const n=ge(),t=ye(),o=NV();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LCASE],termFunction:!0})}async run(e){return new o.TermFunctionLcase}};return pp.ActorFunctionFactoryTermLcase=i,pp}var cR;function IV(){return cR||(cR=1,(function(n){var t=Xa&&Xa.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Xa&&Xa.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(MV(),n)})(Xa)),Xa}var za={},yp={},_p={},v1={exports:{}},lR;function LV(){return lR||(lR=1,(function(n,t){(function(o){n.exports=o()})(function(o){var i=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(_,T){var m=_[0],A=_[1],E=_[2],j=_[3];m+=(A&E|~A&j)+T[0]-680876936|0,m=(m<<7|m>>>25)+A|0,j+=(m&A|~m&E)+T[1]-389564586|0,j=(j<<12|j>>>20)+m|0,E+=(j&m|~j&A)+T[2]+606105819|0,E=(E<<17|E>>>15)+j|0,A+=(E&j|~E&m)+T[3]-1044525330|0,A=(A<<22|A>>>10)+E|0,m+=(A&E|~A&j)+T[4]-176418897|0,m=(m<<7|m>>>25)+A|0,j+=(m&A|~m&E)+T[5]+1200080426|0,j=(j<<12|j>>>20)+m|0,E+=(j&m|~j&A)+T[6]-1473231341|0,E=(E<<17|E>>>15)+j|0,A+=(E&j|~E&m)+T[7]-45705983|0,A=(A<<22|A>>>10)+E|0,m+=(A&E|~A&j)+T[8]+1770035416|0,m=(m<<7|m>>>25)+A|0,j+=(m&A|~m&E)+T[9]-1958414417|0,j=(j<<12|j>>>20)+m|0,E+=(j&m|~j&A)+T[10]-42063|0,E=(E<<17|E>>>15)+j|0,A+=(E&j|~E&m)+T[11]-1990404162|0,A=(A<<22|A>>>10)+E|0,m+=(A&E|~A&j)+T[12]+1804603682|0,m=(m<<7|m>>>25)+A|0,j+=(m&A|~m&E)+T[13]-40341101|0,j=(j<<12|j>>>20)+m|0,E+=(j&m|~j&A)+T[14]-1502002290|0,E=(E<<17|E>>>15)+j|0,A+=(E&j|~E&m)+T[15]+1236535329|0,A=(A<<22|A>>>10)+E|0,m+=(A&j|E&~j)+T[1]-165796510|0,m=(m<<5|m>>>27)+A|0,j+=(m&E|A&~E)+T[6]-1069501632|0,j=(j<<9|j>>>23)+m|0,E+=(j&A|m&~A)+T[11]+643717713|0,E=(E<<14|E>>>18)+j|0,A+=(E&m|j&~m)+T[0]-373897302|0,A=(A<<20|A>>>12)+E|0,m+=(A&j|E&~j)+T[5]-701558691|0,m=(m<<5|m>>>27)+A|0,j+=(m&E|A&~E)+T[10]+38016083|0,j=(j<<9|j>>>23)+m|0,E+=(j&A|m&~A)+T[15]-660478335|0,E=(E<<14|E>>>18)+j|0,A+=(E&m|j&~m)+T[4]-405537848|0,A=(A<<20|A>>>12)+E|0,m+=(A&j|E&~j)+T[9]+568446438|0,m=(m<<5|m>>>27)+A|0,j+=(m&E|A&~E)+T[14]-1019803690|0,j=(j<<9|j>>>23)+m|0,E+=(j&A|m&~A)+T[3]-187363961|0,E=(E<<14|E>>>18)+j|0,A+=(E&m|j&~m)+T[8]+1163531501|0,A=(A<<20|A>>>12)+E|0,m+=(A&j|E&~j)+T[13]-1444681467|0,m=(m<<5|m>>>27)+A|0,j+=(m&E|A&~E)+T[2]-51403784|0,j=(j<<9|j>>>23)+m|0,E+=(j&A|m&~A)+T[7]+1735328473|0,E=(E<<14|E>>>18)+j|0,A+=(E&m|j&~m)+T[12]-1926607734|0,A=(A<<20|A>>>12)+E|0,m+=(A^E^j)+T[5]-378558|0,m=(m<<4|m>>>28)+A|0,j+=(m^A^E)+T[8]-2022574463|0,j=(j<<11|j>>>21)+m|0,E+=(j^m^A)+T[11]+1839030562|0,E=(E<<16|E>>>16)+j|0,A+=(E^j^m)+T[14]-35309556|0,A=(A<<23|A>>>9)+E|0,m+=(A^E^j)+T[1]-1530992060|0,m=(m<<4|m>>>28)+A|0,j+=(m^A^E)+T[4]+1272893353|0,j=(j<<11|j>>>21)+m|0,E+=(j^m^A)+T[7]-155497632|0,E=(E<<16|E>>>16)+j|0,A+=(E^j^m)+T[10]-1094730640|0,A=(A<<23|A>>>9)+E|0,m+=(A^E^j)+T[13]+681279174|0,m=(m<<4|m>>>28)+A|0,j+=(m^A^E)+T[0]-358537222|0,j=(j<<11|j>>>21)+m|0,E+=(j^m^A)+T[3]-722521979|0,E=(E<<16|E>>>16)+j|0,A+=(E^j^m)+T[6]+76029189|0,A=(A<<23|A>>>9)+E|0,m+=(A^E^j)+T[9]-640364487|0,m=(m<<4|m>>>28)+A|0,j+=(m^A^E)+T[12]-421815835|0,j=(j<<11|j>>>21)+m|0,E+=(j^m^A)+T[15]+530742520|0,E=(E<<16|E>>>16)+j|0,A+=(E^j^m)+T[2]-995338651|0,A=(A<<23|A>>>9)+E|0,m+=(E^(A|~j))+T[0]-198630844|0,m=(m<<6|m>>>26)+A|0,j+=(A^(m|~E))+T[7]+1126891415|0,j=(j<<10|j>>>22)+m|0,E+=(m^(j|~A))+T[14]-1416354905|0,E=(E<<15|E>>>17)+j|0,A+=(j^(E|~m))+T[5]-57434055|0,A=(A<<21|A>>>11)+E|0,m+=(E^(A|~j))+T[12]+1700485571|0,m=(m<<6|m>>>26)+A|0,j+=(A^(m|~E))+T[3]-1894986606|0,j=(j<<10|j>>>22)+m|0,E+=(m^(j|~A))+T[10]-1051523|0,E=(E<<15|E>>>17)+j|0,A+=(j^(E|~m))+T[1]-2054922799|0,A=(A<<21|A>>>11)+E|0,m+=(E^(A|~j))+T[8]+1873313359|0,m=(m<<6|m>>>26)+A|0,j+=(A^(m|~E))+T[15]-30611744|0,j=(j<<10|j>>>22)+m|0,E+=(m^(j|~A))+T[6]-1560198380|0,E=(E<<15|E>>>17)+j|0,A+=(j^(E|~m))+T[13]+1309151649|0,A=(A<<21|A>>>11)+E|0,m+=(E^(A|~j))+T[4]-145523070|0,m=(m<<6|m>>>26)+A|0,j+=(A^(m|~E))+T[11]-1120210379|0,j=(j<<10|j>>>22)+m|0,E+=(m^(j|~A))+T[2]+718787259|0,E=(E<<15|E>>>17)+j|0,A+=(j^(E|~m))+T[9]-343485551|0,A=(A<<21|A>>>11)+E|0,_[0]=m+_[0]|0,_[1]=A+_[1]|0,_[2]=E+_[2]|0,_[3]=j+_[3]|0}function e(_){var T=[],m;for(m=0;m<64;m+=4)T[m>>2]=_.charCodeAt(m)+(_.charCodeAt(m+1)<<8)+(_.charCodeAt(m+2)<<16)+(_.charCodeAt(m+3)<<24);return T}function a(_){var T=[],m;for(m=0;m<64;m+=4)T[m>>2]=_[m]+(_[m+1]<<8)+(_[m+2]<<16)+(_[m+3]<<24);return T}function u(_){var T=_.length,m=[1732584193,-271733879,-1732584194,271733878],A,E,j,X,K,O;for(A=64;A<=T;A+=64)r(m,e(_.substring(A-64,A)));for(_=_.substring(A-64),E=_.length,j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A=0;A<E;A+=1)j[A>>2]|=_.charCodeAt(A)<<(A%4<<3);if(j[A>>2]|=128<<(A%4<<3),A>55)for(r(m,j),A=0;A<16;A+=1)j[A]=0;return X=T*8,X=X.toString(16).match(/(.*?)(.{0,8})$/),K=parseInt(X[2],16),O=parseInt(X[1],16)||0,j[14]=K,j[15]=O,r(m,j),m}function c(_){var T=_.length,m=[1732584193,-271733879,-1732584194,271733878],A,E,j,X,K,O;for(A=64;A<=T;A+=64)r(m,a(_.subarray(A-64,A)));for(_=A-64<T?_.subarray(A-64):new Uint8Array(0),E=_.length,j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A=0;A<E;A+=1)j[A>>2]|=_[A]<<(A%4<<3);if(j[A>>2]|=128<<(A%4<<3),A>55)for(r(m,j),A=0;A<16;A+=1)j[A]=0;return X=T*8,X=X.toString(16).match(/(.*?)(.{0,8})$/),K=parseInt(X[2],16),O=parseInt(X[1],16)||0,j[14]=K,j[15]=O,r(m,j),m}function s(_){var T="",m;for(m=0;m<4;m+=1)T+=i[_>>m*8+4&15]+i[_>>m*8&15];return T}function l(_){var T;for(T=0;T<_.length;T+=1)_[T]=s(_[T]);return _.join("")}l(u("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&(function(){function _(T,m){return T=T|0||0,T<0?Math.max(T+m,0):Math.min(T,m)}ArrayBuffer.prototype.slice=function(T,m){var A=this.byteLength,E=_(T,A),j=A,X,K,O,S;return m!==o&&(j=_(m,A)),E>j?new ArrayBuffer(0):(X=j-E,K=new ArrayBuffer(X),O=new Uint8Array(K),S=new Uint8Array(this,E,X),O.set(S),K)}})();function f(_){return/[\u0080-\uFFFF]/.test(_)&&(_=unescape(encodeURIComponent(_))),_}function d(_,T){var m=_.length,A=new ArrayBuffer(m),E=new Uint8Array(A),j;for(j=0;j<m;j+=1)E[j]=_.charCodeAt(j);return T?E:A}function h(_){return String.fromCharCode.apply(null,new Uint8Array(_))}function p(_,T,m){var A=new Uint8Array(_.byteLength+T.byteLength);return A.set(new Uint8Array(_)),A.set(new Uint8Array(T),_.byteLength),A}function y(_){var T=[],m=_.length,A;for(A=0;A<m-1;A+=2)T.push(parseInt(_.substr(A,2),16));return String.fromCharCode.apply(String,T)}function b(){this.reset()}return b.prototype.append=function(_){return this.appendBinary(f(_)),this},b.prototype.appendBinary=function(_){this._buff+=_,this._length+=_.length;var T=this._buff.length,m;for(m=64;m<=T;m+=64)r(this._hash,e(this._buff.substring(m-64,m)));return this._buff=this._buff.substring(m-64),this},b.prototype.end=function(_){var T=this._buff,m=T.length,A,E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j;for(A=0;A<m;A+=1)E[A>>2]|=T.charCodeAt(A)<<(A%4<<3);return this._finish(E,m),j=l(this._hash),_&&(j=y(j)),this.reset(),j},b.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},b.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},b.prototype.setState=function(_){return this._buff=_.buff,this._length=_.length,this._hash=_.hash,this},b.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},b.prototype._finish=function(_,T){var m=T,A,E,j;if(_[m>>2]|=128<<(m%4<<3),m>55)for(r(this._hash,_),m=0;m<16;m+=1)_[m]=0;A=this._length*8,A=A.toString(16).match(/(.*?)(.{0,8})$/),E=parseInt(A[2],16),j=parseInt(A[1],16)||0,_[14]=E,_[15]=j,r(this._hash,_)},b.hash=function(_,T){return b.hashBinary(f(_),T)},b.hashBinary=function(_,T){var m=u(_),A=l(m);return T?y(A):A},b.ArrayBuffer=function(){this.reset()},b.ArrayBuffer.prototype.append=function(_){var T=p(this._buff.buffer,_),m=T.length,A;for(this._length+=_.byteLength,A=64;A<=m;A+=64)r(this._hash,a(T.subarray(A-64,A)));return this._buff=A-64<m?new Uint8Array(T.buffer.slice(A-64)):new Uint8Array(0),this},b.ArrayBuffer.prototype.end=function(_){var T=this._buff,m=T.length,A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E,j;for(E=0;E<m;E+=1)A[E>>2]|=T[E]<<(E%4<<3);return this._finish(A,m),j=l(this._hash),_&&(j=y(j)),this.reset(),j},b.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},b.ArrayBuffer.prototype.getState=function(){var _=b.prototype.getState.call(this);return _.buff=h(_.buff),_},b.ArrayBuffer.prototype.setState=function(_){return _.buff=d(_.buff,!0),b.prototype.setState.call(this,_)},b.ArrayBuffer.prototype.destroy=b.prototype.destroy,b.ArrayBuffer.prototype._finish=b.prototype._finish,b.ArrayBuffer.hash=function(_,T){var m=c(new Uint8Array(_)),A=l(m);return T?y(A):A},b})})(v1)),v1.exports}var fR;function xV(){if(fR)return _p;fR=1,Object.defineProperty(_p,"__esModule",{value:!0}),_p.TermFunctionMd5=void 0;const n=ge(),t=ye(),o=LV();let i=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.MD5,overloads:(0,t.declare)(t.SparqlOperator.MD5).onString1Typed(()=>e=>(0,t.string)((0,o.hash)(e))).collect()})}};return _p.TermFunctionMd5=i,_p}var dR;function qV(){if(dR)return yp;dR=1,Object.defineProperty(yp,"__esModule",{value:!0}),yp.ActorFunctionFactoryTermMd5=void 0;const n=ge(),t=ye(),o=xV();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.MD5],termFunction:!0})}async run(e){return new o.TermFunctionMd5}};return yp.ActorFunctionFactoryTermMd5=i,yp}var pR;function BV(){return pR||(pR=1,(function(n){var t=za&&za.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=za&&za.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(qV(),n)})(za)),za}var $a={},gp={},mp={},hR;function CV(){if(hR)return mp;hR=1,Object.defineProperty(mp,"__esModule",{value:!0}),mp.TermFunctionMonth=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.MONTH,overloads:(0,t.declare)(t.SparqlOperator.MONTH).onDateTime1(()=>r=>(0,t.integer)(r.typedValue.month)).set([t.TypeURL.XSD_DATE],()=>([r])=>(0,t.integer)(r.typedValue.month)).collect()})}};return mp.TermFunctionMonth=o,mp}var yR;function QV(){if(yR)return gp;yR=1,Object.defineProperty(gp,"__esModule",{value:!0}),gp.ActorFunctionFactoryTermMonth=void 0;const n=ge(),t=ye(),o=CV();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.MONTH],termFunction:!0})}async run(e){return new o.TermFunctionMonth}};return gp.ActorFunctionFactoryTermMonth=i,gp}var _R;function UV(){return _R||(_R=1,(function(n){var t=$a&&$a.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=$a&&$a.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(QV(),n)})($a)),$a}var Ha={},bp={},vp={},gR;function VV(){if(gR)return vp;gR=1,Object.defineProperty(vp,"__esModule",{value:!0}),vp.TermFunctionNot=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.NOT,overloads:(0,t.declare)(t.SparqlOperator.NOT).onTerm1(()=>r=>(0,t.bool)(!r.coerceEBV())).collect()})}};return vp.TermFunctionNot=o,vp}var mR;function GV(){if(mR)return bp;mR=1,Object.defineProperty(bp,"__esModule",{value:!0}),bp.ActorFunctionFactoryTermNot=void 0;const n=ge(),t=ye(),o=VV();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.NOT],termFunction:!0})}async run(e){return new o.TermFunctionNot}};return bp.ActorFunctionFactoryTermNot=i,bp}var bR;function XV(){return bR||(bR=1,(function(n){var t=Ha&&Ha.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ha&&Ha.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(GV(),n)})(Ha)),Ha}var Ja={},Tp={},Op={},vR;function zV(){if(vR)return Op;vR=1,Object.defineProperty(Op,"__esModule",{value:!0}),Op.TermFunctionMultiplication=void 0;const n=ge(),t=ye(),o=xb();let i=class extends n.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.MULTIPLICATION,overloads:(0,t.declare)(t.SparqlOperator.MULTIPLICATION).arithmetic(()=>(e,a)=>new o.BigNumber(e).times(a).toNumber()).collect()})}};return Op.TermFunctionMultiplication=i,Op}var TR;function $V(){if(TR)return Tp;TR=1,Object.defineProperty(Tp,"__esModule",{value:!0}),Tp.ActorFunctionFactoryTermMultiplication=void 0;const n=ge(),t=ye(),o=zV();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.MULTIPLICATION],termFunction:!0})}async run(e){return new o.TermFunctionMultiplication}};return Tp.ActorFunctionFactoryTermMultiplication=i,Tp}var OR;function HV(){return OR||(OR=1,(function(n){var t=Ja&&Ja.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ja&&Ja.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o($V(),n)})(Ja)),Ja}var Ka={},Sp={},wp={},SR;function JV(){if(SR)return wp;SR=1,Object.defineProperty(wp,"__esModule",{value:!0}),wp.TermFunctionNow=void 0;const n=ge(),t=Be(),o=ye();let i=class extends n.TermFunctionBase{constructor(){super({arity:0,operator:o.SparqlOperator.NOW,overloads:(0,o.declare)(o.SparqlOperator.NOW).set([],e=>()=>new o.DateTimeLiteral((0,o.toDateTimeRepresentation)({date:e.context.getSafe(t.KeysInitQuery.queryTimestamp),timeZone:e.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)}))).collect()})}};return wp.TermFunctionNow=i,wp}var wR;function KV(){if(wR)return Sp;wR=1,Object.defineProperty(Sp,"__esModule",{value:!0}),Sp.ActorFunctionFactoryTermNow=void 0;const n=ge(),t=ye(),o=JV();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.NOW],termFunction:!0})}async run(e){return new o.TermFunctionNow}};return Sp.ActorFunctionFactoryTermNow=i,Sp}var AR;function WV(){return AR||(AR=1,(function(n){var t=Ka&&Ka.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ka&&Ka.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(KV(),n)})(Ka)),Ka}var Wa={},Ap={},Fp={},FR;function YV(){if(FR)return Fp;FR=1,Object.defineProperty(Fp,"__esModule",{value:!0}),Fp.TermFunctionObject=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.OBJECT,overloads:(0,t.declare)(t.SparqlOperator.OBJECT).onQuad1(()=>r=>r.object).collect()})}};return Fp.TermFunctionObject=o,Fp}var ER;function ZV(){if(ER)return Ap;ER=1,Object.defineProperty(Ap,"__esModule",{value:!0}),Ap.ActorFunctionFactoryTermObject=void 0;const n=ge(),t=ye(),o=YV();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.OBJECT],termFunction:!0})}async run(e){return new o.TermFunctionObject}};return Ap.ActorFunctionFactoryTermObject=i,Ap}var RR;function kV(){return RR||(RR=1,(function(n){var t=Wa&&Wa.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Wa&&Wa.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(ZV(),n)})(Wa)),Wa}var Ya={},Ep={},Rp={},jR;function eG(){if(jR)return Rp;jR=1,Object.defineProperty(Rp,"__esModule",{value:!0}),Rp.TermFunctionPredicate=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.PREDICATE,overloads:(0,t.declare)(t.SparqlOperator.PREDICATE).onQuad1(()=>r=>r.predicate).collect()})}};return Rp.TermFunctionPredicate=o,Rp}var DR;function tG(){if(DR)return Ep;DR=1,Object.defineProperty(Ep,"__esModule",{value:!0}),Ep.ActorFunctionFactoryTermPredicate=void 0;const n=ge(),t=ye(),o=eG();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.PREDICATE],termFunction:!0})}async run(e){return new o.TermFunctionPredicate}};return Ep.ActorFunctionFactoryTermPredicate=i,Ep}var PR;function rG(){return PR||(PR=1,(function(n){var t=Ya&&Ya.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ya&&Ya.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(tG(),n)})(Ya)),Ya}var Za={},jp={},Dp={},NR;function nG(){if(NR)return Dp;NR=1,Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.TermFunctionRand=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:0,operator:t.SparqlOperator.RAND,overloads:(0,t.declare)(t.SparqlOperator.RAND).set([],()=>()=>(0,t.double)(Math.random())).collect()})}};return Dp.TermFunctionRand=o,Dp}var MR;function iG(){if(MR)return jp;MR=1,Object.defineProperty(jp,"__esModule",{value:!0}),jp.ActorFunctionFactoryTermRand=void 0;const n=ge(),t=ye(),o=nG();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.RAND],termFunction:!0})}async run(e){return new o.TermFunctionRand}};return jp.ActorFunctionFactoryTermRand=i,jp}var IR;function aG(){return IR||(IR=1,(function(n){var t=Za&&Za.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Za&&Za.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(iG(),n)})(Za)),Za}var ka={},Pp={},Np={},eo={},Mp={},Ip={},LR;function Gq(){if(LR)return Ip;LR=1,Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.TermFunctionRegex=void 0;const n=ge(),t=ye();let o=class Nn extends n.TermFunctionBase{constructor(){super({arity:[2,3],operator:t.SparqlOperator.REGEX,overloads:(0,t.declare)(t.SparqlOperator.REGEX).onBinaryTyped([t.TypeAlias.SPARQL_STRINGLY,t.TypeURL.XSD_STRING],Nn.regex2).onTernaryTyped([t.TypeAlias.SPARQL_STRINGLY,t.TypeURL.XSD_STRING,t.TypeURL.XSD_STRING],Nn.regex3).collect()})}static regex2(){return(r,e)=>(0,t.bool)(Nn.matches(r,e))}static regex3(){return(r,e,a)=>(0,t.bool)(Nn.matches(r,e,a))}static matches(r,e,a=""){return a=Nn.cleanFlags(a),a.includes("x")&&(e=Nn.flagX(e)),a.includes("q")&&(e=Nn.flagQ(e)),new RegExp(e,a.replaceAll(/[qx]/gu,"")).test(r)}static cleanFlags(r){if(!/^[imsxq]*$/u.test(r))throw new Error("Invalid flags");const e=[...r].find((a,u,c)=>c.indexOf(a)!==u);if(e)throw new Error(`Duplicate flag: ${e}`);return r?.includes("q")&&(r=r.replaceAll(/[msx]/gu,"")),`${r}u`}static flagX(r){if(!r)return r;let e=r[0];for(;["	",`
`,"\r"," "].includes(e);)r=r.slice(1),e=r[0];let a=e==="[";for(let u=1;u<r.length;u++){const c=r[u];["	",`
`,"\r"," "].includes(c)&&!a?(r=r.slice(0,u)+r.slice(u+1),u--):c==="["&&e!=="\\"?a=!0:c==="]"&&e!=="\\"&&(a=!1),e=c}return r}static flagQ(r){return r.replaceAll(/([?+*.{}()[\]\\|])/gu,"\\$1").replaceAll(/^\^/gu,"\\^").replaceAll(/\$$/gu,"\\$")}};return Ip.TermFunctionRegex=o,Ip}var xR;function oG(){if(xR)return Mp;xR=1,Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.ActorFunctionFactoryTermRegex=void 0;const n=ge(),t=ye(),o=Gq();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.REGEX],termFunction:!0})}async run(e){return new o.TermFunctionRegex}};return Mp.ActorFunctionFactoryTermRegex=i,Mp}var qR;function Xq(){return qR||(qR=1,(function(n){var t=eo&&eo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=eo&&eo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(oG(),n),o(Gq(),n)})(eo)),eo}var BR;function uG(){if(BR)return Np;BR=1,Object.defineProperty(Np,"__esModule",{value:!0}),Np.TermFunctionReplace=void 0;const n=Xq(),t=ge(),o=ye();let i=class Dg extends t.TermFunctionBase{constructor(){super({arity:[3,4],operator:o.SparqlOperator.REPLACE,overloads:(0,o.declare)(o.SparqlOperator.REPLACE).onTernaryTyped([o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING],()=>(e,a,u)=>(0,o.string)(Dg.replace(e,a,u))).set([o.TypeURL.RDF_LANG_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING],()=>([e,a,u])=>{const c=Dg.replace(e.typedValue,a.typedValue,u.typedValue);return(0,o.langString)(c,e.language)}).onQuaternaryTyped([o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING],()=>(e,a,u,c)=>(0,o.string)(Dg.replace(e,a,u,c))).set([o.TypeURL.RDF_LANG_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING],()=>([e,a,u,c])=>{const s=Dg.replace(e.typedValue,a.typedValue,u.typedValue,c.typedValue);return(0,o.langString)(s,e.language)}).collect()})}static replace(e,a,u,c=""){return c=n.TermFunctionRegex.cleanFlags(c),c.includes("x")&&(a=n.TermFunctionRegex.flagX(a)),c.includes("q")?a=n.TermFunctionRegex.flagQ(a):u=u.replaceAll("$0",()=>"$&"),c=`${c.replaceAll(/[qx]/gu,"")}g`,e.replaceAll(new RegExp(a,c),u)}};return Np.TermFunctionReplace=i,Np}var CR;function sG(){if(CR)return Pp;CR=1,Object.defineProperty(Pp,"__esModule",{value:!0}),Pp.ActorFunctionFactoryTermReplace=void 0;const n=ge(),t=ye(),o=uG();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.REPLACE],termFunction:!0})}async run(e){return new o.TermFunctionReplace}};return Pp.ActorFunctionFactoryTermReplace=i,Pp}var QR;function cG(){return QR||(QR=1,(function(n){var t=ka&&ka.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ka&&ka.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(sG(),n)})(ka)),ka}var to={},Lp={},xp={},UR;function lG(){if(UR)return xp;UR=1,Object.defineProperty(xp,"__esModule",{value:!0}),xp.TermFunctionRound=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.ROUND,overloads:(0,t.declare)(t.SparqlOperator.ROUND).numericConverter(()=>r=>Math.round(r)).collect()})}};return xp.TermFunctionRound=o,xp}var VR;function fG(){if(VR)return Lp;VR=1,Object.defineProperty(Lp,"__esModule",{value:!0}),Lp.ActorFunctionFactoryTermRound=void 0;const n=ge(),t=ye(),o=lG();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.ROUND],termFunction:!0})}async run(e){return new o.TermFunctionRound}};return Lp.ActorFunctionFactoryTermRound=i,Lp}var GR;function dG(){return GR||(GR=1,(function(n){var t=to&&to.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=to&&to.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(fG(),n)})(to)),to}var ro={},qp={},Bp={},T1={},yt={},O1,XR;function im(){if(XR)return O1;XR=1,O1=n;function n(t,o){if(!t)throw new Error(o||"Assertion failed")}return n.equal=function(o,i,r){if(o!=i)throw new Error(r||"Assertion failed: "+o+" != "+i)},O1}var qm={exports:{}},zR;function pG(){return zR||(zR=1,typeof Object.create=="function"?qm.exports=function(t,o){o&&(t.super_=o,t.prototype=Object.create(o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:qm.exports=function(t,o){if(o){t.super_=o;var i=function(){};i.prototype=o.prototype,t.prototype=new i,t.prototype.constructor=t}}),qm.exports}var $R;function fn(){if($R)return yt;$R=1;var n=im(),t=pG();yt.inherits=t;function o(N,I){return(N.charCodeAt(I)&64512)!==55296||I<0||I+1>=N.length?!1:(N.charCodeAt(I+1)&64512)===56320}function i(N,I){if(Array.isArray(N))return N.slice();if(!N)return[];var V=[];if(typeof N=="string")if(I){if(I==="hex")for(N=N.replace(/[^a-z0-9]+/ig,""),N.length%2!==0&&(N="0"+N),Y=0;Y<N.length;Y+=2)V.push(parseInt(N[Y]+N[Y+1],16))}else for(var re=0,Y=0;Y<N.length;Y++){var ce=N.charCodeAt(Y);ce<128?V[re++]=ce:ce<2048?(V[re++]=ce>>6|192,V[re++]=ce&63|128):o(N,Y)?(ce=65536+((ce&1023)<<10)+(N.charCodeAt(++Y)&1023),V[re++]=ce>>18|240,V[re++]=ce>>12&63|128,V[re++]=ce>>6&63|128,V[re++]=ce&63|128):(V[re++]=ce>>12|224,V[re++]=ce>>6&63|128,V[re++]=ce&63|128)}else for(Y=0;Y<N.length;Y++)V[Y]=N[Y]|0;return V}yt.toArray=i;function r(N){for(var I="",V=0;V<N.length;V++)I+=u(N[V].toString(16));return I}yt.toHex=r;function e(N){var I=N>>>24|N>>>8&65280|N<<8&16711680|(N&255)<<24;return I>>>0}yt.htonl=e;function a(N,I){for(var V="",re=0;re<N.length;re++){var Y=N[re];I==="little"&&(Y=e(Y)),V+=c(Y.toString(16))}return V}yt.toHex32=a;function u(N){return N.length===1?"0"+N:N}yt.zero2=u;function c(N){return N.length===7?"0"+N:N.length===6?"00"+N:N.length===5?"000"+N:N.length===4?"0000"+N:N.length===3?"00000"+N:N.length===2?"000000"+N:N.length===1?"0000000"+N:N}yt.zero8=c;function s(N,I,V,re){var Y=V-I;n(Y%4===0);for(var ce=new Array(Y/4),ae=0,pe=I;ae<ce.length;ae++,pe+=4){var U;re==="big"?U=N[pe]<<24|N[pe+1]<<16|N[pe+2]<<8|N[pe+3]:U=N[pe+3]<<24|N[pe+2]<<16|N[pe+1]<<8|N[pe],ce[ae]=U>>>0}return ce}yt.join32=s;function l(N,I){for(var V=new Array(N.length*4),re=0,Y=0;re<N.length;re++,Y+=4){var ce=N[re];I==="big"?(V[Y]=ce>>>24,V[Y+1]=ce>>>16&255,V[Y+2]=ce>>>8&255,V[Y+3]=ce&255):(V[Y+3]=ce>>>24,V[Y+2]=ce>>>16&255,V[Y+1]=ce>>>8&255,V[Y]=ce&255)}return V}yt.split32=l;function f(N,I){return N>>>I|N<<32-I}yt.rotr32=f;function d(N,I){return N<<I|N>>>32-I}yt.rotl32=d;function h(N,I){return N+I>>>0}yt.sum32=h;function p(N,I,V){return N+I+V>>>0}yt.sum32_3=p;function y(N,I,V,re){return N+I+V+re>>>0}yt.sum32_4=y;function b(N,I,V,re,Y){return N+I+V+re+Y>>>0}yt.sum32_5=b;function _(N,I,V,re){var Y=N[I],ce=N[I+1],ae=re+ce>>>0,pe=(ae<re?1:0)+V+Y;N[I]=pe>>>0,N[I+1]=ae}yt.sum64=_;function T(N,I,V,re){var Y=I+re>>>0,ce=(Y<I?1:0)+N+V;return ce>>>0}yt.sum64_hi=T;function m(N,I,V,re){var Y=I+re;return Y>>>0}yt.sum64_lo=m;function A(N,I,V,re,Y,ce,ae,pe){var U=0,le=I;le=le+re>>>0,U+=le<I?1:0,le=le+ce>>>0,U+=le<ce?1:0,le=le+pe>>>0,U+=le<pe?1:0;var me=N+V+Y+ae+U;return me>>>0}yt.sum64_4_hi=A;function E(N,I,V,re,Y,ce,ae,pe){var U=I+re+ce+pe;return U>>>0}yt.sum64_4_lo=E;function j(N,I,V,re,Y,ce,ae,pe,U,le){var me=0,te=I;te=te+re>>>0,me+=te<I?1:0,te=te+ce>>>0,me+=te<ce?1:0,te=te+pe>>>0,me+=te<pe?1:0,te=te+le>>>0,me+=te<le?1:0;var de=N+V+Y+ae+U+me;return de>>>0}yt.sum64_5_hi=j;function X(N,I,V,re,Y,ce,ae,pe,U,le){var me=I+re+ce+pe+le;return me>>>0}yt.sum64_5_lo=X;function K(N,I,V){var re=I<<32-V|N>>>V;return re>>>0}yt.rotr64_hi=K;function O(N,I,V){var re=N<<32-V|I>>>V;return re>>>0}yt.rotr64_lo=O;function S(N,I,V){return N>>>V}yt.shr64_hi=S;function L(N,I,V){var re=N<<32-V|I>>>V;return re>>>0}return yt.shr64_lo=L,yt}var S1={},HR;function am(){if(HR)return S1;HR=1;var n=fn(),t=im();function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return S1.BlockHash=o,o.prototype.update=function(r,e){if(r=n.toArray(r,e),this.pending?this.pending=this.pending.concat(r):this.pending=r,this.pendingTotal+=r.length,this.pending.length>=this._delta8){r=this.pending;var a=r.length%this._delta8;this.pending=r.slice(r.length-a,r.length),this.pending.length===0&&(this.pending=null),r=n.join32(r,0,r.length-a,this.endian);for(var u=0;u<r.length;u+=this._delta32)this._update(r,u,u+this._delta32)}return this},o.prototype.digest=function(r){return this.update(this._pad()),t(this.pending===null),this._digest(r)},o.prototype._pad=function(){var r=this.pendingTotal,e=this._delta8,a=e-(r+this.padLength)%e,u=new Array(a+this.padLength);u[0]=128;for(var c=1;c<a;c++)u[c]=0;if(r<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)u[c++]=0;u[c++]=0,u[c++]=0,u[c++]=0,u[c++]=0,u[c++]=r>>>24&255,u[c++]=r>>>16&255,u[c++]=r>>>8&255,u[c++]=r&255}else for(u[c++]=r&255,u[c++]=r>>>8&255,u[c++]=r>>>16&255,u[c++]=r>>>24&255,u[c++]=0,u[c++]=0,u[c++]=0,u[c++]=0,s=8;s<this.padLength;s++)u[c++]=0;return u},S1}var no={},an={},JR;function zq(){if(JR)return an;JR=1;var n=fn(),t=n.rotr32;function o(l,f,d,h){if(l===0)return i(f,d,h);if(l===1||l===3)return e(f,d,h);if(l===2)return r(f,d,h)}an.ft_1=o;function i(l,f,d){return l&f^~l&d}an.ch32=i;function r(l,f,d){return l&f^l&d^f&d}an.maj32=r;function e(l,f,d){return l^f^d}an.p32=e;function a(l){return t(l,2)^t(l,13)^t(l,22)}an.s0_256=a;function u(l){return t(l,6)^t(l,11)^t(l,25)}an.s1_256=u;function c(l){return t(l,7)^t(l,18)^l>>>3}an.g0_256=c;function s(l){return t(l,17)^t(l,19)^l>>>10}return an.g1_256=s,an}var w1,KR;function hG(){if(KR)return w1;KR=1;var n=fn(),t=am(),o=zq(),i=n.rotl32,r=n.sum32,e=n.sum32_5,a=o.ft_1,u=t.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function s(){if(!(this instanceof s))return new s;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return n.inherits(s,u),w1=s,s.blockSize=512,s.outSize=160,s.hmacStrength=80,s.padLength=64,s.prototype._update=function(f,d){for(var h=this.W,p=0;p<16;p++)h[p]=f[d+p];for(;p<h.length;p++)h[p]=i(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);var y=this.h[0],b=this.h[1],_=this.h[2],T=this.h[3],m=this.h[4];for(p=0;p<h.length;p++){var A=~~(p/20),E=e(i(y,5),a(A,b,_,T),m,h[p],c[A]);m=T,T=_,_=i(b,30),b=y,y=E}this.h[0]=r(this.h[0],y),this.h[1]=r(this.h[1],b),this.h[2]=r(this.h[2],_),this.h[3]=r(this.h[3],T),this.h[4]=r(this.h[4],m)},s.prototype._digest=function(f){return f==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")},w1}var A1,WR;function $q(){if(WR)return A1;WR=1;var n=fn(),t=am(),o=zq(),i=im(),r=n.sum32,e=n.sum32_4,a=n.sum32_5,u=o.ch32,c=o.maj32,s=o.s0_256,l=o.s1_256,f=o.g0_256,d=o.g1_256,h=t.BlockHash,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;h.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=p,this.W=new Array(64)}return n.inherits(y,h),A1=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(_,T){for(var m=this.W,A=0;A<16;A++)m[A]=_[T+A];for(;A<m.length;A++)m[A]=e(d(m[A-2]),m[A-7],f(m[A-15]),m[A-16]);var E=this.h[0],j=this.h[1],X=this.h[2],K=this.h[3],O=this.h[4],S=this.h[5],L=this.h[6],N=this.h[7];for(i(this.k.length===m.length),A=0;A<m.length;A++){var I=a(N,l(O),u(O,S,L),this.k[A],m[A]),V=r(s(E),c(E,j,X));N=L,L=S,S=O,O=r(K,I),K=X,X=j,j=E,E=r(I,V)}this.h[0]=r(this.h[0],E),this.h[1]=r(this.h[1],j),this.h[2]=r(this.h[2],X),this.h[3]=r(this.h[3],K),this.h[4]=r(this.h[4],O),this.h[5]=r(this.h[5],S),this.h[6]=r(this.h[6],L),this.h[7]=r(this.h[7],N)},y.prototype._digest=function(_){return _==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")},A1}var F1,YR;function yG(){if(YR)return F1;YR=1;var n=fn(),t=$q();function o(){if(!(this instanceof o))return new o;t.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return n.inherits(o,t),F1=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(r){return r==="hex"?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")},F1}var E1,ZR;function Hq(){if(ZR)return E1;ZR=1;var n=fn(),t=am(),o=im(),i=n.rotr64_hi,r=n.rotr64_lo,e=n.shr64_hi,a=n.shr64_lo,u=n.sum64,c=n.sum64_hi,s=n.sum64_lo,l=n.sum64_4_hi,f=n.sum64_4_lo,d=n.sum64_5_hi,h=n.sum64_5_lo,p=t.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;p.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}n.inherits(b,p),E1=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(V,re){for(var Y=this.W,ce=0;ce<32;ce++)Y[ce]=V[re+ce];for(;ce<Y.length;ce+=2){var ae=L(Y[ce-4],Y[ce-3]),pe=N(Y[ce-4],Y[ce-3]),U=Y[ce-14],le=Y[ce-13],me=O(Y[ce-30],Y[ce-29]),te=S(Y[ce-30],Y[ce-29]),de=Y[ce-32],Ee=Y[ce-31];Y[ce]=l(ae,pe,U,le,me,te,de,Ee),Y[ce+1]=f(ae,pe,U,le,me,te,de,Ee)}},b.prototype._update=function(V,re){this._prepareBlock(V,re);var Y=this.W,ce=this.h[0],ae=this.h[1],pe=this.h[2],U=this.h[3],le=this.h[4],me=this.h[5],te=this.h[6],de=this.h[7],Ee=this.h[8],Re=this.h[9],De=this.h[10],fe=this.h[11],_e=this.h[12],q=this.h[13],w=this.h[14],D=this.h[15];o(this.k.length===Y.length);for(var g=0;g<Y.length;g+=2){var F=w,M=D,Q=X(Ee,Re),x=K(Ee,Re),$=_(Ee,Re,De,fe,_e),B=T(Ee,Re,De,fe,_e,q),H=this.k[g],ne=this.k[g+1],ue=Y[g],Te=Y[g+1],Fe=d(F,M,Q,x,$,B,H,ne,ue,Te),Z=h(F,M,Q,x,$,B,H,ne,ue,Te);F=E(ce,ae),M=j(ce,ae),Q=m(ce,ae,pe,U,le),x=A(ce,ae,pe,U,le,me);var oe=c(F,M,Q,x),P=s(F,M,Q,x);w=_e,D=q,_e=De,q=fe,De=Ee,fe=Re,Ee=c(te,de,Fe,Z),Re=s(de,de,Fe,Z),te=le,de=me,le=pe,me=U,pe=ce,U=ae,ce=c(Fe,Z,oe,P),ae=s(Fe,Z,oe,P)}u(this.h,0,ce,ae),u(this.h,2,pe,U),u(this.h,4,le,me),u(this.h,6,te,de),u(this.h,8,Ee,Re),u(this.h,10,De,fe),u(this.h,12,_e,q),u(this.h,14,w,D)},b.prototype._digest=function(V){return V==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")};function _(I,V,re,Y,ce){var ae=I&re^~I&ce;return ae<0&&(ae+=4294967296),ae}function T(I,V,re,Y,ce,ae){var pe=V&Y^~V&ae;return pe<0&&(pe+=4294967296),pe}function m(I,V,re,Y,ce){var ae=I&re^I&ce^re&ce;return ae<0&&(ae+=4294967296),ae}function A(I,V,re,Y,ce,ae){var pe=V&Y^V&ae^Y&ae;return pe<0&&(pe+=4294967296),pe}function E(I,V){var re=i(I,V,28),Y=i(V,I,2),ce=i(V,I,7),ae=re^Y^ce;return ae<0&&(ae+=4294967296),ae}function j(I,V){var re=r(I,V,28),Y=r(V,I,2),ce=r(V,I,7),ae=re^Y^ce;return ae<0&&(ae+=4294967296),ae}function X(I,V){var re=i(I,V,14),Y=i(I,V,18),ce=i(V,I,9),ae=re^Y^ce;return ae<0&&(ae+=4294967296),ae}function K(I,V){var re=r(I,V,14),Y=r(I,V,18),ce=r(V,I,9),ae=re^Y^ce;return ae<0&&(ae+=4294967296),ae}function O(I,V){var re=i(I,V,1),Y=i(I,V,8),ce=e(I,V,7),ae=re^Y^ce;return ae<0&&(ae+=4294967296),ae}function S(I,V){var re=r(I,V,1),Y=r(I,V,8),ce=a(I,V,7),ae=re^Y^ce;return ae<0&&(ae+=4294967296),ae}function L(I,V){var re=i(I,V,19),Y=i(V,I,29),ce=e(I,V,6),ae=re^Y^ce;return ae<0&&(ae+=4294967296),ae}function N(I,V){var re=r(I,V,19),Y=r(V,I,29),ce=a(I,V,6),ae=re^Y^ce;return ae<0&&(ae+=4294967296),ae}return E1}var R1,kR;function _G(){if(kR)return R1;kR=1;var n=fn(),t=Hq();function o(){if(!(this instanceof o))return new o;t.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return n.inherits(o,t),R1=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(r){return r==="hex"?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")},R1}var ej;function gG(){return ej||(ej=1,no.sha1=hG(),no.sha224=yG(),no.sha256=$q(),no.sha384=_G(),no.sha512=Hq()),no}var j1={},tj;function mG(){if(tj)return j1;tj=1;var n=fn(),t=am(),o=n.rotl32,i=n.sum32,r=n.sum32_3,e=n.sum32_4,a=t.BlockHash;function u(){if(!(this instanceof u))return new u;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}n.inherits(u,a),j1.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(b,_){for(var T=this.h[0],m=this.h[1],A=this.h[2],E=this.h[3],j=this.h[4],X=T,K=m,O=A,S=E,L=j,N=0;N<80;N++){var I=i(o(e(T,c(N,m,A,E),b[f[N]+_],s(N)),h[N]),j);T=j,j=E,E=o(A,10),A=m,m=I,I=i(o(e(X,c(79-N,K,O,S),b[d[N]+_],l(N)),p[N]),L),X=L,L=S,S=o(O,10),O=K,K=I}I=r(this.h[1],A,S),this.h[1]=r(this.h[2],E,L),this.h[2]=r(this.h[3],j,X),this.h[3]=r(this.h[4],T,K),this.h[4]=r(this.h[0],m,O),this.h[0]=I},u.prototype._digest=function(b){return b==="hex"?n.toHex32(this.h,"little"):n.split32(this.h,"little")};function c(y,b,_,T){return y<=15?b^_^T:y<=31?b&_|~b&T:y<=47?(b|~_)^T:y<=63?b&T|_&~T:b^(_|~T)}function s(y){return y<=15?0:y<=31?1518500249:y<=47?1859775393:y<=63?2400959708:2840853838}function l(y){return y<=15?1352829926:y<=31?1548603684:y<=47?1836072691:y<=63?2053994217:0}var f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],d=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],p=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return j1}var D1,rj;function bG(){if(rj)return D1;rj=1;var n=fn(),t=im();function o(i,r,e){if(!(this instanceof o))return new o(i,r,e);this.Hash=i,this.blockSize=i.blockSize/8,this.outSize=i.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(r,e))}return D1=o,o.prototype._init=function(r){r.length>this.blockSize&&(r=new this.Hash().update(r).digest()),t(r.length<=this.blockSize);for(var e=r.length;e<this.blockSize;e++)r.push(0);for(e=0;e<r.length;e++)r[e]^=54;for(this.inner=new this.Hash().update(r),e=0;e<r.length;e++)r[e]^=106;this.outer=new this.Hash().update(r)},o.prototype.update=function(r,e){return this.inner.update(r,e),this},o.prototype.digest=function(r){return this.outer.update(this.inner.digest()),this.outer.digest(r)},D1}var nj;function qb(){return nj||(nj=1,(function(n){var t=n;t.utils=fn(),t.common=am(),t.sha=gG(),t.ripemd=mG(),t.hmac=bG(),t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160})(T1)),T1}var ij;function vG(){if(ij)return Bp;ij=1,Object.defineProperty(Bp,"__esModule",{value:!0}),Bp.TermFunctionSha1=void 0;const n=ge(),t=ye(),o=qb();let i=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.SHA1,overloads:(0,t.declare)(t.SparqlOperator.SHA1).onString1Typed(()=>e=>(0,t.string)((0,o.sha1)().update(e).digest("hex"))).collect()})}};return Bp.TermFunctionSha1=i,Bp}var aj;function TG(){if(aj)return qp;aj=1,Object.defineProperty(qp,"__esModule",{value:!0}),qp.ActorFunctionFactoryTermSha1=void 0;const n=ge(),t=ye(),o=vG();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SHA1],termFunction:!0})}async run(e){return new o.TermFunctionSha1}};return qp.ActorFunctionFactoryTermSha1=i,qp}var oj;function OG(){return oj||(oj=1,(function(n){var t=ro&&ro.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ro&&ro.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(TG(),n)})(ro)),ro}var io={},Cp={},Qp={},uj;function SG(){if(uj)return Qp;uj=1,Object.defineProperty(Qp,"__esModule",{value:!0}),Qp.TermFunctionSeconds=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.SECONDS,overloads:(0,t.declare)(t.SparqlOperator.SECONDS).onDateTime1(()=>r=>(0,t.decimal)(r.typedValue.seconds)).set([t.TypeURL.XSD_TIME],()=>([r])=>(0,t.integer)(r.typedValue.seconds)).collect()})}};return Qp.TermFunctionSeconds=o,Qp}var sj;function wG(){if(sj)return Cp;sj=1,Object.defineProperty(Cp,"__esModule",{value:!0}),Cp.ActorFunctionFactoryTermSeconds=void 0;const n=ge(),t=ye(),o=SG();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SECONDS],termFunction:!0})}async run(e){return new o.TermFunctionSeconds}};return Cp.ActorFunctionFactoryTermSeconds=i,Cp}var cj;function AG(){return cj||(cj=1,(function(n){var t=io&&io.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=io&&io.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(wG(),n)})(io)),io}var ao={},Up={},Vp={},lj;function FG(){if(lj)return Vp;lj=1,Object.defineProperty(Vp,"__esModule",{value:!0}),Vp.TermFunctionSha256=void 0;const n=ge(),t=ye(),o=qb();let i=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.SHA256,overloads:(0,t.declare)(t.SparqlOperator.SHA256).onString1Typed(()=>e=>(0,t.string)((0,o.sha256)().update(e).digest("hex"))).collect()})}};return Vp.TermFunctionSha256=i,Vp}var fj;function EG(){if(fj)return Up;fj=1,Object.defineProperty(Up,"__esModule",{value:!0}),Up.ActorFunctionFactoryTermSha256=void 0;const n=ge(),t=ye(),o=FG();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SHA256],termFunction:!0})}async run(e){return new o.TermFunctionSha256}};return Up.ActorFunctionFactoryTermSha256=i,Up}var dj;function RG(){return dj||(dj=1,(function(n){var t=ao&&ao.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ao&&ao.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(EG(),n)})(ao)),ao}var oo={},Gp={},Xp={},pj;function jG(){if(pj)return Xp;pj=1,Object.defineProperty(Xp,"__esModule",{value:!0}),Xp.TermFunctionSha384=void 0;const n=ge(),t=ye(),o=qb();let i=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.SHA384,overloads:(0,t.declare)(t.SparqlOperator.SHA384).onString1Typed(()=>e=>(0,t.string)((0,o.sha384)().update(e).digest("hex"))).collect()})}};return Xp.TermFunctionSha384=i,Xp}var hj;function DG(){if(hj)return Gp;hj=1,Object.defineProperty(Gp,"__esModule",{value:!0}),Gp.ActorFunctionFactoryTermSha384=void 0;const n=ge(),t=ye(),o=jG();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SHA384],termFunction:!0})}async run(e){return new o.TermFunctionSha384}};return Gp.ActorFunctionFactoryTermSha384=i,Gp}var yj;function PG(){return yj||(yj=1,(function(n){var t=oo&&oo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=oo&&oo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(DG(),n)})(oo)),oo}var uo={},zp={},$p={},_j;function NG(){if(_j)return $p;_j=1,Object.defineProperty($p,"__esModule",{value:!0}),$p.TermFunctionSha512=void 0;const n=ge(),t=ye(),o=qb();let i=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.SHA512,overloads:(0,t.declare)(t.SparqlOperator.SHA512).onString1Typed(()=>e=>(0,t.string)((0,o.sha512)().update(e).digest("hex"))).collect()})}};return $p.TermFunctionSha512=i,$p}var gj;function MG(){if(gj)return zp;gj=1,Object.defineProperty(zp,"__esModule",{value:!0}),zp.ActorFunctionFactoryTermSha512=void 0;const n=ge(),t=ye(),o=NG();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SHA512],termFunction:!0})}async run(e){return new o.TermFunctionSha512}};return zp.ActorFunctionFactoryTermSha512=i,zp}var mj;function IG(){return mj||(mj=1,(function(n){var t=uo&&uo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=uo&&uo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(MG(),n)})(uo)),uo}var so={},Hp={},Jp={},bj;function LG(){if(bj)return Jp;bj=1,Object.defineProperty(Jp,"__esModule",{value:!0}),Jp.TermFunctionStrAfter=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.STRAFTER,overloads:(0,t.declare)(t.SparqlOperator.STRAFTER).onBinaryTyped([t.TypeURL.XSD_STRING,t.TypeURL.XSD_STRING],()=>(r,e)=>(0,t.string)(r.slice(r.indexOf(e)).slice(e.length))).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.XSD_STRING],()=>(r,e)=>{const[a,u]=[r.typedValue,e.typedValue],c=a.slice(a.indexOf(u)).slice(u.length);return c||!u?(0,t.langString)(c,r.language):(0,t.string)(c)}).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.RDF_LANG_STRING],()=>(r,e)=>{if(r.language!==e.language)throw new t.IncompatibleLanguageOperation(r,e);const[a,u]=[r.typedValue,e.typedValue],c=a.slice(a.indexOf(u)).slice(u.length);return c||!u?(0,t.langString)(c,r.language):(0,t.string)(c)}).collect()})}};return Jp.TermFunctionStrAfter=o,Jp}var vj;function xG(){if(vj)return Hp;vj=1,Object.defineProperty(Hp,"__esModule",{value:!0}),Hp.ActorFunctionFactoryTermStrAfter=void 0;const n=ge(),t=ye(),o=LG();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRAFTER],termFunction:!0})}async run(e){return new o.TermFunctionStrAfter}};return Hp.ActorFunctionFactoryTermStrAfter=i,Hp}var Tj;function qG(){return Tj||(Tj=1,(function(n){var t=so&&so.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=so&&so.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(xG(),n)})(so)),so}var co={},Kp={},Wp={},Oj;function BG(){if(Oj)return Wp;Oj=1,Object.defineProperty(Wp,"__esModule",{value:!0}),Wp.TermFunctionStrBefore=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.STRBEFORE,overloads:(0,t.declare)(t.SparqlOperator.STRBEFORE).onBinaryTyped([t.TypeURL.XSD_STRING,t.TypeURL.XSD_STRING],()=>(r,e)=>(0,t.string)(r.slice(0,Math.max(0,r.indexOf(e))))).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.XSD_STRING],()=>(r,e)=>{const[a,u]=[r.typedValue,e.typedValue],c=r.typedValue.slice(0,Math.max(0,a.indexOf(u)));return c||!u?(0,t.langString)(c,r.language):(0,t.string)(c)}).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.RDF_LANG_STRING],()=>(r,e)=>{if(r.language!==e.language)throw new t.IncompatibleLanguageOperation(r,e);const[a,u]=[r.typedValue,e.typedValue],c=r.typedValue.slice(0,Math.max(0,a.indexOf(u)));return c||!u?(0,t.langString)(c,r.language):(0,t.string)(c)}).collect()})}};return Wp.TermFunctionStrBefore=o,Wp}var Sj;function CG(){if(Sj)return Kp;Sj=1,Object.defineProperty(Kp,"__esModule",{value:!0}),Kp.ActorFunctionFactoryTermStrBefore=void 0;const n=ge(),t=ye(),o=BG();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRBEFORE],termFunction:!0})}async run(e){return new o.TermFunctionStrBefore}};return Kp.ActorFunctionFactoryTermStrBefore=i,Kp}var wj;function QG(){return wj||(wj=1,(function(n){var t=co&&co.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=co&&co.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(CG(),n)})(co)),co}var lo={},Yp={},Zp={},Aj;function UG(){if(Aj)return Zp;Aj=1,Object.defineProperty(Zp,"__esModule",{value:!0}),Zp.TermFunctionStrDt=void 0;const n=ge(),t=Be(),o=ye();let i=class extends n.TermFunctionBase{constructor(){super({arity:2,operator:o.SparqlOperator.STRDT,overloads:(0,o.declare)(o.SparqlOperator.STRDT).set([o.TypeURL.XSD_STRING,"namedNode"],e=>([a,u])=>{const c=e.context.getSafe(t.KeysInitQuery.dataFactory),s=c.literal(a.typedValue,c.namedNode(u.value));return new o.TermTransformer(e.context.getSafe(t.KeysExpressionEvaluator.superTypeProvider)).transformLiteral(s)}).collect()})}};return Zp.TermFunctionStrDt=i,Zp}var Fj;function VG(){if(Fj)return Yp;Fj=1,Object.defineProperty(Yp,"__esModule",{value:!0}),Yp.ActorFunctionFactoryTermStrDt=void 0;const n=ge(),t=ye(),o=UG();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRDT],termFunction:!0})}async run(e){return new o.TermFunctionStrDt}};return Yp.ActorFunctionFactoryTermStrDt=i,Yp}var Ej;function GG(){return Ej||(Ej=1,(function(n){var t=lo&&lo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=lo&&lo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(VG(),n)})(lo)),lo}var fo={},kp={},eh={},Rj;function XG(){if(Rj)return eh;Rj=1,Object.defineProperty(eh,"__esModule",{value:!0}),eh.TermFunctionStrEnds=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.STRENDS,overloads:(0,t.declare)(t.SparqlOperator.STRENDS).onBinaryTyped([t.TypeAlias.SPARQL_STRINGLY,t.TypeURL.XSD_STRING],()=>(r,e)=>(0,t.bool)(r.endsWith(e))).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.RDF_LANG_STRING],()=>(r,e)=>{if(r.language!==e.language)throw new t.IncompatibleLanguageOperation(r,e);return(0,t.bool)(r.typedValue.endsWith(e.typedValue))}).collect()})}};return eh.TermFunctionStrEnds=o,eh}var jj;function zG(){if(jj)return kp;jj=1,Object.defineProperty(kp,"__esModule",{value:!0}),kp.ActorFunctionFactoryTermStrEnds=void 0;const n=ge(),t=ye(),o=XG();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRENDS],termFunction:!0})}async run(e){return new o.TermFunctionStrEnds}};return kp.ActorFunctionFactoryTermStrEnds=i,kp}var Dj;function $G(){return Dj||(Dj=1,(function(n){var t=fo&&fo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=fo&&fo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(zG(),n)})(fo)),fo}var po={},th={},rh={},Pj;function HG(){if(Pj)return rh;Pj=1,Object.defineProperty(rh,"__esModule",{value:!0}),rh.TermFunctionStrLang=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.STRLANG,overloads:(0,t.declare)(t.SparqlOperator.STRLANG).onBinaryTyped([t.TypeURL.XSD_STRING,t.TypeURL.XSD_STRING],()=>(r,e)=>new t.LangStringLiteral(r,e.toLowerCase())).collect()})}};return rh.TermFunctionStrLang=o,rh}var Nj;function JG(){if(Nj)return th;Nj=1,Object.defineProperty(th,"__esModule",{value:!0}),th.ActorFunctionFactoryTermStrLang=void 0;const n=ge(),t=ye(),o=HG();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRLANG],termFunction:!0})}async run(e){return new o.TermFunctionStrLang}};return th.ActorFunctionFactoryTermStrLang=i,th}var Mj;function KG(){return Mj||(Mj=1,(function(n){var t=po&&po.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=po&&po.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(JG(),n)})(po)),po}var ho={},nh={},ih={},Ij;function WG(){if(Ij)return ih;Ij=1,Object.defineProperty(ih,"__esModule",{value:!0}),ih.TermFunctionStrLen=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.STRLEN,overloads:(0,t.declare)(t.SparqlOperator.STRLEN).onStringly1(()=>r=>(0,t.integer)([...r.typedValue].length)).collect()})}};return ih.TermFunctionStrLen=o,ih}var Lj;function YG(){if(Lj)return nh;Lj=1,Object.defineProperty(nh,"__esModule",{value:!0}),nh.ActorFunctionFactoryTermStrLen=void 0;const n=ge(),t=ye(),o=WG();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRLEN],termFunction:!0})}async run(e){return new o.TermFunctionStrLen}};return nh.ActorFunctionFactoryTermStrLen=i,nh}var xj;function ZG(){return xj||(xj=1,(function(n){var t=ho&&ho.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ho&&ho.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(YG(),n)})(ho)),ho}var yo={},ah={},oh={},qj;function kG(){if(qj)return oh;qj=1,Object.defineProperty(oh,"__esModule",{value:!0}),oh.TermFunctionStrStarts=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.STRSTARTS,overloads:(0,t.declare)(t.SparqlOperator.STRSTARTS).onBinaryTyped([t.TypeAlias.SPARQL_STRINGLY,t.TypeURL.XSD_STRING],()=>(r,e)=>(0,t.bool)(r.startsWith(e))).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.RDF_LANG_STRING],()=>(r,e)=>{if(r.language!==e.language)throw new t.IncompatibleLanguageOperation(r,e);return(0,t.bool)(r.typedValue.startsWith(e.typedValue))}).collect()})}};return oh.TermFunctionStrStarts=o,oh}var Bj;function eX(){if(Bj)return ah;Bj=1,Object.defineProperty(ah,"__esModule",{value:!0}),ah.ActorFunctionFactoryTermStrStarts=void 0;const n=ge(),t=ye(),o=kG();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRSTARTS],termFunction:!0})}async run(e){return new o.TermFunctionStrStarts}};return ah.ActorFunctionFactoryTermStrStarts=i,ah}var Cj;function tX(){return Cj||(Cj=1,(function(n){var t=yo&&yo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=yo&&yo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(eX(),n)})(yo)),yo}var _o={},uh={},sh={},Qj;function rX(){if(Qj)return sh;Qj=1,Object.defineProperty(sh,"__esModule",{value:!0}),sh.TermFunctionStr=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.STR,overloads:(0,t.declare)(t.SparqlOperator.STR).onTerm1(()=>r=>(0,t.string)(r.str())).collect()})}};return sh.TermFunctionStr=o,sh}var Uj;function nX(){if(Uj)return uh;Uj=1,Object.defineProperty(uh,"__esModule",{value:!0}),uh.ActorFunctionFactoryTermStr=void 0;const n=ge(),t=ye(),o=rX();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STR],termFunction:!0})}async run(e){return new o.TermFunctionStr}};return uh.ActorFunctionFactoryTermStr=i,uh}var Vj;function iX(){return Vj||(Vj=1,(function(n){var t=_o&&_o.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=_o&&_o.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(nX(),n)})(_o)),_o}var go={},ch={},lh={},P1={},Bm={},Gj;function aX(){return Gj||(Gj=1,Object.defineProperty(Bm,"__esModule",{value:!0}),Bm.default="ffffffff-ffff-ffff-ffff-ffffffffffff"),Bm}var Cm={},Xj;function oX(){return Xj||(Xj=1,Object.defineProperty(Cm,"__esModule",{value:!0}),Cm.default="00000000-0000-0000-0000-000000000000"),Cm}var Qm={},Um={},Vm={},zj;function uX(){return zj||(zj=1,Object.defineProperty(Vm,"__esModule",{value:!0}),Vm.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i),Vm}var $j;function Bb(){if($j)return Um;$j=1,Object.defineProperty(Um,"__esModule",{value:!0});const n=uX();function t(o){return typeof o=="string"&&n.default.test(o)}return Um.default=t,Um}var Hj;function Cb(){if(Hj)return Qm;Hj=1,Object.defineProperty(Qm,"__esModule",{value:!0});const n=Bb();function t(o){if(!(0,n.default)(o))throw TypeError("Invalid UUID");let i;return Uint8Array.of((i=parseInt(o.slice(0,8),16))>>>24,i>>>16&255,i>>>8&255,i&255,(i=parseInt(o.slice(9,13),16))>>>8,i&255,(i=parseInt(o.slice(14,18),16))>>>8,i&255,(i=parseInt(o.slice(19,23),16))>>>8,i&255,(i=parseInt(o.slice(24,36),16))/1099511627776&255,i/4294967296&255,i>>>24&255,i>>>16&255,i>>>8&255,i&255)}return Qm.default=t,Qm}var Ws={},Jj;function Xn(){if(Jj)return Ws;Jj=1,Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.unsafeStringify=void 0;const n=Bb(),t=[];for(let r=0;r<256;++r)t.push((r+256).toString(16).slice(1));function o(r,e=0){return(t[r[e+0]]+t[r[e+1]]+t[r[e+2]]+t[r[e+3]]+"-"+t[r[e+4]]+t[r[e+5]]+"-"+t[r[e+6]]+t[r[e+7]]+"-"+t[r[e+8]]+t[r[e+9]]+"-"+t[r[e+10]]+t[r[e+11]]+t[r[e+12]]+t[r[e+13]]+t[r[e+14]]+t[r[e+15]]).toLowerCase()}Ws.unsafeStringify=o;function i(r,e=0){const a=o(r,e);if(!(0,n.default)(a))throw TypeError("Stringified UUID is invalid");return a}return Ws.default=i,Ws}var Ys={},Gm={},Kj;function GT(){if(Kj)return Gm;Kj=1,Object.defineProperty(Gm,"__esModule",{value:!0});let n;const t=new Uint8Array(16);function o(){if(!n){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");n=crypto.getRandomValues.bind(crypto)}return n(t)}return Gm.default=o,Gm}var Wj;function Jq(){if(Wj)return Ys;Wj=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.updateV1State=void 0;const n=GT(),t=Xn(),o={};function i(a,u,c){let s;const l=a?._v6??!1;if(a){const f=Object.keys(a);f.length===1&&f[0]==="_v6"&&(a=void 0)}if(a)s=e(a.random??a.rng?.()??(0,n.default)(),a.msecs,a.nsecs,a.clockseq,a.node,u,c);else{const f=Date.now(),d=(0,n.default)();r(o,f,d),s=e(d,o.msecs,o.nsecs,l?void 0:o.clockseq,l?void 0:o.node,u,c)}return u??(0,t.unsafeStringify)(s)}function r(a,u,c){return a.msecs??(a.msecs=-1/0),a.nsecs??(a.nsecs=0),u===a.msecs?(a.nsecs++,a.nsecs>=1e4&&(a.node=void 0,a.nsecs=0)):u>a.msecs?a.nsecs=0:u<a.msecs&&(a.node=void 0),a.node||(a.node=c.slice(10,16),a.node[0]|=1,a.clockseq=(c[8]<<8|c[9])&16383),a.msecs=u,a}Ys.updateV1State=r;function e(a,u,c,s,l,f,d=0){if(a.length<16)throw new Error("Random bytes length must be >= 16");if(!f)f=new Uint8Array(16),d=0;else if(d<0||d+16>f.length)throw new RangeError(`UUID byte range ${d}:${d+15} is out of buffer bounds`);u??(u=Date.now()),c??(c=0),s??(s=(a[8]<<8|a[9])&16383),l??(l=a.slice(10,16)),u+=122192928e5;const h=((u&268435455)*1e4+c)%4294967296;f[d++]=h>>>24&255,f[d++]=h>>>16&255,f[d++]=h>>>8&255,f[d++]=h&255;const p=u/4294967296*1e4&268435455;f[d++]=p>>>8&255,f[d++]=p&255,f[d++]=p>>>24&15|16,f[d++]=p>>>16&255,f[d++]=s>>>8|128,f[d++]=s&255;for(let y=0;y<6;++y)f[d++]=l[y];return f}return Ys.default=i,Ys}var Xm={},Yj;function Kq(){if(Yj)return Xm;Yj=1,Object.defineProperty(Xm,"__esModule",{value:!0});const n=Cb(),t=Xn();function o(r){const e=typeof r=="string"?(0,n.default)(r):r,a=i(e);return typeof r=="string"?(0,t.unsafeStringify)(a):a}Xm.default=o;function i(r){return Uint8Array.of((r[6]&15)<<4|r[7]>>4&15,(r[7]&15)<<4|(r[4]&240)>>4,(r[4]&15)<<4|(r[5]&240)>>4,(r[5]&15)<<4|(r[0]&240)>>4,(r[0]&15)<<4|(r[1]&240)>>4,(r[1]&15)<<4|(r[2]&240)>>4,96|r[2]&15,r[3],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}return Xm}var N1={},zm={},Zj;function sX(){if(Zj)return zm;Zj=1,Object.defineProperty(zm,"__esModule",{value:!0});function n(d){const h=r(d),p=i(h,d.length*8);return t(p)}function t(d){const h=new Uint8Array(d.length*4);for(let p=0;p<d.length*4;p++)h[p]=d[p>>2]>>>p%4*8&255;return h}function o(d){return(d+64>>>9<<4)+14+1}function i(d,h){const p=new Uint32Array(o(h)).fill(0);p.set(d),p[h>>5]|=128<<h%32,p[p.length-1]=h,d=p;let y=1732584193,b=-271733879,_=-1732584194,T=271733878;for(let m=0;m<d.length;m+=16){const A=y,E=b,j=_,X=T;y=c(y,b,_,T,d[m],7,-680876936),T=c(T,y,b,_,d[m+1],12,-389564586),_=c(_,T,y,b,d[m+2],17,606105819),b=c(b,_,T,y,d[m+3],22,-1044525330),y=c(y,b,_,T,d[m+4],7,-176418897),T=c(T,y,b,_,d[m+5],12,1200080426),_=c(_,T,y,b,d[m+6],17,-1473231341),b=c(b,_,T,y,d[m+7],22,-45705983),y=c(y,b,_,T,d[m+8],7,1770035416),T=c(T,y,b,_,d[m+9],12,-1958414417),_=c(_,T,y,b,d[m+10],17,-42063),b=c(b,_,T,y,d[m+11],22,-1990404162),y=c(y,b,_,T,d[m+12],7,1804603682),T=c(T,y,b,_,d[m+13],12,-40341101),_=c(_,T,y,b,d[m+14],17,-1502002290),b=c(b,_,T,y,d[m+15],22,1236535329),y=s(y,b,_,T,d[m+1],5,-165796510),T=s(T,y,b,_,d[m+6],9,-1069501632),_=s(_,T,y,b,d[m+11],14,643717713),b=s(b,_,T,y,d[m],20,-373897302),y=s(y,b,_,T,d[m+5],5,-701558691),T=s(T,y,b,_,d[m+10],9,38016083),_=s(_,T,y,b,d[m+15],14,-660478335),b=s(b,_,T,y,d[m+4],20,-405537848),y=s(y,b,_,T,d[m+9],5,568446438),T=s(T,y,b,_,d[m+14],9,-1019803690),_=s(_,T,y,b,d[m+3],14,-187363961),b=s(b,_,T,y,d[m+8],20,1163531501),y=s(y,b,_,T,d[m+13],5,-1444681467),T=s(T,y,b,_,d[m+2],9,-51403784),_=s(_,T,y,b,d[m+7],14,1735328473),b=s(b,_,T,y,d[m+12],20,-1926607734),y=l(y,b,_,T,d[m+5],4,-378558),T=l(T,y,b,_,d[m+8],11,-2022574463),_=l(_,T,y,b,d[m+11],16,1839030562),b=l(b,_,T,y,d[m+14],23,-35309556),y=l(y,b,_,T,d[m+1],4,-1530992060),T=l(T,y,b,_,d[m+4],11,1272893353),_=l(_,T,y,b,d[m+7],16,-155497632),b=l(b,_,T,y,d[m+10],23,-1094730640),y=l(y,b,_,T,d[m+13],4,681279174),T=l(T,y,b,_,d[m],11,-358537222),_=l(_,T,y,b,d[m+3],16,-722521979),b=l(b,_,T,y,d[m+6],23,76029189),y=l(y,b,_,T,d[m+9],4,-640364487),T=l(T,y,b,_,d[m+12],11,-421815835),_=l(_,T,y,b,d[m+15],16,530742520),b=l(b,_,T,y,d[m+2],23,-995338651),y=f(y,b,_,T,d[m],6,-198630844),T=f(T,y,b,_,d[m+7],10,1126891415),_=f(_,T,y,b,d[m+14],15,-1416354905),b=f(b,_,T,y,d[m+5],21,-57434055),y=f(y,b,_,T,d[m+12],6,1700485571),T=f(T,y,b,_,d[m+3],10,-1894986606),_=f(_,T,y,b,d[m+10],15,-1051523),b=f(b,_,T,y,d[m+1],21,-2054922799),y=f(y,b,_,T,d[m+8],6,1873313359),T=f(T,y,b,_,d[m+15],10,-30611744),_=f(_,T,y,b,d[m+6],15,-1560198380),b=f(b,_,T,y,d[m+13],21,1309151649),y=f(y,b,_,T,d[m+4],6,-145523070),T=f(T,y,b,_,d[m+11],10,-1120210379),_=f(_,T,y,b,d[m+2],15,718787259),b=f(b,_,T,y,d[m+9],21,-343485551),y=e(y,A),b=e(b,E),_=e(_,j),T=e(T,X)}return Uint32Array.of(y,b,_,T)}function r(d){if(d.length===0)return new Uint32Array;const h=new Uint32Array(o(d.length*8)).fill(0);for(let p=0;p<d.length;p++)h[p>>2]|=(d[p]&255)<<p%4*8;return h}function e(d,h){const p=(d&65535)+(h&65535);return(d>>16)+(h>>16)+(p>>16)<<16|p&65535}function a(d,h){return d<<h|d>>>32-h}function u(d,h,p,y,b,_){return e(a(e(e(h,d),e(y,_)),b),p)}function c(d,h,p,y,b,_,T){return u(h&p|~h&y,d,h,b,_,T)}function s(d,h,p,y,b,_,T){return u(h&y|p&~y,d,h,b,_,T)}function l(d,h,p,y,b,_,T){return u(h^p^y,d,h,b,_,T)}function f(d,h,p,y,b,_,T){return u(p^(h|~y),d,h,b,_,T)}return zm.default=n,zm}var on={},kj;function bb(){if(kj)return on;kj=1,Object.defineProperty(on,"__esModule",{value:!0}),on.URL=on.DNS=on.stringToBytes=void 0;const n=Cb(),t=Xn();function o(r){r=unescape(encodeURIComponent(r));const e=new Uint8Array(r.length);for(let a=0;a<r.length;++a)e[a]=r.charCodeAt(a);return e}on.stringToBytes=o,on.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",on.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function i(r,e,a,u,c,s){const l=typeof a=="string"?o(a):a,f=typeof u=="string"?(0,n.default)(u):u;if(typeof u=="string"&&(u=(0,n.default)(u)),u?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let d=new Uint8Array(16+l.length);if(d.set(f),d.set(l,f.length),d=e(d),d[6]=d[6]&15|r,d[8]=d[8]&63|128,c){s=s||0;for(let h=0;h<16;++h)c[s+h]=d[h];return c}return(0,t.unsafeStringify)(d)}return on.default=i,on}var eD;function cX(){return eD||(eD=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.URL=n.DNS=void 0;const t=sX(),o=bb();var i=bb();Object.defineProperty(n,"DNS",{enumerable:!0,get:function(){return i.DNS}}),Object.defineProperty(n,"URL",{enumerable:!0,get:function(){return i.URL}});function r(e,a,u,c){return(0,o.default)(48,t.default,e,a,u,c)}r.DNS=o.DNS,r.URL=o.URL,n.default=r})(N1)),N1}var $m={},Hm={},tD;function lX(){if(tD)return Hm;tD=1,Object.defineProperty(Hm,"__esModule",{value:!0});const n=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);return Hm.default={randomUUID:n},Hm}var rD;function fX(){if(rD)return $m;rD=1,Object.defineProperty($m,"__esModule",{value:!0});const n=lX(),t=GT(),o=Xn();function i(r,e,a){if(n.default.randomUUID&&!e&&!r)return n.default.randomUUID();r=r||{};const u=r.random??r.rng?.()??(0,t.default)();if(u.length<16)throw new Error("Random bytes length must be >= 16");if(u[6]=u[6]&15|64,u[8]=u[8]&63|128,e){if(a=a||0,a<0||a+16>e.length)throw new RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`);for(let c=0;c<16;++c)e[a+c]=u[c];return e}return(0,o.unsafeStringify)(u)}return $m.default=i,$m}var M1={},Jm={},nD;function dX(){if(nD)return Jm;nD=1,Object.defineProperty(Jm,"__esModule",{value:!0});function n(i,r,e,a){switch(i){case 0:return r&e^~r&a;case 1:return r^e^a;case 2:return r&e^r&a^e&a;case 3:return r^e^a}}function t(i,r){return i<<r|i>>>32-r}function o(i){const r=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520],a=new Uint8Array(i.length+1);a.set(i),a[i.length]=128,i=a;const u=i.length/4+2,c=Math.ceil(u/16),s=new Array(c);for(let l=0;l<c;++l){const f=new Uint32Array(16);for(let d=0;d<16;++d)f[d]=i[l*64+d*4]<<24|i[l*64+d*4+1]<<16|i[l*64+d*4+2]<<8|i[l*64+d*4+3];s[l]=f}s[c-1][14]=(i.length-1)*8/Math.pow(2,32),s[c-1][14]=Math.floor(s[c-1][14]),s[c-1][15]=(i.length-1)*8&4294967295;for(let l=0;l<c;++l){const f=new Uint32Array(80);for(let _=0;_<16;++_)f[_]=s[l][_];for(let _=16;_<80;++_)f[_]=t(f[_-3]^f[_-8]^f[_-14]^f[_-16],1);let d=e[0],h=e[1],p=e[2],y=e[3],b=e[4];for(let _=0;_<80;++_){const T=Math.floor(_/20),m=t(d,5)+n(T,h,p,y)+b+r[T]+f[_]>>>0;b=y,y=p,p=t(h,30)>>>0,h=d,d=m}e[0]=e[0]+d>>>0,e[1]=e[1]+h>>>0,e[2]=e[2]+p>>>0,e[3]=e[3]+y>>>0,e[4]=e[4]+b>>>0}return Uint8Array.of(e[0]>>24,e[0]>>16,e[0]>>8,e[0],e[1]>>24,e[1]>>16,e[1]>>8,e[1],e[2]>>24,e[2]>>16,e[2]>>8,e[2],e[3]>>24,e[3]>>16,e[3]>>8,e[3],e[4]>>24,e[4]>>16,e[4]>>8,e[4])}return Jm.default=o,Jm}var iD;function pX(){return iD||(iD=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.URL=n.DNS=void 0;const t=dX(),o=bb();var i=bb();Object.defineProperty(n,"DNS",{enumerable:!0,get:function(){return i.DNS}}),Object.defineProperty(n,"URL",{enumerable:!0,get:function(){return i.URL}});function r(e,a,u,c){return(0,o.default)(80,t.default,e,a,u,c)}r.DNS=o.DNS,r.URL=o.URL,n.default=r})(M1)),M1}var Km={},aD;function hX(){if(aD)return Km;aD=1,Object.defineProperty(Km,"__esModule",{value:!0});const n=Xn(),t=Jq(),o=Kq();function i(r,e,a){r??(r={}),a??(a=0);let u=(0,t.default)({...r,_v6:!0},new Uint8Array(16));if(u=(0,o.default)(u),e){for(let c=0;c<16;c++)e[a+c]=u[c];return e}return(0,n.unsafeStringify)(u)}return Km.default=i,Km}var Wm={},oD;function yX(){if(oD)return Wm;oD=1,Object.defineProperty(Wm,"__esModule",{value:!0});const n=Cb(),t=Xn();function o(r){const e=typeof r=="string"?(0,n.default)(r):r,a=i(e);return typeof r=="string"?(0,t.unsafeStringify)(a):a}Wm.default=o;function i(r){return Uint8Array.of((r[3]&15)<<4|r[4]>>4&15,(r[4]&15)<<4|(r[5]&240)>>4,(r[5]&15)<<4|r[6]&15,r[7],(r[1]&15)<<4|(r[2]&240)>>4,(r[2]&15)<<4|(r[3]&240)>>4,16|(r[0]&240)>>4,(r[0]&15)<<4|(r[1]&240)>>4,r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}return Wm}var Zs={},uD;function _X(){if(uD)return Zs;uD=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.updateV7State=void 0;const n=GT(),t=Xn(),o={};function i(a,u,c){let s;if(a)s=e(a.random??a.rng?.()??(0,n.default)(),a.msecs,a.seq,u,c);else{const l=Date.now(),f=(0,n.default)();r(o,l,f),s=e(f,o.msecs,o.seq,u,c)}return u??(0,t.unsafeStringify)(s)}function r(a,u,c){return a.msecs??(a.msecs=-1/0),a.seq??(a.seq=0),u>a.msecs?(a.seq=c[6]<<23|c[7]<<16|c[8]<<8|c[9],a.msecs=u):(a.seq=a.seq+1|0,a.seq===0&&a.msecs++),a}Zs.updateV7State=r;function e(a,u,c,s,l=0){if(a.length<16)throw new Error("Random bytes length must be >= 16");if(!s)s=new Uint8Array(16),l=0;else if(l<0||l+16>s.length)throw new RangeError(`UUID byte range ${l}:${l+15} is out of buffer bounds`);return u??(u=Date.now()),c??(c=a[6]*127<<24|a[7]<<16|a[8]<<8|a[9]),s[l++]=u/1099511627776&255,s[l++]=u/4294967296&255,s[l++]=u/16777216&255,s[l++]=u/65536&255,s[l++]=u/256&255,s[l++]=u&255,s[l++]=112|c>>>28&15,s[l++]=c>>>20&255,s[l++]=128|c>>>14&63,s[l++]=c>>>6&255,s[l++]=c<<2&255|a[10]&3,s[l++]=a[11],s[l++]=a[12],s[l++]=a[13],s[l++]=a[14],s[l++]=a[15],s}return Zs.default=i,Zs}var Ym={},sD;function gX(){if(sD)return Ym;sD=1,Object.defineProperty(Ym,"__esModule",{value:!0});const n=Bb();function t(o){if(!(0,n.default)(o))throw TypeError("Invalid UUID");return parseInt(o.slice(14,15),16)}return Ym.default=t,Ym}var cD;function Wq(){return cD||(cD=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.version=n.validate=n.v7=n.v6ToV1=n.v6=n.v5=n.v4=n.v3=n.v1ToV6=n.v1=n.stringify=n.parse=n.NIL=n.MAX=void 0;var t=aX();Object.defineProperty(n,"MAX",{enumerable:!0,get:function(){return t.default}});var o=oX();Object.defineProperty(n,"NIL",{enumerable:!0,get:function(){return o.default}});var i=Cb();Object.defineProperty(n,"parse",{enumerable:!0,get:function(){return i.default}});var r=Xn();Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return r.default}});var e=Jq();Object.defineProperty(n,"v1",{enumerable:!0,get:function(){return e.default}});var a=Kq();Object.defineProperty(n,"v1ToV6",{enumerable:!0,get:function(){return a.default}});var u=cX();Object.defineProperty(n,"v3",{enumerable:!0,get:function(){return u.default}});var c=fX();Object.defineProperty(n,"v4",{enumerable:!0,get:function(){return c.default}});var s=pX();Object.defineProperty(n,"v5",{enumerable:!0,get:function(){return s.default}});var l=hX();Object.defineProperty(n,"v6",{enumerable:!0,get:function(){return l.default}});var f=yX();Object.defineProperty(n,"v6ToV1",{enumerable:!0,get:function(){return f.default}});var d=_X();Object.defineProperty(n,"v7",{enumerable:!0,get:function(){return d.default}});var h=Bb();Object.defineProperty(n,"validate",{enumerable:!0,get:function(){return h.default}});var p=gX();Object.defineProperty(n,"version",{enumerable:!0,get:function(){return p.default}})})(P1)),P1}var lD;function mX(){if(lD)return lh;lD=1,Object.defineProperty(lh,"__esModule",{value:!0}),lh.TermFunctionStrUuid=void 0;const n=ge(),t=ye(),o=Wq();let i=class extends n.TermFunctionBase{constructor(){super({arity:0,operator:t.SparqlOperator.STRUUID,overloads:(0,t.declare)(t.SparqlOperator.STRUUID).set([],()=>()=>(0,t.string)(o.v4())).collect()})}};return lh.TermFunctionStrUuid=i,lh}var fD;function bX(){if(fD)return ch;fD=1,Object.defineProperty(ch,"__esModule",{value:!0}),ch.ActorFunctionFactoryTermStrUuid=void 0;const n=ge(),t=ye(),o=mX();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRUUID],termFunction:!0})}async run(e){return new o.TermFunctionStrUuid}};return ch.ActorFunctionFactoryTermStrUuid=i,ch}var dD;function vX(){return dD||(dD=1,(function(n){var t=go&&go.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=go&&go.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(bX(),n)})(go)),go}var mo={},fh={},dh={},pD;function TX(){if(pD)return dh;pD=1,Object.defineProperty(dh,"__esModule",{value:!0}),dh.TermFunctionSubStr=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:[2,3],operator:t.SparqlOperator.SUBSTR,overloads:(0,t.declare)(t.SparqlOperator.SUBSTR).onBinaryTyped([t.TypeURL.XSD_STRING,t.TypeURL.XSD_INTEGER],()=>(r,e)=>(0,t.string)([...r].slice(e-1).join(""))).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.XSD_INTEGER],()=>(r,e)=>{const a=[...r.typedValue].slice(e.typedValue-1).join("");return(0,t.langString)(a,r.language)}).onTernaryTyped([t.TypeURL.XSD_STRING,t.TypeURL.XSD_INTEGER,t.TypeURL.XSD_INTEGER],()=>(r,e,a)=>(0,t.string)([...r].slice(e-1,a+e-1).join(""))).onTernary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.XSD_INTEGER,t.TypeURL.XSD_INTEGER],()=>(r,e,a)=>{const u=[...r.typedValue].slice(e.typedValue-1,a.typedValue+e.typedValue-1).join("");return(0,t.langString)(u,r.language)}).collect()})}};return dh.TermFunctionSubStr=o,dh}var hD;function OX(){if(hD)return fh;hD=1,Object.defineProperty(fh,"__esModule",{value:!0}),fh.ActorFunctionFactoryTermSubStr=void 0;const n=ge(),t=ye(),o=TX();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SUBSTR],termFunction:!0})}async run(e){return new o.TermFunctionSubStr}};return fh.ActorFunctionFactoryTermSubStr=i,fh}var yD;function SX(){return yD||(yD=1,(function(n){var t=mo&&mo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=mo&&mo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(OX(),n)})(mo)),mo}var bo={},ph={},hh={},_D;function wX(){if(_D)return hh;_D=1,Object.defineProperty(hh,"__esModule",{value:!0}),hh.TermFunctionTimezone=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.TIMEZONE,overloads:(0,t.declare)(t.SparqlOperator.TIMEZONE).onDateTime1(()=>r=>{const e={hours:r.typedValue.zoneHours,minutes:r.typedValue.zoneMinutes};if(e.hours===void 0&&e.minutes===void 0)throw new t.InvalidTimezoneCall(r.str());return new t.DayTimeDurationLiteral(e)}).copy({from:[t.TypeURL.XSD_DATE_TIME],to:[t.TypeURL.XSD_DATE]}).copy({from:[t.TypeURL.XSD_DATE_TIME],to:[t.TypeURL.XSD_TIME]}).collect()})}};return hh.TermFunctionTimezone=o,hh}var gD;function AX(){if(gD)return ph;gD=1,Object.defineProperty(ph,"__esModule",{value:!0}),ph.ActorFunctionFactoryTermTimezone=void 0;const n=ge(),t=ye(),o=wX();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.TIMEZONE],termFunction:!0})}async run(e){return new o.TermFunctionTimezone}};return ph.ActorFunctionFactoryTermTimezone=i,ph}var mD;function FX(){return mD||(mD=1,(function(n){var t=bo&&bo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=bo&&bo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(AX(),n)})(bo)),bo}var vo={},yh={},_h={},bD;function EX(){if(bD)return _h;bD=1,Object.defineProperty(_h,"__esModule",{value:!0}),_h.TermFunctionSubtraction=void 0;const n=ge(),t=Be(),o=ye(),i=xb();let r=class extends n.TermFunctionBase{constructor(){super({arity:2,operator:o.SparqlOperator.SUBTRACTION,overloads:(0,o.declare)(o.SparqlOperator.SUBTRACTION).arithmetic(()=>(a,u)=>new i.BigNumber(a).minus(u).toNumber()).set([o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],a=>([u,c])=>new o.DayTimeDurationLiteral((0,o.elapsedDuration)(u.typedValue,c.typedValue,a.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)))).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],to:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_DATE]}).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],to:[o.TypeURL.XSD_TIME,o.TypeURL.XSD_TIME]}).set([o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DAY_TIME_DURATION],()=>([a,u])=>new o.DateTimeLiteral((0,o.addDurationToDateTime)(a.typedValue,(0,o.defaultedDurationRepresentation)((0,o.negateDuration)(u.typedValue))))).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DAY_TIME_DURATION],to:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([o.TypeURL.XSD_DATE,o.TypeURL.XSD_DAY_TIME_DURATION],()=>([a,u])=>new o.DateLiteral((0,o.addDurationToDateTime)((0,o.defaultedDateTimeRepresentation)(a.typedValue),(0,o.defaultedDurationRepresentation)((0,o.negateDuration)(u.typedValue))))).copy({from:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_DAY_TIME_DURATION],to:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([o.TypeURL.XSD_TIME,o.TypeURL.XSD_DAY_TIME_DURATION],()=>([a,u])=>new o.TimeLiteral((0,o.addDurationToDateTime)((0,o.defaultedDateTimeRepresentation)(a.typedValue),(0,o.defaultedDurationRepresentation)((0,o.negateDuration)(u.typedValue))))).collect()})}};return _h.TermFunctionSubtraction=r,_h}var vD;function RX(){if(vD)return yh;vD=1,Object.defineProperty(yh,"__esModule",{value:!0}),yh.ActorFunctionFactoryTermSubtraction=void 0;const n=ge(),t=ye(),o=EX();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SUBTRACTION],termFunction:!0})}async run(e){return new o.TermFunctionSubtraction}};return yh.ActorFunctionFactoryTermSubtraction=i,yh}var TD;function jX(){return TD||(TD=1,(function(n){var t=vo&&vo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=vo&&vo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(RX(),n)})(vo)),vo}var To={},gh={},mh={},OD;function DX(){if(OD)return mh;OD=1,Object.defineProperty(mh,"__esModule",{value:!0}),mh.TermFunctionSubject=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.SUBJECT,overloads:(0,t.declare)(t.SparqlOperator.SUBJECT).onQuad1(()=>r=>r.subject).collect()})}};return mh.TermFunctionSubject=o,mh}var SD;function PX(){if(SD)return gh;SD=1,Object.defineProperty(gh,"__esModule",{value:!0}),gh.ActorFunctionFactoryTermSubject=void 0;const n=ge(),t=ye(),o=DX();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SUBJECT],termFunction:!0})}async run(e){return new o.TermFunctionSubject}};return gh.ActorFunctionFactoryTermSubject=i,gh}var wD;function NX(){return wD||(wD=1,(function(n){var t=To&&To.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=To&&To.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(PX(),n)})(To)),To}var Oo={},bh={},vh={},AD;function MX(){if(AD)return vh;AD=1,Object.defineProperty(vh,"__esModule",{value:!0}),vh.TermFunctionTz=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.TZ,overloads:(0,t.declare)(t.SparqlOperator.TZ).onDateTime1(()=>r=>(0,t.string)((0,t.extractRawTimeZone)(r.str()))).copy({from:[t.TypeURL.XSD_DATE_TIME],to:[t.TypeURL.XSD_DATE]}).copy({from:[t.TypeURL.XSD_DATE_TIME],to:[t.TypeURL.XSD_TIME]}).collect()})}};return vh.TermFunctionTz=o,vh}var FD;function IX(){if(FD)return bh;FD=1,Object.defineProperty(bh,"__esModule",{value:!0}),bh.ActorFunctionFactoryTermTz=void 0;const n=ge(),t=ye(),o=MX();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.TZ],termFunction:!0})}async run(e){return new o.TermFunctionTz}};return bh.ActorFunctionFactoryTermTz=i,bh}var ED;function LX(){return ED||(ED=1,(function(n){var t=Oo&&Oo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Oo&&Oo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(IX(),n)})(Oo)),Oo}var So={},Th={},Oh={},RD;function xX(){if(RD)return Oh;RD=1,Object.defineProperty(Oh,"__esModule",{value:!0}),Oh.TermFunctionUnaryMinus=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.UMINUS,overloads:(0,t.declare)(t.SparqlOperator.UMINUS).numericConverter(()=>r=>-r).collect()})}};return Oh.TermFunctionUnaryMinus=o,Oh}var jD;function qX(){if(jD)return Th;jD=1,Object.defineProperty(Th,"__esModule",{value:!0}),Th.ActorFunctionFactoryTermUnaryMinus=void 0;const n=ge(),t=ye(),o=xX();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.UMINUS],termFunction:!0})}async run(e){return new o.TermFunctionUnaryMinus}};return Th.ActorFunctionFactoryTermUnaryMinus=i,Th}var DD;function BX(){return DD||(DD=1,(function(n){var t=So&&So.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=So&&So.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(qX(),n)})(So)),So}var wo={},Sh={},wh={},PD;function CX(){if(PD)return wh;PD=1,Object.defineProperty(wh,"__esModule",{value:!0}),wh.TermFunctionUnaryPlus=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.UPLUS,overloads:(0,t.declare)(t.SparqlOperator.UPLUS).numericConverter(()=>r=>r).collect()})}};return wh.TermFunctionUnaryPlus=o,wh}var ND;function QX(){if(ND)return Sh;ND=1,Object.defineProperty(Sh,"__esModule",{value:!0}),Sh.ActorFunctionFactoryTermUnaryPlus=void 0;const n=ge(),t=ye(),o=CX();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.UPLUS],termFunction:!0})}async run(e){return new o.TermFunctionUnaryPlus}};return Sh.ActorFunctionFactoryTermUnaryPlus=i,Sh}var MD;function UX(){return MD||(MD=1,(function(n){var t=wo&&wo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=wo&&wo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(QX(),n)})(wo)),wo}var Ao={},Ah={},Fh={},ID;function VX(){if(ID)return Fh;ID=1,Object.defineProperty(Fh,"__esModule",{value:!0}),Fh.TermFunctionTriple=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:3,operator:t.SparqlOperator.TRIPLE,overloads:(0,t.declare)(t.SparqlOperator.TRIPLE).onTerm3(r=>(...e)=>new t.Quad(e[0],e[1],e[2],new t.DefaultGraph)).collect()})}};return Fh.TermFunctionTriple=o,Fh}var LD;function GX(){if(LD)return Ah;LD=1,Object.defineProperty(Ah,"__esModule",{value:!0}),Ah.ActorFunctionFactoryTermTriple=void 0;const n=ge(),t=ye(),o=VX();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.TRIPLE],termFunction:!0})}async run(e){return new o.TermFunctionTriple}};return Ah.ActorFunctionFactoryTermTriple=i,Ah}var xD;function XX(){return xD||(xD=1,(function(n){var t=Ao&&Ao.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ao&&Ao.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(GX(),n)})(Ao)),Ao}var Fo={},Eh={},Rh={},qD;function zX(){if(qD)return Rh;qD=1,Object.defineProperty(Rh,"__esModule",{value:!0}),Rh.TermFunctionUcase=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.UCASE,overloads:(0,t.declare)(t.SparqlOperator.UCASE).onString1Typed(()=>r=>(0,t.string)(r.toUpperCase())).onLangString1(()=>r=>(0,t.langString)(r.typedValue.toUpperCase(),r.language)).collect()})}};return Rh.TermFunctionUcase=o,Rh}var BD;function $X(){if(BD)return Eh;BD=1,Object.defineProperty(Eh,"__esModule",{value:!0}),Eh.ActorFunctionFactoryTermUcase=void 0;const n=ge(),t=ye(),o=zX();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.UCASE],termFunction:!0})}async run(e){return new o.TermFunctionUcase}};return Eh.ActorFunctionFactoryTermUcase=i,Eh}var CD;function HX(){return CD||(CD=1,(function(n){var t=Fo&&Fo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Fo&&Fo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o($X(),n)})(Fo)),Fo}var Eo={},jh={},Dh={},QD;function JX(){if(QD)return Dh;QD=1,Object.defineProperty(Dh,"__esModule",{value:!0}),Dh.TermFunctionUuid=void 0;const n=ge(),t=ye(),o=Wq();let i=class extends n.TermFunctionBase{constructor(){super({arity:0,operator:t.SparqlOperator.UUID,overloads:(0,t.declare)(t.SparqlOperator.UUID).set([],()=>()=>new t.NamedNode(`urn:uuid:${o.v4()}`)).collect()})}};return Dh.TermFunctionUuid=i,Dh}var UD;function KX(){if(UD)return jh;UD=1,Object.defineProperty(jh,"__esModule",{value:!0}),jh.ActorFunctionFactoryTermUuid=void 0;const n=ge(),t=ye(),o=JX();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.UUID],termFunction:!0})}async run(e){return new o.TermFunctionUuid}};return jh.ActorFunctionFactoryTermUuid=i,jh}var VD;function WX(){return VD||(VD=1,(function(n){var t=Eo&&Eo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Eo&&Eo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(KX(),n)})(Eo)),Eo}var Ro={},Ph={},Nh={},GD;function YX(){if(GD)return Nh;GD=1,Object.defineProperty(Nh,"__esModule",{value:!0}),Nh.TermFunctionXsdToBoolean=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_BOOLEAN,overloads:(0,t.declare)(t.TypeURL.XSD_BOOLEAN).onNumeric1(()=>r=>(0,t.bool)(r.coerceEBV()),!0).onUnary(t.TypeURL.XSD_BOOLEAN,()=>r=>(0,t.bool)(r.coerceEBV()),!0).onUnary(t.TypeURL.XSD_STRING,()=>r=>{switch(r.str()){case"true":return(0,t.bool)(!0);case"false":return(0,t.bool)(!1);case"1":return(0,t.bool)(!0);case"0":return(0,t.bool)(!1);default:throw new t.CastError(r,t.TypeURL.XSD_BOOLEAN)}},!1).collect()})}};return Nh.TermFunctionXsdToBoolean=o,Nh}var XD;function ZX(){if(XD)return Ph;XD=1,Object.defineProperty(Ph,"__esModule",{value:!0}),Ph.ActorFunctionFactoryTermXsdToBoolean=void 0;const n=ge(),t=ye(),o=YX();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_BOOLEAN],termFunction:!0})}async run(e){return new o.TermFunctionXsdToBoolean}};return Ph.ActorFunctionFactoryTermXsdToBoolean=i,Ph}var zD;function kX(){return zD||(zD=1,(function(n){var t=Ro&&Ro.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ro&&Ro.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(ZX(),n)})(Ro)),Ro}var jo={},Mh={},Ih={},$D;function ez(){if($D)return Ih;$D=1,Object.defineProperty(Ih,"__esModule",{value:!0}),Ih.TermFunctionXsdToDate=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_DATE,overloads:(0,t.declare)(t.TypeURL.XSD_DATE).onUnary(t.TypeURL.XSD_DATE,()=>r=>new t.DateLiteral(r.typedValue,r.strValue)).onUnary(t.TypeURL.XSD_DATE_TIME,()=>r=>new t.DateLiteral(r.typedValue)).onStringly1(()=>r=>new t.DateLiteral((0,t.parseDate)(r.str()))).collect()})}};return Ih.TermFunctionXsdToDate=o,Ih}var HD;function tz(){if(HD)return Mh;HD=1,Object.defineProperty(Mh,"__esModule",{value:!0}),Mh.ActorFunctionFactoryTermXsdToDate=void 0;const n=ge(),t=ye(),o=ez();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_DATE],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDate}};return Mh.ActorFunctionFactoryTermXsdToDate=i,Mh}var JD;function rz(){return JD||(JD=1,(function(n){var t=jo&&jo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=jo&&jo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(tz(),n)})(jo)),jo}var Do={},Lh={},xh={},KD;function nz(){if(KD)return xh;KD=1,Object.defineProperty(xh,"__esModule",{value:!0}),xh.TermFunctionXsdToDecimal=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_DECIMAL,overloads:(0,t.declare)(t.TypeURL.XSD_DECIMAL).onNumeric1(()=>r=>{const e=(0,t.parseXSDDecimal)(r.str());if(e===void 0)throw new t.CastError(r,t.TypeURL.XSD_DECIMAL);return(0,t.decimal)(e)}).onString1(()=>r=>{const e=r.str(),a=/^([+-])?(\d+(\.\d+)?)$/u.test(e)?(0,t.parseXSDDecimal)(e):void 0;if(a===void 0)throw new t.CastError(r,t.TypeURL.XSD_DECIMAL);return(0,t.decimal)(a)},!1).onBoolean1Typed(()=>r=>(0,t.decimal)(r?1:0)).collect()})}};return xh.TermFunctionXsdToDecimal=o,xh}var WD;function iz(){if(WD)return Lh;WD=1,Object.defineProperty(Lh,"__esModule",{value:!0}),Lh.ActorFunctionFactoryTermXsdToDecimal=void 0;const n=ge(),t=ye(),o=nz();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_DECIMAL],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDecimal}};return Lh.ActorFunctionFactoryTermXsdToDecimal=i,Lh}var YD;function az(){return YD||(YD=1,(function(n){var t=Do&&Do.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Do&&Do.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(iz(),n)})(Do)),Do}var Po={},qh={},Bh={},ZD;function oz(){if(ZD)return Bh;ZD=1,Object.defineProperty(Bh,"__esModule",{value:!0}),Bh.TermFunctionXsdToDuration=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_DAY_TIME_DURATION,overloads:(0,t.declare)(t.TypeURL.XSD_DURATION).onUnary(t.TypeURL.XSD_DURATION,()=>r=>new t.DurationLiteral(r.typedValue,r.strValue)).onStringly1(()=>r=>new t.DurationLiteral((0,t.parseDuration)(r.str()))).collect()})}};return Bh.TermFunctionXsdToDuration=o,Bh}var kD;function uz(){if(kD)return qh;kD=1,Object.defineProperty(qh,"__esModule",{value:!0}),qh.ActorFunctionFactoryTermXsdToDuration=void 0;const n=ge(),t=ye(),o=oz();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_DURATION],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDuration}};return qh.ActorFunctionFactoryTermXsdToDuration=i,qh}var eP;function sz(){return eP||(eP=1,(function(n){var t=Po&&Po.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Po&&Po.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(uz(),n)})(Po)),Po}var No={},Ch={},Qh={},tP;function cz(){if(tP)return Qh;tP=1,Object.defineProperty(Qh,"__esModule",{value:!0}),Qh.TermFunctionXsdToDayTimeDuration=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_DAY_TIME_DURATION,overloads:(0,t.declare)(t.TypeURL.XSD_DAY_TIME_DURATION).onUnary(t.TypeURL.XSD_DURATION,()=>r=>new t.DayTimeDurationLiteral((0,t.trimToDayTimeDuration)(r.typedValue))).onStringly1(()=>r=>new t.DayTimeDurationLiteral((0,t.parseDayTimeDuration)(r.str()))).collect()})}};return Qh.TermFunctionXsdToDayTimeDuration=o,Qh}var rP;function lz(){if(rP)return Ch;rP=1,Object.defineProperty(Ch,"__esModule",{value:!0}),Ch.ActorFunctionFactoryTermXsdToDayTimeDuration=void 0;const n=ge(),t=ye(),o=cz();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_DAY_TIME_DURATION],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDayTimeDuration}};return Ch.ActorFunctionFactoryTermXsdToDayTimeDuration=i,Ch}var nP;function fz(){return nP||(nP=1,(function(n){var t=No&&No.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=No&&No.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(lz(),n)})(No)),No}var Mo={},Uh={},Vh={},iP;function dz(){if(iP)return Vh;iP=1,Object.defineProperty(Vh,"__esModule",{value:!0}),Vh.TermFunctionXsdToDouble=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_DOUBLE,overloads:(0,t.declare)(t.TypeURL.XSD_DOUBLE).onNumeric1(()=>r=>(0,t.double)(r.typedValue)).onBoolean1Typed(()=>r=>(0,t.double)(r?1:0)).onUnary(t.TypeURL.XSD_STRING,()=>r=>{const e=(0,t.parseXSDFloat)(r.str());if(e===void 0)throw new t.CastError(r,t.TypeURL.XSD_DOUBLE);return(0,t.double)(e)},!1).collect()})}};return Vh.TermFunctionXsdToDouble=o,Vh}var aP;function pz(){if(aP)return Uh;aP=1,Object.defineProperty(Uh,"__esModule",{value:!0}),Uh.ActorFunctionFactoryTermXsdToDouble=void 0;const n=ge(),t=ye(),o=dz();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_DOUBLE],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDouble}};return Uh.ActorFunctionFactoryTermXsdToDouble=i,Uh}var oP;function hz(){return oP||(oP=1,(function(n){var t=Mo&&Mo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Mo&&Mo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(pz(),n)})(Mo)),Mo}var Io={},Gh={},Xh={},uP;function yz(){if(uP)return Xh;uP=1,Object.defineProperty(Xh,"__esModule",{value:!0}),Xh.TermFunctionXsdToFloat=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_FLOAT,overloads:(0,t.declare)(t.TypeURL.XSD_FLOAT).onNumeric1(()=>r=>(0,t.float)(r.typedValue)).onBoolean1Typed(()=>r=>(0,t.float)(r?1:0)).onUnary(t.TypeURL.XSD_STRING,()=>r=>{const e=(0,t.parseXSDFloat)(r.str());if(e===void 0)throw new t.CastError(r,t.TypeURL.XSD_FLOAT);return(0,t.float)(e)},!1).collect()})}};return Xh.TermFunctionXsdToFloat=o,Xh}var sP;function _z(){if(sP)return Gh;sP=1,Object.defineProperty(Gh,"__esModule",{value:!0}),Gh.ActorFunctionFactoryTermXsdToFloat=void 0;const n=ge(),t=ye(),o=yz();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_FLOAT],termFunction:!0})}async run(e){return new o.TermFunctionXsdToFloat}};return Gh.ActorFunctionFactoryTermXsdToFloat=i,Gh}var cP;function gz(){return cP||(cP=1,(function(n){var t=Io&&Io.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Io&&Io.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(_z(),n)})(Io)),Io}var Lo={},zh={},$h={},lP;function mz(){if(lP)return $h;lP=1,Object.defineProperty($h,"__esModule",{value:!0}),$h.TermFunctionXsdToDatetime=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_DATE_TIME,overloads:(0,t.declare)(t.TypeURL.XSD_DATE_TIME).onUnary(t.TypeURL.XSD_DATE_TIME,()=>r=>r).onUnary(t.TypeURL.XSD_STRING,()=>r=>(0,t.dateTime)((0,t.parseDateTime)(r.str()),r.str()),!1).onUnary(t.TypeURL.XSD_DATE,()=>r=>new t.DateTimeLiteral({...r.typedValue,hours:0,minutes:0,seconds:0})).collect()})}};return $h.TermFunctionXsdToDatetime=o,$h}var fP;function bz(){if(fP)return zh;fP=1,Object.defineProperty(zh,"__esModule",{value:!0}),zh.ActorFunctionFactoryTermXsdToDatetime=void 0;const n=ge(),t=ye(),o=mz();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_DATE_TIME],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDatetime}};return zh.ActorFunctionFactoryTermXsdToDatetime=i,zh}var dP;function vz(){return dP||(dP=1,(function(n){var t=Lo&&Lo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Lo&&Lo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(bz(),n)})(Lo)),Lo}var xo={},Hh={},Jh={},pP;function Tz(){if(pP)return Jh;pP=1,Object.defineProperty(Jh,"__esModule",{value:!0}),Jh.TermFunctionXsdToInteger=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_INTEGER,overloads:(0,t.declare)(t.TypeURL.XSD_INTEGER).onBoolean1Typed(()=>r=>(0,t.integer)(r?1:0)).onNumeric1(()=>r=>{if(!Number.isFinite(r.typedValue))throw new t.CastError(r,t.TypeURL.XSD_INTEGER);return(0,t.integer)(Math.trunc(r.typedValue))}).onString1(()=>r=>{const e=r.str(),a=/^\d+$/u.test(e)?Number.parseInt(e,10):void 0;if(a===void 0)throw new t.CastError(r,t.TypeURL.XSD_INTEGER);return(0,t.integer)(a)}).collect()})}};return Jh.TermFunctionXsdToInteger=o,Jh}var hP;function Oz(){if(hP)return Hh;hP=1,Object.defineProperty(Hh,"__esModule",{value:!0}),Hh.ActorFunctionFactoryTermXsdToInteger=void 0;const n=ge(),t=ye(),o=Tz();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_INTEGER],termFunction:!0})}async run(e){return new o.TermFunctionXsdToInteger}};return Hh.ActorFunctionFactoryTermXsdToInteger=i,Hh}var yP;function Sz(){return yP||(yP=1,(function(n){var t=xo&&xo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=xo&&xo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Oz(),n)})(xo)),xo}var qo={},Kh={},Wh={},_P;function wz(){if(_P)return Wh;_P=1,Object.defineProperty(Wh,"__esModule",{value:!0}),Wh.TermFunctionXsdToString=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_STRING,overloads:(0,t.declare)(t.TypeURL.XSD_STRING).onNumeric1(()=>r=>(0,t.string)((0,t.float)(r.typedValue).str())).onBoolean1Typed(()=>r=>(0,t.string)((0,t.bool)(r).str())).onTerm1(()=>r=>(0,t.string)(r.str())).collect()})}};return Wh.TermFunctionXsdToString=o,Wh}var gP;function Az(){if(gP)return Kh;gP=1,Object.defineProperty(Kh,"__esModule",{value:!0}),Kh.ActorFunctionFactoryTermXsdToString=void 0;const n=ge(),t=ye(),o=wz();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_STRING],termFunction:!0})}async run(e){return new o.TermFunctionXsdToString}};return Kh.ActorFunctionFactoryTermXsdToString=i,Kh}var mP;function Fz(){return mP||(mP=1,(function(n){var t=qo&&qo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=qo&&qo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Az(),n)})(qo)),qo}var Bo={},Yh={},Zh={},bP;function Ez(){if(bP)return Zh;bP=1,Object.defineProperty(Zh,"__esModule",{value:!0}),Zh.TermFunctionXsdToYearMonthDuration=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_YEAR_MONTH_DURATION,overloads:(0,t.declare)(t.TypeURL.XSD_YEAR_MONTH_DURATION).onUnary(t.TypeURL.XSD_DURATION,()=>r=>new t.YearMonthDurationLiteral((0,t.trimToYearMonthDuration)(r.typedValue))).onStringly1(()=>r=>new t.YearMonthDurationLiteral((0,t.parseYearMonthDuration)(r.str()))).collect()})}};return Zh.TermFunctionXsdToYearMonthDuration=o,Zh}var vP;function Rz(){if(vP)return Yh;vP=1,Object.defineProperty(Yh,"__esModule",{value:!0}),Yh.ActorFunctionFactoryTermXsdToYearMonthDuration=void 0;const n=ge(),t=ye(),o=Ez();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_YEAR_MONTH_DURATION],termFunction:!0})}async run(e){return new o.TermFunctionXsdToYearMonthDuration}};return Yh.ActorFunctionFactoryTermXsdToYearMonthDuration=i,Yh}var TP;function jz(){return TP||(TP=1,(function(n){var t=Bo&&Bo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Bo&&Bo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Rz(),n)})(Bo)),Bo}var Co={},kh={},ey={},OP;function Dz(){if(OP)return ey;OP=1,Object.defineProperty(ey,"__esModule",{value:!0}),ey.TermFunctionXsdToTime=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_TIME,overloads:(0,t.declare)(t.TypeURL.XSD_TIME).onUnary(t.TypeURL.XSD_TIME,()=>r=>new t.TimeLiteral(r.typedValue,r.strValue)).onUnary(t.TypeURL.XSD_DATE_TIME,()=>r=>new t.TimeLiteral(r.typedValue)).onStringly1(()=>r=>new t.TimeLiteral((0,t.parseTime)(r.str()))).collect()})}};return ey.TermFunctionXsdToTime=o,ey}var SP;function Pz(){if(SP)return kh;SP=1,Object.defineProperty(kh,"__esModule",{value:!0}),kh.ActorFunctionFactoryTermXsdToTime=void 0;const n=ge(),t=ye(),o=Dz();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_TIME],termFunction:!0})}async run(e){return new o.TermFunctionXsdToTime}};return kh.ActorFunctionFactoryTermXsdToTime=i,kh}var wP;function Nz(){return wP||(wP=1,(function(n){var t=Co&&Co.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Co&&Co.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Pz(),n)})(Co)),Co}var Qo={},ty={},ry={},AP;function Mz(){if(AP)return ry;AP=1,Object.defineProperty(ry,"__esModule",{value:!0}),ry.TermFunctionYear=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.YEAR,overloads:(0,t.declare)(t.SparqlOperator.YEAR).onDateTime1(()=>r=>(0,t.integer)(r.typedValue.year)).set([t.TypeURL.XSD_DATE],()=>([r])=>(0,t.integer)(r.typedValue.year)).collect()})}};return ry.TermFunctionYear=o,ry}var FP;function Iz(){if(FP)return ty;FP=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.ActorFunctionFactoryTermYear=void 0;const n=ge(),t=ye(),o=Mz();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.YEAR],termFunction:!0})}async run(e){return new o.TermFunctionYear}};return ty.ActorFunctionFactoryTermYear=i,ty}var EP;function Lz(){return EP||(EP=1,(function(n){var t=Qo&&Qo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Qo&&Qo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Iz(),n)})(Qo)),Qo}var Uo={},ny={},RP;function xz(){if(RP)return ny;RP=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.ActorQueryOperationSource=void 0;const n=gt(),t=Be(),o=Ae(),i=br(),r=ke(),e=We();let a=class extends n.ActorQueryOperation{constructor(c){super(c)}async test(c){return(0,r.getOperationSource)(c.operation)?(0,o.passTest)({httpRequests:1}):(0,o.failTest)(`Actor ${this.name} requires an operation with source annotation.`)}async run(c){const s=c.context.get(t.KeysInitQuery.physicalQueryPlanLogger);s&&(s.logOperation(c.operation.type,void 0,c.operation,c.context.get(t.KeysInitQuery.physicalQueryPlanNode),this.name,{}),c.context=c.context.set(t.KeysInitQuery.physicalQueryPlanNode,c.operation));const l=(0,r.getOperationSource)(c.operation),f=l.context?c.context.merge(l.context):c.context;let d=!1;if(e.Util.recurseOperation(c.operation,{construct(){return d=!0,!1}}),d){const y=l.source.queryQuads(c.operation,f),b=(0,i.getMetadataQuads)(y);return{type:"quads",quadStream:y,metadata:b}}switch(c.operation.type){case e.Algebra.types.ASK:return{type:"boolean",execute:()=>l.source.queryBoolean(c.operation,f)};case e.Algebra.types.COMPOSITE_UPDATE:case e.Algebra.types.DELETE_INSERT:case e.Algebra.types.LOAD:case e.Algebra.types.CLEAR:case e.Algebra.types.CREATE:case e.Algebra.types.DROP:case e.Algebra.types.ADD:case e.Algebra.types.MOVE:case e.Algebra.types.COPY:return{type:"void",execute:()=>l.source.queryVoid(c.operation,f)}}const h=l.source.queryBindings(c.operation,f),p=(0,i.getMetadataBindings)(h);return{type:"bindings",bindingsStream:h,metadata:p}}};return ny.ActorQueryOperationSource=a,ny}var jP;function qz(){return jP||(jP=1,(function(n){var t=Uo&&Uo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Uo&&Uo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(xz(),n)})(Uo)),Uo}var Vo={},iy={},DP;function Bz(){if(DP)return iy;DP=1,Object.defineProperty(iy,"__esModule",{value:!0}),iy.MediatorJoinCoefficientsFixed=void 0;const n=Be(),t=Ae();let o=class extends t.Mediator{constructor(r){super(r)}async mediateWith(r,e){const a=[],u=e.map(({reply:y})=>y),c=(await Promise.all(u)).map(y=>{if(y.isFailed()){a.push(y.getFailMessage());return}return{value:y.get(),sideData:y.getSideData()}});let s=c.map(y=>{if(y)return y.value.iterations*this.cpuWeight+y.value.persistedItems*this.memoryWeight+y.value.blockingItems*this.timeWeight+y.value.requestTime*this.ioWeight});const l=Math.max(...s.filter(y=>y!==void 0)),f=r.context.get(n.KeysQueryOperation.limitIndicator);f&&(s=s.map((y,b)=>y!==void 0&&(c[b]?.value).blockingItems>0&&(c[b]?.value).iterations>f?y+l:y));let d=-1,h=Number.POSITIVE_INFINITY;for(const[y,b]of s.entries())b!==void 0&&(d===-1||b<h)&&(d=y,h=b);if(d<0)return(0,t.failTest)(this.constructFailureMessage(r,a));const p=e[d].actor;return p.includeInLogs&&t.Actor.getContextLogger(r.context)?.debug(`Determined physical join operator '${p.logicalType}-${p.physicalName}'`,{entries:r.entries.length,variables:await Promise.all(r.entries.map(async y=>(await y.output.metadata()).variables.map(b=>b.variable.value))),costs:Object.fromEntries(s.map((y,b)=>[`${e[b].actor.logicalType}-${e[b].actor.physicalName}`,y]).filter(y=>y[1]!==void 0)),coefficients:Object.fromEntries(c.map((y,b)=>[`${e[b].actor.logicalType}-${e[b].actor.physicalName}`,y?.value]).filter(y=>y[1]!==void 0))}),(0,t.passTestWithSideData)(p,c[d].sideData)}};return iy.MediatorJoinCoefficientsFixed=o,iy}var PP;function Cz(){return PP||(PP=1,(function(n){var t=Vo&&Vo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Vo&&Vo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Bz(),n)})(Vo)),Vo}var Go={},ay={},NP;function Yq(){if(NP)return ay;NP=1,Object.defineProperty(ay,"__esModule",{value:!0}),ay.ActorHttpInvalidate=void 0;const n=Ae();let t=class extends n.Actor{constructor(i){super(i)}};return ay.ActorHttpInvalidate=t,ay}var oy={},MP;function Qz(){if(MP)return oy;MP=1,Object.defineProperty(oy,"__esModule",{value:!0}),oy.ActorHttpInvalidateListenable=void 0;const n=Ae(),t=Yq();let o=class extends t.ActorHttpInvalidate{constructor(r){super(r),this.invalidateListeners=[],this.invalidateListeners=[]}addInvalidateListener(r){this.invalidateListeners.push(r)}async test(r){return(0,n.passTestVoid)()}async run(r){for(const e of this.invalidateListeners)e(r);return{}}};return oy.ActorHttpInvalidateListenable=o,oy}var IP;function LP(){return IP||(IP=1,(function(n){var t=Go&&Go.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Go&&Go.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Yq(),n),o(Qz(),n)})(Go)),Go}var Xo={},uy={},xP;function Uz(){if(xP)return uy;xP=1,Object.defineProperty(uy,"__esModule",{value:!0}),uy.MediatorAll=void 0;const n=Ae();let t=class extends n.Mediator{constructor(i){super(i)}async mediate(i){const r=[];let e;try{e=this.publish(i)}catch{e=[]}for(const u of e){const c=await u.reply;c.isPassed()&&r.push({actor:u.actor,sideData:c.getSideData()})}return(await Promise.all(r.map(u=>u.actor.runObservable(i,u.sideData))))[0]}async mediateWith(){throw new Error("Unsupported operation: MediatorAll#mediateWith")}};return uy.MediatorAll=t,uy}var qP;function Vz(){return qP||(qP=1,(function(n){var t=Xo&&Xo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Xo&&Xo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Uz(),n)})(Xo)),Xo}var zo={},sy={},$o={},cy={},Ho={},ly={},BP;function Gz(){if(BP)return ly;BP=1,Object.defineProperty(ly,"__esModule",{value:!0}),ly.ChunkedIterator=void 0;const n=ft();let t=class extends n.TransformIterator{constructor(i,r,e){super(i,e),this.chunk=[],this.blockSize=r}consumeChunkAsIterator(){const i=new n.ArrayIterator(this.chunk,{autoStart:!1});return this.chunk=[],i}_transform(i,r,e){this.chunk.push(i),this.chunk.length>=this.blockSize&&e(this.consumeChunkAsIterator()),r()}_flush(i){this.chunk.length>0&&this._push(this.consumeChunkAsIterator()),super._flush(i)}};return ly.ChunkedIterator=t,ly}var fy={},CP;function Xz(){if(CP)return fy;CP=1,Object.defineProperty(fy,"__esModule",{value:!0}),fy.ClosableIterator=void 0;const n=ft();let t=class extends n.AsyncIterator{constructor(a,u){super(),this.onClose=u.onClose,this._source=a,this._source[n.DESTINATION]=this,this._source.on("end",r),this._source.on("error",i),this._source.on("readable",o),this.readable=this._source.readable}read(){const a=this._source.read();return a||(this.readable=!1,this._source.done&&this.close()),a}_end(a){this.onClose(),this._source.removeListener("end",r),this._source.removeListener("error",i),this._source.removeListener("readable",o),delete this._source[n.DESTINATION],this._source.destroy(),super._end(a)}};fy.ClosableIterator=t;function o(){this[n.DESTINATION].readable=!0}function i(e){this[n.DESTINATION].emit("error",e)}function r(){this[n.DESTINATION].close()}return fy}var dy={},QP;function zz(){if(QP)return dy;QP=1,Object.defineProperty(dy,"__esModule",{value:!0}),dy.ClosableTransformIterator=void 0;const n=ft();let t=class extends n.TransformIterator{constructor(i,r){super(i,r),this.onClose=r.onClose}_end(i){this.onClose(),super._end(i)}};return dy.ClosableTransformIterator=t,dy}var py={},UP;function $z(){if(UP)return py;UP=1,Object.defineProperty(py,"__esModule",{value:!0}),py.instrumentIterator=void 0;function n(o){const i={count:0,timeSelf:0,timeLife:0};return t(o,i,!0),new Promise(r=>{o.on("end",()=>{r(i)})})}py.instrumentIterator=n;function t(o,i,r){if(!("_profileInstrumented"in o)){if(o._profileInstrumented=!0,"_read"in o){const a=o._read;o._read=(u,c)=>{const s=performance.now();a.call(o,u,()=>{i.timeSelf+=performance.now()-s,c()})}}const e=o.read;if(o.read=()=>{const a=performance.now(),u=e.call(o);return r&&u&&i.count++,i.timeSelf+=performance.now()-a,u},r){const a=performance.now();o.on("end",()=>{i.timeLife=performance.now()-a})}"_source"in o&&t(o._source,i,!1)}}return py}var VP;function xs(){return VP||(VP=1,(function(n){var t=Ho&&Ho.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ho&&Ho.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Gz(),n),o(Xz(),n),o(zz(),n),o($z(),n)})(Ho)),Ho}var GP;function Hz(){if(GP)return cy;GP=1,Object.defineProperty(cy,"__esModule",{value:!0}),cy.ActorRdfJoin=void 0;const n=Be(),t=Ae(),o=xs(),i=br();let r=class Mn extends t.Actor{constructor(a,u){super(a),this.includeInLogs=!0,this.logicalType=u.logicalType,this.physicalName=u.physicalName,this.limitEntries=u.limitEntries??Number.POSITIVE_INFINITY,this.limitEntriesMin=u.limitEntriesMin??!1,this.canHandleUndefs=u.canHandleUndefs??!1,this.isLeaf=u.isLeaf??!0,this.requiresVariableOverlap=u.requiresVariableOverlap??!1,this.canHandleOperationRequired=u.canHandleOperationRequired??!1}static overlappingVariables(a){const u={};for(const c of a)for(const s of c.variables){u[s.variable.value]||(u[s.variable.value]={variable:s.variable,canBeUndef:s.canBeUndef,occurrences:0});const l=u[s.variable.value];l.canBeUndef=l.canBeUndef||s.canBeUndef,l.occurrences++}return Object.values(u).filter(c=>c.occurrences===a.length).map(c=>({variable:c.variable,canBeUndef:c.canBeUndef}))}static joinVariables(a,u,c=!1){const s={};let l=!0;for(const f of u){for(const d of f.variables)s[d.variable.value]=s[d.variable.value]||d.canBeUndef||!l&&c&&!(d.variable.value in s);l=!1}return Object.entries(s).map(([f,d])=>({variable:a.variable(f),canBeUndef:d}))}static joinBindings(...a){if(a.length===0)return null;if(a.length===1)return a[0];let u=a[0];for(const c of a.slice(1)){const s=u.merge(c);if(!s)return null;u=s}return u}static getCardinality(a){return a.cardinality}static async getMetadatas(a){return await Promise.all(a.map(u=>u.output.metadata()))}static async getEntriesWithMetadatas(a){const u=await Mn.getMetadatas(a);return a.map((c,s)=>({...c,metadata:u[s]}))}static getRequestInitialTimes(a){return a.map(u=>u.pageSize?0:u.requestTime??0)}static getRequestItemTimes(a){return a.map(u=>u.pageSize?(u.requestTime??0)/u.pageSize:0)}constructState(a){const u=new i.MetadataValidationState,c=()=>u.invalidate();for(const s of a)s.state.addInvalidateListener(c);return u}async constructResultMetadata(a,u,c,s={},l=!1){let f;if(s.cardinality)f=s.cardinality;else{let d=!1;f=u.reduce((h,p)=>{const y=Mn.getCardinality(p);return y.value===0&&(d=!0),{type:y.type==="estimate"?"estimate":h.type,value:h.value*(l?Math.max(1,y.value):y.value)}},{type:"exact",value:1}),(!d||l)&&(f.value*=(await this.mediatorJoinSelectivity.mediate({entries:a,context:c})).selectivity,f.value===0&&(f.value=Number.MIN_VALUE))}return{state:this.constructState(u),...s,cardinality:{type:f.type,value:f.value},variables:Mn.joinVariables(c.getSafe(n.KeysInitQuery.dataFactory),u,l)}}static async sortJoinEntries(a,u,c){if(u.some(d=>d.metadata.variables.some(h=>h.canBeUndef)))return(0,t.passTest)(u);const l={};for(const d of u)for(const h of d.metadata.variables){let p=l[h.variable.value];p||(p=0),l[h.variable.value]=++p}const f=[];for(const[d,h]of Object.entries(l))h>=2&&f.push(d);return f.length===0?(0,t.failTest)("Bind join can only join entries with at least one common variable"):(0,t.passTest)((await a.mediate({entries:u,context:c})).entries)}async test(a){if(a.type!==this.logicalType)return(0,t.failTest)(`${this.name} can only handle logical joins of type '${this.logicalType}', while '${a.type}' was given.`);if(a.entries.length<=1)return(0,t.failTest)(`${this.name} requires at least two join entries.`);const u=a.entries.some(l=>l.operationRequired);if(!this.canHandleOperationRequired&&u)return(0,t.failTest)(`${this.name} does not work with operationRequired.`);if(this.limitEntriesMin?a.entries.length<this.limitEntries:a.entries.length>this.limitEntries)return(0,t.failTest)(`${this.name} requires ${this.limitEntries} join entries at ${this.limitEntriesMin?"least":"most"}. The input contained ${a.entries.length}.`);for(const l of a.entries)if(l.output.type!=="bindings")return(0,t.failTest)(`Invalid type of a join entry: Expected 'bindings' but got '${l.output.type}'`);const c=await Mn.getMetadatas(a.entries);let s;return!this.canHandleUndefs&&(s=Mn.overlappingVariables(c),s.some(l=>l.canBeUndef))?(0,t.failTest)(`Actor ${this.name} can not join streams containing undefs`):this.requiresVariableOverlap&&(s??Mn.overlappingVariables(c)).length===0&&!u?(0,t.failTest)(`Actor ${this.name} can only join entries with at least one common variable`):await this.getJoinCoefficients(a,{metadatas:c})}async run(a,u){let c;a.context.has(n.KeysInitQuery.physicalQueryPlanLogger)&&(c=a.context.get(n.KeysInitQuery.physicalQueryPlanNode),a.context=a.context.set(n.KeysInitQuery.physicalQueryPlanNode,a));const s=a.context.get(n.KeysInitQuery.physicalQueryPlanLogger);let l;this.includeInLogs&&s&&(l={},s.stashChildren(c,h=>h.logicalOperator.startsWith("join")),s.logOperation(`join-${this.logicalType}`,this.physicalName,a,c,this.name,l));const{result:f,physicalPlanMetadata:d}=await this.getOutput(a,u);if(l){(0,o.instrumentIterator)(f.bindingsStream).then(p=>{s.appendMetadata(a,{cardinalityReal:p.count,timeSelf:p.timeSelf,timeLife:p.timeLife})}),Object.assign(l,d);const h=u.metadatas.map(Mn.getCardinality);if(l.cardinalities=h,l.joinCoefficients=(await this.getJoinCoefficients(a,u)).getOrThrow(),this.isLeaf)for(let p=0;p<a.entries.length;p++){const y=a.entries[p];s.unstashChild(y.operation,a),s.appendMetadata(y.operation,{cardinality:h[p]})}}return f.metadata=(0,i.cachifyMetadata)(f.metadata),f}};return cy.ActorRdfJoin=r,cy}var XP;function fr(){return XP||(XP=1,(function(n){var t=$o&&$o.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=$o&&$o.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Hz(),n)})($o)),$o}var zP;function Jz(){if(zP)return sy;zP=1,Object.defineProperty(sy,"__esModule",{value:!0}),sy.ActorRdfJoinSingle=void 0;const n=fr(),t=Ae();let o=class extends n.ActorRdfJoin{constructor(r){super(r,{logicalType:"inner",physicalName:"single",limitEntries:1}),this.includeInLogs=!1}async test(r){return r.entries.length!==1?(0,t.failTest)(`Actor ${this.name} can only join a single entry`):await this.getJoinCoefficients(r,void 0)}async getOutput(r){return{result:r.entries[0].output}}async getJoinCoefficients(r,e){return(0,t.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},e)}};return sy.ActorRdfJoinSingle=o,sy}var $P;function Kz(){return $P||($P=1,(function(n){var t=zo&&zo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=zo&&zo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Jz(),n)})(zo)),zo}var Jo={},hy={},HP;function Wz(){if(HP)return hy;HP=1,Object.defineProperty(hy,"__esModule",{value:!0}),hy.ActorRdfJoinMultiEmpty=void 0;const n=fr(),t=Be(),o=Ae(),i=br(),r=ft();let e=class extends n.ActorRdfJoin{constructor(u){super(u,{logicalType:"inner",physicalName:"multi-empty",canHandleUndefs:!0})}async test(u){return(await n.ActorRdfJoin.getMetadatas(u.entries)).every(c=>n.ActorRdfJoin.getCardinality(c).value>0)?(0,o.failTest)(`Actor ${this.name} can only join entries where at least one is empty`):super.test(u)}async getOutput(u){for(const s of u.entries)s.output.bindingsStream.close();const c=u.context.getSafe(t.KeysInitQuery.dataFactory);return{result:{bindingsStream:new r.ArrayIterator([],{autoStart:!1}),metadata:async()=>({state:new i.MetadataValidationState,cardinality:{type:"exact",value:0},variables:n.ActorRdfJoin.joinVariables(c,await n.ActorRdfJoin.getMetadatas(u.entries))}),type:"bindings"}}}async getJoinCoefficients(u,c){return(0,o.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},c)}};return hy.ActorRdfJoinMultiEmpty=e,hy}var JP;function Yz(){return JP||(JP=1,(function(n){var t=Jo&&Jo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Jo&&Jo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Wz(),n)})(Jo)),Jo}var Ko={},yy={},Wo={},_y={},KP;function Zz(){if(KP)return _y;KP=1,Object.defineProperty(_y,"__esModule",{value:!0}),_y.BindingsIndexDef=void 0;let n=class{constructor(o,i){this.keys=o.map(r=>r.variable),this.hashFn=i,this.index={}}put(o,i){return this.index[this.hashFn(o,this.keys)]=i}get(o){const i=this.getFirst(o);return i?[i]:[]}getFirst(o){return this.index[this.hashFn(o,this.keys)]}values(){return Object.values(this.index)}};return _y.BindingsIndexDef=n,_y}var gy={},WP;function kz(){if(WP)return gy;WP=1,Object.defineProperty(gy,"__esModule",{value:!0}),gy.BindingsIndexUndef=void 0;let n=class{constructor(o,i,r){this.data={},this.keys=o.map(e=>e.variable),this.hashFn=i,this.allowDisjointDomains=r&&this.keys.length>0}put(o,i){if(this.allowDisjointDomains||this.isBindingsValid(o)){let r=this.data;for(let e=0;e<this.keys.length;e++){const a=this.keys[e],u=this.hashFn(o.get(a));let c=r[u];c||(c=r[u]=e===this.keys.length-1?i:{}),r=c}}return i}isBindingsValid(o){let i=!1;for(const r of this.keys)if(o.has(r)){i=!0;break}return i}get(o){return this.allowDisjointDomains||this.isBindingsValid(o)?this.getRecursive(o,this.keys,[this.data]):[]}getRecursive(o,i,r){if(i.length===0)return r;let e;[e,...i]=i;const a=[];for(const u of r){const c=this.hashFn(o?.get(e));if(c){const s=[u[c],u[""]].filter(Boolean);if(s.length===0)continue;a.push(this.getRecursive(o,i,s))}else{const s=Object.values(u);if(s.length===0)continue;a.push(this.getRecursive(o,i,s))}}return a.flat()}getFirst(o,i=!0){if(this.allowDisjointDomains||this.isBindingsValid(o))return this.getRecursiveFirst(o,this.keys,[this.data],i)}getRecursiveFirst(o,i,r,e){if(i.length===0)return r[0];let a;[a,...i]=i;for(const u of r){const c=this.hashFn(o.get(a));if(c||!e){const s=[u[c],u[""]].filter(Boolean);if(s.length===0)continue;const l=this.getRecursiveFirst(o,i,s,e);if(l)return l}else{const s=Object.values(u);if(s.length===0)continue;const l=this.getRecursiveFirst(o,i,s,e);if(l)return l}}}values(){return this.keys.length===0?[]:this.getRecursive(void 0,this.keys,[this.data])}};return gy.BindingsIndexUndef=n,gy}var I1={},YP;function e$(){return YP||(YP=1,Object.defineProperty(I1,"__esModule",{value:!0})),I1}var ZP;function XT(){return ZP||(ZP=1,(function(n){var t=Wo&&Wo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Wo&&Wo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Zz(),n),o(kz(),n),o(e$(),n)})(Wo)),Wo}var L1,kP;function t$(){if(kP)return L1;kP=1;let n=ft(),t=n.MultiTransformIterator,o=n.SimpleTransformIterator;class i extends t{constructor(e,a,u,c){super(e,c),this.funRight=a,this.funJoin=u}_createTransformer(e){return new o(this.funRight(e),{transform:(a,u,c)=>{let s=this.funJoin(e,a);s!==null&&c(s),u()}})}}return L1=i,L1}var x1,eN;function r$(){if(eN)return x1;eN=1;let n=ft().AsyncIterator;class t extends n{constructor(i,r,e,a){super(),this.addedDataListener=!1,this.left=i,this.right=r,this.funHash=e,this.funJoin=a,this.leftMap=new Map,this.match=null,this.matches=[],this.matchIdx=0,this.left.on("error",c=>this.destroy(c)),this.right.on("error",c=>this.destroy(c)),this.readable=!1,this.left.on("end",u.bind(this));function u(){this.readable=!0,this.right.on("readable",()=>this.readable=!0),this.right.on("end",()=>{this.hasResults()||this._end()})}this.on("newListener",c=>{c==="data"&&this._addDataListenerIfNeeded()}),this.left.readable&&this._addDataListenerIfNeeded(),this.left.on("readable",()=>this._addDataListenerIfNeeded())}hasResults(){return!this.right.ended||this.matchIdx<this.matches.length}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(this._addDataListenerIfNeeded();;){if(this.ended||!this.readable)return null;for(;this.matchIdx<this.matches.length;){let r=this.matches[this.matchIdx++],e=this.funJoin(r,this.match);if(e!==null)return e}if(this.hasResults()||this._end(),this.match=this.right.read(),this.match===null)return this.readable=!1,null;let i=this.funHash(this.match);this.matches=this.leftMap.get(i)||[],this.matchIdx=0}}_addDataListenerIfNeeded(){this.addedDataListener||(this.addedDataListener=!0,this._addDataListener())}_addDataListener(){this.left.on("data",i.bind(this));function i(r){let e=this.funHash(r),a=this.leftMap.get(e);a||(a=[],this.leftMap.set(e,a)),a.push(r)}}}return x1=t,x1}var q1,tN;function n$(){if(tN)return q1;tN=1;const{MultiTransformIterator:n,SimpleTransformIterator:t,scheduleTask:o}=ft();class i extends n{constructor(e,a,u,c){super(e,c),this.right=a,this.funJoin=u,this.on("end",()=>this.right.close())}_end(){super._end(),o(()=>this.right.destroy())}_createTransformer(e){return new t(this.right.clone(),{transform:(a,u,c)=>{let s=this.funJoin(e,a);s!==null&&c(s),u()}})}}return q1=i,q1}var B1,rN;function i$(){if(rN)return B1;rN=1;let n=ft().AsyncIterator;class t extends n{constructor(i,r,e,a){super(),this.left=i,this.right=r,this.funHash=e,this.funJoin=a,this.usedLeft=!1,this.leftMap=new Map,this.rightMap=new Map,this.on("end",()=>this._cleanup()),this.match=null,this.matches=[],this.matchIdx=0,(this.left.readable||this.right.readable)&&(this.readable=!0),this.left.on("error",u=>this.destroy(u)),this.right.on("error",u=>this.destroy(u)),this.left.on("readable",()=>this.readable=!0),this.right.on("readable",()=>this.readable=!0),this.left.on("end",()=>{this.hasResults()||this._end()}),this.right.on("end",()=>{this.hasResults()||this._end()})}hasResults(){return!this.left.ended||!this.right.ended||!!this.matches&&this.matchIdx<this.matches.length}_cleanup(){this.leftMap=null,this.rightMap=null,this.matches=null}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(;;){if(this.ended)return null;for(;this.matchIdx<this.matches.length;){let e=this.matches[this.matchIdx++],a=this.usedLeft?this.funJoin(this.match,e):this.funJoin(e,this.match);if(a!==null)return a}this.hasResults()||this._end();let i=null;for(let e=0;e<2&&(i=this.usedLeft?this.right.read():this.left.read(),this.usedLeft=!this.usedLeft,i===null);++e);if(this.done||i===null)return this.readable=!1,null;let r=this.funHash(i);if(this.usedLeft&&this.right.done)this.leftMap=null;else if(this.left.done)this.rightMap=null;else{let e=this.usedLeft?this.leftMap:this.rightMap;e.has(r)||e.set(r,[]);let a=e.get(r);a||(a=[],e.set(r,a)),a.push(i)}this.match=i,this.matches=(this.usedLeft?this.rightMap:this.leftMap).get(r)||[],this.matchIdx=0}}}return B1=t,B1}var C1,nN;function a$(){if(nN)return C1;nN=1;let n=ft().AsyncIterator;class t extends n{constructor(i){super(),Array.isArray(i)||(i=Array.prototype.slice.call(arguments)),this.streams=i;for(let r of i)r.on("readable",()=>this.emit("readable")),r.on("end",()=>this._removeStream(r));this.streams.length===0&&this.close(),this.idx=this.streams.length-1}_removeStream(i){let r=this.streams.indexOf(i);r<0||(this.streams.splice(r,1),this.idx>=this.streams.length&&--this.idx,this.streams.length===0&&this._end())}close(){super.close();for(let i of this.streams)i.close()}read(){for(let i=0;i<this.streams.length;++i){this.idx=(this.idx+1)%this.streams.length;let r=this.streams[this.idx].read();if(r!==null)return r}return null}}return C1=t,C1}var Q1,iN;function Qb(){if(iN)return Q1;iN=1;const n=t$(),t=r$(),o=n$(),i=i$(),r=a$();return Q1={DynamicNestedLoopJoin:n,HashJoin:t,NestedLoopJoin:o,SymmetricHashJoin:i,MergeStream:r},Q1}var aN;function o$(){if(aN)return yy;aN=1,Object.defineProperty(yy,"__esModule",{value:!0}),yy.ActorRdfJoinHash=void 0;const n=fr(),t=Ae(),o=XT(),i=xs(),r=ft(),e=Qb(),a=mr();let u=class extends n.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:`hash-${s.canHandleUndefs?"undef":"def"}`,limitEntries:2,requiresVariableOverlap:!0,canHandleUndefs:s.canHandleUndefs})}async getOutput(s,l){const f=l.metadatas;let d;const h=n.ActorRdfJoin.overlappingVariables(f);if(this.canHandleUndefs){const p=l.entriesSorted[0].output,y=l.entriesSorted[1].output;d=new i.ClosableTransformIterator(async()=>{const b=new o.BindingsIndexUndef(h,_=>_&&_.termType!=="Variable"?(0,a.termToString)(_):"",!0);return await new Promise(_=>{p.bindingsStream.on("data",T=>{(b.getFirst(T,!1)??b.put(T,[])).push(T)}),p.bindingsStream.on("end",_),p.bindingsStream.on("error",T=>{d.emit("error",T)})}),new r.MultiTransformIterator(y.bindingsStream,{multiTransform:_=>new r.ArrayIterator(b.get(_).flat().map(T=>n.ActorRdfJoin.joinBindings(_,T)).filter(T=>T!==null),{autoStart:!1}),autoStart:!1})},{autoStart:!1,onClose(){p.bindingsStream.destroy(),y.bindingsStream.destroy()}})}else{const{hashFunction:p}=await this.mediatorHashBindings.mediate({context:s.context}),y=h.map(b=>b.variable);d=new e.HashJoin(l.entriesSorted[0].output.bindingsStream,l.entriesSorted[1].output.bindingsStream,b=>p(b,y),n.ActorRdfJoin.joinBindings)}return{result:{type:"bindings",bindingsStream:d,metadata:async()=>await this.constructResultMetadata(l.entriesSorted,f,s.context)}}}async getJoinCoefficients(s,l){let f=s.entries;l.metadatas[1].cardinality.value<l.metadatas[0].cardinality.value&&(l.metadatas=[l.metadatas[1],l.metadatas[0]],f=[s.entries[1],s.entries[0]]);const{metadatas:d}=l,h=n.ActorRdfJoin.getRequestInitialTimes(d),p=n.ActorRdfJoin.getRequestItemTimes(d);let y=d[0].cardinality.value+d[1].cardinality.value;return this.canHandleUndefs||(y*=.8),(0,t.passTestWithSideData)({iterations:y,persistedItems:d[0].cardinality.value,blockingItems:d[0].cardinality.value,requestTime:h[0]+d[0].cardinality.value*p[0]+h[1]+d[1].cardinality.value*p[1]},{...l,entriesSorted:f})}};return yy.ActorRdfJoinHash=u,yy}var oN;function uN(){return oN||(oN=1,(function(n){var t=Ko&&Ko.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ko&&Ko.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(o$(),n)})(Ko)),Ko}var Yo={},my={},sN;function u$(){if(sN)return my;sN=1,Object.defineProperty(my,"__esModule",{value:!0}),my.ActorRdfJoinSymmetricHash=void 0;const n=fr(),t=Ae(),o=Qb();let i=class extends n.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"symmetric-hash",limitEntries:2,requiresVariableOverlap:!0})}async getOutput(e){const a=await n.ActorRdfJoin.getMetadatas(e.entries),u=n.ActorRdfJoin.overlappingVariables(a),{hashFunction:c}=await this.mediatorHashBindings.mediate({context:e.context}),s=u.map(f=>f.variable);return{result:{type:"bindings",bindingsStream:new o.SymmetricHashJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,f=>c(f,s),n.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(e.entries,a,e.context)}}}async getJoinCoefficients(e,a){const{metadatas:u}=a,c=n.ActorRdfJoin.getRequestInitialTimes(u),s=n.ActorRdfJoin.getRequestItemTimes(u);return(0,t.passTestWithSideData)({iterations:u[0].cardinality.value+u[1].cardinality.value,persistedItems:u[0].cardinality.value+u[1].cardinality.value,blockingItems:0,requestTime:c[0]+u[0].cardinality.value*s[0]+c[1]+u[1].cardinality.value*s[1]},a)}};return my.ActorRdfJoinSymmetricHash=i,my}var cN;function s$(){return cN||(cN=1,(function(n){var t=Yo&&Yo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Yo&&Yo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(u$(),n)})(Yo)),Yo}var Zo={},by={},lN;function c$(){if(lN)return by;lN=1,Object.defineProperty(by,"__esModule",{value:!0}),by.ActorRdfJoinNestedLoop=void 0;const n=fr(),t=Ae(),o=Qb();let i=class extends n.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){return{result:{type:"bindings",bindingsStream:new o.NestedLoopJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,n.ActorRdfJoin.joinBindings,{autoStart:!1}),metadata:async()=>await this.constructResultMetadata(e.entries,await n.ActorRdfJoin.getMetadatas(e.entries),e.context)}}}async getJoinCoefficients(e,a){const{metadatas:u}=a,c=n.ActorRdfJoin.getRequestInitialTimes(u),s=n.ActorRdfJoin.getRequestItemTimes(u);return(0,t.passTestWithSideData)({iterations:u[0].cardinality.value*u[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:c[0]+u[0].cardinality.value*s[0]+c[1]+u[1].cardinality.value*s[1]},a)}};return by.ActorRdfJoinNestedLoop=i,by}var fN;function l$(){return fN||(fN=1,(function(n){var t=Zo&&Zo.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Zo&&Zo.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(c$(),n)})(Zo)),Zo}var ko={},vy={},eu={},Ty={},tu={},dN;function Zq(){if(dN)return tu;dN=1,Object.defineProperty(tu,"__esModule",{value:!0}),tu.bindingsToCompactString=tu.bindingsToString=void 0;const n=mr();function t(i){const r={};for(const e of i.keys())r[e.value]=(0,n.termToString)(i.get(e));return JSON.stringify(r,null,"  ")}tu.bindingsToString=t;function o(i,r){return r.map(e=>{const a=i.get(e);return a?(0,n.termToString)(a):""}).join("")}return tu.bindingsToCompactString=o,tu}var pN;function kq(){if(pN)return Ty;pN=1,Object.defineProperty(Ty,"__esModule",{value:!0}),Ty.Bindings=void 0;const n=Ae(),t=AT,o=Zq();let i=class Zt{constructor(e,a,u){this.type="bindings",this.dataFactory=e,this.entries=a,this.contextHolder=u}has(e){return this.entries.has(typeof e=="string"?e:e.value)}get(e){return this.entries.get(typeof e=="string"?e:e.value)}set(e,a){return new Zt(this.dataFactory,this.entries.set(typeof e=="string"?e:e.value,a),this.contextHolder)}delete(e){return new Zt(this.dataFactory,this.entries.delete(typeof e=="string"?e:e.value),this.contextHolder)}keys(){return this.mapIterable(this.iteratorToIterable(this.entries.keys()),e=>this.dataFactory.variable(e))}values(){return this.iteratorToIterable(this.entries.values())}forEach(e){for(const[a,u]of this.entries.entries())e(u,this.dataFactory.variable(a))}get size(){return this.entries.size}[Symbol.iterator](){return this.mapIterable(this.iteratorToIterable(this.entries.entries()),([e,a])=>[this.dataFactory.variable(e),a])[Symbol.iterator]()}equals(e){if(!e)return!1;if(this===e)return!0;if(this.size!==e.size)return!1;for(const a of this.keys())if(!this.get(a)?.equals(e.get(a)))return!1;return!0}filter(e){return new Zt(this.dataFactory,(0,t.Map)(this.entries.filter((a,u)=>e(a,this.dataFactory.variable(u)))),this.contextHolder)}map(e){return new Zt(this.dataFactory,(0,t.Map)(this.entries.map((a,u)=>e(a,this.dataFactory.variable(u)))),this.contextHolder)}merge(e){if(this.size<e.size&&e instanceof Zt)return e.merge(this);let a=this.entries;if(e instanceof Zt)for(const[u,c]of e.entries){const s=this.entries.get(u);if(s&&!s.equals(c))return;a=a.set(u,c)}else for(const[u,c]of e){const s=this.entries.get(u.value);if(s&&!s.equals(c))return;a=a.set(u.value,c)}return this.createBindingsWithContexts(a,e)}mergeWith(e,a){if(this.size<a.size&&a instanceof Zt)return a.mergeWith(e,this);let u=this.entries;if(a instanceof Zt)for(const[c,s]of a.entries){const l=this.entries.get(c);let f;l&&!l.equals(s)?f=e(l,s,this.dataFactory.variable(c)):f=s,u=u.set(c,f)}else for(const[c,s]of a){const l=this.entries.get(c.value);let f;l&&!l.equals(s)?f=e(l,s,c):f=s,u=u.set(c.value,f)}return this.createBindingsWithContexts(u,a)}createBindingsWithContexts(e,a){if(this.contextHolder&&this.contextHolder.context){let u=this.contextHolder.context;return"contextHolder"in a&&a.contextHolder&&a.contextHolder.context&&(u=Zt.mergeContext(this.contextHolder.contextMergeHandlers,u,a.contextHolder.context)),new Zt(this.dataFactory,e,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:u})}return new Zt(this.dataFactory,e,a.contextHolder)}static mergeContext(e,a,u){const c=[...a.keys(),...u.keys()],s={},l={},f=new Set(u.keys().map(h=>h.name)),d=a.keys().filter(h=>f.has(h.name));for(const h of c){if(l[h.name]===1)continue;l[h.name]=1;const p=d.some(y=>y.name===h.name);if(e[h.name]&&p){s[h.name]=e[h.name].run(a.get(h),u.get(h));continue}!e[h.name]&&p||(s[h.name]=a.get(h)||u.get(h))}return new n.ActionContext(s)}setContextEntry(e,a){return this.setContextEntryRaw(e,a)}setContextEntryRaw(e,a){return this.contextHolder&&this.contextHolder.context?new Zt(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:this.contextHolder.context.set(e,a)}):new Zt(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder?.contextMergeHandlers??{},context:new n.ActionContext().set(e,a)})}deleteContextEntry(e){return this.deleteContextEntryRaw(e)}deleteContextEntryRaw(e){return this.contextHolder?new Zt(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:this.contextHolder.context?.delete(e)}):new Zt(this.dataFactory,this.entries)}getContext(){return this.contextHolder?.context}getContextEntry(e){return this.getContext()?.get(e)}toString(){return(0,o.bindingsToString)(this)}*mapIterable(e,a){for(const u of e)yield a(u)}iteratorToIterable(e){return{[Symbol.iterator]:()=>e}}};return Ty.Bindings=i,Ty}var Oy={},hN;function f$(){if(hN)return Oy;hN=1,Object.defineProperty(Oy,"__esModule",{value:!0}),Oy.BindingsFactory=void 0;const n=AT,t=kq();let o=class e5{constructor(r,e){this.dataFactory=r,this.contextMergeHandlers=e}static async create(r,e,a){return new e5(a,(await r.mediate({context:e})).mergeHandlers)}bindings(r=[]){return new t.Bindings(this.dataFactory,(0,n.Map)(r.map(([e,a])=>[e.value,a])),this.contextMergeHandlers?{contextMergeHandlers:this.contextMergeHandlers}:void 0)}fromBindings(r){return this.bindings([...r])}fromRecord(r){return this.bindings(Object.entries(r).map(([e,a])=>[this.dataFactory.variable(e),a]))}};return Oy.BindingsFactory=o,Oy}var yN;function Dt(){return yN||(yN=1,(function(n){var t=eu&&eu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=eu&&eu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(kq(),n),o(f$(),n),o(Zq(),n)})(eu)),eu}var _N;function d$(){if(_N)return vy;_N=1,Object.defineProperty(vy,"__esModule",{value:!0}),vy.ActorRdfJoinMinusHash=void 0;const n=fr(),t=Ae(),o=Dt(),i=XT(),r=xs(),e=mr();let a=class t5 extends n.ActorRdfJoin{constructor(c){super(c,{logicalType:"minus",physicalName:`hash-${c.canHandleUndefs?"undef":"def"}`,limitEntries:2,canHandleUndefs:c.canHandleUndefs})}static constructIndex(c,s){return c?new i.BindingsIndexUndef(s,l=>l&&l.termType!=="Variable"?(0,e.termToString)(l):"",!1):new i.BindingsIndexDef(s,o.bindingsToCompactString)}async getOutput(c){const s=c.entries[1].output,l=c.entries[0].output,f=await n.ActorRdfJoin.getMetadatas(c.entries);let d=n.ActorRdfJoin.overlappingVariables(f);if(c.graphVariableFromParentScope&&(d=d.filter(p=>!p.variable.equals(c.graphVariableFromParentScope))),d.length===0)return s.bindingsStream.destroy(),{result:l};const h=new r.ClosableTransformIterator(async()=>{const p=t5.constructIndex(this.canHandleUndefs,d);return await new Promise(y=>{s.bindingsStream.on("data",b=>p.put(b,!0)),s.bindingsStream.on("end",y),s.bindingsStream.on("error",b=>h.emit("error",b))}),l.bindingsStream.filter(y=>!p.getFirst(y,!0))},{autoStart:!1,onClose(){s.bindingsStream.destroy(),l.bindingsStream.destroy()}});return{result:{type:"bindings",bindingsStream:h,metadata:l.metadata}}}async getJoinCoefficients(c,s){const{metadatas:l}=s,f=n.ActorRdfJoin.getRequestInitialTimes(l),d=n.ActorRdfJoin.getRequestItemTimes(l);let h=l[0].cardinality.value+l[1].cardinality.value;return this.canHandleUndefs||(h*=.8),(0,t.passTestWithSideData)({iterations:h,persistedItems:l[0].cardinality.value,blockingItems:l[0].cardinality.value,requestTime:f[0]+l[0].cardinality.value*d[0]+f[1]+l[1].cardinality.value*d[1]},s)}};return vy.ActorRdfJoinMinusHash=a,vy}var gN;function mN(){return gN||(gN=1,(function(n){var t=ko&&ko.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ko&&ko.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(d$(),n)})(ko)),ko}var ru={},Sy={},bN;function p$(){if(bN)return Sy;bN=1,Object.defineProperty(Sy,"__esModule",{value:!0}),Sy.ActorRdfJoinOptionalHash=void 0;const n=fr(),t=Ae(),o=Dt(),i=XT(),r=xs(),e=ft(),a=mr();let u=class qv extends n.ActorRdfJoin{constructor(s){super(s,{logicalType:"optional",physicalName:`hash-${s.canHandleUndefs?"undef":"def"}-${s.blocking?"blocking":"nonblocking"}`,limitEntries:2,canHandleUndefs:s.canHandleUndefs,requiresVariableOverlap:!0})}static constructIndex(s,l){return s?new i.BindingsIndexUndef(l,f=>f&&f.termType!=="Variable"?(0,a.termToString)(f):"",!0):new i.BindingsIndexDef(l,o.bindingsToCompactString)}async getOutput(s){const l=s.entries[1].output,f=s.entries[0].output,d=await n.ActorRdfJoin.getMetadatas(s.entries),h=n.ActorRdfJoin.overlappingVariables(d);let p;return this.blocking?p=new r.ClosableTransformIterator(async()=>{const y=qv.constructIndex(this.canHandleUndefs,h);return await new Promise(b=>{l.bindingsStream.on("data",_=>{(y.getFirst(_,!0)??y.put(_,[])).push(_)}),l.bindingsStream.on("end",b),l.bindingsStream.on("error",_=>{p.emit("error",_)})}),new e.MultiTransformIterator(f.bindingsStream,{multiTransform:b=>new e.ArrayIterator(y.get(b).flat().map(_=>n.ActorRdfJoin.joinBindings(b,_)).filter(_=>_!==null),{autoStart:!1}),optional:!0,autoStart:!1})},{autoStart:!1,onClose(){l.bindingsStream.destroy(),f.bindingsStream.destroy()}}):p=new r.ClosableTransformIterator(async()=>{const y=qv.constructIndex(this.canHandleUndefs,h);let b=!0;return l.bindingsStream.on("data",_=>{(y.getFirst(_,!0)??y.put(_,new e.BufferedIterator({autoStart:!1})))._push(_)}),l.bindingsStream.on("end",()=>{for(const _ of y.values())_.close();b=!1}),l.bindingsStream.on("error",_=>{p.emit("error",_)}),new e.MultiTransformIterator(f.bindingsStream,{multiTransform:_=>{let T=y.get(_);return T.length===0&&(b?T=[y.put(_,new e.BufferedIterator({autoStart:!1}))]:T=[]),new e.UnionIterator(T.map(A=>A.clone()),{autoStart:!1}).map(A=>n.ActorRdfJoin.joinBindings(_,A))},optional:!0,autoStart:!1})},{autoStart:!1,onClose(){l.bindingsStream.destroy(),f.bindingsStream.destroy()}}),{result:{type:"bindings",bindingsStream:p,metadata:async()=>await this.constructResultMetadata(s.entries,d,s.context,{},!0)}}}async getJoinCoefficients(s,l){const{metadatas:f}=l,d=n.ActorRdfJoin.getRequestInitialTimes(f),h=n.ActorRdfJoin.getRequestItemTimes(f);let p=f[0].cardinality.value+f[1].cardinality.value;return this.canHandleUndefs||(p*=.8),this.blocking&&(p*=.9),(0,t.passTestWithSideData)({iterations:p,persistedItems:f[0].cardinality.value,blockingItems:this.blocking?f[0].cardinality.value:0,requestTime:d[0]+f[0].cardinality.value*h[0]+d[1]+f[1].cardinality.value*h[1]},l)}};return Sy.ActorRdfJoinOptionalHash=u,Sy}var vN;function Zm(){return vN||(vN=1,(function(n){var t=ru&&ru.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ru&&ru.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(p$(),n)})(ru)),ru}var nu={},wy={},TN;function h$(){if(TN)return wy;TN=1,Object.defineProperty(wy,"__esModule",{value:!0}),wy.ActorRdfJoinOptionalNestedLoop=void 0;const n=fr(),t=Ae(),o=Qb();let i=class extends n.ActorRdfJoin{constructor(e){super(e,{logicalType:"optional",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){return{result:{type:"bindings",bindingsStream:new o.NestedLoopJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,n.ActorRdfJoin.joinBindings,{optional:!0,autoStart:!1}),metadata:async()=>await this.constructResultMetadata(e.entries,await n.ActorRdfJoin.getMetadatas(e.entries),e.context,{},!0)}}}async getJoinCoefficients(e,a){const{metadatas:u}=a,c=n.ActorRdfJoin.getRequestInitialTimes(u),s=n.ActorRdfJoin.getRequestItemTimes(u);return(0,t.passTestWithSideData)({iterations:u[0].cardinality.value*u[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:c[0]+u[0].cardinality.value*s[0]+c[1]+u[1].cardinality.value*s[1]},a)}};return wy.ActorRdfJoinOptionalNestedLoop=i,wy}var ON;function y$(){return ON||(ON=1,(function(n){var t=nu&&nu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=nu&&nu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(h$(),n)})(nu)),nu}var iu={},Ay={},au={},Fy={},SN;function _$(){if(SN)return Fy;SN=1,Object.defineProperty(Fy,"__esModule",{value:!0}),Fy.ActorBindingsAggregatorFactory=void 0;const n=Ae();let t=class extends n.Actor{constructor(i){super(i),this.mediatorExpressionEvaluatorFactory=i.mediatorExpressionEvaluatorFactory}};return Fy.ActorBindingsAggregatorFactory=t,Fy}var Ey={},wN;function g$(){if(wN)return Ey;wN=1,Object.defineProperty(Ey,"__esModule",{value:!0}),Ey.AggregateEvaluator=void 0;const n=Be(),t=ye(),o=mr();let i=class{constructor(e,a,u=!1){this.evaluator=e,this.distinct=a,this.throwError=u,this.errorOccurred=!1,this.errorOccurred=!1,this.superTypeProvider=e.context.getSafe(n.KeysExpressionEvaluator.superTypeProvider),this.termTransformer=new t.TermTransformer(this.superTypeProvider),this.variableValues=new Set}emptyValueTerm(){}emptyValue(){const e=this.emptyValueTerm();if(e===void 0&&this.throwError)throw new t.EmptyAggregateError;return e}async putBindings(e){if(!this.errorOccurred)try{const a=await this.evaluator.evaluate(e);if(!a||this.errorOccurred)return;(!this.distinct||!this.variableValues.has(o.termToString(a)))&&(this.putTerm(a),this.distinct&&this.variableValues.add(o.termToString(a)))}catch(a){this.safeThrow(a)}}async result(){if(!this.errorOccurred)return this.termResult()}safeThrow(e){if(this.throwError)throw e;this.errorOccurred=!0}termToNumericOrError(e){if(e.termType!=="Literal")throw new Error(`Term with value ${e.value} has type ${e.termType} and is not a numeric literal`);if(!t.isSubTypeOf(e.datatype.value,t.TypeAlias.SPARQL_NUMERIC,this.superTypeProvider))throw new Error(`Term datatype ${e.datatype.value} with value ${e.value} has type ${e.termType} and is not a numeric literal`);return this.termTransformer.transformLiteral(e)}};return Ey.AggregateEvaluator=i,Ey}var AN;function rr(){return AN||(AN=1,(function(n){var t=au&&au.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=au&&au.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(_$(),n),o(g$(),n)})(au)),au}var Ry={},FN;function r5(){if(FN)return Ry;FN=1,Object.defineProperty(Ry,"__esModule",{value:!0}),Ry.CountAggregator=void 0;const n=rr(),t=ye();let o=class extends n.AggregateEvaluator{constructor(r,e,a){super(r,e,a),this.state=void 0}emptyValueTerm(){return(0,t.typedLiteral)("0",t.TypeURL.XSD_INTEGER)}putTerm(r){this.state===void 0&&(this.state=0),this.state++}termResult(){return this.state===void 0?this.emptyValue():(0,t.typedLiteral)(String(this.state),t.TypeURL.XSD_INTEGER)}};return Ry.CountAggregator=o,Ry}var EN;function m$(){if(EN)return Ay;EN=1,Object.defineProperty(Ay,"__esModule",{value:!0}),Ay.ActorBindingsAggregatorFactoryCount=void 0;const n=rr(),t=Ae(),o=We(),i=r5();let r=class extends n.ActorBindingsAggregatorFactory{constructor(a){super(a)}async test(a){return a.expr.aggregator!=="count"||a.expr.expression.expressionType===o.Algebra.expressionTypes.WILDCARD?(0,t.failTest)("This actor only supports the 'count' aggregator without wildcard."):(0,t.passTestVoid)()}async run({context:a,expr:u}){return new i.CountAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:u.expression,context:a}),u.distinct)}};return Ay.ActorBindingsAggregatorFactoryCount=r,Ay}var RN;function b$(){return RN||(RN=1,(function(n){var t=iu&&iu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=iu&&iu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(m$(),n),o(r5(),n)})(iu)),iu}var ou={},jy={},Dy={},jN;function n5(){if(jN)return Dy;jN=1,Object.defineProperty(Dy,"__esModule",{value:!0}),Dy.GroupConcatAggregator=void 0;const n=rr(),t=ye();let o=class extends n.AggregateEvaluator{constructor(r,e,a,u,c){super(r,e,c),this.dataFactory=a,this.state=void 0,this.lastLanguageValid=!0,this.lastLanguage=void 0,this.separator=u??" "}emptyValueTerm(){return t.typedLiteral("",t.TypeURL.XSD_STRING)}putTerm(r){this.state===void 0?(this.state=r.value,r.termType==="Literal"&&(this.lastLanguage=r.language)):(this.state+=this.separator+r.value,this.lastLanguageValid&&r.termType==="Literal"&&this.lastLanguage!==r.language&&(this.lastLanguageValid=!1,this.lastLanguage=void 0))}termResult(){return this.state===void 0?this.emptyValue():this.lastLanguageValid&&this.lastLanguage?t.langString(this.state,this.lastLanguage).toRDF(this.dataFactory):t.typedLiteral(this.state,t.TypeURL.XSD_STRING)}};return Dy.GroupConcatAggregator=o,Dy}var DN;function v$(){if(DN)return jy;DN=1,Object.defineProperty(jy,"__esModule",{value:!0}),jy.ActorBindingsAggregatorFactoryGroupConcat=void 0;const n=rr(),t=Be(),o=Ae(),i=n5();let r=class extends n.ActorBindingsAggregatorFactory{constructor(a){super(a)}async test(a){return a.expr.aggregator!=="group_concat"?(0,o.failTest)("This actor only supports the 'group_concat' aggregator."):(0,o.passTestVoid)()}async run({context:a,expr:u}){return new i.GroupConcatAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:u.expression,context:a}),u.distinct,a.getSafe(t.KeysInitQuery.dataFactory),u.separator)}};return jy.ActorBindingsAggregatorFactoryGroupConcat=r,jy}var PN;function T$(){return PN||(PN=1,(function(n){var t=ou&&ou.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ou&&ou.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(v$(),n),o(n5(),n)})(ou)),ou}var uu={},Py={},Ny={},NN;function i5(){if(NN)return Ny;NN=1,Object.defineProperty(Ny,"__esModule",{value:!0}),Ny.SampleAggregator=void 0;const n=rr();let t=class extends n.AggregateEvaluator{constructor(i,r,e){super(i,r,e),this.state=void 0}putTerm(i){this.state===void 0&&(this.state=i)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return Ny.SampleAggregator=t,Ny}var MN;function O$(){if(MN)return Py;MN=1,Object.defineProperty(Py,"__esModule",{value:!0}),Py.ActorBindingsAggregatorFactorySample=void 0;const n=rr(),t=Ae(),o=i5();let i=class extends n.ActorBindingsAggregatorFactory{constructor(e){super(e)}async test(e){return e.expr.aggregator!=="sample"?(0,t.failTest)("This actor only supports the 'sample' aggregator."):(0,t.passTestVoid)()}async run({context:e,expr:a}){return new o.SampleAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:a.expression,context:e}),a.distinct)}};return Py.ActorBindingsAggregatorFactorySample=i,Py}var IN;function S$(){return IN||(IN=1,(function(n){var t=uu&&uu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=uu&&uu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(O$(),n),o(i5(),n)})(uu)),uu}var su={},My={},Iy={},LN;function a5(){if(LN)return Iy;LN=1,Object.defineProperty(Iy,"__esModule",{value:!0}),Iy.WildcardCountAggregator=void 0;const n=rr(),t=ye(),o=mr();let i=class extends n.AggregateEvaluator{constructor(e,a,u){super(e,a,u),this.bindingValues=new Map,this.state=void 0}putTerm(e){}async putBindings(e){this.handleDistinct(e)||(this.state===void 0&&(this.state=0),this.state+=1)}emptyValueTerm(){return(0,t.typedLiteral)("0",t.TypeURL.XSD_INTEGER)}termResult(){return this.state===void 0?this.emptyValue():(0,t.typedLiteral)(String(this.state),t.TypeURL.XSD_INTEGER)}handleDistinct(e){if(this.distinct){const a=[...e];a.sort((f,d)=>f[0].value.localeCompare(d[0].value));const u=a.map(([f])=>f.value).join(","),c=a.map(([,f])=>o.termToString(f)).join(","),s=this.bindingValues.get(u),l=s!==void 0&&s.has(c);return s||this.bindingValues.set(u,new Set),this.bindingValues.get(u).add(c),l}return!1}};return Iy.WildcardCountAggregator=i,Iy}var xN;function w$(){if(xN)return My;xN=1,Object.defineProperty(My,"__esModule",{value:!0}),My.ActorBindingsAggregatorFactoryWildcardCount=void 0;const n=rr(),t=Ae(),o=a5();let i=class extends n.ActorBindingsAggregatorFactory{constructor(e){super(e)}async test(e){return e.expr.aggregator!=="count"||e.expr.expression.expressionType!=="wildcard"?(0,t.failTest)("This actor only supports the 'count' aggregator with wildcard."):(0,t.passTestVoid)()}async run({context:e,expr:a}){return new o.WildcardCountAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:a.expression,context:e}),a.distinct)}};return My.ActorBindingsAggregatorFactoryWildcardCount=i,My}var qN;function A$(){return qN||(qN=1,(function(n){var t=su&&su.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=su&&su.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(w$(),n),o(a5(),n)})(su)),su}var cu={},Ly={},xy={},BN;function o5(){if(BN)return xy;BN=1,Object.defineProperty(xy,"__esModule",{value:!0}),xy.AverageAggregator=void 0;const n=rr(),t=ye();let o=class extends n.AggregateEvaluator{constructor(r,e,a,u,c,s){super(r,e,s),this.dataFactory=a,this.additionFunction=u,this.divisionFunction=c,this.state=void 0}emptyValueTerm(){return t.typedLiteral("0",t.TypeURL.XSD_INTEGER)}putTerm(r){if(this.state===void 0){const e=this.termToNumericOrError(r);this.state={sum:e,count:1}}else{const e=this.termToNumericOrError(r);this.state.sum=this.additionFunction.applyOnTerms([this.state.sum,e],this.evaluator),this.state.count++}}termResult(){if(this.state===void 0)return this.emptyValue();const r=new t.IntegerLiteral(this.state.count);return this.divisionFunction.applyOnTerms([this.state.sum,r],this.evaluator).toRDF(this.dataFactory)}};return xy.AverageAggregator=o,xy}var CN;function F$(){if(CN)return Ly;CN=1,Object.defineProperty(Ly,"__esModule",{value:!0}),Ly.ActorBindingsAggregatorFactoryAverage=void 0;const n=rr(),t=Be(),o=Ae(),i=ye(),r=o5();let e=class extends n.ActorBindingsAggregatorFactory{constructor(u){super(u),this.mediatorFunctionFactory=u.mediatorFunctionFactory}async test(u){return u.expr.aggregator!=="avg"?(0,o.failTest)("This actor only supports the 'avg' aggregator."):(0,o.passTestVoid)()}async run({context:u,expr:c}){return new r.AverageAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:c.expression,context:u}),c.distinct,u.getSafe(t.KeysInitQuery.dataFactory),await this.mediatorFunctionFactory.mediate({functionName:i.SparqlOperator.ADDITION,context:u,requireTermExpression:!0}),await this.mediatorFunctionFactory.mediate({functionName:i.SparqlOperator.DIVISION,context:u,requireTermExpression:!0}))}};return Ly.ActorBindingsAggregatorFactoryAverage=e,Ly}var QN;function E$(){return QN||(QN=1,(function(n){var t=cu&&cu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=cu&&cu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(F$(),n),o(o5(),n)})(cu)),cu}var lu={},qy={},By={},UN;function u5(){if(UN)return By;UN=1,Object.defineProperty(By,"__esModule",{value:!0}),By.SumAggregator=void 0;const n=rr(),t=ye();let o=class extends n.AggregateEvaluator{constructor(r,e,a,u,c){super(r,e,c),this.dataFactory=a,this.additionFunction=u,this.state=void 0}emptyValueTerm(){return(0,t.typedLiteral)("0",t.TypeURL.XSD_INTEGER)}putTerm(r){if(this.state===void 0)this.state=this.termToNumericOrError(r);else{const e=this.termToNumericOrError(r);this.state=this.additionFunction.applyOnTerms([this.state,e],this.evaluator)}}termResult(){return this.state===void 0?this.emptyValue():this.state.toRDF(this.dataFactory)}};return By.SumAggregator=o,By}var VN;function R$(){if(VN)return qy;VN=1,Object.defineProperty(qy,"__esModule",{value:!0}),qy.ActorBindingsAggregatorFactorySum=void 0;const n=rr(),t=Be(),o=Ae(),i=ye(),r=u5();let e=class extends n.ActorBindingsAggregatorFactory{constructor(u){super(u),this.mediatorFunctionFactory=u.mediatorFunctionFactory}async test(u){return u.expr.aggregator!=="sum"?(0,o.failTest)("This actor only supports the 'sum' aggregator."):(0,o.passTestVoid)()}async run({expr:u,context:c}){return new r.SumAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:u.expression,context:c}),u.distinct,c.getSafe(t.KeysInitQuery.dataFactory),await this.mediatorFunctionFactory.mediate({functionName:i.SparqlOperator.ADDITION,context:c,requireTermExpression:!0}))}};return qy.ActorBindingsAggregatorFactorySum=e,qy}var GN;function j$(){return GN||(GN=1,(function(n){var t=lu&&lu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=lu&&lu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(R$(),n),o(u5(),n)})(lu)),lu}var fu={},Cy={},Qy={},XN;function D$(){if(XN)return Qy;XN=1,Object.defineProperty(Qy,"__esModule",{value:!0}),Qy.ExpressionFunctionIn=void 0;const n=ge(),t=ye();let o=class extends n.ExpressionFunctionBase{constructor(r){super({arity:Number.POSITIVE_INFINITY,operator:t.SparqlOperator.IN,apply:async e=>{const{args:a,mapping:u,exprEval:c}=e,[s,...l]=a,f=await c.evaluatorExpressionEvaluation(s,u);return await this.inRecursive(f,{...e,args:l},[])}}),this.equalityFunction=r}checkArity(r){return r.length>0}async inRecursive(r,e,a){const{args:u,mapping:c,exprEval:s}=e;if(u.length===0)return a.every(f=>!f)?(0,t.bool)(!1):Promise.reject(new t.InError(a));try{const l=u.shift(),f=await s.evaluatorExpressionEvaluation(l,c);return this.equalityFunction.applyOnTerms([r,f],s).typedValue?(0,t.bool)(!0):this.inRecursive(r,e,[...a,!1])}catch(l){return this.inRecursive(r,e,[...a,l])}}};return Qy.ExpressionFunctionIn=o,Qy}var zN;function P$(){if(zN)return Cy;zN=1,Object.defineProperty(Cy,"__esModule",{value:!0}),Cy.ActorFunctionFactoryExpressionIn=void 0;const n=ge(),t=ye(),o=D$();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IN],termFunction:!1}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.ExpressionFunctionIn(a)}};return Cy.ActorFunctionFactoryExpressionIn=i,Cy}var $N;function N$(){return $N||($N=1,(function(n){var t=fu&&fu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=fu&&fu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(P$(),n)})(fu)),fu}var du={},Uy={},Vy={},HN;function M$(){if(HN)return Vy;HN=1,Object.defineProperty(Vy,"__esModule",{value:!0}),Vy.ExpressionFunctionNotIn=void 0;const n=ge(),t=ye();let o=class extends n.ExpressionFunctionBase{constructor(r){super({arity:Number.POSITIVE_INFINITY,operator:t.SparqlOperator.NOT_IN,apply:async e=>{const a=await this.inFunction.apply(e);return(0,t.bool)(!a.typedValue)}}),this.inFunction=r}checkArity(r){return r.length>0}};return Vy.ExpressionFunctionNotIn=o,Vy}var JN;function I$(){if(JN)return Uy;JN=1,Object.defineProperty(Uy,"__esModule",{value:!0}),Uy.ActorFunctionFactoryExpressionNotIn=void 0;const n=ge(),t=ye(),o=M$();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.NOT_IN],termFunction:!1}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.IN,context:e.context,arguments:e.arguments});return new o.ExpressionFunctionNotIn(a)}};return Uy.ActorFunctionFactoryExpressionNotIn=i,Uy}var KN;function L$(){return KN||(KN=1,(function(n){var t=du&&du.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=du&&du.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(I$(),n)})(du)),du}var pu={},Gy={},Xy={},WN;function x$(){if(WN)return Xy;WN=1,Object.defineProperty(Xy,"__esModule",{value:!0}),Xy.TermFunctionGreaterThan=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(r){super({arity:2,operator:t.SparqlOperator.GT,overloads:(0,t.declare)(t.SparqlOperator.GT).set(["term","term"],e=>([a,u])=>this.lessThanFunction.applyOnTerms([u,a],e)).collect()}),this.lessThanFunction=r}};return Xy.TermFunctionGreaterThan=o,Xy}var YN;function q$(){if(YN)return Gy;YN=1,Object.defineProperty(Gy,"__esModule",{value:!0}),Gy.ActorFunctionFactoryTermGreaterThan=void 0;const n=ge(),t=ye(),o=x$();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.GT],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.LT,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionGreaterThan(a)}};return Gy.ActorFunctionFactoryTermGreaterThan=i,Gy}var ZN;function B$(){return ZN||(ZN=1,(function(n){var t=pu&&pu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=pu&&pu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(q$(),n)})(pu)),pu}var hu={},zy={},$y={},kN;function C$(){if(kN)return $y;kN=1,Object.defineProperty($y,"__esModule",{value:!0}),$y.TermFunctionGreaterThanEqual=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(r){super({arity:2,operator:t.SparqlOperator.GTE,overloads:(0,t.declare)(t.SparqlOperator.GTE).set(["term","term"],e=>([a,u])=>this.lessThanEqualFunction.applyOnTerms([u,a],e)).collect()}),this.lessThanEqualFunction=r}};return $y.TermFunctionGreaterThanEqual=o,$y}var eM;function Q$(){if(eM)return zy;eM=1,Object.defineProperty(zy,"__esModule",{value:!0}),zy.ActorFunctionFactoryTermGreaterThanEqual=void 0;const n=ge(),t=ye(),o=C$();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.GTE],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.LTE,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionGreaterThanEqual(a)}};return zy.ActorFunctionFactoryTermGreaterThanEqual=i,zy}var tM;function U$(){return tM||(tM=1,(function(n){var t=hu&&hu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=hu&&hu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Q$(),n)})(hu)),hu}var yu={},Hy={},Jy={},rM;function V$(){if(rM)return Jy;rM=1,Object.defineProperty(Jy,"__esModule",{value:!0}),Jy.TermFunctionInequality=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(r){super({arity:2,operator:t.SparqlOperator.NOT_EQUAL,overloads:(0,t.declare)(t.SparqlOperator.NOT_EQUAL).set(["term","term"],e=>([a,u])=>(0,t.bool)(!this.equalityFunction.applyOnTerms([a,u],e).typedValue)).collect()}),this.equalityFunction=r}};return Jy.TermFunctionInequality=o,Jy}var nM;function G$(){if(nM)return Hy;nM=1,Object.defineProperty(Hy,"__esModule",{value:!0}),Hy.ActorFunctionFactoryTermInequality=void 0;const n=ge(),t=ye(),o=V$();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.NOT_EQUAL],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionInequality(a)}};return Hy.ActorFunctionFactoryTermInequality=i,Hy}var iM;function X$(){return iM||(iM=1,(function(n){var t=yu&&yu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=yu&&yu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(G$(),n)})(yu)),yu}var _u={},Ky={},Wy={},aM;function z$(){if(aM)return Wy;aM=1,Object.defineProperty(Wy,"__esModule",{value:!0}),Wy.TermFunctionLesserThan=void 0;const n=ge(),t=Be(),o=ye();let i=class extends n.TermFunctionBase{constructor(e){super({arity:2,operator:o.SparqlOperator.LT,overloads:(0,o.declare)(o.SparqlOperator.LT).numberTest(()=>(a,u)=>a<u).stringTest(()=>(a,u)=>a.localeCompare(u)===-1).booleanTest(()=>(a,u)=>a<u).dateTimeTest(a=>(u,c)=>(0,o.toUTCDate)(u,a.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime()<(0,o.toUTCDate)(c,a.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime()).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],to:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_DATE]}).set([o.TypeURL.XSD_YEAR_MONTH_DURATION,o.TypeURL.XSD_YEAR_MONTH_DURATION],()=>([a,u])=>(0,o.bool)((0,o.yearMonthDurationsToMonths)((0,o.defaultedYearMonthDurationRepresentation)(a.typedValue))<(0,o.yearMonthDurationsToMonths)((0,o.defaultedYearMonthDurationRepresentation)(u.typedValue)))).set([o.TypeURL.XSD_DAY_TIME_DURATION,o.TypeURL.XSD_DAY_TIME_DURATION],()=>([a,u])=>(0,o.bool)((0,o.dayTimeDurationsToSeconds)((0,o.defaultedDayTimeDurationRepresentation)(a.typedValue))<(0,o.dayTimeDurationsToSeconds)((0,o.defaultedDayTimeDurationRepresentation)(u.typedValue)))).set([o.TypeURL.XSD_TIME,o.TypeURL.XSD_TIME],a=>([u,c])=>(0,o.bool)((0,o.toUTCDate)((0,o.defaultedDateTimeRepresentation)(u.typedValue),a.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime()<(0,o.toUTCDate)((0,o.defaultedDateTimeRepresentation)(c.typedValue),a.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime())).set(["quad","quad"],a=>([u,c])=>{const s=this.quadComponentTest(u.subject,c.subject,a);if(s!==void 0)return(0,o.bool)(s);const l=this.quadComponentTest(u.predicate,c.predicate,a);if(l!==void 0)return(0,o.bool)(l);const f=this.quadComponentTest(u.object,c.object,a);return f!==void 0?(0,o.bool)(f):(0,o.bool)(this.quadComponentTest(u.graph,c.graph,a)??!1)},!1).collect()}),this.equalityFunction=e}quadComponentTest(e,a,u){return this.equalityFunction.applyOnTerms([e,a],u).typedValue?void 0:this.applyOnTerms([e,a],u).typedValue}};return Wy.TermFunctionLesserThan=i,Wy}var oM;function $$(){if(oM)return Ky;oM=1,Object.defineProperty(Ky,"__esModule",{value:!0}),Ky.ActorFunctionFactoryTermLesserThan=void 0;const n=ge(),t=ye(),o=z$();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LT],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionLesserThan(a)}};return Ky.ActorFunctionFactoryTermLesserThan=i,Ky}var uM;function H$(){return uM||(uM=1,(function(n){var t=_u&&_u.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=_u&&_u.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o($$(),n)})(_u)),_u}var gu={},Yy={},Zy={},sM;function J$(){if(sM)return Zy;sM=1,Object.defineProperty(Zy,"__esModule",{value:!0}),Zy.TermFunctionLesserThanEqual=void 0;const n=ge(),t=ye();let o=class extends n.TermFunctionBase{constructor(r,e){super({arity:2,operator:t.SparqlOperator.LTE,overloads:(0,t.declare)(t.SparqlOperator.LTE).set(["term","term"],a=>([u,c])=>(0,t.bool)(this.lessThanFunction.applyOnTerms([u,c],a).typedValue||this.equalityFunction.applyOnTerms([u,c],a).typedValue)).collect()}),this.equalityFunction=r,this.lessThanFunction=e}};return Zy.TermFunctionLesserThanEqual=o,Zy}var cM;function K$(){if(cM)return Yy;cM=1,Object.defineProperty(Yy,"__esModule",{value:!0}),Yy.ActorFunctionFactoryTermLesserThanEqual=void 0;const n=ge(),t=ye(),o=J$();let i=class extends n.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LTE],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments}),u=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.LT,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionLesserThanEqual(a,u)}};return Yy.ActorFunctionFactoryTermLesserThanEqual=i,Yy}var lM;function W$(){return lM||(lM=1,(function(n){var t=gu&&gu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=gu&&gu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(K$(),n)})(gu)),gu}var mu={},ky={},fM;function Y$(){if(fM)return ky;fM=1,Object.defineProperty(ky,"__esModule",{value:!0}),ky.ActorQueryOperationAsk=void 0;const n=gt(),t=Ae(),o=ke();let i=class extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"ask")}async testOperation(e,a){return(0,t.passTestVoid)()}async runOperation(e,a){const u=await this.mediatorQueryOperation.mediate({operation:e.input,context:a}),{bindingsStream:c}=(0,o.getSafeBindings)(u);return{type:"boolean",execute:async()=>(await c.take(1).toArray()).length===1}}};return ky.ActorQueryOperationAsk=i,ky}var dM;function Z$(){return dM||(dM=1,(function(n){var t=mu&&mu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=mu&&mu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(Y$(),n)})(mu)),mu}var bu={},e_={},pM;function k$(){if(pM)return e_;pM=1,Object.defineProperty(e_,"__esModule",{value:!0}),e_.ActorQueryOperationBgpJoin=void 0;const n=gt(),t=Be(),o=Ae(),i=We();let r=class extends n.ActorQueryOperationTypedMediated{constructor(a){super(a,"bgp")}async testOperation(a,u){return(0,o.passTestVoid)()}async runOperation(a,u){const c=u.getSafe(t.KeysInitQuery.dataFactory),s=new i.Factory(c);return this.mediatorQueryOperation.mediate({operation:s.createJoin(a.patterns),context:u})}};return e_.ActorQueryOperationBgpJoin=r,e_}var hM;function eH(){return hM||(hM=1,(function(n){var t=bu&&bu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=bu&&bu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(k$(),n)})(bu)),bu}var vu={},t_={},U1={},$r={},yM;function tH(){if(yM)return $r;yM=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.termToString=o,$r.getLiteralValue=i,$r.getLiteralType=r,$r.getLiteralLanguage=e,$r.getLiteralDirection=a,$r.stringToTerm=u,$r.quadToStringQuad=c,$r.stringQuadToQuad=s;const n=Ds(),t=new n.DataFactory;function o(l){if(l)switch(l.termType){case"NamedNode":return l.value;case"BlankNode":return"_:"+l.value;case"Literal":const f=l;return'"'+f.value+'"'+(f.datatype&&f.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&f.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&f.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+f.datatype.value:"")+(f.language?"@"+f.language:"")+(f.direction?"--"+f.direction:"");case"Quad":return`<<${o(l.subject)} ${o(l.predicate)} ${o(l.object)}${l.graph.termType==="DefaultGraph"?"":" "+o(l.graph)}>>`;case"Variable":return"?"+l.value;case"DefaultGraph":return l.value}}function i(l){const f=/^"([^]*)"/.exec(l);if(!f)throw new Error(l+" is not a literal");return f[1]}function r(l){const f=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(l);if(!f)throw new Error(l+" is not a literal");return f[1]||(f[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function e(l){const f=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(l);if(!f)throw new Error(l+" is not a literal");if(f[1]){let d=f[1].toLowerCase();const h=d.indexOf("--");return h>=0&&(d=d.slice(0,h)),d}return""}function a(l){const f=l.indexOf("--",l.lastIndexOf('"'));if(f>=0){const d=l.slice(f+2,l.length);if(d==="ltr"||d==="rtl")return d;throw new Error(l+" is not a literal with a valid direction")}return""}function u(l,f){if(f=f||t,!l||!l.length)return f.defaultGraph();switch(l[0]){case"_":return f.blankNode(l.substr(2));case"?":if(!f.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return f.variable(l.substr(1));case'"':const d=e(l),h=a(l),p=f.namedNode(r(l));return f.literal(i(l),d?{language:d,direction:h}:p);default:if(l[0]==="<"&&l.length>4&&l[1]==="<"&&l[l.length-1]===">"&&l[l.length-2]===">"){const y=l.slice(2,-2).trim();let b=[],_=0,T=0,m=!1;for(let A=0;A<y.length;A++){const E=y[A];if(E==="<"&&_++,E===">"){if(_===0)throw new Error("Found closing tag without opening tag in "+l);_--}if(E==='"'){let j=!1,X=A;for(;X-- >0&&y[X]==="\\";)j=!j;j||(m=!m)}if(E===" "&&!m&&_===0){for(b.push(y.slice(T,A));y[A+1]===" ";)A+=1;T=A+1}}if(_!==0)throw new Error("Found opening tag without closing tag in "+l);if(b.push(y.slice(T,y.length)),b.length!==3&&b.length!==4)throw new Error("Nested quad syntax error "+l);return b=b.map(A=>A.startsWith("<")&&!A.includes(" ")?A.slice(1,-1):A),f.quad(u(b[0]),u(b[1]),u(b[2]),b[3]?u(b[3]):void 0)}return f.namedNode(l)}}function c(l){return{subject:o(l.subject),predicate:o(l.predicate),object:o(l.object),graph:o(l.graph)}}function s(l,f){return f=f||t,f.quad(u(l.subject,f),u(l.predicate,f),u(l.object,f),u(l.graph,f))}return $r}var _M;function rH(){return _M||(_M=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.termToString=n.stringToTerm=n.stringQuadToQuad=n.quadToStringQuad=n.getLiteralValue=n.getLiteralType=n.getLiteralDirection=n.getLiteralLanguage=void 0;const t=tH();Object.defineProperty(n,"getLiteralLanguage",{enumerable:!0,get:function(){return t.getLiteralLanguage}}),Object.defineProperty(n,"getLiteralDirection",{enumerable:!0,get:function(){return t.getLiteralDirection}}),Object.defineProperty(n,"getLiteralType",{enumerable:!0,get:function(){return t.getLiteralType}}),Object.defineProperty(n,"getLiteralValue",{enumerable:!0,get:function(){return t.getLiteralValue}}),Object.defineProperty(n,"quadToStringQuad",{enumerable:!0,get:function(){return t.quadToStringQuad}}),Object.defineProperty(n,"stringQuadToQuad",{enumerable:!0,get:function(){return t.stringQuadToQuad}}),Object.defineProperty(n,"stringToTerm",{enumerable:!0,get:function(){return t.stringToTerm}}),Object.defineProperty(n,"termToString",{enumerable:!0,get:function(){return t.termToString}})})(U1)),U1}var gM;function nH(){if(gM)return t_;gM=1,Object.defineProperty(t_,"__esModule",{value:!0}),t_.ActorQueryOperationDistinctIdentity=void 0;const n=gt(),t=Ae(),o=ke(),i=rH();let r=class extends n.ActorQueryOperationTypedMediated{constructor(a){super(a,"distinct")}async testOperation(a,u){return(0,t.passTestVoid)()}async runOperation(a,u){const c=await this.mediatorQueryOperation.mediate({operation:a.input,context:u});if(c.type==="quads"){const d=(0,o.getSafeQuads)(c);return{type:"quads",quadStream:d.quadStream.filter(await this.newIdentityFilterQuads()),metadata:d.metadata}}const s=(0,o.getSafeBindings)(c),l=(await s.metadata()).variables.map(d=>d.variable);return{type:"bindings",bindingsStream:s.bindingsStream.filter(await this.newIdentityFilter(l)),metadata:s.metadata}}async newIdentityFilter(a){const u={};return c=>{const s=a.map(l=>i.termToString(c.get(l))).join("-");return!(s in u)&&(u[s]=!0)}}async newIdentityFilterQuads(){const a={};return u=>{const c=Object.values(i.quadToStringQuad(u)).join(" ");return!(c in a)&&(a[c]=!0)}}};return t_.ActorQueryOperationDistinctIdentity=r,t_}var mM;function iH(){return mM||(mM=1,(function(n){var t=vu&&vu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=vu&&vu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(nH(),n)})(vu)),vu}var Tu={},r_={},bM;function aH(){if(bM)return r_;bM=1,Object.defineProperty(r_,"__esModule",{value:!0}),r_.ActorQueryOperationExtend=void 0;const n=gt(),t=Ae(),o=Dt(),i=ye(),r=ke();let e=class extends n.ActorQueryOperationTypedMediated{constructor(u){super(u,"extend"),this.mediatorExpressionEvaluatorFactory=u.mediatorExpressionEvaluatorFactory}async testOperation(){return(0,t.passTestVoid)()}async runOperation(u,c){const{expression:s,input:l,variable:f}=u,d=(0,r.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:l,context:c}));if((await d.metadata()).variables.some(b=>b.variable.equals(f)))throw new Error(`Illegal binding to variable '${f.value}' that has already been bound`);const h=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:s,context:c}),p=async(b,_,T)=>{try{const m=await h.evaluate(b),A=b.set(f,m);T(A)}catch(m){(0,i.isExpressionError)(m)?(T(b),this.logWarn(c,`Expression error for extend operation (${m.message})with bindings '${(0,o.bindingsToString)(b)}'`)):y.emit("error",m)}_()},y=d.bindingsStream.transform({autoStart:!1,transform:p});return{type:"bindings",bindingsStream:y,async metadata(){const b=await d.metadata();return{...b,variables:[...b.variables,{variable:f,canBeUndef:!1}]}}}}};return r_.ActorQueryOperationExtend=e,r_}var vM;function oH(){return vM||(vM=1,(function(n){var t=Tu&&Tu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Tu&&Tu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(aH(),n)})(Tu)),Tu}var Ou={},n_={},TM;function uH(){if(TM)return n_;TM=1,Object.defineProperty(n_,"__esModule",{value:!0}),n_.ActorQueryOperationFilter=void 0;const n=gt(),t=Ae(),o=Dt(),i=ye(),r=ke();let e=class extends n.ActorQueryOperationTypedMediated{constructor(u){super(u,"filter"),this.mediatorExpressionEvaluatorFactory=u.mediatorExpressionEvaluatorFactory}async testOperation(){return(0,t.passTestVoid)()}async runOperation(u,c){const s=await this.mediatorQueryOperation.mediate({operation:u.input,context:c}),l=(0,r.getSafeBindings)(s);(0,r.validateQueryOutput)(l,"bindings");const f=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:u.expression,context:c}),d=async(p,y,b)=>{try{await f.evaluateAsEBV(p)&&b(p)}catch(_){(0,i.isExpressionError)(_)?this.logWarn(c,"Error occurred while filtering.",()=>({error:_,bindings:(0,o.bindingsToString)(p)})):h.emit("error",_)}y()},h=l.bindingsStream.transform({transform:d,autoStart:!1});return{type:"bindings",bindingsStream:h,metadata:l.metadata}}};return n_.ActorQueryOperationFilter=e,n_}var OM;function sH(){return OM||(OM=1,(function(n){var t=Ou&&Ou.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ou&&Ou.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(uH(),n)})(Ou)),Ou}var Su={},i_={},a_={},SM;function s5(){if(SM)return a_;SM=1,Object.defineProperty(a_,"__esModule",{value:!0}),a_.BindingsToQuadsIterator=void 0;const n=ft(),t=Gn();let o=class Pg extends n.MultiTransformIterator{constructor(r,e,a){super(a,{autoStart:!1}),this.dataFactory=r,this.template=e,this.blankNodeCounter=0}static bindTerm(r,e){return e.termType==="Variable"?r.get(e):e}static bindQuad(r,e){try{return(0,t.mapTermsNested)(e,a=>{const u=Pg.bindTerm(r,a);if(!u)throw new Error("Unbound term");return u})}catch{}}static localizeBlankNode(r,e,a){return a.termType==="BlankNode"?r.blankNode(`${a.value}${e}`):a}static localizeQuad(r,e,a){return(0,t.mapTermsNested)(a,u=>Pg.localizeBlankNode(r,e,u))}bindTemplate(r,e,a){return e.map(Pg.localizeQuad.bind(null,this.dataFactory,a)).map(c=>Pg.bindQuad.bind(null,r)(c)).filter(Boolean)}_createTransformer(r){return new n.ArrayIterator(this.bindTemplate(r,this.template,this.blankNodeCounter++),{autoStart:!1})}};return a_.BindingsToQuadsIterator=o,a_}var wM;function cH(){if(wM)return i_;wM=1,Object.defineProperty(i_,"__esModule",{value:!0}),i_.ActorQueryOperationConstruct=void 0;const n=gt(),t=Be(),o=Ae(),i=ke(),r=Gn(),e=We(),a=s5();let u=class c5 extends n.ActorQueryOperationTypedMediated{constructor(s){super(s,"construct")}static getVariables(s){return(0,r.uniqTerms)([].concat.apply([],s.map(l=>(0,r.getVariables)((0,r.getTermsNested)(l)))))}async testOperation(s,l){return(0,o.passTestVoid)()}async runOperation(s,l){const f=l.getSafe(t.KeysInitQuery.dataFactory),d=c5.getVariables(s.template),h={type:e.Algebra.types.PROJECT,input:s.input,variables:d},p=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:h,context:l})),y=new a.BindingsToQuadsIterator(f,s.template,p.bindingsStream);return{metadata:()=>p.metadata().then(_=>({..._,order:void 0,cardinality:{type:_.cardinality.type,value:_.cardinality.value*s.template.length},availableOrders:void 0})),quadStream:y,type:"quads"}}};return i_.ActorQueryOperationConstruct=u,i_}var AM;function l5(){return AM||(AM=1,(function(n){var t=Su&&Su.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Su&&Su.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(cH(),n),o(s5(),n)})(Su)),Su}var wu={},o_={},FM;function lH(){if(FM)return o_;FM=1,Object.defineProperty(o_,"__esModule",{value:!0}),o_.ActorQueryOperationFromQuad=void 0;const n=gt(),t=Be(),o=Ae(),i=We();let r=class Mr extends n.ActorQueryOperationTypedMediated{constructor(a){super(a,"from")}static copyOperation(a,u){const c={};for(const s of Object.keys(a))Array.isArray(a[s])&&s!=="template"?s==="variables"?c[s]=a[s]:c[s]=a[s].map(u):Mr.ALGEBRA_TYPES.includes(a[s].type)?c[s]=u(a[s]):c[s]=a[s];return c}static applyOperationDefaultGraph(a,u,c){if(u.type==="bgp"&&u.patterns.length>0||u.type==="path"||u.type==="pattern"){if(u.type==="bgp")return Mr.joinOperations(a,u.patterns.map(l=>{if(l.graph.termType!=="DefaultGraph")return a.createBgp([l]);const f=c.map(d=>a.createBgp([Object.assign(a.createPattern(l.subject,l.predicate,l.object,d),{metadata:l.metadata})]));return Mr.unionOperations(a,f)}));if(u.graph.termType!=="DefaultGraph")return u;const s=c.map(l=>u.type==="path"?a.createPath(u.subject,u.predicate,u.object,l):Object.assign(a.createPattern(u.subject,u.predicate,u.object,l),{metadata:u.metadata}));return Mr.unionOperations(a,s)}return Mr.copyOperation(u,s=>this.applyOperationDefaultGraph(a,s,c))}static applyOperationNamedGraph(a,u,c,s){if(u.type==="bgp"&&u.patterns.length>0||u.type==="path"||u.type==="pattern"){const l=u.type==="bgp"?u.patterns[0].graph:u.graph;if(l.termType==="DefaultGraph")return{type:i.Algebra.types.BGP,patterns:[]};if(l.termType==="Variable"){if(c.length===1){const d=c[0],h={};h[`?${l.value}`]=d;const p=a.createValues([l],[h]);let y;return u.type==="bgp"?y=a.createBgp(u.patterns.map(b=>a.createPattern(b.subject,b.predicate,b.object,d))):u.type==="path"?y=a.createPath(u.subject,u.predicate,u.object,d):y=a.createPattern(u.subject,u.predicate,u.object,d),a.createJoin([p,y])}return Mr.unionOperations(a,c.map(d=>Mr.applyOperationNamedGraph(a,u,[d],s)))}return[...c,...s].some(d=>d.equals(l))?u:{type:i.Algebra.types.BGP,patterns:[]}}return Mr.copyOperation(u,l=>this.applyOperationNamedGraph(a,l,c,s))}static joinOperations(a,u){if(u.length===1)return u[0];if(u.length>1)return a.createJoin(u);throw new Error("A join can only be applied on at least one operation")}static unionOperations(a,u){if(u.length===1)return u[0];if(u.length>1)return a.createUnion(u);throw new Error("A union can only be applied on at least one operation")}static createOperation(a,u){let c=u.input;return u.default.length>0&&(c=Mr.applyOperationDefaultGraph(a,c,u.default)),(u.named.length>0||u.default.length>0)&&(c=Mr.applyOperationNamedGraph(a,c,u.named,u.default)),c}async testOperation(a,u){return(0,o.passTestVoid)()}async runOperation(a,u){const c=u.getSafe(t.KeysInitQuery.dataFactory),s=new i.Factory(c),l=Mr.createOperation(s,a);return this.mediatorQueryOperation.mediate({operation:l,context:u})}};return o_.ActorQueryOperationFromQuad=r,r.ALGEBRA_TYPES=Object.keys(i.Algebra.types).map(e=>i.Algebra.types[e]),o_}var EM;function fH(){return EM||(EM=1,(function(n){var t=wu&&wu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=wu&&wu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(lH(),n)})(wu)),wu}var Au={},u_={},RM;function dH(){if(RM)return u_;RM=1,Object.defineProperty(u_,"__esModule",{value:!0}),u_.ActorQueryOperationProject=void 0;const n=gt(),t=Be(),o=Ae(),i=xT(),r=ke();let e=class extends n.ActorQueryOperationTypedMediated{constructor(u){super(u,"project")}async testOperation(u,c){return(0,o.passTestVoid)()}async runOperation(u,c){const s=c.getSafe(t.KeysInitQuery.dataFactory),l=(0,r.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:u.input,context:c})),f=await l.metadata(),d=Object.fromEntries(f.variables.map(m=>[m.variable.value,m])),h=u.variables.map(m=>({variable:m,canBeUndef:!1})),p=Object.fromEntries(h.map(m=>[m.variable.value,m])),y=f.variables.filter(m=>!(m.variable.value in p)),b=h.map(m=>({variable:m.variable,canBeUndef:!(m.variable.value in d)||d[m.variable.value].canBeUndef}));let _=y.length===0?l.bindingsStream:l.bindingsStream.map(m=>{for(const A of y)m=m.delete(A.variable);return m}),T=0;return _=_.map(m=>{T++;const A=new Map;return m.map(E=>{if(E instanceof i.BlankNodeBindingsScoped){let j=A.get(E.value);return j||(j=s.blankNode(`${E.value}${T}`),A.set(E.value,j)),j}return E})}),{type:"bindings",bindingsStream:_,metadata:async()=>({...f,variables:b})}}};return u_.ActorQueryOperationProject=e,u_}var jM;function pH(){return jM||(jM=1,(function(n){var t=Au&&Au.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Au&&Au.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(dH(),n)})(Au)),Au}var Fu={},s_={},DM;function hH(){if(DM)return s_;DM=1,Object.defineProperty(s_,"__esModule",{value:!0}),s_.ActorQueryOperationReducedHash=void 0;const n=gt(),t=Ae(),o=ke(),i=Lb();let r=class extends n.ActorQueryOperationTypedMediated{constructor(a){super(a,"reduced")}async testOperation(a,u){return(0,t.passTestVoid)()}async runOperation(a,u){const c=(0,o.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:a.input,context:u})),s=(await c.metadata()).variables.map(f=>f.variable);return{type:"bindings",bindingsStream:c.bindingsStream.filter(await this.newHashFilter(u,s)),metadata:c.metadata}}async newHashFilter(a,u){const{hashFunction:c}=await this.mediatorHashBindings.mediate({context:a}),s=new i.LRUCache({max:this.cacheSize});return l=>{const f=c(l,u);return s.has(f)?!1:(s.set(f,!0),!0)}}};return s_.ActorQueryOperationReducedHash=r,s_}var PM;function yH(){return PM||(PM=1,(function(n){var t=Fu&&Fu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Fu&&Fu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(hH(),n)})(Fu)),Fu}var Eu={},c_={},NM;function _H(){if(NM)return c_;NM=1,Object.defineProperty(c_,"__esModule",{value:!0}),c_.ActorQueryOperationSlice=void 0;const n=gt(),t=Be(),o=Ae();let i=class extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"slice")}async testOperation(e,a){return(0,o.passTestVoid)()}async runOperation(e,a){e.length&&(a=a.set(t.KeysQueryOperation.limitIndicator,e.length));const u=await this.mediatorQueryOperation.mediate({operation:e.input,context:a});return u.type==="bindings"?{type:"bindings",bindingsStream:this.sliceStream(u.bindingsStream,e),metadata:this.sliceMetadata(u,e)}:u.type==="quads"?{type:"quads",quadStream:this.sliceStream(u.quadStream,e),metadata:this.sliceMetadata(u,e)}:u}sliceStream(e,a){const u=!!a.length||a.length===0,{start:c}=a,s=u?a.start+a.length-1:Number.POSITIVE_INFINITY;return e.transform({offset:c,limit:Math.max(s-c+1,0),autoStart:!1})}sliceMetadata(e,a){const u=!!a.length||a.length===0;return()=>e.metadata().then(c=>{const s={...c.cardinality};return Number.isFinite(s.value)&&(s.value=Math.max(0,s.value-a.start),u&&(s.value=Math.min(s.value,a.length))),{...c,cardinality:s}})}};return c_.ActorQueryOperationSlice=i,c_}var MM;function gH(){return MM||(MM=1,(function(n){var t=Eu&&Eu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Eu&&Eu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(_H(),n)})(Eu)),Eu}var Ru={},l_={},IM;function mH(){if(IM)return l_;IM=1,Object.defineProperty(l_,"__esModule",{value:!0}),l_.ActorQueryOperationUnion=void 0;const n=gt(),t=Ae(),o=br(),i=ke(),r=ft();let e=class cb extends n.ActorQueryOperationTypedMediated{constructor(u){super(u,"union")}static unionVariables(u){const c={};for(const s of u)for(const l of s){c[l.variable.value]||(c[l.variable.value]={variable:l.variable,canBeUndef:l.canBeUndef,occurrences:0});const f=c[l.variable.value];f.canBeUndef=f.canBeUndef||l.canBeUndef,f.occurrences++}return Object.values(c).map(s=>s.occurrences===u.length?{variable:s.variable,canBeUndef:s.canBeUndef}:{variable:s.variable,canBeUndef:!0})}static async unionMetadata(u,c,s,l){let f=(await l.mediate({mode:"initialize",context:s})).metadata;for(const h of u)f={...h,...(await l.mediate({mode:"append",accumulatedMetadata:f,appendingMetadata:h,context:s})).metadata};f.state=new o.MetadataValidationState;const d=()=>f.state.invalidate();for(const h of u)h.state.addInvalidateListener(d);if(c){const h=u.map(p=>p.variables);f.variables=cb.unionVariables(h)}return f}async testOperation(u,c){return(0,t.passTestVoid)()}async runOperation(u,c){const s=await Promise.all(u.input.map(f=>this.mediatorQueryOperation.mediate({operation:f,context:c})));let l;for(const f of s)if(l===void 0)l=f.type;else if(l!==f.type)throw new Error(`Unable to union ${l} and ${f.type}`);if(l==="bindings"||u.input.length===0){const f=s.map(i.getSafeBindings);return{type:"bindings",bindingsStream:new r.UnionIterator(f.map(p=>p.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(f.map(p=>p.metadata())).then(p=>cb.unionMetadata(p,!0,c,this.mediatorRdfMetadataAccumulate))}}if(l==="quads"){const f=s.map(i.getSafeQuads);return{type:"quads",quadStream:new r.UnionIterator(f.map(p=>p.quadStream),{autoStart:!1}),metadata:()=>Promise.all(f.map(p=>p.metadata())).then(p=>cb.unionMetadata(p,!1,c,this.mediatorRdfMetadataAccumulate))}}throw new Error(`Unable to union ${l}`)}};return l_.ActorQueryOperationUnion=e,l_}var LM;function f5(){return LM||(LM=1,(function(n){var t=Ru&&Ru.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ru&&Ru.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(mH(),n)})(Ru)),Ru}var ju={},f_={},Du={},d_={},p_={},xM;function d5(){if(xM)return p_;xM=1,Object.defineProperty(p_,"__esModule",{value:!0}),p_.PathVariableObjectIterator=void 0;const n=ke(),t=ft(),o=mr();let i=class extends t.BufferedIterator{constructor(e,a,u,c,s,l,f,d=16){super({autoStart:!1}),this.algebraFactory=e,this.subject=a,this.predicate=u,this.graph=c,this.context=s,this.mediatorQueryOperation=l,this.maxRunningOperations=d,this.termHashes=new Map,this.runningOperations=[],this.pendingOperations=[],this.started=!1,this._push(this.subject,f)}getProperty(e,a){return!this.started&&e==="metadata"&&this.startNextOperation(!1).catch(u=>this.emit("error",u)),super.getProperty(e,a)}_end(e){for(const a of this.runningOperations)a.destroy();super._end(e)}_push(e,a=!0){let u;if(a&&(u=(0,o.termToString)(e),this.termHashes.has(u)))return!1;const c=this.algebraFactory.dataFactory.variable("b");return this.pendingOperations.push({variable:c,operation:this.algebraFactory.createPath(e,this.predicate,c,this.graph)}),u&&(this.termHashes.set(u,e),super._push(e)),!0}async startNextOperation(e){this.started=!0;const a=this.pendingOperations.pop(),u=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:a.operation,context:this.context})),c=u.bindingsStream.map(s=>s.get(a.variable));this.runningOperations.push(c),c.on("error",s=>this.destroy(s)),c.on("readable",()=>{e&&this._fillBufferAsync(),this.readable=!0}),c.on("end",()=>{this.runningOperations.splice(this.runningOperations.indexOf(c),1),e&&this._fillBufferAsync(),this.readable=!0}),this.getProperty("metadata")||this.setProperty("metadata",u.metadata)}_read(e,a){const u=this;(async function(){for(;u.runningOperations.length<u.maxRunningOperations&&u.pendingOperations.length!==0;)await u.startNextOperation(!0);let c=0,s,l=!0;for(;!l||c!==(c=e);){l=!0;for(let f=0;f<u.runningOperations.length&&e>0;f++)(s=u.runningOperations[f].read())!==null&&(u._push(s)?e--:l=!1)}u.closeIfNeeded()})().then(()=>{a()},c=>this.destroy(c))}closeIfNeeded(){this.runningOperations.length===0&&this.pendingOperations.length===0&&this.close()}};return p_.PathVariableObjectIterator=i,p_}var qM;function bH(){if(qM)return d_;qM=1,Object.defineProperty(d_,"__esModule",{value:!0}),d_.ActorAbstractPath=void 0;const n=gt(),t=Be(),o=Ae(),i=ke(),r=ft(),e=mr(),a=We(),u=d5();let c=class extends n.ActorQueryOperationTypedMediated{constructor(l,f){super(l,"path"),this.predicateType=f}async testOperation(l,f){return l.predicate.type!==this.predicateType?(0,o.failTest)(`This Actor only supports ${this.predicateType} Path operations.`):(0,o.passTestVoid)()}generateVariable(l,f,d){return d?f&&(f.subject.value===d||f.object.value===d)?this.generateVariable(l,f,`${d}b`):l.variable(d):this.generateVariable(l,f,"b")}async isPathArbitraryLengthDistinct(l,f,d){return f.get(t.KeysQueryOperation.isPathArbitraryLengthDistinctKey)?(f=f.set(t.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!1),{context:f,operation:void 0}):(f=f.set(t.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!0),{context:f,operation:(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:l.createDistinct(d),context:f}))})}async predicateStarGraphVariable(l,f,d,h,p,y,b){const _=this.getPathSources(d),T=this.generateVariable(y.dataFactory,y.createPath(l,d,f,h)),m=y.createUnion([this.assignPatternSources(y,y.createPattern(l,T,f,h),_),this.assignPatternSources(y,y.createPattern(f,T,l,h),_)]),A=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:p,operation:m})),E=new Set;return{bindingsStream:new r.MultiTransformIterator(A.bindingsStream,{multiTransform:X=>{const K=X.get(h);return E.has(K.value)?new r.EmptyIterator:(E.add(K.value),new r.TransformIterator(async()=>{const O=new r.BufferedIterator;return await this.getObjectsPredicateStar(y,l,d,K,p,{},O,{count:0}),O.map(S=>b.bindings([[f,S],[h,K]]))},{maxBufferSize:128}))},autoStart:!1}),metadata:A.metadata}}async getObjectsPredicateStarEval(l,f,d,h,p,y,b,_){if(h.termType==="Variable")return this.predicateStarGraphVariable(l,d,f,h,p,b,_);const T=new u.PathVariableObjectIterator(b,l,f,h,p,this.mediatorQueryOperation,y);return{bindingsStream:T.map(A=>_.bindings([[d,A]])),async metadata(){const A=await new Promise(E=>{T.getProperty("metadata",j=>E(j()))});return A.cardinality.value++,A}}}async getObjectsPredicateStar(l,f,d,h,p,y,b,_){const T=(0,e.termToString)(f);if(y[T])return;b._push(f),y[T]=f,_.count++;const m=this.generateVariable(l.dataFactory),A=l.createPath(f,d,m,h),E=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:A,context:p}));return E.bindingsStream.on("data",async j=>{const X=j.get(m);await this.getObjectsPredicateStar(l,X,d,h,p,y,b,_)}),E.bindingsStream.on("end",()=>{--_.count===0&&b.close()}),E.metadata}async getSubjectAndObjectBindingsPredicateStar(l,f,d,h,p,y,b,_,T,m,A,E,j){const X=(0,e.termToString)(h)+(0,e.termToString)(y);if(T[X])return;if(A.count++,T[X]=!0,m._push(j.bindings([[l,d],[f,h]])),X in _){const O=await _[X];for(const S of O)await this.getSubjectAndObjectBindingsPredicateStar(l,f,d,S,p,y,b,_,T,m,A,E,j);--A.count===0&&m.close();return}const K=new Promise(async(O,S)=>{const L=[],N=this.generateVariable(E.dataFactory),I=E.createPath(h,p,N,y),V=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:I,context:b}));V.bindingsStream.on("data",async re=>{const Y=re.get(N);L.push(Y),await this.getSubjectAndObjectBindingsPredicateStar(l,f,d,Y,p,y,b,_,T,m,A,E,j)}),V.bindingsStream.on("error",S),V.bindingsStream.on("end",()=>{--A.count===0&&m.close(),O(L)})});_[X]=K}getPathSources(l){switch(l.type){case a.Algebra.types.ALT:case a.Algebra.types.SEQ:return l.input.flatMap(f=>this.getPathSources(f));case a.Algebra.types.INV:case a.Algebra.types.ONE_OR_MORE_PATH:case a.Algebra.types.ZERO_OR_MORE_PATH:case a.Algebra.types.ZERO_OR_ONE_PATH:return this.getPathSources(l.path);case a.Algebra.types.LINK:case a.Algebra.types.NPS:{const f=(0,i.getOperationSource)(l);if(!f)throw new Error("Could not find a required source on a link path operation");return[f]}}}assignPatternSources(l,f,d){if(d.length===0)throw new Error("Attempted to assign zero sources to a pattern during property path handling");return d.length===1?(0,i.assignOperationSource)(f,d[0]):l.createUnion(d.map(h=>(0,i.assignOperationSource)(f,h)),!0)}};return d_.ActorAbstractPath=c,d_}var BM;function zn(){return BM||(BM=1,(function(n){var t=Du&&Du.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Du&&Du.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(bH(),n),o(d5(),n)})(Du)),Du}var CM;function vH(){if(CM)return f_;CM=1,Object.defineProperty(f_,"__esModule",{value:!0}),f_.ActorQueryOperationPathAlt=void 0;const n=zn(),t=f5(),o=Be(),i=ke(),r=ft(),e=We();let a=class extends n.ActorAbstractPath{constructor(c){super(c,e.Algebra.types.ALT)}async runOperation(c,s){const l=s.getSafe(o.KeysInitQuery.dataFactory),f=new e.Factory(l),d=c.predicate,h=(await Promise.all(d.input.map(b=>this.mediatorQueryOperation.mediate({context:s,operation:f.createPath(c.subject,b,c.object,c.graph)})))).map(i.getSafeBindings);return{type:"bindings",bindingsStream:new r.UnionIterator(h.map(b=>b.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(h.map(b=>b.metadata())).then(b=>t.ActorQueryOperationUnion.unionMetadata(b,!0,s,this.mediatorRdfMetadataAccumulate))}}};return f_.ActorQueryOperationPathAlt=a,f_}var QM;function TH(){return QM||(QM=1,(function(n){var t=ju&&ju.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ju&&ju.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(vH(),n)})(ju)),ju}var Pu={},h_={},UM;function OH(){if(UM)return h_;UM=1,Object.defineProperty(h_,"__esModule",{value:!0}),h_.ActorQueryOperationPathInv=void 0;const n=zn(),t=Be(),o=We();let i=class extends n.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.INV)}async runOperation(e,a){const u=a.getSafe(t.KeysInitQuery.dataFactory),c=new o.Factory(u),s=e.predicate,l=c.createPath(e.object,s.path,e.subject,e.graph);return this.mediatorQueryOperation.mediate({operation:l,context:a})}};return h_.ActorQueryOperationPathInv=i,h_}var VM;function SH(){return VM||(VM=1,(function(n){var t=Pu&&Pu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Pu&&Pu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(OH(),n)})(Pu)),Pu}var Nu={},y_={},GM;function wH(){if(GM)return y_;GM=1,Object.defineProperty(y_,"__esModule",{value:!0}),y_.ActorQueryOperationPathLink=void 0;const n=zn(),t=Be(),o=We();let i=class extends n.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.LINK)}async runOperation(e,a){const u=a.getSafe(t.KeysInitQuery.dataFactory),c=new o.Factory(u),s=e.predicate,l=Object.assign(c.createPattern(e.subject,s.iri,e.object,e.graph),{metadata:s.metadata});return this.mediatorQueryOperation.mediate({operation:l,context:a})}};return y_.ActorQueryOperationPathLink=i,y_}var XM;function AH(){return XM||(XM=1,(function(n){var t=Nu&&Nu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Nu&&Nu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(wH(),n)})(Nu)),Nu}var Mu={},__={},zM;function FH(){if(zM)return __;zM=1,Object.defineProperty(__,"__esModule",{value:!0}),__.ActorQueryOperationPathNps=void 0;const n=zn(),t=Be(),o=ke(),i=We();let r=class extends n.ActorAbstractPath{constructor(a){super(a,i.Algebra.types.NPS)}async runOperation(a,u){const c=u.getSafe(t.KeysInitQuery.dataFactory),s=new i.Factory(c),l=a.predicate,f=this.generateVariable(c,a),d=Object.assign(s.createPattern(a.subject,f,a.object,a.graph),{metadata:l.metadata}),h=(0,o.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:d,context:u}));return{type:"bindings",bindingsStream:h.bindingsStream.map(y=>l.iris.some(b=>b.equals(y.get(f)))?null:y.delete(f)),metadata:h.metadata}}};return __.ActorQueryOperationPathNps=r,__}var $M;function EH(){return $M||($M=1,(function(n){var t=Mu&&Mu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Mu&&Mu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(FH(),n)})(Mu)),Mu}var Iu={},g_={},HM;function RH(){if(HM)return g_;HM=1,Object.defineProperty(g_,"__esModule",{value:!0}),g_.ActorQueryOperationUpdateCompositeUpdate=void 0;const n=gt(),t=ke();let o=class extends n.ActorQueryOperationTypedMediated{constructor(r){super(r,"compositeupdate")}async testOperation(r,e){return(0,t.testReadOnly)(e)}async runOperation(r,e){return{type:"void",execute:()=>(async()=>{for(const u of r.updates)await(0,t.getSafeVoid)(await this.mediatorQueryOperation.mediate({operation:u,context:e})).execute()})()}}};return g_.ActorQueryOperationUpdateCompositeUpdate=o,g_}var JM;function jH(){return JM||(JM=1,(function(n){var t=Iu&&Iu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Iu&&Iu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(RH(),n)})(Iu)),Iu}var Lu={},m_={},KM;function DH(){if(KM)return m_;KM=1,Object.defineProperty(m_,"__esModule",{value:!0}),m_.ActorQueryOperationClear=void 0;const n=gt(),t=Be(),o=ke();let i=class extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"clear")}async testOperation(e,a){return(0,o.testReadOnly)(a)}async runOperation(e,a){const u=a.getSafe(t.KeysInitQuery.dataFactory);let c;e.source==="DEFAULT"?c=u.defaultGraph():typeof e.source=="string"?c=e.source:c=[e.source];const{execute:s}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:c,requireExistence:!e.silent,dropGraphs:!1},context:a});return{type:"void",execute:s}}};return m_.ActorQueryOperationClear=i,m_}var WM;function PH(){return WM||(WM=1,(function(n){var t=Lu&&Lu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Lu&&Lu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(DH(),n)})(Lu)),Lu}var xu={},b_={},YM;function NH(){if(YM)return b_;YM=1,Object.defineProperty(b_,"__esModule",{value:!0}),b_.ActorQueryOperationCreate=void 0;const n=gt(),t=ke();let o=class extends n.ActorQueryOperationTypedMediated{constructor(r){super(r,"create")}async testOperation(r,e){return(0,t.testReadOnly)(e)}async runOperation(r,e){const{execute:a}=await this.mediatorUpdateQuads.mediate({createGraphs:{graphs:[r.source],requireNonExistence:!r.silent},context:e});return{type:"void",execute:a}}};return b_.ActorQueryOperationCreate=o,b_}var ZM;function MH(){return ZM||(ZM=1,(function(n){var t=xu&&xu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=xu&&xu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(NH(),n)})(xu)),xu}var qu={},v_={},kM;function IH(){if(kM)return v_;kM=1,Object.defineProperty(v_,"__esModule",{value:!0}),v_.ActorQueryOperationDrop=void 0;const n=gt(),t=Be(),o=ke();let i=class extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"drop")}async testOperation(e,a){return(0,o.testReadOnly)(a)}async runOperation(e,a){const u=a.getSafe(t.KeysInitQuery.dataFactory);let c;e.source==="DEFAULT"?c=u.defaultGraph():typeof e.source=="string"?c=e.source:c=[e.source];const{execute:s}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:c,requireExistence:!e.silent,dropGraphs:!0},context:a});return{type:"void",execute:s}}};return v_.ActorQueryOperationDrop=i,v_}var e4;function LH(){return e4||(e4=1,(function(n){var t=qu&&qu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=qu&&qu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(IH(),n)})(qu)),qu}var Bu={},T_={},Cu={},O_={},t4;function p5(){if(t4)return O_;t4=1,Object.defineProperty(O_,"__esModule",{value:!0}),O_.BlankNode=void 0;let n=class{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}};return O_.BlankNode=n,O_}var S_={},w_={},r4;function h5(){if(r4)return w_;r4=1,Object.defineProperty(w_,"__esModule",{value:!0}),w_.DefaultGraph=void 0;let n=class{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}};return w_.DefaultGraph=n,n.INSTANCE=new n,w_}var A_={},F_={},n4;function zT(){if(n4)return F_;n4=1,Object.defineProperty(F_,"__esModule",{value:!0}),F_.NamedNode=void 0;let n=class{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}};return F_.NamedNode=n,F_}var i4;function y5(){if(i4)return A_;i4=1,Object.defineProperty(A_,"__esModule",{value:!0}),A_.Literal=void 0;const n=zT();let t=class Bv{constructor(i,r){this.termType="Literal",this.value=i,typeof r=="string"?(this.language=r,this.datatype=Bv.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=Bv.XSD_STRING)}equals(i){return!!i&&i.termType==="Literal"&&i.value===this.value&&i.language===this.language&&this.datatype.equals(i.datatype)}};return A_.Literal=t,t.RDF_LANGUAGE_STRING=new n.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new n.NamedNode("http://www.w3.org/2001/XMLSchema#string"),A_}var E_={},a4;function _5(){if(a4)return E_;a4=1,Object.defineProperty(E_,"__esModule",{value:!0}),E_.Quad=void 0;let n=class{constructor(o,i,r,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=i,this.object=r,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}};return E_.Quad=n,E_}var R_={},o4;function g5(){if(o4)return R_;o4=1,Object.defineProperty(R_,"__esModule",{value:!0}),R_.Variable=void 0;let n=class{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}};return R_.Variable=n,R_}var u4;function xH(){if(u4)return S_;u4=1,Object.defineProperty(S_,"__esModule",{value:!0}),S_.DataFactory=void 0;const n=p5(),t=h5(),o=y5(),i=zT(),r=_5(),e=g5();let a=0,u=class{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new i.NamedNode(s)}blankNode(s){return new n.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(s,l,f,d){return new r.Quad(s,l,f,d||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}};return S_.DataFactory=u,S_}var s4;function qH(){return s4||(s4=1,(function(n){var t=Cu&&Cu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Cu&&Cu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(p5(),n),o(xH(),n),o(h5(),n),o(y5(),n),o(zT(),n),o(_5(),n),o(g5(),n)})(Cu)),Cu}var c4;function BH(){if(c4)return T_;c4=1,Object.defineProperty(T_,"__esModule",{value:!0}),T_.ActorQueryOperationJoin=void 0;const n=gt(),t=fr(),o=Ae(),i=br(),r=ke(),e=ft(),a=qH();let u=class extends n.ActorQueryOperationTypedMediated{constructor(s){super(s,"join")}async testOperation(s,l){return(0,o.passTestVoid)()}async runOperation(s,l){const f=(await Promise.all(s.input.map(async d=>({output:await this.mediatorQueryOperation.mediate({operation:d,context:l}),operation:d})))).map(({output:d,operation:h})=>({output:(0,r.getSafeBindings)(d),operation:h}));if((await Promise.all(f.map(d=>d.output.metadata()))).some(d=>d.cardinality.value===0&&d.cardinality.type==="exact")){for(const d of f)d.output.bindingsStream.close();return{bindingsStream:new e.ArrayIterator([],{autoStart:!1}),metadata:async()=>({state:new i.MetadataValidationState,cardinality:{type:"exact",value:0},variables:t.ActorRdfJoin.joinVariables(new a.DataFactory,await t.ActorRdfJoin.getMetadatas(f))}),type:"bindings"}}return this.mediatorJoin.mediate({type:"inner",entries:f,context:l})}};return T_.ActorQueryOperationJoin=u,T_}var l4;function CH(){return l4||(l4=1,(function(n){var t=Bu&&Bu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Bu&&Bu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(BH(),n)})(Bu)),Bu}var Qu={},j_={},f4;function QH(){if(f4)return j_;f4=1,Object.defineProperty(j_,"__esModule",{value:!0}),j_.ActorQueryOperationMinus=void 0;const n=gt(),t=Ae(),o=ke();let i=class extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"minus")}async testOperation(e,a){return(0,t.passTestVoid)()}async runOperation(e,a){const u=e.metadata?.graphVariableFromParentScope,c=(await Promise.all(e.input.map(async s=>({output:await this.mediatorQueryOperation.mediate({operation:s,context:a}),operation:s})))).map(({output:s,operation:l})=>({output:(0,o.getSafeBindings)(s),operation:l}));return this.mediatorJoin.mediate({type:"minus",entries:c,context:a,graphVariableFromParentScope:u})}};return j_.ActorQueryOperationMinus=i,j_}var d4;function UH(){return d4||(d4=1,(function(n){var t=Qu&&Qu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Qu&&Qu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(QH(),n)})(Qu)),Qu}var Uu={},D_={},p4;function VH(){if(p4)return D_;p4=1,Object.defineProperty(D_,"__esModule",{value:!0}),D_.ActorQueryOperationLeftJoin=void 0;const n=gt(),t=Be(),o=Ae(),i=ke(),r=We();let e=class extends n.ActorQueryOperationTypedMediated{constructor(u){super(u,"leftjoin")}async testOperation(u,c){return(0,o.passTestVoid)()}async runOperation(u,c){const s=c.getSafe(t.KeysInitQuery.dataFactory),l=new r.Factory(s),f=await Promise.all(u.input.map(async(d,h)=>{const p=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:d,context:c}));return u.expression&&h===1?{output:p,operation:l.createFilter(d,u.expression),operationRequired:!0}:{output:p,operation:d}}));return await this.mediatorJoin.mediate({type:"optional",entries:f,context:c})}};return D_.ActorQueryOperationLeftJoin=e,D_}var h4;function GH(){return h4||(h4=1,(function(n){var t=Uu&&Uu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Uu&&Uu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(VH(),n)})(Uu)),Uu}var Vu={},P_={},y4;function XH(){if(y4)return P_;y4=1,Object.defineProperty(P_,"__esModule",{value:!0}),P_.ActorQueryOperationPathSeq=void 0;const n=zn(),t=Be(),o=ke(),i=We();let r=class extends n.ActorAbstractPath{constructor(a){super(a,i.Algebra.types.SEQ)}async runOperation(a,u){const c=u.getSafe(t.KeysInitQuery.dataFactory),s=new i.Factory(c),l=a.predicate;let f=a.subject;const d=[],h=await Promise.all(l.input.map((b,_)=>{const T=_===l.input.length-1?a.object:this.generateVariable(c,a,`b${_}`),m=s.createPath(f,b,T,a.graph),A=this.mediatorQueryOperation.mediate({context:u,operation:m});return f=T,_<l.input.length-1&&d.push(T),{output:A,operation:m}}).map(async({output:b,operation:_})=>({output:(0,o.getSafeBindings)(await b),operation:_}))),p=(0,o.getSafeBindings)(await this.mediatorJoin.mediate({type:"inner",entries:h,context:u}));return{type:"bindings",bindingsStream:p.bindingsStream.transform({transform(b,_,T){for(const m of d)b=b.delete(m);T(b),_()}}),async metadata(){const b=await p.metadata(),_=b.variables.filter(T=>!d.some(m=>m.value===T.variable.value));return{...b,variables:_}}}}};return P_.ActorQueryOperationPathSeq=r,P_}var _4;function zH(){return _4||(_4=1,(function(n){var t=Vu&&Vu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Vu&&Vu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(XH(),n)})(Vu)),Vu}var Gu={},N_={},g4;function $H(){if(g4)return N_;g4=1,Object.defineProperty(N_,"__esModule",{value:!0}),N_.ActorRdfJoinMultiSmallest=void 0;const n=fr(),t=Be(),o=Ae(),i=ke(),r=We();let e=class extends n.ActorRdfJoin{constructor(u){super(u,{logicalType:"inner",physicalName:"multi-smallest",limitEntries:3,limitEntriesMin:!0,canHandleUndefs:!0,isLeaf:!1})}getJoinIndexes(u){for(let c=0;c<u.length;c++)for(let s=c+1;s<u.length;s++)if(this.hasCommonVariables(u[c],u[s]))return[c,s];return[0,1]}hasCommonVariables(u,c){const s=u.metadata.variables.map(f=>f.variable.value),l=new Set(c.metadata.variables.map(f=>f.variable.value));return s.some(f=>l.has(f))}async sortJoinEntries(u,c){return(await this.mediatorJoinEntriesSort.mediate({entries:u,context:c})).entries}async getOutput(u,c){const s=u.context.getSafe(t.KeysInitQuery.dataFactory),l=new r.Factory(s),f=c.sortedEntries,d=await n.ActorRdfJoin.getEntriesWithMetadatas(f),h=this.getJoinIndexes(d),p=f[h[0]],y=f[h[1]];f.splice(h[1],1),f.splice(h[0],1);const b={output:(0,i.getSafeBindings)(await this.mediatorJoin.mediate({type:u.type,entries:[p,y],context:u.context})),operation:l.createJoin([p.operation,y.operation],!1)};return f.push(b),{result:await this.mediatorJoin.mediate({type:u.type,entries:f,context:u.context})}}async getJoinCoefficients(u,c){let{metadatas:s}=c;s=[...s];const l=await this.sortJoinEntries(u.entries.map((h,p)=>({...h,metadata:s[p]})),u.context);s=l.map(h=>h.metadata);const f=n.ActorRdfJoin.getRequestInitialTimes(s),d=n.ActorRdfJoin.getRequestItemTimes(s);return(0,o.passTestWithSideData)({iterations:s.reduce((h,p)=>h*p.cardinality.value,1),persistedItems:0,blockingItems:0,requestTime:s.reduce((h,p,y)=>h+f[y]+p.cardinality.value*d[y],0)},{...c,sortedEntries:l})}};return N_.ActorRdfJoinMultiSmallest=e,N_}var m4;function HH(){return m4||(m4=1,(function(n){var t=Gu&&Gu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Gu&&Gu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o($H(),n)})(Gu)),Gu}var Xu={},M_={},b4;function JH(){if(b4)return M_;b4=1,Object.defineProperty(M_,"__esModule",{value:!0}),M_.ActorQueryOperationLoad=void 0;const n=gt(),t=Be(),o=ke(),i=We();let r=class extends n.ActorQueryOperationTypedMediated{constructor(a){super(a,"load")}async testOperation(a,u){return(0,o.testReadOnly)(u)}async runOperation(a,u){const c=u.getSafe(t.KeysInitQuery.dataFactory),s=new i.Factory(c);let l=u;a.silent&&(l=l.set(t.KeysInitQuery.lenient,!0));const{querySource:f}=await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{value:a.source.value},context:l});let h=(0,o.getSafeQuads)(await this.mediatorQueryOperation.mediate({operation:s.createConstruct((0,o.assignOperationSource)(s.createPattern(c.variable("s"),c.variable("p"),c.variable("o")),f),[s.createPattern(c.variable("s"),c.variable("p"),c.variable("o"))]),context:l})).quadStream;a.destination&&(h=h.map(y=>c.quad(y.subject,y.predicate,y.object,a.destination)));const{execute:p}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:h,context:u});return{type:"void",execute:p}}};return M_.ActorQueryOperationLoad=r,M_}var v4;function KH(){return v4||(v4=1,(function(n){var t=Xu&&Xu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Xu&&Xu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(JH(),n)})(Xu)),Xu}var zu={},I_={},L_={},T4;function m5(){if(T4)return L_;T4=1,Object.defineProperty(L_,"__esModule",{value:!0}),L_.MaxAggregator=void 0;const n=rr();let t=class extends n.AggregateEvaluator{constructor(i,r,e,a){super(i,r,a),this.orderByEvaluator=e,this.state=void 0}putTerm(i){if(i.termType!=="Literal")throw new Error(`Term with value ${i.value} has type ${i.termType} and is not a literal`);this.state===void 0?this.state=i:this.orderByEvaluator.orderTypes(this.state,i)===-1&&(this.state=i)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return L_.MaxAggregator=t,L_}var O4;function WH(){if(O4)return I_;O4=1,Object.defineProperty(I_,"__esModule",{value:!0}),I_.ActorBindingsAggregatorFactoryMax=void 0;const n=rr(),t=Ae(),o=m5();let i=class extends n.ActorBindingsAggregatorFactory{constructor(e){super(e),this.mediatorTermComparatorFactory=e.mediatorTermComparatorFactory}async test(e){return e.expr.aggregator!=="max"?(0,t.failTest)("This actor only supports the 'max' aggregator."):(0,t.passTestVoid)()}async run({expr:e,context:a}){return new o.MaxAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:e.expression,context:a}),e.distinct,await this.mediatorTermComparatorFactory.mediate({context:a}))}};return I_.ActorBindingsAggregatorFactoryMax=i,I_}var S4;function YH(){return S4||(S4=1,(function(n){var t=zu&&zu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=zu&&zu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(WH(),n),o(m5(),n)})(zu)),zu}var $u={},x_={},q_={},w4;function b5(){if(w4)return q_;w4=1,Object.defineProperty(q_,"__esModule",{value:!0}),q_.MinAggregator=void 0;const n=rr();let t=class extends n.AggregateEvaluator{constructor(i,r,e,a){super(i,r,a),this.orderByEvaluator=e,this.state=void 0}putTerm(i){if(i.termType!=="Literal")throw new Error(`Term with value ${i.value} has type ${i.termType} and is not a literal`);this.state===void 0?this.state=i:this.orderByEvaluator.orderTypes(this.state,i)===1&&(this.state=i)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return q_.MinAggregator=t,q_}var A4;function ZH(){if(A4)return x_;A4=1,Object.defineProperty(x_,"__esModule",{value:!0}),x_.ActorBindingsAggregatorFactoryMin=void 0;const n=rr(),t=Ae(),o=b5();let i=class extends n.ActorBindingsAggregatorFactory{constructor(e){super(e),this.mediatorTermComparatorFactory=e.mediatorTermComparatorFactory}async test(e){return e.expr.aggregator!=="min"?(0,t.failTest)("This actor only supports the 'min' aggregator."):(0,t.passTestVoid)()}async run({context:e,expr:a}){return new o.MinAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:a.expression,context:e}),a.distinct,await this.mediatorTermComparatorFactory.mediate({context:e}))}};return x_.ActorBindingsAggregatorFactoryMin=i,x_}var F4;function kH(){return F4||(F4=1,(function(n){var t=$u&&$u.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=$u&&$u.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(ZH(),n),o(b5(),n)})($u)),$u}var Hu={},B_={},C_={},E4;function eJ(){if(E4)return C_;E4=1,Object.defineProperty(C_,"__esModule",{value:!0}),C_.SortIterator=void 0;const n=ft();let t=class extends n.TransformIterator{constructor(i,r,e){super(i,e);const a=e&&e.window;this.windowLength=Number.isFinite(a)&&a>0?a:Number.POSITIVE_INFINITY,this.sort=r,this.sorted=[]}_read(i,r){let e,{length:a}=this.sorted;for(;a!==this.windowLength&&(e=this.source.read(),e!==null);){let u=0,c=a-1,s,l;for(;u<=c;)s=Math.trunc((u+c)/2),l=this.sort(e,this.sorted[s]),l<0?u=s+1:l>0?c=s-1:(u=s,c=-1);this.sorted.splice(u,0,e),a++}a===this.windowLength&&this._push(this.sorted.pop()),r()}_flush(i){let{length:r}=this.sorted;for(;r--;)this._push(this.sorted.pop());i()}};return C_.SortIterator=t,C_}var R4;function tJ(){if(R4)return B_;R4=1,Object.defineProperty(B_,"__esModule",{value:!0}),B_.ActorQueryOperationOrderBy=void 0;const n=gt(),t=Ae(),o=ye(),i=ke(),r=We(),e=eJ();let a=class extends n.ActorQueryOperationTypedMediated{constructor(c){super(c,"orderby"),this.window=c.window??Number.POSITIVE_INFINITY,this.mediatorExpressionEvaluatorFactory=c.mediatorExpressionEvaluatorFactory,this.mediatorTermComparatorFactory=c.mediatorTermComparatorFactory}async testOperation(){return(0,t.passTestVoid)()}async runOperation(c,s){const l=await this.mediatorQueryOperation.mediate({operation:c.input,context:s}),f=(0,i.getSafeBindings)(l),d={window:this.window};let{bindingsStream:h}=f;const p=await this.mediatorTermComparatorFactory.mediate({context:s});for(let y=c.expressions.length-1;y>=0;y--){let b=c.expressions[y];const _=this.isAscending(b);b=this.extractSortExpression(b);const T=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:b,context:s}),m=async(j,X,K)=>{try{const O=await T.evaluate(j);K({bindings:j,result:O})}catch(O){(0,o.isExpressionError)(O)||h.emit("error",O),K({bindings:j,result:void 0})}X()},A=h.transform({transform:m});h=new e.SortIterator(A,(j,X)=>{let K=p.orderTypes(j.result,X.result);return _||(K*=-1),K},d).map(({bindings:j})=>j)}return{type:"bindings",bindingsStream:h,metadata:f.metadata}}extractSortExpression(c){const{expressionType:s,operator:l}=c;return s!==r.Algebra.expressionTypes.OPERATOR?c:l==="desc"?c.args[0]:c}isAscending(c){const{expressionType:s,operator:l}=c;return s!==r.Algebra.expressionTypes.OPERATOR?!0:l!=="desc"}};return B_.ActorQueryOperationOrderBy=a,B_}var j4;function rJ(){return j4||(j4=1,(function(n){var t=Hu&&Hu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Hu&&Hu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(tJ(),n)})(Hu)),Hu}var Ju={},Q_={},D4;function nJ(){if(D4)return Q_;D4=1,Object.defineProperty(Q_,"__esModule",{value:!0}),Q_.ActorOptimizeQueryOperationFilterPushdown=void 0;const n=jr(),t=Be(),o=Ae(),i=ke(),r=Gn(),e=We();let a=class extends n.ActorOptimizeQueryOperation{constructor(c){super(c)}async test(c){return(0,o.passTestVoid)()}async run(c){const s=c.context.getSafe(t.KeysInitQuery.dataFactory),l=new e.Factory(s);let f=c.operation;const d=this;this.splitConjunctive&&(f=e.Util.mapOperation(f,{filter(_,T){return _.expression.expressionType===e.Algebra.expressionTypes.OPERATOR&&_.expression.operator==="&&"?(d.logDebug(c.context,`Split conjunctive filter into ${_.expression.args.length} nested filters`),{recurse:!0,result:_.expression.args.reduce((m,A)=>T.createFilter(m,A),_.input)}):{recurse:!0,result:_}}},l));const h=this.getSources(f),p=new Map(await Promise.all(h.map(async _=>[_,await _.source.getSelectorShape(c.context)])));let y=!0,b=0;for(;y&&b<this.maxIterations;)y=!1,f=e.Util.mapOperation(f,{filter(_,T){const m=c.context.get(t.KeysInitQuery.extensionFunctions),A=c.context.get(t.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(!d.shouldAttemptPushDown(_,h,p,m,A))return{recurse:!0,result:_};const E=(0,i.getExpressionVariables)(_.expression),[j,X]=d.filterPushdown(_.expression,E,_.input,T,c.context);return j&&(y=!0),{recurse:!0,result:X}}}),b++;return b>1&&d.logDebug(c.context,`Pushed down filters in ${b} iterations`),this.mergeConjunctive&&(f=e.Util.mapOperation(f,{filter(_,T){if(_.input.type===e.Algebra.types.FILTER){const{nestedExpressions:m,input:A}=d.getNestedFilterExpressions(_);return d.logDebug(c.context,`Merge ${m.length} nested filters into conjunctive filter`),{recurse:!0,result:T.createFilter(A,m.slice(1).reduce((E,j)=>T.createOperatorExpression("&&",[E,j]),m[0]))}}return{recurse:!0,result:_}}})),{operation:f,context:c.context}}shouldAttemptPushDown(c,s,l,f,d){if(this.aggressivePushdown)return!0;const h=c.expression;return h.expressionType===e.Algebra.expressionTypes.OPERATOR&&h.operator==="="&&(h.args[0].expressionType==="term"&&h.args[0].term.termType!=="Variable"&&h.args[1].expressionType==="term"&&h.args[1].term.termType==="Variable"||h.args[0].expressionType==="term"&&h.args[0].term.termType==="Variable"&&h.args[1].expressionType==="term"&&h.args[1].term.termType!=="Variable")?!0:f&&h.expressionType===e.Algebra.expressionTypes.NAMED&&h.name.value in f&&!s.some(p=>(0,i.doesShapeAcceptOperation)(l.get(p),h))?!1:!!s.some(p=>(0,i.doesShapeAcceptOperation)(l.get(p),c,{wildcardAcceptAllExtensionFunctions:d}))}getSources(c){const s=new Set,l=f=>{const d=(0,i.getOperationSource)(f);return d&&s.add(d),!1};return e.Util.recurseOperation(c,{[e.Algebra.types.PATTERN]:l,[e.Algebra.types.LINK]:l,[e.Algebra.types.NPS]:l,[e.Algebra.types.SERVICE]:l}),[...s]}getOverlappingOperations(c,s){const l=[],f=[],d=[];for(const h of c.input){const p=e.Util.inScopeVariables(h);this.variablesSubSetOf(s,p)?l.push(h):this.variablesIntersect(s,p)?f.push(h):d.push(h)}return{fullyOverlapping:l,partiallyOverlapping:f,notOverlapping:d}}filterPushdown(c,s,l,f,d){if(this.isExpressionFalse(c))return[!0,f.createUnion([])];if(c.expressionType===e.Algebra.expressionTypes.EXISTENCE)return[!1,f.createFilter(l,c)];switch(l.type){case e.Algebra.types.EXTEND:return this.variablesIntersect([l.variable],s)?[!1,f.createFilter(l,c)]:[!0,f.createExtend(this.filterPushdown(c,s,l.input,f,d)[1],l.variable,l.expression)];case e.Algebra.types.FILTER:{const[h,p]=this.filterPushdown(c,s,l.input,f,d);return[h,f.createFilter(p,l.expression)]}case e.Algebra.types.JOIN:{if(l.input.length===0)return[!1,f.createFilter(l,c)];const{fullyOverlapping:h,partiallyOverlapping:p,notOverlapping:y}=this.getOverlappingOperations(l,s),b=[];let _=!1;return h.length>0&&(_=!0,b.push(f.createJoin(h.map(T=>this.filterPushdown(c,s,T,f,d)[1])))),p.length>0&&b.push(f.createFilter(f.createJoin(p,!1),c)),y.length>0&&b.push(...y),b.length>1&&(_=!0),_&&this.logDebug(d,`Push down filter across join entries with ${h.length} fully overlapping, ${p.length} partially overlapping, and ${y.length} not overlapping`),[_,b.length===1?b[0]:f.createJoin(b)]}case e.Algebra.types.NOP:return[!0,l];case e.Algebra.types.PROJECT:return this.variablesIntersect(l.variables,s)?[!0,f.createProject(this.filterPushdown(c,s,l.input,f,d)[1],l.variables)]:[!0,l];case e.Algebra.types.UNION:{const{fullyOverlapping:h,partiallyOverlapping:p,notOverlapping:y}=this.getOverlappingOperations(l,s),b=[];let _=!1;return h.length>0&&(_=!0,b.push(f.createUnion(h.map(T=>this.filterPushdown(c,s,T,f,d)[1])))),p.length>0&&b.push(f.createFilter(f.createUnion(p,!1),c)),y.length>0&&b.push(...y),b.length>1&&(_=!0),_&&this.logDebug(d,`Push down filter across union entries with ${h.length} fully overlapping, ${p.length} partially overlapping, and ${y.length} not overlapping`),[_,b.length===1?b[0]:f.createUnion(b)]}case e.Algebra.types.VALUES:return this.variablesIntersect(l.variables,s)?[!1,f.createFilter(l,c)]:[!0,l];case e.Algebra.types.LEFT_JOIN:{if(this.pushIntoLeftJoins){const h=e.Util.inScopeVariables(l.input[1]);if(!this.variablesIntersect(s,h))return this.logDebug(d,"Push down filter into left join"),[!0,f.createLeftJoin(this.filterPushdown(c,s,l.input[0],f,d)[1],l.input[1],l.expression)]}return[!1,f.createFilter(l,c)]}case e.Algebra.types.PATTERN:{if(this.pushEqualityIntoPatterns){const h=this.getEqualityExpressionPushableIntoPattern(c);if(h){let p=!1;const y=l.metadata;if(l=(0,r.mapTermsNested)(l,b=>b.equals(h.variable)?(p=!0,h.term):b),l.type=e.Algebra.types.PATTERN,l.metadata=y,p)return this.logDebug(d,`Push down filter into pattern for ?${h.variable.value}`),[!0,f.createJoin([l,f.createValues([h.variable],[{[`?${h.variable.value}`]:h.term}])])]}}return[!1,f.createFilter(l,c)]}case e.Algebra.types.PATH:{if(this.pushEqualityIntoPatterns){const h=this.getEqualityExpressionPushableIntoPattern(c);if(h&&(l.subject.equals(h.variable)||l.object.equals(h.variable))){this.logDebug(d,`Push down filter into path for ?${h.variable.value}`);const p=l.metadata;return l=f.createPath(l.subject.equals(h.variable)?h.term:l.subject,l.predicate,l.object.equals(h.variable)?h.term:l.object),l.metadata=p,[!0,f.createJoin([l,f.createValues([h.variable],[{[`?${h.variable.value}`]:h.term}])])]}}return[!1,f.createFilter(l,c)]}case e.Algebra.types.MINUS:case e.Algebra.types.ALT:case e.Algebra.types.ASK:case e.Algebra.types.BGP:case e.Algebra.types.CONSTRUCT:case e.Algebra.types.DESCRIBE:case e.Algebra.types.DISTINCT:case e.Algebra.types.EXPRESSION:case e.Algebra.types.FROM:case e.Algebra.types.GRAPH:case e.Algebra.types.GROUP:case e.Algebra.types.INV:case e.Algebra.types.LINK:case e.Algebra.types.NPS:case e.Algebra.types.ONE_OR_MORE_PATH:case e.Algebra.types.ORDER_BY:case e.Algebra.types.REDUCED:case e.Algebra.types.SEQ:case e.Algebra.types.SERVICE:case e.Algebra.types.SLICE:case e.Algebra.types.ZERO_OR_MORE_PATH:case e.Algebra.types.ZERO_OR_ONE_PATH:case e.Algebra.types.COMPOSITE_UPDATE:case e.Algebra.types.DELETE_INSERT:case e.Algebra.types.LOAD:case e.Algebra.types.CLEAR:case e.Algebra.types.CREATE:case e.Algebra.types.DROP:case e.Algebra.types.ADD:case e.Algebra.types.MOVE:case e.Algebra.types.COPY:return[!1,f.createFilter(l,c)]}}getEqualityExpressionPushableIntoPattern(c){if(c.expressionType===e.Algebra.expressionTypes.OPERATOR&&c.operator==="="){if(c.args[0].expressionType==="term"&&c.args[0].term.termType!=="Variable"&&(c.args[0].term.termType!=="Literal"||this.isLiteralWithCanonicalLexicalForm(c.args[0].term))&&c.args[1].expressionType==="term"&&c.args[1].term.termType==="Variable")return{variable:c.args[1].term,term:c.args[0].term};if(c.args[0].expressionType==="term"&&c.args[0].term.termType==="Variable"&&c.args[1].expressionType==="term"&&c.args[1].term.termType!=="Variable"&&(c.args[1].term.termType!=="Literal"||this.isLiteralWithCanonicalLexicalForm(c.args[1].term)))return{variable:c.args[0].term,term:c.args[1].term}}}isLiteralWithCanonicalLexicalForm(c){switch(c.datatype.value){case"http://www.w3.org/2001/XMLSchema#string":case"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":case"http://www.w3.org/2001/XMLSchema#normalizedString":case"http://www.w3.org/2001/XMLSchema#anyURI":case"http://www.w3.org/2001/XMLSchema#base64Binary":case"http://www.w3.org/2001/XMLSchema#language":case"http://www.w3.org/2001/XMLSchema#Name":case"http://www.w3.org/2001/XMLSchema#NCName":case"http://www.w3.org/2001/XMLSchema#NMTOKEN":case"http://www.w3.org/2001/XMLSchema#token":case"http://www.w3.org/2001/XMLSchema#hexBinary":return!0}return!1}variablesIntersect(c,s){return c.some(l=>s.some(f=>l.equals(f)))}variablesSubSetOf(c,s){return c.length<=s.length&&c.every(l=>s.some(f=>l.equals(f)))}isExpressionFalse(c){return c.term&&c.term.termType==="Literal"&&c.term.value==="false"}getNestedFilterExpressions(c){if(c.input.type===e.Algebra.types.FILTER){const s=this.getNestedFilterExpressions(c.input);return{nestedExpressions:[c.expression,...s.nestedExpressions],input:s.input}}return{nestedExpressions:[c.expression],input:c.input}}};return Q_.ActorOptimizeQueryOperationFilterPushdown=a,Q_}var P4;function iJ(){return P4||(P4=1,(function(n){var t=Ju&&Ju.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ju&&Ju.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(nJ(),n)})(Ju)),Ju}var Ku={},U_={},N4;function aJ(){if(N4)return U_;N4=1,Object.defineProperty(U_,"__esModule",{value:!0}),U_.ActorContextPreprocessQuerySourceIdentify=void 0;const n=rm(),t=Be(),o=Ae(),i=Lb();let r=class extends n.ActorContextPreprocess{constructor(a){super(a),this.cache=this.cacheSize?new i.LRUCache({max:this.cacheSize}):void 0;const u=this.cache;u&&this.httpInvalidator.addInvalidateListener(({url:c})=>c?u.delete(c):u.clear())}async test(a){return(0,o.passTestVoid)()}async run(a){let u=a.context;if(u.has(t.KeysInitQuery.querySourcesUnidentified)){const c=a.context.get(t.KeysInitQuery.querySourcesUnidentified),s=await Promise.all(c.map(d=>this.expandSource(d))),l=await Promise.all(s.map(async d=>this.identifySource(d,a.context))),f=a.context.get(t.KeysStatistics.dereferencedLinks);if(f)for(const d of l)f.updateStatistic({url:d.source.referenceValue,metadata:{seed:!0}},d.source);u=a.context.delete(t.KeysInitQuery.querySourcesUnidentified).set(t.KeysQueryOperation.querySources,l)}return{context:u}}async expandSource(a){return typeof a=="string"||"match"in a?{value:a}:{...a,context:(await this.mediatorContextPreprocess.mediate({context:o.ActionContext.ensureActionContext(a.context??{})})).context}}identifySource(a,u){let c;return typeof a.value=="string"&&this.cache&&(c=this.cache.get(a.value)),c||(c=this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:a,context:u}).then(({querySource:s})=>s),typeof a.value=="string"&&this.cache&&this.cache.set(a.value,c)),c}};return U_.ActorContextPreprocessQuerySourceIdentify=r,U_}var M4;function oJ(){return M4||(M4=1,(function(n){var t=Ku&&Ku.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ku&&Ku.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(aJ(),n)})(Ku)),Ku}var Wu={},V_={},Yu={},G_={},I4;function uJ(){if(I4)return G_;I4=1,Object.defineProperty(G_,"__esModule",{value:!0}),G_.ActorExpressionEvaluatorFactory=void 0;const n=Ae();let t=class extends n.Actor{constructor(i){super(i),this.mediatorQueryOperation=i.mediatorQueryOperation,this.mediatorFunctionFactory=i.mediatorFunctionFactory,this.mediatorMergeBindingsContext=i.mediatorMergeBindingsContext}};return G_.ActorExpressionEvaluatorFactory=t,G_}var L4;function sJ(){return L4||(L4=1,(function(n){var t=Yu&&Yu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Yu&&Yu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(uJ(),n)})(Yu)),Yu}var X_={},x4;function v5(){if(x4)return X_;x4=1,Object.defineProperty(X_,"__esModule",{value:!0}),X_.AlgebraTransformer=void 0;const n=Be(),t=ye(),o=We();let i=class lb extends t.TermTransformer{constructor(e,a){super(e.getSafe(n.KeysExpressionEvaluator.superTypeProvider)),this.context=e,this.mediatorFunctionFactory=a}async transformAlgebra(e){const a=o.Algebra.expressionTypes;switch(e.expressionType){case a.TERM:return this.transformTerm(e);case a.OPERATOR:return await this.transformOperator(e);case a.NAMED:return await this.transformNamed(e);case a.EXISTENCE:return lb.transformExistence(e);case a.AGGREGATE:return lb.transformAggregate(e);case a.WILDCARD:return lb.transformWildcard(e)}}static transformWildcard(e){return new t.NamedNode(e.wildcard.value)}async getOperator(e,a){const u=await this.mediatorFunctionFactory.mediate({functionName:e,arguments:a.args,context:this.context}),c=await Promise.all(a.args.map(s=>this.transformAlgebra(s)));if(!u.checkArity(c))throw new t.InvalidArity(c,e);return new t.Operator(e,c,u.apply)}async transformOperator(e){return this.getOperator(e.operator.toLowerCase(),e)}async transformNamed(e){return this.getOperator(e.name.value,e)}static transformAggregate(e){const a=e.aggregator;return new t.Aggregate(a,e)}static transformExistence(e){return new t.Existence(e)}};return X_.AlgebraTransformer=i,X_}var z_={},$_={},q4;function T5(){if(q4)return $_;q4=1,Object.defineProperty($_,"__esModule",{value:!0}),$_.InternalEvaluator=void 0;const n=Be(),t=Vn(),o=ye(),i=ke(),r=We(),e=v5();let a=class{constructor(c,s,l,f){this.context=c,this.mediatorQueryOperation=l,this.bindingsFactory=f,this.subEvaluators={[t.ExpressionType.Term]:(d,h)=>this.term(d),[t.ExpressionType.Variable]:(d,h)=>this.variable(d,h),[t.ExpressionType.Operator]:(d,h)=>this.evalFunction(d,h),[t.ExpressionType.Existence]:(d,h)=>this.evalExistence(d,h),[t.ExpressionType.Aggregate]:(d,h)=>this.evalAggregate()},this.transformer=new e.AlgebraTransformer(c,s)}async evaluatorExpressionEvaluation(c,s){return this.subEvaluators[c.expressionType].bind(this)(c,s)}term(c){return c}variable(c,s){const l=s.get(o.expressionToVar(this.context.getSafe(n.KeysInitQuery.dataFactory),c));if(!l)throw new o.UnboundVariableError(c.name,s);return this.transformer.transformRDFTermUnsafe(l)}async evalFunction(c,s){return c.apply({args:c.args,mapping:s,exprEval:this})}async evalExistence(c,s){const l=this.context.getSafe(n.KeysInitQuery.dataFactory),f=new r.Factory(l),d=(0,i.materializeOperation)(c.expression.input,s,f,this.bindingsFactory),h=await this.mediatorQueryOperation.mediate({operation:d,context:this.context}),p=(0,i.getSafeBindings)(h);return await new Promise((y,b)=>{p.bindingsStream.on("end",()=>{y(!1)}),p.bindingsStream.on("error",b),p.bindingsStream.on("data",()=>{p.bindingsStream.close(),y(!0)})}).then(y=>c.expression.not?!y:y).then(y=>new o.BooleanLiteral(y))}evalAggregate(){throw new o.NoAggregator}};return $_.InternalEvaluator=a,$_}var B4;function cJ(){if(B4)return z_;B4=1,Object.defineProperty(z_,"__esModule",{value:!0}),z_.ExpressionEvaluator=void 0;const n=Be(),t=T5();let o=class{constructor(r,e,a,u,c){this.context=r,this.expr=e,this.mediatorFunctionFactory=a,this.mediatorQueryOperation=u,this.bindingsFactory=c,this.internalEvaluator=new t.InternalEvaluator(r,a,u,c)}async evaluate(r){return(await this.internalEvaluator.evaluatorExpressionEvaluation(this.expr,r)).toRDF(this.context.getSafe(n.KeysInitQuery.dataFactory))}async evaluateAsEBV(r){return(await this.internalEvaluator.evaluatorExpressionEvaluation(this.expr,r)).coerceEBV()}evaluateAsEvaluatorExpression(r){return this.evaluatorExpressionEvaluation(this.expr,r)}evaluatorExpressionEvaluation(r,e){return this.internalEvaluator.evaluatorExpressionEvaluation(r,e)}};return z_.ExpressionEvaluator=o,z_}var C4;function lJ(){if(C4)return V_;C4=1,Object.defineProperty(V_,"__esModule",{value:!0}),V_.ActorExpressionEvaluatorFactoryDefault=void 0;const n=sJ(),t=Be(),o=Ae(),i=Dt(),r=ye(),e=v5(),a=cJ();let u=class extends n.ActorExpressionEvaluatorFactory{constructor(s){super(s)}async test(s){return(0,o.passTestVoid)()}async run(s){const l=(0,r.prepareEvaluatorActionContext)(s.context);return new a.ExpressionEvaluator(l,await new e.AlgebraTransformer(l,this.mediatorFunctionFactory).transformAlgebra(s.algExpr),this.mediatorFunctionFactory,this.mediatorQueryOperation,await i.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,s.context.getSafe(t.KeysInitQuery.dataFactory)))}};return V_.ActorExpressionEvaluatorFactoryDefault=u,V_}var Q4;function fJ(){return Q4||(Q4=1,(function(n){var t=Wu&&Wu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Wu&&Wu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(lJ(),n)})(Wu)),Wu}var Zu={},H_={},J_={},U4;function dJ(){if(U4)return J_;U4=1,Object.defineProperty(J_,"__esModule",{value:!0}),J_.GroupsState=void 0;const n=Be(),t=Dt();let o=class{constructor(r,e,a,u,c){this.pattern=r,this.mediatorBindingsAggregatorFactory=e,this.context=a,this.bindingsFactory=u,this.variables=c,this.groups=new Map,this.groupsInitializer=new Map,this.groupVariables=new Set(this.pattern.variables.map(s=>s.value)),this.waitCounter=1,this.resultHasBeenCalled=!1}consumeBindings(r){const e=this.resultCheck();if(e)return e;this.waitCounter++;const a=r.filter((l,f)=>this.groupVariables.has(f.value)),u=this.hashBindings(a);let c=this.groupsInitializer.get(u),s;if(c){const l=c;s=(async()=>{const f=await l;await Promise.all(this.pattern.aggregates.map(async d=>{const h=d.variable.value;await f.aggregators[h].putBindings(r)}))})().then(async()=>{await this.subtractWaitCounterAndCollect()})}else c=(async()=>{const l={};await Promise.all(this.pattern.aggregates.map(async d=>{const h=d.variable.value;l[h]=await this.mediatorBindingsAggregatorFactory.mediate({expr:d,context:this.context}),await l[h].putBindings(r)}));const f={aggregators:l,bindings:a};return this.groups.set(u,f),await this.subtractWaitCounterAndCollect(),f})(),this.groupsInitializer.set(u,c),s=c;return s}async subtractWaitCounterAndCollect(){--this.waitCounter===0&&await this.handleResultCollection()}async handleResultCollection(){const r=this.context.getSafe(n.KeysInitQuery.dataFactory);let e=await Promise.all([...this.groups].map(async([a,u])=>{const{bindings:c,aggregators:s}=u;let l=c;for(const f in s){const d=await s[f].result();d&&(l=l.set(r.variable(f),d))}return l}));if(e.length===0&&this.groupVariables.size===0){const a=[];await Promise.all(this.pattern.aggregates.map(async u=>{const c=u.variable,l=await(await this.mediatorBindingsAggregatorFactory.mediate({expr:u,context:this.context})).result();l!==void 0&&a.push([c,l])})),e=[this.bindingsFactory.bindings(a)]}this.waitResolver(e)}resultCheck(){if(this.resultHasBeenCalled)return Promise.reject(new Error("Calling any function after calling collectResult is invalid."))}async collectResults(){const r=this.resultCheck();if(r)return r;this.resultHasBeenCalled=!0;const e=new Promise(a=>{this.waitResolver=a});return await this.subtractWaitCounterAndCollect(),e}hashBindings(r){return(0,t.bindingsToCompactString)(r,this.variables)}};return J_.GroupsState=o,J_}var V4;function pJ(){if(V4)return H_;V4=1,Object.defineProperty(H_,"__esModule",{value:!0}),H_.ActorQueryOperationGroup=void 0;const n=gt(),t=Be(),o=Ae(),i=Dt(),r=ke(),e=ft(),a=dJ();let u=class extends n.ActorQueryOperationTypedMediated{constructor(s){super(s,"group"),this.mediatorBindingsAggregatorFactory=s.mediatorBindingsAggregatorFactory}async testOperation(){return(0,o.passTestVoid)()}async runOperation(s,l){const f=l.getSafe(t.KeysInitQuery.dataFactory),d=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,l,f),{input:h,aggregates:p}=s,y=await this.mediatorQueryOperation.mediate({operation:h,context:l}),b=(0,r.getSafeBindings)(y),_=[...s.variables,...p.map(A=>A.variable)].map(A=>({variable:A,canBeUndef:!1})),T=(await b.metadata()).variables.map(A=>A.variable);return{type:"bindings",bindingsStream:new e.TransformIterator(()=>new Promise((A,E)=>{const j=new a.GroupsState(s,this.mediatorBindingsAggregatorFactory,l,d,T);b.bindingsStream.on("end",async()=>{try{const X=new e.ArrayIterator(await j.collectResults(),{autoStart:!1});A(X)}catch(X){E(X)}}),b.bindingsStream.on("error",E),b.bindingsStream.on("data",X=>{j.consumeBindings(X).catch(E)})}),{autoStart:!1}),metadata:async()=>({...await b.metadata(),variables:_})}}};return H_.ActorQueryOperationGroup=u,H_}var G4;function hJ(){return G4||(G4=1,(function(n){var t=Zu&&Zu.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Zu&&Zu.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(pJ(),n)})(Zu)),Zu}var ku={},K_={},X4;function yJ(){if(X4)return K_;X4=1,Object.defineProperty(K_,"__esModule",{value:!0}),K_.ActorQueryOperationNop=void 0;const n=gt(),t=Be(),o=Ae(),i=Dt(),r=br(),e=ft();let a=class extends n.ActorQueryOperationTypedMediated{constructor(c){super(c,"nop")}async testOperation(c,s){return(0,o.passTestVoid)()}async runOperation(c,s){const l=s.getSafe(t.KeysInitQuery.dataFactory),f=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,s,l);return{bindingsStream:new e.SingletonIterator(f.bindings()),metadata:()=>Promise.resolve({state:new r.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]}),type:"bindings"}}};return K_.ActorQueryOperationNop=a,K_}var z4;function _J(){return z4||(z4=1,(function(n){var t=ku&&ku.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ku&&ku.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(yJ(),n)})(ku)),ku}var es={},W_={},$4;function gJ(){if($4)return W_;$4=1,Object.defineProperty(W_,"__esModule",{value:!0}),W_.ActorQueryOperationService=void 0;const n=gt(),t=Be(),o=Ae(),i=Dt(),r=br(),e=ke(),a=ft(),u=Lb();let c=class extends n.ActorQueryOperationTypedMediated{constructor(l){super(l,"service"),l.cacheSize&&l.httpInvalidator&&l.cacheSize>0&&(this.cache=new u.LRUCache({max:l.cacheSize}),l.httpInvalidator.addInvalidateListener(f=>this.handleHttpInvalidateEvent(f)))}async testOperation(l,f){return l.name.termType!=="NamedNode"?(0,o.failTest)(`${this.name} can only query services by IRI, while a ${l.name.termType} was given.`):(0,o.passTestVoid)()}async runOperation(l,f){let d=this.cache?.get(l.name.value);d||(d=(await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{value:l.name.value,type:this.forceSparqlEndpoint?"sparql":void 0},context:f})).querySource,this.cache?.set(l.name.value,d));let h;try{h=(0,e.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:(0,e.assignOperationSource)(l.input,d),context:f}))}catch(p){if(l.silent){const y=f.getSafe(t.KeysInitQuery.dataFactory),b=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,f,y);h={bindingsStream:new a.SingletonIterator(b.bindings()),type:"bindings",metadata:async()=>({state:new r.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]})},this.logWarn(f,`An error occurred when executing a SERVICE clause: ${p.message}`)}else throw p}return h}handleHttpInvalidateEvent(l){l.url?this.cache?.delete(l.url):this.cache?.clear()}};return W_.ActorQueryOperationService=c,W_}var H4;function mJ(){return H4||(H4=1,(function(n){var t=es&&es.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=es&&es.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(gJ(),n)})(es)),es}var ts={},Y_={},J4;function bJ(){if(J4)return Y_;J4=1,Object.defineProperty(Y_,"__esModule",{value:!0}),Y_.ActorQueryOperationValues=void 0;const n=gt(),t=Be(),o=Ae(),i=Dt(),r=br(),e=ft();let a=class extends n.ActorQueryOperationTyped{constructor(c){super(c,"values")}async testOperation(c,s){return(0,o.passTestVoid)()}async runOperation(c,s){const l=s.getSafe(t.KeysInitQuery.dataFactory),f=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,s,l);return{type:"bindings",bindingsStream:new e.ArrayIterator(c.bindings.map(p=>f.bindings(Object.entries(p).map(([y,b])=>[l.variable(y.slice(1)),b])))),metadata:()=>Promise.resolve({state:new r.MetadataValidationState,cardinality:{type:"exact",value:c.bindings.length},variables:c.variables.map(p=>({variable:p,canBeUndef:c.bindings.some(y=>!(`?${p.value}`in y))}))})}}};return Y_.ActorQueryOperationValues=a,Y_}var K4;function vJ(){return K4||(K4=1,(function(n){var t=ts&&ts.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ts&&ts.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(bJ(),n)})(ts)),ts}var rs={},Z_={},W4;function TJ(){if(W4)return Z_;W4=1,Object.defineProperty(Z_,"__esModule",{value:!0}),Z_.ActorQueryOperationPathOneOrMore=void 0;const n=zn(),t=Be(),o=Dt(),i=ke(),r=ft(),e=We();let a=class extends n.ActorAbstractPath{constructor(c){super(c,e.Algebra.types.ONE_OR_MORE_PATH)}async runOperation(c,s){const l=s.getSafe(t.KeysInitQuery.dataFactory),f=new e.Factory(l),d=await o.BindingsFactory.create(this.mediatorMergeBindingsContext,s,l),h=await this.isPathArbitraryLengthDistinct(f,s,c);if(h.operation)return h.operation;s=h.context;const p=c.predicate;if(c.subject.termType!=="Variable"&&c.object.termType==="Variable"){const T=c.object,m=await this.getObjectsPredicateStarEval(c.subject,p.path,T,c.graph,s,!1,f,d),A=(c.graph.termType==="Variable"?[T,c.graph]:[T]).map(E=>({variable:E,canBeUndef:!1}));return{type:"bindings",bindingsStream:m.bindingsStream,metadata:async()=>({...await m.metadata(),variables:A})}}if(c.subject.termType==="Variable"&&c.object.termType==="Variable"){const T=f.createDistinct(f.createPath(c.subject,c.predicate.path,c.object,c.graph)),m=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:s,operation:T})),A=c.subject,E=c.object,j={},X=new r.MultiTransformIterator(m.bindingsStream,{multiTransform:O=>{const S=O.get(A),L=O.get(E),N=c.graph.termType==="Variable"?O.get(c.graph):c.graph;return new r.TransformIterator(async()=>{const I=new r.BufferedIterator;return await this.getSubjectAndObjectBindingsPredicateStar(A,E,S,L,p.path,N,s,j,{},I,{count:0},f,d),I.map(V=>(c.graph.termType==="Variable"&&(V=V.set(c.graph,N)),V))},{autoStart:!1,maxBufferSize:128})},autoStart:!1}),K=(c.graph.termType==="Variable"?[A,E,c.graph]:[A,E]).map(O=>({variable:O,canBeUndef:!1}));return{type:"bindings",bindingsStream:X,metadata:async()=>({...await m.metadata(),variables:K})}}if(c.subject.termType==="Variable"&&c.object.termType!=="Variable")return this.mediatorQueryOperation.mediate({context:s,operation:f.createPath(c.object,f.createOneOrMorePath(f.createInv(p.path)),c.subject,c.graph)});const y=this.generateVariable(l),b=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:s,operation:f.createPath(c.subject,p,y,c.graph)}));return{type:"bindings",bindingsStream:b.bindingsStream.map(T=>c.object.equals(T.get(y))?c.graph.termType==="Variable"?d.bindings([[c.graph,T.get(c.graph)]]):d.bindings():null),metadata:async()=>({...await b.metadata(),variables:(c.graph.termType==="Variable"?[c.graph]:[]).map(T=>({variable:T,canBeUndef:!1}))})}}};return Z_.ActorQueryOperationPathOneOrMore=a,Z_}var Y4;function OJ(){return Y4||(Y4=1,(function(n){var t=rs&&rs.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=rs&&rs.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(TJ(),n)})(rs)),rs}var ns={},k_={},Z4;function SJ(){if(Z4)return k_;Z4=1,Object.defineProperty(k_,"__esModule",{value:!0}),k_.ActorQueryOperationPathZeroOrMore=void 0;const n=zn(),t=Be(),o=Dt(),i=ke(),r=ft(),e=mr(),a=We();let u=class extends n.ActorAbstractPath{constructor(s){super(s,a.Algebra.types.ZERO_OR_MORE_PATH)}async runOperation(s,l){const f=l.getSafe(t.KeysInitQuery.dataFactory),d=new a.Factory(f),h=await o.BindingsFactory.create(this.mediatorMergeBindingsContext,l,f),p=await this.isPathArbitraryLengthDistinct(d,l,s);if(p.operation)return p.operation;l=p.context;const y=s.predicate,b=this.getPathSources(y),_=s.subject.termType==="Variable",T=s.object.termType==="Variable";if(s.subject.termType==="Variable"&&s.object.termType==="Variable"){const K=this.generateVariable(f,s),O=this.assignPatternSources(d,d.createPattern(s.subject,K,s.object,s.graph),b),S=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:l,operation:O})),L=s.subject,N=s.object,I=new Set,V={},re=new r.MultiTransformIterator(S.bindingsStream,{multiTransform:ce=>{const ae=ce.get(L),pe=ce.get(N),U=s.graph.termType==="Variable"?ce.get(s.graph):s.graph,le=(0,e.termToString)(ae)+(0,e.termToString)(U),me=(0,e.termToString)(pe)+(0,e.termToString)(U);return new r.TransformIterator(async()=>{if(I.has(le)&&I.has(me))return new r.EmptyIterator;const te=new r.BufferedIterator,de={count:0};return I.has(le)||(I.add(le),await this.getSubjectAndObjectBindingsPredicateStar(L,N,ae,ae,y.path,U,l,V,{},te,de,d,h)),I.has(me)||(I.add(me),await this.getSubjectAndObjectBindingsPredicateStar(L,N,pe,pe,y.path,U,l,V,{},te,de,d,h)),te.map(Ee=>(s.graph.termType==="Variable"&&(Ee=Ee.set(s.graph,U)),Ee))},{autoStart:!1,maxBufferSize:128})},autoStart:!1}),Y=(s.graph.termType==="Variable"?[L,s.object,s.graph]:[L,s.object]).map(ce=>({variable:ce,canBeUndef:!1}));return{type:"bindings",bindingsStream:re,metadata:async()=>({...await S.metadata(),variables:Y})}}if(!_&&!T){const K=this.generateVariable(f),O=await this.getObjectsPredicateStarEval(s.subject,y.path,K,s.graph,l,!0,d,h);return{type:"bindings",bindingsStream:O.bindingsStream.map(L=>s.object.equals(L.get(K))?s.graph.termType==="Variable"?h.bindings([[s.graph,L.get(s.graph)]]):h.bindings():null),metadata:async()=>({...await O.metadata(),variables:(s.graph.termType==="Variable"?[s.graph]:[]).map(L=>({variable:L,canBeUndef:!1}))})}}const m=_?s.object:s.subject,A=_?s.subject:s.object,E=_?d.createInv(y.path):y.path,j=await this.getObjectsPredicateStarEval(m,E,A,s.graph,l,!0,d,h),X=(s.graph.termType==="Variable"?[A,s.graph]:[A]).map(K=>({variable:K,canBeUndef:!1}));return{type:"bindings",bindingsStream:j.bindingsStream,metadata:async()=>({...await j.metadata(),variables:X})}}};return k_.ActorQueryOperationPathZeroOrMore=u,k_}var k4;function wJ(){return k4||(k4=1,(function(n){var t=ns&&ns.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ns&&ns.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(SJ(),n)})(ns)),ns}var is={},eg={},eI;function AJ(){if(eI)return eg;eI=1,Object.defineProperty(eg,"__esModule",{value:!0}),eg.ActorQueryOperationPathZeroOrOne=void 0;const n=zn(),t=Be(),o=Dt(),i=br(),r=ke(),e=ft(),a=We();let u=class extends n.ActorAbstractPath{constructor(s){super(s,a.Algebra.types.ZERO_OR_ONE_PATH)}async runOperation(s,l){const f=l.getSafe(t.KeysInitQuery.dataFactory),d=new a.Factory(f),h=await o.BindingsFactory.create(this.mediatorMergeBindingsContext,l,f),p=s.predicate,y=this.getPathSources(p),b=[];if(s.subject.termType!=="Variable"&&s.object.termType!=="Variable"&&s.subject.equals(s.object))return{type:"bindings",bindingsStream:new e.SingletonIterator(h.bindings()),metadata:()=>Promise.resolve({state:new i.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]})};const _=await this.isPathArbitraryLengthDistinct(d,l,s);if(_.operation)return _.operation;l=_.context;const T=(0,r.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:l,operation:d.createPath(s.subject,p.path,s.object,s.graph)}));let m;if(s.subject.termType==="Variable"&&s.object.termType==="Variable"){const E=this.generateVariable(f,s),j=(0,r.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:l,operation:d.createFilter(this.assignPatternSources(d,d.createPattern(s.subject,E,s.object,s.graph),y),d.createOperatorExpression("=",[d.createTermExpression(s.subject),d.createTermExpression(s.object)]))})).bindingsStream.map(X=>X.delete(E));m=new e.UnionIterator([j,T.bindingsStream],{autoStart:!1})}else s.subject.termType==="Variable"&&b.push(h.bindings([[s.subject,s.object]])),s.object.termType==="Variable"&&b.push(h.bindings([[s.object,s.subject]])),m=T.bindingsStream.prepend(b);return{type:"bindings",bindingsStream:m,metadata:async()=>{const E=await T.metadata();return{...E,cardinality:{...E.cardinality,value:E.cardinality.value+1}}}}}};return eg.ActorQueryOperationPathZeroOrOne=u,eg}var tI;function FJ(){return tI||(tI=1,(function(n){var t=is&&is.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=is&&is.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(AJ(),n)})(is)),is}var as={},tg={},rI;function EJ(){if(rI)return tg;rI=1,Object.defineProperty(tg,"__esModule",{value:!0}),tg.ActorQueryOperationUpdateDeleteInsert=void 0;const n=l5(),t=gt(),o=Be(),i=Dt(),r=ke(),e=ft();let a=class extends t.ActorQueryOperationTypedMediated{constructor(c){super(c,"deleteinsert"),this.blankNodeCounter=0}async testOperation(c,s){return(0,r.testReadOnly)(s)}async runOperation(c,s){const l=s.getSafe(o.KeysInitQuery.dataFactory),f=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,s,l),d=c.where?(0,r.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:c.where,context:s})).bindingsStream:new e.ArrayIterator([f.bindings()],{autoStart:!1});let h,p;c.insert&&(h=new n.BindingsToQuadsIterator(l,c.insert.map(n.BindingsToQuadsIterator.localizeQuad.bind(null,l,this.blankNodeCounter)),d.clone()),this.blankNodeCounter++),c.delete&&(p=new n.BindingsToQuadsIterator(l,c.delete.map(n.BindingsToQuadsIterator.localizeQuad.bind(null,l,this.blankNodeCounter)),d.clone()),this.blankNodeCounter++);const{execute:y}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:h,quadStreamDelete:p,context:s});return{type:"void",execute:y}}};return tg.ActorQueryOperationUpdateDeleteInsert=a,tg}var nI;function RJ(){return nI||(nI=1,(function(n){var t=as&&as.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=as&&as.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(EJ(),n)})(as)),as}var os={},rg={},iI;function jJ(){if(iI)return rg;iI=1,Object.defineProperty(rg,"__esModule",{value:!0}),rg.ActorRdfJoinNone=void 0;const n=fr(),t=Be(),o=Ae(),i=Dt(),r=br(),e=ft();let a=class extends n.ActorRdfJoin{constructor(c){super(c,{logicalType:"inner",physicalName:"none",limitEntries:0})}async test(c){return c.entries.length>0?(0,o.failTest)(`Actor ${this.name} can only join zero entries`):await this.getJoinCoefficients(c,void 0)}async getOutput(c){const s=c.context.getSafe(t.KeysInitQuery.dataFactory),l=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,c.context,s);return{result:{bindingsStream:new e.ArrayIterator([l.bindings()],{autoStart:!1}),metadata:()=>Promise.resolve({state:new r.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]}),type:"bindings"}}}async getJoinCoefficients(c,s){return(0,o.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},s)}};return rg.ActorRdfJoinNone=a,rg}var aI;function DJ(){return aI||(aI=1,(function(n){var t=os&&os.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=os&&os.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(jJ(),n)})(os)),os}var us={},ng={},ss={},ig={},oI;function PJ(){if(oI)return ig;oI=1,Object.defineProperty(ig,"__esModule",{value:!0}),ig.ActorRdfJoinMultiBind=void 0;const n=fr(),t=Be(),o=Ae(),i=Dt(),r=ke(),e=ft(),a=We();let u=class O5 extends n.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:"bind",canHandleUndefs:!0,isLeaf:!1})}static createBindStream(s,l,f,d,h,p,y){const b=s==="depth-first",_=T=>{const m=f.map(E=>(0,r.materializeOperation)(E,T,p,y,{bindFilter:!0})),A=E=>E.merge(T);return new e.TransformIterator(async()=>(await d(m,T)).transform({map:A}),{maxBufferSize:128,autoStart:b})};switch(s){case"depth-first":return new e.MultiTransformIterator(l,{autoStart:!1,multiTransform:_,optional:h});case"breadth-first":return new e.UnionIterator(l.transform({map:_,optional:h}),{autoStart:!1});default:throw new Error(`Received request for unknown bind order: ${s}`)}}async getOutput(s,l){const f=s.context.getSafe(t.KeysInitQuery.dataFactory),d=new a.Factory(f),h=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,f),p=l.entriesSorted;this.logDebug(s.context,"First entry for Bind Join: ",()=>({entry:p[0].operation,cardinality:p[0].metadata.cardinality,order:p[0].metadata.order,availableOrders:p[0].metadata.availableOrders}));for(const[m,A]of p.entries())m!==0&&A.output.bindingsStream.close();const y=p[0].output,b=[...p];b.splice(0,1);const _=s.context.set(t.KeysQueryOperation.joinLeftMetadata,p[0].metadata).set(t.KeysQueryOperation.joinRightMetadatas,b.map(m=>m.metadata));return{result:{type:"bindings",bindingsStream:O5.createBindStream(this.bindOrder,y.bindingsStream,b.map(m=>m.operation),async(m,A)=>{const E=m.length===1?m[0]:d.createJoin(m,m.every(X=>!X.metadata));return(0,r.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:E,context:_?.set(t.KeysQueryOperation.joinBindings,A)})).bindingsStream},!1,d,h),metadata:()=>this.constructResultMetadata(p,p.map(m=>m.metadata),s.context)},physicalPlanMetadata:{bindIndex:l.entriesUnsorted.indexOf(p[0]),bindOperation:p[0].operation,bindOperationCardinality:p[0].metadata.cardinality,bindOrder:this.bindOrder}}}canBindWithOperation(s){let l=!0;return a.Util.recurseOperation(s,{[a.Algebra.types.EXTEND](){return l=!1,!1},[a.Algebra.types.GROUP](){return l=!1,!1}}),l}async getJoinCoefficients(s,l){let{metadatas:f}=l;const d=s.entries.map((O,S)=>({...O,metadata:f[S]})),h=await n.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,d,s.context);if(h.isFailed())return h;const p=h.get();f=p.map(O=>O.metadata);const y=n.ActorRdfJoin.getRequestInitialTimes(f),b=n.ActorRdfJoin.getRequestItemTimes(f),_=[...p],T=[...y],m=[...b];if(_.splice(0,1),T.splice(0,1),m.splice(0,1),_.some(O=>!this.canBindWithOperation(O.operation)))return(0,o.failTest)(`Actor ${this.name} can not bind on Extend and Group operations`);if(_.some(O=>O.operationModified))return(0,o.failTest)(`Actor ${this.name} can not be used over remaining entries with modified operations`);const A=b.some(O=>O>0);if(f[0].cardinality.value*this.minMaxCardinalityRatio/(A?1:3)>Math.max(...f.map(O=>O.cardinality.value)))return(0,o.failTest)(`Actor ${this.name} can only run if the smallest stream is much smaller than largest stream`);const E=await Promise.all(_.map(async O=>(await this.mediatorJoinSelectivity.mediate({entries:[p[0],O],context:s.context})).selectivity*this.selectivityModifier)),j=_.map((O,S)=>O.metadata.cardinality.value*E[S]).reduce((O,S)=>O+S,0),X=T.reduce((O,S)=>O+S,0),K=m.reduce((O,S)=>O+S,0);return(0,o.passTestWithSideData)({iterations:f[0].cardinality.value*j,persistedItems:0,blockingItems:0,requestTime:y[0]+f[0].cardinality.value*(b[0]+X+j*K)},{...l,entriesUnsorted:d,entriesSorted:p})}};return ig.ActorRdfJoinMultiBind=u,ig}var uI;function S5(){return uI||(uI=1,(function(n){var t=ss&&ss.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ss&&ss.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(PJ(),n)})(ss)),ss}var sI;function NJ(){if(sI)return ng;sI=1,Object.defineProperty(ng,"__esModule",{value:!0}),ng.ActorRdfJoinOptionalBind=void 0;const n=S5(),t=fr(),o=Be(),i=Ae(),r=Dt(),e=ke(),a=We();let u=class extends t.ActorRdfJoin{constructor(s){super(s,{logicalType:"optional",physicalName:"bind",limitEntries:2,canHandleUndefs:!0,isLeaf:!1,requiresVariableOverlap:!0,canHandleOperationRequired:!0})}async getOutput(s){const l=s.context.getSafe(o.KeysInitQuery.dataFactory),f=new a.Factory(l),d=await r.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,l);s.entries[1].output.bindingsStream.close();const h=s.context.set(o.KeysQueryOperation.joinLeftMetadata,await s.entries[0].output.metadata()).set(o.KeysQueryOperation.joinRightMetadatas,[await s.entries[1].output.metadata()]);return{result:{type:"bindings",bindingsStream:n.ActorRdfJoinMultiBind.createBindStream(this.bindOrder,s.entries[0].output.bindingsStream,[s.entries[1].operation],async(y,b)=>{const _=y[0];return(0,e.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:_,context:h?.set(o.KeysQueryOperation.joinBindings,b)})).bindingsStream},!0,f,d),metadata:async()=>await this.constructResultMetadata(s.entries,await t.ActorRdfJoin.getMetadatas(s.entries),s.context,{},!0)}}}async getJoinCoefficients(s,l){const{metadatas:f}=l,d=t.ActorRdfJoin.getRequestInitialTimes(f),h=t.ActorRdfJoin.getRequestItemTimes(f);if(s.entries[1].operation.type===a.Algebra.types.EXTEND||s.entries[1].operation.type===a.Algebra.types.GROUP)return(0,i.failTest)(`Actor ${this.name} can not bind on Extend and Group operations`);const p=(await this.mediatorJoinSelectivity.mediate({entries:s.entries,context:s.context})).selectivity*this.selectivityModifier;return(0,i.passTestWithSideData)({iterations:f[0].cardinality.value*f[1].cardinality.value*p,persistedItems:0,blockingItems:0,requestTime:d[0]+f[0].cardinality.value*(h[0]+d[1]+p*f[1].cardinality.value*h[1])},l)}};return ng.ActorRdfJoinOptionalBind=u,ng}var cI;function MJ(){return cI||(cI=1,(function(n){var t=us&&us.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=us&&us.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(NJ(),n)})(us)),us}var cs={},ag={},ls={},og={},lI;function IJ(){if(lI)return og;lI=1,Object.defineProperty(og,"__esModule",{value:!0}),og.ActorQueryProcess=void 0;const n=Ae();let t=class extends n.Actor{constructor(i){super(i)}};return og.ActorQueryProcess=t,og}var fI;function LJ(){return fI||(fI=1,(function(n){var t=ls&&ls.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ls&&ls.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(IJ(),n)})(ls)),ls}var dI;function xJ(){if(dI)return ag;dI=1,Object.defineProperty(ag,"__esModule",{value:!0}),ag.ActorQueryProcessSequential=void 0;const n=LJ(),t=Be(),o=Ae(),i=Dt(),r=ke(),e=We();let a=class extends n.ActorQueryProcess{constructor(c){super(c)}async test(c){return c.context.get(t.KeysInitQuery.explain)??c.context.get(new o.ActionContextKey("explain"))?(0,o.failTest)(`${this.name} is not able to explain queries.`):(0,o.passTestVoid)()}async run(c){let{operation:s,context:l}=await this.parse(c.query,c.context);return{operation:s,context:l}=await this.optimize(s,l),{result:await this.evaluate(s,l)}}async parse(c,s){s=(await this.mediatorContextPreprocess.mediate({context:s,initialize:!0})).context;let l;if(typeof c=="string"){s=s.set(t.KeysInitQuery.queryString,c);const f=s.get(t.KeysInitQuery.baseIRI),d=s.get(t.KeysInitQuery.queryFormat),h=await this.mediatorQueryParse.mediate({context:s,query:c,queryFormat:d,baseIRI:f});l=h.operation,h.baseIRI&&(s=s.set(t.KeysInitQuery.baseIRI,h.baseIRI))}else l=c;if(s.has(t.KeysInitQuery.initialBindings)){const f=s.getSafe(t.KeysInitQuery.dataFactory),d=new e.Factory(f),h=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,s,f);l=(0,r.materializeOperation)(l,s.get(t.KeysInitQuery.initialBindings),d,h,{strictTargetVariables:!0}),s=s.delete(t.KeysInitQuery.queryString)}return{operation:l,context:s}}async optimize(c,s){return s=s.set(t.KeysInitQuery.query,c),{operation:c,context:s}=await this.mediatorOptimizeQueryOperation.mediate({context:s,operation:c}),s=s.set(t.KeysInitQuery.query,c),{operation:c,context:s}}async evaluate(c,s){const l=await this.mediatorQueryOperation.mediate({context:s,operation:c});return l.context=s,l}};return ag.ActorQueryProcessSequential=a,ag}var pI;function qJ(){return pI||(pI=1,(function(n){var t=cs&&cs.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=cs&&cs.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(xJ(),n)})(cs)),cs}var fs={},ug={},ds={},sg={},hI;function BJ(){if(hI)return sg;hI=1,Object.defineProperty(sg,"__esModule",{value:!0}),sg.ActorQuerySourceIdentify=void 0;const n=Ae();let t=class extends n.Actor{constructor(i){super(i)}};return sg.ActorQuerySourceIdentify=t,sg}var Vt={},yI;function CJ(){if(yI)return Vt;yI=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.filterMatchingQuotedQuads=Vt.quadsOrderToBindingsOrder=Vt.quadsMetadataToBindingsMetadata=Vt.setMetadata=Vt.getDuplicateElementLinks=Vt.getVariables=Vt.isTermVariable=Vt.quadsToBindings=void 0;const n=xs(),t=br(),o=mr(),i=Gn(),r=Sq();function e(h,p,y,b,_){const T=u(p),m=p.graph.termType==="Variable"&&!_,A=c(p),E=(0,i.reduceTermsNested)(p,(K,O,S)=>(O.termType==="Variable"&&(K[S.join("_")]=O.value),K),{});let j=h;m&&(j=j.filter(K=>K.graph.termType!=="DefaultGraph")),A&&(j=j.filter(K=>{for(const O in A){const S=O.split("_"),L=(0,i.getValueNestedPath)(K,S);for(const N of A[O])if(!L.equals((0,i.getValueNestedPath)(K,N)))return!1}return!0}));const X=new n.ClosableIterator(j.map(K=>b.bindings(Object.keys(E).map(O=>{const S=O.split("_"),L=E[O],N=(0,i.getValueNestedPath)(K,S);return[y.variable(L),N]}))),{onClose:()=>h.destroy()});return s(y,X,h,E,T,m||!!A),X}Vt.quadsToBindings=e;function a(h){return h.termType==="Variable"}Vt.isTermVariable=a;function u(h){return(0,i.uniqTerms)((0,i.getTermsNested)(h).filter(a))}Vt.getVariables=u;function c(h){const p={};let y=!1;if((0,i.forEachTermsNested)(h,(_,T)=>{if(_.termType==="Variable"){const m=(0,o.termToString)(_),A=(p[m]||(p[m]=[])).push(T);y=y||A>1}}),!y)return;const b={};for(const _ in p){const T=p[_],m=T.slice(1);m.length>0&&(b[T[0].join("_")]=m)}return b}Vt.getDuplicateElementLinks=c;function s(h,p,y,b,_,T){const m=E=>{T&&(E.cardinality.type="estimate"),p.setProperty("metadata",l(h,(0,t.validateMetadataQuads)(E),b,_)),E.state&&E.state.addInvalidateListener(()=>{s(h,p,y,b,_,T)})},A=y.getProperty("metadata");A?m(A):y.getProperty("metadata",m)}Vt.setMetadata=s;function l(h,p,y,b){return{...p,order:p.order?f(h,p.order,y):void 0,availableOrders:p.availableOrders?p.availableOrders.map(_=>({cost:_.cost,terms:f(h,_.terms,y)})):void 0,variables:b.map(_=>({variable:_,canBeUndef:!1}))}}Vt.quadsMetadataToBindingsMetadata=l;function f(h,p,y){const b={};return p.map(_=>{const T=y[_.term];if(T&&!b[T])return b[T]=!0,{term:h.variable(T),direction:_.direction}}).filter(Boolean)}Vt.quadsOrderToBindingsOrder=f;function d(h,p){return(0,i.someTerms)(h,y=>y.termType==="Quad")&&(p=p.filter(y=>(0,r.matchPatternMappings)(y,h))),p}return Vt.filterMatchingQuotedQuads=d,Vt}var _I;function w5(){return _I||(_I=1,(function(n){var t=ds&&ds.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ds&&ds.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(BJ(),n),o(CJ(),n)})(ds)),ds}var cg={},gI;function A5(){if(gI)return cg;gI=1,Object.defineProperty(cg,"__esModule",{value:!0}),cg.QuerySourceRdfJs=void 0;const n=w5(),t=Be(),o=br(),i=ft(),r=Gn(),e=We();let a=class pr{constructor(c,s,l){this.source=c,this.referenceValue=c,this.dataFactory=s,this.bindingsFactory=l;const f=new e.Factory(this.dataFactory);this.selectorShape={type:"operation",operation:{operationType:"pattern",pattern:f.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"))},variablesOptional:[this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o")]},this.dummyDefaultGraph=this.dataFactory.variable("__comunica:defaultGraph")}static nullifyVariables(c,s){return!c||c.termType==="Variable"||!s&&c.termType==="Quad"&&(0,r.someTermsNested)(c,l=>l.termType==="Variable")?void 0:c}static hasDuplicateVariables(c){const s=(0,r.filterTermsNested)(c,l=>l.termType==="Variable");return s.length>1&&(0,r.uniqTerms)(s).length<s.length}async getSelectorShape(){return this.selectorShape}queryBindings(c,s){if(c.type!=="pattern")throw new Error(`Attempted to pass non-pattern operation '${c.type}' to QuerySourceRdfJs`);const l=!!s.get(t.KeysQueryOperation.unionDefaultGraph);if(c.graph.termType==="DefaultGraph"&&l&&(c.graph=this.dummyDefaultGraph),"matchBindings"in this.source&&this.source.matchBindings){const p=this.source.matchBindings(this.bindingsFactory,c.subject,c.predicate,c.object,c.graph);let y=p instanceof i.AsyncIterator?p:(0,i.wrap)(p,{autoStart:!1}),b=!1;if(c.graph.termType==="Variable"&&!l){b=!0;const T=c.graph;y=y.filter(m=>m.get(T).termType!=="DefaultGraph")}c.graph.equals(this.dummyDefaultGraph)&&(y=y.map(T=>T.delete(this.dummyDefaultGraph)),c.graph=this.dataFactory.defaultGraph());const _=(0,n.getVariables)(c).map(T=>({variable:T,canBeUndef:!1}));return this.setMetadata(y,c,s,b,{variables:_}).catch(T=>y.destroy(T)),y}const f=!!("features"in this.source&&this.source.features?.quotedTripleFiltering),d=this.source.match(pr.nullifyVariables(c.subject,f),pr.nullifyVariables(c.predicate,f),pr.nullifyVariables(c.object,f),pr.nullifyVariables(c.graph,f));let h=d instanceof i.AsyncIterator?d:(0,i.wrap)(d,{autoStart:!1});return f||(h=(0,n.filterMatchingQuotedQuads)(c,h)),h.getProperty("metadata")||this.setMetadata(h,c,s).catch(p=>h.destroy(p)),c.graph.equals(this.dummyDefaultGraph)&&(c.graph=this.dataFactory.defaultGraph()),(0,n.quadsToBindings)(h,c,this.dataFactory,this.bindingsFactory,!!s.get(t.KeysQueryOperation.unionDefaultGraph))}async setMetadata(c,s,l,f=!1,d={}){const h=!!("features"in this.source&&this.source.features?.quotedTripleFiltering),p=!!l.get(t.KeysQueryOperation.unionDefaultGraph);s.graph.termType==="DefaultGraph"&&p&&(s.graph=this.dummyDefaultGraph);let y;if("countQuads"in this.source&&this.source.countQuads)y=await this.source.countQuads(pr.nullifyVariables(s.subject,h),pr.nullifyVariables(s.predicate,h),pr.nullifyVariables(s.object,h),pr.nullifyVariables(s.graph,h));else{let _=0;y=await new Promise((T,m)=>{let A=this.source.match(pr.nullifyVariables(s.subject,h),pr.nullifyVariables(s.predicate,h),pr.nullifyVariables(s.object,h),pr.nullifyVariables(s.graph,h));typeof A.on!="function"&&(A=new i.ArrayIterator(A)),A.on("error",m),A.on("end",()=>T(_)),A.on("data",()=>_++)})}const b=!h&&(0,r.someTerms)(s,_=>_.termType==="Quad")||pr.hasDuplicateVariables(s);c.setProperty("metadata",{state:new o.MetadataValidationState,cardinality:{type:b||f?"estimate":"exact",value:y},requestTime:0,...d})}queryQuads(c,s){throw new Error("queryQuads is not implemented in QuerySourceRdfJs")}queryBoolean(c,s){throw new Error("queryBoolean is not implemented in QuerySourceRdfJs")}queryVoid(c,s){throw new Error("queryVoid is not implemented in QuerySourceRdfJs")}toString(){return`QuerySourceRdfJs(${this.source.constructor.name})`}};return cg.QuerySourceRdfJs=a,cg}var mI;function QJ(){if(mI)return ug;mI=1,Object.defineProperty(ug,"__esModule",{value:!0}),ug.ActorQuerySourceIdentifyRdfJs=void 0;const n=w5(),t=Be(),o=Ae(),i=Dt(),r=A5();let e=class extends n.ActorQuerySourceIdentify{constructor(u){super(u)}async test(u){const c=u.querySourceUnidentified;return c.type!==void 0&&c.type!=="rdfjs"?(0,o.failTest)(`${this.name} requires a single query source with rdfjs type to be present in the context.`):typeof c.value=="string"||!("match"in c.value)?(0,o.failTest)(`${this.name} received an invalid rdfjs query source.`):(0,o.passTestVoid)()}async run(u){const c=u.context.getSafe(t.KeysInitQuery.dataFactory);return{querySource:{source:new r.QuerySourceRdfJs(u.querySourceUnidentified.value,c,await i.BindingsFactory.create(this.mediatorMergeBindingsContext,u.context,c)),context:u.querySourceUnidentified.context??new o.ActionContext}}}};return ug.ActorQuerySourceIdentifyRdfJs=e,ug}var V1={},bI;function UJ(){return bI||(bI=1,Object.defineProperty(V1,"__esModule",{value:!0})),V1}var vI;function VJ(){return vI||(vI=1,(function(n){var t=fs&&fs.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=fs&&fs.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(QJ(),n),o(UJ(),n),o(A5(),n)})(fs)),fs}var ps={},lg={},hs={},fg={},TI;function GJ(){if(TI)return fg;TI=1,Object.defineProperty(fg,"__esModule",{value:!0}),fg.ActorTermComparatorFactory=void 0;const n=Ae();let t=class extends n.Actor{constructor(i){super(i),this.mediatorQueryOperation=i.mediatorQueryOperation,this.mediatorFunctionFactory=i.mediatorFunctionFactory,this.mediatorMergeBindingsContext=i.mediatorMergeBindingsContext}};return fg.ActorTermComparatorFactory=t,fg}var OI;function XJ(){return OI||(OI=1,(function(n){var t=hs&&hs.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=hs&&hs.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(GJ(),n)})(hs)),hs}var dg={},SI;function zJ(){if(SI)return dg;SI=1,Object.defineProperty(dg,"__esModule",{value:!0}),dg.TermComparatorExpressionEvaluator=void 0;let n=class{constructor(o,i,r){this.internalEvaluator=o,this.equalityFunction=i,this.lessThanFunction=r,this._TERM_ORDERING_PRIORITY={Variable:0,BlankNode:1,NamedNode:2,Literal:3,Quad:4,DefaultGraph:5}}orderTypes(o,i){if(o===i)return 0;if(o===void 0)return-1;if(i===void 0)return 1;if(o.termType!==i.termType)return this._TERM_ORDERING_PRIORITY[o.termType]<this._TERM_ORDERING_PRIORITY[i.termType]?-1:1;if(o.equals(i))return 0;if(o.termType==="Quad"&&i.termType==="Quad"){const r=this.orderTypes(o.subject,i.subject);if(r!==0)return r;const e=this.orderTypes(o.predicate,i.predicate);if(e!==0)return e;const a=this.orderTypes(o.object,i.object);return a!==0?a:this.orderTypes(o.graph,i.graph)}return o.termType==="Literal"?this.orderLiteralTypes(o,i):this.comparePrimitives(o.value,i.value)}orderLiteralTypes(o,i){const r=this.internalEvaluator.transformer.transformLiteral(o),e=this.internalEvaluator.transformer.transformLiteral(i);try{return this.equalityFunction.applyOnTerms([r,e],this.internalEvaluator).typedValue?0:this.lessThanFunction.applyOnTerms([r,e],this.internalEvaluator).typedValue?-1:1}catch{const a=this.comparePrimitives(r.dataType,e.dataType);return a!==0?a:this.comparePrimitives(r.str(),e.str())}}comparePrimitives(o,i){return o===i?0:o<i?-1:1}};return dg.TermComparatorExpressionEvaluator=n,dg}var wI;function $J(){if(wI)return lg;wI=1,Object.defineProperty(lg,"__esModule",{value:!0}),lg.ActorTermComparatorFactoryExpressionEvaluator=void 0;const n=T5(),t=XJ(),o=Be(),i=Ae(),r=Dt(),e=ye(),a=zJ();let u=class extends t.ActorTermComparatorFactory{async test(s){return(0,i.passTestVoid)()}async run({context:s}){return s=e.prepareEvaluatorActionContext(s),new a.TermComparatorExpressionEvaluator(new n.InternalEvaluator(s,this.mediatorFunctionFactory,this.mediatorQueryOperation,await r.BindingsFactory.create(this.mediatorMergeBindingsContext,s,s.getSafe(o.KeysInitQuery.dataFactory))),await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.EQUAL,context:s,requireTermExpression:!0}),await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.LT,context:s,requireTermExpression:!0}))}};return lg.ActorTermComparatorFactoryExpressionEvaluator=u,lg}var AI;function HJ(){return AI||(AI=1,(function(n){var t=ps&&ps.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ps&&ps.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o($J(),n)})(ps)),ps}var ys={},pg={},FI;function JJ(){if(FI)return pg;FI=1,Object.defineProperty(pg,"__esModule",{value:!0}),pg.ActorRdfJoinMultiSmallestFilterBindings=void 0;const n=fr(),t=Be(),o=Ae(),i=Dt(),r=xs(),e=ke(),a=ft(),u=We();let c=class extends n.ActorRdfJoin{constructor(l){super(l,{logicalType:"inner",physicalName:"multi-smallest-filter-bindings",limitEntries:2,limitEntriesMin:!0,isLeaf:!1})}async sortJoinEntries(l,f){let{entries:d}=await this.mediatorJoinEntriesSort.mediate({entries:l,context:f});d=d.sort((T,m)=>T.operationModified&&!m.operationModified?-1:0);const h=d.splice(0,1)[0];let p,y=-1,b=0;for(const[T,m]of d.entries()){const A=h.metadata.variables.filter(E=>m.metadata.variables.some(j=>E.variable.equals(j.variable))).length;(!p||A>b||A===b&&(m.metadata.variables.length<p.metadata.variables.length||m.metadata.variables.length===p.metadata.variables.length&&m.metadata.cardinality.value<p.metadata.cardinality.value))&&(p=m,y=T,b=A)}if(b===0)return(0,o.failTest)(`Actor ${this.name} can only join with common variables`);const _=d;return _.splice(y,1),(0,o.passTest)({first:h,second:p,remaining:_})}async getOutput(l){const f=l.context.getSafe(t.KeysInitQuery.dataFactory),d=new u.Factory(f),h=await n.ActorRdfJoin.getEntriesWithMetadatas([...l.entries]),{first:p,second:y,remaining:b}=(await this.sortJoinEntries(h,l.context)).getOrThrow(),_=p.output.bindingsStream;p.output.bindingsStream=_.clone();const T=p.metadata.variables.filter(L=>y.metadata.variables.some(N=>L.variable.equals(N.variable))),m={},A=_.clone().map(L=>L.filter((N,I)=>T.some(V=>V.variable.equals(I)))).filter(L=>{const N=(0,i.bindingsToString)(L);return!(N in m)&&(m[N]=!0)}),E=new r.ChunkedIterator(A,this.blockSize,{autoStart:!1}),j=(0,e.getOperationSource)(y.operation),K={output:{type:"bindings",bindingsStream:new a.UnionIterator(E.map(L=>j.source.queryBindings(y.operation,j.context?l.context.merge(j.context):l.context,{filterBindings:{bindings:L,metadata:p.metadata}}))),metadata:y.output.metadata},operation:y.operation,operationModified:!0};y.output.bindingsStream.destroy();const O={output:(0,e.getSafeBindings)(await this.mediatorJoin.mediate({type:l.type,entries:[p,K],context:l.context.set(t.KeysRdfJoin.lastPhysicalJoin,this.physicalName)})),operation:d.createJoin([p.operation,K.operation],!1),operationModified:!0},S=b;return S.unshift(O),{result:await this.mediatorJoin.mediate({type:l.type,entries:S,context:l.context}),physicalPlanMetadata:{firstIndex:h.indexOf(p),secondIndex:h.indexOf(y)}}}async getJoinCoefficients(l,f){let{metadatas:d}=f;if(l.context.get(t.KeysRdfJoin.lastPhysicalJoin)===this.physicalName)return(0,o.failTest)(`Actor ${this.name} can not be called recursively`);d=[...d];const h=await this.sortJoinEntries(l.entries.map((O,S)=>({...O,metadata:d[S]})),l.context);if(h.isFailed())return h;const{first:p,second:y,remaining:b}=h.get(),_=(0,e.getOperationSource)(y.operation);if(!_)return(0,o.failTest)(`Actor ${this.name} can only process if entries[1] has a source`);const T=y.operation,m=await _.source.getSelectorShape(l.context),A=l.context.get(t.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(!(0,e.doesShapeAcceptOperation)(m,T,{filterBindings:!0,wildcardAcceptAllExtensionFunctions:A}))return(0,o.failTest)(`Actor ${this.name} can only process if entries[1] accept filterBindings`);d=[p.metadata,y.metadata,...b.map(O=>O.metadata)];const E=n.ActorRdfJoin.getRequestInitialTimes(d),j=n.ActorRdfJoin.getRequestItemTimes(d),{selectivity:X}=await this.mediatorJoinSelectivity.mediate({entries:[p,y],context:l.context}),K=b.reduce((O,S)=>O*S.metadata.cardinality.value*this.selectivityModifier,1);return(0,o.passTestWithSideData)({iterations:X*this.selectivityModifier*y.metadata.cardinality.value*K,persistedItems:p.metadata.cardinality.value,blockingItems:p.metadata.cardinality.value,requestTime:E[0]+d[0].cardinality.value*j[0]+E[1]+K*j[1]},f)}};return pg.ActorRdfJoinMultiSmallestFilterBindings=c,pg}var EI;function KJ(){return EI||(EI=1,(function(n){var t=ys&&ys.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ys&&ys.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(JJ(),n)})(ys)),ys}var _s={},hg={},RI;function WJ(){if(RI)return hg;RI=1,Object.defineProperty(hg,"__esModule",{value:!0}),hg.ActorOptimizeQueryOperationPruneEmptySourceOperations=void 0;const n=jr(),t=Be(),o=Ae(),i=ke(),r=We();let e=class Ng extends n.ActorOptimizeQueryOperation{constructor(u){super(u)}async test(u){return(0,i.getOperationSource)(u.operation)?(0,o.failTest)(`Actor ${this.name} does not work with top-level operation sources.`):(0,o.passTestVoid)()}async run(u){const c=u.context.getSafe(t.KeysInitQuery.dataFactory),s=new r.Factory(c);let l=u.operation;const f=[],d=this;r.Util.recurseOperation(l,{[r.Algebra.types.UNION](p){return d.collectMultiOperationInputs(p.input,f,r.Algebra.types.PATTERN),!0},[r.Algebra.types.ALT](p){return d.collectMultiOperationInputs(p.input,f,r.Algebra.types.LINK),!1},[r.Algebra.types.SERVICE](){return!1}});const h=new Set;return await Promise.all(f.map(async p=>{const y=p.type==="link"?s.createPattern(c.variable("s"),p.iri,c.variable("o")):p;await this.hasSourceResults(s,(0,i.getOperationSource)(p),y,u.context)||h.add(p)})),h.size>0&&(this.logDebug(u.context,`Pruning ${h.size} source-specific operations`),l=r.Util.mapOperation(l,{[r.Algebra.types.UNION](p,y){return d.mapMultiOperation(p,h,b=>y.createUnion(b))},[r.Algebra.types.ALT](p,y){return d.mapMultiOperation(p,h,b=>y.createAlt(b))}},s),l=r.Util.mapOperation(l,{[r.Algebra.types.PROJECT](p,y){return Ng.hasEmptyOperation(p)?{recurse:!1,result:y.createUnion([])}:{recurse:!0,result:p}},[r.Algebra.types.LEFT_JOIN](p){return Ng.hasEmptyOperation(p.input[1])?{recurse:!0,result:p.input[0]}:{recurse:!0,result:p}}},s)),{operation:l,context:u.context}}static hasEmptyOperation(u){let c=!1;return r.Util.recurseOperation(u,{[r.Algebra.types.UNION](s){return s.input.every(l=>Ng.hasEmptyOperation(l))&&(c=!0),!1},[r.Algebra.types.ALT](s){return s.input.length===0&&(c=!0),!1},[r.Algebra.types.LEFT_JOIN](s){return Ng.hasEmptyOperation(s.input[0])&&(c=!0),!1}}),c}collectMultiOperationInputs(u,c,s){for(const l of u)(0,i.getOperationSource)(l)&&l.type===s&&c.push(l)}mapMultiOperation(u,c,s){const l=u.input.filter(f=>!c.has(f));return l.length===u.input.length?{result:u,recurse:!0}:l.length===0?{result:s([]),recurse:!1}:l.length===1?{result:l[0],recurse:!0}:{result:s(l),recurse:!0}}async hasSourceResults(u,c,s,l){const f=c.context?l.merge(c.context):l,d=f.get(t.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(f.get(t.KeysQuerySourceIdentify.traverse))return!0;if(this.useAskIfSupported){const y=u.createAsk(s);if((0,i.doesShapeAcceptOperation)(await c.source.getSelectorShape(l),y,{wildcardAcceptAllExtensionFunctions:d}))return c.source.queryBoolean(y,f)}const h=c.source.queryBindings(s,f),p=await new Promise((y,b)=>{h.on("error",b),h.getProperty("metadata",_=>{h.destroy(),y(_.cardinality)})});if(p.type==="estimate"&&p.value>0){const y=u.createAsk(s);if((0,i.doesShapeAcceptOperation)(await c.source.getSelectorShape(l),y,{wildcardAcceptAllExtensionFunctions:d}))return c.source.queryBoolean(y,f)}return p.value>0}};return hg.ActorOptimizeQueryOperationPruneEmptySourceOperations=e,hg}var jI;function YJ(){return jI||(jI=1,(function(n){var t=_s&&_s.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=_s&&_s.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(WJ(),n)})(_s)),_s}var gs={},yg={},DI;function ZJ(){if(DI)return yg;DI=1,Object.defineProperty(yg,"__esModule",{value:!0}),yg.ActorOptimizeQueryOperationLeftjoinExpressionPushdown=void 0;const n=jr(),t=Be(),o=Ae(),i=ke(),r=We();let e=class extends n.ActorOptimizeQueryOperation{constructor(u){super(u)}async test(u){return(0,o.passTestVoid)()}async run(u){const c=u.context.getSafe(t.KeysInitQuery.dataFactory),s=new r.Factory(c);let l=u.operation;const f=this;return l=r.Util.mapOperation(l,{leftjoin(d,h){if(d.expression){const p=(0,i.getExpressionVariables)(d.expression),y=r.Util.inScopeVariables(d.input[0]),b=r.Util.inScopeVariables(d.input[1]),_=f.variablesIntersect(p,y),T=f.variablesIntersect(p,b);if(_&&!T)return f.logDebug(u.context,"Pushed down optional expression to left-hand operator"),{recurse:!0,result:h.createLeftJoin(h.createFilter(d.input[0],d.expression),d.input[1])};if(!_&&T)return f.logDebug(u.context,"Pushed down optional expression to right-hand operator"),{recurse:!0,result:h.createLeftJoin(d.input[0],h.createFilter(d.input[1],d.expression))}}return{recurse:!0,result:d}}},s),{operation:l,context:u.context}}variablesIntersect(u,c){return u.some(s=>c.some(l=>s.equals(l)))}};return yg.ActorOptimizeQueryOperationLeftjoinExpressionPushdown=e,yg}var PI;function kJ(){return PI||(PI=1,(function(n){var t=gs&&gs.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=gs&&gs.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(ZJ(),n)})(gs)),gs}var ms={},_g={},NI;function eK(){if(NI)return _g;NI=1,Object.defineProperty(_g,"__esModule",{value:!0}),_g.ActorRdfJoinMultiBindSource=void 0;const n=fr(),t=Be(),o=Ae(),i=xs(),r=ke(),e=ft(),a=We();let u=class extends n.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:"bind-source",canHandleUndefs:!0})}async getOutput(s,l){const f=s.context.getSafe(t.KeysInitQuery.dataFactory),d=new a.Factory(f),h=l.entriesSorted;this.logDebug(s.context,"First entry for Bind Join Source: ",()=>({entry:h[0].operation,cardinality:h[0].metadata.cardinality,order:h[0].metadata.order,availableOrders:h[0].metadata.availableOrders}));for(const[E,j]of h.entries())E!==0&&j.output.bindingsStream.close();const p=h[0].output,y=h[0].metadata,b=[...h];b.splice(0,1);const _=(0,r.getOperationSource)(b[0].operation),T=this.createOperationFromEntries(d,b),m=new i.ChunkedIterator(p.bindingsStream,this.blockSize,{autoStart:!1});return{result:{type:"bindings",bindingsStream:new e.UnionIterator(m.map(E=>_.source.queryBindings(T,_.context?s.context.merge(_.context):s.context,{joinBindings:{bindings:E,metadata:y}}))),metadata:()=>this.constructResultMetadata(h,h.map(E=>E.metadata),s.context)},physicalPlanMetadata:{bindIndex:l.entriesUnsorted.indexOf(h[0])}}}async sortJoinEntries(s,l){const f=await n.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,s,l);return f.isFailed()?f:(s=f.get(),s=s.sort((d,h)=>d.operationModified&&!h.operationModified?-1:0),(0,o.passTest)(s))}async getJoinCoefficients(s,l){let{metadatas:f}=l;const d=s.context.getSafe(t.KeysInitQuery.dataFactory),h=new a.Factory(d),p=s.entries.map((L,N)=>({...L,metadata:f[N]})),y=await this.sortJoinEntries(p,s.context);if(y.isFailed())return y;const b=y.get();f=b.map(L=>L.metadata);const _=n.ActorRdfJoin.getRequestInitialTimes(f),T=n.ActorRdfJoin.getRequestItemTimes(f),m=[...b];[..._],[...T],m.splice(0,1);const A=m.map(L=>(0,r.getOperationSource)(L.operation));if(A.some(L=>!L))return(0,o.failTest)(`Actor ${this.name} can not bind on remaining operations without source annotation`);if(A.some(L=>L!==A[0]))return(0,o.failTest)(`Actor ${this.name} can not bind on remaining operations with non-equal source annotation`);const E=A[0],j=this.createOperationFromEntries(h,m),X=await E.source.getSelectorShape(s.context),K=s.context.get(t.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(!(0,r.doesShapeAcceptOperation)(X,j,{joinBindings:!0,wildcardAcceptAllExtensionFunctions:K}))return(0,o.failTest)(`Actor ${this.name} detected a source that can not handle passing down join bindings`);const O=await Promise.all(m.map(async L=>(await this.mediatorJoinSelectivity.mediate({entries:[b[0],L],context:s.context})).selectivity*this.selectivityModifier)),S=m.map((L,N)=>L.metadata.cardinality.value*O[N]).reduce((L,N)=>L+N,0);return(0,o.passTestWithSideData)({iterations:1,persistedItems:f[0].cardinality.value,blockingItems:f[0].cardinality.value,requestTime:_[0]+f[0].cardinality.value*T[0]+_[1]+S*T[1]},{...l,entriesUnsorted:p,entriesSorted:b})}createOperationFromEntries(s,l){return l.length===1?l[0].operation:s.createJoin(l.map(f=>f.operation),!0)}};return _g.ActorRdfJoinMultiBindSource=u,_g}var MI;function tK(){return MI||(MI=1,(function(n){var t=ms&&ms.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ms&&ms.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(eK(),n)})(ms)),ms}var bs={},gg={},II;function rK(){if(II)return gg;II=1,Object.defineProperty(gg,"__esModule",{value:!0}),gg.ActorOptimizeQueryOperationJoinConnected=void 0;const n=jr(),t=Be(),o=Ae(),i=We();let r=class fb extends n.ActorOptimizeQueryOperation{async test(a){return(0,o.passTestVoid)()}async run(a){const u=a.context.getSafe(t.KeysInitQuery.dataFactory),c=new i.Factory(u);return{operation:i.Util.mapOperation(a.operation,{join(l,f){return{recurse:!1,result:fb.cluster(l,f)}}},c),context:a.context}}static cluster(a,u){const c=a.input.map(d=>({inScopeVariables:Object.fromEntries(i.Util.inScopeVariables(d).map(h=>[h.value,!0])),entries:[d]}));let s,l=c;do s=l,l=fb.clusterIteration(s);while(s.length!==l.length);const f=l.map(d=>d.entries.length===1?d.entries[0]:u.createJoin(d.entries));return f.length===1?f[0]:u.createJoin(f,!1)}static clusterIteration(a){const u=[];for(const c of a){let s=!1;for(const l of u)if(fb.haveOverlappingVariables(c.inScopeVariables,l.inScopeVariables)){l.entries=[...l.entries,...c.entries],l.inScopeVariables={...l.inScopeVariables,...c.inScopeVariables},s=!0;break}s||u.push({inScopeVariables:c.inScopeVariables,entries:c.entries})}return u}static haveOverlappingVariables(a,u){for(const c of Object.keys(a))if(u[c])return!0;return!1}};return gg.ActorOptimizeQueryOperationJoinConnected=r,gg}var LI;function nK(){return LI||(LI=1,(function(n){var t=bs&&bs.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=bs&&bs.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(rK(),n)})(bs)),bs}var vs={},mg={},xI;function iK(){if(xI)return mg;xI=1,Object.defineProperty(mg,"__esModule",{value:!0}),mg.ActorOptimizeQueryOperationBgpToJoin=void 0;const n=jr(),t=Be(),o=Ae(),i=We();let r=class extends n.ActorOptimizeQueryOperation{async test(a){return(0,o.passTestVoid)()}async run(a){const u=a.context.getSafe(t.KeysInitQuery.dataFactory),c=new i.Factory(u);return{operation:i.Util.mapOperation(a.operation,{bgp(l,f){return{recurse:!1,result:f.createJoin(l.patterns)}}},c),context:a.context}}};return mg.ActorOptimizeQueryOperationBgpToJoin=r,mg}var qI;function aK(){return qI||(qI=1,(function(n){var t=vs&&vs.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=vs&&vs.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(iK(),n)})(vs)),vs}var Ts={},bg={},BI;function oK(){if(BI)return bg;BI=1,Object.defineProperty(bg,"__esModule",{value:!0}),bg.ActorOptimizeQueryOperationJoinBgp=void 0;const n=jr(),t=Be(),o=Ae(),i=We();let r=class extends n.ActorOptimizeQueryOperation{async test(a){return(0,o.passTestVoid)()}async run(a){const u=a.context.getSafe(t.KeysInitQuery.dataFactory),c=new i.Factory(u);return{operation:i.Util.mapOperation(a.operation,{join(l,f){return l.input.every(d=>d.type==="bgp")?{recurse:!1,result:f.createBgp(l.input.flatMap(d=>d.patterns))}:{recurse:!1,result:l}}},c),context:a.context}}};return bg.ActorOptimizeQueryOperationJoinBgp=r,bg}var CI;function uK(){return CI||(CI=1,(function(n){var t=Ts&&Ts.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ts&&Ts.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(oK(),n)})(Ts)),Ts}var Os={},vg={},QI;function sK(){if(QI)return vg;QI=1,Object.defineProperty(vg,"__esModule",{value:!0}),vg.ActorOptimizeQueryOperationAssignSourcesExhaustive=void 0;const n=jr(),t=qq(),o=Be(),i=Ae(),r=ke(),e=We();let a=class extends n.ActorOptimizeQueryOperation{constructor(c){super(c)}async test(c){return(0,i.passTestVoid)()}async run(c){const s=c.context.getSafe(o.KeysInitQuery.dataFactory),l=new e.Factory(s),f=c.context.get(o.KeysQueryOperation.querySources)??[];if(f.length===0)return{operation:c.operation,context:c.context};if(f.length===1){const d=f[0],h=c.context.get(o.KeysRdfUpdateQuads.destination);if(!h||d.source.referenceValue===(0,t.getDataDestinationValue)(h))try{const p=await d.source.getSelectorShape(c.context);if((0,r.doesShapeAcceptOperation)(p,c.operation))return{operation:(0,r.assignOperationSource)(c.operation,d),context:c.context}}catch{}}return{operation:this.assignExhaustive(l,c.operation,f),context:c.context.delete(o.KeysInitQuery.queryString)}}assignExhaustive(c,s,l){const f=this;return e.Util.mapOperation(s,{[e.Algebra.types.PATTERN](d,h){return l.length===1?{result:(0,r.assignOperationSource)(d,l[0]),recurse:!1}:{result:h.createUnion(l.map(p=>(0,r.assignOperationSource)(d,p))),recurse:!1}},[e.Algebra.types.LINK](d,h){return l.length===1?{result:(0,r.assignOperationSource)(d,l[0]),recurse:!1}:{result:h.createAlt(l.map(p=>(0,r.assignOperationSource)(d,p))),recurse:!1}},[e.Algebra.types.NPS](d,h){return l.length===1?{result:(0,r.assignOperationSource)(d,l[0]),recurse:!1}:{result:h.createAlt(l.map(p=>(0,r.assignOperationSource)(d,p))),recurse:!1}},[e.Algebra.types.SERVICE](d){return{result:d,recurse:!1}},[e.Algebra.types.CONSTRUCT](d,h){return{result:h.createConstruct(f.assignExhaustive(c,d.input,l),d.template),recurse:!1}},[e.Algebra.types.DELETE_INSERT](d,h){return{result:h.createDeleteInsert(d.delete,d.insert,d.where?f.assignExhaustive(c,d.where,l):void 0),recurse:!1}}},c)}};return vg.ActorOptimizeQueryOperationAssignSourcesExhaustive=a,vg}var UI;function cK(){return UI||(UI=1,(function(n){var t=Os&&Os.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Os&&Os.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(sK(),n)})(Os)),Os}var Ss={},Tg={},VI;function lK(){if(VI)return Tg;VI=1,Object.defineProperty(Tg,"__esModule",{value:!0}),Tg.ActorOptimizeQueryOperationDescribeToConstructsSubject=void 0;const n=jr(),t=Be(),o=Ae(),i=We();let r=class extends n.ActorOptimizeQueryOperation{constructor(a){super(a)}async test(a){return a.operation.type!==i.Algebra.types.DESCRIBE?(0,o.failTest)(`Actor ${this.name} only supports describe operations, but got ${a.operation.type}`):(0,o.passTest)(!0)}async run(a){const u=a.context.getSafe(t.KeysInitQuery.dataFactory),c=new i.Factory(u),s=a.operation,l=s.terms.filter(d=>d.termType!=="Variable").map(d=>{const h=[u.quad(d,u.variable("__predicate"),u.variable("__object"))];return h.forEach(y=>y.type="pattern"),{input:{type:i.Algebra.types.BGP,patterns:h},template:h,type:"construct"}});if(l.length!==s.terms.length){let d=[];s.terms.filter(h=>h.termType==="Variable").forEach((h,p)=>{const y=[u.quad(h,u.variable(`__predicate${p}`),u.variable(`__object${p}`))];y.forEach(b=>b.type="pattern"),d=[...d,...y]}),l.push({input:{type:i.Algebra.types.JOIN,input:[s.input,{type:i.Algebra.types.BGP,patterns:d}]},template:d,type:i.Algebra.types.CONSTRUCT})}return{operation:c.createUnion(l,!1),context:a.context}}};return Tg.ActorOptimizeQueryOperationDescribeToConstructsSubject=r,Tg}var GI;function fK(){return GI||(GI=1,(function(n){var t=Ss&&Ss.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=Ss&&Ss.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(lK(),n)})(Ss)),Ss}var G1,XI;function dK(){return XI||(XI=1,G1=function(n){const t=new(CB()).LoggerVoid,o=new(Ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/^4.0.0/components/ActorInit.jsonld#ActorInit_default_bus"}),i=new(Ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/^4.0.0/components/ActorContextPreprocess.jsonld#ActorContextPreprocess_default_bus"}),r=new(Ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-bindings/^4.0.0/components/ActorHashBindings.jsonld#ActorHashBindings_default_bus"}),e=new(Ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-quads/^4.0.0/components/ActorHashQuads.jsonld#ActorHashQuads_default_bus"}),a=new(Ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/^4.0.0/components/ActorOptimizeQueryOperation.jsonld#ActorOptimizeQueryOperation_default_bus"}),u=new(Ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-entries-sort/^4.0.0/components/ActorRdfJoinEntriesSort.jsonld#ActorRdfJoinEntriesSort_default_bus"}),c=new(Ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-selectivity/^4.0.0/components/ActorRdfJoinSelectivity.jsonld#ActorRdfJoinSelectivity_default_bus"}),s=new(Ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-accumulate/^4.0.0/components/ActorRdfMetadataAccumulate.jsonld#ActorRdfMetadataAccumulate_default_bus"}),l=new(Ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-quads/^4.0.0/components/ActorRdfUpdateQuads.jsonld#ActorRdfUpdateQuads_default_bus"}),f=new(Ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-parse/^4.0.0/components/ActorQueryParse.jsonld#ActorQueryParse_default_bus"}),d=new(Ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-bindings-aggregator-factory/^4.0.0/components/ActorBindingsAggregatorFactory.jsonld#ActorBindingsAggregatorFactory_default_bus"}),h=new(Ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-expression-evaluator-factory/^4.0.0/components/ActorExpressionEvaluatorFactory.jsonld#ActorExpressionEvaluatorFactory_default_bus"}),p=new(ge()).BusFunctionFactory({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-function-factory/^4.0.0/components/ActorFunctionFactory.jsonld#ActorFunctionFactory_default_bus"}),y=new(gt()).BusQueryOperation({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/^4.0.0/components/ActorQueryOperation.jsonld#ActorQueryOperation_default_bus"}),b=new(Ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/^4.0.0/components/ActorRdfJoin.jsonld#ActorRdfJoin_default_bus"}),_=new(Ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-process/^4.0.0/components/ActorQueryProcess.jsonld#ActorQueryProcess_default_bus"}),T=new(Ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify/^4.0.0/components/ActorQuerySourceIdentify.jsonld#ActorQuerySourceIdentify_default_bus"}),m=new(Ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-term-comparator-factory/^4.0.0/components/ActorTermComparatorFactory.jsonld#ActorTermComparatorFactory_default_bus"}),A=new(Ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/^4.0.0/components/ActorHttpInvalidate.jsonld#ActorHttpInvalidate_default_bus"}),E=new(Ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-result-serialize/^4.0.0/components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus"}),j=new(Ae()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-merge-bindings-context/^4.0.0/components/ActorMergeBindingsContext.jsonld#ActorMergeBindingsContext_default_bus"});new(AC()).ActorContextPreprocessConvertShortcuts({contextKeyShortcuts:{baseIRI:"@comunica/actor-init-query:baseIRI",dataFactory:"@comunica/actor-init-query:dataFactory",datetime:"@comunica/actor-http-memento:datetime",destination:"@comunica/bus-rdf-update-quads:destination",distinctConstruct:"@comunica/actor-init-query:distinctConstruct",explain:"@comunica/actor-init-query:explain",extensionFunctionCreator:"@comunica/actor-init-query:extensionFunctionCreator",extensionFunctions:"@comunica/actor-init-query:extensionFunctions",extensionFunctionsAlwaysPushdown:"@comunica/actor-init-query:extensionFunctionsAlwaysPushdown",fetch:"@comunica/bus-http:fetch",fileBaseIRI:"@comunica/actor-init-query:fileBaseIRI",functionArgumentsCache:"@comunica/actor-init-query:functionArgumentsCache",httpAuth:"@comunica/bus-http:auth",httpBodyTimeout:"@comunica/bus-http:http-body-timeout",httpIncludeCredentials:"@comunica/bus-http:include-credentials",httpProxyHandler:"@comunica/actor-http-proxy:httpProxyHandler",httpRetryCount:"@comunica/bus-http:http-retry-count",httpRetryDelayFallback:"@comunica/bus-http:http-retry-delay-fallback",httpRetryDelayLimit:"@comunica/bus-http:http-retry-delay-limit",httpTimeout:"@comunica/bus-http:http-timeout",initialBindings:"@comunica/actor-init-query:initialBindings",invalidateCache:"@comunica/actor-init-query:invalidateCache",lenient:"@comunica/actor-init-query:lenient",log:"@comunica/core:log",queryFormat:"@comunica/actor-init-query:queryFormat",queryTimestamp:"@comunica/actor-init-query:queryTimestamp",queryTimestampHighResolution:"@comunica/actor-init-query:queryTimestampHighResolution",readOnly:"@comunica/bus-query-operation:readOnly",recoverBrokenLinks:"@comunica/bus-http-wayback:recover-broken-links",sources:"@comunica/actor-init-query:querySourcesUnidentified",traverse:"@comunica/bus-query-source-identify:traverse",unionDefaultGraph:"@comunica/bus-query-operation:unionDefaultGraph"},name:"urn:comunica:default:context-preprocess/actors#convert-shortcuts",bus:i,busFailMessage:"Context preprocessing failed"}),new(jC()).ActorContextPreprocessSetDefaults({logger:t,name:"urn:comunica:default:context-preprocess/actors#set-defaults",bus:i,busFailMessage:"Context preprocessing failed"}),new(PC()).ActorContextPreprocessSourceToDestination({name:"urn:comunica:default:context-preprocess/actors#source-to-destination",bus:i,busFailMessage:"Context preprocessing failed"});const X=new(Aq()).ActorContextPreprocessQuerySourceSkolemize({name:"urn:comunica:default:context-preprocess/actors#query-source-skolemize",bus:i,busFailMessage:"Context preprocessing failed"}),K=new(H3()).MediatorCombinePipeline({name:"urn:comunica:default:context-preprocess/mediators#main",bus:i});new(JC()).ActorHashBindingsMurmur({name:"urn:comunica:default:hash-bindings/actors#murmur",bus:r,busFailMessage:"Failed to obtaining hash functions for bindings"});const O=new(nn()).MediatorRace({name:"urn:comunica:default:hash-bindings/mediators#main",bus:r});new(kC()).ActorHashQuadsMurmur({name:"urn:comunica:default:hash-quads/actors#murmur",bus:e,busFailMessage:"Failed to obtaining hash functions for quads"}),new(rQ()).ActorOptimizeQueryOperationRewriteCopy({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-copy",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(iQ()).ActorOptimizeQueryOperationRewriteMove({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-move",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(sQ()).ActorOptimizeQueryOperationRewriteAdd({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-add",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const S=new(gQ()).ActorOptimizeQueryOperationGroupSources({name:"urn:comunica:default:optimize-query-operation/actors#group-sources",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});new(bQ()).ActorOptimizeQueryOperationConstructDistinct({name:"urn:comunica:default:optimize-query-operation/actors#construct-distinct",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const L=new(H3()).MediatorCombinePipeline({filterFailures:!0,name:"urn:comunica:default:optimize-query-operation/mediators#main",bus:a});new(SQ()).ActorRdfJoinEntriesSortCardinality({name:"urn:comunica:default:rdf-join-entries-sort/actors#cardinality",bus:u,busFailMessage:"Sorting join entries failed: none of the configured actors were able to sort"});const N=new(m1()).MediatorNumber({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-entries-sort/mediators#main",bus:u});new(RQ()).ActorRdfJoinSelectivityVariableCounting({name:"urn:comunica:default:rdf-join-selectivity/actors#variable-counting",bus:c,busFailMessage:"Determining join selectivity failed: none of the configured actors were able to calculate selectivities"});const I=new(m1()).MediatorNumber({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-selectivity/mediators#main",bus:c});new(PQ()).ActorRdfMetadataAccumulateCardinality({name:"urn:comunica:default:rdf-metadata-accumulate/actors#cardinality",bus:s,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(MQ()).ActorRdfMetadataAccumulatePageSize({name:"urn:comunica:default:rdf-metadata-accumulate/actors#pagesize",bus:s,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(LQ()).ActorRdfMetadataAccumulateRequestTime({name:"urn:comunica:default:rdf-metadata-accumulate/actors#requesttime",bus:s,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"});const V=new(xm()).MediatorCombineUnion({field:"metadata",name:"urn:comunica:default:rdf-metadata-accumulate/mediators#main",bus:s});new(GQ()).ActorRdfUpdateQuadsRdfJsStore({name:"urn:comunica:default:rdf-update-quads/actors#rdfjs-store",bus:l,busFailMessage:"RDF updating failed: none of the configured actors were able to handle an update"});const re=new(nn()).MediatorRace({name:"urn:comunica:default:rdf-update-quads/mediators#main",bus:l});new(HQ()).ActorQueryParseSparql({prefixes:{dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",skos:"http://www.w3.org/2008/05/skos#",xsd:"http://www.w3.org/2001/XMLSchema#"},name:"urn:comunica:default:query-parse/actors#sparql",bus:f,busFailMessage:'Query parsing failed: none of the configured parsers were able to the query "${action.query}"'});const Y=new(nn()).MediatorRace({name:"urn:comunica:default:query-parse/mediators#main",bus:f}),ce=new(nn()).MediatorRace({name:"urn:comunica:default:bindings-aggregator-factory/mediators#main",bus:d}),ae=new(nn()).MediatorRace({name:"urn:comunica:default:expression-evaluator-factory/mediators#main",bus:h});new(WQ()).ActorFunctionFactoryExpressionBnode({name:"urn:comunica:default:function-factory/actors#expression-function-bnode",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(kQ()).ActorFunctionFactoryExpressionCoalesce({name:"urn:comunica:default:function-factory/actors#expression-function-coalesce",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rU()).ActorFunctionFactoryExpressionBound({name:"urn:comunica:default:function-factory/actors#expression-function-bound",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(uU()).ActorFunctionFactoryExpressionExtensions({name:"urn:comunica:default:function-factory/actors#expression-function-extensions",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(lU()).ActorFunctionFactoryExpressionConcat({name:"urn:comunica:default:function-factory/actors#expression-function-concat",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(pU()).ActorFunctionFactoryExpressionIf({name:"urn:comunica:default:function-factory/actors#expression-function-if",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(_U()).ActorFunctionFactoryExpressionLogicalAnd({name:"urn:comunica:default:function-factory/actors#expression-function-logical-and",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bU()).ActorFunctionFactoryExpressionLogicalOr({name:"urn:comunica:default:function-factory/actors#expression-function-logical-or",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(OU()).ActorFunctionFactoryExpressionSameTerm({name:"urn:comunica:default:function-factory/actors#expression-function-same-term",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(AU()).ActorFunctionFactoryTermAbs({name:"urn:comunica:default:function-factory/actors#term-function-abs",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(jU()).ActorFunctionFactoryTermAddition({name:"urn:comunica:default:function-factory/actors#term-function-addition",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(NU()).ActorFunctionFactoryTermCeil({name:"urn:comunica:default:function-factory/actors#term-function-ceil",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(LU()).ActorFunctionFactoryTermContains({name:"urn:comunica:default:function-factory/actors#term-function-contains",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(BU()).ActorFunctionFactoryTermDatatype({name:"urn:comunica:default:function-factory/actors#term-function-datatype",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(UU()).ActorFunctionFactoryTermDay({name:"urn:comunica:default:function-factory/actors#term-function-day",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(XU()).ActorFunctionFactoryTermEncodeForUri({name:"urn:comunica:default:function-factory/actors#term-function-encode-for-uri",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(HU()).ActorFunctionFactoryTermDivision({name:"urn:comunica:default:function-factory/actors#term-function-division",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(WU()).ActorFunctionFactoryTermEquality({name:"urn:comunica:default:function-factory/actors#term-function-equality",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(kU()).ActorFunctionFactoryTermFloor({name:"urn:comunica:default:function-factory/actors#term-function-floor",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rV()).ActorFunctionFactoryTermHours({name:"urn:comunica:default:function-factory/actors#term-function-hours",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(aV()).ActorFunctionFactoryTermIsIri({name:"urn:comunica:default:function-factory/actors#term-function-is-iri",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(sV()).ActorFunctionFactoryTermIsBlank({name:"urn:comunica:default:function-factory/actors#term-function-is-blank",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(fV()).ActorFunctionFactoryTermIsLiteral({name:"urn:comunica:default:function-factory/actors#term-function-is-literal",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(_V()).ActorFunctionFactoryTermIri({name:"urn:comunica:default:function-factory/actors#term-function-iri",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bV()).ActorFunctionFactoryTermIsNumeric({name:"urn:comunica:default:function-factory/actors#term-function-is-numeric",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(OV()).ActorFunctionFactoryTermLang({name:"urn:comunica:default:function-factory/actors#term-function-lang",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(AV()).ActorFunctionFactoryTermIsTriple({name:"urn:comunica:default:function-factory/actors#term-function-is-triple",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(RV()).ActorFunctionFactoryTermLangmatches({name:"urn:comunica:default:function-factory/actors#term-function-langmatches",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(PV()).ActorFunctionFactoryTermMinutes({name:"urn:comunica:default:function-factory/actors#term-function-minutes",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(IV()).ActorFunctionFactoryTermLcase({name:"urn:comunica:default:function-factory/actors#term-function-lcase",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(BV()).ActorFunctionFactoryTermMd5({name:"urn:comunica:default:function-factory/actors#term-function-md5",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(UV()).ActorFunctionFactoryTermMonth({name:"urn:comunica:default:function-factory/actors#term-function-month",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(XV()).ActorFunctionFactoryTermNot({name:"urn:comunica:default:function-factory/actors#term-function-not",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(HV()).ActorFunctionFactoryTermMultiplication({name:"urn:comunica:default:function-factory/actors#term-function-multiplication",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(WV()).ActorFunctionFactoryTermNow({name:"urn:comunica:default:function-factory/actors#term-function-now",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(kV()).ActorFunctionFactoryTermObject({name:"urn:comunica:default:function-factory/actors#term-function-object",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rG()).ActorFunctionFactoryTermPredicate({name:"urn:comunica:default:function-factory/actors#term-function-predicate",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(aG()).ActorFunctionFactoryTermRand({name:"urn:comunica:default:function-factory/actors#term-function-rand",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cG()).ActorFunctionFactoryTermReplace({name:"urn:comunica:default:function-factory/actors#term-function-replace",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(dG()).ActorFunctionFactoryTermRound({name:"urn:comunica:default:function-factory/actors#term-function-round",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Xq()).ActorFunctionFactoryTermRegex({name:"urn:comunica:default:function-factory/actors#term-function-regex",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(OG()).ActorFunctionFactoryTermSha1({name:"urn:comunica:default:function-factory/actors#term-function-sha1",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(AG()).ActorFunctionFactoryTermSeconds({name:"urn:comunica:default:function-factory/actors#term-function-seconds",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(RG()).ActorFunctionFactoryTermSha256({name:"urn:comunica:default:function-factory/actors#term-function-sha256",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(PG()).ActorFunctionFactoryTermSha384({name:"urn:comunica:default:function-factory/actors#term-function-sha384",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(IG()).ActorFunctionFactoryTermSha512({name:"urn:comunica:default:function-factory/actors#term-function-sha512",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(qG()).ActorFunctionFactoryTermStrAfter({name:"urn:comunica:default:function-factory/actors#term-function-str-after",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(QG()).ActorFunctionFactoryTermStrBefore({name:"urn:comunica:default:function-factory/actors#term-function-str-before",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(GG()).ActorFunctionFactoryTermStrDt({name:"urn:comunica:default:function-factory/actors#term-function-str-dt",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new($G()).ActorFunctionFactoryTermStrEnds({name:"urn:comunica:default:function-factory/actors#term-function-str-ends",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(KG()).ActorFunctionFactoryTermStrLang({name:"urn:comunica:default:function-factory/actors#term-function-str-lang",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(ZG()).ActorFunctionFactoryTermStrLen({name:"urn:comunica:default:function-factory/actors#term-function-str-len",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(tX()).ActorFunctionFactoryTermStrStarts({name:"urn:comunica:default:function-factory/actors#term-function-str-starts",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(iX()).ActorFunctionFactoryTermStr({name:"urn:comunica:default:function-factory/actors#term-function-str",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(vX()).ActorFunctionFactoryTermStrUuid({name:"urn:comunica:default:function-factory/actors#term-function-str-uuid",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(SX()).ActorFunctionFactoryTermSubStr({name:"urn:comunica:default:function-factory/actors#term-function-sub-str",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(FX()).ActorFunctionFactoryTermTimezone({name:"urn:comunica:default:function-factory/actors#term-function-timezone",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(jX()).ActorFunctionFactoryTermSubtraction({name:"urn:comunica:default:function-factory/actors#term-function-subtraction",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(NX()).ActorFunctionFactoryTermSubject({name:"urn:comunica:default:function-factory/actors#term-function-subject",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(LX()).ActorFunctionFactoryTermTz({name:"urn:comunica:default:function-factory/actors#term-function-tz",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(BX()).ActorFunctionFactoryTermUnaryMinus({name:"urn:comunica:default:function-factory/actors#term-function-unary-minus",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(UX()).ActorFunctionFactoryTermUnaryPlus({name:"urn:comunica:default:function-factory/actors#term-function-unary-plus",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(XX()).ActorFunctionFactoryTermTriple({name:"urn:comunica:default:function-factory/actors#term-function-triple",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(HX()).ActorFunctionFactoryTermUcase({name:"urn:comunica:default:function-factory/actors#term-function-ucase",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(WX()).ActorFunctionFactoryTermUuid({name:"urn:comunica:default:function-factory/actors#term-function-uuid",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(kX()).ActorFunctionFactoryTermXsdToBoolean({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-boolean",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rz()).ActorFunctionFactoryTermXsdToDate({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-date",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(az()).ActorFunctionFactoryTermXsdToDecimal({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-decimal",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(sz()).ActorFunctionFactoryTermXsdToDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-duration",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(fz()).ActorFunctionFactoryTermXsdToDayTimeDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-day-time-duration",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(hz()).ActorFunctionFactoryTermXsdToDouble({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-double",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(gz()).ActorFunctionFactoryTermXsdToFloat({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-float",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(vz()).ActorFunctionFactoryTermXsdToDatetime({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-datetime",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Sz()).ActorFunctionFactoryTermXsdToInteger({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-integer",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Fz()).ActorFunctionFactoryTermXsdToString({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-string",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(jz()).ActorFunctionFactoryTermXsdToYearMonthDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-year-month-duration",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Nz()).ActorFunctionFactoryTermXsdToTime({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-time",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Lz()).ActorFunctionFactoryTermYear({name:"urn:comunica:default:function-factory/actors#term-function-year",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"});const pe=new(nn()).MediatorRace({name:"urn:comunica:default:function-factory/mediators#main",bus:p});new(qz()).ActorQueryOperationSource({name:"urn:comunica:default:query-operation/actors#source",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const U=new(m1()).MediatorNumber({field:"httpRequests",type:"min",ignoreFailures:!0,name:"urn:comunica:default:query-operation/mediators#main",bus:y}),le=new(Cz()).MediatorJoinCoefficientsFixed({cpuWeight:10,memoryWeight:1,timeWeight:2,ioWeight:10,name:"urn:comunica:default:rdf-join/mediators#main",bus:b}),me=new(nn()).MediatorRace({name:"urn:comunica:default:query-process/mediators#main",bus:_}),te=new(nn()).MediatorRace({name:"urn:comunica:default:query-source-identify/mediators#main",bus:T}),de=new(nn()).MediatorRace({name:"urn:comunica:default:term-comparator-factory/mediators#main",bus:m}),Ee=new(LP()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-context-preprocess-query-source-identify/^4.0.0/components/ActorContextPreprocessQuerySourceIdentify.jsonld#IActorContextPreprocessQuerySourceIdentifyArgs_default_invalidator",bus:A,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),Re=new(Vz()).MediatorAll({name:"urn:comunica:default:http-invalidate/mediators#main",bus:A}),De=new(LP()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-operation-service/^4.0.0/components/ActorQueryOperationService.jsonld#IActorQueryOperationServiceArgs_default_invalidator",bus:A,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),fe=new(nn()).MediatorRace({name:"urn:comunica:default:query-result-serialize/mediators#serialize",bus:E}),_e=new(xm()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:query-result-serialize/mediators#mediaType",bus:E}),q=new(xm()).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:query-result-serialize/mediators#mediaTypeFormat",bus:E}),w=new(xm()).MediatorCombineUnion({field:"mergeHandlers",name:"urn:comunica:default:merge-bindings-context/mediators#main",bus:j});new(Kz()).ActorRdfJoinSingle({mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-single",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(Yz()).ActorRdfJoinMultiEmpty({mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-multi-empty",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});const D=new(uN()).ActorRdfJoinHash({mediatorHashBindings:O,canHandleUndefs:!1,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-hash-def",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),g=new(uN()).ActorRdfJoinHash({mediatorHashBindings:O,canHandleUndefs:!0,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-hash-undef",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),F=new(s$()).ActorRdfJoinSymmetricHash({mediatorHashBindings:O,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-symmetric-hash",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),M=new(l$()).ActorRdfJoinNestedLoop({mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-nested-loop",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(mN()).ActorRdfJoinMinusHash({canHandleUndefs:!1,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#minus-hash-def",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(mN()).ActorRdfJoinMinusHash({canHandleUndefs:!0,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#minus-hash-undef",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(Zm()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!1,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-nonblocking",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(Zm()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!0,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-blocking",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(Zm()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!1,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-nonblocking",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(Zm()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!0,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-blocking",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(y$()).ActorRdfJoinOptionalNestedLoop({mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#optional-nested-loop",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(b$()).ActorBindingsAggregatorFactoryCount({mediatorExpressionEvaluatorFactory:ae,name:"urn:comunica:default:bindings-aggregator-factory/actors#count",bus:d,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(T$()).ActorBindingsAggregatorFactoryGroupConcat({mediatorExpressionEvaluatorFactory:ae,name:"urn:comunica:default:bindings-aggregator-factory/actors#group-concat",bus:d,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(S$()).ActorBindingsAggregatorFactorySample({mediatorExpressionEvaluatorFactory:ae,name:"urn:comunica:default:bindings-aggregator-factory/actors#sample",bus:d,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(A$()).ActorBindingsAggregatorFactoryWildcardCount({mediatorExpressionEvaluatorFactory:ae,name:"urn:comunica:default:bindings-aggregator-factory/actors#wildcard-count",bus:d,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(E$()).ActorBindingsAggregatorFactoryAverage({mediatorFunctionFactory:pe,mediatorExpressionEvaluatorFactory:ae,name:"urn:comunica:default:bindings-aggregator-factory/actors#average",bus:d,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(j$()).ActorBindingsAggregatorFactorySum({mediatorFunctionFactory:pe,mediatorExpressionEvaluatorFactory:ae,name:"urn:comunica:default:bindings-aggregator-factory/actors#sum",bus:d,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(N$()).ActorFunctionFactoryExpressionIn({mediatorFunctionFactory:pe,name:"urn:comunica:default:function-factory/actors#expression-function-in",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(L$()).ActorFunctionFactoryExpressionNotIn({mediatorFunctionFactory:pe,name:"urn:comunica:default:function-factory/actors#expression-function-not-in",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(B$()).ActorFunctionFactoryTermGreaterThan({mediatorFunctionFactory:pe,name:"urn:comunica:default:function-factory/actors#term-function-greater-than",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(U$()).ActorFunctionFactoryTermGreaterThanEqual({mediatorFunctionFactory:pe,name:"urn:comunica:default:function-factory/actors#term-function-greater-than-equal",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(X$()).ActorFunctionFactoryTermInequality({mediatorFunctionFactory:pe,name:"urn:comunica:default:function-factory/actors#term-function-inequality",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(H$()).ActorFunctionFactoryTermLesserThan({mediatorFunctionFactory:pe,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(W$()).ActorFunctionFactoryTermLesserThanEqual({mediatorFunctionFactory:pe,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than-equal",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Z$()).ActorQueryOperationAsk({mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#ask",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(eH()).ActorQueryOperationBgpJoin({mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#bgp",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(iH()).ActorQueryOperationDistinctIdentity({mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#distinct",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(oH()).ActorQueryOperationExtend({mediatorExpressionEvaluatorFactory:ae,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#extend",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(sH()).ActorQueryOperationFilter({mediatorExpressionEvaluatorFactory:ae,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#filter",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(l5()).ActorQueryOperationConstruct({mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#construct",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(fH()).ActorQueryOperationFromQuad({mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#from",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(pH()).ActorQueryOperationProject({mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#project",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(yH()).ActorQueryOperationReducedHash({mediatorHashBindings:O,cacheSize:100,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#reduced",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(gH()).ActorQueryOperationSlice({mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#slice",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(f5()).ActorQueryOperationUnion({mediatorRdfMetadataAccumulate:V,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#union",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(TH()).ActorQueryOperationPathAlt({mediatorRdfMetadataAccumulate:V,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#path-alt",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(SH()).ActorQueryOperationPathInv({mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#path-inv",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(AH()).ActorQueryOperationPathLink({mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#path-link",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(EH()).ActorQueryOperationPathNps({mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#path-nps",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(jH()).ActorQueryOperationUpdateCompositeUpdate({mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#update-composite",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(PH()).ActorQueryOperationClear({mediatorUpdateQuads:re,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#update-clear",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(MH()).ActorQueryOperationCreate({mediatorUpdateQuads:re,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#update-create",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(LH()).ActorQueryOperationDrop({mediatorUpdateQuads:re,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#update-drop",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(CH()).ActorQueryOperationJoin({mediatorJoin:le,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#join",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(UH()).ActorQueryOperationMinus({mediatorJoin:le,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#minus",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(GH()).ActorQueryOperationLeftJoin({mediatorJoin:le,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#leftjoin",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(zH()).ActorQueryOperationPathSeq({mediatorJoin:le,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#path-seq",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const Q=new(HH()).ActorRdfJoinMultiSmallest({mediatorJoinEntriesSort:N,mediatorJoin:le,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(KH()).ActorQueryOperationLoad({mediatorUpdateQuads:re,mediatorQuerySourceIdentify:te,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#update-load",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(YH()).ActorBindingsAggregatorFactoryMax({mediatorTermComparatorFactory:de,mediatorExpressionEvaluatorFactory:ae,name:"urn:comunica:default:bindings-aggregator-factory/actors#max",bus:d,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(kH()).ActorBindingsAggregatorFactoryMin({mediatorTermComparatorFactory:de,mediatorExpressionEvaluatorFactory:ae,name:"urn:comunica:default:bindings-aggregator-factory/actors#min",bus:d,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(rJ()).ActorQueryOperationOrderBy({mediatorExpressionEvaluatorFactory:ae,mediatorTermComparatorFactory:de,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#orderby",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const x=new(iJ()).ActorOptimizeQueryOperationFilterPushdown({aggressivePushdown:!1,maxIterations:10,splitConjunctive:!0,mergeConjunctive:!0,pushIntoLeftJoins:!0,pushEqualityIntoPatterns:!0,name:"urn:comunica:default:optimize-query-operation/actors#filter-pushdown",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[S]});new(oJ()).ActorContextPreprocessQuerySourceIdentify({cacheSize:100,httpInvalidator:Ee,mediatorQuerySourceIdentify:te,mediatorContextPreprocess:K,name:"urn:comunica:default:context-preprocess/actors#query-source-identify",bus:i,busFailMessage:"Context preprocessing failed",beforeActors:[X]});const $=new(Bx()).ActorInitQuery({mediatorQueryProcess:me,mediatorQueryResultSerialize:fe,mediatorQueryResultSerializeMediaTypeCombiner:_e,mediatorQueryResultSerializeMediaTypeFormatCombiner:q,mediatorHttpInvalidate:Re,defaultQueryInputFormat:"sparql",allowNoSources:!1,name:"urn:comunica:default:init/actors#query",bus:o,busFailMessage:"Initialization failed: none of the configured actors were to initialize"});new(fJ()).ActorExpressionEvaluatorFactoryDefault({mediatorQueryOperation:U,mediatorFunctionFactory:pe,mediatorMergeBindingsContext:w,name:"urn:comunica:default:expression-evaluator-factory/actors#default",bus:h,busFailMessage:"Creation of Expression Evaluator failed"}),new(hJ()).ActorQueryOperationGroup({mediatorMergeBindingsContext:w,mediatorBindingsAggregatorFactory:ce,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#group",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(_J()).ActorQueryOperationNop({mediatorMergeBindingsContext:w,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#nop",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(mJ()).ActorQueryOperationService({forceSparqlEndpoint:!1,mediatorMergeBindingsContext:w,mediatorQuerySourceIdentify:te,httpInvalidator:De,cacheSize:32,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#service",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(vJ()).ActorQueryOperationValues({mediatorMergeBindingsContext:w,name:"urn:comunica:default:query-operation/actors#values",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(OJ()).ActorQueryOperationPathOneOrMore({mediatorMergeBindingsContext:w,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#path-one-or-more",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(wJ()).ActorQueryOperationPathZeroOrMore({mediatorMergeBindingsContext:w,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#path-zero-or-more",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(FJ()).ActorQueryOperationPathZeroOrOne({mediatorMergeBindingsContext:w,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#path-zero-or-one",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(RJ()).ActorQueryOperationUpdateDeleteInsert({mediatorUpdateQuads:re,mediatorMergeBindingsContext:w,mediatorQueryOperation:U,name:"urn:comunica:default:query-operation/actors#update-delete-insert",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(DJ()).ActorRdfJoinNone({mediatorMergeBindingsContext:w,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-none",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(MJ()).ActorRdfJoinOptionalBind({bindOrder:"depth-first",selectivityModifier:1e-6,mediatorQueryOperation:U,mediatorMergeBindingsContext:w,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#optional-bind",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(qJ()).ActorQueryProcessSequential({mediatorContextPreprocess:K,mediatorQueryParse:Y,mediatorOptimizeQueryOperation:L,mediatorQueryOperation:U,mediatorMergeBindingsContext:w,name:"urn:comunica:default:query-process/actors#sequential",bus:_,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),new(VJ()).ActorQuerySourceIdentifyRdfJs({mediatorMergeBindingsContext:w,name:"urn:comunica:default:query-source-identify/actors#rdfjs",bus:T,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}"}),new(HJ()).ActorTermComparatorFactoryExpressionEvaluator({mediatorQueryOperation:U,mediatorFunctionFactory:pe,mediatorMergeBindingsContext:w,name:"urn:comunica:default:term-comparator-factory/actors#expression-evaluator",bus:m,busFailMessage:"Creation of term comparator failed"});const B=new(S5()).ActorRdfJoinMultiBind({bindOrder:"depth-first",selectivityModifier:1e-4,minMaxCardinalityRatio:60,mediatorJoinEntriesSort:N,mediatorQueryOperation:U,mediatorMergeBindingsContext:w,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[Q,D,g,F,M]});new(KJ()).ActorRdfJoinMultiSmallestFilterBindings({selectivityModifier:1e-4,blockSize:64,mediatorJoinEntriesSort:N,mediatorJoin:le,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest-filter-bindings",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[Q,D,g,F,M]});const H=new(YJ()).ActorOptimizeQueryOperationPruneEmptySourceOperations({useAskIfSupported:!1,name:"urn:comunica:default:optimize-query-operation/actors#prune-empty-source-operations",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[x]});new(kJ()).ActorOptimizeQueryOperationLeftjoinExpressionPushdown({name:"urn:comunica:default:optimize-query-operation/actors#leftjoin-expression-pushdown",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[x]}),new(tK()).ActorRdfJoinMultiBindSource({selectivityModifier:1e-4,blockSize:16,mediatorJoinEntriesSort:N,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind-source",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[Q,B,D,g,F,M]});const ne=new(nK()).ActorOptimizeQueryOperationJoinConnected({name:"urn:comunica:default:optimize-query-operation/actors#join-connected",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[H]}),ue=new(aK()).ActorOptimizeQueryOperationBgpToJoin({name:"urn:comunica:default:optimize-query-operation/actors#bgp-to-join",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[ne]}),Te=new(uK()).ActorOptimizeQueryOperationJoinBgp({name:"urn:comunica:default:optimize-query-operation/actors#join-bgp",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[ue]}),Fe=new(cK()).ActorOptimizeQueryOperationAssignSourcesExhaustive({name:"urn:comunica:default:optimize-query-operation/actors#assign-sources-exhaustive",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Te]});return new(fK()).ActorOptimizeQueryOperationDescribeToConstructsSubject({name:"urn:comunica:default:optimize-query-operation/actors#describe-to-constructs-subject",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Fe]}),$}),G1}var zI;function pK(){if(zI)return Xc;zI=1,Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.QueryEngine=void 0;const n=Bx(),t=dK();let o=class extends n.QueryEngineBase{constructor(r=t()){super(r)}};return Xc.QueryEngine=o,Xc}var $I;function hK(){return $I||($I=1,(function(n){var t=ui&&ui.__createBinding||(Object.create?(function(i,r,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(r,e);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(i,a,u)}):(function(i,r,e,a){a===void 0&&(a=e),i[a]=r[e]})),o=ui&&ui.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&t(r,i,e)};Object.defineProperty(n,"__esModule",{value:!0}),o(pK(),n)})(ui)),ui}var yK=hK(),_K=Dt(),X1={exports:{}},z1={exports:{}},$1={},Og={},HI;function gK(){if(HI)return Og;HI=1,Og.byteLength=u,Og.toByteArray=s,Og.fromByteArray=d;for(var n=[],t=[],o=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,e=i.length;r<e;++r)n[r]=i[r],t[i.charCodeAt(r)]=r;t[45]=62,t[95]=63;function a(h){var p=h.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=h.indexOf("=");y===-1&&(y=p);var b=y===p?0:4-y%4;return[y,b]}function u(h){var p=a(h),y=p[0],b=p[1];return(y+b)*3/4-b}function c(h,p,y){return(p+y)*3/4-y}function s(h){var p,y=a(h),b=y[0],_=y[1],T=new o(c(h,b,_)),m=0,A=_>0?b-4:b,E;for(E=0;E<A;E+=4)p=t[h.charCodeAt(E)]<<18|t[h.charCodeAt(E+1)]<<12|t[h.charCodeAt(E+2)]<<6|t[h.charCodeAt(E+3)],T[m++]=p>>16&255,T[m++]=p>>8&255,T[m++]=p&255;return _===2&&(p=t[h.charCodeAt(E)]<<2|t[h.charCodeAt(E+1)]>>4,T[m++]=p&255),_===1&&(p=t[h.charCodeAt(E)]<<10|t[h.charCodeAt(E+1)]<<4|t[h.charCodeAt(E+2)]>>2,T[m++]=p>>8&255,T[m++]=p&255),T}function l(h){return n[h>>18&63]+n[h>>12&63]+n[h>>6&63]+n[h&63]}function f(h,p,y){for(var b,_=[],T=p;T<y;T+=3)b=(h[T]<<16&16711680)+(h[T+1]<<8&65280)+(h[T+2]&255),_.push(l(b));return _.join("")}function d(h){for(var p,y=h.length,b=y%3,_=[],T=16383,m=0,A=y-b;m<A;m+=T)_.push(f(h,m,m+T>A?A:m+T));return b===1?(p=h[y-1],_.push(n[p>>2]+n[p<<4&63]+"==")):b===2&&(p=(h[y-2]<<8)+h[y-1],_.push(n[p>>10]+n[p>>4&63]+n[p<<2&63]+"=")),_.join("")}return Og}var km={};var JI;function mK(){return JI||(JI=1,km.read=function(n,t,o,i,r){var e,a,u=r*8-i-1,c=(1<<u)-1,s=c>>1,l=-7,f=o?r-1:0,d=o?-1:1,h=n[t+f];for(f+=d,e=h&(1<<-l)-1,h>>=-l,l+=u;l>0;e=e*256+n[t+f],f+=d,l-=8);for(a=e&(1<<-l)-1,e>>=-l,l+=i;l>0;a=a*256+n[t+f],f+=d,l-=8);if(e===0)e=1-s;else{if(e===c)return a?NaN:(h?-1:1)*(1/0);a=a+Math.pow(2,i),e=e-s}return(h?-1:1)*a*Math.pow(2,e-i)},km.write=function(n,t,o,i,r,e){var a,u,c,s=e*8-r-1,l=(1<<s)-1,f=l>>1,d=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:e-1,p=i?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+f>=1?t+=d/c:t+=d*Math.pow(2,1-f),t*c>=2&&(a++,c/=2),a+f>=l?(u=0,a=l):a+f>=1?(u=(t*c-1)*Math.pow(2,r),a=a+f):(u=t*Math.pow(2,f-1)*Math.pow(2,r),a=0));r>=8;n[o+h]=u&255,h+=p,u/=256,r-=8);for(a=a<<r|u,s+=r;s>0;n[o+h]=a&255,h+=p,a/=256,s-=8);n[o+h-p]|=y*128}),km}var KI;function $n(){return KI||(KI=1,(function(n){const t=gK(),o=mK(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=u,n.SlowBuffer=T,n.INSPECT_MAX_BYTES=50;const r=2147483647;n.kMaxLength=r,u.TYPED_ARRAY_SUPPORT=e(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function e(){try{const P=new Uint8Array(1),v={foo:function(){return 42}};return Object.setPrototypeOf(v,Uint8Array.prototype),Object.setPrototypeOf(P,v),P.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function a(P){if(P>r)throw new RangeError('The value "'+P+'" is invalid for option "size"');const v=new Uint8Array(P);return Object.setPrototypeOf(v,u.prototype),v}function u(P,v,R){if(typeof P=="number"){if(typeof v=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(P)}return c(P,v,R)}u.poolSize=8192;function c(P,v,R){if(typeof P=="string")return d(P,v);if(ArrayBuffer.isView(P))return p(P);if(P==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P);if(ue(P,ArrayBuffer)||P&&ue(P.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ue(P,SharedArrayBuffer)||P&&ue(P.buffer,SharedArrayBuffer)))return y(P,v,R);if(typeof P=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const C=P.valueOf&&P.valueOf();if(C!=null&&C!==P)return u.from(C,v,R);const k=b(P);if(k)return k;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof P[Symbol.toPrimitive]=="function")return u.from(P[Symbol.toPrimitive]("string"),v,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof P)}u.from=function(P,v,R){return c(P,v,R)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function s(P){if(typeof P!="number")throw new TypeError('"size" argument must be of type number');if(P<0)throw new RangeError('The value "'+P+'" is invalid for option "size"')}function l(P,v,R){return s(P),P<=0?a(P):v!==void 0?typeof R=="string"?a(P).fill(v,R):a(P).fill(v):a(P)}u.alloc=function(P,v,R){return l(P,v,R)};function f(P){return s(P),a(P<0?0:_(P)|0)}u.allocUnsafe=function(P){return f(P)},u.allocUnsafeSlow=function(P){return f(P)};function d(P,v){if((typeof v!="string"||v==="")&&(v="utf8"),!u.isEncoding(v))throw new TypeError("Unknown encoding: "+v);const R=m(P,v)|0;let C=a(R);const k=C.write(P,v);return k!==R&&(C=C.slice(0,k)),C}function h(P){const v=P.length<0?0:_(P.length)|0,R=a(v);for(let C=0;C<v;C+=1)R[C]=P[C]&255;return R}function p(P){if(ue(P,Uint8Array)){const v=new Uint8Array(P);return y(v.buffer,v.byteOffset,v.byteLength)}return h(P)}function y(P,v,R){if(v<0||P.byteLength<v)throw new RangeError('"offset" is outside of buffer bounds');if(P.byteLength<v+(R||0))throw new RangeError('"length" is outside of buffer bounds');let C;return v===void 0&&R===void 0?C=new Uint8Array(P):R===void 0?C=new Uint8Array(P,v):C=new Uint8Array(P,v,R),Object.setPrototypeOf(C,u.prototype),C}function b(P){if(u.isBuffer(P)){const v=_(P.length)|0,R=a(v);return R.length===0||P.copy(R,0,0,v),R}if(P.length!==void 0)return typeof P.length!="number"||Te(P.length)?a(0):h(P);if(P.type==="Buffer"&&Array.isArray(P.data))return h(P.data)}function _(P){if(P>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return P|0}function T(P){return+P!=P&&(P=0),u.alloc(+P)}u.isBuffer=function(v){return v!=null&&v._isBuffer===!0&&v!==u.prototype},u.compare=function(v,R){if(ue(v,Uint8Array)&&(v=u.from(v,v.offset,v.byteLength)),ue(R,Uint8Array)&&(R=u.from(R,R.offset,R.byteLength)),!u.isBuffer(v)||!u.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(v===R)return 0;let C=v.length,k=R.length;for(let se=0,he=Math.min(C,k);se<he;++se)if(v[se]!==R[se]){C=v[se],k=R[se];break}return C<k?-1:k<C?1:0},u.isEncoding=function(v){switch(String(v).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(v,R){if(!Array.isArray(v))throw new TypeError('"list" argument must be an Array of Buffers');if(v.length===0)return u.alloc(0);let C;if(R===void 0)for(R=0,C=0;C<v.length;++C)R+=v[C].length;const k=u.allocUnsafe(R);let se=0;for(C=0;C<v.length;++C){let he=v[C];if(ue(he,Uint8Array))se+he.length>k.length?(u.isBuffer(he)||(he=u.from(he)),he.copy(k,se)):Uint8Array.prototype.set.call(k,he,se);else if(u.isBuffer(he))he.copy(k,se);else throw new TypeError('"list" argument must be an Array of Buffers');se+=he.length}return k};function m(P,v){if(u.isBuffer(P))return P.length;if(ArrayBuffer.isView(P)||ue(P,ArrayBuffer))return P.byteLength;if(typeof P!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof P);const R=P.length,C=arguments.length>2&&arguments[2]===!0;if(!C&&R===0)return 0;let k=!1;for(;;)switch(v){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return x(P).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return H(P).length;default:if(k)return C?-1:x(P).length;v=(""+v).toLowerCase(),k=!0}}u.byteLength=m;function A(P,v,R){let C=!1;if((v===void 0||v<0)&&(v=0),v>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,v>>>=0,R<=v))return"";for(P||(P="utf8");;)switch(P){case"hex":return pe(this,v,R);case"utf8":case"utf-8":return V(this,v,R);case"ascii":return ce(this,v,R);case"latin1":case"binary":return ae(this,v,R);case"base64":return I(this,v,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,v,R);default:if(C)throw new TypeError("Unknown encoding: "+P);P=(P+"").toLowerCase(),C=!0}}u.prototype._isBuffer=!0;function E(P,v,R){const C=P[v];P[v]=P[R],P[R]=C}u.prototype.swap16=function(){const v=this.length;if(v%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let R=0;R<v;R+=2)E(this,R,R+1);return this},u.prototype.swap32=function(){const v=this.length;if(v%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let R=0;R<v;R+=4)E(this,R,R+3),E(this,R+1,R+2);return this},u.prototype.swap64=function(){const v=this.length;if(v%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let R=0;R<v;R+=8)E(this,R,R+7),E(this,R+1,R+6),E(this,R+2,R+5),E(this,R+3,R+4);return this},u.prototype.toString=function(){const v=this.length;return v===0?"":arguments.length===0?V(this,0,v):A.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(v){if(!u.isBuffer(v))throw new TypeError("Argument must be a Buffer");return this===v?!0:u.compare(this,v)===0},u.prototype.inspect=function(){let v="";const R=n.INSPECT_MAX_BYTES;return v=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(v+=" ... "),"<Buffer "+v+">"},i&&(u.prototype[i]=u.prototype.inspect),u.prototype.compare=function(v,R,C,k,se){if(ue(v,Uint8Array)&&(v=u.from(v,v.offset,v.byteLength)),!u.isBuffer(v))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof v);if(R===void 0&&(R=0),C===void 0&&(C=v?v.length:0),k===void 0&&(k=0),se===void 0&&(se=this.length),R<0||C>v.length||k<0||se>this.length)throw new RangeError("out of range index");if(k>=se&&R>=C)return 0;if(k>=se)return-1;if(R>=C)return 1;if(R>>>=0,C>>>=0,k>>>=0,se>>>=0,this===v)return 0;let he=se-k,Ie=C-R;const Me=Math.min(he,Ie),Ue=this.slice(k,se),Ce=v.slice(R,C);for(let z=0;z<Me;++z)if(Ue[z]!==Ce[z]){he=Ue[z],Ie=Ce[z];break}return he<Ie?-1:Ie<he?1:0};function j(P,v,R,C,k){if(P.length===0)return-1;if(typeof R=="string"?(C=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,Te(R)&&(R=k?0:P.length-1),R<0&&(R=P.length+R),R>=P.length){if(k)return-1;R=P.length-1}else if(R<0)if(k)R=0;else return-1;if(typeof v=="string"&&(v=u.from(v,C)),u.isBuffer(v))return v.length===0?-1:X(P,v,R,C,k);if(typeof v=="number")return v=v&255,typeof Uint8Array.prototype.indexOf=="function"?k?Uint8Array.prototype.indexOf.call(P,v,R):Uint8Array.prototype.lastIndexOf.call(P,v,R):X(P,[v],R,C,k);throw new TypeError("val must be string, number or Buffer")}function X(P,v,R,C,k){let se=1,he=P.length,Ie=v.length;if(C!==void 0&&(C=String(C).toLowerCase(),C==="ucs2"||C==="ucs-2"||C==="utf16le"||C==="utf-16le")){if(P.length<2||v.length<2)return-1;se=2,he/=2,Ie/=2,R/=2}function Me(Ce,z){return se===1?Ce[z]:Ce.readUInt16BE(z*se)}let Ue;if(k){let Ce=-1;for(Ue=R;Ue<he;Ue++)if(Me(P,Ue)===Me(v,Ce===-1?0:Ue-Ce)){if(Ce===-1&&(Ce=Ue),Ue-Ce+1===Ie)return Ce*se}else Ce!==-1&&(Ue-=Ue-Ce),Ce=-1}else for(R+Ie>he&&(R=he-Ie),Ue=R;Ue>=0;Ue--){let Ce=!0;for(let z=0;z<Ie;z++)if(Me(P,Ue+z)!==Me(v,z)){Ce=!1;break}if(Ce)return Ue}return-1}u.prototype.includes=function(v,R,C){return this.indexOf(v,R,C)!==-1},u.prototype.indexOf=function(v,R,C){return j(this,v,R,C,!0)},u.prototype.lastIndexOf=function(v,R,C){return j(this,v,R,C,!1)};function K(P,v,R,C){R=Number(R)||0;const k=P.length-R;C?(C=Number(C),C>k&&(C=k)):C=k;const se=v.length;C>se/2&&(C=se/2);let he;for(he=0;he<C;++he){const Ie=parseInt(v.substr(he*2,2),16);if(Te(Ie))return he;P[R+he]=Ie}return he}function O(P,v,R,C){return ne(x(v,P.length-R),P,R,C)}function S(P,v,R,C){return ne($(v),P,R,C)}function L(P,v,R,C){return ne(H(v),P,R,C)}function N(P,v,R,C){return ne(B(v,P.length-R),P,R,C)}u.prototype.write=function(v,R,C,k){if(R===void 0)k="utf8",C=this.length,R=0;else if(C===void 0&&typeof R=="string")k=R,C=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(C)?(C=C>>>0,k===void 0&&(k="utf8")):(k=C,C=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const se=this.length-R;if((C===void 0||C>se)&&(C=se),v.length>0&&(C<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");k||(k="utf8");let he=!1;for(;;)switch(k){case"hex":return K(this,v,R,C);case"utf8":case"utf-8":return O(this,v,R,C);case"ascii":case"latin1":case"binary":return S(this,v,R,C);case"base64":return L(this,v,R,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,v,R,C);default:if(he)throw new TypeError("Unknown encoding: "+k);k=(""+k).toLowerCase(),he=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function I(P,v,R){return v===0&&R===P.length?t.fromByteArray(P):t.fromByteArray(P.slice(v,R))}function V(P,v,R){R=Math.min(P.length,R);const C=[];let k=v;for(;k<R;){const se=P[k];let he=null,Ie=se>239?4:se>223?3:se>191?2:1;if(k+Ie<=R){let Me,Ue,Ce,z;switch(Ie){case 1:se<128&&(he=se);break;case 2:Me=P[k+1],(Me&192)===128&&(z=(se&31)<<6|Me&63,z>127&&(he=z));break;case 3:Me=P[k+1],Ue=P[k+2],(Me&192)===128&&(Ue&192)===128&&(z=(se&15)<<12|(Me&63)<<6|Ue&63,z>2047&&(z<55296||z>57343)&&(he=z));break;case 4:Me=P[k+1],Ue=P[k+2],Ce=P[k+3],(Me&192)===128&&(Ue&192)===128&&(Ce&192)===128&&(z=(se&15)<<18|(Me&63)<<12|(Ue&63)<<6|Ce&63,z>65535&&z<1114112&&(he=z))}}he===null?(he=65533,Ie=1):he>65535&&(he-=65536,C.push(he>>>10&1023|55296),he=56320|he&1023),C.push(he),k+=Ie}return Y(C)}const re=4096;function Y(P){const v=P.length;if(v<=re)return String.fromCharCode.apply(String,P);let R="",C=0;for(;C<v;)R+=String.fromCharCode.apply(String,P.slice(C,C+=re));return R}function ce(P,v,R){let C="";R=Math.min(P.length,R);for(let k=v;k<R;++k)C+=String.fromCharCode(P[k]&127);return C}function ae(P,v,R){let C="";R=Math.min(P.length,R);for(let k=v;k<R;++k)C+=String.fromCharCode(P[k]);return C}function pe(P,v,R){const C=P.length;(!v||v<0)&&(v=0),(!R||R<0||R>C)&&(R=C);let k="";for(let se=v;se<R;++se)k+=Fe[P[se]];return k}function U(P,v,R){const C=P.slice(v,R);let k="";for(let se=0;se<C.length-1;se+=2)k+=String.fromCharCode(C[se]+C[se+1]*256);return k}u.prototype.slice=function(v,R){const C=this.length;v=~~v,R=R===void 0?C:~~R,v<0?(v+=C,v<0&&(v=0)):v>C&&(v=C),R<0?(R+=C,R<0&&(R=0)):R>C&&(R=C),R<v&&(R=v);const k=this.subarray(v,R);return Object.setPrototypeOf(k,u.prototype),k};function le(P,v,R){if(P%1!==0||P<0)throw new RangeError("offset is not uint");if(P+v>R)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(v,R,C){v=v>>>0,R=R>>>0,C||le(v,R,this.length);let k=this[v],se=1,he=0;for(;++he<R&&(se*=256);)k+=this[v+he]*se;return k},u.prototype.readUintBE=u.prototype.readUIntBE=function(v,R,C){v=v>>>0,R=R>>>0,C||le(v,R,this.length);let k=this[v+--R],se=1;for(;R>0&&(se*=256);)k+=this[v+--R]*se;return k},u.prototype.readUint8=u.prototype.readUInt8=function(v,R){return v=v>>>0,R||le(v,1,this.length),this[v]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(v,R){return v=v>>>0,R||le(v,2,this.length),this[v]|this[v+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(v,R){return v=v>>>0,R||le(v,2,this.length),this[v]<<8|this[v+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(v,R){return v=v>>>0,R||le(v,4,this.length),(this[v]|this[v+1]<<8|this[v+2]<<16)+this[v+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(v,R){return v=v>>>0,R||le(v,4,this.length),this[v]*16777216+(this[v+1]<<16|this[v+2]<<8|this[v+3])},u.prototype.readBigUInt64LE=Z(function(v){v=v>>>0,g(v,"offset");const R=this[v],C=this[v+7];(R===void 0||C===void 0)&&F(v,this.length-8);const k=R+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24,se=this[++v]+this[++v]*2**8+this[++v]*2**16+C*2**24;return BigInt(k)+(BigInt(se)<<BigInt(32))}),u.prototype.readBigUInt64BE=Z(function(v){v=v>>>0,g(v,"offset");const R=this[v],C=this[v+7];(R===void 0||C===void 0)&&F(v,this.length-8);const k=R*2**24+this[++v]*2**16+this[++v]*2**8+this[++v],se=this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+C;return(BigInt(k)<<BigInt(32))+BigInt(se)}),u.prototype.readIntLE=function(v,R,C){v=v>>>0,R=R>>>0,C||le(v,R,this.length);let k=this[v],se=1,he=0;for(;++he<R&&(se*=256);)k+=this[v+he]*se;return se*=128,k>=se&&(k-=Math.pow(2,8*R)),k},u.prototype.readIntBE=function(v,R,C){v=v>>>0,R=R>>>0,C||le(v,R,this.length);let k=R,se=1,he=this[v+--k];for(;k>0&&(se*=256);)he+=this[v+--k]*se;return se*=128,he>=se&&(he-=Math.pow(2,8*R)),he},u.prototype.readInt8=function(v,R){return v=v>>>0,R||le(v,1,this.length),this[v]&128?(255-this[v]+1)*-1:this[v]},u.prototype.readInt16LE=function(v,R){v=v>>>0,R||le(v,2,this.length);const C=this[v]|this[v+1]<<8;return C&32768?C|4294901760:C},u.prototype.readInt16BE=function(v,R){v=v>>>0,R||le(v,2,this.length);const C=this[v+1]|this[v]<<8;return C&32768?C|4294901760:C},u.prototype.readInt32LE=function(v,R){return v=v>>>0,R||le(v,4,this.length),this[v]|this[v+1]<<8|this[v+2]<<16|this[v+3]<<24},u.prototype.readInt32BE=function(v,R){return v=v>>>0,R||le(v,4,this.length),this[v]<<24|this[v+1]<<16|this[v+2]<<8|this[v+3]},u.prototype.readBigInt64LE=Z(function(v){v=v>>>0,g(v,"offset");const R=this[v],C=this[v+7];(R===void 0||C===void 0)&&F(v,this.length-8);const k=this[v+4]+this[v+5]*2**8+this[v+6]*2**16+(C<<24);return(BigInt(k)<<BigInt(32))+BigInt(R+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24)}),u.prototype.readBigInt64BE=Z(function(v){v=v>>>0,g(v,"offset");const R=this[v],C=this[v+7];(R===void 0||C===void 0)&&F(v,this.length-8);const k=(R<<24)+this[++v]*2**16+this[++v]*2**8+this[++v];return(BigInt(k)<<BigInt(32))+BigInt(this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+C)}),u.prototype.readFloatLE=function(v,R){return v=v>>>0,R||le(v,4,this.length),o.read(this,v,!0,23,4)},u.prototype.readFloatBE=function(v,R){return v=v>>>0,R||le(v,4,this.length),o.read(this,v,!1,23,4)},u.prototype.readDoubleLE=function(v,R){return v=v>>>0,R||le(v,8,this.length),o.read(this,v,!0,52,8)},u.prototype.readDoubleBE=function(v,R){return v=v>>>0,R||le(v,8,this.length),o.read(this,v,!1,52,8)};function me(P,v,R,C,k,se){if(!u.isBuffer(P))throw new TypeError('"buffer" argument must be a Buffer instance');if(v>k||v<se)throw new RangeError('"value" argument is out of bounds');if(R+C>P.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(v,R,C,k){if(v=+v,R=R>>>0,C=C>>>0,!k){const Ie=Math.pow(2,8*C)-1;me(this,v,R,C,Ie,0)}let se=1,he=0;for(this[R]=v&255;++he<C&&(se*=256);)this[R+he]=v/se&255;return R+C},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(v,R,C,k){if(v=+v,R=R>>>0,C=C>>>0,!k){const Ie=Math.pow(2,8*C)-1;me(this,v,R,C,Ie,0)}let se=C-1,he=1;for(this[R+se]=v&255;--se>=0&&(he*=256);)this[R+se]=v/he&255;return R+C},u.prototype.writeUint8=u.prototype.writeUInt8=function(v,R,C){return v=+v,R=R>>>0,C||me(this,v,R,1,255,0),this[R]=v&255,R+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(v,R,C){return v=+v,R=R>>>0,C||me(this,v,R,2,65535,0),this[R]=v&255,this[R+1]=v>>>8,R+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(v,R,C){return v=+v,R=R>>>0,C||me(this,v,R,2,65535,0),this[R]=v>>>8,this[R+1]=v&255,R+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(v,R,C){return v=+v,R=R>>>0,C||me(this,v,R,4,4294967295,0),this[R+3]=v>>>24,this[R+2]=v>>>16,this[R+1]=v>>>8,this[R]=v&255,R+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(v,R,C){return v=+v,R=R>>>0,C||me(this,v,R,4,4294967295,0),this[R]=v>>>24,this[R+1]=v>>>16,this[R+2]=v>>>8,this[R+3]=v&255,R+4};function te(P,v,R,C,k){D(v,C,k,P,R,7);let se=Number(v&BigInt(4294967295));P[R++]=se,se=se>>8,P[R++]=se,se=se>>8,P[R++]=se,se=se>>8,P[R++]=se;let he=Number(v>>BigInt(32)&BigInt(4294967295));return P[R++]=he,he=he>>8,P[R++]=he,he=he>>8,P[R++]=he,he=he>>8,P[R++]=he,R}function de(P,v,R,C,k){D(v,C,k,P,R,7);let se=Number(v&BigInt(4294967295));P[R+7]=se,se=se>>8,P[R+6]=se,se=se>>8,P[R+5]=se,se=se>>8,P[R+4]=se;let he=Number(v>>BigInt(32)&BigInt(4294967295));return P[R+3]=he,he=he>>8,P[R+2]=he,he=he>>8,P[R+1]=he,he=he>>8,P[R]=he,R+8}u.prototype.writeBigUInt64LE=Z(function(v,R=0){return te(this,v,R,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Z(function(v,R=0){return de(this,v,R,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(v,R,C,k){if(v=+v,R=R>>>0,!k){const Me=Math.pow(2,8*C-1);me(this,v,R,C,Me-1,-Me)}let se=0,he=1,Ie=0;for(this[R]=v&255;++se<C&&(he*=256);)v<0&&Ie===0&&this[R+se-1]!==0&&(Ie=1),this[R+se]=(v/he>>0)-Ie&255;return R+C},u.prototype.writeIntBE=function(v,R,C,k){if(v=+v,R=R>>>0,!k){const Me=Math.pow(2,8*C-1);me(this,v,R,C,Me-1,-Me)}let se=C-1,he=1,Ie=0;for(this[R+se]=v&255;--se>=0&&(he*=256);)v<0&&Ie===0&&this[R+se+1]!==0&&(Ie=1),this[R+se]=(v/he>>0)-Ie&255;return R+C},u.prototype.writeInt8=function(v,R,C){return v=+v,R=R>>>0,C||me(this,v,R,1,127,-128),v<0&&(v=255+v+1),this[R]=v&255,R+1},u.prototype.writeInt16LE=function(v,R,C){return v=+v,R=R>>>0,C||me(this,v,R,2,32767,-32768),this[R]=v&255,this[R+1]=v>>>8,R+2},u.prototype.writeInt16BE=function(v,R,C){return v=+v,R=R>>>0,C||me(this,v,R,2,32767,-32768),this[R]=v>>>8,this[R+1]=v&255,R+2},u.prototype.writeInt32LE=function(v,R,C){return v=+v,R=R>>>0,C||me(this,v,R,4,2147483647,-2147483648),this[R]=v&255,this[R+1]=v>>>8,this[R+2]=v>>>16,this[R+3]=v>>>24,R+4},u.prototype.writeInt32BE=function(v,R,C){return v=+v,R=R>>>0,C||me(this,v,R,4,2147483647,-2147483648),v<0&&(v=4294967295+v+1),this[R]=v>>>24,this[R+1]=v>>>16,this[R+2]=v>>>8,this[R+3]=v&255,R+4},u.prototype.writeBigInt64LE=Z(function(v,R=0){return te(this,v,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Z(function(v,R=0){return de(this,v,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ee(P,v,R,C,k,se){if(R+C>P.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function Re(P,v,R,C,k){return v=+v,R=R>>>0,k||Ee(P,v,R,4),o.write(P,v,R,C,23,4),R+4}u.prototype.writeFloatLE=function(v,R,C){return Re(this,v,R,!0,C)},u.prototype.writeFloatBE=function(v,R,C){return Re(this,v,R,!1,C)};function De(P,v,R,C,k){return v=+v,R=R>>>0,k||Ee(P,v,R,8),o.write(P,v,R,C,52,8),R+8}u.prototype.writeDoubleLE=function(v,R,C){return De(this,v,R,!0,C)},u.prototype.writeDoubleBE=function(v,R,C){return De(this,v,R,!1,C)},u.prototype.copy=function(v,R,C,k){if(!u.isBuffer(v))throw new TypeError("argument should be a Buffer");if(C||(C=0),!k&&k!==0&&(k=this.length),R>=v.length&&(R=v.length),R||(R=0),k>0&&k<C&&(k=C),k===C||v.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(C<0||C>=this.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("sourceEnd out of bounds");k>this.length&&(k=this.length),v.length-R<k-C&&(k=v.length-R+C);const se=k-C;return this===v&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(R,C,k):Uint8Array.prototype.set.call(v,this.subarray(C,k),R),se},u.prototype.fill=function(v,R,C,k){if(typeof v=="string"){if(typeof R=="string"?(k=R,R=0,C=this.length):typeof C=="string"&&(k=C,C=this.length),k!==void 0&&typeof k!="string")throw new TypeError("encoding must be a string");if(typeof k=="string"&&!u.isEncoding(k))throw new TypeError("Unknown encoding: "+k);if(v.length===1){const he=v.charCodeAt(0);(k==="utf8"&&he<128||k==="latin1")&&(v=he)}}else typeof v=="number"?v=v&255:typeof v=="boolean"&&(v=Number(v));if(R<0||this.length<R||this.length<C)throw new RangeError("Out of range index");if(C<=R)return this;R=R>>>0,C=C===void 0?this.length:C>>>0,v||(v=0);let se;if(typeof v=="number")for(se=R;se<C;++se)this[se]=v;else{const he=u.isBuffer(v)?v:u.from(v,k),Ie=he.length;if(Ie===0)throw new TypeError('The value "'+v+'" is invalid for argument "value"');for(se=0;se<C-R;++se)this[se+R]=he[se%Ie]}return this};const fe={};function _e(P,v,R){fe[P]=class extends R{constructor(){super(),Object.defineProperty(this,"message",{value:v.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${P}]`,this.stack,delete this.name}get code(){return P}set code(k){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:k,writable:!0})}toString(){return`${this.name} [${P}]: ${this.message}`}}}_e("ERR_BUFFER_OUT_OF_BOUNDS",function(P){return P?`${P} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),_e("ERR_INVALID_ARG_TYPE",function(P,v){return`The "${P}" argument must be of type number. Received type ${typeof v}`},TypeError),_e("ERR_OUT_OF_RANGE",function(P,v,R){let C=`The value of "${P}" is out of range.`,k=R;return Number.isInteger(R)&&Math.abs(R)>2**32?k=q(String(R)):typeof R=="bigint"&&(k=String(R),(R>BigInt(2)**BigInt(32)||R<-(BigInt(2)**BigInt(32)))&&(k=q(k)),k+="n"),C+=` It must be ${v}. Received ${k}`,C},RangeError);function q(P){let v="",R=P.length;const C=P[0]==="-"?1:0;for(;R>=C+4;R-=3)v=`_${P.slice(R-3,R)}${v}`;return`${P.slice(0,R)}${v}`}function w(P,v,R){g(v,"offset"),(P[v]===void 0||P[v+R]===void 0)&&F(v,P.length-(R+1))}function D(P,v,R,C,k,se){if(P>R||P<v){const he=typeof v=="bigint"?"n":"";let Ie;throw v===0||v===BigInt(0)?Ie=`>= 0${he} and < 2${he} ** ${(se+1)*8}${he}`:Ie=`>= -(2${he} ** ${(se+1)*8-1}${he}) and < 2 ** ${(se+1)*8-1}${he}`,new fe.ERR_OUT_OF_RANGE("value",Ie,P)}w(C,k,se)}function g(P,v){if(typeof P!="number")throw new fe.ERR_INVALID_ARG_TYPE(v,"number",P)}function F(P,v,R){throw Math.floor(P)!==P?(g(P,R),new fe.ERR_OUT_OF_RANGE("offset","an integer",P)):v<0?new fe.ERR_BUFFER_OUT_OF_BOUNDS:new fe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${v}`,P)}const M=/[^+/0-9A-Za-z-_]/g;function Q(P){if(P=P.split("=")[0],P=P.trim().replace(M,""),P.length<2)return"";for(;P.length%4!==0;)P=P+"=";return P}function x(P,v){v=v||1/0;let R;const C=P.length;let k=null;const se=[];for(let he=0;he<C;++he){if(R=P.charCodeAt(he),R>55295&&R<57344){if(!k){if(R>56319){(v-=3)>-1&&se.push(239,191,189);continue}else if(he+1===C){(v-=3)>-1&&se.push(239,191,189);continue}k=R;continue}if(R<56320){(v-=3)>-1&&se.push(239,191,189),k=R;continue}R=(k-55296<<10|R-56320)+65536}else k&&(v-=3)>-1&&se.push(239,191,189);if(k=null,R<128){if((v-=1)<0)break;se.push(R)}else if(R<2048){if((v-=2)<0)break;se.push(R>>6|192,R&63|128)}else if(R<65536){if((v-=3)<0)break;se.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((v-=4)<0)break;se.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return se}function $(P){const v=[];for(let R=0;R<P.length;++R)v.push(P.charCodeAt(R)&255);return v}function B(P,v){let R,C,k;const se=[];for(let he=0;he<P.length&&!((v-=2)<0);++he)R=P.charCodeAt(he),C=R>>8,k=R%256,se.push(k),se.push(C);return se}function H(P){return t.toByteArray(Q(P))}function ne(P,v,R,C){let k;for(k=0;k<C&&!(k+R>=v.length||k>=P.length);++k)v[k+R]=P[k];return k}function ue(P,v){return P instanceof v||P!=null&&P.constructor!=null&&P.constructor.name!=null&&P.constructor.name===v.name}function Te(P){return P!==P}const Fe=(function(){const P="0123456789abcdef",v=new Array(256);for(let R=0;R<16;++R){const C=R*16;for(let k=0;k<16;++k)v[C+k]=P[R]+P[k]}return v})();function Z(P){return typeof BigInt>"u"?oe:P}function oe(){throw new Error("BigInt not supported")}})($1)),$1}var H1,WI;function jt(){if(WI)return H1;WI=1;class n extends Error{constructor(o){if(!Array.isArray(o))throw new TypeError(`Expected input to be an Array, got ${typeof o}`);let i="";for(let r=0;r<o.length;r++)i+=`    ${o[r].stack}
`;super(i),this.name="AggregateError",this.errors=o}}return H1={AggregateError:n,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,o){return t.includes(o)},ArrayPrototypeIndexOf(t,o){return t.indexOf(o)},ArrayPrototypeJoin(t,o){return t.join(o)},ArrayPrototypeMap(t,o){return t.map(o)},ArrayPrototypePop(t,o){return t.pop(o)},ArrayPrototypePush(t,o){return t.push(o)},ArrayPrototypeSlice(t,o,i){return t.slice(o,i)},Error,FunctionPrototypeCall(t,o,...i){return t.call(o,...i)},FunctionPrototypeSymbolHasInstance(t,o){return Function.prototype[Symbol.hasInstance].call(t,o)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,o){return Object.defineProperties(t,o)},ObjectDefineProperty(t,o,i){return Object.defineProperty(t,o,i)},ObjectGetOwnPropertyDescriptor(t,o){return Object.getOwnPropertyDescriptor(t,o)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,o){return Object.setPrototypeOf(t,o)},Promise,PromisePrototypeCatch(t,o){return t.catch(o)},PromisePrototypeThen(t,o,i){return t.then(o,i)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,o){return t.test(o)},SafeSet:Set,String,StringPrototypeSlice(t,o,i){return t.slice(o,i)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,o,i){return t.set(o,i)},Boolean,Uint8Array},H1}var J1={exports:{}},K1,YI;function F5(){return YI||(YI=1,K1={format(n,...t){return n.replace(/%([sdifj])/g,function(...[o,i]){const r=t.shift();return i==="f"?r.toFixed(6):i==="j"?JSON.stringify(r):i==="s"&&typeof r=="object"?`${r.constructor!==Object?r.constructor.name:""} {}`.trim():r.toString()})},inspect(n){switch(typeof n){case"string":if(n.includes("'"))if(n.includes('"')){if(!n.includes("`")&&!n.includes("${"))return`\`${n}\``}else return`"${n}"`;return`'${n}'`;case"number":return isNaN(n)?"NaN":Object.is(n,-0)?String(n):n;case"bigint":return`${String(n)}n`;case"boolean":case"undefined":return String(n);case"object":return"{}"}}}),K1}var W1,ZI;function dr(){if(ZI)return W1;ZI=1;const{format:n,inspect:t}=F5(),{AggregateError:o}=jt(),i=globalThis.AggregateError||o,r=Symbol("kIsNodeError"),e=["string","function","number","object","Function","Object","boolean","bigint","symbol"],a=/^([A-Z][a-z0-9]*)+$/,u="__node_internal_",c={};function s(b,_){if(!b)throw new c.ERR_INTERNAL_ASSERTION(_)}function l(b){let _="",T=b.length;const m=b[0]==="-"?1:0;for(;T>=m+4;T-=3)_=`_${b.slice(T-3,T)}${_}`;return`${b.slice(0,T)}${_}`}function f(b,_,T){if(typeof _=="function")return s(_.length<=T.length,`Code: ${b}; The provided arguments length (${T.length}) does not match the required ones (${_.length}).`),_(...T);const m=(_.match(/%[dfijoOs]/g)||[]).length;return s(m===T.length,`Code: ${b}; The provided arguments length (${T.length}) does not match the required ones (${m}).`),T.length===0?_:n(_,...T)}function d(b,_,T){T||(T=Error);class m extends T{constructor(...E){super(f(b,_,E))}toString(){return`${this.name} [${b}]: ${this.message}`}}Object.defineProperties(m.prototype,{name:{value:T.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${b}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),m.prototype.code=b,m.prototype[r]=!0,c[b]=m}function h(b){const _=u+b.name;return Object.defineProperty(b,"name",{value:_}),b}function p(b,_){if(b&&_&&b!==_){if(Array.isArray(_.errors))return _.errors.push(b),_;const T=new i([_,b],_.message);return T.code=_.code,T}return b||_}class y extends Error{constructor(_="The operation was aborted",T=void 0){if(T!==void 0&&typeof T!="object")throw new c.ERR_INVALID_ARG_TYPE("options","Object",T);super(_,T),this.code="ABORT_ERR",this.name="AbortError"}}return d("ERR_ASSERTION","%s",Error),d("ERR_INVALID_ARG_TYPE",(b,_,T)=>{s(typeof b=="string","'name' must be a string"),Array.isArray(_)||(_=[_]);let m="The ";b.endsWith(" argument")?m+=`${b} `:m+=`"${b}" ${b.includes(".")?"property":"argument"} `,m+="must be ";const A=[],E=[],j=[];for(const K of _)s(typeof K=="string","All expected entries have to be of type string"),e.includes(K)?A.push(K.toLowerCase()):a.test(K)?E.push(K):(s(K!=="object",'The value "object" should be written as "Object"'),j.push(K));if(E.length>0){const K=A.indexOf("object");K!==-1&&(A.splice(A,K,1),E.push("Object"))}if(A.length>0){switch(A.length){case 1:m+=`of type ${A[0]}`;break;case 2:m+=`one of type ${A[0]} or ${A[1]}`;break;default:{const K=A.pop();m+=`one of type ${A.join(", ")}, or ${K}`}}(E.length>0||j.length>0)&&(m+=" or ")}if(E.length>0){switch(E.length){case 1:m+=`an instance of ${E[0]}`;break;case 2:m+=`an instance of ${E[0]} or ${E[1]}`;break;default:{const K=E.pop();m+=`an instance of ${E.join(", ")}, or ${K}`}}j.length>0&&(m+=" or ")}switch(j.length){case 0:break;case 1:j[0].toLowerCase()!==j[0]&&(m+="an "),m+=`${j[0]}`;break;case 2:m+=`one of ${j[0]} or ${j[1]}`;break;default:{const K=j.pop();m+=`one of ${j.join(", ")}, or ${K}`}}if(T==null)m+=`. Received ${T}`;else if(typeof T=="function"&&T.name)m+=`. Received function ${T.name}`;else if(typeof T=="object"){var X;if((X=T.constructor)!==null&&X!==void 0&&X.name)m+=`. Received an instance of ${T.constructor.name}`;else{const K=t(T,{depth:-1});m+=`. Received ${K}`}}else{let K=t(T,{colors:!1});K.length>25&&(K=`${K.slice(0,25)}...`),m+=`. Received type ${typeof T} (${K})`}return m},TypeError),d("ERR_INVALID_ARG_VALUE",(b,_,T="is invalid")=>{let m=t(_);return m.length>128&&(m=m.slice(0,128)+"..."),`The ${b.includes(".")?"property":"argument"} '${b}' ${T}. Received ${m}`},TypeError),d("ERR_INVALID_RETURN_VALUE",(b,_,T)=>{var m;const A=T!=null&&(m=T.constructor)!==null&&m!==void 0&&m.name?`instance of ${T.constructor.name}`:`type ${typeof T}`;return`Expected ${b} to be returned from the "${_}" function but got ${A}.`},TypeError),d("ERR_MISSING_ARGS",(...b)=>{s(b.length>0,"At least one arg needs to be specified");let _;const T=b.length;switch(b=(Array.isArray(b)?b:[b]).map(m=>`"${m}"`).join(" or "),T){case 1:_+=`The ${b[0]} argument`;break;case 2:_+=`The ${b[0]} and ${b[1]} arguments`;break;default:{const m=b.pop();_+=`The ${b.join(", ")}, and ${m} arguments`}break}return`${_} must be specified`},TypeError),d("ERR_OUT_OF_RANGE",(b,_,T)=>{s(_,'Missing "range" argument');let m;if(Number.isInteger(T)&&Math.abs(T)>2**32)m=l(String(T));else if(typeof T=="bigint"){m=String(T);const A=BigInt(2)**BigInt(32);(T>A||T<-A)&&(m=l(m)),m+="n"}else m=t(T);return`The value of "${b}" is out of range. It must be ${_}. Received ${m}`},RangeError),d("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),d("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),d("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),d("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),d("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),d("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),d("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),d("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),d("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),d("ERR_STREAM_WRITE_AFTER_END","write after end",Error),d("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),W1={AbortError:y,aggregateTwoErrors:h(p),hideStackFrames:h,codes:c},W1}var Sg={exports:{}},kI;function Vg(){if(kI)return Sg.exports;kI=1;const{AbortController:n,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Sg.exports=n,Sg.exports.AbortSignal=t,Sg.exports.default=n,Sg.exports}var eL;function yr(){return eL||(eL=1,(function(n){const t=$n(),{format:o,inspect:i}=F5(),{codes:{ERR_INVALID_ARG_TYPE:r}}=dr(),{kResistStopPropagation:e,AggregateError:a,SymbolDispose:u}=jt(),c=globalThis.AbortSignal||Vg().AbortSignal,s=globalThis.AbortController||Vg().AbortController,l=Object.getPrototypeOf(async function(){}).constructor,f=globalThis.Blob||t.Blob,d=typeof f<"u"?function(b){return b instanceof f}:function(b){return!1},h=(y,b)=>{if(y!==void 0&&(y===null||typeof y!="object"||!("aborted"in y)))throw new r(b,"AbortSignal",y)},p=(y,b)=>{if(typeof y!="function")throw new r(b,"Function",y)};n.exports={AggregateError:a,kEmptyObject:Object.freeze({}),once(y){let b=!1;return function(..._){b||(b=!0,y.apply(this,_))}},createDeferredPromise:function(){let y,b;return{promise:new Promise((T,m)=>{y=T,b=m}),resolve:y,reject:b}},promisify(y){return new Promise((b,_)=>{y((T,...m)=>T?_(T):b(...m))})},debuglog(){return function(){}},format:o,inspect:i,types:{isAsyncFunction(y){return y instanceof l},isArrayBufferView(y){return ArrayBuffer.isView(y)}},isBlob:d,deprecate(y,b){return y},addAbortListener:nm().addAbortListener||function(b,_){if(b===void 0)throw new r("signal","AbortSignal",b);h(b,"signal"),p(_,"listener");let T;return b.aborted?queueMicrotask(()=>_()):(b.addEventListener("abort",_,{__proto__:null,once:!0,[e]:!0}),T=()=>{b.removeEventListener("abort",_)}),{__proto__:null,[u](){var m;(m=T)===null||m===void 0||m()}}},AbortSignalAny:c.any||function(b){if(b.length===1)return b[0];const _=new s,T=()=>_.abort();return b.forEach(m=>{h(m,"signals"),m.addEventListener("abort",T,{once:!0})}),_.signal.addEventListener("abort",()=>{b.forEach(m=>m.removeEventListener("abort",T))},{once:!0}),_.signal}},n.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(J1)),J1.exports}var eb={},Y1,tL;function om(){if(tL)return Y1;tL=1;const{ArrayIsArray:n,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:o,ArrayPrototypeMap:i,NumberIsInteger:r,NumberIsNaN:e,NumberMAX_SAFE_INTEGER:a,NumberMIN_SAFE_INTEGER:u,NumberParseInt:c,ObjectPrototypeHasOwnProperty:s,RegExpPrototypeExec:l,String:f,StringPrototypeToUpperCase:d,StringPrototypeTrim:h}=jt(),{hideStackFrames:p,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:b,ERR_INVALID_ARG_VALUE:_,ERR_OUT_OF_RANGE:T,ERR_UNKNOWN_SIGNAL:m}}=dr(),{normalizeEncoding:A}=yr(),{isAsyncFunction:E,isArrayBufferView:j}=yr().types,X={};function K(B){return B===(B|0)}function O(B){return B===B>>>0}const S=/^[0-7]+$/,L="must be a 32-bit unsigned integer or an octal string";function N(B,H,ne){if(typeof B>"u"&&(B=ne),typeof B=="string"){if(l(S,B)===null)throw new _(H,B,L);B=c(B,8)}return re(B,H),B}const I=p((B,H,ne=u,ue=a)=>{if(typeof B!="number")throw new b(H,"number",B);if(!r(B))throw new T(H,"an integer",B);if(B<ne||B>ue)throw new T(H,`>= ${ne} && <= ${ue}`,B)}),V=p((B,H,ne=-2147483648,ue=2147483647)=>{if(typeof B!="number")throw new b(H,"number",B);if(!r(B))throw new T(H,"an integer",B);if(B<ne||B>ue)throw new T(H,`>= ${ne} && <= ${ue}`,B)}),re=p((B,H,ne=!1)=>{if(typeof B!="number")throw new b(H,"number",B);if(!r(B))throw new T(H,"an integer",B);const ue=ne?1:0,Te=4294967295;if(B<ue||B>Te)throw new T(H,`>= ${ue} && <= ${Te}`,B)});function Y(B,H){if(typeof B!="string")throw new b(H,"string",B)}function ce(B,H,ne=void 0,ue){if(typeof B!="number")throw new b(H,"number",B);if(ne!=null&&B<ne||ue!=null&&B>ue||(ne!=null||ue!=null)&&e(B))throw new T(H,`${ne!=null?`>= ${ne}`:""}${ne!=null&&ue!=null?" && ":""}${ue!=null?`<= ${ue}`:""}`,B)}const ae=p((B,H,ne)=>{if(!t(ne,B)){const Te="must be one of: "+o(i(ne,Fe=>typeof Fe=="string"?`'${Fe}'`:f(Fe)),", ");throw new _(H,B,Te)}});function pe(B,H){if(typeof B!="boolean")throw new b(H,"boolean",B)}function U(B,H,ne){return B==null||!s(B,H)?ne:B[H]}const le=p((B,H,ne=null)=>{const ue=U(ne,"allowArray",!1),Te=U(ne,"allowFunction",!1);if(!U(ne,"nullable",!1)&&B===null||!ue&&n(B)||typeof B!="object"&&(!Te||typeof B!="function"))throw new b(H,"Object",B)}),me=p((B,H)=>{if(B!=null&&typeof B!="object"&&typeof B!="function")throw new b(H,"a dictionary",B)}),te=p((B,H,ne=0)=>{if(!n(B))throw new b(H,"Array",B);if(B.length<ne){const ue=`must be longer than ${ne}`;throw new _(H,B,ue)}});function de(B,H){te(B,H);for(let ne=0;ne<B.length;ne++)Y(B[ne],`${H}[${ne}]`)}function Ee(B,H){te(B,H);for(let ne=0;ne<B.length;ne++)pe(B[ne],`${H}[${ne}]`)}function Re(B,H){te(B,H);for(let ne=0;ne<B.length;ne++){const ue=B[ne],Te=`${H}[${ne}]`;if(ue==null)throw new b(Te,"AbortSignal",ue);w(ue,Te)}}function De(B,H="signal"){if(Y(B,H),X[B]===void 0)throw X[d(B)]!==void 0?new m(B+" (signals must use all capital letters)"):new m(B)}const fe=p((B,H="buffer")=>{if(!j(B))throw new b(H,["Buffer","TypedArray","DataView"],B)});function _e(B,H){const ne=A(H),ue=B.length;if(ne==="hex"&&ue%2!==0)throw new _("encoding",H,`is invalid for data of length ${ue}`)}function q(B,H="Port",ne=!0){if(typeof B!="number"&&typeof B!="string"||typeof B=="string"&&h(B).length===0||+B!==+B>>>0||B>65535||B===0&&!ne)throw new y(H,B,ne);return B|0}const w=p((B,H)=>{if(B!==void 0&&(B===null||typeof B!="object"||!("aborted"in B)))throw new b(H,"AbortSignal",B)}),D=p((B,H)=>{if(typeof B!="function")throw new b(H,"Function",B)}),g=p((B,H)=>{if(typeof B!="function"||E(B))throw new b(H,"Function",B)}),F=p((B,H)=>{if(B!==void 0)throw new b(H,"undefined",B)});function M(B,H,ne){if(!t(ne,B))throw new b(H,`('${o(ne,"|")}')`,B)}const Q=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function x(B,H){if(typeof B>"u"||!l(Q,B))throw new _(H,B,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function $(B){if(typeof B=="string")return x(B,"hints"),B;if(n(B)){const H=B.length;let ne="";if(H===0)return ne;for(let ue=0;ue<H;ue++){const Te=B[ue];x(Te,"hints"),ne+=Te,ue!==H-1&&(ne+=", ")}return ne}throw new _("hints",B,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return Y1={isInt32:K,isUint32:O,parseFileMode:N,validateArray:te,validateStringArray:de,validateBooleanArray:Ee,validateAbortSignalArray:Re,validateBoolean:pe,validateBuffer:fe,validateDictionary:me,validateEncoding:_e,validateFunction:D,validateInt32:V,validateInteger:I,validateNumber:ce,validateObject:le,validateOneOf:ae,validatePlainFunction:g,validatePort:q,validateSignalName:De,validateString:Y,validateUint32:re,validateUndefined:F,validateUnion:M,validateAbortSignal:w,validateLinkHeaderValue:$},Y1}var tb={exports:{}},Z1,rL;function wn(){if(rL)return Z1;rL=1;const{SymbolAsyncIterator:n,SymbolIterator:t,SymbolFor:o}=jt(),i=o("nodejs.stream.destroyed"),r=o("nodejs.stream.errored"),e=o("nodejs.stream.readable"),a=o("nodejs.stream.writable"),u=o("nodejs.stream.disturbed"),c=o("nodejs.webstream.isClosedPromise"),s=o("nodejs.webstream.controllerErrorFunction");function l(U,le=!1){var me;return!!(U&&typeof U.pipe=="function"&&typeof U.on=="function"&&(!le||typeof U.pause=="function"&&typeof U.resume=="function")&&(!U._writableState||((me=U._readableState)===null||me===void 0?void 0:me.readable)!==!1)&&(!U._writableState||U._readableState))}function f(U){var le;return!!(U&&typeof U.write=="function"&&typeof U.on=="function"&&(!U._readableState||((le=U._writableState)===null||le===void 0?void 0:le.writable)!==!1))}function d(U){return!!(U&&typeof U.pipe=="function"&&U._readableState&&typeof U.on=="function"&&typeof U.write=="function")}function h(U){return U&&(U._readableState||U._writableState||typeof U.write=="function"&&typeof U.on=="function"||typeof U.pipe=="function"&&typeof U.on=="function")}function p(U){return!!(U&&!h(U)&&typeof U.pipeThrough=="function"&&typeof U.getReader=="function"&&typeof U.cancel=="function")}function y(U){return!!(U&&!h(U)&&typeof U.getWriter=="function"&&typeof U.abort=="function")}function b(U){return!!(U&&!h(U)&&typeof U.readable=="object"&&typeof U.writable=="object")}function _(U){return p(U)||y(U)||b(U)}function T(U,le){return U==null?!1:le===!0?typeof U[n]=="function":le===!1?typeof U[t]=="function":typeof U[n]=="function"||typeof U[t]=="function"}function m(U){if(!h(U))return null;const le=U._writableState,me=U._readableState,te=le||me;return!!(U.destroyed||U[i]||te!=null&&te.destroyed)}function A(U){if(!f(U))return null;if(U.writableEnded===!0)return!0;const le=U._writableState;return le!=null&&le.errored?!1:typeof le?.ended!="boolean"?null:le.ended}function E(U,le){if(!f(U))return null;if(U.writableFinished===!0)return!0;const me=U._writableState;return me!=null&&me.errored?!1:typeof me?.finished!="boolean"?null:!!(me.finished||le===!1&&me.ended===!0&&me.length===0)}function j(U){if(!l(U))return null;if(U.readableEnded===!0)return!0;const le=U._readableState;return!le||le.errored?!1:typeof le?.ended!="boolean"?null:le.ended}function X(U,le){if(!l(U))return null;const me=U._readableState;return me!=null&&me.errored?!1:typeof me?.endEmitted!="boolean"?null:!!(me.endEmitted||le===!1&&me.ended===!0&&me.length===0)}function K(U){return U&&U[e]!=null?U[e]:typeof U?.readable!="boolean"?null:m(U)?!1:l(U)&&U.readable&&!X(U)}function O(U){return U&&U[a]!=null?U[a]:typeof U?.writable!="boolean"?null:m(U)?!1:f(U)&&U.writable&&!A(U)}function S(U,le){return h(U)?m(U)?!0:!(le?.readable!==!1&&K(U)||le?.writable!==!1&&O(U)):null}function L(U){var le,me;return h(U)?U.writableErrored?U.writableErrored:(le=(me=U._writableState)===null||me===void 0?void 0:me.errored)!==null&&le!==void 0?le:null:null}function N(U){var le,me;return h(U)?U.readableErrored?U.readableErrored:(le=(me=U._readableState)===null||me===void 0?void 0:me.errored)!==null&&le!==void 0?le:null:null}function I(U){if(!h(U))return null;if(typeof U.closed=="boolean")return U.closed;const le=U._writableState,me=U._readableState;return typeof le?.closed=="boolean"||typeof me?.closed=="boolean"?le?.closed||me?.closed:typeof U._closed=="boolean"&&V(U)?U._closed:null}function V(U){return typeof U._closed=="boolean"&&typeof U._defaultKeepAlive=="boolean"&&typeof U._removedConnection=="boolean"&&typeof U._removedContLen=="boolean"}function re(U){return typeof U._sent100=="boolean"&&V(U)}function Y(U){var le;return typeof U._consuming=="boolean"&&typeof U._dumped=="boolean"&&((le=U.req)===null||le===void 0?void 0:le.upgradeOrConnect)===void 0}function ce(U){if(!h(U))return null;const le=U._writableState,me=U._readableState,te=le||me;return!te&&re(U)||!!(te&&te.autoDestroy&&te.emitClose&&te.closed===!1)}function ae(U){var le;return!!(U&&((le=U[u])!==null&&le!==void 0?le:U.readableDidRead||U.readableAborted))}function pe(U){var le,me,te,de,Ee,Re,De,fe,_e,q;return!!(U&&((le=(me=(te=(de=(Ee=(Re=U[r])!==null&&Re!==void 0?Re:U.readableErrored)!==null&&Ee!==void 0?Ee:U.writableErrored)!==null&&de!==void 0?de:(De=U._readableState)===null||De===void 0?void 0:De.errorEmitted)!==null&&te!==void 0?te:(fe=U._writableState)===null||fe===void 0?void 0:fe.errorEmitted)!==null&&me!==void 0?me:(_e=U._readableState)===null||_e===void 0?void 0:_e.errored)!==null&&le!==void 0?le:!((q=U._writableState)===null||q===void 0)&&q.errored))}return Z1={isDestroyed:m,kIsDestroyed:i,isDisturbed:ae,kIsDisturbed:u,isErrored:pe,kIsErrored:r,isReadable:K,kIsReadable:e,kIsClosedPromise:c,kControllerErrorFunction:s,kIsWritable:a,isClosed:I,isDuplexNodeStream:d,isFinished:S,isIterable:T,isReadableNodeStream:l,isReadableStream:p,isReadableEnded:j,isReadableFinished:X,isReadableErrored:N,isNodeStream:h,isWebStream:_,isWritable:O,isWritableNodeStream:f,isWritableStream:y,isWritableEnded:A,isWritableFinished:E,isWritableErrored:L,isServerRequest:Y,isServerResponse:re,willEmitClose:ce,isTransformStream:b},Z1}var nL;function Hn(){if(nL)return tb.exports;nL=1;const n=Un(),{AbortError:t,codes:o}=dr(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_PREMATURE_CLOSE:r}=o,{kEmptyObject:e,once:a}=yr(),{validateAbortSignal:u,validateFunction:c,validateObject:s,validateBoolean:l}=om(),{Promise:f,PromisePrototypeThen:d,SymbolDispose:h}=jt(),{isClosed:p,isReadable:y,isReadableNodeStream:b,isReadableStream:_,isReadableFinished:T,isReadableErrored:m,isWritable:A,isWritableNodeStream:E,isWritableStream:j,isWritableFinished:X,isWritableErrored:K,isNodeStream:O,willEmitClose:S,kIsClosedPromise:L}=wn();let N;function I(ae){return ae.setHeader&&typeof ae.abort=="function"}const V=()=>{};function re(ae,pe,U){var le,me;if(arguments.length===2?(U=pe,pe=e):pe==null?pe=e:s(pe,"options"),c(U,"callback"),u(pe.signal,"options.signal"),U=a(U),_(ae)||j(ae))return Y(ae,pe,U);if(!O(ae))throw new i("stream",["ReadableStream","WritableStream","Stream"],ae);const te=(le=pe.readable)!==null&&le!==void 0?le:b(ae),de=(me=pe.writable)!==null&&me!==void 0?me:E(ae),Ee=ae._writableState,Re=ae._readableState,De=()=>{ae.writable||q()};let fe=S(ae)&&b(ae)===te&&E(ae)===de,_e=X(ae,!1);const q=()=>{_e=!0,ae.destroyed&&(fe=!1),!(fe&&(!ae.readable||te))&&(!te||w)&&U.call(ae)};let w=T(ae,!1);const D=()=>{w=!0,ae.destroyed&&(fe=!1),!(fe&&(!ae.writable||de))&&(!de||_e)&&U.call(ae)},g=B=>{U.call(ae,B)};let F=p(ae);const M=()=>{F=!0;const B=K(ae)||m(ae);if(B&&typeof B!="boolean")return U.call(ae,B);if(te&&!w&&b(ae,!0)&&!T(ae,!1))return U.call(ae,new r);if(de&&!_e&&!X(ae,!1))return U.call(ae,new r);U.call(ae)},Q=()=>{F=!0;const B=K(ae)||m(ae);if(B&&typeof B!="boolean")return U.call(ae,B);U.call(ae)},x=()=>{ae.req.on("finish",q)};I(ae)?(ae.on("complete",q),fe||ae.on("abort",M),ae.req?x():ae.on("request",x)):de&&!Ee&&(ae.on("end",De),ae.on("close",De)),!fe&&typeof ae.aborted=="boolean"&&ae.on("aborted",M),ae.on("end",D),ae.on("finish",q),pe.error!==!1&&ae.on("error",g),ae.on("close",M),F?n.nextTick(M):Ee!=null&&Ee.errorEmitted||Re!=null&&Re.errorEmitted?fe||n.nextTick(Q):(!te&&(!fe||y(ae))&&(_e||A(ae)===!1)||!de&&(!fe||A(ae))&&(w||y(ae)===!1)||Re&&ae.req&&ae.aborted)&&n.nextTick(Q);const $=()=>{U=V,ae.removeListener("aborted",M),ae.removeListener("complete",q),ae.removeListener("abort",M),ae.removeListener("request",x),ae.req&&ae.req.removeListener("finish",q),ae.removeListener("end",De),ae.removeListener("close",De),ae.removeListener("finish",q),ae.removeListener("end",D),ae.removeListener("error",g),ae.removeListener("close",M)};if(pe.signal&&!F){const B=()=>{const H=U;$(),H.call(ae,new t(void 0,{cause:pe.signal.reason}))};if(pe.signal.aborted)n.nextTick(B);else{N=N||yr().addAbortListener;const H=N(pe.signal,B),ne=U;U=a((...ue)=>{H[h](),ne.apply(ae,ue)})}}return $}function Y(ae,pe,U){let le=!1,me=V;if(pe.signal)if(me=()=>{le=!0,U.call(ae,new t(void 0,{cause:pe.signal.reason}))},pe.signal.aborted)n.nextTick(me);else{N=N||yr().addAbortListener;const de=N(pe.signal,me),Ee=U;U=a((...Re)=>{de[h](),Ee.apply(ae,Re)})}const te=(...de)=>{le||n.nextTick(()=>U.apply(ae,de))};return d(ae[L].promise,te,te),V}function ce(ae,pe){var U;let le=!1;return pe===null&&(pe=e),(U=pe)!==null&&U!==void 0&&U.cleanup&&(l(pe.cleanup,"cleanup"),le=pe.cleanup),new f((me,te)=>{const de=re(ae,pe,Ee=>{le&&de(),Ee?te(Ee):me()})})}return tb.exports=re,tb.exports.finished=ce,tb.exports}var k1,iL;function Tc(){if(iL)return k1;iL=1;const n=Un(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:o},AbortError:i}=dr(),{Symbol:r}=jt(),{kIsDestroyed:e,isDestroyed:a,isFinished:u,isServerRequest:c}=wn(),s=r("kDestroy"),l=r("kConstruct");function f(S,L,N){S&&(S.stack,L&&!L.errored&&(L.errored=S),N&&!N.errored&&(N.errored=S))}function d(S,L){const N=this._readableState,I=this._writableState,V=I||N;return I!=null&&I.destroyed||N!=null&&N.destroyed?(typeof L=="function"&&L(),this):(f(S,I,N),I&&(I.destroyed=!0),N&&(N.destroyed=!0),V.constructed?h(this,S,L):this.once(s,function(re){h(this,t(re,S),L)}),this)}function h(S,L,N){let I=!1;function V(re){if(I)return;I=!0;const Y=S._readableState,ce=S._writableState;f(re,ce,Y),ce&&(ce.closed=!0),Y&&(Y.closed=!0),typeof N=="function"&&N(re),re?n.nextTick(p,S,re):n.nextTick(y,S)}try{S._destroy(L||null,V)}catch(re){V(re)}}function p(S,L){b(S,L),y(S)}function y(S){const L=S._readableState,N=S._writableState;N&&(N.closeEmitted=!0),L&&(L.closeEmitted=!0),(N!=null&&N.emitClose||L!=null&&L.emitClose)&&S.emit("close")}function b(S,L){const N=S._readableState,I=S._writableState;I!=null&&I.errorEmitted||N!=null&&N.errorEmitted||(I&&(I.errorEmitted=!0),N&&(N.errorEmitted=!0),S.emit("error",L))}function _(){const S=this._readableState,L=this._writableState;S&&(S.constructed=!0,S.closed=!1,S.closeEmitted=!1,S.destroyed=!1,S.errored=null,S.errorEmitted=!1,S.reading=!1,S.ended=S.readable===!1,S.endEmitted=S.readable===!1),L&&(L.constructed=!0,L.destroyed=!1,L.closed=!1,L.closeEmitted=!1,L.errored=null,L.errorEmitted=!1,L.finalCalled=!1,L.prefinished=!1,L.ended=L.writable===!1,L.ending=L.writable===!1,L.finished=L.writable===!1)}function T(S,L,N){const I=S._readableState,V=S._writableState;if(V!=null&&V.destroyed||I!=null&&I.destroyed)return this;I!=null&&I.autoDestroy||V!=null&&V.autoDestroy?S.destroy(L):L&&(L.stack,V&&!V.errored&&(V.errored=L),I&&!I.errored&&(I.errored=L),N?n.nextTick(b,S,L):b(S,L))}function m(S,L){if(typeof S._construct!="function")return;const N=S._readableState,I=S._writableState;N&&(N.constructed=!1),I&&(I.constructed=!1),S.once(l,L),!(S.listenerCount(l)>1)&&n.nextTick(A,S)}function A(S){let L=!1;function N(I){if(L){T(S,I??new o);return}L=!0;const V=S._readableState,re=S._writableState,Y=re||V;V&&(V.constructed=!0),re&&(re.constructed=!0),Y.destroyed?S.emit(s,I):I?T(S,I,!0):n.nextTick(E,S)}try{S._construct(I=>{n.nextTick(N,I)})}catch(I){n.nextTick(N,I)}}function E(S){S.emit(l)}function j(S){return S?.setHeader&&typeof S.abort=="function"}function X(S){S.emit("close")}function K(S,L){S.emit("error",L),n.nextTick(X,S)}function O(S,L){!S||a(S)||(!L&&!u(S)&&(L=new i),c(S)?(S.socket=null,S.destroy(L)):j(S)?S.abort():j(S.req)?S.req.abort():typeof S.destroy=="function"?S.destroy(L):typeof S.close=="function"?S.close():L?n.nextTick(K,S,L):n.nextTick(X,S),S.destroyed||(S[e]=!0))}return k1={construct:m,destroyer:O,destroy:d,undestroy:_,errorOrDestroy:T},k1}var ev,aL;function $T(){if(aL)return ev;aL=1;const{ArrayIsArray:n,ObjectSetPrototypeOf:t}=jt(),{EventEmitter:o}=nm();function i(e){o.call(this,e)}t(i.prototype,o.prototype),t(i,o),i.prototype.pipe=function(e,a){const u=this;function c(y){e.writable&&e.write(y)===!1&&u.pause&&u.pause()}u.on("data",c);function s(){u.readable&&u.resume&&u.resume()}e.on("drain",s),!e._isStdio&&(!a||a.end!==!1)&&(u.on("end",f),u.on("close",d));let l=!1;function f(){l||(l=!0,e.end())}function d(){l||(l=!0,typeof e.destroy=="function"&&e.destroy())}function h(y){p(),o.listenerCount(this,"error")===0&&this.emit("error",y)}r(u,"error",h),r(e,"error",h);function p(){u.removeListener("data",c),e.removeListener("drain",s),u.removeListener("end",f),u.removeListener("close",d),u.removeListener("error",h),e.removeListener("error",h),u.removeListener("end",p),u.removeListener("close",p),e.removeListener("close",p)}return u.on("end",p),u.on("close",p),e.on("close",p),e.emit("pipe",u),e};function r(e,a,u){if(typeof e.prependListener=="function")return e.prependListener(a,u);!e._events||!e._events[a]?e.on(a,u):n(e._events[a])?e._events[a].unshift(u):e._events[a]=[u,e._events[a]]}return ev={Stream:i,prependListener:r},ev}var tv={exports:{}},oL;function Ub(){return oL||(oL=1,(function(n){const{SymbolDispose:t}=jt(),{AbortError:o,codes:i}=dr(),{isNodeStream:r,isWebStream:e,kControllerErrorFunction:a}=wn(),u=Hn(),{ERR_INVALID_ARG_TYPE:c}=i;let s;const l=(f,d)=>{if(typeof f!="object"||!("aborted"in f))throw new c(d,"AbortSignal",f)};n.exports.addAbortSignal=function(d,h){if(l(d,"signal"),!r(h)&&!e(h))throw new c("stream",["ReadableStream","WritableStream","Stream"],h);return n.exports.addAbortSignalNoValidate(d,h)},n.exports.addAbortSignalNoValidate=function(f,d){if(typeof f!="object"||!("aborted"in f))return d;const h=r(d)?()=>{d.destroy(new o(void 0,{cause:f.reason}))}:()=>{d[a](new o(void 0,{cause:f.reason}))};if(f.aborted)h();else{s=s||yr().addAbortListener;const p=s(f,h);u(d,p[t])}return d}})(tv)),tv.exports}var rv,uL;function bK(){if(uL)return rv;uL=1;const{StringPrototypeSlice:n,SymbolIterator:t,TypedArrayPrototypeSet:o,Uint8Array:i}=jt(),{Buffer:r}=$n(),{inspect:e}=yr();return rv=class{constructor(){this.head=null,this.tail=null,this.length=0}push(u){const c={data:u,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}unshift(u){const c={data:u,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}shift(){if(this.length===0)return;const u=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,u}clear(){this.head=this.tail=null,this.length=0}join(u){if(this.length===0)return"";let c=this.head,s=""+c.data;for(;(c=c.next)!==null;)s+=u+c.data;return s}concat(u){if(this.length===0)return r.alloc(0);const c=r.allocUnsafe(u>>>0);let s=this.head,l=0;for(;s;)o(c,s.data,l),l+=s.data.length,s=s.next;return c}consume(u,c){const s=this.head.data;if(u<s.length){const l=s.slice(0,u);return this.head.data=s.slice(u),l}return u===s.length?this.shift():c?this._getString(u):this._getBuffer(u)}first(){return this.head.data}*[t](){for(let u=this.head;u;u=u.next)yield u.data}_getString(u){let c="",s=this.head,l=0;do{const f=s.data;if(u>f.length)c+=f,u-=f.length;else{u===f.length?(c+=f,++l,s.next?this.head=s.next:this.head=this.tail=null):(c+=n(f,0,u),this.head=s,s.data=n(f,u));break}++l}while((s=s.next)!==null);return this.length-=l,c}_getBuffer(u){const c=r.allocUnsafe(u),s=u;let l=this.head,f=0;do{const d=l.data;if(u>d.length)o(c,d,s-u),u-=d.length;else{u===d.length?(o(c,d,s-u),++f,l.next?this.head=l.next:this.head=this.tail=null):(o(c,new i(d.buffer,d.byteOffset,u),s-u),this.head=l,l.data=d.slice(u));break}++f}while((l=l.next)!==null);return this.length-=f,c}[Symbol.for("nodejs.util.inspect.custom")](u,c){return e(this,{...c,depth:0,customInspect:!1})}},rv}var nv,sL;function Vb(){if(sL)return nv;sL=1;const{MathFloor:n,NumberIsInteger:t}=jt(),{validateInteger:o}=om(),{ERR_INVALID_ARG_VALUE:i}=dr().codes;let r=16*1024,e=16;function a(l,f,d){return l.highWaterMark!=null?l.highWaterMark:f?l[d]:null}function u(l){return l?e:r}function c(l,f){o(f,"value",0),l?e=f:r=f}function s(l,f,d,h){const p=a(f,h,d);if(p!=null){if(!t(p)||p<0){const y=h?`options.${d}`:"options.highWaterMark";throw new i(y,p)}return n(p)}return u(l.objectMode)}return nv={getHighWaterMark:s,getDefaultHighWaterMark:u,setDefaultHighWaterMark:c},nv}var iv={},rb={exports:{}};var cL;function vK(){return cL||(cL=1,(function(n,t){var o=$n(),i=o.Buffer;function r(a,u){for(var c in a)u[c]=a[c]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?n.exports=o:(r(o,t),t.Buffer=e);function e(a,u,c){return i(a,u,c)}e.prototype=Object.create(i.prototype),r(i,e),e.from=function(a,u,c){if(typeof a=="number")throw new TypeError("Argument must not be a number");return i(a,u,c)},e.alloc=function(a,u,c){if(typeof a!="number")throw new TypeError("Argument must be a number");var s=i(a);return u!==void 0?typeof c=="string"?s.fill(u,c):s.fill(u):s.fill(0),s},e.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return i(a)},e.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(a)}})(rb,rb.exports)),rb.exports}var lL;function TK(){if(lL)return iv;lL=1;var n=vK().Buffer,t=n.isEncoding||function(_){switch(_=""+_,_&&_.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(_){if(!_)return"utf8";for(var T;;)switch(_){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return _;default:if(T)return;_=(""+_).toLowerCase(),T=!0}}function i(_){var T=o(_);if(typeof T!="string"&&(n.isEncoding===t||!t(_)))throw new Error("Unknown encoding: "+_);return T||_}iv.StringDecoder=r;function r(_){this.encoding=i(_);var T;switch(this.encoding){case"utf16le":this.text=f,this.end=d,T=4;break;case"utf8":this.fillLast=c,T=4;break;case"base64":this.text=h,this.end=p,T=3;break;default:this.write=y,this.end=b;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(T)}r.prototype.write=function(_){if(_.length===0)return"";var T,m;if(this.lastNeed){if(T=this.fillLast(_),T===void 0)return"";m=this.lastNeed,this.lastNeed=0}else m=0;return m<_.length?T?T+this.text(_,m):this.text(_,m):T||""},r.prototype.end=l,r.prototype.text=s,r.prototype.fillLast=function(_){if(this.lastNeed<=_.length)return _.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_.copy(this.lastChar,this.lastTotal-this.lastNeed,0,_.length),this.lastNeed-=_.length};function e(_){return _<=127?0:_>>5===6?2:_>>4===14?3:_>>3===30?4:_>>6===2?-1:-2}function a(_,T,m){var A=T.length-1;if(A<m)return 0;var E=e(T[A]);return E>=0?(E>0&&(_.lastNeed=E-1),E):--A<m||E===-2?0:(E=e(T[A]),E>=0?(E>0&&(_.lastNeed=E-2),E):--A<m||E===-2?0:(E=e(T[A]),E>=0?(E>0&&(E===2?E=0:_.lastNeed=E-3),E):0))}function u(_,T,m){if((T[0]&192)!==128)return _.lastNeed=0,"";if(_.lastNeed>1&&T.length>1){if((T[1]&192)!==128)return _.lastNeed=1,"";if(_.lastNeed>2&&T.length>2&&(T[2]&192)!==128)return _.lastNeed=2,""}}function c(_){var T=this.lastTotal-this.lastNeed,m=u(this,_);if(m!==void 0)return m;if(this.lastNeed<=_.length)return _.copy(this.lastChar,T,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_.copy(this.lastChar,T,0,_.length),this.lastNeed-=_.length}function s(_,T){var m=a(this,_,T);if(!this.lastNeed)return _.toString("utf8",T);this.lastTotal=m;var A=_.length-(m-this.lastNeed);return _.copy(this.lastChar,0,A),_.toString("utf8",T,A)}function l(_){var T=_&&_.length?this.write(_):"";return this.lastNeed?T+"":T}function f(_,T){if((_.length-T)%2===0){var m=_.toString("utf16le",T);if(m){var A=m.charCodeAt(m.length-1);if(A>=55296&&A<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1],m.slice(0,-1)}return m}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=_[_.length-1],_.toString("utf16le",T,_.length-1)}function d(_){var T=_&&_.length?this.write(_):"";if(this.lastNeed){var m=this.lastTotal-this.lastNeed;return T+this.lastChar.toString("utf16le",0,m)}return T}function h(_,T){var m=(_.length-T)%3;return m===0?_.toString("base64",T):(this.lastNeed=3-m,this.lastTotal=3,m===1?this.lastChar[0]=_[_.length-1]:(this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1]),_.toString("base64",T,_.length-m))}function p(_){var T=_&&_.length?this.write(_):"";return this.lastNeed?T+this.lastChar.toString("base64",0,3-this.lastNeed):T}function y(_){return _.toString(this.encoding)}function b(_){return _&&_.length?this.write(_):""}return iv}var av,fL;function E5(){if(fL)return av;fL=1;const n=Un(),{PromisePrototypeThen:t,SymbolAsyncIterator:o,SymbolIterator:i}=jt(),{Buffer:r}=$n(),{ERR_INVALID_ARG_TYPE:e,ERR_STREAM_NULL_VALUES:a}=dr().codes;function u(c,s,l){let f;if(typeof s=="string"||s instanceof r)return new c({objectMode:!0,...l,read(){this.push(s),this.push(null)}});let d;if(s&&s[o])d=!0,f=s[o]();else if(s&&s[i])d=!1,f=s[i]();else throw new e("iterable",["Iterable"],s);const h=new c({objectMode:!0,highWaterMark:1,...l});let p=!1;h._read=function(){p||(p=!0,b())},h._destroy=function(_,T){t(y(_),()=>n.nextTick(T,_),m=>n.nextTick(T,m||_))};async function y(_){const T=_!=null,m=typeof f.throw=="function";if(T&&m){const{value:A,done:E}=await f.throw(_);if(await A,E)return}if(typeof f.return=="function"){const{value:A}=await f.return();await A}}async function b(){for(;;){try{const{value:_,done:T}=d?await f.next():f.next();if(T)h.push(null);else{const m=_&&typeof _.then=="function"?await _:_;if(m===null)throw p=!1,new a;if(h.push(m))continue;p=!1}}catch(_){h.destroy(_)}break}}return h}return av=u,av}var ov,dL;function Gb(){if(dL)return ov;dL=1;const n=Un(),{ArrayPrototypeIndexOf:t,NumberIsInteger:o,NumberIsNaN:i,NumberParseInt:r,ObjectDefineProperties:e,ObjectKeys:a,ObjectSetPrototypeOf:u,Promise:c,SafeSet:s,SymbolAsyncDispose:l,SymbolAsyncIterator:f,Symbol:d}=jt();ov=ue,ue.ReadableState=ne;const{EventEmitter:h}=nm(),{Stream:p,prependListener:y}=$T(),{Buffer:b}=$n(),{addAbortSignal:_}=Ub(),T=Hn();let m=yr().debuglog("stream",W=>{m=W});const A=bK(),E=Tc(),{getHighWaterMark:j,getDefaultHighWaterMark:X}=Vb(),{aggregateTwoErrors:K,codes:{ERR_INVALID_ARG_TYPE:O,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_OUT_OF_RANGE:L,ERR_STREAM_PUSH_AFTER_EOF:N,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:I},AbortError:V}=dr(),{validateObject:re}=om(),Y=d("kPaused"),{StringDecoder:ce}=TK(),ae=E5();u(ue.prototype,p.prototype),u(ue,p);const pe=()=>{},{errorOrDestroy:U}=E,le=1,me=2,te=4,de=8,Ee=16,Re=32,De=64,fe=128,_e=256,q=512,w=1024,D=2048,g=4096,F=8192,M=16384,Q=32768,x=65536,$=1<<17,B=1<<18;function H(W){return{enumerable:!1,get(){return(this.state&W)!==0},set(ee){ee?this.state|=W:this.state&=~W}}}e(ne.prototype,{objectMode:H(le),ended:H(me),endEmitted:H(te),reading:H(de),constructed:H(Ee),sync:H(Re),needReadable:H(De),emittedReadable:H(fe),readableListening:H(_e),resumeScheduled:H(q),errorEmitted:H(w),emitClose:H(D),autoDestroy:H(g),destroyed:H(F),closed:H(M),closeEmitted:H(Q),multiAwaitDrain:H(x),readingMore:H($),dataEmitted:H(B)});function ne(W,ee,Pe){typeof Pe!="boolean"&&(Pe=ee instanceof Sn()),this.state=D|g|Ee|Re,W&&W.objectMode&&(this.state|=le),Pe&&W&&W.readableObjectMode&&(this.state|=le),this.highWaterMark=W?j(this,W,"readableHighWaterMark",Pe):X(!1),this.buffer=new A,this.length=0,this.pipes=[],this.flowing=null,this[Y]=null,W&&W.emitClose===!1&&(this.state&=~D),W&&W.autoDestroy===!1&&(this.state&=~g),this.errored=null,this.defaultEncoding=W&&W.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,W&&W.encoding&&(this.decoder=new ce(W.encoding),this.encoding=W.encoding)}function ue(W){if(!(this instanceof ue))return new ue(W);const ee=this instanceof Sn();this._readableState=new ne(W,this,ee),W&&(typeof W.read=="function"&&(this._read=W.read),typeof W.destroy=="function"&&(this._destroy=W.destroy),typeof W.construct=="function"&&(this._construct=W.construct),W.signal&&!ee&&_(W.signal,this)),p.call(this,W),E.construct(this,()=>{this._readableState.needReadable&&k(this,this._readableState)})}ue.prototype.destroy=E.destroy,ue.prototype._undestroy=E.undestroy,ue.prototype._destroy=function(W,ee){ee(W)},ue.prototype[h.captureRejectionSymbol]=function(W){this.destroy(W)},ue.prototype[l]=function(){let W;return this.destroyed||(W=this.readableEnded?null:new V,this.destroy(W)),new c((ee,Pe)=>T(this,Ne=>Ne&&Ne!==W?Pe(Ne):ee(null)))},ue.prototype.push=function(W,ee){return Te(this,W,ee,!1)},ue.prototype.unshift=function(W,ee){return Te(this,W,ee,!0)};function Te(W,ee,Pe,Ne){m("readableAddChunk",ee);const qe=W._readableState;let lt;if((qe.state&le)===0&&(typeof ee=="string"?(Pe=Pe||qe.defaultEncoding,qe.encoding!==Pe&&(Ne&&qe.encoding?ee=b.from(ee,Pe).toString(qe.encoding):(ee=b.from(ee,Pe),Pe=""))):ee instanceof b?Pe="":p._isUint8Array(ee)?(ee=p._uint8ArrayToBuffer(ee),Pe=""):ee!=null&&(lt=new O("chunk",["string","Buffer","Uint8Array"],ee))),lt)U(W,lt);else if(ee===null)qe.state&=~de,v(W,qe);else if((qe.state&le)!==0||ee&&ee.length>0)if(Ne)if((qe.state&te)!==0)U(W,new I);else{if(qe.destroyed||qe.errored)return!1;Fe(W,qe,ee,!0)}else if(qe.ended)U(W,new N);else{if(qe.destroyed||qe.errored)return!1;qe.state&=~de,qe.decoder&&!Pe?(ee=qe.decoder.write(ee),qe.objectMode||ee.length!==0?Fe(W,qe,ee,!1):k(W,qe)):Fe(W,qe,ee,!1)}else Ne||(qe.state&=~de,k(W,qe));return!qe.ended&&(qe.length<qe.highWaterMark||qe.length===0)}function Fe(W,ee,Pe,Ne){ee.flowing&&ee.length===0&&!ee.sync&&W.listenerCount("data")>0?((ee.state&x)!==0?ee.awaitDrainWriters.clear():ee.awaitDrainWriters=null,ee.dataEmitted=!0,W.emit("data",Pe)):(ee.length+=ee.objectMode?1:Pe.length,Ne?ee.buffer.unshift(Pe):ee.buffer.push(Pe),(ee.state&De)!==0&&R(W)),k(W,ee)}ue.prototype.isPaused=function(){const W=this._readableState;return W[Y]===!0||W.flowing===!1},ue.prototype.setEncoding=function(W){const ee=new ce(W);this._readableState.decoder=ee,this._readableState.encoding=this._readableState.decoder.encoding;const Pe=this._readableState.buffer;let Ne="";for(const qe of Pe)Ne+=ee.write(qe);return Pe.clear(),Ne!==""&&Pe.push(Ne),this._readableState.length=Ne.length,this};const Z=1073741824;function oe(W){if(W>Z)throw new L("size","<= 1GiB",W);return W--,W|=W>>>1,W|=W>>>2,W|=W>>>4,W|=W>>>8,W|=W>>>16,W++,W}function P(W,ee){return W<=0||ee.length===0&&ee.ended?0:(ee.state&le)!==0?1:i(W)?ee.flowing&&ee.length?ee.buffer.first().length:ee.length:W<=ee.length?W:ee.ended?ee.length:0}ue.prototype.read=function(W){m("read",W),W===void 0?W=NaN:o(W)||(W=r(W,10));const ee=this._readableState,Pe=W;if(W>ee.highWaterMark&&(ee.highWaterMark=oe(W)),W!==0&&(ee.state&=~fe),W===0&&ee.needReadable&&((ee.highWaterMark!==0?ee.length>=ee.highWaterMark:ee.length>0)||ee.ended))return m("read: emitReadable",ee.length,ee.ended),ee.length===0&&ee.ended?Qe(this):R(this),null;if(W=P(W,ee),W===0&&ee.ended)return ee.length===0&&Qe(this),null;let Ne=(ee.state&De)!==0;if(m("need readable",Ne),(ee.length===0||ee.length-W<ee.highWaterMark)&&(Ne=!0,m("length less than watermark",Ne)),ee.ended||ee.reading||ee.destroyed||ee.errored||!ee.constructed)Ne=!1,m("reading, ended or constructing",Ne);else if(Ne){m("do read"),ee.state|=de|Re,ee.length===0&&(ee.state|=De);try{this._read(ee.highWaterMark)}catch(lt){U(this,lt)}ee.state&=~Re,ee.reading||(W=P(Pe,ee))}let qe;return W>0?qe=Le(W,ee):qe=null,qe===null?(ee.needReadable=ee.length<=ee.highWaterMark,W=0):(ee.length-=W,ee.multiAwaitDrain?ee.awaitDrainWriters.clear():ee.awaitDrainWriters=null),ee.length===0&&(ee.ended||(ee.needReadable=!0),Pe!==W&&ee.ended&&Qe(this)),qe!==null&&!ee.errorEmitted&&!ee.closeEmitted&&(ee.dataEmitted=!0,this.emit("data",qe)),qe};function v(W,ee){if(m("onEofChunk"),!ee.ended){if(ee.decoder){const Pe=ee.decoder.end();Pe&&Pe.length&&(ee.buffer.push(Pe),ee.length+=ee.objectMode?1:Pe.length)}ee.ended=!0,ee.sync?R(W):(ee.needReadable=!1,ee.emittedReadable=!0,C(W))}}function R(W){const ee=W._readableState;m("emitReadable",ee.needReadable,ee.emittedReadable),ee.needReadable=!1,ee.emittedReadable||(m("emitReadable",ee.flowing),ee.emittedReadable=!0,n.nextTick(C,W))}function C(W){const ee=W._readableState;m("emitReadable_",ee.destroyed,ee.length,ee.ended),!ee.destroyed&&!ee.errored&&(ee.length||ee.ended)&&(W.emit("readable"),ee.emittedReadable=!1),ee.needReadable=!ee.flowing&&!ee.ended&&ee.length<=ee.highWaterMark,z(W)}function k(W,ee){!ee.readingMore&&ee.constructed&&(ee.readingMore=!0,n.nextTick(se,W,ee))}function se(W,ee){for(;!ee.reading&&!ee.ended&&(ee.length<ee.highWaterMark||ee.flowing&&ee.length===0);){const Pe=ee.length;if(m("maybeReadMore read 0"),W.read(0),Pe===ee.length)break}ee.readingMore=!1}ue.prototype._read=function(W){throw new S("_read()")},ue.prototype.pipe=function(W,ee){const Pe=this,Ne=this._readableState;Ne.pipes.length===1&&(Ne.multiAwaitDrain||(Ne.multiAwaitDrain=!0,Ne.awaitDrainWriters=new s(Ne.awaitDrainWriters?[Ne.awaitDrainWriters]:[]))),Ne.pipes.push(W),m("pipe count=%d opts=%j",Ne.pipes.length,ee);const lt=(!ee||ee.end!==!1)&&W!==n.stdout&&W!==n.stderr?Oc:Dr;Ne.endEmitted?n.nextTick(lt):Pe.once("end",lt),W.on("unpipe",Qt);function Qt(vt,Pr){m("onunpipe"),vt===Pe&&Pr&&Pr.hasUnpiped===!1&&(Pr.hasUnpiped=!0,qs())}function Oc(){m("onend"),W.end()}let Kr,Lt=!1;function qs(){m("cleanup"),W.removeListener("close",An),W.removeListener("finish",Wr),Kr&&W.removeListener("drain",Kr),W.removeListener("error",Bs),W.removeListener("unpipe",Qt),Pe.removeListener("end",Oc),Pe.removeListener("end",Dr),Pe.removeListener("data",Qr),Lt=!0,Kr&&Ne.awaitDrainWriters&&(!W._writableState||W._writableState.needDrain)&&Kr()}function Sc(){Lt||(Ne.pipes.length===1&&Ne.pipes[0]===W?(m("false write response, pause",0),Ne.awaitDrainWriters=W,Ne.multiAwaitDrain=!1):Ne.pipes.length>1&&Ne.pipes.includes(W)&&(m("false write response, pause",Ne.awaitDrainWriters.size),Ne.awaitDrainWriters.add(W)),Pe.pause()),Kr||(Kr=he(Pe,W),W.on("drain",Kr))}Pe.on("data",Qr);function Qr(vt){m("ondata");const Pr=W.write(vt);m("dest.write",Pr),Pr===!1&&Sc()}function Bs(vt){if(m("onerror",vt),Dr(),W.removeListener("error",Bs),W.listenerCount("error")===0){const Pr=W._writableState||W._readableState;Pr&&!Pr.errorEmitted?U(W,vt):W.emit("error",vt)}}y(W,"error",Bs);function An(){W.removeListener("finish",Wr),Dr()}W.once("close",An);function Wr(){m("onfinish"),W.removeListener("close",An),Dr()}W.once("finish",Wr);function Dr(){m("unpipe"),Pe.unpipe(W)}return W.emit("pipe",Pe),W.writableNeedDrain===!0?Sc():Ne.flowing||(m("pipe resume"),Pe.resume()),W};function he(W,ee){return function(){const Ne=W._readableState;Ne.awaitDrainWriters===ee?(m("pipeOnDrain",1),Ne.awaitDrainWriters=null):Ne.multiAwaitDrain&&(m("pipeOnDrain",Ne.awaitDrainWriters.size),Ne.awaitDrainWriters.delete(ee)),(!Ne.awaitDrainWriters||Ne.awaitDrainWriters.size===0)&&W.listenerCount("data")&&W.resume()}}ue.prototype.unpipe=function(W){const ee=this._readableState,Pe={hasUnpiped:!1};if(ee.pipes.length===0)return this;if(!W){const qe=ee.pipes;ee.pipes=[],this.pause();for(let lt=0;lt<qe.length;lt++)qe[lt].emit("unpipe",this,{hasUnpiped:!1});return this}const Ne=t(ee.pipes,W);return Ne===-1?this:(ee.pipes.splice(Ne,1),ee.pipes.length===0&&this.pause(),W.emit("unpipe",this,Pe),this)},ue.prototype.on=function(W,ee){const Pe=p.prototype.on.call(this,W,ee),Ne=this._readableState;return W==="data"?(Ne.readableListening=this.listenerCount("readable")>0,Ne.flowing!==!1&&this.resume()):W==="readable"&&!Ne.endEmitted&&!Ne.readableListening&&(Ne.readableListening=Ne.needReadable=!0,Ne.flowing=!1,Ne.emittedReadable=!1,m("on readable",Ne.length,Ne.reading),Ne.length?R(this):Ne.reading||n.nextTick(Me,this)),Pe},ue.prototype.addListener=ue.prototype.on,ue.prototype.removeListener=function(W,ee){const Pe=p.prototype.removeListener.call(this,W,ee);return W==="readable"&&n.nextTick(Ie,this),Pe},ue.prototype.off=ue.prototype.removeListener,ue.prototype.removeAllListeners=function(W){const ee=p.prototype.removeAllListeners.apply(this,arguments);return(W==="readable"||W===void 0)&&n.nextTick(Ie,this),ee};function Ie(W){const ee=W._readableState;ee.readableListening=W.listenerCount("readable")>0,ee.resumeScheduled&&ee[Y]===!1?ee.flowing=!0:W.listenerCount("data")>0?W.resume():ee.readableListening||(ee.flowing=null)}function Me(W){m("readable nexttick read 0"),W.read(0)}ue.prototype.resume=function(){const W=this._readableState;return W.flowing||(m("resume"),W.flowing=!W.readableListening,Ue(this,W)),W[Y]=!1,this};function Ue(W,ee){ee.resumeScheduled||(ee.resumeScheduled=!0,n.nextTick(Ce,W,ee))}function Ce(W,ee){m("resume",ee.reading),ee.reading||W.read(0),ee.resumeScheduled=!1,W.emit("resume"),z(W),ee.flowing&&!ee.reading&&W.read(0)}ue.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Y]=!0,this};function z(W){const ee=W._readableState;for(m("flow",ee.flowing);ee.flowing&&W.read()!==null;);}ue.prototype.wrap=function(W){let ee=!1;W.on("data",Ne=>{!this.push(Ne)&&W.pause&&(ee=!0,W.pause())}),W.on("end",()=>{this.push(null)}),W.on("error",Ne=>{U(this,Ne)}),W.on("close",()=>{this.destroy()}),W.on("destroy",()=>{this.destroy()}),this._read=()=>{ee&&W.resume&&(ee=!1,W.resume())};const Pe=a(W);for(let Ne=1;Ne<Pe.length;Ne++){const qe=Pe[Ne];this[qe]===void 0&&typeof W[qe]=="function"&&(this[qe]=W[qe].bind(W))}return this},ue.prototype[f]=function(){return be(this)},ue.prototype.iterator=function(W){return W!==void 0&&re(W,"options"),be(this,W)};function be(W,ee){typeof W.read!="function"&&(W=ue.wrap(W,{objectMode:!0}));const Pe=we(W,ee);return Pe.stream=W,Pe}async function*we(W,ee){let Pe=pe;function Ne(Qt){this===W?(Pe(),Pe=pe):Pe=Qt}W.on("readable",Ne);let qe;const lt=T(W,{writable:!1},Qt=>{qe=Qt?K(qe,Qt):null,Pe(),Pe=pe});try{for(;;){const Qt=W.destroyed?null:W.read();if(Qt!==null)yield Qt;else{if(qe)throw qe;if(qe===null)return;await new c(Ne)}}}catch(Qt){throw qe=K(qe,Qt),qe}finally{(qe||ee?.destroyOnReturn!==!1)&&(qe===void 0||W._readableState.autoDestroy)?E.destroyer(W,null):(W.off("readable",Ne),lt())}}e(ue.prototype,{readable:{__proto__:null,get(){const W=this._readableState;return!!W&&W.readable!==!1&&!W.destroyed&&!W.errorEmitted&&!W.endEmitted},set(W){this._readableState&&(this._readableState.readable=!!W)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(W){this._readableState&&(this._readableState.flowing=W)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(W){this._readableState&&(this._readableState.destroyed=W)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),e(ne.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Y]!==!1},set(W){this[Y]=!!W}}}),ue._fromList=Le;function Le(W,ee){if(ee.length===0)return null;let Pe;return ee.objectMode?Pe=ee.buffer.shift():!W||W>=ee.length?(ee.decoder?Pe=ee.buffer.join(""):ee.buffer.length===1?Pe=ee.buffer.first():Pe=ee.buffer.concat(ee.length),ee.buffer.clear()):Pe=ee.buffer.consume(W,ee.decoder),Pe}function Qe(W){const ee=W._readableState;m("endReadable",ee.endEmitted),ee.endEmitted||(ee.ended=!0,n.nextTick(Ke,ee,W))}function Ke(W,ee){if(m("endReadableNT",W.endEmitted,W.length),!W.errored&&!W.closeEmitted&&!W.endEmitted&&W.length===0){if(W.endEmitted=!0,ee.emit("end"),ee.writable&&ee.allowHalfOpen===!1)n.nextTick(Ge,ee);else if(W.autoDestroy){const Pe=ee._writableState;(!Pe||Pe.autoDestroy&&(Pe.finished||Pe.writable===!1))&&ee.destroy()}}}function Ge(W){W.writable&&!W.writableEnded&&!W.destroyed&&W.end()}ue.from=function(W,ee){return ae(ue,W,ee)};let nt;function ct(){return nt===void 0&&(nt={}),nt}return ue.fromWeb=function(W,ee){return ct().newStreamReadableFromReadableStream(W,ee)},ue.toWeb=function(W,ee){return ct().newReadableStreamFromStreamReadable(W,ee)},ue.wrap=function(W,ee){var Pe,Ne;return new ue({objectMode:(Pe=(Ne=W.readableObjectMode)!==null&&Ne!==void 0?Ne:W.objectMode)!==null&&Pe!==void 0?Pe:!0,...ee,destroy(qe,lt){E.destroyer(W,qe),lt(qe)}}).wrap(W)},ov}var uv,pL;function HT(){if(pL)return uv;pL=1;const n=Un(),{ArrayPrototypeSlice:t,Error:o,FunctionPrototypeSymbolHasInstance:i,ObjectDefineProperty:r,ObjectDefineProperties:e,ObjectSetPrototypeOf:a,StringPrototypeToLowerCase:u,Symbol:c,SymbolHasInstance:s}=jt();uv=re,re.WritableState=I;const{EventEmitter:l}=nm(),f=$T().Stream,{Buffer:d}=$n(),h=Tc(),{addAbortSignal:p}=Ub(),{getHighWaterMark:y,getDefaultHighWaterMark:b}=Vb(),{ERR_INVALID_ARG_TYPE:_,ERR_METHOD_NOT_IMPLEMENTED:T,ERR_MULTIPLE_CALLBACK:m,ERR_STREAM_CANNOT_PIPE:A,ERR_STREAM_DESTROYED:E,ERR_STREAM_ALREADY_FINISHED:j,ERR_STREAM_NULL_VALUES:X,ERR_STREAM_WRITE_AFTER_END:K,ERR_UNKNOWN_ENCODING:O}=dr().codes,{errorOrDestroy:S}=h;a(re.prototype,f.prototype),a(re,f);function L(){}const N=c("kOnFinished");function I(g,F,M){typeof M!="boolean"&&(M=F instanceof Sn()),this.objectMode=!!(g&&g.objectMode),M&&(this.objectMode=this.objectMode||!!(g&&g.writableObjectMode)),this.highWaterMark=g?y(this,g,"writableHighWaterMark",M):b(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Q=!!(g&&g.decodeStrings===!1);this.decodeStrings=!Q,this.defaultEncoding=g&&g.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=U.bind(void 0,F),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,V(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!g||g.emitClose!==!1,this.autoDestroy=!g||g.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[N]=[]}function V(g){g.buffered=[],g.bufferedIndex=0,g.allBuffers=!0,g.allNoop=!0}I.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},r(I.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function re(g){const F=this instanceof Sn();if(!F&&!i(re,this))return new re(g);this._writableState=new I(g,this,F),g&&(typeof g.write=="function"&&(this._write=g.write),typeof g.writev=="function"&&(this._writev=g.writev),typeof g.destroy=="function"&&(this._destroy=g.destroy),typeof g.final=="function"&&(this._final=g.final),typeof g.construct=="function"&&(this._construct=g.construct),g.signal&&p(g.signal,this)),f.call(this,g),h.construct(this,()=>{const M=this._writableState;M.writing||de(this,M),fe(this,M)})}r(re,s,{__proto__:null,value:function(g){return i(this,g)?!0:this!==re?!1:g&&g._writableState instanceof I}}),re.prototype.pipe=function(){S(this,new A)};function Y(g,F,M,Q){const x=g._writableState;if(typeof M=="function")Q=M,M=x.defaultEncoding;else{if(!M)M=x.defaultEncoding;else if(M!=="buffer"&&!d.isEncoding(M))throw new O(M);typeof Q!="function"&&(Q=L)}if(F===null)throw new X;if(!x.objectMode)if(typeof F=="string")x.decodeStrings!==!1&&(F=d.from(F,M),M="buffer");else if(F instanceof d)M="buffer";else if(f._isUint8Array(F))F=f._uint8ArrayToBuffer(F),M="buffer";else throw new _("chunk",["string","Buffer","Uint8Array"],F);let $;return x.ending?$=new K:x.destroyed&&($=new E("write")),$?(n.nextTick(Q,$),S(g,$,!0),$):(x.pendingcb++,ce(g,x,F,M,Q))}re.prototype.write=function(g,F,M){return Y(this,g,F,M)===!0},re.prototype.cork=function(){this._writableState.corked++},re.prototype.uncork=function(){const g=this._writableState;g.corked&&(g.corked--,g.writing||de(this,g))},re.prototype.setDefaultEncoding=function(F){if(typeof F=="string"&&(F=u(F)),!d.isEncoding(F))throw new O(F);return this._writableState.defaultEncoding=F,this};function ce(g,F,M,Q,x){const $=F.objectMode?1:M.length;F.length+=$;const B=F.length<F.highWaterMark;return B||(F.needDrain=!0),F.writing||F.corked||F.errored||!F.constructed?(F.buffered.push({chunk:M,encoding:Q,callback:x}),F.allBuffers&&Q!=="buffer"&&(F.allBuffers=!1),F.allNoop&&x!==L&&(F.allNoop=!1)):(F.writelen=$,F.writecb=x,F.writing=!0,F.sync=!0,g._write(M,Q,F.onwrite),F.sync=!1),B&&!F.errored&&!F.destroyed}function ae(g,F,M,Q,x,$,B){F.writelen=Q,F.writecb=B,F.writing=!0,F.sync=!0,F.destroyed?F.onwrite(new E("write")):M?g._writev(x,F.onwrite):g._write(x,$,F.onwrite),F.sync=!1}function pe(g,F,M,Q){--F.pendingcb,Q(M),te(F),S(g,M)}function U(g,F){const M=g._writableState,Q=M.sync,x=M.writecb;if(typeof x!="function"){S(g,new m);return}M.writing=!1,M.writecb=null,M.length-=M.writelen,M.writelen=0,F?(F.stack,M.errored||(M.errored=F),g._readableState&&!g._readableState.errored&&(g._readableState.errored=F),Q?n.nextTick(pe,g,M,F,x):pe(g,M,F,x)):(M.buffered.length>M.bufferedIndex&&de(g,M),Q?M.afterWriteTickInfo!==null&&M.afterWriteTickInfo.cb===x?M.afterWriteTickInfo.count++:(M.afterWriteTickInfo={count:1,cb:x,stream:g,state:M},n.nextTick(le,M.afterWriteTickInfo)):me(g,M,1,x))}function le({stream:g,state:F,count:M,cb:Q}){return F.afterWriteTickInfo=null,me(g,F,M,Q)}function me(g,F,M,Q){for(!F.ending&&!g.destroyed&&F.length===0&&F.needDrain&&(F.needDrain=!1,g.emit("drain"));M-- >0;)F.pendingcb--,Q();F.destroyed&&te(F),fe(g,F)}function te(g){if(g.writing)return;for(let x=g.bufferedIndex;x<g.buffered.length;++x){var F;const{chunk:$,callback:B}=g.buffered[x],H=g.objectMode?1:$.length;g.length-=H,B((F=g.errored)!==null&&F!==void 0?F:new E("write"))}const M=g[N].splice(0);for(let x=0;x<M.length;x++){var Q;M[x]((Q=g.errored)!==null&&Q!==void 0?Q:new E("end"))}V(g)}function de(g,F){if(F.corked||F.bufferProcessing||F.destroyed||!F.constructed)return;const{buffered:M,bufferedIndex:Q,objectMode:x}=F,$=M.length-Q;if(!$)return;let B=Q;if(F.bufferProcessing=!0,$>1&&g._writev){F.pendingcb-=$-1;const H=F.allNoop?L:ue=>{for(let Te=B;Te<M.length;++Te)M[Te].callback(ue)},ne=F.allNoop&&B===0?M:t(M,B);ne.allBuffers=F.allBuffers,ae(g,F,!0,F.length,ne,"",H),V(F)}else{do{const{chunk:H,encoding:ne,callback:ue}=M[B];M[B++]=null;const Te=x?1:H.length;ae(g,F,!1,Te,H,ne,ue)}while(B<M.length&&!F.writing);B===M.length?V(F):B>256?(M.splice(0,B),F.bufferedIndex=0):F.bufferedIndex=B}F.bufferProcessing=!1}re.prototype._write=function(g,F,M){if(this._writev)this._writev([{chunk:g,encoding:F}],M);else throw new T("_write()")},re.prototype._writev=null,re.prototype.end=function(g,F,M){const Q=this._writableState;typeof g=="function"?(M=g,g=null,F=null):typeof F=="function"&&(M=F,F=null);let x;if(g!=null){const $=Y(this,g,F);$ instanceof o&&(x=$)}return Q.corked&&(Q.corked=1,this.uncork()),x||(!Q.errored&&!Q.ending?(Q.ending=!0,fe(this,Q,!0),Q.ended=!0):Q.finished?x=new j("end"):Q.destroyed&&(x=new E("end"))),typeof M=="function"&&(x||Q.finished?n.nextTick(M,x):Q[N].push(M)),this};function Ee(g){return g.ending&&!g.destroyed&&g.constructed&&g.length===0&&!g.errored&&g.buffered.length===0&&!g.finished&&!g.writing&&!g.errorEmitted&&!g.closeEmitted}function Re(g,F){let M=!1;function Q(x){if(M){S(g,x??m());return}if(M=!0,F.pendingcb--,x){const $=F[N].splice(0);for(let B=0;B<$.length;B++)$[B](x);S(g,x,F.sync)}else Ee(F)&&(F.prefinished=!0,g.emit("prefinish"),F.pendingcb++,n.nextTick(_e,g,F))}F.sync=!0,F.pendingcb++;try{g._final(Q)}catch(x){Q(x)}F.sync=!1}function De(g,F){!F.prefinished&&!F.finalCalled&&(typeof g._final=="function"&&!F.destroyed?(F.finalCalled=!0,Re(g,F)):(F.prefinished=!0,g.emit("prefinish")))}function fe(g,F,M){Ee(F)&&(De(g,F),F.pendingcb===0&&(M?(F.pendingcb++,n.nextTick((Q,x)=>{Ee(x)?_e(Q,x):x.pendingcb--},g,F)):Ee(F)&&(F.pendingcb++,_e(g,F))))}function _e(g,F){F.pendingcb--,F.finished=!0;const M=F[N].splice(0);for(let Q=0;Q<M.length;Q++)M[Q]();if(g.emit("finish"),F.autoDestroy){const Q=g._readableState;(!Q||Q.autoDestroy&&(Q.endEmitted||Q.readable===!1))&&g.destroy()}}e(re.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(g){this._writableState&&(this._writableState.destroyed=g)}},writable:{__proto__:null,get(){const g=this._writableState;return!!g&&g.writable!==!1&&!g.destroyed&&!g.errored&&!g.ending&&!g.ended},set(g){this._writableState&&(this._writableState.writable=!!g)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const g=this._writableState;return g?!g.destroyed&&!g.ending&&g.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const q=h.destroy;re.prototype.destroy=function(g,F){const M=this._writableState;return!M.destroyed&&(M.bufferedIndex<M.buffered.length||M[N].length)&&n.nextTick(te,M),q.call(this,g,F),this},re.prototype._undestroy=h.undestroy,re.prototype._destroy=function(g,F){F(g)},re.prototype[l.captureRejectionSymbol]=function(g){this.destroy(g)};let w;function D(){return w===void 0&&(w={}),w}return re.fromWeb=function(g,F){return D().newStreamWritableFromWritableStream(g,F)},re.toWeb=function(g){return D().newWritableStreamFromStreamWritable(g)},uv}var sv,hL;function OK(){if(hL)return sv;hL=1;const n=Un(),t=$n(),{isReadable:o,isWritable:i,isIterable:r,isNodeStream:e,isReadableNodeStream:a,isWritableNodeStream:u,isDuplexNodeStream:c,isReadableStream:s,isWritableStream:l}=wn(),f=Hn(),{AbortError:d,codes:{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_RETURN_VALUE:p}}=dr(),{destroyer:y}=Tc(),b=Sn(),_=Gb(),T=HT(),{createDeferredPromise:m}=yr(),A=E5(),E=globalThis.Blob||t.Blob,j=typeof E<"u"?function(I){return I instanceof E}:function(I){return!1},X=globalThis.AbortController||Vg().AbortController,{FunctionPrototypeCall:K}=jt();class O extends b{constructor(I){super(I),I?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),I?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}sv=function N(I,V){if(c(I))return I;if(a(I))return L({readable:I});if(u(I))return L({writable:I});if(e(I))return L({writable:!1,readable:!1});if(s(I))return L({readable:_.fromWeb(I)});if(l(I))return L({writable:T.fromWeb(I)});if(typeof I=="function"){const{value:Y,write:ce,final:ae,destroy:pe}=S(I);if(r(Y))return A(O,Y,{objectMode:!0,write:ce,final:ae,destroy:pe});const U=Y?.then;if(typeof U=="function"){let le;const me=K(U,Y,te=>{if(te!=null)throw new p("nully","body",te)},te=>{y(le,te)});return le=new O({objectMode:!0,readable:!1,write:ce,final(te){ae(async()=>{try{await me,n.nextTick(te,null)}catch(de){n.nextTick(te,de)}})},destroy:pe})}throw new p("Iterable, AsyncIterable or AsyncFunction",V,Y)}if(j(I))return N(I.arrayBuffer());if(r(I))return A(O,I,{objectMode:!0,writable:!1});if(s(I?.readable)&&l(I?.writable))return O.fromWeb(I);if(typeof I?.writable=="object"||typeof I?.readable=="object"){const Y=I!=null&&I.readable?a(I?.readable)?I?.readable:N(I.readable):void 0,ce=I!=null&&I.writable?u(I?.writable)?I?.writable:N(I.writable):void 0;return L({readable:Y,writable:ce})}const re=I?.then;if(typeof re=="function"){let Y;return K(re,I,ce=>{ce!=null&&Y.push(ce),Y.push(null)},ce=>{y(Y,ce)}),Y=new O({objectMode:!0,writable:!1,read(){}})}throw new h(V,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],I)};function S(N){let{promise:I,resolve:V}=m();const re=new X,Y=re.signal;return{value:N((async function*(){for(;;){const ae=I;I=null;const{chunk:pe,done:U,cb:le}=await ae;if(n.nextTick(le),U)return;if(Y.aborted)throw new d(void 0,{cause:Y.reason});({promise:I,resolve:V}=m()),yield pe}})(),{signal:Y}),write(ae,pe,U){const le=V;V=null,le({chunk:ae,done:!1,cb:U})},final(ae){const pe=V;V=null,pe({done:!0,cb:ae})},destroy(ae,pe){re.abort(),pe(ae)}}}function L(N){const I=N.readable&&typeof N.readable.read!="function"?_.wrap(N.readable):N.readable,V=N.writable;let re=!!o(I),Y=!!i(V),ce,ae,pe,U,le;function me(te){const de=U;U=null,de?de(te):te&&le.destroy(te)}return le=new O({readableObjectMode:!!(I!=null&&I.readableObjectMode),writableObjectMode:!!(V!=null&&V.writableObjectMode),readable:re,writable:Y}),Y&&(f(V,te=>{Y=!1,te&&y(I,te),me(te)}),le._write=function(te,de,Ee){V.write(te,de)?Ee():ce=Ee},le._final=function(te){V.end(),ae=te},V.on("drain",function(){if(ce){const te=ce;ce=null,te()}}),V.on("finish",function(){if(ae){const te=ae;ae=null,te()}})),re&&(f(I,te=>{re=!1,te&&y(I,te),me(te)}),I.on("readable",function(){if(pe){const te=pe;pe=null,te()}}),I.on("end",function(){le.push(null)}),le._read=function(){for(;;){const te=I.read();if(te===null){pe=le._read;return}if(!le.push(te))return}}),le._destroy=function(te,de){!te&&U!==null&&(te=new d),pe=null,ce=null,ae=null,U===null?de(te):(U=de,y(V,te),y(I,te))},le}return sv}var cv,yL;function Sn(){if(yL)return cv;yL=1;const{ObjectDefineProperties:n,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:o,ObjectSetPrototypeOf:i}=jt();cv=a;const r=Gb(),e=HT();i(a.prototype,r.prototype),i(a,r);{const l=o(e.prototype);for(let f=0;f<l.length;f++){const d=l[f];a.prototype[d]||(a.prototype[d]=e.prototype[d])}}function a(l){if(!(this instanceof a))return new a(l);r.call(this,l),e.call(this,l),l?(this.allowHalfOpen=l.allowHalfOpen!==!1,l.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),l.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}n(a.prototype,{writable:{__proto__:null,...t(e.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(e.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(e.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(e.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(e.prototype,"writableLength")},writableFinished:{__proto__:null,...t(e.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(e.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(e.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(e.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(l){this._readableState&&this._writableState&&(this._readableState.destroyed=l,this._writableState.destroyed=l)}}});let u;function c(){return u===void 0&&(u={}),u}a.fromWeb=function(l,f){return c().newStreamDuplexFromReadableWritablePair(l,f)},a.toWeb=function(l){return c().newReadableWritablePairFromDuplex(l)};let s;return a.from=function(l){return s||(s=OK()),s(l,"body")},cv}var lv,_L;function R5(){if(_L)return lv;_L=1;const{ObjectSetPrototypeOf:n,Symbol:t}=jt();lv=a;const{ERR_METHOD_NOT_IMPLEMENTED:o}=dr().codes,i=Sn(),{getHighWaterMark:r}=Vb();n(a.prototype,i.prototype),n(a,i);const e=t("kCallback");function a(s){if(!(this instanceof a))return new a(s);const l=s?r(this,s,"readableHighWaterMark",!0):null;l===0&&(s={...s,highWaterMark:null,readableHighWaterMark:l,writableHighWaterMark:s.writableHighWaterMark||0}),i.call(this,s),this._readableState.sync=!1,this[e]=null,s&&(typeof s.transform=="function"&&(this._transform=s.transform),typeof s.flush=="function"&&(this._flush=s.flush)),this.on("prefinish",c)}function u(s){typeof this._flush=="function"&&!this.destroyed?this._flush((l,f)=>{if(l){s?s(l):this.destroy(l);return}f!=null&&this.push(f),this.push(null),s&&s()}):(this.push(null),s&&s())}function c(){this._final!==u&&u.call(this)}return a.prototype._final=u,a.prototype._transform=function(s,l,f){throw new o("_transform()")},a.prototype._write=function(s,l,f){const d=this._readableState,h=this._writableState,p=d.length;this._transform(s,l,(y,b)=>{if(y){f(y);return}b!=null&&this.push(b),h.ended||p===d.length||d.length<d.highWaterMark?f():this[e]=f})},a.prototype._read=function(){if(this[e]){const s=this[e];this[e]=null,s()}},lv}var fv,gL;function j5(){if(gL)return fv;gL=1;const{ObjectSetPrototypeOf:n}=jt();fv=o;const t=R5();n(o.prototype,t.prototype),n(o,t);function o(i){if(!(this instanceof o))return new o(i);t.call(this,i)}return o.prototype._transform=function(i,r,e){e(null,i)},fv}var dv,mL;function JT(){if(mL)return dv;mL=1;const n=Un(),{ArrayIsArray:t,Promise:o,SymbolAsyncIterator:i,SymbolDispose:r}=jt(),e=Hn(),{once:a}=yr(),u=Tc(),c=Sn(),{aggregateTwoErrors:s,codes:{ERR_INVALID_ARG_TYPE:l,ERR_INVALID_RETURN_VALUE:f,ERR_MISSING_ARGS:d,ERR_STREAM_DESTROYED:h,ERR_STREAM_PREMATURE_CLOSE:p},AbortError:y}=dr(),{validateFunction:b,validateAbortSignal:_}=om(),{isIterable:T,isReadable:m,isReadableNodeStream:A,isNodeStream:E,isTransformStream:j,isWebStream:X,isReadableStream:K,isReadableFinished:O}=wn(),S=globalThis.AbortController||Vg().AbortController;let L,N,I;function V(te,de,Ee){let Re=!1;te.on("close",()=>{Re=!0});const De=e(te,{readable:de,writable:Ee},fe=>{Re=!fe});return{destroy:fe=>{Re||(Re=!0,u.destroyer(te,fe||new h("pipe")))},cleanup:De}}function re(te){return b(te[te.length-1],"streams[stream.length - 1]"),te.pop()}function Y(te){if(T(te))return te;if(A(te))return ce(te);throw new l("val",["Readable","Iterable","AsyncIterable"],te)}async function*ce(te){N||(N=Gb()),yield*N.prototype[i].call(te)}async function ae(te,de,Ee,{end:Re}){let De,fe=null;const _e=D=>{if(D&&(De=D),fe){const g=fe;fe=null,g()}},q=()=>new o((D,g)=>{De?g(De):fe=()=>{De?g(De):D()}});de.on("drain",_e);const w=e(de,{readable:!1},_e);try{de.writableNeedDrain&&await q();for await(const D of te)de.write(D)||await q();Re&&(de.end(),await q()),Ee()}catch(D){Ee(De!==D?s(De,D):D)}finally{w(),de.off("drain",_e)}}async function pe(te,de,Ee,{end:Re}){j(de)&&(de=de.writable);const De=de.getWriter();try{for await(const fe of te)await De.ready,De.write(fe).catch(()=>{});await De.ready,Re&&await De.close(),Ee()}catch(fe){try{await De.abort(fe),Ee(fe)}catch(_e){Ee(_e)}}}function U(...te){return le(te,a(re(te)))}function le(te,de,Ee){if(te.length===1&&t(te[0])&&(te=te[0]),te.length<2)throw new d("streams");const Re=new S,De=Re.signal,fe=Ee?.signal,_e=[];_(fe,"options.signal");function q(){x(new y)}I=I||yr().addAbortListener;let w;fe&&(w=I(fe,q));let D,g;const F=[];let M=0;function Q(ne){x(ne,--M===0)}function x(ne,ue){var Te;if(ne&&(!D||D.code==="ERR_STREAM_PREMATURE_CLOSE")&&(D=ne),!(!D&&!ue)){for(;F.length;)F.shift()(D);(Te=w)===null||Te===void 0||Te[r](),Re.abort(),ue&&(D||_e.forEach(Fe=>Fe()),n.nextTick(de,D,g))}}let $;for(let ne=0;ne<te.length;ne++){const ue=te[ne],Te=ne<te.length-1,Fe=ne>0,Z=Te||Ee?.end!==!1,oe=ne===te.length-1;if(E(ue)){let P=function(v){v&&v.name!=="AbortError"&&v.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Q(v)};if(Z){const{destroy:v,cleanup:R}=V(ue,Te,Fe);F.push(v),m(ue)&&oe&&_e.push(R)}ue.on("error",P),m(ue)&&oe&&_e.push(()=>{ue.removeListener("error",P)})}if(ne===0)if(typeof ue=="function"){if($=ue({signal:De}),!T($))throw new f("Iterable, AsyncIterable or Stream","source",$)}else T(ue)||A(ue)||j(ue)?$=ue:$=c.from(ue);else if(typeof ue=="function"){if(j($)){var B;$=Y((B=$)===null||B===void 0?void 0:B.readable)}else $=Y($);if($=ue($,{signal:De}),Te){if(!T($,!0))throw new f("AsyncIterable",`transform[${ne-1}]`,$)}else{var H;L||(L=j5());const P=new L({objectMode:!0}),v=(H=$)===null||H===void 0?void 0:H.then;if(typeof v=="function")M++,v.call($,k=>{g=k,k!=null&&P.write(k),Z&&P.end(),n.nextTick(Q)},k=>{P.destroy(k),n.nextTick(Q,k)});else if(T($,!0))M++,ae($,P,Q,{end:Z});else if(K($)||j($)){const k=$.readable||$;M++,ae(k,P,Q,{end:Z})}else throw new f("AsyncIterable or Promise","destination",$);$=P;const{destroy:R,cleanup:C}=V($,!1,!0);F.push(R),oe&&_e.push(C)}}else if(E(ue)){if(A($)){M+=2;const P=me($,ue,Q,{end:Z});m(ue)&&oe&&_e.push(P)}else if(j($)||K($)){const P=$.readable||$;M++,ae(P,ue,Q,{end:Z})}else if(T($))M++,ae($,ue,Q,{end:Z});else throw new l("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],$);$=ue}else if(X(ue)){if(A($))M++,pe(Y($),ue,Q,{end:Z});else if(K($)||T($))M++,pe($,ue,Q,{end:Z});else if(j($))M++,pe($.readable,ue,Q,{end:Z});else throw new l("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],$);$=ue}else $=c.from(ue)}return(De!=null&&De.aborted||fe!=null&&fe.aborted)&&n.nextTick(q),$}function me(te,de,Ee,{end:Re}){let De=!1;if(de.on("close",()=>{De||Ee(new p)}),te.pipe(de,{end:!1}),Re){let fe=function(){De=!0,de.end()};O(te)?n.nextTick(fe):te.once("end",fe)}else Ee();return e(te,{readable:!0,writable:!1},fe=>{const _e=te._readableState;fe&&fe.code==="ERR_STREAM_PREMATURE_CLOSE"&&_e&&_e.ended&&!_e.errored&&!_e.errorEmitted?te.once("end",Ee).once("error",Ee):Ee(fe)}),e(de,{readable:!1,writable:!0},Ee)}return dv={pipelineImpl:le,pipeline:U},dv}var pv,bL;function D5(){if(bL)return pv;bL=1;const{pipeline:n}=JT(),t=Sn(),{destroyer:o}=Tc(),{isNodeStream:i,isReadable:r,isWritable:e,isWebStream:a,isTransformStream:u,isWritableStream:c,isReadableStream:s}=wn(),{AbortError:l,codes:{ERR_INVALID_ARG_VALUE:f,ERR_MISSING_ARGS:d}}=dr(),h=Hn();return pv=function(...y){if(y.length===0)throw new d("streams");if(y.length===1)return t.from(y[0]);const b=[...y];if(typeof y[0]=="function"&&(y[0]=t.from(y[0])),typeof y[y.length-1]=="function"){const L=y.length-1;y[L]=t.from(y[L])}for(let L=0;L<y.length;++L)if(!(!i(y[L])&&!a(y[L]))){if(L<y.length-1&&!(r(y[L])||s(y[L])||u(y[L])))throw new f(`streams[${L}]`,b[L],"must be readable");if(L>0&&!(e(y[L])||c(y[L])||u(y[L])))throw new f(`streams[${L}]`,b[L],"must be writable")}let _,T,m,A,E;function j(L){const N=A;A=null,N?N(L):L?E.destroy(L):!S&&!O&&E.destroy()}const X=y[0],K=n(y,j),O=!!(e(X)||c(X)||u(X)),S=!!(r(K)||s(K)||u(K));if(E=new t({writableObjectMode:!!(X!=null&&X.writableObjectMode),readableObjectMode:!!(K!=null&&K.readableObjectMode),writable:O,readable:S}),O){if(i(X))E._write=function(N,I,V){X.write(N,I)?V():_=V},E._final=function(N){X.end(),T=N},X.on("drain",function(){if(_){const N=_;_=null,N()}});else if(a(X)){const I=(u(X)?X.writable:X).getWriter();E._write=async function(V,re,Y){try{await I.ready,I.write(V).catch(()=>{}),Y()}catch(ce){Y(ce)}},E._final=async function(V){try{await I.ready,I.close().catch(()=>{}),T=V}catch(re){V(re)}}}const L=u(K)?K.readable:K;h(L,()=>{if(T){const N=T;T=null,N()}})}if(S){if(i(K))K.on("readable",function(){if(m){const L=m;m=null,L()}}),K.on("end",function(){E.push(null)}),E._read=function(){for(;;){const L=K.read();if(L===null){m=E._read;return}if(!E.push(L))return}};else if(a(K)){const N=(u(K)?K.readable:K).getReader();E._read=async function(){for(;;)try{const{value:I,done:V}=await N.read();if(!E.push(I))return;if(V){E.push(null);return}}catch{return}}}}return E._destroy=function(L,N){!L&&A!==null&&(L=new l),m=null,_=null,T=null,A===null?N(L):(A=N,i(K)&&o(K,L))},E},pv}var vL;function SK(){if(vL)return eb;vL=1;const n=globalThis.AbortController||Vg().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:o,ERR_MISSING_ARGS:i,ERR_OUT_OF_RANGE:r},AbortError:e}=dr(),{validateAbortSignal:a,validateInteger:u,validateObject:c}=om(),s=jt().Symbol("kWeak"),l=jt().Symbol("kResistStopPropagation"),{finished:f}=Hn(),d=D5(),{addAbortSignalNoValidate:h}=Ub(),{isWritable:p,isNodeStream:y}=wn(),{deprecate:b}=yr(),{ArrayPrototypePush:_,Boolean:T,MathFloor:m,Number:A,NumberIsNaN:E,Promise:j,PromiseReject:X,PromiseResolve:K,PromisePrototypeThen:O,Symbol:S}=jt(),L=S("kEmpty"),N=S("kEof");function I(fe,_e){if(_e!=null&&c(_e,"options"),_e?.signal!=null&&a(_e.signal,"options.signal"),y(fe)&&!p(fe))throw new t("stream",fe,"must be writable");const q=d(this,fe);return _e!=null&&_e.signal&&h(_e.signal,q),q}function V(fe,_e){if(typeof fe!="function")throw new o("fn",["Function","AsyncFunction"],fe);_e!=null&&c(_e,"options"),_e?.signal!=null&&a(_e.signal,"options.signal");let q=1;_e?.concurrency!=null&&(q=m(_e.concurrency));let w=q-1;return _e?.highWaterMark!=null&&(w=m(_e.highWaterMark)),u(q,"options.concurrency",1),u(w,"options.highWaterMark",0),w+=q,async function*(){const g=yr().AbortSignalAny([_e?.signal].filter(T)),F=this,M=[],Q={signal:g};let x,$,B=!1,H=0;function ne(){B=!0,ue()}function ue(){H-=1,Te()}function Te(){$&&!B&&H<q&&M.length<w&&($(),$=null)}async function Fe(){try{for await(let Z of F){if(B)return;if(g.aborted)throw new e;try{if(Z=fe(Z,Q),Z===L)continue;Z=K(Z)}catch(oe){Z=X(oe)}H+=1,O(Z,ue,ne),M.push(Z),x&&(x(),x=null),!B&&(M.length>=w||H>=q)&&await new j(oe=>{$=oe})}M.push(N)}catch(Z){const oe=X(Z);O(oe,ue,ne),M.push(oe)}finally{B=!0,x&&(x(),x=null)}}Fe();try{for(;;){for(;M.length>0;){const Z=await M[0];if(Z===N)return;if(g.aborted)throw new e;Z!==L&&(yield Z),M.shift(),Te()}await new j(Z=>{x=Z})}}finally{B=!0,$&&($(),$=null)}}.call(this)}function re(fe=void 0){return fe!=null&&c(fe,"options"),fe?.signal!=null&&a(fe.signal,"options.signal"),async function*(){let q=0;for await(const D of this){var w;if(fe!=null&&(w=fe.signal)!==null&&w!==void 0&&w.aborted)throw new e({cause:fe.signal.reason});yield[q++,D]}}.call(this)}async function Y(fe,_e=void 0){for await(const q of U.call(this,fe,_e))return!0;return!1}async function ce(fe,_e=void 0){if(typeof fe!="function")throw new o("fn",["Function","AsyncFunction"],fe);return!await Y.call(this,async(...q)=>!await fe(...q),_e)}async function ae(fe,_e){for await(const q of U.call(this,fe,_e))return q}async function pe(fe,_e){if(typeof fe!="function")throw new o("fn",["Function","AsyncFunction"],fe);async function q(w,D){return await fe(w,D),L}for await(const w of V.call(this,q,_e));}function U(fe,_e){if(typeof fe!="function")throw new o("fn",["Function","AsyncFunction"],fe);async function q(w,D){return await fe(w,D)?w:L}return V.call(this,q,_e)}class le extends i{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function me(fe,_e,q){var w;if(typeof fe!="function")throw new o("reducer",["Function","AsyncFunction"],fe);q!=null&&c(q,"options"),q?.signal!=null&&a(q.signal,"options.signal");let D=arguments.length>1;if(q!=null&&(w=q.signal)!==null&&w!==void 0&&w.aborted){const x=new e(void 0,{cause:q.signal.reason});throw this.once("error",()=>{}),await f(this.destroy(x)),x}const g=new n,F=g.signal;if(q!=null&&q.signal){const x={once:!0,[s]:this,[l]:!0};q.signal.addEventListener("abort",()=>g.abort(),x)}let M=!1;try{for await(const x of this){var Q;if(M=!0,q!=null&&(Q=q.signal)!==null&&Q!==void 0&&Q.aborted)throw new e;D?_e=await fe(_e,x,{signal:F}):(_e=x,D=!0)}if(!M&&!D)throw new le}finally{g.abort()}return _e}async function te(fe){fe!=null&&c(fe,"options"),fe?.signal!=null&&a(fe.signal,"options.signal");const _e=[];for await(const w of this){var q;if(fe!=null&&(q=fe.signal)!==null&&q!==void 0&&q.aborted)throw new e(void 0,{cause:fe.signal.reason});_(_e,w)}return _e}function de(fe,_e){const q=V.call(this,fe,_e);return async function*(){for await(const D of q)yield*D}.call(this)}function Ee(fe){if(fe=A(fe),E(fe))return 0;if(fe<0)throw new r("number",">= 0",fe);return fe}function Re(fe,_e=void 0){return _e!=null&&c(_e,"options"),_e?.signal!=null&&a(_e.signal,"options.signal"),fe=Ee(fe),async function*(){var w;if(_e!=null&&(w=_e.signal)!==null&&w!==void 0&&w.aborted)throw new e;for await(const g of this){var D;if(_e!=null&&(D=_e.signal)!==null&&D!==void 0&&D.aborted)throw new e;fe--<=0&&(yield g)}}.call(this)}function De(fe,_e=void 0){return _e!=null&&c(_e,"options"),_e?.signal!=null&&a(_e.signal,"options.signal"),fe=Ee(fe),async function*(){var w;if(_e!=null&&(w=_e.signal)!==null&&w!==void 0&&w.aborted)throw new e;for await(const g of this){var D;if(_e!=null&&(D=_e.signal)!==null&&D!==void 0&&D.aborted)throw new e;if(fe-- >0&&(yield g),fe<=0)return}}.call(this)}return eb.streamReturningOperators={asIndexedPairs:b(re,"readable.asIndexedPairs will be removed in a future version."),drop:Re,filter:U,flatMap:de,map:V,take:De,compose:I},eb.promiseReturningOperators={every:ce,forEach:pe,reduce:me,toArray:te,some:Y,find:ae},eb}var hv,TL;function P5(){if(TL)return hv;TL=1;const{ArrayPrototypePop:n,Promise:t}=jt(),{isIterable:o,isNodeStream:i,isWebStream:r}=wn(),{pipelineImpl:e}=JT(),{finished:a}=Hn();N5();function u(...c){return new t((s,l)=>{let f,d;const h=c[c.length-1];if(h&&typeof h=="object"&&!i(h)&&!o(h)&&!r(h)){const p=n(c);f=p.signal,d=p.end}e(c,(p,y)=>{p?l(p):s(y)},{signal:f,end:d})})}return hv={finished:a,pipeline:u},hv}var OL;function N5(){if(OL)return z1.exports;OL=1;const{Buffer:n}=$n(),{ObjectDefineProperty:t,ObjectKeys:o,ReflectApply:i}=jt(),{promisify:{custom:r}}=yr(),{streamReturningOperators:e,promiseReturningOperators:a}=SK(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=dr(),c=D5(),{setDefaultHighWaterMark:s,getDefaultHighWaterMark:l}=Vb(),{pipeline:f}=JT(),{destroyer:d}=Tc(),h=Hn(),p=P5(),y=wn(),b=z1.exports=$T().Stream;b.isDestroyed=y.isDestroyed,b.isDisturbed=y.isDisturbed,b.isErrored=y.isErrored,b.isReadable=y.isReadable,b.isWritable=y.isWritable,b.Readable=Gb();for(const T of o(e)){let A=function(...E){if(new.target)throw u();return b.Readable.from(i(m,this,E))};const m=e[T];t(A,"name",{__proto__:null,value:m.name}),t(A,"length",{__proto__:null,value:m.length}),t(b.Readable.prototype,T,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}for(const T of o(a)){let A=function(...E){if(new.target)throw u();return i(m,this,E)};const m=a[T];t(A,"name",{__proto__:null,value:m.name}),t(A,"length",{__proto__:null,value:m.length}),t(b.Readable.prototype,T,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}b.Writable=HT(),b.Duplex=Sn(),b.Transform=R5(),b.PassThrough=j5(),b.pipeline=f;const{addAbortSignal:_}=Ub();return b.addAbortSignal=_,b.finished=h,b.destroy=d,b.compose=c,b.setDefaultHighWaterMark=s,b.getDefaultHighWaterMark=l,t(b,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return p}}),t(f,r,{__proto__:null,enumerable:!0,get(){return p.pipeline}}),t(h,r,{__proto__:null,enumerable:!0,get(){return p.finished}}),b.Stream=b,b._isUint8Array=function(m){return m instanceof Uint8Array},b._uint8ArrayToBuffer=function(m){return n.from(m.buffer,m.byteOffset,m.byteLength)},z1.exports}var SL;function wK(){return SL||(SL=1,(function(n){const t=N5(),o=P5(),i=t.Readable.destroy;n.exports=t.Readable,n.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,n.exports._isUint8Array=t._isUint8Array,n.exports.isDisturbed=t.isDisturbed,n.exports.isErrored=t.isErrored,n.exports.isReadable=t.isReadable,n.exports.Readable=t.Readable,n.exports.Writable=t.Writable,n.exports.Duplex=t.Duplex,n.exports.Transform=t.Transform,n.exports.PassThrough=t.PassThrough,n.exports.addAbortSignal=t.addAbortSignal,n.exports.finished=t.finished,n.exports.destroy=t.destroy,n.exports.destroy=i,n.exports.pipeline=t.pipeline,n.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return o}}),n.exports.Stream=t.Stream,n.exports.default=n.exports})(X1)),X1.exports}var AK=wK();function FK(n){const t={};for(const[o,i]of[...n])t[o.value]=i;return t}async function M5({bindings:n,dataset:t,factory:o,query:i}){const r=new RK(t),e=new yK.QueryEngine,u=new _K.BindingsFactory(o).bindings(n);return(await e.queryBindings(i,{sources:[r],initialBindings:u})).toArray()}function EK(n){return n?n.map(t=>{let o="";return t.start==="object"&&t.end==="subject"&&(o+="^"),o+=t.predicates.map(i=>`<${i.value}>`).join("|"),t.quantifier==="oneOrMore"?o+="+":t.quantifier==="zeroOrMore"?o+="*":t.quantifier==="zeroOrOne"&&(o+="?"),o}).join("/"):null}class RK{constructor(t){this.dataset=t}match(t,o,i,r){return AK.Readable.from(this.dataset.match(t,o,i,r))}}function I5(n,t=[]){for(const o of n.out([d6.imports]))I5(o,t);for(const o of n.out([ve.declare])){const i=o.out([ve.prefix]).value,r=o.out([ve.namespace]).value;t.push(`PREFIX ${i}: <${r}>`)}return t}function jK(n){const t=n.sparql.out([ve.select]).value,o=I5(n.sparql.out([ve.prefixes])),i=EK(n.path),r=n.sparql.out([ve.message]).terms,e=[...o,t].filter(Boolean).join(`
`).split("$PATH").join(i);return{generic:DK({message:r,query:e,source:n.sparql.terms})}}function DK({message:n,query:t,source:o}){return async i=>{const r=i.focusNode.dataset,e=i.factory,a=[[e.variable("this"),i.focusNode.term]],u=await M5({bindings:a,dataset:r,factory:e,query:t});for(const c of u){const s=FK(c),l=c.has("path")&&BL(i.focusNode.node([c.get("path")])),f=i.focusNode.node([c.get("value")||i.focusNode.term]);i.violation(ve.SPARQLConstraintComponent,{args:s,message:n,path:l,source:o,value:f})}u.length===0&&i.debug(ve.SPARQLConstraintComponent,{source:o})}}const Gte=new Map([[ve.sparql,jK]]);async function PK(n,t){const o=n.out([ve.select]).value;if(!o)return[];const i=await M5({dataset:t.focusNode.dataset,factory:t.factory,query:o,bindings:[]}),r=t.factory.variable("this");return i.map(e=>e.get(r)).filter(Boolean)}ve.target;export{zK as V,pV as a,AK as b,wK as c,Ds as d,A6 as e,Uv as f,S6 as g,m6 as h,v6 as i,jL as j,w6 as k,b6 as l,F6 as m,E6 as n,R6 as o,$n as r,Gte as v};
