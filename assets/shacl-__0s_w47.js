import{n as e,T as t,t as r,a as n,r as a,f as o,b as i,c as s,d as u,e as c}from"./rdf-D0oavnFg.js";import{a as l,g as p,b as d}from"./charts-DG9K48Xb.js";class f{constructor({dataset:e,end:t,quad:r,start:n}){this.dataset=e,this.end=t,this.quad=r,this.start=n}get term(){return this.quad[this.end]}get graph(){return this.quad.graph}get startTerm(){return this.quad[this.start]}}e("http://www.w3.org/2001/XMLSchema#");const h=e("http://www.w3.org/1999/02/22-rdf-syntax-ns#");e("http://www.w3.org/2000/01/rdf-schema#");class y{static add({ptr:e,start:t,end:r,subjects:n=[null],predicates:a=[null],objects:o=[null],graphs:i,callback:s}={}){if(!e.factory)throw new Error("add operation requires a factory");let u=()=>{};s&&(u=n=>{s(new f({dataset:e.dataset,start:t,end:r,quad:n}))});for(const c of n)for(const r of a)for(const n of o)for(const a of i){const o={subject:c,predicate:r,object:n,graph:a};o[t]=e.term;const i=e.factory.quad(o.subject,o.predicate,o.object,o.graph);e.dataset.add(i),u(i)}return e}static addList({ptr:e,predicates:t,items:r,graphs:n}){if(e.isAny())throw new Error("can't attach a list to an any ptr");for(const a of t)for(const t of n){const n=r.map(()=>e.factory.blankNode());e.dataset.add(e.factory.quad(e.term,a,n[0]||h.nil,t));for(let a=0;a<n.length;a++)e.dataset.add(e.factory.quad(n[a],h.first,r[a],t)),e.dataset.add(e.factory.quad(n[a],h.rest,n[a+1]||h.nil,t))}return e}static delete({ptr:e,start:t,subjects:r=[null],predicates:n=[null],objects:a=[null]}){for(const o of r)for(const r of n)for(const n of a){const a={subject:o,predicate:r,object:n};a[t]=e.term;const i=e.dataset.match(a.subject,a.predicate,a.object);for(const t of i)e.dataset.delete(t)}return e}static deleteList({ptr:e,predicates:t}){const r=[];for(const n of t)for(const t of e.dataset.match(e.term,n)){let n=t.object;for(r.push(t);!h.nil.equals(n);){n=r[r.length-1].object;const t=e.dataset.match(n);if(0===t.size)break;for(const e of t)r.push(e)}}for(const n of r)e.dataset.delete(n);return e}static execute({ptr:e,operation:t="traverse",quantifier:r,start:n,end:a,subjects:o,predicates:i,objects:s,graphs:u,items:c,callback:l}={}){if("add"===t)return y.add({ptr:e,start:n,end:a,subjects:o,predicates:i,objects:s,graphs:u,callback:l});if("addList"===t)return y.addList({ptr:e,predicates:i,items:c,graphs:u});if("delete"===t)return y.delete({ptr:e,start:n,subjects:o,predicates:i,objects:s});if("deleteList"===t)return y.deleteList({ptr:e,predicates:i});if("isList"===t)return y.isList({ptr:e});if("list"===t)return y.list({ptr:e});if("traverse"===t)return y.traverse({ptr:e,quantifier:r,start:n,end:a,subjects:o,predicates:i,objects:s,graphs:u});throw new Error(`unknown operation ${t}`)}static isList({ptr:e}){if(e.isAny())return!1;if(h.nil.equals(e.term))return!0;return 1===y.traverse({ptr:e,predicates:[h.first]}).length}static list({ptr:e}){if(e.isList())return{*[Symbol.iterator](){for(;e&&!e.term.equals(h.nil);){const t=e.out([h.first]);if(1!==t.length)throw new Error(`Invalid list: rdf:first count not equals one on ${e.value}`);const r=e.out([h.rest]);if(1!==r.length)throw new Error(`Invalid list: rdf:rest count not equals one on ${e.value}`);yield t[0],e=r[0]}}}}static traverse({ptr:e,quantifier:t="one",start:r="subject",end:n="object",subjects:a=[null],predicates:o=[null],objects:i=[null],graphs:s=[null],callback:u}){if("one"===t)return y.traverseOne({ptr:e,start:r,end:n,subjects:a,predicates:o,objects:i,graphs:s,callback:u});if("oneOrMore"===t){const t=y.traverse({ptr:e,end:n,start:r,subjects:a,predicates:o,objects:i,graphs:s,callback:u});return y.traverseMore({ptrs:t,end:n,start:r,subjects:a,predicates:o,objects:i,graphs:s,callback:u})}if("zeroOrMore"===t)return y.traverseMore({ptrs:[e],end:n,start:r,subjects:a,predicates:o,objects:i,graphs:s,callback:u});if("zeroOrOne"===t)return[e,...y.traverse({ptr:e,end:n,start:r,subjects:a,predicates:o,objects:i,graphs:s,callback:u})];throw new Error(`unknown quantifier ${t}`)}static traverseMore({ptrs:e,end:r,start:n,subjects:a,predicates:o,objects:i,graphs:s,callback:u}={}){let c,l,p=[...e];do{c=[];for(const t of e)c=[...c,...y.traverseOne({ptr:t,end:r,start:n,subjects:a,predicates:o,objects:i,graphs:s,callback:u})];l&&(c=c.filter(e=>!l.has(e.term))),e=c,p=[...p,...c],l=new t(p.map(e=>e.term))}while(c.length>0);return p}static traverseOne({ptr:e,start:t,end:r,subjects:n,predicates:a,objects:o,graphs:i,callback:s=(e,t)=>t.extend(e)}={}){const u=[];for(const c of n)for(const n of a)for(const a of o)for(const o of i){const i={subject:c,predicate:n,object:a,graph:o};i[t]=e.term;for(const n of e.dataset.match(i.subject,i.predicate,i.object,i.graph))u.push(s(new f({dataset:e.dataset,end:r,quad:n,start:t}),e))}return u}}function g(e,t){return t?r=>t(e.extend(r)):()=>{}}class m{constructor({dataset:e,edges:t=[],factory:r,graph:n,term:a}){if(!e&&0===t.length)throw new Error("dataset or edges is required");if(0===t.length&&void 0===a)throw new Error("edges or term must be given");if(t.length>0&&a)throw new Error("edges or term must be given");this.dataset=e||t[t.length-1].dataset,this.edges=t,this.factory=r,this._graph=n,0===t.length&&(this._term=a)}get edge(){return this.edges[this.edges.length-1]}get graph(){return"object"==typeof this._graph?this._graph:this.edge&&this.edge.graph}get length(){return void 0!==this._term?1:this.edges.length+1}get startTerm(){return this._term||this.edges[0].startTerm}get term(){return void 0!==this._term?this._term:this.edge.term}get value(){const e=this.term;return null===e?void 0:e.value}addIn(e,t,r){return y.add({ptr:this,start:"object",end:"subject",subjects:t,predicates:e,graphs:[this.graph||this.factory.defaultGraph()],callback:g(this,r)})}addList(e,t){return y.addList({ptr:this,predicates:e,graphs:[this.graph||this.factory.defaultGraph()],items:t})}addOut(e,t,r){return y.add({ptr:this,start:"subject",end:"object",predicates:e,objects:t,graphs:[this.graph||this.factory.defaultGraph()],callback:g(this,r)})}deleteIn(e,t){return y.delete({ptr:this,start:"object",subjects:t,predicates:e})}deleteList(e){return y.deleteList({ptr:this,predicates:e})}deleteOut(e,t){return y.delete({ptr:this,start:"subject",predicates:e,objects:t})}execute({operation:e,quantifier:t,start:r,end:n,subjects:a,predicates:o,objects:i,graphs:s,items:u,callback:c}){return y.execute({ptr:this,operation:e,quantifier:t,start:r,end:n,subjects:a,predicates:o,objects:i,graphs:s,items:u,callback:c})}extend(e){return new this.constructor({dataset:this.dataset,edges:[...this.edges,e],factory:this.factory,graph:this._graph})}hasIn(e,t){return y.traverse({ptr:this,start:"object",end:"object",subjects:t,predicates:e,graphs:[this.graph]})}hasOut(e,t){return y.traverse({ptr:this,start:"subject",end:"subject",predicates:e,objects:t,graphs:[this.graph]})}in(e,t){return y.traverse({ptr:this,start:"object",end:"subject",subjects:t,predicates:e,graphs:[this.graph]})}isAny(){return!this.term}isList(){return y.isList({ptr:this})}list(){return y.list({ptr:this})}*nodes(){for(let e=0;e<this.length;e++)void 0!==this._term?yield{dataset:this.dataset,term:this._term}:this.edges.length>e?yield{dataset:this.edges[e].dataset,term:this.edges[e].startTerm}:this.edges.length===e&&(yield{dataset:this.edges[e-1].dataset,term:this.edges[e-1].term})}out(e,t){return y.traverse({ptr:this,predicates:e,objects:t,graphs:[this.graph]})}*quads(){for(const{quad:e}of this.edges)yield e}trim(){return new this.constructor({dataset:this.dataset,factory:this.factory,graph:this.graph,term:this.term})}}function b(e,t){return e?e.equals(t):e===t}function v(e,t){return t?r=>t(new e.constructor({factory:e.factory,ptrs:[r]})):()=>{}}class _{constructor({dataset:e,factory:t,ptrs:r,terms:n,graphs:a}){if(this.factory=t,r)this.ptrs=[...r];else{this.ptrs=[];for(const r of n||[null])for(const n of a||[null])this.ptrs.push(new m({dataset:e,factory:t,graph:n,term:r}))}}get dataset(){const e=new Set(this.datasets);return 1!==e.size?null:e[Symbol.iterator]().next().value}get datasets(){return this.ptrs.map(e=>e.dataset)}get term(){const e=new t(this.terms);if(1===e.size)return e[Symbol.iterator]().next().value}get terms(){return this.ptrs.map(e=>e.term)}get value(){const e=this.term;return null==e?void 0:e.value}get values(){return this.ptrs.map(e=>e.value)}addIn(e,t,r){const n=v(this,r);for(const a of this.ptrs)a.addIn(e,t,n);return this}addList(e,t){if(this.isAny())throw new Error("can't attach a list to an any ptr");for(const r of this.ptrs)r.addList(e,t);return this}addOut(e,t,r){const n=v(this,r);for(const a of this.ptrs)a.addOut(e,t,n);return this}clone(e){return new this.constructor({factory:this.factory,ptrs:this.ptrs,...e})}deleteIn(e,t){for(const r of this.ptrs)r.deleteIn(e,t);return this}deleteList(e){for(const t of this.ptrs)t.deleteList(e);return this}deleteOut(e,t){for(const r of this.ptrs)r.deleteOut(e,t);return this}distinct(){const e=this.ptrs.reduce((e,t)=>(e.some(e=>{return n=t,(r=e).dataset===n.dataset&&!!b(r.graph,n.graph)&&!!b(r.term,n.term);var r,n})||e.push(t.trim()),e),[]);return this.clone({ptrs:e})}execute(e){return this.clone({ptrs:this.ptrs.flatMap(t=>t.execute(e))})}executeAll(e){let t=this;for(const r of e)t=t.execute(r);return t}filter(e){return this.clone({ptrs:[...this].filter(e).map(e=>e.ptrs[0])})}hasIn(e,t){return this.clone({ptrs:this.ptrs.flatMap(r=>r.hasIn(e,t))})}hasOut(e,t){return this.clone({ptrs:this.ptrs.flatMap(r=>r.hasOut(e,t))})}in(e,t){return this.clone({ptrs:this.ptrs.flatMap(r=>r.in(e,t))})}isAny(){return this.ptrs.length>0&&this.ptrs.some(e=>e.isAny())}isList(){return 1===this.ptrs.length&&this.ptrs[0].isList()}list(){if(!this.isList())return;const e=this.ptrs[0].list(),t=this;return function*(){for(const r of e)yield t.clone({ptrs:[r]})}()}map(e){return[...this].map(e)}node(e){const t=this.dataset,r=[...e].map(e=>new m({dataset:t,factory:this.factory,term:e}));return this.clone({ptrs:r})}out(e,t){return this.clone({ptrs:this.ptrs.flatMap(r=>r.out(e,t))})}*quads(){for(const{edges:e}of this.ptrs)for(const{quad:t}of e)yield t}trim(){return this.clone({ptrs:this.ptrs.map(e=>e.trim())})}*[Symbol.iterator](){for(const e of this.ptrs)yield this.clone({ptrs:[e]})}}const O=e("http://www.w3.org/2002/07/owl#"),T=e("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),w=e("http://www.w3.org/2000/01/rdf-schema#"),S=e("http://www.w3.org/ns/shacl#"),j=e("https://schemas.link/shacl-next#"),A=e("http://www.w3.org/2001/XMLSchema#");function F(e){return e?`{${e.map(e=>function(e){return e?`{${[...e.quads()].map(e=>r(e)).join(" ")}}`:"{}"}(e)).join(" ")}}`:"{}"}var E,x,P,D;const M=p(function(){if(D)return P;D=1;var e=function(){if(x)return E;x=1;var e=l();return E=function(t,r){var n;if("function"!=typeof r)throw new TypeError("Expected a function");return t=e(t),function(){return--t>0&&(n=r.apply(this,arguments)),t<=1&&(r=void 0),n}},E}();return P=function(t){return e(2,t)}}());let N=class{constructor({details:e,factory:t,options:r,results:n=[]}={}){this.details=e,this.factory=t,this.options=r,this.results=n,this._conforms=M(()=>!this.results.some(e=>e.severity.equals(S.Info)||e.severity.equals(S.Violation)||e.severity.equals(S.Warning))),this._ptr=M(()=>this.build())}get conforms(){return this._conforms()}get dataset(){return this.ptr.dataset}get ptr(){return this._ptr()}get term(){return this.ptr.term}build(){const e=new _({dataset:this.factory.dataset(),factory:this.factory,terms:[this.factory.blankNode()]});e.addOut([T.type],[S.ValidationReport]).addOut([S.conforms],[this.factory.literal(this.conforms.toString(),A.boolean)]);for(const t of this.results)e.addOut([S.result],[this.factory.blankNode()],e=>{t.build(e,this.options)});return e}coverage(){return this.results.flatMap(e=>e.coverage())}};let I=class{constructor({args:e={},constraintComponent:t,factory:n,focusNode:a,message:o=[],path:i,results:s=[],severity:u,shape:c,source:l=[],value:p,valuePaths:d=[]}={}){this.args=e,this.constraintComponent=t,this.factory=n,this.focusNode=a,this.path=i||c.path,this.results=s,this.severity=u,this.shape=c,this.source=l,this.value=p,this.valuePaths=d,this._message=M(()=>(this.shape.message.length>0&&(o=this.shape.message),0===o.length&&(o=this.shape.ptr.node([this.constraintComponent]).out([S.message]).terms),o.map(t=>n.literal(function(e,t){return Object.entries(t).reduce((e,[t,n])=>(n&&n.termType&&(n=r(n)),e.replace(`{$${t}}`,n).replace(`{?${t}}`,n)),e)}(t.value,e),t.language||null))))}get message(){return this._message()}build(e,{details:t}={}){e.addOut([T.type],[S.ValidationResult]).addOut([S.focusNode],this.focusNode.terms).addOut([S.resultSeverity],[this.severity]).addOut([S.sourceConstraint],this.source).addOut([S.sourceConstraintComponent],[this.constraintComponent]).addOut([S.sourceShape],this.shape.ptr.terms),this.message&&e.addOut([S.resultMessage],this.message);const r=t=>"one"===t.quantifier?t.predicates.length>1?e.node([this.factory.blankNode()]).addList([S.alternativePath],t.predicates):"object"===t.start?e.node([this.factory.blankNode()]).addOut([S.inversePath],[t.predicates[0]]):e.node([t.predicates[0]]):"oneOrMore"===t.quantifier?e.node([this.factory.blankNode()]).addOut([S.oneOrMorePath],[t.predicates[0]]):"zeroOrMore"===t.quantifier?e.node([this.factory.blankNode()]).addOut([S.zeroOrMorePath],[t.predicates[0]]):"zeroOrOne"===t.quantifier?e.node([this.factory.blankNode()]).addOut([S.zeroOrOnePath],[t.predicates[0]]):void 0;if(this.path&&(1===this.path.length?e.addOut([S.resultPath],r(this.path[0]).terms):e.addList([S.resultPath],this.path.map(e=>r(e).term))),void 0!==this.value&&e.addOut([S.value],this.value.terms),t)for(const n of this.results)e.addOut([S.detail],[this.factory.blankNode()],e=>{n.build(e,{details:t})})}coverage(){return[...this.valuePaths.flatMap(e=>[...e.quads()]),...this.results.flatMap(e=>e.coverage())]}},R=class e{constructor({factory:e,focusNode:t,options:r={debug:!1,details:!1},processed:n=new Set,report:a=new N({factory:e,options:r}),results:o=new Map,shape:i,value:s,valueOrNode:u,valuePaths:c,values:l}={}){this.factory=e,this.focusNode=t,this.options=r,this.processed=n,this.report=a,this.results=o,this.shape=i,this.value=s,this.valuePaths=c,this.valueOrNode=u,this.values=l}create({child:t,focusNode:r=this.focusNode,shape:n=this.shape,value:a=this.value,valueOrNode:o=this.valueOrNode,valuePaths:i=this.valuePaths,values:s=this.values}={}){return new e({factory:this.factory,focusNode:r,options:this.options,processed:this.processed,report:t?new N({factory:this.factory,options:this.options}):this.report,results:this.results,shape:n,value:a,valueOrNode:o,valuePaths:i,values:s})}id({shape:e=this.shape}={}){return`${r(e.ptr.term)} - ${r(this.focusNode.term)} - ${F(this.valuePaths)}`}result(e){const t=new I({factory:this.factory,focusNode:this.focusNode,shape:this.shape,value:this.value,valuePaths:this.valuePaths,...e}),r=this.id();this.results.has(r)?this.results.get(r).add(t):this.results.set(r,new Set([t])),this.report.results.push(t)}debug(e,t){this.options.debug&&this.result({severity:j.Debug,constraintComponent:e,...t})}trace(e,t){this.options.trace&&this.result({severity:j.Trace,constraintComponent:e,...t})}test(e,t,r){e?this.debug(t,r):this.violation(t,r)}violation(e,t){this.result({constraintComponent:e,severity:this.shape.severity||S.Violation,...t})}};function L(){return{generic:e=>{e.trace(j.TraversalConstraintComponent,{args:{},message:[e.factory.literal("Traversal")],value:e.valueOrNode})}}}class C{constructor(e){this.validations=new n(e)}compile(e){const t=e.validator.options.coverage;if(e.deactivated)return[];let r=!1;const n=new Set;for(const a of e.ptr.execute({start:"subject",end:"predicate"})){const e=this.validations.get(a.term);e&&(n.add(e),a.term.equals(S.property)&&(r=!0))}return t&&e.isPropertyShape&&!r&&n.add(L),[...n].map(t=>t(e)).filter(Boolean)}}var B,q,U={},k={},Q={},V={};function G(){if(B)return V;B=1,Object.defineProperty(V,"__esModule",{value:!0}),V.Translator=void 0;return V.Translator=class{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(e){throw new Error(`Invalid RDF ${e.datatype.value} value: '${e.value}'`)}registerHandler(e,t,r){for(const n of t)this.supportedRdfDatatypes.push(n),this.fromRdfHandlers[n.value]=e;for(const n of r){let t=this.toRdfHandlers[n];t||(this.toRdfHandlers[n]=t=[]),t.push(e)}}fromRdf(e,t){const r=this.fromRdfHandlers[e.datatype.value];return r?r.fromRdf(e,t):e.value}toRdf(e,t){const r=this.toRdfHandlers[typeof e];if(r)for(const n of r){const r=n.toRdf(e,t);if(r)return r}throw new Error(`Invalid JavaScript value: '${e}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}},V}var $,z={};var X,H={};var J,K={};var Y,W,Z={};function ee(){return W||(W=1,e=k,t=k&&k.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=k&&k.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(function(){if(q)return Q;q=1,Object.defineProperty(Q,"__esModule",{value:!0}),Q.TypeHandlerBoolean=void 0;const e=G();let t=class t{fromRdf(t,r){switch(t.value){case"true":case"1":return!0;case"false":case"0":return!1}return r&&e.Translator.incorrectRdfDataType(t),!1}toRdf(e,{datatype:r,dataFactory:n}){return n.literal(e?"true":"false",r||n.namedNode(t.TYPE))}};return Q.TypeHandlerBoolean=t,t.TYPE="http://www.w3.org/2001/XMLSchema#boolean",Q}(),e),r(function(){if($)return z;$=1,Object.defineProperty(z,"__esModule",{value:!0}),z.TypeHandlerDate=void 0;const e=G();let t=class t{fromRdf(r,n){switch(n&&!r.value.match(t.VALIDATORS[r.datatype.value.substr(33,r.datatype.value.length)])&&e.Translator.incorrectRdfDataType(r),r.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(r.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const e=r.value.split("-");return new Date(0,parseInt(e[0],10)-1,parseInt(e[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(r.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(r.value+"-01");default:return new Date(r.value)}}toRdf(e,{datatype:r,dataFactory:n}){if(r=r||n.namedNode(t.TYPES[0]),!(e instanceof Date))return null;const a=e;let o;switch(r.value){case"http://www.w3.org/2001/XMLSchema#gDay":o=String(a.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":o=a.getUTCMonth()+1+"-"+a.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":o=String(a.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":o=a.getUTCFullYear()+"-"+(a.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":o=a.toISOString().replace(/T.*$/,"");break;default:o=a.toISOString()}return n.literal(o,r)}};return z.TypeHandlerDate=t,t.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],t.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/},z}(),e),r(function(){if(X)return H;X=1,Object.defineProperty(H,"__esModule",{value:!0}),H.TypeHandlerNumberDouble=void 0;const e=G();let t=class t{fromRdf(t,r){const n=parseFloat(t.value);return r&&isNaN(n)&&e.Translator.incorrectRdfDataType(t),n}toRdf(e,{datatype:r,dataFactory:n}){return r=r||n.namedNode(t.TYPES[0]),isNaN(e)?n.literal("NaN",r):isFinite(e)?e%1==0?null:n.literal(e.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),r):n.literal(e>0?"INF":"-INF",r)}};return H.TypeHandlerNumberDouble=t,t.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"],H}(),e),r(function(){if(J)return K;J=1,Object.defineProperty(K,"__esModule",{value:!0}),K.TypeHandlerNumberInteger=void 0;const e=G();let t=class t{fromRdf(t,r){const n=parseInt(t.value,10);return r&&(isNaN(n)||t.value.indexOf(".")>=0)&&e.Translator.incorrectRdfDataType(t),n}toRdf(e,{datatype:r,dataFactory:n}){return n.literal(String(e),r||(e<=t.MAX_INT&&e>=t.MIN_INT?n.namedNode(t.TYPES[0]):n.namedNode(t.TYPES[1])))}};return K.TypeHandlerNumberInteger=t,t.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],t.MAX_INT=2147483647,t.MIN_INT=-2147483648,K}(),e),r(function(){if(Y)return Z;Y=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.TypeHandlerString=void 0;let e=class{fromRdf(e){return e.value}toRdf(e,{datatype:t,dataFactory:r}){return r.literal(e,t)}};return Z.TypeHandlerString=e,e.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"],Z}(),e)),k;var e,t,r}var te,re,ne={};var ae=(re||(re=1,function(e){var t=U&&U.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=U&&U.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.fromRdf=c,e.toRdf=function(e,t){return t&&"namedNode"in t&&(t={dataFactory:t}),(t=t||{})&&!t.dataFactory&&(t.dataFactory=s),u.toRdf(e,t)},e.getTermRaw=function(e,t){return"Literal"===e.termType?c(e,t):e.value},e.getSupportedRdfDatatypes=function(){return u.getSupportedRdfDatatypes()},e.getSupportedJavaScriptPrimitives=function(){return u.getSupportedJavaScriptPrimitives()};const n=a(),o=ee(),i=G();r(ee(),e),r((te||(te=1,Object.defineProperty(ne,"__esModule",{value:!0})),ne),e),r(G(),e);const s=new n.DataFactory,u=new i.Translator;function c(e,t){return u.fromRdf(e,t)}u.registerHandler(new o.TypeHandlerString,o.TypeHandlerString.TYPES.map(e=>s.namedNode(e)),["string"]),u.registerHandler(new o.TypeHandlerBoolean,[o.TypeHandlerBoolean.TYPE].map(e=>s.namedNode(e)),["boolean"]),u.registerHandler(new o.TypeHandlerNumberDouble,o.TypeHandlerNumberDouble.TYPES.map(e=>s.namedNode(e)),["number"]),u.registerHandler(new o.TypeHandlerNumberInteger,o.TypeHandlerNumberInteger.TYPES.map(e=>s.namedNode(e)),["number"]),u.registerHandler(new o.TypeHandlerDate,o.TypeHandlerDate.TYPES.map(e=>s.namedNode(e)),["object"])}(U)),U);function oe(e){if("BlankNode"!==e.term.termType)return{quantifier:"one",start:"subject",end:"object",predicates:[e.term]};const t=e.out([S.alternativePath]);if(1===t.ptrs.length&&t.ptrs[0].isList())return{quantifier:"one",start:"subject",end:"object",predicates:[...t.list()].map(e=>e.term)};const r=e.out([S.inversePath]);if(r.term)return{quantifier:"one",start:"object",end:"subject",predicates:[r.term]};const n=e.out([S.oneOrMorePath]);if(n.term)return{quantifier:"oneOrMore",start:"subject",end:"object",predicates:[n.term]};const a=e.out([S.zeroOrMorePath]);if(a.term)return{quantifier:"zeroOrMore",start:"subject",end:"object",predicates:[a.term]};const o=e.out([S.zeroOrOnePath]);return o.term?{quantifier:"zeroOrOne",start:"subject",end:"object",predicates:[o.term]}:void 0}function ie(e){return 0===e.terms.length?null:e.ptrs[0].isList()?[...e.list()].map(e=>oe(e)):[oe(e)]}class se{constructor(e){this.shape=e,this._compiled=M(()=>this.shape.validator.registry.compile(e))}get compiled(){return this._compiled()}async validate(e){return 0===e.focusNode.dataset.size||(this.shape.isPropertyShape?await this.validateProperty(e):await this.validateNode(e)),e}async validateNode(e){const t=e.create({shape:this.shape,valueOrNode:e.value||e.focusNode});for(const r of this.compiled)r.node&&await r.node(t),r.generic&&await r.generic(t)}async validateProperty(e){let r;r=this.shape.isSparqlShape?e.focusNode:e.focusNode.executeAll(this.shape.path);const a=r.node(new t(r.terms)),o=[...r].reduce((e,t)=>{const n=t.term,a=r.node([n]);return e.has(n)||e.set(n,{value:a,valuePaths:[]}),e.get(n).valuePaths.push(t),e},new n).values(),i=e.create({shape:this.shape,values:a});for(const t of this.compiled)t.property&&await t.property(i);for(const{value:t,valuePaths:n}of o){const r=e.create({shape:this.shape,value:t,valueOrNode:t,valuePaths:n});for(const e of this.compiled)e.generic&&await e.generic(r)}}}function ue(e){const r=new t,n=new _({dataset:e.dataset,terms:e.terms}).execute({quantifier:"zeroOrMore",start:"object",end:"subject",predicates:[w.subClassOf]});for(const t of n.ptrs)for(const{term:e}of t.nodes())r.add(e);return r}class ce{constructor(e,{registry:r}){this.registry=r,this.targetClass=new t([...ue(e.hasOut([T.type],[S.NodeShape])),...ue(e.out([S.targetClass]))]),this.targetNode=e.out([S.targetNode]).terms,this.targetObjectsOf=e.out([S.targetObjectsOf]).terms,this.targetSubjectsOf=e.out([S.targetSubjectsOf]).terms,this.targets=[...e.out([S.target])]}async resolve(e){const r=e.focusNode.node([null]),n=[...e.focusNode.hasOut([T.type],this.targetClass).ptrs,...e.focusNode.node(this.targetNode).ptrs,...r.execute({start:"object",end:"object",predicates:this.targetObjectsOf}).ptrs,...r.execute({start:"subject",end:"subject",predicates:this.targetSubjectsOf}).ptrs];for(const t of this.targets)for(const[,r]of this.registry.targetResolvers){const a=await r(t,e);n.push(...e.focusNode.node(a).ptrs)}const a=e.focusNode.clone({ptrs:n});return a.node([...new t(a.terms)])}}class le{constructor(e,{validator:t}){this.ptr=e,this.validator=t,this._deactivated=M(()=>{const e=this.ptr.out([S.deactivated]).term;return e&&ae.fromRdf(e)}),this._message=M(()=>this.ptr.out([S.message]).terms),this._path=M(()=>ie(this.ptr.out([S.path]))),this._severity=M(()=>this.ptr.out([S.severity]).term),this._shapeValidator=M(()=>new se(this)),this._sparql=M(()=>this.ptr.out([S.sparql])),this._targetResolver=M(()=>new ce(this.ptr,{registry:this.validator.targetResolverRegistry}))}get deactivated(){return this._deactivated()}get isPropertyShape(){return Boolean(this.path)}get isSparqlShape(){return this.sparql.terms.length>0}get path(){return this._path()}get targetResolver(){return this._targetResolver()}get message(){return this._message()}get severity(){return this._severity()}get shapeValidator(){return this._shapeValidator()}get sparql(){return this._sparql()}async resolveTargets(e){return this.targetResolver.resolve(e)}async validate(e){const t=e.id({shape:this});if(e.processed.has(t)){if(e.results.has(t))for(const r of e.results.get(t))e.report.results.push(r);return e}return e.processed.add(t),this.shapeValidator.validate(e)}}class pe{constructor(e){this.targetResolvers=new n(e)}}function de(e){return t=>{t.test(t.values.terms.length<=e,S.MaxCountConstraintComponent,{args:{maxCount:e},message:[t.factory.literal("More than {$maxCount} values")]})}}function fe(e){return t=>{t.test(t.values.terms.length>=e,S.MinCountConstraintComponent,{args:{minCount:e},message:[t.factory.literal("Less than {$minCount} values")]})}}async function he(e,t){return Promise.all(e.map(t))}function ye(e){return async t=>{const r=await he(e,async e=>(await e.validate(t.create({child:!0,focusNode:t.valueOrNode}))).report),n=r.every(e=>e.conforms);t.test(n,S.AndConstraintComponent,{results:r.flatMap(e=>e.results),value:t.valueOrNode})}}function ge(e){return async t=>{const r=(await e.validate(t.create({child:!0,focusNode:t.valueOrNode}))).report,n=!r.conforms;t.test(n,S.NotConstraintComponent,{args:{not:e.ptr.term},message:[t.factory.literal("Value does have shape {$not}")],results:r.results,value:t.valueOrNode})}}function me(e){return async t=>{let r,n=[];if(t.options.debug||t.options.details){const a=await he(e,async e=>(await e.validate(t.create({child:!0,focusNode:t.valueOrNode}))).report);n=a.flatMap(e=>e.results),r=a.some(e=>e.conforms)}else r=await async function(e,t){for(const r of e)if(await t(r))return!0;return!1}(e,async e=>(await e.validate(t.create({child:!0,focusNode:t.valueOrNode}))).report.conforms);t.test(r,S.OrConstraintComponent,{results:n,value:t.valueOrNode})}}function be(e){return async t=>{const r=await he(e,async e=>(await e.validate(t.create({child:!0,focusNode:t.valueOrNode}))).report),n=1===r.filter(e=>e.conforms).length;t.test(n,S.XoneConstraintComponent,{results:r.flatMap(e=>e.results),value:t.valueOrNode})}}function ve(e,t){return r=>{const n=r.focusNode.execute({start:"subject",end:"predicate"}).filter(r=>!t.has(r.term)&&!e.has(r.term));if(n.ptrs.length>0)for(const e of n)r.violation(S.ClosedConstraintComponent,{message:[r.factory.literal("Predicate is not allowed (closed shape)")],path:[{quantifier:"one",start:"subject",end:"object",predicates:[e.term]}],value:r.focusNode.node([[...e.quads()][0].object])});else r.debug(S.ClosedConstraintComponent)}}function _e(e){return t=>{t.test(e.equals(t.valueOrNode.term),S.HasValueConstraintComponent,{args:{hasValue:e},message:[t.factory.literal("Value must be {$hasValue}")]})}}function Oe(e){return t=>{const r=[...t.values].some(t=>e.equals(t.term));t.test(r,S.HasValueConstraintComponent,{args:{hasValue:e},message:[t.factory.literal("Missing expected value {$hasValue}")]})}}function Te(e){return t=>{t.test(e.has(t.valueOrNode.term),S.InConstraintComponent,{args:{in:[...e].map(e=>e.value).join(", ")},message:[t.factory.literal("Value is not in {$in}")],value:t.valueOrNode})}}function we(e,t){if(!e||"Literal"!==e.termType)return null;if(!t||"Literal"!==t.termType)return null;if(Se(e)!==Se(t))return null;const r=ae.fromRdf(e),n=ae.fromRdf(t);return typeof r!=typeof n?null:"string"==typeof r?r.localeCompare(n):r-n}function Se(e){return A.dateTime.equals(e.datatype)&&/^.*(((\+|-)\d{2}:\d{2})|Z)$/.test(e.value)}function je(e){return t=>{const r=t.focusNode.dataset.match(t.focusNode.term,e,t.valueOrNode.term);t.test(0===r.size,S.DisjointConstraintComponent,{args:{disjoint:e},message:[t.factory.literal("Value node must not also be one of the values of {$disjoint}")],value:t.valueOrNode})}}function Ae(e){return t=>{const r=t.focusNode.out([e]),n=r.filter(e=>!e.term.equals(t.focusNode.term)),a=0!==r.terms.length&&0===n.terms.length;t.test(a,S.EqualsConstraintComponent,{args:{equals:e},message:[t.factory.literal("Must have same values as {$equals}")],value:n.terms[0]&&t.focusNode.node([n.terms[0]])||t.focusNode})}}function Fe(e){return r=>{const n=new t(r.focusNode.out([e]).terms),a=new t(r.values.terms),o=[...[...a].filter(e=>!n.has(e)),...[...n].filter(e=>!a.has(e))];for(const t of o)r.violation(S.EqualsConstraintComponent,{args:{equals:e},message:[r.factory.literal("Must have same values as {$equals}")],value:r.focusNode.node([t])});0===o.length&&r.debug(S.EqualsConstraintComponent,{args:{equals:e},message:[r.factory.literal("Must have same values as {$equals}")]})}}function Ee(e){return t=>{const r=t.focusNode.out([e]).terms;for(const n of t.values)for(const a of r){const r=we(n.term,a);null===r||r>=0?t.violation(S.LessThanConstraintComponent,{args:{lessThan:e},message:[t.factory.literal("Value is not less than value of {$lessThan}")],value:n}):t.debug(S.LessThanConstraintComponent,{args:{lessThan:e},message:[t.factory.literal("Value is not less than value of {$lessThan}")],value:n})}}}function xe(e){return t=>{const r=t.focusNode.out([e]).terms;for(const n of t.values)for(const a of r){const r=we(n.term,a);null===r||r>0?t.violation(S.LessThanOrEqualsConstraintComponent,{args:{lessThanOrEquals:e},message:[t.factory.literal("Value is not less than or equal to value of {$lessThanOrEquals}")],value:n}):t.debug(S.LessThanOrEqualsConstraintComponent,{args:{lessThanOrEquals:e},message:[t.factory.literal("Value is not less than or equal to value of {$lessThanOrEquals}")],value:n})}}}function Pe(e){return t=>{const r=we(t.valueOrNode.term,e);t.test(null!==r&&r<0,S.MaxExclusiveConstraintComponent,{args:{maxExclusive:e},message:[t.factory.literal("Value is not less than {$maxExclusive}")],value:t.valueOrNode})}}function De(e){return t=>{const r=we(t.valueOrNode.term,e);t.test(null!==r&&r<=0,S.MaxInclusiveConstraintComponent,{args:{maxInclusive:e},message:[t.factory.literal("Value is not less than or equal to {$maxInclusive}")],value:t.valueOrNode})}}function Me(e){return t=>{const r=we(t.valueOrNode.term,e);t.test(null!==r&&r>0,S.MinExclusiveConstraintComponent,{args:{minExclusive:e},message:[t.factory.literal("Value is not greater than {$minExclusive}")],value:t.valueOrNode})}}function Ne(e){return t=>{const r=we(t.valueOrNode.term,e);t.test(null!==r&&r>=0,S.MinInclusiveConstraintComponent,{args:{minInclusive:e},message:[t.factory.literal("Value is not greater than or equal to {$minInclusive}")],value:t.valueOrNode})}}function Ie(e){return async t=>{for(const r of e){const e=await r.validate(t.create({child:!0,focusNode:t.valueOrNode}));t.test(e.report.conforms,S.NodeConstraintComponent,{args:{node:r.ptr.term},message:[t.factory.literal("Value does not have shape {$node}")],results:e.report.results,value:t.valueOrNode})}}}function Re(e){return async t=>{const r=t.create({focusNode:t.valueOrNode});for(const n of e)await n.validate(r)}}function Le(e,t,r,n){return async a=>{const o=[];let i=[];t&&(i=new Set(a.shape.ptr.in([S.property]).out([S.property]).out([S.qualifiedValueShape]).filter(t=>!t.term.equals(e.ptr.term)).map(e=>a.shape.validator.shape(e))));const s=(await async function(e,t){return(await Promise.all(e.map(e=>t(e)))).filter(Boolean)}(a.values,async t=>{const r=(await e.validate(a.create({child:!0,focusNode:t}))).report;if(o.push(r.results),!r.conforms)return!1;if(0===i.length)return!0;if(a.options.debug||a.options.details){const e=await he([...i],async e=>(await e.validate(a.create({child:!0,focusNode:t}))).report);return o.push(e.flatMap(e=>e.results)),!e.every(e=>e.conforms)}return!(await async function(e,t){for(const r of e)if(!(await t(r)))return!1;return!0}([...i],async e=>(await e.validate(a.create({child:!0,focusNode:t}))).report.conforms))})).length;null!==r&&a.test(s<=r,S.QualifiedMaxCountConstraintComponent,{args:{qualifiedMaxCount:r,qualifiedValueShape:e.ptr.term,qualifiedValueShapesDisjoint:t},message:[a.factory.literal("More than {$qualifiedMaxCount} values have shape {$qualifiedValueShape}")],results:o.flat()}),null!==n&&a.test(s>=n,S.QualifiedMinCountConstraintComponent,{args:{qualifiedMinCount:n,qualifiedValueShape:e.ptr.term,qualifiedValueShapesDisjoint:t},message:[a.factory.literal("Less than {$qualifiedMinCount} values have shape {$qualifiedValueShape}")],results:o.flat()})}}function Ce(e){return t=>{const r=e.some(e=>function(e,t){return!!t&&t.slice(0,e.length)===e}(e,t.valueOrNode.term.language));t.test(r,S.LanguageInConstraintComponent,{args:{languageIn:e.join(", ")},message:[t.factory.literal("Language does not match any of {$languageIn}")],value:t.valueOrNode})}}function Be(e){return t=>{const r="BlankNode"!==t.valueOrNode.term.termType&&t.valueOrNode.value.length<=e;t.test(r,S.MaxLengthConstraintComponent,{args:{maxLength:e},message:[t.factory.literal("Value has more than {$maxLength} characters")],value:t.valueOrNode})}}function qe(e){return t=>{const r="BlankNode"!==t.valueOrNode.term.termType&&t.valueOrNode.value.length>=e;t.test(r,S.MinLengthConstraintComponent,{args:{minLength:e},message:[t.factory.literal("Value has less than {$minLength} characters")],value:t.valueOrNode})}}function Ue(e,t,r){return n=>{n.test(r.test(n.valueOrNode.term.value),S.PatternConstraintComponent,{args:{flags:t,pattern:e},message:[n.factory.literal('Value does not match pattern "{$pattern}"')],value:n.valueOrNode})}}const ke=e("http://www.w3.org/ns/shacl#"),Qe=e("https://schemas.link/shacl-next#");class Ve{constructor({results:e=[]}={}){this.results=e}get conforms(){return!this.results.some(e=>e.severity.equals(ke.Info)||e.severity.equals(ke.Violation)||e.severity.equals(ke.Warning))}}class Ge{constructor({args:e={},factory:t,message:n=[],severity:a=ke.Violation}={}){this.severity=a,this.message=n.map(n=>t.literal(function(e,t){return Object.entries(t).reduce((e,[t,n])=>(n&&n.termType&&(n=r(n)),e.replace(`{$${t}}`,n).replace(`{?${t}}`,n)),e)}(n.value,e),n.language||null))}}class $e{constructor({factory:e=o}={}){this.factory=e}clone({factory:e}={}){return new $e({factory:e||this.factory})}validate(){return new Ve}validateSimple(){return!0}}class ze extends $e{constructor({datatypes:e,factory:t}={}){super({factory:t}),this.datatypes=[];for(const r of Array.isArray(e)?e:[e])r&&this.datatypes.push(this.factory.fromTerm(r))}clone({factory:e}={}){return new ze({datatypes:this.datatypes,factory:e||this.factory})}}class Xe{constructor({factory:e=o,validations:t}={}){if(this.factory=e,this.validations=new n,t)for(const r of Object.values(t)){const e=r.clone({factory:this.factory});for(const t of e.datatypes)this.validations.set(t,e)}}validate(e){const t=this.validations.get(e.datatype);return t?t.validate(e):new Ve}validateSimple(e){const t=this.validations.get(e.datatype);return!t||t.validateSimple(e)}}class He extends ze{constructor(e,t,{factory:r}={}){super({datatypes:t,factory:r}),this.message=[this.factory.literal("term value {$this} matches pattern {$pattern}")],this.patterns=Array.isArray(e)?e:[e]}clone({factory:e}={}){return new He(this.patterns,this.datatypes,{factory:e||this.factory})}validate(e){const t=this.patterns.map(t=>{let r;t.test(e.value)&&(r=Qe.Debug);const n={pattern:this.factory.literal(t.toString()),this:e};return new Ge({args:n,factory:this.factory,message:this.message,severity:r})});return new Ve({results:t})}validateSimple(e){return this.patterns.every(t=>t.test(e.value))}}const Je=/^([-+]?[0-9]+)$/;class Ke extends He{constructor(e=null,t=null,r,{factory:n}={}){super(Je,r,{factory:n}),this.maxInclusive=null,this.minInclusive=null,"string"==typeof t&&(this.maxInclusive=BigInt(t)),"string"==typeof e&&(this.minInclusive=BigInt(e))}clone({factory:e}={}){return new Ke(this.minInclusive?.toString(),this.maxInclusive?.toString(),this.datatypes,{factory:e||this.factory})}validate(e){const t=super.validate(e).results;if(!Qe.Debug.equals(t[0].severity))return new Ve({results:t});const r=BigInt(e.value);if(null!==this.minInclusive&&r<this.minInclusive){const r=`term value "${e.value}" is less than "${this.minInclusive.toString()}"`,n=[this.factory.literal(r)];t.push(new Ge({factory:this.factory,message:n}))}if(null!==this.maxInclusive&&r>this.maxInclusive){const r=`term value "${e.value}" is greater than "${this.maxInclusive.toString()}"`,n=[this.factory.literal(r)];t.push(new Ge({factory:this.factory,message:n}))}return new Ve({results:t})}validateSimple(e){if(!super.validateSimple(e))return!1;const t=BigInt(e.value);return!(null!==this.minInclusive&&t<this.minInclusive)&&!(null!==this.maxInclusive&&t>this.maxInclusive)}}class Ye extends ze{constructor(e,t,{factory:r}={}){super({datatypes:t,factory:r}),this.values=new Set(e)}clone({factory:e}={}){return new Ye(this.values,this.datatypes,{factory:e||this.factory})}validate(e){const t=[];if(!this.values.has(e.value)){const r=`term value "${e.value}" is not included in the list: ${[...this.values].join(",")}`,n=[this.factory.literal(r)];t.push(new Ge({factory:this.factory,message:n}))}return new Ve({results:t})}validateSimple(e){return this.values.has(e.value)}}const We={xsd:e("http://www.w3.org/2001/XMLSchema#")},Ze=new ze({datatypes:We.xsd.anySimpleType}),et=new ze({datatypes:We.xsd.anyAtomicType}),tt=/^([^\ud8ff-\udfff\ufffe-\uffff]*)$/,rt=/^((\+|-)?([0-9]+(\.[0-9]*)?|\.[0-9]+)([Ee](\+|-)?[0-9]+)?|(\+|-)?INF|NaN)$/,nt=/^(-?P((([0-9]+Y([0-9]+M)?([0-9]+D)?|([0-9]+M)([0-9]+D)?|([0-9]+D))(T(([0-9]+H)([0-9]+M)?([0-9]+(\.[0-9]+)?S)?|([0-9]+M)([0-9]+(\.[0-9]+)?S)?|([0-9]+(\.[0-9]+)?S)))?)|(T(([0-9]+H)([0-9]+M)?([0-9]+(\.[0-9]+)?S)?|([0-9]+M)([0-9]+(\.[0-9]+)?S)?|([0-9]+(\.[0-9]+)?S)))))$/,at=/^(-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?))(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,ot=new He(tt,We.xsd.string),it=new Ye(["1","true","0","false"],We.xsd.boolean),st=new He(/^((\+|-)?([0-9]+(\.[0-9]*)?|\.[0-9]+))$/,We.xsd.decimal),ut=new He(rt,We.xsd.float),ct=new He(rt,We.xsd.double),lt=new He(nt,We.xsd.duration),pt=new He(at,We.xsd.dateTime),dt=new He(/^((([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?))(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,We.xsd.time),ft=new He(/^(-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,We.xsd.date),ht=new He(/^(-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,We.xsd.gYearMonth),yt=new He(/^(-?([1-9][0-9]{3,}|0[0-9]{3})(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,We.xsd.gYear),gt=new He(/^(--(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,We.xsd.gMonthDay),mt=new He(/^(---(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,We.xsd.gDay),bt=new He(/^(--(0[1-9]|1[0-2])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,We.xsd.gMonth),vt=new He(/^(([0-9a-fA-F]{2})*)$/,We.xsd.hexBinary),_t=new He(/^(((([A-Za-z0-9+/] ?){4})*(([A-Za-z0-9+/] ?){3}[A-Za-z0-9+/]|([A-Za-z0-9+/] ?){2}[AEIMQUYcgkosw048] ?=|[A-Za-z0-9+/] ?[AQgw] ?= ?=))?)$/,We.xsd.base64Binary),Ot=new He(tt,We.xsd.anyURI),Tt=/^([^\u000d\u000a\u0009]*)$/,wt=new He([tt,Tt],We.xsd.normalizedString),St=new He([tt,Tt,/^([^ ]+( [^ ]+)*)*$/],We.xsd.token),jt=new He(/^([a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*)$/,We.xsd.language),At=new Ke(null,null,We.xsd.integer),Ft=new Ke(null,"0",We.xsd.nonPositiveInteger),Et=new Ke(null,"-1",We.xsd.negativeInteger),xt=new Ke("-9223372036854775808","9223372036854775807",We.xsd.long),Pt=new Ke("-2147483648","2147483647",We.xsd.int),Dt=new Ke("-32768","32767",We.xsd.short),Mt=new Ke("-128","127",We.xsd.byte),Nt=new Ke("0",null,We.xsd.nonNegativeInteger),It=new Ke("0","18446744073709551615",We.xsd.unsignedLong),Rt=new Ke("0","4294967295",We.xsd.unsignedInt),Lt=new Ke("0","65535",We.xsd.unsignedShort),Ct=new Ke("0","255",We.xsd.unsignedByte),Bt=new Ke("1",null,We.xsd.positiveInteger),qt=new He([nt,/^([^DT]*)$/],We.xsd.yearMonthDuration),Ut=new He([nt,/^([^YM]*[DT].*)$/],We.xsd.dayTimeDuration),kt=new He([at,/^(.*(Z|(\+|-)[0-9][0-9]:[0-9][0-9]))$/],We.xsd.dateTimeStamp),Qt=Object.freeze(Object.defineProperty({__proto__:null,anyAtomicType:et,anySimpleType:Ze,anyURI:Ot,base64Binary:_t,boolean:it,byte:Mt,date:ft,dateTime:pt,dateTimeStamp:kt,dayTimeDuration:Ut,decimal:st,double:ct,duration:lt,float:ut,gDay:mt,gMonth:bt,gMonthDay:gt,gYear:yt,gYearMonth:ht,hexBinary:vt,int:Pt,integer:At,language:jt,long:xt,negativeInteger:Et,nonNegativeInteger:Nt,nonPositiveInteger:Ft,normalizedString:wt,positiveInteger:Bt,short:Dt,string:ot,time:dt,token:St,unsignedByte:Ct,unsignedInt:Rt,unsignedLong:It,unsignedShort:Lt,yearMonthDuration:qt},Symbol.toStringTag,{value:"Module"}));class Vt extends Xe{constructor({factory:e}={}){super({factory:e,validations:{...Qt}})}}const Gt=new n([[S.BlankNode,new Set(["BlankNode"])],[S.BlankNodeOrIRI,new Set(["BlankNode","NamedNode"])],[S.BlankNodeOrLiteral,new Set(["BlankNode","Literal"])],[S.IRI,new Set(["NamedNode"])],[S.IRIOrLiteral,new Set(["NamedNode","Literal"])],[S.Literal,new Set(["Literal"])]]);function $t(e){return r=>{const n=new t(r.valueOrNode.out([T.type]).terms);for(const t of e){const e=[...n].some(e=>t.has(e));r.test(e,S.ClassConstraintComponent,{value:r.valueOrNode})}}}function zt(e,t){return r=>{const n=e.equals(r.valueOrNode.term.datatype)&&t.validateSimple(r.valueOrNode.term);r.test(n,S.DatatypeConstraintComponent,{args:{datatype:e},message:[r.factory.literal("Value does not have datatype {$datatype}")],value:r.valueOrNode})}}function Xt(e,t){return r=>{r.test(t.has(r.valueOrNode.term.termType),S.NodeKindConstraintComponent,{args:{nodeKind:e},message:[r.factory.literal("Value does not have node kind {$nodeKind}")],value:r.valueOrNode})}}const Ht=new n([[S.maxCount,function(e){return{property:de(parseInt(e.ptr.out([S.maxCount]).value))}}],[S.minCount,function(e){return{property:fe(parseInt(e.ptr.out([S.minCount]).value))}}],[S.and,function(e){return{generic:ye([...e.ptr.out([S.and])].flatMap(e=>[...e.list()]).map(t=>e.validator.shape(t)))}}],[S.not,function(e){return{generic:ge(e.validator.shape(e.ptr.out([S.not])))}}],[S.or,function(e){return{generic:me([...e.ptr.out([S.or])].flatMap(e=>[...e.list()]).map(t=>e.validator.shape(t)))}}],[S.xone,function(e){return{generic:be([...e.ptr.out([S.xone])].flatMap(e=>[...e.list()]).map(t=>e.validator.shape(t)))}}],[S.closed,function(e){if(!ae.fromRdf(e.ptr.out([S.closed]).term))return null;const r=e.ptr.out([S.property]).map(t=>e.validator.shape(t));return{node:ve(new t(r.filter(e=>!e.deactivated).map(e=>e.path[0].predicates[0])),new t([...e.ptr.out([S.ignoredProperties]).list()||[]].map(e=>e.term)))}}],[S.hasValue,function(e){const t=e.ptr.out([S.hasValue]).term;return{node:_e(t),property:Oe(t)}}],[S.in,function(e){return{generic:Te(new t([...e.ptr.out([S.in]).list()].map(e=>e.term)))}}],[S.disjoint,function(e){return{generic:je(e.ptr.out([S.disjoint]).term)}}],[S.equals,function(e){const t=e.ptr.out([S.equals]).term;return{node:Ae(t),property:Fe(t)}}],[S.lessThan,function(e){return{property:Ee(e.ptr.out([S.lessThan]).term)}}],[S.lessThanOrEquals,function(e){return{property:xe(e.ptr.out([S.lessThanOrEquals]).term)}}],[S.maxExclusive,function(e){return{generic:Pe(e.ptr.out([S.maxExclusive]).term)}}],[S.maxInclusive,function(e){return{generic:De(e.ptr.out([S.maxInclusive]).term)}}],[S.minExclusive,function(e){return{generic:Me(e.ptr.out([S.minExclusive]).term)}}],[S.minInclusive,function(e){return{generic:Ne(e.ptr.out([S.minInclusive]).term)}}],[S.node,function(e){return{generic:Ie([...e.ptr.out([S.node])].map(t=>e.validator.shape(t)))}}],[S.property,function(e){return{generic:Re([...e.ptr.out([S.property])].map(t=>e.validator.shape(t)))}}],[S.qualifiedValueShape,function(e){const t=e.validator.shape(e.ptr.out([S.qualifiedValueShape])),r=e.ptr.out([S.qualifiedValueShapesDisjoint]).term,n=!!r&&ae.fromRdf(r),a=e.ptr.out([S.qualifiedMaxCount]).term,o=a?parseInt(a.value):null,i=e.ptr.out([S.qualifiedMinCount]).term;return{property:Le(t,n,o,i?parseInt(i.value):null)}}],[S.languageIn,function(e){return{generic:Ce([...new Set([...e.ptr.out([S.languageIn]).list()].map(e=>e.value))])}}],[S.maxLength,function(e){return{generic:Be(parseInt(e.ptr.out([S.maxLength]).value))}}],[S.minLength,function(e){return{generic:qe(parseInt(e.ptr.out([S.minLength]).value))}}],[S.pattern,function(e){const t=e.ptr.out([S.pattern]).value,r=e.ptr.out([S.flags]).value;return{generic:Ue(t,r,new RegExp(t,r))}}],[S.uniqueLang,function(e){const t=e.ptr.out([S.uniqueLang]).term;return"true"===t.value&&A.boolean.equals(t.datatype)?{property:e=>{const t=Object.entries(e.values.terms.reduce((e,t)=>(t.language&&(e[t.language]=(e[t.language]||0)+1),e),{})),r=t.filter(([,e])=>e>1);for(const[n]of r)e.violation(S.UniqueLangConstraintComponent,{args:{lang:n},message:[e.factory.literal('Language "{?lang}" used more than once')]});0===r.length&&e.debug(S.UniqueLangConstraintComponent)}}:null}],[S.class,function(e){return{generic:$t(e.ptr.out([S.class]).map(e=>ue(e)))}}],[S.datatype,function(e){return{generic:zt(e.ptr.out([S.datatype]).term,new Vt)}}],[S.nodeKind,function(e){const t=e.ptr.out([S.nodeKind]).term;return{generic:Xt(t,Gt.get(t))}}]]);class Jt{constructor(e,{factory:t,...r}){if(this.factory=t,this.options=r,this.registry=new C(Ht),this.targetResolverRegistry=new pe(this.options.targetResolvers||[]),this.shapesPtr=new _({dataset:e,factory:t}),this.shapes=new n,this.options.coverage&&(this.options.debug=!0,this.options.details=!0,this.options.trace=!0),this.options.validations)for(const[n,o]of this.options.validations)this.registry.validations.set(n,o);const a=[...this.shapesPtr.hasOut([S.targetClass]),...this.shapesPtr.hasOut([S.targetNode]),...this.shapesPtr.hasOut([S.targetObjectsOf]),...this.shapesPtr.hasOut([S.targetSubjectsOf]),...this.shapesPtr.hasOut([S.target]),...this.shapesPtr.hasOut([T.type],[S.NodeShape]),...this.shapesPtr.hasOut([T.type],[S.PropertyShape])];for(const n of a)this.shape(n)}shape(e){if(!e.term)return null;let t=this.shapes.get(e.term);return t||(t=new le(e,{validator:this}),this.shapes.set(e.term,t)),t}async validate(e,t){const r=new _({...e,factory:this.factory}),n=new R({factory:this.factory,focusNode:r,options:this.options,validator:this});t=t?t.map(e=>this.shape(this.shapesPtr.node(e.terms))):this.shapes.values();for(const a of t){const e=n.create({shape:a});let t;t=r.isAny()?await a.resolveTargets(e):r;for(const r of t)await a.validate(e.create({focusNode:r}))}return n.report}}var Kt={},Yt={},Wt={},Zt={},er={},tr={},rr={},nr={},ar="@@__IMMUTABLE_INDEXED__@@";function or(e){return Boolean(e&&e[ar])}var ir="@@__IMMUTABLE_KEYED__@@";function sr(e){return Boolean(e&&e[ir])}function ur(e){return sr(e)||or(e)}var cr="@@__IMMUTABLE_ITERABLE__@@";function lr(e){return Boolean(e&&e[cr])}var pr=function(e){return lr(e)?e:Hr(e)},dr=function(e){function t(e){return sr(e)?e:Jr(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(pr),fr=function(e){function t(e){return or(e)?e:Kr(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(pr),hr=function(e){function t(e){return lr(e)&&!ur(e)?e:Yr(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(pr);pr.Keyed=dr,pr.Indexed=fr,pr.Set=hr;var yr="function"==typeof Symbol&&Symbol.iterator,gr="@@iterator",mr=yr||gr,br=function(e){this.next=e};function vr(e,t,r,n){var a=0===e?t:1===e?r:[t,r];return n?n.value=a:n={value:a,done:!1},n}function _r(){return{value:void 0,done:!0}}function Or(e){return!!Array.isArray(e)||!!Sr(e)}function Tr(e){return!(!e||"function"!=typeof e.next)}function wr(e){var t=Sr(e);return t&&t.call(e)}function Sr(e){var t=e&&(yr&&e[yr]||e[gr]);if("function"==typeof t)return t}br.prototype.toString=function(){return"[Iterator]"},br.KEYS=0,br.VALUES=1,br.ENTRIES=2,br.prototype.inspect=br.prototype.toSource=function(){return this.toString()},br.prototype[mr]=function(){return this};var jr="delete",Ar=32,Fr=31,Er={};function xr(e){e&&(e.value=!0)}function Pr(){}function Dr(e){return void 0===e.size&&(e.size=e.__iterate(Nr)),e.size}function Mr(e,t){if("number"!=typeof t){var r=t>>>0;if(""+r!==t||4294967295===r)return NaN;t=r}return t<0?Dr(e)+t:t}function Nr(){return!0}function Ir(e,t,r){return(0===e&&!Br(e)||void 0!==r&&e<=-r)&&(void 0===t||void 0!==r&&t>=r)}function Rr(e,t){return Cr(e,t,0)}function Lr(e,t){return Cr(e,t,t)}function Cr(e,t,r){return void 0===e?r:Br(e)?t===1/0?t:0|Math.max(0,t+e):void 0===t||t===e?e:0|Math.min(t,e)}function Br(e){return e<0||0===e&&1/e==-1/0}var qr="@@__IMMUTABLE_RECORD__@@";function Ur(e){return Boolean(e&&e[qr])}function kr(e){return lr(e)||Ur(e)}var Qr="@@__IMMUTABLE_ORDERED__@@";function Vr(e){return Boolean(e&&e[Qr])}var Gr="@@__IMMUTABLE_SEQ__@@";function $r(e){return Boolean(e&&e[Gr])}var zr=Object.prototype.hasOwnProperty;function Xr(e){return!(!Array.isArray(e)&&"string"!=typeof e)||e&&"object"==typeof e&&Number.isInteger(e.length)&&e.length>=0&&(0===e.length?1===Object.keys(e).length:e.hasOwnProperty(e.length-1))}var Hr=function(e){function t(e){return null==e?rn():kr(e)?e.toSeq():function(e){var t=on(e);if(t)return(n=Sr(r=e))&&n===r.entries?t.fromEntrySeq():function(e){var t=Sr(e);return t&&t===e.keys}(e)?t.toSetSeq():t;var r,n;if("object"==typeof e)return new Zr(e);throw new TypeError("Expected Array or collection object of values, or keyed object: "+e)}(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq {","}")},t.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},t.prototype.__iterate=function(e,t){var r=this._cache;if(r){for(var n=r.length,a=0;a!==n;){var o=r[t?n-++a:a++];if(!1===e(o[1],o[0],this))break}return a}return this.__iterateUncached(e,t)},t.prototype.__iterator=function(e,t){var r=this._cache;if(r){var n=r.length,a=0;return new br(function(){if(a===n)return{value:void 0,done:!0};var o=r[t?n-++a:a++];return vr(e,o[0],o[1])})}return this.__iteratorUncached(e,t)},t}(pr),Jr=function(e){function t(e){return null==e?rn().toKeyedSeq():lr(e)?sr(e)?e.toSeq():e.fromEntrySeq():Ur(e)?e.toSeq():nn(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toKeyedSeq=function(){return this},t}(Hr),Kr=function(e){function t(e){return null==e?rn():lr(e)?sr(e)?e.entrySeq():e.toIndexedSeq():Ur(e)?e.toSeq().entrySeq():an(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toIndexedSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq [","]")},t}(Hr),Yr=function(e){function t(e){return(lr(e)&&!ur(e)?e:Kr(e)).toSetSeq()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSetSeq=function(){return this},t}(Hr);Hr.isSeq=$r,Hr.Keyed=Jr,Hr.Set=Yr,Hr.Indexed=Kr,Hr.prototype[Gr]=!0;var Wr=function(e){function t(e){this._array=e,this.size=e.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this.has(e)?this._array[Mr(this,e)]:t},t.prototype.__iterate=function(e,t){for(var r=this._array,n=r.length,a=0;a!==n;){var o=t?n-++a:a++;if(!1===e(r[o],o,this))break}return a},t.prototype.__iterator=function(e,t){var r=this._array,n=r.length,a=0;return new br(function(){if(a===n)return{value:void 0,done:!0};var o=t?n-++a:a++;return vr(e,o,r[o])})},t}(Kr),Zr=function(e){function t(e){var t=Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]);this._object=e,this._keys=t,this.size=t.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},t.prototype.has=function(e){return zr.call(this._object,e)},t.prototype.__iterate=function(e,t){for(var r=this._object,n=this._keys,a=n.length,o=0;o!==a;){var i=n[t?a-++o:o++];if(!1===e(r[i],i,this))break}return o},t.prototype.__iterator=function(e,t){var r=this._object,n=this._keys,a=n.length,o=0;return new br(function(){if(o===a)return{value:void 0,done:!0};var i=n[t?a-++o:o++];return vr(e,i,r[i])})},t}(Jr);Zr.prototype[Qr]=!0;var en,tn=function(e){function t(e){this._collection=e,this.size=e.length||e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var r=wr(this._collection),n=0;if(Tr(r))for(var a;!(a=r.next()).done&&!1!==e(a.value,n++,this););return n},t.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=wr(this._collection);if(!Tr(r))return new br(_r);var n=0;return new br(function(){var t=r.next();return t.done?t:vr(e,n++,t.value)})},t}(Kr);function rn(){return en||(en=new Wr([]))}function nn(e){var t=on(e);if(t)return t.fromEntrySeq();if("object"==typeof e)return new Zr(e);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+e)}function an(e){var t=on(e);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+e)}function on(e){return Xr(e)?new Wr(e):Or(e)?new tn(e):void 0}function sn(){return this.__ensureOwner()}function un(){return this.__ownerID?this:this.__ensureOwner(new Pr)}var cn="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var r=65535&(e|=0),n=65535&(t|=0);return r*n+((e>>>16)*n+r*(t>>>16)<<16>>>0)|0};function ln(e){return e>>>1&1073741824|3221225471&e}var pn=Object.prototype.valueOf;function dn(e){if(null==e)return fn(e);if("function"==typeof e.hashCode)return ln(e.hashCode(e));var t,r=(t=e).valueOf!==pn&&"function"==typeof t.valueOf?t.valueOf(t):t;if(null==r)return fn(r);switch(typeof r){case"boolean":return r?1108378657:1108378656;case"number":return function(e){if(e!=e||e===1/0)return 0;var t=0|e;t!==e&&(t^=4294967295*e);for(;e>4294967295;)t^=e/=4294967295;return ln(t)}(r);case"string":return r.length>wn?function(e){var t=An[e];void 0===t&&(t=hn(e),jn===Sn&&(jn=0,An={}),jn++,An[e]=t);return t}(r):hn(r);case"object":case"function":return function(e){var t;if(vn&&void 0!==(t=bn.get(e)))return t;if(t=e[Tn],void 0!==t)return t;if(!gn){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Tn]))return t;if(void 0!==(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e)))return t}if(t=mn(),vn)bn.set(e,t);else{if(void 0!==yn&&!1===yn(e))throw new Error("Non-extensible objects are not allowed as keys.");if(gn)Object.defineProperty(e,Tn,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Tn]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Tn]=t}}return t}(r);case"symbol":return function(e){var t=_n[e];if(void 0!==t)return t;return t=mn(),_n[e]=t,t}(r);default:if("function"==typeof r.toString)return hn(r.toString());throw new Error("Value type "+typeof r+" cannot be hashed.")}}function fn(e){return null===e?1108378658:1108378659}function hn(e){for(var t=0,r=0;r<e.length;r++)t=31*t+e.charCodeAt(r)|0;return ln(t)}var yn=Object.isExtensible,gn=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}();function mn(){var e=++On;return 1073741824&On&&(On=0),e}var bn,vn="function"==typeof WeakMap;vn&&(bn=new WeakMap);var _n=Object.create(null),On=0,Tn="__immutablehash__";"function"==typeof Symbol&&(Tn=Symbol(Tn));var wn=16,Sn=255,jn=0,An={},Fn=function(e){function t(e,t){this._iter=e,this._useKeys=t,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this._iter.get(e,t)},t.prototype.has=function(e){return this._iter.has(e)},t.prototype.valueSeq=function(){return this._iter.valueSeq()},t.prototype.reverse=function(){var e=this,t=Nn(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},t.prototype.map=function(e,t){var r=this,n=Mn(this,e,t);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(e,t)}),n},t.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t,n){return e(t,n,r)},t)},t.prototype.__iterator=function(e,t){return this._iter.__iterator(e,t)},t}(Jr);Fn.prototype[Qr]=!0;var En=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.includes=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var r=this,n=0;return t&&Dr(this),this._iter.__iterate(function(a){return e(a,t?r.size-++n:n++,r)},t)},t.prototype.__iterator=function(e,t){var r=this,n=this._iter.__iterator(1,t),a=0;return t&&Dr(this),new br(function(){var o=n.next();return o.done?o:vr(e,t?r.size-++a:a++,o.value,o)})},t}(Kr),xn=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.has=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t){return e(t,t,r)},t)},t.prototype.__iterator=function(e,t){var r=this._iter.__iterator(1,t);return new br(function(){var t=r.next();return t.done?t:vr(e,t.value,t.value,t)})},t}(Yr),Pn=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.entrySeq=function(){return this._iter.toSeq()},t.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t){if(t){Gn(t);var n=lr(t);return e(n?t.get(1):t[1],n?t.get(0):t[0],r)}},t)},t.prototype.__iterator=function(e,t){var r=this._iter.__iterator(1,t);return new br(function(){for(;;){var t=r.next();if(t.done)return t;var n=t.value;if(n){Gn(n);var a=lr(n);return vr(e,a?n.get(0):n[0],a?n.get(1):n[1],t)}}})},t}(Jr);function Dn(e){var t=zn(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=Xn,t.__iterateUncached=function(t,r){var n=this;return e.__iterate(function(e,r){return!1!==t(r,e,n)},r)},t.__iteratorUncached=function(t,r){if(2===t){var n=e.__iterator(t,r);return new br(function(){var e=n.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(1===t?0:1,r)},t}function Mn(e,t,r){var n=zn(e);return n.size=e.size,n.has=function(t){return e.has(t)},n.get=function(n,a){var o=e.get(n,Er);return o===Er?a:t.call(r,o,n,e)},n.__iterateUncached=function(n,a){var o=this;return e.__iterate(function(e,a,i){return!1!==n(t.call(r,e,a,i),a,o)},a)},n.__iteratorUncached=function(n,a){var o=e.__iterator(2,a);return new br(function(){var a=o.next();if(a.done)return a;var i=a.value,s=i[0];return vr(n,s,t.call(r,i[1],s,e),a)})},n}function Nn(e,t){var r=this,n=zn(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=Dn(e);return t.reverse=function(){return e.flip()},t}),n.get=function(r,n){return e.get(t?r:-1-r,n)},n.has=function(r){return e.has(t?r:-1-r)},n.includes=function(t){return e.includes(t)},n.cacheResult=Xn,n.__iterate=function(r,n){var a=this,o=0;return n&&Dr(e),e.__iterate(function(e,i){return r(e,t?i:n?a.size-++o:o++,a)},!n)},n.__iterator=function(n,a){var o=0;a&&Dr(e);var i=e.__iterator(2,!a);return new br(function(){var e=i.next();if(e.done)return e;var s=e.value;return vr(n,t?s[0]:a?r.size-++o:o++,s[1],e)})},n}function In(e,t,r,n){var a=zn(e);return n&&(a.has=function(n){var a=e.get(n,Er);return a!==Er&&!!t.call(r,a,n,e)},a.get=function(n,a){var o=e.get(n,Er);return o!==Er&&t.call(r,o,n,e)?o:a}),a.__iterateUncached=function(a,o){var i=this,s=0;return e.__iterate(function(e,o,u){if(t.call(r,e,o,u))return s++,a(e,n?o:s-1,i)},o),s},a.__iteratorUncached=function(a,o){var i=e.__iterator(2,o),s=0;return new br(function(){for(;;){var o=i.next();if(o.done)return o;var u=o.value,c=u[0],l=u[1];if(t.call(r,l,c,e))return vr(a,n?c:s++,l,o)}})},a}function Rn(e,t,r,n){var a=e.size;if(Ir(t,r,a))return e;if(void 0===a&&(t<0||r<0))return Rn(e.toSeq().cacheResult(),t,r,n);var o,i=Rr(t,a),s=Lr(r,a)-i;s==s&&(o=s<0?0:s);var u=zn(e);return u.size=0===o?o:e.size&&o||void 0,!n&&$r(e)&&o>=0&&(u.get=function(t,r){return(t=Mr(this,t))>=0&&t<o?e.get(t+i,r):r}),u.__iterateUncached=function(t,r){var a=this;if(0===o)return 0;if(r)return this.cacheResult().__iterate(t,r);var s=0,u=!0,c=0;return e.__iterate(function(e,r){if(!u||!(u=s++<i))return c++,!1!==t(e,n?r:c-1,a)&&c!==o}),c},u.__iteratorUncached=function(t,r){if(0!==o&&r)return this.cacheResult().__iterator(t,r);if(0===o)return new br(_r);var a=e.__iterator(t,r),s=0,u=0;return new br(function(){for(;s++<i;)a.next();if(++u>o)return{value:void 0,done:!0};var e=a.next();return n||1===t||e.done?e:vr(t,u-1,0===t?void 0:e.value[1],e)})},u}function Ln(e,t,r,n){var a=zn(e);return a.__iterateUncached=function(a,o){var i=this;if(o)return this.cacheResult().__iterate(a,o);var s=!0,u=0;return e.__iterate(function(e,o,c){if(!s||!(s=t.call(r,e,o,c)))return u++,a(e,n?o:u-1,i)}),u},a.__iteratorUncached=function(a,o){var i=this;if(o)return this.cacheResult().__iterator(a,o);var s=e.__iterator(2,o),u=!0,c=0;return new br(function(){var e,o,l;do{if((e=s.next()).done)return n||1===a?e:vr(a,c++,0===a?void 0:e.value[1],e);var p=e.value;o=p[0],l=p[1],u&&(u=t.call(r,l,o,i))}while(u);return 2===a?e:vr(a,o,l,e)})},a}En.prototype.cacheResult=Fn.prototype.cacheResult=xn.prototype.cacheResult=Pn.prototype.cacheResult=Xn;var Cn=function(e){function t(e){this._wrappedIterables=e.flatMap(function(e){return e._wrappedIterables?e._wrappedIterables:[e]}),this.size=this._wrappedIterables.reduce(function(e,t){if(void 0!==e){var r=t.size;if(void 0!==r)return e+r}},0),this[ir]=this._wrappedIterables[0][ir],this[ar]=this._wrappedIterables[0][ar],this[Qr]=this._wrappedIterables[0][Qr]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(e,t){if(0!==this._wrappedIterables.length){if(t)return this.cacheResult().__iterate(e,t);for(var r=0,n=sr(this),a=n?2:1,o=this._wrappedIterables[r].__iterator(a,t),i=!0,s=0;i;){for(var u=o.next();u.done;){if(++r===this._wrappedIterables.length)return s;u=(o=this._wrappedIterables[r].__iterator(a,t)).next()}i=!1!==(n?e(u.value[1],u.value[0],this):e(u.value,s,this)),s++}return s}},t.prototype.__iteratorUncached=function(e,t){var r=this;if(0===this._wrappedIterables.length)return new br(_r);if(t)return this.cacheResult().__iterator(e,t);var n=0,a=this._wrappedIterables[n].__iterator(e,t);return new br(function(){for(var o=a.next();o.done;){if(++n===r._wrappedIterables.length)return o;o=(a=r._wrappedIterables[n].__iterator(e,t)).next()}return o})},t}(Hr);function Bn(e,t,r){var n=zn(e);return n.__iterateUncached=function(a,o){if(o)return this.cacheResult().__iterate(a,o);var i=0,s=!1;return function e(u,c){u.__iterate(function(o,u){return(!t||c<t)&&lr(o)?e(o,c+1):(i++,!1===a(o,r?u:i-1,n)&&(s=!0)),!s},o)}(e,0),i},n.__iteratorUncached=function(n,a){if(a)return this.cacheResult().__iterator(n,a);var o=e.__iterator(n,a),i=[],s=0;return new br(function(){for(;o;){var e=o.next();if(!1===e.done){var u=e.value;if(2===n&&(u=u[1]),t&&!(i.length<t)||!lr(u))return r?e:vr(n,s++,u,e);i.push(o),o=u.__iterator(n,a)}else o=i.pop()}return{value:void 0,done:!0}})},n}function qn(e,t,r){t||(t=Hn);var n=sr(e),a=0,o=e.toSeq().map(function(t,n){return[n,t,a++,r?r(t,n,e):t]}).valueSeq().toArray();return o.sort(function(e,r){return t(e[3],r[3])||e[2]-r[2]}).forEach(n?function(e,t){o[t].length=2}:function(e,t){o[t]=e[1]}),n?Jr(o):or(e)?Kr(o):Yr(o)}function Un(e,t,r){if(t||(t=Hn),r){var n=e.toSeq().map(function(t,n){return[t,r(t,n,e)]}).reduce(function(e,r){return kn(t,e[1],r[1])?r:e});return n&&n[0]}return e.reduce(function(e,r){return kn(t,e,r)?r:e})}function kn(e,t,r){var n=e(r,t);return 0===n&&r!==t&&(null==r||r!=r)||n>0}function Qn(e,t,r,n){var a=zn(e),o=new Wr(r).map(function(e){return e.size});return a.size=n?o.max():o.min(),a.__iterate=function(e,t){for(var r,n=this.__iterator(1,t),a=0;!(r=n.next()).done&&!1!==e(r.value,a++,this););return a},a.__iteratorUncached=function(e,a){var o=r.map(function(e){return e=pr(e),wr(a?e.reverse():e)}),i=0,s=!1;return new br(function(){var r;return s||(r=o.map(function(e){return e.next()}),s=n?r.every(function(e){return e.done}):r.some(function(e){return e.done})),s?{value:void 0,done:!0}:vr(e,i++,t.apply(null,r.map(function(e){return e.value})))})},a}function Vn(e,t){return e===t?e:$r(e)?t:e.constructor(t)}function Gn(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function $n(e){return sr(e)?dr:or(e)?fr:hr}function zn(e){return Object.create((sr(e)?Jr:or(e)?Kr:Yr).prototype)}function Xn(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Hr.prototype.cacheResult.call(this)}function Hn(e,t){return void 0===e&&void 0===t?0:void 0===e?1:void 0===t?-1:e>t?1:e<t?-1:0}function Jn(e){return Boolean(e&&"function"==typeof e.equals&&"function"==typeof e.hashCode)}function Kn(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!!(Jn(e)&&Jn(t)&&e.equals(t))}function Yn(e,t,r,n){return Ka(e,[t],r,n)}function Wn(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return ea(this,e)}function Zn(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if("function"!=typeof e)throw new TypeError("Invalid merger function: "+e);return ea(this,t,e)}function ea(e,t,r){for(var n=[],a=0;a<t.length;a++){var o=dr(t[a]);0!==o.size&&n.push(o)}return 0===n.length?e:0!==e.toSeq().size||e.__ownerID||1!==n.length?e.withMutations(function(e){for(var t=r?function(t,n){Yn(e,n,Er,function(e){return e===Er?t:r(e,t,n)})}:function(t,r){e.set(r,t)},a=0;a<n.length;a++)n[a].forEach(t)}):Ur(e)?e:e.constructor(n[0])}var ta=Object.prototype.toString;function ra(e){if(!e||"object"!=typeof e||"[object Object]"!==ta.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var r=t,n=Object.getPrototypeOf(t);null!==n;)r=n,n=Object.getPrototypeOf(r);return r===t}function na(e){return"object"==typeof e&&(kr(e)||Array.isArray(e)||ra(e))}function aa(e,t){t=t||0;for(var r=Math.max(0,e.length-t),n=new Array(r),a=0;a<r;a++)n[a]=e[a+t];return n}function oa(e){if(Array.isArray(e))return aa(e);var t={};for(var r in e)zr.call(e,r)&&(t[r]=e[r]);return t}function ia(e,t,r){return sa(e,t,function(e){function t(r,n,a){return na(r)&&na(n)&&(o=n,i=Hr(r),s=Hr(o),or(i)===or(s)&&sr(i)===sr(s))?sa(r,[n],t):e?e(r,n,a):n;var o,i,s}return t}(r))}function sa(e,t,r){if(!na(e))throw new TypeError("Cannot merge into non-data-structure value: "+e);if(kr(e))return"function"==typeof r&&e.mergeWith?e.mergeWith.apply(e,[r].concat(t)):e.merge?e.merge.apply(e,t):e.concat.apply(e,t);for(var n=Array.isArray(e),a=e,o=n?fr:dr,i=n?function(t){a===e&&(a=oa(a)),a.push(t)}:function(t,n){var o=zr.call(a,n),i=o&&r?r(a[n],t,n):t;o&&i===a[n]||(a===e&&(a=oa(a)),a[n]=i)},s=0;s<t.length;s++)o(t[s]).forEach(i);return a}function ua(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return ia(this,e)}function ca(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return ia(this,t,e)}function la(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return Ka(this,e,Ia(),function(e){return ia(e,t)})}function pa(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return Ka(this,e,Ia(),function(e){return sa(e,t)})}function da(e,t,r){return Ka(e,t,Er,function(){return r})}function fa(e,t){return da(this,e,t)}function ha(e,t,r){return 1===arguments.length?e(this):Yn(this,e,t,r)}function ya(e,t,r){return Ka(this,e,t,r)}function ga(){return this.__altered}function ma(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}var ba="@@__IMMUTABLE_MAP__@@";function va(e){return Boolean(e&&e[ba])}function _a(e,t){if(!e)throw new Error(t)}function Oa(e){_a(e!==1/0,"Cannot perform this action with an infinite size.")}var Ta=function(e){function t(t){return null==t?Ia():va(t)&&!Vr(t)?t:Ia().withMutations(function(r){var n=e(t);Oa(n.size),n.forEach(function(e,t){return r.set(t,e)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},t.prototype.set=function(e,t){return Ra(this,e,t)},t.prototype.remove=function(e){return Ra(this,e,Er)},t.prototype.deleteAll=function(e){var t=pr(e);return 0===t.size?this:this.withMutations(function(e){t.forEach(function(t){return e.remove(t)})})},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ia()},t.prototype.sort=function(e){return mo(qn(this,e))},t.prototype.sortBy=function(e,t){return mo(qn(this,t,e))},t.prototype.map=function(e,t){var r=this;return this.withMutations(function(n){n.forEach(function(a,o){n.set(o,e.call(t,a,o,r))})})},t.prototype.__iterator=function(e,t){return new Pa(this,e,t)},t.prototype.__iterate=function(e,t){var r=this,n=0;return this._root&&this._root.iterate(function(t){return n++,e(t[1],t[0],r)},t),n},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Na(this.size,this._root,e,this.__hash):0===this.size?Ia():(this.__ownerID=e,this.__altered=!1,this)},t}(dr);Ta.isMap=va;var wa=Ta.prototype;wa[ba]=!0,wa[jr]=wa.remove,wa.removeAll=wa.deleteAll,wa.setIn=fa,wa.removeIn=wa.deleteIn=Za,wa.update=ha,wa.updateIn=ya,wa.merge=wa.concat=Wn,wa.mergeWith=Zn,wa.mergeDeep=ua,wa.mergeDeepWith=ca,wa.mergeIn=pa,wa.mergeDeepIn=la,wa.withMutations=ma,wa.wasAltered=ga,wa.asImmutable=sn,wa["@@transducer/init"]=wa.asMutable=un,wa["@@transducer/step"]=function(e,t){return e.set(t[0],t[1])},wa["@@transducer/result"]=function(e){return e.asImmutable()};var Sa=function(e,t){this.ownerID=e,this.entries=t};Sa.prototype.get=function(e,t,r,n){for(var a=this.entries,o=0,i=a.length;o<i;o++)if(Kn(r,a[o][0]))return a[o][1];return n},Sa.prototype.update=function(e,t,r,n,a,o,i){for(var s=a===Er,u=this.entries,c=0,l=u.length;c<l&&!Kn(n,u[c][0]);c++);var p=c<l;if(p?u[c][1]===a:s)return this;if(xr(i),(s||!p)&&xr(o),!s||1!==u.length){if(!p&&!s&&u.length>=ka)return function(e,t,r,n){e||(e=new Pr);for(var a=new Ea(e,dn(r),[r,n]),o=0;o<t.length;o++){var i=t[o];a=a.update(e,0,void 0,i[0],i[1])}return a}(e,u,n,a);var d=e&&e===this.ownerID,f=d?u:aa(u);return p?s?c===l-1?f.pop():f[c]=f.pop():f[c]=[n,a]:f.push([n,a]),d?(this.entries=f,this):new Sa(e,f)}};var ja=function(e,t,r){this.ownerID=e,this.bitmap=t,this.nodes=r};ja.prototype.get=function(e,t,r,n){void 0===t&&(t=dn(r));var a=1<<((0===e?t:t>>>e)&Fr),o=this.bitmap;return 0===(o&a)?n:this.nodes[qa(o&a-1)].get(e+5,t,r,n)},ja.prototype.update=function(e,t,r,n,a,o,i){void 0===r&&(r=dn(n));var s=(0===t?r:r>>>t)&Fr,u=1<<s,c=this.bitmap,l=0!==(c&u);if(!l&&a===Er)return this;var p=qa(c&u-1),d=this.nodes,f=l?d[p]:void 0,h=La(f,e,t+5,r,n,a,o,i);if(h===f)return this;if(!l&&h&&d.length>=Qa)return function(e,t,r,n,a){for(var o=0,i=new Array(Ar),s=0;0!==r;s++,r>>>=1)i[s]=1&r?t[o++]:void 0;return i[n]=a,new Aa(e,o+1,i)}(e,d,c,s,h);if(l&&!h&&2===d.length&&Ca(d[1^p]))return d[1^p];if(l&&h&&1===d.length&&Ca(h))return h;var y=e&&e===this.ownerID,g=l?h?c:c^u:c|u,m=l?h?Ua(d,p,h,y):function(e,t,r){var n=e.length-1;if(r&&t===n)return e.pop(),e;for(var a=new Array(n),o=0,i=0;i<n;i++)i===t&&(o=1),a[i]=e[i+o];return a}(d,p,y):function(e,t,r,n){var a=e.length+1;if(n&&t+1===a)return e[t]=r,e;for(var o=new Array(a),i=0,s=0;s<a;s++)s===t?(o[s]=r,i=-1):o[s]=e[s+i];return o}(d,p,h,y);return y?(this.bitmap=g,this.nodes=m,this):new ja(e,g,m)};var Aa=function(e,t,r){this.ownerID=e,this.count=t,this.nodes=r};Aa.prototype.get=function(e,t,r,n){void 0===t&&(t=dn(r));var a=(0===e?t:t>>>e)&Fr,o=this.nodes[a];return o?o.get(e+5,t,r,n):n},Aa.prototype.update=function(e,t,r,n,a,o,i){void 0===r&&(r=dn(n));var s=(0===t?r:r>>>t)&Fr,u=a===Er,c=this.nodes,l=c[s];if(u&&!l)return this;var p=La(l,e,t+5,r,n,a,o,i);if(p===l)return this;var d=this.count;if(l){if(!p&&--d<Va)return function(e,t,r,n){for(var a=0,o=0,i=new Array(r),s=0,u=1,c=t.length;s<c;s++,u<<=1){var l=t[s];void 0!==l&&s!==n&&(a|=u,i[o++]=l)}return new ja(e,a,i)}(e,c,d,s)}else d++;var f=e&&e===this.ownerID,h=Ua(c,s,p,f);return f?(this.count=d,this.nodes=h,this):new Aa(e,d,h)};var Fa=function(e,t,r){this.ownerID=e,this.keyHash=t,this.entries=r};Fa.prototype.get=function(e,t,r,n){for(var a=this.entries,o=0,i=a.length;o<i;o++)if(Kn(r,a[o][0]))return a[o][1];return n},Fa.prototype.update=function(e,t,r,n,a,o,i){void 0===r&&(r=dn(n));var s=a===Er;if(r!==this.keyHash)return s?this:(xr(i),xr(o),Ba(this,e,t,r,[n,a]));for(var u=this.entries,c=0,l=u.length;c<l&&!Kn(n,u[c][0]);c++);var p=c<l;if(p?u[c][1]===a:s)return this;if(xr(i),(s||!p)&&xr(o),s&&2===l)return new Ea(e,this.keyHash,u[1^c]);var d=e&&e===this.ownerID,f=d?u:aa(u);return p?s?c===l-1?f.pop():f[c]=f.pop():f[c]=[n,a]:f.push([n,a]),d?(this.entries=f,this):new Fa(e,this.keyHash,f)};var Ea=function(e,t,r){this.ownerID=e,this.keyHash=t,this.entry=r};Ea.prototype.get=function(e,t,r,n){return Kn(r,this.entry[0])?this.entry[1]:n},Ea.prototype.update=function(e,t,r,n,a,o,i){var s=a===Er,u=Kn(n,this.entry[0]);return(u?a===this.entry[1]:s)?this:(xr(i),s?void xr(o):u?e&&e===this.ownerID?(this.entry[1]=a,this):new Ea(e,this.keyHash,[n,a]):(xr(o),Ba(this,e,t,dn(n),[n,a])))},Sa.prototype.iterate=Fa.prototype.iterate=function(e,t){for(var r=this.entries,n=0,a=r.length-1;n<=a;n++)if(!1===e(r[t?a-n:n]))return!1},ja.prototype.iterate=Aa.prototype.iterate=function(e,t){for(var r=this.nodes,n=0,a=r.length-1;n<=a;n++){var o=r[t?a-n:n];if(o&&!1===o.iterate(e,t))return!1}},Ea.prototype.iterate=function(e,t){return e(this.entry)};var xa,Pa=function(e){function t(e,t,r){this._type=t,this._reverse=r,this._stack=e._root&&Ma(e._root)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var r=t.node,n=t.index++,a=void 0;if(r.entry){if(0===n)return Da(e,r.entry)}else if(r.entries){if(n<=(a=r.entries.length-1))return Da(e,r.entries[this._reverse?a-n:n])}else if(n<=(a=r.nodes.length-1)){var o=r.nodes[this._reverse?a-n:n];if(o){if(o.entry)return Da(e,o.entry);t=this._stack=Ma(o,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}},t}(br);function Da(e,t){return vr(e,t[0],t[1])}function Ma(e,t){return{node:e,index:0,__prev:t}}function Na(e,t,r,n){var a=Object.create(wa);return a.size=e,a._root=t,a.__ownerID=r,a.__hash=n,a.__altered=!1,a}function Ia(){return xa||(xa=Na(0))}function Ra(e,t,r){var n,a;if(e._root){var o={value:!1},i={value:!1};if(n=La(e._root,e.__ownerID,0,void 0,t,r,o,i),!i.value)return e;a=e.size+(o.value?r===Er?-1:1:0)}else{if(r===Er)return e;a=1,n=new Sa(e.__ownerID,[[t,r]])}return e.__ownerID?(e.size=a,e._root=n,e.__hash=void 0,e.__altered=!0,e):n?Na(a,n):Ia()}function La(e,t,r,n,a,o,i,s){return e?e.update(t,r,n,a,o,i,s):o===Er?e:(xr(s),xr(i),new Ea(t,n,[a,o]))}function Ca(e){return e.constructor===Ea||e.constructor===Fa}function Ba(e,t,r,n,a){if(e.keyHash===n)return new Fa(t,n,[e.entry,a]);var o,i=(0===r?e.keyHash:e.keyHash>>>r)&Fr,s=(0===r?n:n>>>r)&Fr,u=i===s?[Ba(e,t,r+5,n,a)]:(o=new Ea(t,n,a),i<s?[e,o]:[o,e]);return new ja(t,1<<i|1<<s,u)}function qa(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function Ua(e,t,r,n){var a=n?e:aa(e);return a[t]=r,a}var ka=8,Qa=16,Va=8;function Ga(e){if(Xr(e)&&"string"!=typeof e)return e;if(Vr(e))return e.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+e)}function $a(e){try{return"string"==typeof e?JSON.stringify(e):String(e)}catch(t){return JSON.stringify(e)}}function za(e,t){return kr(e)?e.has(t):na(e)&&zr.call(e,t)}function Xa(e,t,r){return kr(e)?e.get(t,r):za(e,t)?"function"==typeof e.get?e.get(t):e[t]:r}function Ha(e,t){if(!na(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(kr(e)){if(!e.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+e);return e.remove(t)}if(!zr.call(e,t))return e;var r=oa(e);return Array.isArray(r)?r.splice(t,1):delete r[t],r}function Ja(e,t,r){if(!na(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(kr(e)){if(!e.set)throw new TypeError("Cannot update immutable value without .set() method: "+e);return e.set(t,r)}if(zr.call(e,t)&&r===e[t])return e;var n=oa(e);return n[t]=r,n}function Ka(e,t,r,n){n||(n=r,r=void 0);var a=Ya(kr(e),e,Ga(t),0,r,n);return a===Er?r:a}function Ya(e,t,r,n,a,o){var i=t===Er;if(n===r.length){var s=i?a:t,u=o(s);return u===s?t:u}if(!i&&!na(t))throw new TypeError("Cannot update within non-data-structure value in path ["+Array.from(r).slice(0,n).map($a)+"]: "+t);var c=r[n],l=i?Er:Xa(t,c,Er),p=Ya(l===Er?e:kr(l),l,r,n+1,a,o);return p===l?t:p===Er?Ha(t,c):Ja(i?e?Ia():{}:t,c,p)}function Wa(e,t){return Ka(e,t,function(){return Er})}function Za(e){return Wa(this,e)}var eo="@@__IMMUTABLE_LIST__@@";function to(e){return Boolean(e&&e[eo])}var ro=function(e){function t(t){var r=uo();if(null==t)return r;if(to(t))return t;var n=e(t),a=n.size;return 0===a?r:(Oa(a),a>0&&a<Ar?so(0,a,5,null,new ao(n.toArray())):r.withMutations(function(e){e.setSize(a),n.forEach(function(t,r){return e.set(r,t)})}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(e,t){if((e=Mr(this,e))>=0&&e<this.size){var r=po(this,e+=this._origin);return r&&r.array[e&Fr]}return t},t.prototype.set=function(e,t){return function(e,t,r){if(t=Mr(e,t),t!=t)return e;if(t>=e.size||t<0)return e.withMutations(function(e){t<0?fo(e,t).set(0,r):fo(e,0,t+1).set(t,r)});t+=e._origin;var n=e._tail,a=e._root,o={value:!1};t>=ho(e._capacity)?n=co(n,e.__ownerID,0,t,r,o):a=co(a,e.__ownerID,e._level,t,r,o);if(!o.value)return e;if(e.__ownerID)return e._root=a,e._tail=n,e.__hash=void 0,e.__altered=!0,e;return so(e._origin,e._capacity,e._level,a,n)}(this,e,t)},t.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},t.prototype.insert=function(e,t){return this.splice(e,0,t)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):uo()},t.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(r){fo(r,0,t+e.length);for(var n=0;n<e.length;n++)r.set(t+n,e[n])})},t.prototype.pop=function(){return fo(this,0,-1)},t.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){fo(t,-e.length);for(var r=0;r<e.length;r++)t.set(r,e[r])})},t.prototype.shift=function(){return fo(this,1)},t.prototype.shuffle=function(e){return void 0===e&&(e=Math.random),this.withMutations(function(t){for(var r,n,a=t.size;a;)r=Math.floor(e()*a--),n=t.get(r),t.set(r,t.get(a)),t.set(a,n)})},t.prototype.concat=function(){for(var t=arguments,r=[],n=0;n<arguments.length;n++){var a=t[n],o=e("string"!=typeof a&&Or(a)?a:[a]);0!==o.size&&r.push(o)}return 0===r.length?this:0!==this.size||this.__ownerID||1!==r.length?this.withMutations(function(e){r.forEach(function(t){return t.forEach(function(t){return e.push(t)})})}):this.constructor(r[0])},t.prototype.setSize=function(e){return fo(this,0,e)},t.prototype.map=function(e,t){var r=this;return this.withMutations(function(n){for(var a=0;a<r.size;a++)n.set(a,e.call(t,n.get(a),a,r))})},t.prototype.slice=function(e,t){var r=this.size;return Ir(e,t,r)?this:fo(this,Rr(e,r),Lr(t,r))},t.prototype.__iterator=function(e,t){var r=t?this.size:0,n=io(this,t);return new br(function(){var a=n();return a===oo?{value:void 0,done:!0}:vr(e,t?--r:r++,a)})},t.prototype.__iterate=function(e,t){for(var r,n=t?this.size:0,a=io(this,t);(r=a())!==oo&&!1!==e(r,t?--n:n++,this););return n},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?so(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):0===this.size?uo():(this.__ownerID=e,this.__altered=!1,this)},t}(fr);ro.isList=to;var no=ro.prototype;no[eo]=!0,no[jr]=no.remove,no.merge=no.concat,no.setIn=fa,no.deleteIn=no.removeIn=Za,no.update=ha,no.updateIn=ya,no.mergeIn=pa,no.mergeDeepIn=la,no.withMutations=ma,no.wasAltered=ga,no.asImmutable=sn,no["@@transducer/init"]=no.asMutable=un,no["@@transducer/step"]=function(e,t){return e.push(t)},no["@@transducer/result"]=function(e){return e.asImmutable()};var ao=function(e,t){this.array=e,this.ownerID=t};ao.prototype.removeBefore=function(e,t,r){if(!(r&(1<<t+5)-1)||0===this.array.length)return this;var n=r>>>t&Fr;if(n>=this.array.length)return new ao([],e);var a,o=0===n;if(t>0){var i=this.array[n];if((a=i&&i.removeBefore(e,t-5,r))===i&&o)return this}if(o&&!a)return this;var s=lo(this,e);if(!o)for(var u=0;u<n;u++)s.array[u]=void 0;return a&&(s.array[n]=a),s},ao.prototype.removeAfter=function(e,t,r){if(r===(t?1<<t+5:Ar)||0===this.array.length)return this;var n,a=r-1>>>t&Fr;if(a>=this.array.length)return this;if(t>0){var o=this.array[a];if((n=o&&o.removeAfter(e,t-5,r))===o&&a===this.array.length-1)return this}var i=lo(this,e);return i.array.splice(a+1),n&&(i.array[a]=n),i};var oo={};function io(e,t){var r=e._origin,n=e._capacity,a=ho(n),o=e._tail;return i(e._root,e._level,0);function i(e,s,u){return 0===s?function(e,i){var s=i===a?o&&o.array:e&&e.array,u=i>r?0:r-i,c=n-i;c>Ar&&(c=Ar);return function(){if(u===c)return oo;var e=t?--c:u++;return s&&s[e]}}(e,u):function(e,a,o){var s,u=e&&e.array,c=o>r?0:r-o>>a,l=1+(n-o>>a);l>Ar&&(l=Ar);return function(){for(;;){if(s){var e=s();if(e!==oo)return e;s=null}if(c===l)return oo;var r=t?--l:c++;s=i(u&&u[r],a-5,o+(r<<a))}}}(e,s,u)}}function so(e,t,r,n,a,o,i){var s=Object.create(no);return s.size=t-e,s._origin=e,s._capacity=t,s._level=r,s._root=n,s._tail=a,s.__ownerID=o,s.__hash=i,s.__altered=!1,s}function uo(){return so(0,0,5)}function co(e,t,r,n,a,o){var i,s=n>>>r&Fr,u=e&&s<e.array.length;if(!u&&void 0===a)return e;if(r>0){var c=e&&e.array[s],l=co(c,t,r-5,n,a,o);return l===c?e:((i=lo(e,t)).array[s]=l,i)}return u&&e.array[s]===a?e:(o&&xr(o),i=lo(e,t),void 0===a&&s===i.array.length-1?i.array.pop():i.array[s]=a,i)}function lo(e,t){return t&&e&&t===e.ownerID?e:new ao(e?e.array.slice():[],t)}function po(e,t){if(t>=ho(e._capacity))return e._tail;if(t<1<<e._level+5){for(var r=e._root,n=e._level;r&&n>0;)r=r.array[t>>>n&Fr],n-=5;return r}}function fo(e,t,r){void 0!==t&&(t|=0),void 0!==r&&(r|=0);var n=e.__ownerID||new Pr,a=e._origin,o=e._capacity,i=a+t,s=void 0===r?o:r<0?o+r:a+r;if(i===a&&s===o)return e;if(i>=s)return e.clear();for(var u=e._level,c=e._root,l=0;i+l<0;)c=new ao(c&&c.array.length?[void 0,c]:[],n),l+=1<<(u+=5);l&&(i+=l,a+=l,s+=l,o+=l);for(var p=ho(o),d=ho(s);d>=1<<u+5;)c=new ao(c&&c.array.length?[c]:[],n),u+=5;var f=e._tail,h=d<p?po(e,s-1):d>p?new ao([],n):f;if(f&&d>p&&i<o&&f.array.length){for(var y=c=lo(c,n),g=u;g>5;g-=5){var m=p>>>g&Fr;y=y.array[m]=lo(y.array[m],n)}y.array[p>>>5&Fr]=f}if(s<o&&(h=h&&h.removeAfter(n,0,s)),i>=d)i-=d,s-=d,u=5,c=null,h=h&&h.removeBefore(n,0,i);else if(i>a||d<p){for(l=0;c;){var b=i>>>u&Fr;if(b!==d>>>u&Fr)break;b&&(l+=(1<<u)*b),u-=5,c=c.array[b]}c&&i>a&&(c=c.removeBefore(n,u,i-l)),c&&d<p&&(c=c.removeAfter(n,u,d-l)),l&&(i-=l,s-=l)}return e.__ownerID?(e.size=s-i,e._origin=i,e._capacity=s,e._level=u,e._root=c,e._tail=h,e.__hash=void 0,e.__altered=!0,e):so(i,s,u,c,h)}function ho(e){return e<Ar?0:e-1>>>5<<5}function yo(e){return va(e)&&Vr(e)}var go,mo=function(e){function t(e){return null==e?vo():yo(e)?e:vo().withMutations(function(t){var r=dr(e);Oa(r.size),r.forEach(function(e,r){return t.set(r,e)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},t.prototype.get=function(e,t){var r=this._map.get(e);return void 0!==r?this._list.get(r)[1]:t},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):vo()},t.prototype.set=function(e,t){return _o(this,e,t)},t.prototype.remove=function(e){return _o(this,e,Er)},t.prototype.__iterate=function(e,t){var r=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],r)},t)},t.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),r=this._list.__ensureOwner(e);return e?bo(t,r,e,this.__hash):0===this.size?vo():(this.__ownerID=e,this.__altered=!1,this._map=t,this._list=r,this)},t}(Ta);function bo(e,t,r,n){var a=Object.create(mo.prototype);return a.size=e?e.size:0,a._map=e,a._list=t,a.__ownerID=r,a.__hash=n,a.__altered=!1,a}function vo(){return go||(go=bo(Ia(),uo()))}function _o(e,t,r){var n,a,o=e._map,i=e._list,s=o.get(t),u=void 0!==s;if(r===Er){if(!u)return e;i.size>=Ar&&i.size>=2*o.size?(n=(a=i.filter(function(e,t){return void 0!==e&&s!==t})).toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(n.__ownerID=a.__ownerID=e.__ownerID)):(n=o.remove(t),a=s===i.size-1?i.pop():i.set(s,void 0))}else if(u){if(r===i.get(s)[1])return e;n=o,a=i.set(s,[t,r])}else n=o.set(t,i.size),a=i.set(i.size,[t,r]);return e.__ownerID?(e.size=n.size,e._map=n,e._list=a,e.__hash=void 0,e.__altered=!0,e):bo(n,a)}mo.isOrderedMap=yo,mo.prototype[Qr]=!0,mo.prototype[jr]=mo.prototype.remove;var Oo="@@__IMMUTABLE_STACK__@@";function To(e){return Boolean(e&&e[Oo])}var wo=function(e){function t(e){return null==e?Fo():To(e)?e:Fo().pushAll(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(e,t){var r=this._head;for(e=Mr(this,e);r&&e--;)r=r.next;return r?r.value:t},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var e=arguments;if(0===arguments.length)return this;for(var t=this.size+arguments.length,r=this._head,n=arguments.length-1;n>=0;n--)r={value:e[n],next:r};return this.__ownerID?(this.size=t,this._head=r,this.__hash=void 0,this.__altered=!0,this):Ao(t,r)},t.prototype.pushAll=function(t){if(0===(t=e(t)).size)return this;if(0===this.size&&To(t))return t;Oa(t.size);var r=this.size,n=this._head;return t.__iterate(function(e){r++,n={value:e,next:n}},!0),this.__ownerID?(this.size=r,this._head=n,this.__hash=void 0,this.__altered=!0,this):Ao(r,n)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Fo()},t.prototype.slice=function(t,r){if(Ir(t,r,this.size))return this;var n=Rr(t,this.size);if(Lr(r,this.size)!==this.size)return e.prototype.slice.call(this,t,r);for(var a=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=a,this._head=o,this.__hash=void 0,this.__altered=!0,this):Ao(a,o)},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Ao(this.size,this._head,e,this.__hash):0===this.size?Fo():(this.__ownerID=e,this.__altered=!1,this)},t.prototype.__iterate=function(e,t){var r=this;if(t)return new Wr(this.toArray()).__iterate(function(t,n){return e(t,n,r)},t);for(var n=0,a=this._head;a&&!1!==e(a.value,n++,this);)a=a.next;return n},t.prototype.__iterator=function(e,t){if(t)return new Wr(this.toArray()).__iterator(e,t);var r=0,n=this._head;return new br(function(){if(n){var t=n.value;return n=n.next,vr(e,r++,t)}return{value:void 0,done:!0}})},t}(fr);wo.isStack=To;var So,jo=wo.prototype;function Ao(e,t,r,n){var a=Object.create(jo);return a.size=e,a._head=t,a.__ownerID=r,a.__hash=n,a.__altered=!1,a}function Fo(){return So||(So=Ao(0))}function Eo(e,t,r,n,a,o){return Oa(e.size),e.__iterate(function(e,o,i){a?(a=!1,r=e):r=t.call(n,r,e,o,i)},o),r}function xo(e,t){return t}function Po(e,t){return[t,e]}function Do(e){return function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return!e.apply(this,t)}}function Mo(e){return function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return-e.apply(this,t)}}function No(e,t){return e<t?1:e>t?-1:0}function Io(e,t){if(e===t)return!0;if(!lr(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||sr(e)!==sr(t)||or(e)!==or(t)||Vr(e)!==Vr(t))return!1;if(0===e.size&&0===t.size)return!0;var r=!ur(e);if(Vr(e)){var n=e.entries();return t.every(function(e,t){var a=n.next().value;return a&&Kn(a[1],e)&&(r||Kn(a[0],t))})&&n.next().done}var a=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{a=!0;var o=e;e=t,t=o}var i=!0,s=t.__iterate(function(t,n){if(r?!e.has(t):a?!Kn(t,e.get(n,Er)):!Kn(e.get(n,Er),t))return i=!1,!1});return i&&e.size===s}jo[Oo]=!0,jo.shift=jo.pop,jo.unshift=jo.push,jo.unshiftAll=jo.pushAll,jo.withMutations=ma,jo.wasAltered=ga,jo.asImmutable=sn,jo["@@transducer/init"]=jo.asMutable=un,jo["@@transducer/step"]=function(e,t){return e.unshift(t)},jo["@@transducer/result"]=function(e){return e.asImmutable()};var Ro,Lo=function(e){function t(e,r,n){if(void 0===n&&(n=1),!(this instanceof t))return new t(e,r,n);if(_a(0!==n,"Cannot step a Range by 0"),_a(void 0!==e,"You must define a start value when using Range"),_a(void 0!==r,"You must define an end value when using Range"),n=Math.abs(n),r<e&&(n=-n),this._start=e,this._end=r,this._step=n,this.size=Math.max(0,Math.ceil((r-e)/n-1)+1),0===this.size){if(Ro)return Ro;Ro=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},t.prototype.get=function(e,t){return this.has(e)?this._start+Mr(this,e)*this._step:t},t.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},t.prototype.slice=function(e,r){return Ir(e,r,this.size)?this:(e=Rr(e,this.size),(r=Lr(r,this.size))<=e?new t(0,0):new t(this.get(e,this._end),this.get(r,this._end),this._step))},t.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step===0){var r=t/this._step;if(r>=0&&r<this.size)return r}return-1},t.prototype.lastIndexOf=function(e){return this.indexOf(e)},t.prototype.__iterate=function(e,t){for(var r=this.size,n=this._step,a=t?this._start+(r-1)*n:this._start,o=0;o!==r&&!1!==e(a,t?r-++o:o++,this);)a+=t?-n:n;return o},t.prototype.__iterator=function(e,t){var r=this.size,n=this._step,a=t?this._start+(r-1)*n:this._start,o=0;return new br(function(){if(o===r)return{value:void 0,done:!0};var i=a;return a+=t?-n:n,vr(e,t?r-++o:o++,i)})},t.prototype.equals=function(e){return e instanceof t?this._start===e._start&&this._end===e._end&&this._step===e._step:Io(this,e)},t}(Kr),Co="@@__IMMUTABLE_SET__@@";function Bo(e){return Boolean(e&&e[Co])}var qo=function(e){function t(t){return null==t?Go():Bo(t)&&!Vr(t)?t:Go().withMutations(function(r){var n=e(t);Oa(n.size),n.forEach(function(e){return r.add(e)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(dr(e).keySeq())},t.intersect=function(e){return(e=pr(e).toArray()).length?ko.intersect.apply(t(e.pop()),e):Go()},t.union=function(e){return(e=pr(e).toArray()).length?ko.union.apply(t(e.pop()),e):Go()},t.prototype.toString=function(){return this.__toString("Set {","}")},t.prototype.has=function(e){return this._map.has(e)},t.prototype.add=function(e){return Qo(this,this._map.set(e,e))},t.prototype.remove=function(e){return Qo(this,this._map.remove(e))},t.prototype.clear=function(){return Qo(this,this._map.clear())},t.prototype.map=function(e,t){var r=this,n=!1,a=Qo(this,this._map.mapEntries(function(a){var o=a[1],i=e.call(t,o,o,r);return i!==o&&(n=!0),[i,i]},t));return n?a:this},t.prototype.union=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return 0===(t=t.filter(function(e){return 0!==e.size})).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(r){for(var n=0;n<t.length;n++)"string"==typeof t[n]?r.add(t[n]):e(t[n]).forEach(function(e){return r.add(e)})}):this.constructor(t[0])},t.prototype.intersect=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(0===t.length)return this;t=t.map(function(t){return e(t)});var n=[];return this.forEach(function(e){t.every(function(t){return t.includes(e)})||n.push(e)}),this.withMutations(function(e){n.forEach(function(t){e.remove(t)})})},t.prototype.subtract=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(0===t.length)return this;t=t.map(function(t){return e(t)});var n=[];return this.forEach(function(e){t.some(function(t){return t.includes(e)})&&n.push(e)}),this.withMutations(function(e){n.forEach(function(t){e.remove(t)})})},t.prototype.sort=function(e){return oi(qn(this,e))},t.prototype.sortBy=function(e,t){return oi(qn(this,t,e))},t.prototype.wasAltered=function(){return this._map.wasAltered()},t.prototype.__iterate=function(e,t){var r=this;return this._map.__iterate(function(t){return e(t,t,r)},t)},t.prototype.__iterator=function(e,t){return this._map.__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):0===this.size?this.__empty():(this.__ownerID=e,this._map=t,this)},t}(hr);qo.isSet=Bo;var Uo,ko=qo.prototype;function Qo(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function Vo(e,t){var r=Object.create(ko);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function Go(){return Uo||(Uo=Vo(Ia()))}function $o(e,t,r){for(var n=Ga(t),a=0;a!==n.length;)if((e=Xa(e,n[a++],Er))===Er)return r;return e}function zo(e,t){return $o(this,e,t)}function Xo(e,t){return $o(e,t,Er)!==Er}function Ho(){Oa(this.size);var e={};return this.__iterate(function(t,r){e[r]=t}),e}function Jo(e){if(!e||"object"!=typeof e)return e;if(!lr(e)){if(!na(e))return e;e=Hr(e)}if(sr(e)){var t={};return e.__iterate(function(e,r){t[r]=Jo(e)}),t}var r=[];return e.__iterate(function(e){r.push(Jo(e))}),r}function Ko(e){if(e.size===1/0)return 0;var t=Vr(e),r=sr(e),n=t?1:0;return e.__iterate(r?t?function(e,t){n=31*n+Yo(dn(e),dn(t))|0}:function(e,t){n=n+Yo(dn(e),dn(t))|0}:t?function(e){n=31*n+dn(e)|0}:function(e){n=n+dn(e)|0}),function(e,t){return t=cn(t,3432918353),t=cn(t<<15|t>>>-15,461845907),t=cn(t<<13|t>>>-13,5),t=(t+3864292196|0)^e,t=cn(t^t>>>16,2246822507),t=cn(t^t>>>13,3266489909),t=ln(t^t>>>16),t}(e.size,n)}function Yo(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function Wo(e,t){var r=function(r){e.prototype[r]=t[r]};return Object.keys(t).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(r),e}ko[Co]=!0,ko[jr]=ko.remove,ko.merge=ko.concat=ko.union,ko.withMutations=ma,ko.asImmutable=sn,ko["@@transducer/init"]=ko.asMutable=un,ko["@@transducer/step"]=function(e,t){return e.add(t)},ko["@@transducer/result"]=function(e){return e.asImmutable()},ko.__empty=Go,ko.__make=Vo,pr.Iterator=br,Wo(pr,{toArray:function(){Oa(this.size);var e=new Array(this.size||0),t=sr(this),r=0;return this.__iterate(function(n,a){e[r++]=t?[a,n]:n}),e},toIndexedSeq:function(){return new En(this)},toJS:function(){return Jo(this)},toKeyedSeq:function(){return new Fn(this,!0)},toMap:function(){return Ta(this.toKeyedSeq())},toObject:Ho,toOrderedMap:function(){return mo(this.toKeyedSeq())},toOrderedSet:function(){return oi(sr(this)?this.valueSeq():this)},toSet:function(){return qo(sr(this)?this.valueSeq():this)},toSetSeq:function(){return new xn(this)},toSeq:function(){return or(this)?this.toIndexedSeq():sr(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return wo(sr(this)?this.valueSeq():this)},toList:function(){return ro(sr(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return Vn(this,function(e,t){var r=sr(e),n=[e].concat(t).map(function(e){return lr(e)?r&&(e=dr(e)):e=r?nn(e):an(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===n.length)return e;if(1===n.length){var a=n[0];if(a===e||r&&sr(a)||or(e)&&or(a))return a}return new Cn(n)}(this,e))},includes:function(e){return this.some(function(t){return Kn(t,e)})},entries:function(){return this.__iterator(2)},every:function(e,t){Oa(this.size);var r=!0;return this.__iterate(function(n,a,o){if(!e.call(t,n,a,o))return r=!1,!1}),r},filter:function(e,t){return Vn(this,In(this,e,t,!0))},partition:function(e,t){return function(e,t,r){var n=sr(e),a=[[],[]];e.__iterate(function(o,i){a[t.call(r,o,i,e)?1:0].push(n?[i,o]:o)});var o=$n(e);return a.map(function(t){return Vn(e,o(t))})}(this,e,t)},find:function(e,t,r){var n=this.findEntry(e,t);return n?n[1]:r},forEach:function(e,t){return Oa(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){Oa(this.size),e=void 0!==e?""+e:",";var t="",r=!0;return this.__iterate(function(n){r?r=!1:t+=e,t+=null!=n?n.toString():""}),t},keys:function(){return this.__iterator(0)},map:function(e,t){return Vn(this,Mn(this,e,t))},reduce:function(e,t,r){return Eo(this,e,t,r,arguments.length<2,!1)},reduceRight:function(e,t,r){return Eo(this,e,t,r,arguments.length<2,!0)},reverse:function(){return Vn(this,Nn(this,!0))},slice:function(e,t){return Vn(this,Rn(this,e,t,!0))},some:function(e,t){Oa(this.size);var r=!1;return this.__iterate(function(n,a,o){if(e.call(t,n,a,o))return r=!0,!1}),r},sort:function(e){return Vn(this,qn(this,e))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(e,t){return Dr(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,r){var n=Ta().asMutable();return e.__iterate(function(a,o){n.update(t.call(r,a,o,e),0,function(e){return e+1})}),n.asImmutable()}(this,e,t)},equals:function(e){return Io(this,e)},entrySeq:function(){var e=this;if(e._cache)return new Wr(e._cache);var t=e.toSeq().map(Po).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(Do(e),t)},findEntry:function(e,t,r){var n=r;return this.__iterate(function(r,a,o){if(e.call(t,r,a,o))return n=[a,r],!1}),n},findKey:function(e,t){var r=this.findEntry(e,t);return r&&r[0]},findLast:function(e,t,r){return this.toKeyedSeq().reverse().find(e,t,r)},findLastEntry:function(e,t,r){return this.toKeyedSeq().reverse().findEntry(e,t,r)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(e){return this.find(Nr,null,e)},flatMap:function(e,t){return Vn(this,function(e,t,r){var n=$n(e);return e.toSeq().map(function(a,o){return n(t.call(r,a,o,e))}).flatten(!0)}(this,e,t))},flatten:function(e){return Vn(this,Bn(this,e,!0))},fromEntrySeq:function(){return new Pn(this)},get:function(e,t){return this.find(function(t,r){return Kn(r,e)},void 0,t)},getIn:zo,groupBy:function(e,t){return function(e,t,r){var n=sr(e),a=(Vr(e)?mo():Ta()).asMutable();e.__iterate(function(o,i){a.update(t.call(r,o,i,e),function(e){return(e=e||[]).push(n?[i,o]:o),e})});var o=$n(e);return a.map(function(t){return Vn(e,o(t))}).asImmutable()}(this,e,t)},has:function(e){return this.get(e,Er)!==Er},hasIn:function(e){return Xo(this,e)},isSubset:function(e){return e="function"==typeof e.includes?e:pr(e),this.every(function(t){return e.includes(t)})},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:pr(e)).isSubset(this)},keyOf:function(e){return this.findKey(function(t){return Kn(t,e)})},keySeq:function(){return this.toSeq().map(xo).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return Un(this,e)},maxBy:function(e,t){return Un(this,t,e)},min:function(e){return Un(this,e?Mo(e):No)},minBy:function(e,t){return Un(this,t?Mo(t):No,e)},rest:function(){return this.slice(1)},skip:function(e){return 0===e?this:this.slice(Math.max(0,e))},skipLast:function(e){return 0===e?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,t){return Vn(this,Ln(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(Do(e),t)},sortBy:function(e,t){return Vn(this,qn(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,t){return Vn(this,function(e,t,r){var n=zn(e);return n.__iterateUncached=function(n,a){var o=this;if(a)return this.cacheResult().__iterate(n,a);var i=0;return e.__iterate(function(e,a,s){return t.call(r,e,a,s)&&++i&&n(e,a,o)}),i},n.__iteratorUncached=function(n,a){var o=this;if(a)return this.cacheResult().__iterator(n,a);var i=e.__iterator(2,a),s=!0;return new br(function(){if(!s)return{value:void 0,done:!0};var e=i.next();if(e.done)return e;var a=e.value,u=a[0],c=a[1];return t.call(r,c,u,o)?2===n?e:vr(n,u,c,e):(s=!1,{value:void 0,done:!0})})},n}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(Do(e),t)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=Ko(this))}});var Zo=pr.prototype;Zo[cr]=!0,Zo[mr]=Zo.values,Zo.toJSON=Zo.toArray,Zo.__toStringMapper=$a,Zo.inspect=Zo.toSource=function(){return this.toString()},Zo.chain=Zo.flatMap,Zo.contains=Zo.includes,Wo(dr,{flip:function(){return Vn(this,Dn(this))},mapEntries:function(e,t){var r=this,n=0;return Vn(this,this.toSeq().map(function(a,o){return e.call(t,[o,a],n++,r)}).fromEntrySeq())},mapKeys:function(e,t){var r=this;return Vn(this,this.toSeq().flip().map(function(n,a){return e.call(t,n,a,r)}).flip())}});var ei=dr.prototype;ei[ir]=!0,ei[mr]=Zo.entries,ei.toJSON=Ho,ei.__toStringMapper=function(e,t){return $a(t)+": "+$a(e)},Wo(fr,{toKeyedSeq:function(){return new Fn(this,!1)},filter:function(e,t){return Vn(this,In(this,e,t,!1))},findIndex:function(e,t){var r=this.findEntry(e,t);return r?r[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return Vn(this,Nn(this,!1))},slice:function(e,t){return Vn(this,Rn(this,e,t,!1))},splice:function(e,t){var r=arguments.length;if(t=Math.max(t||0,0),0===r||2===r&&!t)return this;e=Rr(e,e<0?this.count():this.size);var n=this.slice(0,e);return Vn(this,1===r?n:n.concat(aa(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var r=this.findLastEntry(e,t);return r?r[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return Vn(this,Bn(this,e,!1))},get:function(e,t){return(e=Mr(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(t,r){return r===e},void 0,t)},has:function(e){return(e=Mr(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return Vn(this,function(e,t){var r=zn(e);return r.size=e.size&&2*e.size-1,r.__iterateUncached=function(r,n){var a=this,o=0;return e.__iterate(function(e){return(!o||!1!==r(t,o++,a))&&!1!==r(e,o++,a)},n),o},r.__iteratorUncached=function(r,n){var a,o=e.__iterator(1,n),i=0;return new br(function(){return(!a||i%2)&&(a=o.next()).done?a:i%2?vr(r,i++,t):vr(r,i++,a.value,a)})},r}(this,e))},interleave:function(){var e=[this].concat(aa(arguments)),t=Qn(this.toSeq(),Kr.of,e),r=t.flatten(!0);return t.size&&(r.size=t.size*e.length),Vn(this,r)},keySeq:function(){return Lo(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,t){return Vn(this,Ln(this,e,t,!1))},zip:function(){return Vn(this,Qn(this,ni,[this].concat(aa(arguments))))},zipAll:function(){return Vn(this,Qn(this,ni,[this].concat(aa(arguments)),!0))},zipWith:function(e){var t=aa(arguments);return t[0]=this,Vn(this,Qn(this,e,t))}});var ti=fr.prototype;ti[ar]=!0,ti[Qr]=!0,Wo(hr,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var ri=hr.prototype;function ni(){return aa(arguments)}function ai(e){return Bo(e)&&Vr(e)}ri.has=Zo.includes,ri.contains=ri.includes,ri.keys=ri.values,Wo(Jr,ei),Wo(Kr,ti),Wo(Yr,ri);var oi=function(e){function t(e){return null==e?ci():ai(e)?e:ci().withMutations(function(t){var r=hr(e);Oa(r.size),r.forEach(function(e){return t.add(e)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(dr(e).keySeq())},t.prototype.toString=function(){return this.__toString("OrderedSet {","}")},t}(qo);oi.isOrderedSet=ai;var ii,si=oi.prototype;function ui(e,t){var r=Object.create(si);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function ci(){return ii||(ii=ui(vo()))}si[Qr]=!0,si.zip=ti.zip,si.zipWith=ti.zipWith,si.zipAll=ti.zipAll,si.__empty=ci,si.__make=ui;var li=function(e,t){var r;!function(e){if(Ur(e))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(kr(e))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===e||"object"!=typeof e)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(e);var n=function(o){var i=this;if(o instanceof n)return o;if(!(this instanceof n))return new n(o);if(!r){r=!0;var s=Object.keys(e),u=a._indices={};a._name=t,a._keys=s,a._defaultValues=e;for(var c=0;c<s.length;c++){var l=s[c];u[l]=c,a[l]?"object"==typeof console&&console.warn:yi(a,l)}}return this.__ownerID=void 0,this._values=ro().withMutations(function(e){e.setSize(i._keys.length),dr(o).forEach(function(t,r){e.set(i._indices[r],t===i._defaultValues[r]?void 0:t)})}),this},a=n.prototype=Object.create(pi);return a.constructor=n,t&&(n.displayName=t),n};li.prototype.toString=function(){for(var e,t=fi(this)+" { ",r=this._keys,n=0,a=r.length;n!==a;n++)t+=(n?", ":"")+(e=r[n])+": "+$a(this.get(e));return t+" }"},li.prototype.equals=function(e){return this===e||Ur(e)&&hi(this).equals(hi(e))},li.prototype.hashCode=function(){return hi(this).hashCode()},li.prototype.has=function(e){return this._indices.hasOwnProperty(e)},li.prototype.get=function(e,t){if(!this.has(e))return t;var r=this._indices[e],n=this._values.get(r);return void 0===n?this._defaultValues[e]:n},li.prototype.set=function(e,t){if(this.has(e)){var r=this._values.set(this._indices[e],t===this._defaultValues[e]?void 0:t);if(r!==this._values&&!this.__ownerID)return di(this,r)}return this},li.prototype.remove=function(e){return this.set(e)},li.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:di(this,e)},li.prototype.wasAltered=function(){return this._values.wasAltered()},li.prototype.toSeq=function(){return hi(this)},li.prototype.toJS=function(){return Jo(this)},li.prototype.entries=function(){return this.__iterator(2)},li.prototype.__iterator=function(e,t){return hi(this).__iterator(e,t)},li.prototype.__iterate=function(e,t){return hi(this).__iterate(e,t)},li.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._values.__ensureOwner(e);return e?di(this,t,e):(this.__ownerID=e,this._values=t,this)},li.isRecord=Ur,li.getDescriptiveName=fi;var pi=li.prototype;function di(e,t,r){var n=Object.create(Object.getPrototypeOf(e));return n._values=t,n.__ownerID=r,n}function fi(e){return e.constructor.displayName||e.constructor.name||"Record"}function hi(e){return nn(e._keys.map(function(t){return[t,e.get(t)]}))}function yi(e,t){try{Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){_a(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}catch(r){}}pi[qr]=!0,pi[jr]=pi.remove,pi.deleteIn=pi.removeIn=Za,pi.getIn=zo,pi.hasIn=Zo.hasIn,pi.merge=Wn,pi.mergeWith=Zn,pi.mergeIn=pa,pi.mergeDeep=ua,pi.mergeDeepWith=ca,pi.mergeDeepIn=la,pi.setIn=fa,pi.update=ha,pi.updateIn=ya,pi.withMutations=ma,pi.asMutable=un,pi.asImmutable=sn,pi[mr]=pi.entries,pi.toJSON=pi.toObject=Zo.toObject,pi.inspect=pi.toSource=function(){return this.toString()};var gi,mi=function(e){function t(e,r){if(!(this instanceof t))return new t(e,r);if(this._value=e,this.size=void 0===r?1/0:Math.max(0,r),0===this.size){if(gi)return gi;gi=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},t.prototype.get=function(e,t){return this.has(e)?this._value:t},t.prototype.includes=function(e){return Kn(this._value,e)},t.prototype.slice=function(e,r){var n=this.size;return Ir(e,r,n)?this:new t(this._value,Lr(r,n)-Rr(e,n))},t.prototype.reverse=function(){return this},t.prototype.indexOf=function(e){return Kn(this._value,e)?0:-1},t.prototype.lastIndexOf=function(e){return Kn(this._value,e)?this.size:-1},t.prototype.__iterate=function(e,t){for(var r=this.size,n=0;n!==r&&!1!==e(this._value,t?r-++n:n++,this););return n},t.prototype.__iterator=function(e,t){var r=this,n=this.size,a=0;return new br(function(){return a===n?{value:void 0,done:!0}:vr(e,t?n-++a:a++,r._value)})},t.prototype.equals=function(e){return e instanceof t?Kn(this._value,e._value):Io(this,e)},t}(Kr);function bi(e,t,r,n,a,o){if("string"!=typeof r&&!kr(r)&&(Xr(r)||Or(r)||ra(r))){if(~e.indexOf(r))throw new TypeError("Cannot convert circular structure to Immutable");e.push(r),a&&""!==n&&a.push(n);var i=t.call(o,n,Hr(r).map(function(n,o){return bi(e,t,n,o,a,r)}),a&&a.slice());return e.pop(),a&&a.pop(),i}return r}function vi(e,t){return or(t)?t.toList():sr(t)?t.toMap():t.toSet()}var _i=pr;const Oi=d(Object.freeze(Object.defineProperty({__proto__:null,Collection:pr,Iterable:_i,List:ro,Map:Ta,OrderedMap:mo,OrderedSet:oi,PairSorting:{LeftThenRight:-1,RightThenLeft:1},Range:Lo,Record:li,Repeat:mi,Seq:Hr,Set:qo,Stack:wo,fromJS:function(e,t){return bi([],t||vi,e,"",t&&t.length>2?[]:void 0,{"":e})},get:Xa,getIn:$o,has:za,hasIn:Xo,hash:dn,is:Kn,isAssociative:ur,isCollection:lr,isImmutable:kr,isIndexed:or,isKeyed:sr,isList:to,isMap:va,isOrdered:Vr,isOrderedMap:yo,isOrderedSet:ai,isPlainObject:ra,isRecord:Ur,isSeq:$r,isSet:Bo,isStack:To,isValueObject:Jn,merge:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return sa(e,t)},mergeDeep:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return ia(e,t)},mergeDeepWith:function(e,t){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return ia(t,r,e)},mergeWith:function(e,t){for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return sa(t,r,e)},remove:Ha,removeIn:Wa,set:Ja,setIn:da,update:Yn,updateIn:Ka,version:"5.1.4"},Symbol.toStringTag,{value:"Module"})));var Ti;function wi(){if(Ti)return nr;Ti=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.ActionContextKey=nr.ActionContext=void 0;const e=Oi;let t=class t{constructor(t={}){this.map=(0,e.Map)(t)}setDefault(e,t){return this.has(e)?this:this.set(e,t)}set(e,t){return this.setRaw(e.name,t)}setRaw(e,r){return new t(this.map.set(e,r))}delete(e){return new t(this.map.delete(e.name))}get(e){return this.getRaw(e.name)}getRaw(e){return this.map.get(e)}getSafe(e){if(!this.has(e))throw new Error(`Context entry ${e.name} is required but not available`);return this.get(e)}has(e){return this.hasRaw(e.name)}hasRaw(e){return this.map.has(e)}merge(...e){let t=this;for(const r of e)for(const e of r.keys())t=t.set(e,r.get(e));return t}keys(){return[...this.map.keys()].map(e=>new r(e))}toJS(){return this.map.toJS()}toString(){return`ActionContext(${JSON.stringify(this.map.toJS())})`}[Symbol.for("nodejs.util.inspect.custom")](){return`ActionContext(${JSON.stringify(this.map.toJS(),null,"  ")})`}static ensureActionContext(r){return r instanceof t?r:new t((0,e.Map)(r??{}))}};nr.ActionContext=t;class r{constructor(e){this.name=e}}return nr.ActionContextKey=r,nr}var Si,ji={};function Ai(){if(Si)return ji;Si=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.Bus=void 0;return ji.Bus=class{constructor(e){this.actors=[],this.observers=[],this.dependencyLinks=new Map,Object.assign(this,e),this.failMessage=`All actors over bus ${this.name} failed to handle an action`}subscribe(e){this.actors.push(e),this.reorderForDependencies()}subscribeObserver(e){this.observers.push(e)}unsubscribe(e){const t=this.actors.indexOf(e);return t>=0&&(this.actors.splice(t,1),!0)}unsubscribeObserver(e){const t=this.observers.indexOf(e);return t>=0&&(this.observers.splice(t,1),!0)}publish(e){return this.actors.map(t=>({actor:t,reply:t.test(e)}))}onRun(e,t,r){for(const n of this.observers)n.onRun(e,t,r)}addDependencies(e,t){for(const r of t){let t=this.dependencyLinks.get(r);t||(t=[],this.dependencyLinks.set(r,t)),t.push(e)}this.reorderForDependencies()}reorderForDependencies(){if(this.dependencyLinks.size>0){const e=[];for(const t of this.dependencyLinks.keys()){const r=this.actors.indexOf(t);r>=0&&(this.actors.splice(r,1),e.push(t))}for(;e.length>0;){let t=-1;for(let n=0;n<e.length;n++){let r=!0;for(const t of this.dependencyLinks.get(e[n]))if(!this.actors.includes(t)&&e.includes(t)){r=!1;break}if(r){t=n;break}}if(t<0)throw new Error(`Cyclic dependency links detected in bus ${this.name}`);const r=e.splice(t,1)[0];this.actors.push(r)}}}},ji}var Fi,Ei={};function xi(){if(Fi)return Ei;Fi=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.BusIndexed=void 0;const e=Ai();let t=class extends e.Bus{constructor(e){super(e),this.actorsIndex={}}subscribe(e){const t=this.getActorIdentifiers(e)??["_undefined_"];for(const r of t){let t=this.actorsIndex[r];t||(t=this.actorsIndex[r]=[]),t.push(e),super.subscribe(e)}}unsubscribe(e){const t=this.getActorIdentifiers(e)??["_undefined_"];let r=!1;for(const n of t){const t=this.actorsIndex[n];if(t){const r=t.indexOf(e);r>=0&&t.splice(r,1),0===t.length&&delete this.actorsIndex[n]}r=r||super.unsubscribe(e)}return r}publish(e){const t=this.getActionIdentifier(e);if(t){return[...this.actorsIndex[t]||[],...this.actorsIndex._undefined_||[]].map(t=>({actor:t,reply:t.test(e)}))}return super.publish(e)}getActorIdentifiers(e){const t=this.actorIdentifierFields.reduce((e,t)=>e[t],e);if(t)return Array.isArray(t)?t:[t]}getActionIdentifier(e){return this.actionIdentifierFields.reduce((e,t)=>e[t],e)}};return Ei.BusIndexed=t,Ei}var Pi,Di={};function Mi(){if(Pi)return Di;Pi=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.CONTEXT_KEY_LOGGER=void 0;const e=wi();return Di.CONTEXT_KEY_LOGGER=new e.ActionContextKey("@comunica/core:log"),Di}var Ni,Ii={};function Ri(){if(Ni)return Ii;Ni=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.ActionObserver=void 0;return Ii.ActionObserver=class{constructor(e){Object.assign(this,e)}},Ii}var Li,Ci={};function Bi(){if(Li)return Ci;Li=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.Actor=void 0;const e=Mi();return Ci.Actor=class t{constructor(e){this.beforeActors=[],Object.assign(this,e),this.bus.subscribe(this),this.beforeActors.length>0&&this.bus.addDependencies(this,this.beforeActors),e.busFailMessage&&(this.bus.failMessage=e.busFailMessage)}static getContextLogger(t){return t.get(e.CONTEXT_KEY_LOGGER)}runObservable(e,t){const r=this.run(e,t);return this.bus.onRun(this,e,r),r}getDefaultLogData(e,t){const r=t?t():{};return r.actor=this.name,r}logTrace(e,r,n){const a=t.getContextLogger(e);a&&a.trace(r,this.getDefaultLogData(e,n))}logDebug(e,r,n){const a=t.getContextLogger(e);a&&a.debug(r,this.getDefaultLogData(e,n))}logInfo(e,r,n){const a=t.getContextLogger(e);a&&a.info(r,this.getDefaultLogData(e,n))}logWarn(e,r,n){const a=t.getContextLogger(e);a&&a.warn(r,this.getDefaultLogData(e,n))}logError(e,r,n){const a=t.getContextLogger(e);a&&a.error(r,this.getDefaultLogData(e,n))}logFatal(e,r,n){const a=t.getContextLogger(e);a&&a.fatal(r,this.getDefaultLogData(e,n))}},Ci}var qi,Ui={};function ki(){if(qi)return Ui;qi=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.Mediator=void 0;return Ui.Mediator=class e{constructor(e){Object.assign(this,e)}publish(e){const t=this.bus.publish(e);if(0===t.length)throw new Error(`No actors are able to reply to a message in the bus ${this.bus.name}`);return t}async mediateActor(e){return await this.mediateWith(e,this.publish(e))}async mediateTestable(e){return(await this.mediateActor(e)).mapAsync((t,r)=>t.runObservable(e,r))}async mediate(e){return(await this.mediateTestable(e)).getOrThrow()}constructFailureMessage(t,r){const n="\n        ";return`${this.bus.failMessage.replaceAll(/\$\{(.*?)\}/gu,(r,n)=>e.getObjectValue({action:t},n.split("."))||r)}\n    Error messages of failing actors:${n}${r.join(n)}`}static getObjectValue(t,r){return 0===r.length?t:t?e.getObjectValue(t[r[0]],r.slice(1)):void 0}},Ui}var Qi,Vi,Gi,$i,zi,Xi={};function Hi(){if(Qi)return Xi;Qi=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.TestResultFailed=Xi.TestResultPassed=Xi.failTest=Xi.passTestVoidWithSideData=Xi.passTestWithSideData=Xi.passTestVoid=Xi.passTest=void 0,Xi.passTest=function(t){return new e(t,void 0)},Xi.passTestVoid=function(){return new e(!0,void 0)},Xi.passTestWithSideData=function(t,r){return new e(t,r)},Xi.passTestVoidWithSideData=function(t){return new e(!0,t)},Xi.failTest=function(e){return new t(e)};class e{constructor(e,t){this.value=e,this.sideData=t}isPassed(){return!0}isFailed(){return!1}get(){return this.value}getOrThrow(){return this.value}getSideData(){return this.sideData}getFailMessage(){}map(t){return new e(t(this.value,this.sideData),this.sideData)}async mapAsync(t){return new e(await t(this.value,this.sideData),this.sideData)}}Xi.TestResultPassed=e;class t{constructor(e){this.failMessage=e}isPassed(){return!1}isFailed(){return!0}get(){}getOrThrow(){throw new Error(this.getFailMessage())}getSideData(){throw new Error(this.getFailMessage())}getFailMessage(){return this.failMessage}map(){return this}async mapAsync(){return this}}return Xi.TestResultFailed=t,Xi}function Ji(){return Vi||(Vi=1,e=rr,t=rr&&rr.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=rr&&rr.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(wi(),e),r(Ai(),e),r(xi(),e),r(Mi(),e),r(Ri(),e),r(Bi(),e),r(ki(),e),r(Hi(),e)),rr;var e,t,r}function Ki(){if(Gi)return tr;Gi=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.ActorInit=void 0;const e=Ji();let t=class extends e.Actor{constructor(e){super(e)}};return tr.ActorInit=t,tr}function Yi(){return $i||($i=1,e=er,t=er&&er.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=er&&er.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Ki(),e)),er;var e,t,r}function Wi(){if(zi)return Zt;zi=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.ActorInitQueryBase=void 0;const e=Yi(),t=Ji();let r=class extends e.ActorInit{async test(e){return(0,t.passTestVoid)()}async run(e){throw new Error("ActorInitSparql#run is not supported in the browser.")}};return Zt.ActorInitQueryBase=r,Zt}var Zi,es={};function ts(){if(Zi)return es;Zi=1,Object.defineProperty(es,"__esModule",{value:!0}),es.ActorInitQuery=void 0;const e=Wi();"undefined"==typeof process&&(globalThis.process=i());class t extends e.ActorInitQueryBase{}return es.ActorInitQuery=t,es}var rs,ns,as,os,is={},ss={},us={};function cs(){if(rs)return us;rs=1,Object.defineProperty(us,"__esModule",{value:!0}),us.KeysStatistics=us.KeysRdfJoin=us.KeysMergeBindingsContext=us.KeysRdfUpdateQuads=us.KeysQuerySourceIdentify=us.KeysRdfParseHtmlScript=us.KeysRdfParseJsonLd=us.KeysQueryOperation=us.KeysExpressionEvaluator=us.KeysInitQuery=us.KeysHttpProxy=us.KeysHttpMemento=us.KeysHttpWayback=us.KeysHttp=us.KeysCore=void 0;const e=Ji();return us.KeysCore={log:e.CONTEXT_KEY_LOGGER},us.KeysHttp={includeCredentials:new e.ActionContextKey("@comunica/bus-http:include-credentials"),auth:new e.ActionContextKey("@comunica/bus-http:auth"),fetch:new e.ActionContextKey("@comunica/bus-http:fetch"),httpTimeout:new e.ActionContextKey("@comunica/bus-http:http-timeout"),httpBodyTimeout:new e.ActionContextKey("@comunica/bus-http:http-body-timeout"),httpRetryCount:new e.ActionContextKey("@comunica/bus-http:http-retry-count"),httpRetryDelayFallback:new e.ActionContextKey("@comunica/bus-http:http-retry-delay-fallback"),httpRetryDelayLimit:new e.ActionContextKey("@comunica/bus-http:http-retry-delay-limit"),httpRetryStatusCodes:new e.ActionContextKey("@comunica/bus-http:http-retry-status-codes")},us.KeysHttpWayback={recoverBrokenLinks:new e.ActionContextKey("@comunica/bus-http:recover-broken-links")},us.KeysHttpMemento={datetime:new e.ActionContextKey("@comunica/actor-http-memento:datetime")},us.KeysHttpProxy={httpProxyHandler:new e.ActionContextKey("@comunica/actor-http-proxy:httpProxyHandler")},us.KeysInitQuery={querySourcesUnidentified:new e.ActionContextKey("@comunica/actor-init-query:querySourcesUnidentified"),initialBindings:new e.ActionContextKey("@comunica/actor-init-query:initialBindings"),queryFormat:new e.ActionContextKey("@comunica/actor-init-query:queryFormat"),graphqlSingularizeVariables:new e.ActionContextKey("@comunica/actor-init-query:singularizeVariables"),lenient:new e.ActionContextKey("@comunica/actor-init-query:lenient"),queryString:new e.ActionContextKey("@comunica/actor-init-query:queryString"),query:new e.ActionContextKey("@comunica/actor-init-query:query"),baseIRI:new e.ActionContextKey("@comunica/actor-init-query:baseIRI"),fileBaseIRI:new e.ActionContextKey("@comunica/actor-init-query:fileBaseIRI"),functionArgumentsCache:new e.ActionContextKey("@comunica/actor-init-query:functionArgumentsCache"),queryTimestamp:new e.ActionContextKey("@comunica/actor-init-query:queryTimestamp"),queryTimestampHighResolution:new e.ActionContextKey("@comunica/actor-init-query:queryTimestampHighResolution"),extensionFunctionCreator:new e.ActionContextKey("@comunica/actor-init-query:extensionFunctionCreator"),extensionFunctions:new e.ActionContextKey("@comunica/actor-init-query:extensionFunctions"),extensionFunctionsAlwaysPushdown:new e.ActionContextKey("@comunica/actor-init-query:extensionFunctionsAlwaysPushdown"),cliArgsHandlers:new e.ActionContextKey("@comunica/actor-init-query:cliArgsHandlers"),explain:new e.ActionContextKey("@comunica/actor-init-query:explain"),physicalQueryPlanLogger:new e.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanLogger"),physicalQueryPlanNode:new e.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanNode"),jsonLdContext:new e.ActionContextKey("@context"),invalidateCache:new e.ActionContextKey("@comunica/actor-init-query:invalidateCache"),dataFactory:new e.ActionContextKey("@comunica/actor-init-query:dataFactory"),distinctConstruct:new e.ActionContextKey("@comunica/actor-init-query:distinctConstruct")},us.KeysExpressionEvaluator={extensionFunctionCreator:new e.ActionContextKey("@comunica/utils-expression-evaluator:extensionFunctionCreator"),superTypeProvider:new e.ActionContextKey("@comunica/utils-expression-evaluator:superTypeProvider"),defaultTimeZone:new e.ActionContextKey("@comunica/utils-expression-evaluator:defaultTimeZone"),actionContext:new e.ActionContextKey("@comunica/utils-expression-evaluator:actionContext")},us.KeysQueryOperation={operation:new e.ActionContextKey("@comunica/bus-query-operation:operation"),joinLeftMetadata:new e.ActionContextKey("@comunica/bus-query-operation:joinLeftMetadata"),joinRightMetadatas:new e.ActionContextKey("@comunica/bus-query-operation:joinRightMetadatas"),joinBindings:new e.ActionContextKey("@comunica/bus-query-operation:joinBindings"),readOnly:new e.ActionContextKey("@comunica/bus-query-operation:readOnly"),isPathArbitraryLengthDistinctKey:new e.ActionContextKey("@comunica/bus-query-operation:isPathArbitraryLengthDistinct"),limitIndicator:new e.ActionContextKey("@comunica/bus-query-operation:limitIndicator"),unionDefaultGraph:new e.ActionContextKey("@comunica/bus-query-operation:unionDefaultGraph"),querySources:new e.ActionContextKey("@comunica/bus-query-operation:querySources")},us.KeysRdfParseJsonLd={documentLoader:new e.ActionContextKey("@comunica/actor-rdf-parse-jsonld:documentLoader"),strictValues:new e.ActionContextKey("@comunica/actor-rdf-parse-jsonld:strictValues"),parserOptions:new e.ActionContextKey("@comunica/actor-rdf-parse-jsonld:parserOptions")},us.KeysRdfParseHtmlScript={processingHtmlScript:new e.ActionContextKey("@comunica/actor-rdf-parse-html-script:processingHtmlScript"),extractAllScripts:new e.ActionContextKey("extractAllScripts")},us.KeysQuerySourceIdentify={sourceIds:new e.ActionContextKey("@comunica/bus-query-source-identify:sourceIds"),hypermediaSourcesAggregatedStores:new e.ActionContextKey("@comunica/bus-query-source-identify:hypermediaSourcesAggregatedStores"),traverse:new e.ActionContextKey("@comunica/bus-query-source-identify:traverse")},us.KeysRdfUpdateQuads={destination:new e.ActionContextKey("@comunica/bus-rdf-update-quads:destination")},us.KeysMergeBindingsContext={sourcesBinding:new e.ActionContextKey("@comunica/bus-merge-bindings-context:sourcesBinding")},us.KeysRdfJoin={lastPhysicalJoin:new e.ActionContextKey("@comunica/bus-rdf-join:lastPhysicalJoin")},us.KeysStatistics={discoveredLinks:new e.ActionContextKey("@comunica/statistic:discoveredLinks"),dereferencedLinks:new e.ActionContextKey("@comunica/statistic:dereferencedLinks"),intermediateResults:new e.ActionContextKey("@comunica/statistic:intermediateResults")},us}function ls(){return ns||(ns=1,e=ss,t=ss&&ss.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=ss&&ss.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(cs(),e)),ss;var e,t,r}function ps(){if(as)return is;as=1,Object.defineProperty(is,"__esModule",{value:!0}),is.QueryEngineBase=void 0;const e=ls(),t=Ji();return is.QueryEngineBase=class r{constructor(e){this.actorInitQuery=e}async queryBindings(e,t){return this.queryOfType(e,t,"bindings")}async queryQuads(e,t){return this.queryOfType(e,t,"quads")}async queryBoolean(e,t){return this.queryOfType(e,t,"boolean")}async queryVoid(e,t){return this.queryOfType(e,t,"void")}async queryOfType(e,t,r){const n=await this.query(e,t);if(n.resultType===r)return await n.execute();throw new Error(`Query result type '${r}' was expected, while '${n.resultType}' was found.`)}async query(e,t){const r=await this.queryOrExplain(e,t);if("explain"in r)throw new Error("Tried to explain a query when in query-only mode");return r}async explain(e,t,r){t.explain=r;return await this.queryOrExplain(e,t)}async queryOrExplain(n,a){const o=t.ActionContext.ensureActionContext(a);o.get(e.KeysInitQuery.invalidateCache)&&await this.invalidateHttpCache();const{result:i}=await this.actorInitQuery.mediatorQueryProcess.mediate({query:n,context:o});return"explain"in i?i:r.internalToFinalResult(i)}async getResultMediaTypes(e){return e=t.ActionContext.ensureActionContext(e),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeCombiner.mediate({context:e,mediaTypes:!0})).mediaTypes}async getResultMediaTypeFormats(e){return e=t.ActionContext.ensureActionContext(e),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeFormatCombiner.mediate({context:e,mediaTypeFormats:!0})).mediaTypeFormats}async resultToString(e,n,a){if(a=t.ActionContext.ensureActionContext(a),!n)switch(e.resultType){case"bindings":n="application/json";break;case"quads":n="application/trig";break;default:n="simple"}const o={...await r.finalToInternalResult(e),context:a};return(await this.actorInitQuery.mediatorQueryResultSerialize.mediate({context:a,handle:o,handleMediaType:n})).handle}invalidateHttpCache(e,r){return r=t.ActionContext.ensureActionContext(r),this.actorInitQuery.mediatorHttpInvalidate.mediate({url:e,context:r})}static internalToFinalResult(e){switch(e.type){case"bindings":return{resultType:"bindings",execute:async()=>e.bindingsStream,metadata:async()=>{const t=await e.metadata();return t.variables=t.variables.map(e=>e.variable),t},context:e.context};case"quads":return{resultType:"quads",execute:async()=>e.quadStream,metadata:async()=>await e.metadata(),context:e.context};case"boolean":return{resultType:"boolean",execute:async()=>e.execute(),context:e.context};case"void":return{resultType:"void",execute:async()=>e.execute(),context:e.context}}}static async finalToInternalResult(e){switch(e.resultType){case"bindings":return{type:"bindings",bindingsStream:await e.execute(),metadata:async()=>{const t=await e.metadata();return t.variables=t.variables.map(e=>({variable:e,canBeUndef:!1})),t}};case"quads":return{type:"quads",quadStream:await e.execute(),metadata:async()=>await e.metadata()};case"boolean":return{type:"boolean",execute:()=>e.execute()};case"void":return{type:"void",execute:()=>e.execute()}}}},is}function ds(){return os||(os=1,function(e){var t=Wt&&Wt.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Wt&&Wt.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.QueryEngineBase=void 0,r(Wi(),e),r(ts(),e);var n=ps();Object.defineProperty(e,"QueryEngineBase",{enumerable:!0,get:function(){return n.QueryEngineBase}})}(Wt)),Wt}var fs,hs={},ys={},gs={},ms={};function bs(){return fs||(fs=1,Object.defineProperty(ms,"__esModule",{value:!0})),ms}var vs,_s={};function Os(){return vs||(vs=1,Object.defineProperty(_s,"__esModule",{value:!0})),_s}var Ts,ws={};function Ss(){return Ts||(Ts=1,Object.defineProperty(ws,"__esModule",{value:!0})),ws}var js,As={};function Fs(){return js||(js=1,Object.defineProperty(As,"__esModule",{value:!0})),As}var Es,xs={};function Ps(){return Es||(Es=1,Object.defineProperty(xs,"__esModule",{value:!0})),xs}var Ds,Ms={};function Ns(){return Ds||(Ds=1,Object.defineProperty(Ms,"__esModule",{value:!0})),Ms}var Is,Rs={};function Ls(){return Is||(Is=1,Object.defineProperty(Rs,"__esModule",{value:!0})),Rs}var Cs,Bs={};function qs(){return Cs||(Cs=1,Object.defineProperty(Bs,"__esModule",{value:!0})),Bs}var Us,ks={};function Qs(){return Us||(Us=1,Object.defineProperty(ks,"__esModule",{value:!0})),ks}var Vs,Gs={};function $s(){return Vs||(Vs=1,Object.defineProperty(Gs,"__esModule",{value:!0})),Gs}var zs,Xs={};function Hs(){return zs||(zs=1,Object.defineProperty(Xs,"__esModule",{value:!0})),Xs}var Js,Ks={};function Ys(){return Js||(Js=1,Object.defineProperty(Ks,"__esModule",{value:!0})),Ks}var Ws,Zs={};function eu(){return Ws||(Ws=1,Object.defineProperty(Zs,"__esModule",{value:!0})),Zs}var tu,ru={};function nu(){return tu||(tu=1,Object.defineProperty(ru,"__esModule",{value:!0})),ru}var au,ou={};function iu(){return au||(au=1,Object.defineProperty(ou,"__esModule",{value:!0})),ou}var su,uu={};function cu(){return su||(su=1,Object.defineProperty(uu,"__esModule",{value:!0})),uu}var lu,pu={};function du(){return lu||(lu=1,Object.defineProperty(pu,"__esModule",{value:!0})),pu}var fu,hu={};function yu(){return fu||(fu=1,Object.defineProperty(hu,"__esModule",{value:!0})),hu}var gu,mu={};function bu(){return gu||(gu=1,Object.defineProperty(mu,"__esModule",{value:!0})),mu}var vu,_u={};function Ou(){if(vu)return _u;vu=1,Object.defineProperty(_u,"__esModule",{value:!0}),_u.Logger=void 0;let e=class e{static getLevelOrdinal(t){return e.LEVELS[t]}};return _u.Logger=e,e.LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},_u}var Tu,wu,Su,ju,Au={};function Fu(){return Tu||(Tu=1,Object.defineProperty(Au,"__esModule",{value:!0}),Au.ExpressionType=void 0,function(e){e.Aggregate="aggregate",e.Existence="existence",e.Operator="operator",e.Term="term",e.Variable="variable"}(e||(Au.ExpressionType=e={}))),Au;var e}function Eu(){return wu||(wu=1,e=gs,t=gs&&gs.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=gs&&gs.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(bs(),e),r(Os(),e),r(Ss(),e),r(Fs(),e),r(Ps(),e),r(Ns(),e),r(Ls(),e),r(qs(),e),r(Qs(),e),r($s(),e),r(Hs(),e),r(Ys(),e),r(eu(),e),r(nu(),e),r(iu(),e),r(cu(),e),r(du(),e),r(yu(),e),r(bu(),e),r(Ou(),e),r(Fu(),e)),gs;var e,t,r}function xu(){if(Su)return ys;Su=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.LoggerVoid=void 0;const e=Eu();let t=class extends e.Logger{debug(){}error(){}fatal(){}info(){}trace(){}warn(){}};return ys.LoggerVoid=t,ys}function Pu(){return ju||(ju=1,e=hs,t=hs&&hs.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=hs&&hs.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(xu(),e)),hs;var e,t,r}var Du,Mu={},Nu={};function Iu(){if(Du)return Nu;Du=1,Object.defineProperty(Nu,"__esModule",{value:!0}),Nu.MediatorFunctionFactory=Nu.ActorFunctionFactory=void 0;const e=Ji();let t=class extends e.Actor{constructor(e){super(e)}};Nu.ActorFunctionFactory=t;class r extends e.Mediator{}return Nu.MediatorFunctionFactory=r,Nu}var Ru,Lu={};function Cu(){if(Ru)return Lu;Ru=1,Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.ActorFunctionFactoryDedicated=void 0;const e=Ji(),t=Iu();let r=class extends t.ActorFunctionFactory{constructor(e){super(e)}async test(t){return!this.functionNames.includes(t.functionName)||!this.termFunction&&t.requireTermExpression?(0,e.failTest)(`Actor ${this.name} can not provide implementation for "${t.functionName}", only for ${this.termFunction?"":"non-termExpression "}${this.functionNames.join(" and ")}.`):(0,e.passTestVoid)()}};return Lu.ActorFunctionFactoryDedicated=r,Lu}var Bu,qu={};function Uu(){if(Bu)return qu;Bu=1,Object.defineProperty(qu,"__esModule",{value:!0}),qu.BusFunctionFactory=void 0;const e=Ji();let t=class extends e.BusIndexed{constructor(e){super({...e,actorIdentifierFields:["functionNames"],actionIdentifierFields:["functionName"]})}};return qu.BusFunctionFactory=t,qu}var ku,Qu={},Vu={},Gu={},$u={},zu={},Xu={},Hu={};function Ju(){if(ku)return Hu;ku=1,Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.BlankNode=void 0;return Hu.BlankNode=class{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}},Hu}var Ku,Yu={},Wu={};function Zu(){if(Ku)return Wu;Ku=1,Object.defineProperty(Wu,"__esModule",{value:!0}),Wu.DefaultGraph=void 0;class e{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&"DefaultGraph"===e.termType}}return Wu.DefaultGraph=e,e.INSTANCE=new e,Wu}var ec,tc,rc={},nc={};function ac(){if(ec)return nc;ec=1,Object.defineProperty(nc,"__esModule",{value:!0}),nc.NamedNode=void 0;return nc.NamedNode=class{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&"NamedNode"===e.termType&&e.value===this.value}},nc}function oc(){if(tc)return rc;tc=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.Literal=void 0;const e=ac();class t{constructor(e,r){this.termType="Literal",this.value=e,"string"==typeof r?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(e){return!!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&this.datatype.equals(e.datatype)}}return rc.Literal=t,t.RDF_LANGUAGE_STRING=new e.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new e.NamedNode("http://www.w3.org/2001/XMLSchema#string"),rc}var ic,sc={};function uc(){if(ic)return sc;ic=1,Object.defineProperty(sc,"__esModule",{value:!0}),sc.Quad=void 0;return sc.Quad=class{constructor(e,t,r,n){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=r,this.graph=n}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}},sc}var cc,lc,pc,dc,fc,hc={};function yc(){if(cc)return hc;cc=1,Object.defineProperty(hc,"__esModule",{value:!0}),hc.Variable=void 0;return hc.Variable=class{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&"Variable"===e.termType&&e.value===this.value}},hc}function gc(){return pc||(pc=1,e=Xu,t=Xu&&Xu.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Xu&&Xu.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Ju(),e),r(function(){if(lc)return Yu;lc=1,Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.DataFactory=void 0;const e=Ju(),t=Zu(),r=oc(),n=ac(),a=uc(),o=yc();let i=0;return Yu.DataFactory=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${i++}_`}namedNode(e){return new n.NamedNode(e)}blankNode(t){return new e.BlankNode(t||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new r.Literal(e,t)}variable(e){return new o.Variable(e)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(e,t,r,n){return new a.Quad(e,t,r,n||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(r.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}},Yu}(),e),r(Zu(),e),r(oc(),e),r(ac(),e),r(uc(),e),r(yc(),e)),Xu;var e,t,r}function mc(){return fc||(fc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.termToString=e.stringToTerm=e.stringQuadToQuad=e.quadToStringQuad=e.getLiteralValue=e.getLiteralType=e.getLiteralLanguage=void 0;const t=function(){if(dc)return zu;dc=1,Object.defineProperty(zu,"__esModule",{value:!0}),zu.stringQuadToQuad=zu.quadToStringQuad=zu.stringToTerm=zu.getLiteralLanguage=zu.getLiteralType=zu.getLiteralValue=zu.termToString=void 0;const e=new(gc().DataFactory);function t(e){if(e)switch(e.termType){case"NamedNode":case"DefaultGraph":return e.value;case"BlankNode":return"_:"+e.value;case"Literal":const r=e;return'"'+r.value+'"'+(r.datatype&&"http://www.w3.org/2001/XMLSchema#string"!==r.datatype.value&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"!==r.datatype.value?"^^"+r.datatype.value:"")+(r.language?"@"+r.language:"");case"Quad":return`<<${t(e.subject)} ${t(e.predicate)} ${t(e.object)}${"DefaultGraph"===e.graph.termType?"":" "+t(e.graph)}>>`;case"Variable":return"?"+e.value}}function r(e){const t=/^"([^]*)"/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]}function n(e){const t=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]||(t[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function a(e){const t=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]?t[1].toLowerCase():""}function o(t,i){if(i=i||e,!t||!t.length)return i.defaultGraph();switch(t[0]){case"_":return i.blankNode(t.substr(2));case"?":if(!i.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return i.variable(t.substr(1));case'"':const e=a(t),s=i.namedNode(n(t));return i.literal(r(t),e||s);default:if("<"===t[0]&&t.length>4&&"<"===t[1]&&">"===t[t.length-1]&&">"===t[t.length-2]){const e=t.slice(2,-2).trim();let r=[],n=0,a=0,s=!1;for(let o=0;o<e.length;o++){const i=e[o];if("<"===i&&n++,">"===i){if(0===n)throw new Error("Found closing tag without opening tag in "+t);n--}if('"'===i){let t=!1,r=o;for(;r-- >0&&"\\"===e[r];)t=!t;t||(s=!s)}if(" "===i&&!s&&0===n){for(r.push(e.slice(a,o));" "===e[o+1];)o+=1;a=o+1}}if(0!==n)throw new Error("Found opening tag without closing tag in "+t);if(r.push(e.slice(a,e.length)),3!==r.length&&4!==r.length)throw new Error("Nested quad syntax error "+t);return r=r.map(e=>e.startsWith("<")&&!e.includes(" ")?e.slice(1,-1):e),i.quad(o(r[0]),o(r[1]),o(r[2]),r[3]?o(r[3]):void 0)}return i.namedNode(t)}}return zu.termToString=t,zu.getLiteralValue=r,zu.getLiteralType=n,zu.getLiteralLanguage=a,zu.stringToTerm=o,zu.quadToStringQuad=function(e){return{subject:t(e.subject),predicate:t(e.predicate),object:t(e.object),graph:t(e.graph)}},zu.stringQuadToQuad=function(t,r){return(r=r||e).quad(o(t.subject,r),o(t.predicate,r),o(t.object,r),o(t.graph,r))},zu}();Object.defineProperty(e,"getLiteralLanguage",{enumerable:!0,get:function(){return t.getLiteralLanguage}}),Object.defineProperty(e,"getLiteralType",{enumerable:!0,get:function(){return t.getLiteralType}}),Object.defineProperty(e,"getLiteralValue",{enumerable:!0,get:function(){return t.getLiteralValue}}),Object.defineProperty(e,"quadToStringQuad",{enumerable:!0,get:function(){return t.quadToStringQuad}}),Object.defineProperty(e,"stringQuadToQuad",{enumerable:!0,get:function(){return t.stringQuadToQuad}}),Object.defineProperty(e,"stringToTerm",{enumerable:!0,get:function(){return t.stringToTerm}}),Object.defineProperty(e,"termToString",{enumerable:!0,get:function(){return t.termToString}})}($u)),$u}var bc,vc,_c={},Oc={};var Tc,wc,Sc={},jc={};function Ac(){return wc||(wc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.termToString=e.stringToTerm=e.stringQuadToQuad=e.quadToStringQuad=e.getLiteralValue=e.getLiteralType=e.getLiteralDirection=e.getLiteralLanguage=void 0;const t=function(){if(Tc)return jc;Tc=1,Object.defineProperty(jc,"__esModule",{value:!0}),jc.termToString=t,jc.getLiteralValue=r,jc.getLiteralType=n,jc.getLiteralLanguage=o,jc.getLiteralDirection=i,jc.stringToTerm=s,jc.quadToStringQuad=function(e){return{subject:t(e.subject),predicate:t(e.predicate),object:t(e.object),graph:t(e.graph)}},jc.stringQuadToQuad=function(t,r){return(r=r||e).quad(s(t.subject,r),s(t.predicate,r),s(t.object,r),s(t.graph,r))};const e=new(a().DataFactory);function t(e){if(e)switch(e.termType){case"NamedNode":case"DefaultGraph":return e.value;case"BlankNode":return"_:"+e.value;case"Literal":const r=e;return'"'+r.value+'"'+(r.datatype&&"http://www.w3.org/2001/XMLSchema#string"!==r.datatype.value&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"!==r.datatype.value&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"!==r.datatype.value?"^^"+r.datatype.value:"")+(r.language?"@"+r.language:"")+(r.direction?"--"+r.direction:"");case"Quad":return`<<${t(e.subject)} ${t(e.predicate)} ${t(e.object)}${"DefaultGraph"===e.graph.termType?"":" "+t(e.graph)}>>`;case"Variable":return"?"+e.value}}function r(e){const t=/^"([^]*)"/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]}function n(e){const t=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]||(t[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function o(e){const t=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");if(t[1]){let e=t[1].toLowerCase();const r=e.indexOf("--");return r>=0&&(e=e.slice(0,r)),e}return""}function i(e){const t=e.indexOf("--",e.lastIndexOf('"'));if(t>=0){const r=e.slice(t+2,e.length);if("ltr"===r||"rtl"===r)return r;throw new Error(e+" is not a literal with a valid direction")}return""}function s(t,a){if(a=a||e,!t||!t.length)return a.defaultGraph();switch(t[0]){case"_":return a.blankNode(t.substr(2));case"?":if(!a.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return a.variable(t.substr(1));case'"':const e=o(t),u=i(t),c=a.namedNode(n(t));return a.literal(r(t),e?{language:e,direction:u}:c);default:if("<"===t[0]&&t.length>4&&"<"===t[1]&&">"===t[t.length-1]&&">"===t[t.length-2]){const e=t.slice(2,-2).trim();let r=[],n=0,o=0,i=!1;for(let a=0;a<e.length;a++){const s=e[a];if("<"===s&&n++,">"===s){if(0===n)throw new Error("Found closing tag without opening tag in "+t);n--}if('"'===s){let t=!1,r=a;for(;r-- >0&&"\\"===e[r];)t=!t;t||(i=!i)}if(" "===s&&!i&&0===n){for(r.push(e.slice(o,a));" "===e[a+1];)a+=1;o=a+1}}if(0!==n)throw new Error("Found opening tag without closing tag in "+t);if(r.push(e.slice(o,e.length)),3!==r.length&&4!==r.length)throw new Error("Nested quad syntax error "+t);return r=r.map(e=>e.startsWith("<")&&!e.includes(" ")?e.slice(1,-1):e),a.quad(s(r[0]),s(r[1]),s(r[2]),r[3]?s(r[3]):void 0)}return a.namedNode(t)}}return jc}();Object.defineProperty(e,"getLiteralLanguage",{enumerable:!0,get:function(){return t.getLiteralLanguage}}),Object.defineProperty(e,"getLiteralDirection",{enumerable:!0,get:function(){return t.getLiteralDirection}}),Object.defineProperty(e,"getLiteralType",{enumerable:!0,get:function(){return t.getLiteralType}}),Object.defineProperty(e,"getLiteralValue",{enumerable:!0,get:function(){return t.getLiteralValue}}),Object.defineProperty(e,"quadToStringQuad",{enumerable:!0,get:function(){return t.quadToStringQuad}}),Object.defineProperty(e,"stringQuadToQuad",{enumerable:!0,get:function(){return t.stringQuadToQuad}}),Object.defineProperty(e,"stringToTerm",{enumerable:!0,get:function(){return t.stringToTerm}}),Object.defineProperty(e,"termToString",{enumerable:!0,get:function(){return t.termToString}})}(Sc)),Sc}var Fc,Ec={};function xc(){return Fc||(Fc=1,e=Ec,Object.defineProperty(e,"__esModule",{value:!0}),e.expressionTypes=e.types=void 0,(t=e.types||(e.types={})).ALT="alt",t.ASK="ask",t.BGP="bgp",t.CONSTRUCT="construct",t.DESCRIBE="describe",t.DISTINCT="distinct",t.EXPRESSION="expression",t.EXTEND="extend",t.FILTER="filter",t.FROM="from",t.GRAPH="graph",t.GROUP="group",t.INV="inv",t.JOIN="join",t.LEFT_JOIN="leftjoin",t.LINK="link",t.MINUS="minus",t.NOP="nop",t.NPS="nps",t.ONE_OR_MORE_PATH="OneOrMorePath",t.ORDER_BY="orderby",t.PATH="path",t.PATTERN="pattern",t.PROJECT="project",t.REDUCED="reduced",t.SEQ="seq",t.SERVICE="service",t.SLICE="slice",t.UNION="union",t.VALUES="values",t.ZERO_OR_MORE_PATH="ZeroOrMorePath",t.ZERO_OR_ONE_PATH="ZeroOrOnePath",t.COMPOSITE_UPDATE="compositeupdate",t.DELETE_INSERT="deleteinsert",t.LOAD="load",t.CLEAR="clear",t.CREATE="create",t.DROP="drop",t.ADD="add",t.MOVE="move",t.COPY="copy",(r=e.expressionTypes||(e.expressionTypes={})).AGGREGATE="aggregate",r.EXISTENCE="existence",r.NAMED="named",r.OPERATOR="operator",r.TERM="term",r.WILDCARD="wildcard"),Ec;var e,t,r}var Pc,Dc,Mc,Nc,Ic,Rc={},Lc={};function Cc(){if(Pc)return Lc;Pc=1;let e=class{constructor(){return t||this}equals(e){return e&&this.termType===e.termType}};Object.defineProperty(e.prototype,"value",{enumerable:!0,value:"*"}),Object.defineProperty(e.prototype,"termType",{enumerable:!0,value:"Wildcard"});var t=new e;return Lc.Wildcard=e,Lc}function Bc(){if(Mc)return Dc;Mc=1;var e=function(){var e=function(e,t,r,n){for(r=r||{},n=e.length;n--;r[e[n]]=t);return r},t=[6,12,13,15,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],r=[2,247],n=[100,110,113,115,116,123,126,131,329,330,331,332,333],a=[2,409],o=[1,18],i=[1,27],s=[13,16,45,197,224,229,308],u=[28,29,53],c=[28,53],l=[1,42],p=[1,45],d=[1,41],f=[1,44],h=[123,126],y=[1,67],g=[39,45,87],m=[13,16,45,197,224,308],b=[1,87],v=[2,281],_=[1,86],O=[13,16,45,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],T=[6,28,29,53,63,70,73,81,83,85],w=[6,13,16,28,29,53,63,70,73,81,83,85,87,308],S=[6,13,16,28,29,45,53,63,70,73,81,82,83,85,87,89,197,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314],j=[6,13,16,28,29,31,39,45,47,48,53,63,70,73,81,82,83,85,87,89,109,112,121,123,126,128,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,337,338,340,341,342,343,344,345,346],A=[13,16,308],F=[112,132,327,334],E=[13,16,112,132,308],x=[1,111],P=[1,117],D=[112,132,327,328,334],M=[13,16,112,132,308,328],N=[28,29,45,53,87],I=[1,138],R=[1,151],L=[1,128],C=[1,127],B=[1,129],q=[1,140],U=[1,141],k=[1,142],Q=[1,143],V=[1,144],G=[1,145],$=[1,147],z=[1,148],X=[2,457],H=[1,158],J=[1,159],K=[1,160],Y=[1,152],W=[1,153],Z=[1,156],ee=[1,171],te=[1,172],re=[1,173],ne=[1,174],ae=[1,175],oe=[1,176],ie=[1,167],se=[1,168],ue=[1,169],ce=[1,170],le=[1,157],pe=[1,166],de=[1,161],fe=[1,162],he=[1,163],ye=[1,164],ge=[1,165],me=[6,13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],be=[1,195],ve=[6,31,73,81,83,85],_e=[2,285],Oe=[1,199],Te=[1,201],we=[6,31,70,73,81,83,85],Se=[2,283],je=[1,207],Ae=[1,218],Fe=[1,223],Ee=[1,219],xe=[1,225],Pe=[1,226],De=[1,224],Me=[6,63,70,73,81,83,85],Ne=[1,236],Ie=[2,334],Re=[1,243],Le=[1,241],Ce=[6,193],Be=[2,349],qe=[2,339],Ue=[28,128],ke=[47,48,193,272],Qe=[47,48,193,242,272],Ve=[47,48,193,242,246,272],Ge=[47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,341,342,343,344,345,346],$e=[39,47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,338,341,342,343,344,345,346],ze=[1,271],Xe=[1,270],He=[6,13,16,29,31,39,45,47,48,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],Je=[1,281],Ke=[1,280],Ye=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],We=[45,89],Ze=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],et=[13,16,31,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],tt=[31,89],rt=[48,87],nt=[6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338],at=[6,13,16,39,45,48,82,87,89,231,263,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338,340],ot=[1,313],it=[6,85],st=[6,31,81,83,85],ut=[2,361],ct=[2,353],lt=[1,343],pt=[31,112,335],dt=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],ft=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335],ht=[6,109,193],yt=[31,112],gt=[13,16,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],mt=[1,390],bt=[1,391],vt=[13,16,87,197,308,314],_t=[13,16,39,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],Ot=[1,417],Tt=[1,418],wt=[13,16,48,197,229,308],St=[6,31,85],jt=[6,13,16,31,45,73,81,83,85,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],At=[6,13,16,29,31,45,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,231,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,346,347,348,349,350,351],Ft=[29,31,85,112,159,160,161,163,164],Et=[1,443],xt=[1,444],Pt=[1,449],Dt=[31,112,193,232,318,335],Mt=[13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Nt=[13,16,31,45,48,82,87,89,112,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],It=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Rt=[13,16,31,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Lt=[31,45],Ct=[1,507],Bt=[1,508],qt=[6,13,16,29,31,39,45,47,48,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,336,338,341,342,343,344,345,346,347,348,349,350,351],Ut=[29,31,85,112,159,160,161,163,164,335],kt=[6,13,16,31,45,70,73,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],Qt=[13,16,31,45,48,82,87,89,112,193,197,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Vt=[2,352],Gt=[13,16,197,308,314],$t=[1,565],zt=[6,13,16,31,45,76,78,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],Xt=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Ht=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],Jt=[13,16,87,308],Kt=[2,364],Yt=[29,31,85,112,159,160,161,163,164,193,232,318,335],Wt=[31,112,193,232,272,318,335],Zt=[2,359],er=[13,16,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],tr=[29,31,85,112,159,160,161,163,164,193,232,272,318,335],rr=[13,16,31,45,82,87,89,112,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],nr=[2,347],ar={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Query:7,Qry:8,Query_option0:9,Prologue_repetition0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectClauseWildcard:17,Qry_repetition0:18,WhereClause:19,SolutionModifierNoGroup:20,SelectClauseVars:21,Qry_repetition1:22,SolutionModifier:23,CONSTRUCT:24,ConstructTemplate:25,Qry_repetition2:26,Qry_repetition3:27,WHERE:28,"{":29,Qry_option0:30,"}":31,DESCRIBE:32,Qry_group0:33,Qry_repetition4:34,Qry_option1:35,ASK:36,Qry_repetition5:37,SelectClauseBase:38,"*":39,SelectClauseVars_repetition_plus0:40,SELECT:41,SelectClauseBase_option0:42,SelectClauseItem:43,Var:44,"(":45,Expression:46,AS:47,")":48,SubSelect:49,SubSelect_option0:50,SubSelect_option1:51,DatasetClause:52,FROM:53,DatasetClause_option0:54,iri:55,WhereClause_option0:56,GroupGraphPattern:57,SolutionModifier_option0:58,SolutionModifierNoGroup_option0:59,SolutionModifierNoGroup_option1:60,SolutionModifierNoGroup_option2:61,GroupClause:62,GROUP:63,BY:64,GroupClause_repetition_plus0:65,GroupCondition:66,BuiltInCall:67,FunctionCall:68,HavingClause:69,HAVING:70,HavingClause_repetition_plus0:71,OrderClause:72,ORDER:73,OrderClause_repetition_plus0:74,OrderCondition:75,ASC:76,BrackettedExpression:77,DESC:78,Constraint:79,LimitOffsetClauses:80,LIMIT:81,INTEGER:82,OFFSET:83,ValuesClause:84,VALUES:85,InlineData:86,VAR:87,InlineData_repetition0:88,NIL:89,InlineData_repetition1:90,InlineData_repetition_plus2:91,InlineData_repetition3:92,DataBlock:93,DataBlockValueList:94,DataBlockValueList_repetition_plus0:95,Update:96,Update_repetition0:97,Update1:98,Update_option0:99,LOAD:100,Update1_option0:101,Update1_option1:102,Update1_group0:103,Update1_option2:104,GraphRefAll:105,Update1_group1:106,Update1_option3:107,GraphOrDefault:108,TO:109,CREATE:110,Update1_option4:111,GRAPH:112,INSERTDATA:113,QuadPattern:114,DELETEDATA:115,DELETEWHERE:116,Update1_option5:117,InsertDeleteClause:118,Update1_repetition0:119,IntoGraphClause:120,INTO:121,GraphRef:122,DELETE:123,InsertDeleteClause_option0:124,InsertClause:125,INSERT:126,UsingClause:127,USING:128,UsingClause_option0:129,WithClause:130,WITH:131,DEFAULT:132,GraphOrDefault_option0:133,GraphRefAll_group0:134,Quads:135,Quads_option0:136,Quads_repetition0:137,QuadsNotTriples:138,VarOrIri:139,QuadsNotTriples_option0:140,QuadsNotTriples_option1:141,QuadsNotTriples_option2:142,TriplesTemplate:143,TriplesTemplate_repetition0:144,TriplesSameSubject:145,TriplesTemplate_option0:146,GroupGraphPatternSub:147,GroupGraphPatternSub_option0:148,GroupGraphPatternSub_repetition0:149,GroupGraphPatternSubTail:150,GraphPatternNotTriples:151,GroupGraphPatternSubTail_option0:152,GroupGraphPatternSubTail_option1:153,TriplesBlock:154,TriplesBlock_repetition0:155,TriplesSameSubjectPath:156,TriplesBlock_option0:157,GroupOrUnionGraphPattern:158,OPTIONAL:159,MINUS:160,SERVICE:161,GraphPatternNotTriples_option0:162,FILTER:163,BIND:164,InlineDataOneVar:165,InlineDataFull:166,InlineDataOneVar_repetition0:167,InlineDataFull_repetition0:168,InlineDataFull_repetition_plus1:169,InlineDataFull_repetition2:170,DataBlockValue:171,Literal:172,QuotedTriple:173,UNDEF:174,GroupOrUnionGraphPattern_repetition0:175,ArgList:176,ArgList_option0:177,ArgList_repetition0:178,ExpressionList:179,ExpressionList_repetition0:180,ConstructTemplate_option0:181,ConstructTriples:182,ConstructTriples_repetition0:183,ConstructTriples_option0:184,VarOrTermOrQuotedTP:185,PropertyListNotEmpty:186,TriplesNode:187,PropertyList:188,PropertyList_option0:189,VerbObjectList:190,PropertyListNotEmpty_repetition0:191,SemiOptionalVerbObjectList:192,";":193,SemiOptionalVerbObjectList_option0:194,Verb:195,ObjectList:196,a:197,ObjectList_repetition0:198,Object:199,GraphNode:200,Object_option0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,O:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmptyTail:207,O_group0:208,ObjectListPath:209,ObjectListPath_repetition0:210,ObjectPath:211,GraphNodePath:212,ObjectPath_option0:213,Path:214,Path_repetition0:215,PathSequence:216,PathSequence_repetition0:217,PathEltOrInverse:218,PathElt:219,PathPrimary:220,PathElt_option0:221,PathEltOrInverse_option0:222,IriOrA:223,"!":224,PathNegatedPropertySet:225,PathOneInPropertySet:226,PathNegatedPropertySet_repetition0:227,PathNegatedPropertySet_option0:228,"^":229,TriplesNode_repetition_plus0:230,"[":231,"]":232,TriplesNodePath_repetition_plus0:233,VarOrTermOrQuotedTPExpr:234,VarOrTerm:235,GraphTerm:236,BlankNode:237,ConditionalOrExpression:238,ConditionalAndExpression:239,ConditionalOrExpression_repetition0:240,ConditionalOrExpressionTail:241,"||":242,RelationalExpression:243,ConditionalAndExpression_repetition0:244,ConditionalAndExpressionTail:245,"&&":246,NumericExpression:247,RelationalExpression_group0:248,RelationalExpression_option0:249,IN:250,MultiplicativeExpression:251,NumericExpression_repetition0:252,AdditiveExpressionTail:253,AdditiveExpressionTail_group0:254,NumericLiteralPositive:255,AdditiveExpressionTail_repetition0:256,NumericLiteralNegative:257,AdditiveExpressionTail_repetition1:258,UnaryExpression:259,MultiplicativeExpression_repetition0:260,MultiplicativeExpressionTail:261,MultiplicativeExpressionTail_group0:262,"+":263,PrimaryExpression:264,"-":265,ExprQuotedTP:266,Aggregate:267,FUNC_ARITY0:268,FUNC_ARITY1:269,FUNC_ARITY1_SPARQL_STAR:270,FUNC_ARITY2:271,",":272,FUNC_ARITY3:273,FUNC_ARITY3_SPARQL_STAR:274,BuiltInCall_group0:275,BOUND:276,BNODE:277,BuiltInCall_option0:278,EXISTS:279,COUNT:280,Aggregate_option0:281,Aggregate_group0:282,FUNC_AGGREGATE:283,Aggregate_option1:284,GROUP_CONCAT:285,Aggregate_option2:286,Aggregate_option3:287,GroupConcatSeparator:288,SEPARATOR:289,"=":290,String:291,LANGTAG:292,"^^":293,DECIMAL:294,DOUBLE:295,BOOLEAN:296,INTEGER_POSITIVE:297,DECIMAL_POSITIVE:298,DOUBLE_POSITIVE:299,INTEGER_NEGATIVE:300,DECIMAL_NEGATIVE:301,DOUBLE_NEGATIVE:302,STRING_LITERAL1:303,STRING_LITERAL2:304,STRING_LITERAL_LONG1:305,STRING_LITERAL_LONG2:306,PrefixedName:307,PNAME_LN:308,BLANK_NODE_LABEL:309,ANON:310,QuotedTP:311,"<<":312,qtSubjectOrObject:313,">>":314,DataValueTerm:315,AnnotationPattern:316,"{|":317,"|}":318,AnnotationPatternPath:319,ExprVarOrTerm:320,QueryOrUpdate_group0_option0:321,Prologue_repetition0_group0:322,Qry_group0_repetition_plus0:323,SelectClauseBase_option0_group0:324,DISTINCT:325,REDUCED:326,NAMED:327,SILENT:328,CLEAR:329,DROP:330,ADD:331,MOVE:332,COPY:333,ALL:334,".":335,UNION:336,"|":337,"/":338,PathElt_option0_group0:339,"?":340,"!=":341,"<":342,">":343,"<=":344,">=":345,NOT:346,CONCAT:347,COALESCE:348,SUBSTR:349,REGEX:350,REPLACE:351,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",24:"CONSTRUCT",28:"WHERE",29:"{",31:"}",32:"DESCRIBE",36:"ASK",39:"*",41:"SELECT",45:"(",47:"AS",48:")",53:"FROM",63:"GROUP",64:"BY",70:"HAVING",73:"ORDER",76:"ASC",78:"DESC",81:"LIMIT",82:"INTEGER",83:"OFFSET",85:"VALUES",87:"VAR",89:"NIL",100:"LOAD",109:"TO",110:"CREATE",112:"GRAPH",113:"INSERTDATA",115:"DELETEDATA",116:"DELETEWHERE",121:"INTO",123:"DELETE",126:"INSERT",128:"USING",131:"WITH",132:"DEFAULT",159:"OPTIONAL",160:"MINUS",161:"SERVICE",163:"FILTER",164:"BIND",174:"UNDEF",193:";",197:"a",224:"!",229:"^",231:"[",232:"]",242:"||",246:"&&",250:"IN",263:"+",265:"-",268:"FUNC_ARITY0",269:"FUNC_ARITY1",270:"FUNC_ARITY1_SPARQL_STAR",271:"FUNC_ARITY2",272:",",273:"FUNC_ARITY3",274:"FUNC_ARITY3_SPARQL_STAR",276:"BOUND",277:"BNODE",279:"EXISTS",280:"COUNT",283:"FUNC_AGGREGATE",285:"GROUP_CONCAT",289:"SEPARATOR",290:"=",292:"LANGTAG",293:"^^",294:"DECIMAL",295:"DOUBLE",296:"BOOLEAN",297:"INTEGER_POSITIVE",298:"DECIMAL_POSITIVE",299:"DOUBLE_POSITIVE",300:"INTEGER_NEGATIVE",301:"DECIMAL_NEGATIVE",302:"DOUBLE_NEGATIVE",303:"STRING_LITERAL1",304:"STRING_LITERAL2",305:"STRING_LITERAL_LONG1",306:"STRING_LITERAL_LONG2",308:"PNAME_LN",309:"BLANK_NODE_LABEL",310:"ANON",312:"<<",314:">>",317:"{|",318:"|}",325:"DISTINCT",326:"REDUCED",327:"NAMED",328:"SILENT",329:"CLEAR",330:"DROP",331:"ADD",332:"MOVE",333:"COPY",334:"ALL",335:".",336:"UNION",337:"|",338:"/",340:"?",341:"!=",342:"<",343:">",344:"<=",345:">=",346:"NOT",347:"CONCAT",348:"COALESCE",349:"SUBSTR",350:"REGEX",351:"REPLACE"},productions_:[0,[3,3],[7,2],[4,1],[11,2],[14,3],[8,4],[8,4],[8,5],[8,7],[8,5],[8,4],[17,2],[21,2],[38,2],[43,1],[43,5],[49,4],[49,4],[52,3],[19,2],[23,2],[20,3],[62,3],[66,1],[66,1],[66,3],[66,5],[66,1],[69,2],[72,3],[75,2],[75,2],[75,1],[75,1],[80,2],[80,2],[80,4],[80,4],[84,2],[86,4],[86,4],[86,6],[86,2],[94,3],[96,3],[98,4],[98,3],[98,5],[98,4],[98,2],[98,2],[98,2],[98,5],[120,2],[118,3],[118,1],[125,2],[127,3],[130,2],[108,1],[108,2],[122,2],[105,1],[105,1],[114,3],[135,2],[138,7],[143,3],[57,3],[57,3],[147,2],[150,3],[154,3],[151,1],[151,2],[151,2],[151,3],[151,4],[151,2],[151,6],[151,1],[93,1],[93,1],[165,4],[166,4],[166,6],[171,1],[171,1],[171,1],[171,1],[158,2],[79,1],[79,1],[79,1],[68,2],[176,1],[176,5],[179,1],[179,4],[25,3],[182,3],[145,2],[145,2],[188,1],[186,2],[192,2],[190,2],[195,1],[195,1],[196,2],[199,2],[156,2],[156,2],[202,2],[207,1],[207,2],[205,2],[209,2],[211,2],[214,2],[216,2],[219,2],[218,2],[220,1],[220,2],[220,3],[225,1],[225,1],[225,4],[226,1],[226,2],[187,3],[187,3],[203,3],[203,3],[200,1],[200,1],[212,1],[212,1],[234,1],[235,1],[235,1],[139,1],[139,1],[44,1],[236,1],[236,1],[236,1],[236,1],[46,1],[238,2],[241,2],[239,2],[245,2],[243,1],[243,3],[243,4],[247,2],[253,2],[253,2],[253,2],[251,2],[261,2],[259,2],[259,2],[259,2],[259,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[77,3],[67,1],[67,2],[67,4],[67,4],[67,6],[67,8],[67,8],[67,2],[67,4],[67,2],[67,4],[67,3],[267,5],[267,5],[267,6],[288,4],[172,1],[172,2],[172,3],[172,1],[172,1],[172,1],[172,1],[172,1],[172,1],[255,1],[255,1],[255,1],[257,1],[257,1],[257,1],[291,1],[291,1],[291,1],[291,1],[55,1],[55,1],[307,1],[307,1],[237,1],[237,1],[311,5],[173,5],[313,1],[313,1],[313,1],[313,1],[313,1],[315,1],[315,1],[315,1],[185,1],[185,1],[185,1],[316,3],[319,3],[266,5],[320,1],[320,1],[320,1],[223,1],[223,1],[321,0],[321,1],[5,1],[5,1],[5,1],[9,0],[9,1],[322,1],[322,1],[10,0],[10,2],[18,0],[18,2],[22,0],[22,2],[26,0],[26,2],[27,0],[27,2],[30,0],[30,1],[323,1],[323,2],[33,1],[33,1],[34,0],[34,2],[35,0],[35,1],[37,0],[37,2],[40,1],[40,2],[324,1],[324,1],[42,0],[42,1],[50,0],[50,1],[51,0],[51,1],[54,0],[54,1],[56,0],[56,1],[58,0],[58,1],[59,0],[59,1],[60,0],[60,1],[61,0],[61,1],[65,1],[65,2],[71,1],[71,2],[74,1],[74,2],[88,0],[88,2],[90,0],[90,2],[91,1],[91,2],[92,0],[92,2],[95,1],[95,2],[97,0],[97,4],[99,0],[99,2],[101,0],[101,1],[102,0],[102,1],[103,1],[103,1],[104,0],[104,1],[106,1],[106,1],[106,1],[107,0],[107,1],[111,0],[111,1],[117,0],[117,1],[119,0],[119,2],[124,0],[124,1],[129,0],[129,1],[133,0],[133,1],[134,1],[134,1],[134,1],[136,0],[136,1],[137,0],[137,2],[140,0],[140,1],[141,0],[141,1],[142,0],[142,1],[144,0],[144,3],[146,0],[146,1],[148,0],[148,1],[149,0],[149,2],[152,0],[152,1],[153,0],[153,1],[155,0],[155,3],[157,0],[157,1],[162,0],[162,1],[167,0],[167,2],[168,0],[168,2],[169,1],[169,2],[170,0],[170,2],[175,0],[175,3],[177,0],[177,1],[178,0],[178,3],[180,0],[180,3],[181,0],[181,1],[183,0],[183,3],[184,0],[184,1],[189,0],[189,1],[191,0],[191,2],[194,0],[194,1],[198,0],[198,3],[201,0],[201,1],[204,0],[204,1],[206,0],[206,2],[208,1],[208,1],[210,0],[210,3],[213,0],[213,1],[215,0],[215,3],[217,0],[217,3],[339,1],[339,1],[339,1],[221,0],[221,1],[222,0],[222,1],[227,0],[227,3],[228,0],[228,1],[230,1],[230,2],[233,1],[233,2],[240,0],[240,2],[244,0],[244,2],[248,1],[248,1],[248,1],[248,1],[248,1],[248,1],[249,0],[249,1],[252,0],[252,2],[254,1],[254,1],[256,0],[256,2],[258,0],[258,2],[260,0],[260,2],[262,1],[262,1],[275,1],[275,1],[275,1],[275,1],[275,1],[278,0],[278,1],[281,0],[281,1],[282,1],[282,1],[284,0],[284,1],[286,0],[286,1],[287,0],[287,1]],performAction:function(e,t,r,n,a,o,i){var s,u,c,l,p=o.length-1;switch(a){case 1:if(o[p-1]=o[p-1]||{},rn.base&&(o[p-1].base=rn.base),rn.base="",o[p-1].prefixes=rn.prefixes,rn.prefixes=null,rn.pathOnly){if("path"===o[p-1].type||"termType"in o[p-1])return o[p-1];throw new Error("Received full SPARQL query in path only mode")}if("path"===o[p-1].type||"termType"in o[p-1])throw new Error("Received only path in full SPARQL mode");if("update"===o[p-1].type){const e={};for(const t of o[p-1].updates)if("insert"===t.updateType){const r={};for(const e of t.insert)if("bgp"===e.type||"graph"===e.type)for(const t of e.triples)"BlankNode"===t.subject.termType&&(r[t.subject.value]=!0),"BlankNode"===t.predicate.termType&&(r[t.predicate.value]=!0),"BlankNode"===t.object.termType&&(r[t.object.value]=!0);for(const t of Object.keys(r)){if(e[t])throw new Error("Detected reuse blank node across different INSERT DATA clauses");e[t]=!0}}}return o[p-1];case 2:this.$={...o[p-1],...o[p],type:"query"};break;case 4:rn.base=Sr(o[p]);break;case 5:rn.prefixes||(rn.prefixes={}),o[p-1]=o[p-1].substr(0,o[p-1].length-1),o[p]=Sr(o[p]),rn.prefixes[o[p-1]]=o[p];break;case 6:this.$={...o[p-3],...Pr(o[p-2]),...o[p-1],...o[p]};break;case 7:if(!rn.skipValidation){if(Xr(o[p-3].variables.map(e=>$r(e.expression))).some(e=>"count"===e.aggregation&&!(e.expression instanceof or))||o[p].group)for(const e of o[p-3].variables)if("Variable"===e.termType){if(!o[p].group||!o[p].group.map(e=>Gr(e)).includes(Gr(e)))throw Error("Projection of ungrouped variable (?"+Gr(e)+")")}else if(0===$r(e.expression).length){const t=zr(e.expression);for(const e of t)if(!o[p].group||!o[p].group.map||!o[p].group.map(e=>Gr(e)).includes(Gr(e)))throw Error("Use of ungrouped variable in projection of operation (?"+Gr(e)+")")}}const e=o[p-1].where.filter(e=>"query"===e.type);if(e.length>0){const t=o[p-3].variables.filter(e=>e.variable&&e.variable.value).map(e=>e.variable.value),r=Xr(e.map(e=>e.variables)).map(e=>e.value||e.variable.value);for(const e of t)if(r.indexOf(e)>=0)throw Error("Target id of 'AS' (?"+e+") already used in subquery")}this.$=Tr(o[p-3],Pr(o[p-2]),o[p-1],o[p]);break;case 8:this.$=Tr({queryType:"CONSTRUCT",template:o[p-3]},Pr(o[p-2]),o[p-1],o[p]);break;case 9:this.$=Tr({queryType:"CONSTRUCT",template:o[p-2]=o[p-2]?o[p-2].triples:[]},Pr(o[p-5]),{where:[{type:"bgp",triples:Or([],o[p-2])}]},o[p]);break;case 10:this.$=Tr({queryType:"DESCRIBE",variables:"*"===o[p-3]?[new or]:o[p-3]},Pr(o[p-2]),o[p-1],o[p]);break;case 11:this.$=Tr({queryType:"ASK"},Pr(o[p-2]),o[p-1],o[p]);break;case 12:this.$=Tr(o[p-1],{variables:[new or]});break;case 13:const t=function(e){const t=e.slice().sort(),r=[];for(let n=0;n<t.length-1;n++)t[n+1]==t[n]&&r.push(t[n]);return r}(o[p].map(e=>e.value||e.variable.value));if(t.length>0)throw Error("Two or more of the resulting columns have the same name (?"+t[0]+")");this.$=Tr(o[p-1],{variables:o[p]});break;case 14:this.$=Tr({queryType:"SELECT"},o[p]&&(o[p-1]=vr(o[p]),o[p]={},o[p][o[p-1]]=!0,o[p]));break;case 16:case 27:this.$=Fr(o[p-3],{variable:o[p-1]});break;case 17:case 18:this.$=Tr(o[p-3],o[p-2],o[p-1],o[p],{type:"query"});break;case 19:case 58:this.$={iri:o[p],named:!!o[p-1]};break;case 20:this.$={where:o[p].patterns};break;case 21:this.$=Tr(o[p-1],o[p]);break;case 22:this.$=Tr(o[p-2],o[p-1],o[p]);break;case 23:this.$={group:o[p]};break;case 24:case 25:case 28:case 31:case 33:case 34:this.$=Fr(o[p]);break;case 26:this.$=Fr(o[p-1]);break;case 29:this.$={having:o[p]};break;case 30:this.$={order:o[p]};break;case 32:this.$=Fr(o[p],{descending:!0});break;case 35:this.$={limit:Dr(o[p])};break;case 36:this.$={offset:Dr(o[p])};break;case 37:this.$={limit:Dr(o[p-2]),offset:Dr(o[p])};break;case 38:this.$={limit:Dr(o[p]),offset:Dr(o[p-2])};break;case 39:case 43:this.$={type:"values",values:o[p]};break;case 40:case 84:this.$=o[p-1].map(e=>({[o[p-3]]:e}));break;case 41:case 85:this.$=o[p-1].map(()=>({}));break;case 42:case 86:var d=o[p-4].length;o[p-4]=o[p-4].map(jr),this.$=o[p-1].map(function(e){if(e.length!==d)throw Error("Inconsistent VALUES length");for(var t={},r=0;r<d;r++)t["?"+o[p-4][r].value]=e[r];return t});break;case 44:case 65:case 100:case 126:case 175:this.$=o[p-1];break;case 45:this.$={type:"update",updates:_r(o[p-2],o[p-1])};break;case 46:this.$=Tr({type:"load",silent:!!o[p-2],source:o[p-1]},o[p]&&{destination:o[p]});break;case 47:this.$={type:vr(o[p-2]),silent:!!o[p-1],graph:o[p]};break;case 48:this.$={type:vr(o[p-4]),silent:!!o[p-3],source:o[p-2],destination:o[p]};break;case 49:this.$={type:"create",silent:!!o[p-2],graph:{type:"graph",name:o[p]}};break;case 50:this.$={updateType:"insert",insert:Zr(o[p])};break;case 51:this.$={updateType:"delete",delete:en(Zr(o[p]))};break;case 52:this.$={updateType:"deletewhere",delete:en(o[p])};break;case 53:this.$={updateType:"insertdelete",...o[p-4],...o[p-3],...Pr(o[p-2],"using"),where:o[p].patterns};break;case 54:case 57:case 62:case 167:case 191:case 236:this.$=o[p];break;case 55:this.$={delete:en(o[p-1]),insert:o[p]||[]};break;case 56:this.$={delete:[],insert:o[p]};break;case 59:this.$={graph:o[p]};break;case 60:this.$={type:"graph",default:!0};break;case 61:case 63:this.$={type:"graph",name:o[p]};break;case 64:this.$={[vr(o[p])]:!0};break;case 66:this.$=o[p-1]?wr(o[p],[o[p-1]]):wr(o[p]);break;case 67:var f=Tr(o[p-3]||{triples:[]},{type:"graph",name:o[p-5]});this.$=o[p]?[f,o[p]]:[f];break;case 68:case 73:this.$={type:"bgp",triples:wr(o[p-2],[o[p-1]])};break;case 69:this.$={type:"group",patterns:[o[p-1]]};break;case 70:for(const r of o[p-1].filter(e=>"bind"===e.type)){const e=o[p-1].indexOf(r),t=new Set;for(const r of o[p-1].slice(0,e))"group"!==r.type&&"bgp"!==r.type||Jr(r).forEach(e=>t.add(e));if(t.has(r.variable.value))throw Error("Variable used to bind is already bound (?"+r.variable.value+")")}this.$={type:"group",patterns:o[p-1]};break;case 71:this.$=o[p-1]?wr([o[p-1]],o[p]):wr(o[p]);break;case 72:this.$=o[p]?[o[p-2],o[p]]:o[p-2];break;case 75:this.$=Tr(o[p],{type:"optional"});break;case 76:this.$=Tr(o[p],{type:"minus"});break;case 77:this.$=Tr(o[p],{type:"graph",name:o[p-1]});break;case 78:this.$=Tr(o[p],{type:"service",name:o[p-1],silent:!!o[p-2]});break;case 79:this.$={type:"filter",expression:o[p]};break;case 80:this.$={type:"bind",variable:o[p-1],expression:o[p-3]};break;case 89:this.$=Kr(o[p]);break;case 90:this.$=void 0;break;case 91:this.$=o[p-1].length?{type:"union",patterns:wr(o[p-1].map(Mr),[Mr(o[p])])}:o[p];break;case 95:this.$={...o[p],function:o[p-1]};break;case 96:this.$={type:"functionCall",args:[]};break;case 97:this.$={type:"functionCall",args:_r(o[p-2],o[p-1]),distinct:!!o[p-3]};break;case 98:case 115:case 128:case 247:case 249:case 251:case 253:case 255:case 263:case 267:case 297:case 299:case 303:case 307:case 328:case 341:case 349:case 355:case 361:case 367:case 369:case 373:case 375:case 379:case 381:case 385:case 391:case 395:case 401:case 405:case 409:case 411:case 420:case 428:case 430:case 440:case 444:case 446:case 448:this.$=[];break;case 99:this.$=_r(o[p-2],o[p-1]);break;case 101:this.$=wr(o[p-2],[o[p-1]]);break;case 102:case 112:this.$=Wr(o[p].map(e=>Tr(Rr(o[p-1]),e)));break;case 103:this.$=Wr(Or(o[p].map(e=>Tr(Rr(o[p-1].entity),e)),o[p-1].triples));break;case 105:this.$=wr([o[p-1]],o[p]);break;case 106:this.$=wr(o[p]);break;case 107:this.$=Vr(o[p-1],o[p]);break;case 109:case 237:this.$=rn.factory.namedNode(sr);break;case 110:case 118:this.$=_r(o[p-1],o[p]);break;case 111:this.$=o[p]?{annotation:o[p],object:o[p-1]}:o[p-1];break;case 113:this.$=o[p]?Wr(Or(o[p].map(e=>Tr(Rr(o[p-1].entity),e)),o[p-1].triples)):o[p-1].triples;break;case 114:this.$=Vr(...o[p-1],o[p]);break;case 116:this.$=Vr(...o[p]);break;case 117:case 159:case 163:this.$=[o[p-1],o[p]];break;case 119:this.$=o[p]?{object:o[p-1],annotation:o[p]}:o[p-1];break;case 120:this.$=o[p-1].length?Er("|",_r(o[p-1],o[p])):o[p];break;case 121:this.$=o[p-1].length?Er("/",_r(o[p-1],o[p])):o[p];break;case 122:this.$=o[p]?Er(o[p],[o[p-1]]):o[p-1];break;case 123:this.$=o[p-1]?Er(o[p-1],[o[p]]):o[p];break;case 125:case 131:this.$=Er(o[p-1],[o[p]]);break;case 129:this.$=Er("|",_r(o[p-2],o[p-1]));break;case 132:case 134:this.$=function(e){var t=Lr(),r=t,n=[],a=[];e.forEach(function(e){n.push(e.entity),Or(a,e.triples)});for(var o=0,i=0,s=n.length,u=Array(2*s);o<s;)u[i++]=Rr(r,rn.factory.namedNode(ur),n[o]),u[i++]=Rr(r,rn.factory.namedNode(cr),r=++o<s?Lr():rn.factory.namedNode(lr));return{entity:t,triples:Or(u,a)}}(o[p-1]);break;case 133:case 135:this.$=(c=o[p-1],{entity:l=Lr(),triples:c.map(function(e){return Tr(Rr(l),e)})});break;case 140:this.$={entity:o[p],triples:[]};break;case 145:this.$=jr(o[p]);break;case 149:this.$=rn.factory.namedNode(lr);break;case 151:case 153:case 158:case 162:this.$=xr(o[p-1],o[p]);break;case 152:this.$=["||",o[p]];break;case 154:this.$=["&&",o[p]];break;case 156:this.$=Ar(o[p-1],[o[p-2],o[p]]);break;case 157:this.$=Ar(o[p-2]?"notin":"in",[o[p-3],o[p]]);break;case 160:this.$=["+",xr(o[p-1],o[p])];break;case 161:var h=Nr(o[p-1].value.replace("-",""),o[p-1].datatype);this.$=["-",xr(h,o[p])];break;case 164:this.$=Ar("UPLUS",[o[p]]);break;case 165:this.$=Ar(o[p-1],[o[p]]);break;case 166:this.$=Ar("UMINUS",[o[p]]);break;case 177:this.$=Ar(vr(o[p-1]));break;case 178:this.$=Ar(vr(o[p-3]),[o[p-1]]);break;case 179:this.$=Kr(Ar(vr(o[p-3]),[o[p-1]]));break;case 180:this.$=Ar(vr(o[p-5]),[o[p-3],o[p-1]]);break;case 181:this.$=Ar(vr(o[p-7]),[o[p-5],o[p-3],o[p-1]]);break;case 182:this.$=Kr(Ar(vr(o[p-7]),[o[p-5],o[p-3],o[p-1]]));break;case 183:this.$=Ar(vr(o[p-1]),o[p]);break;case 184:this.$=Ar("bound",[jr(o[p-1])]);break;case 185:this.$=Ar(o[p-1],[]);break;case 186:this.$=Ar(o[p-3],[o[p-1]]);break;case 187:this.$=Ar(o[p-2]?"notexists":"exists",[Mr(o[p])]);break;case 188:case 189:this.$=Fr(o[p-1],{type:"aggregate",aggregation:vr(o[p-4]),distinct:!!o[p-2]});break;case 190:this.$=Fr(o[p-2],{type:"aggregate",aggregation:vr(o[p-5]),distinct:!!o[p-3],separator:"string"==typeof o[p-1]?o[p-1]:" "});break;case 192:this.$=Nr(o[p]);break;case 193:this.$=(s=o[p-1],u=vr(o[p].substr(1)),rn.factory.literal(s,u));break;case 194:this.$=Nr(o[p-2],o[p]);break;case 195:case 204:this.$=Nr(o[p],dr);break;case 196:case 205:this.$=Nr(o[p],fr);break;case 197:case 206:this.$=Nr(vr(o[p]),hr);break;case 200:this.$=Nr(o[p].toLowerCase(),yr);break;case 201:this.$=Nr(o[p].substr(1),dr);break;case 202:this.$=Nr(o[p].substr(1),fr);break;case 203:this.$=Nr(o[p].substr(1).toLowerCase(),hr);break;case 207:case 208:this.$=Qr(o[p],1);break;case 209:case 210:this.$=Qr(o[p],3);break;case 211:this.$=rn.factory.namedNode(Sr(o[p]));break;case 213:var y=o[p].indexOf(":"),g=o[p].substr(0,y),m=rn.prefixes[g];if(!m)throw new Error("Unknown prefix: "+g);var b=Sr(m+o[p].substr(y+1));this.$=rn.factory.namedNode(b);break;case 214:if(o[p]=o[p].substr(0,o[p].length-1),!(o[p]in rn.prefixes))throw new Error("Unknown prefix: "+o[p]);b=Sr(rn.prefixes[o[p]]);this.$=rn.factory.namedNode(b);break;case 215:this.$=Lr(o[p].replace(/^(_:)/,""));break;case 216:this.$=Lr();break;case 217:case 218:case 232:this.$=Kr(Ir(o[p-3],o[p-2],o[p-1]));break;case 230:case 231:this.$=Kr(o[p-1]);break;case 248:case 250:case 252:case 254:case 256:case 260:case 264:case 268:case 270:case 292:case 294:case 296:case 298:case 300:case 302:case 304:case 306:case 329:case 342:case 356:case 368:case 370:case 372:case 374:case 392:case 402:case 425:case 427:case 429:case 431:case 441:case 445:case 447:case 449:o[p-1].push(o[p]);break;case 259:case 269:case 291:case 293:case 295:case 301:case 305:case 371:case 424:case 426:this.$=[o[p]];break;case 308:o[p-3].push(o[p-2]);break;case 350:case 362:case 376:case 380:case 382:case 386:case 396:case 406:case 410:case 412:case 421:o[p-2].push(o[p-1])}},table:[e(t,r,{3:1,4:2,10:3}),{1:[3]},e(n,[2,307],{5:4,7:5,321:6,214:7,8:8,96:9,215:10,17:11,21:12,97:16,38:17,6:[2,238],13:a,16:a,45:a,197:a,224:a,229:a,308:a,24:[1,13],32:[1,14],36:[1,15],41:o}),e([6,13,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],[2,3],{322:19,11:20,14:21,12:[1,22],15:[1,23]}),{6:[1,24]},{6:[2,240]},{6:[2,241]},{6:[2,242]},{6:[2,243],9:25,84:26,85:i},{6:[2,239]},e(s,[2,411],{216:28,217:29}),e(u,[2,249],{18:30}),e(u,[2,251],{22:31}),e(c,[2,255],{25:32,27:33,29:[1,34]}),{13:l,16:p,33:35,39:[1,37],44:39,55:40,87:d,139:38,307:43,308:f,323:36},e(u,[2,267],{37:46}),e(h,[2,326],{98:47,103:49,106:50,117:55,130:61,100:[1,48],110:[1,51],113:[1,52],115:[1,53],116:[1,54],131:[1,62],329:[1,56],330:[1,57],331:[1,58],332:[1,59],333:[1,60]}),{39:[1,63],40:64,43:65,44:66,45:y,87:d},e(g,[2,273],{42:68,324:69,325:[1,70],326:[1,71]}),e(t,[2,248]),e(t,[2,245]),e(t,[2,246]),{13:[1,72]},{16:[1,73]},{1:[2,1]},{6:[2,2]},{6:[2,244]},{45:[1,77],85:[1,78],86:74,87:[1,75],89:[1,76]},e([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],[2,120],{337:[1,79]}),e(m,[2,418],{218:80,222:81,229:[1,82]}),{19:83,28:b,29:v,52:84,53:_,56:85},{19:88,28:b,29:v,52:89,53:_,56:85},e(u,[2,253],{26:90}),{28:[1,91],52:92,53:_},e(O,[2,385],{181:93,182:94,183:95,31:[2,383]}),e(T,[2,263],{34:96}),e(T,[2,261],{44:39,55:40,307:43,139:97,13:l,16:p,87:d,308:f}),e(T,[2,262]),e(w,[2,259]),e(S,[2,143]),e(S,[2,144]),e([6,13,16,28,29,31,39,45,47,48,53,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,145]),e(j,[2,211]),e(j,[2,212]),e(j,[2,213]),e(j,[2,214]),{19:98,28:b,29:v,52:99,53:_,56:85},{6:[2,309],99:100,193:[1,101]},e(A,[2,311],{101:102,328:[1,103]}),e(F,[2,317],{104:104,328:[1,105]}),e(E,[2,322],{107:106,328:[1,107]}),{111:108,112:[2,324],328:[1,109]},{29:x,114:110},{29:x,114:112},{29:x,114:113},{118:114,123:[1,115],125:116,126:P},e(D,[2,315]),e(D,[2,316]),e(M,[2,319]),e(M,[2,320]),e(M,[2,321]),e(h,[2,327]),{13:l,16:p,55:118,307:43,308:f},e(u,[2,12]),e(u,[2,13],{44:66,43:119,45:y,87:d}),e(N,[2,269]),e(N,[2,15]),{13:l,16:p,44:136,45:I,46:120,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},e(g,[2,14]),e(g,[2,274]),e(g,[2,271]),e(g,[2,272]),e(t,[2,4]),{13:[1,177]},e(me,[2,39]),{29:[1,178]},{29:[1,179]},{87:[1,181],91:180},{45:[1,187],87:[1,185],89:[1,186],93:182,165:183,166:184},e(s,[2,410]),e([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337],[2,121],{338:[1,188]}),{13:l,16:p,45:[1,193],55:194,197:be,219:189,220:190,223:191,224:[1,192],307:43,308:f},e(m,[2,419]),e(ve,_e,{20:196,59:197,69:198,70:Oe}),e(u,[2,250]),{29:Te,57:200},e(A,[2,279],{54:202,327:[1,203]}),{29:[2,282]},e(we,Se,{23:204,58:205,62:206,63:je}),e(u,[2,252]),{19:208,28:b,29:v,52:209,53:_,56:85},{29:[1,210]},e(c,[2,256]),{31:[1,211]},{31:[2,384]},{13:l,16:p,44:215,45:Ae,55:220,82:R,87:d,89:Fe,145:212,172:221,185:213,187:214,231:Ee,236:216,237:222,255:154,257:155,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,309:xe,310:Pe,311:217,312:De},e(Me,[2,265],{56:85,35:227,52:228,19:229,28:b,29:v,53:_}),e(w,[2,260]),e(we,Se,{58:205,62:206,23:230,63:je}),e(u,[2,268]),{6:[2,45]},e(t,r,{10:3,4:231}),{13:l,16:p,55:232,307:43,308:f},e(A,[2,312]),{105:233,112:Ne,122:234,132:[1,237],134:235,327:[1,238],334:[1,239]},e(F,[2,318]),e(A,Ie,{108:240,133:242,112:Re,132:Le}),e(E,[2,323]),{112:[1,244]},{112:[2,325]},e(Ce,[2,50]),e(O,Be,{135:245,136:246,143:247,144:248,31:qe,112:qe}),e(Ce,[2,51]),e(Ce,[2,52]),e(Ue,[2,328],{119:249}),{29:x,114:250},e(Ue,[2,56]),{29:x,114:251},e(h,[2,59]),e(N,[2,270]),{47:[1,252]},e(ke,[2,150]),e(Qe,[2,428],{240:253}),e(Ve,[2,430],{244:254}),e(Ve,[2,155],{248:255,249:256,250:[2,438],290:[1,257],341:[1,258],342:[1,259],343:[1,260],344:[1,261],345:[1,262],346:[1,263]}),e(Ge,[2,440],{252:264}),e($e,[2,448],{260:265}),{13:l,16:p,44:136,45:I,55:133,67:132,68:134,77:131,82:R,87:d,172:135,255:154,257:155,264:266,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},{13:l,16:p,44:136,45:I,55:133,67:132,68:134,77:131,82:R,87:d,172:135,255:154,257:155,264:267,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},{13:l,16:p,44:136,45:I,55:133,67:132,68:134,77:131,82:R,87:d,172:135,255:154,257:155,264:268,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},e($e,[2,167]),e($e,[2,168]),e($e,[2,169]),e($e,[2,170],{176:269,45:ze,89:Xe}),e($e,[2,171]),e($e,[2,172]),e($e,[2,173]),e($e,[2,174]),{13:l,16:p,44:136,45:I,46:272,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},e(He,[2,176]),{89:[1,273]},{45:[1,274]},{45:[1,275]},{45:[1,276]},{45:[1,277]},{45:[1,278]},{45:Je,89:Ke,179:279},{45:[1,282]},{45:[1,284],89:[1,283]},{279:[1,285]},e(Ye,[2,192],{292:[1,286],293:[1,287]}),e(Ye,[2,195]),e(Ye,[2,196]),e(Ye,[2,197]),e(Ye,[2,198]),e(Ye,[2,199]),e(Ye,[2,200]),{13:l,16:p,44:39,55:40,82:R,87:d,139:289,172:291,255:154,257:155,266:290,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,320:288},{45:[1,292]},{45:[1,293]},{45:[1,294]},e(We,[2,452]),e(We,[2,453]),e(We,[2,454]),e(We,[2,455]),e(We,[2,456]),{279:[2,458]},e(Ze,[2,207]),e(Ze,[2,208]),e(Ze,[2,209]),e(Ze,[2,210]),e(Ye,[2,201]),e(Ye,[2,202]),e(Ye,[2,203]),e(Ye,[2,204]),e(Ye,[2,205]),e(Ye,[2,206]),e(t,[2,5]),e(et,[2,297],{88:295}),e(tt,[2,299],{90:296}),{48:[1,297],87:[1,298]},e(rt,[2,301]),e(me,[2,43]),e(me,[2,82]),e(me,[2,83]),{29:[1,299]},{29:[1,300]},{87:[1,302],169:301},e(s,[2,412]),e(nt,[2,123]),e(nt,[2,416],{221:303,339:304,39:[1,306],263:[1,307],340:[1,305]}),e(at,[2,124]),{13:l,16:p,45:[1,311],55:194,89:[1,310],197:be,223:312,225:308,226:309,229:ot,307:43,308:f},e(s,a,{215:10,214:314}),e(at,[2,236]),e(at,[2,237]),e(it,[2,6]),e(st,[2,287],{60:315,72:316,73:[1,317]}),e(ve,[2,286]),{13:l,16:p,45:I,55:323,67:321,68:322,71:318,77:320,79:319,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,307:43,308:f,346:pe,347:de,348:fe,349:he,350:ye,351:ge},e([6,31,63,70,73,81,83,85],[2,20]),e(O,ut,{38:17,49:324,147:325,17:326,21:327,148:328,154:329,155:330,29:ct,31:ct,85:ct,112:ct,159:ct,160:ct,161:ct,163:ct,164:ct,41:o}),{13:l,16:p,55:331,307:43,308:f},e(A,[2,280]),e(it,[2,7]),e(ve,_e,{59:197,69:198,20:332,70:Oe}),e(we,[2,284]),{64:[1,333]},e(we,Se,{58:205,62:206,23:334,63:je}),e(u,[2,254]),e(O,Be,{144:248,30:335,143:336,31:[2,257]}),e(u,[2,100]),{31:[2,387],184:337,335:[1,338]},{13:l,16:p,44:39,55:40,87:d,139:342,186:339,190:340,195:341,197:lt,307:43,308:f},e(pt,[2,389],{44:39,55:40,307:43,190:340,195:341,139:342,188:344,189:345,186:346,13:l,16:p,87:d,197:lt,308:f}),e(dt,[2,227]),e(dt,[2,228]),e(dt,[2,229]),{13:l,16:p,44:215,45:Ae,55:220,82:R,87:d,89:Fe,172:221,185:351,187:350,200:348,230:347,231:Ee,234:349,236:216,237:222,255:154,257:155,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,309:xe,310:Pe,311:217,312:De},{13:l,16:p,44:39,55:40,87:d,139:342,186:352,190:340,195:341,197:lt,307:43,308:f},e(dt,[2,146]),e(dt,[2,147]),e(dt,[2,148]),e(dt,[2,149]),{13:l,16:p,44:354,55:355,82:R,87:d,172:357,237:356,255:154,257:155,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,309:xe,310:Pe,311:358,312:De,313:353},e(ft,[2,215]),e(ft,[2,216]),e(we,Se,{58:205,62:206,23:359,63:je}),e(T,[2,264]),e(Me,[2,266]),e(it,[2,11]),e(n,[2,308],{6:[2,310]}),e(Ce,[2,313],{102:360,120:361,121:[1,362]}),e(Ce,[2,47]),e(Ce,[2,63]),e(Ce,[2,64]),{13:l,16:p,55:363,307:43,308:f},e(Ce,[2,336]),e(Ce,[2,337]),e(Ce,[2,338]),{109:[1,364]},e(ht,[2,60]),{13:l,16:p,55:365,307:43,308:f},e(A,[2,335]),{13:l,16:p,55:366,307:43,308:f},{31:[1,367]},e(yt,[2,341],{137:368}),e(yt,[2,340]),{13:l,16:p,44:215,45:Ae,55:220,82:R,87:d,89:Fe,145:369,172:221,185:213,187:214,231:Ee,236:216,237:222,255:154,257:155,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,309:xe,310:Pe,311:217,312:De},{28:[1,370],127:371,128:[1,372]},e(Ue,[2,330],{124:373,125:374,126:P}),e(Ue,[2,57]),{44:375,87:d},e(ke,[2,151],{241:376,242:[1,377]}),e(Qe,[2,153],{245:378,246:[1,379]}),{13:l,16:p,44:136,45:I,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,247:380,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},{250:[1,381]},e(gt,[2,432]),e(gt,[2,433]),e(gt,[2,434]),e(gt,[2,435]),e(gt,[2,436]),e(gt,[2,437]),{250:[2,439]},e([47,48,193,242,246,250,272,290,341,342,343,344,345,346],[2,158],{253:382,254:383,255:384,257:385,263:[1,386],265:[1,387],297:ee,298:te,299:re,300:ne,301:ae,302:oe}),e(Ge,[2,162],{261:388,262:389,39:mt,338:bt}),e($e,[2,164]),e($e,[2,165]),e($e,[2,166]),e(He,[2,95]),e(He,[2,96]),e(gt,[2,377],{177:392,325:[1,393]}),{48:[1,394]},e(He,[2,177]),{13:l,16:p,44:136,45:I,46:395,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},{13:l,16:p,44:136,45:I,46:396,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},{13:l,16:p,44:136,45:I,46:397,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},{13:l,16:p,44:136,45:I,46:398,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},{13:l,16:p,44:136,45:I,46:399,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},e(He,[2,183]),e(He,[2,98]),e(gt,[2,381],{180:400}),{87:[1,401]},e(He,[2,185]),{13:l,16:p,44:136,45:I,46:402,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},{29:Te,57:403},e(Ye,[2,193]),{13:l,16:p,55:404,307:43,308:f},{13:l,16:p,44:39,55:40,87:d,139:342,195:405,197:lt,307:43,308:f},e(vt,[2,233]),e(vt,[2,234]),e(vt,[2,235]),e(_t,[2,459],{281:406,325:[1,407]}),e(gt,[2,463],{284:408,325:[1,409]}),e(gt,[2,465],{286:410,325:[1,411]}),{13:l,16:p,31:[1,412],55:414,82:R,171:413,172:415,173:416,174:Ot,255:154,257:155,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:Tt},{31:[1,419],89:[1,420]},{29:[1,421]},e(rt,[2,302]),e(et,[2,367],{167:422}),e(tt,[2,369],{168:423}),{48:[1,424],87:[1,425]},e(rt,[2,371]),e(nt,[2,122]),e(nt,[2,417]),e(nt,[2,413]),e(nt,[2,414]),e(nt,[2,415]),e(at,[2,125]),e(at,[2,127]),e(at,[2,128]),e(wt,[2,420],{227:426}),e(at,[2,130]),{13:l,16:p,55:194,197:be,223:427,307:43,308:f},{48:[1,428]},e(St,[2,289],{61:429,80:430,81:[1,431],83:[1,432]}),e(st,[2,288]),{64:[1,433]},e(ve,[2,29],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:434,13:l,16:p,45:I,268:q,269:U,270:k,271:Q,273:V,274:G,276:$,277:z,279:X,280:H,283:J,285:K,308:f,346:pe,347:de,348:fe,349:he,350:ye,351:ge}),e(jt,[2,293]),e(At,[2,92]),e(At,[2,93]),e(At,[2,94]),{45:ze,89:Xe,176:269},{31:[1,435]},{31:[1,436]},{19:437,28:b,29:v,56:85},{19:438,28:b,29:v,56:85},e(Ft,[2,355],{149:439}),e(Ft,[2,354]),{13:l,16:p,44:215,45:Et,55:220,82:R,87:d,89:Fe,156:440,172:221,185:441,203:442,231:xt,236:216,237:222,255:154,257:155,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,309:xe,310:Pe,311:217,312:De},e(T,[2,19]),e(St,[2,21]),{13:l,16:p,44:450,45:Pt,55:323,65:445,66:446,67:447,68:448,87:d,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,307:43,308:f,346:pe,347:de,348:fe,349:he,350:ye,351:ge},e(it,[2,8]),{31:[1,451]},{31:[2,258]},{31:[2,101]},e(O,[2,386],{31:[2,388]}),e(pt,[2,102]),e(Dt,[2,391],{191:452}),e(O,[2,395],{196:453,198:454}),e(O,[2,108]),e(O,[2,109]),e(pt,[2,103]),e(pt,[2,104]),e(pt,[2,390]),{13:l,16:p,44:215,45:Ae,48:[1,455],55:220,82:R,87:d,89:Fe,172:221,185:351,187:350,200:456,231:Ee,234:349,236:216,237:222,255:154,257:155,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,309:xe,310:Pe,311:217,312:De},e(Mt,[2,424]),e(Nt,[2,136]),e(Nt,[2,137]),e(It,[2,140]),{232:[1,457]},{13:l,16:p,44:39,55:40,87:d,139:342,195:458,197:lt,307:43,308:f},e(vt,[2,219]),e(vt,[2,220]),e(vt,[2,221]),e(vt,[2,222]),e(vt,[2,223]),e(it,[2,10]),e(Ce,[2,46]),e(Ce,[2,314]),{112:Ne,122:459},e(Ce,[2,62]),e(A,Ie,{133:242,108:460,112:Re,132:Le}),e(ht,[2,61]),e(Ce,[2,49]),e([6,28,126,128,193],[2,65]),{31:[2,66],112:[1,462],138:461},e(yt,[2,351],{146:463,335:[1,464]}),{29:Te,57:465},e(Ue,[2,329]),e(A,[2,332],{129:466,327:[1,467]}),e(Ue,[2,55]),e(Ue,[2,331]),{48:[1,468]},e(Qe,[2,429]),{13:l,16:p,44:136,45:I,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,239:469,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},e(Ve,[2,431]),{13:l,16:p,44:136,45:I,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,243:470,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},e(Ve,[2,156]),{45:Je,89:Ke,179:471},e(Ge,[2,441]),{13:l,16:p,44:136,45:I,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,251:472,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},e($e,[2,444],{256:473}),e($e,[2,446],{258:474}),e(gt,[2,442]),e(gt,[2,443]),e($e,[2,449]),{13:l,16:p,44:136,45:I,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,255:154,257:155,259:475,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},e(gt,[2,450]),e(gt,[2,451]),e(gt,[2,379],{178:476}),e(gt,[2,378]),e([6,13,16,29,31,39,45,47,48,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,175]),{48:[1,477]},{48:[1,478]},{272:[1,479]},{272:[1,480]},{272:[1,481]},{13:l,16:p,44:136,45:I,46:482,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},{48:[1,483]},{48:[1,484]},e(He,[2,187]),e(Ye,[2,194]),{13:l,16:p,44:39,55:40,82:R,87:d,139:289,172:291,255:154,257:155,266:290,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,320:485},{13:l,16:p,39:[1,487],44:136,45:I,46:488,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,282:486,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},e(_t,[2,460]),{13:l,16:p,44:136,45:I,46:489,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},e(gt,[2,464]),{13:l,16:p,44:136,45:I,46:490,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},e(gt,[2,466]),e(me,[2,40]),e(et,[2,298]),e(Rt,[2,87]),e(Rt,[2,88]),e(Rt,[2,89]),e(Rt,[2,90]),{13:l,16:p,55:492,82:R,172:493,255:154,257:155,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,311:494,312:De,315:491},e(me,[2,41]),e(tt,[2,300]),e(Lt,[2,303],{92:495}),{13:l,16:p,31:[1,496],55:414,82:R,171:497,172:415,173:416,174:Ot,255:154,257:155,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:Tt},{31:[1,498],89:[1,499]},{29:[1,500]},e(rt,[2,372]),{13:l,16:p,48:[2,422],55:194,197:be,223:312,226:502,228:501,229:ot,307:43,308:f},e(at,[2,131]),e(at,[2,126]),e(St,[2,22]),e(St,[2,290]),{82:[1,503]},{82:[1,504]},{13:l,16:p,44:510,45:I,55:323,67:321,68:322,74:505,75:506,76:Ct,77:320,78:Bt,79:509,87:d,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,307:43,308:f,346:pe,347:de,348:fe,349:he,350:ye,351:ge},e(jt,[2,294]),e(qt,[2,69]),e(qt,[2,70]),e(ve,_e,{59:197,69:198,20:511,70:Oe}),e(we,Se,{58:205,62:206,23:512,63:je}),{29:[2,375],31:[2,71],84:522,85:i,112:[1,518],150:513,151:514,158:515,159:[1,516],160:[1,517],161:[1,519],163:[1,520],164:[1,521],175:523},e(Ft,[2,363],{157:524,335:[1,525]}),e(s,a,{215:10,202:526,205:527,208:528,214:529,44:530,87:d}),e(Ut,[2,399],{215:10,205:527,208:528,214:529,44:530,204:531,202:532,13:a,16:a,45:a,197:a,224:a,229:a,308:a,87:d}),{13:l,16:p,44:215,45:Et,55:220,82:R,87:d,89:Fe,172:221,185:351,203:536,212:534,231:xt,233:533,234:535,236:216,237:222,255:154,257:155,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,309:xe,310:Pe,311:217,312:De},e(s,a,{215:10,205:527,208:528,214:529,44:530,202:537,87:d}),e(we,[2,23],{307:43,267:139,275:146,278:149,55:323,67:447,68:448,44:450,66:538,13:l,16:p,45:Pt,87:d,268:q,269:U,270:k,271:Q,273:V,274:G,276:$,277:z,279:X,280:H,283:J,285:K,308:f,346:pe,347:de,348:fe,349:he,350:ye,351:ge}),e(kt,[2,291]),e(kt,[2,24]),e(kt,[2,25]),{13:l,16:p,44:136,45:I,46:539,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},e(kt,[2,28]),e(we,Se,{58:205,62:206,23:540,63:je}),e([31,112,232,318,335],[2,105],{192:541,193:[1,542]}),e(Dt,[2,107]),{13:l,16:p,44:215,45:Ae,55:220,82:R,87:d,89:Fe,172:221,185:351,187:350,199:543,200:544,231:Ee,234:349,236:216,237:222,255:154,257:155,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,309:xe,310:Pe,311:217,312:De},e(Qt,[2,132]),e(Mt,[2,425]),e(Qt,[2,133]),{13:l,16:p,44:354,55:355,82:R,87:d,172:357,237:356,255:154,257:155,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,309:xe,310:Pe,311:358,312:De,313:545},e(Ce,[2,54]),e(Ce,[2,48]),e(yt,[2,342]),{13:l,16:p,44:39,55:40,87:d,139:546,307:43,308:f},e(yt,[2,68]),e(O,[2,350],{31:Vt,112:Vt}),e(Ce,[2,53]),{13:l,16:p,55:547,307:43,308:f},e(A,[2,333]),e(N,[2,16]),e(Qe,[2,152]),e(Ve,[2,154]),e(Ve,[2,157]),e(Ge,[2,159]),e(Ge,[2,160],{262:389,261:548,39:mt,338:bt}),e(Ge,[2,161],{262:389,261:549,39:mt,338:bt}),e($e,[2,163]),{13:l,16:p,44:136,45:I,46:550,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},e(He,[2,178]),e(He,[2,179]),{13:l,16:p,44:136,45:I,46:551,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},{13:l,16:p,44:136,45:I,46:552,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},{13:l,16:p,44:136,45:I,46:553,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},{48:[1,554],272:[1,555]},e(He,[2,184]),e(He,[2,186]),{314:[1,556]},{48:[1,557]},{48:[2,461]},{48:[2,462]},{48:[1,558]},{48:[2,467],193:[1,561],287:559,288:560},{13:l,16:p,55:194,197:be,223:562,307:43,308:f},e(Gt,[2,224]),e(Gt,[2,225]),e(Gt,[2,226]),{31:[1,563],45:$t,94:564},e(me,[2,84]),e(et,[2,368]),e(me,[2,85]),e(tt,[2,370]),e(Lt,[2,373],{170:566}),{48:[1,567]},{48:[2,423],337:[1,568]},e(St,[2,35],{83:[1,569]}),e(St,[2,36],{81:[1,570]}),e(st,[2,30],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:509,44:510,75:571,13:l,16:p,45:I,76:Ct,78:Bt,87:d,268:q,269:U,270:k,271:Q,273:V,274:G,276:$,277:z,279:X,280:H,283:J,285:K,308:f,346:pe,347:de,348:fe,349:he,350:ye,351:ge}),e(zt,[2,295]),{45:I,77:572},{45:I,77:573},e(zt,[2,33]),e(zt,[2,34]),{31:[2,275],50:574,84:575,85:i},{31:[2,277],51:576,84:577,85:i},e(Ft,[2,356]),e(Xt,[2,357],{152:578,335:[1,579]}),e(Ht,[2,74]),{29:Te,57:580},{29:Te,57:581},{13:l,16:p,44:39,55:40,87:d,139:582,307:43,308:f},e(Jt,[2,365],{162:583,328:[1,584]}),{13:l,16:p,45:I,55:323,67:321,68:322,77:320,79:585,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,307:43,308:f,346:pe,347:de,348:fe,349:he,350:ye,351:ge},{45:[1,586]},e(Ht,[2,81]),{29:Te,57:587},e(Ft,[2,73]),e(O,[2,362],{29:Kt,31:Kt,85:Kt,112:Kt,159:Kt,160:Kt,161:Kt,163:Kt,164:Kt}),e(Ut,[2,112]),e(Yt,[2,401],{206:588}),e(O,[2,405],{209:589,210:590}),e(O,[2,403]),e(O,[2,404]),e(Ut,[2,113]),e(Ut,[2,400]),{13:l,16:p,44:215,45:Et,48:[1,591],55:220,82:R,87:d,89:Fe,172:221,185:351,203:536,212:592,231:xt,234:535,236:216,237:222,255:154,257:155,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,309:xe,310:Pe,311:217,312:De},e(Mt,[2,426]),e(It,[2,138]),e(It,[2,139]),{232:[1,593]},e(kt,[2,292]),{47:[1,595],48:[1,594]},e(it,[2,9]),e(Dt,[2,392]),e(Dt,[2,393],{44:39,55:40,307:43,195:341,139:342,194:596,190:597,13:l,16:p,87:d,197:lt,308:f}),e(Dt,[2,110],{272:[1,598]}),e(Wt,[2,397],{201:599,316:600,317:[1,601]}),{314:[1,602]},{29:[1,603]},e(Ue,[2,58]),e($e,[2,445]),e($e,[2,447]),{48:[1,604],272:[1,605]},{48:[1,606]},{272:[1,607]},{272:[1,608]},e(He,[2,99]),e(gt,[2,382]),e([13,16,39,47,48,87,193,197,242,246,250,263,265,272,290,297,298,299,300,301,302,308,314,338,341,342,343,344,345,346],[2,232]),e(He,[2,188]),e(He,[2,189]),{48:[1,609]},{48:[2,468]},{289:[1,610]},{13:l,16:p,55:492,82:R,172:493,255:154,257:155,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,311:494,312:De,315:611},e(me,[2,42]),e(Lt,[2,304]),{13:l,16:p,55:414,82:R,95:612,171:613,172:415,173:416,174:Ot,255:154,257:155,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:Tt},{31:[1,614],45:$t,94:615},e(at,[2,129]),e(wt,[2,421]),{82:[1,616]},{82:[1,617]},e(zt,[2,296]),e(zt,[2,31]),e(zt,[2,32]),{31:[2,17]},{31:[2,276]},{31:[2,18]},{31:[2,278]},e(O,ut,{155:330,153:618,154:619,29:Zt,31:Zt,85:Zt,112:Zt,159:Zt,160:Zt,161:Zt,163:Zt,164:Zt}),e(Xt,[2,358]),e(Ht,[2,75]),e(Ht,[2,76]),{29:Te,57:620},{13:l,16:p,44:39,55:40,87:d,139:621,307:43,308:f},e(Jt,[2,366]),e(Ht,[2,79]),{13:l,16:p,44:136,45:I,46:622,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},e(Ht,[2,91],{336:[1,623]}),e([29,31,85,112,159,160,161,163,164,232,318,335],[2,114],{207:624,193:[1,625]}),e(Yt,[2,117]),{13:l,16:p,44:215,45:Et,55:220,82:R,87:d,89:Fe,172:221,185:351,203:536,211:626,212:627,231:xt,234:535,236:216,237:222,255:154,257:155,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,309:xe,310:Pe,311:217,312:De},e(dt,[2,134]),e(Mt,[2,427]),e(dt,[2,135]),e(kt,[2,26]),{44:628,87:d},e(Dt,[2,106]),e(Dt,[2,394]),e(O,[2,396]),e(Wt,[2,111]),e(Wt,[2,398]),{13:l,16:p,44:39,55:40,87:d,139:342,186:629,190:340,195:341,197:lt,307:43,308:f},e(ft,[2,217]),e(O,Be,{144:248,140:630,143:631,31:[2,343]}),e(He,[2,97]),e(gt,[2,380]),e(He,[2,180]),{13:l,16:p,44:136,45:I,46:632,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},{13:l,16:p,44:136,45:I,46:633,55:133,67:132,68:134,77:131,82:R,87:d,172:135,224:L,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:C,264:130,265:B,266:137,267:139,268:q,269:U,270:k,271:Q,273:V,274:G,275:146,276:$,277:z,278:149,279:X,280:H,283:J,285:K,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:le,346:pe,347:de,348:fe,349:he,350:ye,351:ge},e(He,[2,190]),{290:[1,634]},{314:[1,635]},{13:l,16:p,48:[1,636],55:414,82:R,171:637,172:415,173:416,174:Ot,255:154,257:155,291:150,294:Y,295:W,296:Z,297:ee,298:te,299:re,300:ne,301:ae,302:oe,303:ie,304:se,305:ue,306:ce,307:43,308:f,312:Tt},e(er,[2,305]),e(me,[2,86]),e(Lt,[2,374]),e(St,[2,37]),e(St,[2,38]),e(Ft,[2,72]),e(Ft,[2,360]),e(Ht,[2,77]),{29:Te,57:638},{47:[1,639]},{29:[2,376]},e(Yt,[2,402]),e(Yt,[2,115],{215:10,208:528,214:529,44:530,205:640,13:a,16:a,45:a,197:a,224:a,229:a,308:a,87:d}),e(Yt,[2,118],{272:[1,641]}),e(tr,[2,407],{213:642,319:643,317:[1,644]}),{48:[1,645]},{318:[1,646]},{31:[1,647]},{31:[2,344]},{48:[1,648]},{48:[1,649]},{291:650,303:ie,304:se,305:ue,306:ce},e(Rt,[2,218]),e(Lt,[2,44]),e(er,[2,306]),e(Ht,[2,78]),{44:651,87:d},e(Yt,[2,116]),e(O,[2,406]),e(tr,[2,119]),e(tr,[2,408]),e(s,a,{215:10,205:527,208:528,214:529,44:530,202:652,87:d}),e(kt,[2,27]),e(Wt,[2,230]),e(rr,[2,345],{141:653,335:[1,654]}),e(He,[2,181]),e(He,[2,182]),{48:[2,191]},{48:[1,655]},{318:[1,656]},e(O,Be,{144:248,142:657,143:658,31:nr,112:nr}),e(rr,[2,346]),e(Ht,[2,80]),e(tr,[2,231]),e(yt,[2,67]),e(yt,[2,348])],defaultActions:{5:[2,240],6:[2,241],7:[2,242],9:[2,239],24:[2,1],25:[2,2],26:[2,244],87:[2,282],94:[2,384],100:[2,45],109:[2,325],166:[2,458],263:[2,439],336:[2,258],337:[2,101],487:[2,461],488:[2,462],560:[2,468],574:[2,17],575:[2,276],576:[2,18],577:[2,278],623:[2,376],631:[2,344],650:[2,191]},parseError:function(e,t){if(!t.recoverable){var r=new Error(e);throw r.hash=t,r}this.trace(e)},parse:function(e){var t=this,r=[0],n=[null],a=[],o=this.table,i="",s=0,u=0,c=a.slice.call(arguments,1),l=Object.create(this.lexer),p={yy:{}};for(var d in this.yy)Object.prototype.hasOwnProperty.call(this.yy,d)&&(p.yy[d]=this.yy[d]);l.setInput(e,p.yy),p.yy.lexer=l,p.yy.parser=this,void 0===l.yylloc&&(l.yylloc={});var f=l.yylloc;a.push(f);var h=l.options&&l.options.ranges;"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,g,m,b,v,_,O,T,w=function(){var e;return"number"!=typeof(e=l.lex()||1)&&(e=t.symbols_[e]||e),e},S={};;){if(g=r[r.length-1],this.defaultActions[g]?m=this.defaultActions[g]:(null==y&&(y=w()),m=o[g]&&o[g][y]),void 0===m||!m.length||!m[0]){var j="";for(v in T=[],o[g])this.terminals_[v]&&v>2&&T.push("'"+this.terminals_[v]+"'");j=l.showPosition?"Parse error on line "+(s+1)+":\n"+l.showPosition()+"\nExpecting "+T.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==y?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(j,{text:l.match,token:this.terminals_[y]||y,line:l.yylineno,loc:f,expected:T})}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+y);switch(m[0]){case 1:r.push(y),n.push(l.yytext),a.push(l.yylloc),r.push(m[1]),y=null,u=l.yyleng,i=l.yytext,s=l.yylineno,f=l.yylloc;break;case 2:if(_=this.productions_[m[1]][1],S.$=n[n.length-_],S._$={first_line:a[a.length-(_||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(_||1)].first_column,last_column:a[a.length-1].last_column},h&&(S._$.range=[a[a.length-(_||1)].range[0],a[a.length-1].range[1]]),void 0!==(b=this.performAction.apply(S,[i,u,s,p.yy,m[1],n,a].concat(c))))return b;_&&(r=r.slice(0,-1*_*2),n=n.slice(0,-1*_),a=a.slice(0,-1*_)),r.push(this.productions_[m[1]][0]),n.push(S.$),a.push(S._$),O=o[r[r.length-2]][r[r.length-1]],r.push(O);break;case 3:return!0}}return!0}},or=Cc().Wildcard,ir="http://www.w3.org/1999/02/22-rdf-syntax-ns#",sr=ir+"type",ur=ir+"first",cr=ir+"rest",lr=ir+"nil",pr="http://www.w3.org/2001/XMLSchema#",dr=pr+"integer",fr=pr+"decimal",hr=pr+"double",yr=pr+"boolean",gr="",mr="",br="";function vr(e){return e.toLowerCase()}function _r(e,t){return e.push(t),e}function Or(e,t){return e.push.apply(e,t),e}function Tr(e){e||(e={});for(var t,r=1,n=arguments.length;r<n&&(t=arguments[r]||{});r++)for(var a in t)e[a]=t[a];return e}function wr(){for(var e=[],t=0,r=arguments.length;t<r;t++)e=e.concat.apply(e,arguments[t]);return e}function Sr(e){if("<"===e[0]&&(e=e.substring(1,e.length-1)),/^[a-z][a-z0-9.+-]*:/i.test(e))return e;if(!rn.base)throw new Error("Cannot resolve relative IRI "+e+" because no base IRI was set.");switch(gr!==rn.base&&(gr=rn.base,mr=gr.replace(/[^\/:]*$/,""),br=gr.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),e[0]){case void 0:return gr;case"#":return gr+e;case"?":return gr.replace(/(?:\?.*)?$/,e);case"/":return br+e;default:return mr+e}}function jr(e){if(e){var t=e[0];if("?"===t||"$"===t)return rn.factory.variable(e.substr(1))}return e}function Ar(e,t){return{type:"operation",operator:e,args:t||[]}}function Fr(e,t){var r={expression:"*"===e?new or:e};if(t)for(var n in t)r[n]=t[n];return r}function Er(e,t){return{type:"path",pathType:e,items:t}}function xr(e,t){for(var r,n=0,a=t.length;n<a&&(r=t[n]);n++)e=Ar(r[0],[e,r[1]]);return e}function Pr(e,t){var r,n=[],a=[],o=e.length,i={};if(!o)return null;for(var s=0;s<o&&(r=e[s]);s++)(r.named?a:n).push(r.iri);return i[t||"from"]={default:n,named:a},i}function Dr(e){return parseInt(e,10)}function Mr(e){return"group"===e.type&&1===e.patterns.length?e.patterns[0]:e}function Nr(e,t){return t&&"NamedNode"!==t.termType&&(t=rn.factory.namedNode(t)),rn.factory.literal(e,t)}function Ir(e,t,r){if(!("termType"in t))throw new Error("Nested triples cannot contain paths");return rn.factory.quad(e,t,r)}function Rr(e,t,r,n){var a={};return null!=e&&(a.subject=e),null!=t&&(a.predicate=t),null!=r&&(a.object=r),null!=n&&(a.annotations=n),a}function Lr(e){return"string"==typeof e?e.startsWith("e_")?rn.factory.blankNode(e):rn.factory.blankNode("e_"+e):rn.factory.blankNode("g_"+Cr++)}var Cr=0;rn._resetBlanks=function(){Cr=0};var Br=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,qr={"\\":"\\","'":"'",'"':'"',t:"\t",b:"\b",n:"\n",r:"\r",f:"\f"},Ur=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,kr=String.fromCharCode;function Qr(e,t){e=e.substring(t,e.length-t);try{e=e.replace(Br,function(e,t,r,n){var a;if(t){if(a=parseInt(t,16),isNaN(a))throw new Error;return kr(a)}if(r){if(a=parseInt(r,16),isNaN(a))throw new Error;return a<65535?kr(a):kr(55296+((a-=65536)>>10),56320+(1023&a))}var o=qr[n];if(!o)throw new Error;return o})}catch(r){return""}if(Ur.exec(e))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+e);return e}function Vr(e,t,r){var n=[],a=[];return t.forEach(function(t){let r=null;t.annotation&&(r=t.annotation,t=t.object),n.push(Rr(null,e,t.entity,r)),Or(a,t.triples)}),wr(n,r||[],a)}function Gr(e){return e.variable?e.variable.value:e.value||e.expression.value}function $r(e){if(!e)return[];if("aggregate"===e.type)return[e];if("operation"===e.type){const t=[];for(const r of e.args)t.push(...$r(r));return t}return[]}function zr(e){const t=new Set,r=function(e){e&&("Variable"===e.termType?t.add(e):"operation"===e.type&&e.args.forEach(r))};return r(e),t}function Xr(e,t=1,r=[]){for(const n of e)t>0&&n instanceof Array?Xr(n,t-1,r):r.push(n);return r}function Hr(e){return"Variable"===e.termType}function Jr(e){if(e.triples){const t=[];for(const r of e.triples)Hr(r.subject)&&t.push(r.subject.value),Hr(r.predicate)&&t.push(r.predicate.value),Hr(r.object)&&t.push(r.object.value);return t}if(e.patterns){const t=[];for(const r of e.patterns)t.push(...Jr(r));return t}return[]}function Kr(e){if(!rn.sparqlStar)throw new Error("SPARQL-star support is not enabled");return e}function Yr(e,t,r){for(const n of t){const t=Rr("subject"in n?n.subject:e,n.predicate,n.object);r.push(t),n.annotations&&Yr(Ir(e,n.predicate,n.object),n.annotations,r)}}function Wr(e){if(rn.sparqlStar){const t=[];return e.forEach(e=>{const r=Rr(e.subject,e.predicate,e.object);t.push(r),e.annotations&&Yr(Ir(e.subject,e.predicate,e.object),e.annotations,t)}),t}return e}function Zr(e){for(const t of e){if("graph"===t.type&&"Variable"===t.name.termType)throw new Error("Detected illegal variable in GRAPH");if("bgp"===t.type||"graph"===t.type)for(const e of t.triples)if("Variable"===e.subject.termType||"Variable"===e.predicate.termType||"Variable"===e.object.termType)throw new Error("Detected illegal variable in BGP")}return e}function en(e){for(const t of e)if("bgp"===t.type)for(const e of t.triples)if("BlankNode"===e.subject.termType||"BlankNode"===e.predicate.termType||"BlankNode"===e.object.termType)throw new Error("Detected illegal blank node in BGP");return e}var tn=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var a=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,n,a;if(this.options.backtrack_lexer&&(a={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(a.yylloc.range=this.yylloc.range.slice(0))),(n=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var o in a)this[o]=a[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),o=0;o<a.length;o++)if((r=this._input.match(this.rules[a[o]]))&&(!t||r[0].length>t[0].length)){if(t=r,n=o,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,a[o])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,a[n]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(e,t,r,n){switch(r){case 0:case 125:break;case 1:return 12;case 2:return 15;case 3:return 41;case 4:return 325;case 5:return 326;case 6:return 45;case 7:return 47;case 8:return 48;case 9:return 39;case 10:return 24;case 11:return 28;case 12:return 29;case 13:return 31;case 14:return 32;case 15:return 36;case 16:return 53;case 17:return 327;case 18:return 63;case 19:return 64;case 20:return 70;case 21:return 73;case 22:return 76;case 23:return 78;case 24:return 81;case 25:return 83;case 26:return 85;case 27:return 193;case 28:return 100;case 29:return 328;case 30:return 121;case 31:return 329;case 32:return 330;case 33:return 110;case 34:return 331;case 35:return 109;case 36:return 332;case 37:return 333;case 38:return 113;case 39:return 115;case 40:return 116;case 41:return 131;case 42:return 123;case 43:return 126;case 44:return 128;case 45:return 132;case 46:return 112;case 47:return 334;case 48:return 335;case 49:return 159;case 50:return 161;case 51:return 164;case 52:return 174;case 53:return 160;case 54:return 336;case 55:return 163;case 56:return 312;case 57:return 314;case 58:return 317;case 59:return 318;case 60:return 272;case 61:return 197;case 62:return 337;case 63:return 338;case 64:return 229;case 65:return 340;case 66:return 263;case 67:return 224;case 68:return 231;case 69:return 232;case 70:return 242;case 71:return 246;case 72:return 290;case 73:return 341;case 74:return 342;case 75:return 343;case 76:return 344;case 77:return 345;case 78:return 250;case 79:return 346;case 80:return 265;case 81:return 276;case 82:return 277;case 83:return 268;case 84:return 269;case 85:return 270;case 86:return 271;case 87:return 347;case 88:return 348;case 89:return 273;case 90:return 274;case 91:return 350;case 92:return 349;case 93:return 351;case 94:return 279;case 95:return 280;case 96:return 283;case 97:return 285;case 98:return 289;case 99:return 293;case 100:return 296;case 101:return 13;case 102:return 16;case 103:return 308;case 104:return 309;case 105:return 87;case 106:return 292;case 107:return 82;case 108:return 294;case 109:return 295;case 110:return 297;case 111:return 298;case 112:return 299;case 113:return 300;case 114:return 301;case 115:return 302;case 116:return"EXPONENT";case 117:return 303;case 118:return 304;case 119:return 305;case 120:return 306;case 121:return 89;case 122:return 310;case 123:return 6;case 124:return"INVALID"}},rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:\{\|)/i,/^(?:\|\})/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(SUBJECT|PREDICATE|OBJECT|isTRIPLE))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:TRIPLE)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],inclusive:!0}}};return e}();function rn(){this.yy={}}return ar.lexer=tn,rn.prototype=ar,ar.Parser=rn,new rn}();return Dc=e}var qc,Uc={},kc={};function Qc(){if(qc)return kc;qc=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.BlankNode=void 0;return kc.BlankNode=class{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}},kc}var Vc,Gc={},$c={};function zc(){if(Vc)return $c;Vc=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.DefaultGraph=void 0;class e{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&"DefaultGraph"===e.termType}}return $c.DefaultGraph=e,e.INSTANCE=new e,$c}var Xc,Hc,Jc={},Kc={};function Yc(){if(Xc)return Kc;Xc=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.NamedNode=void 0;return Kc.NamedNode=class{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&"NamedNode"===e.termType&&e.value===this.value}},Kc}function Wc(){if(Hc)return Jc;Hc=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.Literal=void 0;const e=Yc();class t{constructor(e,r){this.termType="Literal",this.value=e,"string"==typeof r?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(e){return!!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&this.datatype.equals(e.datatype)}}return Jc.Literal=t,t.RDF_LANGUAGE_STRING=new e.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new e.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Jc}var Zc,el={};function tl(){if(Zc)return el;Zc=1,Object.defineProperty(el,"__esModule",{value:!0}),el.Quad=void 0;return el.Quad=class{constructor(e,t,r,n){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=r,this.graph=n}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}},el}var rl,nl,al,ol,il,sl,ul={};function cl(){if(rl)return ul;rl=1,Object.defineProperty(ul,"__esModule",{value:!0}),ul.Variable=void 0;return ul.Variable=class{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&"Variable"===e.termType&&e.value===this.value}},ul}function ll(){return al||(al=1,e=Uc,t=Uc&&Uc.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Uc&&Uc.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Qc(),e),r(function(){if(nl)return Gc;nl=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.DataFactory=void 0;const e=Qc(),t=zc(),r=Wc(),n=Yc(),a=tl(),o=cl();let i=0;return Gc.DataFactory=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${i++}_`}namedNode(e){return new n.NamedNode(e)}blankNode(t){return new e.BlankNode(t||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new r.Literal(e,t)}variable(e){return new o.Variable(e)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(e,t,r,n){return new a.Quad(e,t,r,n||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(r.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}},Gc}(),e),r(zc(),e),r(Wc(),e),r(Yc(),e),r(tl(),e),r(cl(),e)),Uc;var e,t,r}function pl(){if(il)return ol;il=1;const{Parser:e}=Bc(),{Generator:t}=function(){if(Ic)return Nc;function e(e){this._options=e=e||{};var t=e.prefixes||{};this._prefixByIri={};var r=[];for(var n in t){var a=t[n];o(a)&&(this._prefixByIri[a]=n,r.push(a))}var i=r.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+i+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=e.sparqlStar,this._indent=o(e.indent)?e.indent:"  ",this._newline=o(e.newline)?e.newline:"\n",this._explicitDatatype=Boolean(e.explicitDatatype)}Ic=1,e.prototype.toQuery=function(e){var t="";return e.queryType&&(t+=e.queryType.toUpperCase()+" "),e.reduced&&(t+="REDUCED "),e.distinct&&(t+="DISTINCT "),e.variables?t+=u(e.variables,void 0,function(e){return/^[?$]/.test(e)?e:i(e)?this.toEntity(e):"("+this.toExpression(e.expression)+" AS "+a(e.variable)+")"},this)+" ":e.template&&(t+=this.group(e.template,!0)+this._newline),e.from&&(t+=this.graphs("FROM ",e.from.default)+this.graphs("FROM NAMED ",e.from.named)),e.where&&(t+="WHERE "+this.group(e.where,!0)+this._newline),e.updates&&(t+=u(e.updates,";"+this._newline,this.toUpdate,this)),e.group&&(t+="GROUP BY "+u(e.group,void 0,function(e){var t=i(e.expression)?this.toEntity(e.expression):"("+this.toExpression(e.expression)+")";return e.variable?"("+t+" AS "+a(e.variable)+")":t},this)+this._newline),e.having&&(t+="HAVING ("+u(e.having,void 0,this.toExpression,this)+")"+this._newline),e.order&&(t+="ORDER BY "+u(e.order,void 0,function(e){var t="("+this.toExpression(e.expression)+")";return e.descending?"DESC "+t:t},this)+this._newline),e.offset&&(t+="OFFSET "+e.offset+this._newline),e.limit&&(t+="LIMIT "+e.limit+this._newline),e.values&&(t+=this.values(e)),(t=this.baseAndPrefixes(e)+t).trim()},e.prototype.baseAndPrefixes=function(e){var t=e.base?"BASE <"+e.base+">"+this._newline:"",r="";for(var n in e.prefixes)(this._options.allPrefixes||this._usedPrefixes[n])&&(r+="PREFIX "+n+": <"+e.prefixes[n]+">"+this._newline);return t+r},e.prototype.toPattern=function(e){var t=e.type||e instanceof Array&&"array"||(e.subject&&e.predicate&&e.object?"triple":"");if(!(t in this))throw new Error("Unknown entry type: "+t);return this[t](e)},e.prototype.triple=function(e){return this.toEntity(e.subject)+" "+this.toEntity(e.predicate)+" "+this.toEntity(e.object)+"."},e.prototype.array=function(e){return u(e,this._newline,this.toPattern,this)},e.prototype.bgp=function(e){return this.encodeTriples(e.triples)},e.prototype.encodeTriples=function(e){if(!e.length)return"";for(var t=[],r=void 0,n=void 0,a=0;a<e.length;a++){var o=e[a];s(o.subject,r)?s(o.predicate,n)?t.push(","):(n=o.predicate,t.push(";"+this._newline,this._indent,this.toEntity(n))):(r&&t.push("."+this._newline),r=o.subject,n=o.predicate,t.push(this.toEntity(r)," ",this.toEntity(n))),t.push(" ",this.toEntity(o.object))}return t.push("."),t.join("")},e.prototype.graph=function(e){return"GRAPH "+this.toEntity(e.name)+" "+this.group(e)},e.prototype.graphs=function(e,t){return t&&0!==t.length?u(t,"",function(t){return e+this.toEntity(t)+this._newline},this):""},e.prototype.group=function(e,t){return-1===(e=!0!==t?this.array(e.patterns||e.triples):this.toPattern("group"!==e.type?e:e.patterns)).indexOf(this._newline)?"{ "+e+" }":"{"+this._newline+this.indent(e)+this._newline+"}"},e.prototype.query=function(e){return this.toQuery(e)},e.prototype.filter=function(e){return"FILTER("+this.toExpression(e.expression)+")"},e.prototype.bind=function(e){return"BIND("+this.toExpression(e.expression)+" AS "+a(e.variable)+")"},e.prototype.optional=function(e){return"OPTIONAL "+this.group(e)},e.prototype.union=function(e){return u(e.patterns,this._newline+"UNION"+this._newline,function(e){return this.group(e,!0)},this)},e.prototype.minus=function(e){return"MINUS "+this.group(e)},e.prototype.values=function(e){var t,r,n=Object.keys(e.values.reduce(function(e,t){for(var r in t)e[r]=!0;return e},{}));return 1===n.length?t=r="":(t="(",r=")"),"VALUES "+t+n.join(" ")+r+" {"+this._newline+u(e.values,this._newline,function(e){return"  "+t+u(n,void 0,function(t){return e[t]?this.toEntity(e[t]):"UNDEF"},this)+r},this)+this._newline+"}"},e.prototype.service=function(e){return"SERVICE "+(e.silent?"SILENT ":"")+this.toEntity(e.name)+" "+this.group(e)},e.prototype.toExpression=function(e){if(i(e))return this.toEntity(e);switch(e.type.toLowerCase()){case"aggregate":return e.aggregation.toUpperCase()+"("+(e.distinct?"DISTINCT ":"")+this.toExpression(e.expression)+("string"==typeof e.separator?'; SEPARATOR = "'+e.separator.replace(t,r)+'"':"")+")";case"functioncall":return this.toEntity(e.function)+"("+u(e.args,", ",this.toExpression,this)+")";case"operation":var n=e.operator.toUpperCase(),a=e.args||[];switch(e.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(i(a[0])?this.toEntity(a[0]):"("+this.toExpression(a[0])+")")+" "+n+" "+(i(a[1])?this.toEntity(a[1]):"("+this.toExpression(a[1])+")");case"!":return"!("+this.toExpression(a[0])+")";case"uplus":return"+("+this.toExpression(a[0])+")";case"uminus":return"-("+this.toExpression(a[0])+")";case"notin":n="NOT IN";case"in":return this.toExpression(a[0])+" "+n+"("+(o(a[1])?a[1]:u(a[1],", ",this.toExpression,this))+")";case"notexists":n="NOT EXISTS";case"exists":return n+" "+this.group(a[0],!0);default:return n+"("+u(a,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+e.type)}},e.prototype.toEntity=function(e){if(i(e))switch(e.termType){case"Wildcard":return"*";case"Variable":return a(e);case"BlankNode":return"_:"+e.value;case"Literal":var n=e.value||"",o=e.language||"",s=e.datatype;if(e='"'+n.replace(t,r)+'"',o)e+="@"+o;else if(s){if(!this._explicitDatatype)switch(s.value){case"http://www.w3.org/2001/XMLSchema#string":return e;case"http://www.w3.org/2001/XMLSchema#integer":if(/^\d+$/.test(n))return n+" "}e+="^^"+this.encodeIRI(s.value)}return e;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return e.graph&&"DefaultGraph"!==e.graph.termType?"<< GRAPH "+this.toEntity(e.graph)+" { "+this.toEntity(e.subject)+" "+this.toEntity(e.predicate)+" "+this.toEntity(e.object)+" }  >>":"<< "+this.toEntity(e.subject)+" "+this.toEntity(e.predicate)+" "+this.toEntity(e.object)+" >>";default:return this.encodeIRI(e.value)}else{var u=e.items.map(this.toEntity,this),c=e.pathType;switch(c){case"^":case"!":return c+u[0];case"*":case"+":case"?":return"("+u[0]+c+")";default:return"("+u.join(c)+")"}}};var t=/["\\\t\n\r\b\f]/g,r=function(e){return n[e]},n={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};function a(e){return"?"+e.value}function o(e){return"string"==typeof e}function i(e){return"string"==typeof e.termType}function s(e,t){if(!e||!i(e))return!1;if(!t||!i(t))return!1;if(e.termType!==t.termType)return!1;switch(e.termType){case"Literal":return e.value===t.value&&e.language===t.language&&s(e.datatype,t.datatype);case"Quad":return s(e.subject,t.subject)&&s(e.predicate,t.predicate)&&s(e.object,t.object)&&s(e.graph,t.graph);default:return e.value===t.value}}function u(e,t,r,n){return e.map(r,n).join(o(t)?t:" ")}return e.prototype.encodeIRI=function(e){var t=this._prefixRegex.exec(e);if(t){var r=this._prefixByIri[t[1]];return this._usedPrefixes[r]=!0,r+":"+t[2]}return"<"+e+">"},e.prototype.toUpdate=function(e){switch(e.type||e.updateType){case"load":return"LOAD"+(e.source?" "+this.toEntity(e.source):"")+(e.destination?" INTO GRAPH "+this.toEntity(e.destination):"");case"insert":return"INSERT DATA "+this.group(e.insert,!0);case"delete":return"DELETE DATA "+this.group(e.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(e.delete,!0);case"insertdelete":return(e.graph?"WITH "+this.toEntity(e.graph)+this._newline:"")+(e.delete.length?"DELETE "+this.group(e.delete,!0)+this._newline:"")+(e.insert.length?"INSERT "+this.group(e.insert,!0)+this._newline:"")+(e.using?this.graphs("USING ",e.using.default):"")+(e.using?this.graphs("USING NAMED ",e.using.named):"")+"WHERE "+this.group(e.where,!0);case"add":case"copy":case"move":return e.type.toUpperCase()+" "+(e.silent?"SILENT ":"")+(e.source.default?"DEFAULT":this.toEntity(e.source.name))+" TO "+this.toEntity(e.destination.name);case"create":case"clear":case"drop":return e.type.toUpperCase()+(e.silent?" SILENT ":" ")+(e.graph.default?"DEFAULT":e.graph.named?"NAMED":e.graph.all?"ALL":"GRAPH "+this.toEntity(e.graph.name));default:throw new Error("Unknown update query type: "+e.type)}},e.prototype.indent=function(e){return e.replace(/^/gm,this._indent)},Nc={Generator:function(t={}){return{stringify:function(r){var n=Object.create(t);return n.prefixes=r.prefixes,new e(n).toQuery(r)},createGenerator:function(){return new e(t)}}}}}(),{Wildcard:r}=Cc(),{DataFactory:n}=ll();return ol={Parser:function({prefixes:t,baseIRI:r,factory:a,pathOnly:o,sparqlStar:i,skipValidation:s,skipUngroupedVariableCheck:u}={}){const c={};for(const e in t??{})c[e]=t[e];const l=new e;return l.parse=function(){return e.base=r||"",e.prefixes=Object.create(c),e.factory=a||new n,e.sparqlStar=Boolean(i),e.pathOnly=Boolean(o),e.skipValidation=Boolean(s)||Boolean(u),e.prototype.parse.apply(l,arguments)},l._resetBlanks=e._resetBlanks,l},Generator:t,Wildcard:r},ol}function dl(){if(sl)return Rc;sl=1;var e=Rc&&Rc.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),t=Rc&&Rc.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=Rc&&Rc.__importStar||function(r){if(r&&r.__esModule)return r;var n={};if(null!=r)for(var a in r)"default"!==a&&Object.prototype.hasOwnProperty.call(r,a)&&e(n,r,a);return t(n,r),n};Object.defineProperty(Rc,"__esModule",{value:!0});const n=r(xc()),o=a(),i=Ac(),s=pl();return Rc.default=class{constructor(e){this.dataFactory=e||new o.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(e,t=!0){return this.flattenMulti({type:n.types.ALT,input:e},t)}createAsk(e){return{type:n.types.ASK,input:e}}createBoundAggregate(e,t,r,n,a){const o=this.createAggregateExpression(t,r,n,a);return o.variable=e,o}createBgp(e){return{type:n.types.BGP,patterns:e}}createConstruct(e,t){return{type:n.types.CONSTRUCT,input:e,template:t}}createDescribe(e,t){return{type:n.types.DESCRIBE,input:e,terms:t}}createDistinct(e){return{type:n.types.DISTINCT,input:e}}createExtend(e,t,r){return{type:n.types.EXTEND,input:e,variable:t,expression:r}}createFrom(e,t,r){return{type:n.types.FROM,input:e,default:t,named:r}}createFilter(e,t){return{type:n.types.FILTER,input:e,expression:t}}createGraph(e,t){return{type:n.types.GRAPH,input:e,name:t}}createGroup(e,t,r){return{type:n.types.GROUP,input:e,variables:t,aggregates:r}}createInv(e){return{type:n.types.INV,path:e}}createJoin(e,t=!0){return this.flattenMulti({type:n.types.JOIN,input:e},t)}createLeftJoin(e,t,r){return r?{type:n.types.LEFT_JOIN,input:[e,t],expression:r}:{type:n.types.LEFT_JOIN,input:[e,t]}}createLink(e){return{type:n.types.LINK,iri:e}}createMinus(e,t){return{type:n.types.MINUS,input:[e,t]}}createNop(){return{type:n.types.NOP}}createNps(e){return{type:n.types.NPS,iris:e}}createOneOrMorePath(e){return{type:n.types.ONE_OR_MORE_PATH,path:e}}createOrderBy(e,t){return{type:n.types.ORDER_BY,input:e,expressions:t}}createPath(e,t,r,a){return a?{type:n.types.PATH,subject:e,predicate:t,object:r,graph:a}:{type:n.types.PATH,subject:e,predicate:t,object:r,graph:this.dataFactory.defaultGraph()}}createPattern(e,t,r,a){const o=this.dataFactory.quad(e,t,r,a);return o.type=n.types.PATTERN,o}createProject(e,t){return{type:n.types.PROJECT,input:e,variables:t}}createReduced(e){return{type:n.types.REDUCED,input:e}}createSeq(e,t=!0){return this.flattenMulti({type:n.types.SEQ,input:e},t)}createService(e,t,r){return{type:n.types.SERVICE,input:e,name:t,silent:Boolean(r)}}createSlice(e,t,r){return t=t||0,void 0!==r?{type:n.types.SLICE,input:e,start:t,length:r}:{type:n.types.SLICE,input:e,start:t}}createUnion(e,t=!0){return this.flattenMulti({type:n.types.UNION,input:e},t)}createValues(e,t){return{type:n.types.VALUES,variables:e,bindings:t}}createZeroOrMorePath(e){return{type:n.types.ZERO_OR_MORE_PATH,path:e}}createZeroOrOnePath(e){return{type:n.types.ZERO_OR_ONE_PATH,path:e}}createAggregateExpression(e,t,r,a){return a?{type:n.types.EXPRESSION,expressionType:n.expressionTypes.AGGREGATE,aggregator:e,expression:t,separator:a,distinct:r}:{type:n.types.EXPRESSION,expressionType:n.expressionTypes.AGGREGATE,aggregator:e,expression:t,distinct:r}}createExistenceExpression(e,t){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.EXISTENCE,not:e,input:t}}createNamedExpression(e,t){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.NAMED,name:e,args:t}}createOperatorExpression(e,t){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.OPERATOR,operator:e,args:t}}createTermExpression(e){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.TERM,term:e}}createWildcardExpression(){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.WILDCARD,wildcard:new s.Wildcard}}createTerm(e){return"$"===e[0]&&(e=e.replace("$","?")),(0,i.stringToTerm)(e,this.dataFactory)}createCompositeUpdate(e){return{type:n.types.COMPOSITE_UPDATE,updates:e}}createDeleteInsert(e,t,r){const a={type:n.types.DELETE_INSERT};return e&&(a.delete=e),t&&(a.insert=t),r&&(a.where=r),a}createLoad(e,t,r){const a={type:n.types.LOAD,source:e};return t&&(a.destination=t),this.addSilent(a,Boolean(r))}createClear(e,t){return this.addSilent({type:n.types.CLEAR,source:e},Boolean(t))}createCreate(e,t){return this.addSilent({type:n.types.CREATE,source:e},Boolean(t))}createDrop(e,t){return this.addSilent({type:n.types.DROP,source:e},Boolean(t))}createAdd(e,t,r){return this.addSilent({type:n.types.ADD,source:e,destination:t},Boolean(r))}createMove(e,t,r){return this.addSilent({type:n.types.MOVE,source:e,destination:t},Boolean(r))}createCopy(e,t,r){return this.addSilent({type:n.types.COPY,source:e,destination:t},Boolean(r))}addSilent(e,t){return t&&(e.silent=t),e}flattenMulti(e,t){if(!t)return e;const r=e.type,n=e.input;let a=[];for(const o of n)o.type===r?a.push(...o.input):a.push(o);return e.input=a,e}},Rc}var fl,hl={},yl={},gl={};var ml,bl,vl,_l,Ol={};function Tl(){return bl||(bl=1,e=yl,t=yl&&yl.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=yl&&yl.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(function(){if(fl)return gl;fl=1,Object.defineProperty(gl,"__esModule",{value:!0}),gl.TRIPLE_TERM_NAMES=gl.QUAD_TERM_NAMES=void 0,gl.getTerms=t,gl.getTermsNested=function e(r,n){const a=[];for(const o of t(r,n))"Quad"===o.termType?e(o,n).forEach(e=>a.push(e)):a.push(o);return a},gl.getNamedTerms=function(e){return[{key:"subject",value:e.subject},{key:"predicate",value:e.predicate},{key:"object",value:e.object},{key:"graph",value:e.graph}]},gl.collectNamedTerms=function(t,r,n){const a={};return t.forEach(e=>a[e.key]=e.value),r&&(a.subject=a.subject||r("subject"),a.predicate=a.predicate||r("predicate"),a.object=a.object||r("object"),a.graph=a.graph||r("graph")),(n||e).quad(a.subject,a.predicate,a.object,a.graph)},gl.forEachTerms=function(e,t){t(e.subject,"subject"),t(e.predicate,"predicate"),t(e.object,"object"),t(e.graph,"graph")},gl.forEachTermsNested=function e(t,r,n=[]){"Quad"===t.subject.termType?e(t.subject,r,[...n,"subject"]):r(t.subject,[...n,"subject"]),"Quad"===t.predicate.termType?e(t.predicate,r,[...n,"predicate"]):r(t.predicate,[...n,"predicate"]),"Quad"===t.object.termType?e(t.object,r,[...n,"object"]):r(t.object,[...n,"object"]),"Quad"===t.graph.termType?e(t.graph,r,[...n,"graph"]):r(t.graph,[...n,"graph"])},gl.filterTerms=function(e,t){const r=[];return t(e.subject,"subject")&&r.push(e.subject),t(e.predicate,"predicate")&&r.push(e.predicate),t(e.object,"object")&&r.push(e.object),t(e.graph,"graph")&&r.push(e.graph),r},gl.filterTermsNested=function e(t,r,n=[]){let a=[];return"Quad"===t.subject.termType?a=[...a,...e(t.subject,r,[...n,"subject"])]:r(t.subject,[...n,"subject"])&&a.push(t.subject),"Quad"===t.predicate.termType?a=[...a,...e(t.predicate,r,[...n,"predicate"])]:r(t.predicate,[...n,"predicate"])&&a.push(t.predicate),"Quad"===t.object.termType?a=[...a,...e(t.object,r,[...n,"object"])]:r(t.object,[...n,"object"])&&a.push(t.object),"Quad"===t.graph.termType?a=[...a,...e(t.graph,r,[...n,"graph"])]:r(t.graph,[...n,"graph"])&&a.push(t.graph),a},gl.filterQuadTermNames=function(e,t){const r=[];return t(e.subject,"subject")&&r.push("subject"),t(e.predicate,"predicate")&&r.push("predicate"),t(e.object,"object")&&r.push("object"),t(e.graph,"graph")&&r.push("graph"),r},gl.filterQuadTermNamesNested=function e(t,r,n=[]){let a=[];const o=[...n,"subject"];"Quad"===t.subject.termType?a=[...a,...e(t.subject,r,o)]:r(t.subject,o)&&a.push(o);const i=[...n,"predicate"];"Quad"===t.predicate.termType?a=[...a,...e(t.predicate,r,i)]:r(t.predicate,i)&&a.push(i);const s=[...n,"object"];"Quad"===t.object.termType?a=[...a,...e(t.object,r,s)]:r(t.object,s)&&a.push(s);const u=[...n,"graph"];return"Quad"===t.graph.termType?a=[...a,...e(t.graph,r,u)]:r(t.graph,u)&&a.push(u),a},gl.mapTerms=function(t,r,n){return(n||e).quad(r(t.subject,"subject"),r(t.predicate,"predicate"),r(t.object,"object"),r(t.graph,"graph"))},gl.mapTermsNested=function t(r,n,a,o=[]){return(a||e).quad("Quad"===r.subject.termType?t(r.subject,n,a,[...o,"subject"]):n(r.subject,[...o,"subject"]),"Quad"===r.predicate.termType?t(r.predicate,n,a,[...o,"predicate"]):n(r.predicate,[...o,"predicate"]),"Quad"===r.object.termType?t(r.object,n,a,[...o,"object"]):n(r.object,[...o,"object"]),"Quad"===r.graph.termType?t(r.graph,n,a,[...o,"graph"]):n(r.graph,[...o,"graph"]))},gl.reduceTerms=function(e,t,r){let n=r;return n=t(n,e.subject,"subject"),n=t(n,e.predicate,"predicate"),n=t(n,e.object,"object"),t(n,e.graph,"graph")},gl.reduceTermsNested=function e(t,r,n,a=[]){let o=n;return o="Quad"===t.subject.termType?e(t.subject,r,o,[...a,"subject"]):r(o,t.subject,[...a,"subject"]),o="Quad"===t.predicate.termType?e(t.predicate,r,o,[...a,"predicate"]):r(o,t.predicate,[...a,"predicate"]),o="Quad"===t.object.termType?e(t.object,r,o,[...a,"object"]):r(o,t.object,[...a,"object"]),o="Quad"===t.graph.termType?e(t.graph,r,o,[...a,"graph"]):r(o,t.graph,[...a,"graph"]),o},gl.everyTerms=r,gl.everyTermsNested=function e(t,r,n=[]){return("Quad"===t.subject.termType?e(t.subject,r,[...n,"subject"]):r(t.subject,[...n,"subject"]))&&("Quad"===t.predicate.termType?e(t.predicate,r,[...n,"predicate"]):r(t.predicate,[...n,"predicate"]))&&("Quad"===t.object.termType?e(t.object,r,[...n,"object"]):r(t.object,[...n,"object"]))&&("Quad"===t.graph.termType?e(t.graph,r,[...n,"graph"]):r(t.graph,[...n,"graph"]))},gl.someTerms=function(e,t){return t(e.subject,"subject")||t(e.predicate,"predicate")||t(e.object,"object")||t(e.graph,"graph")},gl.someTermsNested=function e(t,r,n=[]){return("Quad"===t.subject.termType?e(t.subject,r,[...n,"subject"]):r(t.subject,[...n,"subject"]))||("Quad"===t.predicate.termType?e(t.predicate,r,[...n,"predicate"]):r(t.predicate,[...n,"predicate"]))||("Quad"===t.object.termType?e(t.object,r,[...n,"object"]):r(t.object,[...n,"object"]))||("Quad"===t.graph.termType?e(t.graph,r,[...n,"graph"]):r(t.graph,[...n,"graph"]))},gl.getValueNestedPath=function e(t,r){if(0===r.length)return t;if("Quad"===t.termType)return e(t[r[0]],r.slice(1));throw new Error(`Tried to get ${r[0]} from term of type ${t.termType}`)},gl.matchTerm=n,gl.matchPattern=o,gl.matchPatternComplete=i,gl.matchPatternMappings=function(e,t,n={}){const a={};return function e(t,o){return r(t,(t,r)=>{var i,s;const u=o[r];switch(t.termType){case"Variable":return n.skipVarMapping&&"Variable"===u.termType||(null!==(s=null===(i=a[t.value])||void 0===i?void 0:i.equals(u))&&void 0!==s?s:(a[t.value]=u,!0));case"Quad":return"Quad"===u.termType&&e(t,u);default:return t.equals(u)}})}(t,e)&&(!n.returnMappings||a)};const e=new(a().DataFactory);function t(e,t){return t&&"DefaultGraph"===e.graph.termType?[e.subject,e.predicate,e.object]:[e.subject,e.predicate,e.object,e.graph]}function r(e,t){return t(e.subject,"subject")&&t(e.predicate,"predicate")&&t(e.object,"object")&&t(e.graph,"graph")}function n(e,t){return!t||"Variable"===t.termType||"Quad"===t.termType&&"Quad"===e.termType&&i(e,t)||t.equals(e)}function o(e,t,r,a,o){return n(e.subject,t)&&n(e.predicate,r)&&n(e.object,a)&&n(e.graph,o)}function i(e,t){return o(e,t.subject,t.predicate,t.object,t.graph)}return gl.QUAD_TERM_NAMES=["subject","predicate","object","graph"],gl.TRIPLE_TERM_NAMES=["subject","predicate","object"],gl}(),e),r(function(){if(ml)return Ol;ml=1,Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.TERM_TYPES=void 0,Ol.uniqTerms=function(t){const r={};return t.filter(t=>{const n=(0,e.termToString)(t);return!(n in r)&&(r[n]=!0)})},Ol.getTermsOfType=t,Ol.getNamedNodes=function(e){return t(e,"NamedNode")},Ol.getBlankNodes=function(e){return t(e,"BlankNode")},Ol.getLiterals=function(e){return t(e,"Literal")},Ol.getVariables=function(e){return t(e,"Variable")},Ol.getDefaultGraphs=function(e){return t(e,"DefaultGraph")},Ol.getQuads=function(e){return t(e,"Quad")};const e=Ac();function t(e,t){return e.filter(e=>e.termType===t)}return Ol.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"],Ol}(),e)),yl;var e,t,r}function wl(){if(vl)return hl;vl=1;var e=hl&&hl.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hl,"__esModule",{value:!0});const t=xc(),r=e(dl()),n=Tl();class a{static flatten(e){return Array.prototype.concat(...e).filter(e=>e)}static objectify(e){if(e.termType){if("Quad"===e.termType)return{type:"pattern",termType:"Quad",subject:a.objectify(e.subject),predicate:a.objectify(e.predicate),object:a.objectify(e.object),graph:a.objectify(e.graph)};{let t={termType:e.termType,value:e.value};return e.language&&(t.language=e.language),e.datatype&&(t.datatype=a.objectify(e.datatype)),t}}if(Array.isArray(e))return e.map(e=>a.objectify(e));if(e===Object(e)){let t={};for(let r of Object.keys(e))t[r]=a.objectify(e[r]);return t}return e}static inScopeVariables(e){const r=[];function n(e){r.find(t=>e.value===t.value)||r.push(e)}function o(e){"Variable"===e.subject.termType&&n(e.subject),"Variable"===e.predicate.termType&&n(e.predicate),"Variable"===e.object.termType&&n(e.object),"Variable"===e.graph.termType&&n(e.graph),"Quad"===e.subject.termType&&o(e.subject),"Quad"===e.predicate.termType&&o(e.predicate),"Quad"===e.object.termType&&o(e.object),"Quad"===e.graph.termType&&o(e.graph)}return a.recurseOperation(e,{[t.types.EXPRESSION]:e=>(e.expressionType===t.expressionTypes.AGGREGATE&&e.variable&&n(e.variable),!0),[t.types.EXTEND]:e=>(n(e.variable),!0),[t.types.GRAPH]:e=>("Variable"===e.name.termType&&n(e.name),!0),[t.types.GROUP]:e=>(e.variables.forEach(n),!0),[t.types.PATH]:e=>("Variable"===e.subject.termType&&n(e.subject),"Variable"===e.object.termType&&n(e.object),"Variable"===e.graph.termType&&n(e.graph),"Quad"===e.subject.termType&&o(e.subject),"Quad"===e.object.termType&&o(e.object),"Quad"===e.graph.termType&&o(e.graph),!0),[t.types.PATTERN]:e=>(o(e),!0),[t.types.PROJECT]:e=>(e.variables.forEach(n),!1),[t.types.SERVICE]:e=>("Variable"===e.name.termType&&n(e.name),!0),[t.types.VALUES]:e=>(e.variables.forEach(n),!0)}),r}static recurseOperation(e,r){let n=e,o=!0;const i=r[e.type];if(i&&(o=i(e)),!o)return;let s=e=>a.recurseOperation(e,r);switch(n.type){case t.types.ALT:n.input.map(s);break;case t.types.ASK:s(n.input);break;case t.types.BGP:n.patterns.forEach(s);break;case t.types.CONSTRUCT:s(n.input),n.template.map(s);break;case t.types.DESCRIBE:case t.types.DISTINCT:s(n.input);break;case t.types.EXPRESSION:n.expressionType===t.expressionTypes.EXISTENCE&&s(n.input);break;case t.types.EXTEND:case t.types.FILTER:s(n.input),s(n.expression);break;case t.types.FROM:case t.types.GRAPH:s(n.input);break;case t.types.GROUP:s(n.input),n.aggregates.forEach(s);break;case t.types.INV:s(n.path);break;case t.types.JOIN:n.input.map(s);break;case t.types.LEFT_JOIN:n.input.map(s),n.expression&&s(n.expression);break;case t.types.LINK:break;case t.types.MINUS:n.input.map(s);break;case t.types.NOP:case t.types.NPS:break;case t.types.ONE_OR_MORE_PATH:s(n.path);break;case t.types.ORDER_BY:s(n.input),n.expressions.forEach(s);break;case t.types.PATH:s(n.predicate);break;case t.types.PATTERN:break;case t.types.PROJECT:case t.types.REDUCED:s(n.input);break;case t.types.SEQ:n.input.map(s);break;case t.types.SERVICE:case t.types.SLICE:s(n.input);break;case t.types.UNION:n.input.map(s);break;case t.types.VALUES:break;case t.types.ZERO_OR_MORE_PATH:case t.types.ZERO_OR_ONE_PATH:s(n.path);break;case t.types.COMPOSITE_UPDATE:n.updates.forEach(e=>s(e));break;case t.types.DELETE_INSERT:n.delete&&n.delete.forEach(e=>s(e)),n.insert&&n.insert.forEach(e=>s(e)),n.where&&s(n.where);break;case t.types.LOAD:case t.types.CLEAR:case t.types.CREATE:case t.types.DROP:case t.types.ADD:case t.types.MOVE:case t.types.COPY:break;default:throw new Error(`Unknown Operation type ${n.type}`)}}static mapOperation(e,n,o){let i=e,s=!0,u=!0;o=o||new r.default;const c=n[e.type];if(c){const t=c(e,o);i=t.result,s=t.recurse,u=!1!==t.copyMetadata}let l;if(u&&(i.metadata||e.metadata)&&(l={...i.metadata,...e.metadata}),!s)return l&&(i.metadata=l),i;let p=e=>a.mapOperation(e,n,o);switch(i.type){case t.types.ALT:i=o.createAlt(i.input.map(p));break;case t.types.ASK:i=o.createAsk(p(i.input));break;case t.types.BGP:i=o.createBgp(i.patterns.map(p));break;case t.types.CONSTRUCT:i=o.createConstruct(p(i.input),i.template.map(p));break;case t.types.DESCRIBE:i=o.createDescribe(p(i.input),i.terms);break;case t.types.DISTINCT:i=o.createDistinct(p(i.input));break;case t.types.EXPRESSION:i=a.mapExpression(i,n,o);break;case t.types.EXTEND:i=o.createExtend(p(i.input),i.variable,p(i.expression));break;case t.types.FILTER:i=o.createFilter(p(i.input),p(i.expression));break;case t.types.FROM:i=o.createFrom(p(i.input),[...i.default],[...i.named]);break;case t.types.GRAPH:i=o.createGraph(p(i.input),i.name);break;case t.types.GROUP:i=o.createGroup(p(i.input),[].concat(i.variables),i.aggregates.map(p));break;case t.types.INV:i=o.createInv(p(i.path));break;case t.types.JOIN:i=o.createJoin(i.input.map(p));break;case t.types.LEFT_JOIN:i=o.createLeftJoin(p(i.input[0]),p(i.input[1]),i.expression?p(i.expression):void 0);break;case t.types.LINK:i=o.createLink(i.iri);break;case t.types.MINUS:i=o.createMinus(p(i.input[0]),p(i.input[1]));break;case t.types.NOP:i=o.createNop();break;case t.types.NPS:i=o.createNps([].concat(i.iris));break;case t.types.ONE_OR_MORE_PATH:i=o.createOneOrMorePath(p(i.path));break;case t.types.ORDER_BY:i=o.createOrderBy(p(i.input),i.expressions.map(p));break;case t.types.PATH:i=o.createPath(i.subject,p(i.predicate),i.object,i.graph);break;case t.types.PATTERN:i=o.createPattern(i.subject,i.predicate,i.object,i.graph);break;case t.types.PROJECT:i=o.createProject(p(i.input),[...i.variables]);break;case t.types.REDUCED:i=o.createReduced(p(i.input));break;case t.types.SEQ:i=o.createSeq(i.input.map(p));break;case t.types.SERVICE:i=o.createService(p(i.input),i.name,i.silent);break;case t.types.SLICE:i=o.createSlice(p(i.input),i.start,i.length);break;case t.types.UNION:i=o.createUnion(i.input.map(p));break;case t.types.VALUES:i=o.createValues([].concat(i.variables),i.bindings.map(e=>Object.assign({},e)));break;case t.types.ZERO_OR_MORE_PATH:i=o.createZeroOrMorePath(p(i.path));break;case t.types.ZERO_OR_ONE_PATH:i=o.createZeroOrOnePath(p(i.path));break;case t.types.COMPOSITE_UPDATE:i=o.createCompositeUpdate(i.updates.map(p));break;case t.types.DELETE_INSERT:i=o.createDeleteInsert(i.delete?i.delete.map(p):void 0,i.insert?i.insert.map(p):void 0,i.where?p(i.where):void 0);break;case t.types.LOAD:i=o.createLoad(i.source,i.destination,i.silent);break;case t.types.CLEAR:i=o.createClear(i.source,i.silent);break;case t.types.CREATE:i=o.createCreate(i.source,i.silent);break;case t.types.DROP:i=o.createDrop(i.source,i.silent);break;case t.types.ADD:i=o.createAdd(i.source,i.destination);break;case t.types.MOVE:i=o.createMove(i.source,i.destination);break;case t.types.COPY:i=o.createCopy(i.source,i.destination);break;default:throw new Error(`Unknown Operation type ${i.type}`)}return l&&(i.metadata=l),i}static mapExpression(e,n,o){let i=e,s=!0;o=o||new r.default;const u=n[e.expressionType];if(u&&({result:i,recurse:s}=u(e,o)),!s)return i;let c=e=>a.mapOperation(e,n,o);switch(e.expressionType){case t.expressionTypes.AGGREGATE:return e.variable?o.createBoundAggregate(e.variable,e.aggregator,c(e.expression),e.distinct,e.separator):o.createAggregateExpression(e.aggregator,c(e.expression),e.distinct,e.separator);case t.expressionTypes.EXISTENCE:return o.createExistenceExpression(e.not,c(e.input));case t.expressionTypes.NAMED:return o.createNamedExpression(e.name,e.args.map(c));case t.expressionTypes.OPERATOR:return o.createOperatorExpression(e.operator,e.args.map(c));case t.expressionTypes.TERM:return o.createTermExpression(e.term);case t.expressionTypes.WILDCARD:return o.createWildcardExpression();default:throw new Error(`Unknown Expression type ${e.expressionType}`)}}static cloneOperation(e){return a.mapOperation(e,{})}static cloneExpression(e){return a.mapExpression(e,{})}static createUniqueVariable(e,t,r){let n=0,a=e;for(;t[a];)a=`${e}${n++}`;return r.variable(a)}static isSimpleTerm(e){return void 0!==e.termType&&"Quad"!==e.termType&&"Wildcard"!==e.termType}static isQuad(e){return"Quad"===e.termType}static hasQuadVariables(e){return(0,n.someTermsNested)(e,e=>"Variable"===e.termType)}static isWildcard(e){return"Wildcard"===e.termType}}return hl.default=a,hl}function Sl(){if(_l)return Oc;_l=1;var e=Oc&&Oc.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),t=Oc&&Oc.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=Oc&&Oc.__importStar||function(r){if(r&&r.__esModule)return r;var n={};if(null!=r)for(var a in r)"default"!==a&&Object.prototype.hasOwnProperty.call(r,a)&&e(n,r,a);return t(n,r),n},n=Oc&&Oc.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oc,"__esModule",{value:!0});const a=vc?bc:(vc=1,bc=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,a,o;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;0!==a--;)if(!e(t[a],r[a]))return!1;return!0}if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(a of t.entries())if(!r.has(a[0]))return!1;for(a of t.entries())if(!e(a[1],r.get(a[0])))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(a of t.entries())if(!r.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(r)){if((n=t.length)!=r.length)return!1;for(a=n;0!==a--;)if(t[a]!==r[a])return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;0!==a--;)if(!Object.prototype.hasOwnProperty.call(r,o[a]))return!1;for(a=n;0!==a--;){var i=o[a];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r}),o=Ac(),i=r(xc()),s=n(dl()),u=n(wl()),c=pl().Parser,l=i.types;let p,d=new Set,f=0,h=!1;function y(e,t,r){if(d=new Set,f=0,h=Boolean(t),!e.type)return p.createNop();if("query"!==e.type&&"update"!==e.type)throw new Error("Translate only works on complete query or update objects.");let n;if(b(e),"query"===e.type){n=_({type:"group",patterns:e.where||[]}),n=function(e,t){const r=e,n=[],a={};if(r.variables=r.variables&&r.variables.map(e=>M(e,a)),r.having=r.having&&r.having.map(e=>M(e,a)),r.order=r.order&&r.order.map(e=>M(e,a)),r.group||Object.keys(a).length>0){const e=Object.keys(a).map(e=>function(e,t){if("aggregate"!==e.type||!e.aggregation)throw new Error(`Unexpected input: ${JSON.stringify(e)}`);const r=O(e);return r.variable=t,r}(a[e],p.createTerm(e))),n=[];if(r.group)for(const a of r.group)if(u.default.isSimpleTerm(a.expression))n.push(a.expression);else{const e="variable"in a?a.variable:j();t=p.createExtend(t,e,O(a.expression)),n.push(e)}t=p.createGroup(t,n,e)}if(r.having)for(let i of r.having)t=p.createFilter(t,O(i));e.values&&(t=p.createJoin([t,D(e)]));let o=[];if("SELECT"===e.queryType||"DESCRIBE"===e.queryType)if(e.variables.some(e=>e&&u.default.isWildcard(e)))o=Object.values(v(e)).sort((e,t)=>e.value.localeCompare(t.value));else for(let i of e.variables)m(i)||!("variable"in i)?o.push(i):i.variable&&(o.push(i.variable),n.push(i));for(let i of n)t=p.createExtend(t,i.variable,O(i.expression));r.order&&(t=p.createOrderBy(t,r.order.map(e=>{let t=O(e.expression);return e.descending&&(t=p.createOperatorExpression("desc",[t])),t})));"SELECT"===e.queryType&&(t=p.createProject(t,o));r.distinct&&(t=p.createDistinct(t));r.reduced&&(t=p.createReduced(t));"CONSTRUCT"===e.queryType?t=p.createConstruct(t,(e.template||[]).map(A)):"ASK"===e.queryType?t=p.createAsk(t):"DESCRIBE"===e.queryType&&(t=p.createDescribe(t,o));(r.offset||r.limit)&&(t=p.createSlice(t,r.offset||0,r.limit));r.from&&(t=p.createFrom(t,r.from.default,r.from.named));return t}(e,n)}else"update"===e.type&&(n=1===(a=e).updates.length?N(a.updates[0]):p.createCompositeUpdate(a.updates.map(N)));var a;return r&&(n=R(n)),n}function g(e){return Boolean(null==e?void 0:e.termType)}function m(e){return"Variable"===(null==e?void 0:e.termType)}function b(e){if(g(e))m(e)&&d.add(`?${e.value}`);else if(Array.isArray(e))for(const t of e)b(t);else if(e&&"object"==typeof e)for(let t of Object.keys(e))t.startsWith("?")?d.add(t):t.startsWith("$")&&d.add(`?${t.slice(1)}`),b(e[t])}function v(e){let t={};if((r=e).subject&&r.predicate&&r.object){const r=[v(e.subject),v(e.predicate),v(e.object),e.graph?v(e.graph):{}];Object.assign(t,...r)}else if(g(e))m(e)&&(t[e.value]=e);else if("bgp"===e.type){const r=e.triples;Object.assign(t,...r.map(v))}else if("path"===e.type)Object.assign(t,...e.items.map(v));else if("group"===e.type||"union"===e.type||"optional"===e.type)Object.assign(t,...e.patterns.map(v));else if("service"===e.type||"graph"===e.type)Object.assign(t,v(e.name)),Object.assign(t,...e.patterns.map(v));else if("bind"===e.type)Object.assign(t,v(e.variable));else if("values"===e.type){if(e.values.length>0){const r=Object.keys(e.values[0]).map(e=>p.createTerm(e));Object.assign(t,...r.map(v))}}else if("query"===e.type&&("SELECT"===e.queryType||"DESCRIBE"===e.queryType)){e.where&&e.variables.some(u.default.isWildcard)&&Object.assign(t,...e.where.map(v));for(const r of e.variables)m(r)?Object.assign(t,v(r)):r.variable&&Object.assign(t,v(r.variable));if("SELECT"===e.queryType){if(e.group)for(const r of e.group)r.variable&&Object.assign(t,v(r.variable));if(e.values){const r={type:"values",values:e.values};Object.assign(t,v(r))}}}var r;return t}function _(e){if("bgp"===e.type)return function(e){let t=[],r=[];for(let n of e.triples)if("pathType"in n.predicate){let e=T(n);for(let n of e)n.type===l.PATH?(t.length>0&&r.push(p.createBgp(t)),t=[],r.push(n)):t.push(n)}else t.push(A(n));t.length>0&&r.push(p.createBgp(t));return 1===r.length?r[0]:p.createJoin(r)}(e);if("union"===e.type)return p.createUnion(e.patterns.map(e=>("group"!==e.type&&(e={type:"group",patterns:[e]}),_(e))));if("graph"===e.type){let t=_({type:"group",patterns:e.patterns});return t=h?E(t,e.name):p.createGraph(t,e.name),t}if("values"===e.type)return D(e);if("query"===e.type)return y(e,h,!1);if("group"===e.type){let t=[],r=[];for(let o of e.patterns)("filter"===o.type?t:r).push(o);let n=r.reduce(x,p.createBgp([])),a=t.map(e=>O(e.expression));return a.length>0&&(n=p.createFilter(n,a.reduce((e,t)=>p.createOperatorExpression("&&",[e,t])))),n}throw new Error(`Unexpected type: ${e.type}`)}function O(e){if(u.default.isSimpleTerm(e))return p.createTermExpression(e);if(u.default.isQuad(e))return u.default.hasQuadVariables(e)?p.createOperatorExpression("triple",[O(e.subject),O(e.predicate),O(e.object)]):p.createTermExpression(e);if(u.default.isWildcard(e))return p.createWildcardExpression();if("aggregation"in e)return p.createAggregateExpression(e.aggregation,O(e.expression),Boolean(e.distinct),e.separator);if("function"in e)return p.createNamedExpression(e.function,e.args.map(O));if("operator"in e)return"exists"===e.operator||"notexists"===e.operator?p.createExistenceExpression("notexists"===e.operator,_(e.args[0])):("in"!==e.operator&&"notin"!==e.operator||(e.args=[e.args[0]].concat(e.args[1])),p.createOperatorExpression(e.operator,e.args.map(O)));throw new Error(`Unknown expression: ${JSON.stringify(e)}`)}function T(e){return S(e.subject,w(e.predicate),e.object)}function w(e){if(u.default.isSimpleTerm(e)){if("NamedNode"===e.termType)return p.createLink(e);throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(e)}`)}if("^"===e.pathType)return p.createInv(w(e.items[0]));if("!"===e.pathType){let t,r=[],n=[];t="pathType"in e.items[0]&&"|"===e.items[0].pathType?e.items[0].items:e.items;for(let e of t)if(u.default.isSimpleTerm(e))r.push(e);else{if("^"!==e.pathType)throw new Error(`Unexpected item: ${JSON.stringify(e)}`);n.push(e.items[0])}let a=p.createNps(r),o=p.createInv(p.createNps(n));return 0===n.length?a:0===r.length?o:p.createAlt([a,o])}if("/"===e.pathType)return p.createSeq(e.items.map(w));if("|"===e.pathType)return p.createAlt(e.items.map(w));if("*"===e.pathType)return p.createZeroOrMorePath(w(e.items[0]));if("+"===e.pathType)return p.createOneOrMorePath(w(e.items[0]));if("?"===e.pathType)return p.createZeroOrOnePath(w(e.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(e)}`)}function S(e,t,r){if(t.type===l.LINK)return[p.createPattern(e,t.iri,r)];if(t.type===l.INV)return S(r,t.path,e);if(t.type===l.SEQ){let n=e;return u.default.flatten(t.input.map((e,a)=>{const o=a===t.input.length-1?r:j(),i=S(n,e,o);return"Variable"===o.termType&&(n=o),i}))}return[p.createPath(e,t,r)]}function j(){let e="?var"+f++;return d.has(e)?j():(d.add(e),p.createTerm(e))}function A(e){if("pathType"in e.predicate)throw new Error("Trying to translate property path to quad.");return p.createPattern(e.subject,e.predicate,e.object,e.graph)}Oc.default=function(e,t){let r;if(t=t||{},p=new s.default(t.dataFactory),"string"==typeof e){let n=new c(t);n._resetBlanks(),r=n.parse(e)}else r=e;return y(r,t.quads,t.blankToVariable)};let F=Object.values(l);function E(e,t,r){if(e.type===l.GRAPH){if(r)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");e=E(e.input,e.name)}else if(e.type===l.SERVICE);else if(e.type===l.BGP)e.patterns=e.patterns.map(e=>(r&&(e.subject.equals(t)&&(e.subject=r),e.predicate.equals(t)&&(e.predicate=r),e.object.equals(t)&&(e.object=r)),"DefaultGraph"===e.graph.termType&&(e.graph=t),e));else if(e.type===l.PATH)r&&(e.subject.equals(t)&&(e.subject=r),e.object.equals(t)&&(e.object=r)),"DefaultGraph"===e.graph.termType&&(e.graph=t);else if(e.type!==l.PROJECT||r)if(e.type!==l.EXTEND||r)if(e.type===l.MINUS&&"Variable"===t.termType)e.metadata={graphVariableFromParentScope:t},e.input=[E(e.input[0],t,r),E(e.input[1],t,r)];else for(let n of Object.keys(e))Array.isArray(e[n])?e[n]=e[n].map(e=>E(e,t,r)):F.indexOf(e[n].type)>=0?e[n]=E(e[n],t,r):r&&m(e[n])&&e[n].equals(t)&&(e[n]=r);else e.variable.equals(t)&&(r=j()),e.input=E(e.input,t,r);else e.variables.some(e=>e.equals(t))||(r=j()),e.input=E(e.input,t,r);return e}function x(e,t){if("optional"===t.type){const r=_({type:"group",patterns:t.patterns});e=r.type===l.FILTER?p.createLeftJoin(e,r.input,r.expression):p.createLeftJoin(e,r)}else if("minus"===t.type){const r=_({type:"group",patterns:t.patterns});e=p.createMinus(e,r)}else if("bind"===t.type)e=p.createExtend(e,t.variable,O(t.expression));else if("service"===t.type){const r={type:"group",patterns:t.patterns};e=P(e,p.createService(_(r),t.name,t.silent))}else{e=P(e,_(t))}return e}function P(e,t){return e.type===l.BGP&&t.type===l.BGP?e=p.createBgp([...e.patterns,...t.patterns]):e.type===l.BGP&&0===e.patterns.length?e=t:t.type===l.BGP&&0===t.patterns.length||(e=p.createJoin([e,t])),e}function D(e){let t=(0===e.values.length?[]:Object.keys(e.values[0])).map(p.createTerm.bind(p)),r=e.values.map(e=>{let t=Object.keys(e);t=t.filter(t=>void 0!==e[t]);let r={};for(let n of t)r[n]=e[n];return r});return p.createValues(t,r)}function M(e,t){if("type"in e&&"aggregate"===e.type){let r,n=!1;for(let o of Object.keys(t))if(a(t[o],e)){r=p.createTerm(o),n=!0;break}return n||(r=j(),t[(0,o.termToString)(r)]=e),r}return"expression"in e&&e.expression?{...e,expression:M(e.expression,t)}:"args"in e&&e.args?{...e,args:e.args.map(e=>M(e,t))}:e}function N(e){if("type"in e){if("load"===e.type)return function(e){return p.createLoad(e.source,e.destination,e.silent)}(e);if("clear"===e.type||"create"===e.type||"drop"===e.type)return function(e){let t;t=u.default.isSimpleTerm(e.graph)?e.graph:e.graph.all?"ALL":e.graph.default?"DEFAULT":e.graph.named?"NAMED":e.graph.name;switch(e.type){case"clear":return p.createClear(t,e.silent);case"create":return p.createCreate(t,e.silent);case"drop":return p.createDrop(t,e.silent)}}(e);if("add"===e.type||"copy"===e.type||"move"===e.type)return function(e){const t=e.source.default?"DEFAULT":e.source.name,r=e.destination.default?"DEFAULT":e.destination.name;switch(e.type){case"copy":return p.createCopy(t,r,e.silent);case"move":return p.createMove(t,r,e.silent);case"add":return p.createAdd(t,r,e.silent)}}(e)}else if("insertdelete"===e.updateType||"deletewhere"===e.updateType||"delete"===e.updateType||"insert"===e.updateType)return function(e){if(!h)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");let t,r=[],n=[];e.delete&&(r=u.default.flatten(e.delete.map(t=>I(t,e.graph))));e.insert&&(n=u.default.flatten(e.insert.map(t=>I(t,e.graph))));if(e.where&&e.where.length>0){t=_({type:"group",patterns:e.where});const r=e.using;r?t=p.createFrom(t,r.default,r.named):e.graph&&(t=E(t,e.graph))}else"deletewhere"===e.updateType&&r.length>0&&(t=p.createBgp(r));return p.createDeleteInsert(r.length>0?r:void 0,n.length>0?n:void 0,t)}(e);throw new Error(`Unknown update type ${JSON.stringify(e)}`)}function I(e,t){let r=t;"graph"===e.type&&(r=e.name);let n=e.triples;return r&&(n=n.map(e=>Object.assign(e,{graph:r}))),n.map(A)}function R(e){const t={},r=Array.from(d).reduce((e,t)=>(e[t]=!0,e),{});return u.default.mapOperation(e,{[i.types.DELETE_INSERT]:e=>({result:p.createDeleteInsert(e.delete,e.insert,e.where&&R(e.where)),recurse:!1}),[i.types.PATH]:(e,t)=>({result:t.createPath(n(e.subject),e.predicate,n(e.object),n(e.graph)),recurse:!1}),[i.types.PATTERN]:(e,t)=>({result:t.createPattern(n(e.subject),n(e.predicate),n(e.object),n(e.graph)),recurse:!1}),[i.types.CONSTRUCT]:e=>({result:p.createConstruct(R(e.input),e.template),recurse:!1})});function n(e){if("BlankNode"===e.termType){let n=t[e.value];return n||(n=u.default.createUniqueVariable(e.value,r,p.dataFactory),r[n.value]=!0,t[e.value]=n),n}return"Quad"===e.termType?p.dataFactory.quad(n(e.subject),n(e.predicate),n(e.object),n(e.graph)):e}}return Oc}var jl,Al,Fl={},El={},xl={},Pl={},Dl={};function Ml(){return Al||(Al=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.termToString=e.stringToTerm=e.stringQuadToQuad=e.quadToStringQuad=e.getLiteralValue=e.getLiteralType=e.getLiteralDirection=e.getLiteralLanguage=void 0;const t=function(){if(jl)return Dl;jl=1,Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.termToString=t,Dl.getLiteralValue=r,Dl.getLiteralType=n,Dl.getLiteralLanguage=o,Dl.getLiteralDirection=i,Dl.stringToTerm=s,Dl.quadToStringQuad=function(e){return{subject:t(e.subject),predicate:t(e.predicate),object:t(e.object),graph:t(e.graph)}},Dl.stringQuadToQuad=function(t,r){return(r=r||e).quad(s(t.subject,r),s(t.predicate,r),s(t.object,r),s(t.graph,r))};const e=new(a().DataFactory);function t(e){if(e)switch(e.termType){case"NamedNode":case"DefaultGraph":return e.value;case"BlankNode":return"_:"+e.value;case"Literal":const r=e;return'"'+r.value+'"'+(r.datatype&&"http://www.w3.org/2001/XMLSchema#string"!==r.datatype.value&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"!==r.datatype.value&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"!==r.datatype.value?"^^"+r.datatype.value:"")+(r.language?"@"+r.language:"")+(r.direction?"--"+r.direction:"");case"Quad":return`<<${t(e.subject)} ${t(e.predicate)} ${t(e.object)}${"DefaultGraph"===e.graph.termType?"":" "+t(e.graph)}>>`;case"Variable":return"?"+e.value}}function r(e){const t=/^"([^]*)"/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]}function n(e){const t=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]||(t[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function o(e){const t=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");if(t[1]){let e=t[1].toLowerCase();const r=e.indexOf("--");return r>=0&&(e=e.slice(0,r)),e}return""}function i(e){const t=e.indexOf("--",e.lastIndexOf('"'));if(t>=0){const r=e.slice(t+2,e.length);if("ltr"===r||"rtl"===r)return r;throw new Error(e+" is not a literal with a valid direction")}return""}function s(t,a){if(a=a||e,!t||!t.length)return a.defaultGraph();switch(t[0]){case"_":return a.blankNode(t.substr(2));case"?":if(!a.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return a.variable(t.substr(1));case'"':const e=o(t),u=i(t),c=a.namedNode(n(t));return a.literal(r(t),e?{language:e,direction:u}:c);default:if("<"===t[0]&&t.length>4&&"<"===t[1]&&">"===t[t.length-1]&&">"===t[t.length-2]){const e=t.slice(2,-2).trim();let r=[],n=0,o=0,i=!1;for(let a=0;a<e.length;a++){const s=e[a];if("<"===s&&n++,">"===s){if(0===n)throw new Error("Found closing tag without opening tag in "+t);n--}if('"'===s){let t=!1,r=a;for(;r-- >0&&"\\"===e[r];)t=!t;t||(i=!i)}if(" "===s&&!i&&0===n){for(r.push(e.slice(o,a));" "===e[a+1];)a+=1;o=a+1}}if(0!==n)throw new Error("Found opening tag without closing tag in "+t);if(r.push(e.slice(o,e.length)),3!==r.length&&4!==r.length)throw new Error("Nested quad syntax error "+t);return r=r.map(e=>e.startsWith("<")&&!e.includes(" ")?e.slice(1,-1):e),a.quad(s(r[0]),s(r[1]),s(r[2]),r[3]?s(r[3]):void 0)}return a.namedNode(t)}}return Dl}();Object.defineProperty(e,"getLiteralLanguage",{enumerable:!0,get:function(){return t.getLiteralLanguage}}),Object.defineProperty(e,"getLiteralDirection",{enumerable:!0,get:function(){return t.getLiteralDirection}}),Object.defineProperty(e,"getLiteralType",{enumerable:!0,get:function(){return t.getLiteralType}}),Object.defineProperty(e,"getLiteralValue",{enumerable:!0,get:function(){return t.getLiteralValue}}),Object.defineProperty(e,"quadToStringQuad",{enumerable:!0,get:function(){return t.quadToStringQuad}}),Object.defineProperty(e,"stringQuadToQuad",{enumerable:!0,get:function(){return t.stringQuadToQuad}}),Object.defineProperty(e,"stringToTerm",{enumerable:!0,get:function(){return t.stringToTerm}}),Object.defineProperty(e,"termToString",{enumerable:!0,get:function(){return t.termToString}})}(Pl)),Pl}var Nl,Il={},Rl={};var Ll,Cl,Bl={};function ql(){return Cl||(Cl=1,e=Il,t=Il&&Il.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Il&&Il.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(function(){if(Nl)return Rl;Nl=1,Object.defineProperty(Rl,"__esModule",{value:!0}),Rl.TRIPLE_TERM_NAMES=Rl.QUAD_TERM_NAMES=void 0,Rl.getTerms=t,Rl.getTermsNested=function e(r,n){const a=[];for(const o of t(r,n))"Quad"===o.termType?e(o,n).forEach(e=>a.push(e)):a.push(o);return a},Rl.getNamedTerms=function(e){return[{key:"subject",value:e.subject},{key:"predicate",value:e.predicate},{key:"object",value:e.object},{key:"graph",value:e.graph}]},Rl.collectNamedTerms=function(t,r,n){const a={};return t.forEach(e=>a[e.key]=e.value),r&&(a.subject=a.subject||r("subject"),a.predicate=a.predicate||r("predicate"),a.object=a.object||r("object"),a.graph=a.graph||r("graph")),(n||e).quad(a.subject,a.predicate,a.object,a.graph)},Rl.forEachTerms=function(e,t){t(e.subject,"subject"),t(e.predicate,"predicate"),t(e.object,"object"),t(e.graph,"graph")},Rl.forEachTermsNested=function e(t,r,n=[]){"Quad"===t.subject.termType?e(t.subject,r,[...n,"subject"]):r(t.subject,[...n,"subject"]),"Quad"===t.predicate.termType?e(t.predicate,r,[...n,"predicate"]):r(t.predicate,[...n,"predicate"]),"Quad"===t.object.termType?e(t.object,r,[...n,"object"]):r(t.object,[...n,"object"]),"Quad"===t.graph.termType?e(t.graph,r,[...n,"graph"]):r(t.graph,[...n,"graph"])},Rl.filterTerms=function(e,t){const r=[];return t(e.subject,"subject")&&r.push(e.subject),t(e.predicate,"predicate")&&r.push(e.predicate),t(e.object,"object")&&r.push(e.object),t(e.graph,"graph")&&r.push(e.graph),r},Rl.filterTermsNested=function e(t,r,n=[]){let a=[];return"Quad"===t.subject.termType?a=[...a,...e(t.subject,r,[...n,"subject"])]:r(t.subject,[...n,"subject"])&&a.push(t.subject),"Quad"===t.predicate.termType?a=[...a,...e(t.predicate,r,[...n,"predicate"])]:r(t.predicate,[...n,"predicate"])&&a.push(t.predicate),"Quad"===t.object.termType?a=[...a,...e(t.object,r,[...n,"object"])]:r(t.object,[...n,"object"])&&a.push(t.object),"Quad"===t.graph.termType?a=[...a,...e(t.graph,r,[...n,"graph"])]:r(t.graph,[...n,"graph"])&&a.push(t.graph),a},Rl.filterQuadTermNames=function(e,t){const r=[];return t(e.subject,"subject")&&r.push("subject"),t(e.predicate,"predicate")&&r.push("predicate"),t(e.object,"object")&&r.push("object"),t(e.graph,"graph")&&r.push("graph"),r},Rl.filterQuadTermNamesNested=function e(t,r,n=[]){let a=[];const o=[...n,"subject"];"Quad"===t.subject.termType?a=[...a,...e(t.subject,r,o)]:r(t.subject,o)&&a.push(o);const i=[...n,"predicate"];"Quad"===t.predicate.termType?a=[...a,...e(t.predicate,r,i)]:r(t.predicate,i)&&a.push(i);const s=[...n,"object"];"Quad"===t.object.termType?a=[...a,...e(t.object,r,s)]:r(t.object,s)&&a.push(s);const u=[...n,"graph"];return"Quad"===t.graph.termType?a=[...a,...e(t.graph,r,u)]:r(t.graph,u)&&a.push(u),a},Rl.mapTerms=function(t,r,n){return(n||e).quad(r(t.subject,"subject"),r(t.predicate,"predicate"),r(t.object,"object"),r(t.graph,"graph"))},Rl.mapTermsNested=function t(r,n,a,o=[]){return(a||e).quad("Quad"===r.subject.termType?t(r.subject,n,a,[...o,"subject"]):n(r.subject,[...o,"subject"]),"Quad"===r.predicate.termType?t(r.predicate,n,a,[...o,"predicate"]):n(r.predicate,[...o,"predicate"]),"Quad"===r.object.termType?t(r.object,n,a,[...o,"object"]):n(r.object,[...o,"object"]),"Quad"===r.graph.termType?t(r.graph,n,a,[...o,"graph"]):n(r.graph,[...o,"graph"]))},Rl.reduceTerms=function(e,t,r){let n=r;return n=t(n,e.subject,"subject"),n=t(n,e.predicate,"predicate"),n=t(n,e.object,"object"),t(n,e.graph,"graph")},Rl.reduceTermsNested=function e(t,r,n,a=[]){let o=n;return o="Quad"===t.subject.termType?e(t.subject,r,o,[...a,"subject"]):r(o,t.subject,[...a,"subject"]),o="Quad"===t.predicate.termType?e(t.predicate,r,o,[...a,"predicate"]):r(o,t.predicate,[...a,"predicate"]),o="Quad"===t.object.termType?e(t.object,r,o,[...a,"object"]):r(o,t.object,[...a,"object"]),o="Quad"===t.graph.termType?e(t.graph,r,o,[...a,"graph"]):r(o,t.graph,[...a,"graph"]),o},Rl.everyTerms=r,Rl.everyTermsNested=function e(t,r,n=[]){return("Quad"===t.subject.termType?e(t.subject,r,[...n,"subject"]):r(t.subject,[...n,"subject"]))&&("Quad"===t.predicate.termType?e(t.predicate,r,[...n,"predicate"]):r(t.predicate,[...n,"predicate"]))&&("Quad"===t.object.termType?e(t.object,r,[...n,"object"]):r(t.object,[...n,"object"]))&&("Quad"===t.graph.termType?e(t.graph,r,[...n,"graph"]):r(t.graph,[...n,"graph"]))},Rl.someTerms=function(e,t){return t(e.subject,"subject")||t(e.predicate,"predicate")||t(e.object,"object")||t(e.graph,"graph")},Rl.someTermsNested=function e(t,r,n=[]){return("Quad"===t.subject.termType?e(t.subject,r,[...n,"subject"]):r(t.subject,[...n,"subject"]))||("Quad"===t.predicate.termType?e(t.predicate,r,[...n,"predicate"]):r(t.predicate,[...n,"predicate"]))||("Quad"===t.object.termType?e(t.object,r,[...n,"object"]):r(t.object,[...n,"object"]))||("Quad"===t.graph.termType?e(t.graph,r,[...n,"graph"]):r(t.graph,[...n,"graph"]))},Rl.getValueNestedPath=function e(t,r){if(0===r.length)return t;if("Quad"===t.termType)return e(t[r[0]],r.slice(1));throw new Error(`Tried to get ${r[0]} from term of type ${t.termType}`)},Rl.matchTerm=n,Rl.matchPattern=o,Rl.matchPatternComplete=i,Rl.matchPatternMappings=function(e,t,n={}){const a={};return function e(t,o){return r(t,(t,r)=>{var i,s;const u=o[r];switch(t.termType){case"Variable":return n.skipVarMapping&&"Variable"===u.termType||(null!==(s=null===(i=a[t.value])||void 0===i?void 0:i.equals(u))&&void 0!==s?s:(a[t.value]=u,!0));case"Quad":return"Quad"===u.termType&&e(t,u);default:return t.equals(u)}})}(t,e)&&(!n.returnMappings||a)};const e=new(a().DataFactory);function t(e,t){return t&&"DefaultGraph"===e.graph.termType?[e.subject,e.predicate,e.object]:[e.subject,e.predicate,e.object,e.graph]}function r(e,t){return t(e.subject,"subject")&&t(e.predicate,"predicate")&&t(e.object,"object")&&t(e.graph,"graph")}function n(e,t){return!t||"Variable"===t.termType||"Quad"===t.termType&&"Quad"===e.termType&&i(e,t)||t.equals(e)}function o(e,t,r,a,o){return n(e.subject,t)&&n(e.predicate,r)&&n(e.object,a)&&n(e.graph,o)}function i(e,t){return o(e,t.subject,t.predicate,t.object,t.graph)}return Rl.QUAD_TERM_NAMES=["subject","predicate","object","graph"],Rl.TRIPLE_TERM_NAMES=["subject","predicate","object"],Rl}(),e),r(function(){if(Ll)return Bl;Ll=1,Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.TERM_TYPES=void 0,Bl.uniqTerms=function(t){const r={};return t.filter(t=>{const n=(0,e.termToString)(t);return!(n in r)&&(r[n]=!0)})},Bl.getTermsOfType=t,Bl.getNamedNodes=function(e){return t(e,"NamedNode")},Bl.getBlankNodes=function(e){return t(e,"BlankNode")},Bl.getLiterals=function(e){return t(e,"Literal")},Bl.getVariables=function(e){return t(e,"Variable")},Bl.getDefaultGraphs=function(e){return t(e,"DefaultGraph")},Bl.getQuads=function(e){return t(e,"Quad")};const e=Ml();function t(e,t){return e.filter(e=>e.termType===t)}return Bl.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"],Bl}(),e)),Il;var e,t,r}var Ul,kl,Ql,Vl,Gl,$l={exports:{}};
/**
 * @preserve
 * JS Implementation of incremental MurmurHash3 (r150) (as of May 10, 2013)
 *
 * @author <a href="mailto:jensyt@gmail.com">Jens Taylor</a>
 * @see http://github.com/homebrewing/brauhaus-diff
 * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>
 * @see http://github.com/garycourt/murmurhash-js
 * @author <a href="mailto:aappleby@gmail.com">Austin Appleby</a>
 * @see http://sites.google.com/site/murmurhash/
 */function zl(){return Ul||(Ul=1,e=$l,function(){var t;function r(e,n){var a=this instanceof r?this:t;if(a.reset(n),"string"==typeof e&&e.length>0&&a.hash(e),a!==this)return a}r.prototype.hash=function(e){var t,r,n,a,o;switch(o=e.length,this.len+=o,r=this.k1,n=0,this.rem){case 0:r^=o>n?65535&e.charCodeAt(n++):0;case 1:r^=o>n?(65535&e.charCodeAt(n++))<<8:0;case 2:r^=o>n?(65535&e.charCodeAt(n++))<<16:0;case 3:r^=o>n?(255&e.charCodeAt(n))<<24:0,r^=o>n?(65280&e.charCodeAt(n++))>>8:0}if(this.rem=o+this.rem&3,(o-=this.rem)>0){for(t=this.h1;t=5*(t=(t^=r=13715*(r=(r=11601*r+3432906752*(65535&r)&4294967295)<<15|r>>>17)+461832192*(65535&r)&4294967295)<<13|t>>>19)+3864292196&4294967295,!(n>=o);)r=65535&e.charCodeAt(n++)^(65535&e.charCodeAt(n++))<<8^(65535&e.charCodeAt(n++))<<16,r^=(255&(a=e.charCodeAt(n++)))<<24^(65280&a)>>8;switch(r=0,this.rem){case 3:r^=(65535&e.charCodeAt(n+2))<<16;case 2:r^=(65535&e.charCodeAt(n+1))<<8;case 1:r^=65535&e.charCodeAt(n)}this.h1=t}return this.k1=r,this},r.prototype.result=function(){var e,t;return e=this.k1,t=this.h1,e>0&&(t^=e=13715*(e=(e=11601*e+3432906752*(65535&e)&4294967295)<<15|e>>>17)+461832192*(65535&e)&4294967295),t^=this.len,t=51819*(t^=t>>>16)+2246770688*(65535&t)&4294967295,t=44597*(t^=t>>>13)+3266445312*(65535&t)&4294967295,(t^=t>>>16)>>>0},r.prototype.reset=function(e){return this.h1="number"==typeof e?e:0,this.rem=this.k1=this.len=0,this},t=new r,e.exports=r}()),$l.exports;var e}function Xl(){return Ql||(Ql=1,e=El,t=El&&El.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=El&&El.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(function(){if(kl)return xl;kl=1,Object.defineProperty(xl,"__esModule",{value:!0}),xl.isomorphic=function(e,t){return!!n(e,t)},xl.getBijection=n,xl.getBijectionInner=a,xl.hashValues=i,xl.hasValue=s,xl.getQuadsWithBlankNodes=u,xl.getQuadsWithoutBlankNodes=c,xl.indexGraph=l,xl.deindexGraph=p,xl.uniqGraph=d,xl.getGraphBlankNodes=f,xl.hashTerms=h,xl.hashTerm=y,xl.hashNumber=g,xl.quadToSignature=m,xl.termToSignature=b,xl.isTermGrounded=v;const e=Ml(),t=ql(),r=zl();function n(e,t){const r=l(c(e)),n=l(c(t));if(Object.keys(r).length!==Object.keys(n).length)return null;for(const a in r)if(r[a]!==n[a])return null;return a(d(u(e)),d(u(t)),f(e),f(t))}function a(t,r,n,u,c,l){c||(c={}),l||(l={});const[p,d]=h(t,n,c),[f,y]=h(r,u,l);if(Object.keys(p).length!==Object.keys(f).length)return null;for(const e in p)if(!s(f,p[e]))return null;let m={};for(const a of n){const t=(0,e.termToString)(a),r=d[t];for(const e in y)if(y[e]===r){m[t]=e,delete y[e];break}}if(!o(Object.keys(m).sort(),n.map(e.termToString).sort())||!o(i(m).sort(),u.map(e.termToString).sort())){m=null;for(const o of n){const i=(0,e.termToString)(o);if(!p[i])for(const o of u){const s=(0,e.termToString)(o);if(!f[s]&&d[i]===y[s]){const e=g(i);m=a(t,r,n,u,Object.assign(Object.assign({},p),{[i]:e}),Object.assign(Object.assign({},f),{[s]:e}))}}}}return m}function o(e,t){if(e.length!==t.length)return!1;for(let r=e.length;r--;)if(e[r]!==t[r])return!1;return!0}function i(e){const t=[];for(const r in e)t.push(e[r]);return t}function s(e,t){for(const r in e)if(e[r]===t)return!0;return!1}function u(e){return e.filter(e=>(0,t.someTerms)(e,e=>"BlankNode"===e.termType||"Quad"===e.termType&&(0,t.getTermsNested)(e).some(e=>"BlankNode"===e.termType)))}function c(e){return e.filter(e=>(0,t.everyTerms)(e,e=>"BlankNode"!==e.termType&&!("Quad"===e.termType&&(0,t.getTermsNested)(e).some(e=>"BlankNode"===e.termType))))}function l(t){const r={};for(const n of t)r[JSON.stringify((0,e.quadToStringQuad)(n))]=!0;return r}function p(t){return Object.keys(t).map(t=>(0,e.stringQuadToQuad)(JSON.parse(t)))}function d(e){return p(l(e))}function f(e){return(0,t.uniqTerms)(e.map(e=>(0,t.getBlankNodes)((0,t.getTermsNested)(e))).reduce((e,t)=>e.concat(t),[]))}function h(t,r,n){const a=Object.assign({},n),o={};let i=!0;for(;i;){const n=Object.keys(a).length;for(const i of r){const r=(0,e.termToString)(i);if(!a[r]){const[e,n]=y(i,t,a);e&&(a[r]=n),o[r]=n}}const s=new Map;for(const e in o){const t=o[e];void 0===s.get(t)?s.set(t,e):s.set(t,!1)}for(const[e,t]of s.entries())t&&(a[t]=e);i=n!==Object.keys(a).length}return[a,o]}function y(e,r,n){const a=[];let o=!0;for(const i of r){const r=(0,t.getTermsNested)(i);if(r.some(t=>t.equals(e))){a.push(m(i,n,e));for(const t of r)v(t,n)||t.equals(e)||(o=!1)}}return[o,g(a.sort().join(""))]}function g(e){return r().hash(e).result()}function m(e,r,n){return(0,t.getTerms)(e).map(e=>b(e,r,n)).join("|")}function b(t,r,n){var a;return t.equals(n)?"@self":"BlankNode"===t.termType?(null===(a=r[(0,e.termToString)(t)])||void 0===a?void 0:a.toString())||"@blank":"Quad"===t.termType?`<${m(t,r,n)}>`:(0,e.termToString)(t)}function v(r,n){return"BlankNode"!==r.termType&&!("Quad"===r.termType&&(0,t.getTermsNested)(r).some(e=>!v(e,n)))||!!n[(0,e.termToString)(r)]}return xl}(),e)),El;var e,t,r}function Hl(){if(Vl)return Fl;Vl=1;var e=Fl&&Fl.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),t=Fl&&Fl.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=Fl&&Fl.__importStar||function(r){if(r&&r.__esModule)return r;var n={};if(null!=r)for(var a in r)"default"!==a&&Object.prototype.hasOwnProperty.call(r,a)&&e(n,r,a);return t(n,r),n},n=Fl&&Fl.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.toSparqlJs=Fl.toSparql=void 0;const a=Xl(),o=Ac(),i=pl(),s=r(xc()),u=n(dl()),c=n(wl()),l=s.types,p=s.expressionTypes;let d;const f=new u.default;function h(e){y();let t=g(e=function(e){return x(e,[])}(e));return"group"===t.type?t.patterns[0]:t}function y(){d={project:!1,extend:[],group:[],aggregates:[],order:[]}}function g(e){switch(e.type!==l.EXTEND&&e.type!==l.ORDER_BY&&e.type!==l.GRAPH&&(d.project=!1),e.type){case l.EXPRESSION:return m(e);case l.ASK:return S(e,l.ASK);case l.BGP:return function(e){let t=e.patterns.map(T);return 0===t.length?null:{type:"bgp",triples:t}}(e);case l.CONSTRUCT:return function(e){return{type:"query",prefixes:{},queryType:"CONSTRUCT",template:e.template.map(T),where:c.default.flatten([g(e.input)])}}(e);case l.DESCRIBE:return S(e,l.DESCRIBE);case l.DISTINCT:return function(e){let t=g(e.input);return t.patterns[0].distinct=!0,t}(e);case l.EXTEND:return function(e){if(d.project)return d.extend.push(e),g(e.input);return c.default.flatten([g(e.input),{type:"bind",variable:e.variable,expression:m(e.expression)}])}(e);case l.FROM:return function(e){const t=g(e.input);let r=t;"group"===t.type&&(r=t.patterns[0]);return r.from={default:e.default,named:e.named},t}(e);case l.FILTER:return function(e){return{type:"group",patterns:c.default.flatten([g(e.input),{type:"filter",expression:m(e.expression)}])}}(e);case l.GRAPH:return function(e){return{type:"graph",patterns:c.default.flatten([g(e.input)]),name:e.name}}(e);case l.GROUP:return function(e){const t=g(e.input),r=e.aggregates.map(O);return d.aggregates.push(...r),d.group.push(...e.variables),t}(e);case l.JOIN:return function(e){const t=c.default.flatten(e.input.map(g));return t.reduce((e,t)=>("bgp"!==t.type||0==e.length||"bgp"!==e[e.length-1].type?e.push(t):e[e.length-1].triples.push(...t.triples),e),[])}(e);case l.LEFT_JOIN:return function(e){const t={type:"optional",patterns:[g(e.input[1])]};e.expression&&t.patterns.push({type:"filter",expression:m(e.expression)});return t.patterns=c.default.flatten(t.patterns),c.default.flatten([g(e.input[0]),t])}(e);case l.MINUS:return function(e){let t=g(e.input[1]);"group"===t.type&&(t=t.patterns);Array.isArray(t)||(t=[t]);return c.default.flatten([g(e.input[0]),{type:"minus",patterns:t}])}(e);case l.NOP:return{};case l.ORDER_BY:return function(e){return d.order.push(...e.expressions),g(e.input)}(e);case l.PATH:return function(e){return{type:"bgp",triples:[{subject:e.subject,predicate:b(e.predicate),object:e.object}]}}(e);case l.PATTERN:return T(e);case l.PROJECT:return S(e,l.PROJECT);case l.REDUCED:return function(e){let t=g(e.input);return t.patterns[0].reduced=!0,t}(e);case l.SERVICE:return function(e){let t=g(e.input);"group"===t.type&&(t=t.patterns);Array.isArray(t)||(t=[t]);return{type:"service",name:e.name,silent:e.silent,patterns:t}}(e);case l.SLICE:return function(e){let t=g(e.input),r=t;t.type&&"group"===t.type&&(r=t.patterns[0]);0!==e.start&&(r.offset=e.start);void 0!==e.length&&(r.limit=e.length);return t}(e);case l.UNION:return function(e){return{type:"union",patterns:e.input.map(g).map(_)}}(e);case l.VALUES:return function(e){return{type:"values",values:e.bindings.map(t=>{let r={};for(let n of e.variables){let e=`?${n.value}`;t[e]?r[e]=t[e]:r[e]=void 0}return r})}}(e);case l.COMPOSITE_UPDATE:return function(e){const t=e.updates.map(e=>g(e).updates[0]);return{prefixes:{},type:"update",updates:t}}(e);case l.DELETE_INSERT:return function(e){var t;let r,n=e.where;if(n&&n.type===l.FROM){let e=n;n=e.input,r={default:e.default,named:e.named}}const o=[{updateType:"insertdelete",delete:E(e.delete||[]),insert:E(e.insert||[])}];r&&(o[0].using=r);if(!n||n.type===l.BGP&&0===n.patterns.length)o[0].where=[];else{const e=[];let r=g(x(n,e));if("group"===r.type?o[0].where=r.patterns:o[0].where=[r],e.length>0){if(1!==e.length)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");""!==(null===(t=e[0])||void 0===t?void 0:t.value)&&(o[0].where=[{type:"graph",patterns:o[0].where,name:e[0]}])}}e.delete||e.where?e.insert||e.where?!e.insert&&e.where&&"bgp"===e.where.type&&(0,a.isomorphic)(e.delete,e.where.patterns)&&(delete o[0].where,o[0].updateType="deletewhere"):(delete o[0].insert,delete o[0].where,e.delete.some(e=>"Variable"===e.subject.termType||"Variable"===e.predicate.termType||"Variable"===e.object.termType)?o[0].updateType="deletewhere":o[0].updateType="delete"):(o[0].updateType="insert",delete o[0].delete,delete o[0].where);return{prefixes:{},type:"update",updates:o}}(e);case l.LOAD:return function(e){const t=[{type:"load",silent:Boolean(e.silent),source:e.source}];e.destination&&(t[0].destination=e.destination);return{prefixes:{},type:"update",updates:t}}(e);case l.CLEAR:return function(e){return A(e,"clear")}(e);case l.CREATE:return function(e){return A(e,"create")}(e);case l.DROP:return function(e){return A(e,"drop")}(e);case l.ADD:return function(e){return F(e,"add")}(e);case l.MOVE:return function(e){return F(e,"move")}(e);case l.COPY:return function(e){return F(e,"copy")}(e)}throw new Error(`Unknown Operation type ${e.type}`)}function m(e){switch(e.expressionType){case p.AGGREGATE:return function(e){const t={expression:m(e.expression),type:"aggregate",aggregation:e.aggregator,distinct:e.distinct};e.separator&&(t.separator=e.separator);return t}(e);case p.EXISTENCE:return function(e){return{type:"operation",operator:e.not?"notexists":"exists",args:[{type:"group",patterns:c.default.flatten([g(e.input)])}]}}(e);case p.NAMED:return function(e){return{type:"functionCall",function:e.name,args:e.args.map(m)}}(e);case p.OPERATOR:return function(e){if("desc"===e.operator){const t={expression:m(e.args[0]),descending:!0};return t}const t={type:"operation",operator:e.operator,args:e.args.map(m)};"in"!==t.operator&&"notin"!==t.operator||(t.args=[t.args[0]].concat([t.args.slice(1)]));return t}(e);case p.TERM:return function(e){return e.term}(e);case p.WILDCARD:return function(e){return e.wildcard}(e)}throw new Error(`Unknown Expression Operation type ${e.expressionType}`)}function b(e){switch(e.type){case l.ALT:return function(e){const t=e.input.map(b);if(t.every(e=>"pathType"in e&&"!"===e.pathType))return{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:c.default.flatten(t.map(e=>e.items))}]};return{type:"path",pathType:"|",items:t}}(e);case l.INV:return function(e){if(e.path.type===l.NPS){const t=e.path.iris.map(e=>({type:"path",pathType:"^",items:[e]}));return t.length<=1?{type:"path",pathType:"!",items:t}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:t}]}}return{type:"path",pathType:"^",items:[b(e.path)]}}(e);case l.LINK:return function(e){return e.iri}(e);case l.NPS:return function(e){return e.iris.length<=1?{type:"path",pathType:"!",items:e.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:e.iris}]}}(e);case l.ONE_OR_MORE_PATH:return function(e){return{type:"path",pathType:"+",items:[b(e.path)]}}(e);case l.SEQ:return function(e){return{type:"path",pathType:"/",items:e.input.map(b)}}(e);case l.ZERO_OR_MORE_PATH:return function(e){return{type:"path",pathType:"*",items:[b(e.path)]}}(e);case l.ZERO_OR_ONE_PATH:return function(e){return{type:"path",pathType:"?",items:[b(e.path)]}}(e)}throw new Error(`Unknown Path type ${e.type}`)}function v(e){return(0,o.termToString)(e)}function _(e){return Array.isArray(e)?1===e.length?e[0]:{type:"group",patterns:e}:e}function O(e){return e}function T(e){return{subject:e.subject,predicate:e.predicate,object:e.object}}function w(e,t){let r=c.default.isSimpleTerm(e)?v(e):e;if("string"==typeof r){if(t[r])return t[r]}else if(Array.isArray(e))e=e.map(e=>w(e,t));else for(let n of Object.keys(e))e[n]=w(e[n],t);return e}function S(e,t){const r={type:"query",prefixes:{}},n=r;let a;t===l.PROJECT?(r.queryType="SELECT",a=e.variables):t===l.ASK?r.queryType="ASK":t===l.DESCRIBE&&(r.queryType="DESCRIBE",a=e.terms);const s=d.extend,u=d.group,p=d.aggregates,f=d.order;y(),d.project=!0;let h=c.default.flatten([g(e.input)]);1===h.length&&"group"===h[0].type&&(h=h[0].patterns),r.where=h;let b={};for(let o of d.aggregates)b[v(o.variable)]=m(o);let _={};for(let o=d.extend.length-1;o>=0;--o){let e=d.extend[o];_[v(e.variable)]=w(m(e.expression),b)}d.group.length>0&&(n.group=d.group.map(e=>{let t=v(e);if(_[t]){let r=_[t];return delete _[t],{variable:e,expression:r}}return{expression:e}})),d.order.length>0&&(n.order=d.order.map(g).map(e=>e.descending?e:{expression:e})),a&&(n.variables=a.map(e=>{let t=v(e);if(_[t]){let r=_[t];return delete _[t],{variable:e,expression:r}}return e}),0===n.variables.length&&(n.variables=[new i.Wildcard]));const O=Object.entries(_);if(O.length>0){n.where=n.where||[];for(const[e,t]of O)n.where.push({type:"bind",variable:(0,o.stringToTerm)(e),expression:t})}if(r.where.length>0&&"filter"===r.where[r.where.length-1].type){const e=r.where[r.where.length-1];j(e,Object.keys(b))&&(n.having=c.default.flatten([w(e.expression,b)]),r.where.splice(-1))}return d.extend=s,d.group=u,d.aggregates=p,d.order=f,{type:"group",patterns:[n]}}function j(e,t){return c.default.isSimpleTerm(e)?t.indexOf(v(e))>=0:Array.isArray(e)?e.some(e=>j(e,t)):e===Object(e)?Object.keys(e).some(r=>j(e[r],t)):t.indexOf(e)>=0}function A(e,t){const r=[{type:t,silent:Boolean(e.silent)}];return"DEFAULT"===e.source?r[0].graph={default:!0}:"NAMED"===e.source?r[0].graph={named:!0}:"ALL"===e.source?r[0].graph={all:!0}:r[0].graph={type:"graph",name:e.source},{prefixes:{},type:"update",updates:r}}function F(e,t){const r=[{type:t,silent:Boolean(e.silent)}];return r[0].source="DEFAULT"===e.source?{type:"graph",default:!0}:{type:"graph",name:e.source},r[0].destination="DEFAULT"===e.destination?{type:"graph",default:!0}:{type:"graph",name:e.destination},{prefixes:{},type:"update",updates:r}}function E(e){if(!e)return[];const t={};return e.forEach(e=>{const r=e.graph.value;t[r]||(t[r]=[]),t[r].push(e)}),Object.keys(t).map(e=>""===e?{type:"bgp",triples:t[e].map(T)}:{type:"graph",triples:t[e].map(T),name:t[e][0].graph})}function x(e,t){if(Array.isArray(e))return e.map(e=>x(e,t));if(!e.type)return e;if(e.type===l.DELETE_INSERT)return e;if((e.type===l.PATTERN||e.type===l.PATH)&&e.graph)return t.push(e.graph),""!==e.graph.name?e.type===l.PATTERN?f.createPattern(e.subject,e.predicate,e.object):f.createPath(e.subject,e.predicate,e.object):e;const r={},n={},a={};for(let i of Object.keys(e)){const t=[];if(r[i]=x(e[i],t),t.length>0){n[i]=t;for(const e of t)a[e.value]=e}}const o=Object.keys(a);if(o.length>0)if(1!==o.length||[l.PROJECT,l.SERVICE].includes(e.type)){if(e.type===l.BGP)return function(e,t){var r;const n={};for(let i=0;i<e.patterns.length;++i){const a=e.patterns[i],o=t[i].value;n[o]=null!==(r=n[o])&&void 0!==r?r:{patterns:[],graph:t[i]},n[o].patterns.push(a)}let a=[];for(const[i,{patterns:s,graph:u}]of Object.entries(n)){const e=f.createBgp(s);a.push(""===i?e:f.createGraph(e,u))}let o=a[0];for(let i=1;i<a.length;++i)o=f.createJoin([o,a[i]]);return o}(e,n.patterns);for(let e of Object.keys(n)){const t=r[e];Array.isArray(t)?r[e]=t.map((t,r)=>""===n[e][0].value?t:f.createGraph(t,n[e][r])):""!==n[e][0].value&&(r[e]=f.createGraph(t,n[e][0]))}}else t.push(a[o[0]]);return r}return Fl.toSparql=function(e,t={}){return new i.Generator(t).stringify(h(e))},Fl.toSparqlJs=h,Fl}function Jl(){return Gl||(Gl=1,function(e){var t=_c&&_c.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=_c&&_c.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=_c&&_c.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&t(n,e,a);return r(n,e),n},a=_c&&_c.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.toSparqlJs=e.toSparql=e.Factory=e.Algebra=e.translate=void 0;const o=a(Sl());e.translate=o.default;const i=n(xc());e.Algebra=i;const s=a(dl());e.Factory=s.default;const u=Hl();Object.defineProperty(e,"toSparql",{enumerable:!0,get:function(){return u.toSparql}}),Object.defineProperty(e,"toSparqlJs",{enumerable:!0,get:function(){return u.toSparqlJs}});const c=a(wl());e.Util=c.default}(_c)),_c}var Kl,Yl={},Wl={};function Zl(){if(Kl)return Wl;return Kl=1,Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.asTermType=void 0,Wl.asTermType=function(e){if("namedNode"===e||"literal"===e||"blankNode"===e||"quad"===e)return e},Wl}var ep,tp={};function rp(){if(ep)return tp;ep=1,Object.defineProperty(tp,"__esModule",{value:!0}),tp.Variable=void 0;const e=Eu();return tp.Variable=class{constructor(t){this.expressionType=e.ExpressionType.Variable,this.name=t}},tp}var np,ap={},op={},ip={},sp={};function up(){if(np)return sp;np=1,Object.defineProperty(sp,"__esModule",{value:!0}),sp.BlankNode=void 0;return sp.BlankNode=class{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}},sp}var cp,lp={},pp={};function dp(){if(cp)return pp;cp=1,Object.defineProperty(pp,"__esModule",{value:!0}),pp.DefaultGraph=void 0;class e{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&"DefaultGraph"===e.termType}}return pp.DefaultGraph=e,e.INSTANCE=new e,pp}var fp,hp,yp={},gp={};function mp(){if(fp)return gp;fp=1,Object.defineProperty(gp,"__esModule",{value:!0}),gp.NamedNode=void 0;return gp.NamedNode=class{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&"NamedNode"===e.termType&&e.value===this.value}},gp}function bp(){if(hp)return yp;hp=1,Object.defineProperty(yp,"__esModule",{value:!0}),yp.Literal=void 0;const e=mp();class t{constructor(e,r){this.termType="Literal",this.value=e,"string"==typeof r?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(e){return!!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&this.datatype.equals(e.datatype)}}return yp.Literal=t,t.RDF_LANGUAGE_STRING=new e.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new e.NamedNode("http://www.w3.org/2001/XMLSchema#string"),yp}var vp,_p={};function Op(){if(vp)return _p;vp=1,Object.defineProperty(_p,"__esModule",{value:!0}),_p.Quad=void 0;return _p.Quad=class{constructor(e,t,r,n){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=r,this.graph=n}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}},_p}var Tp,wp,Sp,jp,Ap={};function Fp(){if(Tp)return Ap;Tp=1,Object.defineProperty(Ap,"__esModule",{value:!0}),Ap.Variable=void 0;return Ap.Variable=class{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&"Variable"===e.termType&&e.value===this.value}},Ap}function Ep(){return Sp||(Sp=1,e=ip,t=ip&&ip.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=ip&&ip.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(up(),e),r(function(){if(wp)return lp;wp=1,Object.defineProperty(lp,"__esModule",{value:!0}),lp.DataFactory=void 0;const e=up(),t=dp(),r=bp(),n=mp(),a=Op(),o=Fp();let i=0;return lp.DataFactory=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${i++}_`}namedNode(e){return new n.NamedNode(e)}blankNode(t){return new e.BlankNode(t||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new r.Literal(e,t)}variable(e){return new o.Variable(e)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(e,t,r,n){return new a.Quad(e,t,r,n||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(r.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}},lp}(),e),r(dp(),e),r(bp(),e),r(mp(),e),r(Op(),e),r(Fp(),e)),ip;var e,t,r}function xp(){if(jp)return op;jp=1,Object.defineProperty(op,"__esModule",{value:!0}),op.SparqlOperator=op.TypeURL=op.typedLiteral=op.TypeAlias=void 0;const e=Ep();var t;!function(e){e.SPARQL_NUMERIC="SPARQL_NUMERIC",e.SPARQL_STRINGLY="SPARQL_STRINGLY"}(t||(op.TypeAlias=t={}));const r=new e.DataFactory;var n,a;return op.typedLiteral=function(e,t){return r.literal(e,r.namedNode(t))},function(e){e.XSD_ANY_URI="http://www.w3.org/2001/XMLSchema#anyURI",e.XSD_STRING="http://www.w3.org/2001/XMLSchema#string",e.RDF_LANG_STRING="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",e.XSD_BOOLEAN="http://www.w3.org/2001/XMLSchema#boolean",e.XSD_DATE_TIME="http://www.w3.org/2001/XMLSchema#dateTime",e.XSD_DATE_TIME_STAMP="http://www.w3.org/2001/XMLSchema#dateTimeStamp",e.XSD_DATE="http://www.w3.org/2001/XMLSchema#date",e.XSD_G_MONTH="http://www.w3.org/2001/XMLSchema#gMonth",e.XSD_G_MONTHDAY="http://www.w3.org/2001/XMLSchema#gMonthDay",e.XSD_G_YEAR="http://www.w3.org/2001/XMLSchema#gYear",e.XSD_G_YEAR_MONTH="http://www.w3.org/2001/XMLSchema#gYearMonth",e.XSD_TIME="http://www.w3.org/2001/XMLSchema#time",e.XSD_G_DAY="http://www.w3.org/2001/XMLSchema#gDay",e.XSD_DECIMAL="http://www.w3.org/2001/XMLSchema#decimal",e.XSD_FLOAT="http://www.w3.org/2001/XMLSchema#float",e.XSD_DOUBLE="http://www.w3.org/2001/XMLSchema#double",e.XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",e.XSD_NON_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonPositiveInteger",e.XSD_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#negativeInteger",e.XSD_LONG="http://www.w3.org/2001/XMLSchema#long",e.XSD_INT="http://www.w3.org/2001/XMLSchema#int",e.XSD_SHORT="http://www.w3.org/2001/XMLSchema#short",e.XSD_BYTE="http://www.w3.org/2001/XMLSchema#byte",e.XSD_NON_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonNegativeInteger",e.XSD_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#positiveInteger",e.XSD_UNSIGNED_LONG="http://www.w3.org/2001/XMLSchema#unsignedLong",e.XSD_UNSIGNED_INT="http://www.w3.org/2001/XMLSchema#unsignedInt",e.XSD_UNSIGNED_SHORT="http://www.w3.org/2001/XMLSchema#unsignedShort",e.XSD_UNSIGNED_BYTE="http://www.w3.org/2001/XMLSchema#unsignedByte",e.XSD_NORMALIZED_STRING="http://www.w3.org/2001/XMLSchema#normalizedString",e.XSD_TOKEN="http://www.w3.org/2001/XMLSchema#token",e.XSD_LANGUAGE="http://www.w3.org/2001/XMLSchema#language",e.XSD_NM_TOKEN="http://www.w3.org/2001/XMLSchema#NMTOKEN",e.XSD_NAME="http://www.w3.org/2001/XMLSchema#name",e.XSD_NC_NAME="http://www.w3.org/2001/XMLSchema#NCName",e.XSD_ENTITY="http://www.w3.org/2001/XMLSchema#ENTITY",e.XSD_ID="http://www.w3.org/2001/XMLSchema#ID",e.XSD_ID_REF="http://www.w3.org/2001/XMLSchema#IDREF",e.XSD_DURATION="http://www.w3.org/2001/XMLSchema#duration",e.XSD_YEAR_MONTH_DURATION="http://www.w3.org/2001/XMLSchema#yearMonthDuration",e.XSD_DAY_TIME_DURATION="http://www.w3.org/2001/XMLSchema#dayTimeDuration",e.XSD_UNTYPED_ATOMIC="http://www.w3.org/2001/XMLSchema#untypedAtomic"}(n||(op.TypeURL=n={})),function(e){e.NOT="!",e.UMINUS="uminus",e.UPLUS="uplus",e.LOGICAL_OR="||",e.LOGICAL_AND="&&",e.EQUAL="=",e.NOT_EQUAL="!=",e.LT="<",e.GT=">",e.LTE="<=",e.GTE=">=",e.SAME_TERM="sameterm",e.IN="in",e.NOT_IN="notin",e.MULTIPLICATION="*",e.DIVISION="/",e.ADDITION="+",e.SUBTRACTION="-",e.IS_IRI="isiri",e.IS_URI="isuri",e.IS_BLANK="isblank",e.IS_LITERAL="isliteral",e.IS_NUMERIC="isnumeric",e.STR="str",e.LANG="lang",e.DATATYPE="datatype",e.IRI="iri",e.URI="uri",e.BNODE="bnode",e.STRDT="strdt",e.STRLANG="strlang",e.UUID="uuid",e.STRUUID="struuid",e.STRLEN="strlen",e.SUBSTR="substr",e.UCASE="ucase",e.LCASE="lcase",e.STRSTARTS="strstarts",e.STRENDS="strends",e.CONTAINS="contains",e.STRBEFORE="strbefore",e.STRAFTER="strafter",e.ENCODE_FOR_URI="encode_for_uri",e.CONCAT="concat",e.LANG_MATCHES="langmatches",e.REGEX="regex",e.REPLACE="replace",e.ABS="abs",e.ROUND="round",e.CEIL="ceil",e.FLOOR="floor",e.RAND="rand",e.NOW="now",e.YEAR="year",e.MONTH="month",e.DAY="day",e.HOURS="hours",e.MINUTES="minutes",e.SECONDS="seconds",e.TIMEZONE="timezone",e.TZ="tz",e.MD5="md5",e.SHA1="sha1",e.SHA256="sha256",e.SHA384="sha384",e.SHA512="sha512",e.TRIPLE="triple",e.SUBJECT="subject",e.PREDICATE="predicate",e.OBJECT="object",e.IS_TRIPLE="istriple",e.BOUND="bound",e.IF="if",e.COALESCE="coalesce"}(a||(op.SparqlOperator=a={})),op}var Pp,Dp={};function Mp(){if(Pp)return Dp;Pp=1,Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.NoAggregator=Dp.ExtensionFunctionError=Dp.InvalidExpression=Dp.InvalidArity=Dp.UnexpectedError=Dp.ParseError=Dp.EmptyAggregateError=Dp.IncompatibleLanguageOperation=Dp.InvalidTimezoneCall=Dp.CastError=Dp.InvalidArgumentTypes=Dp.InError=Dp.CoalesceError=Dp.RDFEqualTypeError=Dp.EBVCoercionError=Dp.UnboundVariableError=Dp.InvalidLexicalForm=Dp.isExpressionError=Dp.ExpressionError=void 0;class e extends Error{}Dp.ExpressionError=e,Dp.isExpressionError=function(t){return t instanceof e};Dp.InvalidLexicalForm=class extends e{constructor(e){super(`Invalid lexical form '${i(e)}'`),this.arg=e}};Dp.UnboundVariableError=class extends e{constructor(e,t){super(`Unbound variable '${i(e)}'`),this.variable=e,this.bindings=t}};Dp.EBVCoercionError=class extends e{constructor(e){super(`Cannot coerce term to EBV '${i(e)}'`),this.arg=e}};Dp.RDFEqualTypeError=class extends e{constructor(e){super("Equality test for literals with unsupported datatypes"),this.args=e}};Dp.CoalesceError=class extends e{constructor(e){super("All COALESCE arguments threw errors"),this.errors=e}};Dp.InError=class extends e{constructor(e){super(`Some argument to IN errorred and none where equal. ${e.map(e=>`(${e.toString()}) `).join("and ")}`),this.errors=e}};Dp.InvalidArgumentTypes=class extends e{constructor(e,t){super(`Argument types not valid for operator: '${i(t)}' with '${i(e)}`),this.args=e,this.op=t}};Dp.CastError=class extends e{constructor(e,t){super(`Invalid cast: '${i(e)}' to '${i(t)}'`),this.arg=e}};Dp.InvalidTimezoneCall=class extends e{constructor(e){super(`TIMEZONE call on ${e} which has no timezone`),this.dateString=e}};Dp.IncompatibleLanguageOperation=class extends e{constructor(e,t){super(`Operation on incompatible language literals '${i(e)}' and '${i(t)}'`),this.arg1=e,this.arg2=t}};Dp.EmptyAggregateError=class extends e{constructor(){super("Empty aggregate expression")}};Dp.ParseError=class extends e{constructor(e,t){super(`Failed to parse "${e}" as ${t}.`)}};class t extends Error{constructor(e,t){super(`Programmer Error '${e}'`),this.payload=t}}Dp.UnexpectedError=t;class r extends Error{constructor(e,t){super(`The number of args does not match the arity of the operator '${i(t)}'.`),this.args=e,this.op=t}}Dp.InvalidArity=r;class n extends Error{constructor(e){super(`Invalid SPARQL Expression '${i(e)}'`)}}Dp.InvalidExpression=n;class a extends Error{constructor(e,t){t instanceof Error?super(`Error thrown in ${e}: ${t.message}${t.stack?`\n${t.stack}`:""}`):super(`Error thrown in ${e}`)}}Dp.ExtensionFunctionError=a;class o extends Error{constructor(e){super(`Aggregate expression ${i(e)} found, but no aggregate hook provided.`)}}function i(e){return JSON.stringify(e)}return Dp.NoAggregator=o,Dp}var Np,Ip={};function Rp(){if(Np)return Ip;function e(e,t=2){return e.toLocaleString(void 0,{minimumIntegerDigits:t,useGrouping:!1})}function t(t){return void 0===t.zoneHours||void 0===t.zoneMinutes?"":0===t.zoneHours&&0===t.zoneMinutes?"Z":`${t.zoneHours>=0?`+${e(t.zoneHours)}`:e(t.zoneHours)}:${e(Math.abs(t.zoneMinutes))}`}function r(r){return`${e(r.year,4)}-${e(r.month)}-${e(r.day)}${t(r)}`}function n(r){return`${e(r.hours)}:${e(r.minutes)}:${e(r.seconds)}${t(r)}`}return Np=1,Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.serializeDuration=Ip.serializeTime=Ip.serializeDate=Ip.serializeDateTime=void 0,Ip.serializeDateTime=function(e){return`${r({year:e.year,month:e.month,day:e.day})}T${n(e)}`},Ip.serializeDate=r,Ip.serializeTime=n,Ip.serializeDuration=function(e,t="PT0S"){if(!Object.values(e).some(e=>0!==(e||0)))return t;const r=`${Object.values(e).some(e=>(e||0)<0)?"-":""}P${e.year?`${Math.abs(e.year)}Y`:""}${e.month?`${Math.abs(e.month)}M`:""}${e.day?`${Math.abs(e.day)}D`:""}`;return e.hours||e.minutes||e.seconds?`${r}T${e.hours?`${Math.abs(e.hours)}H`:""}${e.minutes?`${Math.abs(e.minutes)}M`:""}${e.seconds?`${Math.abs(e.seconds)}S`:""}`:r},Ip}var Lp,Cp,Bp,qp,Up={},kp={},Qp={};function Vp(){if(Lp)return Qp;Lp=1,Object.defineProperty(Qp,"__esModule",{value:!0}),Qp.OverloadTree=void 0;const e=nd(),t=$p();return Qp.OverloadTree=class r{constructor(e,t){this.identifier=e,this.implementation=void 0,this.generalOverloads=Object.create(null),this.literalOverLoads=[],this.depth=t??0,this.promotionCount=void 0}getSubtree(e){const r=(0,t.asGeneralType)(e);if(r)return this.generalOverloads[r];for(const[t,n]of this.literalOverLoads)if(e===t)return n}getImplementationExact(e){let t=this;for(const r of e)if(t=t.getSubtree(r),!t)return;return t.implementation}search(t,r,n){let a=n[this.identifier],o=0;for(;o<t.length&&a?.cache;){const r=t[o],n=(0,e.isLiteralTermExpression)(r);a=a.cache[n?n.dataType:r.termType],o++}if(o===t.length&&a?.func)return a.func;const i=[];if(0===t.length)return this.implementation;for(i.push(...this.getSubTreeWithArg(t[0],r).map(e=>({node:e,index:1})));i.length>0;){const{index:e,node:a}=i.pop();if(e===t.length&&a.implementation)return this.addToCache(n,t,a.implementation),a.implementation;i.push(...a.getSubTreeWithArg(t[e],r).map(t=>({node:t,index:e+1})))}}addToCache(t,r,n){function a(e,t){return t in e||(e[t]={}),e[t]}let o=a(t,this.identifier);for(const i of r){const t=(0,e.isLiteralTermExpression)(i),r=t?t.dataType:i.termType;o.cache=o.cache??{},o=a(o.cache,r)}o.func=n}addOverload(e,t){this._addOverload([...e],t,0)}_addOverload(e,n,a){const[o,...i]=e;if(!o)return void((void 0===this.promotionCount||a<=this.promotionCount)&&(this.promotionCount=a,this.implementation=n));let s=this.getSubtree(o);if(!s){const e=new r(this.identifier,this.depth+1),n=(0,t.asGeneralType)(o);n&&(this.generalOverloads[n]=e);const a=(0,t.asOverrideType)(o);a&&this.literalOverLoads.push([a,e]),s=e}if(s._addOverload(i,n,a),t.typePromotion[o])for(const r of t.typePromotion[o])this.addPromotedOverload(r.typeToPromote,n,r.conversionFunction,i,a)}addPromotedOverload(e,t,n,a,o){let i=this.getSubtree(e);if(!i){const t=new r(this.identifier,this.depth+1);this.literalOverLoads.push([e,t]),i=t}i._addOverload(a,e=>r=>t(e)([...r.slice(0,this.depth),n(r[this.depth]),...r.slice(this.depth+1,r.length)]),o+1)}getSubTreeWithArg(r,n){const a=[],o=(0,e.isLiteralTermExpression)(r);if(this.generalOverloads.term&&a.push(this.generalOverloads.term),this.generalOverloads[r.termType]&&a.push(this.generalOverloads[r.termType]),o){const e=(0,t.asKnownLiteralType)(o.dataType);let r;r=e?t.superTypeDictTable[e]:(0,t.getSuperTypes)(o.dataType,n);const i=this.literalOverLoads.filter(([e,t])=>e in r).map(([e,t])=>[r[e],t]);i.sort(([e,t],[r,n])=>e-r),a.push(...i.map(([e,t])=>t))}return a}},Qp}function Gp(){if(Cp)return kp;Cp=1,Object.defineProperty(kp,"__esModule",{value:!0}),kp.expressionToVar=kp.dateTime=kp.langString=kp.string=kp.double=kp.float=kp.decimal=kp.integer=kp.bool=kp.Builder=kp.declare=void 0;const e=ls(),t=nd(),r=nd(),n=xp(),a=xp(),o=Mp(),i=Vp();kp.declare=function(e){return new s(e)};class s{constructor(e){this.overloadTree=new i.OverloadTree(e),this.collected=!1}collect(){if(this.collected)throw new Error("Builders can only be collected once!");return this.collected=!0,this.overloadTree}static wrapInvalidLexicalProtected(t){return n=>a=>{for(const[t,i]of a.entries())if(i instanceof r.NonLexicalLiteral)throw new o.InvalidLexicalForm(a[t].toRDF(n.context.getSafe(e.KeysInitQuery.dataFactory)));return t(n)(a)}}set(e,t,r=!0){return this.overloadTree.addOverload(e,r?s.wrapInvalidLexicalProtected(t):t),this}copy({from:e,to:t}){const r=this.overloadTree.getImplementationExact(e);if(!r)throw new o.UnexpectedError("Tried to copy implementation, but types not found",{from:e,to:t});return this.set(t,r)}onUnary(e,t,r=!0){return this.set([e],e=>([r])=>t(e)(r),r)}onUnaryTyped(e,t,r=!0){return this.set([e],e=>([r])=>t(e)(r.typedValue),r)}onBinary(e,t,r=!0){return this.set(e,e=>([r,n])=>t(e)(r,n),r)}onBinaryTyped(e,t,r=!0){return this.set(e,e=>([r,n])=>t(e)(r.typedValue,n.typedValue),r)}onTernaryTyped(e,t,r=!0){return this.set(e,e=>([r,n,a])=>t(e)(r.typedValue,n.typedValue,a.typedValue),r)}onTernary(e,t,r=!0){return this.set(e,e=>([r,n,a])=>t(e)(r,n,a),r)}onQuaternaryTyped(e,t,r=!0){return this.set(e,e=>([r,n,a,o])=>t(e)(r.typedValue,n.typedValue,a.typedValue,o.typedValue),r)}onTerm1(e,t=!1){return this.set(["term"],t=>([r])=>e(t)(r),t)}onTerm3(e){return this.set(["term","term","term"],t=>([r,n,a])=>e(t)(r,n,a))}onQuad1(e){return this.set(["quad"],t=>([r])=>e(t)(r))}onLiteral1(e,t=!0){return this.set(["literal"],t=>([r])=>e(t)(r),t)}onBoolean1(e,t=!0){return this.set([n.TypeURL.XSD_BOOLEAN],t=>([r])=>e(t)(r),t)}onBoolean1Typed(e,t=!0){return this.set([n.TypeURL.XSD_BOOLEAN],t=>([r])=>e(t)(r.typedValue),t)}onString1(e,t=!0){return this.set([n.TypeURL.XSD_STRING],t=>([r])=>e(t)(r),t)}onString1Typed(e,t=!0){return this.set([n.TypeURL.XSD_STRING],t=>([r])=>e(t)(r.typedValue),t)}onLangString1(e,t=!0){return this.set([n.TypeURL.RDF_LANG_STRING],t=>([r])=>e(t)(r),t)}onStringly1(e,t=!0){return this.set([n.TypeAlias.SPARQL_STRINGLY],t=>([r])=>e(t)(r),t)}onStringly1Typed(e,t=!0){return this.set([n.TypeAlias.SPARQL_STRINGLY],t=>([r])=>e(t)(r.typedValue),t)}onNumeric1(e,t=!0){return this.set([n.TypeAlias.SPARQL_NUMERIC],t=>([r])=>e(t)(r),t)}onDateTime1(e,t=!0){return this.set([n.TypeURL.XSD_DATE_TIME],t=>([r])=>e(t)(r),t)}numericConverter(e,t=!0){const r=t=>r=>e(t)(r.typedValue);return this.onUnary(a.TypeURL.XSD_INTEGER,e=>t=>c(r(e)(t)),t).onUnary(a.TypeURL.XSD_DECIMAL,e=>t=>l(r(e)(t)),t).onUnary(a.TypeURL.XSD_FLOAT,e=>t=>p(r(e)(t)),t).onUnary(a.TypeURL.XSD_DOUBLE,e=>t=>d(r(e)(t)),t)}arithmetic(e,t=!0){const r=t=>(r,n)=>e(t)(r.typedValue,n.typedValue);return this.onBinary([a.TypeURL.XSD_INTEGER,a.TypeURL.XSD_INTEGER],e=>(t,n)=>c(r(e)(t,n)),t).onBinary([a.TypeURL.XSD_DECIMAL,a.TypeURL.XSD_DECIMAL],e=>(t,n)=>l(r(e)(t,n)),t).onBinary([a.TypeURL.XSD_FLOAT,a.TypeURL.XSD_FLOAT],e=>(t,n)=>p(r(e)(t,n)),t).onBinary([a.TypeURL.XSD_DOUBLE,a.TypeURL.XSD_DOUBLE],e=>(t,n)=>d(r(e)(t,n)),t)}numberTest(e){return this.numeric(t=>([r,n])=>u(e(t)(r.typedValue,n.typedValue)))}stringTest(e,t=!0){return this.set([n.TypeURL.XSD_STRING,n.TypeURL.XSD_STRING],t=>([r,n])=>u(e(t)(r.typedValue,n.typedValue)),t)}booleanTest(e,t=!0){return this.set([n.TypeURL.XSD_BOOLEAN,n.TypeURL.XSD_BOOLEAN],t=>([r,n])=>u(e(t)(r.typedValue,n.typedValue)),t)}dateTimeTest(e,t=!0){return this.set([n.TypeURL.XSD_DATE_TIME,n.TypeURL.XSD_DATE_TIME],t=>([r,n])=>u(e(t)(r.typedValue,n.typedValue)),t)}numeric(e){return this.set([n.TypeAlias.SPARQL_NUMERIC,n.TypeAlias.SPARQL_NUMERIC],e)}}function u(e){return new t.BooleanLiteral(e)}function c(e){return new t.IntegerLiteral(e)}function l(e){return new t.DecimalLiteral(e)}function p(e){return new t.FloatLiteral(e)}function d(e){return new t.DoubleLiteral(e)}return kp.Builder=s,kp.bool=u,kp.integer=c,kp.decimal=l,kp.float=p,kp.double=d,kp.string=function(e){return new t.StringLiteral(e)},kp.langString=function(e,r){return new t.LangStringLiteral(e,r)},kp.dateTime=function(e,r){return new t.DateTimeLiteral(e,r)},kp.expressionToVar=function(e,t){return e.variable(t.name.slice(1))},kp}function $p(){return Bp||(Bp=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.typePromotion=e.isSubTypeOf=e.getSuperTypeDict=e.isInternalSubType=e.asGeneralType=e.asOverrideType=e.asKnownLiteralType=e.asTypeAlias=e.typeAliasCheck=e.extensionTableInit=e.getSuperTypes=e.superTypeDictTable=e.extensionTableInput=void 0;const t=nd(),r=Gp(),n=xp();function a(t,r){const n=r.cache.get(t);if(n)return n;const o=r.discoverer(t);if("term"===o){const e=Object.create(null);return e.__depth=0,e[t]=0,r.cache.set(t,e),e}let i;const u=s(o);return i=u?{...e.superTypeDictTable[u]}:{...a(o,r)},i.__depth++,i[t]=i.__depth,r.cache.set(t,i),i}function o(){for(const[t,r]of Object.entries(e.extensionTableInput)){const n=t;e.superTypeDictTable[n]||i(n,r,e.superTypeDictTable)}}function i(t,r,n){if("term"===r||void 0===r){const e=Object.create(null);return e.__depth=0,e[t]=0,void(n[t]=e)}n[r]||i(r,e.extensionTableInput[r],n),n[t]={...n[r],[t]:n[r].__depth+1,__depth:n[r].__depth+1}}function s(t){if(t in e.superTypeDictTable)return t}function u(t,r){const n=s(t);return n?e.superTypeDictTable[n]:a(t,r)}e.extensionTableInput={[n.TypeURL.XSD_DATE_TIME_STAMP]:n.TypeURL.XSD_DATE_TIME,[n.TypeURL.XSD_DAY_TIME_DURATION]:n.TypeURL.XSD_DURATION,[n.TypeURL.XSD_YEAR_MONTH_DURATION]:n.TypeURL.XSD_DURATION,[n.TypeURL.RDF_LANG_STRING]:n.TypeAlias.SPARQL_STRINGLY,[n.TypeURL.XSD_STRING]:n.TypeAlias.SPARQL_STRINGLY,[n.TypeURL.XSD_NORMALIZED_STRING]:n.TypeURL.XSD_STRING,[n.TypeURL.XSD_TOKEN]:n.TypeURL.XSD_NORMALIZED_STRING,[n.TypeURL.XSD_LANGUAGE]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NM_TOKEN]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NAME]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NC_NAME]:n.TypeURL.XSD_NAME,[n.TypeURL.XSD_ENTITY]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_ID]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_ID_REF]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_UNTYPED_ATOMIC]:n.TypeURL.XSD_STRING,[n.TypeURL.XSD_DOUBLE]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_FLOAT]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_DECIMAL]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_INTEGER]:n.TypeURL.XSD_DECIMAL,[n.TypeURL.XSD_NON_POSITIVE_INTEGER]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_NEGATIVE_INTEGER]:n.TypeURL.XSD_NON_POSITIVE_INTEGER,[n.TypeURL.XSD_LONG]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_INT]:n.TypeURL.XSD_LONG,[n.TypeURL.XSD_SHORT]:n.TypeURL.XSD_INT,[n.TypeURL.XSD_BYTE]:n.TypeURL.XSD_SHORT,[n.TypeURL.XSD_NON_NEGATIVE_INTEGER]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_POSITIVE_INTEGER]:n.TypeURL.XSD_NON_NEGATIVE_INTEGER,[n.TypeURL.XSD_UNSIGNED_LONG]:n.TypeURL.XSD_NON_NEGATIVE_INTEGER,[n.TypeURL.XSD_UNSIGNED_INT]:n.TypeURL.XSD_UNSIGNED_LONG,[n.TypeURL.XSD_UNSIGNED_SHORT]:n.TypeURL.XSD_UNSIGNED_INT,[n.TypeURL.XSD_UNSIGNED_BYTE]:n.TypeURL.XSD_UNSIGNED_SHORT,[n.TypeURL.XSD_DATE_TIME]:"term",[n.TypeURL.XSD_BOOLEAN]:"term",[n.TypeURL.XSD_DATE]:"term",[n.TypeURL.XSD_G_MONTH]:"term",[n.TypeURL.XSD_G_MONTHDAY]:"term",[n.TypeURL.XSD_G_YEAR]:"term",[n.TypeURL.XSD_G_YEAR_MONTH]:"term",[n.TypeURL.XSD_TIME]:"term",[n.TypeURL.XSD_G_DAY]:"term",[n.TypeURL.XSD_DURATION]:"term",[n.TypeAlias.SPARQL_NUMERIC]:"term",[n.TypeAlias.SPARQL_STRINGLY]:"term",[n.TypeURL.XSD_ANY_URI]:"term"},e.superTypeDictTable=Object.create(null),e.getSuperTypes=a,e.extensionTableInit=o,o(),e.typeAliasCheck=Object.create(null),function(){for(const t of Object.values(n.TypeAlias))e.typeAliasCheck[t]=!0}(),e.asTypeAlias=function(t){if(t in e.typeAliasCheck)return t},e.asKnownLiteralType=s,e.asOverrideType=function(e){if(s(e)??"term"===e)return e},e.asGeneralType=function(e){if("term"===e||(0,t.asTermType)(e))return e},e.isInternalSubType=function(t,r){return"term"!==t&&e.superTypeDictTable[t]&&void 0!==e.superTypeDictTable[t][r]},e.getSuperTypeDict=u,e.isSubTypeOf=function(e,t,r){return"term"!==e&&void 0!==u(e,r)[t]},e.typePromotion={[n.TypeURL.XSD_STRING]:[{typeToPromote:n.TypeURL.XSD_ANY_URI,conversionFunction:e=>(0,r.string)(e.str())}],[n.TypeURL.XSD_DOUBLE]:[{typeToPromote:n.TypeURL.XSD_FLOAT,conversionFunction:e=>(0,r.double)(e.typedValue)},{typeToPromote:n.TypeURL.XSD_DECIMAL,conversionFunction:e=>(0,r.double)(e.typedValue)}],[n.TypeURL.XSD_FLOAT]:[{typeToPromote:n.TypeURL.XSD_DECIMAL,conversionFunction:e=>(0,r.float)(e.typedValue)}]}}(Up)),Up}function zp(){if(qp)return ap;qp=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.isNonLexicalLiteral=ap.NonLexicalLiteral=ap.YearMonthDurationLiteral=ap.DayTimeDurationLiteral=ap.DurationLiteral=ap.DateLiteral=ap.TimeLiteral=ap.DateTimeLiteral=ap.StringLiteral=ap.LangStringLiteral=ap.BooleanLiteral=ap.DoubleLiteral=ap.FloatLiteral=ap.DecimalLiteral=ap.IntegerLiteral=ap.NumericLiteral=ap.Literal=ap.isLiteralTermExpression=ap.DefaultGraph=ap.Quad=ap.BlankNode=ap.NamedNode=ap.Term=void 0;const e=Eu(),t=xp(),r=xp(),n=Mp(),a=Rp(),o=$p();let i=class{constructor(){this.expressionType=e.ExpressionType.Term}str(){throw new n.InvalidArgumentTypes([this],t.SparqlOperator.STR)}coerceEBV(){throw new n.EBVCoercionError(this)}};ap.Term=i;ap.NamedNode=class extends i{constructor(e){super(),this.value=e,this.termType="namedNode"}toRDF(e){return e.namedNode(this.value)}str(){return this.value}};ap.BlankNode=class extends i{constructor(e){super(),this.termType="blankNode",this.value=e}toRDF(e){return"string"==typeof this.value?e.blankNode(this.value):this.value}};ap.Quad=class extends i{constructor(e,t,r,n){super(),this.subject=e,this.predicate=t,this.object=r,this.graph=n,this.termType="quad"}toRDF(e){return e.quad(this.subject.toRDF(e),this.predicate.toRDF(e),this.object.toRDF(e),this.graph.toRDF(e))}str(){return`Quad: [${this.subject.str()}, ${this.predicate.str()}, ${this.object.str()}, ${this.graph.str()}]`}};ap.DefaultGraph=class extends i{constructor(){super(),this.termType="defaultGraph"}toRDF(e){return e.defaultGraph()}str(){return"DefaultGraph"}},ap.isLiteralTermExpression=function(e){if("literal"===e.termType)return e};class s extends i{constructor(e,t,r,n){super(),this.typedValue=e,this.dataType=t,this.strValue=r,this.language=n,this.termType="literal"}toRDF(e){return e.literal(this.strValue??this.str(),this.language??e.namedNode(this.dataType))}str(){return this.strValue??this.typedValue.toString()}}ap.Literal=s;class u extends s{constructor(e,t,r,n){super(e,t,r,n),this.typedValue=e,this.strValue=r,this.language=n}coerceEBV(){return Boolean(this.typedValue)}toRDF(e){const t=super.toRDF(e);return Number.isFinite(this.typedValue)||(t.value=t.value.replace("Infinity","INF")),t}str(){return this.strValue??this.specificFormatter(this.typedValue)}}ap.NumericLiteral=u;ap.IntegerLiteral=class extends u{constructor(e,t,n,a){super(e,t??r.TypeURL.XSD_INTEGER,n,a),this.typedValue=e,this.strValue=n,this.language=a}specificFormatter(e){return e.toFixed(0)}};ap.DecimalLiteral=class extends u{constructor(e,t,n,a){super(e,t??r.TypeURL.XSD_DECIMAL,n,a),this.typedValue=e,this.strValue=n,this.language=a}specificFormatter(e){return e.toString()}};ap.FloatLiteral=class extends u{constructor(e,t,n,a){super(e,t??r.TypeURL.XSD_FLOAT,n,a),this.typedValue=e,this.strValue=n,this.language=a}specificFormatter(e){return e.toString()}};ap.DoubleLiteral=class extends u{constructor(e,t,n,a){super(e,t??r.TypeURL.XSD_DOUBLE,n,a),this.typedValue=e,this.strValue=n,this.language=a}specificFormatter(e){if(!Number.isFinite(e))return e>0?"INF":e<0?"-INF":"NaN";const t=e.toExponential(),[r,n]=t.split("e"),a=n.replace(/\+/u,"");return`${r.includes(".")?r:`${r}.0`}E${a}`}};ap.BooleanLiteral=class extends s{constructor(e,t,n){super(e,n??r.TypeURL.XSD_BOOLEAN,t),this.typedValue=e,this.strValue=t}coerceEBV(){return this.typedValue}};ap.LangStringLiteral=class extends s{constructor(e,t,n){super(e,n??r.TypeURL.RDF_LANG_STRING,e,t),this.typedValue=e,this.language=t}coerceEBV(){return this.str().length>0}};ap.StringLiteral=class extends s{constructor(e,t){super(e,t??r.TypeURL.XSD_STRING,e),this.typedValue=e}coerceEBV(){return this.str().length>0}};ap.DateTimeLiteral=class extends s{constructor(e,t,n){super(e,n??r.TypeURL.XSD_DATE_TIME,t),this.typedValue=e,this.strValue=t}str(){return(0,a.serializeDateTime)(this.typedValue)}};ap.TimeLiteral=class extends s{constructor(e,t,n){super(e,n??r.TypeURL.XSD_TIME,t),this.typedValue=e,this.strValue=t}str(){return(0,a.serializeTime)(this.typedValue)}};ap.DateLiteral=class extends s{constructor(e,t,n){super(e,n??r.TypeURL.XSD_DATE,t),this.typedValue=e,this.strValue=t}str(){return(0,a.serializeDate)(this.typedValue)}};class c extends s{constructor(e,t,n){super(e,n??r.TypeURL.XSD_DURATION,t),this.typedValue=e,this.strValue=t}str(){return(0,a.serializeDuration)(this.typedValue)}}ap.DurationLiteral=c;ap.DayTimeDurationLiteral=class extends c{constructor(e,t,n){super(e,t,n??r.TypeURL.XSD_DAY_TIME_DURATION),this.typedValue=e,this.strValue=t}};ap.YearMonthDurationLiteral=class extends s{constructor(e,t,n){super(e,n??r.TypeURL.XSD_YEAR_MONTH_DURATION,t),this.typedValue=e,this.strValue=t}str(){return(0,a.serializeDuration)(this.typedValue,"P0M")}};class l extends s{constructor(e,t,r,n,a){super({toString:()=>"undefined"},t,n,a),this.openWorldType=r}coerceEBV(){if((0,o.isSubTypeOf)(this.dataType,r.TypeURL.XSD_BOOLEAN,this.openWorldType)||(0,o.isSubTypeOf)(this.dataType,r.TypeAlias.SPARQL_NUMERIC,this.openWorldType))return!1;throw new n.EBVCoercionError(this)}toRDF(e){return e.literal(this.str(),this.language??e.namedNode(this.dataType))}str(){return this.strValue??""}}return ap.NonLexicalLiteral=l,ap.isNonLexicalLiteral=function(e){if(e instanceof l)return e},ap}var Xp,Hp={};function Jp(){if(Xp)return Hp;Xp=1,Object.defineProperty(Hp,"__esModule",{value:!0}),Hp.Operator=void 0;const e=Eu();return Hp.Operator=class{constructor(t,r,n){this.name=t,this.args=r,this.apply=n,this.expressionType=e.ExpressionType.Operator}},Hp}var Kp,Yp={};function Wp(){if(Kp)return Yp;Kp=1,Object.defineProperty(Yp,"__esModule",{value:!0}),Yp.Aggregate=void 0;const e=Eu();return Yp.Aggregate=class{constructor(t,r){this.name=t,this.expression=r,this.expressionType=e.ExpressionType.Aggregate}},Yp}var Zp,ed,td={};function rd(){if(Zp)return td;Zp=1,Object.defineProperty(td,"__esModule",{value:!0}),td.Existence=void 0;const e=Eu();return td.Existence=class{constructor(t){this.expression=t,this.expressionType=e.ExpressionType.Existence}},td}function nd(){return ed||(ed=1,e=Yl,t=Yl&&Yl.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Yl&&Yl.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Zl(),e),r(rp(),e),r(zp(),e),r(Jp(),e),r(Wp(),e),r(rd(),e)),Yl;var e,t,r}var ad,od={},id={};function sd(){if(ad)return id;function e(e){return{day:e.day??0,hours:e.hours??0,minutes:e.minutes??0,seconds:e.seconds??0}}function t(e){return{year:e.year??0,month:e.month??0}}function r(r){return{...e(r),...t(r)}}function n(e){return{...e,day:e.day??1,hours:e.hours??0,month:e.month??1,year:e.year??0,seconds:e.seconds??0,minutes:e.minutes??0}}function a(e){const t=new Date(e.year,e.month-1,e.day,e.hours,e.minutes,Math.trunc(e.seconds),e.seconds%1*1e3);if(e.year>=0&&e.year<100){const e=1900;t.setFullYear(t.getFullYear()-e)}return t}return ad=1,Object.defineProperty(id,"__esModule",{value:!0}),id.extractTimeZone=id.extractRawTimeZone=id.dayTimeDurationsToSeconds=id.yearMonthDurationsToMonths=id.trimToDayTimeDuration=id.trimToYearMonthDuration=id.toUTCDate=id.toJSDate=id.negateDuration=id.toDateTimeRepresentation=id.defaultedDateTimeRepresentation=id.simplifyDurationRepresentation=id.defaultedDurationRepresentation=id.defaultedYearMonthDurationRepresentation=id.defaultedDayTimeDurationRepresentation=void 0,id.defaultedDayTimeDurationRepresentation=e,id.defaultedYearMonthDurationRepresentation=t,id.defaultedDurationRepresentation=r,id.simplifyDurationRepresentation=function(e){const t=r(e),n={},a=t.year+Math.trunc(t.month/12);a&&(n.year=a,t.month%=12),t.month&&(n.month=t.month);const o=t.day+Math.trunc(t.hours/24)+Math.trunc(t.minutes/1440)+Math.trunc(t.seconds/86400);o&&(n.day=o,t.hours%=24,t.minutes%=1440,t.seconds%=86400);const i=t.hours+Math.trunc(t.minutes/60)+Math.trunc(t.seconds/3600);i&&(n.hours=i,t.minutes%=60,t.seconds%=3600);const s=t.minutes+Math.trunc(t.seconds/60);return s&&(n.minutes=s,t.seconds%=60),t.seconds&&(n.seconds=t.seconds),n},id.defaultedDateTimeRepresentation=n,id.toDateTimeRepresentation=function({date:e,timeZone:t}){return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds(),zoneHours:t.zoneHours,zoneMinutes:t.zoneMinutes}},id.negateDuration=function(e){return{year:void 0===e.year?void 0:-1*e.year,month:void 0===e.month?void 0:-1*e.month,day:void 0===e.day?void 0:-1*e.day,hours:void 0===e.hours?void 0:-1*e.hours,minutes:void 0===e.minutes?void 0:-1*e.minutes,seconds:void 0===e.seconds?void 0:-1*e.seconds}},id.toJSDate=a,id.toUTCDate=function(e,t){const r=a(n(e)),o=r.getTimezoneOffset(),i=e.zoneHours??t.zoneHours,s=e.zoneMinutes??t.zoneMinutes;return new Date(r.getTime()-60*(o+60*i+s)*1e3)},id.trimToYearMonthDuration=function(e){return{year:e.year,month:e.month}},id.trimToDayTimeDuration=function(e){return{day:e.day,hours:e.hours,minutes:e.minutes,seconds:e.seconds}},id.yearMonthDurationsToMonths=function(e){return 12*e.year+e.month},id.dayTimeDurationsToSeconds=function(e){return 60*(60*(24*e.day+e.hours)+e.minutes)+e.seconds},id.extractRawTimeZone=function(e){return/(Z|([+-]\d\d:\d\d))?$/u.exec(e)[0]},id.extractTimeZone=function(e){return{zoneHours:e.getTimezoneOffset()/60,zoneMinutes:e.getTimezoneOffset()%60}},id}var ud,cd,ld,pd={};function dd(){if(ud)return pd;ud=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.elapsedDuration=pd.addDurationToDateTime=pd.maximumDayInMonthFor=void 0;const e=sd();function t(e,t,r=0){const n=e-r,a=t-r,o=Math.floor(n/a);return{intDiv:o,remainder:e-o*a}}function r(e,r){const{intDiv:n,remainder:a}=t(r,13,1),o=e+n;return[1,3,5,7,8,10,12].includes(a)?31:[4,6,9,11].includes(a)?30:2===a&&(0===t(o,400).remainder||0!==t(o,100).remainder&&0===t(o,4).remainder)?29:28}return pd.maximumDayInMonthFor=r,pd.addDurationToDateTime=function(e,n){const a={...e};let o=t(e.month+n.month,13,1);for(a.month=o.remainder,a.year=e.year+n.year+o.intDiv,o=t(e.seconds+n.seconds,60),a.seconds=o.remainder,o=t(e.minutes+n.minutes+o.intDiv,60),a.minutes=o.remainder,o=t(e.hours+n.hours+o.intDiv,24),a.hours=o.remainder,a.day=e.day+n.day+o.intDiv;;){let e;if(a.day<1)a.day+=r(a.year,a.month-1),e=-1;else{if(!(a.day>r(a.year,a.month)))break;a.day-=r(a.year,a.month),e=1}o=t(a.month+e,13,1),a.month=o.remainder,a.year+=o.intDiv}return a},pd.elapsedDuration=function(t,r,n){const a=(0,e.toUTCDate)(t,n),o=(0,e.toUTCDate)(r,n),i=a.getTime()-o.getTime();return{day:Math.floor(i/864e5),hours:Math.floor(i%864e5/36e5),minutes:Math.floor(i%36e5/6e4),seconds:i%6e4}},pd}function fd(){if(cd)return od;cd=1,Object.defineProperty(od,"__esModule",{value:!0}),od.parseDayTimeDuration=od.parseYearMonthDuration=od.parseDuration=od.parseTime=od.parseDate=od.parseDateTime=od.parseXSDDecimal=od.parseXSDFloat=void 0;const e=sd(),t=Mp(),r=dd();function n(e){if(""===e)return{zoneHours:void 0,zoneMinutes:void 0};if("Z"===e)return{zoneHours:0,zoneMinutes:0};const t=e.replaceAll(/^([+|-])(\d\d):(\d\d)$/gu,"$11!$2!$3").split("!").map(Number);return{zoneHours:t[0]*t[1],zoneMinutes:t[0]*t[2]}}function a(e){const a=e.replaceAll(/^(-)?([123456789]*\d{4})-(\d\d)-(\d\d)(Z|([+-]\d\d:\d\d))?$/gu,"$11!$2!$3!$4!$5");if(a===e)throw new t.ParseError(e,"date");const o=a.split("!"),i=o.slice(0,-1).map(Number),s={year:i[0]*i[1],month:i[2],day:i[3],...n(o[4])};if(!(s.month>=1&&s.month<=12&&s.day>=1&&s.day<=(0,r.maximumDayInMonthFor)(s.year,s.month)))throw new t.ParseError(e,"date");return s}function o(e){const r=e.replaceAll(/^(\d\d):(\d\d):(\d\d(\.\d+)?)(Z|([+-]\d\d:\d\d))?$/gu,"$1!$2!$3!$5");if(r===e)throw new t.ParseError(e,"time");const a=r.split("!"),o=a.slice(0,-1).map(Number),i={hours:o[0],minutes:o[1],seconds:o[2],...n(a[3])};if(i.seconds>=60||i.minutes>=60||i.hours>24||24===i.hours&&(0!==i.minutes||0!==i.seconds))throw new t.ParseError(e,"time");return i}function i(r){const[n,a]=r.split("T"),o=n.replaceAll(/^(-)?P(\d+Y)?(\d+M)?(\d+D)?$/gu,"$11S!$2!$3!$4");if(o===n)throw new t.ParseError(r,"duration");const i=o.split("!");if(void 0!==a){const e=a.replaceAll(/^(\d+H)?(\d+M)?(\d+(\.\d+)?S)?$/gu,"$1!$2!$3");if(""===a||a===e)throw new t.ParseError(r,"duration");i.push(...e.split("!"))}const s=i.map(e=>e.slice(0,-1));if(!s.slice(1).some(Boolean))throw new t.ParseError(r,"duration");const u=Number(s[0]);return(0,e.simplifyDurationRepresentation)({year:s[1]?u*Number(s[1]):void 0,month:s[2]?u*Number(s[2]):void 0,day:s[3]?u*Number(s[3]):void 0,hours:s[4]?u*Number(s[4]):void 0,minutes:s[5]?u*Number(s[5]):void 0,seconds:s[6]?u*Number(s[6]):void 0})}return od.parseXSDFloat=function(e){const t=Number(e);return Number.isNaN(t)?"NaN"===e?Number.NaN:"INF"===e||"+INF"===e?Number.POSITIVE_INFINITY:"-INF"===e?Number.NEGATIVE_INFINITY:void 0:t},od.parseXSDDecimal=function(e){const t=Number(e);return Number.isNaN(t)?void 0:t},od.parseDateTime=function(e){const[r,n]=e.split("T");if(void 0===n)throw new t.ParseError(e,"dateTime");return{...a(r),...o(n)}},od.parseDate=a,od.parseTime=function(e){const t=o(e);return t.hours%=24,t},od.parseDuration=i,od.parseYearMonthDuration=function(e){const r=i(e);if(["hours","minutes","seconds","day"].some(e=>Boolean(r[e])))throw new t.ParseError(e,"yearMonthDuration");return r},od.parseDayTimeDuration=function(e){const r=i(e);if(["year","month"].some(e=>Boolean(r[e])))throw new t.ParseError(e,"dayTimeDuration");return r},od}function hd(){if(ld)return Gu;ld=1,Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.TermTransformer=void 0;const e=mc(),t=Jl(),r=nd(),n=xp(),a=Mp(),o=Mp(),i=fd(),s=fd(),u=$p();return Gu.TermTransformer=class{constructor(e){this.superTypeProvider=e}transformRDFTermUnsafe(e){return this.transformTerm({term:e,type:t.Algebra.types.EXPRESSION,expressionType:t.Algebra.expressionTypes.TERM})}transformTerm(t){if(!t.term)throw new a.InvalidExpression(t);switch(t.term.termType){case"Variable":return new r.Variable(e.termToString(t.term));case"Literal":return this.transformLiteral(t.term);case"NamedNode":return new r.NamedNode(t.term.value);case"BlankNode":return new r.BlankNode(t.term.value);case"Quad":return new r.Quad(this.transformRDFTermUnsafe(t.term.subject),this.transformRDFTermUnsafe(t.term.predicate),this.transformRDFTermUnsafe(t.term.object),this.transformRDFTermUnsafe(t.term.graph));case"DefaultGraph":return new r.DefaultGraph}}transformLiteral(e){if(!e.datatype||[null,void 0,""].includes(e.datatype.value))return e.language?new r.LangStringLiteral(e.value,e.language):new r.StringLiteral(e.value);const t=e.datatype.value,a=(0,u.getSuperTypeDict)(t,this.superTypeProvider);try{if(n.TypeURL.XSD_STRING in a)return new r.StringLiteral(e.value,t);if(n.TypeURL.RDF_LANG_STRING in a)return new r.LangStringLiteral(e.value,e.language);if(n.TypeURL.XSD_YEAR_MONTH_DURATION in a)return new r.YearMonthDurationLiteral((0,i.parseYearMonthDuration)(e.value),e.value,t);if(n.TypeURL.XSD_DAY_TIME_DURATION in a)return new r.DayTimeDurationLiteral((0,i.parseDayTimeDuration)(e.value),e.value,t);if(n.TypeURL.XSD_DURATION in a)return new r.DurationLiteral((0,i.parseDuration)(e.value),e.value,t);if(n.TypeURL.XSD_DATE_TIME in a){const n=new Date(e.value);return Number.isNaN(n.getTime())?new r.NonLexicalLiteral(void 0,t,this.superTypeProvider,e.value):new r.DateTimeLiteral((0,i.parseDateTime)(e.value),e.value,t)}if(n.TypeURL.XSD_DATE in a)return new r.DateLiteral((0,i.parseDate)(e.value),e.value,t);if(n.TypeURL.XSD_TIME in a)return new r.TimeLiteral((0,i.parseTime)(e.value),e.value,t);if(n.TypeURL.XSD_BOOLEAN in a)return"true"!==e.value&&"false"!==e.value&&"1"!==e.value&&"0"!==e.value?new r.NonLexicalLiteral(void 0,t,this.superTypeProvider,e.value):new r.BooleanLiteral("true"===e.value||"1"===e.value,e.value);if(n.TypeURL.XSD_DECIMAL in a){const o=s.parseXSDDecimal(e.value);return void 0===o?new r.NonLexicalLiteral(void 0,t,this.superTypeProvider,e.value):n.TypeURL.XSD_INTEGER in a?new r.IntegerLiteral(o,t,e.value):new r.DecimalLiteral(o,t,e.value)}const o=n.TypeURL.XSD_FLOAT in a,u=n.TypeURL.XSD_DOUBLE in a;if(o||u){const n=s.parseXSDFloat(e.value);return void 0===n?new r.NonLexicalLiteral(void 0,t,this.superTypeProvider,e.value):o?new r.FloatLiteral(n,t,e.value):new r.DoubleLiteral(n,t,e.value)}return new r.Literal(e.value,t,e.value)}catch(c){if((0,o.isExpressionError)(c))return new r.NonLexicalLiteral(void 0,t,this.superTypeProvider,e.value);throw c}}},Gu}var yd,gd,md,bd,vd,_d={},Od={};function Td(){if(yd)return Od;yd=1,Object.defineProperty(Od,"__esModule",{value:!0}),Od.LRUCache=void 0;const e="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,t=new Set,r="object"==typeof process&&process?process:{},n=(e,t,n,a)=>{"function"==typeof r.emitWarning&&r.emitWarning(e,t,n,a)};let a=globalThis.AbortController,o=globalThis.AbortSignal;if(void 0===a){o=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},a=class{constructor(){t()}signal=new o;abort(e){if(!this.signal.aborted){this.signal.reason=e,this.signal.aborted=!0;for(const t of this.signal._onabort)t(e);this.signal.onabort?.(e)}}};let e="1"!==r.env?.LRU_CACHE_IGNORE_AC_WARNING;const t=()=>{e&&(e=!1,n("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}const i=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),s=e=>i(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?u:null:null;class u extends Array{constructor(e){super(e),this.fill(0)}}class c{heap;length;static#e=!1;static create(e){const t=s(e);if(!t)return[];c.#e=!0;const r=new c(e,t);return c.#e=!1,r}constructor(e,t){if(!c.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class l{#t;#r;#n;#a;#o;#i;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#s;#u;#c;#l;#p;#d;#f;#h;#y;#g;#m;#b;#v;#_;#O;#T;#w;static unsafeExposeInternals(e){return{starts:e.#v,ttls:e.#_,sizes:e.#b,keyMap:e.#c,keyList:e.#l,valList:e.#p,next:e.#d,prev:e.#f,get head(){return e.#h},get tail(){return e.#y},free:e.#g,isBackgroundFetch:t=>e.#S(t),backgroundFetch:(t,r,n,a)=>e.#j(t,r,n,a),moveToTail:t=>e.#A(t),indexes:t=>e.#F(t),rindexes:t=>e.#E(t),isStale:t=>e.#x(t)}}get max(){return this.#t}get maxSize(){return this.#r}get calculatedSize(){return this.#u}get size(){return this.#s}get fetchMethod(){return this.#o}get memoMethod(){return this.#i}get dispose(){return this.#n}get disposeAfter(){return this.#a}constructor(e){const{max:r=0,ttl:a,ttlResolution:o=1,ttlAutopurge:u,updateAgeOnGet:p,updateAgeOnHas:d,allowStale:f,dispose:h,disposeAfter:y,noDisposeOnSet:g,noUpdateTTL:m,maxSize:b=0,maxEntrySize:v=0,sizeCalculation:_,fetchMethod:O,memoMethod:T,noDeleteOnFetchRejection:w,noDeleteOnStaleGet:S,allowStaleOnFetchRejection:j,allowStaleOnFetchAbort:A,ignoreFetchAbort:F}=e;if(0!==r&&!i(r))throw new TypeError("max option must be a nonnegative integer");const E=r?s(r):Array;if(!E)throw new Error("invalid max value: "+r);if(this.#t=r,this.#r=b,this.maxEntrySize=v||this.#r,this.sizeCalculation=_,this.sizeCalculation){if(!this.#r&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==T&&"function"!=typeof T)throw new TypeError("memoMethod must be a function if defined");if(this.#i=T,void 0!==O&&"function"!=typeof O)throw new TypeError("fetchMethod must be a function if specified");if(this.#o=O,this.#T=!!O,this.#c=new Map,this.#l=new Array(r).fill(void 0),this.#p=new Array(r).fill(void 0),this.#d=new E(r),this.#f=new E(r),this.#h=0,this.#y=0,this.#g=c.create(r),this.#s=0,this.#u=0,"function"==typeof h&&(this.#n=h),"function"==typeof y?(this.#a=y,this.#m=[]):(this.#a=void 0,this.#m=void 0),this.#O=!!this.#n,this.#w=!!this.#a,this.noDisposeOnSet=!!g,this.noUpdateTTL=!!m,this.noDeleteOnFetchRejection=!!w,this.allowStaleOnFetchRejection=!!j,this.allowStaleOnFetchAbort=!!A,this.ignoreFetchAbort=!!F,0!==this.maxEntrySize){if(0!==this.#r&&!i(this.#r))throw new TypeError("maxSize must be a positive integer if specified");if(!i(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#P()}if(this.allowStale=!!f,this.noDeleteOnStaleGet=!!S,this.updateAgeOnGet=!!p,this.updateAgeOnHas=!!d,this.ttlResolution=i(o)||0===o?o:1,this.ttlAutopurge=!!u,this.ttl=a||0,this.ttl){if(!i(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#D()}if(0===this.#t&&0===this.ttl&&0===this.#r)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#r){const e="LRU_CACHE_UNBOUNDED";if((e=>!t.has(e))(e)){t.add(e);n("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",e,l)}}}getRemainingTTL(e){return this.#c.has(e)?1/0:0}#D(){const t=new u(this.#t),r=new u(this.#t);this.#_=t,this.#v=r,this.#M=(n,a,o=e.now())=>{if(r[n]=0!==a?o:0,t[n]=a,0!==a&&this.ttlAutopurge){const e=setTimeout(()=>{this.#x(n)&&this.#N(this.#l[n],"expire")},a+1);e.unref&&e.unref()}},this.#I=n=>{r[n]=0!==t[n]?e.now():0},this.#R=(e,o)=>{if(t[o]){const i=t[o],s=r[o];if(!i||!s)return;e.ttl=i,e.start=s,e.now=n||a();const u=e.now-s;e.remainingTTL=i-u}};let n=0;const a=()=>{const t=e.now();if(this.ttlResolution>0){n=t;const e=setTimeout(()=>n=0,this.ttlResolution);e.unref&&e.unref()}return t};this.getRemainingTTL=e=>{const o=this.#c.get(e);if(void 0===o)return 0;const i=t[o],s=r[o];if(!i||!s)return 1/0;return i-((n||a())-s)},this.#x=e=>{const o=r[e],i=t[e];return!!i&&!!o&&(n||a())-o>i}}#I=()=>{};#R=()=>{};#M=()=>{};#x=()=>!1;#P(){const e=new u(this.#t);this.#u=0,this.#b=e,this.#L=t=>{this.#u-=e[t],e[t]=0},this.#C=(e,t,r,n)=>{if(this.#S(t))return 0;if(!i(r)){if(!n)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof n)throw new TypeError("sizeCalculation must be a function");if(r=n(t,e),!i(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return r},this.#B=(t,r,n)=>{if(e[t]=r,this.#r){const r=this.#r-e[t];for(;this.#u>r;)this.#q(!0)}this.#u+=e[t],n&&(n.entrySize=r,n.totalCalculatedSize=this.#u)}}#L=e=>{};#B=(e,t,r)=>{};#C=(e,t,r,n)=>{if(r||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#F({allowStale:e=this.allowStale}={}){if(this.#s)for(let t=this.#y;this.#U(t)&&(!e&&this.#x(t)||(yield t),t!==this.#h);)t=this.#f[t]}*#E({allowStale:e=this.allowStale}={}){if(this.#s)for(let t=this.#h;this.#U(t)&&(!e&&this.#x(t)||(yield t),t!==this.#y);)t=this.#d[t]}#U(e){return void 0!==e&&this.#c.get(this.#l[e])===e}*entries(){for(const e of this.#F())void 0===this.#p[e]||void 0===this.#l[e]||this.#S(this.#p[e])||(yield[this.#l[e],this.#p[e]])}*rentries(){for(const e of this.#E())void 0===this.#p[e]||void 0===this.#l[e]||this.#S(this.#p[e])||(yield[this.#l[e],this.#p[e]])}*keys(){for(const e of this.#F()){const t=this.#l[e];void 0===t||this.#S(this.#p[e])||(yield t)}}*rkeys(){for(const e of this.#E()){const t=this.#l[e];void 0===t||this.#S(this.#p[e])||(yield t)}}*values(){for(const e of this.#F()){void 0===this.#p[e]||this.#S(this.#p[e])||(yield this.#p[e])}}*rvalues(){for(const e of this.#E()){void 0===this.#p[e]||this.#S(this.#p[e])||(yield this.#p[e])}}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(const r of this.#F()){const n=this.#p[r],a=this.#S(n)?n.__staleWhileFetching:n;if(void 0!==a&&e(a,this.#l[r],this))return this.get(this.#l[r],t)}}forEach(e,t=this){for(const r of this.#F()){const n=this.#p[r],a=this.#S(n)?n.__staleWhileFetching:n;void 0!==a&&e.call(t,a,this.#l[r],this)}}rforEach(e,t=this){for(const r of this.#E()){const n=this.#p[r],a=this.#S(n)?n.__staleWhileFetching:n;void 0!==a&&e.call(t,a,this.#l[r],this)}}purgeStale(){let e=!1;for(const t of this.#E({allowStale:!0}))this.#x(t)&&(this.#N(this.#l[t],"expire"),e=!0);return e}info(t){const r=this.#c.get(t);if(void 0===r)return;const n=this.#p[r],a=this.#S(n)?n.__staleWhileFetching:n;if(void 0===a)return;const o={value:a};if(this.#_&&this.#v){const t=this.#_[r],n=this.#v[r];if(t&&n){const r=t-(e.now()-n);o.ttl=r,o.start=Date.now()}}return this.#b&&(o.size=this.#b[r]),o}dump(){const t=[];for(const r of this.#F({allowStale:!0})){const n=this.#l[r],a=this.#p[r],o=this.#S(a)?a.__staleWhileFetching:a;if(void 0===o||void 0===n)continue;const i={value:o};if(this.#_&&this.#v){i.ttl=this.#_[r];const t=e.now()-this.#v[r];i.start=Math.floor(Date.now()-t)}this.#b&&(i.size=this.#b[r]),t.unshift([n,i])}return t}load(t){this.clear();for(const[r,n]of t){if(n.start){const t=Date.now()-n.start;n.start=e.now()-t}this.set(r,n.value,n)}}set(e,t,r={}){if(void 0===t)return this.delete(e),this;const{ttl:n=this.ttl,start:a,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:i=this.sizeCalculation,status:s}=r;let{noUpdateTTL:u=this.noUpdateTTL}=r;const c=this.#C(e,t,r.size||0,i);if(this.maxEntrySize&&c>this.maxEntrySize)return s&&(s.set="miss",s.maxEntrySizeExceeded=!0),this.#N(e,"set"),this;let l=0===this.#s?void 0:this.#c.get(e);if(void 0===l)l=0===this.#s?this.#y:0!==this.#g.length?this.#g.pop():this.#s===this.#t?this.#q(!1):this.#s,this.#l[l]=e,this.#p[l]=t,this.#c.set(e,l),this.#d[this.#y]=l,this.#f[l]=this.#y,this.#y=l,this.#s++,this.#B(l,c,s),s&&(s.set="add"),u=!1;else{this.#A(l);const r=this.#p[l];if(t!==r){if(this.#T&&this.#S(r)){r.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:t}=r;void 0===t||o||(this.#O&&this.#n?.(t,e,"set"),this.#w&&this.#m?.push([t,e,"set"]))}else o||(this.#O&&this.#n?.(r,e,"set"),this.#w&&this.#m?.push([r,e,"set"]));if(this.#L(l),this.#B(l,c,s),this.#p[l]=t,s){s.set="replace";const e=r&&this.#S(r)?r.__staleWhileFetching:r;void 0!==e&&(s.oldValue=e)}}else s&&(s.set="update")}if(0===n||this.#_||this.#D(),this.#_&&(u||this.#M(l,n,a),s&&this.#R(s,l)),!o&&this.#w&&this.#m){const e=this.#m;let t;for(;t=e?.shift();)this.#a?.(...t)}return this}pop(){try{for(;this.#s;){const e=this.#p[this.#h];if(this.#q(!0),this.#S(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if(this.#w&&this.#m){const e=this.#m;let t;for(;t=e?.shift();)this.#a?.(...t)}}}#q(e){const t=this.#h,r=this.#l[t],n=this.#p[t];return this.#T&&this.#S(n)?n.__abortController.abort(new Error("evicted")):(this.#O||this.#w)&&(this.#O&&this.#n?.(n,r,"evict"),this.#w&&this.#m?.push([n,r,"evict"])),this.#L(t),e&&(this.#l[t]=void 0,this.#p[t]=void 0,this.#g.push(t)),1===this.#s?(this.#h=this.#y=0,this.#g.length=0):this.#h=this.#d[t],this.#c.delete(r),this.#s--,t}has(e,t={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:n}=t,a=this.#c.get(e);if(void 0!==a){const e=this.#p[a];if(this.#S(e)&&void 0===e.__staleWhileFetching)return!1;if(!this.#x(a))return r&&this.#I(a),n&&(n.has="hit",this.#R(n,a)),!0;n&&(n.has="stale",this.#R(n,a))}else n&&(n.has="miss");return!1}peek(e,t={}){const{allowStale:r=this.allowStale}=t,n=this.#c.get(e);if(void 0===n||!r&&this.#x(n))return;const a=this.#p[n];return this.#S(a)?a.__staleWhileFetching:a}#j(e,t,r,n){const o=void 0===t?void 0:this.#p[t];if(this.#S(o))return o;const i=new a,{signal:s}=r;s?.addEventListener("abort",()=>i.abort(s.reason),{signal:i.signal});const u={signal:i.signal,options:r,context:n},c=(n,a=!1)=>{const{aborted:o}=i.signal,s=r.ignoreFetchAbort&&void 0!==n;if(r.status&&(o&&!a?(r.status.fetchAborted=!0,r.status.fetchError=i.signal.reason,s&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),o&&!s&&!a)return l(i.signal.reason);const c=p;return this.#p[t]===p&&(void 0===n?c.__staleWhileFetching?this.#p[t]=c.__staleWhileFetching:this.#N(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,n,u.options))),n},l=n=>{const{aborted:a}=i.signal,o=a&&r.allowStaleOnFetchAbort,s=o||r.allowStaleOnFetchRejection,u=s||r.noDeleteOnFetchRejection,c=p;if(this.#p[t]===p){!u||void 0===c.__staleWhileFetching?this.#N(e,"fetch"):o||(this.#p[t]=c.__staleWhileFetching)}if(s)return r.status&&void 0!==c.__staleWhileFetching&&(r.status.returnedStale=!0),c.__staleWhileFetching;if(c.__returned===c)throw n};r.status&&(r.status.fetchDispatched=!0);const p=new Promise((t,n)=>{const a=this.#o?.(e,o,u);a&&a instanceof Promise&&a.then(e=>t(void 0===e?void 0:e),n),i.signal.addEventListener("abort",()=>{r.ignoreFetchAbort&&!r.allowStaleOnFetchAbort||(t(void 0),r.allowStaleOnFetchAbort&&(t=e=>c(e,!0)))})}).then(c,e=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=e),l(e))),d=Object.assign(p,{__abortController:i,__staleWhileFetching:o,__returned:void 0});return void 0===t?(this.set(e,d,{...u.options,status:void 0}),t=this.#c.get(e)):this.#p[t]=d,d}#S(e){if(!this.#T)return!1;const t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof a}async fetch(e,t={}){const{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:a=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:i=this.noDisposeOnSet,size:s=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL,noDeleteOnFetchRejection:l=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:f=this.allowStaleOnFetchAbort,context:h,forceRefresh:y=!1,status:g,signal:m}=t;if(!this.#T)return g&&(g.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:a,status:g});const b={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:a,ttl:o,noDisposeOnSet:i,size:s,sizeCalculation:u,noUpdateTTL:c,noDeleteOnFetchRejection:l,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:f,ignoreFetchAbort:d,status:g,signal:m};let v=this.#c.get(e);if(void 0===v){g&&(g.fetch="miss");const t=this.#j(e,v,b,h);return t.__returned=t}{const t=this.#p[v];if(this.#S(t)){const e=r&&void 0!==t.__staleWhileFetching;return g&&(g.fetch="inflight",e&&(g.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}const a=this.#x(v);if(!y&&!a)return g&&(g.fetch="hit"),this.#A(v),n&&this.#I(v),g&&this.#R(g,v),t;const o=this.#j(e,v,b,h),i=void 0!==o.__staleWhileFetching&&r;return g&&(g.fetch=a?"stale":"refresh",i&&a&&(g.returnedStale=!0)),i?o.__staleWhileFetching:o.__returned=o}}async forceFetch(e,t={}){const r=await this.fetch(e,t);if(void 0===r)throw new Error("fetch() returned undefined");return r}memo(e,t={}){const r=this.#i;if(!r)throw new Error("no memoMethod provided to constructor");const{context:n,forceRefresh:a,...o}=t,i=this.get(e,o);if(!a&&void 0!==i)return i;const s=r(e,i,{options:o,context:n});return this.set(e,s,o),s}get(e,t={}){const{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:a=this.noDeleteOnStaleGet,status:o}=t,i=this.#c.get(e);if(void 0!==i){const t=this.#p[i],s=this.#S(t);return o&&this.#R(o,i),this.#x(i)?(o&&(o.get="stale"),s?(o&&r&&void 0!==t.__staleWhileFetching&&(o.returnedStale=!0),r?t.__staleWhileFetching:void 0):(a||this.#N(e,"expire"),o&&r&&(o.returnedStale=!0),r?t:void 0)):(o&&(o.get="hit"),s?t.__staleWhileFetching:(this.#A(i),n&&this.#I(i),t))}o&&(o.get="miss")}#k(e,t){this.#f[t]=e,this.#d[e]=t}#A(e){e!==this.#y&&(e===this.#h?this.#h=this.#d[e]:this.#k(this.#f[e],this.#d[e]),this.#k(this.#y,e),this.#y=e)}delete(e){return this.#N(e,"delete")}#N(e,t){let r=!1;if(0!==this.#s){const n=this.#c.get(e);if(void 0!==n)if(r=!0,1===this.#s)this.#Q(t);else{this.#L(n);const r=this.#p[n];if(this.#S(r)?r.__abortController.abort(new Error("deleted")):(this.#O||this.#w)&&(this.#O&&this.#n?.(r,e,t),this.#w&&this.#m?.push([r,e,t])),this.#c.delete(e),this.#l[n]=void 0,this.#p[n]=void 0,n===this.#y)this.#y=this.#f[n];else if(n===this.#h)this.#h=this.#d[n];else{const e=this.#f[n];this.#d[e]=this.#d[n];const t=this.#d[n];this.#f[t]=this.#f[n]}this.#s--,this.#g.push(n)}}if(this.#w&&this.#m?.length){const e=this.#m;let t;for(;t=e?.shift();)this.#a?.(...t)}return r}clear(){return this.#Q("delete")}#Q(e){for(const t of this.#E({allowStale:!0})){const r=this.#p[t];if(this.#S(r))r.__abortController.abort(new Error("deleted"));else{const n=this.#l[t];this.#O&&this.#n?.(r,n,e),this.#w&&this.#m?.push([r,n,e])}}if(this.#c.clear(),this.#p.fill(void 0),this.#l.fill(void 0),this.#_&&this.#v&&(this.#_.fill(0),this.#v.fill(0)),this.#b&&this.#b.fill(0),this.#h=0,this.#y=0,this.#g.length=0,this.#u=0,this.#s=0,this.#w&&this.#m){const e=this.#m;let t;for(;t=e?.shift();)this.#a?.(...t)}}}return Od.LRUCache=l,Od}function wd(){if(gd)return _d;gd=1,Object.defineProperty(_d,"__esModule",{value:!0}),_d.prepareEvaluatorActionContext=void 0;const e=ls(),t=Td(),r=sd();return _d.prepareEvaluatorActionContext=function(n){let a=n;if(a.has(e.KeysInitQuery.extensionFunctionCreator)&&a.has(e.KeysInitQuery.extensionFunctions))throw new Error("Illegal simultaneous usage of extensionFunctionCreator and extensionFunctions in context");if(a.has(e.KeysInitQuery.extensionFunctionCreator))a=a.set(e.KeysExpressionEvaluator.extensionFunctionCreator,a.get(e.KeysInitQuery.extensionFunctionCreator));else if(a.has(e.KeysInitQuery.extensionFunctions)){const t=a.getSafe(e.KeysInitQuery.extensionFunctions);a=a.set(e.KeysExpressionEvaluator.extensionFunctionCreator,async e=>t[e.value])}else a=a.setDefault(e.KeysExpressionEvaluator.extensionFunctionCreator,async()=>{});return a=a.setDefault(e.KeysExpressionEvaluator.defaultTimeZone,(0,r.extractTimeZone)(a.getSafe(e.KeysInitQuery.queryTimestamp))),a=a.setDefault(e.KeysExpressionEvaluator.superTypeProvider,{cache:new t.LRUCache({max:1e3}),discoverer:()=>"term"}),a},_d}function Sd(){return md||(md=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LangStringLiteral=e.TimeLiteral=e.DurationLiteral=e.DateLiteral=e.DayTimeDurationLiteral=e.DateTimeLiteral=e.yearMonthDurationsToMonths=e.toUTCDate=e.toDateTimeRepresentation=e.negateDuration=e.extractRawTimeZone=e.defaultedYearMonthDurationRepresentation=e.defaultedDurationRepresentation=e.defaultedDayTimeDurationRepresentation=e.defaultedDateTimeRepresentation=e.dayTimeDurationsToSeconds=e.isSubTypeOf=e.SparqlOperator=e.TypeAlias=e.TypeURL=e.typedLiteral=e.InvalidArity=e.InvalidLexicalForm=e.ExtensionFunctionError=e.CastError=e.UnboundVariableError=e.NoAggregator=e.InError=e.CoalesceError=e.InvalidArgumentTypes=e.InvalidTimezoneCall=e.IncompatibleLanguageOperation=e.RDFEqualTypeError=e.EmptyAggregateError=e.isExpressionError=e.ExpressionError=e.Builder=e.expressionToVar=e.float=e.decimal=e.langString=e.dateTime=e.integer=e.double=e.string=e.bool=e.declare=e.prepareEvaluatorActionContext=e.OverloadTree=e.TermTransformer=void 0,e.trimToDayTimeDuration=e.trimToYearMonthDuration=e.parseDate=e.parseXSDFloat=e.parseXSDDecimal=e.parseYearMonthDuration=e.parseTime=e.parseDuration=e.parseDayTimeDuration=e.parseDateTime=e.elapsedDuration=e.addDurationToDateTime=e.isNonLexicalLiteral=e.StringLiteral=e.NonLexicalLiteral=e.FloatLiteral=e.IntegerLiteral=e.Literal=e.Existence=e.Aggregate=e.DoubleLiteral=e.DefaultGraph=e.DecimalLiteral=e.BlankNode=e.BooleanLiteral=e.NumericLiteral=e.Variable=e.NamedNode=e.Operator=e.Quad=e.YearMonthDurationLiteral=e.Term=void 0;var t=hd();Object.defineProperty(e,"TermTransformer",{enumerable:!0,get:function(){return t.TermTransformer}});var r=Vp();Object.defineProperty(e,"OverloadTree",{enumerable:!0,get:function(){return r.OverloadTree}});var n=wd();Object.defineProperty(e,"prepareEvaluatorActionContext",{enumerable:!0,get:function(){return n.prepareEvaluatorActionContext}});var a=Gp();Object.defineProperty(e,"declare",{enumerable:!0,get:function(){return a.declare}}),Object.defineProperty(e,"bool",{enumerable:!0,get:function(){return a.bool}}),Object.defineProperty(e,"string",{enumerable:!0,get:function(){return a.string}}),Object.defineProperty(e,"double",{enumerable:!0,get:function(){return a.double}}),Object.defineProperty(e,"integer",{enumerable:!0,get:function(){return a.integer}}),Object.defineProperty(e,"dateTime",{enumerable:!0,get:function(){return a.dateTime}}),Object.defineProperty(e,"langString",{enumerable:!0,get:function(){return a.langString}}),Object.defineProperty(e,"decimal",{enumerable:!0,get:function(){return a.decimal}}),Object.defineProperty(e,"float",{enumerable:!0,get:function(){return a.float}}),Object.defineProperty(e,"expressionToVar",{enumerable:!0,get:function(){return a.expressionToVar}}),Object.defineProperty(e,"Builder",{enumerable:!0,get:function(){return a.Builder}});var o=Mp();Object.defineProperty(e,"ExpressionError",{enumerable:!0,get:function(){return o.ExpressionError}}),Object.defineProperty(e,"isExpressionError",{enumerable:!0,get:function(){return o.isExpressionError}}),Object.defineProperty(e,"EmptyAggregateError",{enumerable:!0,get:function(){return o.EmptyAggregateError}}),Object.defineProperty(e,"RDFEqualTypeError",{enumerable:!0,get:function(){return o.RDFEqualTypeError}}),Object.defineProperty(e,"IncompatibleLanguageOperation",{enumerable:!0,get:function(){return o.IncompatibleLanguageOperation}}),Object.defineProperty(e,"InvalidTimezoneCall",{enumerable:!0,get:function(){return o.InvalidTimezoneCall}}),Object.defineProperty(e,"InvalidArgumentTypes",{enumerable:!0,get:function(){return o.InvalidArgumentTypes}}),Object.defineProperty(e,"CoalesceError",{enumerable:!0,get:function(){return o.CoalesceError}}),Object.defineProperty(e,"InError",{enumerable:!0,get:function(){return o.InError}}),Object.defineProperty(e,"NoAggregator",{enumerable:!0,get:function(){return o.NoAggregator}}),Object.defineProperty(e,"UnboundVariableError",{enumerable:!0,get:function(){return o.UnboundVariableError}}),Object.defineProperty(e,"CastError",{enumerable:!0,get:function(){return o.CastError}}),Object.defineProperty(e,"ExtensionFunctionError",{enumerable:!0,get:function(){return o.ExtensionFunctionError}}),Object.defineProperty(e,"InvalidLexicalForm",{enumerable:!0,get:function(){return o.InvalidLexicalForm}}),Object.defineProperty(e,"InvalidArity",{enumerable:!0,get:function(){return o.InvalidArity}});var i=xp();Object.defineProperty(e,"typedLiteral",{enumerable:!0,get:function(){return i.typedLiteral}}),Object.defineProperty(e,"TypeURL",{enumerable:!0,get:function(){return i.TypeURL}}),Object.defineProperty(e,"TypeAlias",{enumerable:!0,get:function(){return i.TypeAlias}}),Object.defineProperty(e,"SparqlOperator",{enumerable:!0,get:function(){return i.SparqlOperator}});var s=$p();Object.defineProperty(e,"isSubTypeOf",{enumerable:!0,get:function(){return s.isSubTypeOf}});var u=sd();Object.defineProperty(e,"dayTimeDurationsToSeconds",{enumerable:!0,get:function(){return u.dayTimeDurationsToSeconds}}),Object.defineProperty(e,"defaultedDateTimeRepresentation",{enumerable:!0,get:function(){return u.defaultedDateTimeRepresentation}}),Object.defineProperty(e,"defaultedDayTimeDurationRepresentation",{enumerable:!0,get:function(){return u.defaultedDayTimeDurationRepresentation}}),Object.defineProperty(e,"defaultedDurationRepresentation",{enumerable:!0,get:function(){return u.defaultedDurationRepresentation}}),Object.defineProperty(e,"defaultedYearMonthDurationRepresentation",{enumerable:!0,get:function(){return u.defaultedYearMonthDurationRepresentation}}),Object.defineProperty(e,"extractRawTimeZone",{enumerable:!0,get:function(){return u.extractRawTimeZone}}),Object.defineProperty(e,"negateDuration",{enumerable:!0,get:function(){return u.negateDuration}}),Object.defineProperty(e,"toDateTimeRepresentation",{enumerable:!0,get:function(){return u.toDateTimeRepresentation}}),Object.defineProperty(e,"toUTCDate",{enumerable:!0,get:function(){return u.toUTCDate}}),Object.defineProperty(e,"yearMonthDurationsToMonths",{enumerable:!0,get:function(){return u.yearMonthDurationsToMonths}});var c=nd();Object.defineProperty(e,"DateTimeLiteral",{enumerable:!0,get:function(){return c.DateTimeLiteral}}),Object.defineProperty(e,"DayTimeDurationLiteral",{enumerable:!0,get:function(){return c.DayTimeDurationLiteral}}),Object.defineProperty(e,"DateLiteral",{enumerable:!0,get:function(){return c.DateLiteral}}),Object.defineProperty(e,"DurationLiteral",{enumerable:!0,get:function(){return c.DurationLiteral}}),Object.defineProperty(e,"TimeLiteral",{enumerable:!0,get:function(){return c.TimeLiteral}}),Object.defineProperty(e,"LangStringLiteral",{enumerable:!0,get:function(){return c.LangStringLiteral}}),Object.defineProperty(e,"Term",{enumerable:!0,get:function(){return c.Term}}),Object.defineProperty(e,"YearMonthDurationLiteral",{enumerable:!0,get:function(){return c.YearMonthDurationLiteral}}),Object.defineProperty(e,"Quad",{enumerable:!0,get:function(){return c.Quad}}),Object.defineProperty(e,"Operator",{enumerable:!0,get:function(){return c.Operator}}),Object.defineProperty(e,"NamedNode",{enumerable:!0,get:function(){return c.NamedNode}}),Object.defineProperty(e,"Variable",{enumerable:!0,get:function(){return c.Variable}}),Object.defineProperty(e,"NumericLiteral",{enumerable:!0,get:function(){return c.NumericLiteral}}),Object.defineProperty(e,"BooleanLiteral",{enumerable:!0,get:function(){return c.BooleanLiteral}}),Object.defineProperty(e,"BlankNode",{enumerable:!0,get:function(){return c.BlankNode}}),Object.defineProperty(e,"DecimalLiteral",{enumerable:!0,get:function(){return c.DecimalLiteral}}),Object.defineProperty(e,"DefaultGraph",{enumerable:!0,get:function(){return c.DefaultGraph}}),Object.defineProperty(e,"DoubleLiteral",{enumerable:!0,get:function(){return c.DoubleLiteral}}),Object.defineProperty(e,"Aggregate",{enumerable:!0,get:function(){return c.Aggregate}}),Object.defineProperty(e,"Existence",{enumerable:!0,get:function(){return c.Existence}}),Object.defineProperty(e,"Literal",{enumerable:!0,get:function(){return c.Literal}}),Object.defineProperty(e,"IntegerLiteral",{enumerable:!0,get:function(){return c.IntegerLiteral}}),Object.defineProperty(e,"FloatLiteral",{enumerable:!0,get:function(){return c.FloatLiteral}}),Object.defineProperty(e,"NonLexicalLiteral",{enumerable:!0,get:function(){return c.NonLexicalLiteral}}),Object.defineProperty(e,"StringLiteral",{enumerable:!0,get:function(){return c.StringLiteral}}),Object.defineProperty(e,"isNonLexicalLiteral",{enumerable:!0,get:function(){return c.isNonLexicalLiteral}});var l=dd();Object.defineProperty(e,"addDurationToDateTime",{enumerable:!0,get:function(){return l.addDurationToDateTime}}),Object.defineProperty(e,"elapsedDuration",{enumerable:!0,get:function(){return l.elapsedDuration}});var p=fd();Object.defineProperty(e,"parseDateTime",{enumerable:!0,get:function(){return p.parseDateTime}}),Object.defineProperty(e,"parseDayTimeDuration",{enumerable:!0,get:function(){return p.parseDayTimeDuration}}),Object.defineProperty(e,"parseDuration",{enumerable:!0,get:function(){return p.parseDuration}}),Object.defineProperty(e,"parseTime",{enumerable:!0,get:function(){return p.parseTime}}),Object.defineProperty(e,"parseYearMonthDuration",{enumerable:!0,get:function(){return p.parseYearMonthDuration}}),Object.defineProperty(e,"parseXSDDecimal",{enumerable:!0,get:function(){return p.parseXSDDecimal}}),Object.defineProperty(e,"parseXSDFloat",{enumerable:!0,get:function(){return p.parseXSDFloat}}),Object.defineProperty(e,"parseDate",{enumerable:!0,get:function(){return p.parseDate}});var d=sd();Object.defineProperty(e,"trimToYearMonthDuration",{enumerable:!0,get:function(){return d.trimToYearMonthDuration}}),Object.defineProperty(e,"trimToDayTimeDuration",{enumerable:!0,get:function(){return d.trimToDayTimeDuration}})}(Vu)),Vu}function jd(){if(bd)return Qu;bd=1,Object.defineProperty(Qu,"__esModule",{value:!0}),Qu.TermFunctionBase=Qu.ExpressionFunctionBase=void 0;const e=ls(),t=Sd();class r{constructor({arity:e,operator:t,apply:r}){this.arity=e,this.operator=t,this.apply=r}checkArity(e){return Array.isArray(this.arity)?this.arity.includes(e.length):this.arity===Number.POSITIVE_INFINITY||e.length===this.arity}}Qu.ExpressionFunctionBase=r;return Qu.TermFunctionBase=class extends r{constructor({arity:e,operator:t,overloads:r}){super({arity:e,operator:t,apply:async({args:e,exprEval:t,mapping:r})=>this.applyOnTerms(await Promise.all(e.map(e=>t.evaluatorExpressionEvaluation(e,r))),t)}),this.supportsTermExpressions=!0,this.overloads=r}applyOnTerms(t,r){return(this.overloads.search(t,r.context.getSafe(e.KeysExpressionEvaluator.superTypeProvider),r.context.getSafe(e.KeysInitQuery.functionArgumentsCache))??this.handleInvalidTypes(t))(r)(t)}handleInvalidTypes(e){throw new t.InvalidArgumentTypes(e,this.operator)}},Qu}function Ad(){return vd||(vd=1,e=Mu,t=Mu&&Mu.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Mu&&Mu.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Iu(),e),r(Cu(),e),r(Uu(),e),r(jd(),e)),Mu;var e,t,r}var Fd,Ed={},xd={};function Pd(){if(Fd)return xd;Fd=1,Object.defineProperty(xd,"__esModule",{value:!0}),xd.ActorQueryOperation=void 0;const e=Ji();let t=class extends e.Actor{constructor(e){super(e)}};return xd.ActorQueryOperation=t,xd}var Dd,Md={},Nd={},Id={};function Rd(){if(Dd)return Id;Dd=1,Object.defineProperty(Id,"__esModule",{value:!0}),Id.MetadataValidationState=void 0;return Id.MetadataValidationState=class{constructor(){this.invalidateListeners=[],this.valid=!0}addInvalidateListener(e){this.invalidateListeners.push(e)}invalidate(){if(this.valid){this.valid=!1;for(const e of this.invalidateListeners)e()}}},Id}var Ld,Cd,Bd,qd={};function Ud(){if(Ld)return qd;function e(e){for(const t of["cardinality"])if(!(t in e))throw new Error(`Invalid metadata: missing ${t} in ${JSON.stringify(e)}`);return e}function t(e){for(const t of["cardinality","variables"])if(!(t in e))throw new Error(`Invalid metadata: missing ${t} in ${JSON.stringify(e)}`);return e}function r(e){let t;return()=>(t||(t=e(),t.then(e=>e.state.addInvalidateListener(()=>{t=void 0})).catch(()=>{})),t)}return Ld=1,Object.defineProperty(qd,"__esModule",{value:!0}),qd.cachifyMetadata=qd.validateMetadataBindings=qd.validateMetadataQuads=qd.getMetadataBindings=qd.getMetadataQuads=void 0,qd.getMetadataQuads=function(t){return r(()=>new Promise((e,r)=>{t.getProperty("metadata",t=>e(t)),t.on("error",r)}).then(t=>e(t)))},qd.getMetadataBindings=function(e){return r(()=>new Promise((t,r)=>{e.getProperty("metadata",e=>t(e)),e.on("error",r)}).then(e=>t(e)))},qd.validateMetadataQuads=e,qd.validateMetadataBindings=t,qd.cachifyMetadata=r,qd}function kd(){return Cd||(Cd=1,e=Nd,t=Nd&&Nd.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Nd&&Nd.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Rd(),e),r(Ud(),e)),Nd;var e,t,r}function Qd(){if(Bd)return Md;Bd=1,Object.defineProperty(Md,"__esModule",{value:!0}),Md.ActorQueryOperationTyped=void 0;const e=ls(),t=Ji(),r=kd(),n=Pd();let a=class extends n.ActorQueryOperation{constructor(e,t){if(super({...e,operationName:t}),!this.operationName)throw new Error('A valid "operationName" argument must be provided.')}async test(e){if(!e.operation)return(0,t.failTest)("Missing field 'operation' in a query operation action.");if(e.operation.type!==this.operationName)return(0,t.failTest)(`Actor ${this.name} only supports ${this.operationName} operations, but got ${e.operation.type}`);const r=e.operation;return this.testOperation(r,e.context)}async run(t,n){const a=t.context.get(e.KeysInitQuery.physicalQueryPlanLogger);a&&(a.logOperation(t.operation.type,void 0,t.operation,t.context.get(e.KeysInitQuery.physicalQueryPlanNode),this.name,{}),t.context=t.context.set(e.KeysInitQuery.physicalQueryPlanNode,t.operation));const o=t.operation,i=t.context.set(e.KeysQueryOperation.operation,o),s=await this.runOperation(o,i,n);return"metadata"in s&&(s.metadata=(0,r.cachifyMetadata)(s.metadata)),s}};return Md.ActorQueryOperationTyped=a,Md}var Vd,Gd={};function $d(){if(Vd)return Gd;Vd=1,Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.ActorQueryOperationTypedMediated=void 0;const e=Qd();let t=class extends e.ActorQueryOperationTyped{constructor(e,t){super(e,t)}};return Gd.ActorQueryOperationTypedMediated=t,Gd}var zd,Xd,Hd={};function Jd(){if(zd)return Hd;zd=1,Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.BusQueryOperation=void 0;const e=Ji();let t=class extends e.BusIndexed{constructor(e){super({...e,actorIdentifierFields:["operationName"],actionIdentifierFields:["operation","type"]})}};return Hd.BusQueryOperation=t,Hd}function Kd(){return Xd||(Xd=1,e=Ed,t=Ed&&Ed.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Ed&&Ed.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Pd(),e),r(Qd(),e),r($d(),e),r(Jd(),e)),Ed;var e,t,r}var Yd,Wd,Zd,ef,tf={},rf={},nf={},af={};function of(){if(Yd)return af;Yd=1,Object.defineProperty(af,"__esModule",{value:!0}),af.ActorContextPreprocess=void 0;const e=Ji();let t=class extends e.Actor{constructor(e){super(e)}};return af.ActorContextPreprocess=t,af}function sf(){return Wd||(Wd=1,e=nf,t=nf&&nf.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=nf&&nf.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(of(),e)),nf;var e,t,r}function uf(){if(Zd)return rf;Zd=1,Object.defineProperty(rf,"__esModule",{value:!0}),rf.ActorContextPreprocessConvertShortcuts=void 0;const e=sf(),t=Ji();let r=class r extends e.ActorContextPreprocess{constructor(e){super(e)}async test(e){return(0,t.passTestVoid)()}async run(e){return{context:r.expandShortcuts(e.context,this.contextKeyShortcuts)}}static expandShortcuts(e,r){for(const n of e.keys())r[n.name]&&(e=e.set(new t.ActionContextKey(r[n.name]),e.get(n)).delete(n));return e}};return rf.ActorContextPreprocessConvertShortcuts=r,rf}function cf(){return ef||(ef=1,e=tf,t=tf&&tf.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=tf&&tf.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(uf(),e)),tf;var e,t,r}var lf,pf={},df={},ff={},hf={};function yf(){if(lf)return hf;lf=1,Object.defineProperty(hf,"__esModule",{value:!0}),hf.BlankNode=void 0;return hf.BlankNode=class{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}},hf}var gf,mf={},bf={};function vf(){if(gf)return bf;gf=1,Object.defineProperty(bf,"__esModule",{value:!0}),bf.DefaultGraph=void 0;class e{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&"DefaultGraph"===e.termType}}return bf.DefaultGraph=e,e.INSTANCE=new e,bf}var _f,Of,Tf={},wf={};function Sf(){if(_f)return wf;_f=1,Object.defineProperty(wf,"__esModule",{value:!0}),wf.NamedNode=void 0;return wf.NamedNode=class{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&"NamedNode"===e.termType&&e.value===this.value}},wf}function jf(){if(Of)return Tf;Of=1,Object.defineProperty(Tf,"__esModule",{value:!0}),Tf.Literal=void 0;const e=Sf();class t{constructor(e,r){this.termType="Literal",this.value=e,"string"==typeof r?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(e){return!!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&this.datatype.equals(e.datatype)}}return Tf.Literal=t,t.RDF_LANGUAGE_STRING=new e.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new e.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Tf}var Af,Ff={};function Ef(){if(Af)return Ff;Af=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.Quad=void 0;return Ff.Quad=class{constructor(e,t,r,n){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=r,this.graph=n}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}},Ff}var xf,Pf,Df,Mf,Nf,If={};function Rf(){if(xf)return If;xf=1,Object.defineProperty(If,"__esModule",{value:!0}),If.Variable=void 0;return If.Variable=class{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&"Variable"===e.termType&&e.value===this.value}},If}function Lf(){return Df||(Df=1,e=ff,t=ff&&ff.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=ff&&ff.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(yf(),e),r(function(){if(Pf)return mf;Pf=1,Object.defineProperty(mf,"__esModule",{value:!0}),mf.DataFactory=void 0;const e=yf(),t=vf(),r=jf(),n=Sf(),a=Ef(),o=Rf();let i=0;return mf.DataFactory=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${i++}_`}namedNode(e){return new n.NamedNode(e)}blankNode(t){return new e.BlankNode(t||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new r.Literal(e,t)}variable(e){return new o.Variable(e)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(e,t,r,n){return new a.Quad(e,t,r,n||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(r.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}},mf}(),e),r(vf(),e),r(jf(),e),r(Sf(),e),r(Ef(),e),r(Rf(),e)),ff;var e,t,r}function Cf(){if(Mf)return df;Mf=1,Object.defineProperty(df,"__esModule",{value:!0}),df.ActorContextPreprocessSetDefaults=void 0;const e=sf(),t=ls(),r=Ji(),n=Lf();let a=class extends e.ActorContextPreprocess{constructor(e){super(e),this.defaultFunctionArgumentsCache={}}async test(e){return(0,r.passTestVoid)()}async run(e){let r=e.context;if(e.initialize){r=r.setDefault(t.KeysInitQuery.queryTimestamp,new Date).setDefault(t.KeysInitQuery.queryTimestampHighResolution,performance.now()).setDefault(t.KeysQuerySourceIdentify.sourceIds,new Map).setDefault(t.KeysCore.log,this.logger).setDefault(t.KeysInitQuery.functionArgumentsCache,this.defaultFunctionArgumentsCache).setDefault(t.KeysQuerySourceIdentify.hypermediaSourcesAggregatedStores,new Map).setDefault(t.KeysInitQuery.dataFactory,new n.DataFactory);let e={language:"sparql",version:"1.1"};r.has(t.KeysInitQuery.queryFormat)?(e=r.get(t.KeysInitQuery.queryFormat),"graphql"===e.language&&(r=r.setDefault(t.KeysInitQuery.graphqlSingularizeVariables,{}))):r=r.set(t.KeysInitQuery.queryFormat,e),r.has(t.KeysInitQuery.extensionFunctionsAlwaysPushdown)||r.has(t.KeysInitQuery.extensionFunctions)||(r=r.set(t.KeysInitQuery.extensionFunctionsAlwaysPushdown,!0))}return{context:r}}};return df.ActorContextPreprocessSetDefaults=a,df}function Bf(){return Nf||(Nf=1,e=pf,t=pf&&pf.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=pf&&pf.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Cf(),e)),pf;var e,t,r}var qf,Uf,kf={},Qf={};function Vf(){if(qf)return Qf;qf=1,Object.defineProperty(Qf,"__esModule",{value:!0}),Qf.ActorContextPreprocessSourceToDestination=void 0;const e=sf(),t=ls(),r=Ji();let n=class extends e.ActorContextPreprocess{constructor(e){super(e)}async test(e){return(0,r.passTestVoid)()}async run(e){if(e.context.get(t.KeysInitQuery.querySourcesUnidentified)&&!e.context.get(t.KeysRdfUpdateQuads.destination)){const r=e.context.get(t.KeysInitQuery.querySourcesUnidentified);if(1===r.length)return{context:e.context.set(t.KeysRdfUpdateQuads.destination,r[0])}}return e}};return Qf.ActorContextPreprocessSourceToDestination=n,Qf}function Gf(){return Uf||(Uf=1,e=kf,t=kf&&kf.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=kf&&kf.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Vf(),e)),kf;var e,t,r}var $f,zf={},Xf={},Hf={},Jf={},Kf={};function Yf(){if($f)return Kf;$f=1,Object.defineProperty(Kf,"__esModule",{value:!0}),Kf.LinkedList=void 0;return Kf.LinkedList=class{constructor(){this._length=0,this._head=null,this._tail=null}get length(){return this._length}get first(){var e;return null===(e=this._head)||void 0===e?void 0:e.value}get last(){var e;return null===(e=this._tail)||void 0===e?void 0:e.value}get empty(){return null===this._head}push(e){const t={value:e,next:null};null===this._tail?this._head=this._tail=t:this._tail.next=this._tail=t,this._length++}shift(){if(null===this._head)return;const{value:e,next:t}=this._head;return this._head=t,null===t&&(this._tail=null),this._length--,e}clear(){this._length=0,this._head=this._tail=null}},Kf}var Wf={};let Zf=1;const eh=new Map;let th,rh=!1,nh=(e,...t)=>(eh.set(Zf,[e,t]),th(Zf),Zf++),ah=e=>{eh.delete(e)};function oh(e){if(rh)setTimeout(oh,0,e);else{const t=eh.get(e);if(t){rh=!0;try{t[0](...t[1])}finally{ah(e),rh=!1}}}}const ih="undefined"==typeof self?"undefined"==typeof global?void 0:global:self;ih.setImmediate?(nh=ih.setImmediate,ah=ih.clearImmediate):ih.importScripts?function(){const e=new MessageChannel;e.port1.onmessage=e=>{oh(e.data)},th=t=>{e.port2.postMessage(t)}}():function(){const e=`setImmediate$${Math.random()}$`;window.addEventListener("message",t=>{"string"==typeof t.data&&t.data.startsWith(e)&&oh(+t.data.slice(e.length))}),th=t=>{window.postMessage(e+t,"*")}}();const sh=d(Object.freeze(Object.defineProperty({__proto__:null,get clearImmediate(){return ah},get setImmediate(){return nh}},Symbol.toStringTag,{value:"Module"})));var uh,ch;function lh(){if(uh)return Wf;uh=1,Object.defineProperty(Wf,"__esModule",{value:!0}),Wf.createTaskScheduler=void 0;const e=sh,t=Promise.resolve(void 0);return Wf.createTaskScheduler=function(r=e.setImmediate){const n="function"==typeof queueMicrotask?queueMicrotask:e=>t.then(e);let a=0,o=null;return e=>{null!==o?o.push(e):++a<100?n(e):(o=[e],r(()=>{for(const e of o)n(e);o=null,a=0}))}},Wf}function ph(){return ch||(ch=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isIterator=e.isIterable=e.isSourceExpression=e.isPromise=e.isEventEmitter=e.isFunction=e.range=e.union=e.fromIterable=e.fromIterator=e.fromArray=e.single=e.empty=e.wrap=e.WrappingIterator=e.ClonedIterator=e.UnionIterator=e.MultiTransformIterator=e.SimpleTransformIterator=e.TransformIterator=e.BufferedIterator=e.MappingIterator=e.DESTINATION=e.identity=e.IntegerIterator=e.ArrayIterator=e.SingletonIterator=e.EmptyIterator=e.AsyncIterator=e.DESTROYED=e.ENDED=e.CLOSED=e.CLOSING=e.OPEN=e.INIT=e.setTaskScheduler=e.getTaskScheduler=e.scheduleTask=e.LinkedList=void 0;const t=s(),r=Yf();Object.defineProperty(e,"LinkedList",{enumerable:!0,get:function(){return r.LinkedList}});let n=lh().createTaskScheduler();e.scheduleTask=function(e){n(e)},e.getTaskScheduler=function(){return n},e.setTaskScheduler=function(e){n=e},e.INIT=1,e.OPEN=2,e.CLOSING=4,e.CLOSED=8,e.ENDED=16,e.DESTROYED=32;class a extends t.EventEmitter{constructor(t=e.OPEN){super(),this._readable=!1,this._state=t,this.on("newListener",o)}_changeState(t,r=!1){const a=t>this._state&&this._state<e.ENDED;return a&&(this._state=t,t===e.ENDED&&(r?n(()=>this.emit("end")):this.emit("end"))),a}read(){return null}forEach(e,t){this.on("data",M(e,t))}close(){this._changeState(e.CLOSED)&&this._endAsync()}destroy(e){this.done||this._destroy(e,t=>{(e=e||t)&&this.emit("error",e),this._end(!0)})}_destroy(e,t){t()}_end(t=!1){this._changeState(t?e.DESTROYED:e.ENDED)&&(this._readable=!1,this.removeAllListeners("readable"),this.removeAllListeners("data"),this.removeAllListeners("end"))}_endAsync(){n(()=>this._end())}get readable(){return this._readable}set readable(e){e=Boolean(e)&&!this.done,this._readable!==e&&(this._readable=e,e&&n(()=>this.emit("readable")))}get closed(){return this._state>=e.CLOSING}get ended(){return this._state===e.ENDED}get destroyed(){return this._state===e.DESTROYED}get done(){return this._state>=e.ENDED}toString(){const e=this._toStringDetails();return`[${this.constructor.name}${e?` ${e}`:""}]`}_toStringDetails(){return""}toArray(e){const t=[],r="number"==typeof(null==e?void 0:e.limit)?e.limit:1/0;return this.ended||r<=0?Promise.resolve(t):new Promise((e,n)=>{const a=()=>e(t),o=i=>{t.push(i),t.length>=r&&(this.removeListener("error",n),this.removeListener("data",o),this.removeListener("end",a),e(t))};this.on("error",n),this.on("data",o),this.on("end",a)})}getProperty(e,t){const r=this._properties;if(!t)return r&&r[e];if(r&&e in r)n(()=>t(r[e]));else{let r;(r=this._propertyCallbacks)||(this._propertyCallbacks=r=Object.create(null)),e in r?r[e].push(t):r[e]=[t]}}setProperty(e,t){(this._properties||(this._properties=Object.create(null)))[e]=t;const r=this._propertyCallbacks||{},a=r[e];if(a){for(e in delete r[e],n(()=>{for(const e of a)e(t)}),r)return;delete this._propertyCallbacks}}getProperties(){const e=this._properties,t={};for(const r in e)t[r]=e[r];return t}setProperties(e){for(const t in e)this.setProperty(t,e[t])}copyProperties(e,t){for(const r of t)e.getProperty(r,e=>this.setProperty(r,e))}transform(e){return new w(this,e)}map(e,t){return new h(this,M(e,t))}filter(e,t){return this.map(function(r){return e.call(t||this,r)?r:null})}uniq(e=f){const t=new Set;return this.filter(function(r){const n=e.call(this,r);return!t.has(n)&&(t.add(n),!0)})}prepend(e){return this.transform({prepend:e})}append(e){return this.transform({append:e})}surround(e,t){return this.transform({prepend:e,append:t})}skip(e){return this.map(t=>e-- >0?null:t)}take(e){return this.transform({limit:e})}range(e,t){return this.transform({offset:e,limit:Math.max(t-e+1,0)})}clone(){return new A(this)}[Symbol.asyncIterator](){const e=this;let t=null,r=null,n=null;function a(){if(null!==t)if(null!==n)o(n);else if(e.done)t({done:!0,value:void 0}),t=r=null,i();else{const n=e.read();null!==n&&(t({done:!1,value:n}),t=r=null)}}function o(e){null!==r?(r(e),t=r=n=null,i()):null===n&&(n=e)}function i(){e.removeListener("readable",a),e.removeListener("end",a),e.removeListener("error",o)}return e.addListener("readable",a),e.addListener("end",a),e.addListener("error",o),{next:()=>new Promise((e,n)=>{t=e,r=n,a()})}}}function o(e){"data"===e&&(this.removeListener("newListener",o),u(this,"readable",i),this.readable&&n(()=>i.call(this)))}function i(){let e;for(;0!==this.listenerCount("data")&&null!==(e=this.read());)this.emit("data",e);0!==this.listenerCount("data")||this.done||(this.removeListener("readable",i),u(this,"newListener",o))}function u(e,t,r){e.listeners(t).includes(r)||e.on(t,r)}e.AsyncIterator=a;class c extends a{constructor(){super(),this._changeState(e.ENDED,!0)}}e.EmptyIterator=c;class l extends a{constructor(e){super(),this._item=e,null===e?this.close():this.readable=!0}read(){const e=this._item;return this._item=null,this.close(),e}_toStringDetails(){return null===this._item?"":`(${this._item})`}}e.SingletonIterator=l;class p extends a{constructor(e=[],{autoStart:t=!0,preserve:r=!0}={}){super();const n=r||!Array.isArray(e)?[...e]:e;this._index=0,this._sourceStarted=!1!==t,this._truncateThreshold=r?-1:64,this._sourceStarted&&0===n.length?this.close():this._buffer=n,this.readable=!0}read(){this._sourceStarted||(this._sourceStarted=!0);let e=null;return this._buffer&&(this._index<this._buffer.length&&(e=this._buffer[this._index++]),this._index===this._buffer.length?(delete this._buffer,this.close()):this._index===this._truncateThreshold&&(this._buffer.splice(0,this._truncateThreshold),this._index=0)),e}_toStringDetails(){return`(${this._buffer?this._buffer.length-this._index:0})`}_destroy(e,t){delete this._buffer,t()}toArray(e={}){if(!this._buffer)return Promise.resolve([]);const{length:t}=this._buffer,r=this._index,n="number"!=typeof e.limit?t:r+e.limit,a=this._buffer.slice(r,n);return this._index=n,n>=t&&this.close(),Promise.resolve(a)}}e.ArrayIterator=p;class d extends a{constructor({start:e=0,step:t=1,end:r}={}){super(),Number.isFinite(e)&&(e=Math.trunc(e)),this._next=e,Number.isFinite(t)&&(t=Math.trunc(t)),this._step=t;const n=t>=0,a=n?1/0:-1/0;Number.isFinite(r)?r=Math.trunc(r):r!==-a&&(r=a),this._last=r,!Number.isFinite(e)||(n?e>r:e<r)?this.close():this.readable=!0}read(){if(this.closed)return null;const e=this._next,t=this._step,r=this._last,n=this._next+=t;return(t>=0?n>r:n<r)&&this.close(),e}_toStringDetails(){return`(${this._next}...${this._last})`}}function f(e){return e}e.IntegerIterator=d,e.identity=f,e.DESTINATION=Symbol("destination");class h extends a{constructor(t,r=f,n={}){super(),this._map=r,this._source=y(t),this._destroySource=!1!==n.destroySource,t.done?this.close():(this._source[e.DESTINATION]=this,this._source.on("end",_),this._source.on("error",v),this._source.on("readable",b),this.readable=this._source.readable)}read(){if(!this.done){if(this._source.readable){let e,t;for(;null!==(e=this._source.read());)if(null!==(t=this._map(e)))return t}this.readable=!1,this._source.done&&this.close()}return null}_end(t){this._source.removeListener("end",_),this._source.removeListener("error",v),this._source.removeListener("readable",b),delete this._source[e.DESTINATION],this._destroySource&&this._source.destroy(),super._end(t)}}function y(t,r=!1){if(!t||!N(t.read)||!N(t.on))throw new TypeError(`Invalid source: ${t}`);if(!r&&t[e.DESTINATION])throw new Error("The source already has a destination");return t}e.MappingIterator=h;class g extends a{constructor({maxBufferSize:t=4,autoStart:a=!0}={}){super(e.INIT),this._buffer=new r.LinkedList,this._maxBufferSize=4,this._reading=!0,this._pushedCount=0,this.maxBufferSize=t,n(()=>this._init(a)),this._sourceStarted=!1!==a}get maxBufferSize(){return this._maxBufferSize}set maxBufferSize(t){t!==1/0&&(t=Number.isFinite(t)?Math.max(Math.trunc(t),1):4),this._maxBufferSize!==t&&(this._maxBufferSize=t,this._state===e.OPEN&&this._fillBuffer())}_init(t){let r=!1;this._reading=!0,this._begin(()=>{if(r)throw new Error("done callback called multiple times");r=!0,this._reading=!1,this._changeState(e.OPEN),t?this._fillBufferAsync():this.readable=!0})}_begin(e){e()}read(){if(this.done)return null;this._sourceStarted||(this._sourceStarted=!0);const e=this._buffer;let t;return e.empty?(t=null,this.readable=!1):t=e.shift(),!this._reading&&e.length<this._maxBufferSize&&(this.closed?e.empty&&this._endAsync():this._fillBufferAsync()),t}_read(e,t){t()}_push(e){this.done||(this._pushedCount++,this._buffer.push(e),this.readable=!0)}_fillBuffer(){let e;this._reading||(this.closed?this._completeClose():(e=Math.min(this._maxBufferSize-this._buffer.length,128))>0&&(this._pushedCount=0,this._reading=!0,this._read(e,()=>{if(!e)throw new Error("done callback called multiple times");e=0,this._reading=!1,this.closed?this._completeClose():this._pushedCount&&(this.readable=!0,this._buffer.length<this._maxBufferSize/2&&this._fillBufferAsync())})))}_fillBufferAsync(){this._reading||(this._reading=!0,n(()=>{this._reading=!1,this._fillBuffer()}))}close(){this._reading?this._changeState(e.CLOSING):this._completeClose()}_completeClose(){this._changeState(e.CLOSED)&&(this._reading=!0,this._flush(()=>{if(!this._reading)throw new Error("done callback called multiple times");this._reading=!1,this._buffer.empty&&this._endAsync()}))}_destroy(e,t){this._buffer.clear(),t()}_flush(e){e()}_toStringDetails(){const e=this._buffer;return`{${e.empty?"":`next: ${e.first}, `}buffer: ${e.length}}`}}e.BufferedIterator=g;class m extends g{constructor(e,t=e||{}){super(t),this._boundPush=e=>this._push(e),L(e)||(e=t.source),I(e)?this.source=e:e&&(this._createSource=R(e)?()=>e:e,this._sourceStarted&&this._loadSourceAsync()),this._optional=Boolean(t.optional),this._destroySource=!1!==t.destroySource}get source(){return N(this._createSource)&&this._loadSourceAsync(),this._source}set source(t){const r=this._source=this._validateSource(t);r[e.DESTINATION]=this,this.done?this._destroySource&&r.destroy():r.done?this.close():(r.on("end",O),r.on("readable",T),r.on("error",v))}_loadSourceAsync(){N(this._createSource)&&(Promise.resolve(this._createSource()).then(e=>{delete this._createSource,this.source=e,this._fillBuffer()},e=>this.emit("error",e)),this._createSource=null)}_validateSource(e,t=!1){if(this._source||void 0!==this._createSource)throw new Error("The source cannot be changed after it has been set");return y(e,t)}_read(e,t){const r=()=>{this._pushedCount<e&&!this.closed?n(()=>this._readAndTransform(r,t)):t()};this._readAndTransform(r,t)}_readAndTransform(e,t){let r;const n=this.source;!n||n.done||null===(r=n.read())?t():this._optional?this._optionalTransform(r,e):this._transform(r,e,this._boundPush)}_optionalTransform(e,t){const r=this._pushedCount;this._transform(e,()=>{r===this._pushedCount&&this._push(e),t()},this._boundPush)}_transform(e,t,r){r(e),t()}_closeWhenDone(){this.close()}_end(t){const r=this._source;r&&(r.removeListener("end",O),r.removeListener("error",v),r.removeListener("readable",T),delete r[e.DESTINATION],this._destroySource&&r.destroy()),super._end(t)}}function b(){this[e.DESTINATION].readable=!0}function v(t){this[e.DESTINATION].emit("error",t)}function _(){this[e.DESTINATION].close()}function O(){this[e.DESTINATION]._closeWhenDone()}function T(){!1!==this[e.DESTINATION]._sourceStarted&&this[e.DESTINATION]._fillBuffer()}e.TransformIterator=m;class w extends m{constructor(e,t){if(super(e,t),this._offset=0,this._limit=1/0,this._filter=e=>!0,t=t||(L(e)?null:e)){const e=N(t)?t:t.transform,{limit:r,offset:n,filter:a,map:o,prepend:i,append:s}=t;n===1/0||r===-1/0?this._limit=0:(Number.isFinite(n)&&(this._offset=Math.max(Math.trunc(n),0)),Number.isFinite(r)&&(this._limit=Math.max(Math.trunc(r),0)),N(a)&&(this._filter=a),N(o)&&(this._map=o),this._transform=N(e)?e:null),i&&(this._prepender=I(i)?i:D(i)),s&&(this._appender=I(s)?s:D(s))}}_read(e,t){const r=()=>this._readAndTransformSimple(e,a,t);function a(){n(r)}this._readAndTransformSimple(e,a,t)}_readAndTransformSimple(e,t,r){let n;const{source:a}=this;if(a&&!a.done){for(0===this._limit&&this.close();!this.closed&&this._pushedCount<e&&null!==(n=a.read());){if(!this._filter(n)||0!==this._offset&&this._offset--)continue;const e=void 0===this._map?n:this._map(n);if(null===e)this._optional&&this._push(n);else{if(N(this._transform))return void(this._optional?this._optionalTransform(e,t):this._transform(e,t,this._boundPush));this._push(e)}0===--this._limit&&this.close()}r()}else r()}_begin(e){this._insert(this._prepender,e),delete this._prepender}_flush(e){this._insert(this._appender,e),delete this._appender}_insert(e,t){const r=e=>this._push(e);!e||e.done?t():(e.on("data",r),e.on("end",function n(){e.removeListener("data",r),e.removeListener("end",n),t()}))}}e.SimpleTransformIterator=w;e.MultiTransformIterator=class extends m{constructor(e,t){if(super(e,t),this._transformerQueue=[],t){const e=N(t)?t:t.multiTransform;e&&(this._createTransformer=e)}}_read(t,r){const n=this._transformerQueue,a=this._optional;let o,i;for(;(o=n[0])&&o.transformer.done;){a&&null!==o.item&&(t--,this._push(o.item)),n.shift();const{transformer:e}=o;e.removeListener("end",T),e.removeListener("readable",T),e.removeListener("error",v)}const{source:s}=this;for(;s&&!s.done&&n.length<this.maxBufferSize&&(i=s.read(),null!==i);){const t=this._createTransformer(i)||new c;t[e.DESTINATION]=this,t.on("end",T),t.on("readable",T),t.on("error",v),n.push({transformer:t,item:i})}if(o=n[0],o){const{transformer:e}=o;for(;t-- >0&&null!==(i=e.read());)this._push(i),a&&(o.item=null)}else s&&s.done&&this.close();r()}_createTransformer(e){return new l(e)}_closeWhenDone(){this._transformerQueue.length||this.close()}_end(e){if(super._end(e),this._destroySource)for(const t of this._transformerQueue)t.transformer.destroy()}};class S extends g{constructor(e,t={}){super(t),this._sources=[],this._currentSource=-1;const r=!1!==t.autoStart;if(I(e))e.on("error",e=>this.emit("error",e)),this._pending={loading:!1,sources:e},r&&this._loadSources();else if(Array.isArray(e)&&e.length>0)for(const n of e)this._addSource(n);else r&&this.close();this._destroySources=!1!==t.destroySources}_loadSources(){const e=this._pending.sources;this._pending.loading=!0,e.done?(delete this._pending,this.close()):(e.on("data",e=>{this._addSource(e),this._fillBufferAsync()}),e.on("end",()=>{delete this._pending,this._fillBuffer()}))}_addSource(t){R(t)&&(t=x(t)),t.done||(this._sources.push(t),t[e.DESTINATION]=this,t.on("error",v),t.on("readable",T),t.on("end",j))}_removeEmptySources(){this._sources=this._sources.filter((e,t)=>(e.done&&t<=this._currentSource&&this._currentSource--,!e.done)),this._fillBuffer()}_read(e,t){var r;!1===(null===(r=this._pending)||void 0===r?void 0:r.loading)&&this._loadSources();let n,a=0;for(;a!==(a=e);)for(let t=0;t<this._sources.length&&e>0;t++){this._currentSource=(this._currentSource+1)%this._sources.length;null!==(n=this._sources[this._currentSource].read())&&(e--,this._push(n))}this._pending||0!==this._sources.length||this.close(),t()}_end(e=!1){if(super._end(e),this._destroySources){for(const e of this._sources)e.destroy();this._pending&&(this._pending.sources.destroy(),delete this._pending)}}}function j(){this[e.DESTINATION]._removeEmptySources()}e.UnionIterator=S;class A extends m{constructor(e){super(e,{autoStart:!1}),this._readPosition=0,this._reading=!1,e&&(this.readable=!0)}_init(){}close(){a.prototype.close.call(this)}get source(){return super.source}set source(t){const r=this._source=this._validateSource(t),n=r&&r[e.DESTINATION]||(r[e.DESTINATION]=new F(r));this.done?this._destroySource&&r.destroy():n.endsAt(0)?this.close():(n.register(this),!1!==r._sourceStarted&&null===n.readAt(0)||(this.readable=!0));const a=this._propertyCallbacks;for(const e in a){const t=a[e];for(const r of t)this._getSourceProperty(e,r)}}_validateSource(t,r=!1){const n=t&&t[e.DESTINATION];return super._validateSource(t,!n||n instanceof F)}getProperty(e,t){const{source:r}=this,n=this._properties,a=n&&e in n;if(!t)return a?n&&n[e]:r&&r.getProperty(e);super.getProperty(e,t),r&&!a&&this._getSourceProperty(e,t)}_getSourceProperty(e,t){this.source.getProperty(e,r=>{this._properties&&e in this._properties||t(r)})}getProperties(){const e=this.source?this.source.getProperties():{},t=this._properties;for(const r in t)e[r]=t[r];return e}_toStringDetails(){return`{source: ${this.source?this.source.toString():"none"}}`}read(){this._sourceStarted||(this._sourceStarted=!0);const t=this.source;let r=null;if(!this.done&&t){const n=t[e.DESTINATION];null!==(r=n.readAt(this._readPosition))?this._readPosition++:this.readable=!1,n.endsAt(this._readPosition)&&this.close()}return r}_end(t){const r=this.source,n=null==r?void 0:r[e.DESTINATION];n&&n.unregister(this),g.prototype._end.call(this,t)}}e.ClonedIterator=A;class F{constructor(e){if(this._history=[],this._trackers=new Set,this._source=e,!e.done){const t=()=>{for(const e of this._trackers)e.readable=!0},r=e=>{for(const t of this._trackers)t.emit("error",e)},n=()=>{for(const e of this._trackers)!1!==e._sourceStarted&&e._readPosition===this._history.length&&e.close();this._trackers.clear(),e.removeListener("end",n),e.removeListener("error",r),e.removeListener("readable",t)};e.on("end",n),e.on("error",r),e.on("readable",t)}}register(e){this._source.done||this._trackers.add(e)}unregister(e){this._trackers.delete(e)}readAt(e){let t=null;return e<this._history.length?t=this._history[e]:this._source.done||null===(t=this._source.read())||(this._history[e]=t),t}endsAt(e){return this._source.done&&this._history.length===e}}class E extends a{constructor(e,t){super(),this._source=null,this._destroySource=!1!==(null==t?void 0:t.destroySource),R(e)?(this._source=new a,e.then(e=>{this._source=null,this.source=e}).catch(e=>this.emit("error",e))):e&&(this.source=e)}set source(r){let n=r;if(null!==this._source)throw new Error("The source cannot be changed after it has been set");if(C(n)&&(n=n[Symbol.iterator]()),B(n)){let e=n;n=new t.EventEmitter,n.read=()=>{if(null!==e){let t;for(;!(t=e.next()).done;)if(null!==t.value)return t.value;e=null,this.close()}return null}}else n=y(n);this.done?this._destroySource&&N(n.destroy)&&n.destroy():(n[e.DESTINATION]=this,n.on("end",_),n.on("error",v),n.on("readable",b),this._source=n,this.readable=!1!==n.readable)}read(){if(null!==this._source&&!1!==this._source.readable){const e=this._source.read();if(null!==e)return e;this.readable=!1}return null}_end(t=!1){null!==this._source&&(this._source.removeListener("end",_),this._source.removeListener("error",v),this._source.removeListener("readable",b),delete this._source[e.DESTINATION],this._destroySource&&N(this._source.destroy)&&this._source.destroy(),this._source=null),super._end(t)}}function x(e,t){if(t&&("autoStart"in t||"optional"in t||"source"in t||"maxBufferSize"in t))return e&&!I(e)&&(e=new E(e)),new m(e,t);if(!e)return P();if(R(e))return new E(e,t);if(e instanceof a)return e;if(Array.isArray(e))return D(e);if(C(e)||B(e)||I(e))return new E(e,t);throw new TypeError(`Invalid source: ${e}`)}function P(){return new c}function D(e){return new p(e)}function M(e,t){return t?e.bind(t):e}function N(e){return"function"==typeof e}function I(e){return N(null==e?void 0:e.on)}function R(e){return N(null==e?void 0:e.then)}function L(e){return e&&(I(e)||R(e)||N(e))}function C(e){return e&&Symbol.iterator in e}function B(e){return N(null==e?void 0:e.next)}e.WrappingIterator=E,e.wrap=x,e.empty=P,e.single=function(e){return new l(e)},e.fromArray=D,e.fromIterator=function(e){return new E(e)},e.fromIterable=function(e){return new E(e)},e.union=function(e){return new S(e)},e.range=function(e,t,r){return new d({start:e,end:t,step:r})},e.isFunction=N,e.isEventEmitter=I,e.isPromise=R,e.isSourceExpression=L,e.isIterable=C,e.isIterator=B}(Jf)),Jf}var dh,fh={},hh={},yh={};function gh(){if(dh)return yh;dh=1,Object.defineProperty(yh,"__esModule",{value:!0}),yh.BlankNodeScoped=void 0;return yh.BlankNodeScoped=class{constructor(e,t){this.termType="BlankNode",this.value=e,this.skolemized=t}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}},yh}var mh,bh,vh={};function _h(){if(mh)return vh;mh=1,Object.defineProperty(vh,"__esModule",{value:!0}),vh.BlankNodeBindingsScoped=void 0;return vh.BlankNodeBindingsScoped=class{constructor(e){this.termType="BlankNode",this.singleBindingsScope=!0,this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}},vh}function Oh(){return bh||(bh=1,e=hh,t=hh&&hh.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=hh&&hh.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(gh(),e),r(_h(),e)),hh;var e,t,r}var Th,wh={},Sh={},jh={},Ah={};function Fh(){if(Th)return Ah;Th=1,Object.defineProperty(Ah,"__esModule",{value:!0}),Ah.BlankNode=void 0;return Ah.BlankNode=class{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}},Ah}var Eh,xh={},Ph={};function Dh(){if(Eh)return Ph;Eh=1,Object.defineProperty(Ph,"__esModule",{value:!0}),Ph.DefaultGraph=void 0;class e{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&"DefaultGraph"===e.termType}}return Ph.DefaultGraph=e,e.INSTANCE=new e,Ph}var Mh,Nh,Ih={},Rh={};function Lh(){if(Mh)return Rh;Mh=1,Object.defineProperty(Rh,"__esModule",{value:!0}),Rh.NamedNode=void 0;return Rh.NamedNode=class{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&"NamedNode"===e.termType&&e.value===this.value}},Rh}function Ch(){if(Nh)return Ih;Nh=1,Object.defineProperty(Ih,"__esModule",{value:!0}),Ih.Literal=void 0;const e=Lh();class t{constructor(e,r){this.termType="Literal",this.value=e,"string"==typeof r?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(e){return!!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&this.datatype.equals(e.datatype)}}return Ih.Literal=t,t.RDF_LANGUAGE_STRING=new e.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new e.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Ih}var Bh,qh={};function Uh(){if(Bh)return qh;Bh=1,Object.defineProperty(qh,"__esModule",{value:!0}),qh.Quad=void 0;return qh.Quad=class{constructor(e,t,r,n){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=r,this.graph=n}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}},qh}var kh,Qh,Vh,Gh,$h={};function zh(){if(kh)return $h;kh=1,Object.defineProperty($h,"__esModule",{value:!0}),$h.Variable=void 0;return $h.Variable=class{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&"Variable"===e.termType&&e.value===this.value}},$h}function Xh(){return Vh||(Vh=1,e=jh,t=jh&&jh.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=jh&&jh.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Fh(),e),r(function(){if(Qh)return xh;Qh=1,Object.defineProperty(xh,"__esModule",{value:!0}),xh.DataFactory=void 0;const e=Fh(),t=Dh(),r=Ch(),n=Lh(),a=Uh(),o=zh();let i=0;return xh.DataFactory=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${i++}_`}namedNode(e){return new n.NamedNode(e)}blankNode(t){return new e.BlankNode(t||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new r.Literal(e,t)}variable(e){return new o.Variable(e)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(e,t,r,n){return new a.Quad(e,t,r,n||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(r.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}},xh}(),e),r(Dh(),e),r(Ch(),e),r(Lh(),e),r(Uh(),e),r(zh(),e)),jh;var e,t,r}function Hh(){if(Gh)return Sh;Gh=1,Object.defineProperty(Sh,"__esModule",{value:!0}),Sh.matchPatternMappings=Sh.matchPatternComplete=Sh.matchPattern=Sh.matchTerm=Sh.getValueNestedPath=Sh.someTermsNested=Sh.someTerms=Sh.everyTermsNested=Sh.everyTerms=Sh.reduceTermsNested=Sh.reduceTerms=Sh.mapTermsNested=Sh.mapTerms=Sh.filterQuadTermNamesNested=Sh.filterQuadTermNames=Sh.filterTermsNested=Sh.filterTerms=Sh.forEachTermsNested=Sh.forEachTerms=Sh.collectNamedTerms=Sh.getNamedTerms=Sh.getTermsNested=Sh.getTerms=Sh.TRIPLE_TERM_NAMES=Sh.QUAD_TERM_NAMES=void 0;const e=new(Xh().DataFactory);function t(e,t){return t&&"DefaultGraph"===e.graph.termType?[e.subject,e.predicate,e.object]:[e.subject,e.predicate,e.object,e.graph]}function r(e,t){return t(e.subject,"subject")&&t(e.predicate,"predicate")&&t(e.object,"object")&&t(e.graph,"graph")}function n(e,t){return!t||"Variable"===t.termType||"Quad"===t.termType&&"Quad"===e.termType&&o(e,t)||t.equals(e)}function a(e,t,r,a,o){return n(e.subject,t)&&n(e.predicate,r)&&n(e.object,a)&&n(e.graph,o)}function o(e,t){return a(e,t.subject,t.predicate,t.object,t.graph)}return Sh.QUAD_TERM_NAMES=["subject","predicate","object","graph"],Sh.TRIPLE_TERM_NAMES=["subject","predicate","object"],Sh.getTerms=t,Sh.getTermsNested=function e(r,n){const a=[];for(const o of t(r,n))"Quad"===o.termType?e(o,n).forEach(e=>a.push(e)):a.push(o);return a},Sh.getNamedTerms=function(e){return[{key:"subject",value:e.subject},{key:"predicate",value:e.predicate},{key:"object",value:e.object},{key:"graph",value:e.graph}]},Sh.collectNamedTerms=function(t,r,n){const a={};return t.forEach(e=>a[e.key]=e.value),r&&(a.subject=a.subject||r("subject"),a.predicate=a.predicate||r("predicate"),a.object=a.object||r("object"),a.graph=a.graph||r("graph")),(n||e).quad(a.subject,a.predicate,a.object,a.graph)},Sh.forEachTerms=function(e,t){t(e.subject,"subject"),t(e.predicate,"predicate"),t(e.object,"object"),t(e.graph,"graph")},Sh.forEachTermsNested=function e(t,r,n=[]){"Quad"===t.subject.termType?e(t.subject,r,[...n,"subject"]):r(t.subject,[...n,"subject"]),"Quad"===t.predicate.termType?e(t.predicate,r,[...n,"predicate"]):r(t.predicate,[...n,"predicate"]),"Quad"===t.object.termType?e(t.object,r,[...n,"object"]):r(t.object,[...n,"object"]),"Quad"===t.graph.termType?e(t.graph,r,[...n,"graph"]):r(t.graph,[...n,"graph"])},Sh.filterTerms=function(e,t){const r=[];return t(e.subject,"subject")&&r.push(e.subject),t(e.predicate,"predicate")&&r.push(e.predicate),t(e.object,"object")&&r.push(e.object),t(e.graph,"graph")&&r.push(e.graph),r},Sh.filterTermsNested=function e(t,r,n=[]){let a=[];return"Quad"===t.subject.termType?a=[...a,...e(t.subject,r,[...n,"subject"])]:r(t.subject,[...n,"subject"])&&a.push(t.subject),"Quad"===t.predicate.termType?a=[...a,...e(t.predicate,r,[...n,"predicate"])]:r(t.predicate,[...n,"predicate"])&&a.push(t.predicate),"Quad"===t.object.termType?a=[...a,...e(t.object,r,[...n,"object"])]:r(t.object,[...n,"object"])&&a.push(t.object),"Quad"===t.graph.termType?a=[...a,...e(t.graph,r,[...n,"graph"])]:r(t.graph,[...n,"graph"])&&a.push(t.graph),a},Sh.filterQuadTermNames=function(e,t){const r=[];return t(e.subject,"subject")&&r.push("subject"),t(e.predicate,"predicate")&&r.push("predicate"),t(e.object,"object")&&r.push("object"),t(e.graph,"graph")&&r.push("graph"),r},Sh.filterQuadTermNamesNested=function e(t,r,n=[]){let a=[];const o=[...n,"subject"];"Quad"===t.subject.termType?a=[...a,...e(t.subject,r,o)]:r(t.subject,o)&&a.push(o);const i=[...n,"predicate"];"Quad"===t.predicate.termType?a=[...a,...e(t.predicate,r,i)]:r(t.predicate,i)&&a.push(i);const s=[...n,"object"];"Quad"===t.object.termType?a=[...a,...e(t.object,r,s)]:r(t.object,s)&&a.push(s);const u=[...n,"graph"];return"Quad"===t.graph.termType?a=[...a,...e(t.graph,r,u)]:r(t.graph,u)&&a.push(u),a},Sh.mapTerms=function(t,r,n){return(n||e).quad(r(t.subject,"subject"),r(t.predicate,"predicate"),r(t.object,"object"),r(t.graph,"graph"))},Sh.mapTermsNested=function t(r,n,a,o=[]){return(a||e).quad("Quad"===r.subject.termType?t(r.subject,n,a,[...o,"subject"]):n(r.subject,[...o,"subject"]),"Quad"===r.predicate.termType?t(r.predicate,n,a,[...o,"predicate"]):n(r.predicate,[...o,"predicate"]),"Quad"===r.object.termType?t(r.object,n,a,[...o,"object"]):n(r.object,[...o,"object"]),"Quad"===r.graph.termType?t(r.graph,n,a,[...o,"graph"]):n(r.graph,[...o,"graph"]))},Sh.reduceTerms=function(e,t,r){let n=r;return n=t(n,e.subject,"subject"),n=t(n,e.predicate,"predicate"),n=t(n,e.object,"object"),t(n,e.graph,"graph")},Sh.reduceTermsNested=function e(t,r,n,a=[]){let o=n;return o="Quad"===t.subject.termType?e(t.subject,r,o,[...a,"subject"]):r(o,t.subject,[...a,"subject"]),o="Quad"===t.predicate.termType?e(t.predicate,r,o,[...a,"predicate"]):r(o,t.predicate,[...a,"predicate"]),o="Quad"===t.object.termType?e(t.object,r,o,[...a,"object"]):r(o,t.object,[...a,"object"]),o="Quad"===t.graph.termType?e(t.graph,r,o,[...a,"graph"]):r(o,t.graph,[...a,"graph"]),o},Sh.everyTerms=r,Sh.everyTermsNested=function e(t,r,n=[]){return("Quad"===t.subject.termType?e(t.subject,r,[...n,"subject"]):r(t.subject,[...n,"subject"]))&&("Quad"===t.predicate.termType?e(t.predicate,r,[...n,"predicate"]):r(t.predicate,[...n,"predicate"]))&&("Quad"===t.object.termType?e(t.object,r,[...n,"object"]):r(t.object,[...n,"object"]))&&("Quad"===t.graph.termType?e(t.graph,r,[...n,"graph"]):r(t.graph,[...n,"graph"]))},Sh.someTerms=function(e,t){return t(e.subject,"subject")||t(e.predicate,"predicate")||t(e.object,"object")||t(e.graph,"graph")},Sh.someTermsNested=function e(t,r,n=[]){return("Quad"===t.subject.termType?e(t.subject,r,[...n,"subject"]):r(t.subject,[...n,"subject"]))||("Quad"===t.predicate.termType?e(t.predicate,r,[...n,"predicate"]):r(t.predicate,[...n,"predicate"]))||("Quad"===t.object.termType?e(t.object,r,[...n,"object"]):r(t.object,[...n,"object"]))||("Quad"===t.graph.termType?e(t.graph,r,[...n,"graph"]):r(t.graph,[...n,"graph"]))},Sh.getValueNestedPath=function e(t,r){if(0===r.length)return t;if("Quad"===t.termType)return e(t[r[0]],r.slice(1));throw new Error(`Tried to get ${r[0]} from term of type ${t.termType}`)},Sh.matchTerm=n,Sh.matchPattern=a,Sh.matchPatternComplete=o,Sh.matchPatternMappings=function(e,t,n={}){const a={};return function e(t,o){return r(t,(t,r)=>{var i,s;const u=o[r];switch(t.termType){case"Variable":return n.skipVarMapping&&"Variable"===u.termType||(null!==(s=null===(i=a[t.value])||void 0===i?void 0:i.equals(u))&&void 0!==s?s:(a[t.value]=u,!0));case"Quad":return"Quad"===u.termType&&e(t,u);default:return t.equals(u)}})}(t,e)&&(!n.returnMappings||a)},Sh}var Jh,Kh,Yh,Wh,Zh,ey,ty={};function ry(){return Kh||(Kh=1,e=wh,t=wh&&wh.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=wh&&wh.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Hh(),e),r(function(){if(Jh)return ty;Jh=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.getQuads=ty.getDefaultGraphs=ty.getVariables=ty.getLiterals=ty.getBlankNodes=ty.getNamedNodes=ty.getTermsOfType=ty.uniqTerms=ty.TERM_TYPES=void 0;const e=mc();function t(e,t){return e.filter(e=>e.termType===t)}return ty.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"],ty.uniqTerms=function(t){const r={};return t.filter(t=>{const n=(0,e.termToString)(t);return!(n in r)&&(r[n]=!0)})},ty.getTermsOfType=t,ty.getNamedNodes=function(e){return t(e,"NamedNode")},ty.getBlankNodes=function(e){return t(e,"BlankNode")},ty.getLiterals=function(e){return t(e,"Literal")},ty.getVariables=function(e){return t(e,"Variable")},ty.getDefaultGraphs=function(e){return t(e,"DefaultGraph")},ty.getQuads=function(e){return t(e,"Quad")},ty}(),e)),wh;var e,t,r}function ny(){return Yh||(Yh=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.deskolemizeOperation=e.deskolemizeQuad=e.deskolemizeTermNestedThrowing=e.deskolemizeTerm=e.skolemizeBindingsStream=e.skolemizeQuadStream=e.skolemizeBindings=e.skolemizeQuad=e.skolemizeTerm=e.getSourceId=e.SKOLEM_PREFIX=void 0;const t=Oh(),r=ry(),n=Jl();function a(r,n,a){return"BlankNode"===n.termType?new t.BlankNodeScoped(`bc_${a}_${n.value}`,r.namedNode(`${e.SKOLEM_PREFIX}${a}:${n.value}`)):n}function o(e,t,n){return(0,r.mapTermsNested)(t,t=>a(e,t,n))}function i(e,t,r){return t.map(t=>"Quad"===t.termType?o(e,t,r):a(e,t,r))}function s(t,r,n){if("BlankNode"===r.termType&&"skolemized"in r&&(r=r.skolemized),"NamedNode"===r.termType&&r.value.startsWith(e.SKOLEM_PREFIX)){const a=r.value.indexOf(":",e.SKOLEM_PREFIX.length);if(r.value.slice(e.SKOLEM_PREFIX.length,a)===n){const e=r.value.slice(a+1,r.value.length);return t.blankNode(e)}return null}return r}function u(e,t,n){if("Quad"===t.termType)return(0,r.mapTermsNested)(t,t=>{const r=s(e,t,n);if(!r)throw new Error("Skolemized term is not in scope for this source");return r});const a=s(e,t,n);if(null===a)throw new Error("Skolemized term is not in scope for this source");return a}e.SKOLEM_PREFIX="urn:comunica_skolem:source_",e.getSourceId=function(e,t){let r=e.get(t.referenceValue);return void 0===r&&(r=`${e.size}`,e.set(t.referenceValue,r)),r},e.skolemizeTerm=a,e.skolemizeQuad=o,e.skolemizeBindings=i,e.skolemizeQuadStream=function(e,t,r){const n=t.map(t=>o(e,t,r));return function e(){t.getProperty("metadata",t=>{n.setProperty("metadata",t),t.state.addInvalidateListener(e)})}(),n},e.skolemizeBindingsStream=function(e,t,r){const n=t.map(t=>i(e,t,r));return function e(){t.getProperty("metadata",t=>{n.setProperty("metadata",t),t.state.addInvalidateListener(e)})}(),n},e.deskolemizeTerm=s,e.deskolemizeTermNestedThrowing=u,e.deskolemizeQuad=function(e,t,n){return(0,r.mapTermsNested)(t,t=>s(e,t,n)??t)},e.deskolemizeOperation=function(e,t,r){const a=new n.Factory;try{return n.Util.mapOperation(t,{[n.Algebra.types.PATTERN]:(t,n)=>({result:Object.assign(n.createPattern(u(e,t.subject,r),u(e,t.predicate,r),u(e,t.object,r),u(e,t.graph,r)),{metadata:t.metadata}),recurse:!1}),[n.Algebra.types.PATH]:(t,n)=>({result:Object.assign(n.createPath(u(e,t.subject,r),t.predicate,u(e,t.object,r),u(e,t.graph,r)),{metadata:t.metadata}),recurse:!1})},a)}catch{}}}(fh)),fh}function ay(){if(Wh)return Hf;Wh=1,Object.defineProperty(Hf,"__esModule",{value:!0}),Hf.QuerySourceSkolemized=void 0;const e=ls(),t=kd(),r=ph(),n=ny();return Hf.QuerySourceSkolemized=class{constructor(e,t){this.innerSource=e,this.sourceId=t}async getSelectorShape(e){return this.innerSource.getSelectorShape(e)}queryBindings(a,o,i){const s=o.getSafe(e.KeysInitQuery.dataFactory),u=(0,n.deskolemizeOperation)(s,a,this.sourceId);if(!u){const e=new r.ArrayIterator([],{autoStart:!1});return e.setProperty("metadata",{state:new t.MetadataValidationState,cardinality:{type:"exact",value:0},variables:[]}),e}return(0,n.skolemizeBindingsStream)(s,this.innerSource.queryBindings(u,o,i),this.sourceId)}queryBoolean(e,t){return this.innerSource.queryBoolean(e,t)}queryQuads(a,o){const i=o.getSafe(e.KeysInitQuery.dataFactory),s=(0,n.deskolemizeOperation)(i,a,this.sourceId);if(!s){const e=new r.ArrayIterator([],{autoStart:!1});return e.setProperty("metadata",{state:new t.MetadataValidationState,cardinality:{type:"exact",value:0}}),e}return(0,n.skolemizeQuadStream)(i,this.innerSource.queryQuads(s,o),this.sourceId)}queryVoid(e,t){return this.innerSource.queryVoid(e,t)}get referenceValue(){return this.innerSource.referenceValue}toString(){return`${this.innerSource.toString()}(SkolemID:${this.sourceId})`}},Hf}function oy(){if(Zh)return Xf;Zh=1,Object.defineProperty(Xf,"__esModule",{value:!0}),Xf.ActorContextPreprocessQuerySourceSkolemize=void 0;const e=sf(),t=ls(),r=Ji(),n=ay(),a=ny();let o=class extends e.ActorContextPreprocess{constructor(e){super(e)}async test(e){return(0,r.passTestVoid)()}async run(e){let r=e.context;if(r.has(t.KeysQueryOperation.querySources)){r.has(t.KeysQuerySourceIdentify.sourceIds)||(r=r.set(t.KeysQuerySourceIdentify.sourceIds,new Map));const e=r.getSafe(t.KeysQuerySourceIdentify.sourceIds);let o=r.getSafe(t.KeysQueryOperation.querySources);o=o.map(t=>({source:new n.QuerySourceSkolemized(t.source,(0,a.getSourceId)(e,t.source)),context:t.context})),r=r.set(t.KeysQueryOperation.querySources,o)}return{context:r}}};return Xf.ActorContextPreprocessQuerySourceSkolemize=o,Xf}function iy(){return ey||(ey=1,e=zf,t=zf&&zf.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=zf&&zf.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(oy(),e),r(ay(),e),r(ny(),e)),zf;var e,t,r}var sy,uy,cy={},ly={};function py(){if(sy)return ly;sy=1,Object.defineProperty(ly,"__esModule",{value:!0}),ly.MediatorCombinePipeline=void 0;const e=Ji();let t=class extends e.Mediator{constructor(e){super(e)}async mediate(e){let t;try{t=this.publish(e)}catch{return e}if(this.filterFailures){const e=[];for(const r of t){(await r.reply).isPassed()&&e.push(r)}t=e}const r=[];if(t=await Promise.all(t.map(async({actor:t,reply:n},a)=>{try{const e=await n,o=e.getOrThrow();return r[a]=e.getSideData(),{actor:t,reply:o}}catch(o){throw new Error(this.constructFailureMessage(e,[o.message]))}})),this.order){const e=e=>{const t=this.field?e[this.field]:e;if("number"!=typeof t)throw new TypeError("Cannot order elements that are not numbers.");return t};t=t.sort((t,r)=>("increasing"===this.order?1:-1)*(e(t.reply)-e(r.reply)))}let n=e,a=0;for(const{actor:o}of t)n={...n,...await o.runObservable(n,r[a++])};return n}mediateWith(){throw new Error("Method not supported.")}};return ly.MediatorCombinePipeline=t,ly}function dy(){return uy||(uy=1,e=cy,t=cy&&cy.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=cy&&cy.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(py(),e)),cy;var e,t,r}var fy,hy,yy,gy,my={},by={},vy={},_y={};function Oy(){if(fy)return _y;fy=1,Object.defineProperty(_y,"__esModule",{value:!0}),_y.ActorHashBindings=void 0;const e=Ji();let t=class extends e.Actor{constructor(e){super(e)}};return _y.ActorHashBindings=t,_y}function Ty(){return hy||(hy=1,e=vy,t=vy&&vy.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=vy&&vy.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Oy(),e)),vy;var e,t,r}function wy(){if(yy)return by;yy=1,Object.defineProperty(by,"__esModule",{value:!0}),by.ActorHashBindingsMurmur=void 0;const e=Ty(),t=Ji(),r=zl();let n=class extends e.ActorHashBindings{async test(e){return(0,t.passTestVoid)()}async run(e){return{hashFunction:(e,t)=>{let n=r();for(const r of t)n=n.hash(e.get(r)?.value??"UNDEF");return n.result()}}}};return by.ActorHashBindingsMurmur=n,by}function Sy(){return gy||(gy=1,e=my,t=my&&my.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=my&&my.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(wy(),e)),my;var e,t,r}var jy,Ay,Fy={},Ey={};function xy(){if(jy)return Ey;jy=1,Object.defineProperty(Ey,"__esModule",{value:!0}),Ey.MediatorRace=void 0;const e=Ji();let t=class extends e.Mediator{constructor(e){super(e)}mediateWith(t,r){return new Promise((n,a)=>{const o=[];for(const i of r)i.reply.then(a=>{a.isPassed()?n((0,e.passTestWithSideData)(i.actor,a.getSideData())):(o.push(a.getFailMessage()),o.length===r.length&&n((0,e.failTest)(this.constructFailureMessage(t,o))))}).catch(e=>{a(e)})})}};return Ey.MediatorRace=t,Ey}function Py(){return Ay||(Ay=1,e=Fy,t=Fy&&Fy.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Fy&&Fy.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(xy(),e)),Fy;var e,t,r}var Dy,My,Ny,Iy,Ry={},Ly={},Cy={},By={};function qy(){if(Dy)return By;Dy=1,Object.defineProperty(By,"__esModule",{value:!0}),By.ActorHashQuads=void 0;const e=Ji();let t=class extends e.Actor{constructor(e){super(e)}};return By.ActorHashQuads=t,By}function Uy(){return My||(My=1,e=Cy,t=Cy&&Cy.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Cy&&Cy.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(qy(),e)),Cy;var e,t,r}function ky(){if(Ny)return Ly;Ny=1,Object.defineProperty(Ly,"__esModule",{value:!0}),Ly.ActorHashQuadsMurmur=void 0;const e=Uy(),t=Ji(),r=zl();let n=class extends e.ActorHashQuads{async test(e){return(0,t.passTestVoid)()}async run(e){return{hashFunction:e=>{const t=r(e.subject.value);return t.hash(e.predicate.value),t.hash(e.object.value),t.hash(e.graph.value),t.result()}}}};return Ly.ActorHashQuadsMurmur=n,Ly}function Qy(){return Iy||(Iy=1,e=Ry,t=Ry&&Ry.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Ry&&Ry.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(ky(),e)),Ry;var e,t,r}var Vy,Gy,$y,zy,Xy={},Hy={},Jy={},Ky={};function Yy(){if(Vy)return Ky;Vy=1,Object.defineProperty(Ky,"__esModule",{value:!0}),Ky.ActorOptimizeQueryOperation=void 0;const e=Ji();let t=class extends e.Actor{constructor(e){super(e)}};return Ky.ActorOptimizeQueryOperation=t,Ky}function Wy(){return Gy||(Gy=1,e=Jy,t=Jy&&Jy.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Jy&&Jy.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Yy(),e)),Jy;var e,t,r}function Zy(){if($y)return Hy;$y=1,Object.defineProperty(Hy,"__esModule",{value:!0}),Hy.ActorOptimizeQueryOperationRewriteCopy=void 0;const e=Wy(),t=ls(),r=Ji(),n=Jl();let a=class extends e.ActorOptimizeQueryOperation{constructor(e){super(e)}async test(e){return(0,r.passTestVoid)()}async run(e){const r=e.context.getSafe(t.KeysInitQuery.dataFactory),a=new n.Factory(r),o=n.Util.mapOperation(e.operation,{[n.Algebra.types.COPY](e,t){let r;return r="string"==typeof e.destination&&"string"==typeof e.source&&e.destination===e.source||"string"!=typeof e.destination&&"string"!=typeof e.source&&e.destination.equals(e.source)?t.createCompositeUpdate([]):t.createCompositeUpdate([t.createDrop(e.destination,!0),t.createAdd(e.source,e.destination,e.silent)]),{result:r,recurse:!1}}},a);return{operation:o,context:e.context}}};return Hy.ActorOptimizeQueryOperationRewriteCopy=a,Hy}function eg(){return zy||(zy=1,e=Xy,t=Xy&&Xy.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Xy&&Xy.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Zy(),e)),Xy;var e,t,r}var tg,rg,ng={},ag={};function og(){if(tg)return ag;tg=1,Object.defineProperty(ag,"__esModule",{value:!0}),ag.ActorOptimizeQueryOperationRewriteMove=void 0;const e=Wy(),t=ls(),r=Ji(),n=Jl();let a=class extends e.ActorOptimizeQueryOperation{constructor(e){super(e)}async test(e){return(0,r.passTestVoid)()}async run(e){const r=e.context.getSafe(t.KeysInitQuery.dataFactory),a=new n.Factory(r),o=n.Util.mapOperation(e.operation,{[n.Algebra.types.MOVE](e,t){let r;if("string"==typeof e.destination&&"string"==typeof e.source&&e.destination===e.source||"string"!=typeof e.destination&&"string"!=typeof e.source&&e.destination.equals(e.source))r=t.createCompositeUpdate([]);else{const n=[t.createDrop(e.destination,!0),t.createAdd(e.source,e.destination,e.silent),t.createDrop(e.source)];r=t.createCompositeUpdate(n)}return{result:r,recurse:!1}}},a);return{operation:o,context:e.context}}};return ag.ActorOptimizeQueryOperationRewriteMove=a,ag}function ig(){return rg||(rg=1,e=ng,t=ng&&ng.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=ng&&ng.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(og(),e)),ng;var e,t,r}var sg,ug={},cg={},lg={},pg={};function dg(){if(sg)return pg;sg=1,Object.defineProperty(pg,"__esModule",{value:!0}),pg.BlankNode=void 0;return pg.BlankNode=class{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}},pg}var fg,hg={},yg={};function gg(){if(fg)return yg;fg=1,Object.defineProperty(yg,"__esModule",{value:!0}),yg.DefaultGraph=void 0;class e{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&"DefaultGraph"===e.termType}}return yg.DefaultGraph=e,e.INSTANCE=new e,yg}var mg,bg,vg={},_g={};function Og(){if(mg)return _g;mg=1,Object.defineProperty(_g,"__esModule",{value:!0}),_g.NamedNode=void 0;return _g.NamedNode=class{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&"NamedNode"===e.termType&&e.value===this.value}},_g}function Tg(){if(bg)return vg;bg=1,Object.defineProperty(vg,"__esModule",{value:!0}),vg.Literal=void 0;const e=Og();class t{constructor(e,r){this.termType="Literal",this.value=e,"string"==typeof r?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(e){return!!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&this.datatype.equals(e.datatype)}}return vg.Literal=t,t.RDF_LANGUAGE_STRING=new e.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new e.NamedNode("http://www.w3.org/2001/XMLSchema#string"),vg}var wg,Sg={};function jg(){if(wg)return Sg;wg=1,Object.defineProperty(Sg,"__esModule",{value:!0}),Sg.Quad=void 0;return Sg.Quad=class{constructor(e,t,r,n){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=r,this.graph=n}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}},Sg}var Ag,Fg,Eg,xg,Pg,Dg={};function Mg(){if(Ag)return Dg;Ag=1,Object.defineProperty(Dg,"__esModule",{value:!0}),Dg.Variable=void 0;return Dg.Variable=class{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&"Variable"===e.termType&&e.value===this.value}},Dg}function Ng(){return Eg||(Eg=1,e=lg,t=lg&&lg.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=lg&&lg.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(dg(),e),r(function(){if(Fg)return hg;Fg=1,Object.defineProperty(hg,"__esModule",{value:!0}),hg.DataFactory=void 0;const e=dg(),t=gg(),r=Tg(),n=Og(),a=jg(),o=Mg();let i=0;return hg.DataFactory=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${i++}_`}namedNode(e){return new n.NamedNode(e)}blankNode(t){return new e.BlankNode(t||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new r.Literal(e,t)}variable(e){return new o.Variable(e)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(e,t,r,n){return new a.Quad(e,t,r,n||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(r.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}},hg}(),e),r(gg(),e),r(Tg(),e),r(Og(),e),r(jg(),e),r(Mg(),e)),lg;var e,t,r}function Ig(){if(xg)return cg;xg=1,Object.defineProperty(cg,"__esModule",{value:!0}),cg.ActorOptimizeQueryOperationRewriteAdd=void 0;const e=Wy(),t=ls(),r=Ji(),n=Ng(),a=Jl(),o=new n.DataFactory;let i=class extends e.ActorOptimizeQueryOperation{constructor(e){super(e)}async test(e){return(0,r.passTestVoid)()}async run(e){const r=e.context.getSafe(t.KeysInitQuery.dataFactory),n=new a.Factory(r),i=a.Util.mapOperation(e.operation,{[a.Algebra.types.ADD](e,t){const r="DEFAULT"===e.destination?o.defaultGraph():e.destination,n="DEFAULT"===e.source?o.defaultGraph():e.source;return{result:t.createDeleteInsert(void 0,[t.createPattern(o.variable("s"),o.variable("p"),o.variable("o"),r)],t.createPattern(o.variable("s"),o.variable("p"),o.variable("o"),n)),recurse:!1}}},n);return{operation:i,context:e.context}}};return cg.ActorOptimizeQueryOperationRewriteAdd=i,cg}function Rg(){return Pg||(Pg=1,e=ug,t=ug&&ug.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=ug&&ug.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Ig(),e)),ug;var e,t,r}var Lg,Cg={},Bg={},qg={},Ug={},kg={},Qg={};function Vg(){if(Lg)return Qg;Lg=1,Object.defineProperty(Qg,"__esModule",{value:!0}),Qg.BlankNode=void 0;return Qg.BlankNode=class{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}},Qg}var Gg,$g={},zg={};function Xg(){if(Gg)return zg;Gg=1,Object.defineProperty(zg,"__esModule",{value:!0}),zg.DefaultGraph=void 0;class e{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&"DefaultGraph"===e.termType}}return zg.DefaultGraph=e,e.INSTANCE=new e,zg}var Hg,Jg,Kg={},Yg={};function Wg(){if(Hg)return Yg;Hg=1,Object.defineProperty(Yg,"__esModule",{value:!0}),Yg.NamedNode=void 0;return Yg.NamedNode=class{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&"NamedNode"===e.termType&&e.value===this.value}},Yg}function Zg(){if(Jg)return Kg;Jg=1,Object.defineProperty(Kg,"__esModule",{value:!0}),Kg.Literal=void 0;const e=Wg();class t{constructor(e,r){this.termType="Literal",this.value=e,"string"==typeof r?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(e){return!!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&this.datatype.equals(e.datatype)}}return Kg.Literal=t,t.RDF_LANGUAGE_STRING=new e.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new e.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Kg}var em,tm={};function rm(){if(em)return tm;em=1,Object.defineProperty(tm,"__esModule",{value:!0}),tm.Quad=void 0;return tm.Quad=class{constructor(e,t,r,n){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=r,this.graph=n}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}},tm}var nm,am,om,im,sm={};function um(){if(nm)return sm;nm=1,Object.defineProperty(sm,"__esModule",{value:!0}),sm.Variable=void 0;return sm.Variable=class{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&"Variable"===e.termType&&e.value===this.value}},sm}function cm(){return om||(om=1,e=kg,t=kg&&kg.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=kg&&kg.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Vg(),e),r(function(){if(am)return $g;am=1,Object.defineProperty($g,"__esModule",{value:!0}),$g.DataFactory=void 0;const e=Vg(),t=Xg(),r=Zg(),n=Wg(),a=rm(),o=um();let i=0;return $g.DataFactory=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${i++}_`}namedNode(e){return new n.NamedNode(e)}blankNode(t){return new e.BlankNode(t||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new r.Literal(e,t)}variable(e){return new o.Variable(e)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(e,t,r,n){return new a.Quad(e,t,r,n||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(r.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}},$g}(),e),r(Xg(),e),r(Zg(),e),r(Wg(),e),r(rm(),e),r(um(),e)),kg;var e,t,r}function lm(){if(im)return Ug;im=1,Object.defineProperty(Ug,"__esModule",{value:!0}),Ug.estimateNpsCardinality=Ug.estimateJoinCardinality=Ug.estimateUnionCardinality=Ug.estimateSliceCardinality=Ug.estimateMinusCardinality=Ug.estimateCardinality=void 0;const e=cm(),t=Jl(),r=new e.DataFactory,n=new t.Factory(r);function a(e,l){const p=l.getCardinality(e);if(p)return p;switch(e.type){case t.Algebra.types.ASK:return{type:"exact",value:1,dataset:l.uri};case t.Algebra.types.LOAD:case t.Algebra.types.DELETE_INSERT:case t.Algebra.types.ADD:case t.Algebra.types.COMPOSITE_UPDATE:case t.Algebra.types.CLEAR:case t.Algebra.types.NOP:case t.Algebra.types.DROP:case t.Algebra.types.CREATE:case t.Algebra.types.MOVE:case t.Algebra.types.COPY:return{type:"exact",value:0,dataset:l.uri};case t.Algebra.types.PROJECT:case t.Algebra.types.FILTER:case t.Algebra.types.ORDER_BY:case t.Algebra.types.GROUP:case t.Algebra.types.CONSTRUCT:case t.Algebra.types.DISTINCT:case t.Algebra.types.REDUCED:case t.Algebra.types.EXTEND:case t.Algebra.types.FROM:case t.Algebra.types.GRAPH:return a(e.input,l);case t.Algebra.types.ZERO_OR_ONE_PATH:case t.Algebra.types.ZERO_OR_MORE_PATH:case t.Algebra.types.ONE_OR_MORE_PATH:case t.Algebra.types.INV:return a(e.path,l);case t.Algebra.types.PATH:return a(e.predicate,l);case t.Algebra.types.NPS:return c(e,l);case t.Algebra.types.LINK:return a(n.createPattern(r.variable("s"),e.iri,r.variable("o")),l);case t.Algebra.types.UNION:case t.Algebra.types.SEQ:case t.Algebra.types.ALT:return s(e.input,l);case t.Algebra.types.BGP:return u(e.patterns,l);case t.Algebra.types.JOIN:case t.Algebra.types.LEFT_JOIN:return u(e.input,l);case t.Algebra.types.SLICE:return i(e,l);case t.Algebra.types.MINUS:return o(e,l);case t.Algebra.types.VALUES:return{type:"exact",value:e.bindings.length,dataset:l.uri};case t.Algebra.types.SERVICE:case t.Algebra.types.DESCRIBE:case t.Algebra.types.EXPRESSION:case t.Algebra.types.PATTERN:return{type:"estimate",value:Number.POSITIVE_INFINITY,dataset:l.uri}}}function o(e,t){const r=a(e.input[0],t),n=a(e.input[1],t);return{type:"estimate",value:Math.max(r.value-n.value,0),dataset:t.uri}}function i(e,t){const r=a(e.input,t);return r.value>0&&(r.value=Math.max(r.value-e.start,0),void 0!==e.length&&(r.value=Math.min(r.value,e.length))),r}function s(e,t){const r={type:"exact",value:0,dataset:t.uri};for(const n of e){const e=a(n,t);"estimate"===e.type&&"exact"===r.type&&(r.type=e.type),r.value+=e.value}return r}function u(e,r){const n=[];for(const a of e){const e=t.Util.inScopeVariables(a).map(e=>e.value),r=n.find(t=>e.some(e=>t.vars.has(e)));if(r){r.ops.push(a);for(const t of e)r.vars.add(t)}else n.push({ops:[a],vars:new Set(e)})}return{type:"estimate",value:n.map(e=>Math.min(...e.ops.map(e=>a(e,r).value))).reduce((e,t)=>e*t,1),dataset:r.uri}}function c(e,t){const o=a(n.createSeq([...e.iris].reverse().map(e=>n.createLink(e))),t),i=a(n.createPattern(r.variable("s"),r.variable("p"),r.variable("o")),t);return{type:"estimate",value:Math.max(0,i.value-o.value),dataset:t.uri}}return Ug.estimateCardinality=a,Ug.estimateMinusCardinality=o,Ug.estimateSliceCardinality=i,Ug.estimateUnionCardinality=s,Ug.estimateJoinCardinality=u,Ug.estimateNpsCardinality=c,Ug}var pm,dm={};function fm(){if(pm)return dm;pm=1,Object.defineProperty(dm,"__esModule",{value:!0}),dm.getExpressionVariables=void 0;const e=ry(),t=Jl();return dm.getExpressionVariables=function r(n){switch(n.expressionType){case t.Algebra.expressionTypes.AGGREGATE:case t.Algebra.expressionTypes.WILDCARD:throw new Error(`Getting expression variables is not supported for ${n.expressionType}`);case t.Algebra.expressionTypes.EXISTENCE:return t.Util.inScopeVariables(n.input);case t.Algebra.expressionTypes.NAMED:return[];case t.Algebra.expressionTypes.OPERATOR:return(0,e.uniqTerms)(n.args.flatMap(e=>r(e)));case t.Algebra.expressionTypes.TERM:return"Variable"===n.term.termType?[n.term]:[]}},dm}var hm,ym={};function gm(){if(hm)return ym;hm=1,Object.defineProperty(ym,"__esModule",{value:!0}),ym.doesShapeAcceptOperation=void 0;const e=Jl();function t(e,t,n){return r(e,e,t,n)}function r(i,s,u,c){if("conjunction"===s.type)return s.children.every(e=>r(i,e,u,c));if("disjunction"===s.type)return s.children.some(e=>r(i,e,u,c));if("negation"===s.type)return!r(s.child,s.child,u,c);if("arity"===s.type)return r(i,s.child,u,c);if((c?.joinBindings&&!s.joinBindings)??(c?.filterBindings&&!s.filterBindings))return!1;const l=s.operation;switch(l.operationType){case"type":return!!(l.type!==e.Algebra.types.EXPRESSION||!o(u)||"extensionFunctions"in l&&l.extensionFunctions?.includes(u.name.value))&&(!(!n(i,s.children,u,c)&&!a(i,u,c))&&l.type===u.type);case"pattern":return!(!n(i,s.children,u,c)&&!a(i,u,c))&&l.pattern.type===u.type;case"wildcard":{if(c?.wildcardAcceptAllExtensionFunctions)return!0;if(o(u))return!1;let r=!1;return e.Util.recurseOperation(u,{[e.Algebra.types.EXPRESSION]:e=>!(o(e)&&!t(i,e,c))||(r=!0,!1)}),!r}}}function n(e,t,n,a){if(o(n)||o(n.expression))return!1;if(t){const o=n.input?Array.isArray(n.input)?n.input:[n.input]:n.patterns??[];for(const[n,i]of t.entries())if(!o[n]||!r(e,i,o[n],a))return!1;return!0}return!1}function a(e,t,n){if(t.input){if(!(Array.isArray(t.input)?t.input:[t.input]).every(t=>r(e,e,t,n)))return!1}return!(t.expression&&o(t.expression)&&!r(e,e,t.expression,n))&&!(t.patterns&&!t.patterns.every(t=>r(e,e,t,n)))}function o(t){return t&&t.type===e.Algebra.types.EXPRESSION&&t.expressionType===e.Algebra.expressionTypes.NAMED&&(r=t.name.value,!/^https?:\/\/www\.w3\.org\//u.test(r));var r}return ym.doesShapeAcceptOperation=t,ym}var mm,bm={};function vm(){if(mm)return bm;mm=1,Object.defineProperty(bm,"__esModule",{value:!0}),bm.removeOperationSource=bm.assignOperationSource=bm.getOperationSource=bm.testReadOnly=bm.validateQueryOutput=bm.getSafeVoid=bm.getSafeBoolean=bm.getSafeQuads=bm.getSafeBindings=void 0;const e=ls(),t=Ji();function r(e,t){if(e.type!==t)throw new Error(`Invalid query output type: Expected '${t}' but got '${e.type}'`)}return bm.getSafeBindings=function(e){return r(e,"bindings"),e},bm.getSafeQuads=function(e){return r(e,"quads"),e},bm.getSafeBoolean=function(e){return r(e,"boolean"),e},bm.getSafeVoid=function(e){return r(e,"void"),e},bm.validateQueryOutput=r,bm.testReadOnly=function(r){return r.get(e.KeysQueryOperation.readOnly)?(0,t.failTest)("Attempted a write operation in read-only mode"):(0,t.passTestVoid)()},bm.getOperationSource=function(e){return e.metadata?.scopedSource},bm.assignOperationSource=function(e,t){return(e={...e}).metadata=e.metadata?{...e.metadata}:{},e.metadata.scopedSource=t,e},bm.removeOperationSource=function(e){delete e.metadata?.scopedSource,e.metadata&&0===Object.keys(e.metadata).length&&delete e.metadata},bm}var _m,Om,Tm,wm,Sm={};function jm(){if(_m)return Sm;_m=1,Object.defineProperty(Sm,"__esModule",{value:!0}),Sm.materializeOperation=Sm.materializeTerm=void 0;const e=mc(),t=ry(),r=Jl();function n(e,r){if("Variable"===e.termType){const t=r.get(e);if(t)return t}return"Quad"===e.termType&&(0,t.someTermsNested)(e,e=>"Variable"===e.termType)?(0,t.mapTermsNested)(e,e=>n(e,r)):e}function a(t,r,n){const a=[];for(const[o,i]of r)if(!n||n.some(e=>e.equals(o))){const r={[(0,e.termToString)(o)]:i};a.push(t.createValues([o],[r]))}return a}return Sm.materializeTerm=n,Sm.materializeOperation=function t(o,i,s,u,c={}){return c={strictTargetVariables:"strictTargetVariables"in c&&c.strictTargetVariables,bindFilter:!("bindFilter"in c)||c.bindFilter,originalBindings:"originalBindings"in c?c.originalBindings:i},r.Util.mapOperation(o,{path:(e,t)=>({recurse:!1,result:Object.assign(t.createPath(n(e.subject,i),e.predicate,n(e.object,i),n(e.graph,i)),{metadata:e.metadata})}),pattern:(e,t)=>({recurse:!1,result:Object.assign(t.createPattern(n(e.subject,i),n(e.predicate,i),n(e.object,i),n(e.graph,i)),{metadata:e.metadata})}),join:(e,r)=>({recurse:!1,result:r.createJoin(e.input.map(e=>t(e,i,s,u,c)),e.input.every(e=>!e.metadata))}),extend(r){if(i.has(r.variable)){if(c.strictTargetVariables)throw new Error(`Tried to bind variable ${(0,e.termToString)(r.variable)} in a BIND operator.`);return{recurse:!0,result:t(r.input,i,s,u,c)}}return{recurse:!0,result:r}},group(t,r){if(c.strictTargetVariables){for(const r of t.variables)if(i.has(r))throw new Error(`Tried to bind variable ${(0,e.termToString)(r)} in a GROUP BY operator.`);return{recurse:!0,result:t}}const n=t.variables.filter(e=>!i.has(e));return{recurse:!0,result:r.createGroup(t.input,n,t.aggregates)}},filter(e,r){const n=c.originalBindings;if("operator"!==e.expression.expressionType||0===n.size)return{recurse:!1,result:e};const o=a(r,n),l=t(e.expression,i,s,u,c),p=r.createJoin([...o,t(e.input,i,s,u,c)]);return{recurse:!1,result:r.createFilter(p,l)}},project(e,r){const n=a(r,c.originalBindings,e.variables);let o=t(e.input,i,s,u,c);return n.length>0&&(o=r.createJoin([...n,o])),{recurse:!1,result:r.createProject(o,e.variables)}},values(t,r){if(!c.strictTargetVariables){const n=t.variables.filter(e=>!i.has(e)),a=t.bindings.map(t=>{const r={...t};let n=!0;return i.forEach((t,a)=>{const o=(0,e.termToString)(a);o in r&&(t.equals(r[o])||(n=!1),delete r[o])}),n?r:void 0}).filter(Boolean);return{recurse:!0,result:r.createValues(n,a)}}for(const n of t.variables)if(i.has(n))throw new Error(`Tried to bind variable ${(0,e.termToString)(n)} in a VALUES operator.`);return{recurse:!1,result:t}},expression(t,r){if(!c.bindFilter)return{recurse:!1,result:t};if("term"===t.expressionType)return{recurse:!1,result:r.createTermExpression(n(t.term,i))};if("operator"===t.expressionType)return"bound"===t.operator&&1===t.args.length&&"term"===t.args[0].expressionType&&[...i.keys()].some(e=>t.args[0].term.equals(e))?{recurse:!1,result:r.createTermExpression(r.dataFactory.literal("true",r.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#boolean")))}:{recurse:!0,result:t};if("aggregate"===t.expressionType&&"variable"in t&&i.has(t.variable)){if(c.strictTargetVariables)throw new Error(`Tried to bind ${(0,e.termToString)(t.variable)} in a ${t.aggregator} aggregate.`);return{recurse:!0,result:t}}return{recurse:!0,result:t}}},s)},Sm}function Am(){return Om||(Om=1,e=qg,t=qg&&qg.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=qg&&qg.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(lm(),e),r(fm(),e),r(gm(),e),r(vm(),e),r(jm(),e)),qg;var e,t,r}function Fm(){if(Tm)return Bg;Tm=1,Object.defineProperty(Bg,"__esModule",{value:!0}),Bg.ActorOptimizeQueryOperationGroupSources=void 0;const e=Wy(),t=ls(),r=Ji(),n=Am(),a=Jl();let o=class extends e.ActorOptimizeQueryOperation{constructor(e){super(e)}async test(e){return(0,n.getOperationSource)(e.operation)?(0,r.failTest)(`Actor ${this.name} does not work with top-level operation sources.`):(0,r.passTestVoid)()}async run(e){return{operation:await this.groupOperation(e.operation,e.context),context:e.context}}async groupOperation(e,r){const o=r.getSafe(t.KeysInitQuery.dataFactory),i=new a.Factory(o);if((0,n.getOperationSource)(e)??!("input"in e))return e;if(!Array.isArray(e.input)){const t=await this.groupOperation(e.input,r);if(t.metadata?.scopedSource){const a=(0,n.getOperationSource)(t);e=await this.moveSourceAnnotationUpwardsIfPossible(e,[t],a,r)}return{...e,input:t}}const s=await Promise.all(e.input.map(e=>this.groupOperation(e,r))),u=this.clusterOperationsWithEqualSources(s);if(1===u.length){const t=u[0],a=(0,n.getOperationSource)(u[0][0]);return{...await this.moveSourceAnnotationUpwardsIfPossible(e,t,a,r),input:t}}if(u.length===s.length)return{...e,input:s};let c;switch(e.type){case a.Algebra.types.JOIN:c=i.createJoin.bind(i);break;case a.Algebra.types.UNION:c=i.createUnion.bind(i);break;case a.Algebra.types.ALT:c=i.createAlt.bind(i);break;case a.Algebra.types.SEQ:c=i.createSeq.bind(i);break;default:throw new Error(`Unsupported operation '${e.type}' detected while grouping sources`)}return await this.groupOperationMulti(u,c,r)}async groupOperationMulti(e,t,r){let a=!0;const o=await Promise.all(e.map(async e=>{const o=(0,n.getOperationSource)(e[0]),i=await this.moveSourceAnnotationUpwardsIfPossible(t(e,!0),e,o,r);return(0,n.getOperationSource)(i)&&(a=!1),i}));return t(o,a)}clusterOperationsWithEqualSources(e){const t=new Map,r=[];for(const o of e){const e=(0,n.getOperationSource)(o);e?(t.has(e)||t.set(e,[]),t.get(e).push(o)):r.push(o)}const a=[];r.length>0&&a.push(r);for(const[o,i]of t.entries())a.push(i.map(e=>(0,n.assignOperationSource)(e,o)));return a}async moveSourceAnnotationUpwardsIfPossible(e,t,r,a){if(r&&this.isPossibleToMoveSourceAnnotationUpwards(e,await r.source.getSelectorShape(a),a)){this.logDebug(a,`Hoist ${t.length} source-specific operations into a single ${e.type} operation for ${r.source.toString()}`),e=(0,n.assignOperationSource)(e,r);for(const e of t)(0,n.removeOperationSource)(e)}return e}isPossibleToMoveSourceAnnotationUpwards(e,r,o){const i=o.get(t.KeysInitQuery.extensionFunctionsAlwaysPushdown);if((0,n.doesShapeAcceptOperation)(r,e,{wildcardAcceptAllExtensionFunctions:i})){const s=o.get(t.KeysInitQuery.extensionFunctions),u=e.expression;return!s||u?.expressionType!==a.Algebra.expressionTypes.NAMED||!(u?.name.value in s)||(0,n.doesShapeAcceptOperation)(r,u,{wildcardAcceptAllExtensionFunctions:i})}return!1}};return Bg.ActorOptimizeQueryOperationGroupSources=o,Bg}function Em(){return wm||(wm=1,e=Cg,t=Cg&&Cg.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Cg&&Cg.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Fm(),e)),Cg;var e,t,r}var xm,Pm,Dm={},Mm={};function Nm(){if(xm)return Mm;xm=1,Object.defineProperty(Mm,"__esModule",{value:!0}),Mm.ActorOptimizeQueryOperationConstructDistinct=void 0;const e=Wy(),t=cs(),r=Ji(),n=Jl();let a=class extends e.ActorOptimizeQueryOperation{constructor(e){super(e)}async test(e){return e.context.has(t.KeysInitQuery.distinctConstruct)?(0,r.passTestVoid)():(0,r.failTest)(`${this.name} was not enabled by the query.`)}async run(e){const r=n.Util.mapOperation(e.operation,{construct:(e,t)=>({recurse:!1,result:t.createDistinct(t.createConstruct(e.input,e.template))})});return{operation:r,context:e.context.delete(t.KeysInitQuery.distinctConstruct)}}};return Mm.ActorOptimizeQueryOperationConstructDistinct=a,Mm}function Im(){return Pm||(Pm=1,e=Dm,t=Dm&&Dm.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Dm&&Dm.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Nm(),e)),Dm;var e,t,r}var Rm,Lm,Cm,Bm,qm={},Um={},km={},Qm={};function Vm(){if(Rm)return Qm;Rm=1,Object.defineProperty(Qm,"__esModule",{value:!0}),Qm.ActorRdfJoinEntriesSort=void 0;const e=Ji();let t=class extends e.Actor{constructor(e){super(e)}};return Qm.ActorRdfJoinEntriesSort=t,Qm}function Gm(){return Lm||(Lm=1,e=km,t=km&&km.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=km&&km.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Vm(),e)),km;var e,t,r}function $m(){if(Cm)return Um;Cm=1,Object.defineProperty(Um,"__esModule",{value:!0}),Um.ActorRdfJoinEntriesSortCardinality=void 0;const e=Gm(),t=Ji();let r=class extends e.ActorRdfJoinEntriesSort{constructor(e){super(e)}async test(e){return(0,t.passTest)({accuracy:0===e.entries.length?1:e.entries.reduce((e,t)=>e+(Number.isFinite(t.metadata.cardinality.value)?1:0),0)/e.entries.length})}async run(e){return{entries:[...e.entries].sort((e,t)=>e.metadata.cardinality.value-t.metadata.cardinality.value)}}};return Um.ActorRdfJoinEntriesSortCardinality=r,Um}function zm(){return Bm||(Bm=1,e=qm,t=qm&&qm.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=qm&&qm.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r($m(),e)),qm;var e,t,r}var Xm,Hm,Jm={},Km={};function Ym(){if(Xm)return Km;Xm=1,Object.defineProperty(Km,"__esModule",{value:!0}),Km.MediatorNumber=void 0;const e=Ji();let t=class extends e.Mediator{constructor(e){super(e),this.indexPicker=this.createIndexPicker()}createIndexPicker(){switch(this.type){case"min":return e=>e.reduce((e,t,r)=>{const n=this.getOrDefault(t[this.field],Number.POSITIVE_INFINITY);return null!==n&&(Number.isNaN(e[0])||e[0]>n)?[n,r]:e},[Number.NaN,-1])[1];case"max":return e=>e.reduce((e,t,r)=>{const n=this.getOrDefault(t[this.field],Number.NEGATIVE_INFINITY);return null!==n&&(Number.isNaN(e[0])||e[0]<n)?[n,r]:e},[Number.NaN,-1])[1];default:throw new Error(`No valid "type" value was given, must be either 'min' or 'max', but got: ${this.type}`)}}getOrDefault(e,t){return void 0===e?t:e}async mediateWith(t,r){let n=await Promise.all(r.map(({reply:e})=>e));const a=[];if(this.ignoreFailures){const t={};t[this.field]=null,n=n.map(r=>r.isFailed()?(a.push(r.getFailMessage()),(0,e.passTestWithSideData)(t,void 0)):r)}const o=[],i=n.map((e,t)=>{const r=e.getOrThrow();return o[t]=e.getSideData(),r}),s=this.indexPicker(i);return s<0?(0,e.failTest)(this.constructFailureMessage(t,a)):(0,e.passTestWithSideData)(r[s].actor,o[s])}};return Km.MediatorNumber=t,Km}function Wm(){return Hm||(Hm=1,e=Jm,t=Jm&&Jm.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Jm&&Jm.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Ym(),e)),Jm;var e,t,r}var Zm,eb,tb,rb,nb={},ab={},ob={},ib={};function sb(){if(Zm)return ib;Zm=1,Object.defineProperty(ib,"__esModule",{value:!0}),ib.ActorRdfJoinSelectivity=void 0;const e=Ji();let t=class extends e.Actor{constructor(e){super(e)}};return ib.ActorRdfJoinSelectivity=t,ib}function ub(){return eb||(eb=1,e=ob,t=ob&&ob.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=ob&&ob.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(sb(),e)),ob;var e,t,r}function cb(){if(tb)return ab;tb=1,Object.defineProperty(ab,"__esModule",{value:!0}),ab.JoinTypes=ab.ActorRdfJoinSelectivityVariableCounting=void 0;const e=ub(),t=Ji(),r=Jl();let n=class n extends e.ActorRdfJoinSelectivity{constructor(e){super(e)}async test(e){return(0,t.passTest)({accuracy:.5})}static getPatternCost(e){let t=1;return"Variable"===e.subject.termType&&(t+=4),"Variable"!==e.predicate.termType&&e.type!==r.Algebra.types.PATH||(t+=1),"Variable"===e.object.termType&&(t+=2),"Variable"===e.graph.termType&&(t+=1),t/9}static getJoinTypes(e,t){const r=[];return"Variable"===e.subject.termType?(e.subject.equals(t.subject)&&r.push(a.unboundSS),"pattern"===t.type&&e.subject.equals(t.predicate)&&r.push(a.unboundSP),e.subject.equals(t.object)&&r.push(a.unboundSO),e.subject.equals(t.graph)&&r.push(a.unboundSG)):(e.subject.equals(t.subject)&&r.push(a.boundSS),"pattern"===t.type&&e.subject.equals(t.predicate)&&r.push(a.boundSP),e.subject.equals(t.object)&&r.push(a.boundSO),e.subject.equals(t.graph)&&r.push(a.boundSG)),"pattern"===e.type&&("Variable"===e.predicate.termType?(e.predicate.equals(t.subject)&&r.push(a.unboundPS),"pattern"===t.type&&e.predicate.equals(t.predicate)&&r.push(a.unboundPP),e.predicate.equals(t.object)&&r.push(a.unboundPO),e.predicate.equals(t.graph)&&r.push(a.unboundPG)):(e.predicate.equals(t.subject)&&r.push(a.boundPS),"pattern"===t.type&&e.predicate.equals(t.predicate)&&r.push(a.boundPP),e.predicate.equals(t.object)&&r.push(a.boundPO),e.predicate.equals(t.graph)&&r.push(a.boundPG))),"Variable"===e.object.termType?(e.object.equals(t.subject)&&r.push(a.unboundOS),"pattern"===t.type&&e.object.equals(t.predicate)&&r.push(a.unboundOP),e.object.equals(t.object)&&r.push(a.unboundOO),e.object.equals(t.graph)&&r.push(a.unboundOG)):(e.object.equals(t.subject)&&r.push(a.boundOS),"pattern"===t.type&&e.object.equals(t.predicate)&&r.push(a.boundOP),e.object.equals(t.object)&&r.push(a.boundOO),e.object.equals(t.graph)&&r.push(a.boundOG)),"Variable"===e.graph.termType?(e.graph.equals(t.subject)&&r.push(a.unboundGS),"pattern"===t.type&&e.graph.equals(t.predicate)&&r.push(a.unboundGP),e.graph.equals(t.object)&&r.push(a.unboundGO),e.graph.equals(t.graph)&&r.push(a.unboundGG)):(e.graph.equals(t.subject)&&r.push(a.boundGS),"pattern"===t.type&&e.graph.equals(t.predicate)&&r.push(a.boundGP),e.graph.equals(t.object)&&r.push(a.boundGO),e.graph.equals(t.graph)&&r.push(a.boundGG)),r}static getOperationsPairwiseJoinCost(e,t){let r=n.MAX_PAIRWISE_COST;for(const o of n.getJoinTypes(e,t))switch(o){case a.boundSS:r-=4;break;case a.boundSP:r-=6;break;case a.boundSO:r-=2;break;case a.boundSG:case a.boundPS:r-=6;break;case a.boundPP:return 1;case a.boundPO:case a.boundPG:r-=6;break;case a.boundOS:r-=2;break;case a.boundOP:r-=6;break;case a.boundOO:r-=2;break;case a.boundOG:case a.boundGS:case a.boundGP:case a.boundGO:case a.boundGG:r-=6;break;case a.unboundSS:r-=2;break;case a.unboundSP:r-=3;break;case a.unboundSO:r-=1;break;case a.unboundSG:case a.unboundPS:case a.unboundPP:case a.unboundPO:case a.unboundPG:r-=3;break;case a.unboundOS:r-=1;break;case a.unboundOP:r-=3;break;case a.unboundOO:r-=1;break;case a.unboundOG:case a.unboundGS:case a.unboundGP:case a.unboundGO:case a.unboundGG:r-=3}return r/n.MAX_PAIRWISE_COST}static getOperationsJoinCost(e){const t=[];for(const n of e)r.Util.recurseOperation(n,{[r.Algebra.types.PATTERN]:e=>(t.push(e),!1),[r.Algebra.types.PATH]:e=>(t.push(e),!1)});let a=0,o=0;for(const r of t)for(const e of t)r!==e&&(a+=n.getOperationsPairwiseJoinCost(r,e),o++);return 0===o?1:a/o*t.reduce((e,t)=>e*n.getPatternCost(t),1)}async run(e){return e.entries.length<=1?{selectivity:1}:{selectivity:n.getOperationsJoinCost(e.entries.map(e=>e.operation))}}};var a;return ab.ActorRdfJoinSelectivityVariableCounting=n,n.MAX_PAIRWISE_COST=82,function(e){e[e.boundSS=0]="boundSS",e[e.boundSP=1]="boundSP",e[e.boundSO=2]="boundSO",e[e.boundSG=3]="boundSG",e[e.boundPS=4]="boundPS",e[e.boundPP=5]="boundPP",e[e.boundPO=6]="boundPO",e[e.boundPG=7]="boundPG",e[e.boundOS=8]="boundOS",e[e.boundOP=9]="boundOP",e[e.boundOO=10]="boundOO",e[e.boundOG=11]="boundOG",e[e.boundGS=12]="boundGS",e[e.boundGP=13]="boundGP",e[e.boundGO=14]="boundGO",e[e.boundGG=15]="boundGG",e[e.unboundSS=16]="unboundSS",e[e.unboundSP=17]="unboundSP",e[e.unboundSO=18]="unboundSO",e[e.unboundSG=19]="unboundSG",e[e.unboundPS=20]="unboundPS",e[e.unboundPP=21]="unboundPP",e[e.unboundPO=22]="unboundPO",e[e.unboundPG=23]="unboundPG",e[e.unboundOS=24]="unboundOS",e[e.unboundOP=25]="unboundOP",e[e.unboundOO=26]="unboundOO",e[e.unboundOG=27]="unboundOG",e[e.unboundGS=28]="unboundGS",e[e.unboundGP=29]="unboundGP",e[e.unboundGO=30]="unboundGO",e[e.unboundGG=31]="unboundGG"}(a||(ab.JoinTypes=a={})),ab}function lb(){return rb||(rb=1,e=nb,t=nb&&nb.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=nb&&nb.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(cb(),e)),nb;var e,t,r}var pb,db,fb,hb,yb={},gb={},mb={},bb={};function vb(){if(pb)return bb;pb=1,Object.defineProperty(bb,"__esModule",{value:!0}),bb.ActorRdfMetadataAccumulate=void 0;const e=Ji();let t=class extends e.Actor{constructor(e){super(e)}};return bb.ActorRdfMetadataAccumulate=t,bb}function _b(){return db||(db=1,e=mb,t=mb&&mb.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=mb&&mb.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(vb(),e)),mb;var e,t,r}function Ob(){if(fb)return gb;fb=1,Object.defineProperty(gb,"__esModule",{value:!0}),gb.ActorRdfMetadataAccumulateCardinality=void 0;const e=_b(),t=Ji();let r=class extends e.ActorRdfMetadataAccumulate{constructor(e){super(e)}async test(e){return(0,t.passTestVoid)()}async run(e){if("initialize"===e.mode)return{metadata:{cardinality:{type:"exact",value:0}}};const t={...e.accumulatedMetadata.cardinality};if(t.dataset){if(e.accumulatedMetadata.defaultGraph===t.dataset&&t.dataset!==e.appendingMetadata.cardinality.dataset)return{metadata:{cardinality:e.appendingMetadata.cardinality}};if(!e.appendingMetadata.cardinality.dataset)return{metadata:{cardinality:t}};if(t.dataset!==e.appendingMetadata.cardinality.dataset&&e.appendingMetadata.subsetOf===t.dataset)return{metadata:{cardinality:e.appendingMetadata.cardinality}};if(t.dataset===e.appendingMetadata.cardinality.dataset)return{metadata:{cardinality:t}};delete t.dataset}return e.appendingMetadata.cardinality&&Number.isFinite(e.appendingMetadata.cardinality.value)?("estimate"===e.appendingMetadata.cardinality.type&&(t.type="estimate"),t.value+=e.appendingMetadata.cardinality.value):(t.type="estimate",t.value=Number.POSITIVE_INFINITY),{metadata:{cardinality:t}}}};return gb.ActorRdfMetadataAccumulateCardinality=r,gb}function Tb(){return hb||(hb=1,e=yb,t=yb&&yb.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=yb&&yb.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Ob(),e)),yb;var e,t,r}var wb,Sb,jb={},Ab={};function Fb(){if(wb)return Ab;wb=1,Object.defineProperty(Ab,"__esModule",{value:!0}),Ab.ActorRdfMetadataAccumulatePageSize=void 0;const e=_b(),t=Ji();let r=class extends e.ActorRdfMetadataAccumulate{constructor(e){super(e)}async test(e){return(0,t.passTestVoid)()}async run(e){return"initialize"===e.mode?{metadata:{}}:{metadata:{..."pageSize"in e.accumulatedMetadata||"pageSize"in e.appendingMetadata?{pageSize:(e.accumulatedMetadata.pageSize??0)+(e.appendingMetadata.pageSize??0)}:{}}}}};return Ab.ActorRdfMetadataAccumulatePageSize=r,Ab}function Eb(){return Sb||(Sb=1,e=jb,t=jb&&jb.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=jb&&jb.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Fb(),e)),jb;var e,t,r}var xb,Pb,Db={},Mb={};function Nb(){if(xb)return Mb;xb=1,Object.defineProperty(Mb,"__esModule",{value:!0}),Mb.ActorRdfMetadataAccumulateRequestTime=void 0;const e=_b(),t=Ji();let r=class extends e.ActorRdfMetadataAccumulate{constructor(e){super(e)}async test(e){return(0,t.passTestVoid)()}async run(e){return"initialize"===e.mode?{metadata:{}}:{metadata:{..."requestTime"in e.accumulatedMetadata||"requestTime"in e.appendingMetadata?{requestTime:(e.accumulatedMetadata.requestTime??0)+(e.appendingMetadata.requestTime??0)}:{}}}}};return Mb.ActorRdfMetadataAccumulateRequestTime=r,Mb}function Ib(){return Pb||(Pb=1,e=Db,t=Db&&Db.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Db&&Db.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Nb(),e)),Db;var e,t,r}var Rb,Lb,Cb={},Bb={};function qb(){if(Rb)return Bb;Rb=1,Object.defineProperty(Bb,"__esModule",{value:!0}),Bb.MediatorCombineUnion=void 0;const e=Ji();let t=class extends e.Mediator{constructor(e){super(e),this.combiner=this.createCombiner()}async mediate(e){let t;try{t=this.publish(e)}catch{t=[]}if(this.filterFailures){const e=[];for(const r of t){(await r.reply).isPassed()&&e.push(r)}t=e}const r=[];await Promise.all(t.map(async({reply:e},t)=>{const n=await e,a=n.getOrThrow();return r[t]=n.getSideData(),a}));const n=await Promise.all(t.map((t,n)=>t.actor.runObservable(e,r[n])));return this.combiner(n)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return e=>{const t={};return t[this.field]={},[{}].concat(e.map(e=>e[this.field])).forEach(e=>{t[this.field]={...e,...t[this.field]}}),t}}};return Bb.MediatorCombineUnion=t,Bb}function Ub(){return Lb||(Lb=1,e=Cb,t=Cb&&Cb.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Cb&&Cb.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(qb(),e)),Cb;var e,t,r}var kb,Qb={},Vb={},Gb={},$b={};function zb(){if(kb)return $b;kb=1,Object.defineProperty($b,"__esModule",{value:!0}),$b.ActorRdfUpdateQuads=void 0;const e=Ji();let t=class extends e.Actor{constructor(e){super(e)}};return $b.ActorRdfUpdateQuads=t,$b}var Xb,Hb={};function Jb(){if(Xb)return Hb;Xb=1,Object.defineProperty(Hb,"__esModule",{value:!0}),Hb.ActorRdfUpdateQuadsDestination=Hb.deskolemize=Hb.deskolemizeStream=void 0;const e=iy(),t=ls(),r=Ji(),n=zb();function a(t,r,n){return r?.map(r=>(0,e.deskolemizeQuad)(t,r,n))}function o(e){const r=e.context.getSafe(t.KeysInitQuery.dataFactory),n=e.context.get(t.KeysRdfUpdateQuads.destination),o=e.context.get(t.KeysQuerySourceIdentify.sourceIds)?.get(n);return o?{...e,quadStreamInsert:a(r,e.quadStreamInsert,o),quadStreamDelete:a(r,e.quadStreamDelete,o)}:e}Hb.deskolemizeStream=a,Hb.deskolemize=o;let i=class extends n.ActorRdfUpdateQuads{async test(e){return(0,r.passTestVoid)()}async run(e){const t=await this.getDestination(e.context);return await this.getOutput(t,o(e))}async getOutput(e,t){return{execute:async()=>{await e.update({insert:t.quadStreamInsert,delete:t.quadStreamDelete}),await(t.deleteGraphs?e.deleteGraphs(t.deleteGraphs.graphs,t.deleteGraphs.requireExistence,t.deleteGraphs.dropGraphs):Promise.resolve()),await(t.createGraphs?e.createGraphs(t.createGraphs.graphs,t.createGraphs.requireNonExistence):Promise.resolve())}}}};return Hb.ActorRdfUpdateQuadsDestination=i,Hb}var Kb,Yb={};function Wb(){return Kb||(Kb=1,Object.defineProperty(Yb,"__esModule",{value:!0})),Yb}var Zb,ev,tv={};function rv(){if(Zb)return tv;Zb=1,Object.defineProperty(tv,"__esModule",{value:!0}),tv.getContextDestinationUrl=tv.getContextDestination=tv.getDataDestinationContext=tv.getDataDestinationValue=tv.getDataDestinationType=tv.isDataDestinationRawType=void 0;const e=ls();function t(e){return"string"==typeof e||"remove"in e}function r(e){return t(e)?e:e.value}return tv.isDataDestinationRawType=t,tv.getDataDestinationType=function(e){return"string"==typeof e?"":"remove"in e?"rdfjsStore":e.type},tv.getDataDestinationValue=r,tv.getDataDestinationContext=function(e,t){return"string"==typeof e||"remove"in e||!e.context?t:t.merge(e.context)},tv.getContextDestination=function(t){return t.get(e.KeysRdfUpdateQuads.destination)},tv.getContextDestinationUrl=function(e){if(e){let t=r(e);if("string"==typeof t){const e=t.indexOf("#");return e>=0&&(t=t.slice(0,e)),t}}},tv}function nv(){return ev||(ev=1,e=Gb,t=Gb&&Gb.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Gb&&Gb.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(zb(),e),r(Jb(),e),r(Wb(),e),r(rv(),e)),Gb;var e,t,r}var av,ov,iv,sv,uv={},cv={};function lv(){if(ov)return uv;ov=1,Object.defineProperty(uv,"__esModule",{value:!0}),uv.RdfJsQuadDestination=void 0;const e=(av||(av=1,Object.defineProperty(cv,"__esModule",{value:!0}),cv.promisifyEventEmitter=void 0,cv.promisifyEventEmitter=function(e,t){return new Promise((r,n)=>{e.on("end",()=>r(t)),e.on("error",n)})}),cv),t=mc();return uv.RdfJsQuadDestination=class{constructor(e,t){this.dataFactory=e,this.store=t}async update(t){t.delete&&await(0,e.promisifyEventEmitter)(this.store.remove(t.delete)),t.insert&&await(0,e.promisifyEventEmitter)(this.store.import(t.insert))}async deleteGraphs(r,n,a){switch(r){case"ALL":await(0,e.promisifyEventEmitter)(this.store.deleteGraph(this.dataFactory.defaultGraph()));case"NAMED":const n=this.store.match(),a={};n.on("data",e=>{"DefaultGraph"!==e.graph.termType&&(a[(0,t.termToString)(e.graph)]=!0)}),await(0,e.promisifyEventEmitter)(n),await Promise.all(Object.keys(a).map(r=>(0,e.promisifyEventEmitter)(this.store.deleteGraph((0,t.stringToTerm)(r,this.dataFactory)))));break;default:for(const t of Array.isArray(r)?r:[r])await(0,e.promisifyEventEmitter)(this.store.deleteGraph(t))}}async createGraphs(e,t){if(t)for(const r of e){const e=this.store.match(void 0,void 0,void 0,r);await new Promise((t,n)=>{e.once("data",()=>{n(new Error(`Unable to create graph ${r.value} as it already exists`))}),e.on("end",t),e.on("error",n)})}}},uv}function pv(){if(iv)return Vb;iv=1,Object.defineProperty(Vb,"__esModule",{value:!0}),Vb.ActorRdfUpdateQuadsRdfJsStore=void 0;const e=nv(),t=ls(),r=Ji(),n=lv();let a=class extends e.ActorRdfUpdateQuadsDestination{constructor(e){super(e)}async test(t){const n=(0,e.getContextDestination)(t.context);return!n||"string"==typeof n||!("remove"in n)&&"value"in n&&!n.value?.remove?(0,r.failTest)(`${this.name} received an invalid rdfjsStore.`):(0,r.passTestVoid)()}async getDestination(r){const a=(0,e.getContextDestination)(r);return new n.RdfJsQuadDestination(r.getSafe(t.KeysInitQuery.dataFactory),"remove"in a?a:a.value)}};return Vb.ActorRdfUpdateQuadsRdfJsStore=a,Vb}function dv(){return sv||(sv=1,e=Qb,t=Qb&&Qb.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Qb&&Qb.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(pv(),e)),Qb;var e,t,r}var fv,hv,yv,gv,mv={},bv={},vv={},_v={};function Ov(){if(fv)return _v;fv=1,Object.defineProperty(_v,"__esModule",{value:!0}),_v.ActorQueryParse=void 0;const e=Ji();let t=class extends e.Actor{constructor(e){super(e)}};return _v.ActorQueryParse=t,_v}function Tv(){return hv||(hv=1,e=vv,t=vv&&vv.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=vv&&vv.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Ov(),e)),vv;var e,t,r}function wv(){if(yv)return bv;yv=1,Object.defineProperty(bv,"__esModule",{value:!0}),bv.ActorQueryParseSparql=void 0;const e=Tv(),t=ls(),r=Ji(),n=Jl(),a=pl();let o=class extends e.ActorQueryParse{constructor(e){super(e),this.prefixes=Object.freeze(this.prefixes)}async test(e){return e.queryFormat&&"sparql"!==e.queryFormat.language?(0,r.failTest)("This actor can only parse SPARQL queries"):(0,r.passTestVoid)()}async run(e){const r=e.context.getSafe(t.KeysInitQuery.dataFactory),o=new a.Parser({prefixes:this.prefixes,baseIRI:e.baseIRI,sparqlStar:!0,factory:r}).parse(e.query);return{baseIRI:"query"===o.type?o.base:void 0,operation:(0,n.translate)(o,{quads:!0,prefixes:this.prefixes,blankToVariable:!0,baseIRI:e.baseIRI,dataFactory:r})}}};return bv.ActorQueryParseSparql=o,bv}function Sv(){return gv||(gv=1,e=mv,t=mv&&mv.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=mv&&mv.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(wv(),e)),mv;var e,t,r}var jv,Av,Fv,Ev={},xv={},Pv={};function Dv(){if(jv)return Pv;jv=1,Object.defineProperty(Pv,"__esModule",{value:!0}),Pv.ExpressionFunctionBnode=void 0;const e=Ad(),t=ls(),r=Oh(),n=Sd();let a=class a extends e.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:n.SparqlOperator.BNODE,apply:async e=>{const{args:o,mapping:i,exprEval:s}=e,u=1===o.length?await s.evaluatorExpressionEvaluation(o[0],i):void 0;let c;if(u){const e=a.bnodeTree.search([u],s.context.getSafe(t.KeysExpressionEvaluator.superTypeProvider),s.context.getSafe(t.KeysInitQuery.functionArgumentsCache));if(!e)throw new n.InvalidArgumentTypes(o,n.SparqlOperator.BNODE);c=e(s)([u]).str()}const l=new r.BlankNodeBindingsScoped(c??"BNODE_"+a.bnodeCounter++);return new n.BlankNode(l)}})}checkArity(e){return 0===e.length||1===e.length}};return Pv.ExpressionFunctionBnode=a,a.bnodeTree=(0,n.declare)(n.SparqlOperator.BNODE).onString1(()=>e=>e).collect(),a.bnodeCounter=0,Pv}function Mv(){if(Av)return xv;Av=1,Object.defineProperty(xv,"__esModule",{value:!0}),xv.ActorFunctionFactoryExpressionBnode=void 0;const e=Ad(),t=Sd(),r=Dv();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.BNODE],termFunction:!1})}async run(e){return new r.ExpressionFunctionBnode}};return xv.ActorFunctionFactoryExpressionBnode=n,xv}function Nv(){return Fv||(Fv=1,e=Ev,t=Ev&&Ev.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Ev&&Ev.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Mv(),e)),Ev;var e,t,r}var Iv,Rv,Lv,Cv={},Bv={},qv={};function Uv(){if(Iv)return qv;Iv=1,Object.defineProperty(qv,"__esModule",{value:!0}),qv.ExpressionFunctionCoalesce=void 0;const e=Ad(),t=Sd();let r=class extends e.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:t.SparqlOperator.COALESCE,apply:async({args:e,mapping:r,exprEval:n})=>{const a=[];for(const t of e)try{return await n.evaluatorExpressionEvaluation(t,r)}catch(o){a.push(o)}throw new t.CoalesceError(a)}})}};return qv.ExpressionFunctionCoalesce=r,qv}function kv(){if(Rv)return Bv;Rv=1,Object.defineProperty(Bv,"__esModule",{value:!0}),Bv.ActorFunctionFactoryExpressionCoalesce=void 0;const e=Ad(),t=Sd(),r=Uv();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.COALESCE],termFunction:!1})}async run(e){return new r.ExpressionFunctionCoalesce}};return Bv.ActorFunctionFactoryExpressionCoalesce=n,Bv}function Qv(){return Lv||(Lv=1,e=Cv,t=Cv&&Cv.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Cv&&Cv.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(kv(),e)),Cv;var e,t,r}var Vv,Gv,$v,zv={},Xv={},Hv={};function Jv(){if(Vv)return Hv;Vv=1,Object.defineProperty(Hv,"__esModule",{value:!0}),Hv.ExpressionFunctionBound=void 0;const e=Ad(),t=ls(),r=Eu(),n=Sd();let a=class extends e.ExpressionFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.BOUND,apply:async({args:e,mapping:a,exprEval:o})=>{const i=e[0];if(i.expressionType!==r.ExpressionType.Variable)throw new n.InvalidArgumentTypes(e,n.SparqlOperator.BOUND);const s=a.has((0,n.expressionToVar)(o.context.getSafe(t.KeysInitQuery.dataFactory),i));return(0,n.bool)(s)}})}};return Hv.ExpressionFunctionBound=a,Hv}function Kv(){if(Gv)return Xv;Gv=1,Object.defineProperty(Xv,"__esModule",{value:!0}),Xv.ActorFunctionFactoryExpressionBound=void 0;const e=Ad(),t=Sd(),r=Jv();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.BOUND],termFunction:!1})}async run(e){return new r.ExpressionFunctionBound}};return Xv.ActorFunctionFactoryExpressionBound=n,Xv}function Yv(){return $v||($v=1,e=zv,t=zv&&zv.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=zv&&zv.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Kv(),e)),zv;var e,t,r}var Wv,Zv={},e_={},t_={},r_={};function n_(){if(Wv)return r_;Wv=1,Object.defineProperty(r_,"__esModule",{value:!0}),r_.BlankNode=void 0;return r_.BlankNode=class{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}},r_}var a_,o_={},i_={};function s_(){if(a_)return i_;a_=1,Object.defineProperty(i_,"__esModule",{value:!0}),i_.DefaultGraph=void 0;class e{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&"DefaultGraph"===e.termType}}return i_.DefaultGraph=e,e.INSTANCE=new e,i_}var u_,c_,l_={},p_={};function d_(){if(u_)return p_;u_=1,Object.defineProperty(p_,"__esModule",{value:!0}),p_.NamedNode=void 0;return p_.NamedNode=class{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&"NamedNode"===e.termType&&e.value===this.value}},p_}function f_(){if(c_)return l_;c_=1,Object.defineProperty(l_,"__esModule",{value:!0}),l_.Literal=void 0;const e=d_();class t{constructor(e,r){this.termType="Literal",this.value=e,"string"==typeof r?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}equals(e){return!!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&this.datatype.equals(e.datatype)}}return l_.Literal=t,t.RDF_LANGUAGE_STRING=new e.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new e.NamedNode("http://www.w3.org/2001/XMLSchema#string"),l_}var h_,y_={};function g_(){if(h_)return y_;h_=1,Object.defineProperty(y_,"__esModule",{value:!0}),y_.Quad=void 0;return y_.Quad=class{constructor(e,t,r,n){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=r,this.graph=n}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}},y_}var m_,b_,v_,__={};function O_(){if(m_)return __;m_=1,Object.defineProperty(__,"__esModule",{value:!0}),__.Variable=void 0;return __.Variable=class{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&"Variable"===e.termType&&e.value===this.value}},__}function T_(){return v_||(v_=1,e=t_,t=t_&&t_.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=t_&&t_.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(n_(),e),r(function(){if(b_)return o_;b_=1,Object.defineProperty(o_,"__esModule",{value:!0}),o_.DataFactory=void 0;const e=n_(),t=s_(),r=f_(),n=d_(),a=g_(),o=O_();let i=0;return o_.DataFactory=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${i++}_`}namedNode(e){return new n.NamedNode(e)}blankNode(t){return new e.BlankNode(t||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new r.Literal(e,t)}variable(e){return new o.Variable(e)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(e,t,r,n){return new a.Quad(e,t,r,n||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(r.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}},o_}(),e),r(s_(),e),r(f_(),e),r(d_(),e),r(g_(),e),r(O_(),e)),t_;var e,t,r}var w_,S_,j_,A_={};function F_(){if(w_)return A_;w_=1,Object.defineProperty(A_,"__esModule",{value:!0}),A_.NamedExtension=void 0;const e=jd(),t=ls(),r=Sd();let n=class extends e.ExpressionFunctionBase{constructor({operator:e,functionDefinition:n}){super({arity:Number.POSITIVE_INFINITY,operator:e,apply:async({args:e,exprEval:a,mapping:o})=>{const i=await Promise.all(e.map(e=>a.evaluatorExpressionEvaluation(e,o)));try{return new r.TermTransformer(a.context.getSafe(t.KeysExpressionEvaluator.superTypeProvider)).transformRDFTermUnsafe(await n(i.map(e=>e.toRDF(a.context.getSafe(t.KeysInitQuery.dataFactory)))))}catch(s){throw new r.ExtensionFunctionError(this.operator,s)}}})}};return A_.NamedExtension=n,A_}function E_(){if(S_)return e_;S_=1,Object.defineProperty(e_,"__esModule",{value:!0}),e_.ActorFunctionFactoryExpressionExtensions=void 0;const e=Ad(),t=ls(),r=Ji(),n=T_(),a=F_();let o=class extends e.ActorFunctionFactory{constructor(e){super(e)}async test({context:e,functionName:a}){const o=e.getSafe(t.KeysExpressionEvaluator.extensionFunctionCreator);return await o((new n.DataFactory).namedNode(a))?(0,r.passTestVoid)():(0,r.failTest)(`Actor ${this.name} can only provide non-termExpression implementations for functions that are provided through config entries like: ${t.KeysInitQuery.extensionFunctionCreator.name} or ${t.KeysInitQuery.extensionFunctions.name}`)}async run({context:e,functionName:r}){const o=e.getSafe(t.KeysExpressionEvaluator.extensionFunctionCreator),i=await o((new n.DataFactory).namedNode(r));return new a.NamedExtension({operator:r,functionDefinition:i})}};return e_.ActorFunctionFactoryExpressionExtensions=o,e_}function x_(){return j_||(j_=1,e=Zv,t=Zv&&Zv.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Zv&&Zv.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(E_(),e)),Zv;var e,t,r}var P_,D_,M_,N_={},I_={},R_={};function L_(){if(P_)return R_;P_=1,Object.defineProperty(R_,"__esModule",{value:!0}),R_.ExpressionFunctionConcat=void 0;const e=Ad(),t=ls(),r=Sd();let n=class n extends e.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:r.SparqlOperator.CONCAT,apply:async e=>{const{args:a,mapping:o,exprEval:i}=e,s=a.map(async e=>i.evaluatorExpressionEvaluation(e,o)).map(async e=>{const o=n.concatTree.search([await e],i.context.getSafe(t.KeysExpressionEvaluator.superTypeProvider),i.context.getSafe(t.KeysInitQuery.functionArgumentsCache));if(!o)throw new r.InvalidArgumentTypes(a,r.SparqlOperator.CONCAT);return o(i)([await e])}),u=await Promise.all(s),c=u.map(e=>e.typedValue).join(""),l=n.langAllEqual(u)?u[0].language:void 0;return l?(0,r.langString)(c,l):(0,r.string)(c)}})}static langAllEqual(e){return e.length>0&&e.every(t=>t.language===e[0].language)}};return R_.ExpressionFunctionConcat=n,n.concatTree=(0,r.declare)(r.SparqlOperator.CONCAT).onStringly1(()=>e=>e).collect(),R_}function C_(){if(D_)return I_;D_=1,Object.defineProperty(I_,"__esModule",{value:!0}),I_.ActorFunctionFactoryExpressionConcat=void 0;const e=Ad(),t=Sd(),r=L_();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.CONCAT],termFunction:!1})}async run(e){return new r.ExpressionFunctionConcat}};return I_.ActorFunctionFactoryExpressionConcat=n,I_}function B_(){return M_||(M_=1,e=N_,t=N_&&N_.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=N_&&N_.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(C_(),e)),N_;var e,t,r}var q_,U_,k_,Q_={},V_={},G_={};function $_(){if(q_)return G_;q_=1,Object.defineProperty(G_,"__esModule",{value:!0}),G_.ExpressionFunctionIf=void 0;const e=Ad(),t=Sd();let r=class extends e.ExpressionFunctionBase{constructor(){super({arity:3,operator:t.SparqlOperator.IF,apply:async({args:e,mapping:t,exprEval:r})=>(await r.evaluatorExpressionEvaluation(e[0],t)).coerceEBV()?r.evaluatorExpressionEvaluation(e[1],t):r.evaluatorExpressionEvaluation(e[2],t)})}};return G_.ExpressionFunctionIf=r,G_}function z_(){if(U_)return V_;U_=1,Object.defineProperty(V_,"__esModule",{value:!0}),V_.ActorFunctionFactoryExpressionIf=void 0;const e=Ad(),t=Sd(),r=$_();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IF],termFunction:!1})}async run(e){return new r.ExpressionFunctionIf}};return V_.ActorFunctionFactoryExpressionIf=n,V_}function X_(){return k_||(k_=1,e=Q_,t=Q_&&Q_.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Q_&&Q_.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(z_(),e)),Q_;var e,t,r}var H_,J_,K_,Y_={},W_={},Z_={};function eO(){if(H_)return Z_;H_=1,Object.defineProperty(Z_,"__esModule",{value:!0}),Z_.ExpressionFunctionLogicalAnd=void 0;const e=Ad(),t=Sd();let r=class extends e.ExpressionFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.LOGICAL_AND,apply:async({args:e,mapping:r,exprEval:n})=>{const[a,o]=e;try{const e=await n.evaluatorExpressionEvaluation(a,r);if(!e.coerceEBV())return(0,t.bool)(!1);const i=(await n.evaluatorExpressionEvaluation(o,r)).coerceEBV();return(0,t.bool)(i)}catch(i){if((await n.evaluatorExpressionEvaluation(o,r)).coerceEBV())throw i;return(0,t.bool)(!1)}}})}};return Z_.ExpressionFunctionLogicalAnd=r,Z_}function tO(){if(J_)return W_;J_=1,Object.defineProperty(W_,"__esModule",{value:!0}),W_.ActorFunctionFactoryExpressionLogicalAnd=void 0;const e=Ad(),t=Sd(),r=eO();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LOGICAL_AND],termFunction:!1})}async run(e){return new r.ExpressionFunctionLogicalAnd}};return W_.ActorFunctionFactoryExpressionLogicalAnd=n,W_}function rO(){return K_||(K_=1,e=Y_,t=Y_&&Y_.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Y_&&Y_.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(tO(),e)),Y_;var e,t,r}var nO,aO,oO,iO={},sO={},uO={};function cO(){if(nO)return uO;nO=1,Object.defineProperty(uO,"__esModule",{value:!0}),uO.ExpressionFunctionLogicalOr=void 0;const e=Ad(),t=Sd();let r=class extends e.ExpressionFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.LOGICAL_OR,apply:async({args:e,mapping:r,exprEval:n})=>{const[a,o]=e;try{const e=await n.evaluatorExpressionEvaluation(a,r);if(e.coerceEBV())return(0,t.bool)(!0);const i=(await n.evaluatorExpressionEvaluation(o,r)).coerceEBV();return(0,t.bool)(i)}catch(i){if(!(await n.evaluatorExpressionEvaluation(o,r)).coerceEBV())throw i;return(0,t.bool)(!0)}}})}};return uO.ExpressionFunctionLogicalOr=r,uO}function lO(){if(aO)return sO;aO=1,Object.defineProperty(sO,"__esModule",{value:!0}),sO.ActorFunctionFactoryExpressionLogicalOr=void 0;const e=Ad(),t=Sd(),r=cO();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LOGICAL_OR],termFunction:!1})}async run(e){return new r.ExpressionFunctionLogicalOr}};return sO.ActorFunctionFactoryExpressionLogicalOr=n,sO}function pO(){return oO||(oO=1,e=iO,t=iO&&iO.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=iO&&iO.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(lO(),e)),iO;var e,t,r}var dO,fO,hO,yO={},gO={},mO={};function bO(){if(dO)return mO;dO=1,Object.defineProperty(mO,"__esModule",{value:!0}),mO.ExpressionFunctionSameTerm=void 0;const e=Ad(),t=ls(),r=Sd();let n=class extends e.ExpressionFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.SAME_TERM,apply:async({args:e,mapping:n,exprEval:a})=>{const o=a.context.getSafe(t.KeysInitQuery.dataFactory),[i,s]=e.map(e=>a.evaluatorExpressionEvaluation(e,n)),[u,c]=await Promise.all([i,s]);return(0,r.bool)(u.toRDF(o).equals(c.toRDF(o)))}})}};return mO.ExpressionFunctionSameTerm=n,mO}function vO(){if(fO)return gO;fO=1,Object.defineProperty(gO,"__esModule",{value:!0}),gO.ActorFunctionFactoryExpressionSameTerm=void 0;const e=Ad(),t=Sd(),r=bO();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SAME_TERM],termFunction:!1})}async run(e){return new r.ExpressionFunctionSameTerm}};return gO.ActorFunctionFactoryExpressionSameTerm=n,gO}function _O(){return hO||(hO=1,e=yO,t=yO&&yO.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=yO&&yO.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(vO(),e)),yO;var e,t,r}var OO,TO,wO,SO={},jO={},AO={};function FO(){if(OO)return AO;OO=1,Object.defineProperty(AO,"__esModule",{value:!0}),AO.TermFunctionAbs=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.ABS,overloads:(0,t.declare)(t.SparqlOperator.ABS).numericConverter(()=>e=>Math.abs(e)).collect()})}};return AO.TermFunctionAbs=r,AO}function EO(){if(TO)return jO;TO=1,Object.defineProperty(jO,"__esModule",{value:!0}),jO.ActorFunctionFactoryTermAbs=void 0;const e=Ad(),t=Sd(),r=FO();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.ABS],termFunction:!0})}async run(e){return new r.TermFunctionAbs}};return jO.ActorFunctionFactoryTermAbs=n,jO}function xO(){return wO||(wO=1,e=SO,t=SO&&SO.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=SO&&SO.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(EO(),e)),SO;var e,t,r}var PO,DO,MO,NO,IO={},RO={},LO={},CO={exports:{}},BO=CO.exports;function qO(){return PO||(PO=1,e=CO,function(t){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,o=Math.floor,i="[BigNumber Error] ",s=i+"Number primitive has more than 15 significant digits: ",u=1e14,c=14,l=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,f=1e9;function h(e){var t=0|e;return e>0||e===t?t:t-1}function y(e){for(var t,r,n=1,a=e.length,o=e[0]+"";n<a;){for(t=e[n++]+"",r=c-t.length;r--;t="0"+t);o+=t}for(a=o.length;48===o.charCodeAt(--a););return o.slice(0,a+1||1)}function g(e,t){var r,n,a=e.c,o=t.c,i=e.s,s=t.s,u=e.e,c=t.e;if(!i||!s)return null;if(r=a&&!a[0],n=o&&!o[0],r||n)return r?n?0:-s:i;if(i!=s)return i;if(r=i<0,n=u==c,!a||!o)return n?0:!a^r?1:-1;if(!n)return u>c^r?1:-1;for(s=(u=a.length)<(c=o.length)?u:c,i=0;i<s;i++)if(a[i]!=o[i])return a[i]>o[i]^r?1:-1;return u==c?0:u>c^r?1:-1}function m(e,t,r,n){if(e<t||e>r||e!==o(e))throw Error(i+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function b(e){var t=e.c.length-1;return h(e.e/c)==t&&e.c[t]%2!=0}function v(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function _(e,t,r){var n,a;if(t<0){for(a=r+".";++t;a+=r);e=a+e}else if(++t>(n=e.length)){for(a=r,t-=n;--t;a+=r);e+=a}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}r=function e(t){var r,O,T,w,S,j,A,F,E,x,P=G.prototype={constructor:G,toString:null,valueOf:null},D=new G(1),M=20,N=4,I=-7,R=21,L=-1e7,C=1e7,B=!1,q=1,U=0,k={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Q="0123456789abcdefghijklmnopqrstuvwxyz",V=!0;function G(e,t){var r,a,i,u,p,d,f,h,y=this;if(!(y instanceof G))return new G(e,t);if(null==t){if(e&&!0===e._isBigNumber)return y.s=e.s,void(!e.c||e.e>C?y.c=y.e=null:e.e<L?y.c=[y.e=0]:(y.e=e.e,y.c=e.c.slice()));if((d="number"==typeof e)&&0*e==0){if(y.s=1/e<0?(e=-e,-1):1,e===~~e){for(u=0,p=e;p>=10;p/=10,u++);return void(u>C?y.c=y.e=null:(y.e=u,y.c=[e]))}h=String(e)}else{if(!n.test(h=String(e)))return T(y,h,d);y.s=45==h.charCodeAt(0)?(h=h.slice(1),-1):1}(u=h.indexOf("."))>-1&&(h=h.replace(".","")),(p=h.search(/e/i))>0?(u<0&&(u=p),u+=+h.slice(p+1),h=h.substring(0,p)):u<0&&(u=h.length)}else{if(m(t,2,Q.length,"Base"),10==t&&V)return H(y=new G(e),M+y.e+1,N);if(h=String(e),d="number"==typeof e){if(0*e!=0)return T(y,h,d,t);if(y.s=1/e<0?(h=h.slice(1),-1):1,G.DEBUG&&h.replace(/^0\.0*|\./,"").length>15)throw Error(s+e)}else y.s=45===h.charCodeAt(0)?(h=h.slice(1),-1):1;for(r=Q.slice(0,t),u=p=0,f=h.length;p<f;p++)if(r.indexOf(a=h.charAt(p))<0){if("."==a){if(p>u){u=f;continue}}else if(!i&&(h==h.toUpperCase()&&(h=h.toLowerCase())||h==h.toLowerCase()&&(h=h.toUpperCase()))){i=!0,p=-1,u=0;continue}return T(y,String(e),d,t)}d=!1,(u=(h=O(h,t,10,y.s)).indexOf("."))>-1?h=h.replace(".",""):u=h.length}for(p=0;48===h.charCodeAt(p);p++);for(f=h.length;48===h.charCodeAt(--f););if(h=h.slice(p,++f)){if(f-=p,d&&G.DEBUG&&f>15&&(e>l||e!==o(e)))throw Error(s+y.s*e);if((u=u-p-1)>C)y.c=y.e=null;else if(u<L)y.c=[y.e=0];else{if(y.e=u,y.c=[],p=(u+1)%c,u<0&&(p+=c),p<f){for(p&&y.c.push(+h.slice(0,p)),f-=c;p<f;)y.c.push(+h.slice(p,p+=c));p=c-(h=h.slice(p)).length}else p-=f;for(;p--;h+="0");y.c.push(+h)}}else y.c=[y.e=0]}function $(e,t,r,n){var a,o,i,s,u;if(null==r?r=N:m(r,0,8),!e.c)return e.toString();if(a=e.c[0],i=e.e,null==t)u=y(e.c),u=1==n||2==n&&(i<=I||i>=R)?v(u,i):_(u,i,"0");else if(o=(e=H(new G(e),t,r)).e,s=(u=y(e.c)).length,1==n||2==n&&(t<=o||o<=I)){for(;s<t;u+="0",s++);u=v(u,o)}else if(t-=i+(2===n&&o>i),u=_(u,o,"0"),o+1>s){if(--t>0)for(u+=".";t--;u+="0");}else if((t+=o-s)>0)for(o+1==s&&(u+=".");t--;u+="0");return e.s<0&&a?"-"+u:u}function z(e,t){for(var r,n,a=1,o=new G(e[0]);a<e.length;a++)(!(n=new G(e[a])).s||(r=g(o,n))===t||0===r&&o.s===t)&&(o=n);return o}function X(e,t,r){for(var n=1,a=t.length;!t[--a];t.pop());for(a=t[0];a>=10;a/=10,n++);return(r=n+r*c-1)>C?e.c=e.e=null:r<L?e.c=[e.e=0]:(e.e=r,e.c=t),e}function H(e,t,r,n){var i,s,l,d,f,h,y,g=e.c,m=p;if(g){e:{for(i=1,d=g[0];d>=10;d/=10,i++);if((s=t-i)<0)s+=c,l=t,f=g[h=0],y=o(f/m[i-l-1]%10);else if((h=a((s+1)/c))>=g.length){if(!n)break e;for(;g.length<=h;g.push(0));f=y=0,i=1,l=(s%=c)-c+1}else{for(f=d=g[h],i=1;d>=10;d/=10,i++);y=(l=(s%=c)-c+i)<0?0:o(f/m[i-l-1]%10)}if(n=n||t<0||null!=g[h+1]||(l<0?f:f%m[i-l-1]),n=r<4?(y||n)&&(0==r||r==(e.s<0?3:2)):y>5||5==y&&(4==r||n||6==r&&(s>0?l>0?f/m[i-l]:0:g[h-1])%10&1||r==(e.s<0?8:7)),t<1||!g[0])return g.length=0,n?(t-=e.e+1,g[0]=m[(c-t%c)%c],e.e=-t||0):g[0]=e.e=0,e;if(0==s?(g.length=h,d=1,h--):(g.length=h+1,d=m[c-s],g[h]=l>0?o(f/m[i-l]%m[l])*d:0),n)for(;;){if(0==h){for(s=1,l=g[0];l>=10;l/=10,s++);for(l=g[0]+=d,d=1;l>=10;l/=10,d++);s!=d&&(e.e++,g[0]==u&&(g[0]=1));break}if(g[h]+=d,g[h]!=u)break;g[h--]=0,d=1}for(s=g.length;0===g[--s];g.pop());}e.e>C?e.c=e.e=null:e.e<L&&(e.c=[e.e=0])}return e}function J(e){var t,r=e.e;return null===r?e.toString():(t=y(e.c),t=r<=I||r>=R?v(t,r):_(t,r,"0"),e.s<0?"-"+t:t)}return G.clone=e,G.ROUND_UP=0,G.ROUND_DOWN=1,G.ROUND_CEIL=2,G.ROUND_FLOOR=3,G.ROUND_HALF_UP=4,G.ROUND_HALF_DOWN=5,G.ROUND_HALF_EVEN=6,G.ROUND_HALF_CEIL=7,G.ROUND_HALF_FLOOR=8,G.EUCLID=9,G.config=G.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(i+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(m(r=e[t],0,f,t),M=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(m(r=e[t],0,8,t),N=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(m(r[0],-f,0,t),m(r[1],0,f,t),I=r[0],R=r[1]):(m(r,-f,f,t),I=-(R=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)m(r[0],-f,-1,t),m(r[1],1,f,t),L=r[0],C=r[1];else{if(m(r,-f,f,t),!r)throw Error(i+t+" cannot be zero: "+r);L=-(C=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(i+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw B=!r,Error(i+"crypto unavailable");B=r}else B=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(m(r=e[t],0,9,t),q=r),e.hasOwnProperty(t="POW_PRECISION")&&(m(r=e[t],0,f,t),U=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(i+t+" not an object: "+r);k=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(i+t+" invalid: "+r);V="0123456789"==r.slice(0,10),Q=r}}return{DECIMAL_PLACES:M,ROUNDING_MODE:N,EXPONENTIAL_AT:[I,R],RANGE:[L,C],CRYPTO:B,MODULO_MODE:q,POW_PRECISION:U,FORMAT:k,ALPHABET:Q}},G.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!G.DEBUG)return!0;var t,r,n=e.c,a=e.e,s=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===s||-1===s)&&a>=-f&&a<=f&&a===o(a)){if(0===n[0]){if(0===a&&1===n.length)return!0;break e}if((t=(a+1)%c)<1&&(t+=c),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=u||r!==o(r))break e;if(0!==r)return!0}}}else if(null===n&&null===a&&(null===s||1===s||-1===s))return!0;throw Error(i+"Invalid BigNumber: "+e)},G.maximum=G.max=function(){return z(arguments,-1)},G.minimum=G.min=function(){return z(arguments,1)},G.random=(w=9007199254740992,S=Math.random()*w&2097151?function(){return o(Math.random()*w)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,s,u,l=0,d=[],h=new G(D);if(null==e?e=M:m(e,0,f),s=a(e/c),B)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(s*=2));l<s;)(u=131072*t[l]+(t[l+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[l]=r[0],t[l+1]=r[1]):(d.push(u%1e14),l+=2);l=s/2}else{if(!crypto.randomBytes)throw B=!1,Error(i+"crypto unavailable");for(t=crypto.randomBytes(s*=7);l<s;)(u=281474976710656*(31&t[l])+1099511627776*t[l+1]+4294967296*t[l+2]+16777216*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])>=9e15?crypto.randomBytes(7).copy(t,l):(d.push(u%1e14),l+=7);l=s/7}if(!B)for(;l<s;)(u=S())<9e15&&(d[l++]=u%1e14);for(s=d[--l],e%=c,s&&e&&(u=p[c-e],d[l]=o(s/u)*u);0===d[l];d.pop(),l--);if(l<0)d=[n=0];else{for(n=-1;0===d[0];d.splice(0,1),n-=c);for(l=1,u=d[0];u>=10;u/=10,l++);l<c&&(n-=c-l)}return h.e=n,h.c=d,h}),G.sum=function(){for(var e=1,t=arguments,r=new G(t[0]);e<t.length;)r=r.plus(t[e++]);return r},O=function(){var e="0123456789";function t(e,t,r,n){for(var a,o,i=[0],s=0,u=e.length;s<u;){for(o=i.length;o--;i[o]*=t);for(i[0]+=n.indexOf(e.charAt(s++)),a=0;a<i.length;a++)i[a]>r-1&&(null==i[a+1]&&(i[a+1]=0),i[a+1]+=i[a]/r|0,i[a]%=r)}return i.reverse()}return function(n,a,o,i,s){var u,c,l,p,d,f,h,g,m=n.indexOf("."),b=M,v=N;for(m>=0&&(p=U,U=0,n=n.replace(".",""),f=(g=new G(a)).pow(n.length-m),U=p,g.c=t(_(y(f.c),f.e,"0"),10,o,e),g.e=g.c.length),l=p=(h=t(n,a,o,s?(u=Q,e):(u=e,Q))).length;0==h[--p];h.pop());if(!h[0])return u.charAt(0);if(m<0?--l:(f.c=h,f.e=l,f.s=i,h=(f=r(f,g,b,v,o)).c,d=f.r,l=f.e),m=h[c=l+b+1],p=o/2,d=d||c<0||null!=h[c+1],d=v<4?(null!=m||d)&&(0==v||v==(f.s<0?3:2)):m>p||m==p&&(4==v||d||6==v&&1&h[c-1]||v==(f.s<0?8:7)),c<1||!h[0])n=d?_(u.charAt(1),-b,u.charAt(0)):u.charAt(0);else{if(h.length=c,d)for(--o;++h[--c]>o;)h[c]=0,c||(++l,h=[1].concat(h));for(p=h.length;!h[--p];);for(m=0,n="";m<=p;n+=u.charAt(h[m++]));n=_(n,l,u.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,a,o,i,s=0,u=e.length,c=t%d,l=t/d|0;for(e=e.slice();u--;)s=((a=c*(o=e[u]%d)+(n=l*o+(i=e[u]/d|0)*c)%d*d+s)/r|0)+(n/d|0)+l*i,e[u]=a%r;return s&&(e=[s].concat(e)),e}function t(e,t,r,n){var a,o;if(r!=n)o=r>n?1:-1;else for(a=o=0;a<r;a++)if(e[a]!=t[a]){o=e[a]>t[a]?1:-1;break}return o}function r(e,t,r,n){for(var a=0;r--;)e[r]-=a,a=e[r]<t[r]?1:0,e[r]=a*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,a,i,s,l){var p,d,f,y,g,m,b,v,_,O,T,w,S,j,A,F,E,x=n.s==a.s?1:-1,P=n.c,D=a.c;if(!(P&&P[0]&&D&&D[0]))return new G(n.s&&a.s&&(P?!D||P[0]!=D[0]:D)?P&&0==P[0]||!D?0*x:x/0:NaN);for(_=(v=new G(x)).c=[],x=i+(d=n.e-a.e)+1,l||(l=u,d=h(n.e/c)-h(a.e/c),x=x/c|0),f=0;D[f]==(P[f]||0);f++);if(D[f]>(P[f]||0)&&d--,x<0)_.push(1),y=!0;else{for(j=P.length,F=D.length,f=0,x+=2,(g=o(l/(D[0]+1)))>1&&(D=e(D,g,l),P=e(P,g,l),F=D.length,j=P.length),S=F,T=(O=P.slice(0,F)).length;T<F;O[T++]=0);E=D.slice(),E=[0].concat(E),A=D[0],D[1]>=l/2&&A++;do{if(g=0,(p=t(D,O,F,T))<0){if(w=O[0],F!=T&&(w=w*l+(O[1]||0)),(g=o(w/A))>1)for(g>=l&&(g=l-1),b=(m=e(D,g,l)).length,T=O.length;1==t(m,O,b,T);)g--,r(m,F<b?E:D,b,l),b=m.length,p=1;else 0==g&&(p=g=1),b=(m=D.slice()).length;if(b<T&&(m=[0].concat(m)),r(O,m,T,l),T=O.length,-1==p)for(;t(D,O,F,T)<1;)g++,r(O,F<T?E:D,T,l),T=O.length}else 0===p&&(g++,O=[0]);_[f++]=g,O[0]?O[T++]=P[S]||0:(O=[P[S]],T=1)}while((S++<j||null!=O[0])&&x--);y=null!=O[0],_[0]||_.splice(0,1)}if(l==u){for(f=1,x=_[0];x>=10;x/=10,f++);H(v,i+(v.e=f+d*c-1)+1,s,y)}else v.e=d,v.r=+y;return v}}(),j=/^(-?)0([xbo])(?=\w[\w.]*$)/i,A=/^([^.]+)\.$/,F=/^\.([^.]+)$/,E=/^-?(Infinity|NaN)$/,x=/^\s*\+(?=[\w.])|^\s+|\s+$/g,T=function(e,t,r,n){var a,o=r?t:t.replace(x,"");if(E.test(o))e.s=isNaN(o)?null:o<0?-1:1;else{if(!r&&(o=o.replace(j,function(e,t,r){return a="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=a?e:t}),n&&(a=n,o=o.replace(A,"$1").replace(F,"0.$1")),t!=o))return new G(o,a);if(G.DEBUG)throw Error(i+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},P.absoluteValue=P.abs=function(){var e=new G(this);return e.s<0&&(e.s=1),e},P.comparedTo=function(e,t){return g(this,new G(e,t))},P.decimalPlaces=P.dp=function(e,t){var r,n,a,o=this;if(null!=e)return m(e,0,f),null==t?t=N:m(t,0,8),H(new G(o),e+o.e+1,t);if(!(r=o.c))return null;if(n=((a=r.length-1)-h(this.e/c))*c,a=r[a])for(;a%10==0;a/=10,n--);return n<0&&(n=0),n},P.dividedBy=P.div=function(e,t){return r(this,new G(e,t),M,N)},P.dividedToIntegerBy=P.idiv=function(e,t){return r(this,new G(e,t),0,1)},P.exponentiatedBy=P.pow=function(e,t){var r,n,s,u,l,p,d,f,h=this;if((e=new G(e)).c&&!e.isInteger())throw Error(i+"Exponent not an integer: "+J(e));if(null!=t&&(t=new G(t)),l=e.e>14,!h.c||!h.c[0]||1==h.c[0]&&!h.e&&1==h.c.length||!e.c||!e.c[0])return f=new G(Math.pow(+J(h),l?e.s*(2-b(e)):+J(e))),t?f.mod(t):f;if(p=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new G(NaN);(n=!p&&h.isInteger()&&t.isInteger())&&(h=h.mod(t))}else{if(e.e>9&&(h.e>0||h.e<-1||(0==h.e?h.c[0]>1||l&&h.c[1]>=24e7:h.c[0]<8e13||l&&h.c[0]<=9999975e7)))return u=h.s<0&&b(e)?-0:0,h.e>-1&&(u=1/u),new G(p?1/u:u);U&&(u=a(U/c+2))}for(l?(r=new G(.5),p&&(e.s=1),d=b(e)):d=(s=Math.abs(+J(e)))%2,f=new G(D);;){if(d){if(!(f=f.times(h)).c)break;u?f.c.length>u&&(f.c.length=u):n&&(f=f.mod(t))}if(s){if(0===(s=o(s/2)))break;d=s%2}else if(H(e=e.times(r),e.e+1,1),e.e>14)d=b(e);else{if(0===(s=+J(e)))break;d=s%2}h=h.times(h),u?h.c&&h.c.length>u&&(h.c.length=u):n&&(h=h.mod(t))}return n?f:(p&&(f=D.div(f)),t?f.mod(t):u?H(f,U,N,void 0):f)},P.integerValue=function(e){var t=new G(this);return null==e?e=N:m(e,0,8),H(t,t.e+1,e)},P.isEqualTo=P.eq=function(e,t){return 0===g(this,new G(e,t))},P.isFinite=function(){return!!this.c},P.isGreaterThan=P.gt=function(e,t){return g(this,new G(e,t))>0},P.isGreaterThanOrEqualTo=P.gte=function(e,t){return 1===(t=g(this,new G(e,t)))||0===t},P.isInteger=function(){return!!this.c&&h(this.e/c)>this.c.length-2},P.isLessThan=P.lt=function(e,t){return g(this,new G(e,t))<0},P.isLessThanOrEqualTo=P.lte=function(e,t){return-1===(t=g(this,new G(e,t)))||0===t},P.isNaN=function(){return!this.s},P.isNegative=function(){return this.s<0},P.isPositive=function(){return this.s>0},P.isZero=function(){return!!this.c&&0==this.c[0]},P.minus=function(e,t){var r,n,a,o,i=this,s=i.s;if(t=(e=new G(e,t)).s,!s||!t)return new G(NaN);if(s!=t)return e.s=-t,i.plus(e);var l=i.e/c,p=e.e/c,d=i.c,f=e.c;if(!l||!p){if(!d||!f)return d?(e.s=-t,e):new G(f?i:NaN);if(!d[0]||!f[0])return f[0]?(e.s=-t,e):new G(d[0]?i:3==N?-0:0)}if(l=h(l),p=h(p),d=d.slice(),s=l-p){for((o=s<0)?(s=-s,a=d):(p=l,a=f),a.reverse(),t=s;t--;a.push(0));a.reverse()}else for(n=(o=(s=d.length)<(t=f.length))?s:t,s=t=0;t<n;t++)if(d[t]!=f[t]){o=d[t]<f[t];break}if(o&&(a=d,d=f,f=a,e.s=-e.s),(t=(n=f.length)-(r=d.length))>0)for(;t--;d[r++]=0);for(t=u-1;n>s;){if(d[--n]<f[n]){for(r=n;r&&!d[--r];d[r]=t);--d[r],d[n]+=u}d[n]-=f[n]}for(;0==d[0];d.splice(0,1),--p);return d[0]?X(e,d,p):(e.s=3==N?-1:1,e.c=[e.e=0],e)},P.modulo=P.mod=function(e,t){var n,a,o=this;return e=new G(e,t),!o.c||!e.s||e.c&&!e.c[0]?new G(NaN):!e.c||o.c&&!o.c[0]?new G(o):(9==q?(a=e.s,e.s=1,n=r(o,e,0,3),e.s=a,n.s*=a):n=r(o,e,0,q),(e=o.minus(n.times(e))).c[0]||1!=q||(e.s=o.s),e)},P.multipliedBy=P.times=function(e,t){var r,n,a,o,i,s,l,p,f,y,g,m,b,v,_,O=this,T=O.c,w=(e=new G(e,t)).c;if(!(T&&w&&T[0]&&w[0]))return!O.s||!e.s||T&&!T[0]&&!w||w&&!w[0]&&!T?e.c=e.e=e.s=null:(e.s*=O.s,T&&w?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=h(O.e/c)+h(e.e/c),e.s*=O.s,(l=T.length)<(y=w.length)&&(b=T,T=w,w=b,a=l,l=y,y=a),a=l+y,b=[];a--;b.push(0));for(v=u,_=d,a=y;--a>=0;){for(r=0,g=w[a]%_,m=w[a]/_|0,o=a+(i=l);o>a;)r=((p=g*(p=T[--i]%_)+(s=m*p+(f=T[i]/_|0)*g)%_*_+b[o]+r)/v|0)+(s/_|0)+m*f,b[o--]=p%v;b[o]=r}return r?++n:b.splice(0,1),X(e,b,n)},P.negated=function(){var e=new G(this);return e.s=-e.s||null,e},P.plus=function(e,t){var r,n=this,a=n.s;if(t=(e=new G(e,t)).s,!a||!t)return new G(NaN);if(a!=t)return e.s=-t,n.minus(e);var o=n.e/c,i=e.e/c,s=n.c,l=e.c;if(!o||!i){if(!s||!l)return new G(a/0);if(!s[0]||!l[0])return l[0]?e:new G(s[0]?n:0*a)}if(o=h(o),i=h(i),s=s.slice(),a=o-i){for(a>0?(i=o,r=l):(a=-a,r=s),r.reverse();a--;r.push(0));r.reverse()}for((a=s.length)-(t=l.length)<0&&(r=l,l=s,s=r,t=a),a=0;t;)a=(s[--t]=s[t]+l[t]+a)/u|0,s[t]=u===s[t]?0:s[t]%u;return a&&(s=[a].concat(s),++i),X(e,s,i)},P.precision=P.sd=function(e,t){var r,n,a,o=this;if(null!=e&&e!==!!e)return m(e,1,f),null==t?t=N:m(t,0,8),H(new G(o),e,t);if(!(r=o.c))return null;if(n=(a=r.length-1)*c+1,a=r[a]){for(;a%10==0;a/=10,n--);for(a=r[0];a>=10;a/=10,n++);}return e&&o.e+1>n&&(n=o.e+1),n},P.shiftedBy=function(e){return m(e,-9007199254740991,l),this.times("1e"+e)},P.squareRoot=P.sqrt=function(){var e,t,n,a,o,i=this,s=i.c,u=i.s,c=i.e,l=M+4,p=new G("0.5");if(1!==u||!s||!s[0])return new G(!u||u<0&&(!s||s[0])?NaN:s?i:1/0);if(0==(u=Math.sqrt(+J(i)))||u==1/0?(((t=y(s)).length+c)%2==0&&(t+="0"),u=Math.sqrt(+t),c=h((c+1)/2)-(c<0||c%2),n=new G(t=u==1/0?"5e"+c:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+c)):n=new G(u+""),n.c[0])for((u=(c=n.e)+l)<3&&(u=0);;)if(o=n,n=p.times(o.plus(r(i,o,l,1))),y(o.c).slice(0,u)===(t=y(n.c)).slice(0,u)){if(n.e<c&&--u,"9999"!=(t=t.slice(u-3,u+1))&&(a||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(H(n,n.e+M+2,1),e=!n.times(n).eq(i));break}if(!a&&(H(o,o.e+M+2,0),o.times(o).eq(i))){n=o;break}l+=4,u+=4,a=1}return H(n,n.e+M+1,N,e)},P.toExponential=function(e,t){return null!=e&&(m(e,0,f),e++),$(this,e,t,1)},P.toFixed=function(e,t){return null!=e&&(m(e,0,f),e=e+this.e+1),$(this,e,t)},P.toFormat=function(e,t,r){var n,a=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=k;else if("object"!=typeof r)throw Error(i+"Argument not an object: "+r);if(n=a.toFixed(e,t),a.c){var o,s=n.split("."),u=+r.groupSize,c=+r.secondaryGroupSize,l=r.groupSeparator||"",p=s[0],d=s[1],f=a.s<0,h=f?p.slice(1):p,y=h.length;if(c&&(o=u,u=c,c=o,y-=o),u>0&&y>0){for(o=y%u||u,p=h.substr(0,o);o<y;o+=u)p+=l+h.substr(o,u);c>0&&(p+=l+h.slice(o)),f&&(p="-"+p)}n=d?p+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?d.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):d):p}return(r.prefix||"")+n+(r.suffix||"")},P.toFraction=function(e){var t,n,a,o,s,u,l,d,f,h,g,m,b=this,v=b.c;if(null!=e&&(!(l=new G(e)).isInteger()&&(l.c||1!==l.s)||l.lt(D)))throw Error(i+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+J(l));if(!v)return new G(b);for(t=new G(D),f=n=new G(D),a=d=new G(D),m=y(v),s=t.e=m.length-b.e-1,t.c[0]=p[(u=s%c)<0?c+u:u],e=!e||l.comparedTo(t)>0?s>0?t:f:l,u=C,C=1/0,l=new G(m),d.c[0]=0;h=r(l,t,0,1),1!=(o=n.plus(h.times(a))).comparedTo(e);)n=a,a=o,f=d.plus(h.times(o=f)),d=o,t=l.minus(h.times(o=t)),l=o;return o=r(e.minus(n),a,0,1),d=d.plus(o.times(f)),n=n.plus(o.times(a)),d.s=f.s=b.s,g=r(f,a,s*=2,N).minus(b).abs().comparedTo(r(d,n,s,N).minus(b).abs())<1?[f,a]:[d,n],C=u,g},P.toNumber=function(){return+J(this)},P.toPrecision=function(e,t){return null!=e&&m(e,1,f),$(this,e,t,2)},P.toString=function(e){var t,r=this,n=r.s,a=r.e;return null===a?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=a<=I||a>=R?v(y(r.c),a):_(y(r.c),a,"0"):10===e&&V?t=_(y((r=H(new G(r),M+a+1,N)).c),r.e,"0"):(m(e,2,Q.length,"Base"),t=O(_(y(r.c),a,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},P.valueOf=P.toJSON=function(){return J(this)},P._isBigNumber=!0,null!=t&&G.set(t),G}(),r.default=r.BigNumber=r,e.exports?e.exports=r:(t||(t="undefined"!=typeof self&&self?self:window),t.BigNumber=r)}(BO)),CO.exports;var e}function UO(){if(DO)return LO;DO=1,Object.defineProperty(LO,"__esModule",{value:!0}),LO.TermFunctionAddition=void 0;const e=Ad(),t=Sd(),r=qO();let n=class extends e.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.ADDITION,overloads:(0,t.declare)(t.SparqlOperator.ADDITION).arithmetic(()=>(e,t)=>new r.BigNumber(e).plus(t).toNumber()).set([t.TypeURL.XSD_DATE_TIME,t.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,r])=>new t.DateTimeLiteral((0,t.addDurationToDateTime)(e.typedValue,(0,t.defaultedDurationRepresentation)(r.typedValue)))).copy({from:[t.TypeURL.XSD_DATE_TIME,t.TypeURL.XSD_DAY_TIME_DURATION],to:[t.TypeURL.XSD_DATE_TIME,t.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([t.TypeURL.XSD_DATE,t.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,r])=>new t.DateLiteral((0,t.addDurationToDateTime)((0,t.defaultedDateTimeRepresentation)(e.typedValue),(0,t.defaultedDurationRepresentation)(r.typedValue)))).copy({from:[t.TypeURL.XSD_DATE,t.TypeURL.XSD_DAY_TIME_DURATION],to:[t.TypeURL.XSD_DATE,t.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([t.TypeURL.XSD_TIME,t.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,r])=>new t.TimeLiteral((0,t.addDurationToDateTime)((0,t.defaultedDateTimeRepresentation)(e.typedValue),(0,t.defaultedDurationRepresentation)(r.typedValue)))).copy({from:[t.TypeURL.XSD_TIME,t.TypeURL.XSD_DAY_TIME_DURATION],to:[t.TypeURL.XSD_TIME,t.TypeURL.XSD_YEAR_MONTH_DURATION]}).collect()})}};return LO.TermFunctionAddition=n,LO}function kO(){if(MO)return RO;MO=1,Object.defineProperty(RO,"__esModule",{value:!0}),RO.ActorFunctionFactoryTermAddition=void 0;const e=Ad(),t=Sd(),r=UO();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.ADDITION],termFunction:!0})}async run(e){return new r.TermFunctionAddition}};return RO.ActorFunctionFactoryTermAddition=n,RO}function QO(){return NO||(NO=1,e=IO,t=IO&&IO.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=IO&&IO.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(kO(),e)),IO;var e,t,r}var VO,GO,$O,zO={},XO={},HO={};function JO(){if(VO)return HO;VO=1,Object.defineProperty(HO,"__esModule",{value:!0}),HO.TermFunctionCeil=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.CEIL,overloads:(0,t.declare)(t.SparqlOperator.CEIL).numericConverter(()=>e=>Math.ceil(e)).collect()})}};return HO.TermFunctionCeil=r,HO}function KO(){if(GO)return XO;GO=1,Object.defineProperty(XO,"__esModule",{value:!0}),XO.ActorFunctionFactoryTermCeil=void 0;const e=Ad(),t=Sd(),r=JO();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.CEIL],termFunction:!0})}async run(e){return new r.TermFunctionCeil}};return XO.ActorFunctionFactoryTermCeil=n,XO}function YO(){return $O||($O=1,e=zO,t=zO&&zO.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=zO&&zO.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(KO(),e)),zO;var e,t,r}var WO,ZO,eT,tT={},rT={},nT={};function aT(){if(WO)return nT;WO=1,Object.defineProperty(nT,"__esModule",{value:!0}),nT.TermFunctionContains=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.CONTAINS,overloads:(0,t.declare)(t.SparqlOperator.CONTAINS).onBinaryTyped([t.TypeAlias.SPARQL_STRINGLY,t.TypeURL.XSD_STRING],()=>(e,r)=>(0,t.bool)(e.includes(r))).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.RDF_LANG_STRING],()=>(e,r)=>{if(e.language!==r.language)throw new t.IncompatibleLanguageOperation(e,r);return(0,t.bool)(e.typedValue.includes(r.typedValue))}).collect()})}};return nT.TermFunctionContains=r,nT}function oT(){if(ZO)return rT;ZO=1,Object.defineProperty(rT,"__esModule",{value:!0}),rT.ActorFunctionFactoryTermContains=void 0;const e=Ad(),t=Sd(),r=aT();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.CONTAINS],termFunction:!0})}async run(e){return new r.TermFunctionContains}};return rT.ActorFunctionFactoryTermContains=n,rT}function iT(){return eT||(eT=1,e=tT,t=tT&&tT.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=tT&&tT.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(oT(),e)),tT;var e,t,r}var sT,uT,cT,lT={},pT={},dT={};function fT(){if(sT)return dT;sT=1,Object.defineProperty(dT,"__esModule",{value:!0}),dT.TermFunctionDatatype=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.DATATYPE,overloads:(0,t.declare)(t.SparqlOperator.DATATYPE).onLiteral1(()=>e=>new t.NamedNode(e.dataType)).collect()})}};return dT.TermFunctionDatatype=r,dT}function hT(){if(uT)return pT;uT=1,Object.defineProperty(pT,"__esModule",{value:!0}),pT.ActorFunctionFactoryTermDatatype=void 0;const e=Ad(),t=Sd(),r=fT();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.DATATYPE],termFunction:!0})}async run(e){return new r.TermFunctionDatatype}};return pT.ActorFunctionFactoryTermDatatype=n,pT}function yT(){return cT||(cT=1,e=lT,t=lT&&lT.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=lT&&lT.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(hT(),e)),lT;var e,t,r}var gT,mT,bT,vT={},_T={},OT={};function TT(){if(gT)return OT;gT=1,Object.defineProperty(OT,"__esModule",{value:!0}),OT.TermFunctionDay=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.DAY,overloads:(0,t.declare)(t.SparqlOperator.DAY).onDateTime1(()=>e=>(0,t.integer)(e.typedValue.day)).set([t.TypeURL.XSD_DATE],()=>([e])=>(0,t.integer)(e.typedValue.day)).collect()})}};return OT.TermFunctionDay=r,OT}function wT(){if(mT)return _T;mT=1,Object.defineProperty(_T,"__esModule",{value:!0}),_T.ActorFunctionFactoryTermDay=void 0;const e=Ad(),t=Sd(),r=TT();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.DAY],termFunction:!0})}async run(e){return new r.TermFunctionDay}};return _T.ActorFunctionFactoryTermDay=n,_T}function ST(){return bT||(bT=1,e=vT,t=vT&&vT.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=vT&&vT.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(wT(),e)),vT;var e,t,r}var jT,AT,FT,ET={},xT={},PT={};function DT(){if(jT)return PT;jT=1,Object.defineProperty(PT,"__esModule",{value:!0}),PT.TermFunctionEncodeForUri=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.ENCODE_FOR_URI,overloads:(0,t.declare)(t.SparqlOperator.ENCODE_FOR_URI).onStringly1Typed(()=>e=>(0,t.string)(encodeURI(e))).collect()})}};return PT.TermFunctionEncodeForUri=r,PT}function MT(){if(AT)return xT;AT=1,Object.defineProperty(xT,"__esModule",{value:!0}),xT.ActorFunctionFactoryTermEncodeForUri=void 0;const e=Ad(),t=Sd(),r=DT();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.ENCODE_FOR_URI],termFunction:!0})}async run(e){return new r.TermFunctionEncodeForUri}};return xT.ActorFunctionFactoryTermEncodeForUri=n,xT}function NT(){return FT||(FT=1,e=ET,t=ET&&ET.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=ET&&ET.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(MT(),e)),ET;var e,t,r}var IT,RT,LT,CT={},BT={},qT={};function UT(){if(IT)return qT;IT=1,Object.defineProperty(qT,"__esModule",{value:!0}),qT.TermFunctionDivision=void 0;const e=Ad(),t=Sd(),r=qO();let n=class extends e.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.DIVISION,overloads:(0,t.declare)(t.SparqlOperator.DIVISION).arithmetic(()=>(e,t)=>new r.BigNumber(e).div(t).toNumber()).onBinaryTyped([t.TypeURL.XSD_INTEGER,t.TypeURL.XSD_INTEGER],()=>(e,n)=>{if(0===n)throw new t.ExpressionError("Integer division by 0");return(0,t.decimal)(new r.BigNumber(e).div(n).toNumber())}).collect()})}};return qT.TermFunctionDivision=n,qT}function kT(){if(RT)return BT;RT=1,Object.defineProperty(BT,"__esModule",{value:!0}),BT.ActorFunctionFactoryTermDivision=void 0;const e=Ad(),t=Sd(),r=UT();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.DIVISION],termFunction:!0})}async run(e){return new r.TermFunctionDivision}};return BT.ActorFunctionFactoryTermDivision=n,BT}function QT(){return LT||(LT=1,e=CT,t=CT&&CT.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=CT&&CT.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(kT(),e)),CT;var e,t,r}var VT,GT,$T,zT={},XT={},HT={};function JT(){if(VT)return HT;VT=1,Object.defineProperty(HT,"__esModule",{value:!0}),HT.TermFunctionEquality=void 0;const e=Ad(),t=ls(),r=Sd();let n=class extends e.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.EQUAL,overloads:(0,r.declare)(r.SparqlOperator.EQUAL).numberTest(()=>(e,t)=>e===t).stringTest(()=>(e,t)=>0===e.localeCompare(t)).set([r.TypeURL.RDF_LANG_STRING,r.TypeURL.RDF_LANG_STRING],()=>([e,t])=>(0,r.bool)(e.str()===t.str()&&e.language===t.language)).set([r.TypeAlias.SPARQL_STRINGLY,r.TypeAlias.SPARQL_STRINGLY],()=>()=>(0,r.bool)(!1)).booleanTest(()=>(e,t)=>e===t).dateTimeTest(e=>(n,a)=>(0,r.toUTCDate)(n,e.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime()===(0,r.toUTCDate)(a,e.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime()).copy({from:[r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_DATE_TIME],to:[r.TypeURL.XSD_DATE,r.TypeURL.XSD_DATE]}).set(["quad","quad"],e=>([t,n])=>(0,r.bool)(this.applyOnTerms([t.subject,n.subject],e).coerceEBV()&&this.applyOnTerms([t.predicate,n.predicate],e).coerceEBV()&&this.applyOnTerms([t.object,n.object],e).coerceEBV()&&this.applyOnTerms([t.graph,n.graph],e).coerceEBV()),!1).set(["term","term"],e=>([n,a])=>{const o=n.toRDF(e.context.getSafe(t.KeysInitQuery.dataFactory)),i=a.toRDF(e.context.getSafe(t.KeysInitQuery.dataFactory)),s=o.equals(i);if(!s&&"Literal"===o.termType&&"Literal"===i.termType)throw new r.RDFEqualTypeError([n,a]);return(0,r.bool)(s)},!1).set([r.TypeURL.XSD_DURATION,r.TypeURL.XSD_DURATION],()=>([e,t])=>(0,r.bool)((0,r.yearMonthDurationsToMonths)((0,r.defaultedYearMonthDurationRepresentation)(e.typedValue))===(0,r.yearMonthDurationsToMonths)((0,r.defaultedYearMonthDurationRepresentation)(t.typedValue))&&(0,r.dayTimeDurationsToSeconds)((0,r.defaultedDayTimeDurationRepresentation)(e.typedValue))===(0,r.dayTimeDurationsToSeconds)((0,r.defaultedDayTimeDurationRepresentation)(t.typedValue)))).set([r.TypeURL.XSD_TIME,r.TypeURL.XSD_TIME],e=>([n,a])=>(0,r.bool)((0,r.toUTCDate)((0,r.defaultedDateTimeRepresentation)(n.typedValue),e.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime()===(0,r.toUTCDate)((0,r.defaultedDateTimeRepresentation)(a.typedValue),e.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime())).collect()})}};return HT.TermFunctionEquality=n,HT}function KT(){if(GT)return XT;GT=1,Object.defineProperty(XT,"__esModule",{value:!0}),XT.ActorFunctionFactoryTermEquality=void 0;const e=Ad(),t=Sd(),r=JT();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.EQUAL],termFunction:!0})}async run(e){return new r.TermFunctionEquality}};return XT.ActorFunctionFactoryTermEquality=n,XT}function YT(){return $T||($T=1,e=zT,t=zT&&zT.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=zT&&zT.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(KT(),e)),zT;var e,t,r}var WT,ZT,ew,tw={},rw={},nw={};function aw(){if(WT)return nw;WT=1,Object.defineProperty(nw,"__esModule",{value:!0}),nw.TermFunctionFloor=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.FLOOR,overloads:(0,t.declare)(t.SparqlOperator.FLOOR).numericConverter(()=>e=>Math.floor(e)).collect()})}};return nw.TermFunctionFloor=r,nw}function ow(){if(ZT)return rw;ZT=1,Object.defineProperty(rw,"__esModule",{value:!0}),rw.ActorFunctionFactoryTermFloor=void 0;const e=Ad(),t=Sd(),r=aw();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.FLOOR],termFunction:!0})}async run(e){return new r.TermFunctionFloor}};return rw.ActorFunctionFactoryTermFloor=n,rw}function iw(){return ew||(ew=1,e=tw,t=tw&&tw.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=tw&&tw.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(ow(),e)),tw;var e,t,r}var sw,uw,cw,lw={},pw={},dw={};function fw(){if(sw)return dw;sw=1,Object.defineProperty(dw,"__esModule",{value:!0}),dw.TermFunctionHours=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.HOURS,overloads:(0,t.declare)(t.SparqlOperator.HOURS).onDateTime1(()=>e=>(0,t.integer)(e.typedValue.hours)).set([t.TypeURL.XSD_TIME],()=>([e])=>(0,t.integer)(e.typedValue.hours)).collect()})}};return dw.TermFunctionHours=r,dw}function hw(){if(uw)return pw;uw=1,Object.defineProperty(pw,"__esModule",{value:!0}),pw.ActorFunctionFactoryTermHours=void 0;const e=Ad(),t=Sd(),r=fw();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.HOURS],termFunction:!0})}async run(e){return new r.TermFunctionHours}};return pw.ActorFunctionFactoryTermHours=n,pw}function yw(){return cw||(cw=1,e=lw,t=lw&&lw.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=lw&&lw.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(hw(),e)),lw;var e,t,r}var gw,mw,bw,vw={},_w={},Ow={};function Tw(){if(gw)return Ow;gw=1,Object.defineProperty(Ow,"__esModule",{value:!0}),Ow.TermFunctionIsIri=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.IS_IRI,overloads:(0,t.declare)(t.SparqlOperator.IS_IRI).onTerm1(()=>e=>(0,t.bool)("namedNode"===e.termType)).collect()})}};return Ow.TermFunctionIsIri=r,Ow}function ww(){if(mw)return _w;mw=1,Object.defineProperty(_w,"__esModule",{value:!0}),_w.ActorFunctionFactoryTermIsIri=void 0;const e=Ad(),t=Sd(),r=Tw();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IS_IRI,t.SparqlOperator.IS_URI],termFunction:!0})}async run(e){return new r.TermFunctionIsIri}};return _w.ActorFunctionFactoryTermIsIri=n,_w}function Sw(){return bw||(bw=1,e=vw,t=vw&&vw.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=vw&&vw.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(ww(),e)),vw;var e,t,r}var jw,Aw,Fw,Ew={},xw={},Pw={};function Dw(){if(jw)return Pw;jw=1,Object.defineProperty(Pw,"__esModule",{value:!0}),Pw.TermFunctionIsBlank=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.IS_BLANK,overloads:(0,t.declare)(t.SparqlOperator.IS_BLANK).onTerm1(()=>e=>(0,t.bool)("blankNode"===e.termType)).collect()})}};return Pw.TermFunctionIsBlank=r,Pw}function Mw(){if(Aw)return xw;Aw=1,Object.defineProperty(xw,"__esModule",{value:!0}),xw.ActorFunctionFactoryTermIsBlank=void 0;const e=Ad(),t=Sd(),r=Dw();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IS_BLANK],termFunction:!0})}async run(e){return new r.TermFunctionIsBlank}};return xw.ActorFunctionFactoryTermIsBlank=n,xw}function Nw(){return Fw||(Fw=1,e=Ew,t=Ew&&Ew.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Ew&&Ew.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Mw(),e)),Ew;var e,t,r}var Iw,Rw,Lw,Cw={},Bw={},qw={};function Uw(){if(Iw)return qw;Iw=1,Object.defineProperty(qw,"__esModule",{value:!0}),qw.TermFunctionIsLiteral=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.IS_LITERAL,overloads:(0,t.declare)(t.SparqlOperator.IS_LITERAL).onTerm1(()=>e=>(0,t.bool)("literal"===e.termType)).collect()})}};return qw.TermFunctionIsLiteral=r,qw}function kw(){if(Rw)return Bw;Rw=1,Object.defineProperty(Bw,"__esModule",{value:!0}),Bw.ActorFunctionFactoryTermIsLiteral=void 0;const e=Ad(),t=Sd(),r=Uw();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IS_LITERAL],termFunction:!0})}async run(e){return new r.TermFunctionIsLiteral}};return Bw.ActorFunctionFactoryTermIsLiteral=n,Bw}function Qw(){return Lw||(Lw=1,e=Cw,t=Cw&&Cw.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Cw&&Cw.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(kw(),e)),Cw;var e,t,r}var Vw,Gw,$w,zw={},Xw={},Hw={};function Jw(){if(Vw)return Hw;Vw=1,Object.defineProperty(Hw,"__esModule",{value:!0}),Hw.TermFunctionIri=void 0;const e=Ad(),t=ls(),r=Sd(),n=u();let a=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.IRI,overloads:(0,r.declare)(r.SparqlOperator.IRI).set(["namedNode"],e=>a=>{const o=a[0],i=(0,n.resolve)(o.str(),e.context.get(t.KeysInitQuery.baseIRI)??"");return new r.NamedNode(i)}).onString1(e=>a=>{const o=(0,n.resolve)(a.str(),e.context.get(t.KeysInitQuery.baseIRI)??"");return new r.NamedNode(o)}).collect()})}};return Hw.TermFunctionIri=a,Hw}function Kw(){if(Gw)return Xw;Gw=1,Object.defineProperty(Xw,"__esModule",{value:!0}),Xw.ActorFunctionFactoryTermIri=void 0;const e=Ad(),t=Sd(),r=Jw();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IRI,t.SparqlOperator.URI],termFunction:!0})}async run(e){return new r.TermFunctionIri}};return Xw.ActorFunctionFactoryTermIri=n,Xw}function Yw(){return $w||($w=1,e=zw,t=zw&&zw.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=zw&&zw.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Kw(),e)),zw;var e,t,r}var Ww,Zw,eS,tS={},rS={},nS={};function aS(){if(Ww)return nS;Ww=1,Object.defineProperty(nS,"__esModule",{value:!0}),nS.TermFunctionIsNumeric=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.IS_NUMERIC,overloads:(0,t.declare)(t.SparqlOperator.IS_NUMERIC).onNumeric1(()=>()=>(0,t.bool)(!0)).onTerm1(()=>()=>(0,t.bool)(!1)).collect()})}};return nS.TermFunctionIsNumeric=r,nS}function oS(){if(Zw)return rS;Zw=1,Object.defineProperty(rS,"__esModule",{value:!0}),rS.ActorFunctionFactoryTermIsNumeric=void 0;const e=Ad(),t=Sd(),r=aS();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IS_NUMERIC],termFunction:!0})}async run(e){return new r.TermFunctionIsNumeric}};return rS.ActorFunctionFactoryTermIsNumeric=n,rS}function iS(){return eS||(eS=1,e=tS,t=tS&&tS.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=tS&&tS.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(oS(),e)),tS;var e,t,r}var sS,uS,cS,lS={},pS={},dS={};function fS(){if(sS)return dS;sS=1,Object.defineProperty(dS,"__esModule",{value:!0}),dS.TermFunctionLang=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.LANG,overloads:(0,t.declare)(t.SparqlOperator.LANG).onLiteral1(()=>e=>(0,t.string)(e.language??"")).collect()})}};return dS.TermFunctionLang=r,dS}function hS(){if(uS)return pS;uS=1,Object.defineProperty(pS,"__esModule",{value:!0}),pS.ActorFunctionFactoryTermLang=void 0;const e=Ad(),t=Sd(),r=fS();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LANG],termFunction:!0})}async run(e){return new r.TermFunctionLang}};return pS.ActorFunctionFactoryTermLang=n,pS}function yS(){return cS||(cS=1,e=lS,t=lS&&lS.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=lS&&lS.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(hS(),e)),lS;var e,t,r}var gS,mS,bS,vS={},_S={},OS={};function TS(){if(gS)return OS;gS=1,Object.defineProperty(OS,"__esModule",{value:!0}),OS.TermFunctionIsTriple=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.IS_TRIPLE,overloads:(0,t.declare)(t.SparqlOperator.IS_TRIPLE).onTerm1(()=>e=>(0,t.bool)("quad"===e.termType)).collect()})}};return OS.TermFunctionIsTriple=r,OS}function wS(){if(mS)return _S;mS=1,Object.defineProperty(_S,"__esModule",{value:!0}),_S.ActorFunctionFactoryTermIsTriple=void 0;const e=Ad(),t=Sd(),r=TS();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IS_TRIPLE],termFunction:!0})}async run(e){return new r.TermFunctionIsTriple}};return _S.ActorFunctionFactoryTermIsTriple=n,_S}function SS(){return bS||(bS=1,e=vS,t=vS&&vS.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=vS&&vS.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(wS(),e)),vS;var e,t,r}var jS,AS,FS,ES={},xS={},PS={};function DS(){if(jS)return PS;jS=1,Object.defineProperty(PS,"__esModule",{value:!0}),PS.TermFunctionLangmatches=void 0;const e=Ad(),t=Sd();let r=class r extends e.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.LANG_MATCHES,overloads:(0,t.declare)(t.SparqlOperator.LANG_MATCHES).onBinaryTyped([t.TypeURL.XSD_STRING,t.TypeURL.XSD_STRING],()=>(e,n)=>(0,t.bool)(r.langMatches(e,n))).collect()})}static langMatches(e,t){const n=e.split("-"),a=t.split("-");if(!r.matchLangTag(a[0],n[0])&&!r.isWildCard(n[0]))return!1;let o=1,i=1;for(;i<a.length;)if(r.isWildCard(a[i]))i++;else{if(o===n.length)return!1;if(r.matchLangTag(a[i],n[o]))o++,i++;else{if(1===n[o].length)return!1;o++}}return!0}static isWildCard(e){return"*"===e}static matchLangTag(e,t){return new RegExp(`/${e}/`,"iu").test(`/${t}/`)}};return PS.TermFunctionLangmatches=r,PS}function MS(){if(AS)return xS;AS=1,Object.defineProperty(xS,"__esModule",{value:!0}),xS.ActorFunctionFactoryTermLangmatches=void 0;const e=Ad(),t=Sd(),r=DS();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LANG_MATCHES],termFunction:!0})}async run(e){return new r.TermFunctionLangmatches}};return xS.ActorFunctionFactoryTermLangmatches=n,xS}function NS(){return FS||(FS=1,e=ES,t=ES&&ES.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=ES&&ES.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(MS(),e)),ES;var e,t,r}var IS,RS,LS,CS={},BS={},qS={};function US(){if(IS)return qS;IS=1,Object.defineProperty(qS,"__esModule",{value:!0}),qS.TermFunctionMinutes=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.MINUTES,overloads:(0,t.declare)(t.SparqlOperator.MINUTES).onDateTime1(()=>e=>(0,t.integer)(e.typedValue.minutes)).set([t.TypeURL.XSD_TIME],()=>([e])=>(0,t.integer)(e.typedValue.minutes)).collect()})}};return qS.TermFunctionMinutes=r,qS}function kS(){if(RS)return BS;RS=1,Object.defineProperty(BS,"__esModule",{value:!0}),BS.ActorFunctionFactoryTermMinutes=void 0;const e=Ad(),t=Sd(),r=US();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.MINUTES],termFunction:!0})}async run(e){return new r.TermFunctionMinutes}};return BS.ActorFunctionFactoryTermMinutes=n,BS}function QS(){return LS||(LS=1,e=CS,t=CS&&CS.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=CS&&CS.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(kS(),e)),CS;var e,t,r}var VS,GS,$S,zS={},XS={},HS={};function JS(){if(VS)return HS;VS=1,Object.defineProperty(HS,"__esModule",{value:!0}),HS.TermFunctionLcase=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.LCASE,overloads:(0,t.declare)(t.SparqlOperator.LCASE).onString1Typed(()=>e=>(0,t.string)(e.toLowerCase())).onLangString1(()=>e=>(0,t.langString)(e.typedValue.toLowerCase(),e.language)).collect()})}};return HS.TermFunctionLcase=r,HS}function KS(){if(GS)return XS;GS=1,Object.defineProperty(XS,"__esModule",{value:!0}),XS.ActorFunctionFactoryTermLcase=void 0;const e=Ad(),t=Sd(),r=JS();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LCASE],termFunction:!0})}async run(e){return new r.TermFunctionLcase}};return XS.ActorFunctionFactoryTermLcase=n,XS}function YS(){return $S||($S=1,e=zS,t=zS&&zS.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=zS&&zS.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(KS(),e)),zS;var e,t,r}var WS,ZS,ej,tj,rj={},nj={},aj={},oj={exports:{}};function ij(){return WS?oj.exports:(WS=1,oj.exports=function(e){var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(e,t){var r=e[0],n=e[1],a=e[2],o=e[3];n=((n+=((a=((a+=((o=((o+=((r=((r+=(n&a|~n&o)+t[0]-680876936|0)<<7|r>>>25)+n|0)&n|~r&a)+t[1]-389564586|0)<<12|o>>>20)+r|0)&r|~o&n)+t[2]+606105819|0)<<17|a>>>15)+o|0)&o|~a&r)+t[3]-1044525330|0)<<22|n>>>10)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n&a|~n&o)+t[4]-176418897|0)<<7|r>>>25)+n|0)&n|~r&a)+t[5]+1200080426|0)<<12|o>>>20)+r|0)&r|~o&n)+t[6]-1473231341|0)<<17|a>>>15)+o|0)&o|~a&r)+t[7]-45705983|0)<<22|n>>>10)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n&a|~n&o)+t[8]+1770035416|0)<<7|r>>>25)+n|0)&n|~r&a)+t[9]-1958414417|0)<<12|o>>>20)+r|0)&r|~o&n)+t[10]-42063|0)<<17|a>>>15)+o|0)&o|~a&r)+t[11]-1990404162|0)<<22|n>>>10)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n&a|~n&o)+t[12]+1804603682|0)<<7|r>>>25)+n|0)&n|~r&a)+t[13]-40341101|0)<<12|o>>>20)+r|0)&r|~o&n)+t[14]-1502002290|0)<<17|a>>>15)+o|0)&o|~a&r)+t[15]+1236535329|0)<<22|n>>>10)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n&o|a&~o)+t[1]-165796510|0)<<5|r>>>27)+n|0)&a|n&~a)+t[6]-1069501632|0)<<9|o>>>23)+r|0)&n|r&~n)+t[11]+643717713|0)<<14|a>>>18)+o|0)&r|o&~r)+t[0]-373897302|0)<<20|n>>>12)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n&o|a&~o)+t[5]-701558691|0)<<5|r>>>27)+n|0)&a|n&~a)+t[10]+38016083|0)<<9|o>>>23)+r|0)&n|r&~n)+t[15]-660478335|0)<<14|a>>>18)+o|0)&r|o&~r)+t[4]-405537848|0)<<20|n>>>12)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n&o|a&~o)+t[9]+568446438|0)<<5|r>>>27)+n|0)&a|n&~a)+t[14]-1019803690|0)<<9|o>>>23)+r|0)&n|r&~n)+t[3]-187363961|0)<<14|a>>>18)+o|0)&r|o&~r)+t[8]+1163531501|0)<<20|n>>>12)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n&o|a&~o)+t[13]-1444681467|0)<<5|r>>>27)+n|0)&a|n&~a)+t[2]-51403784|0)<<9|o>>>23)+r|0)&n|r&~n)+t[7]+1735328473|0)<<14|a>>>18)+o|0)&r|o&~r)+t[12]-1926607734|0)<<20|n>>>12)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n^a^o)+t[5]-378558|0)<<4|r>>>28)+n|0)^n^a)+t[8]-2022574463|0)<<11|o>>>21)+r|0)^r^n)+t[11]+1839030562|0)<<16|a>>>16)+o|0)^o^r)+t[14]-35309556|0)<<23|n>>>9)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n^a^o)+t[1]-1530992060|0)<<4|r>>>28)+n|0)^n^a)+t[4]+1272893353|0)<<11|o>>>21)+r|0)^r^n)+t[7]-155497632|0)<<16|a>>>16)+o|0)^o^r)+t[10]-1094730640|0)<<23|n>>>9)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n^a^o)+t[13]+681279174|0)<<4|r>>>28)+n|0)^n^a)+t[0]-358537222|0)<<11|o>>>21)+r|0)^r^n)+t[3]-722521979|0)<<16|a>>>16)+o|0)^o^r)+t[6]+76029189|0)<<23|n>>>9)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n^a^o)+t[9]-640364487|0)<<4|r>>>28)+n|0)^n^a)+t[12]-421815835|0)<<11|o>>>21)+r|0)^r^n)+t[15]+530742520|0)<<16|a>>>16)+o|0)^o^r)+t[2]-995338651|0)<<23|n>>>9)+a|0,n=((n+=((o=((o+=(n^((r=((r+=(a^(n|~o))+t[0]-198630844|0)<<6|r>>>26)+n|0)|~a))+t[7]+1126891415|0)<<10|o>>>22)+r|0)^((a=((a+=(r^(o|~n))+t[14]-1416354905|0)<<15|a>>>17)+o|0)|~r))+t[5]-57434055|0)<<21|n>>>11)+a|0,n=((n+=((o=((o+=(n^((r=((r+=(a^(n|~o))+t[12]+1700485571|0)<<6|r>>>26)+n|0)|~a))+t[3]-1894986606|0)<<10|o>>>22)+r|0)^((a=((a+=(r^(o|~n))+t[10]-1051523|0)<<15|a>>>17)+o|0)|~r))+t[1]-2054922799|0)<<21|n>>>11)+a|0,n=((n+=((o=((o+=(n^((r=((r+=(a^(n|~o))+t[8]+1873313359|0)<<6|r>>>26)+n|0)|~a))+t[15]-30611744|0)<<10|o>>>22)+r|0)^((a=((a+=(r^(o|~n))+t[6]-1560198380|0)<<15|a>>>17)+o|0)|~r))+t[13]+1309151649|0)<<21|n>>>11)+a|0,n=((n+=((o=((o+=(n^((r=((r+=(a^(n|~o))+t[4]-145523070|0)<<6|r>>>26)+n|0)|~a))+t[11]-1120210379|0)<<10|o>>>22)+r|0)^((a=((a+=(r^(o|~n))+t[2]+718787259|0)<<15|a>>>17)+o|0)|~r))+t[9]-343485551|0)<<21|n>>>11)+a|0,e[0]=r+e[0]|0,e[1]=n+e[1]|0,e[2]=a+e[2]|0,e[3]=o+e[3]|0}function n(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}function a(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return r}function o(e){var t,a,o,i,s,u,c=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)r(l,n(e.substring(t-64,t)));for(a=(e=e.substring(t-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<a;t+=1)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(r(l,o),t=0;t<16;t+=1)o[t]=0;return i=(i=8*c).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(i[2],16),u=parseInt(i[1],16)||0,o[14]=s,o[15]=u,r(l,o),l}function i(e){var t,n,o,i,s,u,c=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)r(l,a(e.subarray(t-64,t)));for(n=(e=t-64<c?e.subarray(t-64):new Uint8Array(0)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)o[t>>2]|=e[t]<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(r(l,o),t=0;t<16;t+=1)o[t]=0;return i=(i=8*c).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(i[2],16),u=parseInt(i[1],16)||0,o[14]=s,o[15]=u,r(l,o),l}function s(e){var r,n="";for(r=0;r<4;r+=1)n+=t[e>>8*r+4&15]+t[e>>8*r&15];return n}function u(e){var t;for(t=0;t<e.length;t+=1)e[t]=s(e[t]);return e.join("")}function c(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function l(e,t){var r,n=e.length,a=new ArrayBuffer(n),o=new Uint8Array(a);for(r=0;r<n;r+=1)o[r]=e.charCodeAt(r);return t?o:a}function p(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function d(e,t,r){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e)),n.set(new Uint8Array(t),e.byteLength),n}function f(e){var t,r=[],n=e.length;for(t=0;t<n-1;t+=2)r.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,r)}function h(){this.reset()}return u(o("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(r,n){var a,o,i,s,u=this.byteLength,c=t(r,u),l=u;return n!==e&&(l=t(n,u)),c>l?new ArrayBuffer(0):(a=l-c,o=new ArrayBuffer(a),i=new Uint8Array(o),s=new Uint8Array(this,c,a),i.set(s),o)}}(),h.prototype.append=function(e){return this.appendBinary(c(e)),this},h.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,a=this._buff.length;for(t=64;t<=a;t+=64)r(this._hash,n(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},h.prototype.end=function(e){var t,r,n=this._buff,a=n.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<a;t+=1)o[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(o,a),r=u(this._hash),e&&(r=f(r)),this.reset(),r},h.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},h.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},h.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},h.prototype._finish=function(e,t){var n,a,o,i=t;if(e[i>>2]|=128<<(i%4<<3),i>55)for(r(this._hash,e),i=0;i<16;i+=1)e[i]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(n[2],16),o=parseInt(n[1],16)||0,e[14]=a,e[15]=o,r(this._hash,e)},h.hash=function(e,t){return h.hashBinary(c(e),t)},h.hashBinary=function(e,t){var r=u(o(e));return t?f(r):r},h.ArrayBuffer=function(){this.reset()},h.ArrayBuffer.prototype.append=function(e){var t,n=d(this._buff.buffer,e),o=n.length;for(this._length+=e.byteLength,t=64;t<=o;t+=64)r(this._hash,a(n.subarray(t-64,t)));return this._buff=t-64<o?new Uint8Array(n.buffer.slice(t-64)):new Uint8Array(0),this},h.ArrayBuffer.prototype.end=function(e){var t,r,n=this._buff,a=n.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<a;t+=1)o[t>>2]|=n[t]<<(t%4<<3);return this._finish(o,a),r=u(this._hash),e&&(r=f(r)),this.reset(),r},h.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.ArrayBuffer.prototype.getState=function(){var e=h.prototype.getState.call(this);return e.buff=p(e.buff),e},h.ArrayBuffer.prototype.setState=function(e){return e.buff=l(e.buff,!0),h.prototype.setState.call(this,e)},h.ArrayBuffer.prototype.destroy=h.prototype.destroy,h.ArrayBuffer.prototype._finish=h.prototype._finish,h.ArrayBuffer.hash=function(e,t){var r=u(i(new Uint8Array(e)));return t?f(r):r},h}())}function sj(){if(ZS)return aj;ZS=1,Object.defineProperty(aj,"__esModule",{value:!0}),aj.TermFunctionMd5=void 0;const e=Ad(),t=Sd(),r=ij();let n=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.MD5,overloads:(0,t.declare)(t.SparqlOperator.MD5).onString1Typed(()=>e=>(0,t.string)((0,r.hash)(e))).collect()})}};return aj.TermFunctionMd5=n,aj}function uj(){if(ej)return nj;ej=1,Object.defineProperty(nj,"__esModule",{value:!0}),nj.ActorFunctionFactoryTermMd5=void 0;const e=Ad(),t=Sd(),r=sj();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.MD5],termFunction:!0})}async run(e){return new r.TermFunctionMd5}};return nj.ActorFunctionFactoryTermMd5=n,nj}function cj(){return tj||(tj=1,e=rj,t=rj&&rj.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=rj&&rj.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(uj(),e)),rj;var e,t,r}var lj,pj,dj,fj={},hj={},yj={};function gj(){if(lj)return yj;lj=1,Object.defineProperty(yj,"__esModule",{value:!0}),yj.TermFunctionMonth=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.MONTH,overloads:(0,t.declare)(t.SparqlOperator.MONTH).onDateTime1(()=>e=>(0,t.integer)(e.typedValue.month)).set([t.TypeURL.XSD_DATE],()=>([e])=>(0,t.integer)(e.typedValue.month)).collect()})}};return yj.TermFunctionMonth=r,yj}function mj(){if(pj)return hj;pj=1,Object.defineProperty(hj,"__esModule",{value:!0}),hj.ActorFunctionFactoryTermMonth=void 0;const e=Ad(),t=Sd(),r=gj();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.MONTH],termFunction:!0})}async run(e){return new r.TermFunctionMonth}};return hj.ActorFunctionFactoryTermMonth=n,hj}function bj(){return dj||(dj=1,e=fj,t=fj&&fj.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=fj&&fj.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(mj(),e)),fj;var e,t,r}var vj,_j,Oj,Tj={},wj={},Sj={};function jj(){if(vj)return Sj;vj=1,Object.defineProperty(Sj,"__esModule",{value:!0}),Sj.TermFunctionNot=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.NOT,overloads:(0,t.declare)(t.SparqlOperator.NOT).onTerm1(()=>e=>(0,t.bool)(!e.coerceEBV())).collect()})}};return Sj.TermFunctionNot=r,Sj}function Aj(){if(_j)return wj;_j=1,Object.defineProperty(wj,"__esModule",{value:!0}),wj.ActorFunctionFactoryTermNot=void 0;const e=Ad(),t=Sd(),r=jj();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.NOT],termFunction:!0})}async run(e){return new r.TermFunctionNot}};return wj.ActorFunctionFactoryTermNot=n,wj}function Fj(){return Oj||(Oj=1,e=Tj,t=Tj&&Tj.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Tj&&Tj.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Aj(),e)),Tj;var e,t,r}var Ej,xj,Pj,Dj={},Mj={},Nj={};function Ij(){if(Ej)return Nj;Ej=1,Object.defineProperty(Nj,"__esModule",{value:!0}),Nj.TermFunctionMultiplication=void 0;const e=Ad(),t=Sd(),r=qO();let n=class extends e.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.MULTIPLICATION,overloads:(0,t.declare)(t.SparqlOperator.MULTIPLICATION).arithmetic(()=>(e,t)=>new r.BigNumber(e).times(t).toNumber()).collect()})}};return Nj.TermFunctionMultiplication=n,Nj}function Rj(){if(xj)return Mj;xj=1,Object.defineProperty(Mj,"__esModule",{value:!0}),Mj.ActorFunctionFactoryTermMultiplication=void 0;const e=Ad(),t=Sd(),r=Ij();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.MULTIPLICATION],termFunction:!0})}async run(e){return new r.TermFunctionMultiplication}};return Mj.ActorFunctionFactoryTermMultiplication=n,Mj}function Lj(){return Pj||(Pj=1,e=Dj,t=Dj&&Dj.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Dj&&Dj.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Rj(),e)),Dj;var e,t,r}var Cj,Bj,qj,Uj={},kj={},Qj={};function Vj(){if(Cj)return Qj;Cj=1,Object.defineProperty(Qj,"__esModule",{value:!0}),Qj.TermFunctionNow=void 0;const e=Ad(),t=ls(),r=Sd();let n=class extends e.TermFunctionBase{constructor(){super({arity:0,operator:r.SparqlOperator.NOW,overloads:(0,r.declare)(r.SparqlOperator.NOW).set([],e=>()=>new r.DateTimeLiteral((0,r.toDateTimeRepresentation)({date:e.context.getSafe(t.KeysInitQuery.queryTimestamp),timeZone:e.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)}))).collect()})}};return Qj.TermFunctionNow=n,Qj}function Gj(){if(Bj)return kj;Bj=1,Object.defineProperty(kj,"__esModule",{value:!0}),kj.ActorFunctionFactoryTermNow=void 0;const e=Ad(),t=Sd(),r=Vj();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.NOW],termFunction:!0})}async run(e){return new r.TermFunctionNow}};return kj.ActorFunctionFactoryTermNow=n,kj}function $j(){return qj||(qj=1,e=Uj,t=Uj&&Uj.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Uj&&Uj.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Gj(),e)),Uj;var e,t,r}var zj,Xj,Hj,Jj={},Kj={},Yj={};function Wj(){if(zj)return Yj;zj=1,Object.defineProperty(Yj,"__esModule",{value:!0}),Yj.TermFunctionObject=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.OBJECT,overloads:(0,t.declare)(t.SparqlOperator.OBJECT).onQuad1(()=>e=>e.object).collect()})}};return Yj.TermFunctionObject=r,Yj}function Zj(){if(Xj)return Kj;Xj=1,Object.defineProperty(Kj,"__esModule",{value:!0}),Kj.ActorFunctionFactoryTermObject=void 0;const e=Ad(),t=Sd(),r=Wj();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.OBJECT],termFunction:!0})}async run(e){return new r.TermFunctionObject}};return Kj.ActorFunctionFactoryTermObject=n,Kj}function eA(){return Hj||(Hj=1,e=Jj,t=Jj&&Jj.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Jj&&Jj.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Zj(),e)),Jj;var e,t,r}var tA,rA,nA,aA={},oA={},iA={};function sA(){if(tA)return iA;tA=1,Object.defineProperty(iA,"__esModule",{value:!0}),iA.TermFunctionPredicate=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.PREDICATE,overloads:(0,t.declare)(t.SparqlOperator.PREDICATE).onQuad1(()=>e=>e.predicate).collect()})}};return iA.TermFunctionPredicate=r,iA}function uA(){if(rA)return oA;rA=1,Object.defineProperty(oA,"__esModule",{value:!0}),oA.ActorFunctionFactoryTermPredicate=void 0;const e=Ad(),t=Sd(),r=sA();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.PREDICATE],termFunction:!0})}async run(e){return new r.TermFunctionPredicate}};return oA.ActorFunctionFactoryTermPredicate=n,oA}function cA(){return nA||(nA=1,e=aA,t=aA&&aA.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=aA&&aA.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(uA(),e)),aA;var e,t,r}var lA,pA,dA,fA={},hA={},yA={};function gA(){if(lA)return yA;lA=1,Object.defineProperty(yA,"__esModule",{value:!0}),yA.TermFunctionRand=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:0,operator:t.SparqlOperator.RAND,overloads:(0,t.declare)(t.SparqlOperator.RAND).set([],()=>()=>(0,t.double)(Math.random())).collect()})}};return yA.TermFunctionRand=r,yA}function mA(){if(pA)return hA;pA=1,Object.defineProperty(hA,"__esModule",{value:!0}),hA.ActorFunctionFactoryTermRand=void 0;const e=Ad(),t=Sd(),r=gA();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.RAND],termFunction:!0})}async run(e){return new r.TermFunctionRand}};return hA.ActorFunctionFactoryTermRand=n,hA}function bA(){return dA||(dA=1,e=fA,t=fA&&fA.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=fA&&fA.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(mA(),e)),fA;var e,t,r}var vA,_A,OA,TA,wA,SA,jA={},AA={},FA={},EA={},xA={},PA={};function DA(){if(vA)return PA;vA=1,Object.defineProperty(PA,"__esModule",{value:!0}),PA.TermFunctionRegex=void 0;const e=Ad(),t=Sd();let r=class r extends e.TermFunctionBase{constructor(){super({arity:[2,3],operator:t.SparqlOperator.REGEX,overloads:(0,t.declare)(t.SparqlOperator.REGEX).onBinaryTyped([t.TypeAlias.SPARQL_STRINGLY,t.TypeURL.XSD_STRING],r.regex2).onTernaryTyped([t.TypeAlias.SPARQL_STRINGLY,t.TypeURL.XSD_STRING,t.TypeURL.XSD_STRING],r.regex3).collect()})}static regex2(){return(e,n)=>(0,t.bool)(r.matches(e,n))}static regex3(){return(e,n,a)=>(0,t.bool)(r.matches(e,n,a))}static matches(e,t,n=""){(n=r.cleanFlags(n)).includes("x")&&(t=r.flagX(t)),n.includes("q")&&(t=r.flagQ(t));return new RegExp(t,n.replaceAll(/[qx]/gu,"")).test(e)}static cleanFlags(e){if(!/^[imsxq]*$/u.test(e))throw new Error("Invalid flags");const t=[...e].find((e,t,r)=>r.indexOf(e)!==t);if(t)throw new Error(`Duplicate flag: ${t}`);return e?.includes("q")&&(e=e.replaceAll(/[msx]/gu,"")),`${e}u`}static flagX(e){if(!e)return e;let t=e[0];for(;["\t","\n","\r"," "].includes(t);)t=(e=e.slice(1))[0];let r="["===t;for(let n=1;n<e.length;n++){const a=e[n];["\t","\n","\r"," "].includes(a)&&!r?(e=e.slice(0,n)+e.slice(n+1),n--):"["===a&&"\\"!==t?r=!0:"]"===a&&"\\"!==t&&(r=!1),t=a}return e}static flagQ(e){return e.replaceAll(/([?+*.{}()[\]\\|])/gu,"\\$1").replaceAll(/^\^/gu,"\\^").replaceAll(/\$$/gu,"\\$")}};return PA.TermFunctionRegex=r,PA}function MA(){if(_A)return xA;_A=1,Object.defineProperty(xA,"__esModule",{value:!0}),xA.ActorFunctionFactoryTermRegex=void 0;const e=Ad(),t=Sd(),r=DA();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.REGEX],termFunction:!0})}async run(e){return new r.TermFunctionRegex}};return xA.ActorFunctionFactoryTermRegex=n,xA}function NA(){return OA||(OA=1,e=EA,t=EA&&EA.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=EA&&EA.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(MA(),e),r(DA(),e)),EA;var e,t,r}function IA(){if(TA)return FA;TA=1,Object.defineProperty(FA,"__esModule",{value:!0}),FA.TermFunctionReplace=void 0;const e=NA(),t=Ad(),r=Sd();let n=class n extends t.TermFunctionBase{constructor(){super({arity:[3,4],operator:r.SparqlOperator.REPLACE,overloads:(0,r.declare)(r.SparqlOperator.REPLACE).onTernaryTyped([r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING],()=>(e,t,a)=>(0,r.string)(n.replace(e,t,a))).set([r.TypeURL.RDF_LANG_STRING,r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING],()=>([e,t,a])=>{const o=n.replace(e.typedValue,t.typedValue,a.typedValue);return(0,r.langString)(o,e.language)}).onQuaternaryTyped([r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING],()=>(e,t,a,o)=>(0,r.string)(n.replace(e,t,a,o))).set([r.TypeURL.RDF_LANG_STRING,r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING],()=>([e,t,a,o])=>{const i=n.replace(e.typedValue,t.typedValue,a.typedValue,o.typedValue);return(0,r.langString)(i,e.language)}).collect()})}static replace(t,r,n,a=""){return(a=e.TermFunctionRegex.cleanFlags(a)).includes("x")&&(r=e.TermFunctionRegex.flagX(r)),a.includes("q")?r=e.TermFunctionRegex.flagQ(r):n=n.replaceAll("$0",()=>"$&"),a=`${a.replaceAll(/[qx]/gu,"")}g`,t.replaceAll(new RegExp(r,a),n)}};return FA.TermFunctionReplace=n,FA}function RA(){if(wA)return AA;wA=1,Object.defineProperty(AA,"__esModule",{value:!0}),AA.ActorFunctionFactoryTermReplace=void 0;const e=Ad(),t=Sd(),r=IA();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.REPLACE],termFunction:!0})}async run(e){return new r.TermFunctionReplace}};return AA.ActorFunctionFactoryTermReplace=n,AA}function LA(){return SA||(SA=1,e=jA,t=jA&&jA.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=jA&&jA.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(RA(),e)),jA;var e,t,r}var CA,BA,qA,UA={},kA={},QA={};function VA(){if(CA)return QA;CA=1,Object.defineProperty(QA,"__esModule",{value:!0}),QA.TermFunctionRound=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.ROUND,overloads:(0,t.declare)(t.SparqlOperator.ROUND).numericConverter(()=>e=>Math.round(e)).collect()})}};return QA.TermFunctionRound=r,QA}function GA(){if(BA)return kA;BA=1,Object.defineProperty(kA,"__esModule",{value:!0}),kA.ActorFunctionFactoryTermRound=void 0;const e=Ad(),t=Sd(),r=VA();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.ROUND],termFunction:!0})}async run(e){return new r.TermFunctionRound}};return kA.ActorFunctionFactoryTermRound=n,kA}function $A(){return qA||(qA=1,e=UA,t=UA&&UA.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=UA&&UA.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(GA(),e)),UA;var e,t,r}var zA,XA,HA={},JA={},KA={},YA={},WA={};function ZA(){if(XA)return zA;function e(e,t){if(!e)throw new Error(t||"Assertion failed")}return XA=1,zA=e,e.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)},zA}var eF,tF,rF={exports:{}};function nF(){if(tF)return WA;tF=1;var e=ZA(),t=(eF||(eF=1,"function"==typeof Object.create?rF.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:rF.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}),rF.exports);function r(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function n(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function a(e){return 1===e.length?"0"+e:e}function o(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}return WA.inherits=t,WA.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),o=0;o<e.length;o+=2)n.push(parseInt(e[o]+e[o+1],16))}else for(var a=0,o=0;o<e.length;o++){var i=e.charCodeAt(o);i<128?n[a++]=i:i<2048?(n[a++]=i>>6|192,n[a++]=63&i|128):r(e,o)?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++o)),n[a++]=i>>18|240,n[a++]=i>>12&63|128,n[a++]=i>>6&63|128,n[a++]=63&i|128):(n[a++]=i>>12|224,n[a++]=i>>6&63|128,n[a++]=63&i|128)}else for(o=0;o<e.length;o++)n[o]=0|e[o];return n},WA.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=a(e[r].toString(16));return t},WA.htonl=n,WA.toHex32=function(e,t){for(var r="",a=0;a<e.length;a++){var i=e[a];"little"===t&&(i=n(i)),r+=o(i.toString(16))}return r},WA.zero2=a,WA.zero8=o,WA.join32=function(t,r,n,a){var o=n-r;e(o%4==0);for(var i=new Array(o/4),s=0,u=r;s<i.length;s++,u+=4){var c;c="big"===a?t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],i[s]=c>>>0}return i},WA.split32=function(e,t){for(var r=new Array(4*e.length),n=0,a=0;n<e.length;n++,a+=4){var o=e[n];"big"===t?(r[a]=o>>>24,r[a+1]=o>>>16&255,r[a+2]=o>>>8&255,r[a+3]=255&o):(r[a+3]=o>>>24,r[a+2]=o>>>16&255,r[a+1]=o>>>8&255,r[a]=255&o)}return r},WA.rotr32=function(e,t){return e>>>t|e<<32-t},WA.rotl32=function(e,t){return e<<t|e>>>32-t},WA.sum32=function(e,t){return e+t>>>0},WA.sum32_3=function(e,t,r){return e+t+r>>>0},WA.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},WA.sum32_5=function(e,t,r,n,a){return e+t+r+n+a>>>0},WA.sum64=function(e,t,r,n){var a=e[t],o=n+e[t+1]>>>0,i=(o<n?1:0)+r+a;e[t]=i>>>0,e[t+1]=o},WA.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},WA.sum64_lo=function(e,t,r,n){return t+n>>>0},WA.sum64_4_hi=function(e,t,r,n,a,o,i,s){var u=0,c=t;return u+=(c=c+n>>>0)<t?1:0,u+=(c=c+o>>>0)<o?1:0,e+r+a+i+(u+=(c=c+s>>>0)<s?1:0)>>>0},WA.sum64_4_lo=function(e,t,r,n,a,o,i,s){return t+n+o+s>>>0},WA.sum64_5_hi=function(e,t,r,n,a,o,i,s,u,c){var l=0,p=t;return l+=(p=p+n>>>0)<t?1:0,l+=(p=p+o>>>0)<o?1:0,l+=(p=p+s>>>0)<s?1:0,e+r+a+i+u+(l+=(p=p+c>>>0)<c?1:0)>>>0},WA.sum64_5_lo=function(e,t,r,n,a,o,i,s,u,c){return t+n+o+s+c>>>0},WA.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},WA.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},WA.shr64_hi=function(e,t,r){return e>>>r},WA.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},WA}var aF,oF={};function iF(){if(aF)return oF;aF=1;var e=nF(),t=ZA();function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return oF.BlockHash=r,r.prototype.update=function(t,r){if(t=e.toArray(t,r),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var n=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-n,t.length),0===this.pending.length&&(this.pending=null),t=e.join32(t,0,t.length-n,this.endian);for(var a=0;a<t.length;a+=this._delta32)this._update(t,a,a+this._delta32)}return this},r.prototype.digest=function(e){return this.update(this._pad()),t(null===this.pending),this._digest(e)},r.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var a=1;a<r;a++)n[a]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[a++]=0;n[a++]=0,n[a++]=0,n[a++]=0,n[a++]=0,n[a++]=e>>>24&255,n[a++]=e>>>16&255,n[a++]=e>>>8&255,n[a++]=255&e}else for(n[a++]=255&e,n[a++]=e>>>8&255,n[a++]=e>>>16&255,n[a++]=e>>>24&255,n[a++]=0,n[a++]=0,n[a++]=0,n[a++]=0,o=8;o<this.padLength;o++)n[a++]=0;return n},oF}var sF,uF,cF,lF,pF,dF,fF,hF,yF,gF,mF,bF,vF={},_F={};function OF(){if(sF)return _F;sF=1;var e=nF().rotr32;function t(e,t,r){return e&t^~e&r}function r(e,t,r){return e&t^e&r^t&r}function n(e,t,r){return e^t^r}return _F.ft_1=function(e,a,o,i){return 0===e?t(a,o,i):1===e||3===e?n(a,o,i):2===e?r(a,o,i):void 0},_F.ch32=t,_F.maj32=r,_F.p32=n,_F.s0_256=function(t){return e(t,2)^e(t,13)^e(t,22)},_F.s1_256=function(t){return e(t,6)^e(t,11)^e(t,25)},_F.g0_256=function(t){return e(t,7)^e(t,18)^t>>>3},_F.g1_256=function(t){return e(t,17)^e(t,19)^t>>>10},_F}function TF(){if(pF)return lF;pF=1;var e=nF(),t=iF(),r=OF(),n=ZA(),a=e.sum32,o=e.sum32_4,i=e.sum32_5,s=r.ch32,u=r.maj32,c=r.s0_256,l=r.s1_256,p=r.g0_256,d=r.g1_256,f=t.BlockHash,h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;f.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=h,this.W=new Array(64)}return e.inherits(y,f),lF=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(e,t){for(var r=this.W,f=0;f<16;f++)r[f]=e[t+f];for(;f<r.length;f++)r[f]=o(d(r[f-2]),r[f-7],p(r[f-15]),r[f-16]);var h=this.h[0],y=this.h[1],g=this.h[2],m=this.h[3],b=this.h[4],v=this.h[5],_=this.h[6],O=this.h[7];for(n(this.k.length===r.length),f=0;f<r.length;f++){var T=i(O,l(b),s(b,v,_),this.k[f],r[f]),w=a(c(h),u(h,y,g));O=_,_=v,v=b,b=a(m,T),m=g,g=y,y=h,h=a(T,w)}this.h[0]=a(this.h[0],h),this.h[1]=a(this.h[1],y),this.h[2]=a(this.h[2],g),this.h[3]=a(this.h[3],m),this.h[4]=a(this.h[4],b),this.h[5]=a(this.h[5],v),this.h[6]=a(this.h[6],_),this.h[7]=a(this.h[7],O)},y.prototype._digest=function(t){return"hex"===t?e.toHex32(this.h,"big"):e.split32(this.h,"big")},lF}function wF(){if(yF)return hF;yF=1;var e=nF(),t=iF(),r=ZA(),n=e.rotr64_hi,a=e.rotr64_lo,o=e.shr64_hi,i=e.shr64_lo,s=e.sum64,u=e.sum64_hi,c=e.sum64_lo,l=e.sum64_4_hi,p=e.sum64_4_lo,d=e.sum64_5_hi,f=e.sum64_5_lo,h=t.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function g(){if(!(this instanceof g))return new g;h.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}function m(e,t,r,n,a){var o=e&r^~e&a;return o<0&&(o+=4294967296),o}function b(e,t,r,n,a,o){var i=t&n^~t&o;return i<0&&(i+=4294967296),i}function v(e,t,r,n,a){var o=e&r^e&a^r&a;return o<0&&(o+=4294967296),o}function _(e,t,r,n,a,o){var i=t&n^t&o^n&o;return i<0&&(i+=4294967296),i}function O(e,t){var r=n(e,t,28)^n(t,e,2)^n(t,e,7);return r<0&&(r+=4294967296),r}function T(e,t){var r=a(e,t,28)^a(t,e,2)^a(t,e,7);return r<0&&(r+=4294967296),r}function w(e,t){var r=n(e,t,14)^n(e,t,18)^n(t,e,9);return r<0&&(r+=4294967296),r}function S(e,t){var r=a(e,t,14)^a(e,t,18)^a(t,e,9);return r<0&&(r+=4294967296),r}function j(e,t){var r=n(e,t,1)^n(e,t,8)^o(e,t,7);return r<0&&(r+=4294967296),r}function A(e,t){var r=a(e,t,1)^a(e,t,8)^i(e,t,7);return r<0&&(r+=4294967296),r}function F(e,t){var r=n(e,t,19)^n(t,e,29)^o(e,t,6);return r<0&&(r+=4294967296),r}function E(e,t){var r=a(e,t,19)^a(t,e,29)^i(e,t,6);return r<0&&(r+=4294967296),r}return e.inherits(g,h),hF=g,g.blockSize=1024,g.outSize=512,g.hmacStrength=192,g.padLength=128,g.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var a=F(r[n-4],r[n-3]),o=E(r[n-4],r[n-3]),i=r[n-14],s=r[n-13],u=j(r[n-30],r[n-29]),c=A(r[n-30],r[n-29]),d=r[n-32],f=r[n-31];r[n]=l(a,o,i,s,u,c,d,f),r[n+1]=p(a,o,i,s,u,c,d,f)}},g.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,a=this.h[0],o=this.h[1],i=this.h[2],l=this.h[3],p=this.h[4],h=this.h[5],y=this.h[6],g=this.h[7],j=this.h[8],A=this.h[9],F=this.h[10],E=this.h[11],x=this.h[12],P=this.h[13],D=this.h[14],M=this.h[15];r(this.k.length===n.length);for(var N=0;N<n.length;N+=2){var I=D,R=M,L=w(j,A),C=S(j,A),B=m(j,A,F,E,x),q=b(j,A,F,E,x,P),U=this.k[N],k=this.k[N+1],Q=n[N],V=n[N+1],G=d(I,R,L,C,B,q,U,k,Q,V),$=f(I,R,L,C,B,q,U,k,Q,V);I=O(a,o),R=T(a,o),L=v(a,o,i,l,p),C=_(a,o,i,l,p,h);var z=u(I,R,L,C),X=c(I,R,L,C);D=x,M=P,x=F,P=E,F=j,E=A,j=u(y,g,G,$),A=c(g,g,G,$),y=p,g=h,p=i,h=l,i=a,l=o,a=u(G,$,z,X),o=c(G,$,z,X)}s(this.h,0,a,o),s(this.h,2,i,l),s(this.h,4,p,h),s(this.h,6,y,g),s(this.h,8,j,A),s(this.h,10,F,E),s(this.h,12,x,P),s(this.h,14,D,M)},g.prototype._digest=function(t){return"hex"===t?e.toHex32(this.h,"big"):e.split32(this.h,"big")},hF}function SF(){return bF||(bF=1,vF.sha1=function(){if(cF)return uF;cF=1;var e=nF(),t=iF(),r=OF(),n=e.rotl32,a=e.sum32,o=e.sum32_5,i=r.ft_1,s=t.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function c(){if(!(this instanceof c))return new c;s.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return e.inherits(c,s),uF=c,c.blockSize=512,c.outSize=160,c.hmacStrength=80,c.padLength=64,c.prototype._update=function(e,t){for(var r=this.W,s=0;s<16;s++)r[s]=e[t+s];for(;s<r.length;s++)r[s]=n(r[s-3]^r[s-8]^r[s-14]^r[s-16],1);var c=this.h[0],l=this.h[1],p=this.h[2],d=this.h[3],f=this.h[4];for(s=0;s<r.length;s++){var h=~~(s/20),y=o(n(c,5),i(h,l,p,d),f,r[s],u[h]);f=d,d=p,p=n(l,30),l=c,c=y}this.h[0]=a(this.h[0],c),this.h[1]=a(this.h[1],l),this.h[2]=a(this.h[2],p),this.h[3]=a(this.h[3],d),this.h[4]=a(this.h[4],f)},c.prototype._digest=function(t){return"hex"===t?e.toHex32(this.h,"big"):e.split32(this.h,"big")},uF}(),vF.sha224=function(){if(fF)return dF;fF=1;var e=nF(),t=TF();function r(){if(!(this instanceof r))return new r;t.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return e.inherits(r,t),dF=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(t){return"hex"===t?e.toHex32(this.h.slice(0,7),"big"):e.split32(this.h.slice(0,7),"big")},dF}(),vF.sha256=TF(),vF.sha384=function(){if(mF)return gF;mF=1;var e=nF(),t=wF();function r(){if(!(this instanceof r))return new r;t.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return e.inherits(r,t),gF=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(t){return"hex"===t?e.toHex32(this.h.slice(0,12),"big"):e.split32(this.h.slice(0,12),"big")},gF}(),vF.sha512=wF()),vF}var jF,AF,FF,EF,xF,PF,DF,MF={};function NF(){return EF||(EF=1,function(e){var t=e;t.utils=nF(),t.common=iF(),t.sha=SF(),t.ripemd=function(){if(jF)return MF;jF=1;var e=nF(),t=iF(),r=e.rotl32,n=e.sum32,a=e.sum32_3,o=e.sum32_4,i=t.BlockHash;function s(){if(!(this instanceof s))return new s;i.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function u(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function c(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function l(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}e.inherits(s,i),MF.ripemd160=s,s.blockSize=512,s.outSize=160,s.hmacStrength=192,s.padLength=64,s.prototype._update=function(e,t){for(var i=this.h[0],s=this.h[1],y=this.h[2],g=this.h[3],m=this.h[4],b=i,v=s,_=y,O=g,T=m,w=0;w<80;w++){var S=n(r(o(i,u(w,s,y,g),e[p[w]+t],c(w)),f[w]),m);i=m,m=g,g=r(y,10),y=s,s=S,S=n(r(o(b,u(79-w,v,_,O),e[d[w]+t],l(w)),h[w]),T),b=T,T=O,O=r(_,10),_=v,v=S}S=a(this.h[1],y,O),this.h[1]=a(this.h[2],g,T),this.h[2]=a(this.h[3],m,b),this.h[3]=a(this.h[4],i,v),this.h[4]=a(this.h[0],s,_),this.h[0]=S},s.prototype._digest=function(t){return"hex"===t?e.toHex32(this.h,"little"):e.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],d=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],f=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return MF}(),t.hmac=function(){if(FF)return AF;FF=1;var e=nF(),t=ZA();function r(t,n,a){if(!(this instanceof r))return new r(t,n,a);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(e.toArray(n,a))}return AF=r,r.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),t(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=(new this.Hash).update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=(new this.Hash).update(e)},r.prototype.update=function(e,t){return this.inner.update(e,t),this},r.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},AF}(),t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(YA)),YA}function IF(){if(xF)return KA;xF=1,Object.defineProperty(KA,"__esModule",{value:!0}),KA.TermFunctionSha1=void 0;const e=Ad(),t=Sd(),r=NF();let n=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.SHA1,overloads:(0,t.declare)(t.SparqlOperator.SHA1).onString1Typed(()=>e=>(0,t.string)((0,r.sha1)().update(e).digest("hex"))).collect()})}};return KA.TermFunctionSha1=n,KA}function RF(){if(PF)return JA;PF=1,Object.defineProperty(JA,"__esModule",{value:!0}),JA.ActorFunctionFactoryTermSha1=void 0;const e=Ad(),t=Sd(),r=IF();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SHA1],termFunction:!0})}async run(e){return new r.TermFunctionSha1}};return JA.ActorFunctionFactoryTermSha1=n,JA}function LF(){return DF||(DF=1,e=HA,t=HA&&HA.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=HA&&HA.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(RF(),e)),HA;var e,t,r}var CF,BF,qF,UF={},kF={},QF={};function VF(){if(CF)return QF;CF=1,Object.defineProperty(QF,"__esModule",{value:!0}),QF.TermFunctionSeconds=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.SECONDS,overloads:(0,t.declare)(t.SparqlOperator.SECONDS).onDateTime1(()=>e=>(0,t.decimal)(e.typedValue.seconds)).set([t.TypeURL.XSD_TIME],()=>([e])=>(0,t.integer)(e.typedValue.seconds)).collect()})}};return QF.TermFunctionSeconds=r,QF}function GF(){if(BF)return kF;BF=1,Object.defineProperty(kF,"__esModule",{value:!0}),kF.ActorFunctionFactoryTermSeconds=void 0;const e=Ad(),t=Sd(),r=VF();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SECONDS],termFunction:!0})}async run(e){return new r.TermFunctionSeconds}};return kF.ActorFunctionFactoryTermSeconds=n,kF}function $F(){return qF||(qF=1,e=UF,t=UF&&UF.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=UF&&UF.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(GF(),e)),UF;var e,t,r}var zF,XF,HF,JF={},KF={},YF={};function WF(){if(zF)return YF;zF=1,Object.defineProperty(YF,"__esModule",{value:!0}),YF.TermFunctionSha256=void 0;const e=Ad(),t=Sd(),r=NF();let n=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.SHA256,overloads:(0,t.declare)(t.SparqlOperator.SHA256).onString1Typed(()=>e=>(0,t.string)((0,r.sha256)().update(e).digest("hex"))).collect()})}};return YF.TermFunctionSha256=n,YF}function ZF(){if(XF)return KF;XF=1,Object.defineProperty(KF,"__esModule",{value:!0}),KF.ActorFunctionFactoryTermSha256=void 0;const e=Ad(),t=Sd(),r=WF();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SHA256],termFunction:!0})}async run(e){return new r.TermFunctionSha256}};return KF.ActorFunctionFactoryTermSha256=n,KF}function eE(){return HF||(HF=1,e=JF,t=JF&&JF.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=JF&&JF.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(ZF(),e)),JF;var e,t,r}var tE,rE,nE,aE={},oE={},iE={};function sE(){if(tE)return iE;tE=1,Object.defineProperty(iE,"__esModule",{value:!0}),iE.TermFunctionSha384=void 0;const e=Ad(),t=Sd(),r=NF();let n=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.SHA384,overloads:(0,t.declare)(t.SparqlOperator.SHA384).onString1Typed(()=>e=>(0,t.string)((0,r.sha384)().update(e).digest("hex"))).collect()})}};return iE.TermFunctionSha384=n,iE}function uE(){if(rE)return oE;rE=1,Object.defineProperty(oE,"__esModule",{value:!0}),oE.ActorFunctionFactoryTermSha384=void 0;const e=Ad(),t=Sd(),r=sE();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SHA384],termFunction:!0})}async run(e){return new r.TermFunctionSha384}};return oE.ActorFunctionFactoryTermSha384=n,oE}function cE(){return nE||(nE=1,e=aE,t=aE&&aE.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=aE&&aE.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(uE(),e)),aE;var e,t,r}var lE,pE,dE,fE={},hE={},yE={};function gE(){if(lE)return yE;lE=1,Object.defineProperty(yE,"__esModule",{value:!0}),yE.TermFunctionSha512=void 0;const e=Ad(),t=Sd(),r=NF();let n=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.SHA512,overloads:(0,t.declare)(t.SparqlOperator.SHA512).onString1Typed(()=>e=>(0,t.string)((0,r.sha512)().update(e).digest("hex"))).collect()})}};return yE.TermFunctionSha512=n,yE}function mE(){if(pE)return hE;pE=1,Object.defineProperty(hE,"__esModule",{value:!0}),hE.ActorFunctionFactoryTermSha512=void 0;const e=Ad(),t=Sd(),r=gE();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SHA512],termFunction:!0})}async run(e){return new r.TermFunctionSha512}};return hE.ActorFunctionFactoryTermSha512=n,hE}function bE(){return dE||(dE=1,e=fE,t=fE&&fE.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=fE&&fE.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(mE(),e)),fE;var e,t,r}var vE,_E,OE,TE={},wE={},SE={};function jE(){if(vE)return SE;vE=1,Object.defineProperty(SE,"__esModule",{value:!0}),SE.TermFunctionStrAfter=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.STRAFTER,overloads:(0,t.declare)(t.SparqlOperator.STRAFTER).onBinaryTyped([t.TypeURL.XSD_STRING,t.TypeURL.XSD_STRING],()=>(e,r)=>(0,t.string)(e.slice(e.indexOf(r)).slice(r.length))).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.XSD_STRING],()=>(e,r)=>{const[n,a]=[e.typedValue,r.typedValue],o=n.slice(n.indexOf(a)).slice(a.length);return o||!a?(0,t.langString)(o,e.language):(0,t.string)(o)}).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.RDF_LANG_STRING],()=>(e,r)=>{if(e.language!==r.language)throw new t.IncompatibleLanguageOperation(e,r);const[n,a]=[e.typedValue,r.typedValue],o=n.slice(n.indexOf(a)).slice(a.length);return o||!a?(0,t.langString)(o,e.language):(0,t.string)(o)}).collect()})}};return SE.TermFunctionStrAfter=r,SE}function AE(){if(_E)return wE;_E=1,Object.defineProperty(wE,"__esModule",{value:!0}),wE.ActorFunctionFactoryTermStrAfter=void 0;const e=Ad(),t=Sd(),r=jE();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRAFTER],termFunction:!0})}async run(e){return new r.TermFunctionStrAfter}};return wE.ActorFunctionFactoryTermStrAfter=n,wE}function FE(){return OE||(OE=1,e=TE,t=TE&&TE.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=TE&&TE.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(AE(),e)),TE;var e,t,r}var EE,xE,PE,DE={},ME={},NE={};function IE(){if(EE)return NE;EE=1,Object.defineProperty(NE,"__esModule",{value:!0}),NE.TermFunctionStrBefore=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.STRBEFORE,overloads:(0,t.declare)(t.SparqlOperator.STRBEFORE).onBinaryTyped([t.TypeURL.XSD_STRING,t.TypeURL.XSD_STRING],()=>(e,r)=>(0,t.string)(e.slice(0,Math.max(0,e.indexOf(r))))).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.XSD_STRING],()=>(e,r)=>{const[n,a]=[e.typedValue,r.typedValue],o=e.typedValue.slice(0,Math.max(0,n.indexOf(a)));return o||!a?(0,t.langString)(o,e.language):(0,t.string)(o)}).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.RDF_LANG_STRING],()=>(e,r)=>{if(e.language!==r.language)throw new t.IncompatibleLanguageOperation(e,r);const[n,a]=[e.typedValue,r.typedValue],o=e.typedValue.slice(0,Math.max(0,n.indexOf(a)));return o||!a?(0,t.langString)(o,e.language):(0,t.string)(o)}).collect()})}};return NE.TermFunctionStrBefore=r,NE}function RE(){if(xE)return ME;xE=1,Object.defineProperty(ME,"__esModule",{value:!0}),ME.ActorFunctionFactoryTermStrBefore=void 0;const e=Ad(),t=Sd(),r=IE();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRBEFORE],termFunction:!0})}async run(e){return new r.TermFunctionStrBefore}};return ME.ActorFunctionFactoryTermStrBefore=n,ME}function LE(){return PE||(PE=1,e=DE,t=DE&&DE.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=DE&&DE.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(RE(),e)),DE;var e,t,r}var CE,BE,qE,UE={},kE={},QE={};function VE(){if(CE)return QE;CE=1,Object.defineProperty(QE,"__esModule",{value:!0}),QE.TermFunctionStrDt=void 0;const e=Ad(),t=ls(),r=Sd();let n=class extends e.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.STRDT,overloads:(0,r.declare)(r.SparqlOperator.STRDT).set([r.TypeURL.XSD_STRING,"namedNode"],e=>([n,a])=>{const o=e.context.getSafe(t.KeysInitQuery.dataFactory),i=o.literal(n.typedValue,o.namedNode(a.value));return new r.TermTransformer(e.context.getSafe(t.KeysExpressionEvaluator.superTypeProvider)).transformLiteral(i)}).collect()})}};return QE.TermFunctionStrDt=n,QE}function GE(){if(BE)return kE;BE=1,Object.defineProperty(kE,"__esModule",{value:!0}),kE.ActorFunctionFactoryTermStrDt=void 0;const e=Ad(),t=Sd(),r=VE();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRDT],termFunction:!0})}async run(e){return new r.TermFunctionStrDt}};return kE.ActorFunctionFactoryTermStrDt=n,kE}function $E(){return qE||(qE=1,e=UE,t=UE&&UE.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=UE&&UE.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(GE(),e)),UE;var e,t,r}var zE,XE,HE,JE={},KE={},YE={};function WE(){if(zE)return YE;zE=1,Object.defineProperty(YE,"__esModule",{value:!0}),YE.TermFunctionStrEnds=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.STRENDS,overloads:(0,t.declare)(t.SparqlOperator.STRENDS).onBinaryTyped([t.TypeAlias.SPARQL_STRINGLY,t.TypeURL.XSD_STRING],()=>(e,r)=>(0,t.bool)(e.endsWith(r))).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.RDF_LANG_STRING],()=>(e,r)=>{if(e.language!==r.language)throw new t.IncompatibleLanguageOperation(e,r);return(0,t.bool)(e.typedValue.endsWith(r.typedValue))}).collect()})}};return YE.TermFunctionStrEnds=r,YE}function ZE(){if(XE)return KE;XE=1,Object.defineProperty(KE,"__esModule",{value:!0}),KE.ActorFunctionFactoryTermStrEnds=void 0;const e=Ad(),t=Sd(),r=WE();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRENDS],termFunction:!0})}async run(e){return new r.TermFunctionStrEnds}};return KE.ActorFunctionFactoryTermStrEnds=n,KE}function ex(){return HE||(HE=1,e=JE,t=JE&&JE.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=JE&&JE.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(ZE(),e)),JE;var e,t,r}var tx,rx,nx,ax={},ox={},ix={};function sx(){if(tx)return ix;tx=1,Object.defineProperty(ix,"__esModule",{value:!0}),ix.TermFunctionStrLang=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.STRLANG,overloads:(0,t.declare)(t.SparqlOperator.STRLANG).onBinaryTyped([t.TypeURL.XSD_STRING,t.TypeURL.XSD_STRING],()=>(e,r)=>new t.LangStringLiteral(e,r.toLowerCase())).collect()})}};return ix.TermFunctionStrLang=r,ix}function ux(){if(rx)return ox;rx=1,Object.defineProperty(ox,"__esModule",{value:!0}),ox.ActorFunctionFactoryTermStrLang=void 0;const e=Ad(),t=Sd(),r=sx();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRLANG],termFunction:!0})}async run(e){return new r.TermFunctionStrLang}};return ox.ActorFunctionFactoryTermStrLang=n,ox}function cx(){return nx||(nx=1,e=ax,t=ax&&ax.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=ax&&ax.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(ux(),e)),ax;var e,t,r}var lx,px,dx,fx={},hx={},yx={};function gx(){if(lx)return yx;lx=1,Object.defineProperty(yx,"__esModule",{value:!0}),yx.TermFunctionStrLen=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.STRLEN,overloads:(0,t.declare)(t.SparqlOperator.STRLEN).onStringly1(()=>e=>(0,t.integer)([...e.typedValue].length)).collect()})}};return yx.TermFunctionStrLen=r,yx}function mx(){if(px)return hx;px=1,Object.defineProperty(hx,"__esModule",{value:!0}),hx.ActorFunctionFactoryTermStrLen=void 0;const e=Ad(),t=Sd(),r=gx();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRLEN],termFunction:!0})}async run(e){return new r.TermFunctionStrLen}};return hx.ActorFunctionFactoryTermStrLen=n,hx}function bx(){return dx||(dx=1,e=fx,t=fx&&fx.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=fx&&fx.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(mx(),e)),fx;var e,t,r}var vx,_x,Ox,Tx={},wx={},Sx={};function jx(){if(vx)return Sx;vx=1,Object.defineProperty(Sx,"__esModule",{value:!0}),Sx.TermFunctionStrStarts=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:2,operator:t.SparqlOperator.STRSTARTS,overloads:(0,t.declare)(t.SparqlOperator.STRSTARTS).onBinaryTyped([t.TypeAlias.SPARQL_STRINGLY,t.TypeURL.XSD_STRING],()=>(e,r)=>(0,t.bool)(e.startsWith(r))).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.RDF_LANG_STRING],()=>(e,r)=>{if(e.language!==r.language)throw new t.IncompatibleLanguageOperation(e,r);return(0,t.bool)(e.typedValue.startsWith(r.typedValue))}).collect()})}};return Sx.TermFunctionStrStarts=r,Sx}function Ax(){if(_x)return wx;_x=1,Object.defineProperty(wx,"__esModule",{value:!0}),wx.ActorFunctionFactoryTermStrStarts=void 0;const e=Ad(),t=Sd(),r=jx();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRSTARTS],termFunction:!0})}async run(e){return new r.TermFunctionStrStarts}};return wx.ActorFunctionFactoryTermStrStarts=n,wx}function Fx(){return Ox||(Ox=1,e=Tx,t=Tx&&Tx.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Tx&&Tx.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Ax(),e)),Tx;var e,t,r}var Ex,xx,Px,Dx={},Mx={},Nx={};function Ix(){if(Ex)return Nx;Ex=1,Object.defineProperty(Nx,"__esModule",{value:!0}),Nx.TermFunctionStr=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.STR,overloads:(0,t.declare)(t.SparqlOperator.STR).onTerm1(()=>e=>(0,t.string)(e.str())).collect()})}};return Nx.TermFunctionStr=r,Nx}function Rx(){if(xx)return Mx;xx=1,Object.defineProperty(Mx,"__esModule",{value:!0}),Mx.ActorFunctionFactoryTermStr=void 0;const e=Ad(),t=Sd(),r=Ix();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STR],termFunction:!0})}async run(e){return new r.TermFunctionStr}};return Mx.ActorFunctionFactoryTermStr=n,Mx}function Lx(){return Px||(Px=1,e=Dx,t=Dx&&Dx.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Dx&&Dx.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Rx(),e)),Dx;var e,t,r}var Cx,Bx={},qx={},Ux={},kx={},Qx={};var Vx,Gx={};var $x,zx,Xx,Hx={},Jx={},Kx={};function Yx(){if(zx)return Jx;zx=1,Object.defineProperty(Jx,"__esModule",{value:!0});const e=($x||($x=1,Object.defineProperty(Kx,"__esModule",{value:!0}),Kx.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i),Kx);return Jx.default=function(t){return"string"==typeof t&&e.default.test(t)},Jx}function Wx(){if(Xx)return Hx;Xx=1,Object.defineProperty(Hx,"__esModule",{value:!0});const e=Yx();return Hx.default=function(t){if(!(0,e.default)(t))throw TypeError("Invalid UUID");let r;return Uint8Array.of((r=parseInt(t.slice(0,8),16))>>>24,r>>>16&255,r>>>8&255,255&r,(r=parseInt(t.slice(9,13),16))>>>8,255&r,(r=parseInt(t.slice(14,18),16))>>>8,255&r,(r=parseInt(t.slice(19,23),16))>>>8,255&r,(r=parseInt(t.slice(24,36),16))/1099511627776&255,r/4294967296&255,r>>>24&255,r>>>16&255,r>>>8&255,255&r)},Hx}var Zx,eP={};function tP(){if(Zx)return eP;Zx=1,Object.defineProperty(eP,"__esModule",{value:!0}),eP.unsafeStringify=void 0;const e=Yx(),t=[];for(let n=0;n<256;++n)t.push((n+256).toString(16).slice(1));function r(e,r=0){return(t[e[r+0]]+t[e[r+1]]+t[e[r+2]]+t[e[r+3]]+"-"+t[e[r+4]]+t[e[r+5]]+"-"+t[e[r+6]]+t[e[r+7]]+"-"+t[e[r+8]]+t[e[r+9]]+"-"+t[e[r+10]]+t[e[r+11]]+t[e[r+12]]+t[e[r+13]]+t[e[r+14]]+t[e[r+15]]).toLowerCase()}return eP.unsafeStringify=r,eP.default=function(t,n=0){const a=r(t,n);if(!(0,e.default)(a))throw TypeError("Stringified UUID is invalid");return a},eP}var rP,nP,aP={},oP={};function iP(){if(rP)return oP;let e;rP=1,Object.defineProperty(oP,"__esModule",{value:!0});const t=new Uint8Array(16);return oP.default=function(){if(!e){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");e=crypto.getRandomValues.bind(crypto)}return e(t)},oP}function sP(){if(nP)return aP;nP=1,Object.defineProperty(aP,"__esModule",{value:!0}),aP.updateV1State=void 0;const e=iP(),t=tP(),r={};function n(e,t,r){return e.msecs??=-1/0,e.nsecs??=0,t===e.msecs?(e.nsecs++,e.nsecs>=1e4&&(e.node=void 0,e.nsecs=0)):t>e.msecs?e.nsecs=0:t<e.msecs&&(e.node=void 0),e.node||(e.node=r.slice(10,16),e.node[0]|=1,e.clockseq=16383&(r[8]<<8|r[9])),e.msecs=t,e}function a(e,t,r,n,a,o,i=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(o){if(i<0||i+16>o.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`)}else o=new Uint8Array(16),i=0;t??=Date.now(),r??=0,n??=16383&(e[8]<<8|e[9]),a??=e.slice(10,16);const s=(1e4*(268435455&(t+=122192928e5))+r)%4294967296;o[i++]=s>>>24&255,o[i++]=s>>>16&255,o[i++]=s>>>8&255,o[i++]=255&s;const u=t/4294967296*1e4&268435455;o[i++]=u>>>8&255,o[i++]=255&u,o[i++]=u>>>24&15|16,o[i++]=u>>>16&255,o[i++]=n>>>8|128,o[i++]=255&n;for(let c=0;c<6;++c)o[i++]=a[c];return o}return aP.updateV1State=n,aP.default=function(o,i,s){let u;const c=o?._v6??!1;if(o){const e=Object.keys(o);1===e.length&&"_v6"===e[0]&&(o=void 0)}if(o)u=a(o.random??o.rng?.()??(0,e.default)(),o.msecs,o.nsecs,o.clockseq,o.node,i,s);else{const t=Date.now(),o=(0,e.default)();n(r,t,o),u=a(o,r.msecs,r.nsecs,c?void 0:r.clockseq,c?void 0:r.node,i,s)}return i??(0,t.unsafeStringify)(u)},aP}var uP,cP={};function lP(){if(uP)return cP;uP=1,Object.defineProperty(cP,"__esModule",{value:!0});const e=Wx(),t=tP();return cP.default=function(r){const n=function(e){return Uint8Array.of((15&e[6])<<4|e[7]>>4&15,(15&e[7])<<4|(240&e[4])>>4,(15&e[4])<<4|(240&e[5])>>4,(15&e[5])<<4|(240&e[0])>>4,(15&e[0])<<4|(240&e[1])>>4,(15&e[1])<<4|(240&e[2])>>4,96|15&e[2],e[3],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}("string"==typeof r?(0,e.default)(r):r);return"string"==typeof r?(0,t.unsafeStringify)(n):n},cP}var pP,dP={},fP={};function hP(){if(pP)return fP;function e(e){return 14+(e+64>>>9<<4)+1}function t(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function r(e,r,n,a,o,i){return t((s=t(t(r,e),t(a,i)))<<(u=o)|s>>>32-u,n);var s,u}function n(e,t,n,a,o,i,s){return r(t&n|~t&a,e,t,o,i,s)}function a(e,t,n,a,o,i,s){return r(t&a|n&~a,e,t,o,i,s)}function o(e,t,n,a,o,i,s){return r(t^n^a,e,t,o,i,s)}function i(e,t,n,a,o,i,s){return r(n^(t|~a),e,t,o,i,s)}return pP=1,Object.defineProperty(fP,"__esModule",{value:!0}),fP.default=function(r){return function(e){const t=new Uint8Array(4*e.length);for(let r=0;r<4*e.length;r++)t[r]=e[r>>2]>>>r%4*8&255;return t}(function(r,s){const u=new Uint32Array(e(s)).fill(0);u.set(r),u[s>>5]|=128<<s%32,u[u.length-1]=s,r=u;let c=1732584193,l=-271733879,p=-1732584194,d=271733878;for(let e=0;e<r.length;e+=16){const s=c,u=l,f=p,h=d;c=n(c,l,p,d,r[e],7,-680876936),d=n(d,c,l,p,r[e+1],12,-389564586),p=n(p,d,c,l,r[e+2],17,606105819),l=n(l,p,d,c,r[e+3],22,-1044525330),c=n(c,l,p,d,r[e+4],7,-176418897),d=n(d,c,l,p,r[e+5],12,1200080426),p=n(p,d,c,l,r[e+6],17,-1473231341),l=n(l,p,d,c,r[e+7],22,-45705983),c=n(c,l,p,d,r[e+8],7,1770035416),d=n(d,c,l,p,r[e+9],12,-1958414417),p=n(p,d,c,l,r[e+10],17,-42063),l=n(l,p,d,c,r[e+11],22,-1990404162),c=n(c,l,p,d,r[e+12],7,1804603682),d=n(d,c,l,p,r[e+13],12,-40341101),p=n(p,d,c,l,r[e+14],17,-1502002290),l=n(l,p,d,c,r[e+15],22,1236535329),c=a(c,l,p,d,r[e+1],5,-165796510),d=a(d,c,l,p,r[e+6],9,-1069501632),p=a(p,d,c,l,r[e+11],14,643717713),l=a(l,p,d,c,r[e],20,-373897302),c=a(c,l,p,d,r[e+5],5,-701558691),d=a(d,c,l,p,r[e+10],9,38016083),p=a(p,d,c,l,r[e+15],14,-660478335),l=a(l,p,d,c,r[e+4],20,-405537848),c=a(c,l,p,d,r[e+9],5,568446438),d=a(d,c,l,p,r[e+14],9,-1019803690),p=a(p,d,c,l,r[e+3],14,-187363961),l=a(l,p,d,c,r[e+8],20,1163531501),c=a(c,l,p,d,r[e+13],5,-1444681467),d=a(d,c,l,p,r[e+2],9,-51403784),p=a(p,d,c,l,r[e+7],14,1735328473),l=a(l,p,d,c,r[e+12],20,-1926607734),c=o(c,l,p,d,r[e+5],4,-378558),d=o(d,c,l,p,r[e+8],11,-2022574463),p=o(p,d,c,l,r[e+11],16,1839030562),l=o(l,p,d,c,r[e+14],23,-35309556),c=o(c,l,p,d,r[e+1],4,-1530992060),d=o(d,c,l,p,r[e+4],11,1272893353),p=o(p,d,c,l,r[e+7],16,-155497632),l=o(l,p,d,c,r[e+10],23,-1094730640),c=o(c,l,p,d,r[e+13],4,681279174),d=o(d,c,l,p,r[e],11,-358537222),p=o(p,d,c,l,r[e+3],16,-722521979),l=o(l,p,d,c,r[e+6],23,76029189),c=o(c,l,p,d,r[e+9],4,-640364487),d=o(d,c,l,p,r[e+12],11,-421815835),p=o(p,d,c,l,r[e+15],16,530742520),l=o(l,p,d,c,r[e+2],23,-995338651),c=i(c,l,p,d,r[e],6,-198630844),d=i(d,c,l,p,r[e+7],10,1126891415),p=i(p,d,c,l,r[e+14],15,-1416354905),l=i(l,p,d,c,r[e+5],21,-57434055),c=i(c,l,p,d,r[e+12],6,1700485571),d=i(d,c,l,p,r[e+3],10,-1894986606),p=i(p,d,c,l,r[e+10],15,-1051523),l=i(l,p,d,c,r[e+1],21,-2054922799),c=i(c,l,p,d,r[e+8],6,1873313359),d=i(d,c,l,p,r[e+15],10,-30611744),p=i(p,d,c,l,r[e+6],15,-1560198380),l=i(l,p,d,c,r[e+13],21,1309151649),c=i(c,l,p,d,r[e+4],6,-145523070),d=i(d,c,l,p,r[e+11],10,-1120210379),p=i(p,d,c,l,r[e+2],15,718787259),l=i(l,p,d,c,r[e+9],21,-343485551),c=t(c,s),l=t(l,u),p=t(p,f),d=t(d,h)}return Uint32Array.of(c,l,p,d)}(function(t){if(0===t.length)return new Uint32Array;const r=new Uint32Array(e(8*t.length)).fill(0);for(let e=0;e<t.length;e++)r[e>>2]|=(255&t[e])<<e%4*8;return r}(r),8*r.length))},fP}var yP,gP,mP={};function bP(){if(yP)return mP;yP=1,Object.defineProperty(mP,"__esModule",{value:!0}),mP.URL=mP.DNS=mP.stringToBytes=void 0;const e=Wx(),t=tP();function r(e){e=unescape(encodeURIComponent(e));const t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r);return t}return mP.stringToBytes=r,mP.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",mP.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",mP.default=function(n,a,o,i,s,u){const c="string"==typeof o?r(o):o,l="string"==typeof i?(0,e.default)(i):i;if("string"==typeof i&&(i=(0,e.default)(i)),16!==i?.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let p=new Uint8Array(16+c.length);if(p.set(l),p.set(c,l.length),p=a(p),p[6]=15&p[6]|n,p[8]=63&p[8]|128,s){u=u||0;for(let e=0;e<16;++e)s[u+e]=p[e];return s}return(0,t.unsafeStringify)(p)},mP}var vP,_P,OP={},TP={};function wP(){if(_P)return OP;_P=1,Object.defineProperty(OP,"__esModule",{value:!0});const e=function(){if(vP)return TP;vP=1,Object.defineProperty(TP,"__esModule",{value:!0});const e="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);return TP.default={randomUUID:e},TP}(),t=iP(),r=tP();return OP.default=function(n,a,o){if(e.default.randomUUID&&!a&&!n)return e.default.randomUUID();const i=(n=n||{}).random??n.rng?.()??(0,t.default)();if(i.length<16)throw new Error("Random bytes length must be >= 16");if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,a){if((o=o||0)<0||o+16>a.length)throw new RangeError(`UUID byte range ${o}:${o+15} is out of buffer bounds`);for(let e=0;e<16;++e)a[o+e]=i[e];return a}return(0,r.unsafeStringify)(i)},OP}var SP,jP,AP={},FP={};function EP(){return jP||(jP=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.URL=e.DNS=void 0;const t=function(){if(SP)return FP;function e(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function t(e,t){return e<<t|e>>>32-t}return SP=1,Object.defineProperty(FP,"__esModule",{value:!0}),FP.default=function(r){const n=[1518500249,1859775393,2400959708,3395469782],a=[1732584193,4023233417,2562383102,271733878,3285377520],o=new Uint8Array(r.length+1);o.set(r),o[r.length]=128;const i=(r=o).length/4+2,s=Math.ceil(i/16),u=new Array(s);for(let e=0;e<s;++e){const t=new Uint32Array(16);for(let n=0;n<16;++n)t[n]=r[64*e+4*n]<<24|r[64*e+4*n+1]<<16|r[64*e+4*n+2]<<8|r[64*e+4*n+3];u[e]=t}u[s-1][14]=8*(r.length-1)/Math.pow(2,32),u[s-1][14]=Math.floor(u[s-1][14]),u[s-1][15]=8*(r.length-1)&4294967295;for(let c=0;c<s;++c){const r=new Uint32Array(80);for(let e=0;e<16;++e)r[e]=u[c][e];for(let e=16;e<80;++e)r[e]=t(r[e-3]^r[e-8]^r[e-14]^r[e-16],1);let o=a[0],i=a[1],s=a[2],l=a[3],p=a[4];for(let a=0;a<80;++a){const u=Math.floor(a/20),c=t(o,5)+e(u,i,s,l)+p+n[u]+r[a]>>>0;p=l,l=s,s=t(i,30)>>>0,i=o,o=c}a[0]=a[0]+o>>>0,a[1]=a[1]+i>>>0,a[2]=a[2]+s>>>0,a[3]=a[3]+l>>>0,a[4]=a[4]+p>>>0}return Uint8Array.of(a[0]>>24,a[0]>>16,a[0]>>8,a[0],a[1]>>24,a[1]>>16,a[1]>>8,a[1],a[2]>>24,a[2]>>16,a[2]>>8,a[2],a[3]>>24,a[3]>>16,a[3]>>8,a[3],a[4]>>24,a[4]>>16,a[4]>>8,a[4])},FP}(),r=bP();var n=bP();function a(e,n,a,o){return(0,r.default)(80,t.default,e,n,a,o)}Object.defineProperty(e,"DNS",{enumerable:!0,get:function(){return n.DNS}}),Object.defineProperty(e,"URL",{enumerable:!0,get:function(){return n.URL}}),a.DNS=r.DNS,a.URL=r.URL,e.default=a}(AP)),AP}var xP,PP={};var DP,MP={};function NP(){if(DP)return MP;DP=1,Object.defineProperty(MP,"__esModule",{value:!0});const e=Wx(),t=tP();return MP.default=function(r){const n=function(e){return Uint8Array.of((15&e[3])<<4|e[4]>>4&15,(15&e[4])<<4|(240&e[5])>>4,(15&e[5])<<4|15&e[6],e[7],(15&e[1])<<4|(240&e[2])>>4,(15&e[2])<<4|(240&e[3])>>4,16|(240&e[0])>>4,(15&e[0])<<4|(240&e[1])>>4,e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}("string"==typeof r?(0,e.default)(r):r);return"string"==typeof r?(0,t.unsafeStringify)(n):n},MP}var IP,RP={};var LP,CP,BP,qP,UP,kP={};function QP(){return CP||(CP=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.version=e.validate=e.v7=e.v6ToV1=e.v6=e.v5=e.v4=e.v3=e.v1ToV6=e.v1=e.stringify=e.parse=e.NIL=e.MAX=void 0;var t=(Cx||(Cx=1,Object.defineProperty(Qx,"__esModule",{value:!0}),Qx.default="ffffffff-ffff-ffff-ffff-ffffffffffff"),Qx);Object.defineProperty(e,"MAX",{enumerable:!0,get:function(){return t.default}});var r=(Vx||(Vx=1,Object.defineProperty(Gx,"__esModule",{value:!0}),Gx.default="00000000-0000-0000-0000-000000000000"),Gx);Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return r.default}});var n=Wx();Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return n.default}});var a=tP();Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return a.default}});var o=sP();Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return o.default}});var i=lP();Object.defineProperty(e,"v1ToV6",{enumerable:!0,get:function(){return i.default}});var s=(gP||(gP=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.URL=e.DNS=void 0;const t=hP(),r=bP();var n=bP();function a(e,n,a,o){return(0,r.default)(48,t.default,e,n,a,o)}Object.defineProperty(e,"DNS",{enumerable:!0,get:function(){return n.DNS}}),Object.defineProperty(e,"URL",{enumerable:!0,get:function(){return n.URL}}),a.DNS=r.DNS,a.URL=r.URL,e.default=a}(dP)),dP);Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return s.default}});var u=wP();Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return u.default}});var c=EP();Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return c.default}});var l=function(){if(xP)return PP;xP=1,Object.defineProperty(PP,"__esModule",{value:!0});const e=tP(),t=sP(),r=lP();return PP.default=function(n,a,o){n??={},o??=0;let i=(0,t.default)({...n,_v6:!0},new Uint8Array(16));if(i=(0,r.default)(i),a){for(let e=0;e<16;e++)a[o+e]=i[e];return a}return(0,e.unsafeStringify)(i)},PP}();Object.defineProperty(e,"v6",{enumerable:!0,get:function(){return l.default}});var p=NP();Object.defineProperty(e,"v6ToV1",{enumerable:!0,get:function(){return p.default}});var d=function(){if(IP)return RP;IP=1,Object.defineProperty(RP,"__esModule",{value:!0}),RP.updateV7State=void 0;const e=iP(),t=tP(),r={};function n(e,t,r){return e.msecs??=-1/0,e.seq??=0,t>e.msecs?(e.seq=r[6]<<23|r[7]<<16|r[8]<<8|r[9],e.msecs=t):(e.seq=e.seq+1|0,0===e.seq&&e.msecs++),e}function a(e,t,r,n,a=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(n){if(a<0||a+16>n.length)throw new RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`)}else n=new Uint8Array(16),a=0;return t??=Date.now(),r??=127*e[6]<<24|e[7]<<16|e[8]<<8|e[9],n[a++]=t/1099511627776&255,n[a++]=t/4294967296&255,n[a++]=t/16777216&255,n[a++]=t/65536&255,n[a++]=t/256&255,n[a++]=255&t,n[a++]=112|r>>>28&15,n[a++]=r>>>20&255,n[a++]=128|r>>>14&63,n[a++]=r>>>6&255,n[a++]=r<<2&255|3&e[10],n[a++]=e[11],n[a++]=e[12],n[a++]=e[13],n[a++]=e[14],n[a++]=e[15],n}return RP.updateV7State=n,RP.default=function(o,i,s){let u;if(o)u=a(o.random??o.rng?.()??(0,e.default)(),o.msecs,o.seq,i,s);else{const t=Date.now(),o=(0,e.default)();n(r,t,o),u=a(o,r.msecs,r.seq,i,s)}return i??(0,t.unsafeStringify)(u)},RP}();Object.defineProperty(e,"v7",{enumerable:!0,get:function(){return d.default}});var f=Yx();Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return f.default}});var h=function(){if(LP)return kP;LP=1,Object.defineProperty(kP,"__esModule",{value:!0});const e=Yx();return kP.default=function(t){if(!(0,e.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)},kP}();Object.defineProperty(e,"version",{enumerable:!0,get:function(){return h.default}})}(kx)),kx}function VP(){if(BP)return Ux;BP=1,Object.defineProperty(Ux,"__esModule",{value:!0}),Ux.TermFunctionStrUuid=void 0;const e=Ad(),t=Sd(),r=QP();let n=class extends e.TermFunctionBase{constructor(){super({arity:0,operator:t.SparqlOperator.STRUUID,overloads:(0,t.declare)(t.SparqlOperator.STRUUID).set([],()=>()=>(0,t.string)(r.v4())).collect()})}};return Ux.TermFunctionStrUuid=n,Ux}function GP(){if(qP)return qx;qP=1,Object.defineProperty(qx,"__esModule",{value:!0}),qx.ActorFunctionFactoryTermStrUuid=void 0;const e=Ad(),t=Sd(),r=VP();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.STRUUID],termFunction:!0})}async run(e){return new r.TermFunctionStrUuid}};return qx.ActorFunctionFactoryTermStrUuid=n,qx}function $P(){return UP||(UP=1,e=Bx,t=Bx&&Bx.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Bx&&Bx.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(GP(),e)),Bx;var e,t,r}var zP,XP,HP,JP={},KP={},YP={};function WP(){if(zP)return YP;zP=1,Object.defineProperty(YP,"__esModule",{value:!0}),YP.TermFunctionSubStr=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:[2,3],operator:t.SparqlOperator.SUBSTR,overloads:(0,t.declare)(t.SparqlOperator.SUBSTR).onBinaryTyped([t.TypeURL.XSD_STRING,t.TypeURL.XSD_INTEGER],()=>(e,r)=>(0,t.string)([...e].slice(r-1).join(""))).onBinary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.XSD_INTEGER],()=>(e,r)=>{const n=[...e.typedValue].slice(r.typedValue-1).join("");return(0,t.langString)(n,e.language)}).onTernaryTyped([t.TypeURL.XSD_STRING,t.TypeURL.XSD_INTEGER,t.TypeURL.XSD_INTEGER],()=>(e,r,n)=>(0,t.string)([...e].slice(r-1,n+r-1).join(""))).onTernary([t.TypeURL.RDF_LANG_STRING,t.TypeURL.XSD_INTEGER,t.TypeURL.XSD_INTEGER],()=>(e,r,n)=>{const a=[...e.typedValue].slice(r.typedValue-1,n.typedValue+r.typedValue-1).join("");return(0,t.langString)(a,e.language)}).collect()})}};return YP.TermFunctionSubStr=r,YP}function ZP(){if(XP)return KP;XP=1,Object.defineProperty(KP,"__esModule",{value:!0}),KP.ActorFunctionFactoryTermSubStr=void 0;const e=Ad(),t=Sd(),r=WP();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SUBSTR],termFunction:!0})}async run(e){return new r.TermFunctionSubStr}};return KP.ActorFunctionFactoryTermSubStr=n,KP}function eD(){return HP||(HP=1,e=JP,t=JP&&JP.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=JP&&JP.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(ZP(),e)),JP;var e,t,r}var tD,rD,nD,aD={},oD={},iD={};function sD(){if(tD)return iD;tD=1,Object.defineProperty(iD,"__esModule",{value:!0}),iD.TermFunctionTimezone=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.TIMEZONE,overloads:(0,t.declare)(t.SparqlOperator.TIMEZONE).onDateTime1(()=>e=>{const r={hours:e.typedValue.zoneHours,minutes:e.typedValue.zoneMinutes};if(void 0===r.hours&&void 0===r.minutes)throw new t.InvalidTimezoneCall(e.str());return new t.DayTimeDurationLiteral(r)}).copy({from:[t.TypeURL.XSD_DATE_TIME],to:[t.TypeURL.XSD_DATE]}).copy({from:[t.TypeURL.XSD_DATE_TIME],to:[t.TypeURL.XSD_TIME]}).collect()})}};return iD.TermFunctionTimezone=r,iD}function uD(){if(rD)return oD;rD=1,Object.defineProperty(oD,"__esModule",{value:!0}),oD.ActorFunctionFactoryTermTimezone=void 0;const e=Ad(),t=Sd(),r=sD();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.TIMEZONE],termFunction:!0})}async run(e){return new r.TermFunctionTimezone}};return oD.ActorFunctionFactoryTermTimezone=n,oD}function cD(){return nD||(nD=1,e=aD,t=aD&&aD.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=aD&&aD.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(uD(),e)),aD;var e,t,r}var lD,pD,dD,fD={},hD={},yD={};function gD(){if(lD)return yD;lD=1,Object.defineProperty(yD,"__esModule",{value:!0}),yD.TermFunctionSubtraction=void 0;const e=Ad(),t=ls(),r=Sd(),n=qO();let a=class extends e.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.SUBTRACTION,overloads:(0,r.declare)(r.SparqlOperator.SUBTRACTION).arithmetic(()=>(e,t)=>new n.BigNumber(e).minus(t).toNumber()).set([r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_DATE_TIME],e=>([n,a])=>new r.DayTimeDurationLiteral((0,r.elapsedDuration)(n.typedValue,a.typedValue,e.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)))).copy({from:[r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_DATE_TIME],to:[r.TypeURL.XSD_DATE,r.TypeURL.XSD_DATE]}).copy({from:[r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_DATE_TIME],to:[r.TypeURL.XSD_TIME,r.TypeURL.XSD_TIME]}).set([r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,t])=>new r.DateTimeLiteral((0,r.addDurationToDateTime)(e.typedValue,(0,r.defaultedDurationRepresentation)((0,r.negateDuration)(t.typedValue))))).copy({from:[r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_DAY_TIME_DURATION],to:[r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([r.TypeURL.XSD_DATE,r.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,t])=>new r.DateLiteral((0,r.addDurationToDateTime)((0,r.defaultedDateTimeRepresentation)(e.typedValue),(0,r.defaultedDurationRepresentation)((0,r.negateDuration)(t.typedValue))))).copy({from:[r.TypeURL.XSD_DATE,r.TypeURL.XSD_DAY_TIME_DURATION],to:[r.TypeURL.XSD_DATE,r.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([r.TypeURL.XSD_TIME,r.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,t])=>new r.TimeLiteral((0,r.addDurationToDateTime)((0,r.defaultedDateTimeRepresentation)(e.typedValue),(0,r.defaultedDurationRepresentation)((0,r.negateDuration)(t.typedValue))))).collect()})}};return yD.TermFunctionSubtraction=a,yD}function mD(){if(pD)return hD;pD=1,Object.defineProperty(hD,"__esModule",{value:!0}),hD.ActorFunctionFactoryTermSubtraction=void 0;const e=Ad(),t=Sd(),r=gD();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SUBTRACTION],termFunction:!0})}async run(e){return new r.TermFunctionSubtraction}};return hD.ActorFunctionFactoryTermSubtraction=n,hD}function bD(){return dD||(dD=1,e=fD,t=fD&&fD.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=fD&&fD.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(mD(),e)),fD;var e,t,r}var vD,_D,OD,TD={},wD={},SD={};function jD(){if(vD)return SD;vD=1,Object.defineProperty(SD,"__esModule",{value:!0}),SD.TermFunctionSubject=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.SUBJECT,overloads:(0,t.declare)(t.SparqlOperator.SUBJECT).onQuad1(()=>e=>e.subject).collect()})}};return SD.TermFunctionSubject=r,SD}function AD(){if(_D)return wD;_D=1,Object.defineProperty(wD,"__esModule",{value:!0}),wD.ActorFunctionFactoryTermSubject=void 0;const e=Ad(),t=Sd(),r=jD();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.SUBJECT],termFunction:!0})}async run(e){return new r.TermFunctionSubject}};return wD.ActorFunctionFactoryTermSubject=n,wD}function FD(){return OD||(OD=1,e=TD,t=TD&&TD.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=TD&&TD.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(AD(),e)),TD;var e,t,r}var ED,xD,PD,DD={},MD={},ND={};function ID(){if(ED)return ND;ED=1,Object.defineProperty(ND,"__esModule",{value:!0}),ND.TermFunctionTz=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.TZ,overloads:(0,t.declare)(t.SparqlOperator.TZ).onDateTime1(()=>e=>(0,t.string)((0,t.extractRawTimeZone)(e.str()))).copy({from:[t.TypeURL.XSD_DATE_TIME],to:[t.TypeURL.XSD_DATE]}).copy({from:[t.TypeURL.XSD_DATE_TIME],to:[t.TypeURL.XSD_TIME]}).collect()})}};return ND.TermFunctionTz=r,ND}function RD(){if(xD)return MD;xD=1,Object.defineProperty(MD,"__esModule",{value:!0}),MD.ActorFunctionFactoryTermTz=void 0;const e=Ad(),t=Sd(),r=ID();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.TZ],termFunction:!0})}async run(e){return new r.TermFunctionTz}};return MD.ActorFunctionFactoryTermTz=n,MD}function LD(){return PD||(PD=1,e=DD,t=DD&&DD.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=DD&&DD.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(RD(),e)),DD;var e,t,r}var CD,BD,qD,UD={},kD={},QD={};function VD(){if(CD)return QD;CD=1,Object.defineProperty(QD,"__esModule",{value:!0}),QD.TermFunctionUnaryMinus=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.UMINUS,overloads:(0,t.declare)(t.SparqlOperator.UMINUS).numericConverter(()=>e=>-e).collect()})}};return QD.TermFunctionUnaryMinus=r,QD}function GD(){if(BD)return kD;BD=1,Object.defineProperty(kD,"__esModule",{value:!0}),kD.ActorFunctionFactoryTermUnaryMinus=void 0;const e=Ad(),t=Sd(),r=VD();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.UMINUS],termFunction:!0})}async run(e){return new r.TermFunctionUnaryMinus}};return kD.ActorFunctionFactoryTermUnaryMinus=n,kD}function $D(){return qD||(qD=1,e=UD,t=UD&&UD.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=UD&&UD.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(GD(),e)),UD;var e,t,r}var zD,XD,HD,JD={},KD={},YD={};function WD(){if(zD)return YD;zD=1,Object.defineProperty(YD,"__esModule",{value:!0}),YD.TermFunctionUnaryPlus=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.UPLUS,overloads:(0,t.declare)(t.SparqlOperator.UPLUS).numericConverter(()=>e=>e).collect()})}};return YD.TermFunctionUnaryPlus=r,YD}function ZD(){if(XD)return KD;XD=1,Object.defineProperty(KD,"__esModule",{value:!0}),KD.ActorFunctionFactoryTermUnaryPlus=void 0;const e=Ad(),t=Sd(),r=WD();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.UPLUS],termFunction:!0})}async run(e){return new r.TermFunctionUnaryPlus}};return KD.ActorFunctionFactoryTermUnaryPlus=n,KD}function eM(){return HD||(HD=1,e=JD,t=JD&&JD.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=JD&&JD.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(ZD(),e)),JD;var e,t,r}var tM,rM,nM,aM={},oM={},iM={};function sM(){if(tM)return iM;tM=1,Object.defineProperty(iM,"__esModule",{value:!0}),iM.TermFunctionTriple=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:3,operator:t.SparqlOperator.TRIPLE,overloads:(0,t.declare)(t.SparqlOperator.TRIPLE).onTerm3(e=>(...e)=>new t.Quad(e[0],e[1],e[2],new t.DefaultGraph)).collect()})}};return iM.TermFunctionTriple=r,iM}function uM(){if(rM)return oM;rM=1,Object.defineProperty(oM,"__esModule",{value:!0}),oM.ActorFunctionFactoryTermTriple=void 0;const e=Ad(),t=Sd(),r=sM();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.TRIPLE],termFunction:!0})}async run(e){return new r.TermFunctionTriple}};return oM.ActorFunctionFactoryTermTriple=n,oM}function cM(){return nM||(nM=1,e=aM,t=aM&&aM.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=aM&&aM.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(uM(),e)),aM;var e,t,r}var lM,pM,dM,fM={},hM={},yM={};function gM(){if(lM)return yM;lM=1,Object.defineProperty(yM,"__esModule",{value:!0}),yM.TermFunctionUcase=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.UCASE,overloads:(0,t.declare)(t.SparqlOperator.UCASE).onString1Typed(()=>e=>(0,t.string)(e.toUpperCase())).onLangString1(()=>e=>(0,t.langString)(e.typedValue.toUpperCase(),e.language)).collect()})}};return yM.TermFunctionUcase=r,yM}function mM(){if(pM)return hM;pM=1,Object.defineProperty(hM,"__esModule",{value:!0}),hM.ActorFunctionFactoryTermUcase=void 0;const e=Ad(),t=Sd(),r=gM();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.UCASE],termFunction:!0})}async run(e){return new r.TermFunctionUcase}};return hM.ActorFunctionFactoryTermUcase=n,hM}function bM(){return dM||(dM=1,e=fM,t=fM&&fM.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=fM&&fM.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(mM(),e)),fM;var e,t,r}var vM,_M,OM,TM={},wM={},SM={};function jM(){if(vM)return SM;vM=1,Object.defineProperty(SM,"__esModule",{value:!0}),SM.TermFunctionUuid=void 0;const e=Ad(),t=Sd(),r=QP();let n=class extends e.TermFunctionBase{constructor(){super({arity:0,operator:t.SparqlOperator.UUID,overloads:(0,t.declare)(t.SparqlOperator.UUID).set([],()=>()=>new t.NamedNode(`urn:uuid:${r.v4()}`)).collect()})}};return SM.TermFunctionUuid=n,SM}function AM(){if(_M)return wM;_M=1,Object.defineProperty(wM,"__esModule",{value:!0}),wM.ActorFunctionFactoryTermUuid=void 0;const e=Ad(),t=Sd(),r=jM();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.UUID],termFunction:!0})}async run(e){return new r.TermFunctionUuid}};return wM.ActorFunctionFactoryTermUuid=n,wM}function FM(){return OM||(OM=1,e=TM,t=TM&&TM.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=TM&&TM.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(AM(),e)),TM;var e,t,r}var EM,xM,PM,DM={},MM={},NM={};function IM(){if(EM)return NM;EM=1,Object.defineProperty(NM,"__esModule",{value:!0}),NM.TermFunctionXsdToBoolean=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_BOOLEAN,overloads:(0,t.declare)(t.TypeURL.XSD_BOOLEAN).onNumeric1(()=>e=>(0,t.bool)(e.coerceEBV()),!0).onUnary(t.TypeURL.XSD_BOOLEAN,()=>e=>(0,t.bool)(e.coerceEBV()),!0).onUnary(t.TypeURL.XSD_STRING,()=>e=>{switch(e.str()){case"true":case"1":return(0,t.bool)(!0);case"false":case"0":return(0,t.bool)(!1);default:throw new t.CastError(e,t.TypeURL.XSD_BOOLEAN)}},!1).collect()})}};return NM.TermFunctionXsdToBoolean=r,NM}function RM(){if(xM)return MM;xM=1,Object.defineProperty(MM,"__esModule",{value:!0}),MM.ActorFunctionFactoryTermXsdToBoolean=void 0;const e=Ad(),t=Sd(),r=IM();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_BOOLEAN],termFunction:!0})}async run(e){return new r.TermFunctionXsdToBoolean}};return MM.ActorFunctionFactoryTermXsdToBoolean=n,MM}function LM(){return PM||(PM=1,e=DM,t=DM&&DM.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=DM&&DM.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(RM(),e)),DM;var e,t,r}var CM,BM,qM,UM={},kM={},QM={};function VM(){if(CM)return QM;CM=1,Object.defineProperty(QM,"__esModule",{value:!0}),QM.TermFunctionXsdToDate=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_DATE,overloads:(0,t.declare)(t.TypeURL.XSD_DATE).onUnary(t.TypeURL.XSD_DATE,()=>e=>new t.DateLiteral(e.typedValue,e.strValue)).onUnary(t.TypeURL.XSD_DATE_TIME,()=>e=>new t.DateLiteral(e.typedValue)).onStringly1(()=>e=>new t.DateLiteral((0,t.parseDate)(e.str()))).collect()})}};return QM.TermFunctionXsdToDate=r,QM}function GM(){if(BM)return kM;BM=1,Object.defineProperty(kM,"__esModule",{value:!0}),kM.ActorFunctionFactoryTermXsdToDate=void 0;const e=Ad(),t=Sd(),r=VM();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_DATE],termFunction:!0})}async run(e){return new r.TermFunctionXsdToDate}};return kM.ActorFunctionFactoryTermXsdToDate=n,kM}function $M(){return qM||(qM=1,e=UM,t=UM&&UM.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=UM&&UM.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(GM(),e)),UM;var e,t,r}var zM,XM,HM,JM={},KM={},YM={};function WM(){if(zM)return YM;zM=1,Object.defineProperty(YM,"__esModule",{value:!0}),YM.TermFunctionXsdToDecimal=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_DECIMAL,overloads:(0,t.declare)(t.TypeURL.XSD_DECIMAL).onNumeric1(()=>e=>{const r=(0,t.parseXSDDecimal)(e.str());if(void 0===r)throw new t.CastError(e,t.TypeURL.XSD_DECIMAL);return(0,t.decimal)(r)}).onString1(()=>e=>{const r=e.str(),n=/^([+-])?(\d+(\.\d+)?)$/u.test(r)?(0,t.parseXSDDecimal)(r):void 0;if(void 0===n)throw new t.CastError(e,t.TypeURL.XSD_DECIMAL);return(0,t.decimal)(n)},!1).onBoolean1Typed(()=>e=>(0,t.decimal)(e?1:0)).collect()})}};return YM.TermFunctionXsdToDecimal=r,YM}function ZM(){if(XM)return KM;XM=1,Object.defineProperty(KM,"__esModule",{value:!0}),KM.ActorFunctionFactoryTermXsdToDecimal=void 0;const e=Ad(),t=Sd(),r=WM();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_DECIMAL],termFunction:!0})}async run(e){return new r.TermFunctionXsdToDecimal}};return KM.ActorFunctionFactoryTermXsdToDecimal=n,KM}function eN(){return HM||(HM=1,e=JM,t=JM&&JM.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=JM&&JM.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(ZM(),e)),JM;var e,t,r}var tN,rN,nN,aN={},oN={},iN={};function sN(){if(tN)return iN;tN=1,Object.defineProperty(iN,"__esModule",{value:!0}),iN.TermFunctionXsdToDuration=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_DAY_TIME_DURATION,overloads:(0,t.declare)(t.TypeURL.XSD_DURATION).onUnary(t.TypeURL.XSD_DURATION,()=>e=>new t.DurationLiteral(e.typedValue,e.strValue)).onStringly1(()=>e=>new t.DurationLiteral((0,t.parseDuration)(e.str()))).collect()})}};return iN.TermFunctionXsdToDuration=r,iN}function uN(){if(rN)return oN;rN=1,Object.defineProperty(oN,"__esModule",{value:!0}),oN.ActorFunctionFactoryTermXsdToDuration=void 0;const e=Ad(),t=Sd(),r=sN();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_DURATION],termFunction:!0})}async run(e){return new r.TermFunctionXsdToDuration}};return oN.ActorFunctionFactoryTermXsdToDuration=n,oN}function cN(){return nN||(nN=1,e=aN,t=aN&&aN.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=aN&&aN.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(uN(),e)),aN;var e,t,r}var lN,pN,dN,fN={},hN={},yN={};function gN(){if(lN)return yN;lN=1,Object.defineProperty(yN,"__esModule",{value:!0}),yN.TermFunctionXsdToDayTimeDuration=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_DAY_TIME_DURATION,overloads:(0,t.declare)(t.TypeURL.XSD_DAY_TIME_DURATION).onUnary(t.TypeURL.XSD_DURATION,()=>e=>new t.DayTimeDurationLiteral((0,t.trimToDayTimeDuration)(e.typedValue))).onStringly1(()=>e=>new t.DayTimeDurationLiteral((0,t.parseDayTimeDuration)(e.str()))).collect()})}};return yN.TermFunctionXsdToDayTimeDuration=r,yN}function mN(){if(pN)return hN;pN=1,Object.defineProperty(hN,"__esModule",{value:!0}),hN.ActorFunctionFactoryTermXsdToDayTimeDuration=void 0;const e=Ad(),t=Sd(),r=gN();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_DAY_TIME_DURATION],termFunction:!0})}async run(e){return new r.TermFunctionXsdToDayTimeDuration}};return hN.ActorFunctionFactoryTermXsdToDayTimeDuration=n,hN}function bN(){return dN||(dN=1,e=fN,t=fN&&fN.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=fN&&fN.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(mN(),e)),fN;var e,t,r}var vN,_N,ON,TN={},wN={},SN={};function jN(){if(vN)return SN;vN=1,Object.defineProperty(SN,"__esModule",{value:!0}),SN.TermFunctionXsdToDouble=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_DOUBLE,overloads:(0,t.declare)(t.TypeURL.XSD_DOUBLE).onNumeric1(()=>e=>(0,t.double)(e.typedValue)).onBoolean1Typed(()=>e=>(0,t.double)(e?1:0)).onUnary(t.TypeURL.XSD_STRING,()=>e=>{const r=(0,t.parseXSDFloat)(e.str());if(void 0===r)throw new t.CastError(e,t.TypeURL.XSD_DOUBLE);return(0,t.double)(r)},!1).collect()})}};return SN.TermFunctionXsdToDouble=r,SN}function AN(){if(_N)return wN;_N=1,Object.defineProperty(wN,"__esModule",{value:!0}),wN.ActorFunctionFactoryTermXsdToDouble=void 0;const e=Ad(),t=Sd(),r=jN();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_DOUBLE],termFunction:!0})}async run(e){return new r.TermFunctionXsdToDouble}};return wN.ActorFunctionFactoryTermXsdToDouble=n,wN}function FN(){return ON||(ON=1,e=TN,t=TN&&TN.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=TN&&TN.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(AN(),e)),TN;var e,t,r}var EN,xN,PN,DN={},MN={},NN={};function IN(){if(EN)return NN;EN=1,Object.defineProperty(NN,"__esModule",{value:!0}),NN.TermFunctionXsdToFloat=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_FLOAT,overloads:(0,t.declare)(t.TypeURL.XSD_FLOAT).onNumeric1(()=>e=>(0,t.float)(e.typedValue)).onBoolean1Typed(()=>e=>(0,t.float)(e?1:0)).onUnary(t.TypeURL.XSD_STRING,()=>e=>{const r=(0,t.parseXSDFloat)(e.str());if(void 0===r)throw new t.CastError(e,t.TypeURL.XSD_FLOAT);return(0,t.float)(r)},!1).collect()})}};return NN.TermFunctionXsdToFloat=r,NN}function RN(){if(xN)return MN;xN=1,Object.defineProperty(MN,"__esModule",{value:!0}),MN.ActorFunctionFactoryTermXsdToFloat=void 0;const e=Ad(),t=Sd(),r=IN();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_FLOAT],termFunction:!0})}async run(e){return new r.TermFunctionXsdToFloat}};return MN.ActorFunctionFactoryTermXsdToFloat=n,MN}function LN(){return PN||(PN=1,e=DN,t=DN&&DN.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=DN&&DN.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(RN(),e)),DN;var e,t,r}var CN,BN,qN,UN={},kN={},QN={};function VN(){if(CN)return QN;CN=1,Object.defineProperty(QN,"__esModule",{value:!0}),QN.TermFunctionXsdToDatetime=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_DATE_TIME,overloads:(0,t.declare)(t.TypeURL.XSD_DATE_TIME).onUnary(t.TypeURL.XSD_DATE_TIME,()=>e=>e).onUnary(t.TypeURL.XSD_STRING,()=>e=>(0,t.dateTime)((0,t.parseDateTime)(e.str()),e.str()),!1).onUnary(t.TypeURL.XSD_DATE,()=>e=>new t.DateTimeLiteral({...e.typedValue,hours:0,minutes:0,seconds:0})).collect()})}};return QN.TermFunctionXsdToDatetime=r,QN}function GN(){if(BN)return kN;BN=1,Object.defineProperty(kN,"__esModule",{value:!0}),kN.ActorFunctionFactoryTermXsdToDatetime=void 0;const e=Ad(),t=Sd(),r=VN();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_DATE_TIME],termFunction:!0})}async run(e){return new r.TermFunctionXsdToDatetime}};return kN.ActorFunctionFactoryTermXsdToDatetime=n,kN}function $N(){return qN||(qN=1,e=UN,t=UN&&UN.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=UN&&UN.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(GN(),e)),UN;var e,t,r}var zN,XN,HN,JN={},KN={},YN={};function WN(){if(zN)return YN;zN=1,Object.defineProperty(YN,"__esModule",{value:!0}),YN.TermFunctionXsdToInteger=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_INTEGER,overloads:(0,t.declare)(t.TypeURL.XSD_INTEGER).onBoolean1Typed(()=>e=>(0,t.integer)(e?1:0)).onNumeric1(()=>e=>{if(!Number.isFinite(e.typedValue))throw new t.CastError(e,t.TypeURL.XSD_INTEGER);return(0,t.integer)(Math.trunc(e.typedValue))}).onString1(()=>e=>{const r=e.str(),n=/^\d+$/u.test(r)?Number.parseInt(r,10):void 0;if(void 0===n)throw new t.CastError(e,t.TypeURL.XSD_INTEGER);return(0,t.integer)(n)}).collect()})}};return YN.TermFunctionXsdToInteger=r,YN}function ZN(){if(XN)return KN;XN=1,Object.defineProperty(KN,"__esModule",{value:!0}),KN.ActorFunctionFactoryTermXsdToInteger=void 0;const e=Ad(),t=Sd(),r=WN();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_INTEGER],termFunction:!0})}async run(e){return new r.TermFunctionXsdToInteger}};return KN.ActorFunctionFactoryTermXsdToInteger=n,KN}function eI(){return HN||(HN=1,e=JN,t=JN&&JN.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=JN&&JN.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(ZN(),e)),JN;var e,t,r}var tI,rI,nI,aI={},oI={},iI={};function sI(){if(tI)return iI;tI=1,Object.defineProperty(iI,"__esModule",{value:!0}),iI.TermFunctionXsdToString=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_STRING,overloads:(0,t.declare)(t.TypeURL.XSD_STRING).onNumeric1(()=>e=>(0,t.string)((0,t.float)(e.typedValue).str())).onBoolean1Typed(()=>e=>(0,t.string)((0,t.bool)(e).str())).onTerm1(()=>e=>(0,t.string)(e.str())).collect()})}};return iI.TermFunctionXsdToString=r,iI}function uI(){if(rI)return oI;rI=1,Object.defineProperty(oI,"__esModule",{value:!0}),oI.ActorFunctionFactoryTermXsdToString=void 0;const e=Ad(),t=Sd(),r=sI();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_STRING],termFunction:!0})}async run(e){return new r.TermFunctionXsdToString}};return oI.ActorFunctionFactoryTermXsdToString=n,oI}function cI(){return nI||(nI=1,e=aI,t=aI&&aI.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=aI&&aI.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(uI(),e)),aI;var e,t,r}var lI,pI,dI,fI={},hI={},yI={};function gI(){if(lI)return yI;lI=1,Object.defineProperty(yI,"__esModule",{value:!0}),yI.TermFunctionXsdToYearMonthDuration=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_YEAR_MONTH_DURATION,overloads:(0,t.declare)(t.TypeURL.XSD_YEAR_MONTH_DURATION).onUnary(t.TypeURL.XSD_DURATION,()=>e=>new t.YearMonthDurationLiteral((0,t.trimToYearMonthDuration)(e.typedValue))).onStringly1(()=>e=>new t.YearMonthDurationLiteral((0,t.parseYearMonthDuration)(e.str()))).collect()})}};return yI.TermFunctionXsdToYearMonthDuration=r,yI}function mI(){if(pI)return hI;pI=1,Object.defineProperty(hI,"__esModule",{value:!0}),hI.ActorFunctionFactoryTermXsdToYearMonthDuration=void 0;const e=Ad(),t=Sd(),r=gI();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_YEAR_MONTH_DURATION],termFunction:!0})}async run(e){return new r.TermFunctionXsdToYearMonthDuration}};return hI.ActorFunctionFactoryTermXsdToYearMonthDuration=n,hI}function bI(){return dI||(dI=1,e=fI,t=fI&&fI.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=fI&&fI.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(mI(),e)),fI;var e,t,r}var vI,_I,OI,TI={},wI={},SI={};function jI(){if(vI)return SI;vI=1,Object.defineProperty(SI,"__esModule",{value:!0}),SI.TermFunctionXsdToTime=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.TypeURL.XSD_TIME,overloads:(0,t.declare)(t.TypeURL.XSD_TIME).onUnary(t.TypeURL.XSD_TIME,()=>e=>new t.TimeLiteral(e.typedValue,e.strValue)).onUnary(t.TypeURL.XSD_DATE_TIME,()=>e=>new t.TimeLiteral(e.typedValue)).onStringly1(()=>e=>new t.TimeLiteral((0,t.parseTime)(e.str()))).collect()})}};return SI.TermFunctionXsdToTime=r,SI}function AI(){if(_I)return wI;_I=1,Object.defineProperty(wI,"__esModule",{value:!0}),wI.ActorFunctionFactoryTermXsdToTime=void 0;const e=Ad(),t=Sd(),r=jI();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.TypeURL.XSD_TIME],termFunction:!0})}async run(e){return new r.TermFunctionXsdToTime}};return wI.ActorFunctionFactoryTermXsdToTime=n,wI}function FI(){return OI||(OI=1,e=TI,t=TI&&TI.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=TI&&TI.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(AI(),e)),TI;var e,t,r}var EI,xI,PI,DI={},MI={},NI={};function II(){if(EI)return NI;EI=1,Object.defineProperty(NI,"__esModule",{value:!0}),NI.TermFunctionYear=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(){super({arity:1,operator:t.SparqlOperator.YEAR,overloads:(0,t.declare)(t.SparqlOperator.YEAR).onDateTime1(()=>e=>(0,t.integer)(e.typedValue.year)).set([t.TypeURL.XSD_DATE],()=>([e])=>(0,t.integer)(e.typedValue.year)).collect()})}};return NI.TermFunctionYear=r,NI}function RI(){if(xI)return MI;xI=1,Object.defineProperty(MI,"__esModule",{value:!0}),MI.ActorFunctionFactoryTermYear=void 0;const e=Ad(),t=Sd(),r=II();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.YEAR],termFunction:!0})}async run(e){return new r.TermFunctionYear}};return MI.ActorFunctionFactoryTermYear=n,MI}function LI(){return PI||(PI=1,e=DI,t=DI&&DI.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=DI&&DI.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(RI(),e)),DI;var e,t,r}var CI,BI,qI={},UI={};function kI(){if(CI)return UI;CI=1,Object.defineProperty(UI,"__esModule",{value:!0}),UI.ActorQueryOperationSource=void 0;const e=Kd(),t=ls(),r=Ji(),n=kd(),a=Am(),o=Jl();let i=class extends e.ActorQueryOperation{constructor(e){super(e)}async test(e){return(0,a.getOperationSource)(e.operation)?(0,r.passTest)({httpRequests:1}):(0,r.failTest)(`Actor ${this.name} requires an operation with source annotation.`)}async run(e){const r=e.context.get(t.KeysInitQuery.physicalQueryPlanLogger);r&&(r.logOperation(e.operation.type,void 0,e.operation,e.context.get(t.KeysInitQuery.physicalQueryPlanNode),this.name,{}),e.context=e.context.set(t.KeysInitQuery.physicalQueryPlanNode,e.operation));const i=(0,a.getOperationSource)(e.operation),s=i.context?e.context.merge(i.context):e.context;let u=!1;if(o.Util.recurseOperation(e.operation,{construct:()=>(u=!0,!1)}),u){const t=i.source.queryQuads(e.operation,s);return{type:"quads",quadStream:t,metadata:(0,n.getMetadataQuads)(t)}}switch(e.operation.type){case o.Algebra.types.ASK:return{type:"boolean",execute:()=>i.source.queryBoolean(e.operation,s)};case o.Algebra.types.COMPOSITE_UPDATE:case o.Algebra.types.DELETE_INSERT:case o.Algebra.types.LOAD:case o.Algebra.types.CLEAR:case o.Algebra.types.CREATE:case o.Algebra.types.DROP:case o.Algebra.types.ADD:case o.Algebra.types.MOVE:case o.Algebra.types.COPY:return{type:"void",execute:()=>i.source.queryVoid(e.operation,s)}}const c=i.source.queryBindings(e.operation,s);return{type:"bindings",bindingsStream:c,metadata:(0,n.getMetadataBindings)(c)}}};return UI.ActorQueryOperationSource=i,UI}function QI(){return BI||(BI=1,e=qI,t=qI&&qI.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=qI&&qI.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(kI(),e)),qI;var e,t,r}var VI,GI,$I={},zI={};function XI(){if(VI)return zI;VI=1,Object.defineProperty(zI,"__esModule",{value:!0}),zI.MediatorJoinCoefficientsFixed=void 0;const e=ls(),t=Ji();let r=class extends t.Mediator{constructor(e){super(e)}async mediateWith(r,n){const a=[],o=n.map(({reply:e})=>e),i=(await Promise.all(o)).map(e=>{if(!e.isFailed())return{value:e.get(),sideData:e.getSideData()};a.push(e.getFailMessage())});let s=i.map(e=>{if(e)return e.value.iterations*this.cpuWeight+e.value.persistedItems*this.memoryWeight+e.value.blockingItems*this.timeWeight+e.value.requestTime*this.ioWeight});const u=Math.max(...s.filter(e=>void 0!==e)),c=r.context.get(e.KeysQueryOperation.limitIndicator);c&&(s=s.map((e,t)=>void 0!==e&&(i[t]?.value).blockingItems>0&&(i[t]?.value).iterations>c?e+u:e));let l=-1,p=Number.POSITIVE_INFINITY;for(const[e,t]of s.entries())void 0!==t&&(-1===l||t<p)&&(l=e,p=t);if(l<0)return(0,t.failTest)(this.constructFailureMessage(r,a));const d=n[l].actor;return d.includeInLogs&&t.Actor.getContextLogger(r.context)?.debug(`Determined physical join operator '${d.logicalType}-${d.physicalName}'`,{entries:r.entries.length,variables:await Promise.all(r.entries.map(async e=>(await e.output.metadata()).variables.map(e=>e.variable.value))),costs:Object.fromEntries(s.map((e,t)=>[`${n[t].actor.logicalType}-${n[t].actor.physicalName}`,e]).filter(e=>void 0!==e[1])),coefficients:Object.fromEntries(i.map((e,t)=>[`${n[t].actor.logicalType}-${n[t].actor.physicalName}`,e?.value]).filter(e=>void 0!==e[1]))}),(0,t.passTestWithSideData)(d,i[l].sideData)}};return zI.MediatorJoinCoefficientsFixed=r,zI}function HI(){return GI||(GI=1,e=$I,t=$I&&$I.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=$I&&$I.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(XI(),e)),$I;var e,t,r}var JI,KI={},YI={};function WI(){if(JI)return YI;JI=1,Object.defineProperty(YI,"__esModule",{value:!0}),YI.ActorHttpInvalidate=void 0;const e=Ji();let t=class extends e.Actor{constructor(e){super(e)}};return YI.ActorHttpInvalidate=t,YI}var ZI,eR,tR={};function rR(){if(ZI)return tR;ZI=1,Object.defineProperty(tR,"__esModule",{value:!0}),tR.ActorHttpInvalidateListenable=void 0;const e=Ji(),t=WI();let r=class extends t.ActorHttpInvalidate{constructor(e){super(e),this.invalidateListeners=[],this.invalidateListeners=[]}addInvalidateListener(e){this.invalidateListeners.push(e)}async test(t){return(0,e.passTestVoid)()}async run(e){for(const t of this.invalidateListeners)t(e);return{}}};return tR.ActorHttpInvalidateListenable=r,tR}function nR(){return eR||(eR=1,e=KI,t=KI&&KI.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=KI&&KI.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(WI(),e),r(rR(),e)),KI;var e,t,r}var aR,oR,iR={},sR={};function uR(){if(aR)return sR;aR=1,Object.defineProperty(sR,"__esModule",{value:!0}),sR.MediatorAll=void 0;const e=Ji();let t=class extends e.Mediator{constructor(e){super(e)}async mediate(e){const t=[];let r;try{r=this.publish(e)}catch{r=[]}for(const n of r){const e=await n.reply;e.isPassed()&&t.push({actor:n.actor,sideData:e.getSideData()})}return(await Promise.all(t.map(t=>t.actor.runObservable(e,t.sideData))))[0]}async mediateWith(){throw new Error("Unsupported operation: MediatorAll#mediateWith")}};return sR.MediatorAll=t,sR}function cR(){return oR||(oR=1,e=iR,t=iR&&iR.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=iR&&iR.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(uR(),e)),iR;var e,t,r}var lR,pR={},dR={},fR={},hR={},yR={},gR={};function mR(){if(lR)return gR;lR=1,Object.defineProperty(gR,"__esModule",{value:!0}),gR.ChunkedIterator=void 0;const e=ph();let t=class extends e.TransformIterator{constructor(e,t,r){super(e,r),this.chunk=[],this.blockSize=t}consumeChunkAsIterator(){const t=new e.ArrayIterator(this.chunk,{autoStart:!1});return this.chunk=[],t}_transform(e,t,r){this.chunk.push(e),this.chunk.length>=this.blockSize&&r(this.consumeChunkAsIterator()),t()}_flush(e){this.chunk.length>0&&this._push(this.consumeChunkAsIterator()),super._flush(e)}};return gR.ChunkedIterator=t,gR}var bR,vR={};function _R(){if(bR)return vR;bR=1,Object.defineProperty(vR,"__esModule",{value:!0}),vR.ClosableIterator=void 0;const e=ph();let t=class extends e.AsyncIterator{constructor(t,o){super(),this.onClose=o.onClose,this._source=t,this._source[e.DESTINATION]=this,this._source.on("end",a),this._source.on("error",n),this._source.on("readable",r),this.readable=this._source.readable}read(){const e=this._source.read();return e||(this.readable=!1,this._source.done&&this.close()),e}_end(t){this.onClose(),this._source.removeListener("end",a),this._source.removeListener("error",n),this._source.removeListener("readable",r),delete this._source[e.DESTINATION],this._source.destroy(),super._end(t)}};function r(){this[e.DESTINATION].readable=!0}function n(t){this[e.DESTINATION].emit("error",t)}function a(){this[e.DESTINATION].close()}return vR.ClosableIterator=t,vR}var OR,TR={};function wR(){if(OR)return TR;OR=1,Object.defineProperty(TR,"__esModule",{value:!0}),TR.ClosableTransformIterator=void 0;const e=ph();let t=class extends e.TransformIterator{constructor(e,t){super(e,t),this.onClose=t.onClose}_end(e){this.onClose(),super._end(e)}};return TR.ClosableTransformIterator=t,TR}var SR,jR,AR,FR,ER,xR,PR={};function DR(){if(SR)return PR;function e(t,r,n){if(!("_profileInstrumented"in t)){if(t._profileInstrumented=!0,"_read"in t){const e=t._read;t._read=(n,a)=>{const o=performance.now();e.call(t,n,()=>{r.timeSelf+=performance.now()-o,a()})}}const a=t.read;if(t.read=()=>{const e=performance.now(),o=a.call(t);return n&&o&&r.count++,r.timeSelf+=performance.now()-e,o},n){const e=performance.now();t.on("end",()=>{r.timeLife=performance.now()-e})}"_source"in t&&e(t._source,r,!1)}}return SR=1,Object.defineProperty(PR,"__esModule",{value:!0}),PR.instrumentIterator=void 0,PR.instrumentIterator=function(t){const r={count:0,timeSelf:0,timeLife:0};return e(t,r,!0),new Promise(e=>{t.on("end",()=>{e(r)})})},PR}function MR(){return jR||(jR=1,e=yR,t=yR&&yR.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=yR&&yR.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(mR(),e),r(_R(),e),r(wR(),e),r(DR(),e)),yR;var e,t,r}function NR(){if(AR)return hR;AR=1,Object.defineProperty(hR,"__esModule",{value:!0}),hR.ActorRdfJoin=void 0;const e=ls(),t=Ji(),r=MR(),n=kd();let a=class a extends t.Actor{constructor(e,t){super(e),this.includeInLogs=!0,this.logicalType=t.logicalType,this.physicalName=t.physicalName,this.limitEntries=t.limitEntries??Number.POSITIVE_INFINITY,this.limitEntriesMin=t.limitEntriesMin??!1,this.canHandleUndefs=t.canHandleUndefs??!1,this.isLeaf=t.isLeaf??!0,this.requiresVariableOverlap=t.requiresVariableOverlap??!1,this.canHandleOperationRequired=t.canHandleOperationRequired??!1}static overlappingVariables(e){const t={};for(const r of e)for(const e of r.variables){t[e.variable.value]||(t[e.variable.value]={variable:e.variable,canBeUndef:e.canBeUndef,occurrences:0});const r=t[e.variable.value];r.canBeUndef=r.canBeUndef||e.canBeUndef,r.occurrences++}return Object.values(t).filter(t=>t.occurrences===e.length).map(e=>({variable:e.variable,canBeUndef:e.canBeUndef}))}static joinVariables(e,t,r=!1){const n={};let a=!0;for(const o of t){for(const e of o.variables)n[e.variable.value]=n[e.variable.value]||e.canBeUndef||!a&&r&&!(e.variable.value in n);a=!1}return Object.entries(n).map(([t,r])=>({variable:e.variable(t),canBeUndef:r}))}static joinBindings(...e){if(0===e.length)return null;if(1===e.length)return e[0];let t=e[0];for(const r of e.slice(1)){const e=t.merge(r);if(!e)return null;t=e}return t}static getCardinality(e){return e.cardinality}static async getMetadatas(e){return await Promise.all(e.map(e=>e.output.metadata()))}static async getEntriesWithMetadatas(e){const t=await a.getMetadatas(e);return e.map((e,r)=>({...e,metadata:t[r]}))}static getRequestInitialTimes(e){return e.map(e=>e.pageSize?0:e.requestTime??0)}static getRequestItemTimes(e){return e.map(e=>e.pageSize?(e.requestTime??0)/e.pageSize:0)}constructState(e){const t=new n.MetadataValidationState,r=()=>t.invalidate();for(const n of e)n.state.addInvalidateListener(r);return t}async constructResultMetadata(t,r,n,o={},i=!1){let s;if(o.cardinality)s=o.cardinality;else{let e=!1;s=r.reduce((t,r)=>{const n=a.getCardinality(r);return 0===n.value&&(e=!0),{type:"estimate"===n.type?"estimate":t.type,value:t.value*(i?Math.max(1,n.value):n.value)}},{type:"exact",value:1}),e&&!i||(s.value*=(await this.mediatorJoinSelectivity.mediate({entries:t,context:n})).selectivity,0===s.value&&(s.value=Number.MIN_VALUE))}return{state:this.constructState(r),...o,cardinality:{type:s.type,value:s.value},variables:a.joinVariables(n.getSafe(e.KeysInitQuery.dataFactory),r,i)}}static async sortJoinEntries(e,r,n){if(r.some(e=>e.metadata.variables.some(e=>e.canBeUndef)))return(0,t.passTest)(r);const a={};for(const t of r)for(const e of t.metadata.variables){let t=a[e.variable.value];t||(t=0),a[e.variable.value]=++t}const o=[];for(const[t,i]of Object.entries(a))i>=2&&o.push(t);return 0===o.length?(0,t.failTest)("Bind join can only join entries with at least one common variable"):(0,t.passTest)((await e.mediate({entries:r,context:n})).entries)}async test(e){if(e.type!==this.logicalType)return(0,t.failTest)(`${this.name} can only handle logical joins of type '${this.logicalType}', while '${e.type}' was given.`);if(e.entries.length<=1)return(0,t.failTest)(`${this.name} requires at least two join entries.`);const r=e.entries.some(e=>e.operationRequired);if(!this.canHandleOperationRequired&&r)return(0,t.failTest)(`${this.name} does not work with operationRequired.`);if(this.limitEntriesMin?e.entries.length<this.limitEntries:e.entries.length>this.limitEntries)return(0,t.failTest)(`${this.name} requires ${this.limitEntries} join entries at ${this.limitEntriesMin?"least":"most"}. The input contained ${e.entries.length}.`);for(const a of e.entries)if("bindings"!==a.output.type)return(0,t.failTest)(`Invalid type of a join entry: Expected 'bindings' but got '${a.output.type}'`);const n=await a.getMetadatas(e.entries);let o;return!this.canHandleUndefs&&(o=a.overlappingVariables(n),o.some(e=>e.canBeUndef))?(0,t.failTest)(`Actor ${this.name} can not join streams containing undefs`):this.requiresVariableOverlap&&0===(o??a.overlappingVariables(n)).length&&!r?(0,t.failTest)(`Actor ${this.name} can only join entries with at least one common variable`):await this.getJoinCoefficients(e,{metadatas:n})}async run(t,o){let i;t.context.has(e.KeysInitQuery.physicalQueryPlanLogger)&&(i=t.context.get(e.KeysInitQuery.physicalQueryPlanNode),t.context=t.context.set(e.KeysInitQuery.physicalQueryPlanNode,t));const s=t.context.get(e.KeysInitQuery.physicalQueryPlanLogger);let u;this.includeInLogs&&s&&(u={},s.stashChildren(i,e=>e.logicalOperator.startsWith("join")),s.logOperation(`join-${this.logicalType}`,this.physicalName,t,i,this.name,u));const{result:c,physicalPlanMetadata:l}=await this.getOutput(t,o);if(u){(0,r.instrumentIterator)(c.bindingsStream).then(e=>{s.appendMetadata(t,{cardinalityReal:e.count,timeSelf:e.timeSelf,timeLife:e.timeLife})}),Object.assign(u,l);const e=o.metadatas.map(a.getCardinality);if(u.cardinalities=e,u.joinCoefficients=(await this.getJoinCoefficients(t,o)).getOrThrow(),this.isLeaf)for(let r=0;r<t.entries.length;r++){const n=t.entries[r];s.unstashChild(n.operation,t),s.appendMetadata(n.operation,{cardinality:e[r]})}}return c.metadata=(0,n.cachifyMetadata)(c.metadata),c}};return hR.ActorRdfJoin=a,hR}function IR(){return FR||(FR=1,e=fR,t=fR&&fR.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=fR&&fR.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(NR(),e)),fR;var e,t,r}function RR(){if(ER)return dR;ER=1,Object.defineProperty(dR,"__esModule",{value:!0}),dR.ActorRdfJoinSingle=void 0;const e=IR(),t=Ji();let r=class extends e.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"single",limitEntries:1}),this.includeInLogs=!1}async test(e){return 1!==e.entries.length?(0,t.failTest)(`Actor ${this.name} can only join a single entry`):await this.getJoinCoefficients(e,void 0)}async getOutput(e){return{result:e.entries[0].output}}async getJoinCoefficients(e,r){return(0,t.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},r)}};return dR.ActorRdfJoinSingle=r,dR}function LR(){return xR||(xR=1,e=pR,t=pR&&pR.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=pR&&pR.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(RR(),e)),pR;var e,t,r}var CR,BR,qR={},UR={};function kR(){if(CR)return UR;CR=1,Object.defineProperty(UR,"__esModule",{value:!0}),UR.ActorRdfJoinMultiEmpty=void 0;const e=IR(),t=ls(),r=Ji(),n=kd(),a=ph();let o=class extends e.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"multi-empty",canHandleUndefs:!0})}async test(t){return(await e.ActorRdfJoin.getMetadatas(t.entries)).every(t=>e.ActorRdfJoin.getCardinality(t).value>0)?(0,r.failTest)(`Actor ${this.name} can only join entries where at least one is empty`):super.test(t)}async getOutput(r){for(const e of r.entries)e.output.bindingsStream.close();const o=r.context.getSafe(t.KeysInitQuery.dataFactory);return{result:{bindingsStream:new a.ArrayIterator([],{autoStart:!1}),metadata:async()=>({state:new n.MetadataValidationState,cardinality:{type:"exact",value:0},variables:e.ActorRdfJoin.joinVariables(o,await e.ActorRdfJoin.getMetadatas(r.entries))}),type:"bindings"}}}async getJoinCoefficients(e,t){return(0,r.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},t)}};return UR.ActorRdfJoinMultiEmpty=o,UR}function QR(){return BR||(BR=1,e=qR,t=qR&&qR.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=qR&&qR.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(kR(),e)),qR;var e,t,r}var VR,GR={},$R={},zR={},XR={};function HR(){if(VR)return XR;VR=1,Object.defineProperty(XR,"__esModule",{value:!0}),XR.BindingsIndexDef=void 0;return XR.BindingsIndexDef=class{constructor(e,t){this.keys=e.map(e=>e.variable),this.hashFn=t,this.index={}}put(e,t){return this.index[this.hashFn(e,this.keys)]=t}get(e){const t=this.getFirst(e);return t?[t]:[]}getFirst(e){return this.index[this.hashFn(e,this.keys)]}values(){return Object.values(this.index)}},XR}var JR,KR={};function YR(){if(JR)return KR;JR=1,Object.defineProperty(KR,"__esModule",{value:!0}),KR.BindingsIndexUndef=void 0;return KR.BindingsIndexUndef=class{constructor(e,t,r){this.data={},this.keys=e.map(e=>e.variable),this.hashFn=t,this.allowDisjointDomains=r&&this.keys.length>0}put(e,t){if(this.allowDisjointDomains||this.isBindingsValid(e)){let r=this.data;for(let n=0;n<this.keys.length;n++){const a=this.keys[n],o=this.hashFn(e.get(a));let i=r[o];i||(i=r[o]=n===this.keys.length-1?t:{}),r=i}}return t}isBindingsValid(e){let t=!1;for(const r of this.keys)if(e.has(r)){t=!0;break}return t}get(e){return this.allowDisjointDomains||this.isBindingsValid(e)?this.getRecursive(e,this.keys,[this.data]):[]}getRecursive(e,t,r){if(0===t.length)return r;let n;[n,...t]=t;const a=[];for(const o of r){const r=this.hashFn(e?.get(n));if(r){const n=[o[r],o[""]].filter(Boolean);if(0===n.length)continue;a.push(this.getRecursive(e,t,n))}else{const r=Object.values(o);if(0===r.length)continue;a.push(this.getRecursive(e,t,r))}}return a.flat()}getFirst(e,t=!0){if(this.allowDisjointDomains||this.isBindingsValid(e))return this.getRecursiveFirst(e,this.keys,[this.data],t)}getRecursiveFirst(e,t,r,n){if(0===t.length)return r[0];let a;[a,...t]=t;for(const o of r){const r=this.hashFn(e.get(a));if(r||!n){const a=[o[r],o[""]].filter(Boolean);if(0===a.length)continue;const i=this.getRecursiveFirst(e,t,a,n);if(i)return i}else{const r=Object.values(o);if(0===r.length)continue;const a=this.getRecursiveFirst(e,t,r,n);if(a)return a}}}values(){return 0===this.keys.length?[]:this.getRecursive(void 0,this.keys,[this.data])}},KR}var WR,ZR,eL,tL,rL,nL,aL,oL,iL,sL,uL,cL,lL,pL,dL,fL,hL={};function yL(){return WR||(WR=1,Object.defineProperty(hL,"__esModule",{value:!0})),hL}function gL(){return ZR||(ZR=1,e=zR,t=zR&&zR.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=zR&&zR.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(HR(),e),r(YR(),e),r(yL(),e)),zR;var e,t,r}function mL(){if(pL)return lL;pL=1;const e=function(){if(tL)return eL;tL=1;let e=ph(),t=e.MultiTransformIterator,r=e.SimpleTransformIterator;return eL=class extends t{constructor(e,t,r,n){super(e,n),this.funRight=t,this.funJoin=r}_createTransformer(e){return new r(this.funRight(e),{transform:(t,r,n)=>{let a=this.funJoin(e,t);null!==a&&n(a),r()}})}}}(),t=function(){if(nL)return rL;nL=1;let e=ph().AsyncIterator;return rL=class extends e{constructor(e,t,r,n){super(),this.addedDataListener=!1,this.left=e,this.right=t,this.funHash=r,this.funJoin=n,this.leftMap=new Map,this.match=null,this.matches=[],this.matchIdx=0,this.left.on("error",e=>this.destroy(e)),this.right.on("error",e=>this.destroy(e)),this.readable=!1,this.left.on("end",function(){this.readable=!0,this.right.on("readable",()=>this.readable=!0),this.right.on("end",()=>{this.hasResults()||this._end()})}.bind(this)),this.on("newListener",e=>{"data"===e&&this._addDataListenerIfNeeded()}),this.left.readable&&this._addDataListenerIfNeeded(),this.left.on("readable",()=>this._addDataListenerIfNeeded())}hasResults(){return!this.right.ended||this.matchIdx<this.matches.length}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(this._addDataListenerIfNeeded();;){if(this.ended||!this.readable)return null;for(;this.matchIdx<this.matches.length;){let e=this.matches[this.matchIdx++],t=this.funJoin(e,this.match);if(null!==t)return t}if(this.hasResults()||this._end(),this.match=this.right.read(),null===this.match)return this.readable=!1,null;let e=this.funHash(this.match);this.matches=this.leftMap.get(e)||[],this.matchIdx=0}}_addDataListenerIfNeeded(){this.addedDataListener||(this.addedDataListener=!0,this._addDataListener())}_addDataListener(){this.left.on("data",function(e){let t=this.funHash(e),r=this.leftMap.get(t);r||(r=[],this.leftMap.set(t,r)),r.push(e)}.bind(this))}},rL}(),r=function(){if(oL)return aL;oL=1;const{MultiTransformIterator:e,SimpleTransformIterator:t,scheduleTask:r}=ph();return aL=class extends e{constructor(e,t,r,n){super(e,n),this.right=t,this.funJoin=r,this.on("end",()=>this.right.close())}_end(){super._end(),r(()=>this.right.destroy())}_createTransformer(e){return new t(this.right.clone(),{transform:(t,r,n)=>{let a=this.funJoin(e,t);null!==a&&n(a),r()}})}}}(),n=function(){if(sL)return iL;sL=1;let e=ph().AsyncIterator;return iL=class extends e{constructor(e,t,r,n){super(),this.left=e,this.right=t,this.funHash=r,this.funJoin=n,this.usedLeft=!1,this.leftMap=new Map,this.rightMap=new Map,this.on("end",()=>this._cleanup()),this.match=null,this.matches=[],this.matchIdx=0,(this.left.readable||this.right.readable)&&(this.readable=!0),this.left.on("error",e=>this.destroy(e)),this.right.on("error",e=>this.destroy(e)),this.left.on("readable",()=>this.readable=!0),this.right.on("readable",()=>this.readable=!0),this.left.on("end",()=>{this.hasResults()||this._end()}),this.right.on("end",()=>{this.hasResults()||this._end()})}hasResults(){return!this.left.ended||!this.right.ended||!!this.matches&&this.matchIdx<this.matches.length}_cleanup(){this.leftMap=null,this.rightMap=null,this.matches=null}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(;;){if(this.ended)return null;for(;this.matchIdx<this.matches.length;){let e=this.matches[this.matchIdx++],t=this.usedLeft?this.funJoin(this.match,e):this.funJoin(e,this.match);if(null!==t)return t}this.hasResults()||this._end();let e=null;for(let r=0;r<2&&(e=this.usedLeft?this.right.read():this.left.read(),this.usedLeft=!this.usedLeft,null===e);++r);if(this.done||null===e)return this.readable=!1,null;let t=this.funHash(e);if(this.usedLeft&&this.right.done)this.leftMap=null;else if(this.left.done)this.rightMap=null;else{let r=this.usedLeft?this.leftMap:this.rightMap;r.has(t)||r.set(t,[]);let n=r.get(t);n||(n=[],r.set(t,n)),n.push(e)}this.match=e,this.matches=(this.usedLeft?this.rightMap:this.leftMap).get(t)||[],this.matchIdx=0}}},iL}(),a=function(){if(cL)return uL;cL=1;let e=ph().AsyncIterator;return uL=class extends e{constructor(e){super(),Array.isArray(e)||(e=Array.prototype.slice.call(arguments)),this.streams=e;for(let t of e)t.on("readable",()=>this.emit("readable")),t.on("end",()=>this._removeStream(t));0===this.streams.length&&this.close(),this.idx=this.streams.length-1}_removeStream(e){let t=this.streams.indexOf(e);t<0||(this.streams.splice(t,1),this.idx>=this.streams.length&&--this.idx,0===this.streams.length&&this._end())}close(){super.close();for(let e of this.streams)e.close()}read(){for(let e=0;e<this.streams.length;++e){this.idx=(this.idx+1)%this.streams.length;let e=this.streams[this.idx].read();if(null!==e)return e}return null}},uL}();return lL={DynamicNestedLoopJoin:e,HashJoin:t,NestedLoopJoin:r,SymmetricHashJoin:n,MergeStream:a}}function bL(){if(dL)return $R;dL=1,Object.defineProperty($R,"__esModule",{value:!0}),$R.ActorRdfJoinHash=void 0;const e=IR(),t=Ji(),r=gL(),n=MR(),a=ph(),o=mL(),i=mc();let s=class extends e.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"hash-"+(e.canHandleUndefs?"undef":"def"),limitEntries:2,requiresVariableOverlap:!0,canHandleUndefs:e.canHandleUndefs})}async getOutput(t,s){const u=s.metadatas;let c;const l=e.ActorRdfJoin.overlappingVariables(u);if(this.canHandleUndefs){const t=s.entriesSorted[0].output,o=s.entriesSorted[1].output;c=new n.ClosableTransformIterator(async()=>{const n=new r.BindingsIndexUndef(l,e=>e&&"Variable"!==e.termType?(0,i.termToString)(e):"",!0);return await new Promise(e=>{t.bindingsStream.on("data",e=>{(n.getFirst(e,!1)??n.put(e,[])).push(e)}),t.bindingsStream.on("end",e),t.bindingsStream.on("error",e=>{c.emit("error",e)})}),new a.MultiTransformIterator(o.bindingsStream,{multiTransform:t=>new a.ArrayIterator(n.get(t).flat().map(r=>e.ActorRdfJoin.joinBindings(t,r)).filter(e=>null!==e),{autoStart:!1}),autoStart:!1})},{autoStart:!1,onClose(){t.bindingsStream.destroy(),o.bindingsStream.destroy()}})}else{const{hashFunction:r}=await this.mediatorHashBindings.mediate({context:t.context}),n=l.map(e=>e.variable);c=new o.HashJoin(s.entriesSorted[0].output.bindingsStream,s.entriesSorted[1].output.bindingsStream,e=>r(e,n),e.ActorRdfJoin.joinBindings)}return{result:{type:"bindings",bindingsStream:c,metadata:async()=>await this.constructResultMetadata(s.entriesSorted,u,t.context)}}}async getJoinCoefficients(r,n){let a=r.entries;n.metadatas[1].cardinality.value<n.metadatas[0].cardinality.value&&(n.metadatas=[n.metadatas[1],n.metadatas[0]],a=[r.entries[1],r.entries[0]]);const{metadatas:o}=n,i=e.ActorRdfJoin.getRequestInitialTimes(o),s=e.ActorRdfJoin.getRequestItemTimes(o);let u=o[0].cardinality.value+o[1].cardinality.value;return this.canHandleUndefs||(u*=.8),(0,t.passTestWithSideData)({iterations:u,persistedItems:o[0].cardinality.value,blockingItems:o[0].cardinality.value,requestTime:i[0]+o[0].cardinality.value*s[0]+i[1]+o[1].cardinality.value*s[1]},{...n,entriesSorted:a})}};return $R.ActorRdfJoinHash=s,$R}function vL(){return fL||(fL=1,e=GR,t=GR&&GR.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=GR&&GR.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(bL(),e)),GR;var e,t,r}var _L,OL,TL={},wL={};function SL(){if(_L)return wL;_L=1,Object.defineProperty(wL,"__esModule",{value:!0}),wL.ActorRdfJoinSymmetricHash=void 0;const e=IR(),t=Ji(),r=mL();let n=class extends e.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"symmetric-hash",limitEntries:2,requiresVariableOverlap:!0})}async getOutput(t){const n=await e.ActorRdfJoin.getMetadatas(t.entries),a=e.ActorRdfJoin.overlappingVariables(n),{hashFunction:o}=await this.mediatorHashBindings.mediate({context:t.context}),i=a.map(e=>e.variable);return{result:{type:"bindings",bindingsStream:new r.SymmetricHashJoin(t.entries[0].output.bindingsStream,t.entries[1].output.bindingsStream,e=>o(e,i),e.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(t.entries,n,t.context)}}}async getJoinCoefficients(r,n){const{metadatas:a}=n,o=e.ActorRdfJoin.getRequestInitialTimes(a),i=e.ActorRdfJoin.getRequestItemTimes(a);return(0,t.passTestWithSideData)({iterations:a[0].cardinality.value+a[1].cardinality.value,persistedItems:a[0].cardinality.value+a[1].cardinality.value,blockingItems:0,requestTime:o[0]+a[0].cardinality.value*i[0]+o[1]+a[1].cardinality.value*i[1]},n)}};return wL.ActorRdfJoinSymmetricHash=n,wL}function jL(){return OL||(OL=1,e=TL,t=TL&&TL.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=TL&&TL.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(SL(),e)),TL;var e,t,r}var AL,FL,EL={},xL={};function PL(){if(AL)return xL;AL=1,Object.defineProperty(xL,"__esModule",{value:!0}),xL.ActorRdfJoinNestedLoop=void 0;const e=IR(),t=Ji(),r=mL();let n=class extends e.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(t){return{result:{type:"bindings",bindingsStream:new r.NestedLoopJoin(t.entries[0].output.bindingsStream,t.entries[1].output.bindingsStream,e.ActorRdfJoin.joinBindings,{autoStart:!1}),metadata:async()=>await this.constructResultMetadata(t.entries,await e.ActorRdfJoin.getMetadatas(t.entries),t.context)}}}async getJoinCoefficients(r,n){const{metadatas:a}=n,o=e.ActorRdfJoin.getRequestInitialTimes(a),i=e.ActorRdfJoin.getRequestItemTimes(a);return(0,t.passTestWithSideData)({iterations:a[0].cardinality.value*a[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:o[0]+a[0].cardinality.value*i[0]+o[1]+a[1].cardinality.value*i[1]},n)}};return xL.ActorRdfJoinNestedLoop=n,xL}function DL(){return FL||(FL=1,e=EL,t=EL&&EL.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=EL&&EL.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(PL(),e)),EL;var e,t,r}var ML,NL,IL={},RL={},LL={},CL={},BL={};function qL(){if(ML)return BL;ML=1,Object.defineProperty(BL,"__esModule",{value:!0}),BL.bindingsToCompactString=BL.bindingsToString=void 0;const e=mc();return BL.bindingsToString=function(t){const r={};for(const n of t.keys())r[n.value]=(0,e.termToString)(t.get(n));return JSON.stringify(r,null,"  ")},BL.bindingsToCompactString=function(t,r){return r.map(r=>{const n=t.get(r);return n?(0,e.termToString)(n):""}).join("")},BL}function UL(){if(NL)return CL;NL=1,Object.defineProperty(CL,"__esModule",{value:!0}),CL.Bindings=void 0;const e=Ji(),t=Oi,r=qL();let n=class n{constructor(e,t,r){this.type="bindings",this.dataFactory=e,this.entries=t,this.contextHolder=r}has(e){return this.entries.has("string"==typeof e?e:e.value)}get(e){return this.entries.get("string"==typeof e?e:e.value)}set(e,t){return new n(this.dataFactory,this.entries.set("string"==typeof e?e:e.value,t),this.contextHolder)}delete(e){return new n(this.dataFactory,this.entries.delete("string"==typeof e?e:e.value),this.contextHolder)}keys(){return this.mapIterable(this.iteratorToIterable(this.entries.keys()),e=>this.dataFactory.variable(e))}values(){return this.iteratorToIterable(this.entries.values())}forEach(e){for(const[t,r]of this.entries.entries())e(r,this.dataFactory.variable(t))}get size(){return this.entries.size}[Symbol.iterator](){return this.mapIterable(this.iteratorToIterable(this.entries.entries()),([e,t])=>[this.dataFactory.variable(e),t])[Symbol.iterator]()}equals(e){if(!e)return!1;if(this===e)return!0;if(this.size!==e.size)return!1;for(const t of this.keys())if(!this.get(t)?.equals(e.get(t)))return!1;return!0}filter(e){return new n(this.dataFactory,(0,t.Map)(this.entries.filter((t,r)=>e(t,this.dataFactory.variable(r)))),this.contextHolder)}map(e){return new n(this.dataFactory,(0,t.Map)(this.entries.map((t,r)=>e(t,this.dataFactory.variable(r)))),this.contextHolder)}merge(e){if(this.size<e.size&&e instanceof n)return e.merge(this);let t=this.entries;if(e instanceof n)for(const[r,n]of e.entries){const e=this.entries.get(r);if(e&&!e.equals(n))return;t=t.set(r,n)}else for(const[r,n]of e){const e=this.entries.get(r.value);if(e&&!e.equals(n))return;t=t.set(r.value,n)}return this.createBindingsWithContexts(t,e)}mergeWith(e,t){if(this.size<t.size&&t instanceof n)return t.mergeWith(e,this);let r=this.entries;if(t instanceof n)for(const[n,a]of t.entries){const t=this.entries.get(n);let o;o=t&&!t.equals(a)?e(t,a,this.dataFactory.variable(n)):a,r=r.set(n,o)}else for(const[n,a]of t){const t=this.entries.get(n.value);let o;o=t&&!t.equals(a)?e(t,a,n):a,r=r.set(n.value,o)}return this.createBindingsWithContexts(r,t)}createBindingsWithContexts(e,t){if(this.contextHolder&&this.contextHolder.context){let r=this.contextHolder.context;return"contextHolder"in t&&t.contextHolder&&t.contextHolder.context&&(r=n.mergeContext(this.contextHolder.contextMergeHandlers,r,t.contextHolder.context)),new n(this.dataFactory,e,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:r})}return new n(this.dataFactory,e,t.contextHolder)}static mergeContext(t,r,n){const a=[...r.keys(),...n.keys()],o={},i={},s=new Set(n.keys().map(e=>e.name)),u=r.keys().filter(e=>s.has(e.name));for(const e of a){if(1===i[e.name])continue;i[e.name]=1;const a=u.some(t=>t.name===e.name);t[e.name]&&a?o[e.name]=t[e.name].run(r.get(e),n.get(e)):!t[e.name]&&a||(o[e.name]=r.get(e)||n.get(e))}return new e.ActionContext(o)}setContextEntry(e,t){return this.setContextEntryRaw(e,t)}setContextEntryRaw(t,r){return this.contextHolder&&this.contextHolder.context?new n(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:this.contextHolder.context.set(t,r)}):new n(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder?.contextMergeHandlers??{},context:(new e.ActionContext).set(t,r)})}deleteContextEntry(e){return this.deleteContextEntryRaw(e)}deleteContextEntryRaw(e){return this.contextHolder?new n(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:this.contextHolder.context?.delete(e)}):new n(this.dataFactory,this.entries)}getContext(){return this.contextHolder?.context}getContextEntry(e){return this.getContext()?.get(e)}toString(){return(0,r.bindingsToString)(this)}*mapIterable(e,t){for(const r of e)yield t(r)}iteratorToIterable(e){return{[Symbol.iterator]:()=>e}}};return CL.Bindings=n,CL}var kL,QL,VL,GL,$L={};function zL(){if(kL)return $L;kL=1,Object.defineProperty($L,"__esModule",{value:!0}),$L.BindingsFactory=void 0;const e=Oi,t=UL();return $L.BindingsFactory=class r{constructor(e,t){this.dataFactory=e,this.contextMergeHandlers=t}static async create(e,t,n){return new r(n,(await e.mediate({context:t})).mergeHandlers)}bindings(r=[]){return new t.Bindings(this.dataFactory,(0,e.Map)(r.map(([e,t])=>[e.value,t])),this.contextMergeHandlers?{contextMergeHandlers:this.contextMergeHandlers}:void 0)}fromBindings(e){return this.bindings([...e])}fromRecord(e){return this.bindings(Object.entries(e).map(([e,t])=>[this.dataFactory.variable(e),t]))}},$L}function XL(){return QL||(QL=1,e=LL,t=LL&&LL.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=LL&&LL.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(UL(),e),r(zL(),e),r(qL(),e)),LL;var e,t,r}function HL(){if(VL)return RL;VL=1,Object.defineProperty(RL,"__esModule",{value:!0}),RL.ActorRdfJoinMinusHash=void 0;const e=IR(),t=Ji(),r=XL(),n=gL(),a=MR(),o=mc();let i=class i extends e.ActorRdfJoin{constructor(e){super(e,{logicalType:"minus",physicalName:"hash-"+(e.canHandleUndefs?"undef":"def"),limitEntries:2,canHandleUndefs:e.canHandleUndefs})}static constructIndex(e,t){return e?new n.BindingsIndexUndef(t,e=>e&&"Variable"!==e.termType?(0,o.termToString)(e):"",!1):new n.BindingsIndexDef(t,r.bindingsToCompactString)}async getOutput(t){const r=t.entries[1].output,n=t.entries[0].output,o=await e.ActorRdfJoin.getMetadatas(t.entries);let s=e.ActorRdfJoin.overlappingVariables(o);if(t.graphVariableFromParentScope&&(s=s.filter(e=>!e.variable.equals(t.graphVariableFromParentScope))),0===s.length)return r.bindingsStream.destroy(),{result:n};const u=new a.ClosableTransformIterator(async()=>{const e=i.constructIndex(this.canHandleUndefs,s);return await new Promise(t=>{r.bindingsStream.on("data",t=>e.put(t,!0)),r.bindingsStream.on("end",t),r.bindingsStream.on("error",e=>u.emit("error",e))}),n.bindingsStream.filter(t=>!e.getFirst(t,!0))},{autoStart:!1,onClose(){r.bindingsStream.destroy(),n.bindingsStream.destroy()}});return{result:{type:"bindings",bindingsStream:u,metadata:n.metadata}}}async getJoinCoefficients(r,n){const{metadatas:a}=n,o=e.ActorRdfJoin.getRequestInitialTimes(a),i=e.ActorRdfJoin.getRequestItemTimes(a);let s=a[0].cardinality.value+a[1].cardinality.value;return this.canHandleUndefs||(s*=.8),(0,t.passTestWithSideData)({iterations:s,persistedItems:a[0].cardinality.value,blockingItems:a[0].cardinality.value,requestTime:o[0]+a[0].cardinality.value*i[0]+o[1]+a[1].cardinality.value*i[1]},n)}};return RL.ActorRdfJoinMinusHash=i,RL}function JL(){return GL||(GL=1,e=IL,t=IL&&IL.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=IL&&IL.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(HL(),e)),IL;var e,t,r}var KL,YL,WL={},ZL={};function eC(){if(KL)return ZL;KL=1,Object.defineProperty(ZL,"__esModule",{value:!0}),ZL.ActorRdfJoinOptionalHash=void 0;const e=IR(),t=Ji(),r=XL(),n=gL(),a=MR(),o=ph(),i=mc();let s=class s extends e.ActorRdfJoin{constructor(e){super(e,{logicalType:"optional",physicalName:`hash-${e.canHandleUndefs?"undef":"def"}-${e.blocking?"blocking":"nonblocking"}`,limitEntries:2,canHandleUndefs:e.canHandleUndefs,requiresVariableOverlap:!0})}static constructIndex(e,t){return e?new n.BindingsIndexUndef(t,e=>e&&"Variable"!==e.termType?(0,i.termToString)(e):"",!0):new n.BindingsIndexDef(t,r.bindingsToCompactString)}async getOutput(t){const r=t.entries[1].output,n=t.entries[0].output,i=await e.ActorRdfJoin.getMetadatas(t.entries),u=e.ActorRdfJoin.overlappingVariables(i);let c;return c=this.blocking?new a.ClosableTransformIterator(async()=>{const t=s.constructIndex(this.canHandleUndefs,u);return await new Promise(e=>{r.bindingsStream.on("data",e=>{(t.getFirst(e,!0)??t.put(e,[])).push(e)}),r.bindingsStream.on("end",e),r.bindingsStream.on("error",e=>{c.emit("error",e)})}),new o.MultiTransformIterator(n.bindingsStream,{multiTransform:r=>new o.ArrayIterator(t.get(r).flat().map(t=>e.ActorRdfJoin.joinBindings(r,t)).filter(e=>null!==e),{autoStart:!1}),optional:!0,autoStart:!1})},{autoStart:!1,onClose(){r.bindingsStream.destroy(),n.bindingsStream.destroy()}}):new a.ClosableTransformIterator(async()=>{const t=s.constructIndex(this.canHandleUndefs,u);let a=!0;return r.bindingsStream.on("data",e=>{(t.getFirst(e,!0)??t.put(e,new o.BufferedIterator({autoStart:!1})))._push(e)}),r.bindingsStream.on("end",()=>{for(const e of t.values())e.close();a=!1}),r.bindingsStream.on("error",e=>{c.emit("error",e)}),new o.MultiTransformIterator(n.bindingsStream,{multiTransform:r=>{let n=t.get(r);0===n.length&&(n=a?[t.put(r,new o.BufferedIterator({autoStart:!1}))]:[]);return new o.UnionIterator(n.map(e=>e.clone()),{autoStart:!1}).map(t=>e.ActorRdfJoin.joinBindings(r,t))},optional:!0,autoStart:!1})},{autoStart:!1,onClose(){r.bindingsStream.destroy(),n.bindingsStream.destroy()}}),{result:{type:"bindings",bindingsStream:c,metadata:async()=>await this.constructResultMetadata(t.entries,i,t.context,{},!0)}}}async getJoinCoefficients(r,n){const{metadatas:a}=n,o=e.ActorRdfJoin.getRequestInitialTimes(a),i=e.ActorRdfJoin.getRequestItemTimes(a);let s=a[0].cardinality.value+a[1].cardinality.value;return this.canHandleUndefs||(s*=.8),this.blocking&&(s*=.9),(0,t.passTestWithSideData)({iterations:s,persistedItems:a[0].cardinality.value,blockingItems:this.blocking?a[0].cardinality.value:0,requestTime:o[0]+a[0].cardinality.value*i[0]+o[1]+a[1].cardinality.value*i[1]},n)}};return ZL.ActorRdfJoinOptionalHash=s,ZL}function tC(){return YL||(YL=1,e=WL,t=WL&&WL.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=WL&&WL.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(eC(),e)),WL;var e,t,r}var rC,nC,aC={},oC={};function iC(){if(rC)return oC;rC=1,Object.defineProperty(oC,"__esModule",{value:!0}),oC.ActorRdfJoinOptionalNestedLoop=void 0;const e=IR(),t=Ji(),r=mL();let n=class extends e.ActorRdfJoin{constructor(e){super(e,{logicalType:"optional",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(t){return{result:{type:"bindings",bindingsStream:new r.NestedLoopJoin(t.entries[0].output.bindingsStream,t.entries[1].output.bindingsStream,e.ActorRdfJoin.joinBindings,{optional:!0,autoStart:!1}),metadata:async()=>await this.constructResultMetadata(t.entries,await e.ActorRdfJoin.getMetadatas(t.entries),t.context,{},!0)}}}async getJoinCoefficients(r,n){const{metadatas:a}=n,o=e.ActorRdfJoin.getRequestInitialTimes(a),i=e.ActorRdfJoin.getRequestItemTimes(a);return(0,t.passTestWithSideData)({iterations:a[0].cardinality.value*a[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:o[0]+a[0].cardinality.value*i[0]+o[1]+a[1].cardinality.value*i[1]},n)}};return oC.ActorRdfJoinOptionalNestedLoop=n,oC}function sC(){return nC||(nC=1,e=aC,t=aC&&aC.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=aC&&aC.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(iC(),e)),aC;var e,t,r}var uC,cC={},lC={},pC={},dC={};function fC(){if(uC)return dC;uC=1,Object.defineProperty(dC,"__esModule",{value:!0}),dC.ActorBindingsAggregatorFactory=void 0;const e=Ji();let t=class extends e.Actor{constructor(e){super(e),this.mediatorExpressionEvaluatorFactory=e.mediatorExpressionEvaluatorFactory}};return dC.ActorBindingsAggregatorFactory=t,dC}var hC,yC,gC={};function mC(){if(hC)return gC;hC=1,Object.defineProperty(gC,"__esModule",{value:!0}),gC.AggregateEvaluator=void 0;const e=ls(),t=Sd(),r=mc();return gC.AggregateEvaluator=class{constructor(r,n,a=!1){this.evaluator=r,this.distinct=n,this.throwError=a,this.errorOccurred=!1,this.errorOccurred=!1,this.superTypeProvider=r.context.getSafe(e.KeysExpressionEvaluator.superTypeProvider),this.termTransformer=new t.TermTransformer(this.superTypeProvider),this.variableValues=new Set}emptyValueTerm(){}emptyValue(){const e=this.emptyValueTerm();if(void 0===e&&this.throwError)throw new t.EmptyAggregateError;return e}async putBindings(e){if(!this.errorOccurred)try{const t=await this.evaluator.evaluate(e);if(!t||this.errorOccurred)return;this.distinct&&this.variableValues.has(r.termToString(t))||(this.putTerm(t),this.distinct&&this.variableValues.add(r.termToString(t)))}catch(t){this.safeThrow(t)}}async result(){if(!this.errorOccurred)return this.termResult()}safeThrow(e){if(this.throwError)throw e;this.errorOccurred=!0}termToNumericOrError(e){if("Literal"!==e.termType)throw new Error(`Term with value ${e.value} has type ${e.termType} and is not a numeric literal`);if(!t.isSubTypeOf(e.datatype.value,t.TypeAlias.SPARQL_NUMERIC,this.superTypeProvider))throw new Error(`Term datatype ${e.datatype.value} with value ${e.value} has type ${e.termType} and is not a numeric literal`);return this.termTransformer.transformLiteral(e)}},gC}function bC(){return yC||(yC=1,e=pC,t=pC&&pC.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=pC&&pC.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(fC(),e),r(mC(),e)),pC;var e,t,r}var vC,_C,OC,TC={};function wC(){if(vC)return TC;vC=1,Object.defineProperty(TC,"__esModule",{value:!0}),TC.CountAggregator=void 0;const e=bC(),t=Sd();let r=class extends e.AggregateEvaluator{constructor(e,t,r){super(e,t,r),this.state=void 0}emptyValueTerm(){return(0,t.typedLiteral)("0",t.TypeURL.XSD_INTEGER)}putTerm(e){void 0===this.state&&(this.state=0),this.state++}termResult(){return void 0===this.state?this.emptyValue():(0,t.typedLiteral)(String(this.state),t.TypeURL.XSD_INTEGER)}};return TC.CountAggregator=r,TC}function SC(){if(_C)return lC;_C=1,Object.defineProperty(lC,"__esModule",{value:!0}),lC.ActorBindingsAggregatorFactoryCount=void 0;const e=bC(),t=Ji(),r=Jl(),n=wC();let a=class extends e.ActorBindingsAggregatorFactory{constructor(e){super(e)}async test(e){return"count"!==e.expr.aggregator||e.expr.expression.expressionType===r.Algebra.expressionTypes.WILDCARD?(0,t.failTest)("This actor only supports the 'count' aggregator without wildcard."):(0,t.passTestVoid)()}async run({context:e,expr:t}){return new n.CountAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:t.expression,context:e}),t.distinct)}};return lC.ActorBindingsAggregatorFactoryCount=a,lC}function jC(){return OC||(OC=1,e=cC,t=cC&&cC.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=cC&&cC.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(SC(),e),r(wC(),e)),cC;var e,t,r}var AC,FC,EC,xC={},PC={},DC={};function MC(){if(AC)return DC;AC=1,Object.defineProperty(DC,"__esModule",{value:!0}),DC.GroupConcatAggregator=void 0;const e=bC(),t=Sd();let r=class extends e.AggregateEvaluator{constructor(e,t,r,n,a){super(e,t,a),this.dataFactory=r,this.state=void 0,this.lastLanguageValid=!0,this.lastLanguage=void 0,this.separator=n??" "}emptyValueTerm(){return t.typedLiteral("",t.TypeURL.XSD_STRING)}putTerm(e){void 0===this.state?(this.state=e.value,"Literal"===e.termType&&(this.lastLanguage=e.language)):(this.state+=this.separator+e.value,this.lastLanguageValid&&"Literal"===e.termType&&this.lastLanguage!==e.language&&(this.lastLanguageValid=!1,this.lastLanguage=void 0))}termResult(){return void 0===this.state?this.emptyValue():this.lastLanguageValid&&this.lastLanguage?t.langString(this.state,this.lastLanguage).toRDF(this.dataFactory):t.typedLiteral(this.state,t.TypeURL.XSD_STRING)}};return DC.GroupConcatAggregator=r,DC}function NC(){if(FC)return PC;FC=1,Object.defineProperty(PC,"__esModule",{value:!0}),PC.ActorBindingsAggregatorFactoryGroupConcat=void 0;const e=bC(),t=ls(),r=Ji(),n=MC();let a=class extends e.ActorBindingsAggregatorFactory{constructor(e){super(e)}async test(e){return"group_concat"!==e.expr.aggregator?(0,r.failTest)("This actor only supports the 'group_concat' aggregator."):(0,r.passTestVoid)()}async run({context:e,expr:r}){return new n.GroupConcatAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:r.expression,context:e}),r.distinct,e.getSafe(t.KeysInitQuery.dataFactory),r.separator)}};return PC.ActorBindingsAggregatorFactoryGroupConcat=a,PC}function IC(){return EC||(EC=1,e=xC,t=xC&&xC.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=xC&&xC.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(NC(),e),r(MC(),e)),xC;var e,t,r}var RC,LC,CC,BC={},qC={},UC={};function kC(){if(RC)return UC;RC=1,Object.defineProperty(UC,"__esModule",{value:!0}),UC.SampleAggregator=void 0;const e=bC();let t=class extends e.AggregateEvaluator{constructor(e,t,r){super(e,t,r),this.state=void 0}putTerm(e){void 0===this.state&&(this.state=e)}termResult(){return void 0===this.state?this.emptyValue():this.state}};return UC.SampleAggregator=t,UC}function QC(){if(LC)return qC;LC=1,Object.defineProperty(qC,"__esModule",{value:!0}),qC.ActorBindingsAggregatorFactorySample=void 0;const e=bC(),t=Ji(),r=kC();let n=class extends e.ActorBindingsAggregatorFactory{constructor(e){super(e)}async test(e){return"sample"!==e.expr.aggregator?(0,t.failTest)("This actor only supports the 'sample' aggregator."):(0,t.passTestVoid)()}async run({context:e,expr:t}){return new r.SampleAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:t.expression,context:e}),t.distinct)}};return qC.ActorBindingsAggregatorFactorySample=n,qC}function VC(){return CC||(CC=1,e=BC,t=BC&&BC.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=BC&&BC.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(QC(),e),r(kC(),e)),BC;var e,t,r}var GC,$C,zC,XC={},HC={},JC={};function KC(){if(GC)return JC;GC=1,Object.defineProperty(JC,"__esModule",{value:!0}),JC.WildcardCountAggregator=void 0;const e=bC(),t=Sd(),r=mc();let n=class extends e.AggregateEvaluator{constructor(e,t,r){super(e,t,r),this.bindingValues=new Map,this.state=void 0}putTerm(e){}async putBindings(e){this.handleDistinct(e)||(void 0===this.state&&(this.state=0),this.state+=1)}emptyValueTerm(){return(0,t.typedLiteral)("0",t.TypeURL.XSD_INTEGER)}termResult(){return void 0===this.state?this.emptyValue():(0,t.typedLiteral)(String(this.state),t.TypeURL.XSD_INTEGER)}handleDistinct(e){if(this.distinct){const t=[...e];t.sort((e,t)=>e[0].value.localeCompare(t[0].value));const n=t.map(([e])=>e.value).join(","),a=t.map(([,e])=>r.termToString(e)).join(","),o=this.bindingValues.get(n),i=void 0!==o&&o.has(a);return o||this.bindingValues.set(n,new Set),this.bindingValues.get(n).add(a),i}return!1}};return JC.WildcardCountAggregator=n,JC}function YC(){if($C)return HC;$C=1,Object.defineProperty(HC,"__esModule",{value:!0}),HC.ActorBindingsAggregatorFactoryWildcardCount=void 0;const e=bC(),t=Ji(),r=KC();let n=class extends e.ActorBindingsAggregatorFactory{constructor(e){super(e)}async test(e){return"count"!==e.expr.aggregator||"wildcard"!==e.expr.expression.expressionType?(0,t.failTest)("This actor only supports the 'count' aggregator with wildcard."):(0,t.passTestVoid)()}async run({context:e,expr:t}){return new r.WildcardCountAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:t.expression,context:e}),t.distinct)}};return HC.ActorBindingsAggregatorFactoryWildcardCount=n,HC}function WC(){return zC||(zC=1,e=XC,t=XC&&XC.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=XC&&XC.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(YC(),e),r(KC(),e)),XC;var e,t,r}var ZC,eB,tB,rB={},nB={},aB={};function oB(){if(ZC)return aB;ZC=1,Object.defineProperty(aB,"__esModule",{value:!0}),aB.AverageAggregator=void 0;const e=bC(),t=Sd();let r=class extends e.AggregateEvaluator{constructor(e,t,r,n,a,o){super(e,t,o),this.dataFactory=r,this.additionFunction=n,this.divisionFunction=a,this.state=void 0}emptyValueTerm(){return t.typedLiteral("0",t.TypeURL.XSD_INTEGER)}putTerm(e){if(void 0===this.state){const t=this.termToNumericOrError(e);this.state={sum:t,count:1}}else{const t=this.termToNumericOrError(e);this.state.sum=this.additionFunction.applyOnTerms([this.state.sum,t],this.evaluator),this.state.count++}}termResult(){if(void 0===this.state)return this.emptyValue();const e=new t.IntegerLiteral(this.state.count);return this.divisionFunction.applyOnTerms([this.state.sum,e],this.evaluator).toRDF(this.dataFactory)}};return aB.AverageAggregator=r,aB}function iB(){if(eB)return nB;eB=1,Object.defineProperty(nB,"__esModule",{value:!0}),nB.ActorBindingsAggregatorFactoryAverage=void 0;const e=bC(),t=ls(),r=Ji(),n=Sd(),a=oB();let o=class extends e.ActorBindingsAggregatorFactory{constructor(e){super(e),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async test(e){return"avg"!==e.expr.aggregator?(0,r.failTest)("This actor only supports the 'avg' aggregator."):(0,r.passTestVoid)()}async run({context:e,expr:r}){return new a.AverageAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:r.expression,context:e}),r.distinct,e.getSafe(t.KeysInitQuery.dataFactory),await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.ADDITION,context:e,requireTermExpression:!0}),await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.DIVISION,context:e,requireTermExpression:!0}))}};return nB.ActorBindingsAggregatorFactoryAverage=o,nB}function sB(){return tB||(tB=1,e=rB,t=rB&&rB.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=rB&&rB.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(iB(),e),r(oB(),e)),rB;var e,t,r}var uB,cB,lB,pB={},dB={},fB={};function hB(){if(uB)return fB;uB=1,Object.defineProperty(fB,"__esModule",{value:!0}),fB.SumAggregator=void 0;const e=bC(),t=Sd();let r=class extends e.AggregateEvaluator{constructor(e,t,r,n,a){super(e,t,a),this.dataFactory=r,this.additionFunction=n,this.state=void 0}emptyValueTerm(){return(0,t.typedLiteral)("0",t.TypeURL.XSD_INTEGER)}putTerm(e){if(void 0===this.state)this.state=this.termToNumericOrError(e);else{const t=this.termToNumericOrError(e);this.state=this.additionFunction.applyOnTerms([this.state,t],this.evaluator)}}termResult(){return void 0===this.state?this.emptyValue():this.state.toRDF(this.dataFactory)}};return fB.SumAggregator=r,fB}function yB(){if(cB)return dB;cB=1,Object.defineProperty(dB,"__esModule",{value:!0}),dB.ActorBindingsAggregatorFactorySum=void 0;const e=bC(),t=ls(),r=Ji(),n=Sd(),a=hB();let o=class extends e.ActorBindingsAggregatorFactory{constructor(e){super(e),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async test(e){return"sum"!==e.expr.aggregator?(0,r.failTest)("This actor only supports the 'sum' aggregator."):(0,r.passTestVoid)()}async run({expr:e,context:r}){return new a.SumAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:e.expression,context:r}),e.distinct,r.getSafe(t.KeysInitQuery.dataFactory),await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.ADDITION,context:r,requireTermExpression:!0}))}};return dB.ActorBindingsAggregatorFactorySum=o,dB}function gB(){return lB||(lB=1,e=pB,t=pB&&pB.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=pB&&pB.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(yB(),e),r(hB(),e)),pB;var e,t,r}var mB,bB,vB,_B={},OB={},TB={};function wB(){if(mB)return TB;mB=1,Object.defineProperty(TB,"__esModule",{value:!0}),TB.ExpressionFunctionIn=void 0;const e=Ad(),t=Sd();let r=class extends e.ExpressionFunctionBase{constructor(e){super({arity:Number.POSITIVE_INFINITY,operator:t.SparqlOperator.IN,apply:async e=>{const{args:t,mapping:r,exprEval:n}=e,[a,...o]=t,i=await n.evaluatorExpressionEvaluation(a,r);return await this.inRecursive(i,{...e,args:o},[])}}),this.equalityFunction=e}checkArity(e){return e.length>0}async inRecursive(e,r,n){const{args:a,mapping:o,exprEval:i}=r;if(0===a.length){return n.every(e=>!e)?(0,t.bool)(!1):Promise.reject(new t.InError(n))}try{const s=a.shift(),u=await i.evaluatorExpressionEvaluation(s,o);return this.equalityFunction.applyOnTerms([e,u],i).typedValue?(0,t.bool)(!0):this.inRecursive(e,r,[...n,!1])}catch(s){return this.inRecursive(e,r,[...n,s])}}};return TB.ExpressionFunctionIn=r,TB}function SB(){if(bB)return OB;bB=1,Object.defineProperty(OB,"__esModule",{value:!0}),OB.ActorFunctionFactoryExpressionIn=void 0;const e=Ad(),t=Sd(),r=wB();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.IN],termFunction:!1}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const n=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new r.ExpressionFunctionIn(n)}};return OB.ActorFunctionFactoryExpressionIn=n,OB}function jB(){return vB||(vB=1,e=_B,t=_B&&_B.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=_B&&_B.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(SB(),e)),_B;var e,t,r}var AB,FB,EB,xB={},PB={},DB={};function MB(){if(AB)return DB;AB=1,Object.defineProperty(DB,"__esModule",{value:!0}),DB.ExpressionFunctionNotIn=void 0;const e=Ad(),t=Sd();let r=class extends e.ExpressionFunctionBase{constructor(e){super({arity:Number.POSITIVE_INFINITY,operator:t.SparqlOperator.NOT_IN,apply:async e=>{const r=await this.inFunction.apply(e);return(0,t.bool)(!r.typedValue)}}),this.inFunction=e}checkArity(e){return e.length>0}};return DB.ExpressionFunctionNotIn=r,DB}function NB(){if(FB)return PB;FB=1,Object.defineProperty(PB,"__esModule",{value:!0}),PB.ActorFunctionFactoryExpressionNotIn=void 0;const e=Ad(),t=Sd(),r=MB();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.NOT_IN],termFunction:!1}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const n=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.IN,context:e.context,arguments:e.arguments});return new r.ExpressionFunctionNotIn(n)}};return PB.ActorFunctionFactoryExpressionNotIn=n,PB}function IB(){return EB||(EB=1,e=xB,t=xB&&xB.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=xB&&xB.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(NB(),e)),xB;var e,t,r}var RB,LB,CB,BB={},qB={},UB={};function kB(){if(RB)return UB;RB=1,Object.defineProperty(UB,"__esModule",{value:!0}),UB.TermFunctionGreaterThan=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(e){super({arity:2,operator:t.SparqlOperator.GT,overloads:(0,t.declare)(t.SparqlOperator.GT).set(["term","term"],e=>([t,r])=>this.lessThanFunction.applyOnTerms([r,t],e)).collect()}),this.lessThanFunction=e}};return UB.TermFunctionGreaterThan=r,UB}function QB(){if(LB)return qB;LB=1,Object.defineProperty(qB,"__esModule",{value:!0}),qB.ActorFunctionFactoryTermGreaterThan=void 0;const e=Ad(),t=Sd(),r=kB();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.GT],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const n=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.LT,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new r.TermFunctionGreaterThan(n)}};return qB.ActorFunctionFactoryTermGreaterThan=n,qB}function VB(){return CB||(CB=1,e=BB,t=BB&&BB.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=BB&&BB.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(QB(),e)),BB;var e,t,r}var GB,$B,zB,XB={},HB={},JB={};function KB(){if(GB)return JB;GB=1,Object.defineProperty(JB,"__esModule",{value:!0}),JB.TermFunctionGreaterThanEqual=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(e){super({arity:2,operator:t.SparqlOperator.GTE,overloads:(0,t.declare)(t.SparqlOperator.GTE).set(["term","term"],e=>([t,r])=>this.lessThanEqualFunction.applyOnTerms([r,t],e)).collect()}),this.lessThanEqualFunction=e}};return JB.TermFunctionGreaterThanEqual=r,JB}function YB(){if($B)return HB;$B=1,Object.defineProperty(HB,"__esModule",{value:!0}),HB.ActorFunctionFactoryTermGreaterThanEqual=void 0;const e=Ad(),t=Sd(),r=KB();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.GTE],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const n=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.LTE,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new r.TermFunctionGreaterThanEqual(n)}};return HB.ActorFunctionFactoryTermGreaterThanEqual=n,HB}function WB(){return zB||(zB=1,e=XB,t=XB&&XB.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=XB&&XB.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(YB(),e)),XB;var e,t,r}var ZB,eq,tq,rq={},nq={},aq={};function oq(){if(ZB)return aq;ZB=1,Object.defineProperty(aq,"__esModule",{value:!0}),aq.TermFunctionInequality=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(e){super({arity:2,operator:t.SparqlOperator.NOT_EQUAL,overloads:(0,t.declare)(t.SparqlOperator.NOT_EQUAL).set(["term","term"],e=>([r,n])=>(0,t.bool)(!this.equalityFunction.applyOnTerms([r,n],e).typedValue)).collect()}),this.equalityFunction=e}};return aq.TermFunctionInequality=r,aq}function iq(){if(eq)return nq;eq=1,Object.defineProperty(nq,"__esModule",{value:!0}),nq.ActorFunctionFactoryTermInequality=void 0;const e=Ad(),t=Sd(),r=oq();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.NOT_EQUAL],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const n=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new r.TermFunctionInequality(n)}};return nq.ActorFunctionFactoryTermInequality=n,nq}function sq(){return tq||(tq=1,e=rq,t=rq&&rq.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=rq&&rq.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(iq(),e)),rq;var e,t,r}var uq,cq,lq,pq={},dq={},fq={};function hq(){if(uq)return fq;uq=1,Object.defineProperty(fq,"__esModule",{value:!0}),fq.TermFunctionLesserThan=void 0;const e=Ad(),t=ls(),r=Sd();let n=class extends e.TermFunctionBase{constructor(e){super({arity:2,operator:r.SparqlOperator.LT,overloads:(0,r.declare)(r.SparqlOperator.LT).numberTest(()=>(e,t)=>e<t).stringTest(()=>(e,t)=>-1===e.localeCompare(t)).booleanTest(()=>(e,t)=>e<t).dateTimeTest(e=>(n,a)=>(0,r.toUTCDate)(n,e.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime()<(0,r.toUTCDate)(a,e.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime()).copy({from:[r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_DATE_TIME],to:[r.TypeURL.XSD_DATE,r.TypeURL.XSD_DATE]}).set([r.TypeURL.XSD_YEAR_MONTH_DURATION,r.TypeURL.XSD_YEAR_MONTH_DURATION],()=>([e,t])=>(0,r.bool)((0,r.yearMonthDurationsToMonths)((0,r.defaultedYearMonthDurationRepresentation)(e.typedValue))<(0,r.yearMonthDurationsToMonths)((0,r.defaultedYearMonthDurationRepresentation)(t.typedValue)))).set([r.TypeURL.XSD_DAY_TIME_DURATION,r.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,t])=>(0,r.bool)((0,r.dayTimeDurationsToSeconds)((0,r.defaultedDayTimeDurationRepresentation)(e.typedValue))<(0,r.dayTimeDurationsToSeconds)((0,r.defaultedDayTimeDurationRepresentation)(t.typedValue)))).set([r.TypeURL.XSD_TIME,r.TypeURL.XSD_TIME],e=>([n,a])=>(0,r.bool)((0,r.toUTCDate)((0,r.defaultedDateTimeRepresentation)(n.typedValue),e.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime()<(0,r.toUTCDate)((0,r.defaultedDateTimeRepresentation)(a.typedValue),e.context.getSafe(t.KeysExpressionEvaluator.defaultTimeZone)).getTime())).set(["quad","quad"],e=>([t,n])=>{const a=this.quadComponentTest(t.subject,n.subject,e);if(void 0!==a)return(0,r.bool)(a);const o=this.quadComponentTest(t.predicate,n.predicate,e);if(void 0!==o)return(0,r.bool)(o);const i=this.quadComponentTest(t.object,n.object,e);return void 0!==i?(0,r.bool)(i):(0,r.bool)(this.quadComponentTest(t.graph,n.graph,e)??!1)},!1).collect()}),this.equalityFunction=e}quadComponentTest(e,t,r){if(this.equalityFunction.applyOnTerms([e,t],r).typedValue)return;return this.applyOnTerms([e,t],r).typedValue}};return fq.TermFunctionLesserThan=n,fq}function yq(){if(cq)return dq;cq=1,Object.defineProperty(dq,"__esModule",{value:!0}),dq.ActorFunctionFactoryTermLesserThan=void 0;const e=Ad(),t=Sd(),r=hq();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LT],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const n=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new r.TermFunctionLesserThan(n)}};return dq.ActorFunctionFactoryTermLesserThan=n,dq}function gq(){return lq||(lq=1,e=pq,t=pq&&pq.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=pq&&pq.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(yq(),e)),pq;var e,t,r}var mq,bq,vq,_q={},Oq={},Tq={};function wq(){if(mq)return Tq;mq=1,Object.defineProperty(Tq,"__esModule",{value:!0}),Tq.TermFunctionLesserThanEqual=void 0;const e=Ad(),t=Sd();let r=class extends e.TermFunctionBase{constructor(e,r){super({arity:2,operator:t.SparqlOperator.LTE,overloads:(0,t.declare)(t.SparqlOperator.LTE).set(["term","term"],e=>([r,n])=>(0,t.bool)(this.lessThanFunction.applyOnTerms([r,n],e).typedValue||this.equalityFunction.applyOnTerms([r,n],e).typedValue)).collect()}),this.equalityFunction=e,this.lessThanFunction=r}};return Tq.TermFunctionLesserThanEqual=r,Tq}function Sq(){if(bq)return Oq;bq=1,Object.defineProperty(Oq,"__esModule",{value:!0}),Oq.ActorFunctionFactoryTermLesserThanEqual=void 0;const e=Ad(),t=Sd(),r=wq();let n=class extends e.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[t.SparqlOperator.LTE],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const n=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments}),a=await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.LT,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new r.TermFunctionLesserThanEqual(n,a)}};return Oq.ActorFunctionFactoryTermLesserThanEqual=n,Oq}function jq(){return vq||(vq=1,e=_q,t=_q&&_q.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=_q&&_q.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Sq(),e)),_q;var e,t,r}var Aq,Fq,Eq={},xq={};function Pq(){if(Aq)return xq;Aq=1,Object.defineProperty(xq,"__esModule",{value:!0}),xq.ActorQueryOperationAsk=void 0;const e=Kd(),t=Ji(),r=Am();let n=class extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"ask")}async testOperation(e,r){return(0,t.passTestVoid)()}async runOperation(e,t){const n=await this.mediatorQueryOperation.mediate({operation:e.input,context:t}),{bindingsStream:a}=(0,r.getSafeBindings)(n);return{type:"boolean",execute:async()=>1===(await a.take(1).toArray()).length}}};return xq.ActorQueryOperationAsk=n,xq}function Dq(){return Fq||(Fq=1,e=Eq,t=Eq&&Eq.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Eq&&Eq.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Pq(),e)),Eq;var e,t,r}var Mq,Nq,Iq={},Rq={};function Lq(){if(Mq)return Rq;Mq=1,Object.defineProperty(Rq,"__esModule",{value:!0}),Rq.ActorQueryOperationBgpJoin=void 0;const e=Kd(),t=ls(),r=Ji(),n=Jl();let a=class extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"bgp")}async testOperation(e,t){return(0,r.passTestVoid)()}async runOperation(e,r){const a=r.getSafe(t.KeysInitQuery.dataFactory),o=new n.Factory(a);return this.mediatorQueryOperation.mediate({operation:o.createJoin(e.patterns),context:r})}};return Rq.ActorQueryOperationBgpJoin=a,Rq}function Cq(){return Nq||(Nq=1,e=Iq,t=Iq&&Iq.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Iq&&Iq.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Lq(),e)),Iq;var e,t,r}var Bq,qq,Uq,kq,Qq={},Vq={},Gq={},$q={};function zq(){return qq||(qq=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.termToString=e.stringToTerm=e.stringQuadToQuad=e.quadToStringQuad=e.getLiteralValue=e.getLiteralType=e.getLiteralDirection=e.getLiteralLanguage=void 0;const t=function(){if(Bq)return $q;Bq=1,Object.defineProperty($q,"__esModule",{value:!0}),$q.termToString=t,$q.getLiteralValue=r,$q.getLiteralType=n,$q.getLiteralLanguage=o,$q.getLiteralDirection=i,$q.stringToTerm=s,$q.quadToStringQuad=function(e){return{subject:t(e.subject),predicate:t(e.predicate),object:t(e.object),graph:t(e.graph)}},$q.stringQuadToQuad=function(t,r){return(r=r||e).quad(s(t.subject,r),s(t.predicate,r),s(t.object,r),s(t.graph,r))};const e=new(a().DataFactory);function t(e){if(e)switch(e.termType){case"NamedNode":case"DefaultGraph":return e.value;case"BlankNode":return"_:"+e.value;case"Literal":const r=e;return'"'+r.value+'"'+(r.datatype&&"http://www.w3.org/2001/XMLSchema#string"!==r.datatype.value&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"!==r.datatype.value&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"!==r.datatype.value?"^^"+r.datatype.value:"")+(r.language?"@"+r.language:"")+(r.direction?"--"+r.direction:"");case"Quad":return`<<${t(e.subject)} ${t(e.predicate)} ${t(e.object)}${"DefaultGraph"===e.graph.termType?"":" "+t(e.graph)}>>`;case"Variable":return"?"+e.value}}function r(e){const t=/^"([^]*)"/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]}function n(e){const t=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]||(t[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function o(e){const t=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");if(t[1]){let e=t[1].toLowerCase();const r=e.indexOf("--");return r>=0&&(e=e.slice(0,r)),e}return""}function i(e){const t=e.indexOf("--",e.lastIndexOf('"'));if(t>=0){const r=e.slice(t+2,e.length);if("ltr"===r||"rtl"===r)return r;throw new Error(e+" is not a literal with a valid direction")}return""}function s(t,a){if(a=a||e,!t||!t.length)return a.defaultGraph();switch(t[0]){case"_":return a.blankNode(t.substr(2));case"?":if(!a.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return a.variable(t.substr(1));case'"':const e=o(t),u=i(t),c=a.namedNode(n(t));return a.literal(r(t),e?{language:e,direction:u}:c);default:if("<"===t[0]&&t.length>4&&"<"===t[1]&&">"===t[t.length-1]&&">"===t[t.length-2]){const e=t.slice(2,-2).trim();let r=[],n=0,o=0,i=!1;for(let a=0;a<e.length;a++){const s=e[a];if("<"===s&&n++,">"===s){if(0===n)throw new Error("Found closing tag without opening tag in "+t);n--}if('"'===s){let t=!1,r=a;for(;r-- >0&&"\\"===e[r];)t=!t;t||(i=!i)}if(" "===s&&!i&&0===n){for(r.push(e.slice(o,a));" "===e[a+1];)a+=1;o=a+1}}if(0!==n)throw new Error("Found opening tag without closing tag in "+t);if(r.push(e.slice(o,e.length)),3!==r.length&&4!==r.length)throw new Error("Nested quad syntax error "+t);return r=r.map(e=>e.startsWith("<")&&!e.includes(" ")?e.slice(1,-1):e),a.quad(s(r[0]),s(r[1]),s(r[2]),r[3]?s(r[3]):void 0)}return a.namedNode(t)}}return $q}();Object.defineProperty(e,"getLiteralLanguage",{enumerable:!0,get:function(){return t.getLiteralLanguage}}),Object.defineProperty(e,"getLiteralDirection",{enumerable:!0,get:function(){return t.getLiteralDirection}}),Object.defineProperty(e,"getLiteralType",{enumerable:!0,get:function(){return t.getLiteralType}}),Object.defineProperty(e,"getLiteralValue",{enumerable:!0,get:function(){return t.getLiteralValue}}),Object.defineProperty(e,"quadToStringQuad",{enumerable:!0,get:function(){return t.quadToStringQuad}}),Object.defineProperty(e,"stringQuadToQuad",{enumerable:!0,get:function(){return t.stringQuadToQuad}}),Object.defineProperty(e,"stringToTerm",{enumerable:!0,get:function(){return t.stringToTerm}}),Object.defineProperty(e,"termToString",{enumerable:!0,get:function(){return t.termToString}})}(Gq)),Gq}function Xq(){if(Uq)return Vq;Uq=1,Object.defineProperty(Vq,"__esModule",{value:!0}),Vq.ActorQueryOperationDistinctIdentity=void 0;const e=Kd(),t=Ji(),r=Am(),n=zq();let a=class extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"distinct")}async testOperation(e,r){return(0,t.passTestVoid)()}async runOperation(e,t){const n=await this.mediatorQueryOperation.mediate({operation:e.input,context:t});if("quads"===n.type){const e=(0,r.getSafeQuads)(n);return{type:"quads",quadStream:e.quadStream.filter(await this.newIdentityFilterQuads()),metadata:e.metadata}}const a=(0,r.getSafeBindings)(n),o=(await a.metadata()).variables.map(e=>e.variable);return{type:"bindings",bindingsStream:a.bindingsStream.filter(await this.newIdentityFilter(o)),metadata:a.metadata}}async newIdentityFilter(e){const t={};return r=>{const a=e.map(e=>n.termToString(r.get(e))).join("-");return!(a in t)&&(t[a]=!0)}}async newIdentityFilterQuads(){const e={};return t=>{const r=Object.values(n.quadToStringQuad(t)).join(" ");return!(r in e)&&(e[r]=!0)}}};return Vq.ActorQueryOperationDistinctIdentity=a,Vq}function Hq(){return kq||(kq=1,e=Qq,t=Qq&&Qq.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Qq&&Qq.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Xq(),e)),Qq;var e,t,r}var Jq,Kq,Yq={},Wq={};function Zq(){if(Jq)return Wq;Jq=1,Object.defineProperty(Wq,"__esModule",{value:!0}),Wq.ActorQueryOperationExtend=void 0;const e=Kd(),t=Ji(),r=XL(),n=Sd(),a=Am();let o=class extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"extend"),this.mediatorExpressionEvaluatorFactory=e.mediatorExpressionEvaluatorFactory}async testOperation(){return(0,t.passTestVoid)()}async runOperation(e,t){const{expression:o,input:i,variable:s}=e,u=(0,a.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:i,context:t}));if((await u.metadata()).variables.some(e=>e.variable.equals(s)))throw new Error(`Illegal binding to variable '${s.value}' that has already been bound`);const c=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:o,context:t}),l=u.bindingsStream.transform({autoStart:!1,transform:async(e,a,o)=>{try{const t=await c.evaluate(e);o(e.set(s,t))}catch(i){(0,n.isExpressionError)(i)?(o(e),this.logWarn(t,`Expression error for extend operation (${i.message})with bindings '${(0,r.bindingsToString)(e)}'`)):l.emit("error",i)}a()}});return{type:"bindings",bindingsStream:l,async metadata(){const e=await u.metadata();return{...e,variables:[...e.variables,{variable:s,canBeUndef:!1}]}}}}};return Wq.ActorQueryOperationExtend=o,Wq}function eU(){return Kq||(Kq=1,e=Yq,t=Yq&&Yq.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Yq&&Yq.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Zq(),e)),Yq;var e,t,r}var tU,rU,nU={},aU={};function oU(){if(tU)return aU;tU=1,Object.defineProperty(aU,"__esModule",{value:!0}),aU.ActorQueryOperationFilter=void 0;const e=Kd(),t=Ji(),r=XL(),n=Sd(),a=Am();let o=class extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"filter"),this.mediatorExpressionEvaluatorFactory=e.mediatorExpressionEvaluatorFactory}async testOperation(){return(0,t.passTestVoid)()}async runOperation(e,t){const o=await this.mediatorQueryOperation.mediate({operation:e.input,context:t}),i=(0,a.getSafeBindings)(o);(0,a.validateQueryOutput)(i,"bindings");const s=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:e.expression,context:t}),u=i.bindingsStream.transform({transform:async(e,a,o)=>{try{await s.evaluateAsEBV(e)&&o(e)}catch(i){(0,n.isExpressionError)(i)?this.logWarn(t,"Error occurred while filtering.",()=>({error:i,bindings:(0,r.bindingsToString)(e)})):u.emit("error",i)}a()},autoStart:!1});return{type:"bindings",bindingsStream:u,metadata:i.metadata}}};return aU.ActorQueryOperationFilter=o,aU}function iU(){return rU||(rU=1,e=nU,t=nU&&nU.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=nU&&nU.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(oU(),e)),nU;var e,t,r}var sU,uU,cU,lU={},pU={},dU={};function fU(){if(sU)return dU;sU=1,Object.defineProperty(dU,"__esModule",{value:!0}),dU.BindingsToQuadsIterator=void 0;const e=ph(),t=ry();let r=class r extends e.MultiTransformIterator{constructor(e,t,r){super(r,{autoStart:!1}),this.dataFactory=e,this.template=t,this.blankNodeCounter=0}static bindTerm(e,t){return"Variable"===t.termType?e.get(t):t}static bindQuad(e,n){try{return(0,t.mapTermsNested)(n,t=>{const n=r.bindTerm(e,t);if(!n)throw new Error("Unbound term");return n})}catch{}}static localizeBlankNode(e,t,r){return"BlankNode"===r.termType?e.blankNode(`${r.value}${t}`):r}static localizeQuad(e,n,a){return(0,t.mapTermsNested)(a,t=>r.localizeBlankNode(e,n,t))}bindTemplate(e,t,n){return t.map(r.localizeQuad.bind(null,this.dataFactory,n)).map(t=>r.bindQuad.bind(null,e)(t)).filter(Boolean)}_createTransformer(t){return new e.ArrayIterator(this.bindTemplate(t,this.template,this.blankNodeCounter++),{autoStart:!1})}};return dU.BindingsToQuadsIterator=r,dU}function hU(){if(uU)return pU;uU=1,Object.defineProperty(pU,"__esModule",{value:!0}),pU.ActorQueryOperationConstruct=void 0;const e=Kd(),t=ls(),r=Ji(),n=Am(),a=ry(),o=Jl(),i=fU();let s=class s extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"construct")}static getVariables(e){return(0,a.uniqTerms)([].concat.apply([],e.map(e=>(0,a.getVariables)((0,a.getTermsNested)(e)))))}async testOperation(e,t){return(0,r.passTestVoid)()}async runOperation(e,r){const a=r.getSafe(t.KeysInitQuery.dataFactory),u=s.getVariables(e.template),c={type:o.Algebra.types.PROJECT,input:e.input,variables:u},l=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:c,context:r}));return{metadata:()=>l.metadata().then(t=>({...t,order:void 0,cardinality:{type:t.cardinality.type,value:t.cardinality.value*e.template.length},availableOrders:void 0})),quadStream:new i.BindingsToQuadsIterator(a,e.template,l.bindingsStream),type:"quads"}}};return pU.ActorQueryOperationConstruct=s,pU}function yU(){return cU||(cU=1,e=lU,t=lU&&lU.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=lU&&lU.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(hU(),e),r(fU(),e)),lU;var e,t,r}var gU,mU,bU={},vU={};function _U(){if(gU)return vU;gU=1,Object.defineProperty(vU,"__esModule",{value:!0}),vU.ActorQueryOperationFromQuad=void 0;const e=Kd(),t=ls(),r=Ji(),n=Jl();let a=class a extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"from")}static copyOperation(e,t){const r={};for(const n of Object.keys(e))Array.isArray(e[n])&&"template"!==n?r[n]="variables"===n?e[n]:e[n].map(t):a.ALGEBRA_TYPES.includes(e[n].type)?r[n]=t(e[n]):r[n]=e[n];return r}static applyOperationDefaultGraph(e,t,r){if("bgp"===t.type&&t.patterns.length>0||"path"===t.type||"pattern"===t.type){if("bgp"===t.type)return a.joinOperations(e,t.patterns.map(t=>{if("DefaultGraph"!==t.graph.termType)return e.createBgp([t]);const n=r.map(r=>e.createBgp([Object.assign(e.createPattern(t.subject,t.predicate,t.object,r),{metadata:t.metadata})]));return a.unionOperations(e,n)}));if("DefaultGraph"!==t.graph.termType)return t;const n=r.map(r=>"path"===t.type?e.createPath(t.subject,t.predicate,t.object,r):Object.assign(e.createPattern(t.subject,t.predicate,t.object,r),{metadata:t.metadata}));return a.unionOperations(e,n)}return a.copyOperation(t,t=>this.applyOperationDefaultGraph(e,t,r))}static applyOperationNamedGraph(e,t,r,o){if("bgp"===t.type&&t.patterns.length>0||"path"===t.type||"pattern"===t.type){const i="bgp"===t.type?t.patterns[0].graph:t.graph;if("DefaultGraph"===i.termType)return{type:n.Algebra.types.BGP,patterns:[]};if("Variable"===i.termType){if(1===r.length){const n=r[0],a={};a[`?${i.value}`]=n;const o=e.createValues([i],[a]);let s;return s="bgp"===t.type?e.createBgp(t.patterns.map(t=>e.createPattern(t.subject,t.predicate,t.object,n))):"path"===t.type?e.createPath(t.subject,t.predicate,t.object,n):e.createPattern(t.subject,t.predicate,t.object,n),e.createJoin([o,s])}return a.unionOperations(e,r.map(r=>a.applyOperationNamedGraph(e,t,[r],o)))}return[...r,...o].some(e=>e.equals(i))?t:{type:n.Algebra.types.BGP,patterns:[]}}return a.copyOperation(t,t=>this.applyOperationNamedGraph(e,t,r,o))}static joinOperations(e,t){if(1===t.length)return t[0];if(t.length>1)return e.createJoin(t);throw new Error("A join can only be applied on at least one operation")}static unionOperations(e,t){if(1===t.length)return t[0];if(t.length>1)return e.createUnion(t);throw new Error("A union can only be applied on at least one operation")}static createOperation(e,t){let r=t.input;return t.default.length>0&&(r=a.applyOperationDefaultGraph(e,r,t.default)),(t.named.length>0||t.default.length>0)&&(r=a.applyOperationNamedGraph(e,r,t.named,t.default)),r}async testOperation(e,t){return(0,r.passTestVoid)()}async runOperation(e,r){const o=r.getSafe(t.KeysInitQuery.dataFactory),i=new n.Factory(o),s=a.createOperation(i,e);return this.mediatorQueryOperation.mediate({operation:s,context:r})}};return vU.ActorQueryOperationFromQuad=a,a.ALGEBRA_TYPES=Object.keys(n.Algebra.types).map(e=>n.Algebra.types[e]),vU}function OU(){return mU||(mU=1,e=bU,t=bU&&bU.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=bU&&bU.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(_U(),e)),bU;var e,t,r}var TU,wU,SU={},jU={};function AU(){if(TU)return jU;TU=1,Object.defineProperty(jU,"__esModule",{value:!0}),jU.ActorQueryOperationProject=void 0;const e=Kd(),t=ls(),r=Ji(),n=Oh(),a=Am();let o=class extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"project")}async testOperation(e,t){return(0,r.passTestVoid)()}async runOperation(e,r){const o=r.getSafe(t.KeysInitQuery.dataFactory),i=(0,a.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:e.input,context:r})),s=await i.metadata(),u=Object.fromEntries(s.variables.map(e=>[e.variable.value,e])),c=e.variables.map(e=>({variable:e,canBeUndef:!1})),l=Object.fromEntries(c.map(e=>[e.variable.value,e])),p=s.variables.filter(e=>!(e.variable.value in l)),d=c.map(e=>({variable:e.variable,canBeUndef:!(e.variable.value in u)||u[e.variable.value].canBeUndef}));let f=0===p.length?i.bindingsStream:i.bindingsStream.map(e=>{for(const t of p)e=e.delete(t.variable);return e}),h=0;return f=f.map(e=>{h++;const t=new Map;return e.map(e=>{if(e instanceof n.BlankNodeBindingsScoped){let r=t.get(e.value);return r||(r=o.blankNode(`${e.value}${h}`),t.set(e.value,r)),r}return e})}),{type:"bindings",bindingsStream:f,metadata:async()=>({...s,variables:d})}}};return jU.ActorQueryOperationProject=o,jU}function FU(){return wU||(wU=1,e=SU,t=SU&&SU.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=SU&&SU.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(AU(),e)),SU;var e,t,r}var EU,xU,PU={},DU={};function MU(){if(EU)return DU;EU=1,Object.defineProperty(DU,"__esModule",{value:!0}),DU.ActorQueryOperationReducedHash=void 0;const e=Kd(),t=Ji(),r=Am(),n=Td();let a=class extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"reduced")}async testOperation(e,r){return(0,t.passTestVoid)()}async runOperation(e,t){const n=(0,r.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:e.input,context:t})),a=(await n.metadata()).variables.map(e=>e.variable);return{type:"bindings",bindingsStream:n.bindingsStream.filter(await this.newHashFilter(t,a)),metadata:n.metadata}}async newHashFilter(e,t){const{hashFunction:r}=await this.mediatorHashBindings.mediate({context:e}),a=new n.LRUCache({max:this.cacheSize});return e=>{const n=r(e,t);return!a.has(n)&&(a.set(n,!0),!0)}}};return DU.ActorQueryOperationReducedHash=a,DU}function NU(){return xU||(xU=1,e=PU,t=PU&&PU.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=PU&&PU.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(MU(),e)),PU;var e,t,r}var IU,RU,LU={},CU={};function BU(){if(IU)return CU;IU=1,Object.defineProperty(CU,"__esModule",{value:!0}),CU.ActorQueryOperationSlice=void 0;const e=Kd(),t=ls(),r=Ji();let n=class extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"slice")}async testOperation(e,t){return(0,r.passTestVoid)()}async runOperation(e,r){e.length&&(r=r.set(t.KeysQueryOperation.limitIndicator,e.length));const n=await this.mediatorQueryOperation.mediate({operation:e.input,context:r});if("bindings"===n.type){return{type:"bindings",bindingsStream:this.sliceStream(n.bindingsStream,e),metadata:this.sliceMetadata(n,e)}}if("quads"===n.type){return{type:"quads",quadStream:this.sliceStream(n.quadStream,e),metadata:this.sliceMetadata(n,e)}}return n}sliceStream(e,t){const r=Boolean(t.length)||0===t.length,{start:n}=t,a=r?t.start+t.length-1:Number.POSITIVE_INFINITY;return e.transform({offset:n,limit:Math.max(a-n+1,0),autoStart:!1})}sliceMetadata(e,t){const r=Boolean(t.length)||0===t.length;return()=>e.metadata().then(e=>{const n={...e.cardinality};return Number.isFinite(n.value)&&(n.value=Math.max(0,n.value-t.start),r&&(n.value=Math.min(n.value,t.length))),{...e,cardinality:n}})}};return CU.ActorQueryOperationSlice=n,CU}function qU(){return RU||(RU=1,e=LU,t=LU&&LU.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=LU&&LU.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(BU(),e)),LU;var e,t,r}var UU,kU,QU={},VU={};function GU(){if(UU)return VU;UU=1,Object.defineProperty(VU,"__esModule",{value:!0}),VU.ActorQueryOperationUnion=void 0;const e=Kd(),t=Ji(),r=kd(),n=Am(),a=ph();let o=class o extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"union")}static unionVariables(e){const t={};for(const r of e)for(const e of r){t[e.variable.value]||(t[e.variable.value]={variable:e.variable,canBeUndef:e.canBeUndef,occurrences:0});const r=t[e.variable.value];r.canBeUndef=r.canBeUndef||e.canBeUndef,r.occurrences++}return Object.values(t).map(t=>t.occurrences===e.length?{variable:t.variable,canBeUndef:t.canBeUndef}:{variable:t.variable,canBeUndef:!0})}static async unionMetadata(e,t,n,a){let i=(await a.mediate({mode:"initialize",context:n})).metadata;for(const r of e)i={...r,...(await a.mediate({mode:"append",accumulatedMetadata:i,appendingMetadata:r,context:n})).metadata};i.state=new r.MetadataValidationState;const s=()=>i.state.invalidate();for(const r of e)r.state.addInvalidateListener(s);if(t){const t=e.map(e=>e.variables);i.variables=o.unionVariables(t)}return i}async testOperation(e,r){return(0,t.passTestVoid)()}async runOperation(e,t){const r=await Promise.all(e.input.map(e=>this.mediatorQueryOperation.mediate({operation:e,context:t})));let i;for(const n of r)if(void 0===i)i=n.type;else if(i!==n.type)throw new Error(`Unable to union ${i} and ${n.type}`);if("bindings"===i||0===e.input.length){const e=r.map(n.getSafeBindings);return{type:"bindings",bindingsStream:new a.UnionIterator(e.map(e=>e.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(e.map(e=>e.metadata())).then(e=>o.unionMetadata(e,!0,t,this.mediatorRdfMetadataAccumulate))}}if("quads"===i){const e=r.map(n.getSafeQuads);return{type:"quads",quadStream:new a.UnionIterator(e.map(e=>e.quadStream),{autoStart:!1}),metadata:()=>Promise.all(e.map(e=>e.metadata())).then(e=>o.unionMetadata(e,!1,t,this.mediatorRdfMetadataAccumulate))}}throw new Error(`Unable to union ${i}`)}};return VU.ActorQueryOperationUnion=o,VU}function $U(){return kU||(kU=1,e=QU,t=QU&&QU.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=QU&&QU.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(GU(),e)),QU;var e,t,r}var zU,XU,HU,JU,KU,YU={},WU={},ZU={},ek={},tk={};function rk(){if(zU)return tk;zU=1,Object.defineProperty(tk,"__esModule",{value:!0}),tk.PathVariableObjectIterator=void 0;const e=Am(),t=ph(),r=mc();let n=class extends t.BufferedIterator{constructor(e,t,r,n,a,o,i,s=16){super({autoStart:!1}),this.algebraFactory=e,this.subject=t,this.predicate=r,this.graph=n,this.context=a,this.mediatorQueryOperation=o,this.maxRunningOperations=s,this.termHashes=new Map,this.runningOperations=[],this.pendingOperations=[],this.started=!1,this._push(this.subject,i)}getProperty(e,t){return this.started||"metadata"!==e||this.startNextOperation(!1).catch(e=>this.emit("error",e)),super.getProperty(e,t)}_end(e){for(const t of this.runningOperations)t.destroy();super._end(e)}_push(e,t=!0){let n;if(t&&(n=(0,r.termToString)(e),this.termHashes.has(n)))return!1;const a=this.algebraFactory.dataFactory.variable("b");return this.pendingOperations.push({variable:a,operation:this.algebraFactory.createPath(e,this.predicate,a,this.graph)}),n&&(this.termHashes.set(n,e),super._push(e)),!0}async startNextOperation(t){this.started=!0;const r=this.pendingOperations.pop(),n=(0,e.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:r.operation,context:this.context})),a=n.bindingsStream.map(e=>e.get(r.variable));this.runningOperations.push(a),a.on("error",e=>this.destroy(e)),a.on("readable",()=>{t&&this._fillBufferAsync(),this.readable=!0}),a.on("end",()=>{this.runningOperations.splice(this.runningOperations.indexOf(a),1),t&&this._fillBufferAsync(),this.readable=!0}),this.getProperty("metadata")||this.setProperty("metadata",n.metadata)}_read(e,t){const r=this;(async function(){for(;r.runningOperations.length<r.maxRunningOperations&&0!==r.pendingOperations.length;)await r.startNextOperation(!0);let t,n=0,a=!0;for(;!a||n!==(n=e);){a=!0;for(let n=0;n<r.runningOperations.length&&e>0;n++)null!==(t=r.runningOperations[n].read())&&(r._push(t)?e--:a=!1)}r.closeIfNeeded()})().then(()=>{t()},e=>this.destroy(e))}closeIfNeeded(){0===this.runningOperations.length&&0===this.pendingOperations.length&&this.close()}};return tk.PathVariableObjectIterator=n,tk}function nk(){if(XU)return ek;XU=1,Object.defineProperty(ek,"__esModule",{value:!0}),ek.ActorAbstractPath=void 0;const e=Kd(),t=ls(),r=Ji(),n=Am(),a=ph(),o=mc(),i=Jl(),s=rk();let u=class extends e.ActorQueryOperationTypedMediated{constructor(e,t){super(e,"path"),this.predicateType=t}async testOperation(e,t){return e.predicate.type!==this.predicateType?(0,r.failTest)(`This Actor only supports ${this.predicateType} Path operations.`):(0,r.passTestVoid)()}generateVariable(e,t,r){return r?!t||t.subject.value!==r&&t.object.value!==r?e.variable(r):this.generateVariable(e,t,`${r}b`):this.generateVariable(e,t,"b")}async isPathArbitraryLengthDistinct(e,r,a){return r.get(t.KeysQueryOperation.isPathArbitraryLengthDistinctKey)?{context:r=r.set(t.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!1),operation:void 0}:{context:r=r.set(t.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!0),operation:(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:e.createDistinct(a),context:r}))}}async predicateStarGraphVariable(e,t,r,o,i,s,u){const c=this.getPathSources(r),l=this.generateVariable(s.dataFactory,s.createPath(e,r,t,o)),p=s.createUnion([this.assignPatternSources(s,s.createPattern(e,l,t,o),c),this.assignPatternSources(s,s.createPattern(t,l,e,o),c)]),d=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:i,operation:p})),f=new Set;return{bindingsStream:new a.MultiTransformIterator(d.bindingsStream,{multiTransform:n=>{const c=n.get(o);return f.has(c.value)?new a.EmptyIterator:(f.add(c.value),new a.TransformIterator(async()=>{const n=new a.BufferedIterator;return await this.getObjectsPredicateStar(s,e,r,c,i,{},n,{count:0}),n.map(e=>u.bindings([[t,e],[o,c]]))},{maxBufferSize:128}))},autoStart:!1}),metadata:d.metadata}}async getObjectsPredicateStarEval(e,t,r,n,a,o,i,u){if("Variable"===n.termType)return this.predicateStarGraphVariable(e,r,t,n,a,i,u);const c=new s.PathVariableObjectIterator(i,e,t,n,a,this.mediatorQueryOperation,o);return{bindingsStream:c.map(e=>u.bindings([[r,e]])),async metadata(){const e=await new Promise(e=>{c.getProperty("metadata",t=>e(t()))});return e.cardinality.value++,e}}}async getObjectsPredicateStar(e,t,r,a,i,s,u,c){const l=(0,o.termToString)(t);if(s[l])return;u._push(t),s[l]=t,c.count++;const p=this.generateVariable(e.dataFactory),d=e.createPath(t,r,p,a),f=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:d,context:i}));return f.bindingsStream.on("data",async t=>{const n=t.get(p);await this.getObjectsPredicateStar(e,n,r,a,i,s,u,c)}),f.bindingsStream.on("end",()=>{0===--c.count&&u.close()}),f.metadata}async getSubjectAndObjectBindingsPredicateStar(e,t,r,a,i,s,u,c,l,p,d,f,h){const y=(0,o.termToString)(a)+(0,o.termToString)(s);if(l[y])return;if(d.count++,l[y]=!0,p._push(h.bindings([[e,r],[t,a]])),y in c){const n=await c[y];for(const a of n)await this.getSubjectAndObjectBindingsPredicateStar(e,t,r,a,i,s,u,c,l,p,d,f,h);return void(0===--d.count&&p.close())}const g=new Promise(async(o,y)=>{const g=[],m=this.generateVariable(f.dataFactory),b=f.createPath(a,i,m,s),v=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:b,context:u}));v.bindingsStream.on("data",async n=>{const a=n.get(m);g.push(a),await this.getSubjectAndObjectBindingsPredicateStar(e,t,r,a,i,s,u,c,l,p,d,f,h)}),v.bindingsStream.on("error",y),v.bindingsStream.on("end",()=>{0===--d.count&&p.close(),o(g)})});c[y]=g}getPathSources(e){switch(e.type){case i.Algebra.types.ALT:case i.Algebra.types.SEQ:return e.input.flatMap(e=>this.getPathSources(e));case i.Algebra.types.INV:case i.Algebra.types.ONE_OR_MORE_PATH:case i.Algebra.types.ZERO_OR_MORE_PATH:case i.Algebra.types.ZERO_OR_ONE_PATH:return this.getPathSources(e.path);case i.Algebra.types.LINK:case i.Algebra.types.NPS:{const t=(0,n.getOperationSource)(e);if(!t)throw new Error("Could not find a required source on a link path operation");return[t]}}}assignPatternSources(e,t,r){if(0===r.length)throw new Error("Attempted to assign zero sources to a pattern during property path handling");return 1===r.length?(0,n.assignOperationSource)(t,r[0]):e.createUnion(r.map(e=>(0,n.assignOperationSource)(t,e)),!0)}};return ek.ActorAbstractPath=u,ek}function ak(){return HU||(HU=1,e=ZU,t=ZU&&ZU.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=ZU&&ZU.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(nk(),e),r(rk(),e)),ZU;var e,t,r}function ok(){if(JU)return WU;JU=1,Object.defineProperty(WU,"__esModule",{value:!0}),WU.ActorQueryOperationPathAlt=void 0;const e=ak(),t=$U(),r=ls(),n=Am(),a=ph(),o=Jl();let i=class extends e.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.ALT)}async runOperation(e,i){const s=i.getSafe(r.KeysInitQuery.dataFactory),u=new o.Factory(s),c=e.predicate,l=(await Promise.all(c.input.map(t=>this.mediatorQueryOperation.mediate({context:i,operation:u.createPath(e.subject,t,e.object,e.graph)})))).map(n.getSafeBindings);return{type:"bindings",bindingsStream:new a.UnionIterator(l.map(e=>e.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(l.map(e=>e.metadata())).then(e=>t.ActorQueryOperationUnion.unionMetadata(e,!0,i,this.mediatorRdfMetadataAccumulate))}}};return WU.ActorQueryOperationPathAlt=i,WU}function ik(){return KU||(KU=1,e=YU,t=YU&&YU.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=YU&&YU.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(ok(),e)),YU;var e,t,r}var sk,uk,ck={},lk={};function pk(){if(sk)return lk;sk=1,Object.defineProperty(lk,"__esModule",{value:!0}),lk.ActorQueryOperationPathInv=void 0;const e=ak(),t=ls(),r=Jl();let n=class extends e.ActorAbstractPath{constructor(e){super(e,r.Algebra.types.INV)}async runOperation(e,n){const a=n.getSafe(t.KeysInitQuery.dataFactory),o=new r.Factory(a),i=e.predicate,s=o.createPath(e.object,i.path,e.subject,e.graph);return this.mediatorQueryOperation.mediate({operation:s,context:n})}};return lk.ActorQueryOperationPathInv=n,lk}function dk(){return uk||(uk=1,e=ck,t=ck&&ck.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=ck&&ck.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(pk(),e)),ck;var e,t,r}var fk,hk,yk={},gk={};function mk(){if(fk)return gk;fk=1,Object.defineProperty(gk,"__esModule",{value:!0}),gk.ActorQueryOperationPathLink=void 0;const e=ak(),t=ls(),r=Jl();let n=class extends e.ActorAbstractPath{constructor(e){super(e,r.Algebra.types.LINK)}async runOperation(e,n){const a=n.getSafe(t.KeysInitQuery.dataFactory),o=new r.Factory(a),i=e.predicate,s=Object.assign(o.createPattern(e.subject,i.iri,e.object,e.graph),{metadata:i.metadata});return this.mediatorQueryOperation.mediate({operation:s,context:n})}};return gk.ActorQueryOperationPathLink=n,gk}function bk(){return hk||(hk=1,e=yk,t=yk&&yk.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=yk&&yk.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(mk(),e)),yk;var e,t,r}var vk,_k,Ok={},Tk={};function wk(){if(vk)return Tk;vk=1,Object.defineProperty(Tk,"__esModule",{value:!0}),Tk.ActorQueryOperationPathNps=void 0;const e=ak(),t=ls(),r=Am(),n=Jl();let a=class extends e.ActorAbstractPath{constructor(e){super(e,n.Algebra.types.NPS)}async runOperation(e,a){const o=a.getSafe(t.KeysInitQuery.dataFactory),i=new n.Factory(o),s=e.predicate,u=this.generateVariable(o,e),c=Object.assign(i.createPattern(e.subject,u,e.object,e.graph),{metadata:s.metadata}),l=(0,r.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:c,context:a}));return{type:"bindings",bindingsStream:l.bindingsStream.map(e=>s.iris.some(t=>t.equals(e.get(u)))?null:e.delete(u)),metadata:l.metadata}}};return Tk.ActorQueryOperationPathNps=a,Tk}function Sk(){return _k||(_k=1,e=Ok,t=Ok&&Ok.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Ok&&Ok.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(wk(),e)),Ok;var e,t,r}var jk,Ak,Fk={},Ek={};function xk(){if(jk)return Ek;jk=1,Object.defineProperty(Ek,"__esModule",{value:!0}),Ek.ActorQueryOperationUpdateCompositeUpdate=void 0;const e=Kd(),t=Am();let r=class extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"compositeupdate")}async testOperation(e,r){return(0,t.testReadOnly)(r)}async runOperation(e,r){return{type:"void",execute:()=>(async()=>{for(const n of e.updates){const e=(0,t.getSafeVoid)(await this.mediatorQueryOperation.mediate({operation:n,context:r}));await e.execute()}})()}}};return Ek.ActorQueryOperationUpdateCompositeUpdate=r,Ek}function Pk(){return Ak||(Ak=1,e=Fk,t=Fk&&Fk.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Fk&&Fk.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(xk(),e)),Fk;var e,t,r}var Dk,Mk,Nk={},Ik={};function Rk(){if(Dk)return Ik;Dk=1,Object.defineProperty(Ik,"__esModule",{value:!0}),Ik.ActorQueryOperationClear=void 0;const e=Kd(),t=ls(),r=Am();let n=class extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"clear")}async testOperation(e,t){return(0,r.testReadOnly)(t)}async runOperation(e,r){const n=r.getSafe(t.KeysInitQuery.dataFactory);let a;a="DEFAULT"===e.source?n.defaultGraph():"string"==typeof e.source?e.source:[e.source];const{execute:o}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:a,requireExistence:!e.silent,dropGraphs:!1},context:r});return{type:"void",execute:o}}};return Ik.ActorQueryOperationClear=n,Ik}function Lk(){return Mk||(Mk=1,e=Nk,t=Nk&&Nk.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Nk&&Nk.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Rk(),e)),Nk;var e,t,r}var Ck,Bk,qk={},Uk={};function kk(){if(Ck)return Uk;Ck=1,Object.defineProperty(Uk,"__esModule",{value:!0}),Uk.ActorQueryOperationCreate=void 0;const e=Kd(),t=Am();let r=class extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"create")}async testOperation(e,r){return(0,t.testReadOnly)(r)}async runOperation(e,t){const{execute:r}=await this.mediatorUpdateQuads.mediate({createGraphs:{graphs:[e.source],requireNonExistence:!e.silent},context:t});return{type:"void",execute:r}}};return Uk.ActorQueryOperationCreate=r,Uk}function Qk(){return Bk||(Bk=1,e=qk,t=qk&&qk.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=qk&&qk.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(kk(),e)),qk;var e,t,r}var Vk,Gk,$k={},zk={};function Xk(){if(Vk)return zk;Vk=1,Object.defineProperty(zk,"__esModule",{value:!0}),zk.ActorQueryOperationDrop=void 0;const e=Kd(),t=ls(),r=Am();let n=class extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"drop")}async testOperation(e,t){return(0,r.testReadOnly)(t)}async runOperation(e,r){const n=r.getSafe(t.KeysInitQuery.dataFactory);let a;a="DEFAULT"===e.source?n.defaultGraph():"string"==typeof e.source?e.source:[e.source];const{execute:o}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:a,requireExistence:!e.silent,dropGraphs:!0},context:r});return{type:"void",execute:o}}};return zk.ActorQueryOperationDrop=n,zk}function Hk(){return Gk||(Gk=1,e=$k,t=$k&&$k.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=$k&&$k.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Xk(),e)),$k;var e,t,r}var Jk,Kk={},Yk={},Wk={},Zk={};function eQ(){if(Jk)return Zk;Jk=1,Object.defineProperty(Zk,"__esModule",{value:!0}),Zk.BlankNode=void 0;return Zk.BlankNode=class{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}},Zk}var tQ,rQ={},nQ={};function aQ(){if(tQ)return nQ;tQ=1,Object.defineProperty(nQ,"__esModule",{value:!0}),nQ.DefaultGraph=void 0;let e=class{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&"DefaultGraph"===e.termType}};return nQ.DefaultGraph=e,e.INSTANCE=new e,nQ}var oQ,iQ,sQ={},uQ={};function cQ(){if(oQ)return uQ;oQ=1,Object.defineProperty(uQ,"__esModule",{value:!0}),uQ.NamedNode=void 0;return uQ.NamedNode=class{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&"NamedNode"===e.termType&&e.value===this.value}},uQ}function lQ(){if(iQ)return sQ;iQ=1,Object.defineProperty(sQ,"__esModule",{value:!0}),sQ.Literal=void 0;const e=cQ();let t=class e{constructor(t,r){this.termType="Literal",this.value=t,"string"==typeof r?(this.language=r,this.datatype=e.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=e.XSD_STRING)}equals(e){return!!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&this.datatype.equals(e.datatype)}};return sQ.Literal=t,t.RDF_LANGUAGE_STRING=new e.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),t.XSD_STRING=new e.NamedNode("http://www.w3.org/2001/XMLSchema#string"),sQ}var pQ,dQ={};function fQ(){if(pQ)return dQ;pQ=1,Object.defineProperty(dQ,"__esModule",{value:!0}),dQ.Quad=void 0;return dQ.Quad=class{constructor(e,t,r,n){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=r,this.graph=n}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}},dQ}var hQ,yQ,gQ,mQ,bQ,vQ={};function _Q(){if(hQ)return vQ;hQ=1,Object.defineProperty(vQ,"__esModule",{value:!0}),vQ.Variable=void 0;return vQ.Variable=class{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&"Variable"===e.termType&&e.value===this.value}},vQ}function OQ(){return gQ||(gQ=1,e=Wk,t=Wk&&Wk.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Wk&&Wk.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(eQ(),e),r(function(){if(yQ)return rQ;yQ=1,Object.defineProperty(rQ,"__esModule",{value:!0}),rQ.DataFactory=void 0;const e=eQ(),t=aQ(),r=lQ(),n=cQ(),a=fQ(),o=_Q();let i=0;return rQ.DataFactory=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${i++}_`}namedNode(e){return new n.NamedNode(e)}blankNode(t){return new e.BlankNode(t||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new r.Literal(e,t)}variable(e){return new o.Variable(e)}defaultGraph(){return t.DefaultGraph.INSTANCE}quad(e,t,r,n){return new a.Quad(e,t,r,n||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(r.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}},rQ}(),e),r(aQ(),e),r(lQ(),e),r(cQ(),e),r(fQ(),e),r(_Q(),e)),Wk;var e,t,r}function TQ(){if(mQ)return Yk;mQ=1,Object.defineProperty(Yk,"__esModule",{value:!0}),Yk.ActorQueryOperationJoin=void 0;const e=Kd(),t=IR(),r=Ji(),n=kd(),a=Am(),o=ph(),i=OQ();let s=class extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"join")}async testOperation(e,t){return(0,r.passTestVoid)()}async runOperation(e,r){const s=(await Promise.all(e.input.map(async e=>({output:await this.mediatorQueryOperation.mediate({operation:e,context:r}),operation:e})))).map(({output:e,operation:t})=>({output:(0,a.getSafeBindings)(e),operation:t}));if((await Promise.all(s.map(e=>e.output.metadata()))).some(e=>0===e.cardinality.value&&"exact"===e.cardinality.type)){for(const e of s)e.output.bindingsStream.close();return{bindingsStream:new o.ArrayIterator([],{autoStart:!1}),metadata:async()=>({state:new n.MetadataValidationState,cardinality:{type:"exact",value:0},variables:t.ActorRdfJoin.joinVariables(new i.DataFactory,await t.ActorRdfJoin.getMetadatas(s))}),type:"bindings"}}return this.mediatorJoin.mediate({type:"inner",entries:s,context:r})}};return Yk.ActorQueryOperationJoin=s,Yk}function wQ(){return bQ||(bQ=1,e=Kk,t=Kk&&Kk.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Kk&&Kk.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(TQ(),e)),Kk;var e,t,r}var SQ,jQ,AQ={},FQ={};function EQ(){if(SQ)return FQ;SQ=1,Object.defineProperty(FQ,"__esModule",{value:!0}),FQ.ActorQueryOperationMinus=void 0;const e=Kd(),t=Ji(),r=Am();let n=class extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"minus")}async testOperation(e,r){return(0,t.passTestVoid)()}async runOperation(e,t){const n=e.metadata?.graphVariableFromParentScope,a=(await Promise.all(e.input.map(async e=>({output:await this.mediatorQueryOperation.mediate({operation:e,context:t}),operation:e})))).map(({output:e,operation:t})=>({output:(0,r.getSafeBindings)(e),operation:t}));return this.mediatorJoin.mediate({type:"minus",entries:a,context:t,graphVariableFromParentScope:n})}};return FQ.ActorQueryOperationMinus=n,FQ}function xQ(){return jQ||(jQ=1,e=AQ,t=AQ&&AQ.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=AQ&&AQ.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(EQ(),e)),AQ;var e,t,r}var PQ,DQ,MQ={},NQ={};function IQ(){if(PQ)return NQ;PQ=1,Object.defineProperty(NQ,"__esModule",{value:!0}),NQ.ActorQueryOperationLeftJoin=void 0;const e=Kd(),t=ls(),r=Ji(),n=Am(),a=Jl();let o=class extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"leftjoin")}async testOperation(e,t){return(0,r.passTestVoid)()}async runOperation(e,r){const o=r.getSafe(t.KeysInitQuery.dataFactory),i=new a.Factory(o),s=await Promise.all(e.input.map(async(t,a)=>{const o=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:t,context:r}));return e.expression&&1===a?{output:o,operation:i.createFilter(t,e.expression),operationRequired:!0}:{output:o,operation:t}}));return await this.mediatorJoin.mediate({type:"optional",entries:s,context:r})}};return NQ.ActorQueryOperationLeftJoin=o,NQ}function RQ(){return DQ||(DQ=1,e=MQ,t=MQ&&MQ.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=MQ&&MQ.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(IQ(),e)),MQ;var e,t,r}var LQ,CQ,BQ={},qQ={};function UQ(){if(LQ)return qQ;LQ=1,Object.defineProperty(qQ,"__esModule",{value:!0}),qQ.ActorQueryOperationPathSeq=void 0;const e=ak(),t=ls(),r=Am(),n=Jl();let a=class extends e.ActorAbstractPath{constructor(e){super(e,n.Algebra.types.SEQ)}async runOperation(e,a){const o=a.getSafe(t.KeysInitQuery.dataFactory),i=new n.Factory(o),s=e.predicate;let u=e.subject;const c=[],l=await Promise.all(s.input.map((t,r)=>{const n=r===s.input.length-1?e.object:this.generateVariable(o,e,`b${r}`),l=i.createPath(u,t,n,e.graph),p=this.mediatorQueryOperation.mediate({context:a,operation:l});return u=n,r<s.input.length-1&&c.push(n),{output:p,operation:l}}).map(async({output:e,operation:t})=>({output:(0,r.getSafeBindings)(await e),operation:t}))),p=(0,r.getSafeBindings)(await this.mediatorJoin.mediate({type:"inner",entries:l,context:a}));return{type:"bindings",bindingsStream:p.bindingsStream.transform({transform(e,t,r){for(const n of c)e=e.delete(n);r(e),t()}}),async metadata(){const e=await p.metadata(),t=e.variables.filter(e=>!c.some(t=>t.value===e.variable.value));return{...e,variables:t}}}}};return qQ.ActorQueryOperationPathSeq=a,qQ}function kQ(){return CQ||(CQ=1,e=BQ,t=BQ&&BQ.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=BQ&&BQ.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(UQ(),e)),BQ;var e,t,r}var QQ,VQ,GQ={},$Q={};function zQ(){if(QQ)return $Q;QQ=1,Object.defineProperty($Q,"__esModule",{value:!0}),$Q.ActorRdfJoinMultiSmallest=void 0;const e=IR(),t=ls(),r=Ji(),n=Am(),a=Jl();let o=class extends e.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"multi-smallest",limitEntries:3,limitEntriesMin:!0,canHandleUndefs:!0,isLeaf:!1})}getJoinIndexes(e){for(let t=0;t<e.length;t++)for(let r=t+1;r<e.length;r++)if(this.hasCommonVariables(e[t],e[r]))return[t,r];return[0,1]}hasCommonVariables(e,t){const r=e.metadata.variables.map(e=>e.variable.value),n=new Set(t.metadata.variables.map(e=>e.variable.value));return r.some(e=>n.has(e))}async sortJoinEntries(e,t){return(await this.mediatorJoinEntriesSort.mediate({entries:e,context:t})).entries}async getOutput(r,o){const i=r.context.getSafe(t.KeysInitQuery.dataFactory),s=new a.Factory(i),u=o.sortedEntries,c=await e.ActorRdfJoin.getEntriesWithMetadatas(u),l=this.getJoinIndexes(c),p=u[l[0]],d=u[l[1]];u.splice(l[1],1),u.splice(l[0],1);const f={output:(0,n.getSafeBindings)(await this.mediatorJoin.mediate({type:r.type,entries:[p,d],context:r.context})),operation:s.createJoin([p.operation,d.operation],!1)};return u.push(f),{result:await this.mediatorJoin.mediate({type:r.type,entries:u,context:r.context})}}async getJoinCoefficients(t,n){let{metadatas:a}=n;a=[...a];const o=await this.sortJoinEntries(t.entries.map((e,t)=>({...e,metadata:a[t]})),t.context);a=o.map(e=>e.metadata);const i=e.ActorRdfJoin.getRequestInitialTimes(a),s=e.ActorRdfJoin.getRequestItemTimes(a);return(0,r.passTestWithSideData)({iterations:a.reduce((e,t)=>e*t.cardinality.value,1),persistedItems:0,blockingItems:0,requestTime:a.reduce((e,t,r)=>e+i[r]+t.cardinality.value*s[r],0)},{...n,sortedEntries:o})}};return $Q.ActorRdfJoinMultiSmallest=o,$Q}function XQ(){return VQ||(VQ=1,e=GQ,t=GQ&&GQ.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=GQ&&GQ.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(zQ(),e)),GQ;var e,t,r}var HQ,JQ,KQ={},YQ={};function WQ(){if(HQ)return YQ;HQ=1,Object.defineProperty(YQ,"__esModule",{value:!0}),YQ.ActorQueryOperationLoad=void 0;const e=Kd(),t=ls(),r=Am(),n=Jl();let a=class extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"load")}async testOperation(e,t){return(0,r.testReadOnly)(t)}async runOperation(e,a){const o=a.getSafe(t.KeysInitQuery.dataFactory),i=new n.Factory(o);let s=a;e.silent&&(s=s.set(t.KeysInitQuery.lenient,!0));const{querySource:u}=await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{value:e.source.value},context:s});let c=(0,r.getSafeQuads)(await this.mediatorQueryOperation.mediate({operation:i.createConstruct((0,r.assignOperationSource)(i.createPattern(o.variable("s"),o.variable("p"),o.variable("o")),u),[i.createPattern(o.variable("s"),o.variable("p"),o.variable("o"))]),context:s})).quadStream;e.destination&&(c=c.map(t=>o.quad(t.subject,t.predicate,t.object,e.destination)));const{execute:l}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:c,context:a});return{type:"void",execute:l}}};return YQ.ActorQueryOperationLoad=a,YQ}function ZQ(){return JQ||(JQ=1,e=KQ,t=KQ&&KQ.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=KQ&&KQ.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(WQ(),e)),KQ;var e,t,r}var eV,tV,rV,nV={},aV={},oV={};function iV(){if(eV)return oV;eV=1,Object.defineProperty(oV,"__esModule",{value:!0}),oV.MaxAggregator=void 0;const e=bC();let t=class extends e.AggregateEvaluator{constructor(e,t,r,n){super(e,t,n),this.orderByEvaluator=r,this.state=void 0}putTerm(e){if("Literal"!==e.termType)throw new Error(`Term with value ${e.value} has type ${e.termType} and is not a literal`);(void 0===this.state||-1===this.orderByEvaluator.orderTypes(this.state,e))&&(this.state=e)}termResult(){return void 0===this.state?this.emptyValue():this.state}};return oV.MaxAggregator=t,oV}function sV(){if(tV)return aV;tV=1,Object.defineProperty(aV,"__esModule",{value:!0}),aV.ActorBindingsAggregatorFactoryMax=void 0;const e=bC(),t=Ji(),r=iV();let n=class extends e.ActorBindingsAggregatorFactory{constructor(e){super(e),this.mediatorTermComparatorFactory=e.mediatorTermComparatorFactory}async test(e){return"max"!==e.expr.aggregator?(0,t.failTest)("This actor only supports the 'max' aggregator."):(0,t.passTestVoid)()}async run({expr:e,context:t}){return new r.MaxAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:e.expression,context:t}),e.distinct,await this.mediatorTermComparatorFactory.mediate({context:t}))}};return aV.ActorBindingsAggregatorFactoryMax=n,aV}function uV(){return rV||(rV=1,e=nV,t=nV&&nV.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=nV&&nV.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(sV(),e),r(iV(),e)),nV;var e,t,r}var cV,lV,pV,dV={},fV={},hV={};function yV(){if(cV)return hV;cV=1,Object.defineProperty(hV,"__esModule",{value:!0}),hV.MinAggregator=void 0;const e=bC();let t=class extends e.AggregateEvaluator{constructor(e,t,r,n){super(e,t,n),this.orderByEvaluator=r,this.state=void 0}putTerm(e){if("Literal"!==e.termType)throw new Error(`Term with value ${e.value} has type ${e.termType} and is not a literal`);(void 0===this.state||1===this.orderByEvaluator.orderTypes(this.state,e))&&(this.state=e)}termResult(){return void 0===this.state?this.emptyValue():this.state}};return hV.MinAggregator=t,hV}function gV(){if(lV)return fV;lV=1,Object.defineProperty(fV,"__esModule",{value:!0}),fV.ActorBindingsAggregatorFactoryMin=void 0;const e=bC(),t=Ji(),r=yV();let n=class extends e.ActorBindingsAggregatorFactory{constructor(e){super(e),this.mediatorTermComparatorFactory=e.mediatorTermComparatorFactory}async test(e){return"min"!==e.expr.aggregator?(0,t.failTest)("This actor only supports the 'min' aggregator."):(0,t.passTestVoid)()}async run({context:e,expr:t}){return new r.MinAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:t.expression,context:e}),t.distinct,await this.mediatorTermComparatorFactory.mediate({context:e}))}};return fV.ActorBindingsAggregatorFactoryMin=n,fV}function mV(){return pV||(pV=1,e=dV,t=dV&&dV.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=dV&&dV.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(gV(),e),r(yV(),e)),dV;var e,t,r}var bV,vV,_V,OV={},TV={},wV={};function SV(){if(bV)return wV;bV=1,Object.defineProperty(wV,"__esModule",{value:!0}),wV.SortIterator=void 0;const e=ph();let t=class extends e.TransformIterator{constructor(e,t,r){super(e,r);const n=r&&r.window;this.windowLength=Number.isFinite(n)&&n>0?n:Number.POSITIVE_INFINITY,this.sort=t,this.sorted=[]}_read(e,t){let r,{length:n}=this.sorted;for(;n!==this.windowLength&&(r=this.source.read(),null!==r);){let e,t,a=0,o=n-1;for(;a<=o;)e=Math.trunc((a+o)/2),t=this.sort(r,this.sorted[e]),t<0?a=e+1:t>0?o=e-1:(a=e,o=-1);this.sorted.splice(a,0,r),n++}n===this.windowLength&&this._push(this.sorted.pop()),t()}_flush(e){let{length:t}=this.sorted;for(;t--;)this._push(this.sorted.pop());e()}};return wV.SortIterator=t,wV}function jV(){if(vV)return TV;vV=1,Object.defineProperty(TV,"__esModule",{value:!0}),TV.ActorQueryOperationOrderBy=void 0;const e=Kd(),t=Ji(),r=Sd(),n=Am(),a=Jl(),o=SV();let i=class extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"orderby"),this.window=e.window??Number.POSITIVE_INFINITY,this.mediatorExpressionEvaluatorFactory=e.mediatorExpressionEvaluatorFactory,this.mediatorTermComparatorFactory=e.mediatorTermComparatorFactory}async testOperation(){return(0,t.passTestVoid)()}async runOperation(e,t){const a=await this.mediatorQueryOperation.mediate({operation:e.input,context:t}),i=(0,n.getSafeBindings)(a),s={window:this.window};let{bindingsStream:u}=i;const c=await this.mediatorTermComparatorFactory.mediate({context:t});for(let n=e.expressions.length-1;n>=0;n--){let a=e.expressions[n];const i=this.isAscending(a);a=this.extractSortExpression(a);const l=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:a,context:t}),p=async(e,t,n)=>{try{n({bindings:e,result:await l.evaluate(e)})}catch(a){(0,r.isExpressionError)(a)||u.emit("error",a),n({bindings:e,result:void 0})}t()},d=u.transform({transform:p}),f=new o.SortIterator(d,(e,t)=>{let r=c.orderTypes(e.result,t.result);return i||(r*=-1),r},s);u=f.map(({bindings:e})=>e)}return{type:"bindings",bindingsStream:u,metadata:i.metadata}}extractSortExpression(e){const{expressionType:t,operator:r}=e;return t!==a.Algebra.expressionTypes.OPERATOR?e:"desc"===r?e.args[0]:e}isAscending(e){const{expressionType:t,operator:r}=e;return t!==a.Algebra.expressionTypes.OPERATOR||"desc"!==r}};return TV.ActorQueryOperationOrderBy=i,TV}function AV(){return _V||(_V=1,e=OV,t=OV&&OV.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=OV&&OV.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(jV(),e)),OV;var e,t,r}var FV,EV,xV={},PV={};function DV(){if(FV)return PV;FV=1,Object.defineProperty(PV,"__esModule",{value:!0}),PV.ActorOptimizeQueryOperationFilterPushdown=void 0;const e=Wy(),t=ls(),r=Ji(),n=Am(),a=ry(),o=Jl();let i=class extends e.ActorOptimizeQueryOperation{constructor(e){super(e)}async test(e){return(0,r.passTestVoid)()}async run(e){const r=e.context.getSafe(t.KeysInitQuery.dataFactory),a=new o.Factory(r);let i=e.operation;const s=this;this.splitConjunctive&&(i=o.Util.mapOperation(i,{filter:(t,r)=>t.expression.expressionType===o.Algebra.expressionTypes.OPERATOR&&"&&"===t.expression.operator?(s.logDebug(e.context,`Split conjunctive filter into ${t.expression.args.length} nested filters`),{recurse:!0,result:t.expression.args.reduce((e,t)=>r.createFilter(e,t),t.input)}):{recurse:!0,result:t}},a));const u=this.getSources(i),c=new Map(await Promise.all(u.map(async t=>[t,await t.source.getSelectorShape(e.context)])));let l=!0,p=0;for(;l&&p<this.maxIterations;)l=!1,i=o.Util.mapOperation(i,{filter(r,a){const o=e.context.get(t.KeysInitQuery.extensionFunctions),i=e.context.get(t.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(!s.shouldAttemptPushDown(r,u,c,o,i))return{recurse:!0,result:r};const p=(0,n.getExpressionVariables)(r.expression),[d,f]=s.filterPushdown(r.expression,p,r.input,a,e.context);return d&&(l=!0),{recurse:!0,result:f}}}),p++;return p>1&&s.logDebug(e.context,`Pushed down filters in ${p} iterations`),this.mergeConjunctive&&(i=o.Util.mapOperation(i,{filter(t,r){if(t.input.type===o.Algebra.types.FILTER){const{nestedExpressions:n,input:a}=s.getNestedFilterExpressions(t);return s.logDebug(e.context,`Merge ${n.length} nested filters into conjunctive filter`),{recurse:!0,result:r.createFilter(a,n.slice(1).reduce((e,t)=>r.createOperatorExpression("&&",[e,t]),n[0]))}}return{recurse:!0,result:t}}})),{operation:i,context:e.context}}shouldAttemptPushDown(e,t,r,a,i){if(this.aggressivePushdown)return!0;const s=e.expression;return s.expressionType===o.Algebra.expressionTypes.OPERATOR&&"="===s.operator&&("term"===s.args[0].expressionType&&"Variable"!==s.args[0].term.termType&&"term"===s.args[1].expressionType&&"Variable"===s.args[1].term.termType||"term"===s.args[0].expressionType&&"Variable"===s.args[0].term.termType&&"term"===s.args[1].expressionType&&"Variable"!==s.args[1].term.termType)||!(a&&s.expressionType===o.Algebra.expressionTypes.NAMED&&s.name.value in a&&!t.some(e=>(0,n.doesShapeAcceptOperation)(r.get(e),s)))&&!!t.some(t=>(0,n.doesShapeAcceptOperation)(r.get(t),e,{wildcardAcceptAllExtensionFunctions:i}))}getSources(e){const t=new Set,r=e=>{const r=(0,n.getOperationSource)(e);return r&&t.add(r),!1};return o.Util.recurseOperation(e,{[o.Algebra.types.PATTERN]:r,[o.Algebra.types.LINK]:r,[o.Algebra.types.NPS]:r,[o.Algebra.types.SERVICE]:r}),[...t]}getOverlappingOperations(e,t){const r=[],n=[],a=[];for(const i of e.input){const e=o.Util.inScopeVariables(i);this.variablesSubSetOf(t,e)?r.push(i):this.variablesIntersect(t,e)?n.push(i):a.push(i)}return{fullyOverlapping:r,partiallyOverlapping:n,notOverlapping:a}}filterPushdown(e,t,r,n,i){if(this.isExpressionFalse(e))return[!0,n.createUnion([])];if(e.expressionType===o.Algebra.expressionTypes.EXISTENCE)return[!1,n.createFilter(r,e)];switch(r.type){case o.Algebra.types.EXTEND:return this.variablesIntersect([r.variable],t)?[!1,n.createFilter(r,e)]:[!0,n.createExtend(this.filterPushdown(e,t,r.input,n,i)[1],r.variable,r.expression)];case o.Algebra.types.FILTER:{const[a,o]=this.filterPushdown(e,t,r.input,n,i);return[a,n.createFilter(o,r.expression)]}case o.Algebra.types.JOIN:{if(0===r.input.length)return[!1,n.createFilter(r,e)];const{fullyOverlapping:a,partiallyOverlapping:o,notOverlapping:s}=this.getOverlappingOperations(r,t),u=[];let c=!1;return a.length>0&&(c=!0,u.push(n.createJoin(a.map(r=>this.filterPushdown(e,t,r,n,i)[1])))),o.length>0&&u.push(n.createFilter(n.createJoin(o,!1),e)),s.length>0&&u.push(...s),u.length>1&&(c=!0),c&&this.logDebug(i,`Push down filter across join entries with ${a.length} fully overlapping, ${o.length} partially overlapping, and ${s.length} not overlapping`),[c,1===u.length?u[0]:n.createJoin(u)]}case o.Algebra.types.NOP:return[!0,r];case o.Algebra.types.PROJECT:return this.variablesIntersect(r.variables,t)?[!0,n.createProject(this.filterPushdown(e,t,r.input,n,i)[1],r.variables)]:[!0,r];case o.Algebra.types.UNION:{const{fullyOverlapping:a,partiallyOverlapping:o,notOverlapping:s}=this.getOverlappingOperations(r,t),u=[];let c=!1;return a.length>0&&(c=!0,u.push(n.createUnion(a.map(r=>this.filterPushdown(e,t,r,n,i)[1])))),o.length>0&&u.push(n.createFilter(n.createUnion(o,!1),e)),s.length>0&&u.push(...s),u.length>1&&(c=!0),c&&this.logDebug(i,`Push down filter across union entries with ${a.length} fully overlapping, ${o.length} partially overlapping, and ${s.length} not overlapping`),[c,1===u.length?u[0]:n.createUnion(u)]}case o.Algebra.types.VALUES:return this.variablesIntersect(r.variables,t)?[!1,n.createFilter(r,e)]:[!0,r];case o.Algebra.types.LEFT_JOIN:if(this.pushIntoLeftJoins){const a=o.Util.inScopeVariables(r.input[1]);if(!this.variablesIntersect(t,a))return this.logDebug(i,"Push down filter into left join"),[!0,n.createLeftJoin(this.filterPushdown(e,t,r.input[0],n,i)[1],r.input[1],r.expression)]}return[!1,n.createFilter(r,e)];case o.Algebra.types.PATTERN:if(this.pushEqualityIntoPatterns){const t=this.getEqualityExpressionPushableIntoPattern(e);if(t){let e=!1;const s=r.metadata;if((r=(0,a.mapTermsNested)(r,r=>r.equals(t.variable)?(e=!0,t.term):r)).type=o.Algebra.types.PATTERN,r.metadata=s,e)return this.logDebug(i,`Push down filter into pattern for ?${t.variable.value}`),[!0,n.createJoin([r,n.createValues([t.variable],[{[`?${t.variable.value}`]:t.term}])])]}}return[!1,n.createFilter(r,e)];case o.Algebra.types.PATH:if(this.pushEqualityIntoPatterns){const t=this.getEqualityExpressionPushableIntoPattern(e);if(t&&(r.subject.equals(t.variable)||r.object.equals(t.variable))){this.logDebug(i,`Push down filter into path for ?${t.variable.value}`);const e=r.metadata;return(r=n.createPath(r.subject.equals(t.variable)?t.term:r.subject,r.predicate,r.object.equals(t.variable)?t.term:r.object)).metadata=e,[!0,n.createJoin([r,n.createValues([t.variable],[{[`?${t.variable.value}`]:t.term}])])]}}return[!1,n.createFilter(r,e)];case o.Algebra.types.MINUS:case o.Algebra.types.ALT:case o.Algebra.types.ASK:case o.Algebra.types.BGP:case o.Algebra.types.CONSTRUCT:case o.Algebra.types.DESCRIBE:case o.Algebra.types.DISTINCT:case o.Algebra.types.EXPRESSION:case o.Algebra.types.FROM:case o.Algebra.types.GRAPH:case o.Algebra.types.GROUP:case o.Algebra.types.INV:case o.Algebra.types.LINK:case o.Algebra.types.NPS:case o.Algebra.types.ONE_OR_MORE_PATH:case o.Algebra.types.ORDER_BY:case o.Algebra.types.REDUCED:case o.Algebra.types.SEQ:case o.Algebra.types.SERVICE:case o.Algebra.types.SLICE:case o.Algebra.types.ZERO_OR_MORE_PATH:case o.Algebra.types.ZERO_OR_ONE_PATH:case o.Algebra.types.COMPOSITE_UPDATE:case o.Algebra.types.DELETE_INSERT:case o.Algebra.types.LOAD:case o.Algebra.types.CLEAR:case o.Algebra.types.CREATE:case o.Algebra.types.DROP:case o.Algebra.types.ADD:case o.Algebra.types.MOVE:case o.Algebra.types.COPY:return[!1,n.createFilter(r,e)]}}getEqualityExpressionPushableIntoPattern(e){if(e.expressionType===o.Algebra.expressionTypes.OPERATOR&&"="===e.operator){if("term"===e.args[0].expressionType&&"Variable"!==e.args[0].term.termType&&("Literal"!==e.args[0].term.termType||this.isLiteralWithCanonicalLexicalForm(e.args[0].term))&&"term"===e.args[1].expressionType&&"Variable"===e.args[1].term.termType)return{variable:e.args[1].term,term:e.args[0].term};if("term"===e.args[0].expressionType&&"Variable"===e.args[0].term.termType&&"term"===e.args[1].expressionType&&"Variable"!==e.args[1].term.termType&&("Literal"!==e.args[1].term.termType||this.isLiteralWithCanonicalLexicalForm(e.args[1].term)))return{variable:e.args[0].term,term:e.args[1].term}}}isLiteralWithCanonicalLexicalForm(e){switch(e.datatype.value){case"http://www.w3.org/2001/XMLSchema#string":case"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":case"http://www.w3.org/2001/XMLSchema#normalizedString":case"http://www.w3.org/2001/XMLSchema#anyURI":case"http://www.w3.org/2001/XMLSchema#base64Binary":case"http://www.w3.org/2001/XMLSchema#language":case"http://www.w3.org/2001/XMLSchema#Name":case"http://www.w3.org/2001/XMLSchema#NCName":case"http://www.w3.org/2001/XMLSchema#NMTOKEN":case"http://www.w3.org/2001/XMLSchema#token":case"http://www.w3.org/2001/XMLSchema#hexBinary":return!0}return!1}variablesIntersect(e,t){return e.some(e=>t.some(t=>e.equals(t)))}variablesSubSetOf(e,t){return e.length<=t.length&&e.every(e=>t.some(t=>e.equals(t)))}isExpressionFalse(e){return e.term&&"Literal"===e.term.termType&&"false"===e.term.value}getNestedFilterExpressions(e){if(e.input.type===o.Algebra.types.FILTER){const t=this.getNestedFilterExpressions(e.input);return{nestedExpressions:[e.expression,...t.nestedExpressions],input:t.input}}return{nestedExpressions:[e.expression],input:e.input}}};return PV.ActorOptimizeQueryOperationFilterPushdown=i,PV}function MV(){return EV||(EV=1,e=xV,t=xV&&xV.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=xV&&xV.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(DV(),e)),xV;var e,t,r}var NV,IV,RV={},LV={};function CV(){if(NV)return LV;NV=1,Object.defineProperty(LV,"__esModule",{value:!0}),LV.ActorContextPreprocessQuerySourceIdentify=void 0;const e=sf(),t=ls(),r=Ji(),n=Td();let a=class extends e.ActorContextPreprocess{constructor(e){super(e),this.cache=this.cacheSize?new n.LRUCache({max:this.cacheSize}):void 0;const t=this.cache;t&&this.httpInvalidator.addInvalidateListener(({url:e})=>e?t.delete(e):t.clear())}async test(e){return(0,r.passTestVoid)()}async run(e){let r=e.context;if(r.has(t.KeysInitQuery.querySourcesUnidentified)){const n=e.context.get(t.KeysInitQuery.querySourcesUnidentified),a=await Promise.all(n.map(e=>this.expandSource(e))),o=await Promise.all(a.map(async t=>this.identifySource(t,e.context))),i=e.context.get(t.KeysStatistics.dereferencedLinks);if(i)for(const e of o)i.updateStatistic({url:e.source.referenceValue,metadata:{seed:!0}},e.source);r=e.context.delete(t.KeysInitQuery.querySourcesUnidentified).set(t.KeysQueryOperation.querySources,o)}return{context:r}}async expandSource(e){return"string"==typeof e||"match"in e?{value:e}:{...e,context:(await this.mediatorContextPreprocess.mediate({context:r.ActionContext.ensureActionContext(e.context??{})})).context}}identifySource(e,t){let r;return"string"==typeof e.value&&this.cache&&(r=this.cache.get(e.value)),r||(r=this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:e,context:t}).then(({querySource:e})=>e),"string"==typeof e.value&&this.cache&&this.cache.set(e.value,r)),r}};return LV.ActorContextPreprocessQuerySourceIdentify=a,LV}function BV(){return IV||(IV=1,e=RV,t=RV&&RV.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=RV&&RV.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(CV(),e)),RV;var e,t,r}var qV,UV,kV={},QV={},VV={},GV={};function $V(){if(qV)return GV;qV=1,Object.defineProperty(GV,"__esModule",{value:!0}),GV.ActorExpressionEvaluatorFactory=void 0;const e=Ji();let t=class extends e.Actor{constructor(e){super(e),this.mediatorQueryOperation=e.mediatorQueryOperation,this.mediatorFunctionFactory=e.mediatorFunctionFactory,this.mediatorMergeBindingsContext=e.mediatorMergeBindingsContext}};return GV.ActorExpressionEvaluatorFactory=t,GV}function zV(){return UV||(UV=1,e=VV,t=VV&&VV.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=VV&&VV.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r($V(),e)),VV;var e,t,r}var XV,HV={};function JV(){if(XV)return HV;XV=1,Object.defineProperty(HV,"__esModule",{value:!0}),HV.AlgebraTransformer=void 0;const e=ls(),t=Sd(),r=Jl();let n=class n extends t.TermTransformer{constructor(t,r){super(t.getSafe(e.KeysExpressionEvaluator.superTypeProvider)),this.context=t,this.mediatorFunctionFactory=r}async transformAlgebra(e){const t=r.Algebra.expressionTypes;switch(e.expressionType){case t.TERM:return this.transformTerm(e);case t.OPERATOR:return await this.transformOperator(e);case t.NAMED:return await this.transformNamed(e);case t.EXISTENCE:return n.transformExistence(e);case t.AGGREGATE:return n.transformAggregate(e);case t.WILDCARD:return n.transformWildcard(e)}}static transformWildcard(e){return new t.NamedNode(e.wildcard.value)}async getOperator(e,r){const n=await this.mediatorFunctionFactory.mediate({functionName:e,arguments:r.args,context:this.context}),a=await Promise.all(r.args.map(e=>this.transformAlgebra(e)));if(!n.checkArity(a))throw new t.InvalidArity(a,e);return new t.Operator(e,a,n.apply)}async transformOperator(e){return this.getOperator(e.operator.toLowerCase(),e)}async transformNamed(e){return this.getOperator(e.name.value,e)}static transformAggregate(e){const r=e.aggregator;return new t.Aggregate(r,e)}static transformExistence(e){return new t.Existence(e)}};return HV.AlgebraTransformer=n,HV}var KV,YV,WV,ZV,eG={},tG={};function rG(){if(KV)return tG;KV=1,Object.defineProperty(tG,"__esModule",{value:!0}),tG.InternalEvaluator=void 0;const e=ls(),t=Eu(),r=Sd(),n=Am(),a=Jl(),o=JV();return tG.InternalEvaluator=class{constructor(e,r,n,a){this.context=e,this.mediatorQueryOperation=n,this.bindingsFactory=a,this.subEvaluators={[t.ExpressionType.Term]:(e,t)=>this.term(e),[t.ExpressionType.Variable]:(e,t)=>this.variable(e,t),[t.ExpressionType.Operator]:(e,t)=>this.evalFunction(e,t),[t.ExpressionType.Existence]:(e,t)=>this.evalExistence(e,t),[t.ExpressionType.Aggregate]:(e,t)=>this.evalAggregate()},this.transformer=new o.AlgebraTransformer(e,r)}async evaluatorExpressionEvaluation(e,t){return this.subEvaluators[e.expressionType].bind(this)(e,t)}term(e){return e}variable(t,n){const a=n.get(r.expressionToVar(this.context.getSafe(e.KeysInitQuery.dataFactory),t));if(!a)throw new r.UnboundVariableError(t.name,n);return this.transformer.transformRDFTermUnsafe(a)}async evalFunction(e,t){return e.apply({args:e.args,mapping:t,exprEval:this})}async evalExistence(t,o){const i=this.context.getSafe(e.KeysInitQuery.dataFactory),s=new a.Factory(i),u=(0,n.materializeOperation)(t.expression.input,o,s,this.bindingsFactory),c=await this.mediatorQueryOperation.mediate({operation:u,context:this.context}),l=(0,n.getSafeBindings)(c);return await new Promise((e,t)=>{l.bindingsStream.on("end",()=>{e(!1)}),l.bindingsStream.on("error",t),l.bindingsStream.on("data",()=>{l.bindingsStream.close(),e(!0)})}).then(e=>t.expression.not?!e:e).then(e=>new r.BooleanLiteral(e))}evalAggregate(){throw new r.NoAggregator}},tG}function nG(){if(YV)return eG;YV=1,Object.defineProperty(eG,"__esModule",{value:!0}),eG.ExpressionEvaluator=void 0;const e=ls(),t=rG();return eG.ExpressionEvaluator=class{constructor(e,r,n,a,o){this.context=e,this.expr=r,this.mediatorFunctionFactory=n,this.mediatorQueryOperation=a,this.bindingsFactory=o,this.internalEvaluator=new t.InternalEvaluator(e,n,a,o)}async evaluate(t){return(await this.internalEvaluator.evaluatorExpressionEvaluation(this.expr,t)).toRDF(this.context.getSafe(e.KeysInitQuery.dataFactory))}async evaluateAsEBV(e){return(await this.internalEvaluator.evaluatorExpressionEvaluation(this.expr,e)).coerceEBV()}evaluateAsEvaluatorExpression(e){return this.evaluatorExpressionEvaluation(this.expr,e)}evaluatorExpressionEvaluation(e,t){return this.internalEvaluator.evaluatorExpressionEvaluation(e,t)}},eG}function aG(){if(WV)return QV;WV=1,Object.defineProperty(QV,"__esModule",{value:!0}),QV.ActorExpressionEvaluatorFactoryDefault=void 0;const e=zV(),t=ls(),r=Ji(),n=XL(),a=Sd(),o=JV(),i=nG();let s=class extends e.ActorExpressionEvaluatorFactory{constructor(e){super(e)}async test(e){return(0,r.passTestVoid)()}async run(e){const r=(0,a.prepareEvaluatorActionContext)(e.context);return new i.ExpressionEvaluator(r,await new o.AlgebraTransformer(r,this.mediatorFunctionFactory).transformAlgebra(e.algExpr),this.mediatorFunctionFactory,this.mediatorQueryOperation,await n.BindingsFactory.create(this.mediatorMergeBindingsContext,e.context,e.context.getSafe(t.KeysInitQuery.dataFactory)))}};return QV.ActorExpressionEvaluatorFactoryDefault=s,QV}function oG(){return ZV||(ZV=1,e=kV,t=kV&&kV.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=kV&&kV.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(aG(),e)),kV;var e,t,r}var iG,sG,uG,cG={},lG={},pG={};function dG(){if(iG)return pG;iG=1,Object.defineProperty(pG,"__esModule",{value:!0}),pG.GroupsState=void 0;const e=ls(),t=XL();return pG.GroupsState=class{constructor(e,t,r,n,a){this.pattern=e,this.mediatorBindingsAggregatorFactory=t,this.context=r,this.bindingsFactory=n,this.variables=a,this.groups=new Map,this.groupsInitializer=new Map,this.groupVariables=new Set(this.pattern.variables.map(e=>e.value)),this.waitCounter=1,this.resultHasBeenCalled=!1}consumeBindings(e){const t=this.resultCheck();if(t)return t;this.waitCounter++;const r=e.filter((e,t)=>this.groupVariables.has(t.value)),n=this.hashBindings(r);let a,o=this.groupsInitializer.get(n);if(o){const t=o;a=(async()=>{const r=await t;await Promise.all(this.pattern.aggregates.map(async t=>{const n=t.variable.value;await r.aggregators[n].putBindings(e)}))})().then(async()=>{await this.subtractWaitCounterAndCollect()})}else o=(async()=>{const t={};await Promise.all(this.pattern.aggregates.map(async r=>{const n=r.variable.value;t[n]=await this.mediatorBindingsAggregatorFactory.mediate({expr:r,context:this.context}),await t[n].putBindings(e)}));const a={aggregators:t,bindings:r};return this.groups.set(n,a),await this.subtractWaitCounterAndCollect(),a})(),this.groupsInitializer.set(n,o),a=o;return a}async subtractWaitCounterAndCollect(){0===--this.waitCounter&&await this.handleResultCollection()}async handleResultCollection(){const t=this.context.getSafe(e.KeysInitQuery.dataFactory);let r=await Promise.all([...this.groups].map(async([e,r])=>{const{bindings:n,aggregators:a}=r;let o=n;for(const i in a){const e=await a[i].result();e&&(o=o.set(t.variable(i),e))}return o}));if(0===r.length&&0===this.groupVariables.size){const e=[];await Promise.all(this.pattern.aggregates.map(async t=>{const r=t.variable,n=await this.mediatorBindingsAggregatorFactory.mediate({expr:t,context:this.context}),a=await n.result();void 0!==a&&e.push([r,a])})),r=[this.bindingsFactory.bindings(e)]}this.waitResolver(r)}resultCheck(){if(this.resultHasBeenCalled)return Promise.reject(new Error("Calling any function after calling collectResult is invalid."))}async collectResults(){const e=this.resultCheck();if(e)return e;this.resultHasBeenCalled=!0;const t=new Promise(e=>{this.waitResolver=e});return await this.subtractWaitCounterAndCollect(),t}hashBindings(e){return(0,t.bindingsToCompactString)(e,this.variables)}},pG}function fG(){if(sG)return lG;sG=1,Object.defineProperty(lG,"__esModule",{value:!0}),lG.ActorQueryOperationGroup=void 0;const e=Kd(),t=ls(),r=Ji(),n=XL(),a=Am(),o=ph(),i=dG();let s=class extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"group"),this.mediatorBindingsAggregatorFactory=e.mediatorBindingsAggregatorFactory}async testOperation(){return(0,r.passTestVoid)()}async runOperation(e,r){const s=r.getSafe(t.KeysInitQuery.dataFactory),u=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,r,s),{input:c,aggregates:l}=e,p=await this.mediatorQueryOperation.mediate({operation:c,context:r}),d=(0,a.getSafeBindings)(p),f=[...e.variables,...l.map(e=>e.variable)].map(e=>({variable:e,canBeUndef:!1})),h=(await d.metadata()).variables.map(e=>e.variable);return{type:"bindings",bindingsStream:new o.TransformIterator(()=>new Promise((t,n)=>{const a=new i.GroupsState(e,this.mediatorBindingsAggregatorFactory,r,u,h);d.bindingsStream.on("end",async()=>{try{const e=new o.ArrayIterator(await a.collectResults(),{autoStart:!1});t(e)}catch(e){n(e)}}),d.bindingsStream.on("error",n),d.bindingsStream.on("data",e=>{a.consumeBindings(e).catch(n)})}),{autoStart:!1}),metadata:async()=>({...await d.metadata(),variables:f})}}};return lG.ActorQueryOperationGroup=s,lG}function hG(){return uG||(uG=1,e=cG,t=cG&&cG.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=cG&&cG.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(fG(),e)),cG;var e,t,r}var yG,gG,mG={},bG={};function vG(){if(yG)return bG;yG=1,Object.defineProperty(bG,"__esModule",{value:!0}),bG.ActorQueryOperationNop=void 0;const e=Kd(),t=ls(),r=Ji(),n=XL(),a=kd(),o=ph();let i=class extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"nop")}async testOperation(e,t){return(0,r.passTestVoid)()}async runOperation(e,r){const i=r.getSafe(t.KeysInitQuery.dataFactory),s=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,r,i);return{bindingsStream:new o.SingletonIterator(s.bindings()),metadata:()=>Promise.resolve({state:new a.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]}),type:"bindings"}}};return bG.ActorQueryOperationNop=i,bG}function _G(){return gG||(gG=1,e=mG,t=mG&&mG.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=mG&&mG.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(vG(),e)),mG;var e,t,r}var OG,TG,wG={},SG={};function jG(){if(OG)return SG;OG=1,Object.defineProperty(SG,"__esModule",{value:!0}),SG.ActorQueryOperationService=void 0;const e=Kd(),t=ls(),r=Ji(),n=XL(),a=kd(),o=Am(),i=ph(),s=Td();let u=class extends e.ActorQueryOperationTypedMediated{constructor(e){super(e,"service"),e.cacheSize&&e.httpInvalidator&&e.cacheSize>0&&(this.cache=new s.LRUCache({max:e.cacheSize}),e.httpInvalidator.addInvalidateListener(e=>this.handleHttpInvalidateEvent(e)))}async testOperation(e,t){return"NamedNode"!==e.name.termType?(0,r.failTest)(`${this.name} can only query services by IRI, while a ${e.name.termType} was given.`):(0,r.passTestVoid)()}async runOperation(e,r){let s,u=this.cache?.get(e.name.value);u||(u=(await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{value:e.name.value,type:this.forceSparqlEndpoint?"sparql":void 0},context:r})).querySource,this.cache?.set(e.name.value,u));try{s=(0,o.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:(0,o.assignOperationSource)(e.input,u),context:r}))}catch(c){if(!e.silent)throw c;{const e=r.getSafe(t.KeysInitQuery.dataFactory),o=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,r,e);s={bindingsStream:new i.SingletonIterator(o.bindings()),type:"bindings",metadata:async()=>({state:new a.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]})},this.logWarn(r,`An error occurred when executing a SERVICE clause: ${c.message}`)}}return s}handleHttpInvalidateEvent(e){e.url?this.cache?.delete(e.url):this.cache?.clear()}};return SG.ActorQueryOperationService=u,SG}function AG(){return TG||(TG=1,e=wG,t=wG&&wG.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=wG&&wG.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(jG(),e)),wG;var e,t,r}var FG,EG,xG={},PG={};function DG(){if(FG)return PG;FG=1,Object.defineProperty(PG,"__esModule",{value:!0}),PG.ActorQueryOperationValues=void 0;const e=Kd(),t=ls(),r=Ji(),n=XL(),a=kd(),o=ph();let i=class extends e.ActorQueryOperationTyped{constructor(e){super(e,"values")}async testOperation(e,t){return(0,r.passTestVoid)()}async runOperation(e,r){const i=r.getSafe(t.KeysInitQuery.dataFactory),s=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,r,i);return{type:"bindings",bindingsStream:new o.ArrayIterator(e.bindings.map(e=>s.bindings(Object.entries(e).map(([e,t])=>[i.variable(e.slice(1)),t])))),metadata:()=>Promise.resolve({state:new a.MetadataValidationState,cardinality:{type:"exact",value:e.bindings.length},variables:e.variables.map(t=>({variable:t,canBeUndef:e.bindings.some(e=>!(`?${t.value}`in e))}))})}}};return PG.ActorQueryOperationValues=i,PG}function MG(){return EG||(EG=1,e=xG,t=xG&&xG.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=xG&&xG.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(DG(),e)),xG;var e,t,r}var NG,IG,RG={},LG={};function CG(){if(NG)return LG;NG=1,Object.defineProperty(LG,"__esModule",{value:!0}),LG.ActorQueryOperationPathOneOrMore=void 0;const e=ak(),t=ls(),r=XL(),n=Am(),a=ph(),o=Jl();let i=class extends e.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.ONE_OR_MORE_PATH)}async runOperation(e,i){const s=i.getSafe(t.KeysInitQuery.dataFactory),u=new o.Factory(s),c=await r.BindingsFactory.create(this.mediatorMergeBindingsContext,i,s),l=await this.isPathArbitraryLengthDistinct(u,i,e);if(l.operation)return l.operation;i=l.context;const p=e.predicate;if("Variable"!==e.subject.termType&&"Variable"===e.object.termType){const t=e.object,r=await this.getObjectsPredicateStarEval(e.subject,p.path,t,e.graph,i,!1,u,c),n=("Variable"===e.graph.termType?[t,e.graph]:[t]).map(e=>({variable:e,canBeUndef:!1}));return{type:"bindings",bindingsStream:r.bindingsStream,metadata:async()=>({...await r.metadata(),variables:n})}}if("Variable"===e.subject.termType&&"Variable"===e.object.termType){const t=u.createDistinct(u.createPath(e.subject,e.predicate.path,e.object,e.graph)),r=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:i,operation:t})),o=e.subject,s=e.object,l={},d=new a.MultiTransformIterator(r.bindingsStream,{multiTransform:t=>{const r=t.get(o),n=t.get(s),d="Variable"===e.graph.termType?t.get(e.graph):e.graph;return new a.TransformIterator(async()=>{const t=new a.BufferedIterator;return await this.getSubjectAndObjectBindingsPredicateStar(o,s,r,n,p.path,d,i,l,{},t,{count:0},u,c),t.map(t=>("Variable"===e.graph.termType&&(t=t.set(e.graph,d)),t))},{autoStart:!1,maxBufferSize:128})},autoStart:!1}),f=("Variable"===e.graph.termType?[o,s,e.graph]:[o,s]).map(e=>({variable:e,canBeUndef:!1}));return{type:"bindings",bindingsStream:d,metadata:async()=>({...await r.metadata(),variables:f})}}if("Variable"===e.subject.termType&&"Variable"!==e.object.termType)return this.mediatorQueryOperation.mediate({context:i,operation:u.createPath(e.object,u.createOneOrMorePath(u.createInv(p.path)),e.subject,e.graph)});const d=this.generateVariable(s),f=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:i,operation:u.createPath(e.subject,p,d,e.graph)}));return{type:"bindings",bindingsStream:f.bindingsStream.map(t=>e.object.equals(t.get(d))?"Variable"===e.graph.termType?c.bindings([[e.graph,t.get(e.graph)]]):c.bindings():null),metadata:async()=>({...await f.metadata(),variables:("Variable"===e.graph.termType?[e.graph]:[]).map(e=>({variable:e,canBeUndef:!1}))})}}};return LG.ActorQueryOperationPathOneOrMore=i,LG}function BG(){return IG||(IG=1,e=RG,t=RG&&RG.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=RG&&RG.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(CG(),e)),RG;var e,t,r}var qG,UG,kG={},QG={};function VG(){if(qG)return QG;qG=1,Object.defineProperty(QG,"__esModule",{value:!0}),QG.ActorQueryOperationPathZeroOrMore=void 0;const e=ak(),t=ls(),r=XL(),n=Am(),a=ph(),o=mc(),i=Jl();let s=class extends e.ActorAbstractPath{constructor(e){super(e,i.Algebra.types.ZERO_OR_MORE_PATH)}async runOperation(e,s){const u=s.getSafe(t.KeysInitQuery.dataFactory),c=new i.Factory(u),l=await r.BindingsFactory.create(this.mediatorMergeBindingsContext,s,u),p=await this.isPathArbitraryLengthDistinct(c,s,e);if(p.operation)return p.operation;s=p.context;const d=e.predicate,f=this.getPathSources(d),h="Variable"===e.subject.termType,y="Variable"===e.object.termType;if("Variable"===e.subject.termType&&"Variable"===e.object.termType){const t=this.generateVariable(u,e),r=this.assignPatternSources(c,c.createPattern(e.subject,t,e.object,e.graph),f),i=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:s,operation:r})),p=e.subject,h=e.object,y=new Set,g={},m=new a.MultiTransformIterator(i.bindingsStream,{multiTransform:t=>{const r=t.get(p),n=t.get(h),i="Variable"===e.graph.termType?t.get(e.graph):e.graph,u=(0,o.termToString)(r)+(0,o.termToString)(i),f=(0,o.termToString)(n)+(0,o.termToString)(i);return new a.TransformIterator(async()=>{if(y.has(u)&&y.has(f))return new a.EmptyIterator;const t=new a.BufferedIterator,o={count:0};return y.has(u)||(y.add(u),await this.getSubjectAndObjectBindingsPredicateStar(p,h,r,r,d.path,i,s,g,{},t,o,c,l)),y.has(f)||(y.add(f),await this.getSubjectAndObjectBindingsPredicateStar(p,h,n,n,d.path,i,s,g,{},t,o,c,l)),t.map(t=>("Variable"===e.graph.termType&&(t=t.set(e.graph,i)),t))},{autoStart:!1,maxBufferSize:128})},autoStart:!1}),b=("Variable"===e.graph.termType?[p,e.object,e.graph]:[p,e.object]).map(e=>({variable:e,canBeUndef:!1}));return{type:"bindings",bindingsStream:m,metadata:async()=>({...await i.metadata(),variables:b})}}if(!h&&!y){const t=this.generateVariable(u),r=await this.getObjectsPredicateStarEval(e.subject,d.path,t,e.graph,s,!0,c,l);return{type:"bindings",bindingsStream:r.bindingsStream.map(r=>e.object.equals(r.get(t))?"Variable"===e.graph.termType?l.bindings([[e.graph,r.get(e.graph)]]):l.bindings():null),metadata:async()=>({...await r.metadata(),variables:("Variable"===e.graph.termType?[e.graph]:[]).map(e=>({variable:e,canBeUndef:!1}))})}}const g=h?e.object:e.subject,m=h?e.subject:e.object,b=h?c.createInv(d.path):d.path,v=await this.getObjectsPredicateStarEval(g,b,m,e.graph,s,!0,c,l),_=("Variable"===e.graph.termType?[m,e.graph]:[m]).map(e=>({variable:e,canBeUndef:!1}));return{type:"bindings",bindingsStream:v.bindingsStream,metadata:async()=>({...await v.metadata(),variables:_})}}};return QG.ActorQueryOperationPathZeroOrMore=s,QG}function GG(){return UG||(UG=1,e=kG,t=kG&&kG.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=kG&&kG.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(VG(),e)),kG;var e,t,r}var $G,zG,XG={},HG={};function JG(){if($G)return HG;$G=1,Object.defineProperty(HG,"__esModule",{value:!0}),HG.ActorQueryOperationPathZeroOrOne=void 0;const e=ak(),t=ls(),r=XL(),n=kd(),a=Am(),o=ph(),i=Jl();let s=class extends e.ActorAbstractPath{constructor(e){super(e,i.Algebra.types.ZERO_OR_ONE_PATH)}async runOperation(e,s){const u=s.getSafe(t.KeysInitQuery.dataFactory),c=new i.Factory(u),l=await r.BindingsFactory.create(this.mediatorMergeBindingsContext,s,u),p=e.predicate,d=this.getPathSources(p),f=[];if("Variable"!==e.subject.termType&&"Variable"!==e.object.termType&&e.subject.equals(e.object))return{type:"bindings",bindingsStream:new o.SingletonIterator(l.bindings()),metadata:()=>Promise.resolve({state:new n.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]})};const h=await this.isPathArbitraryLengthDistinct(c,s,e);if(h.operation)return h.operation;s=h.context;const y=(0,a.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:s,operation:c.createPath(e.subject,p.path,e.object,e.graph)}));let g;if("Variable"===e.subject.termType&&"Variable"===e.object.termType){const t=this.generateVariable(u,e),r=(0,a.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:s,operation:c.createFilter(this.assignPatternSources(c,c.createPattern(e.subject,t,e.object,e.graph),d),c.createOperatorExpression("=",[c.createTermExpression(e.subject),c.createTermExpression(e.object)]))})).bindingsStream.map(e=>e.delete(t));g=new o.UnionIterator([r,y.bindingsStream],{autoStart:!1})}else"Variable"===e.subject.termType&&f.push(l.bindings([[e.subject,e.object]])),"Variable"===e.object.termType&&f.push(l.bindings([[e.object,e.subject]])),g=y.bindingsStream.prepend(f);return{type:"bindings",bindingsStream:g,metadata:async()=>{const e=await y.metadata();return{...e,cardinality:{...e.cardinality,value:e.cardinality.value+1}}}}}};return HG.ActorQueryOperationPathZeroOrOne=s,HG}function KG(){return zG||(zG=1,e=XG,t=XG&&XG.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=XG&&XG.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(JG(),e)),XG;var e,t,r}var YG,WG,ZG={},e$={};function t$(){if(YG)return e$;YG=1,Object.defineProperty(e$,"__esModule",{value:!0}),e$.ActorQueryOperationUpdateDeleteInsert=void 0;const e=yU(),t=Kd(),r=ls(),n=XL(),a=Am(),o=ph();let i=class extends t.ActorQueryOperationTypedMediated{constructor(e){super(e,"deleteinsert"),this.blankNodeCounter=0}async testOperation(e,t){return(0,a.testReadOnly)(t)}async runOperation(t,i){const s=i.getSafe(r.KeysInitQuery.dataFactory),u=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,i,s),c=t.where?(0,a.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:t.where,context:i})).bindingsStream:new o.ArrayIterator([u.bindings()],{autoStart:!1});let l,p;t.insert&&(l=new e.BindingsToQuadsIterator(s,t.insert.map(e.BindingsToQuadsIterator.localizeQuad.bind(null,s,this.blankNodeCounter)),c.clone()),this.blankNodeCounter++),t.delete&&(p=new e.BindingsToQuadsIterator(s,t.delete.map(e.BindingsToQuadsIterator.localizeQuad.bind(null,s,this.blankNodeCounter)),c.clone()),this.blankNodeCounter++);const{execute:d}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:l,quadStreamDelete:p,context:i});return{type:"void",execute:d}}};return e$.ActorQueryOperationUpdateDeleteInsert=i,e$}function r$(){return WG||(WG=1,e=ZG,t=ZG&&ZG.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=ZG&&ZG.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(t$(),e)),ZG;var e,t,r}var n$,a$,o$={},i$={};function s$(){if(n$)return i$;n$=1,Object.defineProperty(i$,"__esModule",{value:!0}),i$.ActorRdfJoinNone=void 0;const e=IR(),t=ls(),r=Ji(),n=XL(),a=kd(),o=ph();let i=class extends e.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"none",limitEntries:0})}async test(e){return e.entries.length>0?(0,r.failTest)(`Actor ${this.name} can only join zero entries`):await this.getJoinCoefficients(e,void 0)}async getOutput(e){const r=e.context.getSafe(t.KeysInitQuery.dataFactory),i=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,e.context,r);return{result:{bindingsStream:new o.ArrayIterator([i.bindings()],{autoStart:!1}),metadata:()=>Promise.resolve({state:new a.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]}),type:"bindings"}}}async getJoinCoefficients(e,t){return(0,r.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},t)}};return i$.ActorRdfJoinNone=i,i$}function u$(){return a$||(a$=1,e=o$,t=o$&&o$.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=o$&&o$.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(s$(),e)),o$;var e,t,r}var c$,l$,p$,d$,f$={},h$={},y$={},g$={};function m$(){if(c$)return g$;c$=1,Object.defineProperty(g$,"__esModule",{value:!0}),g$.ActorRdfJoinMultiBind=void 0;const e=IR(),t=ls(),r=Ji(),n=XL(),a=Am(),o=ph(),i=Jl();let s=class s extends e.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"bind",canHandleUndefs:!0,isLeaf:!1})}static createBindStream(e,t,r,n,i,s,u){const c="depth-first"===e,l=e=>{const t=r.map(t=>(0,a.materializeOperation)(t,e,s,u,{bindFilter:!0})),i=t=>t.merge(e);return new o.TransformIterator(async()=>(await n(t,e)).transform({map:i}),{maxBufferSize:128,autoStart:c})};switch(e){case"depth-first":return new o.MultiTransformIterator(t,{autoStart:!1,multiTransform:l,optional:i});case"breadth-first":return new o.UnionIterator(t.transform({map:l,optional:i}),{autoStart:!1});default:throw new Error(`Received request for unknown bind order: ${e}`)}}async getOutput(e,r){const o=e.context.getSafe(t.KeysInitQuery.dataFactory),u=new i.Factory(o),c=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,e.context,o),l=r.entriesSorted;this.logDebug(e.context,"First entry for Bind Join: ",()=>({entry:l[0].operation,cardinality:l[0].metadata.cardinality,order:l[0].metadata.order,availableOrders:l[0].metadata.availableOrders}));for(const[t,n]of l.entries())0!==t&&n.output.bindingsStream.close();const p=l[0].output,d=[...l];d.splice(0,1);const f=e.context.set(t.KeysQueryOperation.joinLeftMetadata,l[0].metadata).set(t.KeysQueryOperation.joinRightMetadatas,d.map(e=>e.metadata));return{result:{type:"bindings",bindingsStream:s.createBindStream(this.bindOrder,p.bindingsStream,d.map(e=>e.operation),async(e,r)=>{const n=1===e.length?e[0]:u.createJoin(e,e.every(e=>!e.metadata));return(0,a.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:n,context:f?.set(t.KeysQueryOperation.joinBindings,r)})).bindingsStream},!1,u,c),metadata:()=>this.constructResultMetadata(l,l.map(e=>e.metadata),e.context)},physicalPlanMetadata:{bindIndex:r.entriesUnsorted.indexOf(l[0]),bindOperation:l[0].operation,bindOperationCardinality:l[0].metadata.cardinality,bindOrder:this.bindOrder}}}canBindWithOperation(e){let t=!0;return i.Util.recurseOperation(e,{[i.Algebra.types.EXTEND]:()=>(t=!1,!1),[i.Algebra.types.GROUP]:()=>(t=!1,!1)}),t}async getJoinCoefficients(t,n){let{metadatas:a}=n;const o=t.entries.map((e,t)=>({...e,metadata:a[t]})),i=await e.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,o,t.context);if(i.isFailed())return i;const s=i.get();a=s.map(e=>e.metadata);const u=e.ActorRdfJoin.getRequestInitialTimes(a),c=e.ActorRdfJoin.getRequestItemTimes(a),l=[...s],p=[...u],d=[...c];if(l.splice(0,1),p.splice(0,1),d.splice(0,1),l.some(e=>!this.canBindWithOperation(e.operation)))return(0,r.failTest)(`Actor ${this.name} can not bind on Extend and Group operations`);if(l.some(e=>e.operationModified))return(0,r.failTest)(`Actor ${this.name} can not be used over remaining entries with modified operations`);const f=c.some(e=>e>0);if(a[0].cardinality.value*this.minMaxCardinalityRatio/(f?1:3)>Math.max(...a.map(e=>e.cardinality.value)))return(0,r.failTest)(`Actor ${this.name} can only run if the smallest stream is much smaller than largest stream`);const h=await Promise.all(l.map(async e=>(await this.mediatorJoinSelectivity.mediate({entries:[s[0],e],context:t.context})).selectivity*this.selectivityModifier)),y=l.map((e,t)=>e.metadata.cardinality.value*h[t]).reduce((e,t)=>e+t,0),g=p.reduce((e,t)=>e+t,0),m=d.reduce((e,t)=>e+t,0);return(0,r.passTestWithSideData)({iterations:a[0].cardinality.value*y,persistedItems:0,blockingItems:0,requestTime:u[0]+a[0].cardinality.value*(c[0]+g+y*m)},{...n,entriesUnsorted:o,entriesSorted:s})}};return g$.ActorRdfJoinMultiBind=s,g$}function b$(){return l$||(l$=1,e=y$,t=y$&&y$.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=y$&&y$.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(m$(),e)),y$;var e,t,r}function v$(){if(p$)return h$;p$=1,Object.defineProperty(h$,"__esModule",{value:!0}),h$.ActorRdfJoinOptionalBind=void 0;const e=b$(),t=IR(),r=ls(),n=Ji(),a=XL(),o=Am(),i=Jl();let s=class extends t.ActorRdfJoin{constructor(e){super(e,{logicalType:"optional",physicalName:"bind",limitEntries:2,canHandleUndefs:!0,isLeaf:!1,requiresVariableOverlap:!0,canHandleOperationRequired:!0})}async getOutput(n){const s=n.context.getSafe(r.KeysInitQuery.dataFactory),u=new i.Factory(s),c=await a.BindingsFactory.create(this.mediatorMergeBindingsContext,n.context,s);n.entries[1].output.bindingsStream.close();const l=n.context.set(r.KeysQueryOperation.joinLeftMetadata,await n.entries[0].output.metadata()).set(r.KeysQueryOperation.joinRightMetadatas,[await n.entries[1].output.metadata()]);return{result:{type:"bindings",bindingsStream:e.ActorRdfJoinMultiBind.createBindStream(this.bindOrder,n.entries[0].output.bindingsStream,[n.entries[1].operation],async(e,t)=>{const n=e[0];return(0,o.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:n,context:l?.set(r.KeysQueryOperation.joinBindings,t)})).bindingsStream},!0,u,c),metadata:async()=>await this.constructResultMetadata(n.entries,await t.ActorRdfJoin.getMetadatas(n.entries),n.context,{},!0)}}}async getJoinCoefficients(e,r){const{metadatas:a}=r,o=t.ActorRdfJoin.getRequestInitialTimes(a),s=t.ActorRdfJoin.getRequestItemTimes(a);if(e.entries[1].operation.type===i.Algebra.types.EXTEND||e.entries[1].operation.type===i.Algebra.types.GROUP)return(0,n.failTest)(`Actor ${this.name} can not bind on Extend and Group operations`);const u=(await this.mediatorJoinSelectivity.mediate({entries:e.entries,context:e.context})).selectivity*this.selectivityModifier;return(0,n.passTestWithSideData)({iterations:a[0].cardinality.value*a[1].cardinality.value*u,persistedItems:0,blockingItems:0,requestTime:o[0]+a[0].cardinality.value*(s[0]+o[1]+u*a[1].cardinality.value*s[1])},r)}};return h$.ActorRdfJoinOptionalBind=s,h$}function _$(){return d$||(d$=1,e=f$,t=f$&&f$.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=f$&&f$.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(v$(),e)),f$;var e,t,r}var O$,T$,w$,S$,j$={},A$={},F$={},E$={};function x$(){if(O$)return E$;O$=1,Object.defineProperty(E$,"__esModule",{value:!0}),E$.ActorQueryProcess=void 0;const e=Ji();let t=class extends e.Actor{constructor(e){super(e)}};return E$.ActorQueryProcess=t,E$}function P$(){return T$||(T$=1,e=F$,t=F$&&F$.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=F$&&F$.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(x$(),e)),F$;var e,t,r}function D$(){if(w$)return A$;w$=1,Object.defineProperty(A$,"__esModule",{value:!0}),A$.ActorQueryProcessSequential=void 0;const e=P$(),t=ls(),r=Ji(),n=XL(),a=Am(),o=Jl();let i=class extends e.ActorQueryProcess{constructor(e){super(e)}async test(e){return e.context.get(t.KeysInitQuery.explain)??e.context.get(new r.ActionContextKey("explain"))?(0,r.failTest)(`${this.name} is not able to explain queries.`):(0,r.passTestVoid)()}async run(e){let{operation:t,context:r}=await this.parse(e.query,e.context);({operation:t,context:r}=await this.optimize(t,r));return{result:await this.evaluate(t,r)}}async parse(e,r){let i;if(r=(await this.mediatorContextPreprocess.mediate({context:r,initialize:!0})).context,"string"==typeof e){const n=(r=r.set(t.KeysInitQuery.queryString,e)).get(t.KeysInitQuery.baseIRI),a=r.get(t.KeysInitQuery.queryFormat),o=await this.mediatorQueryParse.mediate({context:r,query:e,queryFormat:a,baseIRI:n});i=o.operation,o.baseIRI&&(r=r.set(t.KeysInitQuery.baseIRI,o.baseIRI))}else i=e;if(r.has(t.KeysInitQuery.initialBindings)){const e=r.getSafe(t.KeysInitQuery.dataFactory),s=new o.Factory(e),u=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,r,e);i=(0,a.materializeOperation)(i,r.get(t.KeysInitQuery.initialBindings),s,u,{strictTargetVariables:!0}),r=r.delete(t.KeysInitQuery.queryString)}return{operation:i,context:r}}async optimize(e,r){return r=r.set(t.KeysInitQuery.query,e),({operation:e,context:r}=await this.mediatorOptimizeQueryOperation.mediate({context:r,operation:e})),{operation:e,context:r=r.set(t.KeysInitQuery.query,e)}}async evaluate(e,t){const r=await this.mediatorQueryOperation.mediate({context:t,operation:e});return r.context=t,r}};return A$.ActorQueryProcessSequential=i,A$}function M$(){return S$||(S$=1,e=j$,t=j$&&j$.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=j$&&j$.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(D$(),e)),j$;var e,t,r}var N$,I$={},R$={},L$={},C$={};function B$(){if(N$)return C$;N$=1,Object.defineProperty(C$,"__esModule",{value:!0}),C$.ActorQuerySourceIdentify=void 0;const e=Ji();let t=class extends e.Actor{constructor(e){super(e)}};return C$.ActorQuerySourceIdentify=t,C$}var q$,U$,k$={};function Q$(){if(q$)return k$;q$=1,Object.defineProperty(k$,"__esModule",{value:!0}),k$.filterMatchingQuotedQuads=k$.quadsOrderToBindingsOrder=k$.quadsMetadataToBindingsMetadata=k$.setMetadata=k$.getDuplicateElementLinks=k$.getVariables=k$.isTermVariable=k$.quadsToBindings=void 0;const e=MR(),t=kd(),r=mc(),n=ry(),a=Hh();function o(e){return"Variable"===e.termType}function i(e){return(0,n.uniqTerms)((0,n.getTermsNested)(e).filter(o))}function s(e){const t={};let a=!1;if((0,n.forEachTermsNested)(e,(e,n)=>{if("Variable"===e.termType){const o=(0,r.termToString)(e),i=(t[o]||(t[o]=[])).push(n);a=a||i>1}}),!a)return;const o={};for(const r in t){const e=t[r],n=e.slice(1);n.length>0&&(o[e[0].join("_")]=n)}return o}function u(e,r,n,a,o,i){const s=s=>{i&&(s.cardinality.type="estimate"),r.setProperty("metadata",c(e,(0,t.validateMetadataQuads)(s),a,o)),s.state&&s.state.addInvalidateListener(()=>{u(e,r,n,a,o,i)})},l=n.getProperty("metadata");l?s(l):n.getProperty("metadata",s)}function c(e,t,r,n){return{...t,order:t.order?l(e,t.order,r):void 0,availableOrders:t.availableOrders?t.availableOrders.map(t=>({cost:t.cost,terms:l(e,t.terms,r)})):void 0,variables:n.map(e=>({variable:e,canBeUndef:!1}))}}function l(e,t,r){const n={};return t.map(t=>{const a=r[t.term];if(a&&!n[a])return n[a]=!0,{term:e.variable(a),direction:t.direction}}).filter(Boolean)}return k$.quadsToBindings=function(t,r,a,o,c){const l=i(r),p="Variable"===r.graph.termType&&!c,d=s(r),f=(0,n.reduceTermsNested)(r,(e,t,r)=>("Variable"===t.termType&&(e[r.join("_")]=t.value),e),{});let h=t;p&&(h=h.filter(e=>"DefaultGraph"!==e.graph.termType)),d&&(h=h.filter(e=>{for(const t in d){const r=t.split("_"),a=(0,n.getValueNestedPath)(e,r);for(const o of d[t])if(!a.equals((0,n.getValueNestedPath)(e,o)))return!1}return!0}));const y=new e.ClosableIterator(h.map(e=>o.bindings(Object.keys(f).map(t=>{const r=t.split("_"),o=f[t],i=(0,n.getValueNestedPath)(e,r);return[a.variable(o),i]}))),{onClose:()=>t.destroy()});return u(a,y,t,f,l,p||Boolean(d)),y},k$.isTermVariable=o,k$.getVariables=i,k$.getDuplicateElementLinks=s,k$.setMetadata=u,k$.quadsMetadataToBindingsMetadata=c,k$.quadsOrderToBindingsOrder=l,k$.filterMatchingQuotedQuads=function(e,t){return(0,n.someTerms)(e,e=>"Quad"===e.termType)&&(t=t.filter(t=>(0,a.matchPatternMappings)(t,e))),t},k$}function V$(){return U$||(U$=1,e=L$,t=L$&&L$.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=L$&&L$.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(B$(),e),r(Q$(),e)),L$;var e,t,r}var G$,$$,z$={};function X$(){if(G$)return z$;G$=1,Object.defineProperty(z$,"__esModule",{value:!0}),z$.QuerySourceRdfJs=void 0;const e=V$(),t=ls(),r=kd(),n=ph(),a=ry(),o=Jl();return z$.QuerySourceRdfJs=class i{constructor(e,t,r){this.source=e,this.referenceValue=e,this.dataFactory=t,this.bindingsFactory=r;const n=new o.Factory(this.dataFactory);this.selectorShape={type:"operation",operation:{operationType:"pattern",pattern:n.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"))},variablesOptional:[this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o")]},this.dummyDefaultGraph=this.dataFactory.variable("__comunica:defaultGraph")}static nullifyVariables(e,t){return!e||"Variable"===e.termType||!t&&"Quad"===e.termType&&(0,a.someTermsNested)(e,e=>"Variable"===e.termType)?void 0:e}static hasDuplicateVariables(e){const t=(0,a.filterTermsNested)(e,e=>"Variable"===e.termType);return t.length>1&&(0,a.uniqTerms)(t).length<t.length}async getSelectorShape(){return this.selectorShape}queryBindings(r,a){if("pattern"!==r.type)throw new Error(`Attempted to pass non-pattern operation '${r.type}' to QuerySourceRdfJs`);const o=Boolean(a.get(t.KeysQueryOperation.unionDefaultGraph));if("DefaultGraph"===r.graph.termType&&o&&(r.graph=this.dummyDefaultGraph),"matchBindings"in this.source&&this.source.matchBindings){const t=this.source.matchBindings(this.bindingsFactory,r.subject,r.predicate,r.object,r.graph);let i=t instanceof n.AsyncIterator?t:(0,n.wrap)(t,{autoStart:!1}),s=!1;if("Variable"===r.graph.termType&&!o){s=!0;const e=r.graph;i=i.filter(t=>"DefaultGraph"!==t.get(e).termType)}r.graph.equals(this.dummyDefaultGraph)&&(i=i.map(e=>e.delete(this.dummyDefaultGraph)),r.graph=this.dataFactory.defaultGraph());const u=(0,e.getVariables)(r).map(e=>({variable:e,canBeUndef:!1}));return this.setMetadata(i,r,a,s,{variables:u}).catch(e=>i.destroy(e)),i}const s=Boolean("features"in this.source&&this.source.features?.quotedTripleFiltering),u=this.source.match(i.nullifyVariables(r.subject,s),i.nullifyVariables(r.predicate,s),i.nullifyVariables(r.object,s),i.nullifyVariables(r.graph,s));let c=u instanceof n.AsyncIterator?u:(0,n.wrap)(u,{autoStart:!1});return s||(c=(0,e.filterMatchingQuotedQuads)(r,c)),c.getProperty("metadata")||this.setMetadata(c,r,a).catch(e=>c.destroy(e)),r.graph.equals(this.dummyDefaultGraph)&&(r.graph=this.dataFactory.defaultGraph()),(0,e.quadsToBindings)(c,r,this.dataFactory,this.bindingsFactory,Boolean(a.get(t.KeysQueryOperation.unionDefaultGraph)))}async setMetadata(e,o,s,u=!1,c={}){const l=Boolean("features"in this.source&&this.source.features?.quotedTripleFiltering),p=Boolean(s.get(t.KeysQueryOperation.unionDefaultGraph));let d;if("DefaultGraph"===o.graph.termType&&p&&(o.graph=this.dummyDefaultGraph),"countQuads"in this.source&&this.source.countQuads)d=await this.source.countQuads(i.nullifyVariables(o.subject,l),i.nullifyVariables(o.predicate,l),i.nullifyVariables(o.object,l),i.nullifyVariables(o.graph,l));else{let e=0;d=await new Promise((t,r)=>{let a=this.source.match(i.nullifyVariables(o.subject,l),i.nullifyVariables(o.predicate,l),i.nullifyVariables(o.object,l),i.nullifyVariables(o.graph,l));"function"!=typeof a.on&&(a=new n.ArrayIterator(a)),a.on("error",r),a.on("end",()=>t(e)),a.on("data",()=>e++)})}const f=!l&&(0,a.someTerms)(o,e=>"Quad"===e.termType)||i.hasDuplicateVariables(o);e.setProperty("metadata",{state:new r.MetadataValidationState,cardinality:{type:f||u?"estimate":"exact",value:d},requestTime:0,...c})}queryQuads(e,t){throw new Error("queryQuads is not implemented in QuerySourceRdfJs")}queryBoolean(e,t){throw new Error("queryBoolean is not implemented in QuerySourceRdfJs")}queryVoid(e,t){throw new Error("queryVoid is not implemented in QuerySourceRdfJs")}toString(){return`QuerySourceRdfJs(${this.source.constructor.name})`}},z$}function H$(){if($$)return R$;$$=1,Object.defineProperty(R$,"__esModule",{value:!0}),R$.ActorQuerySourceIdentifyRdfJs=void 0;const e=V$(),t=ls(),r=Ji(),n=XL(),a=X$();let o=class extends e.ActorQuerySourceIdentify{constructor(e){super(e)}async test(e){const t=e.querySourceUnidentified;return void 0!==t.type&&"rdfjs"!==t.type?(0,r.failTest)(`${this.name} requires a single query source with rdfjs type to be present in the context.`):"string"!=typeof t.value&&"match"in t.value?(0,r.passTestVoid)():(0,r.failTest)(`${this.name} received an invalid rdfjs query source.`)}async run(e){const o=e.context.getSafe(t.KeysInitQuery.dataFactory);return{querySource:{source:new a.QuerySourceRdfJs(e.querySourceUnidentified.value,o,await n.BindingsFactory.create(this.mediatorMergeBindingsContext,e.context,o)),context:e.querySourceUnidentified.context??new r.ActionContext}}}};return R$.ActorQuerySourceIdentifyRdfJs=o,R$}var J$,K$,Y$={};function W$(){return J$||(J$=1,Object.defineProperty(Y$,"__esModule",{value:!0})),Y$}function Z$(){return K$||(K$=1,e=I$,t=I$&&I$.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=I$&&I$.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(H$(),e),r(W$(),e),r(X$(),e)),I$;var e,t,r}var ez,tz,rz={},nz={},az={},oz={};function iz(){if(ez)return oz;ez=1,Object.defineProperty(oz,"__esModule",{value:!0}),oz.ActorTermComparatorFactory=void 0;const e=Ji();let t=class extends e.Actor{constructor(e){super(e),this.mediatorQueryOperation=e.mediatorQueryOperation,this.mediatorFunctionFactory=e.mediatorFunctionFactory,this.mediatorMergeBindingsContext=e.mediatorMergeBindingsContext}};return oz.ActorTermComparatorFactory=t,oz}function sz(){return tz||(tz=1,e=az,t=az&&az.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=az&&az.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(iz(),e)),az;var e,t,r}var uz,cz,lz,pz={};function dz(){if(uz)return pz;uz=1,Object.defineProperty(pz,"__esModule",{value:!0}),pz.TermComparatorExpressionEvaluator=void 0;return pz.TermComparatorExpressionEvaluator=class{constructor(e,t,r){this.internalEvaluator=e,this.equalityFunction=t,this.lessThanFunction=r,this._TERM_ORDERING_PRIORITY={Variable:0,BlankNode:1,NamedNode:2,Literal:3,Quad:4,DefaultGraph:5}}orderTypes(e,t){if(e===t)return 0;if(void 0===e)return-1;if(void 0===t)return 1;if(e.termType!==t.termType)return this._TERM_ORDERING_PRIORITY[e.termType]<this._TERM_ORDERING_PRIORITY[t.termType]?-1:1;if(e.equals(t))return 0;if("Quad"===e.termType&&"Quad"===t.termType){const r=this.orderTypes(e.subject,t.subject);if(0!==r)return r;const n=this.orderTypes(e.predicate,t.predicate);if(0!==n)return n;const a=this.orderTypes(e.object,t.object);return 0!==a?a:this.orderTypes(e.graph,t.graph)}return"Literal"===e.termType?this.orderLiteralTypes(e,t):this.comparePrimitives(e.value,t.value)}orderLiteralTypes(e,t){const r=this.internalEvaluator.transformer.transformLiteral(e),n=this.internalEvaluator.transformer.transformLiteral(t);try{return this.equalityFunction.applyOnTerms([r,n],this.internalEvaluator).typedValue?0:this.lessThanFunction.applyOnTerms([r,n],this.internalEvaluator).typedValue?-1:1}catch{const e=this.comparePrimitives(r.dataType,n.dataType);return 0!==e?e:this.comparePrimitives(r.str(),n.str())}}comparePrimitives(e,t){return e===t?0:e<t?-1:1}},pz}function fz(){if(cz)return nz;cz=1,Object.defineProperty(nz,"__esModule",{value:!0}),nz.ActorTermComparatorFactoryExpressionEvaluator=void 0;const e=rG(),t=sz(),r=ls(),n=Ji(),a=XL(),o=Sd(),i=dz();let s=class extends t.ActorTermComparatorFactory{async test(e){return(0,n.passTestVoid)()}async run({context:t}){return t=o.prepareEvaluatorActionContext(t),new i.TermComparatorExpressionEvaluator(new e.InternalEvaluator(t,this.mediatorFunctionFactory,this.mediatorQueryOperation,await a.BindingsFactory.create(this.mediatorMergeBindingsContext,t,t.getSafe(r.KeysInitQuery.dataFactory))),await this.mediatorFunctionFactory.mediate({functionName:o.SparqlOperator.EQUAL,context:t,requireTermExpression:!0}),await this.mediatorFunctionFactory.mediate({functionName:o.SparqlOperator.LT,context:t,requireTermExpression:!0}))}};return nz.ActorTermComparatorFactoryExpressionEvaluator=s,nz}function hz(){return lz||(lz=1,e=rz,t=rz&&rz.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=rz&&rz.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(fz(),e)),rz;var e,t,r}var yz,gz,mz={},bz={};function vz(){if(yz)return bz;yz=1,Object.defineProperty(bz,"__esModule",{value:!0}),bz.ActorRdfJoinMultiSmallestFilterBindings=void 0;const e=IR(),t=ls(),r=Ji(),n=XL(),a=MR(),o=Am(),i=ph(),s=Jl();let u=class extends e.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"multi-smallest-filter-bindings",limitEntries:2,limitEntriesMin:!0,isLeaf:!1})}async sortJoinEntries(e,t){let{entries:n}=await this.mediatorJoinEntriesSort.mediate({entries:e,context:t});n=n.sort((e,t)=>e.operationModified&&!t.operationModified?-1:0);const a=n.splice(0,1)[0];let o,i=-1,s=0;for(const[r,c]of n.entries()){const e=a.metadata.variables.filter(e=>c.metadata.variables.some(t=>e.variable.equals(t.variable))).length;(!o||e>s||e===s&&(c.metadata.variables.length<o.metadata.variables.length||c.metadata.variables.length===o.metadata.variables.length&&c.metadata.cardinality.value<o.metadata.cardinality.value))&&(o=c,i=r,s=e)}if(0===s)return(0,r.failTest)(`Actor ${this.name} can only join with common variables`);const u=n;return u.splice(i,1),(0,r.passTest)({first:a,second:o,remaining:u})}async getOutput(r){const u=r.context.getSafe(t.KeysInitQuery.dataFactory),c=new s.Factory(u),l=await e.ActorRdfJoin.getEntriesWithMetadatas([...r.entries]),{first:p,second:d,remaining:f}=(await this.sortJoinEntries(l,r.context)).getOrThrow(),h=p.output.bindingsStream;p.output.bindingsStream=h.clone();const y=p.metadata.variables.filter(e=>d.metadata.variables.some(t=>e.variable.equals(t.variable))),g={},m=h.clone().map(e=>e.filter((e,t)=>y.some(e=>e.variable.equals(t)))).filter(e=>{const t=(0,n.bindingsToString)(e);return!(t in g)&&(g[t]=!0)}),b=new a.ChunkedIterator(m,this.blockSize,{autoStart:!1}),v=(0,o.getOperationSource)(d.operation),_={output:{type:"bindings",bindingsStream:new i.UnionIterator(b.map(e=>v.source.queryBindings(d.operation,v.context?r.context.merge(v.context):r.context,{filterBindings:{bindings:e,metadata:p.metadata}}))),metadata:d.output.metadata},operation:d.operation,operationModified:!0};d.output.bindingsStream.destroy();const O={output:(0,o.getSafeBindings)(await this.mediatorJoin.mediate({type:r.type,entries:[p,_],context:r.context.set(t.KeysRdfJoin.lastPhysicalJoin,this.physicalName)})),operation:c.createJoin([p.operation,_.operation],!1),operationModified:!0},T=f;return T.unshift(O),{result:await this.mediatorJoin.mediate({type:r.type,entries:T,context:r.context}),physicalPlanMetadata:{firstIndex:l.indexOf(p),secondIndex:l.indexOf(d)}}}async getJoinCoefficients(n,a){let{metadatas:i}=a;if(n.context.get(t.KeysRdfJoin.lastPhysicalJoin)===this.physicalName)return(0,r.failTest)(`Actor ${this.name} can not be called recursively`);i=[...i];const s=await this.sortJoinEntries(n.entries.map((e,t)=>({...e,metadata:i[t]})),n.context);if(s.isFailed())return s;const{first:u,second:c,remaining:l}=s.get(),p=(0,o.getOperationSource)(c.operation);if(!p)return(0,r.failTest)(`Actor ${this.name} can only process if entries[1] has a source`);const d=c.operation,f=await p.source.getSelectorShape(n.context),h=n.context.get(t.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(!(0,o.doesShapeAcceptOperation)(f,d,{filterBindings:!0,wildcardAcceptAllExtensionFunctions:h}))return(0,r.failTest)(`Actor ${this.name} can only process if entries[1] accept filterBindings`);i=[u.metadata,c.metadata,...l.map(e=>e.metadata)];const y=e.ActorRdfJoin.getRequestInitialTimes(i),g=e.ActorRdfJoin.getRequestItemTimes(i),{selectivity:m}=await this.mediatorJoinSelectivity.mediate({entries:[u,c],context:n.context}),b=l.reduce((e,t)=>e*t.metadata.cardinality.value*this.selectivityModifier,1);return(0,r.passTestWithSideData)({iterations:m*this.selectivityModifier*c.metadata.cardinality.value*b,persistedItems:u.metadata.cardinality.value,blockingItems:u.metadata.cardinality.value,requestTime:y[0]+i[0].cardinality.value*g[0]+y[1]+b*g[1]},a)}};return bz.ActorRdfJoinMultiSmallestFilterBindings=u,bz}function _z(){return gz||(gz=1,e=mz,t=mz&&mz.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=mz&&mz.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(vz(),e)),mz;var e,t,r}var Oz,Tz,wz={},Sz={};function jz(){if(Oz)return Sz;Oz=1,Object.defineProperty(Sz,"__esModule",{value:!0}),Sz.ActorOptimizeQueryOperationPruneEmptySourceOperations=void 0;const e=Wy(),t=ls(),r=Ji(),n=Am(),a=Jl();let o=class o extends e.ActorOptimizeQueryOperation{constructor(e){super(e)}async test(e){return(0,n.getOperationSource)(e.operation)?(0,r.failTest)(`Actor ${this.name} does not work with top-level operation sources.`):(0,r.passTestVoid)()}async run(e){const r=e.context.getSafe(t.KeysInitQuery.dataFactory),i=new a.Factory(r);let s=e.operation;const u=[],c=this;a.Util.recurseOperation(s,{[a.Algebra.types.UNION]:e=>(c.collectMultiOperationInputs(e.input,u,a.Algebra.types.PATTERN),!0),[a.Algebra.types.ALT]:e=>(c.collectMultiOperationInputs(e.input,u,a.Algebra.types.LINK),!1),[a.Algebra.types.SERVICE]:()=>!1});const l=new Set;return await Promise.all(u.map(async t=>{const a="link"===t.type?i.createPattern(r.variable("s"),t.iri,r.variable("o")):t;await this.hasSourceResults(i,(0,n.getOperationSource)(t),a,e.context)||l.add(t)})),l.size>0&&(this.logDebug(e.context,`Pruning ${l.size} source-specific operations`),s=a.Util.mapOperation(s,{[a.Algebra.types.UNION]:(e,t)=>c.mapMultiOperation(e,l,e=>t.createUnion(e)),[a.Algebra.types.ALT]:(e,t)=>c.mapMultiOperation(e,l,e=>t.createAlt(e))},i),s=a.Util.mapOperation(s,{[a.Algebra.types.PROJECT]:(e,t)=>o.hasEmptyOperation(e)?{recurse:!1,result:t.createUnion([])}:{recurse:!0,result:e},[a.Algebra.types.LEFT_JOIN]:e=>o.hasEmptyOperation(e.input[1])?{recurse:!0,result:e.input[0]}:{recurse:!0,result:e}},i)),{operation:s,context:e.context}}static hasEmptyOperation(e){let t=!1;return a.Util.recurseOperation(e,{[a.Algebra.types.UNION]:e=>(e.input.every(e=>o.hasEmptyOperation(e))&&(t=!0),!1),[a.Algebra.types.ALT]:e=>(0===e.input.length&&(t=!0),!1),[a.Algebra.types.LEFT_JOIN]:e=>(o.hasEmptyOperation(e.input[0])&&(t=!0),!1)}),t}collectMultiOperationInputs(e,t,r){for(const a of e)(0,n.getOperationSource)(a)&&a.type===r&&t.push(a)}mapMultiOperation(e,t,r){const n=e.input.filter(e=>!t.has(e));return n.length===e.input.length?{result:e,recurse:!0}:0===n.length?{result:r([]),recurse:!1}:1===n.length?{result:n[0],recurse:!0}:{result:r(n),recurse:!0}}async hasSourceResults(e,r,a,o){const i=r.context?o.merge(r.context):o,s=i.get(t.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(i.get(t.KeysQuerySourceIdentify.traverse))return!0;if(this.useAskIfSupported){const t=e.createAsk(a);if((0,n.doesShapeAcceptOperation)(await r.source.getSelectorShape(o),t,{wildcardAcceptAllExtensionFunctions:s}))return r.source.queryBoolean(t,i)}const u=r.source.queryBindings(a,i),c=await new Promise((e,t)=>{u.on("error",t),u.getProperty("metadata",t=>{u.destroy(),e(t.cardinality)})});if("estimate"===c.type&&c.value>0){const t=e.createAsk(a);if((0,n.doesShapeAcceptOperation)(await r.source.getSelectorShape(o),t,{wildcardAcceptAllExtensionFunctions:s}))return r.source.queryBoolean(t,i)}return c.value>0}};return Sz.ActorOptimizeQueryOperationPruneEmptySourceOperations=o,Sz}function Az(){return Tz||(Tz=1,e=wz,t=wz&&wz.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=wz&&wz.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(jz(),e)),wz;var e,t,r}var Fz,Ez,xz={},Pz={};function Dz(){if(Fz)return Pz;Fz=1,Object.defineProperty(Pz,"__esModule",{value:!0}),Pz.ActorOptimizeQueryOperationLeftjoinExpressionPushdown=void 0;const e=Wy(),t=ls(),r=Ji(),n=Am(),a=Jl();let o=class extends e.ActorOptimizeQueryOperation{constructor(e){super(e)}async test(e){return(0,r.passTestVoid)()}async run(e){const r=e.context.getSafe(t.KeysInitQuery.dataFactory),o=new a.Factory(r);let i=e.operation;const s=this;return i=a.Util.mapOperation(i,{leftjoin(t,r){if(t.expression){const o=(0,n.getExpressionVariables)(t.expression),i=a.Util.inScopeVariables(t.input[0]),u=a.Util.inScopeVariables(t.input[1]),c=s.variablesIntersect(o,i),l=s.variablesIntersect(o,u);if(c&&!l)return s.logDebug(e.context,"Pushed down optional expression to left-hand operator"),{recurse:!0,result:r.createLeftJoin(r.createFilter(t.input[0],t.expression),t.input[1])};if(!c&&l)return s.logDebug(e.context,"Pushed down optional expression to right-hand operator"),{recurse:!0,result:r.createLeftJoin(t.input[0],r.createFilter(t.input[1],t.expression))}}return{recurse:!0,result:t}}},o),{operation:i,context:e.context}}variablesIntersect(e,t){return e.some(e=>t.some(t=>e.equals(t)))}};return Pz.ActorOptimizeQueryOperationLeftjoinExpressionPushdown=o,Pz}function Mz(){return Ez||(Ez=1,e=xz,t=xz&&xz.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=xz&&xz.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Dz(),e)),xz;var e,t,r}var Nz,Iz,Rz={},Lz={};function Cz(){if(Nz)return Lz;Nz=1,Object.defineProperty(Lz,"__esModule",{value:!0}),Lz.ActorRdfJoinMultiBindSource=void 0;const e=IR(),t=ls(),r=Ji(),n=MR(),a=Am(),o=ph(),i=Jl();let s=class extends e.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"bind-source",canHandleUndefs:!0})}async getOutput(e,r){const s=e.context.getSafe(t.KeysInitQuery.dataFactory),u=new i.Factory(s),c=r.entriesSorted;this.logDebug(e.context,"First entry for Bind Join Source: ",()=>({entry:c[0].operation,cardinality:c[0].metadata.cardinality,order:c[0].metadata.order,availableOrders:c[0].metadata.availableOrders}));for(const[t,n]of c.entries())0!==t&&n.output.bindingsStream.close();const l=c[0].output,p=c[0].metadata,d=[...c];d.splice(0,1);const f=(0,a.getOperationSource)(d[0].operation),h=this.createOperationFromEntries(u,d),y=new n.ChunkedIterator(l.bindingsStream,this.blockSize,{autoStart:!1});return{result:{type:"bindings",bindingsStream:new o.UnionIterator(y.map(t=>f.source.queryBindings(h,f.context?e.context.merge(f.context):e.context,{joinBindings:{bindings:t,metadata:p}}))),metadata:()=>this.constructResultMetadata(c,c.map(e=>e.metadata),e.context)},physicalPlanMetadata:{bindIndex:r.entriesUnsorted.indexOf(c[0])}}}async sortJoinEntries(t,n){const a=await e.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,t,n);return a.isFailed()?a:(t=(t=a.get()).sort((e,t)=>e.operationModified&&!t.operationModified?-1:0),(0,r.passTest)(t))}async getJoinCoefficients(n,o){let{metadatas:s}=o;const u=n.context.getSafe(t.KeysInitQuery.dataFactory),c=new i.Factory(u),l=n.entries.map((e,t)=>({...e,metadata:s[t]})),p=await this.sortJoinEntries(l,n.context);if(p.isFailed())return p;const d=p.get();s=d.map(e=>e.metadata);const f=e.ActorRdfJoin.getRequestInitialTimes(s),h=e.ActorRdfJoin.getRequestItemTimes(s),y=[...d];y.splice(0,1);const g=y.map(e=>(0,a.getOperationSource)(e.operation));if(g.some(e=>!e))return(0,r.failTest)(`Actor ${this.name} can not bind on remaining operations without source annotation`);if(g.some(e=>e!==g[0]))return(0,r.failTest)(`Actor ${this.name} can not bind on remaining operations with non-equal source annotation`);const m=g[0],b=this.createOperationFromEntries(c,y),v=await m.source.getSelectorShape(n.context),_=n.context.get(t.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(!(0,a.doesShapeAcceptOperation)(v,b,{joinBindings:!0,wildcardAcceptAllExtensionFunctions:_}))return(0,r.failTest)(`Actor ${this.name} detected a source that can not handle passing down join bindings`);const O=await Promise.all(y.map(async e=>(await this.mediatorJoinSelectivity.mediate({entries:[d[0],e],context:n.context})).selectivity*this.selectivityModifier)),T=y.map((e,t)=>e.metadata.cardinality.value*O[t]).reduce((e,t)=>e+t,0);return(0,r.passTestWithSideData)({iterations:1,persistedItems:s[0].cardinality.value,blockingItems:s[0].cardinality.value,requestTime:f[0]+s[0].cardinality.value*h[0]+f[1]+T*h[1]},{...o,entriesUnsorted:l,entriesSorted:d})}createOperationFromEntries(e,t){return 1===t.length?t[0].operation:e.createJoin(t.map(e=>e.operation),!0)}};return Lz.ActorRdfJoinMultiBindSource=s,Lz}function Bz(){return Iz||(Iz=1,e=Rz,t=Rz&&Rz.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Rz&&Rz.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Cz(),e)),Rz;var e,t,r}var qz,Uz,kz={},Qz={};function Vz(){if(qz)return Qz;qz=1,Object.defineProperty(Qz,"__esModule",{value:!0}),Qz.ActorOptimizeQueryOperationJoinConnected=void 0;const e=Wy(),t=ls(),r=Ji(),n=Jl();let a=class a extends e.ActorOptimizeQueryOperation{async test(e){return(0,r.passTestVoid)()}async run(e){const r=e.context.getSafe(t.KeysInitQuery.dataFactory),o=new n.Factory(r),i=n.Util.mapOperation(e.operation,{join:(e,t)=>({recurse:!1,result:a.cluster(e,t)})},o);return{operation:i,context:e.context}}static cluster(e,t){let r,o=e.input.map(e=>({inScopeVariables:Object.fromEntries(n.Util.inScopeVariables(e).map(e=>[e.value,!0])),entries:[e]}));do{r=o,o=a.clusterIteration(r)}while(r.length!==o.length);const i=o.map(e=>1===e.entries.length?e.entries[0]:t.createJoin(e.entries));return 1===i.length?i[0]:t.createJoin(i,!1)}static clusterIteration(e){const t=[];for(const r of e){let e=!1;for(const n of t)if(a.haveOverlappingVariables(r.inScopeVariables,n.inScopeVariables)){n.entries=[...n.entries,...r.entries],n.inScopeVariables={...n.inScopeVariables,...r.inScopeVariables},e=!0;break}e||t.push({inScopeVariables:r.inScopeVariables,entries:r.entries})}return t}static haveOverlappingVariables(e,t){for(const r of Object.keys(e))if(t[r])return!0;return!1}};return Qz.ActorOptimizeQueryOperationJoinConnected=a,Qz}function Gz(){return Uz||(Uz=1,e=kz,t=kz&&kz.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=kz&&kz.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Vz(),e)),kz;var e,t,r}var $z,zz,Xz={},Hz={};function Jz(){if($z)return Hz;$z=1,Object.defineProperty(Hz,"__esModule",{value:!0}),Hz.ActorOptimizeQueryOperationBgpToJoin=void 0;const e=Wy(),t=ls(),r=Ji(),n=Jl();let a=class extends e.ActorOptimizeQueryOperation{async test(e){return(0,r.passTestVoid)()}async run(e){const r=e.context.getSafe(t.KeysInitQuery.dataFactory),a=new n.Factory(r),o=n.Util.mapOperation(e.operation,{bgp:(e,t)=>({recurse:!1,result:t.createJoin(e.patterns)})},a);return{operation:o,context:e.context}}};return Hz.ActorOptimizeQueryOperationBgpToJoin=a,Hz}function Kz(){return zz||(zz=1,e=Xz,t=Xz&&Xz.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Xz&&Xz.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(Jz(),e)),Xz;var e,t,r}var Yz,Wz,Zz={},eX={};function tX(){if(Yz)return eX;Yz=1,Object.defineProperty(eX,"__esModule",{value:!0}),eX.ActorOptimizeQueryOperationJoinBgp=void 0;const e=Wy(),t=ls(),r=Ji(),n=Jl();let a=class extends e.ActorOptimizeQueryOperation{async test(e){return(0,r.passTestVoid)()}async run(e){const r=e.context.getSafe(t.KeysInitQuery.dataFactory),a=new n.Factory(r),o=n.Util.mapOperation(e.operation,{join:(e,t)=>e.input.every(e=>"bgp"===e.type)?{recurse:!1,result:t.createBgp(e.input.flatMap(e=>e.patterns))}:{recurse:!1,result:e}},a);return{operation:o,context:e.context}}};return eX.ActorOptimizeQueryOperationJoinBgp=a,eX}function rX(){return Wz||(Wz=1,e=Zz,t=Zz&&Zz.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Zz&&Zz.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(tX(),e)),Zz;var e,t,r}var nX,aX,oX={},iX={};function sX(){if(nX)return iX;nX=1,Object.defineProperty(iX,"__esModule",{value:!0}),iX.ActorOptimizeQueryOperationAssignSourcesExhaustive=void 0;const e=Wy(),t=nv(),r=ls(),n=Ji(),a=Am(),o=Jl();let i=class extends e.ActorOptimizeQueryOperation{constructor(e){super(e)}async test(e){return(0,n.passTestVoid)()}async run(e){const n=e.context.getSafe(r.KeysInitQuery.dataFactory),i=new o.Factory(n),s=e.context.get(r.KeysQueryOperation.querySources)??[];if(0===s.length)return{operation:e.operation,context:e.context};if(1===s.length){const n=s[0],o=e.context.get(r.KeysRdfUpdateQuads.destination);if(!o||n.source.referenceValue===(0,t.getDataDestinationValue)(o))try{const t=await n.source.getSelectorShape(e.context);if((0,a.doesShapeAcceptOperation)(t,e.operation))return{operation:(0,a.assignOperationSource)(e.operation,n),context:e.context}}catch{}}return{operation:this.assignExhaustive(i,e.operation,s),context:e.context.delete(r.KeysInitQuery.queryString)}}assignExhaustive(e,t,r){const n=this;return o.Util.mapOperation(t,{[o.Algebra.types.PATTERN]:(e,t)=>1===r.length?{result:(0,a.assignOperationSource)(e,r[0]),recurse:!1}:{result:t.createUnion(r.map(t=>(0,a.assignOperationSource)(e,t))),recurse:!1},[o.Algebra.types.LINK]:(e,t)=>1===r.length?{result:(0,a.assignOperationSource)(e,r[0]),recurse:!1}:{result:t.createAlt(r.map(t=>(0,a.assignOperationSource)(e,t))),recurse:!1},[o.Algebra.types.NPS]:(e,t)=>1===r.length?{result:(0,a.assignOperationSource)(e,r[0]),recurse:!1}:{result:t.createAlt(r.map(t=>(0,a.assignOperationSource)(e,t))),recurse:!1},[o.Algebra.types.SERVICE]:e=>({result:e,recurse:!1}),[o.Algebra.types.CONSTRUCT]:(t,a)=>({result:a.createConstruct(n.assignExhaustive(e,t.input,r),t.template),recurse:!1}),[o.Algebra.types.DELETE_INSERT]:(t,a)=>({result:a.createDeleteInsert(t.delete,t.insert,t.where?n.assignExhaustive(e,t.where,r):void 0),recurse:!1})},e)}};return iX.ActorOptimizeQueryOperationAssignSourcesExhaustive=i,iX}function uX(){return aX||(aX=1,e=oX,t=oX&&oX.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=oX&&oX.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(sX(),e)),oX;var e,t,r}var cX,lX,pX,dX,fX,hX,yX={},gX={};function mX(){if(cX)return gX;cX=1,Object.defineProperty(gX,"__esModule",{value:!0}),gX.ActorOptimizeQueryOperationDescribeToConstructsSubject=void 0;const e=Wy(),t=ls(),r=Ji(),n=Jl();let a=class extends e.ActorOptimizeQueryOperation{constructor(e){super(e)}async test(e){return e.operation.type!==n.Algebra.types.DESCRIBE?(0,r.failTest)(`Actor ${this.name} only supports describe operations, but got ${e.operation.type}`):(0,r.passTest)(!0)}async run(e){const r=e.context.getSafe(t.KeysInitQuery.dataFactory),a=new n.Factory(r),o=e.operation,i=o.terms.filter(e=>"Variable"!==e.termType).map(e=>{const t=[r.quad(e,r.variable("__predicate"),r.variable("__object"))];t.forEach(e=>e.type="pattern");return{input:{type:n.Algebra.types.BGP,patterns:t},template:t,type:"construct"}});if(i.length!==o.terms.length){let e=[];o.terms.filter(e=>"Variable"===e.termType).forEach((t,n)=>{const a=[r.quad(t,r.variable(`__predicate${n}`),r.variable(`__object${n}`))];a.forEach(e=>e.type="pattern"),e=[...e,...a]}),i.push({input:{type:n.Algebra.types.JOIN,input:[o.input,{type:n.Algebra.types.BGP,patterns:e}]},template:e,type:n.Algebra.types.CONSTRUCT})}return{operation:a.createUnion(i,!1),context:e.context}}};return gX.ActorOptimizeQueryOperationDescribeToConstructsSubject=a,gX}function bX(){return lX||(lX=1,e=yX,t=yX&&yX.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=yX&&yX.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(mX(),e)),yX;var e,t,r}function vX(){return dX?pX:(dX=1,pX=function(e){const t=new(Pu().LoggerVoid),r=new(Ji().Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/^4.0.0/components/ActorInit.jsonld#ActorInit_default_bus"}),n=new(Ji().Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/^4.0.0/components/ActorContextPreprocess.jsonld#ActorContextPreprocess_default_bus"}),a=new(Ji().Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-bindings/^4.0.0/components/ActorHashBindings.jsonld#ActorHashBindings_default_bus"}),o=new(Ji().Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-quads/^4.0.0/components/ActorHashQuads.jsonld#ActorHashQuads_default_bus"}),i=new(Ji().Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/^4.0.0/components/ActorOptimizeQueryOperation.jsonld#ActorOptimizeQueryOperation_default_bus"}),s=new(Ji().Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-entries-sort/^4.0.0/components/ActorRdfJoinEntriesSort.jsonld#ActorRdfJoinEntriesSort_default_bus"}),u=new(Ji().Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-selectivity/^4.0.0/components/ActorRdfJoinSelectivity.jsonld#ActorRdfJoinSelectivity_default_bus"}),c=new(Ji().Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-accumulate/^4.0.0/components/ActorRdfMetadataAccumulate.jsonld#ActorRdfMetadataAccumulate_default_bus"}),l=new(Ji().Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-quads/^4.0.0/components/ActorRdfUpdateQuads.jsonld#ActorRdfUpdateQuads_default_bus"}),p=new(Ji().Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-parse/^4.0.0/components/ActorQueryParse.jsonld#ActorQueryParse_default_bus"}),d=new(Ji().Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-bindings-aggregator-factory/^4.0.0/components/ActorBindingsAggregatorFactory.jsonld#ActorBindingsAggregatorFactory_default_bus"}),f=new(Ji().Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-expression-evaluator-factory/^4.0.0/components/ActorExpressionEvaluatorFactory.jsonld#ActorExpressionEvaluatorFactory_default_bus"}),h=new(Ad().BusFunctionFactory)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-function-factory/^4.0.0/components/ActorFunctionFactory.jsonld#ActorFunctionFactory_default_bus"}),y=new(Kd().BusQueryOperation)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/^4.0.0/components/ActorQueryOperation.jsonld#ActorQueryOperation_default_bus"}),g=new(Ji().Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/^4.0.0/components/ActorRdfJoin.jsonld#ActorRdfJoin_default_bus"}),m=new(Ji().Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-process/^4.0.0/components/ActorQueryProcess.jsonld#ActorQueryProcess_default_bus"}),b=new(Ji().Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify/^4.0.0/components/ActorQuerySourceIdentify.jsonld#ActorQuerySourceIdentify_default_bus"}),v=new(Ji().Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-term-comparator-factory/^4.0.0/components/ActorTermComparatorFactory.jsonld#ActorTermComparatorFactory_default_bus"}),_=new(Ji().Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/^4.0.0/components/ActorHttpInvalidate.jsonld#ActorHttpInvalidate_default_bus"}),O=new(Ji().Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-result-serialize/^4.0.0/components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus"}),T=new(Ji().Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-merge-bindings-context/^4.0.0/components/ActorMergeBindingsContext.jsonld#ActorMergeBindingsContext_default_bus"});new(cf().ActorContextPreprocessConvertShortcuts)({contextKeyShortcuts:{baseIRI:"@comunica/actor-init-query:baseIRI",dataFactory:"@comunica/actor-init-query:dataFactory",datetime:"@comunica/actor-http-memento:datetime",destination:"@comunica/bus-rdf-update-quads:destination",distinctConstruct:"@comunica/actor-init-query:distinctConstruct",explain:"@comunica/actor-init-query:explain",extensionFunctionCreator:"@comunica/actor-init-query:extensionFunctionCreator",extensionFunctions:"@comunica/actor-init-query:extensionFunctions",extensionFunctionsAlwaysPushdown:"@comunica/actor-init-query:extensionFunctionsAlwaysPushdown",fetch:"@comunica/bus-http:fetch",fileBaseIRI:"@comunica/actor-init-query:fileBaseIRI",functionArgumentsCache:"@comunica/actor-init-query:functionArgumentsCache",httpAuth:"@comunica/bus-http:auth",httpBodyTimeout:"@comunica/bus-http:http-body-timeout",httpIncludeCredentials:"@comunica/bus-http:include-credentials",httpProxyHandler:"@comunica/actor-http-proxy:httpProxyHandler",httpRetryCount:"@comunica/bus-http:http-retry-count",httpRetryDelayFallback:"@comunica/bus-http:http-retry-delay-fallback",httpRetryDelayLimit:"@comunica/bus-http:http-retry-delay-limit",httpTimeout:"@comunica/bus-http:http-timeout",initialBindings:"@comunica/actor-init-query:initialBindings",invalidateCache:"@comunica/actor-init-query:invalidateCache",lenient:"@comunica/actor-init-query:lenient",log:"@comunica/core:log",queryFormat:"@comunica/actor-init-query:queryFormat",queryTimestamp:"@comunica/actor-init-query:queryTimestamp",queryTimestampHighResolution:"@comunica/actor-init-query:queryTimestampHighResolution",readOnly:"@comunica/bus-query-operation:readOnly",recoverBrokenLinks:"@comunica/bus-http-wayback:recover-broken-links",sources:"@comunica/actor-init-query:querySourcesUnidentified",traverse:"@comunica/bus-query-source-identify:traverse",unionDefaultGraph:"@comunica/bus-query-operation:unionDefaultGraph"},name:"urn:comunica:default:context-preprocess/actors#convert-shortcuts",bus:n,busFailMessage:"Context preprocessing failed"}),new(Bf().ActorContextPreprocessSetDefaults)({logger:t,name:"urn:comunica:default:context-preprocess/actors#set-defaults",bus:n,busFailMessage:"Context preprocessing failed"}),new(Gf().ActorContextPreprocessSourceToDestination)({name:"urn:comunica:default:context-preprocess/actors#source-to-destination",bus:n,busFailMessage:"Context preprocessing failed"});const w=new(iy().ActorContextPreprocessQuerySourceSkolemize)({name:"urn:comunica:default:context-preprocess/actors#query-source-skolemize",bus:n,busFailMessage:"Context preprocessing failed"}),S=new(dy().MediatorCombinePipeline)({name:"urn:comunica:default:context-preprocess/mediators#main",bus:n});new(Sy().ActorHashBindingsMurmur)({name:"urn:comunica:default:hash-bindings/actors#murmur",bus:a,busFailMessage:"Failed to obtaining hash functions for bindings"});const j=new(Py().MediatorRace)({name:"urn:comunica:default:hash-bindings/mediators#main",bus:a});new(Qy().ActorHashQuadsMurmur)({name:"urn:comunica:default:hash-quads/actors#murmur",bus:o,busFailMessage:"Failed to obtaining hash functions for quads"}),new(eg().ActorOptimizeQueryOperationRewriteCopy)({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-copy",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(ig().ActorOptimizeQueryOperationRewriteMove)({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-move",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(Rg().ActorOptimizeQueryOperationRewriteAdd)({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-add",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const A=new(Em().ActorOptimizeQueryOperationGroupSources)({name:"urn:comunica:default:optimize-query-operation/actors#group-sources",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});new(Im().ActorOptimizeQueryOperationConstructDistinct)({name:"urn:comunica:default:optimize-query-operation/actors#construct-distinct",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const F=new(dy().MediatorCombinePipeline)({filterFailures:!0,name:"urn:comunica:default:optimize-query-operation/mediators#main",bus:i});new(zm().ActorRdfJoinEntriesSortCardinality)({name:"urn:comunica:default:rdf-join-entries-sort/actors#cardinality",bus:s,busFailMessage:"Sorting join entries failed: none of the configured actors were able to sort"});const E=new(Wm().MediatorNumber)({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-entries-sort/mediators#main",bus:s});new(lb().ActorRdfJoinSelectivityVariableCounting)({name:"urn:comunica:default:rdf-join-selectivity/actors#variable-counting",bus:u,busFailMessage:"Determining join selectivity failed: none of the configured actors were able to calculate selectivities"});const x=new(Wm().MediatorNumber)({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-selectivity/mediators#main",bus:u});new(Tb().ActorRdfMetadataAccumulateCardinality)({name:"urn:comunica:default:rdf-metadata-accumulate/actors#cardinality",bus:c,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(Eb().ActorRdfMetadataAccumulatePageSize)({name:"urn:comunica:default:rdf-metadata-accumulate/actors#pagesize",bus:c,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(Ib().ActorRdfMetadataAccumulateRequestTime)({name:"urn:comunica:default:rdf-metadata-accumulate/actors#requesttime",bus:c,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"});const P=new(Ub().MediatorCombineUnion)({field:"metadata",name:"urn:comunica:default:rdf-metadata-accumulate/mediators#main",bus:c});new(dv().ActorRdfUpdateQuadsRdfJsStore)({name:"urn:comunica:default:rdf-update-quads/actors#rdfjs-store",bus:l,busFailMessage:"RDF updating failed: none of the configured actors were able to handle an update"});const D=new(Py().MediatorRace)({name:"urn:comunica:default:rdf-update-quads/mediators#main",bus:l});new(Sv().ActorQueryParseSparql)({prefixes:{dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",skos:"http://www.w3.org/2008/05/skos#",xsd:"http://www.w3.org/2001/XMLSchema#"},name:"urn:comunica:default:query-parse/actors#sparql",bus:p,busFailMessage:'Query parsing failed: none of the configured parsers were able to the query "${action.query}"'});const M=new(Py().MediatorRace)({name:"urn:comunica:default:query-parse/mediators#main",bus:p}),N=new(Py().MediatorRace)({name:"urn:comunica:default:bindings-aggregator-factory/mediators#main",bus:d}),I=new(Py().MediatorRace)({name:"urn:comunica:default:expression-evaluator-factory/mediators#main",bus:f});new(Nv().ActorFunctionFactoryExpressionBnode)({name:"urn:comunica:default:function-factory/actors#expression-function-bnode",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Qv().ActorFunctionFactoryExpressionCoalesce)({name:"urn:comunica:default:function-factory/actors#expression-function-coalesce",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Yv().ActorFunctionFactoryExpressionBound)({name:"urn:comunica:default:function-factory/actors#expression-function-bound",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(x_().ActorFunctionFactoryExpressionExtensions)({name:"urn:comunica:default:function-factory/actors#expression-function-extensions",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(B_().ActorFunctionFactoryExpressionConcat)({name:"urn:comunica:default:function-factory/actors#expression-function-concat",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(X_().ActorFunctionFactoryExpressionIf)({name:"urn:comunica:default:function-factory/actors#expression-function-if",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rO().ActorFunctionFactoryExpressionLogicalAnd)({name:"urn:comunica:default:function-factory/actors#expression-function-logical-and",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(pO().ActorFunctionFactoryExpressionLogicalOr)({name:"urn:comunica:default:function-factory/actors#expression-function-logical-or",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(_O().ActorFunctionFactoryExpressionSameTerm)({name:"urn:comunica:default:function-factory/actors#expression-function-same-term",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(xO().ActorFunctionFactoryTermAbs)({name:"urn:comunica:default:function-factory/actors#term-function-abs",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(QO().ActorFunctionFactoryTermAddition)({name:"urn:comunica:default:function-factory/actors#term-function-addition",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(YO().ActorFunctionFactoryTermCeil)({name:"urn:comunica:default:function-factory/actors#term-function-ceil",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(iT().ActorFunctionFactoryTermContains)({name:"urn:comunica:default:function-factory/actors#term-function-contains",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(yT().ActorFunctionFactoryTermDatatype)({name:"urn:comunica:default:function-factory/actors#term-function-datatype",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(ST().ActorFunctionFactoryTermDay)({name:"urn:comunica:default:function-factory/actors#term-function-day",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(NT().ActorFunctionFactoryTermEncodeForUri)({name:"urn:comunica:default:function-factory/actors#term-function-encode-for-uri",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(QT().ActorFunctionFactoryTermDivision)({name:"urn:comunica:default:function-factory/actors#term-function-division",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(YT().ActorFunctionFactoryTermEquality)({name:"urn:comunica:default:function-factory/actors#term-function-equality",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(iw().ActorFunctionFactoryTermFloor)({name:"urn:comunica:default:function-factory/actors#term-function-floor",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(yw().ActorFunctionFactoryTermHours)({name:"urn:comunica:default:function-factory/actors#term-function-hours",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Sw().ActorFunctionFactoryTermIsIri)({name:"urn:comunica:default:function-factory/actors#term-function-is-iri",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Nw().ActorFunctionFactoryTermIsBlank)({name:"urn:comunica:default:function-factory/actors#term-function-is-blank",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Qw().ActorFunctionFactoryTermIsLiteral)({name:"urn:comunica:default:function-factory/actors#term-function-is-literal",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Yw().ActorFunctionFactoryTermIri)({name:"urn:comunica:default:function-factory/actors#term-function-iri",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(iS().ActorFunctionFactoryTermIsNumeric)({name:"urn:comunica:default:function-factory/actors#term-function-is-numeric",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(yS().ActorFunctionFactoryTermLang)({name:"urn:comunica:default:function-factory/actors#term-function-lang",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(SS().ActorFunctionFactoryTermIsTriple)({name:"urn:comunica:default:function-factory/actors#term-function-is-triple",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(NS().ActorFunctionFactoryTermLangmatches)({name:"urn:comunica:default:function-factory/actors#term-function-langmatches",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(QS().ActorFunctionFactoryTermMinutes)({name:"urn:comunica:default:function-factory/actors#term-function-minutes",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(YS().ActorFunctionFactoryTermLcase)({name:"urn:comunica:default:function-factory/actors#term-function-lcase",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cj().ActorFunctionFactoryTermMd5)({name:"urn:comunica:default:function-factory/actors#term-function-md5",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bj().ActorFunctionFactoryTermMonth)({name:"urn:comunica:default:function-factory/actors#term-function-month",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Fj().ActorFunctionFactoryTermNot)({name:"urn:comunica:default:function-factory/actors#term-function-not",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Lj().ActorFunctionFactoryTermMultiplication)({name:"urn:comunica:default:function-factory/actors#term-function-multiplication",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new($j().ActorFunctionFactoryTermNow)({name:"urn:comunica:default:function-factory/actors#term-function-now",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(eA().ActorFunctionFactoryTermObject)({name:"urn:comunica:default:function-factory/actors#term-function-object",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cA().ActorFunctionFactoryTermPredicate)({name:"urn:comunica:default:function-factory/actors#term-function-predicate",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bA().ActorFunctionFactoryTermRand)({name:"urn:comunica:default:function-factory/actors#term-function-rand",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(LA().ActorFunctionFactoryTermReplace)({name:"urn:comunica:default:function-factory/actors#term-function-replace",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new($A().ActorFunctionFactoryTermRound)({name:"urn:comunica:default:function-factory/actors#term-function-round",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(NA().ActorFunctionFactoryTermRegex)({name:"urn:comunica:default:function-factory/actors#term-function-regex",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(LF().ActorFunctionFactoryTermSha1)({name:"urn:comunica:default:function-factory/actors#term-function-sha1",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new($F().ActorFunctionFactoryTermSeconds)({name:"urn:comunica:default:function-factory/actors#term-function-seconds",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(eE().ActorFunctionFactoryTermSha256)({name:"urn:comunica:default:function-factory/actors#term-function-sha256",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cE().ActorFunctionFactoryTermSha384)({name:"urn:comunica:default:function-factory/actors#term-function-sha384",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bE().ActorFunctionFactoryTermSha512)({name:"urn:comunica:default:function-factory/actors#term-function-sha512",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(FE().ActorFunctionFactoryTermStrAfter)({name:"urn:comunica:default:function-factory/actors#term-function-str-after",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(LE().ActorFunctionFactoryTermStrBefore)({name:"urn:comunica:default:function-factory/actors#term-function-str-before",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new($E().ActorFunctionFactoryTermStrDt)({name:"urn:comunica:default:function-factory/actors#term-function-str-dt",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(ex().ActorFunctionFactoryTermStrEnds)({name:"urn:comunica:default:function-factory/actors#term-function-str-ends",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cx().ActorFunctionFactoryTermStrLang)({name:"urn:comunica:default:function-factory/actors#term-function-str-lang",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bx().ActorFunctionFactoryTermStrLen)({name:"urn:comunica:default:function-factory/actors#term-function-str-len",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Fx().ActorFunctionFactoryTermStrStarts)({name:"urn:comunica:default:function-factory/actors#term-function-str-starts",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Lx().ActorFunctionFactoryTermStr)({name:"urn:comunica:default:function-factory/actors#term-function-str",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new($P().ActorFunctionFactoryTermStrUuid)({name:"urn:comunica:default:function-factory/actors#term-function-str-uuid",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(eD().ActorFunctionFactoryTermSubStr)({name:"urn:comunica:default:function-factory/actors#term-function-sub-str",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cD().ActorFunctionFactoryTermTimezone)({name:"urn:comunica:default:function-factory/actors#term-function-timezone",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bD().ActorFunctionFactoryTermSubtraction)({name:"urn:comunica:default:function-factory/actors#term-function-subtraction",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(FD().ActorFunctionFactoryTermSubject)({name:"urn:comunica:default:function-factory/actors#term-function-subject",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(LD().ActorFunctionFactoryTermTz)({name:"urn:comunica:default:function-factory/actors#term-function-tz",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new($D().ActorFunctionFactoryTermUnaryMinus)({name:"urn:comunica:default:function-factory/actors#term-function-unary-minus",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(eM().ActorFunctionFactoryTermUnaryPlus)({name:"urn:comunica:default:function-factory/actors#term-function-unary-plus",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cM().ActorFunctionFactoryTermTriple)({name:"urn:comunica:default:function-factory/actors#term-function-triple",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bM().ActorFunctionFactoryTermUcase)({name:"urn:comunica:default:function-factory/actors#term-function-ucase",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(FM().ActorFunctionFactoryTermUuid)({name:"urn:comunica:default:function-factory/actors#term-function-uuid",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(LM().ActorFunctionFactoryTermXsdToBoolean)({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-boolean",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new($M().ActorFunctionFactoryTermXsdToDate)({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-date",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(eN().ActorFunctionFactoryTermXsdToDecimal)({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-decimal",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cN().ActorFunctionFactoryTermXsdToDuration)({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-duration",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bN().ActorFunctionFactoryTermXsdToDayTimeDuration)({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-day-time-duration",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(FN().ActorFunctionFactoryTermXsdToDouble)({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-double",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(LN().ActorFunctionFactoryTermXsdToFloat)({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-float",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new($N().ActorFunctionFactoryTermXsdToDatetime)({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-datetime",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(eI().ActorFunctionFactoryTermXsdToInteger)({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-integer",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cI().ActorFunctionFactoryTermXsdToString)({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-string",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bI().ActorFunctionFactoryTermXsdToYearMonthDuration)({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-year-month-duration",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(FI().ActorFunctionFactoryTermXsdToTime)({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-time",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(LI().ActorFunctionFactoryTermYear)({name:"urn:comunica:default:function-factory/actors#term-function-year",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"});const R=new(Py().MediatorRace)({name:"urn:comunica:default:function-factory/mediators#main",bus:h});new(QI().ActorQueryOperationSource)({name:"urn:comunica:default:query-operation/actors#source",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const L=new(Wm().MediatorNumber)({field:"httpRequests",type:"min",ignoreFailures:!0,name:"urn:comunica:default:query-operation/mediators#main",bus:y}),C=new(HI().MediatorJoinCoefficientsFixed)({cpuWeight:10,memoryWeight:1,timeWeight:2,ioWeight:10,name:"urn:comunica:default:rdf-join/mediators#main",bus:g}),B=new(Py().MediatorRace)({name:"urn:comunica:default:query-process/mediators#main",bus:m}),q=new(Py().MediatorRace)({name:"urn:comunica:default:query-source-identify/mediators#main",bus:b}),U=new(Py().MediatorRace)({name:"urn:comunica:default:term-comparator-factory/mediators#main",bus:v}),k=new(nR().ActorHttpInvalidateListenable)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-context-preprocess-query-source-identify/^4.0.0/components/ActorContextPreprocessQuerySourceIdentify.jsonld#IActorContextPreprocessQuerySourceIdentifyArgs_default_invalidator",bus:_,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),Q=new(cR().MediatorAll)({name:"urn:comunica:default:http-invalidate/mediators#main",bus:_}),V=new(nR().ActorHttpInvalidateListenable)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-operation-service/^4.0.0/components/ActorQueryOperationService.jsonld#IActorQueryOperationServiceArgs_default_invalidator",bus:_,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),G=new(Py().MediatorRace)({name:"urn:comunica:default:query-result-serialize/mediators#serialize",bus:O}),$=new(Ub().MediatorCombineUnion)({field:"mediaTypes",name:"urn:comunica:default:query-result-serialize/mediators#mediaType",bus:O}),z=new(Ub().MediatorCombineUnion)({field:"mediaTypeFormats",name:"urn:comunica:default:query-result-serialize/mediators#mediaTypeFormat",bus:O}),X=new(Ub().MediatorCombineUnion)({field:"mergeHandlers",name:"urn:comunica:default:merge-bindings-context/mediators#main",bus:T});new(LR().ActorRdfJoinSingle)({mediatorJoinSelectivity:x,name:"urn:comunica:default:rdf-join/actors#inner-single",bus:g,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(QR().ActorRdfJoinMultiEmpty)({mediatorJoinSelectivity:x,name:"urn:comunica:default:rdf-join/actors#inner-multi-empty",bus:g,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});const H=new(vL().ActorRdfJoinHash)({mediatorHashBindings:j,canHandleUndefs:!1,mediatorJoinSelectivity:x,name:"urn:comunica:default:rdf-join/actors#inner-hash-def",bus:g,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),J=new(vL().ActorRdfJoinHash)({mediatorHashBindings:j,canHandleUndefs:!0,mediatorJoinSelectivity:x,name:"urn:comunica:default:rdf-join/actors#inner-hash-undef",bus:g,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),K=new(jL().ActorRdfJoinSymmetricHash)({mediatorHashBindings:j,mediatorJoinSelectivity:x,name:"urn:comunica:default:rdf-join/actors#inner-symmetric-hash",bus:g,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),Y=new(DL().ActorRdfJoinNestedLoop)({mediatorJoinSelectivity:x,name:"urn:comunica:default:rdf-join/actors#inner-nested-loop",bus:g,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(JL().ActorRdfJoinMinusHash)({canHandleUndefs:!1,mediatorJoinSelectivity:x,name:"urn:comunica:default:rdf-join/actors#minus-hash-def",bus:g,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(JL().ActorRdfJoinMinusHash)({canHandleUndefs:!0,mediatorJoinSelectivity:x,name:"urn:comunica:default:rdf-join/actors#minus-hash-undef",bus:g,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(tC().ActorRdfJoinOptionalHash)({canHandleUndefs:!1,blocking:!1,mediatorJoinSelectivity:x,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-nonblocking",bus:g,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(tC().ActorRdfJoinOptionalHash)({canHandleUndefs:!1,blocking:!0,mediatorJoinSelectivity:x,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-blocking",bus:g,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(tC().ActorRdfJoinOptionalHash)({canHandleUndefs:!0,blocking:!1,mediatorJoinSelectivity:x,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-nonblocking",bus:g,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(tC().ActorRdfJoinOptionalHash)({canHandleUndefs:!0,blocking:!0,mediatorJoinSelectivity:x,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-blocking",bus:g,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(sC().ActorRdfJoinOptionalNestedLoop)({mediatorJoinSelectivity:x,name:"urn:comunica:default:rdf-join/actors#optional-nested-loop",bus:g,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(jC().ActorBindingsAggregatorFactoryCount)({mediatorExpressionEvaluatorFactory:I,name:"urn:comunica:default:bindings-aggregator-factory/actors#count",bus:d,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(IC().ActorBindingsAggregatorFactoryGroupConcat)({mediatorExpressionEvaluatorFactory:I,name:"urn:comunica:default:bindings-aggregator-factory/actors#group-concat",bus:d,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(VC().ActorBindingsAggregatorFactorySample)({mediatorExpressionEvaluatorFactory:I,name:"urn:comunica:default:bindings-aggregator-factory/actors#sample",bus:d,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(WC().ActorBindingsAggregatorFactoryWildcardCount)({mediatorExpressionEvaluatorFactory:I,name:"urn:comunica:default:bindings-aggregator-factory/actors#wildcard-count",bus:d,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(sB().ActorBindingsAggregatorFactoryAverage)({mediatorFunctionFactory:R,mediatorExpressionEvaluatorFactory:I,name:"urn:comunica:default:bindings-aggregator-factory/actors#average",bus:d,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(gB().ActorBindingsAggregatorFactorySum)({mediatorFunctionFactory:R,mediatorExpressionEvaluatorFactory:I,name:"urn:comunica:default:bindings-aggregator-factory/actors#sum",bus:d,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(jB().ActorFunctionFactoryExpressionIn)({mediatorFunctionFactory:R,name:"urn:comunica:default:function-factory/actors#expression-function-in",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(IB().ActorFunctionFactoryExpressionNotIn)({mediatorFunctionFactory:R,name:"urn:comunica:default:function-factory/actors#expression-function-not-in",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(VB().ActorFunctionFactoryTermGreaterThan)({mediatorFunctionFactory:R,name:"urn:comunica:default:function-factory/actors#term-function-greater-than",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(WB().ActorFunctionFactoryTermGreaterThanEqual)({mediatorFunctionFactory:R,name:"urn:comunica:default:function-factory/actors#term-function-greater-than-equal",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(sq().ActorFunctionFactoryTermInequality)({mediatorFunctionFactory:R,name:"urn:comunica:default:function-factory/actors#term-function-inequality",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(gq().ActorFunctionFactoryTermLesserThan)({mediatorFunctionFactory:R,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(jq().ActorFunctionFactoryTermLesserThanEqual)({mediatorFunctionFactory:R,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than-equal",bus:h,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Dq().ActorQueryOperationAsk)({mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#ask",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Cq().ActorQueryOperationBgpJoin)({mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#bgp",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Hq().ActorQueryOperationDistinctIdentity)({mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#distinct",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(eU().ActorQueryOperationExtend)({mediatorExpressionEvaluatorFactory:I,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#extend",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(iU().ActorQueryOperationFilter)({mediatorExpressionEvaluatorFactory:I,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#filter",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(yU().ActorQueryOperationConstruct)({mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#construct",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(OU().ActorQueryOperationFromQuad)({mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#from",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(FU().ActorQueryOperationProject)({mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#project",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(NU().ActorQueryOperationReducedHash)({mediatorHashBindings:j,cacheSize:100,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#reduced",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(qU().ActorQueryOperationSlice)({mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#slice",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new($U().ActorQueryOperationUnion)({mediatorRdfMetadataAccumulate:P,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#union",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(ik().ActorQueryOperationPathAlt)({mediatorRdfMetadataAccumulate:P,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#path-alt",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(dk().ActorQueryOperationPathInv)({mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#path-inv",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(bk().ActorQueryOperationPathLink)({mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#path-link",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Sk().ActorQueryOperationPathNps)({mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#path-nps",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Pk().ActorQueryOperationUpdateCompositeUpdate)({mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#update-composite",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Lk().ActorQueryOperationClear)({mediatorUpdateQuads:D,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#update-clear",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Qk().ActorQueryOperationCreate)({mediatorUpdateQuads:D,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#update-create",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Hk().ActorQueryOperationDrop)({mediatorUpdateQuads:D,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#update-drop",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(wQ().ActorQueryOperationJoin)({mediatorJoin:C,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#join",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(xQ().ActorQueryOperationMinus)({mediatorJoin:C,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#minus",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(RQ().ActorQueryOperationLeftJoin)({mediatorJoin:C,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#leftjoin",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(kQ().ActorQueryOperationPathSeq)({mediatorJoin:C,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#path-seq",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const W=new(XQ().ActorRdfJoinMultiSmallest)({mediatorJoinEntriesSort:E,mediatorJoin:C,mediatorJoinSelectivity:x,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest",bus:g,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(ZQ().ActorQueryOperationLoad)({mediatorUpdateQuads:D,mediatorQuerySourceIdentify:q,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#update-load",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(uV().ActorBindingsAggregatorFactoryMax)({mediatorTermComparatorFactory:U,mediatorExpressionEvaluatorFactory:I,name:"urn:comunica:default:bindings-aggregator-factory/actors#max",bus:d,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(mV().ActorBindingsAggregatorFactoryMin)({mediatorTermComparatorFactory:U,mediatorExpressionEvaluatorFactory:I,name:"urn:comunica:default:bindings-aggregator-factory/actors#min",bus:d,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(AV().ActorQueryOperationOrderBy)({mediatorExpressionEvaluatorFactory:I,mediatorTermComparatorFactory:U,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#orderby",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const Z=new(MV().ActorOptimizeQueryOperationFilterPushdown)({aggressivePushdown:!1,maxIterations:10,splitConjunctive:!0,mergeConjunctive:!0,pushIntoLeftJoins:!0,pushEqualityIntoPatterns:!0,name:"urn:comunica:default:optimize-query-operation/actors#filter-pushdown",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[A]});new(BV().ActorContextPreprocessQuerySourceIdentify)({cacheSize:100,httpInvalidator:k,mediatorQuerySourceIdentify:q,mediatorContextPreprocess:S,name:"urn:comunica:default:context-preprocess/actors#query-source-identify",bus:n,busFailMessage:"Context preprocessing failed",beforeActors:[w]});const ee=new(ds().ActorInitQuery)({mediatorQueryProcess:B,mediatorQueryResultSerialize:G,mediatorQueryResultSerializeMediaTypeCombiner:$,mediatorQueryResultSerializeMediaTypeFormatCombiner:z,mediatorHttpInvalidate:Q,defaultQueryInputFormat:"sparql",allowNoSources:!1,name:"urn:comunica:default:init/actors#query",bus:r,busFailMessage:"Initialization failed: none of the configured actors were to initialize"});new(oG().ActorExpressionEvaluatorFactoryDefault)({mediatorQueryOperation:L,mediatorFunctionFactory:R,mediatorMergeBindingsContext:X,name:"urn:comunica:default:expression-evaluator-factory/actors#default",bus:f,busFailMessage:"Creation of Expression Evaluator failed"}),new(hG().ActorQueryOperationGroup)({mediatorMergeBindingsContext:X,mediatorBindingsAggregatorFactory:N,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#group",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(_G().ActorQueryOperationNop)({mediatorMergeBindingsContext:X,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#nop",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(AG().ActorQueryOperationService)({forceSparqlEndpoint:!1,mediatorMergeBindingsContext:X,mediatorQuerySourceIdentify:q,httpInvalidator:V,cacheSize:32,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#service",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(MG().ActorQueryOperationValues)({mediatorMergeBindingsContext:X,name:"urn:comunica:default:query-operation/actors#values",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(BG().ActorQueryOperationPathOneOrMore)({mediatorMergeBindingsContext:X,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#path-one-or-more",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(GG().ActorQueryOperationPathZeroOrMore)({mediatorMergeBindingsContext:X,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#path-zero-or-more",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(KG().ActorQueryOperationPathZeroOrOne)({mediatorMergeBindingsContext:X,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#path-zero-or-one",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(r$().ActorQueryOperationUpdateDeleteInsert)({mediatorUpdateQuads:D,mediatorMergeBindingsContext:X,mediatorQueryOperation:L,name:"urn:comunica:default:query-operation/actors#update-delete-insert",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(u$().ActorRdfJoinNone)({mediatorMergeBindingsContext:X,mediatorJoinSelectivity:x,name:"urn:comunica:default:rdf-join/actors#inner-none",bus:g,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(_$().ActorRdfJoinOptionalBind)({bindOrder:"depth-first",selectivityModifier:1e-6,mediatorQueryOperation:L,mediatorMergeBindingsContext:X,mediatorJoinSelectivity:x,name:"urn:comunica:default:rdf-join/actors#optional-bind",bus:g,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(M$().ActorQueryProcessSequential)({mediatorContextPreprocess:S,mediatorQueryParse:M,mediatorOptimizeQueryOperation:F,mediatorQueryOperation:L,mediatorMergeBindingsContext:X,name:"urn:comunica:default:query-process/actors#sequential",bus:m,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),new(Z$().ActorQuerySourceIdentifyRdfJs)({mediatorMergeBindingsContext:X,name:"urn:comunica:default:query-source-identify/actors#rdfjs",bus:b,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}"}),new(hz().ActorTermComparatorFactoryExpressionEvaluator)({mediatorQueryOperation:L,mediatorFunctionFactory:R,mediatorMergeBindingsContext:X,name:"urn:comunica:default:term-comparator-factory/actors#expression-evaluator",bus:v,busFailMessage:"Creation of term comparator failed"});const te=new(b$().ActorRdfJoinMultiBind)({bindOrder:"depth-first",selectivityModifier:1e-4,minMaxCardinalityRatio:60,mediatorJoinEntriesSort:E,mediatorQueryOperation:L,mediatorMergeBindingsContext:X,mediatorJoinSelectivity:x,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind",bus:g,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[W,H,J,K,Y]});new(_z().ActorRdfJoinMultiSmallestFilterBindings)({selectivityModifier:1e-4,blockSize:64,mediatorJoinEntriesSort:E,mediatorJoin:C,mediatorJoinSelectivity:x,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest-filter-bindings",bus:g,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[W,H,J,K,Y]});const re=new(Az().ActorOptimizeQueryOperationPruneEmptySourceOperations)({useAskIfSupported:!1,name:"urn:comunica:default:optimize-query-operation/actors#prune-empty-source-operations",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Z]});new(Mz().ActorOptimizeQueryOperationLeftjoinExpressionPushdown)({name:"urn:comunica:default:optimize-query-operation/actors#leftjoin-expression-pushdown",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Z]}),new(Bz().ActorRdfJoinMultiBindSource)({selectivityModifier:1e-4,blockSize:16,mediatorJoinEntriesSort:E,mediatorJoinSelectivity:x,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind-source",bus:g,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[W,te,H,J,K,Y]});const ne=new(Gz().ActorOptimizeQueryOperationJoinConnected)({name:"urn:comunica:default:optimize-query-operation/actors#join-connected",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[re]}),ae=new(Kz().ActorOptimizeQueryOperationBgpToJoin)({name:"urn:comunica:default:optimize-query-operation/actors#bgp-to-join",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[ne]}),oe=new(rX().ActorOptimizeQueryOperationJoinBgp)({name:"urn:comunica:default:optimize-query-operation/actors#join-bgp",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[ae]}),ie=new(uX().ActorOptimizeQueryOperationAssignSourcesExhaustive)({name:"urn:comunica:default:optimize-query-operation/actors#assign-sources-exhaustive",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[oe]});return new(bX().ActorOptimizeQueryOperationDescribeToConstructsSubject)({name:"urn:comunica:default:optimize-query-operation/actors#describe-to-constructs-subject",bus:i,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[ie]}),ee})}function _X(){if(fX)return Yt;fX=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.QueryEngine=void 0;const e=ds(),t=vX();let r=class extends e.QueryEngineBase{constructor(e=t()){super(e)}};return Yt.QueryEngine=r,Yt}function OX(){return hX||(hX=1,e=Kt,t=Kt&&Kt.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=Kt&&Kt.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(_X(),e)),Kt;var e,t,r}var TX=OX(),wX=XL();function SX(e){const t={};for(const[r,n]of[...e])t[r.value]=n;return t}async function jX({bindings:e,dataset:t,factory:r,query:n}){const a=new AX(t),o=new TX.QueryEngine,i=new wX.BindingsFactory(r).bindings(e);return(await o.queryBindings(n,{sources:[a],initialBindings:i})).toArray()}class AX{constructor(e){this.dataset=e}match(e,t,r,n){return c.Readable.from(this.dataset.match(e,t,r,n))}}function FX(e,t=[]){for(const r of e.out([O.imports]))FX(r,t);for(const r of e.out([S.declare])){const e=r.out([S.prefix]).value,n=r.out([S.namespace]).value;t.push(`PREFIX ${e}: <${n}>`)}return t}function EX({message:e,query:t,source:r}){return async n=>{const a=n.focusNode.dataset,o=n.factory,i=[[o.variable("this"),n.focusNode.term]],s=await jX({bindings:i,dataset:a,factory:o,query:t});for(const t of s){const a=SX(t),o=t.has("path")&&ie(n.focusNode.node([t.get("path")])),i=n.focusNode.node([t.get("value")||n.focusNode.term]);n.violation(S.SPARQLConstraintComponent,{args:a,message:e,path:o,source:r,value:i})}0===s.length&&n.debug(S.SPARQLConstraintComponent,{source:r})}}const xX=new Map([[S.sparql,function(e){const t=e.sparql.out([S.select]).value,r=FX(e.sparql.out([S.prefixes])),n=(a=e.path)?a.map(e=>{let t="";return"object"===e.start&&"subject"===e.end&&(t+="^"),t+=e.predicates.map(e=>`<${e.value}>`).join("|"),"oneOrMore"===e.quantifier?t+="+":"zeroOrMore"===e.quantifier?t+="*":"zeroOrOne"===e.quantifier&&(t+="?"),t}).join("/"):null;var a;return{generic:EX({message:e.sparql.out([S.message]).terms,query:[...r,t].filter(Boolean).join("\n").split("$PATH").join(n),source:e.sparql.terms})}}]]);new Map([[S.target,async function(e,t){const r=e.out([S.select]).value;if(!r)return[];const n=await jX({dataset:t.focusNode.dataset,factory:t.factory,query:r,bindings:[]}),a=t.factory.variable("this");return n.map(e=>e.get(a)).filter(Boolean)}]]);export{Jt as V,xX as v};
