var Z5=Object.defineProperty;var tT=i=>{throw TypeError(i)};var k5=(i,r,o)=>r in i?Z5(i,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[r]=o;var Ft=(i,r,o)=>k5(i,typeof r!="symbol"?r+"":r,o),Ab=(i,r,o)=>r.has(i)||tT("Cannot "+o);var V=(i,r,o)=>(Ab(i,r,"read from private field"),o?o.call(i):r.get(i)),tt=(i,r,o)=>r.has(i)?tT("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(i):r.set(i,o),Qe=(i,r,o,n)=>(Ab(i,r,"write to private field"),n?n.call(i,o):r.set(i,o),o),Me=(i,r,o)=>(Ab(i,r,"access private method"),o);var Zm=(i,r,o,n)=>({set _(t){Qe(i,r,t,o)},get _(){return V(i,r,n)}});import{n as Rr,T as jr,t as om,a as ds,r as fs,f as XM,b as eq,c as tq,d as rq,e as nq}from"./rdf-DktVfMyT.js";import{a as iq,g as aq,b as zM}from"./charts-BadQMOzK.js";class rT{constructor({dataset:r,end:o,quad:n,start:t}){this.dataset=r,this.end=o,this.quad=n,this.start=t}get term(){return this.quad[this.end]}get graph(){return this.quad.graph}get startTerm(){return this.quad[this.start]}}Rr("http://www.w3.org/2001/XMLSchema#");const zr=Rr("http://www.w3.org/1999/02/22-rdf-syntax-ns#");Rr("http://www.w3.org/2000/01/rdf-schema#");class lt{static add({ptr:r,start:o,end:n,subjects:t=[null],predicates:e=[null],objects:a=[null],graphs:u,callback:c}={}){if(!r.factory)throw new Error("add operation requires a factory");let s=()=>{};c&&(s=l=>{c(new rT({dataset:r.dataset,start:o,end:n,quad:l}))});for(const l of t)for(const d of e)for(const f of a)for(const h of u){const p={subject:l,predicate:d,object:f,graph:h};p[o]=r.term;const y=r.factory.quad(p.subject,p.predicate,p.object,p.graph);r.dataset.add(y),s(y)}return r}static addList({ptr:r,predicates:o,items:n,graphs:t}){if(r.isAny())throw new Error("can't attach a list to an any ptr");for(const e of o)for(const a of t){const u=n.map(()=>r.factory.blankNode());r.dataset.add(r.factory.quad(r.term,e,u[0]||zr.nil,a));for(let c=0;c<u.length;c++)r.dataset.add(r.factory.quad(u[c],zr.first,n[c],a)),r.dataset.add(r.factory.quad(u[c],zr.rest,u[c+1]||zr.nil,a))}return r}static delete({ptr:r,start:o,subjects:n=[null],predicates:t=[null],objects:e=[null]}){for(const a of n)for(const u of t)for(const c of e){const s={subject:a,predicate:u,object:c};s[o]=r.term;const l=r.dataset.match(s.subject,s.predicate,s.object);for(const d of l)r.dataset.delete(d)}return r}static deleteList({ptr:r,predicates:o}){const n=[];for(const t of o)for(const e of r.dataset.match(r.term,t)){let a=e.object;for(n.push(e);!zr.nil.equals(a);){a=n[n.length-1].object;const u=r.dataset.match(a);if(u.size===0)break;for(const c of u)n.push(c)}}for(const t of n)r.dataset.delete(t);return r}static execute({ptr:r,operation:o="traverse",quantifier:n,start:t,end:e,subjects:a,predicates:u,objects:c,graphs:s,items:l,callback:d}={}){if(o==="add")return lt.add({ptr:r,start:t,end:e,subjects:a,predicates:u,objects:c,graphs:s,callback:d});if(o==="addList")return lt.addList({ptr:r,predicates:u,items:l,graphs:s});if(o==="delete")return lt.delete({ptr:r,start:t,subjects:a,predicates:u,objects:c});if(o==="deleteList")return lt.deleteList({ptr:r,predicates:u});if(o==="isList")return lt.isList({ptr:r});if(o==="list")return lt.list({ptr:r});if(o==="traverse")return lt.traverse({ptr:r,quantifier:n,start:t,end:e,subjects:a,predicates:u,objects:c,graphs:s});throw new Error(`unknown operation ${o}`)}static isList({ptr:r}){return r.isAny()?!1:!!(zr.nil.equals(r.term)||lt.traverse({ptr:r,predicates:[zr.first]}).length===1)}static list({ptr:r}){if(r.isList())return{*[Symbol.iterator](){for(;r&&!r.term.equals(zr.nil);){const o=r.out([zr.first]);if(o.length!==1)throw new Error(`Invalid list: rdf:first count not equals one on ${r.value}`);const n=r.out([zr.rest]);if(n.length!==1)throw new Error(`Invalid list: rdf:rest count not equals one on ${r.value}`);yield o[0],r=n[0]}}}}static traverse({ptr:r,quantifier:o="one",start:n="subject",end:t="object",subjects:e=[null],predicates:a=[null],objects:u=[null],graphs:c=[null],callback:s}){if(o==="one")return lt.traverseOne({ptr:r,start:n,end:t,subjects:e,predicates:a,objects:u,graphs:c,callback:s});if(o==="oneOrMore"){const l=lt.traverse({ptr:r,end:t,start:n,subjects:e,predicates:a,objects:u,graphs:c,callback:s});return lt.traverseMore({ptrs:l,end:t,start:n,subjects:e,predicates:a,objects:u,graphs:c,callback:s})}if(o==="zeroOrMore")return lt.traverseMore({ptrs:[r],end:t,start:n,subjects:e,predicates:a,objects:u,graphs:c,callback:s});if(o==="zeroOrOne")return[r,...lt.traverse({ptr:r,end:t,start:n,subjects:e,predicates:a,objects:u,graphs:c,callback:s})];throw new Error(`unknown quantifier ${o}`)}static traverseMore({ptrs:r,end:o,start:n,subjects:t,predicates:e,objects:a,graphs:u,callback:c}={}){let s=[...r],l,d;do{l=[];for(const f of r)l=[...l,...lt.traverseOne({ptr:f,end:o,start:n,subjects:t,predicates:e,objects:a,graphs:u,callback:c})];d&&(l=l.filter(f=>!d.has(f.term))),r=l,s=[...s,...l],d=new jr(s.map(f=>f.term))}while(l.length>0);return s}static traverseOne({ptr:r,start:o,end:n,subjects:t,predicates:e,objects:a,graphs:u,callback:c=(s,l)=>l.extend(s)}={}){const s=[];for(const l of t)for(const d of e)for(const f of a)for(const h of u){const p={subject:l,predicate:d,object:f,graph:h};p[o]=r.term;for(const y of r.dataset.match(p.subject,p.predicate,p.object,p.graph))s.push(c(new rT({dataset:r.dataset,end:n,quad:y,start:o}),r))}return s}}function nT(i,r){return r?o=>r(i.extend(o)):()=>{}}class iT{constructor({dataset:r,edges:o=[],factory:n,graph:t,term:e}){if(!r&&o.length===0)throw new Error("dataset or edges is required");if(o.length===0&&typeof e>"u")throw new Error("edges or term must be given");if(o.length>0&&e)throw new Error("edges or term must be given");this.dataset=r||o[o.length-1].dataset,this.edges=o,this.factory=n,this._graph=t,o.length===0&&(this._term=e)}get edge(){return this.edges[this.edges.length-1]}get graph(){return typeof this._graph=="object"?this._graph:this.edge&&this.edge.graph}get length(){return this._term!==void 0?1:this.edges.length+1}get startTerm(){return this._term||this.edges[0].startTerm}get term(){return this._term!==void 0?this._term:this.edge.term}get value(){const r=this.term;return r===null?void 0:r.value}addIn(r,o,n){return lt.add({ptr:this,start:"object",end:"subject",subjects:o,predicates:r,graphs:[this.graph||this.factory.defaultGraph()],callback:nT(this,n)})}addList(r,o){return lt.addList({ptr:this,predicates:r,graphs:[this.graph||this.factory.defaultGraph()],items:o})}addOut(r,o,n){return lt.add({ptr:this,start:"subject",end:"object",predicates:r,objects:o,graphs:[this.graph||this.factory.defaultGraph()],callback:nT(this,n)})}deleteIn(r,o){return lt.delete({ptr:this,start:"object",subjects:o,predicates:r})}deleteList(r){return lt.deleteList({ptr:this,predicates:r})}deleteOut(r,o){return lt.delete({ptr:this,start:"subject",predicates:r,objects:o})}execute({operation:r,quantifier:o,start:n,end:t,subjects:e,predicates:a,objects:u,graphs:c,items:s,callback:l}){return lt.execute({ptr:this,operation:r,quantifier:o,start:n,end:t,subjects:e,predicates:a,objects:u,graphs:c,items:s,callback:l})}extend(r){return new this.constructor({dataset:this.dataset,edges:[...this.edges,r],factory:this.factory,graph:this._graph})}hasIn(r,o){return lt.traverse({ptr:this,start:"object",end:"object",subjects:o,predicates:r,graphs:[this.graph]})}hasOut(r,o){return lt.traverse({ptr:this,start:"subject",end:"subject",predicates:r,objects:o,graphs:[this.graph]})}in(r,o){return lt.traverse({ptr:this,start:"object",end:"subject",subjects:o,predicates:r,graphs:[this.graph]})}isAny(){return!this.term}isList(){return lt.isList({ptr:this})}list(){return lt.list({ptr:this})}*nodes(){for(let r=0;r<this.length;r++)this._term!==void 0?yield{dataset:this.dataset,term:this._term}:this.edges.length>r?yield{dataset:this.edges[r].dataset,term:this.edges[r].startTerm}:this.edges.length===r&&(yield{dataset:this.edges[r-1].dataset,term:this.edges[r-1].term})}out(r,o){return lt.traverse({ptr:this,predicates:r,objects:o,graphs:[this.graph]})}*quads(){for(const{quad:r}of this.edges)yield r}trim(){return new this.constructor({dataset:this.dataset,factory:this.factory,graph:this.graph,term:this.term})}}function aT(i,r){return i?i.equals(r):i===r}function oq(i,r){return!(i.dataset!==r.dataset||!aT(i.graph,r.graph)||!aT(i.term,r.term))}function oT(i,r){return r?o=>r(new i.constructor({factory:i.factory,ptrs:[o]})):()=>{}}class Rg{constructor({dataset:r,factory:o,ptrs:n,terms:t,graphs:e}){if(this.factory=o,n)this.ptrs=[...n];else{this.ptrs=[];for(const a of t||[null])for(const u of e||[null])this.ptrs.push(new iT({dataset:r,factory:o,graph:u,term:a}))}}get dataset(){const r=new Set(this.datasets);return r.size!==1?null:r[Symbol.iterator]().next().value}get datasets(){return this.ptrs.map(r=>r.dataset)}get term(){const r=new jr(this.terms);if(r.size===1)return r[Symbol.iterator]().next().value}get terms(){return this.ptrs.map(r=>r.term)}get value(){const r=this.term;return r?.value}get values(){return this.ptrs.map(r=>r.value)}addIn(r,o,n){const t=oT(this,n);for(const e of this.ptrs)e.addIn(r,o,t);return this}addList(r,o){if(this.isAny())throw new Error("can't attach a list to an any ptr");for(const n of this.ptrs)n.addList(r,o);return this}addOut(r,o,n){const t=oT(this,n);for(const e of this.ptrs)e.addOut(r,o,t);return this}clone(r){return new this.constructor({factory:this.factory,ptrs:this.ptrs,...r})}deleteIn(r,o){for(const n of this.ptrs)n.deleteIn(r,o);return this}deleteList(r){for(const o of this.ptrs)o.deleteList(r);return this}deleteOut(r,o){for(const n of this.ptrs)n.deleteOut(r,o);return this}distinct(){const r=this.ptrs.reduce((o,n)=>(o.some(t=>oq(t,n))||o.push(n.trim()),o),[]);return this.clone({ptrs:r})}execute(r){return this.clone({ptrs:this.ptrs.flatMap(o=>o.execute(r))})}executeAll(r){let o=this;for(const n of r)o=o.execute(n);return o}filter(r){return this.clone({ptrs:[...this].filter(r).map(o=>o.ptrs[0])})}hasIn(r,o){return this.clone({ptrs:this.ptrs.flatMap(n=>n.hasIn(r,o))})}hasOut(r,o){return this.clone({ptrs:this.ptrs.flatMap(n=>n.hasOut(r,o))})}in(r,o){return this.clone({ptrs:this.ptrs.flatMap(n=>n.in(r,o))})}isAny(){return this.ptrs.length>0&&this.ptrs.some(r=>r.isAny())}isList(){return this.ptrs.length!==1?!1:this.ptrs[0].isList()}list(){if(!this.isList())return;const r=this.ptrs[0].list(),o=this;return(function*(){for(const n of r)yield o.clone({ptrs:[n]})})()}map(r){return[...this].map(r)}node(r){const o=this.dataset,n=[...r].map(t=>new iT({dataset:o,factory:this.factory,term:t}));return this.clone({ptrs:n})}out(r,o){return this.clone({ptrs:this.ptrs.flatMap(n=>n.out(r,o))})}*quads(){for(const{edges:r}of this.ptrs)for(const{quad:o}of r)yield o}trim(){return this.clone({ptrs:this.ptrs.map(r=>r.trim())})}*[Symbol.iterator](){for(const r of this.ptrs)yield this.clone({ptrs:[r]})}}const uq=Rr("http://www.w3.org/2002/07/owl#"),cs=Rr("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),sq=Rr("http://www.w3.org/2000/01/rdf-schema#"),re=Rr("http://www.w3.org/ns/shacl#"),G1=Rr("https://schemas.link/shacl-next#"),p0=Rr("http://www.w3.org/2001/XMLSchema#");function cq(i){return i?`{${[...i.quads()].map(r=>om(r)).join(" ")}}`:"{}"}function lq(i){return i?`{${i.map(r=>cq(r)).join(" ")}}`:"{}"}var wb,uT;function dq(){if(uT)return wb;uT=1;var i=iq(),r="Expected a function";function o(n,t){var e;if(typeof t!="function")throw new TypeError(r);return n=i(n),function(){return--n>0&&(e=t.apply(this,arguments)),n<=1&&(t=void 0),e}}return wb=o,wb}var Eb,sT;function fq(){if(sT)return Eb;sT=1;var i=dq();function r(o){return i(2,o)}return Eb=r,Eb}var pq=fq();const Cr=aq(pq);let cT=class{constructor({details:r,factory:o,options:n,results:t=[]}={}){this.details=r,this.factory=o,this.options=n,this.results=t,this._conforms=Cr(()=>!this.results.some(e=>e.severity.equals(re.Info)||e.severity.equals(re.Violation)||e.severity.equals(re.Warning))),this._ptr=Cr(()=>this.build())}get conforms(){return this._conforms()}get dataset(){return this.ptr.dataset}get ptr(){return this._ptr()}get term(){return this.ptr.term}build(){const r=new Rg({dataset:this.factory.dataset(),factory:this.factory,terms:[this.factory.blankNode()]});r.addOut([cs.type],[re.ValidationReport]).addOut([re.conforms],[this.factory.literal(this.conforms.toString(),p0.boolean)]);for(const o of this.results)r.addOut([re.result],[this.factory.blankNode()],n=>{o.build(n,this.options)});return r}coverage(){return this.results.flatMap(r=>r.coverage())}};function hq(i,r){return Object.entries(r).reduce((o,[n,t])=>(t&&t.termType&&(t=om(t)),o.replace(`{$${n}}`,t).replace(`{?${n}}`,t)),i)}let yq=class{constructor({args:r={},constraintComponent:o,factory:n,focusNode:t,message:e=[],path:a,results:u=[],severity:c,shape:s,source:l=[],value:d,valuePaths:f=[]}={}){this.args=r,this.constraintComponent=o,this.factory=n,this.focusNode=t,this.path=a||s.path,this.results=u,this.severity=c,this.shape=s,this.source=l,this.value=d,this.valuePaths=f,this._message=Cr(()=>(this.shape.message.length>0&&(e=this.shape.message),e.length===0&&(e=this.shape.ptr.node([this.constraintComponent]).out([re.message]).terms),e.map(h=>n.literal(hq(h.value,r),h.language||null))))}get message(){return this._message()}build(r,{details:o}={}){r.addOut([cs.type],[re.ValidationResult]).addOut([re.focusNode],this.focusNode.terms).addOut([re.resultSeverity],[this.severity]).addOut([re.sourceConstraint],this.source).addOut([re.sourceConstraintComponent],[this.constraintComponent]).addOut([re.sourceShape],this.shape.ptr.terms),this.message&&r.addOut([re.resultMessage],this.message);const n=t=>{if(t.quantifier==="one")return t.predicates.length>1?r.node([this.factory.blankNode()]).addList([re.alternativePath],t.predicates):t.start==="object"?r.node([this.factory.blankNode()]).addOut([re.inversePath],[t.predicates[0]]):r.node([t.predicates[0]]);if(t.quantifier==="oneOrMore")return r.node([this.factory.blankNode()]).addOut([re.oneOrMorePath],[t.predicates[0]]);if(t.quantifier==="zeroOrMore")return r.node([this.factory.blankNode()]).addOut([re.zeroOrMorePath],[t.predicates[0]]);if(t.quantifier==="zeroOrOne")return r.node([this.factory.blankNode()]).addOut([re.zeroOrOnePath],[t.predicates[0]])};if(this.path&&(this.path.length===1?r.addOut([re.resultPath],n(this.path[0]).terms):r.addList([re.resultPath],this.path.map(t=>n(t).term))),typeof this.value<"u"&&r.addOut([re.value],this.value.terms),o)for(const t of this.results)r.addOut([re.detail],[this.factory.blankNode()],e=>{t.build(e,{details:o})})}coverage(){return[...this.valuePaths.flatMap(r=>[...r.quads()]),...this.results.flatMap(r=>r.coverage())]}},_q=class HM{constructor({factory:r,focusNode:o,options:n={debug:!1,details:!1},processed:t=new Set,report:e=new cT({factory:r,options:n}),results:a=new Map,shape:u,value:c,valueOrNode:s,valuePaths:l,values:d}={}){this.factory=r,this.focusNode=o,this.options=n,this.processed=t,this.report=e,this.results=a,this.shape=u,this.value=c,this.valuePaths=l,this.valueOrNode=s,this.values=d}create({child:r,focusNode:o=this.focusNode,shape:n=this.shape,value:t=this.value,valueOrNode:e=this.valueOrNode,valuePaths:a=this.valuePaths,values:u=this.values}={}){return new HM({factory:this.factory,focusNode:o,options:this.options,processed:this.processed,report:r?new cT({factory:this.factory,options:this.options}):this.report,results:this.results,shape:n,value:t,valueOrNode:e,valuePaths:a,values:u})}id({shape:r=this.shape}={}){return`${om(r.ptr.term)} - ${om(this.focusNode.term)} - ${lq(this.valuePaths)}`}result(r){const o=new yq({factory:this.factory,focusNode:this.focusNode,shape:this.shape,value:this.value,valuePaths:this.valuePaths,...r}),n=this.id();this.results.has(n)?this.results.get(n).add(o):this.results.set(n,new Set([o])),this.report.results.push(o)}debug(r,o){this.options.debug&&this.result({severity:G1.Debug,constraintComponent:r,...o})}trace(r,o){this.options.trace&&this.result({severity:G1.Trace,constraintComponent:r,...o})}test(r,o,n){r?this.debug(o,n):this.violation(o,n)}violation(r,o){this.result({constraintComponent:r,severity:this.shape.severity||re.Violation,...o})}};function mq(){return{generic:gq()}}function gq(){return i=>{i.trace(G1.TraversalConstraintComponent,{args:{},message:[i.factory.literal("Traversal")],value:i.valueOrNode})}}class bq{constructor(r){this.validations=new ds(r)}compile(r){const o=r.validator.options.coverage;if(r.deactivated)return[];let n=!1;const t=new Set;for(const e of r.ptr.execute({start:"subject",end:"predicate"})){const a=this.validations.get(e.term);a&&(t.add(a),e.term.equals(re.property)&&(n=!0))}return o&&r.isPropertyShape&&!n&&t.add(mq),[...t].map(e=>e(r)).filter(Boolean)}}var Vn={},Gn={},dc={},fc={},lT;function xs(){if(lT)return fc;lT=1,Object.defineProperty(fc,"__esModule",{value:!0}),fc.Translator=void 0;let i=class{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(o){throw new Error(`Invalid RDF ${o.datatype.value} value: '${o.value}'`)}registerHandler(o,n,t){for(const e of n)this.supportedRdfDatatypes.push(e),this.fromRdfHandlers[e.value]=o;for(const e of t){let a=this.toRdfHandlers[e];a||(this.toRdfHandlers[e]=a=[]),a.push(o)}}fromRdf(o,n){const t=this.fromRdfHandlers[o.datatype.value];return t?t.fromRdf(o,n):o.value}toRdf(o,n){const t=this.toRdfHandlers[typeof o];if(t)for(const e of t){const a=e.toRdf(o,n);if(a)return a}throw new Error(`Invalid JavaScript value: '${o}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}};return fc.Translator=i,fc}var dT;function vq(){if(dT)return dc;dT=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.TypeHandlerBoolean=void 0;const i=xs();let r=class $M{fromRdf(n,t){switch(n.value){case"true":return!0;case"false":return!1;case"1":return!0;case"0":return!1}return t&&i.Translator.incorrectRdfDataType(n),!1}toRdf(n,{datatype:t,dataFactory:e}){return e.literal(n?"true":"false",t||e.namedNode($M.TYPE))}};return dc.TypeHandlerBoolean=r,r.TYPE="http://www.w3.org/2001/XMLSchema#boolean",dc}var pc={},fT;function Tq(){if(fT)return pc;fT=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.TypeHandlerDate=void 0;const i=xs();let r=class X1{fromRdf(n,t){switch(t&&!n.value.match(X1.VALIDATORS[n.datatype.value.substr(33,n.datatype.value.length)])&&i.Translator.incorrectRdfDataType(n),n.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(n.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const e=n.value.split("-");return new Date(0,parseInt(e[0],10)-1,parseInt(e[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(n.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(n.value+"-01");default:return new Date(n.value)}}toRdf(n,{datatype:t,dataFactory:e}){if(t=t||e.namedNode(X1.TYPES[0]),!(n instanceof Date))return null;const a=n;let u;switch(t.value){case"http://www.w3.org/2001/XMLSchema#gDay":u=String(a.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":u=a.getUTCMonth()+1+"-"+a.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":u=String(a.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":u=a.getUTCFullYear()+"-"+(a.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":u=a.toISOString().replace(/T.*$/,"");break;default:u=a.toISOString()}return e.literal(u,t)}};return pc.TypeHandlerDate=r,r.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],r.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/},pc}var hc={},pT;function Oq(){if(pT)return hc;pT=1,Object.defineProperty(hc,"__esModule",{value:!0}),hc.TypeHandlerNumberDouble=void 0;const i=xs();let r=class JM{fromRdf(n,t){const e=parseFloat(n.value);return t&&isNaN(e)&&i.Translator.incorrectRdfDataType(n),e}toRdf(n,{datatype:t,dataFactory:e}){return t=t||e.namedNode(JM.TYPES[0]),isNaN(n)?e.literal("NaN",t):isFinite(n)?n%1===0?null:e.literal(n.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),t):e.literal(n>0?"INF":"-INF",t)}};return hc.TypeHandlerNumberDouble=r,r.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"],hc}var yc={},hT;function Sq(){if(hT)return yc;hT=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.TypeHandlerNumberInteger=void 0;const i=xs();let r=class K_{fromRdf(n,t){const e=parseInt(n.value,10);return t&&(isNaN(e)||n.value.indexOf(".")>=0)&&i.Translator.incorrectRdfDataType(n),e}toRdf(n,{datatype:t,dataFactory:e}){return e.literal(String(n),t||(n<=K_.MAX_INT&&n>=K_.MIN_INT?e.namedNode(K_.TYPES[0]):e.namedNode(K_.TYPES[1])))}};return yc.TypeHandlerNumberInteger=r,r.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],r.MAX_INT=2147483647,r.MIN_INT=-2147483648,yc}var _c={},yT;function Fq(){if(yT)return _c;yT=1,Object.defineProperty(_c,"__esModule",{value:!0}),_c.TypeHandlerString=void 0;let i=class{fromRdf(o){return o.value}toRdf(o,{datatype:n,dataFactory:t}){return t.literal(o,n)}};return _c.TypeHandlerString=i,i.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"],_c}var _T;function mT(){return _T||(_T=1,(function(i){var r=Gn&&Gn.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Gn&&Gn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(vq(),i),o(Tq(),i),o(Oq(),i),o(Sq(),i),o(Fq(),i)})(Gn)),Gn}var jb={},gT;function Aq(){return gT||(gT=1,Object.defineProperty(jb,"__esModule",{value:!0})),jb}var bT;function wq(){return bT||(bT=1,(function(i){var r=Vn&&Vn.__createBinding||(Object.create?(function(h,p,y,b){b===void 0&&(b=y);var v=Object.getOwnPropertyDescriptor(p,y);(!v||("get"in v?!p.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return p[y]}}),Object.defineProperty(h,b,v)}):(function(h,p,y,b){b===void 0&&(b=y),h[b]=p[y]})),o=Vn&&Vn.__exportStar||function(h,p){for(var y in h)y!=="default"&&!Object.prototype.hasOwnProperty.call(p,y)&&r(p,h,y)};Object.defineProperty(i,"__esModule",{value:!0}),i.fromRdf=c,i.toRdf=s,i.getTermRaw=l,i.getSupportedRdfDatatypes=d,i.getSupportedJavaScriptPrimitives=f;const n=fs(),t=mT(),e=xs();o(mT(),i),o(Aq(),i),o(xs(),i);const a=new n.DataFactory,u=new e.Translator;u.registerHandler(new t.TypeHandlerString,t.TypeHandlerString.TYPES.map(h=>a.namedNode(h)),["string"]),u.registerHandler(new t.TypeHandlerBoolean,[t.TypeHandlerBoolean.TYPE].map(h=>a.namedNode(h)),["boolean"]),u.registerHandler(new t.TypeHandlerNumberDouble,t.TypeHandlerNumberDouble.TYPES.map(h=>a.namedNode(h)),["number"]),u.registerHandler(new t.TypeHandlerNumberInteger,t.TypeHandlerNumberInteger.TYPES.map(h=>a.namedNode(h)),["number"]),u.registerHandler(new t.TypeHandlerDate,t.TypeHandlerDate.TYPES.map(h=>a.namedNode(h)),["object"]);function c(h,p){return u.fromRdf(h,p)}function s(h,p){return p&&"namedNode"in p&&(p={dataFactory:p}),p=p||{},p&&!p.dataFactory&&(p.dataFactory=a),u.toRdf(h,p)}function l(h,p){return h.termType==="Literal"?c(h,p):h.value}function d(){return u.getSupportedRdfDatatypes()}function f(){return u.getSupportedJavaScriptPrimitives()}})(Vn)),Vn}var um=wq();function vT(i){if(i.term.termType!=="BlankNode")return{quantifier:"one",start:"subject",end:"object",predicates:[i.term]};const r=i.out([re.alternativePath]);if(r.ptrs.length===1&&r.ptrs[0].isList())return{quantifier:"one",start:"subject",end:"object",predicates:[...r.list()].map(a=>a.term)};const o=i.out([re.inversePath]);if(o.term)return{quantifier:"one",start:"object",end:"subject",predicates:[o.term]};const n=i.out([re.oneOrMorePath]);if(n.term)return{quantifier:"oneOrMore",start:"subject",end:"object",predicates:[n.term]};const t=i.out([re.zeroOrMorePath]);if(t.term)return{quantifier:"zeroOrMore",start:"subject",end:"object",predicates:[t.term]};const e=i.out([re.zeroOrOnePath]);if(e.term)return{quantifier:"zeroOrOne",start:"subject",end:"object",predicates:[e.term]}}function KM(i){return i.terms.length===0?null:i.ptrs[0].isList()?[...i.list()].map(r=>vT(r)):[vT(i)]}class Eq{constructor(r){this.shape=r,this._compiled=Cr(()=>this.shape.validator.registry.compile(r))}get compiled(){return this._compiled()}async validate(r){return r.focusNode.dataset.size===0||(this.shape.isPropertyShape?await this.validateProperty(r):await this.validateNode(r)),r}async validateNode(r){const o=r.create({shape:this.shape,valueOrNode:r.value||r.focusNode});for(const n of this.compiled)n.node&&await n.node(o),n.generic&&await n.generic(o)}async validateProperty(r){let o;this.shape.isSparqlShape?o=r.focusNode:o=r.focusNode.executeAll(this.shape.path);const n=o.node(new jr(o.terms)),t=[...o].reduce((a,u)=>{const c=u.term,s=o.node([c]);return a.has(c)||a.set(c,{value:s,valuePaths:[]}),a.get(c).valuePaths.push(u),a},new ds).values(),e=r.create({shape:this.shape,values:n});for(const a of this.compiled)a.property&&await a.property(e);for(const{value:a,valuePaths:u}of t){const c=r.create({shape:this.shape,value:a,valueOrNode:a,valuePaths:u});for(const s of this.compiled)s.generic&&await s.generic(c)}}}function z1(i){const r=new jr,n=new Rg({dataset:i.dataset,terms:i.terms}).execute({quantifier:"zeroOrMore",start:"object",end:"subject",predicates:[sq.subClassOf]});for(const t of n.ptrs)for(const{term:e}of t.nodes())r.add(e);return r}class jq{constructor(r,{registry:o}){this.registry=o,this.targetClass=new jr([...z1(r.hasOut([cs.type],[re.NodeShape])),...z1(r.out([re.targetClass]))]),this.targetNode=r.out([re.targetNode]).terms,this.targetObjectsOf=r.out([re.targetObjectsOf]).terms,this.targetSubjectsOf=r.out([re.targetSubjectsOf]).terms,this.targets=[...r.out([re.target])]}async resolve(r){const o=r.focusNode.node([null]),n=[...r.focusNode.hasOut([cs.type],this.targetClass).ptrs,...r.focusNode.node(this.targetNode).ptrs,...o.execute({start:"object",end:"object",predicates:this.targetObjectsOf}).ptrs,...o.execute({start:"subject",end:"subject",predicates:this.targetSubjectsOf}).ptrs];for(const e of this.targets)for(const[,a]of this.registry.targetResolvers){const u=await a(e,r);n.push(...r.focusNode.node(u).ptrs)}const t=r.focusNode.clone({ptrs:n});return t.node([...new jr(t.terms)])}}class Rq{constructor(r,{validator:o}){this.ptr=r,this.validator=o,this._deactivated=Cr(()=>{const n=this.ptr.out([re.deactivated]).term;return n&&um.fromRdf(n)}),this._message=Cr(()=>this.ptr.out([re.message]).terms),this._path=Cr(()=>KM(this.ptr.out([re.path]))),this._severity=Cr(()=>this.ptr.out([re.severity]).term),this._shapeValidator=Cr(()=>new Eq(this)),this._sparql=Cr(()=>this.ptr.out([re.sparql])),this._targetResolver=Cr(()=>new jq(this.ptr,{registry:this.validator.targetResolverRegistry}))}get deactivated(){return this._deactivated()}get isPropertyShape(){return!!this.path}get isSparqlShape(){return this.sparql.terms.length>0}get path(){return this._path()}get targetResolver(){return this._targetResolver()}get message(){return this._message()}get severity(){return this._severity()}get shapeValidator(){return this._shapeValidator()}get sparql(){return this._sparql()}async resolveTargets(r){return this.targetResolver.resolve(r)}async validate(r){const o=r.id({shape:this});if(r.processed.has(o)){if(r.results.has(o))for(const n of r.results.get(o))r.report.results.push(n);return r}return r.processed.add(o),this.shapeValidator.validate(r)}}class Dq{constructor(r){this.targetResolvers=new ds(r)}}function Pq(i){const r=parseInt(i.ptr.out([re.maxCount]).value);return{property:Mq(r)}}function Mq(i){return r=>{r.test(r.values.terms.length<=i,re.MaxCountConstraintComponent,{args:{maxCount:i},message:[r.factory.literal("More than {$maxCount} values")]})}}function Nq(i){const r=parseInt(i.ptr.out([re.minCount]).value);return{property:Iq(r)}}function Iq(i){return r=>{r.test(r.values.terms.length>=i,re.MinCountConstraintComponent,{args:{minCount:i},message:[r.factory.literal("Less than {$minCount} values")]})}}async function qq(i,r){for(const o of i)if(!await r(o))return!1;return!0}async function Lq(i,r){return(await Promise.all(i.map(o=>r(o)))).filter(Boolean)}async function xg(i,r){return Promise.all(i.map(r))}async function xq(i,r){for(const o of i)if(await r(o))return!0;return!1}function Bq(i){const r=[...i.ptr.out([re.and])].flatMap(o=>[...o.list()]).map(o=>i.validator.shape(o));return{generic:Cq(r)}}function Cq(i){return async r=>{const o=await xg(i,async t=>(await t.validate(r.create({child:!0,focusNode:r.valueOrNode}))).report),n=o.every(t=>t.conforms);r.test(n,re.AndConstraintComponent,{results:o.flatMap(t=>t.results),value:r.valueOrNode})}}function Qq(i){const r=i.validator.shape(i.ptr.out([re.not]));return{generic:Uq(r)}}function Uq(i){return async r=>{const o=(await i.validate(r.create({child:!0,focusNode:r.valueOrNode}))).report,n=!o.conforms;r.test(n,re.NotConstraintComponent,{args:{not:i.ptr.term},message:[r.factory.literal("Value does have shape {$not}")],results:o.results,value:r.valueOrNode})}}function Vq(i){const r=[...i.ptr.out([re.or])].flatMap(o=>[...o.list()]).map(o=>i.validator.shape(o));return{generic:Gq(r)}}function Gq(i){return async r=>{let o=[],n;if(r.options.debug||r.options.details){const t=await xg(i,async e=>(await e.validate(r.create({child:!0,focusNode:r.valueOrNode}))).report);o=t.flatMap(e=>e.results),n=t.some(e=>e.conforms)}else n=await xq(i,async t=>(await t.validate(r.create({child:!0,focusNode:r.valueOrNode}))).report.conforms);r.test(n,re.OrConstraintComponent,{results:o,value:r.valueOrNode})}}function Xq(i){const r=[...i.ptr.out([re.xone])].flatMap(o=>[...o.list()]).map(o=>i.validator.shape(o));return{generic:zq(r)}}function zq(i){return async r=>{const o=await xg(i,async t=>(await t.validate(r.create({child:!0,focusNode:r.valueOrNode}))).report),n=o.filter(t=>t.conforms).length===1;r.test(n,re.XoneConstraintComponent,{results:o.flatMap(t=>t.results),value:r.valueOrNode})}}function Hq(i){if(!um.fromRdf(i.ptr.out([re.closed]).term))return null;const o=i.ptr.out([re.property]).map(e=>i.validator.shape(e)),n=new jr(o.filter(e=>!e.deactivated).map(e=>e.path[0].predicates[0])),t=new jr([...i.ptr.out([re.ignoredProperties]).list()||[]].map(e=>e.term));return{node:$q(n,t)}}function $q(i,r){return o=>{const n=o.focusNode.execute({start:"subject",end:"predicate"}).filter(t=>r.has(t.term)?!1:!i.has(t.term));if(n.ptrs.length>0)for(const t of n)o.violation(re.ClosedConstraintComponent,{message:[o.factory.literal("Predicate is not allowed (closed shape)")],path:[{quantifier:"one",start:"subject",end:"object",predicates:[t.term]}],value:o.focusNode.node([[...t.quads()][0].object])});else o.debug(re.ClosedConstraintComponent)}}function Jq(i){const r=i.ptr.out([re.hasValue]).term;return{node:Kq(r),property:Yq(r)}}function Kq(i){return r=>{r.test(i.equals(r.valueOrNode.term),re.HasValueConstraintComponent,{args:{hasValue:i},message:[r.factory.literal("Value must be {$hasValue}")]})}}function Yq(i){return r=>{const o=[...r.values].some(n=>i.equals(n.term));r.test(o,re.HasValueConstraintComponent,{args:{hasValue:i},message:[r.factory.literal("Missing expected value {$hasValue}")]})}}function Wq(i){const r=new jr([...i.ptr.out([re.in]).list()].map(o=>o.term));return{generic:Zq(r)}}function Zq(i){return r=>{r.test(i.has(r.valueOrNode.term),re.InConstraintComponent,{args:{in:[...i].map(o=>o.value).join(", ")},message:[r.factory.literal("Value is not in {$in}")],value:r.valueOrNode})}}function Ys(i,r){if(!i||i.termType!=="Literal"||!r||r.termType!=="Literal"||TT(i)!==TT(r))return null;const o=um.fromRdf(i),n=um.fromRdf(r);return typeof o!=typeof n?null:typeof o=="string"?o.localeCompare(n):o-n}function TT(i){const r=/^.*(((\+|-)\d{2}:\d{2})|Z)$/;return p0.dateTime.equals(i.datatype)&&r.test(i.value)}function kq(i){const r=i.ptr.out([re.disjoint]).term;return{generic:eL(r)}}function eL(i){return r=>{const o=r.focusNode.dataset.match(r.focusNode.term,i,r.valueOrNode.term);r.test(o.size===0,re.DisjointConstraintComponent,{args:{disjoint:i},message:[r.factory.literal("Value node must not also be one of the values of {$disjoint}")],value:r.valueOrNode})}}function tL(i){const r=i.ptr.out([re.equals]).term;return{node:rL(r),property:nL(r)}}function rL(i){return r=>{const o=r.focusNode.out([i]),n=o.filter(e=>!e.term.equals(r.focusNode.term)),t=o.terms.length!==0&&n.terms.length===0;r.test(t,re.EqualsConstraintComponent,{args:{equals:i},message:[r.factory.literal("Must have same values as {$equals}")],value:n.terms[0]&&r.focusNode.node([n.terms[0]])||r.focusNode})}}function nL(i){return r=>{const o=new jr(r.focusNode.out([i]).terms),n=new jr(r.values.terms),t=[...n].filter(u=>!o.has(u)),e=[...o].filter(u=>!n.has(u)),a=[...t,...e];for(const u of a)r.violation(re.EqualsConstraintComponent,{args:{equals:i},message:[r.factory.literal("Must have same values as {$equals}")],value:r.focusNode.node([u])});a.length===0&&r.debug(re.EqualsConstraintComponent,{args:{equals:i},message:[r.factory.literal("Must have same values as {$equals}")]})}}function iL(i){const r=i.ptr.out([re.lessThan]).term;return{property:aL(r)}}function aL(i){return r=>{const o=r.focusNode.out([i]).terms;for(const n of r.values)for(const t of o){const e=Ys(n.term,t);e===null||e>=0?r.violation(re.LessThanConstraintComponent,{args:{lessThan:i},message:[r.factory.literal("Value is not less than value of {$lessThan}")],value:n}):r.debug(re.LessThanConstraintComponent,{args:{lessThan:i},message:[r.factory.literal("Value is not less than value of {$lessThan}")],value:n})}}}function oL(i){const r=i.ptr.out([re.lessThanOrEquals]).term;return{property:uL(r)}}function uL(i){return r=>{const o=r.focusNode.out([i]).terms;for(const n of r.values)for(const t of o){const e=Ys(n.term,t);e===null||e>0?r.violation(re.LessThanOrEqualsConstraintComponent,{args:{lessThanOrEquals:i},message:[r.factory.literal("Value is not less than or equal to value of {$lessThanOrEquals}")],value:n}):r.debug(re.LessThanOrEqualsConstraintComponent,{args:{lessThanOrEquals:i},message:[r.factory.literal("Value is not less than or equal to value of {$lessThanOrEquals}")],value:n})}}}function sL(i){const r=i.ptr.out([re.maxExclusive]).term;return{generic:cL(r)}}function cL(i){return r=>{const o=Ys(r.valueOrNode.term,i);r.test(o!==null&&o<0,re.MaxExclusiveConstraintComponent,{args:{maxExclusive:i},message:[r.factory.literal("Value is not less than {$maxExclusive}")],value:r.valueOrNode})}}function lL(i){const r=i.ptr.out([re.maxInclusive]).term;return{generic:dL(r)}}function dL(i){return r=>{const o=Ys(r.valueOrNode.term,i);r.test(o!==null&&o<=0,re.MaxInclusiveConstraintComponent,{args:{maxInclusive:i},message:[r.factory.literal("Value is not less than or equal to {$maxInclusive}")],value:r.valueOrNode})}}function fL(i){const r=i.ptr.out([re.minExclusive]).term;return{generic:pL(r)}}function pL(i){return r=>{const o=Ys(r.valueOrNode.term,i);r.test(o!==null&&o>0,re.MinExclusiveConstraintComponent,{args:{minExclusive:i},message:[r.factory.literal("Value is not greater than {$minExclusive}")],value:r.valueOrNode})}}function hL(i){const r=i.ptr.out([re.minInclusive]).term;return{generic:yL(r)}}function yL(i){return r=>{const o=Ys(r.valueOrNode.term,i);r.test(o!==null&&o>=0,re.MinInclusiveConstraintComponent,{args:{minInclusive:i},message:[r.factory.literal("Value is not greater than or equal to {$minInclusive}")],value:r.valueOrNode})}}function _L(i){const r=[...i.ptr.out([re.node])].map(o=>i.validator.shape(o));return{generic:mL(r)}}function mL(i){return async r=>{for(const o of i){const n=await o.validate(r.create({child:!0,focusNode:r.valueOrNode}));r.test(n.report.conforms,re.NodeConstraintComponent,{args:{node:o.ptr.term},message:[r.factory.literal("Value does not have shape {$node}")],results:n.report.results,value:r.valueOrNode})}}}function gL(i){const r=[...i.ptr.out([re.property])].map(o=>i.validator.shape(o));return{generic:bL(r)}}function bL(i){return async r=>{const o=r.create({focusNode:r.valueOrNode});for(const n of i)await n.validate(o)}}function vL(i){const r=i.validator.shape(i.ptr.out([re.qualifiedValueShape])),o=i.ptr.out([re.qualifiedValueShapesDisjoint]).term,n=o?um.fromRdf(o):!1,t=i.ptr.out([re.qualifiedMaxCount]).term,e=t?parseInt(t.value):null,a=i.ptr.out([re.qualifiedMinCount]).term,u=a?parseInt(a.value):null;return{property:TL(r,n,e,u)}}function TL(i,r,o,n){return async t=>{const e=[];let a=[];r&&(a=new Set(t.shape.ptr.in([re.property]).out([re.property]).out([re.qualifiedValueShape]).filter(c=>!c.term.equals(i.ptr.term)).map(c=>t.shape.validator.shape(c))));const u=(await Lq(t.values,async c=>{const s=(await i.validate(t.create({child:!0,focusNode:c}))).report;if(e.push(s.results),!s.conforms)return!1;if(a.length===0)return!0;if(t.options.debug||t.options.details){const l=await xg([...a],async d=>(await d.validate(t.create({child:!0,focusNode:c}))).report);return e.push(l.flatMap(d=>d.results)),!l.every(d=>d.conforms)}else return!await qq([...a],async l=>(await l.validate(t.create({child:!0,focusNode:c}))).report.conforms)})).length;o!==null&&t.test(u<=o,re.QualifiedMaxCountConstraintComponent,{args:{qualifiedMaxCount:o,qualifiedValueShape:i.ptr.term,qualifiedValueShapesDisjoint:r},message:[t.factory.literal("More than {$qualifiedMaxCount} values have shape {$qualifiedValueShape}")],results:e.flat()}),n!==null&&t.test(u>=n,re.QualifiedMinCountConstraintComponent,{args:{qualifiedMinCount:n,qualifiedValueShape:i.ptr.term,qualifiedValueShapesDisjoint:r},message:[t.factory.literal("Less than {$qualifiedMinCount} values have shape {$qualifiedValueShape}")],results:e.flat()})}}function OL(i,r){return r?r.slice(0,i.length)===i:!1}function SL(i){const r=[...new Set([...i.ptr.out([re.languageIn]).list()].map(o=>o.value))];return{generic:FL(r)}}function FL(i){return r=>{const o=i.some(n=>OL(n,r.valueOrNode.term.language));r.test(o,re.LanguageInConstraintComponent,{args:{languageIn:i.join(", ")},message:[r.factory.literal("Language does not match any of {$languageIn}")],value:r.valueOrNode})}}function AL(i){const r=parseInt(i.ptr.out([re.maxLength]).value);return{generic:wL(r)}}function wL(i){return r=>{const o=r.valueOrNode.term.termType!=="BlankNode"&&r.valueOrNode.value.length<=i;r.test(o,re.MaxLengthConstraintComponent,{args:{maxLength:i},message:[r.factory.literal("Value has more than {$maxLength} characters")],value:r.valueOrNode})}}function EL(i){const r=parseInt(i.ptr.out([re.minLength]).value);return{generic:jL(r)}}function jL(i){return r=>{const o=r.valueOrNode.term.termType!=="BlankNode"&&r.valueOrNode.value.length>=i;r.test(o,re.MinLengthConstraintComponent,{args:{minLength:i},message:[r.factory.literal("Value has less than {$minLength} characters")],value:r.valueOrNode})}}function RL(i){const r=i.ptr.out([re.pattern]).value,o=i.ptr.out([re.flags]).value,n=new RegExp(r,o);return{generic:DL(r,o,n)}}function DL(i,r,o){return n=>{n.test(o.test(n.valueOrNode.term.value),re.PatternConstraintComponent,{args:{flags:r,pattern:i},message:[n.factory.literal('Value does not match pattern "{$pattern}"')],value:n.valueOrNode})}}function PL(i){const r=i.ptr.out([re.uniqueLang]).term;return r.value==="true"&&p0.boolean.equals(r.datatype)?{property:ML()}:null}function ML(){return i=>{const o=Object.entries(i.values.terms.reduce((n,t)=>(t.language&&(n[t.language]=(n[t.language]||0)+1),n),{})).filter(([,n])=>n>1);for(const[n]of o)i.violation(re.UniqueLangConstraintComponent,{args:{lang:n},message:[i.factory.literal('Language "{?lang}" used more than once')]});o.length===0&&i.debug(re.UniqueLangConstraintComponent)}}const Tg=Rr("http://www.w3.org/ns/shacl#"),YM=Rr("https://schemas.link/shacl-next#");class Bs{constructor({results:r=[]}={}){this.results=r}get conforms(){return!this.results.some(r=>r.severity.equals(Tg.Info)||r.severity.equals(Tg.Violation)||r.severity.equals(Tg.Warning))}}function NL(i,r){return Object.entries(r).reduce((o,[n,t])=>(t&&t.termType&&(t=om(t)),o.replace(`{$${n}}`,t).replace(`{?${n}}`,t)),i)}class Dg{constructor({args:r={},factory:o,message:n=[],severity:t=Tg.Violation}={}){this.severity=t,this.message=n.map(e=>o.literal(NL(e.value,r),e.language||null))}}class h0{constructor({factory:r=XM}={}){this.factory=r}clone({factory:r}={}){return new h0({factory:r||this.factory})}validate(){return new Bs}validateSimple(){return!0}}class Ws extends h0{constructor({datatypes:r,factory:o}={}){super({factory:o}),this.datatypes=[];for(const n of Array.isArray(r)?r:[r])n&&this.datatypes.push(this.factory.fromTerm(n))}clone({factory:r}={}){return new Ws({datatypes:this.datatypes,factory:r||this.factory})}}class IL{constructor({factory:r=XM,validations:o}={}){if(this.factory=r,this.validations=new ds,o)for(const n of Object.values(o)){const t=n.clone({factory:this.factory});for(const e of t.datatypes)this.validations.set(e,t)}}validate(r){const o=this.validations.get(r.datatype);return o?o.validate(r):new Bs}validateSimple(r){const o=this.validations.get(r.datatype);return o?o.validateSimple(r):!0}}class Ot extends Ws{constructor(r,o,{factory:n}={}){super({datatypes:o,factory:n}),this.message=[this.factory.literal("term value {$this} matches pattern {$pattern}")],this.patterns=Array.isArray(r)?r:[r]}clone({factory:r}={}){return new Ot(this.patterns,this.datatypes,{factory:r||this.factory})}validate(r){const o=this.patterns.map(n=>{let t;n.test(r.value)&&(t=YM.Debug);const e={pattern:this.factory.literal(n.toString()),this:r};return new Dg({args:e,factory:this.factory,message:this.message,severity:t})});return new Bs({results:o})}validateSimple(r){return this.patterns.every(o=>o.test(r.value))}}const qL=/^([-+]?[0-9]+)$/;class sr extends Ot{constructor(r=null,o=null,n,{factory:t}={}){super(qL,n,{factory:t}),this.maxInclusive=null,this.minInclusive=null,typeof o=="string"&&(this.maxInclusive=BigInt(o)),typeof r=="string"&&(this.minInclusive=BigInt(r))}clone({factory:r}={}){return new sr(this.minInclusive?.toString(),this.maxInclusive?.toString(),this.datatypes,{factory:r||this.factory})}validate(r){const o=super.validate(r).results;if(!YM.Debug.equals(o[0].severity))return new Bs({results:o});const n=BigInt(r.value);if(this.minInclusive!==null&&n<this.minInclusive){const t=`term value "${r.value}" is less than "${this.minInclusive.toString()}"`,e=[this.factory.literal(t)];o.push(new Dg({factory:this.factory,message:e}))}if(this.maxInclusive!==null&&n>this.maxInclusive){const t=`term value "${r.value}" is greater than "${this.maxInclusive.toString()}"`,e=[this.factory.literal(t)];o.push(new Dg({factory:this.factory,message:e}))}return new Bs({results:o})}validateSimple(r){if(!super.validateSimple(r))return!1;const o=BigInt(r.value);return!(this.minInclusive!==null&&o<this.minInclusive||this.maxInclusive!==null&&o>this.maxInclusive)}}class y0 extends Ws{constructor(r,o,{factory:n}={}){super({datatypes:o,factory:n}),this.values=new Set(r)}clone({factory:r}={}){return new y0(this.values,this.datatypes,{factory:r||this.factory})}validate(r){const o=[];if(!this.values.has(r.value)){const n=`term value "${r.value}" is not included in the list: ${[...this.values].join(",")}`,t=[this.factory.literal(n)];o.push(new Dg({factory:this.factory,message:t}))}return new Bs({results:o})}validateSimple(r){return this.values.has(r.value)}}const We={xsd:Rr("http://www.w3.org/2001/XMLSchema#")},LL=new Ws({datatypes:We.xsd.anySimpleType}),xL=new Ws({datatypes:We.xsd.anyAtomicType}),Bg=/^([^\ud8ff-\udfff\ufffe-\uffff]*)$/,BL=/^((\+|-)?([0-9]+(\.[0-9]*)?|\.[0-9]+))$/,WM=/^((\+|-)?([0-9]+(\.[0-9]*)?|\.[0-9]+)([Ee](\+|-)?[0-9]+)?|(\+|-)?INF|NaN)$/,_0=/^(-?P((([0-9]+Y([0-9]+M)?([0-9]+D)?|([0-9]+M)([0-9]+D)?|([0-9]+D))(T(([0-9]+H)([0-9]+M)?([0-9]+(\.[0-9]+)?S)?|([0-9]+M)([0-9]+(\.[0-9]+)?S)?|([0-9]+(\.[0-9]+)?S)))?)|(T(([0-9]+H)([0-9]+M)?([0-9]+(\.[0-9]+)?S)?|([0-9]+M)([0-9]+(\.[0-9]+)?S)?|([0-9]+(\.[0-9]+)?S)))))$/,ZM=/^(-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?))(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,CL=/^((([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?))(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,QL=/^(-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,UL=/^(-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,VL=/^(-?([1-9][0-9]{3,}|0[0-9]{3})(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,GL=/^(--(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,XL=/^(---(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,zL=/^(--(0[1-9]|1[0-2])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?)$/,HL=/^(([0-9a-fA-F]{2})*)$/,$L=/^(((([A-Za-z0-9+/] ?){4})*(([A-Za-z0-9+/] ?){3}[A-Za-z0-9+/]|([A-Za-z0-9+/] ?){2}[AEIMQUYcgkosw048] ?=|[A-Za-z0-9+/] ?[AQgw] ?= ?=))?)$/,JL=new Ot(Bg,We.xsd.string),KL=new y0(["1","true","0","false"],We.xsd.boolean),YL=new Ot(BL,We.xsd.decimal),WL=new Ot(WM,We.xsd.float),ZL=new Ot(WM,We.xsd.double),kL=new Ot(_0,We.xsd.duration),e6=new Ot(ZM,We.xsd.dateTime),t6=new Ot(CL,We.xsd.time),r6=new Ot(QL,We.xsd.date),n6=new Ot(UL,We.xsd.gYearMonth),i6=new Ot(VL,We.xsd.gYear),a6=new Ot(GL,We.xsd.gMonthDay),o6=new Ot(XL,We.xsd.gDay),u6=new Ot(zL,We.xsd.gMonth),s6=new Ot(HL,We.xsd.hexBinary),c6=new Ot($L,We.xsd.base64Binary),l6=new Ot(Bg,We.xsd.anyURI),kM=/^([^\u000d\u000a\u0009]*)$/,d6=/^([^ ]+( [^ ]+)*)*$/,f6=/^([a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*)$/,p6=/^([^DT]*)$/,h6=/^([^YM]*[DT].*)$/,y6=/^(.*(Z|(\+|-)[0-9][0-9]:[0-9][0-9]))$/,_6=new Ot([Bg,kM],We.xsd.normalizedString),m6=new Ot([Bg,kM,d6],We.xsd.token),g6=new Ot(f6,We.xsd.language),b6=new sr(null,null,We.xsd.integer),v6=new sr(null,"0",We.xsd.nonPositiveInteger),T6=new sr(null,"-1",We.xsd.negativeInteger),O6=new sr("-9223372036854775808","9223372036854775807",We.xsd.long),S6=new sr("-2147483648","2147483647",We.xsd.int),F6=new sr("-32768","32767",We.xsd.short),A6=new sr("-128","127",We.xsd.byte),w6=new sr("0",null,We.xsd.nonNegativeInteger),E6=new sr("0","18446744073709551615",We.xsd.unsignedLong),j6=new sr("0","4294967295",We.xsd.unsignedInt),R6=new sr("0","65535",We.xsd.unsignedShort),D6=new sr("0","255",We.xsd.unsignedByte),P6=new sr("1",null,We.xsd.positiveInteger),M6=new Ot([_0,p6],We.xsd.yearMonthDuration),N6=new Ot([_0,h6],We.xsd.dayTimeDuration),I6=new Ot([ZM,y6],We.xsd.dateTimeStamp),q6=Object.freeze(Object.defineProperty({__proto__:null,anyAtomicType:xL,anySimpleType:LL,anyURI:l6,base64Binary:c6,boolean:KL,byte:A6,date:r6,dateTime:e6,dateTimeStamp:I6,dayTimeDuration:N6,decimal:YL,double:ZL,duration:kL,float:WL,gDay:o6,gMonth:u6,gMonthDay:a6,gYear:i6,gYearMonth:n6,hexBinary:s6,int:S6,integer:b6,language:g6,long:O6,negativeInteger:T6,nonNegativeInteger:w6,nonPositiveInteger:v6,normalizedString:_6,positiveInteger:P6,short:F6,string:JL,time:t6,token:m6,unsignedByte:D6,unsignedInt:j6,unsignedLong:E6,unsignedShort:R6,yearMonthDuration:M6},Symbol.toStringTag,{value:"Module"}));class L6 extends IL{constructor({factory:r}={}){super({factory:r,validations:{...q6}})}}const x6=new ds([[re.BlankNode,new Set(["BlankNode"])],[re.BlankNodeOrIRI,new Set(["BlankNode","NamedNode"])],[re.BlankNodeOrLiteral,new Set(["BlankNode","Literal"])],[re.IRI,new Set(["NamedNode"])],[re.IRIOrLiteral,new Set(["NamedNode","Literal"])],[re.Literal,new Set(["Literal"])]]);function B6(i){const r=i.ptr.out([re.class]).map(o=>z1(o));return{generic:C6(r)}}function C6(i){return r=>{const o=new jr(r.valueOrNode.out([cs.type]).terms);for(const n of i){const t=[...o].some(e=>n.has(e));r.test(t,re.ClassConstraintComponent,{value:r.valueOrNode})}}}function Q6(i){const r=i.ptr.out([re.datatype]).term,o=new L6;return{generic:U6(r,o)}}function U6(i,r){return o=>{const n=i.equals(o.valueOrNode.term.datatype)&&r.validateSimple(o.valueOrNode.term);o.test(n,re.DatatypeConstraintComponent,{args:{datatype:i},message:[o.factory.literal("Value does not have datatype {$datatype}")],value:o.valueOrNode})}}function V6(i){const r=i.ptr.out([re.nodeKind]).term,o=x6.get(r);return{generic:G6(r,o)}}function G6(i,r){return o=>{o.test(r.has(o.valueOrNode.term.termType),re.NodeKindConstraintComponent,{args:{nodeKind:i},message:[o.factory.literal("Value does not have node kind {$nodeKind}")],value:o.valueOrNode})}}const X6=new ds([[re.maxCount,Pq],[re.minCount,Nq],[re.and,Bq],[re.not,Qq],[re.or,Vq],[re.xone,Xq],[re.closed,Hq],[re.hasValue,Jq],[re.in,Wq],[re.disjoint,kq],[re.equals,tL],[re.lessThan,iL],[re.lessThanOrEquals,oL],[re.maxExclusive,sL],[re.maxInclusive,lL],[re.minExclusive,fL],[re.minInclusive,hL],[re.node,_L],[re.property,gL],[re.qualifiedValueShape,vL],[re.languageIn,SL],[re.maxLength,AL],[re.minLength,EL],[re.pattern,RL],[re.uniqueLang,PL],[re.class,B6],[re.datatype,Q6],[re.nodeKind,V6]]);class z6{constructor(r,{factory:o,...n}){if(this.factory=o,this.options=n,this.registry=new bq(X6),this.targetResolverRegistry=new Dq(this.options.targetResolvers||[]),this.shapesPtr=new Rg({dataset:r,factory:o}),this.shapes=new ds,this.options.coverage&&(this.options.debug=!0,this.options.details=!0,this.options.trace=!0),this.options.validations)for(const[e,a]of this.options.validations)this.registry.validations.set(e,a);const t=[...this.shapesPtr.hasOut([re.targetClass]),...this.shapesPtr.hasOut([re.targetNode]),...this.shapesPtr.hasOut([re.targetObjectsOf]),...this.shapesPtr.hasOut([re.targetSubjectsOf]),...this.shapesPtr.hasOut([re.target]),...this.shapesPtr.hasOut([cs.type],[re.NodeShape]),...this.shapesPtr.hasOut([cs.type],[re.PropertyShape])];for(const e of t)this.shape(e)}shape(r){if(!r.term)return null;let o=this.shapes.get(r.term);return o||(o=new Rq(r,{validator:this}),this.shapes.set(r.term,o)),o}async validate(r,o){const n=new Rg({...r,factory:this.factory}),t=new _q({factory:this.factory,focusNode:n,options:this.options,validator:this});o?o=o.map(e=>this.shape(this.shapesPtr.node(e.terms))):o=this.shapes.values();for(const e of o){const a=t.create({shape:e});let u;n.isAny()?u=await e.resolveTargets(a):u=n;for(const c of u)await e.validate(a.create({focusNode:c}))}return t.report}}const fH=Object.freeze(Object.defineProperty({__proto__:null,Validator:z6},Symbol.toStringTag,{value:"Module"}));var Xn={},mc={},zn={},gc={},Hn={},bc={},$n={},Jn={};var Pg="@@__IMMUTABLE_INDEXED__@@";function fr(i){return!!(i&&i[Pg])}var Mg="@@__IMMUTABLE_KEYED__@@";function yt(i){return!!(i&&i[Mg])}function Cg(i){return yt(i)||fr(i)}var eN="@@__IMMUTABLE_ITERABLE__@@";function pr(i){return!!(i&&i[eN])}var Ut=function(r){return pr(r)?r:Wt(r)},Dr=(function(i){function r(o){return yt(o)?o:En(o)}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r})(Ut),ps=(function(i){function r(o){return fr(o)?o:Mr(o)}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r})(Ut),Zs=(function(i){function r(o){return pr(o)&&!Cg(o)?o:rc(o)}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r})(Ut);Ut.Keyed=Dr;Ut.Indexed=ps;Ut.Set=Zs;var ks=0,Or=1,Sr=2,H1=typeof Symbol=="function"&&Symbol.iterator,tN="@@iterator",Qg=H1||tN,ke=function(r){this.next=r};ke.prototype.toString=function(){return"[Iterator]"};ke.KEYS=ks;ke.VALUES=Or;ke.ENTRIES=Sr;ke.prototype.inspect=ke.prototype.toSource=function(){return this.toString()};ke.prototype[Qg]=function(){return this};function vt(i,r,o,n){var t=i===ks?r:i===Or?o:[r,o];return n?n.value=t:n={value:t,done:!1},n}function Yt(){return{value:void 0,done:!0}}function m0(i){return Array.isArray(i)?!0:!!Ug(i)}function OT(i){return!!(i&&typeof i.next=="function")}function $1(i){var r=Ug(i);return r&&r.call(i)}function Ug(i){var r=i&&(H1&&i[H1]||i[tN]);if(typeof r=="function")return r}function H6(i){var r=Ug(i);return r&&r===i.entries}function $6(i){var r=Ug(i);return r&&r===i.keys}var hm="delete",pt=5,Tr=1<<pt,or=Tr-1,Ze={};function J1(){return{value:!1}}function Er(i){i&&(i.value=!0)}function g0(){}function Cs(i){return i.size===void 0&&(i.size=i.__iterate(rN)),i.size}function Sn(i,r){if(typeof r!="number"){var o=r>>>0;if(""+o!==r||o===4294967295)return NaN;r=o}return r<0?Cs(i)+r:r}function rN(){return!0}function ym(i,r,o){return(i===0&&!iN(i)||o!==void 0&&i<=-o)&&(r===void 0||o!==void 0&&r>=o)}function ec(i,r){return nN(i,r,0)}function _m(i,r){return nN(i,r,r)}function nN(i,r,o){return i===void 0?o:iN(i)?r===1/0?r:Math.max(0,r+i)|0:r===void 0||r===i?i:Math.min(r,i)|0}function iN(i){return i<0||i===0&&1/i===-1/0}var aN="@@__IMMUTABLE_RECORD__@@";function wn(i){return!!(i&&i[aN])}function Pr(i){return pr(i)||wn(i)}var Fn="@@__IMMUTABLE_ORDERED__@@";function Qr(i){return!!(i&&i[Fn])}var oN="@@__IMMUTABLE_SEQ__@@";function Vg(i){return!!(i&&i[oN])}var tc=Object.prototype.hasOwnProperty;function b0(i){return Array.isArray(i)||typeof i=="string"?!0:i&&typeof i=="object"&&Number.isInteger(i.length)&&i.length>=0&&(i.length===0?Object.keys(i).length===1:i.hasOwnProperty(i.length-1))}var Wt=(function(i){function r(o){return o==null?T0():Pr(o)?o.toSeq():K6(o)}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.toSeq=function(){return this},r.prototype.toString=function(){return this.__toString("Seq {","}")},r.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},r.prototype.__iterate=function(n,t){var e=this._cache;if(e){for(var a=e.length,u=0;u!==a;){var c=e[t?a-++u:u++];if(n(c[1],c[0],this)===!1)break}return u}return this.__iterateUncached(n,t)},r.prototype.__iterator=function(n,t){var e=this._cache;if(e){var a=e.length,u=0;return new ke(function(){if(u===a)return Yt();var c=e[t?a-++u:u++];return vt(n,c[0],c[1])})}return this.__iteratorUncached(n,t)},r})(Ut),En=(function(i){function r(o){return o==null?T0().toKeyedSeq():pr(o)?yt(o)?o.toSeq():o.fromEntrySeq():wn(o)?o.toSeq():O0(o)}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.toKeyedSeq=function(){return this},r})(Wt),Mr=(function(i){function r(o){return o==null?T0():pr(o)?yt(o)?o.entrySeq():o.toIndexedSeq():wn(o)?o.toSeq().entrySeq():uN(o)}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.of=function(){return r(arguments)},r.prototype.toIndexedSeq=function(){return this},r.prototype.toString=function(){return this.__toString("Seq [","]")},r})(Wt),rc=(function(i){function r(o){return(pr(o)&&!Cg(o)?o:Mr(o)).toSetSeq()}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.of=function(){return r(arguments)},r.prototype.toSetSeq=function(){return this},r})(Wt);Wt.isSeq=Vg;Wt.Keyed=En;Wt.Set=rc;Wt.Indexed=Mr;Wt.prototype[oN]=!0;var Qs=(function(i){function r(o){this._array=o,this.size=o.length}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.get=function(n,t){return this.has(n)?this._array[Sn(this,n)]:t},r.prototype.__iterate=function(n,t){for(var e=this._array,a=e.length,u=0;u!==a;){var c=t?a-++u:u++;if(n(e[c],c,this)===!1)break}return u},r.prototype.__iterator=function(n,t){var e=this._array,a=e.length,u=0;return new ke(function(){if(u===a)return Yt();var c=t?a-++u:u++;return vt(n,c,e[c])})},r})(Mr),v0=(function(i){function r(o){var n=Object.keys(o).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(o):[]);this._object=o,this._keys=n,this.size=n.length}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.get=function(n,t){return t!==void 0&&!this.has(n)?t:this._object[n]},r.prototype.has=function(n){return tc.call(this._object,n)},r.prototype.__iterate=function(n,t){for(var e=this._object,a=this._keys,u=a.length,c=0;c!==u;){var s=a[t?u-++c:c++];if(n(e[s],s,this)===!1)break}return c},r.prototype.__iterator=function(n,t){var e=this._object,a=this._keys,u=a.length,c=0;return new ke(function(){if(c===u)return Yt();var s=a[t?u-++c:c++];return vt(n,s,e[s])})},r})(En);v0.prototype[Fn]=!0;var J6=(function(i){function r(o){this._collection=o,this.size=o.length||o.size}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.__iterateUncached=function(n,t){if(t)return this.cacheResult().__iterate(n,t);var e=this._collection,a=$1(e),u=0;if(OT(a))for(var c;!(c=a.next()).done&&n(c.value,u++,this)!==!1;);return u},r.prototype.__iteratorUncached=function(n,t){if(t)return this.cacheResult().__iterator(n,t);var e=this._collection,a=$1(e);if(!OT(a))return new ke(Yt);var u=0;return new ke(function(){var c=a.next();return c.done?c:vt(n,u++,c.value)})},r})(Mr),ST;function T0(){return ST||(ST=new Qs([]))}function O0(i){var r=S0(i);if(r)return r.fromEntrySeq();if(typeof i=="object")return new v0(i);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+i)}function uN(i){var r=S0(i);if(r)return r;throw new TypeError("Expected Array or collection object of values: "+i)}function K6(i){var r=S0(i);if(r)return H6(i)?r.fromEntrySeq():$6(i)?r.toSetSeq():r;if(typeof i=="object")return new v0(i);throw new TypeError("Expected Array or collection object of values, or keyed object: "+i)}function S0(i){return b0(i)?new Qs(i):m0(i)?new J6(i):void 0}function mm(){return this.__ensureOwner()}function gm(){return this.__ownerID?this:this.__ensureOwner(new g0)}var vc=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(r,o){r|=0,o|=0;var n=r&65535,t=o&65535;return n*t+((r>>>16)*t+n*(o>>>16)<<16>>>0)|0};function Gg(i){return i>>>1&1073741824|i&3221225471}var Y6=Object.prototype.valueOf;function dr(i){if(i==null)return FT(i);if(typeof i.hashCode=="function")return Gg(i.hashCode(i));var r=r9(i);if(r==null)return FT(r);switch(typeof r){case"boolean":return r?1108378657:1108378656;case"number":return W6(r);case"string":return r.length>n9?Z6(r):K1(r);case"object":case"function":return e9(r);case"symbol":return k6(r);default:if(typeof r.toString=="function")return K1(r.toString());throw new Error("Value type "+typeof r+" cannot be hashed.")}}function FT(i){return i===null?1108378658:1108378659}function W6(i){if(i!==i||i===1/0)return 0;var r=i|0;for(r!==i&&(r^=i*4294967295);i>4294967295;)i/=4294967295,r^=i;return Gg(r)}function Z6(i){var r=Pb[i];return r===void 0&&(r=K1(i),Db===i9&&(Db=0,Pb={}),Db++,Pb[i]=r),r}function K1(i){for(var r=0,o=0;o<i.length;o++)r=31*r+i.charCodeAt(o)|0;return Gg(r)}function k6(i){var r=ET[i];return r!==void 0||(r=sN(),ET[i]=r),r}function e9(i){var r;if(Y1&&(r=W1.get(i),r!==void 0)||(r=i[ss],r!==void 0)||!wT&&(r=i.propertyIsEnumerable&&i.propertyIsEnumerable[ss],r!==void 0||(r=t9(i),r!==void 0)))return r;if(r=sN(),Y1)W1.set(i,r);else{if(AT!==void 0&&AT(i)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(wT)Object.defineProperty(i,ss,{enumerable:!1,configurable:!1,writable:!1,value:r});else if(i.propertyIsEnumerable!==void 0&&i.propertyIsEnumerable===i.constructor.prototype.propertyIsEnumerable)i.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},i.propertyIsEnumerable[ss]=r;else if(i.nodeType!==void 0)i[ss]=r;else throw new Error("Unable to set a non-enumerable property on object.")}return r}var AT=Object.isExtensible,wT=(function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}})();function t9(i){if(i&&i.nodeType>0)switch(i.nodeType){case 1:return i.uniqueID;case 9:return i.documentElement&&i.documentElement.uniqueID}}function r9(i){return i.valueOf!==Y6&&typeof i.valueOf=="function"?i.valueOf(i):i}function sN(){var i=++Rb;return Rb&1073741824&&(Rb=0),i}var Y1=typeof WeakMap=="function",W1;Y1&&(W1=new WeakMap);var ET=Object.create(null),Rb=0,ss="__immutablehash__";typeof Symbol=="function"&&(ss=Symbol(ss));var n9=16,i9=255,Db=0,Pb={},Xg=(function(i){function r(o,n){this._iter=o,this._useKeys=n,this.size=o.size}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.get=function(n,t){return this._iter.get(n,t)},r.prototype.has=function(n){return this._iter.has(n)},r.prototype.valueSeq=function(){return this._iter.valueSeq()},r.prototype.reverse=function(){var n=this,t=F0(this,!0);return this._useKeys||(t.valueSeq=function(){return n._iter.toSeq().reverse()}),t},r.prototype.map=function(n,t){var e=this,a=pN(this,n,t);return this._useKeys||(a.valueSeq=function(){return e._iter.toSeq().map(n,t)}),a},r.prototype.__iterate=function(n,t){var e=this;return this._iter.__iterate(function(a,u){return n(a,u,e)},t)},r.prototype.__iterator=function(n,t){return this._iter.__iterator(n,t)},r})(En);Xg.prototype[Fn]=!0;var cN=(function(i){function r(o){this._iter=o,this.size=o.size}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.includes=function(n){return this._iter.includes(n)},r.prototype.__iterate=function(n,t){var e=this,a=0;return t&&Cs(this),this._iter.__iterate(function(u){return n(u,t?e.size-++a:a++,e)},t)},r.prototype.__iterator=function(n,t){var e=this,a=this._iter.__iterator(Or,t),u=0;return t&&Cs(this),new ke(function(){var c=a.next();return c.done?c:vt(n,t?e.size-++u:u++,c.value,c)})},r})(Mr),lN=(function(i){function r(o){this._iter=o,this.size=o.size}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.has=function(n){return this._iter.includes(n)},r.prototype.__iterate=function(n,t){var e=this;return this._iter.__iterate(function(a){return n(a,a,e)},t)},r.prototype.__iterator=function(n,t){var e=this._iter.__iterator(Or,t);return new ke(function(){var a=e.next();return a.done?a:vt(n,a.value,a.value,a)})},r})(rc),dN=(function(i){function r(o){this._iter=o,this.size=o.size}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.entrySeq=function(){return this._iter.toSeq()},r.prototype.__iterate=function(n,t){var e=this;return this._iter.__iterate(function(a){if(a){RT(a);var u=pr(a);return n(u?a.get(1):a[1],u?a.get(0):a[0],e)}},t)},r.prototype.__iterator=function(n,t){var e=this._iter.__iterator(Or,t);return new ke(function(){for(;;){var a=e.next();if(a.done)return a;var u=a.value;if(u){RT(u);var c=pr(u);return vt(n,c?u.get(0):u[0],c?u.get(1):u[1],a)}}})},r})(En);cN.prototype.cacheResult=Xg.prototype.cacheResult=lN.prototype.cacheResult=dN.prototype.cacheResult=E0;function fN(i){var r=kr(i);return r._iter=i,r.size=i.size,r.flip=function(){return i},r.reverse=function(){var o=i.reverse.apply(this);return o.flip=function(){return i.reverse()},o},r.has=function(o){return i.includes(o)},r.includes=function(o){return i.has(o)},r.cacheResult=E0,r.__iterateUncached=function(o,n){var t=this;return i.__iterate(function(e,a){return o(a,e,t)!==!1},n)},r.__iteratorUncached=function(o,n){if(o===Sr){var t=i.__iterator(o,n);return new ke(function(){var e=t.next();if(!e.done){var a=e.value[0];e.value[0]=e.value[1],e.value[1]=a}return e})}return i.__iterator(o===Or?ks:Or,n)},r}function pN(i,r,o){var n=kr(i);return n.size=i.size,n.has=function(t){return i.has(t)},n.get=function(t,e){var a=i.get(t,Ze);return a===Ze?e:r.call(o,a,t,i)},n.__iterateUncached=function(t,e){var a=this;return i.__iterate(function(u,c,s){return t(r.call(o,u,c,s),c,a)!==!1},e)},n.__iteratorUncached=function(t,e){var a=i.__iterator(Sr,e);return new ke(function(){var u=a.next();if(u.done)return u;var c=u.value,s=c[0];return vt(t,s,r.call(o,c[1],s,i),u)})},n}function F0(i,r){var o=this,n=kr(i);return n._iter=i,n.size=i.size,n.reverse=function(){return i},i.flip&&(n.flip=function(){var t=fN(i);return t.reverse=function(){return i.flip()},t}),n.get=function(t,e){return i.get(r?t:-1-t,e)},n.has=function(t){return i.has(r?t:-1-t)},n.includes=function(t){return i.includes(t)},n.cacheResult=E0,n.__iterate=function(t,e){var a=this,u=0;return e&&Cs(i),i.__iterate(function(c,s){return t(c,r?s:e?a.size-++u:u++,a)},!e)},n.__iterator=function(t,e){var a=0;e&&Cs(i);var u=i.__iterator(Sr,!e);return new ke(function(){var c=u.next();if(c.done)return c;var s=c.value;return vt(t,r?s[0]:e?o.size-++a:a++,s[1],c)})},n}function hN(i,r,o,n){var t=kr(i);return n&&(t.has=function(e){var a=i.get(e,Ze);return a!==Ze&&!!r.call(o,a,e,i)},t.get=function(e,a){var u=i.get(e,Ze);return u!==Ze&&r.call(o,u,e,i)?u:a}),t.__iterateUncached=function(e,a){var u=this,c=0;return i.__iterate(function(s,l,d){if(r.call(o,s,l,d))return c++,e(s,n?l:c-1,u)},a),c},t.__iteratorUncached=function(e,a){var u=i.__iterator(Sr,a),c=0;return new ke(function(){for(;;){var s=u.next();if(s.done)return s;var l=s.value,d=l[0],f=l[1];if(r.call(o,f,d,i))return vt(e,n?d:c++,f,s)}})},t}function a9(i,r,o){var n=hs().asMutable();return i.__iterate(function(t,e){n.update(r.call(o,t,e,i),0,function(a){return a+1})}),n.asImmutable()}function o9(i,r,o){var n=yt(i),t=(Qr(i)?Zr():hs()).asMutable();i.__iterate(function(a,u){t.update(r.call(o,a,u,i),function(c){return c=c||[],c.push(n?[u,a]:a),c})});var e=w0(i);return t.map(function(a){return ft(i,e(a))}).asImmutable()}function u9(i,r,o){var n=yt(i),t=[[],[]];i.__iterate(function(a,u){t[r.call(o,a,u,i)?1:0].push(n?[u,a]:a)});var e=w0(i);return t.map(function(a){return ft(i,e(a))})}function A0(i,r,o,n){var t=i.size;if(ym(r,o,t))return i;if(typeof t>"u"&&(r<0||o<0))return A0(i.toSeq().cacheResult(),r,o,n);var e=ec(r,t),a=_m(o,t),u=a-e,c;u===u&&(c=u<0?0:u);var s=kr(i);return s.size=c===0?c:i.size&&c||void 0,!n&&Vg(i)&&c>=0&&(s.get=function(l,d){return l=Sn(this,l),l>=0&&l<c?i.get(l+e,d):d}),s.__iterateUncached=function(l,d){var f=this;if(c===0)return 0;if(d)return this.cacheResult().__iterate(l,d);var h=0,p=!0,y=0;return i.__iterate(function(b,v){if(!(p&&(p=h++<e)))return y++,l(b,n?v:y-1,f)!==!1&&y!==c}),y},s.__iteratorUncached=function(l,d){if(c!==0&&d)return this.cacheResult().__iterator(l,d);if(c===0)return new ke(Yt);var f=i.__iterator(l,d),h=0,p=0;return new ke(function(){for(;h++<e;)f.next();if(++p>c)return Yt();var y=f.next();return n||l===Or||y.done?y:l===ks?vt(l,p-1,void 0,y):vt(l,p-1,y.value[1],y)})},s}function s9(i,r,o){var n=kr(i);return n.__iterateUncached=function(t,e){var a=this;if(e)return this.cacheResult().__iterate(t,e);var u=0;return i.__iterate(function(c,s,l){return r.call(o,c,s,l)&&++u&&t(c,s,a)}),u},n.__iteratorUncached=function(t,e){var a=this;if(e)return this.cacheResult().__iterator(t,e);var u=i.__iterator(Sr,e),c=!0;return new ke(function(){if(!c)return Yt();var s=u.next();if(s.done)return s;var l=s.value,d=l[0],f=l[1];return r.call(o,f,d,a)?t===Sr?s:vt(t,d,f,s):(c=!1,Yt())})},n}function yN(i,r,o,n){var t=kr(i);return t.__iterateUncached=function(e,a){var u=this;if(a)return this.cacheResult().__iterate(e,a);var c=!0,s=0;return i.__iterate(function(l,d,f){if(!(c&&(c=r.call(o,l,d,f))))return s++,e(l,n?d:s-1,u)}),s},t.__iteratorUncached=function(e,a){var u=this;if(a)return this.cacheResult().__iterator(e,a);var c=i.__iterator(Sr,a),s=!0,l=0;return new ke(function(){var d,f,h;do{if(d=c.next(),d.done)return n||e===Or?d:e===ks?vt(e,l++,void 0,d):vt(e,l++,d.value[1],d);var p=d.value;f=p[0],h=p[1],s&&(s=r.call(o,h,f,u))}while(s);return e===Sr?d:vt(e,f,h,d)})},t}var c9=(function(i){function r(o){this._wrappedIterables=o.flatMap(function(n){return n._wrappedIterables?n._wrappedIterables:[n]}),this.size=this._wrappedIterables.reduce(function(n,t){if(n!==void 0){var e=t.size;if(e!==void 0)return n+e}},0),this[Mg]=this._wrappedIterables[0][Mg],this[Pg]=this._wrappedIterables[0][Pg],this[Fn]=this._wrappedIterables[0][Fn]}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.__iterateUncached=function(n,t){if(this._wrappedIterables.length!==0){if(t)return this.cacheResult().__iterate(n,t);for(var e=0,a=yt(this),u=a?Sr:Or,c=this._wrappedIterables[e].__iterator(u,t),s=!0,l=0;s;){for(var d=c.next();d.done;){if(e++,e===this._wrappedIterables.length)return l;c=this._wrappedIterables[e].__iterator(u,t),d=c.next()}var f=a?n(d.value[1],d.value[0],this):n(d.value,l,this);s=f!==!1,l++}return l}},r.prototype.__iteratorUncached=function(n,t){var e=this;if(this._wrappedIterables.length===0)return new ke(Yt);if(t)return this.cacheResult().__iterator(n,t);var a=0,u=this._wrappedIterables[a].__iterator(n,t);return new ke(function(){for(var c=u.next();c.done;){if(a++,a===e._wrappedIterables.length)return c;u=e._wrappedIterables[a].__iterator(n,t),c=u.next()}return c})},r})(Wt);function l9(i,r){var o=yt(i),n=[i].concat(r).map(function(e){return pr(e)?o&&(e=Dr(e)):e=o?O0(e):uN(Array.isArray(e)?e:[e]),e}).filter(function(e){return e.size!==0});if(n.length===0)return i;if(n.length===1){var t=n[0];if(t===i||o&&yt(t)||fr(i)&&fr(t))return t}return new c9(n)}function _N(i,r,o){var n=kr(i);return n.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var a=0,u=!1;function c(s,l){s.__iterate(function(d,f){return(!r||l<r)&&pr(d)?c(d,l+1):(a++,t(d,o?f:a-1,n)===!1&&(u=!0)),!u},e)}return c(i,0),a},n.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var a=i.__iterator(t,e),u=[],c=0;return new ke(function(){for(;a;){var s=a.next();if(s.done!==!1){a=u.pop();continue}var l=s.value;if(t===Sr&&(l=l[1]),(!r||u.length<r)&&pr(l))u.push(a),a=l.__iterator(t,e);else return o?s:vt(t,c++,l,s)}return Yt()})},n}function d9(i,r,o){var n=w0(i);return i.toSeq().map(function(t,e){return n(r.call(o,t,e,i))}).flatten(!0)}function f9(i,r){var o=kr(i);return o.size=i.size&&i.size*2-1,o.__iterateUncached=function(n,t){var e=this,a=0;return i.__iterate(function(u){return(!a||n(r,a++,e)!==!1)&&n(u,a++,e)!==!1},t),a},o.__iteratorUncached=function(n,t){var e=i.__iterator(Or,t),a=0,u;return new ke(function(){return(!u||a%2)&&(u=e.next(),u.done)?u:a%2?vt(n,a++,r):vt(n,a++,u.value,u)})},o}function Us(i,r,o){r||(r=mN);var n=yt(i),t=0,e=i.toSeq().map(function(a,u){return[u,a,t++,o?o(a,u,i):a]}).valueSeq().toArray();return e.sort(function(a,u){return r(a[3],u[3])||a[2]-u[2]}).forEach(n?function(a,u){e[u].length=2}:function(a,u){e[u]=a[1]}),n?En(e):fr(i)?Mr(e):rc(e)}function km(i,r,o){if(r||(r=mN),o){var n=i.toSeq().map(function(t,e){return[t,o(t,e,i)]}).reduce(function(t,e){return jT(r,t[1],e[1])?e:t});return n&&n[0]}return i.reduce(function(t,e){return jT(r,t,e)?e:t})}function jT(i,r,o){var n=i(o,r);return n===0&&o!==r&&(o==null||o!==o)||n>0}function eg(i,r,o,n){var t=kr(i),e=new Qs(o).map(function(a){return a.size});return t.size=n?e.max():e.min(),t.__iterate=function(a,u){for(var c=this.__iterator(Or,u),s,l=0;!(s=c.next()).done&&a(s.value,l++,this)!==!1;);return l},t.__iteratorUncached=function(a,u){var c=o.map(function(d){return d=Ut(d),$1(u?d.reverse():d)}),s=0,l=!1;return new ke(function(){var d;return l||(d=c.map(function(f){return f.next()}),l=n?d.every(function(f){return f.done}):d.some(function(f){return f.done})),l?Yt():vt(a,s++,r.apply(null,d.map(function(f){return f.value})))})},t}function ft(i,r){return i===r?i:Vg(i)?r:i.constructor(r)}function RT(i){if(i!==Object(i))throw new TypeError("Expected [K, V] tuple: "+i)}function w0(i){return yt(i)?Dr:fr(i)?ps:Zs}function kr(i){return Object.create((yt(i)?En:fr(i)?Mr:rc).prototype)}function E0(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Wt.prototype.cacheResult.call(this)}function mN(i,r){return i===void 0&&r===void 0?0:i===void 0?1:r===void 0?-1:i>r?1:i<r?-1:0}function Z1(i){return!!(i&&typeof i.equals=="function"&&typeof i.hashCode=="function")}function Qt(i,r){if(i===r||i!==i&&r!==r)return!0;if(!i||!r)return!1;if(typeof i.valueOf=="function"&&typeof r.valueOf=="function"){if(i=i.valueOf(),r=r.valueOf(),i===r||i!==i&&r!==r)return!0;if(!i||!r)return!1}return!!(Z1(i)&&Z1(r)&&i.equals(r))}function j0(i,r,o,n){return ys(i,[r],o,n)}function gN(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];return vN(this,i)}function bN(i){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];if(typeof i!="function")throw new TypeError("Invalid merger function: "+i);return vN(this,r,i)}function vN(i,r,o){for(var n=[],t=0;t<r.length;t++){var e=Dr(r[t]);e.size!==0&&n.push(e)}return n.length===0?i:i.toSeq().size===0&&!i.__ownerID&&n.length===1?wn(i)?i:i.constructor(n[0]):i.withMutations(function(a){for(var u=o?function(s,l){j0(a,l,Ze,function(d){return d===Ze?s:o(d,s,l)})}:function(s,l){a.set(l,s)},c=0;c<n.length;c++)n[c].forEach(u)})}var p9=Object.prototype.toString;function R0(i){if(!i||typeof i!="object"||p9.call(i)!=="[object Object]")return!1;var r=Object.getPrototypeOf(i);if(r===null)return!0;for(var o=r,n=Object.getPrototypeOf(r);n!==null;)o=n,n=Object.getPrototypeOf(o);return o===r}function An(i){return typeof i=="object"&&(Pr(i)||Array.isArray(i)||R0(i))}function Yr(i,r){r=r||0;for(var o=Math.max(0,i.length-r),n=new Array(o),t=0;t<o;t++)n[t]=i[t+r];return n}function Ng(i){if(Array.isArray(i))return Yr(i);var r={};for(var o in i)tc.call(i,o)&&(r[o]=i[o]);return r}function h9(i){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];return vm(i,r)}function y9(i,r){for(var o=[],n=arguments.length-2;n-- >0;)o[n]=arguments[n+2];return vm(r,o,i)}function _9(i){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];return bm(i,r)}function m9(i,r){for(var o=[],n=arguments.length-2;n-- >0;)o[n]=arguments[n+2];return bm(r,o,i)}function bm(i,r,o){return vm(i,r,g9(o))}function vm(i,r,o){if(!An(i))throw new TypeError("Cannot merge into non-data-structure value: "+i);if(Pr(i))return typeof o=="function"&&i.mergeWith?i.mergeWith.apply(i,[o].concat(r)):i.merge?i.merge.apply(i,r):i.concat.apply(i,r);for(var n=Array.isArray(i),t=i,e=n?ps:Dr,a=n?function(c){t===i&&(t=Ng(t)),t.push(c)}:function(c,s){var l=tc.call(t,s),d=l&&o?o(t[s],c,s):c;(!l||d!==t[s])&&(t===i&&(t=Ng(t)),t[s]=d)},u=0;u<r.length;u++)e(r[u]).forEach(a);return t}function g9(i){function r(o,n,t){return An(o)&&An(n)&&b9(o,n)?vm(o,[n],r):i?i(o,n,t):n}return r}function b9(i,r){var o=Wt(i),n=Wt(r);return fr(o)===fr(n)&&yt(o)===yt(n)}function TN(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];return bm(this,i)}function ON(i){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];return bm(this,r,i)}function D0(i){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];return ys(this,i,Wr(),function(n){return bm(n,r)})}function P0(i){for(var r=[],o=arguments.length-1;o-- >0;)r[o]=arguments[o+1];return ys(this,i,Wr(),function(n){return vm(n,r)})}function SN(i,r,o){return ys(i,r,Ze,function(){return o})}function M0(i,r){return SN(this,i,r)}function N0(i,r,o){return arguments.length===1?i(this):j0(this,i,r,o)}function I0(i,r,o){return ys(this,i,r,o)}function q0(){return this.__altered}function Tm(i){var r=this.asMutable();return i(r),r.wasAltered()?r.__ensureOwner(this.__ownerID):this}var FN="@@__IMMUTABLE_MAP__@@";function zg(i){return!!(i&&i[FN])}function im(i,r){if(!i)throw new Error(r)}function vr(i){im(i!==1/0,"Cannot perform this action with an infinite size.")}var hs=(function(i){function r(o){return o==null?Wr():zg(o)&&!Qr(o)?o:Wr().withMutations(function(n){var t=i(o);vr(t.size),t.forEach(function(e,a){return n.set(a,e)})})}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.__toString("Map {","}")},r.prototype.get=function(n,t){return this._root?this._root.get(0,void 0,n,t):t},r.prototype.set=function(n,t){return MT(this,n,t)},r.prototype.remove=function(n){return MT(this,n,Ze)},r.prototype.deleteAll=function(n){var t=Ut(n);return t.size===0?this:this.withMutations(function(e){t.forEach(function(a){return e.remove(a)})})},r.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Wr()},r.prototype.sort=function(n){return Zr(Us(this,n))},r.prototype.sortBy=function(n,t){return Zr(Us(this,t,n))},r.prototype.map=function(n,t){var e=this;return this.withMutations(function(a){a.forEach(function(u,c){a.set(c,n.call(t,u,c,e))})})},r.prototype.__iterator=function(n,t){return new v9(this,n,t)},r.prototype.__iterate=function(n,t){var e=this,a=0;return this._root&&this._root.iterate(function(u){return a++,n(u[1],u[0],e)},t),a},r.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?L0(this.size,this._root,n,this.__hash):this.size===0?Wr():(this.__ownerID=n,this.__altered=!1,this)},r})(Dr);hs.isMap=zg;var Tt=hs.prototype;Tt[FN]=!0;Tt[hm]=Tt.remove;Tt.removeAll=Tt.deleteAll;Tt.setIn=M0;Tt.removeIn=Tt.deleteIn=Q0;Tt.update=N0;Tt.updateIn=I0;Tt.merge=Tt.concat=gN;Tt.mergeWith=bN;Tt.mergeDeep=TN;Tt.mergeDeepWith=ON;Tt.mergeIn=P0;Tt.mergeDeepIn=D0;Tt.withMutations=Tm;Tt.wasAltered=q0;Tt.asImmutable=mm;Tt["@@transducer/init"]=Tt.asMutable=gm;Tt["@@transducer/step"]=function(i,r){return i.set(r[0],r[1])};Tt["@@transducer/result"]=function(i){return i.asImmutable()};var sm=function(r,o){this.ownerID=r,this.entries=o};sm.prototype.get=function(r,o,n,t){for(var e=this.entries,a=0,u=e.length;a<u;a++)if(Qt(n,e[a][0]))return e[a][1];return t};sm.prototype.update=function(r,o,n,t,e,a,u){for(var c=e===Ze,s=this.entries,l=0,d=s.length;l<d&&!Qt(t,s[l][0]);l++);var f=l<d;if(f?s[l][1]===e:c)return this;if(Er(u),(c||!f)&&Er(a),!(c&&s.length===1)){if(!f&&!c&&s.length>=w9)return T9(r,s,t,e);var h=r&&r===this.ownerID,p=h?s:Yr(s);return f?c?l===d-1?p.pop():p[l]=p.pop():p[l]=[t,e]:p.push([t,e]),h?(this.entries=p,this):new sm(r,p)}};var Vs=function(r,o,n){this.ownerID=r,this.bitmap=o,this.nodes=n};Vs.prototype.get=function(r,o,n,t){o===void 0&&(o=dr(n));var e=1<<((r===0?o:o>>>r)&or),a=this.bitmap;return(a&e)===0?t:this.nodes[AN(a&e-1)].get(r+pt,o,n,t)};Vs.prototype.update=function(r,o,n,t,e,a,u){n===void 0&&(n=dr(t));var c=(o===0?n:n>>>o)&or,s=1<<c,l=this.bitmap,d=(l&s)!==0;if(!d&&e===Ze)return this;var f=AN(l&s-1),h=this.nodes,p=d?h[f]:void 0,y=x0(p,r,o+pt,n,t,e,a,u);if(y===p)return this;if(!d&&y&&h.length>=E9)return S9(r,h,l,c,y);if(d&&!y&&h.length===2&&NT(h[f^1]))return h[f^1];if(d&&y&&h.length===1&&NT(y))return y;var b=r&&r===this.ownerID,v=d?y?l:l^s:l|s,F=d?y?wN(h,f,y,b):A9(h,f,b):F9(h,f,y,b);return b?(this.bitmap=v,this.nodes=F,this):new Vs(r,v,F)};var cm=function(r,o,n){this.ownerID=r,this.count=o,this.nodes=n};cm.prototype.get=function(r,o,n,t){o===void 0&&(o=dr(n));var e=(r===0?o:o>>>r)&or,a=this.nodes[e];return a?a.get(r+pt,o,n,t):t};cm.prototype.update=function(r,o,n,t,e,a,u){n===void 0&&(n=dr(t));var c=(o===0?n:n>>>o)&or,s=e===Ze,l=this.nodes,d=l[c];if(s&&!d)return this;var f=x0(d,r,o+pt,n,t,e,a,u);if(f===d)return this;var h=this.count;if(!d)h++;else if(!f&&(h--,h<j9))return O9(r,l,h,c);var p=r&&r===this.ownerID,y=wN(l,c,f,p);return p?(this.count=h,this.nodes=y,this):new cm(r,h,y)};var Gs=function(r,o,n){this.ownerID=r,this.keyHash=o,this.entries=n};Gs.prototype.get=function(r,o,n,t){for(var e=this.entries,a=0,u=e.length;a<u;a++)if(Qt(n,e[a][0]))return e[a][1];return t};Gs.prototype.update=function(r,o,n,t,e,a,u){n===void 0&&(n=dr(t));var c=e===Ze;if(n!==this.keyHash)return c?this:(Er(u),Er(a),B0(this,r,o,n,[t,e]));for(var s=this.entries,l=0,d=s.length;l<d&&!Qt(t,s[l][0]);l++);var f=l<d;if(f?s[l][1]===e:c)return this;if(Er(u),(c||!f)&&Er(a),c&&d===2)return new dn(r,this.keyHash,s[l^1]);var h=r&&r===this.ownerID,p=h?s:Yr(s);return f?c?l===d-1?p.pop():p[l]=p.pop():p[l]=[t,e]:p.push([t,e]),h?(this.entries=p,this):new Gs(r,this.keyHash,p)};var dn=function(r,o,n){this.ownerID=r,this.keyHash=o,this.entry=n};dn.prototype.get=function(r,o,n,t){return Qt(n,this.entry[0])?this.entry[1]:t};dn.prototype.update=function(r,o,n,t,e,a,u){var c=e===Ze,s=Qt(t,this.entry[0]);if(s?e===this.entry[1]:c)return this;if(Er(u),c){Er(a);return}return s?r&&r===this.ownerID?(this.entry[1]=e,this):new dn(r,this.keyHash,[t,e]):(Er(a),B0(this,r,o,dr(t),[t,e]))};sm.prototype.iterate=Gs.prototype.iterate=function(i,r){for(var o=this.entries,n=0,t=o.length-1;n<=t;n++)if(i(o[r?t-n:n])===!1)return!1};Vs.prototype.iterate=cm.prototype.iterate=function(i,r){for(var o=this.nodes,n=0,t=o.length-1;n<=t;n++){var e=o[r?t-n:n];if(e&&e.iterate(i,r)===!1)return!1}};dn.prototype.iterate=function(i,r){return i(this.entry)};var v9=(function(i){function r(o,n,t){this._type=n,this._reverse=t,this._stack=o._root&&DT(o._root)}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.next=function(){for(var n=this._type,t=this._stack;t;){var e=t.node,a=t.index++,u=void 0;if(e.entry){if(a===0)return Mb(n,e.entry)}else if(e.entries){if(u=e.entries.length-1,a<=u)return Mb(n,e.entries[this._reverse?u-a:a])}else if(u=e.nodes.length-1,a<=u){var c=e.nodes[this._reverse?u-a:a];if(c){if(c.entry)return Mb(n,c.entry);t=this._stack=DT(c,t)}continue}t=this._stack=this._stack.__prev}return Yt()},r})(ke);function Mb(i,r){return vt(i,r[0],r[1])}function DT(i,r){return{node:i,index:0,__prev:r}}function L0(i,r,o,n){var t=Object.create(Tt);return t.size=i,t._root=r,t.__ownerID=o,t.__hash=n,t.__altered=!1,t}var PT;function Wr(){return PT||(PT=L0(0))}function MT(i,r,o){var n,t;if(i._root){var e=J1(),a=J1();if(n=x0(i._root,i.__ownerID,0,void 0,r,o,e,a),!a.value)return i;t=i.size+(e.value?o===Ze?-1:1:0)}else{if(o===Ze)return i;t=1,n=new sm(i.__ownerID,[[r,o]])}return i.__ownerID?(i.size=t,i._root=n,i.__hash=void 0,i.__altered=!0,i):n?L0(t,n):Wr()}function x0(i,r,o,n,t,e,a,u){return i?i.update(r,o,n,t,e,a,u):e===Ze?i:(Er(u),Er(a),new dn(r,n,[t,e]))}function NT(i){return i.constructor===dn||i.constructor===Gs}function B0(i,r,o,n,t){if(i.keyHash===n)return new Gs(r,n,[i.entry,t]);var e=(o===0?i.keyHash:i.keyHash>>>o)&or,a=(o===0?n:n>>>o)&or,u,c=e===a?[B0(i,r,o+pt,n,t)]:(u=new dn(r,n,t),e<a?[i,u]:[u,i]);return new Vs(r,1<<e|1<<a,c)}function T9(i,r,o,n){i||(i=new g0);for(var t=new dn(i,dr(o),[o,n]),e=0;e<r.length;e++){var a=r[e];t=t.update(i,0,void 0,a[0],a[1])}return t}function O9(i,r,o,n){for(var t=0,e=0,a=new Array(o),u=0,c=1,s=r.length;u<s;u++,c<<=1){var l=r[u];l!==void 0&&u!==n&&(t|=c,a[e++]=l)}return new Vs(i,t,a)}function S9(i,r,o,n,t){for(var e=0,a=new Array(Tr),u=0;o!==0;u++,o>>>=1)a[u]=o&1?r[e++]:void 0;return a[n]=t,new cm(i,e+1,a)}function AN(i){return i-=i>>1&1431655765,i=(i&858993459)+(i>>2&858993459),i=i+(i>>4)&252645135,i+=i>>8,i+=i>>16,i&127}function wN(i,r,o,n){var t=n?i:Yr(i);return t[r]=o,t}function F9(i,r,o,n){var t=i.length+1;if(n&&r+1===t)return i[r]=o,i;for(var e=new Array(t),a=0,u=0;u<t;u++)u===r?(e[u]=o,a=-1):e[u]=i[u+a];return e}function A9(i,r,o){var n=i.length-1;if(o&&r===n)return i.pop(),i;for(var t=new Array(n),e=0,a=0;a<n;a++)a===r&&(e=1),t[a]=i[a+e];return t}var w9=Tr/4,E9=Tr/2,j9=Tr/4;function EN(i){if(b0(i)&&typeof i!="string")return i;if(Qr(i))return i.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+i)}function lm(i){try{return typeof i=="string"?JSON.stringify(i):String(i)}catch{return JSON.stringify(i)}}function jN(i,r){return Pr(i)?i.has(r):An(i)&&tc.call(i,r)}function C0(i,r,o){return Pr(i)?i.get(r,o):jN(i,r)?typeof i.get=="function"?i.get(r):i[r]:o}function RN(i,r){if(!An(i))throw new TypeError("Cannot update non-data-structure value: "+i);if(Pr(i)){if(!i.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+i);return i.remove(r)}if(!tc.call(i,r))return i;var o=Ng(i);return Array.isArray(o)?o.splice(r,1):delete o[r],o}function DN(i,r,o){if(!An(i))throw new TypeError("Cannot update non-data-structure value: "+i);if(Pr(i)){if(!i.set)throw new TypeError("Cannot update immutable value without .set() method: "+i);return i.set(r,o)}if(tc.call(i,r)&&o===i[r])return i;var n=Ng(i);return n[r]=o,n}function ys(i,r,o,n){n||(n=o,o=void 0);var t=PN(Pr(i),i,EN(r),0,o,n);return t===Ze?o:t}function PN(i,r,o,n,t,e){var a=r===Ze;if(n===o.length){var u=a?t:r,c=e(u);return c===u?r:c}if(!a&&!An(r))throw new TypeError("Cannot update within non-data-structure value in path ["+Array.from(o).slice(0,n).map(lm)+"]: "+r);var s=o[n],l=a?Ze:C0(r,s,Ze),d=PN(l===Ze?i:Pr(l),l,o,n+1,t,e);return d===l?r:d===Ze?RN(r,s):DN(a?i?Wr():{}:r,s,d)}function MN(i,r){return ys(i,r,function(){return Ze})}function Q0(i){return MN(this,i)}var NN="@@__IMMUTABLE_LIST__@@";function U0(i){return!!(i&&i[NN])}var Om=(function(i){function r(o){var n=Og();if(o==null)return n;if(U0(o))return o;var t=i(o),e=t.size;return e===0?n:(vr(e),e>0&&e<Tr?dm(0,e,pt,null,new On(t.toArray())):n.withMutations(function(a){a.setSize(e),t.forEach(function(u,c){return a.set(c,u)})}))}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.of=function(){return this(arguments)},r.prototype.toString=function(){return this.__toString("List [","]")},r.prototype.get=function(n,t){if(n=Sn(this,n),n>=0&&n<this.size){n+=this._origin;var e=IN(this,n);return e&&e.array[n&or]}return t},r.prototype.set=function(n,t){return R9(this,n,t)},r.prototype.remove=function(n){return this.has(n)?n===0?this.shift():n===this.size-1?this.pop():this.splice(n,1):this},r.prototype.insert=function(n,t){return this.splice(n,0,t)},r.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=pt,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):Og()},r.prototype.push=function(){var n=arguments,t=this.size;return this.withMutations(function(e){Tn(e,0,t+n.length);for(var a=0;a<n.length;a++)e.set(t+a,n[a])})},r.prototype.pop=function(){return Tn(this,0,-1)},r.prototype.unshift=function(){var n=arguments;return this.withMutations(function(t){Tn(t,-n.length);for(var e=0;e<n.length;e++)t.set(e,n[e])})},r.prototype.shift=function(){return Tn(this,1)},r.prototype.shuffle=function(n){return n===void 0&&(n=Math.random),this.withMutations(function(t){for(var e=t.size,a,u;e;)a=Math.floor(n()*e--),u=t.get(a),t.set(a,t.get(e)),t.set(e,u)})},r.prototype.concat=function(){for(var n=arguments,t=[],e=0;e<arguments.length;e++){var a=n[e],u=i(typeof a!="string"&&m0(a)?a:[a]);u.size!==0&&t.push(u)}return t.length===0?this:this.size===0&&!this.__ownerID&&t.length===1?this.constructor(t[0]):this.withMutations(function(c){t.forEach(function(s){return s.forEach(function(l){return c.push(l)})})})},r.prototype.setSize=function(n){return Tn(this,0,n)},r.prototype.map=function(n,t){var e=this;return this.withMutations(function(a){for(var u=0;u<e.size;u++)a.set(u,n.call(t,a.get(u),u,e))})},r.prototype.slice=function(n,t){var e=this.size;return ym(n,t,e)?this:Tn(this,ec(n,e),_m(t,e))},r.prototype.__iterator=function(n,t){var e=t?this.size:0,a=IT(this,t);return new ke(function(){var u=a();return u===am?Yt():vt(n,t?--e:e++,u)})},r.prototype.__iterate=function(n,t){for(var e=t?this.size:0,a=IT(this,t),u;(u=a())!==am&&n(u,t?--e:e++,this)!==!1;);return e},r.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?dm(this._origin,this._capacity,this._level,this._root,this._tail,n,this.__hash):this.size===0?Og():(this.__ownerID=n,this.__altered=!1,this)},r})(ps);Om.isList=U0;var It=Om.prototype;It[NN]=!0;It[hm]=It.remove;It.merge=It.concat;It.setIn=M0;It.deleteIn=It.removeIn=Q0;It.update=N0;It.updateIn=I0;It.mergeIn=P0;It.mergeDeepIn=D0;It.withMutations=Tm;It.wasAltered=q0;It.asImmutable=mm;It["@@transducer/init"]=It.asMutable=gm;It["@@transducer/step"]=function(i,r){return i.push(r)};It["@@transducer/result"]=function(i){return i.asImmutable()};var On=function(r,o){this.array=r,this.ownerID=o};On.prototype.removeBefore=function(r,o,n){if((n&(1<<o+pt)-1)===0||this.array.length===0)return this;var t=n>>>o&or;if(t>=this.array.length)return new On([],r);var e=t===0,a;if(o>0){var u=this.array[t];if(a=u&&u.removeBefore(r,o-pt,n),a===u&&e)return this}if(e&&!a)return this;var c=Xs(this,r);if(!e)for(var s=0;s<t;s++)c.array[s]=void 0;return a&&(c.array[t]=a),c};On.prototype.removeAfter=function(r,o,n){if(n===(o?1<<o+pt:Tr)||this.array.length===0)return this;var t=n-1>>>o&or;if(t>=this.array.length)return this;var e;if(o>0){var a=this.array[t];if(e=a&&a.removeAfter(r,o-pt,n),e===a&&t===this.array.length-1)return this}var u=Xs(this,r);return u.array.splice(t+1),e&&(u.array[t]=e),u};var am={};function IT(i,r){var o=i._origin,n=i._capacity,t=fm(n),e=i._tail;return a(i._root,i._level,0);function a(s,l,d){return l===0?u(s,d):c(s,l,d)}function u(s,l){var d=l===t?e&&e.array:s&&s.array,f=l>o?0:o-l,h=n-l;return h>Tr&&(h=Tr),function(){if(f===h)return am;var p=r?--h:f++;return d&&d[p]}}function c(s,l,d){var f,h=s&&s.array,p=d>o?0:o-d>>l,y=(n-d>>l)+1;return y>Tr&&(y=Tr),function(){for(;;){if(f){var b=f();if(b!==am)return b;f=null}if(p===y)return am;var v=r?--y:p++;f=a(h&&h[v],l-pt,d+(v<<l))}}}}function dm(i,r,o,n,t,e,a){var u=Object.create(It);return u.size=r-i,u._origin=i,u._capacity=r,u._level=o,u._root=n,u._tail=t,u.__ownerID=e,u.__hash=a,u.__altered=!1,u}function Og(){return dm(0,0,pt)}function R9(i,r,o){if(r=Sn(i,r),r!==r)return i;if(r>=i.size||r<0)return i.withMutations(function(a){r<0?Tn(a,r).set(0,o):Tn(a,0,r+1).set(r,o)});r+=i._origin;var n=i._tail,t=i._root,e=J1();return r>=fm(i._capacity)?n=k1(n,i.__ownerID,0,r,o,e):t=k1(t,i.__ownerID,i._level,r,o,e),e.value?i.__ownerID?(i._root=t,i._tail=n,i.__hash=void 0,i.__altered=!0,i):dm(i._origin,i._capacity,i._level,t,n):i}function k1(i,r,o,n,t,e){var a=n>>>o&or,u=i&&a<i.array.length;if(!u&&t===void 0)return i;var c;if(o>0){var s=i&&i.array[a],l=k1(s,r,o-pt,n,t,e);return l===s?i:(c=Xs(i,r),c.array[a]=l,c)}return u&&i.array[a]===t?i:(e&&Er(e),c=Xs(i,r),t===void 0&&a===c.array.length-1?c.array.pop():c.array[a]=t,c)}function Xs(i,r){return r&&i&&r===i.ownerID?i:new On(i?i.array.slice():[],r)}function IN(i,r){if(r>=fm(i._capacity))return i._tail;if(r<1<<i._level+pt){for(var o=i._root,n=i._level;o&&n>0;)o=o.array[r>>>n&or],n-=pt;return o}}function Tn(i,r,o){r!==void 0&&(r|=0),o!==void 0&&(o|=0);var n=i.__ownerID||new g0,t=i._origin,e=i._capacity,a=t+r,u=o===void 0?e:o<0?e+o:t+o;if(a===t&&u===e)return i;if(a>=u)return i.clear();for(var c=i._level,s=i._root,l=0;a+l<0;)s=new On(s&&s.array.length?[void 0,s]:[],n),c+=pt,l+=1<<c;l&&(a+=l,t+=l,u+=l,e+=l);for(var d=fm(e),f=fm(u);f>=1<<c+pt;)s=new On(s&&s.array.length?[s]:[],n),c+=pt;var h=i._tail,p=f<d?IN(i,u-1):f>d?new On([],n):h;if(h&&f>d&&a<e&&h.array.length){s=Xs(s,n);for(var y=s,b=c;b>pt;b-=pt){var v=d>>>b&or;y=y.array[v]=Xs(y.array[v],n)}y.array[d>>>pt&or]=h}if(u<e&&(p=p&&p.removeAfter(n,0,u)),a>=f)a-=f,u-=f,c=pt,s=null,p=p&&p.removeBefore(n,0,a);else if(a>t||f<d){for(l=0;s;){var F=a>>>c&or;if(F!==f>>>c&or)break;F&&(l+=(1<<c)*F),c-=pt,s=s.array[F]}s&&a>t&&(s=s.removeBefore(n,c,a-l)),s&&f<d&&(s=s.removeAfter(n,c,f-l)),l&&(a-=l,u-=l)}return i.__ownerID?(i.size=u-a,i._origin=a,i._capacity=u,i._level=c,i._root=s,i._tail=p,i.__hash=void 0,i.__altered=!0,i):dm(a,u,c,s,p)}function fm(i){return i<Tr?0:i-1>>>pt<<pt}function V0(i){return zg(i)&&Qr(i)}var Zr=(function(i){function r(o){return o==null?Y_():V0(o)?o:Y_().withMutations(function(n){var t=Dr(o);vr(t.size),t.forEach(function(e,a){return n.set(a,e)})})}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.of=function(){return this(arguments)},r.prototype.toString=function(){return this.__toString("OrderedMap {","}")},r.prototype.get=function(n,t){var e=this._map.get(n);return e!==void 0?this._list.get(e)[1]:t},r.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):Y_()},r.prototype.set=function(n,t){return LT(this,n,t)},r.prototype.remove=function(n){return LT(this,n,Ze)},r.prototype.__iterate=function(n,t){var e=this;return this._list.__iterate(function(a){return a&&n(a[1],a[0],e)},t)},r.prototype.__iterator=function(n,t){return this._list.fromEntrySeq().__iterator(n,t)},r.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var t=this._map.__ensureOwner(n),e=this._list.__ensureOwner(n);return n?G0(t,e,n,this.__hash):this.size===0?Y_():(this.__ownerID=n,this.__altered=!1,this._map=t,this._list=e,this)},r})(hs);Zr.isOrderedMap=V0;Zr.prototype[Fn]=!0;Zr.prototype[hm]=Zr.prototype.remove;function G0(i,r,o,n){var t=Object.create(Zr.prototype);return t.size=i?i.size:0,t._map=i,t._list=r,t.__ownerID=o,t.__hash=n,t.__altered=!1,t}var qT;function Y_(){return qT||(qT=G0(Wr(),Og()))}function LT(i,r,o){var n=i._map,t=i._list,e=n.get(r),a=e!==void 0,u,c;if(o===Ze){if(!a)return i;t.size>=Tr&&t.size>=n.size*2?(c=t.filter(function(s,l){return s!==void 0&&e!==l}),u=c.toKeyedSeq().map(function(s){return s[0]}).flip().toMap(),i.__ownerID&&(u.__ownerID=c.__ownerID=i.__ownerID)):(u=n.remove(r),c=e===t.size-1?t.pop():t.set(e,void 0))}else if(a){if(o===t.get(e)[1])return i;u=n,c=t.set(e,[r,o])}else u=n.set(r,t.size),c=t.set(t.size,[r,o]);return i.__ownerID?(i.size=u.size,i._map=u,i._list=c,i.__hash=void 0,i.__altered=!0,i):G0(u,c)}var qN="@@__IMMUTABLE_STACK__@@";function Ig(i){return!!(i&&i[qN])}var Hg=(function(i){function r(o){return o==null?tg():Ig(o)?o:tg().pushAll(o)}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.of=function(){return this(arguments)},r.prototype.toString=function(){return this.__toString("Stack [","]")},r.prototype.get=function(n,t){var e=this._head;for(n=Sn(this,n);e&&n--;)e=e.next;return e?e.value:t},r.prototype.peek=function(){return this._head&&this._head.value},r.prototype.push=function(){var n=arguments;if(arguments.length===0)return this;for(var t=this.size+arguments.length,e=this._head,a=arguments.length-1;a>=0;a--)e={value:n[a],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):W_(t,e)},r.prototype.pushAll=function(n){if(n=i(n),n.size===0)return this;if(this.size===0&&Ig(n))return n;vr(n.size);var t=this.size,e=this._head;return n.__iterate(function(a){t++,e={value:a,next:e}},!0),this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):W_(t,e)},r.prototype.pop=function(){return this.slice(1)},r.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):tg()},r.prototype.slice=function(n,t){if(ym(n,t,this.size))return this;var e=ec(n,this.size),a=_m(t,this.size);if(a!==this.size)return i.prototype.slice.call(this,n,t);for(var u=this.size-e,c=this._head;e--;)c=c.next;return this.__ownerID?(this.size=u,this._head=c,this.__hash=void 0,this.__altered=!0,this):W_(u,c)},r.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?W_(this.size,this._head,n,this.__hash):this.size===0?tg():(this.__ownerID=n,this.__altered=!1,this)},r.prototype.__iterate=function(n,t){var e=this;if(t)return new Qs(this.toArray()).__iterate(function(c,s){return n(c,s,e)},t);for(var a=0,u=this._head;u&&n(u.value,a++,this)!==!1;)u=u.next;return a},r.prototype.__iterator=function(n,t){if(t)return new Qs(this.toArray()).__iterator(n,t);var e=0,a=this._head;return new ke(function(){if(a){var u=a.value;return a=a.next,vt(n,e++,u)}return Yt()})},r})(ps);Hg.isStack=Ig;var ur=Hg.prototype;ur[qN]=!0;ur.shift=ur.pop;ur.unshift=ur.push;ur.unshiftAll=ur.pushAll;ur.withMutations=Tm;ur.wasAltered=q0;ur.asImmutable=mm;ur["@@transducer/init"]=ur.asMutable=gm;ur["@@transducer/step"]=function(i,r){return i.unshift(r)};ur["@@transducer/result"]=function(i){return i.asImmutable()};function W_(i,r,o,n){var t=Object.create(ur);return t.size=i,t._head=r,t.__ownerID=o,t.__hash=n,t.__altered=!1,t}var xT;function tg(){return xT||(xT=W_(0))}function BT(i,r,o,n,t,e){return vr(i.size),i.__iterate(function(a,u,c){t?(t=!1,o=a):o=r.call(n,o,a,u,c)},e),o}function D9(i,r){return r}function P9(i,r){return[r,i]}function Nb(i){return function(){for(var r=[],o=arguments.length;o--;)r[o]=arguments[o];return!i.apply(this,r)}}function CT(i){return function(){for(var r=[],o=arguments.length;o--;)r[o]=arguments[o];return-i.apply(this,r)}}function QT(i,r){return i<r?1:i>r?-1:0}function X0(i,r){if(i===r)return!0;if(!pr(r)||i.size!==void 0&&r.size!==void 0&&i.size!==r.size||i.__hash!==void 0&&r.__hash!==void 0&&i.__hash!==r.__hash||yt(i)!==yt(r)||fr(i)!==fr(r)||Qr(i)!==Qr(r))return!1;if(i.size===0&&r.size===0)return!0;var o=!Cg(i);if(Qr(i)){var n=i.entries();return r.every(function(c,s){var l=n.next().value;return l&&Qt(l[1],c)&&(o||Qt(l[0],s))})&&n.next().done}var t=!1;if(i.size===void 0)if(r.size===void 0)typeof i.cacheResult=="function"&&i.cacheResult();else{t=!0;var e=i;i=r,r=e}var a=!0,u=r.__iterate(function(c,s){if(o?!i.has(c):t?!Qt(c,i.get(s,Ze)):!Qt(i.get(s,Ze),c))return a=!1,!1});return a&&i.size===u}var LN=(function(i){function r(o,n,t){if(t===void 0&&(t=1),!(this instanceof r))return new r(o,n,t);if(im(t!==0,"Cannot step a Range by 0"),im(o!==void 0,"You must define a start value when using Range"),im(n!==void 0,"You must define an end value when using Range"),t=Math.abs(t),n<o&&(t=-t),this._start=o,this._end=n,this._step=t,this.size=Math.max(0,Math.ceil((n-o)/t-1)+1),this.size===0){if(Ib)return Ib;Ib=this}}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},r.prototype.get=function(n,t){return this.has(n)?this._start+Sn(this,n)*this._step:t},r.prototype.includes=function(n){var t=(n-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},r.prototype.slice=function(n,t){return ym(n,t,this.size)?this:(n=ec(n,this.size),t=_m(t,this.size),t<=n?new r(0,0):new r(this.get(n,this._end),this.get(t,this._end),this._step))},r.prototype.indexOf=function(n){var t=n-this._start;if(t%this._step===0){var e=t/this._step;if(e>=0&&e<this.size)return e}return-1},r.prototype.lastIndexOf=function(n){return this.indexOf(n)},r.prototype.__iterate=function(n,t){for(var e=this.size,a=this._step,u=t?this._start+(e-1)*a:this._start,c=0;c!==e&&n(u,t?e-++c:c++,this)!==!1;)u+=t?-a:a;return c},r.prototype.__iterator=function(n,t){var e=this.size,a=this._step,u=t?this._start+(e-1)*a:this._start,c=0;return new ke(function(){if(c===e)return Yt();var s=u;return u+=t?-a:a,vt(n,t?e-++c:c++,s)})},r.prototype.equals=function(n){return n instanceof r?this._start===n._start&&this._end===n._end&&this._step===n._step:X0(this,n)},r})(Mr),Ib,xN="@@__IMMUTABLE_SET__@@";function $g(i){return!!(i&&i[xN])}var Sm=(function(i){function r(o){return o==null?Z_():$g(o)&&!Qr(o)?o:Z_().withMutations(function(n){var t=i(o);vr(t.size),t.forEach(function(e){return n.add(e)})})}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.of=function(){return this(arguments)},r.fromKeys=function(n){return this(Dr(n).keySeq())},r.intersect=function(n){return n=Ut(n).toArray(),n.length?Jt.intersect.apply(r(n.pop()),n):Z_()},r.union=function(n){return n=Ut(n).toArray(),n.length?Jt.union.apply(r(n.pop()),n):Z_()},r.prototype.toString=function(){return this.__toString("Set {","}")},r.prototype.has=function(n){return this._map.has(n)},r.prototype.add=function(n){return rg(this,this._map.set(n,n))},r.prototype.remove=function(n){return rg(this,this._map.remove(n))},r.prototype.clear=function(){return rg(this,this._map.clear())},r.prototype.map=function(n,t){var e=this,a=!1,u=rg(this,this._map.mapEntries(function(c){var s=c[1],l=n.call(t,s,s,e);return l!==s&&(a=!0),[l,l]},t));return a?u:this},r.prototype.union=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return n=n.filter(function(e){return e.size!==0}),n.length===0?this:this.size===0&&!this.__ownerID&&n.length===1?this.constructor(n[0]):this.withMutations(function(e){for(var a=0;a<n.length;a++)typeof n[a]=="string"?e.add(n[a]):i(n[a]).forEach(function(u){return e.add(u)})})},r.prototype.intersect=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];if(n.length===0)return this;n=n.map(function(a){return i(a)});var e=[];return this.forEach(function(a){n.every(function(u){return u.includes(a)})||e.push(a)}),this.withMutations(function(a){e.forEach(function(u){a.remove(u)})})},r.prototype.subtract=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];if(n.length===0)return this;n=n.map(function(a){return i(a)});var e=[];return this.forEach(function(a){n.some(function(u){return u.includes(a)})&&e.push(a)}),this.withMutations(function(a){e.forEach(function(u){a.remove(u)})})},r.prototype.sort=function(n){return Hs(Us(this,n))},r.prototype.sortBy=function(n,t){return Hs(Us(this,t,n))},r.prototype.wasAltered=function(){return this._map.wasAltered()},r.prototype.__iterate=function(n,t){var e=this;return this._map.__iterate(function(a){return n(a,a,e)},t)},r.prototype.__iterator=function(n,t){return this._map.__iterator(n,t)},r.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var t=this._map.__ensureOwner(n);return n?this.__make(t,n):this.size===0?this.__empty():(this.__ownerID=n,this._map=t,this)},r})(Zs);Sm.isSet=$g;var Jt=Sm.prototype;Jt[xN]=!0;Jt[hm]=Jt.remove;Jt.merge=Jt.concat=Jt.union;Jt.withMutations=Tm;Jt.asImmutable=mm;Jt["@@transducer/init"]=Jt.asMutable=gm;Jt["@@transducer/step"]=function(i,r){return i.add(r)};Jt["@@transducer/result"]=function(i){return i.asImmutable()};Jt.__empty=Z_;Jt.__make=BN;function rg(i,r){return i.__ownerID?(i.size=r.size,i._map=r,i):r===i._map?i:r.size===0?i.__empty():i.__make(r)}function BN(i,r){var o=Object.create(Jt);return o.size=i?i.size:0,o._map=i,o.__ownerID=r,o}var UT;function Z_(){return UT||(UT=BN(Wr()))}function z0(i,r,o){for(var n=EN(r),t=0;t!==n.length;)if(i=C0(i,n[t++],Ze),i===Ze)return o;return i}function CN(i,r){return z0(this,i,r)}function QN(i,r){return z0(i,r,Ze)!==Ze}function M9(i){return QN(this,i)}function UN(){vr(this.size);var i={};return this.__iterate(function(r,o){i[o]=r}),i}function qg(i){if(!i||typeof i!="object")return i;if(!pr(i)){if(!An(i))return i;i=Wt(i)}if(yt(i)){var r={};return i.__iterate(function(n,t){r[t]=qg(n)}),r}var o=[];return i.__iterate(function(n){o.push(qg(n))}),o}function N9(i){if(i.size===1/0)return 0;var r=Qr(i),o=yt(i),n=r?1:0;return i.__iterate(o?r?function(t,e){n=31*n+VT(dr(t),dr(e))|0}:function(t,e){n=n+VT(dr(t),dr(e))|0}:r?function(t){n=31*n+dr(t)|0}:function(t){n=n+dr(t)|0}),I9(i.size,n)}function I9(i,r){return r=vc(r,3432918353),r=vc(r<<15|r>>>-15,461845907),r=vc(r<<13|r>>>-13,5),r=(r+3864292196|0)^i,r=vc(r^r>>>16,2246822507),r=vc(r^r>>>13,3266489909),r=Gg(r^r>>>16),r}function VT(i,r){return i^r+2654435769+(i<<6)+(i>>2)|0}function _s(i,r){var o=function(n){i.prototype[n]=r[n]};return Object.keys(r).forEach(o),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(r).forEach(o),i}Ut.Iterator=ke;_s(Ut,{toArray:function(){vr(this.size);var r=new Array(this.size||0),o=yt(this),n=0;return this.__iterate(function(t,e){r[n++]=o?[e,t]:t}),r},toIndexedSeq:function(){return new cN(this)},toJS:function(){return qg(this)},toKeyedSeq:function(){return new Xg(this,!0)},toMap:function(){return hs(this.toKeyedSeq())},toObject:UN,toOrderedMap:function(){return Zr(this.toKeyedSeq())},toOrderedSet:function(){return Hs(yt(this)?this.valueSeq():this)},toSet:function(){return Sm(yt(this)?this.valueSeq():this)},toSetSeq:function(){return new lN(this)},toSeq:function(){return fr(this)?this.toIndexedSeq():yt(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Hg(yt(this)?this.valueSeq():this)},toList:function(){return Om(yt(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(r,o){return this.size===0?r+o:r+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+o},concat:function(){for(var r=[],o=arguments.length;o--;)r[o]=arguments[o];return ft(this,l9(this,r))},includes:function(r){return this.some(function(o){return Qt(o,r)})},entries:function(){return this.__iterator(Sr)},every:function(r,o){vr(this.size);var n=!0;return this.__iterate(function(t,e,a){if(!r.call(o,t,e,a))return n=!1,!1}),n},filter:function(r,o){return ft(this,hN(this,r,o,!0))},partition:function(r,o){return u9(this,r,o)},find:function(r,o,n){var t=this.findEntry(r,o);return t?t[1]:n},forEach:function(r,o){return vr(this.size),this.__iterate(o?r.bind(o):r)},join:function(r){vr(this.size),r=r!==void 0?""+r:",";var o="",n=!0;return this.__iterate(function(t){n?n=!1:o+=r,o+=t!=null?t.toString():""}),o},keys:function(){return this.__iterator(ks)},map:function(r,o){return ft(this,pN(this,r,o))},reduce:function(r,o,n){return BT(this,r,o,n,arguments.length<2,!1)},reduceRight:function(r,o,n){return BT(this,r,o,n,arguments.length<2,!0)},reverse:function(){return ft(this,F0(this,!0))},slice:function(r,o){return ft(this,A0(this,r,o,!0))},some:function(r,o){vr(this.size);var n=!1;return this.__iterate(function(t,e,a){if(r.call(o,t,e,a))return n=!0,!1}),n},sort:function(r){return ft(this,Us(this,r))},values:function(){return this.__iterator(Or)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(r,o){return Cs(r?this.toSeq().filter(r,o):this)},countBy:function(r,o){return a9(this,r,o)},equals:function(r){return X0(this,r)},entrySeq:function(){var r=this;if(r._cache)return new Qs(r._cache);var o=r.toSeq().map(P9).toIndexedSeq();return o.fromEntrySeq=function(){return r.toSeq()},o},filterNot:function(r,o){return this.filter(Nb(r),o)},findEntry:function(r,o,n){var t=n;return this.__iterate(function(e,a,u){if(r.call(o,e,a,u))return t=[a,e],!1}),t},findKey:function(r,o){var n=this.findEntry(r,o);return n&&n[0]},findLast:function(r,o,n){return this.toKeyedSeq().reverse().find(r,o,n)},findLastEntry:function(r,o,n){return this.toKeyedSeq().reverse().findEntry(r,o,n)},findLastKey:function(r,o){return this.toKeyedSeq().reverse().findKey(r,o)},first:function(r){return this.find(rN,null,r)},flatMap:function(r,o){return ft(this,d9(this,r,o))},flatten:function(r){return ft(this,_N(this,r,!0))},fromEntrySeq:function(){return new dN(this)},get:function(r,o){return this.find(function(n,t){return Qt(t,r)},void 0,o)},getIn:CN,groupBy:function(r,o){return o9(this,r,o)},has:function(r){return this.get(r,Ze)!==Ze},hasIn:M9,isSubset:function(r){return r=typeof r.includes=="function"?r:Ut(r),this.every(function(o){return r.includes(o)})},isSuperset:function(r){return r=typeof r.isSubset=="function"?r:Ut(r),r.isSubset(this)},keyOf:function(r){return this.findKey(function(o){return Qt(o,r)})},keySeq:function(){return this.toSeq().map(D9).toIndexedSeq()},last:function(r){return this.toSeq().reverse().first(r)},lastKeyOf:function(r){return this.toKeyedSeq().reverse().keyOf(r)},max:function(r){return km(this,r)},maxBy:function(r,o){return km(this,o,r)},min:function(r){return km(this,r?CT(r):QT)},minBy:function(r,o){return km(this,o?CT(o):QT,r)},rest:function(){return this.slice(1)},skip:function(r){return r===0?this:this.slice(Math.max(0,r))},skipLast:function(r){return r===0?this:this.slice(0,-Math.max(0,r))},skipWhile:function(r,o){return ft(this,yN(this,r,o,!0))},skipUntil:function(r,o){return this.skipWhile(Nb(r),o)},sortBy:function(r,o){return ft(this,Us(this,o,r))},take:function(r){return this.slice(0,Math.max(0,r))},takeLast:function(r){return this.slice(-Math.max(0,r))},takeWhile:function(r,o){return ft(this,s9(this,r,o))},takeUntil:function(r,o){return this.takeWhile(Nb(r),o)},update:function(r){return r(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=N9(this))}});var Zt=Ut.prototype;Zt[eN]=!0;Zt[Qg]=Zt.values;Zt.toJSON=Zt.toArray;Zt.__toStringMapper=lm;Zt.inspect=Zt.toSource=function(){return this.toString()};Zt.chain=Zt.flatMap;Zt.contains=Zt.includes;_s(Dr,{flip:function(){return ft(this,fN(this))},mapEntries:function(r,o){var n=this,t=0;return ft(this,this.toSeq().map(function(e,a){return r.call(o,[a,e],t++,n)}).fromEntrySeq())},mapKeys:function(r,o){var n=this;return ft(this,this.toSeq().flip().map(function(t,e){return r.call(o,t,e,n)}).flip())}});var Fm=Dr.prototype;Fm[Mg]=!0;Fm[Qg]=Zt.entries;Fm.toJSON=UN;Fm.__toStringMapper=function(i,r){return lm(r)+": "+lm(i)};_s(ps,{toKeyedSeq:function(){return new Xg(this,!1)},filter:function(r,o){return ft(this,hN(this,r,o,!1))},findIndex:function(r,o){var n=this.findEntry(r,o);return n?n[0]:-1},indexOf:function(r){var o=this.keyOf(r);return o===void 0?-1:o},lastIndexOf:function(r){var o=this.lastKeyOf(r);return o===void 0?-1:o},reverse:function(){return ft(this,F0(this,!1))},slice:function(r,o){return ft(this,A0(this,r,o,!1))},splice:function(r,o){var n=arguments.length;if(o=Math.max(o||0,0),n===0||n===2&&!o)return this;r=ec(r,r<0?this.count():this.size);var t=this.slice(0,r);return ft(this,n===1?t:t.concat(Yr(arguments,2),this.slice(r+o)))},findLastIndex:function(r,o){var n=this.findLastEntry(r,o);return n?n[0]:-1},first:function(r){return this.get(0,r)},flatten:function(r){return ft(this,_N(this,r,!1))},get:function(r,o){return r=Sn(this,r),r<0||this.size===1/0||this.size!==void 0&&r>this.size?o:this.find(function(n,t){return t===r},void 0,o)},has:function(r){return r=Sn(this,r),r>=0&&(this.size!==void 0?this.size===1/0||r<this.size:this.indexOf(r)!==-1)},interpose:function(r){return ft(this,f9(this,r))},interleave:function(){var r=[this].concat(Yr(arguments)),o=eg(this.toSeq(),Mr.of,r),n=o.flatten(!0);return o.size&&(n.size=o.size*r.length),ft(this,n)},keySeq:function(){return LN(0,this.size)},last:function(r){return this.get(-1,r)},skipWhile:function(r,o){return ft(this,yN(this,r,o,!1))},zip:function(){var r=[this].concat(Yr(arguments));return ft(this,eg(this,GT,r))},zipAll:function(){var r=[this].concat(Yr(arguments));return ft(this,eg(this,GT,r,!0))},zipWith:function(r){var o=Yr(arguments);return o[0]=this,ft(this,eg(this,r,o))}});var nc=ps.prototype;nc[Pg]=!0;nc[Fn]=!0;_s(Zs,{get:function(r,o){return this.has(r)?r:o},includes:function(r){return this.has(r)},keySeq:function(){return this.valueSeq()}});var zs=Zs.prototype;zs.has=Zt.includes;zs.contains=zs.includes;zs.keys=zs.values;_s(En,Fm);_s(Mr,nc);_s(rc,zs);function GT(){return Yr(arguments)}function H0(i){return $g(i)&&Qr(i)}var Hs=(function(i){function r(o){return o==null?e0():H0(o)?o:e0().withMutations(function(n){var t=Zs(o);vr(t.size),t.forEach(function(e){return n.add(e)})})}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.of=function(){return this(arguments)},r.fromKeys=function(n){return this(Dr(n).keySeq())},r.prototype.toString=function(){return this.__toString("OrderedSet {","}")},r})(Sm);Hs.isOrderedSet=H0;var ms=Hs.prototype;ms[Fn]=!0;ms.zip=nc.zip;ms.zipWith=nc.zipWith;ms.zipAll=nc.zipAll;ms.__empty=e0;ms.__make=VN;function VN(i,r){var o=Object.create(ms);return o.size=i?i.size:0,o._map=i,o.__ownerID=r,o}var XT;function e0(){return XT||(XT=VN(Y_()))}var q9={LeftThenRight:-1,RightThenLeft:1};function L9(i){if(wn(i))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(Pr(i))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(i===null||typeof i!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var Bt=function(r,o){var n;L9(r);var t=function(u){var c=this;if(u instanceof t)return u;if(!(this instanceof t))return new t(u);if(!n){n=!0;var s=Object.keys(r),l=e._indices={};e._name=o,e._keys=s,e._defaultValues=r;for(var d=0;d<s.length;d++){var f=s[d];l[f]=d,e[f]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+J0(this)+' with property "'+f+'" since that property name is part of the Record API.'):x9(e,f)}}return this.__ownerID=void 0,this._values=Om().withMutations(function(h){h.setSize(c._keys.length),Dr(u).forEach(function(p,y){h.set(c._indices[y],p===c._defaultValues[y]?void 0:p)})}),this},e=t.prototype=Object.create(_t);return e.constructor=t,o&&(t.displayName=o),t};Bt.prototype.toString=function(){for(var r=J0(this)+" { ",o=this._keys,n,t=0,e=o.length;t!==e;t++)n=o[t],r+=(t?", ":"")+n+": "+lm(this.get(n));return r+" }"};Bt.prototype.equals=function(r){return this===r||wn(r)&&$s(this).equals($s(r))};Bt.prototype.hashCode=function(){return $s(this).hashCode()};Bt.prototype.has=function(r){return this._indices.hasOwnProperty(r)};Bt.prototype.get=function(r,o){if(!this.has(r))return o;var n=this._indices[r],t=this._values.get(n);return t===void 0?this._defaultValues[r]:t};Bt.prototype.set=function(r,o){if(this.has(r)){var n=this._values.set(this._indices[r],o===this._defaultValues[r]?void 0:o);if(n!==this._values&&!this.__ownerID)return $0(this,n)}return this};Bt.prototype.remove=function(r){return this.set(r)};Bt.prototype.clear=function(){var r=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:$0(this,r)};Bt.prototype.wasAltered=function(){return this._values.wasAltered()};Bt.prototype.toSeq=function(){return $s(this)};Bt.prototype.toJS=function(){return qg(this)};Bt.prototype.entries=function(){return this.__iterator(Sr)};Bt.prototype.__iterator=function(r,o){return $s(this).__iterator(r,o)};Bt.prototype.__iterate=function(r,o){return $s(this).__iterate(r,o)};Bt.prototype.__ensureOwner=function(r){if(r===this.__ownerID)return this;var o=this._values.__ensureOwner(r);return r?$0(this,o,r):(this.__ownerID=r,this._values=o,this)};Bt.isRecord=wn;Bt.getDescriptiveName=J0;var _t=Bt.prototype;_t[aN]=!0;_t[hm]=_t.remove;_t.deleteIn=_t.removeIn=Q0;_t.getIn=CN;_t.hasIn=Zt.hasIn;_t.merge=gN;_t.mergeWith=bN;_t.mergeIn=P0;_t.mergeDeep=TN;_t.mergeDeepWith=ON;_t.mergeDeepIn=D0;_t.setIn=M0;_t.update=N0;_t.updateIn=I0;_t.withMutations=Tm;_t.asMutable=gm;_t.asImmutable=mm;_t[Qg]=_t.entries;_t.toJSON=_t.toObject=Zt.toObject;_t.inspect=_t.toSource=function(){return this.toString()};function $0(i,r,o){var n=Object.create(Object.getPrototypeOf(i));return n._values=r,n.__ownerID=o,n}function J0(i){return i.constructor.displayName||i.constructor.name||"Record"}function $s(i){return O0(i._keys.map(function(r){return[r,i.get(r)]}))}function x9(i,r){try{Object.defineProperty(i,r,{get:function(){return this.get(r)},set:function(o){im(this.__ownerID,"Cannot set on an immutable record."),this.set(r,o)}})}catch{}}var B9=(function(i){function r(o,n){if(!(this instanceof r))return new r(o,n);if(this._value=o,this.size=n===void 0?1/0:Math.max(0,n),this.size===0){if(qb)return qb;qb=this}}return i&&(r.__proto__=i),r.prototype=Object.create(i&&i.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},r.prototype.get=function(n,t){return this.has(n)?this._value:t},r.prototype.includes=function(n){return Qt(this._value,n)},r.prototype.slice=function(n,t){var e=this.size;return ym(n,t,e)?this:new r(this._value,_m(t,e)-ec(n,e))},r.prototype.reverse=function(){return this},r.prototype.indexOf=function(n){return Qt(this._value,n)?0:-1},r.prototype.lastIndexOf=function(n){return Qt(this._value,n)?this.size:-1},r.prototype.__iterate=function(n,t){for(var e=this.size,a=0;a!==e&&n(this._value,t?e-++a:a++,this)!==!1;);return a},r.prototype.__iterator=function(n,t){var e=this,a=this.size,u=0;return new ke(function(){return u===a?Yt():vt(n,t?a-++u:u++,e._value)})},r.prototype.equals=function(n){return n instanceof r?Qt(this._value,n._value):X0(this,n)},r})(Mr),qb;function C9(i,r){return GN([],r||Q9,i,"",r&&r.length>2?[]:void 0,{"":i})}function GN(i,r,o,n,t,e){if(typeof o!="string"&&!Pr(o)&&(b0(o)||m0(o)||R0(o))){if(~i.indexOf(o))throw new TypeError("Cannot convert circular structure to Immutable");i.push(o),t&&n!==""&&t.push(n);var a=r.call(e,n,Wt(o).map(function(u,c){return GN(i,r,u,c,t,o)}),t&&t.slice());return i.pop(),t&&t.pop(),a}return o}function Q9(i,r){return fr(r)?r.toList():yt(r)?r.toMap():r.toSet()}var U9="5.1.4",V9=Ut;const G9=Object.freeze(Object.defineProperty({__proto__:null,Collection:Ut,Iterable:V9,List:Om,Map:hs,OrderedMap:Zr,OrderedSet:Hs,PairSorting:q9,Range:LN,Record:Bt,Repeat:B9,Seq:Wt,Set:Sm,Stack:Hg,fromJS:C9,get:C0,getIn:z0,has:jN,hasIn:QN,hash:dr,is:Qt,isAssociative:Cg,isCollection:pr,isImmutable:Pr,isIndexed:fr,isKeyed:yt,isList:U0,isMap:zg,isOrdered:Qr,isOrderedMap:V0,isOrderedSet:H0,isPlainObject:R0,isRecord:wn,isSeq:Vg,isSet:$g,isStack:Ig,isValueObject:Z1,merge:h9,mergeDeep:_9,mergeDeepWith:m9,mergeWith:y9,remove:RN,removeIn:MN,set:DN,setIn:SN,update:j0,updateIn:ys,version:U9},Symbol.toStringTag,{value:"Module"})),K0=zM(G9);var zT;function XN(){if(zT)return Jn;zT=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.ActionContextKey=Jn.ActionContext=void 0;const i=K0;let r=class k_{constructor(t={}){this.map=(0,i.Map)(t)}setDefault(t,e){return this.has(t)?this:this.set(t,e)}set(t,e){return this.setRaw(t.name,e)}setRaw(t,e){return new k_(this.map.set(t,e))}delete(t){return new k_(this.map.delete(t.name))}get(t){return this.getRaw(t.name)}getRaw(t){return this.map.get(t)}getSafe(t){if(!this.has(t))throw new Error(`Context entry ${t.name} is required but not available`);return this.get(t)}has(t){return this.hasRaw(t.name)}hasRaw(t){return this.map.has(t)}merge(...t){let e=this;for(const a of t)for(const u of a.keys())e=e.set(u,a.get(u));return e}keys(){return[...this.map.keys()].map(t=>new o(t))}toJS(){return this.map.toJS()}toString(){return`ActionContext(${JSON.stringify(this.map.toJS())})`}[Symbol.for("nodejs.util.inspect.custom")](){return`ActionContext(${JSON.stringify(this.map.toJS(),null,"  ")})`}static ensureActionContext(t){return t instanceof k_?t:new k_((0,i.Map)(t??{}))}};Jn.ActionContext=r;class o{constructor(t){this.name=t}}return Jn.ActionContextKey=o,Jn}var Tc={},HT;function zN(){if(HT)return Tc;HT=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.Bus=void 0;let i=class{constructor(o){this.actors=[],this.observers=[],this.dependencyLinks=new Map,Object.assign(this,o),this.failMessage=`All actors over bus ${this.name} failed to handle an action`}subscribe(o){this.actors.push(o),this.reorderForDependencies()}subscribeObserver(o){this.observers.push(o)}unsubscribe(o){const n=this.actors.indexOf(o);return n>=0?(this.actors.splice(n,1),!0):!1}unsubscribeObserver(o){const n=this.observers.indexOf(o);return n>=0?(this.observers.splice(n,1),!0):!1}publish(o){return this.actors.map(n=>({actor:n,reply:n.test(o)}))}onRun(o,n,t){for(const e of this.observers)e.onRun(o,n,t)}addDependencies(o,n){for(const t of n){let e=this.dependencyLinks.get(t);e||(e=[],this.dependencyLinks.set(t,e)),e.push(o)}this.reorderForDependencies()}reorderForDependencies(){if(this.dependencyLinks.size>0){const o=[];for(const n of this.dependencyLinks.keys()){const t=this.actors.indexOf(n);t>=0&&(this.actors.splice(t,1),o.push(n))}for(;o.length>0;){let n=-1;for(let e=0;e<o.length;e++){let a=!0;for(const u of this.dependencyLinks.get(o[e]))if(!this.actors.includes(u)&&o.includes(u)){a=!1;break}if(a){n=e;break}}if(n<0)throw new Error(`Cyclic dependency links detected in bus ${this.name}`);const t=o.splice(n,1)[0];this.actors.push(t)}}}};return Tc.Bus=i,Tc}var Oc={},$T;function X9(){if($T)return Oc;$T=1,Object.defineProperty(Oc,"__esModule",{value:!0}),Oc.BusIndexed=void 0;const i=zN();let r=class extends i.Bus{constructor(n){super(n),this.actorsIndex={}}subscribe(n){const t=this.getActorIdentifiers(n)??["_undefined_"];for(const e of t){let a=this.actorsIndex[e];a||(a=this.actorsIndex[e]=[]),a.push(n),super.subscribe(n)}}unsubscribe(n){const t=this.getActorIdentifiers(n)??["_undefined_"];let e=!1;for(const a of t){const u=this.actorsIndex[a];if(u){const c=u.indexOf(n);c>=0&&u.splice(c,1),u.length===0&&delete this.actorsIndex[a]}e=e||super.unsubscribe(n)}return e}publish(n){const t=this.getActionIdentifier(n);return t?[...this.actorsIndex[t]||[],...this.actorsIndex._undefined_||[]].map(a=>({actor:a,reply:a.test(n)})):super.publish(n)}getActorIdentifiers(n){const t=this.actorIdentifierFields.reduce((e,a)=>e[a],n);if(t)return Array.isArray(t)?t:[t]}getActionIdentifier(n){return this.actionIdentifierFields.reduce((t,e)=>t[e],n)}};return Oc.BusIndexed=r,Oc}var Sc={},JT;function HN(){if(JT)return Sc;JT=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.CONTEXT_KEY_LOGGER=void 0;const i=XN();return Sc.CONTEXT_KEY_LOGGER=new i.ActionContextKey("@comunica/core:log"),Sc}var Fc={},KT;function z9(){if(KT)return Fc;KT=1,Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.ActionObserver=void 0;let i=class{constructor(o){Object.assign(this,o)}};return Fc.ActionObserver=i,Fc}var Ac={},YT;function H9(){if(YT)return Ac;YT=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.Actor=void 0;const i=HN();let r=class os{constructor(n){this.beforeActors=[],Object.assign(this,n),this.bus.subscribe(this),this.beforeActors.length>0&&this.bus.addDependencies(this,this.beforeActors),n.busFailMessage&&(this.bus.failMessage=n.busFailMessage)}static getContextLogger(n){return n.get(i.CONTEXT_KEY_LOGGER)}runObservable(n,t){const e=this.run(n,t);return this.bus.onRun(this,n,e),e}getDefaultLogData(n,t){const e=t?t():{};return e.actor=this.name,e}logTrace(n,t,e){const a=os.getContextLogger(n);a&&a.trace(t,this.getDefaultLogData(n,e))}logDebug(n,t,e){const a=os.getContextLogger(n);a&&a.debug(t,this.getDefaultLogData(n,e))}logInfo(n,t,e){const a=os.getContextLogger(n);a&&a.info(t,this.getDefaultLogData(n,e))}logWarn(n,t,e){const a=os.getContextLogger(n);a&&a.warn(t,this.getDefaultLogData(n,e))}logError(n,t,e){const a=os.getContextLogger(n);a&&a.error(t,this.getDefaultLogData(n,e))}logFatal(n,t,e){const a=os.getContextLogger(n);a&&a.fatal(t,this.getDefaultLogData(n,e))}};return Ac.Actor=r,Ac}var wc={},WT;function $9(){if(WT)return wc;WT=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.Mediator=void 0;let i=class t0{constructor(o){Object.assign(this,o)}publish(o){const n=this.bus.publish(o);if(n.length===0)throw new Error(`No actors are able to reply to a message in the bus ${this.bus.name}`);return n}async mediateActor(o){return await this.mediateWith(o,this.publish(o))}async mediateTestable(o){return(await this.mediateActor(o)).mapAsync((t,e)=>t.runObservable(o,e))}async mediate(o){return(await this.mediateTestable(o)).getOrThrow()}constructFailureMessage(o,n){const t=`
        `;return`${this.bus.failMessage.replaceAll(/\$\{(.*?)\}/gu,(a,u)=>t0.getObjectValue({action:o},u.split("."))||a)}
    Error messages of failing actors:${t}${n.join(t)}`}static getObjectValue(o,n){if(n.length===0)return o;if(o)return t0.getObjectValue(o[n[0]],n.slice(1))}};return wc.Mediator=i,wc}var Ht={},ZT;function J9(){if(ZT)return Ht;ZT=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.TestResultFailed=Ht.TestResultPassed=Ht.failTest=Ht.passTestVoidWithSideData=Ht.passTestWithSideData=Ht.passTestVoid=Ht.passTest=void 0;function i(u){return new e(u,void 0)}Ht.passTest=i;function r(){return new e(!0,void 0)}Ht.passTestVoid=r;function o(u,c){return new e(u,c)}Ht.passTestWithSideData=o;function n(u){return new e(!0,u)}Ht.passTestVoidWithSideData=n;function t(u){return new a(u)}Ht.failTest=t;class e{constructor(c,s){this.value=c,this.sideData=s}isPassed(){return!0}isFailed(){return!1}get(){return this.value}getOrThrow(){return this.value}getSideData(){return this.sideData}getFailMessage(){}map(c){return new e(c(this.value,this.sideData),this.sideData)}async mapAsync(c){return new e(await c(this.value,this.sideData),this.sideData)}}Ht.TestResultPassed=e;class a{constructor(c){this.failMessage=c}isPassed(){return!1}isFailed(){return!0}get(){}getOrThrow(){throw new Error(this.getFailMessage())}getSideData(){throw new Error(this.getFailMessage())}getFailMessage(){return this.failMessage}map(){return this}async mapAsync(){return this}}return Ht.TestResultFailed=a,Ht}var kT;function pe(){return kT||(kT=1,(function(i){var r=$n&&$n.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=$n&&$n.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(XN(),i),o(zN(),i),o(X9(),i),o(HN(),i),o(z9(),i),o(H9(),i),o($9(),i),o(J9(),i)})($n)),$n}var e2;function K9(){if(e2)return bc;e2=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.ActorInit=void 0;const i=pe();let r=class extends i.Actor{constructor(n){super(n)}};return bc.ActorInit=r,bc}var t2;function Y9(){return t2||(t2=1,(function(i){var r=Hn&&Hn.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Hn&&Hn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(K9(),i)})(Hn)),Hn}var r2;function $N(){if(r2)return gc;r2=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.ActorInitQueryBase=void 0;const i=Y9(),r=pe();let o=class extends i.ActorInit{async test(t){return(0,r.passTestVoid)()}async run(t){throw new Error("ActorInitSparql#run is not supported in the browser.")}};return gc.ActorInitQueryBase=o,gc}var Ec={},n2;function W9(){if(n2)return Ec;n2=1,Object.defineProperty(Ec,"__esModule",{value:!0}),Ec.ActorInitQuery=void 0;const i=$N();typeof process>"u"&&(globalThis.process=eq());class r extends i.ActorInitQueryBase{}return Ec.ActorInitQuery=r,Ec}var jc={},Kn={},rt={},i2;function JN(){if(i2)return rt;i2=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.KeysStatistics=rt.KeysRdfJoin=rt.KeysMergeBindingsContext=rt.KeysRdfUpdateQuads=rt.KeysQuerySourceIdentify=rt.KeysRdfParseHtmlScript=rt.KeysRdfParseJsonLd=rt.KeysQueryOperation=rt.KeysExpressionEvaluator=rt.KeysInitQuery=rt.KeysHttpProxy=rt.KeysHttpMemento=rt.KeysHttpWayback=rt.KeysHttp=rt.KeysCore=void 0;const i=pe();return rt.KeysCore={log:i.CONTEXT_KEY_LOGGER},rt.KeysHttp={includeCredentials:new i.ActionContextKey("@comunica/bus-http:include-credentials"),auth:new i.ActionContextKey("@comunica/bus-http:auth"),fetch:new i.ActionContextKey("@comunica/bus-http:fetch"),httpTimeout:new i.ActionContextKey("@comunica/bus-http:http-timeout"),httpBodyTimeout:new i.ActionContextKey("@comunica/bus-http:http-body-timeout"),httpRetryCount:new i.ActionContextKey("@comunica/bus-http:http-retry-count"),httpRetryDelayFallback:new i.ActionContextKey("@comunica/bus-http:http-retry-delay-fallback"),httpRetryDelayLimit:new i.ActionContextKey("@comunica/bus-http:http-retry-delay-limit"),httpRetryStatusCodes:new i.ActionContextKey("@comunica/bus-http:http-retry-status-codes")},rt.KeysHttpWayback={recoverBrokenLinks:new i.ActionContextKey("@comunica/bus-http:recover-broken-links")},rt.KeysHttpMemento={datetime:new i.ActionContextKey("@comunica/actor-http-memento:datetime")},rt.KeysHttpProxy={httpProxyHandler:new i.ActionContextKey("@comunica/actor-http-proxy:httpProxyHandler")},rt.KeysInitQuery={querySourcesUnidentified:new i.ActionContextKey("@comunica/actor-init-query:querySourcesUnidentified"),initialBindings:new i.ActionContextKey("@comunica/actor-init-query:initialBindings"),queryFormat:new i.ActionContextKey("@comunica/actor-init-query:queryFormat"),graphqlSingularizeVariables:new i.ActionContextKey("@comunica/actor-init-query:singularizeVariables"),lenient:new i.ActionContextKey("@comunica/actor-init-query:lenient"),queryString:new i.ActionContextKey("@comunica/actor-init-query:queryString"),query:new i.ActionContextKey("@comunica/actor-init-query:query"),baseIRI:new i.ActionContextKey("@comunica/actor-init-query:baseIRI"),fileBaseIRI:new i.ActionContextKey("@comunica/actor-init-query:fileBaseIRI"),functionArgumentsCache:new i.ActionContextKey("@comunica/actor-init-query:functionArgumentsCache"),queryTimestamp:new i.ActionContextKey("@comunica/actor-init-query:queryTimestamp"),queryTimestampHighResolution:new i.ActionContextKey("@comunica/actor-init-query:queryTimestampHighResolution"),extensionFunctionCreator:new i.ActionContextKey("@comunica/actor-init-query:extensionFunctionCreator"),extensionFunctions:new i.ActionContextKey("@comunica/actor-init-query:extensionFunctions"),extensionFunctionsAlwaysPushdown:new i.ActionContextKey("@comunica/actor-init-query:extensionFunctionsAlwaysPushdown"),cliArgsHandlers:new i.ActionContextKey("@comunica/actor-init-query:cliArgsHandlers"),explain:new i.ActionContextKey("@comunica/actor-init-query:explain"),physicalQueryPlanLogger:new i.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanLogger"),physicalQueryPlanNode:new i.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanNode"),jsonLdContext:new i.ActionContextKey("@context"),invalidateCache:new i.ActionContextKey("@comunica/actor-init-query:invalidateCache"),dataFactory:new i.ActionContextKey("@comunica/actor-init-query:dataFactory"),distinctConstruct:new i.ActionContextKey("@comunica/actor-init-query:distinctConstruct")},rt.KeysExpressionEvaluator={extensionFunctionCreator:new i.ActionContextKey("@comunica/utils-expression-evaluator:extensionFunctionCreator"),superTypeProvider:new i.ActionContextKey("@comunica/utils-expression-evaluator:superTypeProvider"),defaultTimeZone:new i.ActionContextKey("@comunica/utils-expression-evaluator:defaultTimeZone"),actionContext:new i.ActionContextKey("@comunica/utils-expression-evaluator:actionContext")},rt.KeysQueryOperation={operation:new i.ActionContextKey("@comunica/bus-query-operation:operation"),joinLeftMetadata:new i.ActionContextKey("@comunica/bus-query-operation:joinLeftMetadata"),joinRightMetadatas:new i.ActionContextKey("@comunica/bus-query-operation:joinRightMetadatas"),joinBindings:new i.ActionContextKey("@comunica/bus-query-operation:joinBindings"),readOnly:new i.ActionContextKey("@comunica/bus-query-operation:readOnly"),isPathArbitraryLengthDistinctKey:new i.ActionContextKey("@comunica/bus-query-operation:isPathArbitraryLengthDistinct"),limitIndicator:new i.ActionContextKey("@comunica/bus-query-operation:limitIndicator"),unionDefaultGraph:new i.ActionContextKey("@comunica/bus-query-operation:unionDefaultGraph"),querySources:new i.ActionContextKey("@comunica/bus-query-operation:querySources")},rt.KeysRdfParseJsonLd={documentLoader:new i.ActionContextKey("@comunica/actor-rdf-parse-jsonld:documentLoader"),strictValues:new i.ActionContextKey("@comunica/actor-rdf-parse-jsonld:strictValues"),parserOptions:new i.ActionContextKey("@comunica/actor-rdf-parse-jsonld:parserOptions")},rt.KeysRdfParseHtmlScript={processingHtmlScript:new i.ActionContextKey("@comunica/actor-rdf-parse-html-script:processingHtmlScript"),extractAllScripts:new i.ActionContextKey("extractAllScripts")},rt.KeysQuerySourceIdentify={sourceIds:new i.ActionContextKey("@comunica/bus-query-source-identify:sourceIds"),hypermediaSourcesAggregatedStores:new i.ActionContextKey("@comunica/bus-query-source-identify:hypermediaSourcesAggregatedStores"),traverse:new i.ActionContextKey("@comunica/bus-query-source-identify:traverse")},rt.KeysRdfUpdateQuads={destination:new i.ActionContextKey("@comunica/bus-rdf-update-quads:destination")},rt.KeysMergeBindingsContext={sourcesBinding:new i.ActionContextKey("@comunica/bus-merge-bindings-context:sourcesBinding")},rt.KeysRdfJoin={lastPhysicalJoin:new i.ActionContextKey("@comunica/bus-rdf-join:lastPhysicalJoin")},rt.KeysStatistics={discoveredLinks:new i.ActionContextKey("@comunica/statistic:discoveredLinks"),dereferencedLinks:new i.ActionContextKey("@comunica/statistic:dereferencedLinks"),intermediateResults:new i.ActionContextKey("@comunica/statistic:intermediateResults")},rt}var a2;function Fe(){return a2||(a2=1,(function(i){var r=Kn&&Kn.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Kn&&Kn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(JN(),i)})(Kn)),Kn}var o2;function Z9(){if(o2)return jc;o2=1,Object.defineProperty(jc,"__esModule",{value:!0}),jc.QueryEngineBase=void 0;const i=Fe(),r=pe();let o=class r0{constructor(t){this.actorInitQuery=t}async queryBindings(t,e){return this.queryOfType(t,e,"bindings")}async queryQuads(t,e){return this.queryOfType(t,e,"quads")}async queryBoolean(t,e){return this.queryOfType(t,e,"boolean")}async queryVoid(t,e){return this.queryOfType(t,e,"void")}async queryOfType(t,e,a){const u=await this.query(t,e);if(u.resultType===a)return await u.execute();throw new Error(`Query result type '${a}' was expected, while '${u.resultType}' was found.`)}async query(t,e){const a=await this.queryOrExplain(t,e);if("explain"in a)throw new Error("Tried to explain a query when in query-only mode");return a}async explain(t,e,a){return e.explain=a,await this.queryOrExplain(t,e)}async queryOrExplain(t,e){const a=r.ActionContext.ensureActionContext(e);a.get(i.KeysInitQuery.invalidateCache)&&await this.invalidateHttpCache();const{result:u}=await this.actorInitQuery.mediatorQueryProcess.mediate({query:t,context:a});return"explain"in u?u:r0.internalToFinalResult(u)}async getResultMediaTypes(t){return t=r.ActionContext.ensureActionContext(t),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeCombiner.mediate({context:t,mediaTypes:!0})).mediaTypes}async getResultMediaTypeFormats(t){return t=r.ActionContext.ensureActionContext(t),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeFormatCombiner.mediate({context:t,mediaTypeFormats:!0})).mediaTypeFormats}async resultToString(t,e,a){if(a=r.ActionContext.ensureActionContext(a),!e)switch(t.resultType){case"bindings":e="application/json";break;case"quads":e="application/trig";break;default:e="simple";break}const u={...await r0.finalToInternalResult(t),context:a};return(await this.actorInitQuery.mediatorQueryResultSerialize.mediate({context:a,handle:u,handleMediaType:e})).handle}invalidateHttpCache(t,e){return e=r.ActionContext.ensureActionContext(e),this.actorInitQuery.mediatorHttpInvalidate.mediate({url:t,context:e})}static internalToFinalResult(t){switch(t.type){case"bindings":return{resultType:"bindings",execute:async()=>t.bindingsStream,metadata:async()=>{const e=await t.metadata();return e.variables=e.variables.map(a=>a.variable),e},context:t.context};case"quads":return{resultType:"quads",execute:async()=>t.quadStream,metadata:async()=>await t.metadata(),context:t.context};case"boolean":return{resultType:"boolean",execute:async()=>t.execute(),context:t.context};case"void":return{resultType:"void",execute:async()=>t.execute(),context:t.context}}}static async finalToInternalResult(t){switch(t.resultType){case"bindings":return{type:"bindings",bindingsStream:await t.execute(),metadata:async()=>{const e=await t.metadata();return e.variables=e.variables.map(a=>({variable:a,canBeUndef:!1})),e}};case"quads":return{type:"quads",quadStream:await t.execute(),metadata:async()=>await t.metadata()};case"boolean":return{type:"boolean",execute:()=>t.execute()};case"void":return{type:"void",execute:()=>t.execute()}}}};return jc.QueryEngineBase=o,jc}var u2;function KN(){return u2||(u2=1,(function(i){var r=zn&&zn.__createBinding||(Object.create?(function(t,e,a,u){u===void 0&&(u=a);var c=Object.getOwnPropertyDescriptor(e,a);(!c||("get"in c?!e.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return e[a]}}),Object.defineProperty(t,u,c)}):(function(t,e,a,u){u===void 0&&(u=a),t[u]=e[a]})),o=zn&&zn.__exportStar||function(t,e){for(var a in t)a!=="default"&&!Object.prototype.hasOwnProperty.call(e,a)&&r(e,t,a)};Object.defineProperty(i,"__esModule",{value:!0}),i.QueryEngineBase=void 0,o($N(),i),o(W9(),i);var n=Z9();Object.defineProperty(i,"QueryEngineBase",{enumerable:!0,get:function(){return n.QueryEngineBase}})})(zn)),zn}var Yn={},Rc={},Wn={},Lb={},s2;function k9(){return s2||(s2=1,Object.defineProperty(Lb,"__esModule",{value:!0})),Lb}var xb={},c2;function ex(){return c2||(c2=1,Object.defineProperty(xb,"__esModule",{value:!0})),xb}var Bb={},l2;function tx(){return l2||(l2=1,Object.defineProperty(Bb,"__esModule",{value:!0})),Bb}var Cb={},d2;function rx(){return d2||(d2=1,Object.defineProperty(Cb,"__esModule",{value:!0})),Cb}var Qb={},f2;function nx(){return f2||(f2=1,Object.defineProperty(Qb,"__esModule",{value:!0})),Qb}var Ub={},p2;function ix(){return p2||(p2=1,Object.defineProperty(Ub,"__esModule",{value:!0})),Ub}var Vb={},h2;function ax(){return h2||(h2=1,Object.defineProperty(Vb,"__esModule",{value:!0})),Vb}var Gb={},y2;function ox(){return y2||(y2=1,Object.defineProperty(Gb,"__esModule",{value:!0})),Gb}var Xb={},_2;function ux(){return _2||(_2=1,Object.defineProperty(Xb,"__esModule",{value:!0})),Xb}var zb={},m2;function sx(){return m2||(m2=1,Object.defineProperty(zb,"__esModule",{value:!0})),zb}var Hb={},g2;function cx(){return g2||(g2=1,Object.defineProperty(Hb,"__esModule",{value:!0})),Hb}var $b={},b2;function lx(){return b2||(b2=1,Object.defineProperty($b,"__esModule",{value:!0})),$b}var Jb={},v2;function dx(){return v2||(v2=1,Object.defineProperty(Jb,"__esModule",{value:!0})),Jb}var Kb={},T2;function fx(){return T2||(T2=1,Object.defineProperty(Kb,"__esModule",{value:!0})),Kb}var Yb={},O2;function px(){return O2||(O2=1,Object.defineProperty(Yb,"__esModule",{value:!0})),Yb}var Wb={},S2;function hx(){return S2||(S2=1,Object.defineProperty(Wb,"__esModule",{value:!0})),Wb}var Zb={},F2;function yx(){return F2||(F2=1,Object.defineProperty(Zb,"__esModule",{value:!0})),Zb}var kb={},A2;function _x(){return A2||(A2=1,Object.defineProperty(kb,"__esModule",{value:!0})),kb}var e1={},w2;function mx(){return w2||(w2=1,Object.defineProperty(e1,"__esModule",{value:!0})),e1}var Dc={},E2;function gx(){if(E2)return Dc;E2=1,Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.Logger=void 0;let i=class YN{static getLevelOrdinal(o){return YN.LEVELS[o]}};return Dc.Logger=i,i.LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},Dc}var Pc={},j2;function bx(){if(j2)return Pc;j2=1,Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.ExpressionType=void 0;var i;return(function(r){r.Aggregate="aggregate",r.Existence="existence",r.Operator="operator",r.Term="term",r.Variable="variable"})(i||(Pc.ExpressionType=i={})),Pc}var R2;function jn(){return R2||(R2=1,(function(i){var r=Wn&&Wn.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Wn&&Wn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(k9(),i),o(ex(),i),o(tx(),i),o(rx(),i),o(nx(),i),o(ix(),i),o(ax(),i),o(ox(),i),o(ux(),i),o(sx(),i),o(cx(),i),o(lx(),i),o(dx(),i),o(fx(),i),o(px(),i),o(hx(),i),o(yx(),i),o(_x(),i),o(mx(),i),o(gx(),i),o(bx(),i)})(Wn)),Wn}var D2;function vx(){if(D2)return Rc;D2=1,Object.defineProperty(Rc,"__esModule",{value:!0}),Rc.LoggerVoid=void 0;const i=jn();let r=class extends i.Logger{debug(){}error(){}fatal(){}info(){}trace(){}warn(){}};return Rc.LoggerVoid=r,Rc}var P2;function Tx(){return P2||(P2=1,(function(i){var r=Yn&&Yn.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Yn&&Yn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(vx(),i)})(Yn)),Yn}var Zn={},kn={},M2;function WN(){if(M2)return kn;M2=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.MediatorFunctionFactory=kn.ActorFunctionFactory=void 0;const i=pe();let r=class extends i.Actor{constructor(t){super(t)}};kn.ActorFunctionFactory=r;class o extends i.Mediator{}return kn.MediatorFunctionFactory=o,kn}var Mc={},N2;function Ox(){if(N2)return Mc;N2=1,Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.ActorFunctionFactoryDedicated=void 0;const i=pe(),r=WN();let o=class extends r.ActorFunctionFactory{constructor(t){super(t)}async test(t){return this.functionNames.includes(t.functionName)&&(this.termFunction||!t.requireTermExpression)?(0,i.passTestVoid)():(0,i.failTest)(`Actor ${this.name} can not provide implementation for "${t.functionName}", only for ${this.termFunction?"":"non-termExpression "}${this.functionNames.join(" and ")}.`)}};return Mc.ActorFunctionFactoryDedicated=o,Mc}var Nc={},I2;function Sx(){if(I2)return Nc;I2=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.BusFunctionFactory=void 0;const i=pe();let r=class extends i.BusIndexed{constructor(n){super({...n,actorIdentifierFields:["functionNames"],actionIdentifierFields:["functionName"]})}};return Nc.BusFunctionFactory=r,Nc}var ei={},t1={},Ic={},r1={},$t={},ti={},qc={},q2;function ZN(){if(q2)return qc;q2=1,Object.defineProperty(qc,"__esModule",{value:!0}),qc.BlankNode=void 0;class i{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return qc.BlankNode=i,qc}var Lc={},xc={},L2;function kN(){if(L2)return xc;L2=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.DefaultGraph=void 0;class i{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return xc.DefaultGraph=i,i.INSTANCE=new i,xc}var Bc={},Cc={},x2;function Y0(){if(x2)return Cc;x2=1,Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.NamedNode=void 0;class i{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return Cc.NamedNode=i,Cc}var B2;function eI(){if(B2)return Bc;B2=1,Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.Literal=void 0;const i=Y0();class r{constructor(n,t){this.termType="Literal",this.value=n,typeof t=="string"?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return Bc.Literal=r,r.RDF_LANGUAGE_STRING=new i.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new i.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Bc}var Qc={},C2;function tI(){if(C2)return Qc;C2=1,Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.Quad=void 0;class i{constructor(o,n,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=n,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return Qc.Quad=i,Qc}var Uc={},Q2;function rI(){if(Q2)return Uc;Q2=1,Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.Variable=void 0;class i{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return Uc.Variable=i,Uc}var U2;function Fx(){if(U2)return Lc;U2=1,Object.defineProperty(Lc,"__esModule",{value:!0}),Lc.DataFactory=void 0;const i=ZN(),r=kN(),o=eI(),n=Y0(),t=tI(),e=rI();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new i.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return r.DefaultGraph.INSTANCE}quad(s,l,d,f){return new t.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Lc.DataFactory=u,Lc}var V2;function Ax(){return V2||(V2=1,(function(i){var r=ti&&ti.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ti&&ti.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(ZN(),i),o(Fx(),i),o(kN(),i),o(eI(),i),o(Y0(),i),o(tI(),i),o(rI(),i)})(ti)),ti}var G2;function wx(){if(G2)return $t;G2=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.stringQuadToQuad=$t.quadToStringQuad=$t.stringToTerm=$t.getLiteralLanguage=$t.getLiteralType=$t.getLiteralValue=$t.termToString=void 0;const i=Ax(),r=new i.DataFactory;function o(s){if(s)switch(s.termType){case"NamedNode":return s.value;case"BlankNode":return"_:"+s.value;case"Literal":const l=s;return'"'+l.value+'"'+(l.datatype&&l.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&l.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?"^^"+l.datatype.value:"")+(l.language?"@"+l.language:"");case"Quad":return`<<${o(s.subject)} ${o(s.predicate)} ${o(s.object)}${s.graph.termType==="DefaultGraph"?"":" "+o(s.graph)}>>`;case"Variable":return"?"+s.value;case"DefaultGraph":return s.value}}$t.termToString=o;function n(s){const l=/^"([^]*)"/.exec(s);if(!l)throw new Error(s+" is not a literal");return l[1]}$t.getLiteralValue=n;function t(s){const l=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(s);if(!l)throw new Error(s+" is not a literal");return l[1]||(l[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}$t.getLiteralType=t;function e(s){const l=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(s);if(!l)throw new Error(s+" is not a literal");return l[1]?l[1].toLowerCase():""}$t.getLiteralLanguage=e;function a(s,l){if(l=l||r,!s||!s.length)return l.defaultGraph();switch(s[0]){case"_":return l.blankNode(s.substr(2));case"?":if(!l.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return l.variable(s.substr(1));case'"':const d=e(s),f=l.namedNode(t(s));return l.literal(n(s),d||f);default:if(s[0]==="<"&&s.length>4&&s[1]==="<"&&s[s.length-1]===">"&&s[s.length-2]===">"){const h=s.slice(2,-2).trim();let p=[],y=0,b=0,v=!1;for(let F=0;F<h.length;F++){const T=h[F];if(T==="<"&&y++,T===">"){if(y===0)throw new Error("Found closing tag without opening tag in "+s);y--}if(T==='"'){let S=!1,j=F;for(;j-- >0&&h[j]==="\\";)S=!S;S||(v=!v)}if(T===" "&&!v&&y===0){for(p.push(h.slice(b,F));h[F+1]===" ";)F+=1;b=F+1}}if(y!==0)throw new Error("Found opening tag without closing tag in "+s);if(p.push(h.slice(b,h.length)),p.length!==3&&p.length!==4)throw new Error("Nested quad syntax error "+s);return p=p.map(F=>F.startsWith("<")&&!F.includes(" ")?F.slice(1,-1):F),l.quad(a(p[0]),a(p[1]),a(p[2]),p[3]?a(p[3]):void 0)}return l.namedNode(s)}}$t.stringToTerm=a;function u(s){return{subject:o(s.subject),predicate:o(s.predicate),object:o(s.object),graph:o(s.graph)}}$t.quadToStringQuad=u;function c(s,l){return l=l||r,l.quad(a(s.subject,l),a(s.predicate,l),a(s.object,l),a(s.graph,l))}return $t.stringQuadToQuad=c,$t}var X2;function hr(){return X2||(X2=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.termToString=i.stringToTerm=i.stringQuadToQuad=i.quadToStringQuad=i.getLiteralValue=i.getLiteralType=i.getLiteralLanguage=void 0;const r=wx();Object.defineProperty(i,"getLiteralLanguage",{enumerable:!0,get:function(){return r.getLiteralLanguage}}),Object.defineProperty(i,"getLiteralType",{enumerable:!0,get:function(){return r.getLiteralType}}),Object.defineProperty(i,"getLiteralValue",{enumerable:!0,get:function(){return r.getLiteralValue}}),Object.defineProperty(i,"quadToStringQuad",{enumerable:!0,get:function(){return r.quadToStringQuad}}),Object.defineProperty(i,"stringQuadToQuad",{enumerable:!0,get:function(){return r.stringQuadToQuad}}),Object.defineProperty(i,"stringToTerm",{enumerable:!0,get:function(){return r.stringToTerm}}),Object.defineProperty(i,"termToString",{enumerable:!0,get:function(){return r.termToString}})})(r1)),r1}var Nr={},Ar={},n1,z2;function Ex(){return z2||(z2=1,n1=function i(r,o){if(r===o)return!0;if(r&&o&&typeof r=="object"&&typeof o=="object"){if(r.constructor!==o.constructor)return!1;var n,t,e;if(Array.isArray(r)){if(n=r.length,n!=o.length)return!1;for(t=n;t--!==0;)if(!i(r[t],o[t]))return!1;return!0}if(r instanceof Map&&o instanceof Map){if(r.size!==o.size)return!1;for(t of r.entries())if(!o.has(t[0]))return!1;for(t of r.entries())if(!i(t[1],o.get(t[0])))return!1;return!0}if(r instanceof Set&&o instanceof Set){if(r.size!==o.size)return!1;for(t of r.entries())if(!o.has(t[0]))return!1;return!0}if(ArrayBuffer.isView(r)&&ArrayBuffer.isView(o)){if(n=r.length,n!=o.length)return!1;for(t=n;t--!==0;)if(r[t]!==o[t])return!1;return!0}if(r.constructor===RegExp)return r.source===o.source&&r.flags===o.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===o.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===o.toString();if(e=Object.keys(r),n=e.length,n!==Object.keys(o).length)return!1;for(t=n;t--!==0;)if(!Object.prototype.hasOwnProperty.call(o,e[t]))return!1;for(t=n;t--!==0;){var a=e[t];if(!i(r[a],o[a]))return!1}return!0}return r!==r&&o!==o}),n1}var i1={},Ir={},H2;function jx(){if(H2)return Ir;H2=1,Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.termToString=o,Ir.getLiteralValue=n,Ir.getLiteralType=t,Ir.getLiteralLanguage=e,Ir.getLiteralDirection=a,Ir.stringToTerm=u,Ir.quadToStringQuad=c,Ir.stringQuadToQuad=s;const i=fs(),r=new i.DataFactory;function o(l){if(l)switch(l.termType){case"NamedNode":return l.value;case"BlankNode":return"_:"+l.value;case"Literal":const d=l;return'"'+d.value+'"'+(d.datatype&&d.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+d.datatype.value:"")+(d.language?"@"+d.language:"")+(d.direction?"--"+d.direction:"");case"Quad":return`<<${o(l.subject)} ${o(l.predicate)} ${o(l.object)}${l.graph.termType==="DefaultGraph"?"":" "+o(l.graph)}>>`;case"Variable":return"?"+l.value;case"DefaultGraph":return l.value}}function n(l){const d=/^"([^]*)"/.exec(l);if(!d)throw new Error(l+" is not a literal");return d[1]}function t(l){const d=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(l);if(!d)throw new Error(l+" is not a literal");return d[1]||(d[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function e(l){const d=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(l);if(!d)throw new Error(l+" is not a literal");if(d[1]){let f=d[1].toLowerCase();const h=f.indexOf("--");return h>=0&&(f=f.slice(0,h)),f}return""}function a(l){const d=l.indexOf("--",l.lastIndexOf('"'));if(d>=0){const f=l.slice(d+2,l.length);if(f==="ltr"||f==="rtl")return f;throw new Error(l+" is not a literal with a valid direction")}return""}function u(l,d){if(d=d||r,!l||!l.length)return d.defaultGraph();switch(l[0]){case"_":return d.blankNode(l.substr(2));case"?":if(!d.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return d.variable(l.substr(1));case'"':const f=e(l),h=a(l),p=d.namedNode(t(l));return d.literal(n(l),f?{language:f,direction:h}:p);default:if(l[0]==="<"&&l.length>4&&l[1]==="<"&&l[l.length-1]===">"&&l[l.length-2]===">"){const y=l.slice(2,-2).trim();let b=[],v=0,F=0,T=!1;for(let S=0;S<y.length;S++){const j=y[S];if(j==="<"&&v++,j===">"){if(v===0)throw new Error("Found closing tag without opening tag in "+l);v--}if(j==='"'){let E=!1,U=S;for(;U-- >0&&y[U]==="\\";)E=!E;E||(T=!T)}if(j===" "&&!T&&v===0){for(b.push(y.slice(F,S));y[S+1]===" ";)S+=1;F=S+1}}if(v!==0)throw new Error("Found opening tag without closing tag in "+l);if(b.push(y.slice(F,y.length)),b.length!==3&&b.length!==4)throw new Error("Nested quad syntax error "+l);return b=b.map(S=>S.startsWith("<")&&!S.includes(" ")?S.slice(1,-1):S),d.quad(u(b[0]),u(b[1]),u(b[2]),b[3]?u(b[3]):void 0)}return d.namedNode(l)}}function c(l){return{subject:o(l.subject),predicate:o(l.predicate),object:o(l.object),graph:o(l.graph)}}function s(l,d){return d=d||r,d.quad(u(l.subject,d),u(l.predicate,d),u(l.object,d),u(l.graph,d))}return Ir}var $2;function Jg(){return $2||($2=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.termToString=i.stringToTerm=i.stringQuadToQuad=i.quadToStringQuad=i.getLiteralValue=i.getLiteralType=i.getLiteralDirection=i.getLiteralLanguage=void 0;const r=jx();Object.defineProperty(i,"getLiteralLanguage",{enumerable:!0,get:function(){return r.getLiteralLanguage}}),Object.defineProperty(i,"getLiteralDirection",{enumerable:!0,get:function(){return r.getLiteralDirection}}),Object.defineProperty(i,"getLiteralType",{enumerable:!0,get:function(){return r.getLiteralType}}),Object.defineProperty(i,"getLiteralValue",{enumerable:!0,get:function(){return r.getLiteralValue}}),Object.defineProperty(i,"quadToStringQuad",{enumerable:!0,get:function(){return r.quadToStringQuad}}),Object.defineProperty(i,"stringQuadToQuad",{enumerable:!0,get:function(){return r.stringQuadToQuad}}),Object.defineProperty(i,"stringToTerm",{enumerable:!0,get:function(){return r.stringToTerm}}),Object.defineProperty(i,"termToString",{enumerable:!0,get:function(){return r.termToString}})})(i1)),i1}var a1={},J2;function Am(){return J2||(J2=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.expressionTypes=i.types=void 0,(function(r){r.ALT="alt",r.ASK="ask",r.BGP="bgp",r.CONSTRUCT="construct",r.DESCRIBE="describe",r.DISTINCT="distinct",r.EXPRESSION="expression",r.EXTEND="extend",r.FILTER="filter",r.FROM="from",r.GRAPH="graph",r.GROUP="group",r.INV="inv",r.JOIN="join",r.LEFT_JOIN="leftjoin",r.LINK="link",r.MINUS="minus",r.NOP="nop",r.NPS="nps",r.ONE_OR_MORE_PATH="OneOrMorePath",r.ORDER_BY="orderby",r.PATH="path",r.PATTERN="pattern",r.PROJECT="project",r.REDUCED="reduced",r.SEQ="seq",r.SERVICE="service",r.SLICE="slice",r.UNION="union",r.VALUES="values",r.ZERO_OR_MORE_PATH="ZeroOrMorePath",r.ZERO_OR_ONE_PATH="ZeroOrOnePath",r.COMPOSITE_UPDATE="compositeupdate",r.DELETE_INSERT="deleteinsert",r.LOAD="load",r.CLEAR="clear",r.CREATE="create",r.DROP="drop",r.ADD="add",r.MOVE="move",r.COPY="copy"})(i.types||(i.types={})),(function(r){r.AGGREGATE="aggregate",r.EXISTENCE="existence",r.NAMED="named",r.OPERATOR="operator",r.TERM="term",r.WILDCARD="wildcard"})(i.expressionTypes||(i.expressionTypes={}))})(a1)),a1}var Hr={},o1={},K2;function nI(){if(K2)return o1;K2=1;let i=class{constructor(){return r||this}equals(n){return n&&this.termType===n.termType}};Object.defineProperty(i.prototype,"value",{enumerable:!0,value:"*"}),Object.defineProperty(i.prototype,"termType",{enumerable:!0,value:"Wildcard"});var r=new i;return o1.Wildcard=i,o1}var u1,Y2;function Rx(){if(Y2)return u1;Y2=1;var i=(function(){var r=function(de,ae,ye,be){for(ye=ye||{},be=de.length;be--;ye[de[be]]=ae);return ye},o=[6,12,13,15,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],n=[2,247],t=[100,110,113,115,116,123,126,131,329,330,331,332,333],e=[2,409],a=[1,18],u=[1,27],c=[13,16,45,197,224,229,308],s=[28,29,53],l=[28,53],d=[1,42],f=[1,45],h=[1,41],p=[1,44],y=[123,126],b=[1,67],v=[39,45,87],F=[13,16,45,197,224,308],T=[1,87],S=[2,281],j=[1,86],E=[13,16,45,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],U=[6,28,29,53,63,70,73,81,83,85],K=[6,13,16,28,29,53,63,70,73,81,83,85,87,308],_=[6,13,16,28,29,45,53,63,70,73,81,82,83,85,87,89,197,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314],O=[6,13,16,28,29,31,39,45,47,48,53,63,70,73,81,82,83,85,87,89,109,112,121,123,126,128,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,337,338,340,341,342,343,344,345,346],P=[13,16,308],R=[112,132,327,334],I=[13,16,112,132,308],C=[1,111],Y=[1,117],H=[112,132,327,328,334],Z=[13,16,112,132,308,328],le=[28,29,45,53,87],ce=[1,138],ee=[1,151],Ae=[1,128],Ee=[1,127],ue=[1,129],oe=[1,140],Re=[1,141],Se=[1,142],Pe=[1,143],we=[1,144],Ie=[1,145],N=[1,147],m=[1,148],A=[2,457],g=[1,158],w=[1,159],D=[1,160],B=[1,152],q=[1,153],Q=[1,156],$=[1,171],X=[1,172],te=[1,173],me=[1,174],_e=[1,175],ge=[1,176],G=[1,167],z=[1,168],J=[1,169],ne=[1,170],se=[1,157],fe=[1,166],Oe=[1,161],Te=[1,162],De=[1,163],Le=[1,164],je=[1,165],Je=[6,13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],Xe=[1,195],x=[6,31,73,81,83,85],ie=[2,285],he=[1,199],ve=[1,201],Ne=[6,31,70,73,81,83,85],Ge=[2,283],qe=[1,207],et=[1,218],st=[1,223],mt=[1,219],wt=[1,225],St=[1,226],qt=[1,224],ht=[6,63,70,73,81,83,85],er=[1,236],bs=[2,334],_v=[1,243],mv=[1,241],Vt=[6,193],Rm=[2,349],gv=[2,339],fn=[28,128],bv=[47,48,193,272],Dm=[47,48,193,242,272],vs=[47,48,193,242,246,272],Ts=[47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,341,342,343,344,345,346],Ct=[39,47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,338,341,342,343,344,345,346],vv=[1,271],Tv=[1,270],Pt=[6,13,16,29,31,39,45,47,48,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],Ov=[1,281],Sv=[1,280],tr=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],ic=[45,89],Pm=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],Mm=[13,16,31,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Nm=[31,89],Im=[48,87],Mn=[6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338],Ur=[6,13,16,39,45,48,82,87,89,231,263,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338,340],Fv=[1,313],Os=[6,85],ib=[6,31,81,83,85],Av=[2,361],tn=[2,353],Nn=[1,343],ac=[31,112,335],rn=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],ab=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335],wv=[6,109,193],In=[31,112],Mt=[13,16,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],ob=[1,390],ub=[1,391],pn=[13,16,87,197,308,314],Ev=[13,16,39,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],qm=[1,417],Lm=[1,418],jv=[13,16,48,197,229,308],hn=[6,31,85],Rv=[6,13,16,31,45,73,81,83,85,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],sb=[6,13,16,29,31,45,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,231,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,346,347,348,349,350,351],qn=[29,31,85,112,159,160,161,163,164],xm=[1,443],Bm=[1,444],Dv=[1,449],Ln=[31,112,193,232,318,335],Cm=[13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Pv=[13,16,31,45,48,82,87,89,112,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],cb=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],oc=[13,16,31,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],uc=[31,45],Mv=[1,507],Nv=[1,508],Iv=[6,13,16,29,31,39,45,47,48,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,336,338,341,342,343,344,345,346,347,348,349,350,351],Qm=[29,31,85,112,159,160,161,163,164,335],xn=[6,13,16,31,45,70,73,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],qv=[13,16,31,45,48,82,87,89,112,193,197,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Lv=[2,352],lb=[13,16,197,308,314],xv=[1,565],Ss=[6,13,16,31,45,76,78,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],Bv=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],nn=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],Cv=[13,16,87,308],an=[2,364],Fs=[29,31,85,112,159,160,161,163,164,193,232,318,335],Um=[31,112,193,232,272,318,335],on=[2,359],Qv=[13,16,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Vm=[29,31,85,112,159,160,161,163,164,193,232,272,318,335],Uv=[13,16,31,45,82,87,89,112,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Vv=[2,347],db={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Query:7,Qry:8,Query_option0:9,Prologue_repetition0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectClauseWildcard:17,Qry_repetition0:18,WhereClause:19,SolutionModifierNoGroup:20,SelectClauseVars:21,Qry_repetition1:22,SolutionModifier:23,CONSTRUCT:24,ConstructTemplate:25,Qry_repetition2:26,Qry_repetition3:27,WHERE:28,"{":29,Qry_option0:30,"}":31,DESCRIBE:32,Qry_group0:33,Qry_repetition4:34,Qry_option1:35,ASK:36,Qry_repetition5:37,SelectClauseBase:38,"*":39,SelectClauseVars_repetition_plus0:40,SELECT:41,SelectClauseBase_option0:42,SelectClauseItem:43,Var:44,"(":45,Expression:46,AS:47,")":48,SubSelect:49,SubSelect_option0:50,SubSelect_option1:51,DatasetClause:52,FROM:53,DatasetClause_option0:54,iri:55,WhereClause_option0:56,GroupGraphPattern:57,SolutionModifier_option0:58,SolutionModifierNoGroup_option0:59,SolutionModifierNoGroup_option1:60,SolutionModifierNoGroup_option2:61,GroupClause:62,GROUP:63,BY:64,GroupClause_repetition_plus0:65,GroupCondition:66,BuiltInCall:67,FunctionCall:68,HavingClause:69,HAVING:70,HavingClause_repetition_plus0:71,OrderClause:72,ORDER:73,OrderClause_repetition_plus0:74,OrderCondition:75,ASC:76,BrackettedExpression:77,DESC:78,Constraint:79,LimitOffsetClauses:80,LIMIT:81,INTEGER:82,OFFSET:83,ValuesClause:84,VALUES:85,InlineData:86,VAR:87,InlineData_repetition0:88,NIL:89,InlineData_repetition1:90,InlineData_repetition_plus2:91,InlineData_repetition3:92,DataBlock:93,DataBlockValueList:94,DataBlockValueList_repetition_plus0:95,Update:96,Update_repetition0:97,Update1:98,Update_option0:99,LOAD:100,Update1_option0:101,Update1_option1:102,Update1_group0:103,Update1_option2:104,GraphRefAll:105,Update1_group1:106,Update1_option3:107,GraphOrDefault:108,TO:109,CREATE:110,Update1_option4:111,GRAPH:112,INSERTDATA:113,QuadPattern:114,DELETEDATA:115,DELETEWHERE:116,Update1_option5:117,InsertDeleteClause:118,Update1_repetition0:119,IntoGraphClause:120,INTO:121,GraphRef:122,DELETE:123,InsertDeleteClause_option0:124,InsertClause:125,INSERT:126,UsingClause:127,USING:128,UsingClause_option0:129,WithClause:130,WITH:131,DEFAULT:132,GraphOrDefault_option0:133,GraphRefAll_group0:134,Quads:135,Quads_option0:136,Quads_repetition0:137,QuadsNotTriples:138,VarOrIri:139,QuadsNotTriples_option0:140,QuadsNotTriples_option1:141,QuadsNotTriples_option2:142,TriplesTemplate:143,TriplesTemplate_repetition0:144,TriplesSameSubject:145,TriplesTemplate_option0:146,GroupGraphPatternSub:147,GroupGraphPatternSub_option0:148,GroupGraphPatternSub_repetition0:149,GroupGraphPatternSubTail:150,GraphPatternNotTriples:151,GroupGraphPatternSubTail_option0:152,GroupGraphPatternSubTail_option1:153,TriplesBlock:154,TriplesBlock_repetition0:155,TriplesSameSubjectPath:156,TriplesBlock_option0:157,GroupOrUnionGraphPattern:158,OPTIONAL:159,MINUS:160,SERVICE:161,GraphPatternNotTriples_option0:162,FILTER:163,BIND:164,InlineDataOneVar:165,InlineDataFull:166,InlineDataOneVar_repetition0:167,InlineDataFull_repetition0:168,InlineDataFull_repetition_plus1:169,InlineDataFull_repetition2:170,DataBlockValue:171,Literal:172,QuotedTriple:173,UNDEF:174,GroupOrUnionGraphPattern_repetition0:175,ArgList:176,ArgList_option0:177,ArgList_repetition0:178,ExpressionList:179,ExpressionList_repetition0:180,ConstructTemplate_option0:181,ConstructTriples:182,ConstructTriples_repetition0:183,ConstructTriples_option0:184,VarOrTermOrQuotedTP:185,PropertyListNotEmpty:186,TriplesNode:187,PropertyList:188,PropertyList_option0:189,VerbObjectList:190,PropertyListNotEmpty_repetition0:191,SemiOptionalVerbObjectList:192,";":193,SemiOptionalVerbObjectList_option0:194,Verb:195,ObjectList:196,a:197,ObjectList_repetition0:198,Object:199,GraphNode:200,Object_option0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,O:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmptyTail:207,O_group0:208,ObjectListPath:209,ObjectListPath_repetition0:210,ObjectPath:211,GraphNodePath:212,ObjectPath_option0:213,Path:214,Path_repetition0:215,PathSequence:216,PathSequence_repetition0:217,PathEltOrInverse:218,PathElt:219,PathPrimary:220,PathElt_option0:221,PathEltOrInverse_option0:222,IriOrA:223,"!":224,PathNegatedPropertySet:225,PathOneInPropertySet:226,PathNegatedPropertySet_repetition0:227,PathNegatedPropertySet_option0:228,"^":229,TriplesNode_repetition_plus0:230,"[":231,"]":232,TriplesNodePath_repetition_plus0:233,VarOrTermOrQuotedTPExpr:234,VarOrTerm:235,GraphTerm:236,BlankNode:237,ConditionalOrExpression:238,ConditionalAndExpression:239,ConditionalOrExpression_repetition0:240,ConditionalOrExpressionTail:241,"||":242,RelationalExpression:243,ConditionalAndExpression_repetition0:244,ConditionalAndExpressionTail:245,"&&":246,NumericExpression:247,RelationalExpression_group0:248,RelationalExpression_option0:249,IN:250,MultiplicativeExpression:251,NumericExpression_repetition0:252,AdditiveExpressionTail:253,AdditiveExpressionTail_group0:254,NumericLiteralPositive:255,AdditiveExpressionTail_repetition0:256,NumericLiteralNegative:257,AdditiveExpressionTail_repetition1:258,UnaryExpression:259,MultiplicativeExpression_repetition0:260,MultiplicativeExpressionTail:261,MultiplicativeExpressionTail_group0:262,"+":263,PrimaryExpression:264,"-":265,ExprQuotedTP:266,Aggregate:267,FUNC_ARITY0:268,FUNC_ARITY1:269,FUNC_ARITY1_SPARQL_STAR:270,FUNC_ARITY2:271,",":272,FUNC_ARITY3:273,FUNC_ARITY3_SPARQL_STAR:274,BuiltInCall_group0:275,BOUND:276,BNODE:277,BuiltInCall_option0:278,EXISTS:279,COUNT:280,Aggregate_option0:281,Aggregate_group0:282,FUNC_AGGREGATE:283,Aggregate_option1:284,GROUP_CONCAT:285,Aggregate_option2:286,Aggregate_option3:287,GroupConcatSeparator:288,SEPARATOR:289,"=":290,String:291,LANGTAG:292,"^^":293,DECIMAL:294,DOUBLE:295,BOOLEAN:296,INTEGER_POSITIVE:297,DECIMAL_POSITIVE:298,DOUBLE_POSITIVE:299,INTEGER_NEGATIVE:300,DECIMAL_NEGATIVE:301,DOUBLE_NEGATIVE:302,STRING_LITERAL1:303,STRING_LITERAL2:304,STRING_LITERAL_LONG1:305,STRING_LITERAL_LONG2:306,PrefixedName:307,PNAME_LN:308,BLANK_NODE_LABEL:309,ANON:310,QuotedTP:311,"<<":312,qtSubjectOrObject:313,">>":314,DataValueTerm:315,AnnotationPattern:316,"{|":317,"|}":318,AnnotationPatternPath:319,ExprVarOrTerm:320,QueryOrUpdate_group0_option0:321,Prologue_repetition0_group0:322,Qry_group0_repetition_plus0:323,SelectClauseBase_option0_group0:324,DISTINCT:325,REDUCED:326,NAMED:327,SILENT:328,CLEAR:329,DROP:330,ADD:331,MOVE:332,COPY:333,ALL:334,".":335,UNION:336,"|":337,"/":338,PathElt_option0_group0:339,"?":340,"!=":341,"<":342,">":343,"<=":344,">=":345,NOT:346,CONCAT:347,COALESCE:348,SUBSTR:349,REGEX:350,REPLACE:351,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",24:"CONSTRUCT",28:"WHERE",29:"{",31:"}",32:"DESCRIBE",36:"ASK",39:"*",41:"SELECT",45:"(",47:"AS",48:")",53:"FROM",63:"GROUP",64:"BY",70:"HAVING",73:"ORDER",76:"ASC",78:"DESC",81:"LIMIT",82:"INTEGER",83:"OFFSET",85:"VALUES",87:"VAR",89:"NIL",100:"LOAD",109:"TO",110:"CREATE",112:"GRAPH",113:"INSERTDATA",115:"DELETEDATA",116:"DELETEWHERE",121:"INTO",123:"DELETE",126:"INSERT",128:"USING",131:"WITH",132:"DEFAULT",159:"OPTIONAL",160:"MINUS",161:"SERVICE",163:"FILTER",164:"BIND",174:"UNDEF",193:";",197:"a",224:"!",229:"^",231:"[",232:"]",242:"||",246:"&&",250:"IN",263:"+",265:"-",268:"FUNC_ARITY0",269:"FUNC_ARITY1",270:"FUNC_ARITY1_SPARQL_STAR",271:"FUNC_ARITY2",272:",",273:"FUNC_ARITY3",274:"FUNC_ARITY3_SPARQL_STAR",276:"BOUND",277:"BNODE",279:"EXISTS",280:"COUNT",283:"FUNC_AGGREGATE",285:"GROUP_CONCAT",289:"SEPARATOR",290:"=",292:"LANGTAG",293:"^^",294:"DECIMAL",295:"DOUBLE",296:"BOOLEAN",297:"INTEGER_POSITIVE",298:"DECIMAL_POSITIVE",299:"DOUBLE_POSITIVE",300:"INTEGER_NEGATIVE",301:"DECIMAL_NEGATIVE",302:"DOUBLE_NEGATIVE",303:"STRING_LITERAL1",304:"STRING_LITERAL2",305:"STRING_LITERAL_LONG1",306:"STRING_LITERAL_LONG2",308:"PNAME_LN",309:"BLANK_NODE_LABEL",310:"ANON",312:"<<",314:">>",317:"{|",318:"|}",325:"DISTINCT",326:"REDUCED",327:"NAMED",328:"SILENT",329:"CLEAR",330:"DROP",331:"ADD",332:"MOVE",333:"COPY",334:"ALL",335:".",336:"UNION",337:"|",338:"/",340:"?",341:"!=",342:"<",343:">",344:"<=",345:">=",346:"NOT",347:"CONCAT",348:"COALESCE",349:"SUBSTR",350:"REGEX",351:"REPLACE"},productions_:[0,[3,3],[7,2],[4,1],[11,2],[14,3],[8,4],[8,4],[8,5],[8,7],[8,5],[8,4],[17,2],[21,2],[38,2],[43,1],[43,5],[49,4],[49,4],[52,3],[19,2],[23,2],[20,3],[62,3],[66,1],[66,1],[66,3],[66,5],[66,1],[69,2],[72,3],[75,2],[75,2],[75,1],[75,1],[80,2],[80,2],[80,4],[80,4],[84,2],[86,4],[86,4],[86,6],[86,2],[94,3],[96,3],[98,4],[98,3],[98,5],[98,4],[98,2],[98,2],[98,2],[98,5],[120,2],[118,3],[118,1],[125,2],[127,3],[130,2],[108,1],[108,2],[122,2],[105,1],[105,1],[114,3],[135,2],[138,7],[143,3],[57,3],[57,3],[147,2],[150,3],[154,3],[151,1],[151,2],[151,2],[151,3],[151,4],[151,2],[151,6],[151,1],[93,1],[93,1],[165,4],[166,4],[166,6],[171,1],[171,1],[171,1],[171,1],[158,2],[79,1],[79,1],[79,1],[68,2],[176,1],[176,5],[179,1],[179,4],[25,3],[182,3],[145,2],[145,2],[188,1],[186,2],[192,2],[190,2],[195,1],[195,1],[196,2],[199,2],[156,2],[156,2],[202,2],[207,1],[207,2],[205,2],[209,2],[211,2],[214,2],[216,2],[219,2],[218,2],[220,1],[220,2],[220,3],[225,1],[225,1],[225,4],[226,1],[226,2],[187,3],[187,3],[203,3],[203,3],[200,1],[200,1],[212,1],[212,1],[234,1],[235,1],[235,1],[139,1],[139,1],[44,1],[236,1],[236,1],[236,1],[236,1],[46,1],[238,2],[241,2],[239,2],[245,2],[243,1],[243,3],[243,4],[247,2],[253,2],[253,2],[253,2],[251,2],[261,2],[259,2],[259,2],[259,2],[259,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[77,3],[67,1],[67,2],[67,4],[67,4],[67,6],[67,8],[67,8],[67,2],[67,4],[67,2],[67,4],[67,3],[267,5],[267,5],[267,6],[288,4],[172,1],[172,2],[172,3],[172,1],[172,1],[172,1],[172,1],[172,1],[172,1],[255,1],[255,1],[255,1],[257,1],[257,1],[257,1],[291,1],[291,1],[291,1],[291,1],[55,1],[55,1],[307,1],[307,1],[237,1],[237,1],[311,5],[173,5],[313,1],[313,1],[313,1],[313,1],[313,1],[315,1],[315,1],[315,1],[185,1],[185,1],[185,1],[316,3],[319,3],[266,5],[320,1],[320,1],[320,1],[223,1],[223,1],[321,0],[321,1],[5,1],[5,1],[5,1],[9,0],[9,1],[322,1],[322,1],[10,0],[10,2],[18,0],[18,2],[22,0],[22,2],[26,0],[26,2],[27,0],[27,2],[30,0],[30,1],[323,1],[323,2],[33,1],[33,1],[34,0],[34,2],[35,0],[35,1],[37,0],[37,2],[40,1],[40,2],[324,1],[324,1],[42,0],[42,1],[50,0],[50,1],[51,0],[51,1],[54,0],[54,1],[56,0],[56,1],[58,0],[58,1],[59,0],[59,1],[60,0],[60,1],[61,0],[61,1],[65,1],[65,2],[71,1],[71,2],[74,1],[74,2],[88,0],[88,2],[90,0],[90,2],[91,1],[91,2],[92,0],[92,2],[95,1],[95,2],[97,0],[97,4],[99,0],[99,2],[101,0],[101,1],[102,0],[102,1],[103,1],[103,1],[104,0],[104,1],[106,1],[106,1],[106,1],[107,0],[107,1],[111,0],[111,1],[117,0],[117,1],[119,0],[119,2],[124,0],[124,1],[129,0],[129,1],[133,0],[133,1],[134,1],[134,1],[134,1],[136,0],[136,1],[137,0],[137,2],[140,0],[140,1],[141,0],[141,1],[142,0],[142,1],[144,0],[144,3],[146,0],[146,1],[148,0],[148,1],[149,0],[149,2],[152,0],[152,1],[153,0],[153,1],[155,0],[155,3],[157,0],[157,1],[162,0],[162,1],[167,0],[167,2],[168,0],[168,2],[169,1],[169,2],[170,0],[170,2],[175,0],[175,3],[177,0],[177,1],[178,0],[178,3],[180,0],[180,3],[181,0],[181,1],[183,0],[183,3],[184,0],[184,1],[189,0],[189,1],[191,0],[191,2],[194,0],[194,1],[198,0],[198,3],[201,0],[201,1],[204,0],[204,1],[206,0],[206,2],[208,1],[208,1],[210,0],[210,3],[213,0],[213,1],[215,0],[215,3],[217,0],[217,3],[339,1],[339,1],[339,1],[221,0],[221,1],[222,0],[222,1],[227,0],[227,3],[228,0],[228,1],[230,1],[230,2],[233,1],[233,2],[240,0],[240,2],[244,0],[244,2],[248,1],[248,1],[248,1],[248,1],[248,1],[248,1],[249,0],[249,1],[252,0],[252,2],[254,1],[254,1],[256,0],[256,2],[258,0],[258,2],[260,0],[260,2],[262,1],[262,1],[275,1],[275,1],[275,1],[275,1],[275,1],[278,0],[278,1],[281,0],[281,1],[282,1],[282,1],[284,0],[284,1],[286,0],[286,1],[287,0],[287,1]],performAction:function(ae,ye,be,xe,Ce,M,_r){var L=M.length-1;switch(Ce){case 1:if(M[L-1]=M[L-1]||{},Ye.base&&(M[L-1].base=Ye.base),Ye.base="",M[L-1].prefixes=Ye.prefixes,Ye.prefixes=null,Ye.pathOnly){if(M[L-1].type==="path"||"termType"in M[L-1])return M[L-1];throw new Error("Received full SPARQL query in path only mode")}else if(M[L-1].type==="path"||"termType"in M[L-1])throw new Error("Received only path in full SPARQL mode");if(M[L-1].type==="update"){const Ke={};for(const at of M[L-1].updates)if(at.updateType==="insert"){const ze={};for(const Xt of at.insert)if(Xt.type==="bgp"||Xt.type==="graph")for(const zt of Xt.triples)zt.subject.termType==="BlankNode"&&(ze[zt.subject.value]=!0),zt.predicate.termType==="BlankNode"&&(ze[zt.predicate.value]=!0),zt.object.termType==="BlankNode"&&(ze[zt.object.value]=!0);for(const Xt of Object.keys(ze)){if(Ke[Xt])throw new Error("Detected reuse blank node across different INSERT DATA clauses");Ke[Xt]=!0}}}return M[L-1];case 2:this.$={...M[L-1],...M[L],type:"query"};break;case 4:Ye.base=sc(M[L]);break;case 5:Ye.prefixes||(Ye.prefixes={}),M[L-1]=M[L-1].substr(0,M[L-1].length-1),M[L]=sc(M[L]),Ye.prefixes[M[L-1]]=M[L];break;case 6:this.$={...M[L-3],...Qn(M[L-2]),...M[L-1],...M[L]};break;case 7:if(!Ye.skipValidation&&(bb(M[L-3].variables.map(at=>gb(at.expression))).some(at=>at.aggregation==="count"&&!(at.expression instanceof Gm))||M[L].group)){for(const at of M[L-3].variables)if(at.termType==="Variable"){if(!M[L].group||!M[L].group.map(ze=>Rs(ze)).includes(Rs(at)))throw Error("Projection of ungrouped variable (?"+Rs(at)+")")}else if(gb(at.expression).length===0){const ze=K5(at.expression);for(const Xt of ze)if(!M[L].group||!M[L].group.map||!M[L].group.map(zt=>Rs(zt)).includes(Rs(Xt)))throw Error("Use of ungrouped variable in projection of operation (?"+Rs(Xt)+")")}}const Ds=M[L-1].where.filter(Ke=>Ke.type==="query");if(Ds.length>0){const Ke=M[L-3].variables.filter(ze=>ze.variable&&ze.variable.value).map(ze=>ze.variable.value),at=bb(Ds.map(ze=>ze.variables)).map(ze=>ze.value||ze.variable.value);for(const ze of Ke)if(at.indexOf(ze)>=0)throw Error("Target id of 'AS' (?"+ze+") already used in subquery")}this.$=Et(M[L-3],Qn(M[L-2]),M[L-1],M[L]);break;case 8:this.$=Et({queryType:"CONSTRUCT",template:M[L-3]},Qn(M[L-2]),M[L-1],M[L]);break;case 9:this.$=Et({queryType:"CONSTRUCT",template:M[L-2]=M[L-2]?M[L-2].triples:[]},Qn(M[L-5]),{where:[{type:"bgp",triples:As([],M[L-2])}]},M[L]);break;case 10:this.$=Et({queryType:"DESCRIBE",variables:M[L-3]==="*"?[new Gm]:M[L-3]},Qn(M[L-2]),M[L-1],M[L]);break;case 11:this.$=Et({queryType:"ASK"},Qn(M[L-2]),M[L-1],M[L]);break;case 12:this.$=Et(M[L-1],{variables:[new Gm]});break;case 13:const Sb=M[L].map(Ke=>Ke.value||Ke.variable.value),Km=Y5(Sb);if(Km.length>0)throw Error("Two or more of the resulting columns have the same name (?"+Km[0]+")");this.$=Et(M[L-1],{variables:M[L]});break;case 14:this.$=Et({queryType:"SELECT"},M[L]&&(M[L-1]=rr(M[L]),M[L]={},M[L][M[L-1]]=!0,M[L]));break;case 16:case 27:this.$=ws(M[L-3],{variable:M[L-1]});break;case 17:case 18:this.$=Et(M[L-3],M[L-2],M[L-1],M[L],{type:"query"});break;case 19:case 58:this.$={iri:M[L],named:!!M[L-1]};break;case 20:this.$={where:M[L].patterns};break;case 21:this.$=Et(M[L-1],M[L]);break;case 22:this.$=Et(M[L-2],M[L-1],M[L]);break;case 23:this.$={group:M[L]};break;case 24:case 25:case 28:case 31:case 33:case 34:this.$=ws(M[L]);break;case 26:this.$=ws(M[L-1]);break;case 29:this.$={having:M[L]};break;case 30:this.$={order:M[L]};break;case 32:this.$=ws(M[L],{descending:!0});break;case 35:this.$={limit:js(M[L])};break;case 36:this.$={offset:js(M[L])};break;case 37:this.$={limit:js(M[L-2]),offset:js(M[L])};break;case 38:this.$={limit:js(M[L]),offset:js(M[L-2])};break;case 39:case 43:this.$={type:"values",values:M[L]};break;case 40:case 84:this.$=M[L-1].map(Ke=>({[M[L-3]]:Ke}));break;case 41:case 85:this.$=M[L-1].map(()=>({}));break;case 42:case 86:var yn=M[L-4].length;M[L-4]=M[L-4].map(fb),this.$=M[L-1].map(function(Ke){if(Ke.length!==yn)throw Error("Inconsistent VALUES length");for(var at={},ze=0;ze<yn;ze++)at["?"+M[L-4][ze].value]=Ke[ze];return at});break;case 44:case 65:case 100:case 126:case 175:this.$=M[L-1];break;case 45:this.$={type:"update",updates:Cn(M[L-2],M[L-1])};break;case 46:this.$=Et({type:"load",silent:!!M[L-2],source:M[L-1]},M[L]&&{destination:M[L]});break;case 47:this.$={type:rr(M[L-2]),silent:!!M[L-1],graph:M[L]};break;case 48:this.$={type:rr(M[L-4]),silent:!!M[L-3],source:M[L-2],destination:M[L]};break;case 49:this.$={type:"create",silent:!!M[L-2],graph:{type:"graph",name:M[L]}};break;case 50:this.$={updateType:"insert",insert:kv(M[L])};break;case 51:this.$={updateType:"delete",delete:Ob(kv(M[L]))};break;case 52:this.$={updateType:"deletewhere",delete:Ob(M[L])};break;case 53:this.$={updateType:"insertdelete",...M[L-4],...M[L-3],...Qn(M[L-2],"using"),where:M[L].patterns};break;case 54:case 57:case 62:case 167:case 191:case 236:this.$=M[L];break;case 55:this.$={delete:Ob(M[L-1]),insert:M[L]||[]};break;case 56:this.$={delete:[],insert:M[L]};break;case 59:this.$={graph:M[L]};break;case 60:this.$={type:"graph",default:!0};break;case 61:case 63:this.$={type:"graph",name:M[L]};break;case 64:this.$={[rr(M[L])]:!0};break;case 66:this.$=M[L-1]?Vr(M[L],[M[L-1]]):Vr(M[L]);break;case 67:var Hm=Et(M[L-3]||{triples:[]},{type:"graph",name:M[L-5]});this.$=M[L]?[Hm,M[L]]:[Hm];break;case 68:case 73:this.$={type:"bgp",triples:Vr(M[L-2],[M[L-1]])};break;case 69:this.$={type:"group",patterns:[M[L-1]]};break;case 70:for(const Ke of M[L-1].filter(at=>at.type==="bind")){const at=M[L-1].indexOf(Ke),ze=new Set;for(const Xt of M[L-1].slice(0,at))(Xt.type==="group"||Xt.type==="bgp")&&Wv(Xt).forEach(zt=>ze.add(zt));if(ze.has(Ke.variable.value))throw Error("Variable used to bind is already bound (?"+Ke.variable.value+")")}this.$={type:"group",patterns:M[L-1]};break;case 71:this.$=M[L-1]?Vr([M[L-1]],M[L]):Vr(M[L]);break;case 72:this.$=M[L]?[M[L-2],M[L]]:M[L-2];break;case 75:this.$=Et(M[L],{type:"optional"});break;case 76:this.$=Et(M[L],{type:"minus"});break;case 77:this.$=Et(M[L],{type:"graph",name:M[L-1]});break;case 78:this.$=Et(M[L],{type:"service",name:M[L-1],silent:!!M[L-2]});break;case 79:this.$={type:"filter",expression:M[L]};break;case 80:this.$={type:"bind",variable:M[L-1],expression:M[L-3]};break;case 89:this.$=lc(M[L]);break;case 90:this.$=void 0;break;case 91:this.$=M[L-1].length?{type:"union",patterns:Vr(M[L-1].map(hb),[hb(M[L])])}:M[L];break;case 95:this.$={...M[L],function:M[L-1]};break;case 96:this.$={type:"functionCall",args:[]};break;case 97:this.$={type:"functionCall",args:Cn(M[L-2],M[L-1]),distinct:!!M[L-3]};break;case 98:case 115:case 128:case 247:case 249:case 251:case 253:case 255:case 263:case 267:case 297:case 299:case 303:case 307:case 328:case 341:case 349:case 355:case 361:case 367:case 369:case 373:case 375:case 379:case 381:case 385:case 391:case 395:case 401:case 405:case 409:case 411:case 420:case 428:case 430:case 440:case 444:case 446:case 448:this.$=[];break;case 99:this.$=Cn(M[L-2],M[L-1]);break;case 101:this.$=Vr(M[L-2],[M[L-1]]);break;case 102:case 112:this.$=Tb(M[L].map(Ke=>Et(un(M[L-1]),Ke)));break;case 103:this.$=Tb(As(M[L].map(Ke=>Et(un(M[L-1].entity),Ke)),M[L-1].triples));break;case 105:this.$=Vr([M[L-1]],M[L]);break;case 106:this.$=Vr(M[L]);break;case 107:this.$=mb(M[L-1],M[L]);break;case 109:case 237:this.$=Ye.factory.namedNode(C5);break;case 110:case 118:this.$=Cn(M[L-1],M[L]);break;case 111:this.$=M[L]?{annotation:M[L],object:M[L-1]}:M[L-1];break;case 113:this.$=M[L]?Tb(As(M[L].map(Ke=>Et(un(M[L-1].entity),Ke)),M[L-1].triples)):M[L-1].triples;break;case 114:this.$=mb(...M[L-1],M[L]);break;case 116:this.$=mb(...M[L]);break;case 117:case 159:case 163:this.$=[M[L-1],M[L]];break;case 119:this.$=M[L]?{object:M[L-1],annotation:M[L]}:M[L-1];break;case 120:this.$=M[L-1].length?Es("|",Cn(M[L-1],M[L])):M[L];break;case 121:this.$=M[L-1].length?Es("/",Cn(M[L-1],M[L])):M[L];break;case 122:this.$=M[L]?Es(M[L],[M[L-1]]):M[L-1];break;case 123:this.$=M[L-1]?Es(M[L-1],[M[L]]):M[L];break;case 125:case 131:this.$=Es(M[L-1],[M[L]]);break;case 129:this.$=Es("|",Cn(M[L-2],M[L-1]));break;case 132:case 134:this.$=$5(M[L-1]);break;case 133:case 135:this.$=J5(M[L-1]);break;case 140:this.$={entity:M[L],triples:[]};break;case 145:this.$=fb(M[L]);break;case 149:this.$=Ye.factory.namedNode(Gv);break;case 151:case 153:case 158:case 162:this.$=pb(M[L-1],M[L]);break;case 152:this.$=["||",M[L]];break;case 154:this.$=["&&",M[L]];break;case 156:this.$=Gt(M[L-1],[M[L-2],M[L]]);break;case 157:this.$=Gt(M[L-2]?"notin":"in",[M[L-3],M[L]]);break;case 160:this.$=["+",pb(M[L-1],M[L])];break;case 161:var $m=Gr(M[L-1].value.replace("-",""),M[L-1].datatype);this.$=["-",pb($m,M[L])];break;case 164:this.$=Gt("UPLUS",[M[L]]);break;case 165:this.$=Gt(M[L-1],[M[L]]);break;case 166:this.$=Gt("UMINUS",[M[L]]);break;case 177:this.$=Gt(rr(M[L-1]));break;case 178:this.$=Gt(rr(M[L-3]),[M[L-1]]);break;case 179:this.$=lc(Gt(rr(M[L-3]),[M[L-1]]));break;case 180:this.$=Gt(rr(M[L-5]),[M[L-3],M[L-1]]);break;case 181:this.$=Gt(rr(M[L-7]),[M[L-5],M[L-3],M[L-1]]);break;case 182:this.$=lc(Gt(rr(M[L-7]),[M[L-5],M[L-3],M[L-1]]));break;case 183:this.$=Gt(rr(M[L-1]),M[L]);break;case 184:this.$=Gt("bound",[fb(M[L-1])]);break;case 185:this.$=Gt(M[L-1],[]);break;case 186:this.$=Gt(M[L-3],[M[L-1]]);break;case 187:this.$=Gt(M[L-2]?"notexists":"exists",[hb(M[L])]);break;case 188:case 189:this.$=ws(M[L-1],{type:"aggregate",aggregation:rr(M[L-4]),distinct:!!M[L-2]});break;case 190:this.$=ws(M[L-2],{type:"aggregate",aggregation:rr(M[L-5]),distinct:!!M[L-3],separator:typeof M[L-1]=="string"?M[L-1]:" "});break;case 192:this.$=Gr(M[L]);break;case 193:this.$=G5(M[L-1],rr(M[L].substr(1)));break;case 194:this.$=Gr(M[L-2],M[L]);break;case 195:case 204:this.$=Gr(M[L],Xv);break;case 196:case 205:this.$=Gr(M[L],zv);break;case 197:case 206:this.$=Gr(rr(M[L]),Hv);break;case 200:this.$=Gr(M[L].toLowerCase(),V5);break;case 201:this.$=Gr(M[L].substr(1),Xv);break;case 202:this.$=Gr(M[L].substr(1),zv);break;case 203:this.$=Gr(M[L].substr(1).toLowerCase(),Hv);break;case 207:case 208:this.$=Yv(M[L],1);break;case 209:case 210:this.$=Yv(M[L],3);break;case 211:this.$=Ye.factory.namedNode(sc(M[L]));break;case 213:var Jm=M[L].indexOf(":"),jt=M[L].substr(0,Jm),Xr=Ye.prefixes[jt];if(!Xr)throw new Error("Unknown prefix: "+jt);var Un=sc(Xr+M[L].substr(Jm+1));this.$=Ye.factory.namedNode(Un);break;case 214:if(M[L]=M[L].substr(0,M[L].length-1),!(M[L]in Ye.prefixes))throw new Error("Unknown prefix: "+M[L]);var Un=sc(Ye.prefixes[M[L]]);this.$=Ye.factory.namedNode(Un);break;case 215:this.$=cc(M[L].replace(/^(_:)/,""));break;case 216:this.$=cc();break;case 217:case 218:case 232:this.$=lc(yb(M[L-3],M[L-2],M[L-1]));break;case 230:case 231:this.$=lc(M[L-1]);break;case 248:case 250:case 252:case 254:case 256:case 260:case 264:case 268:case 270:case 292:case 294:case 296:case 298:case 300:case 302:case 304:case 306:case 329:case 342:case 356:case 368:case 370:case 372:case 374:case 392:case 402:case 425:case 427:case 429:case 431:case 441:case 445:case 447:case 449:M[L-1].push(M[L]);break;case 259:case 269:case 291:case 293:case 295:case 301:case 305:case 371:case 424:case 426:this.$=[M[L]];break;case 308:M[L-3].push(M[L-2]);break;case 350:case 362:case 376:case 380:case 382:case 386:case 396:case 406:case 410:case 412:case 421:M[L-2].push(M[L-1]);break}},table:[r(o,n,{3:1,4:2,10:3}),{1:[3]},r(t,[2,307],{5:4,7:5,321:6,214:7,8:8,96:9,215:10,17:11,21:12,97:16,38:17,6:[2,238],13:e,16:e,45:e,197:e,224:e,229:e,308:e,24:[1,13],32:[1,14],36:[1,15],41:a}),r([6,13,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],[2,3],{322:19,11:20,14:21,12:[1,22],15:[1,23]}),{6:[1,24]},{6:[2,240]},{6:[2,241]},{6:[2,242]},{6:[2,243],9:25,84:26,85:u},{6:[2,239]},r(c,[2,411],{216:28,217:29}),r(s,[2,249],{18:30}),r(s,[2,251],{22:31}),r(l,[2,255],{25:32,27:33,29:[1,34]}),{13:d,16:f,33:35,39:[1,37],44:39,55:40,87:h,139:38,307:43,308:p,323:36},r(s,[2,267],{37:46}),r(y,[2,326],{98:47,103:49,106:50,117:55,130:61,100:[1,48],110:[1,51],113:[1,52],115:[1,53],116:[1,54],131:[1,62],329:[1,56],330:[1,57],331:[1,58],332:[1,59],333:[1,60]}),{39:[1,63],40:64,43:65,44:66,45:b,87:h},r(v,[2,273],{42:68,324:69,325:[1,70],326:[1,71]}),r(o,[2,248]),r(o,[2,245]),r(o,[2,246]),{13:[1,72]},{16:[1,73]},{1:[2,1]},{6:[2,2]},{6:[2,244]},{45:[1,77],85:[1,78],86:74,87:[1,75],89:[1,76]},r([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],[2,120],{337:[1,79]}),r(F,[2,418],{218:80,222:81,229:[1,82]}),{19:83,28:T,29:S,52:84,53:j,56:85},{19:88,28:T,29:S,52:89,53:j,56:85},r(s,[2,253],{26:90}),{28:[1,91],52:92,53:j},r(E,[2,385],{181:93,182:94,183:95,31:[2,383]}),r(U,[2,263],{34:96}),r(U,[2,261],{44:39,55:40,307:43,139:97,13:d,16:f,87:h,308:p}),r(U,[2,262]),r(K,[2,259]),r(_,[2,143]),r(_,[2,144]),r([6,13,16,28,29,31,39,45,47,48,53,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,145]),r(O,[2,211]),r(O,[2,212]),r(O,[2,213]),r(O,[2,214]),{19:98,28:T,29:S,52:99,53:j,56:85},{6:[2,309],99:100,193:[1,101]},r(P,[2,311],{101:102,328:[1,103]}),r(R,[2,317],{104:104,328:[1,105]}),r(I,[2,322],{107:106,328:[1,107]}),{111:108,112:[2,324],328:[1,109]},{29:C,114:110},{29:C,114:112},{29:C,114:113},{118:114,123:[1,115],125:116,126:Y},r(H,[2,315]),r(H,[2,316]),r(Z,[2,319]),r(Z,[2,320]),r(Z,[2,321]),r(y,[2,327]),{13:d,16:f,55:118,307:43,308:p},r(s,[2,12]),r(s,[2,13],{44:66,43:119,45:b,87:h}),r(le,[2,269]),r(le,[2,15]),{13:d,16:f,44:136,45:ce,46:120,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},r(v,[2,14]),r(v,[2,274]),r(v,[2,271]),r(v,[2,272]),r(o,[2,4]),{13:[1,177]},r(Je,[2,39]),{29:[1,178]},{29:[1,179]},{87:[1,181],91:180},{45:[1,187],87:[1,185],89:[1,186],93:182,165:183,166:184},r(c,[2,410]),r([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337],[2,121],{338:[1,188]}),{13:d,16:f,45:[1,193],55:194,197:Xe,219:189,220:190,223:191,224:[1,192],307:43,308:p},r(F,[2,419]),r(x,ie,{20:196,59:197,69:198,70:he}),r(s,[2,250]),{29:ve,57:200},r(P,[2,279],{54:202,327:[1,203]}),{29:[2,282]},r(Ne,Ge,{23:204,58:205,62:206,63:qe}),r(s,[2,252]),{19:208,28:T,29:S,52:209,53:j,56:85},{29:[1,210]},r(l,[2,256]),{31:[1,211]},{31:[2,384]},{13:d,16:f,44:215,45:et,55:220,82:ee,87:h,89:st,145:212,172:221,185:213,187:214,231:mt,236:216,237:222,255:154,257:155,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,309:wt,310:St,311:217,312:qt},r(ht,[2,265],{56:85,35:227,52:228,19:229,28:T,29:S,53:j}),r(K,[2,260]),r(Ne,Ge,{58:205,62:206,23:230,63:qe}),r(s,[2,268]),{6:[2,45]},r(o,n,{10:3,4:231}),{13:d,16:f,55:232,307:43,308:p},r(P,[2,312]),{105:233,112:er,122:234,132:[1,237],134:235,327:[1,238],334:[1,239]},r(R,[2,318]),r(P,bs,{108:240,133:242,112:_v,132:mv}),r(I,[2,323]),{112:[1,244]},{112:[2,325]},r(Vt,[2,50]),r(E,Rm,{135:245,136:246,143:247,144:248,31:gv,112:gv}),r(Vt,[2,51]),r(Vt,[2,52]),r(fn,[2,328],{119:249}),{29:C,114:250},r(fn,[2,56]),{29:C,114:251},r(y,[2,59]),r(le,[2,270]),{47:[1,252]},r(bv,[2,150]),r(Dm,[2,428],{240:253}),r(vs,[2,430],{244:254}),r(vs,[2,155],{248:255,249:256,250:[2,438],290:[1,257],341:[1,258],342:[1,259],343:[1,260],344:[1,261],345:[1,262],346:[1,263]}),r(Ts,[2,440],{252:264}),r(Ct,[2,448],{260:265}),{13:d,16:f,44:136,45:ce,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,255:154,257:155,264:266,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},{13:d,16:f,44:136,45:ce,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,255:154,257:155,264:267,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},{13:d,16:f,44:136,45:ce,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,255:154,257:155,264:268,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},r(Ct,[2,167]),r(Ct,[2,168]),r(Ct,[2,169]),r(Ct,[2,170],{176:269,45:vv,89:Tv}),r(Ct,[2,171]),r(Ct,[2,172]),r(Ct,[2,173]),r(Ct,[2,174]),{13:d,16:f,44:136,45:ce,46:272,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},r(Pt,[2,176]),{89:[1,273]},{45:[1,274]},{45:[1,275]},{45:[1,276]},{45:[1,277]},{45:[1,278]},{45:Ov,89:Sv,179:279},{45:[1,282]},{45:[1,284],89:[1,283]},{279:[1,285]},r(tr,[2,192],{292:[1,286],293:[1,287]}),r(tr,[2,195]),r(tr,[2,196]),r(tr,[2,197]),r(tr,[2,198]),r(tr,[2,199]),r(tr,[2,200]),{13:d,16:f,44:39,55:40,82:ee,87:h,139:289,172:291,255:154,257:155,266:290,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,320:288},{45:[1,292]},{45:[1,293]},{45:[1,294]},r(ic,[2,452]),r(ic,[2,453]),r(ic,[2,454]),r(ic,[2,455]),r(ic,[2,456]),{279:[2,458]},r(Pm,[2,207]),r(Pm,[2,208]),r(Pm,[2,209]),r(Pm,[2,210]),r(tr,[2,201]),r(tr,[2,202]),r(tr,[2,203]),r(tr,[2,204]),r(tr,[2,205]),r(tr,[2,206]),r(o,[2,5]),r(Mm,[2,297],{88:295}),r(Nm,[2,299],{90:296}),{48:[1,297],87:[1,298]},r(Im,[2,301]),r(Je,[2,43]),r(Je,[2,82]),r(Je,[2,83]),{29:[1,299]},{29:[1,300]},{87:[1,302],169:301},r(c,[2,412]),r(Mn,[2,123]),r(Mn,[2,416],{221:303,339:304,39:[1,306],263:[1,307],340:[1,305]}),r(Ur,[2,124]),{13:d,16:f,45:[1,311],55:194,89:[1,310],197:Xe,223:312,225:308,226:309,229:Fv,307:43,308:p},r(c,e,{215:10,214:314}),r(Ur,[2,236]),r(Ur,[2,237]),r(Os,[2,6]),r(ib,[2,287],{60:315,72:316,73:[1,317]}),r(x,[2,286]),{13:d,16:f,45:ce,55:323,67:321,68:322,71:318,77:320,79:319,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,307:43,308:p,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},r([6,31,63,70,73,81,83,85],[2,20]),r(E,Av,{38:17,49:324,147:325,17:326,21:327,148:328,154:329,155:330,29:tn,31:tn,85:tn,112:tn,159:tn,160:tn,161:tn,163:tn,164:tn,41:a}),{13:d,16:f,55:331,307:43,308:p},r(P,[2,280]),r(Os,[2,7]),r(x,ie,{59:197,69:198,20:332,70:he}),r(Ne,[2,284]),{64:[1,333]},r(Ne,Ge,{58:205,62:206,23:334,63:qe}),r(s,[2,254]),r(E,Rm,{144:248,30:335,143:336,31:[2,257]}),r(s,[2,100]),{31:[2,387],184:337,335:[1,338]},{13:d,16:f,44:39,55:40,87:h,139:342,186:339,190:340,195:341,197:Nn,307:43,308:p},r(ac,[2,389],{44:39,55:40,307:43,190:340,195:341,139:342,188:344,189:345,186:346,13:d,16:f,87:h,197:Nn,308:p}),r(rn,[2,227]),r(rn,[2,228]),r(rn,[2,229]),{13:d,16:f,44:215,45:et,55:220,82:ee,87:h,89:st,172:221,185:351,187:350,200:348,230:347,231:mt,234:349,236:216,237:222,255:154,257:155,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,309:wt,310:St,311:217,312:qt},{13:d,16:f,44:39,55:40,87:h,139:342,186:352,190:340,195:341,197:Nn,307:43,308:p},r(rn,[2,146]),r(rn,[2,147]),r(rn,[2,148]),r(rn,[2,149]),{13:d,16:f,44:354,55:355,82:ee,87:h,172:357,237:356,255:154,257:155,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,309:wt,310:St,311:358,312:qt,313:353},r(ab,[2,215]),r(ab,[2,216]),r(Ne,Ge,{58:205,62:206,23:359,63:qe}),r(U,[2,264]),r(ht,[2,266]),r(Os,[2,11]),r(t,[2,308],{6:[2,310]}),r(Vt,[2,313],{102:360,120:361,121:[1,362]}),r(Vt,[2,47]),r(Vt,[2,63]),r(Vt,[2,64]),{13:d,16:f,55:363,307:43,308:p},r(Vt,[2,336]),r(Vt,[2,337]),r(Vt,[2,338]),{109:[1,364]},r(wv,[2,60]),{13:d,16:f,55:365,307:43,308:p},r(P,[2,335]),{13:d,16:f,55:366,307:43,308:p},{31:[1,367]},r(In,[2,341],{137:368}),r(In,[2,340]),{13:d,16:f,44:215,45:et,55:220,82:ee,87:h,89:st,145:369,172:221,185:213,187:214,231:mt,236:216,237:222,255:154,257:155,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,309:wt,310:St,311:217,312:qt},{28:[1,370],127:371,128:[1,372]},r(fn,[2,330],{124:373,125:374,126:Y}),r(fn,[2,57]),{44:375,87:h},r(bv,[2,151],{241:376,242:[1,377]}),r(Dm,[2,153],{245:378,246:[1,379]}),{13:d,16:f,44:136,45:ce,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,247:380,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},{250:[1,381]},r(Mt,[2,432]),r(Mt,[2,433]),r(Mt,[2,434]),r(Mt,[2,435]),r(Mt,[2,436]),r(Mt,[2,437]),{250:[2,439]},r([47,48,193,242,246,250,272,290,341,342,343,344,345,346],[2,158],{253:382,254:383,255:384,257:385,263:[1,386],265:[1,387],297:$,298:X,299:te,300:me,301:_e,302:ge}),r(Ts,[2,162],{261:388,262:389,39:ob,338:ub}),r(Ct,[2,164]),r(Ct,[2,165]),r(Ct,[2,166]),r(Pt,[2,95]),r(Pt,[2,96]),r(Mt,[2,377],{177:392,325:[1,393]}),{48:[1,394]},r(Pt,[2,177]),{13:d,16:f,44:136,45:ce,46:395,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},{13:d,16:f,44:136,45:ce,46:396,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},{13:d,16:f,44:136,45:ce,46:397,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},{13:d,16:f,44:136,45:ce,46:398,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},{13:d,16:f,44:136,45:ce,46:399,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},r(Pt,[2,183]),r(Pt,[2,98]),r(Mt,[2,381],{180:400}),{87:[1,401]},r(Pt,[2,185]),{13:d,16:f,44:136,45:ce,46:402,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},{29:ve,57:403},r(tr,[2,193]),{13:d,16:f,55:404,307:43,308:p},{13:d,16:f,44:39,55:40,87:h,139:342,195:405,197:Nn,307:43,308:p},r(pn,[2,233]),r(pn,[2,234]),r(pn,[2,235]),r(Ev,[2,459],{281:406,325:[1,407]}),r(Mt,[2,463],{284:408,325:[1,409]}),r(Mt,[2,465],{286:410,325:[1,411]}),{13:d,16:f,31:[1,412],55:414,82:ee,171:413,172:415,173:416,174:qm,255:154,257:155,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:Lm},{31:[1,419],89:[1,420]},{29:[1,421]},r(Im,[2,302]),r(Mm,[2,367],{167:422}),r(Nm,[2,369],{168:423}),{48:[1,424],87:[1,425]},r(Im,[2,371]),r(Mn,[2,122]),r(Mn,[2,417]),r(Mn,[2,413]),r(Mn,[2,414]),r(Mn,[2,415]),r(Ur,[2,125]),r(Ur,[2,127]),r(Ur,[2,128]),r(jv,[2,420],{227:426}),r(Ur,[2,130]),{13:d,16:f,55:194,197:Xe,223:427,307:43,308:p},{48:[1,428]},r(hn,[2,289],{61:429,80:430,81:[1,431],83:[1,432]}),r(ib,[2,288]),{64:[1,433]},r(x,[2,29],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:434,13:d,16:f,45:ce,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,276:N,277:m,279:A,280:g,283:w,285:D,308:p,346:fe,347:Oe,348:Te,349:De,350:Le,351:je}),r(Rv,[2,293]),r(sb,[2,92]),r(sb,[2,93]),r(sb,[2,94]),{45:vv,89:Tv,176:269},{31:[1,435]},{31:[1,436]},{19:437,28:T,29:S,56:85},{19:438,28:T,29:S,56:85},r(qn,[2,355],{149:439}),r(qn,[2,354]),{13:d,16:f,44:215,45:xm,55:220,82:ee,87:h,89:st,156:440,172:221,185:441,203:442,231:Bm,236:216,237:222,255:154,257:155,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,309:wt,310:St,311:217,312:qt},r(U,[2,19]),r(hn,[2,21]),{13:d,16:f,44:450,45:Dv,55:323,65:445,66:446,67:447,68:448,87:h,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,307:43,308:p,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},r(Os,[2,8]),{31:[1,451]},{31:[2,258]},{31:[2,101]},r(E,[2,386],{31:[2,388]}),r(ac,[2,102]),r(Ln,[2,391],{191:452}),r(E,[2,395],{196:453,198:454}),r(E,[2,108]),r(E,[2,109]),r(ac,[2,103]),r(ac,[2,104]),r(ac,[2,390]),{13:d,16:f,44:215,45:et,48:[1,455],55:220,82:ee,87:h,89:st,172:221,185:351,187:350,200:456,231:mt,234:349,236:216,237:222,255:154,257:155,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,309:wt,310:St,311:217,312:qt},r(Cm,[2,424]),r(Pv,[2,136]),r(Pv,[2,137]),r(cb,[2,140]),{232:[1,457]},{13:d,16:f,44:39,55:40,87:h,139:342,195:458,197:Nn,307:43,308:p},r(pn,[2,219]),r(pn,[2,220]),r(pn,[2,221]),r(pn,[2,222]),r(pn,[2,223]),r(Os,[2,10]),r(Vt,[2,46]),r(Vt,[2,314]),{112:er,122:459},r(Vt,[2,62]),r(P,bs,{133:242,108:460,112:_v,132:mv}),r(wv,[2,61]),r(Vt,[2,49]),r([6,28,126,128,193],[2,65]),{31:[2,66],112:[1,462],138:461},r(In,[2,351],{146:463,335:[1,464]}),{29:ve,57:465},r(fn,[2,329]),r(P,[2,332],{129:466,327:[1,467]}),r(fn,[2,55]),r(fn,[2,331]),{48:[1,468]},r(Dm,[2,429]),{13:d,16:f,44:136,45:ce,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,239:469,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},r(vs,[2,431]),{13:d,16:f,44:136,45:ce,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,243:470,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},r(vs,[2,156]),{45:Ov,89:Sv,179:471},r(Ts,[2,441]),{13:d,16:f,44:136,45:ce,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,251:472,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},r(Ct,[2,444],{256:473}),r(Ct,[2,446],{258:474}),r(Mt,[2,442]),r(Mt,[2,443]),r(Ct,[2,449]),{13:d,16:f,44:136,45:ce,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,255:154,257:155,259:475,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},r(Mt,[2,450]),r(Mt,[2,451]),r(Mt,[2,379],{178:476}),r(Mt,[2,378]),r([6,13,16,29,31,39,45,47,48,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,175]),{48:[1,477]},{48:[1,478]},{272:[1,479]},{272:[1,480]},{272:[1,481]},{13:d,16:f,44:136,45:ce,46:482,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},{48:[1,483]},{48:[1,484]},r(Pt,[2,187]),r(tr,[2,194]),{13:d,16:f,44:39,55:40,82:ee,87:h,139:289,172:291,255:154,257:155,266:290,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,320:485},{13:d,16:f,39:[1,487],44:136,45:ce,46:488,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,282:486,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},r(Ev,[2,460]),{13:d,16:f,44:136,45:ce,46:489,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},r(Mt,[2,464]),{13:d,16:f,44:136,45:ce,46:490,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},r(Mt,[2,466]),r(Je,[2,40]),r(Mm,[2,298]),r(oc,[2,87]),r(oc,[2,88]),r(oc,[2,89]),r(oc,[2,90]),{13:d,16:f,55:492,82:ee,172:493,255:154,257:155,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,311:494,312:qt,315:491},r(Je,[2,41]),r(Nm,[2,300]),r(uc,[2,303],{92:495}),{13:d,16:f,31:[1,496],55:414,82:ee,171:497,172:415,173:416,174:qm,255:154,257:155,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:Lm},{31:[1,498],89:[1,499]},{29:[1,500]},r(Im,[2,372]),{13:d,16:f,48:[2,422],55:194,197:Xe,223:312,226:502,228:501,229:Fv,307:43,308:p},r(Ur,[2,131]),r(Ur,[2,126]),r(hn,[2,22]),r(hn,[2,290]),{82:[1,503]},{82:[1,504]},{13:d,16:f,44:510,45:ce,55:323,67:321,68:322,74:505,75:506,76:Mv,77:320,78:Nv,79:509,87:h,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,307:43,308:p,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},r(Rv,[2,294]),r(Iv,[2,69]),r(Iv,[2,70]),r(x,ie,{59:197,69:198,20:511,70:he}),r(Ne,Ge,{58:205,62:206,23:512,63:qe}),{29:[2,375],31:[2,71],84:522,85:u,112:[1,518],150:513,151:514,158:515,159:[1,516],160:[1,517],161:[1,519],163:[1,520],164:[1,521],175:523},r(qn,[2,363],{157:524,335:[1,525]}),r(c,e,{215:10,202:526,205:527,208:528,214:529,44:530,87:h}),r(Qm,[2,399],{215:10,205:527,208:528,214:529,44:530,204:531,202:532,13:e,16:e,45:e,197:e,224:e,229:e,308:e,87:h}),{13:d,16:f,44:215,45:xm,55:220,82:ee,87:h,89:st,172:221,185:351,203:536,212:534,231:Bm,233:533,234:535,236:216,237:222,255:154,257:155,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,309:wt,310:St,311:217,312:qt},r(c,e,{215:10,205:527,208:528,214:529,44:530,202:537,87:h}),r(Ne,[2,23],{307:43,267:139,275:146,278:149,55:323,67:447,68:448,44:450,66:538,13:d,16:f,45:Dv,87:h,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,276:N,277:m,279:A,280:g,283:w,285:D,308:p,346:fe,347:Oe,348:Te,349:De,350:Le,351:je}),r(xn,[2,291]),r(xn,[2,24]),r(xn,[2,25]),{13:d,16:f,44:136,45:ce,46:539,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},r(xn,[2,28]),r(Ne,Ge,{58:205,62:206,23:540,63:qe}),r([31,112,232,318,335],[2,105],{192:541,193:[1,542]}),r(Ln,[2,107]),{13:d,16:f,44:215,45:et,55:220,82:ee,87:h,89:st,172:221,185:351,187:350,199:543,200:544,231:mt,234:349,236:216,237:222,255:154,257:155,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,309:wt,310:St,311:217,312:qt},r(qv,[2,132]),r(Cm,[2,425]),r(qv,[2,133]),{13:d,16:f,44:354,55:355,82:ee,87:h,172:357,237:356,255:154,257:155,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,309:wt,310:St,311:358,312:qt,313:545},r(Vt,[2,54]),r(Vt,[2,48]),r(In,[2,342]),{13:d,16:f,44:39,55:40,87:h,139:546,307:43,308:p},r(In,[2,68]),r(E,[2,350],{31:Lv,112:Lv}),r(Vt,[2,53]),{13:d,16:f,55:547,307:43,308:p},r(P,[2,333]),r(le,[2,16]),r(Dm,[2,152]),r(vs,[2,154]),r(vs,[2,157]),r(Ts,[2,159]),r(Ts,[2,160],{262:389,261:548,39:ob,338:ub}),r(Ts,[2,161],{262:389,261:549,39:ob,338:ub}),r(Ct,[2,163]),{13:d,16:f,44:136,45:ce,46:550,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},r(Pt,[2,178]),r(Pt,[2,179]),{13:d,16:f,44:136,45:ce,46:551,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},{13:d,16:f,44:136,45:ce,46:552,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},{13:d,16:f,44:136,45:ce,46:553,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},{48:[1,554],272:[1,555]},r(Pt,[2,184]),r(Pt,[2,186]),{314:[1,556]},{48:[1,557]},{48:[2,461]},{48:[2,462]},{48:[1,558]},{48:[2,467],193:[1,561],287:559,288:560},{13:d,16:f,55:194,197:Xe,223:562,307:43,308:p},r(lb,[2,224]),r(lb,[2,225]),r(lb,[2,226]),{31:[1,563],45:xv,94:564},r(Je,[2,84]),r(Mm,[2,368]),r(Je,[2,85]),r(Nm,[2,370]),r(uc,[2,373],{170:566}),{48:[1,567]},{48:[2,423],337:[1,568]},r(hn,[2,35],{83:[1,569]}),r(hn,[2,36],{81:[1,570]}),r(ib,[2,30],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:509,44:510,75:571,13:d,16:f,45:ce,76:Mv,78:Nv,87:h,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,276:N,277:m,279:A,280:g,283:w,285:D,308:p,346:fe,347:Oe,348:Te,349:De,350:Le,351:je}),r(Ss,[2,295]),{45:ce,77:572},{45:ce,77:573},r(Ss,[2,33]),r(Ss,[2,34]),{31:[2,275],50:574,84:575,85:u},{31:[2,277],51:576,84:577,85:u},r(qn,[2,356]),r(Bv,[2,357],{152:578,335:[1,579]}),r(nn,[2,74]),{29:ve,57:580},{29:ve,57:581},{13:d,16:f,44:39,55:40,87:h,139:582,307:43,308:p},r(Cv,[2,365],{162:583,328:[1,584]}),{13:d,16:f,45:ce,55:323,67:321,68:322,77:320,79:585,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,307:43,308:p,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},{45:[1,586]},r(nn,[2,81]),{29:ve,57:587},r(qn,[2,73]),r(E,[2,362],{29:an,31:an,85:an,112:an,159:an,160:an,161:an,163:an,164:an}),r(Qm,[2,112]),r(Fs,[2,401],{206:588}),r(E,[2,405],{209:589,210:590}),r(E,[2,403]),r(E,[2,404]),r(Qm,[2,113]),r(Qm,[2,400]),{13:d,16:f,44:215,45:xm,48:[1,591],55:220,82:ee,87:h,89:st,172:221,185:351,203:536,212:592,231:Bm,234:535,236:216,237:222,255:154,257:155,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,309:wt,310:St,311:217,312:qt},r(Cm,[2,426]),r(cb,[2,138]),r(cb,[2,139]),{232:[1,593]},r(xn,[2,292]),{47:[1,595],48:[1,594]},r(Os,[2,9]),r(Ln,[2,392]),r(Ln,[2,393],{44:39,55:40,307:43,195:341,139:342,194:596,190:597,13:d,16:f,87:h,197:Nn,308:p}),r(Ln,[2,110],{272:[1,598]}),r(Um,[2,397],{201:599,316:600,317:[1,601]}),{314:[1,602]},{29:[1,603]},r(fn,[2,58]),r(Ct,[2,445]),r(Ct,[2,447]),{48:[1,604],272:[1,605]},{48:[1,606]},{272:[1,607]},{272:[1,608]},r(Pt,[2,99]),r(Mt,[2,382]),r([13,16,39,47,48,87,193,197,242,246,250,263,265,272,290,297,298,299,300,301,302,308,314,338,341,342,343,344,345,346],[2,232]),r(Pt,[2,188]),r(Pt,[2,189]),{48:[1,609]},{48:[2,468]},{289:[1,610]},{13:d,16:f,55:492,82:ee,172:493,255:154,257:155,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,311:494,312:qt,315:611},r(Je,[2,42]),r(uc,[2,304]),{13:d,16:f,55:414,82:ee,95:612,171:613,172:415,173:416,174:qm,255:154,257:155,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:Lm},{31:[1,614],45:xv,94:615},r(Ur,[2,129]),r(jv,[2,421]),{82:[1,616]},{82:[1,617]},r(Ss,[2,296]),r(Ss,[2,31]),r(Ss,[2,32]),{31:[2,17]},{31:[2,276]},{31:[2,18]},{31:[2,278]},r(E,Av,{155:330,153:618,154:619,29:on,31:on,85:on,112:on,159:on,160:on,161:on,163:on,164:on}),r(Bv,[2,358]),r(nn,[2,75]),r(nn,[2,76]),{29:ve,57:620},{13:d,16:f,44:39,55:40,87:h,139:621,307:43,308:p},r(Cv,[2,366]),r(nn,[2,79]),{13:d,16:f,44:136,45:ce,46:622,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},r(nn,[2,91],{336:[1,623]}),r([29,31,85,112,159,160,161,163,164,232,318,335],[2,114],{207:624,193:[1,625]}),r(Fs,[2,117]),{13:d,16:f,44:215,45:xm,55:220,82:ee,87:h,89:st,172:221,185:351,203:536,211:626,212:627,231:Bm,234:535,236:216,237:222,255:154,257:155,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,309:wt,310:St,311:217,312:qt},r(rn,[2,134]),r(Cm,[2,427]),r(rn,[2,135]),r(xn,[2,26]),{44:628,87:h},r(Ln,[2,106]),r(Ln,[2,394]),r(E,[2,396]),r(Um,[2,111]),r(Um,[2,398]),{13:d,16:f,44:39,55:40,87:h,139:342,186:629,190:340,195:341,197:Nn,307:43,308:p},r(ab,[2,217]),r(E,Rm,{144:248,140:630,143:631,31:[2,343]}),r(Pt,[2,97]),r(Mt,[2,380]),r(Pt,[2,180]),{13:d,16:f,44:136,45:ce,46:632,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},{13:d,16:f,44:136,45:ce,46:633,55:133,67:132,68:134,77:131,82:ee,87:h,172:135,224:Ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Ee,264:130,265:ue,266:137,267:139,268:oe,269:Re,270:Se,271:Pe,273:we,274:Ie,275:146,276:N,277:m,278:149,279:A,280:g,283:w,285:D,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:se,346:fe,347:Oe,348:Te,349:De,350:Le,351:je},r(Pt,[2,190]),{290:[1,634]},{314:[1,635]},{13:d,16:f,48:[1,636],55:414,82:ee,171:637,172:415,173:416,174:qm,255:154,257:155,291:150,294:B,295:q,296:Q,297:$,298:X,299:te,300:me,301:_e,302:ge,303:G,304:z,305:J,306:ne,307:43,308:p,312:Lm},r(Qv,[2,305]),r(Je,[2,86]),r(uc,[2,374]),r(hn,[2,37]),r(hn,[2,38]),r(qn,[2,72]),r(qn,[2,360]),r(nn,[2,77]),{29:ve,57:638},{47:[1,639]},{29:[2,376]},r(Fs,[2,402]),r(Fs,[2,115],{215:10,208:528,214:529,44:530,205:640,13:e,16:e,45:e,197:e,224:e,229:e,308:e,87:h}),r(Fs,[2,118],{272:[1,641]}),r(Vm,[2,407],{213:642,319:643,317:[1,644]}),{48:[1,645]},{318:[1,646]},{31:[1,647]},{31:[2,344]},{48:[1,648]},{48:[1,649]},{291:650,303:G,304:z,305:J,306:ne},r(oc,[2,218]),r(uc,[2,44]),r(Qv,[2,306]),r(nn,[2,78]),{44:651,87:h},r(Fs,[2,116]),r(E,[2,406]),r(Vm,[2,119]),r(Vm,[2,408]),r(c,e,{215:10,205:527,208:528,214:529,44:530,202:652,87:h}),r(xn,[2,27]),r(Um,[2,230]),r(Uv,[2,345],{141:653,335:[1,654]}),r(Pt,[2,181]),r(Pt,[2,182]),{48:[2,191]},{48:[1,655]},{318:[1,656]},r(E,Rm,{144:248,142:657,143:658,31:Vv,112:Vv}),r(Uv,[2,346]),r(nn,[2,80]),r(Vm,[2,231]),r(In,[2,67]),r(In,[2,348])],defaultActions:{5:[2,240],6:[2,241],7:[2,242],9:[2,239],24:[2,1],25:[2,2],26:[2,244],87:[2,282],94:[2,384],100:[2,45],109:[2,325],166:[2,458],263:[2,439],336:[2,258],337:[2,101],487:[2,461],488:[2,462],560:[2,468],574:[2,17],575:[2,276],576:[2,18],577:[2,278],623:[2,376],631:[2,344],650:[2,191]},parseError:function(ae,ye){if(ye.recoverable)this.trace(ae);else{var be=new Error(ae);throw be.hash=ye,be}},parse:function(ae){var ye=this,be=[0],xe=[null],Ce=[],M=this.table,_r="",L=0,yn=0,Hm=2,$m=1,Jm=Ce.slice.call(arguments,1),jt=Object.create(this.lexer),Xr={yy:{}};for(var Un in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Un)&&(Xr.yy[Un]=this.yy[Un]);jt.setInput(ae,Xr.yy),Xr.yy.lexer=jt,Xr.yy.parser=this,typeof jt.yylloc>"u"&&(jt.yylloc={});var Ds=jt.yylloc;Ce.push(Ds);var Sb=jt.options&&jt.options.ranges;typeof Xr.yy.parseError=="function"?this.parseError=Xr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var Km=function(){var Ps;return Ps=jt.lex()||$m,typeof Ps!="number"&&(Ps=ye.symbols_[Ps]||Ps),Ps},Ke,at,ze,Xt,zt={},Ym,sn,eT,Wm;;){if(at=be[be.length-1],this.defaultActions[at]?ze=this.defaultActions[at]:((Ke===null||typeof Ke>"u")&&(Ke=Km()),ze=M[at]&&M[at][Ke]),typeof ze>"u"||!ze.length||!ze[0]){var Fb="";Wm=[];for(Ym in M[at])this.terminals_[Ym]&&Ym>Hm&&Wm.push("'"+this.terminals_[Ym]+"'");jt.showPosition?Fb="Parse error on line "+(L+1)+`:
`+jt.showPosition()+`
Expecting `+Wm.join(", ")+", got '"+(this.terminals_[Ke]||Ke)+"'":Fb="Parse error on line "+(L+1)+": Unexpected "+(Ke==$m?"end of input":"'"+(this.terminals_[Ke]||Ke)+"'"),this.parseError(Fb,{text:jt.match,token:this.terminals_[Ke]||Ke,line:jt.yylineno,loc:Ds,expected:Wm})}if(ze[0]instanceof Array&&ze.length>1)throw new Error("Parse Error: multiple actions possible at state: "+at+", token: "+Ke);switch(ze[0]){case 1:be.push(Ke),xe.push(jt.yytext),Ce.push(jt.yylloc),be.push(ze[1]),Ke=null,yn=jt.yyleng,_r=jt.yytext,L=jt.yylineno,Ds=jt.yylloc;break;case 2:if(sn=this.productions_[ze[1]][1],zt.$=xe[xe.length-sn],zt._$={first_line:Ce[Ce.length-(sn||1)].first_line,last_line:Ce[Ce.length-1].last_line,first_column:Ce[Ce.length-(sn||1)].first_column,last_column:Ce[Ce.length-1].last_column},Sb&&(zt._$.range=[Ce[Ce.length-(sn||1)].range[0],Ce[Ce.length-1].range[1]]),Xt=this.performAction.apply(zt,[_r,yn,L,Xr.yy,ze[1],xe,Ce].concat(Jm)),typeof Xt<"u")return Xt;sn&&(be=be.slice(0,-1*sn*2),xe=xe.slice(0,-1*sn),Ce=Ce.slice(0,-1*sn)),be.push(this.productions_[ze[1]][0]),xe.push(zt.$),Ce.push(zt._$),eT=M[be[be.length-2]][be[be.length-1]],be.push(eT);break;case 3:return!0}}return!0}},Gm=nI().Wildcard,Xm="http://www.w3.org/1999/02/22-rdf-syntax-ns#",C5=Xm+"type",Q5=Xm+"first",U5=Xm+"rest",Gv=Xm+"nil",zm="http://www.w3.org/2001/XMLSchema#",Xv=zm+"integer",zv=zm+"decimal",Hv=zm+"double",V5=zm+"boolean",Bn="",$v="",Jv="";function rr(de){return de.toLowerCase()}function Cn(de,ae){return de.push(ae),de}function As(de,ae){return de.push.apply(de,ae),de}function Et(de){de||(de={});for(var ae=1,ye=arguments.length,be;ae<ye&&(be=arguments[ae]||{});ae++)for(var xe in be)de[xe]=be[xe];return de}function Vr(){for(var de=[],ae=0,ye=arguments.length;ae<ye;ae++)de=de.concat.apply(de,arguments[ae]);return de}function sc(de){if(de[0]==="<"&&(de=de.substring(1,de.length-1)),/^[a-z][a-z0-9.+-]*:/i.test(de))return de;if(!Ye.base)throw new Error("Cannot resolve relative IRI "+de+" because no base IRI was set.");switch(Bn!==Ye.base&&(Bn=Ye.base,$v=Bn.replace(/[^\/:]*$/,""),Jv=Bn.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),de[0]){case void 0:return Bn;case"#":return Bn+de;case"?":return Bn.replace(/(?:\?.*)?$/,de);case"/":return Jv+de;default:return $v+de}}function fb(de){if(de){var ae=de[0];if(ae==="?"||ae==="$")return Ye.factory.variable(de.substr(1))}return de}function Gt(de,ae){return{type:"operation",operator:de,args:ae||[]}}function ws(de,ae){var ye={expression:de==="*"?new Gm:de};if(ae)for(var be in ae)ye[be]=ae[be];return ye}function Es(de,ae){return{type:"path",pathType:de,items:ae}}function pb(de,ae){for(var ye=0,be=ae.length,xe;ye<be&&(xe=ae[ye]);ye++)de=Gt(xe[0],[de,xe[1]]);return de}function Qn(de,ae){var ye=[],be=[],xe=de.length,Ce,M={};if(!xe)return null;for(var _r=0;_r<xe&&(Ce=de[_r]);_r++)(Ce.named?be:ye).push(Ce.iri);return M[ae||"from"]={default:ye,named:be},M}function js(de){return parseInt(de,10)}function hb(de){return de.type==="group"&&de.patterns.length===1?de.patterns[0]:de}function Gr(de,ae){return ae&&ae.termType!=="NamedNode"&&(ae=Ye.factory.namedNode(ae)),Ye.factory.literal(de,ae)}function G5(de,ae){return Ye.factory.literal(de,ae)}function yb(de,ae,ye){if(!("termType"in ae))throw new Error("Nested triples cannot contain paths");return Ye.factory.quad(de,ae,ye)}function un(de,ae,ye,be){var xe={};return de!=null&&(xe.subject=de),ae!=null&&(xe.predicate=ae),ye!=null&&(xe.object=ye),be!=null&&(xe.annotations=be),xe}function cc(de){return typeof de=="string"?de.startsWith("e_")?Ye.factory.blankNode(de):Ye.factory.blankNode("e_"+de):Ye.factory.blankNode("g_"+Kv++)}var Kv=0;Ye._resetBlanks=function(){Kv=0};var X5=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,z5={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:`
`,r:"\r",f:"\f"},H5=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,_b=String.fromCharCode;function Yv(de,ae){de=de.substring(ae,de.length-ae);try{de=de.replace(X5,function(ye,be,xe,Ce){var M;if(be){if(M=parseInt(be,16),isNaN(M))throw new Error;return _b(M)}else if(xe){if(M=parseInt(xe,16),isNaN(M))throw new Error;return M<65535?_b(M):_b(55296+((M-=65536)>>10),56320+(M&1023))}else{var _r=z5[Ce];if(!_r)throw new Error;return _r}})}catch{return""}if(H5.exec(de))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+de);return de}function $5(de){var ae=cc(),ye=ae,be=[],xe,Ce=[];de.forEach(function(yn){be.push(yn.entity),As(Ce,yn.triples)});for(var M=0,_r=0,L=be.length,xe=Array(L*2);M<L;)xe[_r++]=un(ye,Ye.factory.namedNode(Q5),be[M]),xe[_r++]=un(ye,Ye.factory.namedNode(U5),ye=++M<L?cc():Ye.factory.namedNode(Gv));return{entity:ae,triples:As(xe,Ce)}}function J5(de){var ae=cc();return{entity:ae,triples:de.map(function(ye){return Et(un(ae),ye)})}}function mb(de,ae,ye){var be=[],xe=[];return ae.forEach(function(Ce){let M=null;Ce.annotation&&(M=Ce.annotation,Ce=Ce.object),be.push(un(null,de,Ce.entity,M)),As(xe,Ce.triples)}),Vr(be,ye||[],xe)}function Rs(de){return de.variable?de.variable.value:de.value||de.expression.value}function gb(de){if(!de)return[];if(de.type==="aggregate")return[de];if(de.type==="operation"){const ae=[];for(const ye of de.args)ae.push(...gb(ye));return ae}return[]}function K5(de){const ae=new Set,ye=function(be){be&&(be.termType==="Variable"?ae.add(be):be.type==="operation"&&be.args.forEach(ye))};return ye(de),ae}function bb(de,ae=1,ye=[]){for(const be of de)ae>0&&be instanceof Array?bb(be,ae-1,ye):ye.push(be);return ye}function vb(de){return de.termType==="Variable"}function Wv(de){if(de.triples){const ae=[];for(const ye of de.triples)vb(ye.subject)&&ae.push(ye.subject.value),vb(ye.predicate)&&ae.push(ye.predicate.value),vb(ye.object)&&ae.push(ye.object.value);return ae}else if(de.patterns){const ae=[];for(const ye of de.patterns)ae.push(...Wv(ye));return ae}return[]}function Y5(de){const ae=de.slice().sort(),ye=[];for(let be=0;be<ae.length-1;be++)ae[be+1]==ae[be]&&ye.push(ae[be]);return ye}function lc(de){if(!Ye.sparqlStar)throw new Error("SPARQL-star support is not enabled");return de}function Zv(de,ae,ye){for(const be of ae){const xe=un("subject"in be?be.subject:de,be.predicate,be.object);ye.push(xe),be.annotations&&Zv(yb(de,be.predicate,be.object),be.annotations,ye)}}function Tb(de){if(Ye.sparqlStar){const ae=[];return de.forEach(ye=>{const be=un(ye.subject,ye.predicate,ye.object);ae.push(be),ye.annotations&&Zv(yb(ye.subject,ye.predicate,ye.object),ye.annotations,ae)}),ae}return de}function kv(de){for(const ae of de){if(ae.type==="graph"&&ae.name.termType==="Variable")throw new Error("Detected illegal variable in GRAPH");if(ae.type==="bgp"||ae.type==="graph"){for(const ye of ae.triples)if(ye.subject.termType==="Variable"||ye.predicate.termType==="Variable"||ye.object.termType==="Variable")throw new Error("Detected illegal variable in BGP")}}return de}function Ob(de){for(const ae of de)if(ae.type==="bgp"){for(const ye of ae.triples)if(ye.subject.termType==="BlankNode"||ye.predicate.termType==="BlankNode"||ye.object.termType==="BlankNode")throw new Error("Detected illegal blank node in BGP")}return de}var W5=(function(){var de={EOF:1,parseError:function(ye,be){if(this.yy.parser)this.yy.parser.parseError(ye,be);else throw new Error(ye)},setInput:function(ae,ye){return this.yy=ye||this.yy||{},this._input=ae,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var ae=this._input[0];this.yytext+=ae,this.yyleng++,this.offset++,this.match+=ae,this.matched+=ae;var ye=ae.match(/(?:\r\n?|\n).*/g);return ye?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ae},unput:function(ae){var ye=ae.length,be=ae.split(/(?:\r\n?|\n)/g);this._input=ae+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ye),this.offset-=ye;var xe=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),be.length-1&&(this.yylineno-=be.length-1);var Ce=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:be?(be.length===xe.length?this.yylloc.first_column:0)+xe[xe.length-be.length].length-be[0].length:this.yylloc.first_column-ye},this.options.ranges&&(this.yylloc.range=[Ce[0],Ce[0]+this.yyleng-ye]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(ae){this.unput(this.match.slice(ae))},pastInput:function(){var ae=this.matched.substr(0,this.matched.length-this.match.length);return(ae.length>20?"...":"")+ae.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var ae=this.match;return ae.length<20&&(ae+=this._input.substr(0,20-ae.length)),(ae.substr(0,20)+(ae.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var ae=this.pastInput(),ye=new Array(ae.length+1).join("-");return ae+this.upcomingInput()+`
`+ye+"^"},test_match:function(ae,ye){var be,xe,Ce;if(this.options.backtrack_lexer&&(Ce={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ce.yylloc.range=this.yylloc.range.slice(0))),xe=ae[0].match(/(?:\r\n?|\n).*/g),xe&&(this.yylineno+=xe.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:xe?xe[xe.length-1].length-xe[xe.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ae[0].length},this.yytext+=ae[0],this.match+=ae[0],this.matches=ae,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ae[0].length),this.matched+=ae[0],be=this.performAction.call(this,this.yy,this,ye,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),be)return be;if(this._backtrack){for(var M in Ce)this[M]=Ce[M];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var ae,ye,be,xe;this._more||(this.yytext="",this.match="");for(var Ce=this._currentRules(),M=0;M<Ce.length;M++)if(be=this._input.match(this.rules[Ce[M]]),be&&(!ye||be[0].length>ye[0].length)){if(ye=be,xe=M,this.options.backtrack_lexer){if(ae=this.test_match(be,Ce[M]),ae!==!1)return ae;if(this._backtrack){ye=!1;continue}else return!1}else if(!this.options.flex)break}return ye?(ae=this.test_match(ye,Ce[xe]),ae!==!1?ae:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var ye=this.next();return ye||this.lex()},begin:function(ye){this.conditionStack.push(ye)},popState:function(){var ye=this.conditionStack.length-1;return ye>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(ye){return ye=this.conditionStack.length-1-Math.abs(ye||0),ye>=0?this.conditionStack[ye]:"INITIAL"},pushState:function(ye){this.begin(ye)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(ye,be,xe,Ce){switch(xe){case 0:break;case 1:return 12;case 2:return 15;case 3:return 41;case 4:return 325;case 5:return 326;case 6:return 45;case 7:return 47;case 8:return 48;case 9:return 39;case 10:return 24;case 11:return 28;case 12:return 29;case 13:return 31;case 14:return 32;case 15:return 36;case 16:return 53;case 17:return 327;case 18:return 63;case 19:return 64;case 20:return 70;case 21:return 73;case 22:return 76;case 23:return 78;case 24:return 81;case 25:return 83;case 26:return 85;case 27:return 193;case 28:return 100;case 29:return 328;case 30:return 121;case 31:return 329;case 32:return 330;case 33:return 110;case 34:return 331;case 35:return 109;case 36:return 332;case 37:return 333;case 38:return 113;case 39:return 115;case 40:return 116;case 41:return 131;case 42:return 123;case 43:return 126;case 44:return 128;case 45:return 132;case 46:return 112;case 47:return 334;case 48:return 335;case 49:return 159;case 50:return 161;case 51:return 164;case 52:return 174;case 53:return 160;case 54:return 336;case 55:return 163;case 56:return 312;case 57:return 314;case 58:return 317;case 59:return 318;case 60:return 272;case 61:return 197;case 62:return 337;case 63:return 338;case 64:return 229;case 65:return 340;case 66:return 263;case 67:return 224;case 68:return 231;case 69:return 232;case 70:return 242;case 71:return 246;case 72:return 290;case 73:return 341;case 74:return 342;case 75:return 343;case 76:return 344;case 77:return 345;case 78:return 250;case 79:return 346;case 80:return 265;case 81:return 276;case 82:return 277;case 83:return 268;case 84:return 269;case 85:return 270;case 86:return 271;case 87:return 347;case 88:return 348;case 89:return 273;case 90:return 274;case 91:return 350;case 92:return 349;case 93:return 351;case 94:return 279;case 95:return 280;case 96:return 283;case 97:return 285;case 98:return 289;case 99:return 293;case 100:return 296;case 101:return 13;case 102:return 16;case 103:return 308;case 104:return 309;case 105:return 87;case 106:return 292;case 107:return 82;case 108:return 294;case 109:return 295;case 110:return 297;case 111:return 298;case 112:return 299;case 113:return 300;case 114:return 301;case 115:return 302;case 116:return"EXPONENT";case 117:return 303;case 118:return 304;case 119:return 305;case 120:return 306;case 121:return 89;case 122:return 310;case 123:return 6;case 124:return"INVALID";case 125:console.log(be.yytext);break}},rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:\{\|)/i,/^(?:\|\})/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(SUBJECT|PREDICATE|OBJECT|isTRIPLE))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:TRIPLE)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],inclusive:!0}}};return de})();db.lexer=W5;function Ye(){this.yy={}}return Ye.prototype=db,db.Parser=Ye,new Ye})();return u1=i,u1}var s1,W2;function Dx(){if(W2)return s1;W2=1;var i="http://www.w3.org/2001/XMLSchema#integer",r="http://www.w3.org/2001/XMLSchema#string";function o(f){this._options=f=f||{};var h=f.prefixes||{};this._prefixByIri={};var p=[];for(var y in h){var b=h[y];u(b)&&(this._prefixByIri[b]=y,p.push(b))}var v=p.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+v+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=f.sparqlStar,this._indent=u(f.indent)?f.indent:"  ",this._newline=u(f.newline)?f.newline:`
`,this._explicitDatatype=!!f.explicitDatatype}o.prototype.toQuery=function(f){var h="";return f.queryType&&(h+=f.queryType.toUpperCase()+" "),f.reduced&&(h+="REDUCED "),f.distinct&&(h+="DISTINCT "),f.variables?h+=l(f.variables,void 0,function(p){return/^[?$]/.test(p)?p:c(p)?this.toEntity(p):"("+this.toExpression(p.expression)+" AS "+a(p.variable)+")"},this)+" ":f.template&&(h+=this.group(f.template,!0)+this._newline),f.from&&(h+=this.graphs("FROM ",f.from.default)+this.graphs("FROM NAMED ",f.from.named)),f.where&&(h+="WHERE "+this.group(f.where,!0)+this._newline),f.updates&&(h+=l(f.updates,";"+this._newline,this.toUpdate,this)),f.group&&(h+="GROUP BY "+l(f.group,void 0,function(p){var y=c(p.expression)?this.toEntity(p.expression):"("+this.toExpression(p.expression)+")";return p.variable?"("+y+" AS "+a(p.variable)+")":y},this)+this._newline),f.having&&(h+="HAVING ("+l(f.having,void 0,this.toExpression,this)+")"+this._newline),f.order&&(h+="ORDER BY "+l(f.order,void 0,function(p){var y="("+this.toExpression(p.expression)+")";return p.descending?"DESC "+y:y},this)+this._newline),f.offset&&(h+="OFFSET "+f.offset+this._newline),f.limit&&(h+="LIMIT "+f.limit+this._newline),f.values&&(h+=this.values(f)),h=this.baseAndPrefixes(f)+h,h.trim()},o.prototype.baseAndPrefixes=function(f){var h=f.base?"BASE <"+f.base+">"+this._newline:"",p="";for(var y in f.prefixes)(this._options.allPrefixes||this._usedPrefixes[y])&&(p+="PREFIX "+y+": <"+f.prefixes[y]+">"+this._newline);return h+p},o.prototype.toPattern=function(f){var h=f.type||f instanceof Array&&"array"||(f.subject&&f.predicate&&f.object?"triple":"");if(!(h in this))throw new Error("Unknown entry type: "+h);return this[h](f)},o.prototype.triple=function(f){return this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+"."},o.prototype.array=function(f){return l(f,this._newline,this.toPattern,this)},o.prototype.bgp=function(f){return this.encodeTriples(f.triples)},o.prototype.encodeTriples=function(f){if(!f.length)return"";for(var h=[],p=void 0,y=void 0,b=0;b<f.length;b++){var v=f[b];s(v.subject,p)?s(v.predicate,y)?h.push(","):(y=v.predicate,h.push(";"+this._newline,this._indent,this.toEntity(y))):(p&&h.push("."+this._newline),p=v.subject,y=v.predicate,h.push(this.toEntity(p)," ",this.toEntity(y))),h.push(" ",this.toEntity(v.object))}return h.push("."),h.join("")},o.prototype.graph=function(f){return"GRAPH "+this.toEntity(f.name)+" "+this.group(f)},o.prototype.graphs=function(f,h){return!h||h.length===0?"":l(h,"",function(p){return f+this.toEntity(p)+this._newline},this)},o.prototype.group=function(f,h){return f=h!==!0?this.array(f.patterns||f.triples):this.toPattern(f.type!=="group"?f:f.patterns),f.indexOf(this._newline)===-1?"{ "+f+" }":"{"+this._newline+this.indent(f)+this._newline+"}"},o.prototype.query=function(f){return this.toQuery(f)},o.prototype.filter=function(f){return"FILTER("+this.toExpression(f.expression)+")"},o.prototype.bind=function(f){return"BIND("+this.toExpression(f.expression)+" AS "+a(f.variable)+")"},o.prototype.optional=function(f){return"OPTIONAL "+this.group(f)},o.prototype.union=function(f){return l(f.patterns,this._newline+"UNION"+this._newline,function(h){return this.group(h,!0)},this)},o.prototype.minus=function(f){return"MINUS "+this.group(f)},o.prototype.values=function(f){var h=Object.keys(f.values.reduce(function(b,v){for(var F in v)b[F]=!0;return b},{})),p,y;return h.length===1?p=y="":(p="(",y=")"),"VALUES "+p+h.join(" ")+y+" {"+this._newline+l(f.values,this._newline,function(b){return"  "+p+l(h,void 0,function(v){return b[v]?this.toEntity(b[v]):"UNDEF"},this)+y},this)+this._newline+"}"},o.prototype.service=function(f){return"SERVICE "+(f.silent?"SILENT ":"")+this.toEntity(f.name)+" "+this.group(f)},o.prototype.toExpression=function(f){if(c(f))return this.toEntity(f);switch(f.type.toLowerCase()){case"aggregate":return f.aggregation.toUpperCase()+"("+(f.distinct?"DISTINCT ":"")+this.toExpression(f.expression)+(typeof f.separator=="string"?'; SEPARATOR = "'+f.separator.replace(n,t)+'"':"")+")";case"functioncall":return this.toEntity(f.function)+"("+l(f.args,", ",this.toExpression,this)+")";case"operation":var h=f.operator.toUpperCase(),p=f.args||[];switch(f.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(c(p[0])?this.toEntity(p[0]):"("+this.toExpression(p[0])+")")+" "+h+" "+(c(p[1])?this.toEntity(p[1]):"("+this.toExpression(p[1])+")");case"!":return"!("+this.toExpression(p[0])+")";case"uplus":return"+("+this.toExpression(p[0])+")";case"uminus":return"-("+this.toExpression(p[0])+")";case"notin":h="NOT IN";case"in":return this.toExpression(p[0])+" "+h+"("+(u(p[1])?p[1]:l(p[1],", ",this.toExpression,this))+")";case"notexists":h="NOT EXISTS";case"exists":return h+" "+this.group(p[0],!0);default:return h+"("+l(p,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+f.type)}},o.prototype.toEntity=function(f){if(c(f))switch(f.termType){case"Wildcard":return"*";case"Variable":return a(f);case"BlankNode":return"_:"+f.value;case"Literal":var h=f.value||"",p=f.language||"",y=f.datatype;if(f='"'+h.replace(n,t)+'"',p)f+="@"+p;else if(y){if(!this._explicitDatatype)switch(y.value){case r:return f;case i:if(/^\d+$/.test(h))return h+" "}f+="^^"+this.encodeIRI(y.value)}return f;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return f.graph&&f.graph.termType!=="DefaultGraph"?"<< GRAPH "+this.toEntity(f.graph)+" { "+this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+" }  >>":"<< "+this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+" >>";default:return this.encodeIRI(f.value)}else{var b=f.items.map(this.toEntity,this),v=f.pathType;switch(v){case"^":case"!":return v+b[0];case"*":case"+":case"?":return"("+b[0]+v+")";default:return"("+b.join(v)+")"}}};var n=/["\\\t\n\r\b\f]/g,t=function(f){return e[f]},e={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};o.prototype.encodeIRI=function(f){var h=this._prefixRegex.exec(f);if(h){var p=this._prefixByIri[h[1]];return this._usedPrefixes[p]=!0,p+":"+h[2]}return"<"+f+">"},o.prototype.toUpdate=function(f){switch(f.type||f.updateType){case"load":return"LOAD"+(f.source?" "+this.toEntity(f.source):"")+(f.destination?" INTO GRAPH "+this.toEntity(f.destination):"");case"insert":return"INSERT DATA "+this.group(f.insert,!0);case"delete":return"DELETE DATA "+this.group(f.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(f.delete,!0);case"insertdelete":return(f.graph?"WITH "+this.toEntity(f.graph)+this._newline:"")+(f.delete.length?"DELETE "+this.group(f.delete,!0)+this._newline:"")+(f.insert.length?"INSERT "+this.group(f.insert,!0)+this._newline:"")+(f.using?this.graphs("USING ",f.using.default):"")+(f.using?this.graphs("USING NAMED ",f.using.named):"")+"WHERE "+this.group(f.where,!0);case"add":case"copy":case"move":return f.type.toUpperCase()+" "+(f.silent?"SILENT ":"")+(f.source.default?"DEFAULT":this.toEntity(f.source.name))+" TO "+this.toEntity(f.destination.name);case"create":case"clear":case"drop":return f.type.toUpperCase()+(f.silent?" SILENT ":" ")+(f.graph.default?"DEFAULT":f.graph.named?"NAMED":f.graph.all?"ALL":"GRAPH "+this.toEntity(f.graph.name));default:throw new Error("Unknown update query type: "+f.type)}},o.prototype.indent=function(f){return f.replace(/^/gm,this._indent)};function a(f){return"?"+f.value}function u(f){return typeof f=="string"}function c(f){return typeof f.termType=="string"}function s(f,h){if(!f||!c(f)||!h||!c(h)||f.termType!==h.termType)return!1;switch(f.termType){case"Literal":return f.value===h.value&&f.language===h.language&&s(f.datatype,h.datatype);case"Quad":return s(f.subject,h.subject)&&s(f.predicate,h.predicate)&&s(f.object,h.object)&&s(f.graph,h.graph);default:return f.value===h.value}}function l(f,h,p,y){return f.map(p,y).join(u(h)?h:" ")}function d(f={}){return{stringify:function(h){var p=Object.create(f);return p.prefixes=h.prefixes,new o(p).toQuery(h)},createGenerator:function(){return new o(f)}}}return s1={Generator:d},s1}var ri={},Vc={},Z2;function iI(){if(Z2)return Vc;Z2=1,Object.defineProperty(Vc,"__esModule",{value:!0}),Vc.BlankNode=void 0;class i{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return Vc.BlankNode=i,Vc}var Gc={},Xc={},k2;function aI(){if(k2)return Xc;k2=1,Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.DefaultGraph=void 0;class i{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return Xc.DefaultGraph=i,i.INSTANCE=new i,Xc}var zc={},Hc={},eO;function W0(){if(eO)return Hc;eO=1,Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.NamedNode=void 0;class i{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return Hc.NamedNode=i,Hc}var tO;function oI(){if(tO)return zc;tO=1,Object.defineProperty(zc,"__esModule",{value:!0}),zc.Literal=void 0;const i=W0();class r{constructor(n,t){this.termType="Literal",this.value=n,typeof t=="string"?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return zc.Literal=r,r.RDF_LANGUAGE_STRING=new i.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new i.NamedNode("http://www.w3.org/2001/XMLSchema#string"),zc}var $c={},rO;function uI(){if(rO)return $c;rO=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.Quad=void 0;class i{constructor(o,n,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=n,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return $c.Quad=i,$c}var Jc={},nO;function sI(){if(nO)return Jc;nO=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.Variable=void 0;class i{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return Jc.Variable=i,Jc}var iO;function Px(){if(iO)return Gc;iO=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.DataFactory=void 0;const i=iI(),r=aI(),o=oI(),n=W0(),t=uI(),e=sI();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new i.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return r.DefaultGraph.INSTANCE}quad(s,l,d,f){return new t.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Gc.DataFactory=u,Gc}var aO;function Mx(){return aO||(aO=1,(function(i){var r=ri&&ri.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ri&&ri.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(iI(),i),o(Px(),i),o(aI(),i),o(oI(),i),o(W0(),i),o(uI(),i),o(sI(),i)})(ri)),ri}var c1,oO;function Kg(){if(oO)return c1;oO=1;const{Parser:i}=Rx(),{Generator:r}=Dx(),{Wildcard:o}=nI(),{DataFactory:n}=Mx();function t({prefixes:e,baseIRI:a,factory:u,pathOnly:c,sparqlStar:s,skipValidation:l,skipUngroupedVariableCheck:d}={}){const f={};for(const p in e??{})f[p]=e[p];const h=new i;return h.parse=function(){return i.base=a||"",i.prefixes=Object.create(f),i.factory=u||new n,i.sparqlStar=!!s,i.pathOnly=!!c,i.skipValidation=!!l||!!d,i.prototype.parse.apply(h,arguments)},h._resetBlanks=i._resetBlanks,h}return c1={Parser:t,Generator:r,Wildcard:o},c1}var uO;function Yg(){if(uO)return Hr;uO=1;var i=Hr&&Hr.__createBinding||(Object.create?(function(c,s,l,d){d===void 0&&(d=l);var f=Object.getOwnPropertyDescriptor(s,l);(!f||("get"in f?!s.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(c,d,f)}):(function(c,s,l,d){d===void 0&&(d=l),c[d]=s[l]})),r=Hr&&Hr.__setModuleDefault||(Object.create?(function(c,s){Object.defineProperty(c,"default",{enumerable:!0,value:s})}):function(c,s){c.default=s}),o=Hr&&Hr.__importStar||function(c){if(c&&c.__esModule)return c;var s={};if(c!=null)for(var l in c)l!=="default"&&Object.prototype.hasOwnProperty.call(c,l)&&i(s,c,l);return r(s,c),s};Object.defineProperty(Hr,"__esModule",{value:!0});const n=o(Am()),t=fs(),e=Jg(),a=Kg();class u{constructor(s){this.dataFactory=s||new t.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(s,l=!0){return this.flattenMulti({type:n.types.ALT,input:s},l)}createAsk(s){return{type:n.types.ASK,input:s}}createBoundAggregate(s,l,d,f,h){const p=this.createAggregateExpression(l,d,f,h);return p.variable=s,p}createBgp(s){return{type:n.types.BGP,patterns:s}}createConstruct(s,l){return{type:n.types.CONSTRUCT,input:s,template:l}}createDescribe(s,l){return{type:n.types.DESCRIBE,input:s,terms:l}}createDistinct(s){return{type:n.types.DISTINCT,input:s}}createExtend(s,l,d){return{type:n.types.EXTEND,input:s,variable:l,expression:d}}createFrom(s,l,d){return{type:n.types.FROM,input:s,default:l,named:d}}createFilter(s,l){return{type:n.types.FILTER,input:s,expression:l}}createGraph(s,l){return{type:n.types.GRAPH,input:s,name:l}}createGroup(s,l,d){return{type:n.types.GROUP,input:s,variables:l,aggregates:d}}createInv(s){return{type:n.types.INV,path:s}}createJoin(s,l=!0){return this.flattenMulti({type:n.types.JOIN,input:s},l)}createLeftJoin(s,l,d){return d?{type:n.types.LEFT_JOIN,input:[s,l],expression:d}:{type:n.types.LEFT_JOIN,input:[s,l]}}createLink(s){return{type:n.types.LINK,iri:s}}createMinus(s,l){return{type:n.types.MINUS,input:[s,l]}}createNop(){return{type:n.types.NOP}}createNps(s){return{type:n.types.NPS,iris:s}}createOneOrMorePath(s){return{type:n.types.ONE_OR_MORE_PATH,path:s}}createOrderBy(s,l){return{type:n.types.ORDER_BY,input:s,expressions:l}}createPath(s,l,d,f){return f?{type:n.types.PATH,subject:s,predicate:l,object:d,graph:f}:{type:n.types.PATH,subject:s,predicate:l,object:d,graph:this.dataFactory.defaultGraph()}}createPattern(s,l,d,f){const h=this.dataFactory.quad(s,l,d,f);return h.type=n.types.PATTERN,h}createProject(s,l){return{type:n.types.PROJECT,input:s,variables:l}}createReduced(s){return{type:n.types.REDUCED,input:s}}createSeq(s,l=!0){return this.flattenMulti({type:n.types.SEQ,input:s},l)}createService(s,l,d){return{type:n.types.SERVICE,input:s,name:l,silent:!!d}}createSlice(s,l,d){return l=l||0,d!==void 0?{type:n.types.SLICE,input:s,start:l,length:d}:{type:n.types.SLICE,input:s,start:l}}createUnion(s,l=!0){return this.flattenMulti({type:n.types.UNION,input:s},l)}createValues(s,l){return{type:n.types.VALUES,variables:s,bindings:l}}createZeroOrMorePath(s){return{type:n.types.ZERO_OR_MORE_PATH,path:s}}createZeroOrOnePath(s){return{type:n.types.ZERO_OR_ONE_PATH,path:s}}createAggregateExpression(s,l,d,f){return f?{type:n.types.EXPRESSION,expressionType:n.expressionTypes.AGGREGATE,aggregator:s,expression:l,separator:f,distinct:d}:{type:n.types.EXPRESSION,expressionType:n.expressionTypes.AGGREGATE,aggregator:s,expression:l,distinct:d}}createExistenceExpression(s,l){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.EXISTENCE,not:s,input:l}}createNamedExpression(s,l){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.NAMED,name:s,args:l}}createOperatorExpression(s,l){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.OPERATOR,operator:s,args:l}}createTermExpression(s){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.TERM,term:s}}createWildcardExpression(){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.WILDCARD,wildcard:new a.Wildcard}}createTerm(s){return s[0]==="$"&&(s=s.replace("$","?")),(0,e.stringToTerm)(s,this.dataFactory)}createCompositeUpdate(s){return{type:n.types.COMPOSITE_UPDATE,updates:s}}createDeleteInsert(s,l,d){const f={type:n.types.DELETE_INSERT};return s&&(f.delete=s),l&&(f.insert=l),d&&(f.where=d),f}createLoad(s,l,d){const f={type:n.types.LOAD,source:s};return l&&(f.destination=l),this.addSilent(f,!!d)}createClear(s,l){return this.addSilent({type:n.types.CLEAR,source:s},!!l)}createCreate(s,l){return this.addSilent({type:n.types.CREATE,source:s},!!l)}createDrop(s,l){return this.addSilent({type:n.types.DROP,source:s},!!l)}createAdd(s,l,d){return this.addSilent({type:n.types.ADD,source:s,destination:l},!!d)}createMove(s,l,d){return this.addSilent({type:n.types.MOVE,source:s,destination:l},!!d)}createCopy(s,l,d){return this.addSilent({type:n.types.COPY,source:s,destination:l},!!d)}addSilent(s,l){return l&&(s.silent=l),s}flattenMulti(s,l){if(!l)return s;const d=s.type,f=s.input;let h=[];for(const p of f)p.type===d?h.push(...p.input):h.push(p);return s.input=h,s}}return Hr.default=u,Hr}var Ms={},ni={},ot={},sO;function Nx(){if(sO)return ot;sO=1,Object.defineProperty(ot,"__esModule",{value:!0}),ot.TRIPLE_TERM_NAMES=ot.QUAD_TERM_NAMES=void 0,ot.getTerms=o,ot.getTermsNested=n,ot.getNamedTerms=t,ot.collectNamedTerms=e,ot.forEachTerms=a,ot.forEachTermsNested=u,ot.filterTerms=c,ot.filterTermsNested=s,ot.filterQuadTermNames=l,ot.filterQuadTermNamesNested=d,ot.mapTerms=f,ot.mapTermsNested=h,ot.reduceTerms=p,ot.reduceTermsNested=y,ot.everyTerms=b,ot.everyTermsNested=v,ot.someTerms=F,ot.someTermsNested=T,ot.getValueNestedPath=S,ot.matchTerm=j,ot.matchPattern=E,ot.matchPatternComplete=U,ot.matchPatternMappings=K;const i=fs(),r=new i.DataFactory;ot.QUAD_TERM_NAMES=["subject","predicate","object","graph"],ot.TRIPLE_TERM_NAMES=["subject","predicate","object"];function o(_,O){return O&&_.graph.termType==="DefaultGraph"?[_.subject,_.predicate,_.object]:[_.subject,_.predicate,_.object,_.graph]}function n(_,O){const P=[];for(const R of o(_,O))R.termType==="Quad"?n(R,O).forEach(I=>P.push(I)):P.push(R);return P}function t(_){return[{key:"subject",value:_.subject},{key:"predicate",value:_.predicate},{key:"object",value:_.object},{key:"graph",value:_.graph}]}function e(_,O,P){const R={};return _.forEach(I=>R[I.key]=I.value),O&&(R.subject=R.subject||O("subject"),R.predicate=R.predicate||O("predicate"),R.object=R.object||O("object"),R.graph=R.graph||O("graph")),(P||r).quad(R.subject,R.predicate,R.object,R.graph)}function a(_,O){O(_.subject,"subject"),O(_.predicate,"predicate"),O(_.object,"object"),O(_.graph,"graph")}function u(_,O,P=[]){_.subject.termType==="Quad"?u(_.subject,O,[...P,"subject"]):O(_.subject,[...P,"subject"]),_.predicate.termType==="Quad"?u(_.predicate,O,[...P,"predicate"]):O(_.predicate,[...P,"predicate"]),_.object.termType==="Quad"?u(_.object,O,[...P,"object"]):O(_.object,[...P,"object"]),_.graph.termType==="Quad"?u(_.graph,O,[...P,"graph"]):O(_.graph,[...P,"graph"])}function c(_,O){const P=[];return O(_.subject,"subject")&&P.push(_.subject),O(_.predicate,"predicate")&&P.push(_.predicate),O(_.object,"object")&&P.push(_.object),O(_.graph,"graph")&&P.push(_.graph),P}function s(_,O,P=[]){let R=[];return _.subject.termType==="Quad"?R=[...R,...s(_.subject,O,[...P,"subject"])]:O(_.subject,[...P,"subject"])&&R.push(_.subject),_.predicate.termType==="Quad"?R=[...R,...s(_.predicate,O,[...P,"predicate"])]:O(_.predicate,[...P,"predicate"])&&R.push(_.predicate),_.object.termType==="Quad"?R=[...R,...s(_.object,O,[...P,"object"])]:O(_.object,[...P,"object"])&&R.push(_.object),_.graph.termType==="Quad"?R=[...R,...s(_.graph,O,[...P,"graph"])]:O(_.graph,[...P,"graph"])&&R.push(_.graph),R}function l(_,O){const P=[];return O(_.subject,"subject")&&P.push("subject"),O(_.predicate,"predicate")&&P.push("predicate"),O(_.object,"object")&&P.push("object"),O(_.graph,"graph")&&P.push("graph"),P}function d(_,O,P=[]){let R=[];const I=[...P,"subject"];_.subject.termType==="Quad"?R=[...R,...d(_.subject,O,I)]:O(_.subject,I)&&R.push(I);const C=[...P,"predicate"];_.predicate.termType==="Quad"?R=[...R,...d(_.predicate,O,C)]:O(_.predicate,C)&&R.push(C);const Y=[...P,"object"];_.object.termType==="Quad"?R=[...R,...d(_.object,O,Y)]:O(_.object,Y)&&R.push(Y);const H=[...P,"graph"];return _.graph.termType==="Quad"?R=[...R,...d(_.graph,O,H)]:O(_.graph,H)&&R.push(H),R}function f(_,O,P){return(P||r).quad(O(_.subject,"subject"),O(_.predicate,"predicate"),O(_.object,"object"),O(_.graph,"graph"))}function h(_,O,P,R=[]){return(P||r).quad(_.subject.termType==="Quad"?h(_.subject,O,P,[...R,"subject"]):O(_.subject,[...R,"subject"]),_.predicate.termType==="Quad"?h(_.predicate,O,P,[...R,"predicate"]):O(_.predicate,[...R,"predicate"]),_.object.termType==="Quad"?h(_.object,O,P,[...R,"object"]):O(_.object,[...R,"object"]),_.graph.termType==="Quad"?h(_.graph,O,P,[...R,"graph"]):O(_.graph,[...R,"graph"]))}function p(_,O,P){let R=P;return R=O(R,_.subject,"subject"),R=O(R,_.predicate,"predicate"),R=O(R,_.object,"object"),O(R,_.graph,"graph")}function y(_,O,P,R=[]){let I=P;return _.subject.termType==="Quad"?I=y(_.subject,O,I,[...R,"subject"]):I=O(I,_.subject,[...R,"subject"]),_.predicate.termType==="Quad"?I=y(_.predicate,O,I,[...R,"predicate"]):I=O(I,_.predicate,[...R,"predicate"]),_.object.termType==="Quad"?I=y(_.object,O,I,[...R,"object"]):I=O(I,_.object,[...R,"object"]),_.graph.termType==="Quad"?I=y(_.graph,O,I,[...R,"graph"]):I=O(I,_.graph,[...R,"graph"]),I}function b(_,O){return O(_.subject,"subject")&&O(_.predicate,"predicate")&&O(_.object,"object")&&O(_.graph,"graph")}function v(_,O,P=[]){return(_.subject.termType==="Quad"?v(_.subject,O,[...P,"subject"]):O(_.subject,[...P,"subject"]))&&(_.predicate.termType==="Quad"?v(_.predicate,O,[...P,"predicate"]):O(_.predicate,[...P,"predicate"]))&&(_.object.termType==="Quad"?v(_.object,O,[...P,"object"]):O(_.object,[...P,"object"]))&&(_.graph.termType==="Quad"?v(_.graph,O,[...P,"graph"]):O(_.graph,[...P,"graph"]))}function F(_,O){return O(_.subject,"subject")||O(_.predicate,"predicate")||O(_.object,"object")||O(_.graph,"graph")}function T(_,O,P=[]){return(_.subject.termType==="Quad"?T(_.subject,O,[...P,"subject"]):O(_.subject,[...P,"subject"]))||(_.predicate.termType==="Quad"?T(_.predicate,O,[...P,"predicate"]):O(_.predicate,[...P,"predicate"]))||(_.object.termType==="Quad"?T(_.object,O,[...P,"object"]):O(_.object,[...P,"object"]))||(_.graph.termType==="Quad"?T(_.graph,O,[...P,"graph"]):O(_.graph,[...P,"graph"]))}function S(_,O){if(O.length===0)return _;if(_.termType==="Quad")return S(_[O[0]],O.slice(1));throw new Error(`Tried to get ${O[0]} from term of type ${_.termType}`)}function j(_,O){return!O||O.termType==="Variable"||O.termType==="Quad"&&_.termType==="Quad"&&U(_,O)||O.equals(_)}function E(_,O,P,R,I){return j(_.subject,O)&&j(_.predicate,P)&&j(_.object,R)&&j(_.graph,I)}function U(_,O){return E(_,O.subject,O.predicate,O.object,O.graph)}function K(_,O,P={}){const R={};function I(C,Y){return b(C,(H,Z)=>{var le,ce;const ee=Y[Z];switch(H.termType){case"Variable":return P.skipVarMapping&&ee.termType==="Variable"||((ce=(le=R[H.value])===null||le===void 0?void 0:le.equals(ee))!==null&&ce!==void 0?ce:(R[H.value]=ee,!0));case"Quad":return ee.termType==="Quad"&&I(H,ee);default:return H.equals(ee)}})}return I(O,_)&&(P.returnMappings?R:!0)}return ot}var mr={},cO;function Ix(){if(cO)return mr;cO=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.TERM_TYPES=void 0,mr.uniqTerms=r,mr.getTermsOfType=o,mr.getNamedNodes=n,mr.getBlankNodes=t,mr.getLiterals=e,mr.getVariables=a,mr.getDefaultGraphs=u,mr.getQuads=c;const i=Jg();mr.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function r(s){const l={};return s.filter(d=>{const f=(0,i.termToString)(d);return!(f in l)&&(l[f]=!0)})}function o(s,l){return s.filter(d=>d.termType===l)}function n(s){return o(s,"NamedNode")}function t(s){return o(s,"BlankNode")}function e(s){return o(s,"Literal")}function a(s){return o(s,"Variable")}function u(s){return o(s,"DefaultGraph")}function c(s){return o(s,"Quad")}return mr}var lO;function qx(){return lO||(lO=1,(function(i){var r=ni&&ni.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ni&&ni.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Nx(),i),o(Ix(),i)})(ni)),ni}var dO;function Z0(){if(dO)return Ms;dO=1;var i=Ms&&Ms.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ms,"__esModule",{value:!0});const r=Am(),o=i(Yg()),n=qx();class t{static flatten(a){return Array.prototype.concat(...a).filter(u=>u)}static objectify(a){if(a.termType){if(a.termType==="Quad")return{type:"pattern",termType:"Quad",subject:t.objectify(a.subject),predicate:t.objectify(a.predicate),object:t.objectify(a.object),graph:t.objectify(a.graph)};{let u={termType:a.termType,value:a.value};return a.language&&(u.language=a.language),a.datatype&&(u.datatype=t.objectify(a.datatype)),u}}if(Array.isArray(a))return a.map(u=>t.objectify(u));if(a===Object(a)){let u={};for(let c of Object.keys(a))u[c]=t.objectify(a[c]);return u}return a}static inScopeVariables(a){const u=[];function c(l){u.find(d=>l.value===d.value)||u.push(l)}function s(l){l.subject.termType==="Variable"&&c(l.subject),l.predicate.termType==="Variable"&&c(l.predicate),l.object.termType==="Variable"&&c(l.object),l.graph.termType==="Variable"&&c(l.graph),l.subject.termType==="Quad"&&s(l.subject),l.predicate.termType==="Quad"&&s(l.predicate),l.object.termType==="Quad"&&s(l.object),l.graph.termType==="Quad"&&s(l.graph)}return t.recurseOperation(a,{[r.types.EXPRESSION]:l=>(l.expressionType===r.expressionTypes.AGGREGATE&&l.variable&&c(l.variable),!0),[r.types.EXTEND]:l=>(c(l.variable),!0),[r.types.GRAPH]:l=>(l.name.termType==="Variable"&&c(l.name),!0),[r.types.GROUP]:l=>(l.variables.forEach(c),!0),[r.types.PATH]:l=>(l.subject.termType==="Variable"&&c(l.subject),l.object.termType==="Variable"&&c(l.object),l.graph.termType==="Variable"&&c(l.graph),l.subject.termType==="Quad"&&s(l.subject),l.object.termType==="Quad"&&s(l.object),l.graph.termType==="Quad"&&s(l.graph),!0),[r.types.PATTERN]:l=>(s(l),!0),[r.types.PROJECT]:l=>(l.variables.forEach(c),!1),[r.types.SERVICE]:l=>(l.name.termType==="Variable"&&c(l.name),!0),[r.types.VALUES]:l=>(l.variables.forEach(c),!0)}),u}static recurseOperation(a,u){let c=a,s=!0;const l=u[a.type];if(l&&(s=l(a)),!s)return;let d=f=>t.recurseOperation(f,u);switch(c.type){case r.types.ALT:c.input.map(d);break;case r.types.ASK:d(c.input);break;case r.types.BGP:c.patterns.forEach(d);break;case r.types.CONSTRUCT:d(c.input),c.template.map(d);break;case r.types.DESCRIBE:d(c.input);break;case r.types.DISTINCT:d(c.input);break;case r.types.EXPRESSION:c.expressionType===r.expressionTypes.EXISTENCE&&d(c.input);break;case r.types.EXTEND:d(c.input),d(c.expression);break;case r.types.FILTER:d(c.input),d(c.expression);break;case r.types.FROM:d(c.input);break;case r.types.GRAPH:d(c.input);break;case r.types.GROUP:d(c.input),c.aggregates.forEach(d);break;case r.types.INV:d(c.path);break;case r.types.JOIN:c.input.map(d);break;case r.types.LEFT_JOIN:c.input.map(d),c.expression&&d(c.expression);break;case r.types.LINK:break;case r.types.MINUS:c.input.map(d);break;case r.types.NOP:break;case r.types.NPS:break;case r.types.ONE_OR_MORE_PATH:d(c.path);break;case r.types.ORDER_BY:d(c.input),c.expressions.forEach(d);break;case r.types.PATH:d(c.predicate);break;case r.types.PATTERN:break;case r.types.PROJECT:d(c.input);break;case r.types.REDUCED:d(c.input);break;case r.types.SEQ:c.input.map(d);break;case r.types.SERVICE:d(c.input);break;case r.types.SLICE:d(c.input);break;case r.types.UNION:c.input.map(d);break;case r.types.VALUES:break;case r.types.ZERO_OR_MORE_PATH:d(c.path);break;case r.types.ZERO_OR_ONE_PATH:d(c.path);break;case r.types.COMPOSITE_UPDATE:c.updates.forEach(f=>d(f));break;case r.types.DELETE_INSERT:c.delete&&c.delete.forEach(f=>d(f)),c.insert&&c.insert.forEach(f=>d(f)),c.where&&d(c.where);break;case r.types.LOAD:break;case r.types.CLEAR:break;case r.types.CREATE:break;case r.types.DROP:break;case r.types.ADD:break;case r.types.MOVE:break;case r.types.COPY:break;default:throw new Error(`Unknown Operation type ${c.type}`)}}static mapOperation(a,u,c){let s=a,l=!0,d=!0;c=c||new o.default;const f=u[a.type];if(f){const y=f(a,c);s=y.result,l=y.recurse,d=y.copyMetadata!==!1}let h;if(d&&(s.metadata||a.metadata)&&(h={...s.metadata,...a.metadata}),!l)return h&&(s.metadata=h),s;let p=y=>t.mapOperation(y,u,c);switch(s.type){case r.types.ALT:s=c.createAlt(s.input.map(p));break;case r.types.ASK:s=c.createAsk(p(s.input));break;case r.types.BGP:s=c.createBgp(s.patterns.map(p));break;case r.types.CONSTRUCT:s=c.createConstruct(p(s.input),s.template.map(p));break;case r.types.DESCRIBE:s=c.createDescribe(p(s.input),s.terms);break;case r.types.DISTINCT:s=c.createDistinct(p(s.input));break;case r.types.EXPRESSION:s=t.mapExpression(s,u,c);break;case r.types.EXTEND:s=c.createExtend(p(s.input),s.variable,p(s.expression));break;case r.types.FILTER:s=c.createFilter(p(s.input),p(s.expression));break;case r.types.FROM:s=c.createFrom(p(s.input),[...s.default],[...s.named]);break;case r.types.GRAPH:s=c.createGraph(p(s.input),s.name);break;case r.types.GROUP:s=c.createGroup(p(s.input),[].concat(s.variables),s.aggregates.map(p));break;case r.types.INV:s=c.createInv(p(s.path));break;case r.types.JOIN:s=c.createJoin(s.input.map(p));break;case r.types.LEFT_JOIN:s=c.createLeftJoin(p(s.input[0]),p(s.input[1]),s.expression?p(s.expression):void 0);break;case r.types.LINK:s=c.createLink(s.iri);break;case r.types.MINUS:s=c.createMinus(p(s.input[0]),p(s.input[1]));break;case r.types.NOP:s=c.createNop();break;case r.types.NPS:s=c.createNps([].concat(s.iris));break;case r.types.ONE_OR_MORE_PATH:s=c.createOneOrMorePath(p(s.path));break;case r.types.ORDER_BY:s=c.createOrderBy(p(s.input),s.expressions.map(p));break;case r.types.PATH:s=c.createPath(s.subject,p(s.predicate),s.object,s.graph);break;case r.types.PATTERN:s=c.createPattern(s.subject,s.predicate,s.object,s.graph);break;case r.types.PROJECT:s=c.createProject(p(s.input),[...s.variables]);break;case r.types.REDUCED:s=c.createReduced(p(s.input));break;case r.types.SEQ:s=c.createSeq(s.input.map(p));break;case r.types.SERVICE:s=c.createService(p(s.input),s.name,s.silent);break;case r.types.SLICE:s=c.createSlice(p(s.input),s.start,s.length);break;case r.types.UNION:s=c.createUnion(s.input.map(p));break;case r.types.VALUES:s=c.createValues([].concat(s.variables),s.bindings.map(y=>Object.assign({},y)));break;case r.types.ZERO_OR_MORE_PATH:s=c.createZeroOrMorePath(p(s.path));break;case r.types.ZERO_OR_ONE_PATH:s=c.createZeroOrOnePath(p(s.path));break;case r.types.COMPOSITE_UPDATE:s=c.createCompositeUpdate(s.updates.map(p));break;case r.types.DELETE_INSERT:s=c.createDeleteInsert(s.delete?s.delete.map(p):void 0,s.insert?s.insert.map(p):void 0,s.where?p(s.where):void 0);break;case r.types.LOAD:s=c.createLoad(s.source,s.destination,s.silent);break;case r.types.CLEAR:s=c.createClear(s.source,s.silent);break;case r.types.CREATE:s=c.createCreate(s.source,s.silent);break;case r.types.DROP:s=c.createDrop(s.source,s.silent);break;case r.types.ADD:s=c.createAdd(s.source,s.destination);break;case r.types.MOVE:s=c.createMove(s.source,s.destination);break;case r.types.COPY:s=c.createCopy(s.source,s.destination);break;default:throw new Error(`Unknown Operation type ${s.type}`)}return h&&(s.metadata=h),s}static mapExpression(a,u,c){let s=a,l=!0;c=c||new o.default;const d=u[a.expressionType];if(d&&({result:s,recurse:l}=d(a,c)),!l)return s;let f=h=>t.mapOperation(h,u,c);switch(a.expressionType){case r.expressionTypes.AGGREGATE:return a.variable?c.createBoundAggregate(a.variable,a.aggregator,f(a.expression),a.distinct,a.separator):c.createAggregateExpression(a.aggregator,f(a.expression),a.distinct,a.separator);case r.expressionTypes.EXISTENCE:return c.createExistenceExpression(a.not,f(a.input));case r.expressionTypes.NAMED:return c.createNamedExpression(a.name,a.args.map(f));case r.expressionTypes.OPERATOR:return c.createOperatorExpression(a.operator,a.args.map(f));case r.expressionTypes.TERM:return c.createTermExpression(a.term);case r.expressionTypes.WILDCARD:return c.createWildcardExpression();default:throw new Error(`Unknown Expression type ${a.expressionType}`)}}static cloneOperation(a){return t.mapOperation(a,{})}static cloneExpression(a){return t.mapExpression(a,{})}static createUniqueVariable(a,u,c){let s=0,l=a;for(;u[l];)l=`${a}${s++}`;return c.variable(l)}static isSimpleTerm(a){return a.termType!==void 0&&a.termType!=="Quad"&&a.termType!=="Wildcard"}static isQuad(a){return a.termType==="Quad"}static hasQuadVariables(a){return(0,n.someTermsNested)(a,u=>u.termType==="Variable")}static isWildcard(a){return a.termType==="Wildcard"}}return Ms.default=t,Ms}var fO;function Lx(){if(fO)return Ar;fO=1;var i=Ar&&Ar.__createBinding||(Object.create?(function(m,A,g,w){w===void 0&&(w=g);var D=Object.getOwnPropertyDescriptor(A,g);(!D||("get"in D?!A.__esModule:D.writable||D.configurable))&&(D={enumerable:!0,get:function(){return A[g]}}),Object.defineProperty(m,w,D)}):(function(m,A,g,w){w===void 0&&(w=g),m[w]=A[g]})),r=Ar&&Ar.__setModuleDefault||(Object.create?(function(m,A){Object.defineProperty(m,"default",{enumerable:!0,value:A})}):function(m,A){m.default=A}),o=Ar&&Ar.__importStar||function(m){if(m&&m.__esModule)return m;var A={};if(m!=null)for(var g in m)g!=="default"&&Object.prototype.hasOwnProperty.call(m,g)&&i(A,m,g);return r(A,m),A},n=Ar&&Ar.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(Ar,"__esModule",{value:!0});const t=Ex(),e=Jg(),a=o(Am()),u=n(Yg()),c=n(Z0()),s=Kg().Parser,l=a.types;let d=new Set,f=0,h=!1,p;function y(m,A){A=A||{},p=new u.default(A.dataFactory);let g;if(v(m)){let w=new s(A);w._resetBlanks(),g=w.parse(m)}else g=m;return b(g,A.quads,A.blankToVariable)}Ar.default=y;function b(m,A,g){if(d=new Set,f=0,h=!!A,!m.type)return p.createNop();if(m.type!=="query"&&m.type!=="update")throw new Error("Translate only works on complete query or update objects.");let w;if(j(m),m.type==="query"){const D={type:"group",patterns:m.where||[]};w=U(D),w=ee(m,w)}else m.type==="update"&&(w=ue(m));return g&&(w=N(w)),w}function v(m){return typeof m=="string"}function F(m){return!!m?.termType}function T(m){return m.subject&&m.predicate&&m.object}function S(m){return m?.termType==="Variable"}function j(m){if(F(m))S(m)&&d.add(`?${m.value}`);else if(Array.isArray(m))for(const A of m)j(A);else if(m&&typeof m=="object")for(let A of Object.keys(m))A.startsWith("?")?d.add(A):A.startsWith("$")&&d.add(`?${A.slice(1)}`),j(m[A])}function E(m){let A={};if(T(m)){const g=[E(m.subject),E(m.predicate),E(m.object),m.graph?E(m.graph):{}];Object.assign(A,...g)}else if(F(m))S(m)&&(A[m.value]=m);else if(m.type==="bgp"){const g=m.triples;Object.assign(A,...g.map(E))}else if(m.type==="path")Object.assign(A,...m.items.map(E));else if(m.type==="group"||m.type==="union"||m.type==="optional")Object.assign(A,...m.patterns.map(E));else if(m.type==="service"||m.type==="graph")Object.assign(A,E(m.name)),Object.assign(A,...m.patterns.map(E));else if(m.type==="bind")Object.assign(A,E(m.variable));else if(m.type==="values"){if(m.values.length>0){const g=Object.keys(m.values[0]).map(w=>p.createTerm(w));Object.assign(A,...g.map(E))}}else if(m.type==="query"&&(m.queryType==="SELECT"||m.queryType==="DESCRIBE")){m.where&&m.variables.some(c.default.isWildcard)&&Object.assign(A,...m.where.map(E));for(const g of m.variables)S(g)?Object.assign(A,E(g)):g.variable&&Object.assign(A,E(g.variable));if(m.queryType==="SELECT"){if(m.group)for(const g of m.group)g.variable&&Object.assign(A,E(g.variable));if(m.values){const g={type:"values",values:m.values};Object.assign(A,E(g))}}}return A}function U(m){if(m.type==="bgp")return _(m);if(m.type==="union")return p.createUnion(m.patterns.map(A=>(A.type!=="group"&&(A={type:"group",patterns:[A]}),U(A))));if(m.type==="graph"){const A={type:"group",patterns:m.patterns};let g=U(A);return h?g=H(g,m.name):g=p.createGraph(g,m.name),g}if(m.type==="values")return ce(m);if(m.type==="query")return b(m,h,!1);if(m.type==="group"){let A=[],g=[];for(let B of m.patterns)(B.type==="filter"?A:g).push(B);let w=g.reduce(Z,p.createBgp([])),D=A.map(B=>K(B.expression));return D.length>0&&(w=p.createFilter(w,D.reduce((B,q)=>p.createOperatorExpression("&&",[B,q])))),w}throw new Error(`Unexpected type: ${m.type}`)}function K(m){if(c.default.isSimpleTerm(m))return p.createTermExpression(m);if(c.default.isQuad(m))return c.default.hasQuadVariables(m)?p.createOperatorExpression("triple",[K(m.subject),K(m.predicate),K(m.object)]):p.createTermExpression(m);if(c.default.isWildcard(m))return p.createWildcardExpression();if("aggregation"in m)return p.createAggregateExpression(m.aggregation,K(m.expression),!!m.distinct,m.separator);if("function"in m)return p.createNamedExpression(m.function,m.args.map(K));if("operator"in m)return m.operator==="exists"||m.operator==="notexists"?p.createExistenceExpression(m.operator==="notexists",U(m.args[0])):((m.operator==="in"||m.operator==="notin")&&(m.args=[m.args[0]].concat(m.args[1])),p.createOperatorExpression(m.operator,m.args.map(K)));throw new Error(`Unknown expression: ${JSON.stringify(m)}`)}function _(m){let A=[],g=[];for(let w of m.triples)if("pathType"in w.predicate){let D=O(w);for(let B of D)B.type===l.PATH?(A.length>0&&g.push(p.createBgp(A)),A=[],g.push(B)):A.push(B)}else A.push(C(w));return A.length>0&&g.push(p.createBgp(A)),g.length===1?g[0]:p.createJoin(g)}function O(m){let A=m.subject,g=P(m.predicate),w=m.object;return R(A,g,w)}function P(m){if(c.default.isSimpleTerm(m)){if(m.termType==="NamedNode")return p.createLink(m);throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(m)}`)}if(m.pathType==="^")return p.createInv(P(m.items[0]));if(m.pathType==="!"){let A=[],g=[],w;"pathType"in m.items[0]&&m.items[0].pathType==="|"?w=m.items[0].items:w=m.items;for(let q of w)if(c.default.isSimpleTerm(q))A.push(q);else if(q.pathType==="^")g.push(q.items[0]);else throw new Error(`Unexpected item: ${JSON.stringify(q)}`);let D=p.createNps(A),B=p.createInv(p.createNps(g));return g.length===0?D:A.length===0?B:p.createAlt([D,B])}if(m.pathType==="/")return p.createSeq(m.items.map(P));if(m.pathType==="|")return p.createAlt(m.items.map(P));if(m.pathType==="*")return p.createZeroOrMorePath(P(m.items[0]));if(m.pathType==="+")return p.createOneOrMorePath(P(m.items[0]));if(m.pathType==="?")return p.createZeroOrOnePath(P(m.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(m)}`)}function R(m,A,g){if(A.type===l.LINK)return[p.createPattern(m,A.iri,g)];if(A.type===l.INV)return R(g,A.path,m);if(A.type===l.SEQ){let w=m;return c.default.flatten(A.input.map((D,B)=>{const q=B===A.input.length-1?g:I(),Q=R(w,D,q);return q.termType==="Variable"&&(w=q),Q}))}return[p.createPath(m,A,g)]}function I(){let m=`?var${f++}`;return d.has(m)?I():(d.add(m),p.createTerm(m))}function C(m){if("pathType"in m.predicate)throw new Error("Trying to translate property path to quad.");return p.createPattern(m.subject,m.predicate,m.object,m.graph)}let Y=Object.values(l);function H(m,A,g){if(m.type===l.GRAPH){if(g)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");m=H(m.input,m.name)}else if(m.type!==l.SERVICE)if(m.type===l.BGP)m.patterns=m.patterns.map(w=>(g&&(w.subject.equals(A)&&(w.subject=g),w.predicate.equals(A)&&(w.predicate=g),w.object.equals(A)&&(w.object=g)),w.graph.termType==="DefaultGraph"&&(w.graph=A),w));else if(m.type===l.PATH)g&&(m.subject.equals(A)&&(m.subject=g),m.object.equals(A)&&(m.object=g)),m.graph.termType==="DefaultGraph"&&(m.graph=A);else if(m.type===l.PROJECT&&!g)m.variables.some(w=>w.equals(A))||(g=I()),m.input=H(m.input,A,g);else if(m.type===l.EXTEND&&!g)m.variable.equals(A)&&(g=I()),m.input=H(m.input,A,g);else if(m.type===l.MINUS&&A.termType==="Variable")m.metadata={graphVariableFromParentScope:A},m.input=[H(m.input[0],A,g),H(m.input[1],A,g)];else for(let w of Object.keys(m))Array.isArray(m[w])?m[w]=m[w].map(D=>H(D,A,g)):Y.indexOf(m[w].type)>=0?m[w]=H(m[w],A,g):g&&S(m[w])&&m[w].equals(A)&&(m[w]=g);return m}function Z(m,A){if(A.type==="optional"){const g=U({type:"group",patterns:A.patterns});g.type===l.FILTER?m=p.createLeftJoin(m,g.input,g.expression):m=p.createLeftJoin(m,g)}else if(A.type==="minus"){const g=U({type:"group",patterns:A.patterns});m=p.createMinus(m,g)}else if(A.type==="bind")m=p.createExtend(m,A.variable,K(A.expression));else if(A.type==="service"){const g={type:"group",patterns:A.patterns},w=p.createService(U(g),A.name,A.silent);m=le(m,w)}else{const g=U(A);m=le(m,g)}return m}function le(m,A){return m.type===l.BGP&&A.type===l.BGP?m=p.createBgp([...m.patterns,...A.patterns]):m.type===l.BGP&&m.patterns.length===0?m=A:A.type===l.BGP&&A.patterns.length===0||(m=p.createJoin([m,A])),m}function ce(m){let A=(m.values.length===0?[]:Object.keys(m.values[0])).map(p.createTerm.bind(p)),g=m.values.map(w=>{let D=Object.keys(w);D=D.filter(q=>w[q]!==void 0);let B={};for(let q of D)B[q]=w[q];return B});return p.createValues(A,g)}function ee(m,A){const g=m,w=[],D={};if(g.variables=g.variables&&g.variables.map(q=>Ae(q,D)),g.having=g.having&&g.having.map(q=>Ae(q,D)),g.order=g.order&&g.order.map(q=>Ae(q,D)),g.group||Object.keys(D).length>0){const q=Object.keys(D).map($=>Ee(D[$],p.createTerm($))),Q=[];if(g.group)for(const $ of g.group)if(c.default.isSimpleTerm($.expression))Q.push($.expression);else{const X="variable"in $?$.variable:I();A=p.createExtend(A,X,K($.expression)),Q.push(X)}A=p.createGroup(A,Q,q)}if(g.having)for(let q of g.having)A=p.createFilter(A,K(q));m.values&&(A=p.createJoin([A,ce(m)]));let B=[];if(m.queryType==="SELECT"||m.queryType==="DESCRIBE")if(m.variables.some(q=>q&&c.default.isWildcard(q)))B=Object.values(E(m)).sort((q,Q)=>q.value.localeCompare(Q.value));else for(let q of m.variables)S(q)||!("variable"in q)?B.push(q):q.variable&&(B.push(q.variable),w.push(q));for(let q of w)A=p.createExtend(A,q.variable,K(q.expression));return g.order&&(A=p.createOrderBy(A,g.order.map(q=>{let Q=K(q.expression);return q.descending&&(Q=p.createOperatorExpression("desc",[Q])),Q}))),m.queryType==="SELECT"&&(A=p.createProject(A,B)),g.distinct&&(A=p.createDistinct(A)),g.reduced&&(A=p.createReduced(A)),m.queryType==="CONSTRUCT"?A=p.createConstruct(A,(m.template||[]).map(C)):m.queryType==="ASK"?A=p.createAsk(A):m.queryType==="DESCRIBE"&&(A=p.createDescribe(A,B)),(g.offset||g.limit)&&(A=p.createSlice(A,g.offset||0,g.limit)),g.from&&(A=p.createFrom(A,g.from.default,g.from.named)),A}function Ae(m,A){if("type"in m&&m.type==="aggregate"){let g=!1,w;for(let D of Object.keys(A))if(t(A[D],m)){w=p.createTerm(D),g=!0;break}return g||(w=I(),A[(0,e.termToString)(w)]=m),w}return"expression"in m&&m.expression?{...m,expression:Ae(m.expression,A)}:"args"in m&&m.args?{...m,args:m.args.map(g=>Ae(g,A))}:m}function Ee(m,A){if(m.type!=="aggregate"||!m.aggregation)throw new Error(`Unexpected input: ${JSON.stringify(m)}`);const g=K(m);return g.variable=A,g}function ue(m){return m.updates.length===1?oe(m.updates[0]):p.createCompositeUpdate(m.updates.map(oe))}function oe(m){if("type"in m){if(m.type==="load")return we(m);if(m.type==="clear"||m.type==="create"||m.type==="drop")return Pe(m);if(m.type==="add"||m.type==="copy"||m.type==="move")return Ie(m)}else if(m.updateType==="insertdelete"||m.updateType==="deletewhere"||m.updateType==="delete"||m.updateType==="insert")return Re(m);throw new Error(`Unknown update type ${JSON.stringify(m)}`)}function Re(m){if(!h)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");let A=[],g=[],w;if(m.delete&&(A=c.default.flatten(m.delete.map(D=>Se(D,m.graph)))),m.insert&&(g=c.default.flatten(m.insert.map(D=>Se(D,m.graph)))),m.where&&m.where.length>0){w=U({type:"group",patterns:m.where});const D=m.using;D?w=p.createFrom(w,D.default,D.named):m.graph&&(w=H(w,m.graph))}else m.updateType==="deletewhere"&&A.length>0&&(w=p.createBgp(A));return p.createDeleteInsert(A.length>0?A:void 0,g.length>0?g:void 0,w)}function Se(m,A){let g=A;m.type==="graph"&&(g=m.name);let w=m.triples;return g&&(w=w.map(D=>Object.assign(D,{graph:g}))),w.map(C)}function Pe(m){let A;switch(c.default.isSimpleTerm(m.graph)?A=m.graph:m.graph.all?A="ALL":m.graph.default?A="DEFAULT":m.graph.named?A="NAMED":A=m.graph.name,m.type){case"clear":return p.createClear(A,m.silent);case"create":return p.createCreate(A,m.silent);case"drop":return p.createDrop(A,m.silent)}}function we(m){return p.createLoad(m.source,m.destination,m.silent)}function Ie(m){const A=m.source.default?"DEFAULT":m.source.name,g=m.destination.default?"DEFAULT":m.destination.name;switch(m.type){case"copy":return p.createCopy(A,g,m.silent);case"move":return p.createMove(A,g,m.silent);case"add":return p.createAdd(A,g,m.silent)}}function N(m){const A={},g=Array.from(d).reduce((D,B)=>(D[B]=!0,D),{});return c.default.mapOperation(m,{[a.types.DELETE_INSERT]:D=>({result:p.createDeleteInsert(D.delete,D.insert,D.where&&N(D.where)),recurse:!1}),[a.types.PATH]:(D,B)=>({result:B.createPath(w(D.subject),D.predicate,w(D.object),w(D.graph)),recurse:!1}),[a.types.PATTERN]:(D,B)=>({result:B.createPattern(w(D.subject),w(D.predicate),w(D.object),w(D.graph)),recurse:!1}),[a.types.CONSTRUCT]:D=>({result:p.createConstruct(N(D.input),D.template),recurse:!1})});function w(D){if(D.termType==="BlankNode"){let B=A[D.value];return B||(B=c.default.createUniqueVariable(D.value,g,p.dataFactory),g[B.value]=!0,A[D.value]=B),B}return D.termType==="Quad"?p.dataFactory.quad(w(D.subject),w(D.predicate),w(D.object),w(D.graph)):D}}return Ar}var nr={},ii={},Nt={},l1={},qr={},pO;function xx(){if(pO)return qr;pO=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.termToString=o,qr.getLiteralValue=n,qr.getLiteralType=t,qr.getLiteralLanguage=e,qr.getLiteralDirection=a,qr.stringToTerm=u,qr.quadToStringQuad=c,qr.stringQuadToQuad=s;const i=fs(),r=new i.DataFactory;function o(l){if(l)switch(l.termType){case"NamedNode":return l.value;case"BlankNode":return"_:"+l.value;case"Literal":const d=l;return'"'+d.value+'"'+(d.datatype&&d.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+d.datatype.value:"")+(d.language?"@"+d.language:"")+(d.direction?"--"+d.direction:"");case"Quad":return`<<${o(l.subject)} ${o(l.predicate)} ${o(l.object)}${l.graph.termType==="DefaultGraph"?"":" "+o(l.graph)}>>`;case"Variable":return"?"+l.value;case"DefaultGraph":return l.value}}function n(l){const d=/^"([^]*)"/.exec(l);if(!d)throw new Error(l+" is not a literal");return d[1]}function t(l){const d=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(l);if(!d)throw new Error(l+" is not a literal");return d[1]||(d[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function e(l){const d=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(l);if(!d)throw new Error(l+" is not a literal");if(d[1]){let f=d[1].toLowerCase();const h=f.indexOf("--");return h>=0&&(f=f.slice(0,h)),f}return""}function a(l){const d=l.indexOf("--",l.lastIndexOf('"'));if(d>=0){const f=l.slice(d+2,l.length);if(f==="ltr"||f==="rtl")return f;throw new Error(l+" is not a literal with a valid direction")}return""}function u(l,d){if(d=d||r,!l||!l.length)return d.defaultGraph();switch(l[0]){case"_":return d.blankNode(l.substr(2));case"?":if(!d.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return d.variable(l.substr(1));case'"':const f=e(l),h=a(l),p=d.namedNode(t(l));return d.literal(n(l),f?{language:f,direction:h}:p);default:if(l[0]==="<"&&l.length>4&&l[1]==="<"&&l[l.length-1]===">"&&l[l.length-2]===">"){const y=l.slice(2,-2).trim();let b=[],v=0,F=0,T=!1;for(let S=0;S<y.length;S++){const j=y[S];if(j==="<"&&v++,j===">"){if(v===0)throw new Error("Found closing tag without opening tag in "+l);v--}if(j==='"'){let E=!1,U=S;for(;U-- >0&&y[U]==="\\";)E=!E;E||(T=!T)}if(j===" "&&!T&&v===0){for(b.push(y.slice(F,S));y[S+1]===" ";)S+=1;F=S+1}}if(v!==0)throw new Error("Found opening tag without closing tag in "+l);if(b.push(y.slice(F,y.length)),b.length!==3&&b.length!==4)throw new Error("Nested quad syntax error "+l);return b=b.map(S=>S.startsWith("<")&&!S.includes(" ")?S.slice(1,-1):S),d.quad(u(b[0]),u(b[1]),u(b[2]),b[3]?u(b[3]):void 0)}return d.namedNode(l)}}function c(l){return{subject:o(l.subject),predicate:o(l.predicate),object:o(l.object),graph:o(l.graph)}}function s(l,d){return d=d||r,d.quad(u(l.subject,d),u(l.predicate,d),u(l.object,d),u(l.graph,d))}return qr}var hO;function cI(){return hO||(hO=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.termToString=i.stringToTerm=i.stringQuadToQuad=i.quadToStringQuad=i.getLiteralValue=i.getLiteralType=i.getLiteralDirection=i.getLiteralLanguage=void 0;const r=xx();Object.defineProperty(i,"getLiteralLanguage",{enumerable:!0,get:function(){return r.getLiteralLanguage}}),Object.defineProperty(i,"getLiteralDirection",{enumerable:!0,get:function(){return r.getLiteralDirection}}),Object.defineProperty(i,"getLiteralType",{enumerable:!0,get:function(){return r.getLiteralType}}),Object.defineProperty(i,"getLiteralValue",{enumerable:!0,get:function(){return r.getLiteralValue}}),Object.defineProperty(i,"quadToStringQuad",{enumerable:!0,get:function(){return r.quadToStringQuad}}),Object.defineProperty(i,"stringQuadToQuad",{enumerable:!0,get:function(){return r.stringQuadToQuad}}),Object.defineProperty(i,"stringToTerm",{enumerable:!0,get:function(){return r.stringToTerm}}),Object.defineProperty(i,"termToString",{enumerable:!0,get:function(){return r.termToString}})})(l1)),l1}var ai={},ut={},yO;function Bx(){if(yO)return ut;yO=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.TRIPLE_TERM_NAMES=ut.QUAD_TERM_NAMES=void 0,ut.getTerms=o,ut.getTermsNested=n,ut.getNamedTerms=t,ut.collectNamedTerms=e,ut.forEachTerms=a,ut.forEachTermsNested=u,ut.filterTerms=c,ut.filterTermsNested=s,ut.filterQuadTermNames=l,ut.filterQuadTermNamesNested=d,ut.mapTerms=f,ut.mapTermsNested=h,ut.reduceTerms=p,ut.reduceTermsNested=y,ut.everyTerms=b,ut.everyTermsNested=v,ut.someTerms=F,ut.someTermsNested=T,ut.getValueNestedPath=S,ut.matchTerm=j,ut.matchPattern=E,ut.matchPatternComplete=U,ut.matchPatternMappings=K;const i=fs(),r=new i.DataFactory;ut.QUAD_TERM_NAMES=["subject","predicate","object","graph"],ut.TRIPLE_TERM_NAMES=["subject","predicate","object"];function o(_,O){return O&&_.graph.termType==="DefaultGraph"?[_.subject,_.predicate,_.object]:[_.subject,_.predicate,_.object,_.graph]}function n(_,O){const P=[];for(const R of o(_,O))R.termType==="Quad"?n(R,O).forEach(I=>P.push(I)):P.push(R);return P}function t(_){return[{key:"subject",value:_.subject},{key:"predicate",value:_.predicate},{key:"object",value:_.object},{key:"graph",value:_.graph}]}function e(_,O,P){const R={};return _.forEach(I=>R[I.key]=I.value),O&&(R.subject=R.subject||O("subject"),R.predicate=R.predicate||O("predicate"),R.object=R.object||O("object"),R.graph=R.graph||O("graph")),(P||r).quad(R.subject,R.predicate,R.object,R.graph)}function a(_,O){O(_.subject,"subject"),O(_.predicate,"predicate"),O(_.object,"object"),O(_.graph,"graph")}function u(_,O,P=[]){_.subject.termType==="Quad"?u(_.subject,O,[...P,"subject"]):O(_.subject,[...P,"subject"]),_.predicate.termType==="Quad"?u(_.predicate,O,[...P,"predicate"]):O(_.predicate,[...P,"predicate"]),_.object.termType==="Quad"?u(_.object,O,[...P,"object"]):O(_.object,[...P,"object"]),_.graph.termType==="Quad"?u(_.graph,O,[...P,"graph"]):O(_.graph,[...P,"graph"])}function c(_,O){const P=[];return O(_.subject,"subject")&&P.push(_.subject),O(_.predicate,"predicate")&&P.push(_.predicate),O(_.object,"object")&&P.push(_.object),O(_.graph,"graph")&&P.push(_.graph),P}function s(_,O,P=[]){let R=[];return _.subject.termType==="Quad"?R=[...R,...s(_.subject,O,[...P,"subject"])]:O(_.subject,[...P,"subject"])&&R.push(_.subject),_.predicate.termType==="Quad"?R=[...R,...s(_.predicate,O,[...P,"predicate"])]:O(_.predicate,[...P,"predicate"])&&R.push(_.predicate),_.object.termType==="Quad"?R=[...R,...s(_.object,O,[...P,"object"])]:O(_.object,[...P,"object"])&&R.push(_.object),_.graph.termType==="Quad"?R=[...R,...s(_.graph,O,[...P,"graph"])]:O(_.graph,[...P,"graph"])&&R.push(_.graph),R}function l(_,O){const P=[];return O(_.subject,"subject")&&P.push("subject"),O(_.predicate,"predicate")&&P.push("predicate"),O(_.object,"object")&&P.push("object"),O(_.graph,"graph")&&P.push("graph"),P}function d(_,O,P=[]){let R=[];const I=[...P,"subject"];_.subject.termType==="Quad"?R=[...R,...d(_.subject,O,I)]:O(_.subject,I)&&R.push(I);const C=[...P,"predicate"];_.predicate.termType==="Quad"?R=[...R,...d(_.predicate,O,C)]:O(_.predicate,C)&&R.push(C);const Y=[...P,"object"];_.object.termType==="Quad"?R=[...R,...d(_.object,O,Y)]:O(_.object,Y)&&R.push(Y);const H=[...P,"graph"];return _.graph.termType==="Quad"?R=[...R,...d(_.graph,O,H)]:O(_.graph,H)&&R.push(H),R}function f(_,O,P){return(P||r).quad(O(_.subject,"subject"),O(_.predicate,"predicate"),O(_.object,"object"),O(_.graph,"graph"))}function h(_,O,P,R=[]){return(P||r).quad(_.subject.termType==="Quad"?h(_.subject,O,P,[...R,"subject"]):O(_.subject,[...R,"subject"]),_.predicate.termType==="Quad"?h(_.predicate,O,P,[...R,"predicate"]):O(_.predicate,[...R,"predicate"]),_.object.termType==="Quad"?h(_.object,O,P,[...R,"object"]):O(_.object,[...R,"object"]),_.graph.termType==="Quad"?h(_.graph,O,P,[...R,"graph"]):O(_.graph,[...R,"graph"]))}function p(_,O,P){let R=P;return R=O(R,_.subject,"subject"),R=O(R,_.predicate,"predicate"),R=O(R,_.object,"object"),O(R,_.graph,"graph")}function y(_,O,P,R=[]){let I=P;return _.subject.termType==="Quad"?I=y(_.subject,O,I,[...R,"subject"]):I=O(I,_.subject,[...R,"subject"]),_.predicate.termType==="Quad"?I=y(_.predicate,O,I,[...R,"predicate"]):I=O(I,_.predicate,[...R,"predicate"]),_.object.termType==="Quad"?I=y(_.object,O,I,[...R,"object"]):I=O(I,_.object,[...R,"object"]),_.graph.termType==="Quad"?I=y(_.graph,O,I,[...R,"graph"]):I=O(I,_.graph,[...R,"graph"]),I}function b(_,O){return O(_.subject,"subject")&&O(_.predicate,"predicate")&&O(_.object,"object")&&O(_.graph,"graph")}function v(_,O,P=[]){return(_.subject.termType==="Quad"?v(_.subject,O,[...P,"subject"]):O(_.subject,[...P,"subject"]))&&(_.predicate.termType==="Quad"?v(_.predicate,O,[...P,"predicate"]):O(_.predicate,[...P,"predicate"]))&&(_.object.termType==="Quad"?v(_.object,O,[...P,"object"]):O(_.object,[...P,"object"]))&&(_.graph.termType==="Quad"?v(_.graph,O,[...P,"graph"]):O(_.graph,[...P,"graph"]))}function F(_,O){return O(_.subject,"subject")||O(_.predicate,"predicate")||O(_.object,"object")||O(_.graph,"graph")}function T(_,O,P=[]){return(_.subject.termType==="Quad"?T(_.subject,O,[...P,"subject"]):O(_.subject,[...P,"subject"]))||(_.predicate.termType==="Quad"?T(_.predicate,O,[...P,"predicate"]):O(_.predicate,[...P,"predicate"]))||(_.object.termType==="Quad"?T(_.object,O,[...P,"object"]):O(_.object,[...P,"object"]))||(_.graph.termType==="Quad"?T(_.graph,O,[...P,"graph"]):O(_.graph,[...P,"graph"]))}function S(_,O){if(O.length===0)return _;if(_.termType==="Quad")return S(_[O[0]],O.slice(1));throw new Error(`Tried to get ${O[0]} from term of type ${_.termType}`)}function j(_,O){return!O||O.termType==="Variable"||O.termType==="Quad"&&_.termType==="Quad"&&U(_,O)||O.equals(_)}function E(_,O,P,R,I){return j(_.subject,O)&&j(_.predicate,P)&&j(_.object,R)&&j(_.graph,I)}function U(_,O){return E(_,O.subject,O.predicate,O.object,O.graph)}function K(_,O,P={}){const R={};function I(C,Y){return b(C,(H,Z)=>{var le,ce;const ee=Y[Z];switch(H.termType){case"Variable":return P.skipVarMapping&&ee.termType==="Variable"||((ce=(le=R[H.value])===null||le===void 0?void 0:le.equals(ee))!==null&&ce!==void 0?ce:(R[H.value]=ee,!0));case"Quad":return ee.termType==="Quad"&&I(H,ee);default:return H.equals(ee)}})}return I(O,_)&&(P.returnMappings?R:!0)}return ut}var gr={},_O;function Cx(){if(_O)return gr;_O=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.TERM_TYPES=void 0,gr.uniqTerms=r,gr.getTermsOfType=o,gr.getNamedNodes=n,gr.getBlankNodes=t,gr.getLiterals=e,gr.getVariables=a,gr.getDefaultGraphs=u,gr.getQuads=c;const i=cI();gr.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function r(s){const l={};return s.filter(d=>{const f=(0,i.termToString)(d);return!(f in l)&&(l[f]=!0)})}function o(s,l){return s.filter(d=>d.termType===l)}function n(s){return o(s,"NamedNode")}function t(s){return o(s,"BlankNode")}function e(s){return o(s,"Literal")}function a(s){return o(s,"Variable")}function u(s){return o(s,"DefaultGraph")}function c(s){return o(s,"Quad")}return gr}var mO;function Qx(){return mO||(mO=1,(function(i){var r=ai&&ai.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ai&&ai.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Bx(),i),o(Cx(),i)})(ai)),ai}var d1={exports:{}};var gO;function k0(){return gO||(gO=1,(function(i){(function(){var r;function o(n,t){var e=this instanceof o?this:r;if(e.reset(t),typeof n=="string"&&n.length>0&&e.hash(n),e!==this)return e}o.prototype.hash=function(n){var t,e,a,u,c;switch(c=n.length,this.len+=c,e=this.k1,a=0,this.rem){case 0:e^=c>a?n.charCodeAt(a++)&65535:0;case 1:e^=c>a?(n.charCodeAt(a++)&65535)<<8:0;case 2:e^=c>a?(n.charCodeAt(a++)&65535)<<16:0;case 3:e^=c>a?(n.charCodeAt(a)&255)<<24:0,e^=c>a?(n.charCodeAt(a++)&65280)>>8:0}if(this.rem=c+this.rem&3,c-=this.rem,c>0){for(t=this.h1;e=e*11601+(e&65535)*3432906752&4294967295,e=e<<15|e>>>17,e=e*13715+(e&65535)*461832192&4294967295,t^=e,t=t<<13|t>>>19,t=t*5+3864292196&4294967295,!(a>=c);)e=n.charCodeAt(a++)&65535^(n.charCodeAt(a++)&65535)<<8^(n.charCodeAt(a++)&65535)<<16,u=n.charCodeAt(a++),e^=(u&255)<<24^(u&65280)>>8;switch(e=0,this.rem){case 3:e^=(n.charCodeAt(a+2)&65535)<<16;case 2:e^=(n.charCodeAt(a+1)&65535)<<8;case 1:e^=n.charCodeAt(a)&65535}this.h1=t}return this.k1=e,this},o.prototype.result=function(){var n,t;return n=this.k1,t=this.h1,n>0&&(n=n*11601+(n&65535)*3432906752&4294967295,n=n<<15|n>>>17,n=n*13715+(n&65535)*461832192&4294967295,t^=n),t^=this.len,t^=t>>>16,t=t*51819+(t&65535)*2246770688&4294967295,t^=t>>>13,t=t*44597+(t&65535)*3266445312&4294967295,t^=t>>>16,t>>>0},o.prototype.reset=function(n){return this.h1=typeof n=="number"?n:0,this.rem=this.k1=this.len=0,this},r=new o,i.exports=o})()})(d1)),d1.exports}var bO;function Ux(){if(bO)return Nt;bO=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.isomorphic=n,Nt.getBijection=t,Nt.getBijectionInner=e,Nt.hashValues=u,Nt.hasValue=c,Nt.getQuadsWithBlankNodes=s,Nt.getQuadsWithoutBlankNodes=l,Nt.indexGraph=d,Nt.deindexGraph=f,Nt.uniqGraph=h,Nt.getGraphBlankNodes=p,Nt.hashTerms=y,Nt.hashTerm=b,Nt.hashNumber=v,Nt.quadToSignature=F,Nt.termToSignature=T,Nt.isTermGrounded=S;const i=cI(),r=Qx(),o=k0();function n(j,E){return!!t(j,E)}function t(j,E){const U=d(l(j)),K=d(l(E));if(Object.keys(U).length!==Object.keys(K).length)return null;for(const I in U)if(U[I]!==K[I])return null;const _=h(s(j)),O=h(s(E)),P=p(j),R=p(E);return e(_,O,P,R)}function e(j,E,U,K,_,O){_||(_={}),O||(O={});const[P,R]=y(j,U,_),[I,C]=y(E,K,O);if(Object.keys(P).length!==Object.keys(I).length)return null;for(const H in P)if(!c(I,P[H]))return null;let Y={};for(const H of U){const Z=(0,i.termToString)(H),le=R[Z];for(const ce in C)if(C[ce]===le){Y[Z]=ce,delete C[ce];break}}if(!a(Object.keys(Y).sort(),U.map(i.termToString).sort())||!a(u(Y).sort(),K.map(i.termToString).sort())){Y=null;for(const H of U){const Z=(0,i.termToString)(H);if(!P[Z])for(const le of K){const ce=(0,i.termToString)(le);if(!I[ce]&&R[Z]===C[ce]){const ee=v(Z);Y=e(j,E,U,K,Object.assign(Object.assign({},P),{[Z]:ee}),Object.assign(Object.assign({},I),{[ce]:ee}))}}}}return Y}function a(j,E){if(j.length!==E.length)return!1;for(let U=j.length;U--;)if(j[U]!==E[U])return!1;return!0}function u(j){const E=[];for(const U in j)E.push(j[U]);return E}function c(j,E){for(const U in j)if(j[U]===E)return!0;return!1}function s(j){return j.filter(E=>(0,r.someTerms)(E,U=>U.termType==="BlankNode"||U.termType==="Quad"&&(0,r.getTermsNested)(U).some(K=>K.termType==="BlankNode")))}function l(j){return j.filter(E=>(0,r.everyTerms)(E,U=>U.termType!=="BlankNode"&&!(U.termType==="Quad"&&(0,r.getTermsNested)(U).some(K=>K.termType==="BlankNode"))))}function d(j){const E={};for(const U of j)E[JSON.stringify((0,i.quadToStringQuad)(U))]=!0;return E}function f(j){return Object.keys(j).map(E=>(0,i.stringQuadToQuad)(JSON.parse(E)))}function h(j){return f(d(j))}function p(j){return(0,r.uniqTerms)(j.map(E=>(0,r.getBlankNodes)((0,r.getTermsNested)(E))).reduce((E,U)=>E.concat(U),[]))}function y(j,E,U){const K=Object.assign({},U),_={};let O=!0;for(;O;){const P=Object.keys(K).length;for(const I of E){const C=(0,i.termToString)(I);if(!K[C]){const[Y,H]=b(I,j,K);Y&&(K[C]=H),_[C]=H}}const R=new Map;for(const I in _){const C=_[I];R.get(C)===void 0?R.set(C,I):R.set(C,!1)}for(const[I,C]of R.entries())C&&(K[C]=I);O=P!==Object.keys(K).length}return[K,_]}function b(j,E,U){const K=[];let _=!0;for(const P of E){const R=(0,r.getTermsNested)(P);if(R.some(I=>I.equals(j))){K.push(F(P,U,j));for(const I of R)!S(I,U)&&!I.equals(j)&&(_=!1)}}const O=v(K.sort().join(""));return[_,O]}function v(j){return o().hash(j).result()}function F(j,E,U){return(0,r.getTerms)(j).map(K=>T(K,E,U)).join("|")}function T(j,E,U){var K;return j.equals(U)?"@self":j.termType==="BlankNode"?((K=E[(0,i.termToString)(j)])===null||K===void 0?void 0:K.toString())||"@blank":j.termType==="Quad"?`<${F(j,E,U)}>`:(0,i.termToString)(j)}function S(j,E){return j.termType!=="BlankNode"&&!(j.termType==="Quad"&&(0,r.getTermsNested)(j).some(U=>!S(U,E)))||!!E[(0,i.termToString)(j)]}return Nt}var vO;function Vx(){return vO||(vO=1,(function(i){var r=ii&&ii.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ii&&ii.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Ux(),i)})(ii)),ii}var TO;function Gx(){if(TO)return nr;TO=1;var i=nr&&nr.__createBinding||(Object.create?(function(x,ie,he,ve){ve===void 0&&(ve=he);var Ne=Object.getOwnPropertyDescriptor(ie,he);(!Ne||("get"in Ne?!ie.__esModule:Ne.writable||Ne.configurable))&&(Ne={enumerable:!0,get:function(){return ie[he]}}),Object.defineProperty(x,ve,Ne)}):(function(x,ie,he,ve){ve===void 0&&(ve=he),x[ve]=ie[he]})),r=nr&&nr.__setModuleDefault||(Object.create?(function(x,ie){Object.defineProperty(x,"default",{enumerable:!0,value:ie})}):function(x,ie){x.default=ie}),o=nr&&nr.__importStar||function(x){if(x&&x.__esModule)return x;var ie={};if(x!=null)for(var he in x)he!=="default"&&Object.prototype.hasOwnProperty.call(x,he)&&i(ie,x,he);return r(ie,x),ie},n=nr&&nr.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(nr,"__esModule",{value:!0}),nr.toSparqlJs=nr.toSparql=void 0;const t=Vx(),e=Jg(),a=Kg(),u=o(Am()),c=n(Yg()),s=n(Z0()),l=u.types,d=u.expressionTypes;let f;const h=new c.default;function p(x,ie={}){return new a.Generator(ie).stringify(y(x))}nr.toSparql=p;function y(x){b(),x=je(x);let ie=v(x);return ie.type==="group"?ie.patterns[0]:ie}nr.toSparqlJs=y;function b(){f={project:!1,extend:[],group:[],aggregates:[],order:[]}}function v(x){switch(x.type!==l.EXTEND&&x.type!==l.ORDER_BY&&x.type!==l.GRAPH&&(f.project=!1),x.type){case l.EXPRESSION:return F(x);case l.ASK:return we(x,l.ASK);case l.BGP:return I(x);case l.CONSTRUCT:return C(x);case l.DESCRIBE:return we(x,l.DESCRIBE);case l.DISTINCT:return Y(x);case l.EXTEND:return H(x);case l.FROM:return Z(x);case l.FILTER:return le(x);case l.GRAPH:return ce(x);case l.GROUP:return ee(x);case l.JOIN:return Ae(x);case l.LEFT_JOIN:return Ee(x);case l.MINUS:return ue(x);case l.NOP:return{};case l.ORDER_BY:return oe(x);case l.PATH:return Re(x);case l.PATTERN:return Se(x);case l.PROJECT:return we(x,l.PROJECT);case l.REDUCED:return N(x);case l.SERVICE:return m(x);case l.SLICE:return A(x);case l.UNION:return g(x);case l.VALUES:return w(x);case l.COMPOSITE_UPDATE:return _e(x);case l.DELETE_INSERT:return ge(x);case l.LOAD:return G(x);case l.CLEAR:return z(x);case l.CREATE:return J(x);case l.DROP:return ne(x);case l.ADD:return fe(x);case l.MOVE:return Oe(x);case l.COPY:return Te(x)}throw new Error(`Unknown Operation type ${x.type}`)}function F(x){switch(x.expressionType){case d.AGGREGATE:return j(x);case d.EXISTENCE:return E(x);case d.NAMED:return U(x);case d.OPERATOR:return K(x);case d.TERM:return _(x);case d.WILDCARD:return O(x)}throw new Error(`Unknown Expression Operation type ${x.expressionType}`)}function T(x){switch(x.type){case l.ALT:return D(x);case l.INV:return B(x);case l.LINK:return q(x);case l.NPS:return Q(x);case l.ONE_OR_MORE_PATH:return $(x);case l.SEQ:return X(x);case l.ZERO_OR_MORE_PATH:return te(x);case l.ZERO_OR_ONE_PATH:return me(x)}throw new Error(`Unknown Path type ${x.type}`)}function S(x){return(0,e.termToString)(x)}function j(x){const ie={expression:F(x.expression),type:"aggregate",aggregation:x.aggregator,distinct:x.distinct};return x.separator&&(ie.separator=x.separator),ie}function E(x){return{type:"operation",operator:x.not?"notexists":"exists",args:[{type:"group",patterns:s.default.flatten([v(x.input)])}]}}function U(x){return{type:"functionCall",function:x.name,args:x.args.map(F)}}function K(x){if(x.operator==="desc"){const he={expression:F(x.args[0])};return he.descending=!0,he}const ie={type:"operation",operator:x.operator,args:x.args.map(F)};return(ie.operator==="in"||ie.operator==="notin")&&(ie.args=[ie.args[0]].concat([ie.args.slice(1)])),ie}function _(x){return x.term}function O(x){return x.wildcard}function P(x){return Array.isArray(x)?x.length===1?x[0]:{type:"group",patterns:x}:x}function R(x){return x}function I(x){let ie=x.patterns.map(Se);return ie.length===0?null:{type:"bgp",triples:ie}}function C(x){return{type:"query",prefixes:{},queryType:"CONSTRUCT",template:x.template.map(Se),where:s.default.flatten([v(x.input)])}}function Y(x){let ie=v(x.input);return ie.patterns[0].distinct=!0,ie}function H(x){return f.project?(f.extend.push(x),v(x.input)):s.default.flatten([v(x.input),{type:"bind",variable:x.variable,expression:F(x.expression)}])}function Z(x){const ie=v(x.input);let he=ie;return ie.type==="group"&&(he=ie.patterns[0]),he.from={default:x.default,named:x.named},ie}function le(x){return{type:"group",patterns:s.default.flatten([v(x.input),{type:"filter",expression:F(x.expression)}])}}function ce(x){return{type:"graph",patterns:s.default.flatten([v(x.input)]),name:x.name}}function ee(x){const ie=v(x.input),he=x.aggregates.map(R);return f.aggregates.push(...he),f.group.push(...x.variables),ie}function Ae(x){return s.default.flatten(x.input.map(v)).reduce((he,ve)=>(ve.type!=="bgp"||he.length==0||he[he.length-1].type!=="bgp"?he.push(ve):he[he.length-1].triples.push(...ve.triples),he),[])}function Ee(x){const ie={type:"optional",patterns:[v(x.input[1])]};return x.expression&&ie.patterns.push({type:"filter",expression:F(x.expression)}),ie.patterns=s.default.flatten(ie.patterns),s.default.flatten([v(x.input[0]),ie])}function ue(x){let ie=v(x.input[1]);return ie.type==="group"&&(ie=ie.patterns),Array.isArray(ie)||(ie=[ie]),s.default.flatten([v(x.input[0]),{type:"minus",patterns:ie}])}function oe(x){return f.order.push(...x.expressions),v(x.input)}function Re(x){return{type:"bgp",triples:[{subject:x.subject,predicate:T(x.predicate),object:x.object}]}}function Se(x){return{subject:x.subject,predicate:x.predicate,object:x.object}}function Pe(x,ie){let he=s.default.isSimpleTerm(x)?S(x):x;if(typeof he=="string"){if(ie[he])return ie[he]}else if(Array.isArray(x))x=x.map(ve=>Pe(ve,ie));else for(let ve of Object.keys(x))x[ve]=Pe(x[ve],ie);return x}function we(x,ie){const he={type:"query",prefixes:{}},ve=he;let Ne;ie===l.PROJECT?(he.queryType="SELECT",Ne=x.variables):ie===l.ASK?he.queryType="ASK":ie===l.DESCRIBE&&(he.queryType="DESCRIBE",Ne=x.terms);const Ge=f.extend,qe=f.group,et=f.aggregates,st=f.order;b(),f.project=!0;let mt=s.default.flatten([v(x.input)]);mt.length===1&&mt[0].type==="group"&&(mt=mt[0].patterns),he.where=mt;let wt={};for(let ht of f.aggregates)wt[S(ht.variable)]=F(ht);let St={};for(let ht=f.extend.length-1;ht>=0;--ht){let er=f.extend[ht];St[S(er.variable)]=Pe(F(er.expression),wt)}f.group.length>0&&(ve.group=f.group.map(ht=>{let er=S(ht);if(St[er]){let bs=St[er];return delete St[er],{variable:ht,expression:bs}}return{expression:ht}})),f.order.length>0&&(ve.order=f.order.map(v).map(ht=>ht.descending?ht:{expression:ht})),Ne&&(ve.variables=Ne.map(ht=>{let er=S(ht);if(St[er]){let bs=St[er];return delete St[er],{variable:ht,expression:bs}}return ht}),ve.variables.length===0&&(ve.variables=[new a.Wildcard]));const qt=Object.entries(St);if(qt.length>0){ve.where=ve.where||[];for(const[ht,er]of qt)ve.where.push({type:"bind",variable:(0,e.stringToTerm)(ht),expression:er})}if(he.where.length>0&&he.where[he.where.length-1].type==="filter"){const ht=he.where[he.where.length-1];Ie(ht,Object.keys(wt))&&(ve.having=s.default.flatten([Pe(ht.expression,wt)]),he.where.splice(-1))}return f.extend=Ge,f.group=qe,f.aggregates=et,f.order=st,{type:"group",patterns:[ve]}}function Ie(x,ie){return s.default.isSimpleTerm(x)?ie.indexOf(S(x))>=0:Array.isArray(x)?x.some(he=>Ie(he,ie)):x===Object(x)?Object.keys(x).some(he=>Ie(x[he],ie)):ie.indexOf(x)>=0}function N(x){let ie=v(x.input);return ie.patterns[0].reduced=!0,ie}function m(x){let ie=v(x.input);return ie.type==="group"&&(ie=ie.patterns),Array.isArray(ie)||(ie=[ie]),{type:"service",name:x.name,silent:x.silent,patterns:ie}}function A(x){let ie=v(x.input),he=ie;return ie.type&&ie.type==="group"&&(he=ie.patterns[0]),x.start!==0&&(he.offset=x.start),x.length!==void 0&&(he.limit=x.length),ie}function g(x){return{type:"union",patterns:x.input.map(v).map(P)}}function w(x){return{type:"values",values:x.bindings.map(ie=>{let he={};for(let ve of x.variables){let Ne=`?${ve.value}`;ie[Ne]?he[Ne]=ie[Ne]:he[Ne]=void 0}return he})}}function D(x){const ie=x.input.map(T);return ie.every(he=>"pathType"in he&&he.pathType==="!")?{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:s.default.flatten(ie.map(he=>he.items))}]}:{type:"path",pathType:"|",items:ie}}function B(x){if(x.path.type===l.NPS){const ie=x.path.iris.map(he=>({type:"path",pathType:"^",items:[he]}));return ie.length<=1?{type:"path",pathType:"!",items:ie}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:ie}]}}return{type:"path",pathType:"^",items:[T(x.path)]}}function q(x){return x.iri}function Q(x){return x.iris.length<=1?{type:"path",pathType:"!",items:x.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:x.iris}]}}function $(x){return{type:"path",pathType:"+",items:[T(x.path)]}}function X(x){return{type:"path",pathType:"/",items:x.input.map(T)}}function te(x){return{type:"path",pathType:"*",items:[T(x.path)]}}function me(x){return{type:"path",pathType:"?",items:[T(x.path)]}}function _e(x){const ie=x.updates.map(he=>v(he).updates[0]);return{prefixes:{},type:"update",updates:ie}}function ge(x){var ie;let he=x.where,ve;if(he&&he.type===l.FROM){let Ge=he;he=Ge.input,ve={default:Ge.default,named:Ge.named}}const Ne=[{updateType:"insertdelete",delete:Le(x.delete||[]),insert:Le(x.insert||[])}];if(ve&&(Ne[0].using=ve),!he||he.type===l.BGP&&he.patterns.length===0)Ne[0].where=[];else{const Ge=[];let qe=v(Je(he,Ge));if(qe.type==="group"?Ne[0].where=qe.patterns:Ne[0].where=[qe],Ge.length>0){if(Ge.length!==1)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");((ie=Ge[0])===null||ie===void 0?void 0:ie.value)!==""&&(Ne[0].where=[{type:"graph",patterns:Ne[0].where,name:Ge[0]}])}}return!x.delete&&!x.where?(Ne[0].updateType="insert",delete Ne[0].delete,delete Ne[0].where):!x.insert&&!x.where?(delete Ne[0].insert,delete Ne[0].where,x.delete.some(Ge=>Ge.subject.termType==="Variable"||Ge.predicate.termType==="Variable"||Ge.object.termType==="Variable")?Ne[0].updateType="deletewhere":Ne[0].updateType="delete"):!x.insert&&x.where&&x.where.type==="bgp"&&(0,t.isomorphic)(x.delete,x.where.patterns)&&(delete Ne[0].where,Ne[0].updateType="deletewhere"),{prefixes:{},type:"update",updates:Ne}}function G(x){const ie=[{type:"load",silent:!!x.silent,source:x.source}];return x.destination&&(ie[0].destination=x.destination),{prefixes:{},type:"update",updates:ie}}function z(x){return se(x,"clear")}function J(x){return se(x,"create")}function ne(x){return se(x,"drop")}function se(x,ie){const he=[{type:ie,silent:!!x.silent}];return x.source==="DEFAULT"?he[0].graph={default:!0}:x.source==="NAMED"?he[0].graph={named:!0}:x.source==="ALL"?he[0].graph={all:!0}:he[0].graph={type:"graph",name:x.source},{prefixes:{},type:"update",updates:he}}function fe(x){return De(x,"add")}function Oe(x){return De(x,"move")}function Te(x){return De(x,"copy")}function De(x,ie){const he=[{type:ie,silent:!!x.silent}];return he[0].source=x.source==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:x.source},he[0].destination=x.destination==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:x.destination},{prefixes:{},type:"update",updates:he}}function Le(x){if(!x)return[];const ie={};return x.forEach(he=>{const ve=he.graph.value;ie[ve]||(ie[ve]=[]),ie[ve].push(he)}),Object.keys(ie).map(he=>he===""?{type:"bgp",triples:ie[he].map(Se)}:{type:"graph",triples:ie[he].map(Se),name:ie[he][0].graph})}function je(x){return Je(x,[])}function Je(x,ie){if(Array.isArray(x))return x.map(qe=>Je(qe,ie));if(!x.type||x.type===l.DELETE_INSERT)return x;if((x.type===l.PATTERN||x.type===l.PATH)&&x.graph)return ie.push(x.graph),x.graph.name!==""?x.type===l.PATTERN?h.createPattern(x.subject,x.predicate,x.object):h.createPath(x.subject,x.predicate,x.object):x;const he={},ve={},Ne={};for(let qe of Object.keys(x)){const et=[];if(he[qe]=Je(x[qe],et),et.length>0){ve[qe]=et;for(const st of et)Ne[st.value]=st}}const Ge=Object.keys(Ne);if(Ge.length>0)if(Ge.length===1&&![l.PROJECT,l.SERVICE].includes(x.type))ie.push(Ne[Ge[0]]);else{if(x.type===l.BGP)return Xe(x,ve.patterns);for(let qe of Object.keys(ve)){const et=he[qe];Array.isArray(et)?he[qe]=et.map((st,mt)=>ve[qe][0].value===""?st:h.createGraph(st,ve[qe][mt])):ve[qe][0].value!==""&&(he[qe]=h.createGraph(et,ve[qe][0]))}}return he}function Xe(x,ie){var he;const ve={};for(let qe=0;qe<x.patterns.length;++qe){const et=x.patterns[qe],st=ie[qe].value;ve[st]=(he=ve[st])!==null&&he!==void 0?he:{patterns:[],graph:ie[qe]},ve[st].patterns.push(et)}let Ne=[];for(const[qe,{patterns:et,graph:st}]of Object.entries(ve)){const mt=h.createBgp(et);Ne.push(qe===""?mt:h.createGraph(mt,st))}let Ge=Ne[0];for(let qe=1;qe<Ne.length;++qe)Ge=h.createJoin([Ge,Ne[qe]]);return Ge}return nr}var OO;function Ve(){return OO||(OO=1,(function(i){var r=Nr&&Nr.__createBinding||(Object.create?(function(l,d,f,h){h===void 0&&(h=f);var p=Object.getOwnPropertyDescriptor(d,f);(!p||("get"in p?!d.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return d[f]}}),Object.defineProperty(l,h,p)}):(function(l,d,f,h){h===void 0&&(h=f),l[h]=d[f]})),o=Nr&&Nr.__setModuleDefault||(Object.create?(function(l,d){Object.defineProperty(l,"default",{enumerable:!0,value:d})}):function(l,d){l.default=d}),n=Nr&&Nr.__importStar||function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&r(d,l,f);return o(d,l),d},t=Nr&&Nr.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(i,"__esModule",{value:!0}),i.Util=i.toSparqlJs=i.toSparql=i.Factory=i.Algebra=i.translate=void 0;const e=t(Lx());i.translate=e.default;const a=n(Am());i.Algebra=a;const u=t(Yg());i.Factory=u.default;const c=Gx();Object.defineProperty(i,"toSparql",{enumerable:!0,get:function(){return c.toSparql}}),Object.defineProperty(i,"toSparqlJs",{enumerable:!0,get:function(){return c.toSparqlJs}});const s=t(Z0());i.Util=s.default})(Nr)),Nr}var oi={},Kc={},SO;function Xx(){if(SO)return Kc;SO=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.asTermType=void 0;function i(r){if(r==="namedNode"||r==="literal"||r==="blankNode"||r==="quad")return r}return Kc.asTermType=i,Kc}var Yc={},FO;function zx(){if(FO)return Yc;FO=1,Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.Variable=void 0;const i=jn();class r{constructor(n){this.expressionType=i.ExpressionType.Variable,this.name=n}}return Yc.Variable=r,Yc}var Ue={},Lr={},ui={},Wc={},AO;function lI(){if(AO)return Wc;AO=1,Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.BlankNode=void 0;class i{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return Wc.BlankNode=i,Wc}var Zc={},kc={},wO;function dI(){if(wO)return kc;wO=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.DefaultGraph=void 0;class i{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return kc.DefaultGraph=i,i.INSTANCE=new i,kc}var el={},tl={},EO;function ev(){if(EO)return tl;EO=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.NamedNode=void 0;class i{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return tl.NamedNode=i,tl}var jO;function fI(){if(jO)return el;jO=1,Object.defineProperty(el,"__esModule",{value:!0}),el.Literal=void 0;const i=ev();class r{constructor(n,t){this.termType="Literal",this.value=n,typeof t=="string"?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return el.Literal=r,r.RDF_LANGUAGE_STRING=new i.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new i.NamedNode("http://www.w3.org/2001/XMLSchema#string"),el}var rl={},RO;function pI(){if(RO)return rl;RO=1,Object.defineProperty(rl,"__esModule",{value:!0}),rl.Quad=void 0;class i{constructor(o,n,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=n,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return rl.Quad=i,rl}var nl={},DO;function hI(){if(DO)return nl;DO=1,Object.defineProperty(nl,"__esModule",{value:!0}),nl.Variable=void 0;class i{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return nl.Variable=i,nl}var PO;function Hx(){if(PO)return Zc;PO=1,Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.DataFactory=void 0;const i=lI(),r=dI(),o=fI(),n=ev(),t=pI(),e=hI();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new i.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return r.DefaultGraph.INSTANCE}quad(s,l,d,f){return new t.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Zc.DataFactory=u,Zc}var MO;function $x(){return MO||(MO=1,(function(i){var r=ui&&ui.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ui&&ui.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(lI(),i),o(Hx(),i),o(dI(),i),o(fI(),i),o(ev(),i),o(pI(),i),o(hI(),i)})(ui)),ui}var NO;function ls(){if(NO)return Lr;NO=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.SparqlOperator=Lr.TypeURL=Lr.typedLiteral=Lr.TypeAlias=void 0;const i=$x();var r;(function(a){a.SPARQL_NUMERIC="SPARQL_NUMERIC",a.SPARQL_STRINGLY="SPARQL_STRINGLY"})(r||(Lr.TypeAlias=r={}));const o=new i.DataFactory;function n(a,u){return o.literal(a,o.namedNode(u))}Lr.typedLiteral=n;var t;(function(a){a.XSD_ANY_URI="http://www.w3.org/2001/XMLSchema#anyURI",a.XSD_STRING="http://www.w3.org/2001/XMLSchema#string",a.RDF_LANG_STRING="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",a.XSD_BOOLEAN="http://www.w3.org/2001/XMLSchema#boolean",a.XSD_DATE_TIME="http://www.w3.org/2001/XMLSchema#dateTime",a.XSD_DATE_TIME_STAMP="http://www.w3.org/2001/XMLSchema#dateTimeStamp",a.XSD_DATE="http://www.w3.org/2001/XMLSchema#date",a.XSD_G_MONTH="http://www.w3.org/2001/XMLSchema#gMonth",a.XSD_G_MONTHDAY="http://www.w3.org/2001/XMLSchema#gMonthDay",a.XSD_G_YEAR="http://www.w3.org/2001/XMLSchema#gYear",a.XSD_G_YEAR_MONTH="http://www.w3.org/2001/XMLSchema#gYearMonth",a.XSD_TIME="http://www.w3.org/2001/XMLSchema#time",a.XSD_G_DAY="http://www.w3.org/2001/XMLSchema#gDay",a.XSD_DECIMAL="http://www.w3.org/2001/XMLSchema#decimal",a.XSD_FLOAT="http://www.w3.org/2001/XMLSchema#float",a.XSD_DOUBLE="http://www.w3.org/2001/XMLSchema#double",a.XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",a.XSD_NON_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonPositiveInteger",a.XSD_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#negativeInteger",a.XSD_LONG="http://www.w3.org/2001/XMLSchema#long",a.XSD_INT="http://www.w3.org/2001/XMLSchema#int",a.XSD_SHORT="http://www.w3.org/2001/XMLSchema#short",a.XSD_BYTE="http://www.w3.org/2001/XMLSchema#byte",a.XSD_NON_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonNegativeInteger",a.XSD_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#positiveInteger",a.XSD_UNSIGNED_LONG="http://www.w3.org/2001/XMLSchema#unsignedLong",a.XSD_UNSIGNED_INT="http://www.w3.org/2001/XMLSchema#unsignedInt",a.XSD_UNSIGNED_SHORT="http://www.w3.org/2001/XMLSchema#unsignedShort",a.XSD_UNSIGNED_BYTE="http://www.w3.org/2001/XMLSchema#unsignedByte",a.XSD_NORMALIZED_STRING="http://www.w3.org/2001/XMLSchema#normalizedString",a.XSD_TOKEN="http://www.w3.org/2001/XMLSchema#token",a.XSD_LANGUAGE="http://www.w3.org/2001/XMLSchema#language",a.XSD_NM_TOKEN="http://www.w3.org/2001/XMLSchema#NMTOKEN",a.XSD_NAME="http://www.w3.org/2001/XMLSchema#name",a.XSD_NC_NAME="http://www.w3.org/2001/XMLSchema#NCName",a.XSD_ENTITY="http://www.w3.org/2001/XMLSchema#ENTITY",a.XSD_ID="http://www.w3.org/2001/XMLSchema#ID",a.XSD_ID_REF="http://www.w3.org/2001/XMLSchema#IDREF",a.XSD_DURATION="http://www.w3.org/2001/XMLSchema#duration",a.XSD_YEAR_MONTH_DURATION="http://www.w3.org/2001/XMLSchema#yearMonthDuration",a.XSD_DAY_TIME_DURATION="http://www.w3.org/2001/XMLSchema#dayTimeDuration",a.XSD_UNTYPED_ATOMIC="http://www.w3.org/2001/XMLSchema#untypedAtomic"})(t||(Lr.TypeURL=t={}));var e;return(function(a){a.NOT="!",a.UMINUS="uminus",a.UPLUS="uplus",a.LOGICAL_OR="||",a.LOGICAL_AND="&&",a.EQUAL="=",a.NOT_EQUAL="!=",a.LT="<",a.GT=">",a.LTE="<=",a.GTE=">=",a.SAME_TERM="sameterm",a.IN="in",a.NOT_IN="notin",a.MULTIPLICATION="*",a.DIVISION="/",a.ADDITION="+",a.SUBTRACTION="-",a.IS_IRI="isiri",a.IS_URI="isuri",a.IS_BLANK="isblank",a.IS_LITERAL="isliteral",a.IS_NUMERIC="isnumeric",a.STR="str",a.LANG="lang",a.DATATYPE="datatype",a.IRI="iri",a.URI="uri",a.BNODE="bnode",a.STRDT="strdt",a.STRLANG="strlang",a.UUID="uuid",a.STRUUID="struuid",a.STRLEN="strlen",a.SUBSTR="substr",a.UCASE="ucase",a.LCASE="lcase",a.STRSTARTS="strstarts",a.STRENDS="strends",a.CONTAINS="contains",a.STRBEFORE="strbefore",a.STRAFTER="strafter",a.ENCODE_FOR_URI="encode_for_uri",a.CONCAT="concat",a.LANG_MATCHES="langmatches",a.REGEX="regex",a.REPLACE="replace",a.ABS="abs",a.ROUND="round",a.CEIL="ceil",a.FLOOR="floor",a.RAND="rand",a.NOW="now",a.YEAR="year",a.MONTH="month",a.DAY="day",a.HOURS="hours",a.MINUTES="minutes",a.SECONDS="seconds",a.TIMEZONE="timezone",a.TZ="tz",a.MD5="md5",a.SHA1="sha1",a.SHA256="sha256",a.SHA384="sha384",a.SHA512="sha512",a.TRIPLE="triple",a.SUBJECT="subject",a.PREDICATE="predicate",a.OBJECT="object",a.IS_TRIPLE="istriple",a.BOUND="bound",a.IF="if",a.COALESCE="coalesce"})(e||(Lr.SparqlOperator=e={})),Lr}var He={},IO;function Js(){if(IO)return He;IO=1,Object.defineProperty(He,"__esModule",{value:!0}),He.NoAggregator=He.ExtensionFunctionError=He.InvalidExpression=He.InvalidArity=He.UnexpectedError=He.ParseError=He.EmptyAggregateError=He.IncompatibleLanguageOperation=He.InvalidTimezoneCall=He.CastError=He.InvalidArgumentTypes=He.InError=He.CoalesceError=He.RDFEqualTypeError=He.EBVCoercionError=He.UnboundVariableError=He.InvalidLexicalForm=He.isExpressionError=He.ExpressionError=void 0;class i extends Error{}He.ExpressionError=i;function r(S){return S instanceof i}He.isExpressionError=r;class o extends i{constructor(j){super(`Invalid lexical form '${T(j)}'`),this.arg=j}}He.InvalidLexicalForm=o;class n extends i{constructor(j,E){super(`Unbound variable '${T(j)}'`),this.variable=j,this.bindings=E}}He.UnboundVariableError=n;class t extends i{constructor(j){super(`Cannot coerce term to EBV '${T(j)}'`),this.arg=j}}He.EBVCoercionError=t;class e extends i{constructor(j){super("Equality test for literals with unsupported datatypes"),this.args=j}}He.RDFEqualTypeError=e;class a extends i{constructor(j){super("All COALESCE arguments threw errors"),this.errors=j}}He.CoalesceError=a;class u extends i{constructor(j){super(`Some argument to IN errorred and none where equal. ${j.map(E=>`(${E.toString()}) `).join("and ")}`),this.errors=j}}He.InError=u;class c extends i{constructor(j,E){super(`Argument types not valid for operator: '${T(E)}' with '${T(j)}`),this.args=j,this.op=E}}He.InvalidArgumentTypes=c;class s extends i{constructor(j,E){super(`Invalid cast: '${T(j)}' to '${T(E)}'`),this.arg=j}}He.CastError=s;class l extends i{constructor(j){super(`TIMEZONE call on ${j} which has no timezone`),this.dateString=j}}He.InvalidTimezoneCall=l;class d extends i{constructor(j,E){super(`Operation on incompatible language literals '${T(j)}' and '${T(E)}'`),this.arg1=j,this.arg2=E}}He.IncompatibleLanguageOperation=d;class f extends i{constructor(){super("Empty aggregate expression")}}He.EmptyAggregateError=f;class h extends i{constructor(j,E){super(`Failed to parse "${j}" as ${E}.`)}}He.ParseError=h;class p extends Error{constructor(j,E){super(`Programmer Error '${j}'`),this.payload=E}}He.UnexpectedError=p;class y extends Error{constructor(j,E){super(`The number of args does not match the arity of the operator '${T(E)}'.`),this.args=j,this.op=E}}He.InvalidArity=y;class b extends Error{constructor(j){super(`Invalid SPARQL Expression '${T(j)}'`)}}He.InvalidExpression=b;class v extends Error{constructor(j,E){E instanceof Error?super(`Error thrown in ${j}: ${E.message}${E.stack?`
${E.stack}`:""}`):super(`Error thrown in ${j}`)}}He.ExtensionFunctionError=v;class F extends Error{constructor(j){super(`Aggregate expression ${T(j)} found, but no aggregate hook provided.`)}}He.NoAggregator=F;function T(S){return JSON.stringify(S)}return He}var xr={},qO;function Jx(){if(qO)return xr;qO=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.serializeDuration=xr.serializeTime=xr.serializeDate=xr.serializeDateTime=void 0;function i(a,u=2){return a.toLocaleString(void 0,{minimumIntegerDigits:u,useGrouping:!1})}function r(a){return`${n({year:a.year,month:a.month,day:a.day})}T${t(a)}`}xr.serializeDateTime=r;function o(a){return a.zoneHours===void 0||a.zoneMinutes===void 0?"":a.zoneHours===0&&a.zoneMinutes===0?"Z":`${a.zoneHours>=0?`+${i(a.zoneHours)}`:i(a.zoneHours)}:${i(Math.abs(a.zoneMinutes))}`}function n(a){return`${i(a.year,4)}-${i(a.month)}-${i(a.day)}${o(a)}`}xr.serializeDate=n;function t(a){return`${i(a.hours)}:${i(a.minutes)}:${i(a.seconds)}${o(a)}`}xr.serializeTime=t;function e(a,u="PT0S"){if(!Object.values(a).some(b=>(b||0)!==0))return u;const c=Object.values(a).some(b=>(b||0)<0)?"-":"",s=a.year?`${Math.abs(a.year)}Y`:"",l=a.month?`${Math.abs(a.month)}M`:"",d=a.day?`${Math.abs(a.day)}D`:"",f=`${c}P${s}${l}${d}`;if(!(a.hours||a.minutes||a.seconds))return f;const h=a.hours?`${Math.abs(a.hours)}H`:"",p=a.minutes?`${Math.abs(a.minutes)}M`:"",y=a.seconds?`${Math.abs(a.seconds)}S`:"";return`${f}T${h}${p}${y}`}return xr.serializeDuration=e,xr}var f1={},gt={},il={},LO;function yI(){if(LO)return il;LO=1,Object.defineProperty(il,"__esModule",{value:!0}),il.OverloadTree=void 0;const i=Ks(),r=Wg();let o=class n0{constructor(t,e){this.identifier=t,this.implementation=void 0,this.generalOverloads=Object.create(null),this.literalOverLoads=[],this.depth=e??0,this.promotionCount=void 0}getSubtree(t){const e=(0,r.asGeneralType)(t);if(e)return this.generalOverloads[e];for(const[a,u]of this.literalOverLoads)if(t===a)return u}getImplementationExact(t){let e=this;for(const a of t)if(e=e.getSubtree(a),!e)return;return e.implementation}search(t,e,a){let u=a[this.identifier],c=0;for(;c<t.length&&u?.cache;){const d=t[c],f=(0,i.isLiteralTermExpression)(d);u=u.cache[f?f.dataType:d.termType],c++}if(c===t.length&&u?.func)return u.func;const s=[],l=0;if(t.length===0)return this.implementation;for(s.push(...this.getSubTreeWithArg(t[l],e).map(d=>({node:d,index:l+1})));s.length>0;){const{index:d,node:f}=s.pop();if(d===t.length&&f.implementation)return this.addToCache(a,t,f.implementation),f.implementation;s.push(...f.getSubTreeWithArg(t[d],e).map(h=>({node:h,index:d+1})))}}addToCache(t,e,a){function u(s,l){return l in s||(s[l]={}),s[l]}let c=u(t,this.identifier);for(const s of e){const l=(0,i.isLiteralTermExpression)(s),d=l?l.dataType:s.termType;c.cache=c.cache??{},c=u(c.cache,d)}c.func=a}addOverload(t,e){this._addOverload([...t],e,0)}_addOverload(t,e,a){const[u,...c]=t;if(!u){(this.promotionCount===void 0||a<=this.promotionCount)&&(this.promotionCount=a,this.implementation=e);return}let s=this.getSubtree(u);if(!s){const l=new n0(this.identifier,this.depth+1),d=(0,r.asGeneralType)(u);d&&(this.generalOverloads[d]=l);const f=(0,r.asOverrideType)(u);f&&this.literalOverLoads.push([f,l]),s=l}if(s._addOverload(c,e,a),r.typePromotion[u])for(const l of r.typePromotion[u])this.addPromotedOverload(l.typeToPromote,e,l.conversionFunction,c,a)}addPromotedOverload(t,e,a,u,c){let s=this.getSubtree(t);if(!s){const l=new n0(this.identifier,this.depth+1);this.literalOverLoads.push([t,l]),s=l}s._addOverload(u,l=>d=>e(l)([...d.slice(0,this.depth),a(d[this.depth]),...d.slice(this.depth+1,d.length)]),c+1)}getSubTreeWithArg(t,e){const a=[],u=(0,i.isLiteralTermExpression)(t);if(this.generalOverloads.term&&a.push(this.generalOverloads.term),this.generalOverloads[t.termType]&&a.push(this.generalOverloads[t.termType]),u){const c=(0,r.asKnownLiteralType)(u.dataType);let s;c?s=r.superTypeDictTable[c]:s=(0,r.getSuperTypes)(u.dataType,e);const l=this.literalOverLoads.filter(([d,f])=>d in s).map(([d,f])=>[s[d],f]);l.sort(([d,f],[h,p])=>d-h),a.push(...l.map(([d,f])=>f))}return a}};return il.OverloadTree=o,il}var xO;function _I(){if(xO)return gt;xO=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.expressionToVar=gt.dateTime=gt.langString=gt.string=gt.double=gt.float=gt.decimal=gt.integer=gt.bool=gt.Builder=gt.declare=void 0;const i=Fe(),r=Ks(),o=Ks(),n=ls(),t=ls(),e=Js(),a=yI();function u(F){return new c(F)}gt.declare=u;class c{constructor(T){this.overloadTree=new a.OverloadTree(T),this.collected=!1}collect(){if(this.collected)throw new Error("Builders can only be collected once!");return this.collected=!0,this.overloadTree}static wrapInvalidLexicalProtected(T){return S=>j=>{for(const[E,U]of j.entries())if(U instanceof o.NonLexicalLiteral)throw new e.InvalidLexicalForm(j[E].toRDF(S.context.getSafe(i.KeysInitQuery.dataFactory)));return T(S)(j)}}set(T,S,j=!0){return this.overloadTree.addOverload(T,j?c.wrapInvalidLexicalProtected(S):S),this}copy({from:T,to:S}){const j=this.overloadTree.getImplementationExact(T);if(!j)throw new e.UnexpectedError("Tried to copy implementation, but types not found",{from:T,to:S});return this.set(S,j)}onUnary(T,S,j=!0){return this.set([T],E=>([U])=>S(E)(U),j)}onUnaryTyped(T,S,j=!0){return this.set([T],E=>([U])=>S(E)(U.typedValue),j)}onBinary(T,S,j=!0){return this.set(T,E=>([U,K])=>S(E)(U,K),j)}onBinaryTyped(T,S,j=!0){return this.set(T,E=>([U,K])=>S(E)(U.typedValue,K.typedValue),j)}onTernaryTyped(T,S,j=!0){return this.set(T,E=>([U,K,_])=>S(E)(U.typedValue,K.typedValue,_.typedValue),j)}onTernary(T,S,j=!0){return this.set(T,E=>([U,K,_])=>S(E)(U,K,_),j)}onQuaternaryTyped(T,S,j=!0){return this.set(T,E=>([U,K,_,O])=>S(E)(U.typedValue,K.typedValue,_.typedValue,O.typedValue),j)}onTerm1(T,S=!1){return this.set(["term"],j=>([E])=>T(j)(E),S)}onTerm3(T){return this.set(["term","term","term"],S=>([j,E,U])=>T(S)(j,E,U))}onQuad1(T){return this.set(["quad"],S=>([j])=>T(S)(j))}onLiteral1(T,S=!0){return this.set(["literal"],j=>([E])=>T(j)(E),S)}onBoolean1(T,S=!0){return this.set([n.TypeURL.XSD_BOOLEAN],j=>([E])=>T(j)(E),S)}onBoolean1Typed(T,S=!0){return this.set([n.TypeURL.XSD_BOOLEAN],j=>([E])=>T(j)(E.typedValue),S)}onString1(T,S=!0){return this.set([n.TypeURL.XSD_STRING],j=>([E])=>T(j)(E),S)}onString1Typed(T,S=!0){return this.set([n.TypeURL.XSD_STRING],j=>([E])=>T(j)(E.typedValue),S)}onLangString1(T,S=!0){return this.set([n.TypeURL.RDF_LANG_STRING],j=>([E])=>T(j)(E),S)}onStringly1(T,S=!0){return this.set([n.TypeAlias.SPARQL_STRINGLY],j=>([E])=>T(j)(E),S)}onStringly1Typed(T,S=!0){return this.set([n.TypeAlias.SPARQL_STRINGLY],j=>([E])=>T(j)(E.typedValue),S)}onNumeric1(T,S=!0){return this.set([n.TypeAlias.SPARQL_NUMERIC],j=>([E])=>T(j)(E),S)}onDateTime1(T,S=!0){return this.set([n.TypeURL.XSD_DATE_TIME],j=>([E])=>T(j)(E),S)}numericConverter(T,S=!0){const j=E=>U=>T(E)(U.typedValue);return this.onUnary(t.TypeURL.XSD_INTEGER,E=>U=>l(j(E)(U)),S).onUnary(t.TypeURL.XSD_DECIMAL,E=>U=>d(j(E)(U)),S).onUnary(t.TypeURL.XSD_FLOAT,E=>U=>f(j(E)(U)),S).onUnary(t.TypeURL.XSD_DOUBLE,E=>U=>h(j(E)(U)),S)}arithmetic(T,S=!0){const j=E=>(U,K)=>T(E)(U.typedValue,K.typedValue);return this.onBinary([t.TypeURL.XSD_INTEGER,t.TypeURL.XSD_INTEGER],E=>(U,K)=>l(j(E)(U,K)),S).onBinary([t.TypeURL.XSD_DECIMAL,t.TypeURL.XSD_DECIMAL],E=>(U,K)=>d(j(E)(U,K)),S).onBinary([t.TypeURL.XSD_FLOAT,t.TypeURL.XSD_FLOAT],E=>(U,K)=>f(j(E)(U,K)),S).onBinary([t.TypeURL.XSD_DOUBLE,t.TypeURL.XSD_DOUBLE],E=>(U,K)=>h(j(E)(U,K)),S)}numberTest(T){return this.numeric(S=>([j,E])=>{const U=T(S)(j.typedValue,E.typedValue);return s(U)})}stringTest(T,S=!0){return this.set([n.TypeURL.XSD_STRING,n.TypeURL.XSD_STRING],j=>([E,U])=>{const K=T(j)(E.typedValue,U.typedValue);return s(K)},S)}booleanTest(T,S=!0){return this.set([n.TypeURL.XSD_BOOLEAN,n.TypeURL.XSD_BOOLEAN],j=>([E,U])=>{const K=T(j)(E.typedValue,U.typedValue);return s(K)},S)}dateTimeTest(T,S=!0){return this.set([n.TypeURL.XSD_DATE_TIME,n.TypeURL.XSD_DATE_TIME],j=>([E,U])=>{const K=T(j)(E.typedValue,U.typedValue);return s(K)},S)}numeric(T){return this.set([n.TypeAlias.SPARQL_NUMERIC,n.TypeAlias.SPARQL_NUMERIC],T)}}gt.Builder=c;function s(F){return new r.BooleanLiteral(F)}gt.bool=s;function l(F){return new r.IntegerLiteral(F)}gt.integer=l;function d(F){return new r.DecimalLiteral(F)}gt.decimal=d;function f(F){return new r.FloatLiteral(F)}gt.float=f;function h(F){return new r.DoubleLiteral(F)}gt.double=h;function p(F){return new r.StringLiteral(F)}gt.string=p;function y(F,T){return new r.LangStringLiteral(F,T)}gt.langString=y;function b(F,T){return new r.DateTimeLiteral(F,T)}gt.dateTime=b;function v(F,T){return F.variable(T.name.slice(1))}return gt.expressionToVar=v,gt}var BO;function Wg(){return BO||(BO=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.typePromotion=i.isSubTypeOf=i.getSuperTypeDict=i.isInternalSubType=i.asGeneralType=i.asOverrideType=i.asKnownLiteralType=i.asTypeAlias=i.typeAliasCheck=i.extensionTableInit=i.getSuperTypes=i.superTypeDictTable=i.extensionTableInput=void 0;const r=Ks(),o=_I(),n=ls();i.extensionTableInput={[n.TypeURL.XSD_DATE_TIME_STAMP]:n.TypeURL.XSD_DATE_TIME,[n.TypeURL.XSD_DAY_TIME_DURATION]:n.TypeURL.XSD_DURATION,[n.TypeURL.XSD_YEAR_MONTH_DURATION]:n.TypeURL.XSD_DURATION,[n.TypeURL.RDF_LANG_STRING]:n.TypeAlias.SPARQL_STRINGLY,[n.TypeURL.XSD_STRING]:n.TypeAlias.SPARQL_STRINGLY,[n.TypeURL.XSD_NORMALIZED_STRING]:n.TypeURL.XSD_STRING,[n.TypeURL.XSD_TOKEN]:n.TypeURL.XSD_NORMALIZED_STRING,[n.TypeURL.XSD_LANGUAGE]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NM_TOKEN]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NAME]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NC_NAME]:n.TypeURL.XSD_NAME,[n.TypeURL.XSD_ENTITY]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_ID]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_ID_REF]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_UNTYPED_ATOMIC]:n.TypeURL.XSD_STRING,[n.TypeURL.XSD_DOUBLE]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_FLOAT]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_DECIMAL]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_INTEGER]:n.TypeURL.XSD_DECIMAL,[n.TypeURL.XSD_NON_POSITIVE_INTEGER]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_NEGATIVE_INTEGER]:n.TypeURL.XSD_NON_POSITIVE_INTEGER,[n.TypeURL.XSD_LONG]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_INT]:n.TypeURL.XSD_LONG,[n.TypeURL.XSD_SHORT]:n.TypeURL.XSD_INT,[n.TypeURL.XSD_BYTE]:n.TypeURL.XSD_SHORT,[n.TypeURL.XSD_NON_NEGATIVE_INTEGER]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_POSITIVE_INTEGER]:n.TypeURL.XSD_NON_NEGATIVE_INTEGER,[n.TypeURL.XSD_UNSIGNED_LONG]:n.TypeURL.XSD_NON_NEGATIVE_INTEGER,[n.TypeURL.XSD_UNSIGNED_INT]:n.TypeURL.XSD_UNSIGNED_LONG,[n.TypeURL.XSD_UNSIGNED_SHORT]:n.TypeURL.XSD_UNSIGNED_INT,[n.TypeURL.XSD_UNSIGNED_BYTE]:n.TypeURL.XSD_UNSIGNED_SHORT,[n.TypeURL.XSD_DATE_TIME]:"term",[n.TypeURL.XSD_BOOLEAN]:"term",[n.TypeURL.XSD_DATE]:"term",[n.TypeURL.XSD_G_MONTH]:"term",[n.TypeURL.XSD_G_MONTHDAY]:"term",[n.TypeURL.XSD_G_YEAR]:"term",[n.TypeURL.XSD_G_YEAR_MONTH]:"term",[n.TypeURL.XSD_TIME]:"term",[n.TypeURL.XSD_G_DAY]:"term",[n.TypeURL.XSD_DURATION]:"term",[n.TypeAlias.SPARQL_NUMERIC]:"term",[n.TypeAlias.SPARQL_STRINGLY]:"term",[n.TypeURL.XSD_ANY_URI]:"term"},i.superTypeDictTable=Object.create(null);function t(y,b){const v=b.cache.get(y);if(v)return v;const F=b.discoverer(y);if(F==="term"){const j=Object.create(null);return j.__depth=0,j[y]=0,b.cache.set(y,j),j}let T;const S=s(F);return S?T={...i.superTypeDictTable[S]}:T={...t(F,b)},T.__depth++,T[y]=T.__depth,b.cache.set(y,T),T}i.getSuperTypes=t;function e(){for(const[y,b]of Object.entries(i.extensionTableInput)){const v=y;i.superTypeDictTable[v]||a(v,b,i.superTypeDictTable)}}i.extensionTableInit=e,e();function a(y,b,v){if(b==="term"||b===void 0){const F=Object.create(null);F.__depth=0,F[y]=0,v[y]=F;return}v[b]||a(b,i.extensionTableInput[b],v),v[y]={...v[b],[y]:v[b].__depth+1,__depth:v[b].__depth+1}}i.typeAliasCheck=Object.create(null);function u(){for(const y of Object.values(n.TypeAlias))i.typeAliasCheck[y]=!0}u();function c(y){if(y in i.typeAliasCheck)return y}i.asTypeAlias=c;function s(y){if(y in i.superTypeDictTable)return y}i.asKnownLiteralType=s;function l(y){if(s(y)??y==="term")return y}i.asOverrideType=l;function d(y){if(y==="term"||(0,r.asTermType)(y))return y}i.asGeneralType=d;function f(y,b){return y!=="term"&&i.superTypeDictTable[y]&&i.superTypeDictTable[y][b]!==void 0}i.isInternalSubType=f;function h(y,b){const v=s(y);return v?i.superTypeDictTable[v]:t(y,b)}i.getSuperTypeDict=h;function p(y,b,v){return y==="term"?!1:h(y,v)[b]!==void 0}i.isSubTypeOf=p,i.typePromotion={[n.TypeURL.XSD_STRING]:[{typeToPromote:n.TypeURL.XSD_ANY_URI,conversionFunction:y=>(0,o.string)(y.str())}],[n.TypeURL.XSD_DOUBLE]:[{typeToPromote:n.TypeURL.XSD_FLOAT,conversionFunction:y=>(0,o.double)(y.typedValue)},{typeToPromote:n.TypeURL.XSD_DECIMAL,conversionFunction:y=>(0,o.double)(y.typedValue)}],[n.TypeURL.XSD_FLOAT]:[{typeToPromote:n.TypeURL.XSD_DECIMAL,conversionFunction:y=>(0,o.float)(y.typedValue)}]}})(f1)),f1}var CO;function Kx(){if(CO)return Ue;CO=1,Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.isNonLexicalLiteral=Ue.NonLexicalLiteral=Ue.YearMonthDurationLiteral=Ue.DayTimeDurationLiteral=Ue.DurationLiteral=Ue.DateLiteral=Ue.TimeLiteral=Ue.DateTimeLiteral=Ue.StringLiteral=Ue.LangStringLiteral=Ue.BooleanLiteral=Ue.DoubleLiteral=Ue.FloatLiteral=Ue.DecimalLiteral=Ue.IntegerLiteral=Ue.NumericLiteral=Ue.Literal=Ue.isLiteralTermExpression=Ue.DefaultGraph=Ue.Quad=Ue.BlankNode=Ue.NamedNode=Ue.Term=void 0;const i=jn(),r=ls(),o=ls(),n=Js(),t=Jx(),e=Wg();let a=class{constructor(){this.expressionType=i.ExpressionType.Term}str(){throw new n.InvalidArgumentTypes([this],r.SparqlOperator.STR)}coerceEBV(){throw new n.EBVCoercionError(this)}};Ue.Term=a;class u extends a{constructor(C){super(),this.value=C,this.termType="namedNode"}toRDF(C){return C.namedNode(this.value)}str(){return this.value}}Ue.NamedNode=u;class c extends a{constructor(C){super(),this.termType="blankNode",this.value=C}toRDF(C){return typeof this.value=="string"?C.blankNode(this.value):this.value}}Ue.BlankNode=c;class s extends a{constructor(C,Y,H,Z){super(),this.subject=C,this.predicate=Y,this.object=H,this.graph=Z,this.termType="quad"}toRDF(C){return C.quad(this.subject.toRDF(C),this.predicate.toRDF(C),this.object.toRDF(C),this.graph.toRDF(C))}str(){return`Quad: [${this.subject.str()}, ${this.predicate.str()}, ${this.object.str()}, ${this.graph.str()}]`}}Ue.Quad=s;class l extends a{constructor(){super(),this.termType="defaultGraph"}toRDF(C){return C.defaultGraph()}str(){return"DefaultGraph"}}Ue.DefaultGraph=l;function d(I){if(I.termType==="literal")return I}Ue.isLiteralTermExpression=d;class f extends a{constructor(C,Y,H,Z){super(),this.typedValue=C,this.dataType=Y,this.strValue=H,this.language=Z,this.termType="literal"}toRDF(C){return C.literal(this.strValue??this.str(),this.language??C.namedNode(this.dataType))}str(){return this.strValue??this.typedValue.toString()}}Ue.Literal=f;class h extends f{constructor(C,Y,H,Z){super(C,Y,H,Z),this.typedValue=C,this.strValue=H,this.language=Z}coerceEBV(){return!!this.typedValue}toRDF(C){const Y=super.toRDF(C);return Number.isFinite(this.typedValue)||(Y.value=Y.value.replace("Infinity","INF")),Y}str(){return this.strValue??this.specificFormatter(this.typedValue)}}Ue.NumericLiteral=h;class p extends h{constructor(C,Y,H,Z){super(C,Y??o.TypeURL.XSD_INTEGER,H,Z),this.typedValue=C,this.strValue=H,this.language=Z}specificFormatter(C){return C.toFixed(0)}}Ue.IntegerLiteral=p;class y extends h{constructor(C,Y,H,Z){super(C,Y??o.TypeURL.XSD_DECIMAL,H,Z),this.typedValue=C,this.strValue=H,this.language=Z}specificFormatter(C){return C.toString()}}Ue.DecimalLiteral=y;class b extends h{constructor(C,Y,H,Z){super(C,Y??o.TypeURL.XSD_FLOAT,H,Z),this.typedValue=C,this.strValue=H,this.language=Z}specificFormatter(C){return C.toString()}}Ue.FloatLiteral=b;class v extends h{constructor(C,Y,H,Z){super(C,Y??o.TypeURL.XSD_DOUBLE,H,Z),this.typedValue=C,this.strValue=H,this.language=Z}specificFormatter(C){if(!Number.isFinite(C))return C>0?"INF":C<0?"-INF":"NaN";const Y=C.toExponential(),[H,Z]=Y.split("e"),le=Z.replace(/\+/u,"");return`${H.includes(".")?H:`${H}.0`}E${le}`}}Ue.DoubleLiteral=v;class F extends f{constructor(C,Y,H){super(C,H??o.TypeURL.XSD_BOOLEAN,Y),this.typedValue=C,this.strValue=Y}coerceEBV(){return this.typedValue}}Ue.BooleanLiteral=F;class T extends f{constructor(C,Y,H){super(C,H??o.TypeURL.RDF_LANG_STRING,C,Y),this.typedValue=C,this.language=Y}coerceEBV(){return this.str().length>0}}Ue.LangStringLiteral=T;class S extends f{constructor(C,Y){super(C,Y??o.TypeURL.XSD_STRING,C),this.typedValue=C}coerceEBV(){return this.str().length>0}}Ue.StringLiteral=S;class j extends f{constructor(C,Y,H){super(C,H??o.TypeURL.XSD_DATE_TIME,Y),this.typedValue=C,this.strValue=Y}str(){return(0,t.serializeDateTime)(this.typedValue)}}Ue.DateTimeLiteral=j;class E extends f{constructor(C,Y,H){super(C,H??o.TypeURL.XSD_TIME,Y),this.typedValue=C,this.strValue=Y}str(){return(0,t.serializeTime)(this.typedValue)}}Ue.TimeLiteral=E;class U extends f{constructor(C,Y,H){super(C,H??o.TypeURL.XSD_DATE,Y),this.typedValue=C,this.strValue=Y}str(){return(0,t.serializeDate)(this.typedValue)}}Ue.DateLiteral=U;class K extends f{constructor(C,Y,H){super(C,H??o.TypeURL.XSD_DURATION,Y),this.typedValue=C,this.strValue=Y}str(){return(0,t.serializeDuration)(this.typedValue)}}Ue.DurationLiteral=K;class _ extends K{constructor(C,Y,H){super(C,Y,H??o.TypeURL.XSD_DAY_TIME_DURATION),this.typedValue=C,this.strValue=Y}}Ue.DayTimeDurationLiteral=_;class O extends f{constructor(C,Y,H){super(C,H??o.TypeURL.XSD_YEAR_MONTH_DURATION,Y),this.typedValue=C,this.strValue=Y}str(){return(0,t.serializeDuration)(this.typedValue,"P0M")}}Ue.YearMonthDurationLiteral=O;class P extends f{constructor(C,Y,H,Z,le){super({toString:()=>"undefined"},Y,Z,le),this.openWorldType=H}coerceEBV(){if((0,e.isSubTypeOf)(this.dataType,o.TypeURL.XSD_BOOLEAN,this.openWorldType)||(0,e.isSubTypeOf)(this.dataType,o.TypeAlias.SPARQL_NUMERIC,this.openWorldType))return!1;throw new n.EBVCoercionError(this)}toRDF(C){return C.literal(this.str(),this.language??C.namedNode(this.dataType))}str(){return this.strValue??""}}Ue.NonLexicalLiteral=P;function R(I){if(I instanceof P)return I}return Ue.isNonLexicalLiteral=R,Ue}var al={},QO;function Yx(){if(QO)return al;QO=1,Object.defineProperty(al,"__esModule",{value:!0}),al.Operator=void 0;const i=jn();let r=class{constructor(n,t,e){this.name=n,this.args=t,this.apply=e,this.expressionType=i.ExpressionType.Operator}};return al.Operator=r,al}var ol={},UO;function Wx(){if(UO)return ol;UO=1,Object.defineProperty(ol,"__esModule",{value:!0}),ol.Aggregate=void 0;const i=jn();let r=class{constructor(n,t){this.name=n,this.expression=t,this.expressionType=i.ExpressionType.Aggregate}};return ol.Aggregate=r,ol}var ul={},VO;function Zx(){if(VO)return ul;VO=1,Object.defineProperty(ul,"__esModule",{value:!0}),ul.Existence=void 0;const i=jn();let r=class{constructor(n){this.expression=n,this.expressionType=i.ExpressionType.Existence}};return ul.Existence=r,ul}var GO;function Ks(){return GO||(GO=1,(function(i){var r=oi&&oi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=oi&&oi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Xx(),i),o(zx(),i),o(Kx(),i),o(Yx(),i),o(Wx(),i),o(Zx(),i)})(oi)),oi}var Lt={},nt={},XO;function pm(){if(XO)return nt;XO=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.extractTimeZone=nt.extractRawTimeZone=nt.dayTimeDurationsToSeconds=nt.yearMonthDurationsToMonths=nt.trimToDayTimeDuration=nt.trimToYearMonthDuration=nt.toUTCDate=nt.toJSDate=nt.negateDuration=nt.toDateTimeRepresentation=nt.defaultedDateTimeRepresentation=nt.simplifyDurationRepresentation=nt.defaultedDurationRepresentation=nt.defaultedYearMonthDurationRepresentation=nt.defaultedDayTimeDurationRepresentation=void 0;function i(y){return{day:y.day??0,hours:y.hours??0,minutes:y.minutes??0,seconds:y.seconds??0}}nt.defaultedDayTimeDurationRepresentation=i;function r(y){return{year:y.year??0,month:y.month??0}}nt.defaultedYearMonthDurationRepresentation=r;function o(y){return{...i(y),...r(y)}}nt.defaultedDurationRepresentation=o;function n(y){const b=o(y),v={},F=b.year+Math.trunc(b.month/12);F&&(v.year=F,b.month%=12),b.month&&(v.month=b.month);const T=b.day+Math.trunc(b.hours/24)+Math.trunc(b.minutes/1440)+Math.trunc(b.seconds/(1440*60));T&&(v.day=T,b.hours%=24,b.minutes%=1440,b.seconds%=1440*60);const S=b.hours+Math.trunc(b.minutes/60)+Math.trunc(b.seconds/3600);S&&(v.hours=S,b.minutes%=60,b.seconds%=3600);const j=b.minutes+Math.trunc(b.seconds/60);return j&&(v.minutes=j,b.seconds%=60),b.seconds&&(v.seconds=b.seconds),v}nt.simplifyDurationRepresentation=n;function t(y){return{...y,day:y.day??1,hours:y.hours??0,month:y.month??1,year:y.year??0,seconds:y.seconds??0,minutes:y.minutes??0}}nt.defaultedDateTimeRepresentation=t;function e({date:y,timeZone:b}){return{year:y.getFullYear(),month:y.getMonth()+1,day:y.getDate(),hours:y.getHours(),minutes:y.getMinutes(),seconds:y.getSeconds(),zoneHours:b.zoneHours,zoneMinutes:b.zoneMinutes}}nt.toDateTimeRepresentation=e;function a(y){return{year:y.year===void 0?void 0:-1*y.year,month:y.month===void 0?void 0:-1*y.month,day:y.day===void 0?void 0:-1*y.day,hours:y.hours===void 0?void 0:-1*y.hours,minutes:y.minutes===void 0?void 0:-1*y.minutes,seconds:y.seconds===void 0?void 0:-1*y.seconds}}nt.negateDuration=a;function u(y){const b=new Date(y.year,y.month-1,y.day,y.hours,y.minutes,Math.trunc(y.seconds),y.seconds%1*1e3);return y.year>=0&&y.year<100&&b.setFullYear(b.getFullYear()-1900),b}nt.toJSDate=u;function c(y,b){const v=u(t(y)),F=v.getTimezoneOffset(),T=y.zoneHours??b.zoneHours,S=y.zoneMinutes??b.zoneMinutes;return new Date(v.getTime()-(F+T*60+S)*60*1e3)}nt.toUTCDate=c;function s(y){return{year:y.year,month:y.month}}nt.trimToYearMonthDuration=s;function l(y){return{day:y.day,hours:y.hours,minutes:y.minutes,seconds:y.seconds}}nt.trimToDayTimeDuration=l;function d(y){return y.year*12+y.month}nt.yearMonthDurationsToMonths=d;function f(y){return((y.day*24+y.hours)*60+y.minutes)*60+y.seconds}nt.dayTimeDurationsToSeconds=f;function h(y){return/(Z|([+-]\d\d:\d\d))?$/u.exec(y)[0]}nt.extractRawTimeZone=h;function p(y){return{zoneHours:y.getTimezoneOffset()/60,zoneMinutes:y.getTimezoneOffset()%60}}return nt.extractTimeZone=p,nt}var cn={},zO;function mI(){if(zO)return cn;zO=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.elapsedDuration=cn.addDurationToDateTime=cn.maximumDayInMonthFor=void 0;const i=pm();function r(e,a,u=0){const c=e-u,s=a-u,l=Math.floor(c/s);return{intDiv:l,remainder:e-l*s}}function o(e,a){const{intDiv:u,remainder:c}=r(a,13,1),s=e+u;return[1,3,5,7,8,10,12].includes(c)?31:[4,6,9,11].includes(c)?30:c===2&&(r(s,400).remainder===0||r(s,100).remainder!==0&&r(s,4).remainder===0)?29:28}cn.maximumDayInMonthFor=o;function n(e,a){const u={...e};let c=r(e.month+a.month,13,1);for(u.month=c.remainder,u.year=e.year+a.year+c.intDiv,c=r(e.seconds+a.seconds,60),u.seconds=c.remainder,c=r(e.minutes+a.minutes+c.intDiv,60),u.minutes=c.remainder,c=r(e.hours+a.hours+c.intDiv,24),u.hours=c.remainder,u.day=e.day+a.day+c.intDiv;;){let s;if(u.day<1)u.day+=o(u.year,u.month-1),s=-1;else if(u.day>o(u.year,u.month))u.day-=o(u.year,u.month),s=1;else break;c=r(u.month+s,13,1),u.month=c.remainder,u.year+=c.intDiv}return u}cn.addDurationToDateTime=n;function t(e,a,u){const c=(0,i.toUTCDate)(e,u),s=(0,i.toUTCDate)(a,u),l=c.getTime()-s.getTime();return{day:Math.floor(l/(1e3*60*60*24)),hours:Math.floor(l%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(l%(1e3*60*60)/(1e3*60)),seconds:l%(1e3*60)}}return cn.elapsedDuration=t,cn}var HO;function i0(){if(HO)return Lt;HO=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.parseDayTimeDuration=Lt.parseYearMonthDuration=Lt.parseDuration=Lt.parseTime=Lt.parseDate=Lt.parseDateTime=Lt.parseXSDDecimal=Lt.parseXSDFloat=void 0;const i=pm(),r=Js(),o=mI();function n(h){const p=Number(h);return Number.isNaN(p)?h==="NaN"?Number.NaN:h==="INF"||h==="+INF"?Number.POSITIVE_INFINITY:h==="-INF"?Number.NEGATIVE_INFINITY:void 0:p}Lt.parseXSDFloat=n;function t(h){const p=Number(h);return Number.isNaN(p)?void 0:p}Lt.parseXSDDecimal=t;function e(h){const[p,y]=h.split("T");if(y===void 0)throw new r.ParseError(h,"dateTime");return{...u(p),...c(y)}}Lt.parseDateTime=e;function a(h){if(h==="")return{zoneHours:void 0,zoneMinutes:void 0};if(h==="Z")return{zoneHours:0,zoneMinutes:0};const y=h.replaceAll(/^([+|-])(\d\d):(\d\d)$/gu,"$11!$2!$3").split("!").map(Number);return{zoneHours:y[0]*y[1],zoneMinutes:y[0]*y[2]}}function u(h){const p=h.replaceAll(/^(-)?([123456789]*\d{4})-(\d\d)-(\d\d)(Z|([+-]\d\d:\d\d))?$/gu,"$11!$2!$3!$4!$5");if(p===h)throw new r.ParseError(h,"date");const y=p.split("!"),b=y.slice(0,-1).map(Number),v={year:b[0]*b[1],month:b[2],day:b[3],...a(y[4])};if(!(v.month>=1&&v.month<=12)||!(v.day>=1&&v.day<=(0,o.maximumDayInMonthFor)(v.year,v.month)))throw new r.ParseError(h,"date");return v}Lt.parseDate=u;function c(h){const p=h.replaceAll(/^(\d\d):(\d\d):(\d\d(\.\d+)?)(Z|([+-]\d\d:\d\d))?$/gu,"$1!$2!$3!$5");if(p===h)throw new r.ParseError(h,"time");const y=p.split("!"),b=y.slice(0,-1).map(Number),v={hours:b[0],minutes:b[1],seconds:b[2],...a(y[3])};if(v.seconds>=60||v.minutes>=60||v.hours>24||v.hours===24&&(v.minutes!==0||v.seconds!==0))throw new r.ParseError(h,"time");return v}function s(h){const p=c(h);return p.hours%=24,p}Lt.parseTime=s;function l(h){const[p,y]=h.split("T"),b=p.replaceAll(/^(-)?P(\d+Y)?(\d+M)?(\d+D)?$/gu,"$11S!$2!$3!$4");if(b===p)throw new r.ParseError(h,"duration");const v=b.split("!");if(y!==void 0){const S=y.replaceAll(/^(\d+H)?(\d+M)?(\d+(\.\d+)?S)?$/gu,"$1!$2!$3");if(y===""||y===S)throw new r.ParseError(h,"duration");v.push(...S.split("!"))}const F=v.map(S=>S.slice(0,-1));if(!F.slice(1).some(Boolean))throw new r.ParseError(h,"duration");const T=Number(F[0]);return(0,i.simplifyDurationRepresentation)({year:F[1]?T*Number(F[1]):void 0,month:F[2]?T*Number(F[2]):void 0,day:F[3]?T*Number(F[3]):void 0,hours:F[4]?T*Number(F[4]):void 0,minutes:F[5]?T*Number(F[5]):void 0,seconds:F[6]?T*Number(F[6]):void 0})}Lt.parseDuration=l;function d(h){const p=l(h);if(["hours","minutes","seconds","day"].some(y=>!!p[y]))throw new r.ParseError(h,"yearMonthDuration");return p}Lt.parseYearMonthDuration=d;function f(h){const p=l(h);if(["year","month"].some(y=>!!p[y]))throw new r.ParseError(h,"dayTimeDuration");return p}return Lt.parseDayTimeDuration=f,Lt}var $O;function kx(){if($O)return Ic;$O=1,Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.TermTransformer=void 0;const i=hr(),r=Ve(),o=Ks(),n=ls(),t=Js(),e=Js(),a=i0(),u=i0(),c=Wg();let s=class{constructor(d){this.superTypeProvider=d}transformRDFTermUnsafe(d){return this.transformTerm({term:d,type:r.Algebra.types.EXPRESSION,expressionType:r.Algebra.expressionTypes.TERM})}transformTerm(d){if(!d.term)throw new t.InvalidExpression(d);switch(d.term.termType){case"Variable":return new o.Variable(i.termToString(d.term));case"Literal":return this.transformLiteral(d.term);case"NamedNode":return new o.NamedNode(d.term.value);case"BlankNode":return new o.BlankNode(d.term.value);case"Quad":return new o.Quad(this.transformRDFTermUnsafe(d.term.subject),this.transformRDFTermUnsafe(d.term.predicate),this.transformRDFTermUnsafe(d.term.object),this.transformRDFTermUnsafe(d.term.graph));case"DefaultGraph":return new o.DefaultGraph}}transformLiteral(d){if(!d.datatype||[null,void 0,""].includes(d.datatype.value))return d.language?new o.LangStringLiteral(d.value,d.language):new o.StringLiteral(d.value);const f=d.datatype.value,h=(0,c.getSuperTypeDict)(f,this.superTypeProvider);try{if(n.TypeURL.XSD_STRING in h)return new o.StringLiteral(d.value,f);if(n.TypeURL.RDF_LANG_STRING in h)return new o.LangStringLiteral(d.value,d.language);if(n.TypeURL.XSD_YEAR_MONTH_DURATION in h)return new o.YearMonthDurationLiteral((0,a.parseYearMonthDuration)(d.value),d.value,f);if(n.TypeURL.XSD_DAY_TIME_DURATION in h)return new o.DayTimeDurationLiteral((0,a.parseDayTimeDuration)(d.value),d.value,f);if(n.TypeURL.XSD_DURATION in h)return new o.DurationLiteral((0,a.parseDuration)(d.value),d.value,f);if(n.TypeURL.XSD_DATE_TIME in h){const b=new Date(d.value);return Number.isNaN(b.getTime())?new o.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value):new o.DateTimeLiteral((0,a.parseDateTime)(d.value),d.value,f)}if(n.TypeURL.XSD_DATE in h)return new o.DateLiteral((0,a.parseDate)(d.value),d.value,f);if(n.TypeURL.XSD_TIME in h)return new o.TimeLiteral((0,a.parseTime)(d.value),d.value,f);if(n.TypeURL.XSD_BOOLEAN in h)return d.value!=="true"&&d.value!=="false"&&d.value!=="1"&&d.value!=="0"?new o.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value):new o.BooleanLiteral(d.value==="true"||d.value==="1",d.value);if(n.TypeURL.XSD_DECIMAL in h){const b=u.parseXSDDecimal(d.value);return b===void 0?new o.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value):n.TypeURL.XSD_INTEGER in h?new o.IntegerLiteral(b,f,d.value):new o.DecimalLiteral(b,f,d.value)}const p=n.TypeURL.XSD_FLOAT in h,y=n.TypeURL.XSD_DOUBLE in h;if(p||y){const b=u.parseXSDFloat(d.value);return b===void 0?new o.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value):p?new o.FloatLiteral(b,f,d.value):new o.DoubleLiteral(b,f,d.value)}return new o.Literal(d.value,f,d.value)}catch(p){if((0,e.isExpressionError)(p))return new o.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value);throw p}}};return Ic.TermTransformer=s,Ic}var sl={},cl={},JO;function Zg(){var f,p,y,b,v,F,T,S,j,E,U,K,_,O,P,R,I,C,Y,H,Z,le,ce,ee,Ae,Ee,ue,a0,Re,Se,Pe,we,gI,N,m,A,_n,mn,o0,Sg,Fg,bt,u0,em,gn,s0;if(JO)return cl;JO=1,Object.defineProperty(cl,"__esModule",{value:!0}),cl.LRUCache=void 0;const i=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,r=new Set,o=typeof process=="object"&&process?process:{},n=(ge,G,z,J)=>{typeof o.emitWarning=="function"?o.emitWarning(ge,G,z,J):console.error(`[${z}] ${G}: ${ge}`)};let t=globalThis.AbortController,e=globalThis.AbortSignal;if(typeof t>"u"){e=class{constructor(){Ft(this,"onabort");Ft(this,"_onabort",[]);Ft(this,"reason");Ft(this,"aborted",!1)}addEventListener(J,ne){this._onabort.push(ne)}},t=class{constructor(){Ft(this,"signal",new e);G()}abort(J){if(!this.signal.aborted){this.signal.reason=J,this.signal.aborted=!0;for(const ne of this.signal._onabort)ne(J);this.signal.onabort?.(J)}}};let ge=o.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const G=()=>{ge&&(ge=!1,n("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",G))}}const a=ge=>!r.has(ge),u=ge=>ge&&ge===Math.floor(ge)&&ge>0&&isFinite(ge),c=ge=>u(ge)?ge<=Math.pow(2,8)?Uint8Array:ge<=Math.pow(2,16)?Uint16Array:ge<=Math.pow(2,32)?Uint32Array:ge<=Number.MAX_SAFE_INTEGER?s:null:null;class s extends Array{constructor(G){super(G),this.fill(0)}}const h=class h{constructor(G,z){Ft(this,"heap");Ft(this,"length");if(!V(h,f))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new z(G),this.length=0}static create(G){const z=c(G);if(!z)return[];Qe(h,f,!0);const J=new h(G,z);return Qe(h,f,!1),J}push(G){this.heap[this.length++]=G}pop(){return this.heap[--this.length]}};f=new WeakMap,tt(h,f,!1);let l=h;const _e=class _e{constructor(G){tt(this,ue);tt(this,b);tt(this,v);tt(this,F);tt(this,T);tt(this,S);tt(this,j);Ft(this,"ttl");Ft(this,"ttlResolution");Ft(this,"ttlAutopurge");Ft(this,"updateAgeOnGet");Ft(this,"updateAgeOnHas");Ft(this,"allowStale");Ft(this,"noDisposeOnSet");Ft(this,"noUpdateTTL");Ft(this,"maxEntrySize");Ft(this,"sizeCalculation");Ft(this,"noDeleteOnFetchRejection");Ft(this,"noDeleteOnStaleGet");Ft(this,"allowStaleOnFetchAbort");Ft(this,"allowStaleOnFetchRejection");Ft(this,"ignoreFetchAbort");tt(this,E);tt(this,U);tt(this,K);tt(this,_);tt(this,O);tt(this,P);tt(this,R);tt(this,I);tt(this,C);tt(this,Y);tt(this,H);tt(this,Z);tt(this,le);tt(this,ce);tt(this,ee);tt(this,Ae);tt(this,Ee);tt(this,Re,()=>{});tt(this,Se,()=>{});tt(this,Pe,()=>{});tt(this,we,()=>!1);tt(this,N,G=>{});tt(this,m,(G,z,J)=>{});tt(this,A,(G,z,J,ne)=>{if(J||ne)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});Ft(this,p,"LRUCache");const{max:z=0,ttl:J,ttlResolution:ne=1,ttlAutopurge:se,updateAgeOnGet:fe,updateAgeOnHas:Oe,allowStale:Te,dispose:De,disposeAfter:Le,noDisposeOnSet:je,noUpdateTTL:Je,maxSize:Xe=0,maxEntrySize:x=0,sizeCalculation:ie,fetchMethod:he,memoMethod:ve,noDeleteOnFetchRejection:Ne,noDeleteOnStaleGet:Ge,allowStaleOnFetchRejection:qe,allowStaleOnFetchAbort:et,ignoreFetchAbort:st}=G;if(z!==0&&!u(z))throw new TypeError("max option must be a nonnegative integer");const mt=z?c(z):Array;if(!mt)throw new Error("invalid max value: "+z);if(Qe(this,b,z),Qe(this,v,Xe),this.maxEntrySize=x||V(this,v),this.sizeCalculation=ie,this.sizeCalculation){if(!V(this,v)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(ve!==void 0&&typeof ve!="function")throw new TypeError("memoMethod must be a function if defined");if(Qe(this,j,ve),he!==void 0&&typeof he!="function")throw new TypeError("fetchMethod must be a function if specified");if(Qe(this,S,he),Qe(this,Ae,!!he),Qe(this,K,new Map),Qe(this,_,new Array(z).fill(void 0)),Qe(this,O,new Array(z).fill(void 0)),Qe(this,P,new mt(z)),Qe(this,R,new mt(z)),Qe(this,I,0),Qe(this,C,0),Qe(this,Y,l.create(z)),Qe(this,E,0),Qe(this,U,0),typeof De=="function"&&Qe(this,F,De),typeof Le=="function"?(Qe(this,T,Le),Qe(this,H,[])):(Qe(this,T,void 0),Qe(this,H,void 0)),Qe(this,ee,!!V(this,F)),Qe(this,Ee,!!V(this,T)),this.noDisposeOnSet=!!je,this.noUpdateTTL=!!Je,this.noDeleteOnFetchRejection=!!Ne,this.allowStaleOnFetchRejection=!!qe,this.allowStaleOnFetchAbort=!!et,this.ignoreFetchAbort=!!st,this.maxEntrySize!==0){if(V(this,v)!==0&&!u(V(this,v)))throw new TypeError("maxSize must be a positive integer if specified");if(!u(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Me(this,ue,gI).call(this)}if(this.allowStale=!!Te,this.noDeleteOnStaleGet=!!Ge,this.updateAgeOnGet=!!fe,this.updateAgeOnHas=!!Oe,this.ttlResolution=u(ne)||ne===0?ne:1,this.ttlAutopurge=!!se,this.ttl=J||0,this.ttl){if(!u(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Me(this,ue,a0).call(this)}if(V(this,b)===0&&this.ttl===0&&V(this,v)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!V(this,b)&&!V(this,v)){const wt="LRU_CACHE_UNBOUNDED";a(wt)&&(r.add(wt),n("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",wt,_e))}}static unsafeExposeInternals(G){return{starts:V(G,le),ttls:V(G,ce),sizes:V(G,Z),keyMap:V(G,K),keyList:V(G,_),valList:V(G,O),next:V(G,P),prev:V(G,R),get head(){return V(G,I)},get tail(){return V(G,C)},free:V(G,Y),isBackgroundFetch:z=>{var J;return Me(J=G,ue,bt).call(J,z)},backgroundFetch:(z,J,ne,se)=>{var fe;return Me(fe=G,ue,Fg).call(fe,z,J,ne,se)},moveToTail:z=>{var J;return Me(J=G,ue,em).call(J,z)},indexes:z=>{var J;return Me(J=G,ue,_n).call(J,z)},rindexes:z=>{var J;return Me(J=G,ue,mn).call(J,z)},isStale:z=>{var J;return V(J=G,we).call(J,z)}}}get max(){return V(this,b)}get maxSize(){return V(this,v)}get calculatedSize(){return V(this,U)}get size(){return V(this,E)}get fetchMethod(){return V(this,S)}get memoMethod(){return V(this,j)}get dispose(){return V(this,F)}get disposeAfter(){return V(this,T)}getRemainingTTL(G){return V(this,K).has(G)?1/0:0}*entries(){for(const G of Me(this,ue,_n).call(this))V(this,O)[G]!==void 0&&V(this,_)[G]!==void 0&&!Me(this,ue,bt).call(this,V(this,O)[G])&&(yield[V(this,_)[G],V(this,O)[G]])}*rentries(){for(const G of Me(this,ue,mn).call(this))V(this,O)[G]!==void 0&&V(this,_)[G]!==void 0&&!Me(this,ue,bt).call(this,V(this,O)[G])&&(yield[V(this,_)[G],V(this,O)[G]])}*keys(){for(const G of Me(this,ue,_n).call(this)){const z=V(this,_)[G];z!==void 0&&!Me(this,ue,bt).call(this,V(this,O)[G])&&(yield z)}}*rkeys(){for(const G of Me(this,ue,mn).call(this)){const z=V(this,_)[G];z!==void 0&&!Me(this,ue,bt).call(this,V(this,O)[G])&&(yield z)}}*values(){for(const G of Me(this,ue,_n).call(this))V(this,O)[G]!==void 0&&!Me(this,ue,bt).call(this,V(this,O)[G])&&(yield V(this,O)[G])}*rvalues(){for(const G of Me(this,ue,mn).call(this))V(this,O)[G]!==void 0&&!Me(this,ue,bt).call(this,V(this,O)[G])&&(yield V(this,O)[G])}[(y=Symbol.iterator,p=Symbol.toStringTag,y)](){return this.entries()}find(G,z={}){for(const J of Me(this,ue,_n).call(this)){const ne=V(this,O)[J],se=Me(this,ue,bt).call(this,ne)?ne.__staleWhileFetching:ne;if(se!==void 0&&G(se,V(this,_)[J],this))return this.get(V(this,_)[J],z)}}forEach(G,z=this){for(const J of Me(this,ue,_n).call(this)){const ne=V(this,O)[J],se=Me(this,ue,bt).call(this,ne)?ne.__staleWhileFetching:ne;se!==void 0&&G.call(z,se,V(this,_)[J],this)}}rforEach(G,z=this){for(const J of Me(this,ue,mn).call(this)){const ne=V(this,O)[J],se=Me(this,ue,bt).call(this,ne)?ne.__staleWhileFetching:ne;se!==void 0&&G.call(z,se,V(this,_)[J],this)}}purgeStale(){let G=!1;for(const z of Me(this,ue,mn).call(this,{allowStale:!0}))V(this,we).call(this,z)&&(Me(this,ue,gn).call(this,V(this,_)[z],"expire"),G=!0);return G}info(G){const z=V(this,K).get(G);if(z===void 0)return;const J=V(this,O)[z],ne=Me(this,ue,bt).call(this,J)?J.__staleWhileFetching:J;if(ne===void 0)return;const se={value:ne};if(V(this,ce)&&V(this,le)){const fe=V(this,ce)[z],Oe=V(this,le)[z];if(fe&&Oe){const Te=fe-(i.now()-Oe);se.ttl=Te,se.start=Date.now()}}return V(this,Z)&&(se.size=V(this,Z)[z]),se}dump(){const G=[];for(const z of Me(this,ue,_n).call(this,{allowStale:!0})){const J=V(this,_)[z],ne=V(this,O)[z],se=Me(this,ue,bt).call(this,ne)?ne.__staleWhileFetching:ne;if(se===void 0||J===void 0)continue;const fe={value:se};if(V(this,ce)&&V(this,le)){fe.ttl=V(this,ce)[z];const Oe=i.now()-V(this,le)[z];fe.start=Math.floor(Date.now()-Oe)}V(this,Z)&&(fe.size=V(this,Z)[z]),G.unshift([J,fe])}return G}load(G){this.clear();for(const[z,J]of G){if(J.start){const ne=Date.now()-J.start;J.start=i.now()-ne}this.set(z,J.value,J)}}set(G,z,J={}){var Je,Xe,x;if(z===void 0)return this.delete(G),this;const{ttl:ne=this.ttl,start:se,noDisposeOnSet:fe=this.noDisposeOnSet,sizeCalculation:Oe=this.sizeCalculation,status:Te}=J;let{noUpdateTTL:De=this.noUpdateTTL}=J;const Le=V(this,A).call(this,G,z,J.size||0,Oe);if(this.maxEntrySize&&Le>this.maxEntrySize)return Te&&(Te.set="miss",Te.maxEntrySizeExceeded=!0),Me(this,ue,gn).call(this,G,"set"),this;let je=V(this,E)===0?void 0:V(this,K).get(G);if(je===void 0)je=V(this,E)===0?V(this,C):V(this,Y).length!==0?V(this,Y).pop():V(this,E)===V(this,b)?Me(this,ue,Sg).call(this,!1):V(this,E),V(this,_)[je]=G,V(this,O)[je]=z,V(this,K).set(G,je),V(this,P)[V(this,C)]=je,V(this,R)[je]=V(this,C),Qe(this,C,je),Zm(this,E)._++,V(this,m).call(this,je,Le,Te),Te&&(Te.set="add"),De=!1;else{Me(this,ue,em).call(this,je);const ie=V(this,O)[je];if(z!==ie){if(V(this,Ae)&&Me(this,ue,bt).call(this,ie)){ie.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:he}=ie;he!==void 0&&!fe&&(V(this,ee)&&((Je=V(this,F))==null||Je.call(this,he,G,"set")),V(this,Ee)&&V(this,H)?.push([he,G,"set"]))}else fe||(V(this,ee)&&((Xe=V(this,F))==null||Xe.call(this,ie,G,"set")),V(this,Ee)&&V(this,H)?.push([ie,G,"set"]));if(V(this,N).call(this,je),V(this,m).call(this,je,Le,Te),V(this,O)[je]=z,Te){Te.set="replace";const he=ie&&Me(this,ue,bt).call(this,ie)?ie.__staleWhileFetching:ie;he!==void 0&&(Te.oldValue=he)}}else Te&&(Te.set="update")}if(ne!==0&&!V(this,ce)&&Me(this,ue,a0).call(this),V(this,ce)&&(De||V(this,Pe).call(this,je,ne,se),Te&&V(this,Se).call(this,Te,je)),!fe&&V(this,Ee)&&V(this,H)){const ie=V(this,H);let he;for(;he=ie?.shift();)(x=V(this,T))==null||x.call(this,...he)}return this}pop(){var G;try{for(;V(this,E);){const z=V(this,O)[V(this,I)];if(Me(this,ue,Sg).call(this,!0),Me(this,ue,bt).call(this,z)){if(z.__staleWhileFetching)return z.__staleWhileFetching}else if(z!==void 0)return z}}finally{if(V(this,Ee)&&V(this,H)){const z=V(this,H);let J;for(;J=z?.shift();)(G=V(this,T))==null||G.call(this,...J)}}}has(G,z={}){const{updateAgeOnHas:J=this.updateAgeOnHas,status:ne}=z,se=V(this,K).get(G);if(se!==void 0){const fe=V(this,O)[se];if(Me(this,ue,bt).call(this,fe)&&fe.__staleWhileFetching===void 0)return!1;if(V(this,we).call(this,se))ne&&(ne.has="stale",V(this,Se).call(this,ne,se));else return J&&V(this,Re).call(this,se),ne&&(ne.has="hit",V(this,Se).call(this,ne,se)),!0}else ne&&(ne.has="miss");return!1}peek(G,z={}){const{allowStale:J=this.allowStale}=z,ne=V(this,K).get(G);if(ne===void 0||!J&&V(this,we).call(this,ne))return;const se=V(this,O)[ne];return Me(this,ue,bt).call(this,se)?se.__staleWhileFetching:se}async fetch(G,z={}){const{allowStale:J=this.allowStale,updateAgeOnGet:ne=this.updateAgeOnGet,noDeleteOnStaleGet:se=this.noDeleteOnStaleGet,ttl:fe=this.ttl,noDisposeOnSet:Oe=this.noDisposeOnSet,size:Te=0,sizeCalculation:De=this.sizeCalculation,noUpdateTTL:Le=this.noUpdateTTL,noDeleteOnFetchRejection:je=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:Je=this.allowStaleOnFetchRejection,ignoreFetchAbort:Xe=this.ignoreFetchAbort,allowStaleOnFetchAbort:x=this.allowStaleOnFetchAbort,context:ie,forceRefresh:he=!1,status:ve,signal:Ne}=z;if(!V(this,Ae))return ve&&(ve.fetch="get"),this.get(G,{allowStale:J,updateAgeOnGet:ne,noDeleteOnStaleGet:se,status:ve});const Ge={allowStale:J,updateAgeOnGet:ne,noDeleteOnStaleGet:se,ttl:fe,noDisposeOnSet:Oe,size:Te,sizeCalculation:De,noUpdateTTL:Le,noDeleteOnFetchRejection:je,allowStaleOnFetchRejection:Je,allowStaleOnFetchAbort:x,ignoreFetchAbort:Xe,status:ve,signal:Ne};let qe=V(this,K).get(G);if(qe===void 0){ve&&(ve.fetch="miss");const et=Me(this,ue,Fg).call(this,G,qe,Ge,ie);return et.__returned=et}else{const et=V(this,O)[qe];if(Me(this,ue,bt).call(this,et)){const qt=J&&et.__staleWhileFetching!==void 0;return ve&&(ve.fetch="inflight",qt&&(ve.returnedStale=!0)),qt?et.__staleWhileFetching:et.__returned=et}const st=V(this,we).call(this,qe);if(!he&&!st)return ve&&(ve.fetch="hit"),Me(this,ue,em).call(this,qe),ne&&V(this,Re).call(this,qe),ve&&V(this,Se).call(this,ve,qe),et;const mt=Me(this,ue,Fg).call(this,G,qe,Ge,ie),St=mt.__staleWhileFetching!==void 0&&J;return ve&&(ve.fetch=st?"stale":"refresh",St&&st&&(ve.returnedStale=!0)),St?mt.__staleWhileFetching:mt.__returned=mt}}async forceFetch(G,z={}){const J=await this.fetch(G,z);if(J===void 0)throw new Error("fetch() returned undefined");return J}memo(G,z={}){const J=V(this,j);if(!J)throw new Error("no memoMethod provided to constructor");const{context:ne,forceRefresh:se,...fe}=z,Oe=this.get(G,fe);if(!se&&Oe!==void 0)return Oe;const Te=J(G,Oe,{options:fe,context:ne});return this.set(G,Te,fe),Te}get(G,z={}){const{allowStale:J=this.allowStale,updateAgeOnGet:ne=this.updateAgeOnGet,noDeleteOnStaleGet:se=this.noDeleteOnStaleGet,status:fe}=z,Oe=V(this,K).get(G);if(Oe!==void 0){const Te=V(this,O)[Oe],De=Me(this,ue,bt).call(this,Te);return fe&&V(this,Se).call(this,fe,Oe),V(this,we).call(this,Oe)?(fe&&(fe.get="stale"),De?(fe&&J&&Te.__staleWhileFetching!==void 0&&(fe.returnedStale=!0),J?Te.__staleWhileFetching:void 0):(se||Me(this,ue,gn).call(this,G,"expire"),fe&&J&&(fe.returnedStale=!0),J?Te:void 0)):(fe&&(fe.get="hit"),De?Te.__staleWhileFetching:(Me(this,ue,em).call(this,Oe),ne&&V(this,Re).call(this,Oe),Te))}else fe&&(fe.get="miss")}delete(G){return Me(this,ue,gn).call(this,G,"delete")}clear(){return Me(this,ue,s0).call(this,"delete")}};b=new WeakMap,v=new WeakMap,F=new WeakMap,T=new WeakMap,S=new WeakMap,j=new WeakMap,E=new WeakMap,U=new WeakMap,K=new WeakMap,_=new WeakMap,O=new WeakMap,P=new WeakMap,R=new WeakMap,I=new WeakMap,C=new WeakMap,Y=new WeakMap,H=new WeakMap,Z=new WeakMap,le=new WeakMap,ce=new WeakMap,ee=new WeakMap,Ae=new WeakMap,Ee=new WeakMap,ue=new WeakSet,a0=function(){const G=new s(V(this,b)),z=new s(V(this,b));Qe(this,ce,G),Qe(this,le,z),Qe(this,Pe,(se,fe,Oe=i.now())=>{if(z[se]=fe!==0?Oe:0,G[se]=fe,fe!==0&&this.ttlAutopurge){const Te=setTimeout(()=>{V(this,we).call(this,se)&&Me(this,ue,gn).call(this,V(this,_)[se],"expire")},fe+1);Te.unref&&Te.unref()}}),Qe(this,Re,se=>{z[se]=G[se]!==0?i.now():0}),Qe(this,Se,(se,fe)=>{if(G[fe]){const Oe=G[fe],Te=z[fe];if(!Oe||!Te)return;se.ttl=Oe,se.start=Te,se.now=J||ne();const De=se.now-Te;se.remainingTTL=Oe-De}});let J=0;const ne=()=>{const se=i.now();if(this.ttlResolution>0){J=se;const fe=setTimeout(()=>J=0,this.ttlResolution);fe.unref&&fe.unref()}return se};this.getRemainingTTL=se=>{const fe=V(this,K).get(se);if(fe===void 0)return 0;const Oe=G[fe],Te=z[fe];if(!Oe||!Te)return 1/0;const De=(J||ne())-Te;return Oe-De},Qe(this,we,se=>{const fe=z[se],Oe=G[se];return!!Oe&&!!fe&&(J||ne())-fe>Oe})},Re=new WeakMap,Se=new WeakMap,Pe=new WeakMap,we=new WeakMap,gI=function(){const G=new s(V(this,b));Qe(this,U,0),Qe(this,Z,G),Qe(this,N,z=>{Qe(this,U,V(this,U)-G[z]),G[z]=0}),Qe(this,A,(z,J,ne,se)=>{if(Me(this,ue,bt).call(this,J))return 0;if(!u(ne))if(se){if(typeof se!="function")throw new TypeError("sizeCalculation must be a function");if(ne=se(J,z),!u(ne))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return ne}),Qe(this,m,(z,J,ne)=>{if(G[z]=J,V(this,v)){const se=V(this,v)-G[z];for(;V(this,U)>se;)Me(this,ue,Sg).call(this,!0)}Qe(this,U,V(this,U)+G[z]),ne&&(ne.entrySize=J,ne.totalCalculatedSize=V(this,U))})},N=new WeakMap,m=new WeakMap,A=new WeakMap,_n=function*({allowStale:G=this.allowStale}={}){if(V(this,E))for(let z=V(this,C);!(!Me(this,ue,o0).call(this,z)||((G||!V(this,we).call(this,z))&&(yield z),z===V(this,I)));)z=V(this,R)[z]},mn=function*({allowStale:G=this.allowStale}={}){if(V(this,E))for(let z=V(this,I);!(!Me(this,ue,o0).call(this,z)||((G||!V(this,we).call(this,z))&&(yield z),z===V(this,C)));)z=V(this,P)[z]},o0=function(G){return G!==void 0&&V(this,K).get(V(this,_)[G])===G},Sg=function(G){var se;const z=V(this,I),J=V(this,_)[z],ne=V(this,O)[z];return V(this,Ae)&&Me(this,ue,bt).call(this,ne)?ne.__abortController.abort(new Error("evicted")):(V(this,ee)||V(this,Ee))&&(V(this,ee)&&((se=V(this,F))==null||se.call(this,ne,J,"evict")),V(this,Ee)&&V(this,H)?.push([ne,J,"evict"])),V(this,N).call(this,z),G&&(V(this,_)[z]=void 0,V(this,O)[z]=void 0,V(this,Y).push(z)),V(this,E)===1?(Qe(this,I,Qe(this,C,0)),V(this,Y).length=0):Qe(this,I,V(this,P)[z]),V(this,K).delete(J),Zm(this,E)._--,z},Fg=function(G,z,J,ne){const se=z===void 0?void 0:V(this,O)[z];if(Me(this,ue,bt).call(this,se))return se;const fe=new t,{signal:Oe}=J;Oe?.addEventListener("abort",()=>fe.abort(Oe.reason),{signal:fe.signal});const Te={signal:fe.signal,options:J,context:ne},De=(ie,he=!1)=>{const{aborted:ve}=fe.signal,Ne=J.ignoreFetchAbort&&ie!==void 0;if(J.status&&(ve&&!he?(J.status.fetchAborted=!0,J.status.fetchError=fe.signal.reason,Ne&&(J.status.fetchAbortIgnored=!0)):J.status.fetchResolved=!0),ve&&!Ne&&!he)return je(fe.signal.reason);const Ge=Xe;return V(this,O)[z]===Xe&&(ie===void 0?Ge.__staleWhileFetching?V(this,O)[z]=Ge.__staleWhileFetching:Me(this,ue,gn).call(this,G,"fetch"):(J.status&&(J.status.fetchUpdated=!0),this.set(G,ie,Te.options))),ie},Le=ie=>(J.status&&(J.status.fetchRejected=!0,J.status.fetchError=ie),je(ie)),je=ie=>{const{aborted:he}=fe.signal,ve=he&&J.allowStaleOnFetchAbort,Ne=ve||J.allowStaleOnFetchRejection,Ge=Ne||J.noDeleteOnFetchRejection,qe=Xe;if(V(this,O)[z]===Xe&&(!Ge||qe.__staleWhileFetching===void 0?Me(this,ue,gn).call(this,G,"fetch"):ve||(V(this,O)[z]=qe.__staleWhileFetching)),Ne)return J.status&&qe.__staleWhileFetching!==void 0&&(J.status.returnedStale=!0),qe.__staleWhileFetching;if(qe.__returned===qe)throw ie},Je=(ie,he)=>{var Ne;const ve=(Ne=V(this,S))==null?void 0:Ne.call(this,G,se,Te);ve&&ve instanceof Promise&&ve.then(Ge=>ie(Ge===void 0?void 0:Ge),he),fe.signal.addEventListener("abort",()=>{(!J.ignoreFetchAbort||J.allowStaleOnFetchAbort)&&(ie(void 0),J.allowStaleOnFetchAbort&&(ie=Ge=>De(Ge,!0)))})};J.status&&(J.status.fetchDispatched=!0);const Xe=new Promise(Je).then(De,Le),x=Object.assign(Xe,{__abortController:fe,__staleWhileFetching:se,__returned:void 0});return z===void 0?(this.set(G,x,{...Te.options,status:void 0}),z=V(this,K).get(G)):V(this,O)[z]=x,x},bt=function(G){if(!V(this,Ae))return!1;const z=G;return!!z&&z instanceof Promise&&z.hasOwnProperty("__staleWhileFetching")&&z.__abortController instanceof t},u0=function(G,z){V(this,R)[z]=G,V(this,P)[G]=z},em=function(G){G!==V(this,C)&&(G===V(this,I)?Qe(this,I,V(this,P)[G]):Me(this,ue,u0).call(this,V(this,R)[G],V(this,P)[G]),Me(this,ue,u0).call(this,V(this,C),G),Qe(this,C,G))},gn=function(G,z){var ne,se;let J=!1;if(V(this,E)!==0){const fe=V(this,K).get(G);if(fe!==void 0)if(J=!0,V(this,E)===1)Me(this,ue,s0).call(this,z);else{V(this,N).call(this,fe);const Oe=V(this,O)[fe];if(Me(this,ue,bt).call(this,Oe)?Oe.__abortController.abort(new Error("deleted")):(V(this,ee)||V(this,Ee))&&(V(this,ee)&&((ne=V(this,F))==null||ne.call(this,Oe,G,z)),V(this,Ee)&&V(this,H)?.push([Oe,G,z])),V(this,K).delete(G),V(this,_)[fe]=void 0,V(this,O)[fe]=void 0,fe===V(this,C))Qe(this,C,V(this,R)[fe]);else if(fe===V(this,I))Qe(this,I,V(this,P)[fe]);else{const Te=V(this,R)[fe];V(this,P)[Te]=V(this,P)[fe];const De=V(this,P)[fe];V(this,R)[De]=V(this,R)[fe]}Zm(this,E)._--,V(this,Y).push(fe)}}if(V(this,Ee)&&V(this,H)?.length){const fe=V(this,H);let Oe;for(;Oe=fe?.shift();)(se=V(this,T))==null||se.call(this,...Oe)}return J},s0=function(G){var z,J;for(const ne of Me(this,ue,mn).call(this,{allowStale:!0})){const se=V(this,O)[ne];if(Me(this,ue,bt).call(this,se))se.__abortController.abort(new Error("deleted"));else{const fe=V(this,_)[ne];V(this,ee)&&((z=V(this,F))==null||z.call(this,se,fe,G)),V(this,Ee)&&V(this,H)?.push([se,fe,G])}}if(V(this,K).clear(),V(this,O).fill(void 0),V(this,_).fill(void 0),V(this,ce)&&V(this,le)&&(V(this,ce).fill(0),V(this,le).fill(0)),V(this,Z)&&V(this,Z).fill(0),Qe(this,I,0),Qe(this,C,0),V(this,Y).length=0,Qe(this,U,0),Qe(this,E,0),V(this,Ee)&&V(this,H)){const ne=V(this,H);let se;for(;se=ne?.shift();)(J=V(this,T))==null||J.call(this,...se)}};let d=_e;return cl.LRUCache=d,cl}var KO;function e7(){if(KO)return sl;KO=1,Object.defineProperty(sl,"__esModule",{value:!0}),sl.prepareEvaluatorActionContext=void 0;const i=Fe(),r=Zg(),o=pm();function n(t){let e=t;if(e.has(i.KeysInitQuery.extensionFunctionCreator)&&e.has(i.KeysInitQuery.extensionFunctions))throw new Error("Illegal simultaneous usage of extensionFunctionCreator and extensionFunctions in context");if(e.has(i.KeysInitQuery.extensionFunctionCreator))e=e.set(i.KeysExpressionEvaluator.extensionFunctionCreator,e.get(i.KeysInitQuery.extensionFunctionCreator));else if(e.has(i.KeysInitQuery.extensionFunctions)){const a=e.getSafe(i.KeysInitQuery.extensionFunctions);e=e.set(i.KeysExpressionEvaluator.extensionFunctionCreator,async u=>a[u.value])}else e=e.setDefault(i.KeysExpressionEvaluator.extensionFunctionCreator,async()=>{});return e=e.setDefault(i.KeysExpressionEvaluator.defaultTimeZone,(0,o.extractTimeZone)(e.getSafe(i.KeysInitQuery.queryTimestamp))),e=e.setDefault(i.KeysExpressionEvaluator.superTypeProvider,{cache:new r.LRUCache({max:1e3}),discoverer:()=>"term"}),e}return sl.prepareEvaluatorActionContext=n,sl}var YO;function W(){return YO||(YO=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.LangStringLiteral=i.TimeLiteral=i.DurationLiteral=i.DateLiteral=i.DayTimeDurationLiteral=i.DateTimeLiteral=i.yearMonthDurationsToMonths=i.toUTCDate=i.toDateTimeRepresentation=i.negateDuration=i.extractRawTimeZone=i.defaultedYearMonthDurationRepresentation=i.defaultedDurationRepresentation=i.defaultedDayTimeDurationRepresentation=i.defaultedDateTimeRepresentation=i.dayTimeDurationsToSeconds=i.isSubTypeOf=i.SparqlOperator=i.TypeAlias=i.TypeURL=i.typedLiteral=i.InvalidArity=i.InvalidLexicalForm=i.ExtensionFunctionError=i.CastError=i.UnboundVariableError=i.NoAggregator=i.InError=i.CoalesceError=i.InvalidArgumentTypes=i.InvalidTimezoneCall=i.IncompatibleLanguageOperation=i.RDFEqualTypeError=i.EmptyAggregateError=i.isExpressionError=i.ExpressionError=i.Builder=i.expressionToVar=i.float=i.decimal=i.langString=i.dateTime=i.integer=i.double=i.string=i.bool=i.declare=i.prepareEvaluatorActionContext=i.OverloadTree=i.TermTransformer=void 0,i.trimToDayTimeDuration=i.trimToYearMonthDuration=i.parseDate=i.parseXSDFloat=i.parseXSDDecimal=i.parseYearMonthDuration=i.parseTime=i.parseDuration=i.parseDayTimeDuration=i.parseDateTime=i.elapsedDuration=i.addDurationToDateTime=i.isNonLexicalLiteral=i.StringLiteral=i.NonLexicalLiteral=i.FloatLiteral=i.IntegerLiteral=i.Literal=i.Existence=i.Aggregate=i.DoubleLiteral=i.DefaultGraph=i.DecimalLiteral=i.BlankNode=i.BooleanLiteral=i.NumericLiteral=i.Variable=i.NamedNode=i.Operator=i.Quad=i.YearMonthDurationLiteral=i.Term=void 0;var r=kx();Object.defineProperty(i,"TermTransformer",{enumerable:!0,get:function(){return r.TermTransformer}});var o=yI();Object.defineProperty(i,"OverloadTree",{enumerable:!0,get:function(){return o.OverloadTree}});var n=e7();Object.defineProperty(i,"prepareEvaluatorActionContext",{enumerable:!0,get:function(){return n.prepareEvaluatorActionContext}});var t=_I();Object.defineProperty(i,"declare",{enumerable:!0,get:function(){return t.declare}}),Object.defineProperty(i,"bool",{enumerable:!0,get:function(){return t.bool}}),Object.defineProperty(i,"string",{enumerable:!0,get:function(){return t.string}}),Object.defineProperty(i,"double",{enumerable:!0,get:function(){return t.double}}),Object.defineProperty(i,"integer",{enumerable:!0,get:function(){return t.integer}}),Object.defineProperty(i,"dateTime",{enumerable:!0,get:function(){return t.dateTime}}),Object.defineProperty(i,"langString",{enumerable:!0,get:function(){return t.langString}}),Object.defineProperty(i,"decimal",{enumerable:!0,get:function(){return t.decimal}}),Object.defineProperty(i,"float",{enumerable:!0,get:function(){return t.float}}),Object.defineProperty(i,"expressionToVar",{enumerable:!0,get:function(){return t.expressionToVar}}),Object.defineProperty(i,"Builder",{enumerable:!0,get:function(){return t.Builder}});var e=Js();Object.defineProperty(i,"ExpressionError",{enumerable:!0,get:function(){return e.ExpressionError}}),Object.defineProperty(i,"isExpressionError",{enumerable:!0,get:function(){return e.isExpressionError}}),Object.defineProperty(i,"EmptyAggregateError",{enumerable:!0,get:function(){return e.EmptyAggregateError}}),Object.defineProperty(i,"RDFEqualTypeError",{enumerable:!0,get:function(){return e.RDFEqualTypeError}}),Object.defineProperty(i,"IncompatibleLanguageOperation",{enumerable:!0,get:function(){return e.IncompatibleLanguageOperation}}),Object.defineProperty(i,"InvalidTimezoneCall",{enumerable:!0,get:function(){return e.InvalidTimezoneCall}}),Object.defineProperty(i,"InvalidArgumentTypes",{enumerable:!0,get:function(){return e.InvalidArgumentTypes}}),Object.defineProperty(i,"CoalesceError",{enumerable:!0,get:function(){return e.CoalesceError}}),Object.defineProperty(i,"InError",{enumerable:!0,get:function(){return e.InError}}),Object.defineProperty(i,"NoAggregator",{enumerable:!0,get:function(){return e.NoAggregator}}),Object.defineProperty(i,"UnboundVariableError",{enumerable:!0,get:function(){return e.UnboundVariableError}}),Object.defineProperty(i,"CastError",{enumerable:!0,get:function(){return e.CastError}}),Object.defineProperty(i,"ExtensionFunctionError",{enumerable:!0,get:function(){return e.ExtensionFunctionError}}),Object.defineProperty(i,"InvalidLexicalForm",{enumerable:!0,get:function(){return e.InvalidLexicalForm}}),Object.defineProperty(i,"InvalidArity",{enumerable:!0,get:function(){return e.InvalidArity}});var a=ls();Object.defineProperty(i,"typedLiteral",{enumerable:!0,get:function(){return a.typedLiteral}}),Object.defineProperty(i,"TypeURL",{enumerable:!0,get:function(){return a.TypeURL}}),Object.defineProperty(i,"TypeAlias",{enumerable:!0,get:function(){return a.TypeAlias}}),Object.defineProperty(i,"SparqlOperator",{enumerable:!0,get:function(){return a.SparqlOperator}});var u=Wg();Object.defineProperty(i,"isSubTypeOf",{enumerable:!0,get:function(){return u.isSubTypeOf}});var c=pm();Object.defineProperty(i,"dayTimeDurationsToSeconds",{enumerable:!0,get:function(){return c.dayTimeDurationsToSeconds}}),Object.defineProperty(i,"defaultedDateTimeRepresentation",{enumerable:!0,get:function(){return c.defaultedDateTimeRepresentation}}),Object.defineProperty(i,"defaultedDayTimeDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedDayTimeDurationRepresentation}}),Object.defineProperty(i,"defaultedDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedDurationRepresentation}}),Object.defineProperty(i,"defaultedYearMonthDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedYearMonthDurationRepresentation}}),Object.defineProperty(i,"extractRawTimeZone",{enumerable:!0,get:function(){return c.extractRawTimeZone}}),Object.defineProperty(i,"negateDuration",{enumerable:!0,get:function(){return c.negateDuration}}),Object.defineProperty(i,"toDateTimeRepresentation",{enumerable:!0,get:function(){return c.toDateTimeRepresentation}}),Object.defineProperty(i,"toUTCDate",{enumerable:!0,get:function(){return c.toUTCDate}}),Object.defineProperty(i,"yearMonthDurationsToMonths",{enumerable:!0,get:function(){return c.yearMonthDurationsToMonths}});var s=Ks();Object.defineProperty(i,"DateTimeLiteral",{enumerable:!0,get:function(){return s.DateTimeLiteral}}),Object.defineProperty(i,"DayTimeDurationLiteral",{enumerable:!0,get:function(){return s.DayTimeDurationLiteral}}),Object.defineProperty(i,"DateLiteral",{enumerable:!0,get:function(){return s.DateLiteral}}),Object.defineProperty(i,"DurationLiteral",{enumerable:!0,get:function(){return s.DurationLiteral}}),Object.defineProperty(i,"TimeLiteral",{enumerable:!0,get:function(){return s.TimeLiteral}}),Object.defineProperty(i,"LangStringLiteral",{enumerable:!0,get:function(){return s.LangStringLiteral}}),Object.defineProperty(i,"Term",{enumerable:!0,get:function(){return s.Term}}),Object.defineProperty(i,"YearMonthDurationLiteral",{enumerable:!0,get:function(){return s.YearMonthDurationLiteral}}),Object.defineProperty(i,"Quad",{enumerable:!0,get:function(){return s.Quad}}),Object.defineProperty(i,"Operator",{enumerable:!0,get:function(){return s.Operator}}),Object.defineProperty(i,"NamedNode",{enumerable:!0,get:function(){return s.NamedNode}}),Object.defineProperty(i,"Variable",{enumerable:!0,get:function(){return s.Variable}}),Object.defineProperty(i,"NumericLiteral",{enumerable:!0,get:function(){return s.NumericLiteral}}),Object.defineProperty(i,"BooleanLiteral",{enumerable:!0,get:function(){return s.BooleanLiteral}}),Object.defineProperty(i,"BlankNode",{enumerable:!0,get:function(){return s.BlankNode}}),Object.defineProperty(i,"DecimalLiteral",{enumerable:!0,get:function(){return s.DecimalLiteral}}),Object.defineProperty(i,"DefaultGraph",{enumerable:!0,get:function(){return s.DefaultGraph}}),Object.defineProperty(i,"DoubleLiteral",{enumerable:!0,get:function(){return s.DoubleLiteral}}),Object.defineProperty(i,"Aggregate",{enumerable:!0,get:function(){return s.Aggregate}}),Object.defineProperty(i,"Existence",{enumerable:!0,get:function(){return s.Existence}}),Object.defineProperty(i,"Literal",{enumerable:!0,get:function(){return s.Literal}}),Object.defineProperty(i,"IntegerLiteral",{enumerable:!0,get:function(){return s.IntegerLiteral}}),Object.defineProperty(i,"FloatLiteral",{enumerable:!0,get:function(){return s.FloatLiteral}}),Object.defineProperty(i,"NonLexicalLiteral",{enumerable:!0,get:function(){return s.NonLexicalLiteral}}),Object.defineProperty(i,"StringLiteral",{enumerable:!0,get:function(){return s.StringLiteral}}),Object.defineProperty(i,"isNonLexicalLiteral",{enumerable:!0,get:function(){return s.isNonLexicalLiteral}});var l=mI();Object.defineProperty(i,"addDurationToDateTime",{enumerable:!0,get:function(){return l.addDurationToDateTime}}),Object.defineProperty(i,"elapsedDuration",{enumerable:!0,get:function(){return l.elapsedDuration}});var d=i0();Object.defineProperty(i,"parseDateTime",{enumerable:!0,get:function(){return d.parseDateTime}}),Object.defineProperty(i,"parseDayTimeDuration",{enumerable:!0,get:function(){return d.parseDayTimeDuration}}),Object.defineProperty(i,"parseDuration",{enumerable:!0,get:function(){return d.parseDuration}}),Object.defineProperty(i,"parseTime",{enumerable:!0,get:function(){return d.parseTime}}),Object.defineProperty(i,"parseYearMonthDuration",{enumerable:!0,get:function(){return d.parseYearMonthDuration}}),Object.defineProperty(i,"parseXSDDecimal",{enumerable:!0,get:function(){return d.parseXSDDecimal}}),Object.defineProperty(i,"parseXSDFloat",{enumerable:!0,get:function(){return d.parseXSDFloat}}),Object.defineProperty(i,"parseDate",{enumerable:!0,get:function(){return d.parseDate}});var f=pm();Object.defineProperty(i,"trimToYearMonthDuration",{enumerable:!0,get:function(){return f.trimToYearMonthDuration}}),Object.defineProperty(i,"trimToDayTimeDuration",{enumerable:!0,get:function(){return f.trimToDayTimeDuration}})})(t1)),t1}var WO;function bI(){if(WO)return ei;WO=1,Object.defineProperty(ei,"__esModule",{value:!0}),ei.TermFunctionBase=ei.ExpressionFunctionBase=void 0;const i=Fe(),r=W();class o{constructor({arity:e,operator:a,apply:u}){this.arity=e,this.operator=a,this.apply=u}checkArity(e){return Array.isArray(this.arity)?this.arity.includes(e.length):this.arity===Number.POSITIVE_INFINITY?!0:e.length===this.arity}}ei.ExpressionFunctionBase=o;class n extends o{constructor({arity:e,operator:a,overloads:u}){super({arity:e,operator:a,apply:async({args:c,exprEval:s,mapping:l})=>this.applyOnTerms(await Promise.all(c.map(d=>s.evaluatorExpressionEvaluation(d,l))),s)}),this.supportsTermExpressions=!0,this.overloads=u}applyOnTerms(e,a){return(this.overloads.search(e,a.context.getSafe(i.KeysExpressionEvaluator.superTypeProvider),a.context.getSafe(i.KeysInitQuery.functionArgumentsCache))??this.handleInvalidTypes(e))(a)(e)}handleInvalidTypes(e){throw new r.InvalidArgumentTypes(e,this.operator)}}return ei.TermFunctionBase=n,ei}var ZO;function k(){return ZO||(ZO=1,(function(i){var r=Zn&&Zn.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Zn&&Zn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(WN(),i),o(Ox(),i),o(Sx(),i),o(bI(),i)})(Zn)),Zn}var si={},ll={},kO;function vI(){if(kO)return ll;kO=1,Object.defineProperty(ll,"__esModule",{value:!0}),ll.ActorQueryOperation=void 0;const i=pe();let r=class extends i.Actor{constructor(n){super(n)}};return ll.ActorQueryOperation=r,ll}var dl={},ci={},fl={},e3;function t7(){if(e3)return fl;e3=1,Object.defineProperty(fl,"__esModule",{value:!0}),fl.MetadataValidationState=void 0;let i=class{constructor(){this.invalidateListeners=[],this.valid=!0}addInvalidateListener(o){this.invalidateListeners.push(o)}invalidate(){if(this.valid){this.valid=!1;for(const o of this.invalidateListeners)o()}}};return fl.MetadataValidationState=i,fl}var br={},t3;function r7(){if(t3)return br;t3=1,Object.defineProperty(br,"__esModule",{value:!0}),br.cachifyMetadata=br.validateMetadataBindings=br.validateMetadataQuads=br.getMetadataBindings=br.getMetadataQuads=void 0;function i(e){return t(()=>new Promise((a,u)=>{e.getProperty("metadata",c=>a(c)),e.on("error",u)}).then(a=>o(a)))}br.getMetadataQuads=i;function r(e){return t(()=>new Promise((a,u)=>{e.getProperty("metadata",c=>a(c)),e.on("error",u)}).then(a=>n(a)))}br.getMetadataBindings=r;function o(e){for(const a of["cardinality"])if(!(a in e))throw new Error(`Invalid metadata: missing ${a} in ${JSON.stringify(e)}`);return e}br.validateMetadataQuads=o;function n(e){for(const a of["cardinality","variables"])if(!(a in e))throw new Error(`Invalid metadata: missing ${a} in ${JSON.stringify(e)}`);return e}br.validateMetadataBindings=n;function t(e){let a;return()=>(a||(a=e(),a.then(u=>u.state.addInvalidateListener(()=>{a=void 0})).catch(()=>{})),a)}return br.cachifyMetadata=t,br}var r3;function yr(){return r3||(r3=1,(function(i){var r=ci&&ci.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ci&&ci.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(t7(),i),o(r7(),i)})(ci)),ci}var n3;function TI(){if(n3)return dl;n3=1,Object.defineProperty(dl,"__esModule",{value:!0}),dl.ActorQueryOperationTyped=void 0;const i=Fe(),r=pe(),o=yr(),n=vI();let t=class extends n.ActorQueryOperation{constructor(a,u){if(super({...a,operationName:u}),!this.operationName)throw new Error('A valid "operationName" argument must be provided.')}async test(a){if(!a.operation)return(0,r.failTest)("Missing field 'operation' in a query operation action.");if(a.operation.type!==this.operationName)return(0,r.failTest)(`Actor ${this.name} only supports ${this.operationName} operations, but got ${a.operation.type}`);const u=a.operation;return this.testOperation(u,a.context)}async run(a,u){const c=a.context.get(i.KeysInitQuery.physicalQueryPlanLogger);c&&(c.logOperation(a.operation.type,void 0,a.operation,a.context.get(i.KeysInitQuery.physicalQueryPlanNode),this.name,{}),a.context=a.context.set(i.KeysInitQuery.physicalQueryPlanNode,a.operation));const s=a.operation,l=a.context.set(i.KeysQueryOperation.operation,s),d=await this.runOperation(s,l,u);return"metadata"in d&&(d.metadata=(0,o.cachifyMetadata)(d.metadata)),d}};return dl.ActorQueryOperationTyped=t,dl}var pl={},i3;function n7(){if(i3)return pl;i3=1,Object.defineProperty(pl,"__esModule",{value:!0}),pl.ActorQueryOperationTypedMediated=void 0;const i=TI();let r=class extends i.ActorQueryOperationTyped{constructor(n,t){super(n,t)}};return pl.ActorQueryOperationTypedMediated=r,pl}var hl={},a3;function i7(){if(a3)return hl;a3=1,Object.defineProperty(hl,"__esModule",{value:!0}),hl.BusQueryOperation=void 0;const i=pe();let r=class extends i.BusIndexed{constructor(n){super({...n,actorIdentifierFields:["operationName"],actionIdentifierFields:["operation","type"]})}};return hl.BusQueryOperation=r,hl}var o3;function dt(){return o3||(o3=1,(function(i){var r=si&&si.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=si&&si.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(vI(),i),o(TI(),i),o(n7(),i),o(i7(),i)})(si)),si}var li={},yl={},di={},_l={},u3;function a7(){if(u3)return _l;u3=1,Object.defineProperty(_l,"__esModule",{value:!0}),_l.ActorContextPreprocess=void 0;const i=pe();let r=class extends i.Actor{constructor(n){super(n)}};return _l.ActorContextPreprocess=r,_l}var s3;function wm(){return s3||(s3=1,(function(i){var r=di&&di.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=di&&di.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(a7(),i)})(di)),di}var c3;function o7(){if(c3)return yl;c3=1,Object.defineProperty(yl,"__esModule",{value:!0}),yl.ActorContextPreprocessConvertShortcuts=void 0;const i=wm(),r=pe();let o=class OI extends i.ActorContextPreprocess{constructor(t){super(t)}async test(t){return(0,r.passTestVoid)()}async run(t){return{context:OI.expandShortcuts(t.context,this.contextKeyShortcuts)}}static expandShortcuts(t,e){for(const a of t.keys())e[a.name]&&(t=t.set(new r.ActionContextKey(e[a.name]),t.get(a)).delete(a));return t}};return yl.ActorContextPreprocessConvertShortcuts=o,yl}var l3;function u7(){return l3||(l3=1,(function(i){var r=li&&li.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=li&&li.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(o7(),i)})(li)),li}var fi={},ml={},pi={},gl={},d3;function SI(){if(d3)return gl;d3=1,Object.defineProperty(gl,"__esModule",{value:!0}),gl.BlankNode=void 0;class i{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return gl.BlankNode=i,gl}var bl={},vl={},f3;function FI(){if(f3)return vl;f3=1,Object.defineProperty(vl,"__esModule",{value:!0}),vl.DefaultGraph=void 0;class i{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return vl.DefaultGraph=i,i.INSTANCE=new i,vl}var Tl={},Ol={},p3;function tv(){if(p3)return Ol;p3=1,Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.NamedNode=void 0;class i{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return Ol.NamedNode=i,Ol}var h3;function AI(){if(h3)return Tl;h3=1,Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.Literal=void 0;const i=tv();class r{constructor(n,t){this.termType="Literal",this.value=n,typeof t=="string"?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return Tl.Literal=r,r.RDF_LANGUAGE_STRING=new i.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new i.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Tl}var Sl={},y3;function wI(){if(y3)return Sl;y3=1,Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.Quad=void 0;class i{constructor(o,n,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=n,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return Sl.Quad=i,Sl}var Fl={},_3;function EI(){if(_3)return Fl;_3=1,Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.Variable=void 0;class i{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return Fl.Variable=i,Fl}var m3;function s7(){if(m3)return bl;m3=1,Object.defineProperty(bl,"__esModule",{value:!0}),bl.DataFactory=void 0;const i=SI(),r=FI(),o=AI(),n=tv(),t=wI(),e=EI();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new i.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return r.DefaultGraph.INSTANCE}quad(s,l,d,f){return new t.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return bl.DataFactory=u,bl}var g3;function c7(){return g3||(g3=1,(function(i){var r=pi&&pi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=pi&&pi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(SI(),i),o(s7(),i),o(FI(),i),o(AI(),i),o(tv(),i),o(wI(),i),o(EI(),i)})(pi)),pi}var b3;function l7(){if(b3)return ml;b3=1,Object.defineProperty(ml,"__esModule",{value:!0}),ml.ActorContextPreprocessSetDefaults=void 0;const i=wm(),r=Fe(),o=pe(),n=c7();let t=class extends i.ActorContextPreprocess{constructor(a){super(a),this.defaultFunctionArgumentsCache={}}async test(a){return(0,o.passTestVoid)()}async run(a){let u=a.context;if(a.initialize){u=u.setDefault(r.KeysInitQuery.queryTimestamp,new Date).setDefault(r.KeysInitQuery.queryTimestampHighResolution,performance.now()).setDefault(r.KeysQuerySourceIdentify.sourceIds,new Map).setDefault(r.KeysCore.log,this.logger).setDefault(r.KeysInitQuery.functionArgumentsCache,this.defaultFunctionArgumentsCache).setDefault(r.KeysQuerySourceIdentify.hypermediaSourcesAggregatedStores,new Map).setDefault(r.KeysInitQuery.dataFactory,new n.DataFactory);let c={language:"sparql",version:"1.1"};u.has(r.KeysInitQuery.queryFormat)?(c=u.get(r.KeysInitQuery.queryFormat),c.language==="graphql"&&(u=u.setDefault(r.KeysInitQuery.graphqlSingularizeVariables,{}))):u=u.set(r.KeysInitQuery.queryFormat,c),!u.has(r.KeysInitQuery.extensionFunctionsAlwaysPushdown)&&!u.has(r.KeysInitQuery.extensionFunctions)&&(u=u.set(r.KeysInitQuery.extensionFunctionsAlwaysPushdown,!0))}return{context:u}}};return ml.ActorContextPreprocessSetDefaults=t,ml}var v3;function d7(){return v3||(v3=1,(function(i){var r=fi&&fi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=fi&&fi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(l7(),i)})(fi)),fi}var hi={},Al={},T3;function f7(){if(T3)return Al;T3=1,Object.defineProperty(Al,"__esModule",{value:!0}),Al.ActorContextPreprocessSourceToDestination=void 0;const i=wm(),r=Fe(),o=pe();let n=class extends i.ActorContextPreprocess{constructor(e){super(e)}async test(e){return(0,o.passTestVoid)()}async run(e){if(e.context.get(r.KeysInitQuery.querySourcesUnidentified)&&!e.context.get(r.KeysRdfUpdateQuads.destination)){const a=e.context.get(r.KeysInitQuery.querySourcesUnidentified);if(a.length===1)return{context:e.context.set(r.KeysRdfUpdateQuads.destination,a[0])}}return e}};return Al.ActorContextPreprocessSourceToDestination=n,Al}var O3;function p7(){return O3||(O3=1,(function(i){var r=hi&&hi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=hi&&hi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(f7(),i)})(hi)),hi}var yi={},wl={},El={},p1={},jl={},S3;function h7(){if(S3)return jl;S3=1,Object.defineProperty(jl,"__esModule",{value:!0}),jl.LinkedList=void 0;class i{constructor(){this._length=0,this._head=null,this._tail=null}get length(){return this._length}get first(){var o;return(o=this._head)===null||o===void 0?void 0:o.value}get last(){var o;return(o=this._tail)===null||o===void 0?void 0:o.value}get empty(){return this._head===null}push(o){const n={value:o,next:null};this._tail===null?this._head=this._tail=n:this._tail.next=this._tail=n,this._length++}shift(){if(this._head===null)return;const{value:o,next:n}=this._head;return this._head=n,n===null&&(this._tail=null),this._length--,o}clear(){this._length=0,this._head=this._tail=null}}return jl.LinkedList=i,jl}var Rl={};let h1=1;const rv=new Map;let y1=!1,nv,jI=(i,...r)=>(rv.set(h1,[i,r]),nv(h1),h1++),iv=i=>{rv.delete(i)};function av(i){if(y1)setTimeout(av,0,i);else{const r=rv.get(i);if(r){y1=!0;try{r[0](...r[1])}finally{iv(i),y1=!1}}}}function y7(){const i=new MessageChannel;i.port1.onmessage=r=>{av(r.data)},nv=r=>{i.port2.postMessage(r)}}function _7(){const i=`setImmediate$${Math.random()}$`;window.addEventListener("message",r=>{typeof r.data=="string"&&r.data.startsWith(i)&&av(+r.data.slice(i.length))}),nv=r=>{window.postMessage(i+r,"*")}}const ng=typeof self>"u"?typeof global>"u"?void 0:global:self;ng.setImmediate?(jI=ng.setImmediate,iv=ng.clearImmediate):ng.importScripts?y7():_7();const m7=Object.freeze(Object.defineProperty({__proto__:null,get clearImmediate(){return iv},get setImmediate(){return jI}},Symbol.toStringTag,{value:"Module"})),g7=zM(m7);var F3;function b7(){if(F3)return Rl;F3=1,Object.defineProperty(Rl,"__esModule",{value:!0}),Rl.createTaskScheduler=void 0;const i=g7,r=Promise.resolve(void 0);function o(n=i.setImmediate){const t=typeof queueMicrotask=="function"?queueMicrotask:u=>r.then(u);let e=0,a=null;return u=>{a!==null?a.push(u):++e<100?t(u):(a=[u],n(()=>{for(const c of a)t(c);a=null,e=0}))}}return Rl.createTaskScheduler=o,Rl}var A3;function it(){return A3||(A3=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.isIterator=i.isIterable=i.isSourceExpression=i.isPromise=i.isEventEmitter=i.isFunction=i.range=i.union=i.fromIterable=i.fromIterator=i.fromArray=i.single=i.empty=i.wrap=i.WrappingIterator=i.ClonedIterator=i.UnionIterator=i.MultiTransformIterator=i.SimpleTransformIterator=i.TransformIterator=i.BufferedIterator=i.MappingIterator=i.DESTINATION=i.identity=i.IntegerIterator=i.ArrayIterator=i.SingletonIterator=i.EmptyIterator=i.AsyncIterator=i.DESTROYED=i.ENDED=i.CLOSED=i.CLOSING=i.OPEN=i.INIT=i.setTaskScheduler=i.getTaskScheduler=i.scheduleTask=i.LinkedList=void 0;const r=tq(),o=h7();Object.defineProperty(i,"LinkedList",{enumerable:!0,get:function(){return o.LinkedList}});let t=b7().createTaskScheduler();function e(A){t(A)}i.scheduleTask=e;function a(){return t}i.getTaskScheduler=a;function u(A){t=A}i.setTaskScheduler=u,i.INIT=1,i.OPEN=2,i.CLOSING=4,i.CLOSED=8,i.ENDED=16,i.DESTROYED=32;class c extends r.EventEmitter{constructor(g=i.OPEN){super(),this._readable=!1,this._state=g,this.on("newListener",s)}_changeState(g,w=!1){const D=g>this._state&&this._state<i.ENDED;return D&&(this._state=g,g===i.ENDED&&(w?t(()=>this.emit("end")):this.emit("end"))),D}read(){return null}forEach(g,w){this.on("data",Re(g,w))}close(){this._changeState(i.CLOSED)&&this._endAsync()}destroy(g){this.done||this._destroy(g,w=>{g=g||w,g&&this.emit("error",g),this._end(!0)})}_destroy(g,w){w()}_end(g=!1){this._changeState(g?i.DESTROYED:i.ENDED)&&(this._readable=!1,this.removeAllListeners("readable"),this.removeAllListeners("data"),this.removeAllListeners("end"))}_endAsync(){t(()=>this._end())}get readable(){return this._readable}set readable(g){g=!!g&&!this.done,this._readable!==g&&(this._readable=g,g&&t(()=>this.emit("readable")))}get closed(){return this._state>=i.CLOSING}get ended(){return this._state===i.ENDED}get destroyed(){return this._state===i.DESTROYED}get done(){return this._state>=i.ENDED}toString(){const g=this._toStringDetails();return`[${this.constructor.name}${g?` ${g}`:""}]`}_toStringDetails(){return""}toArray(g){const w=[],D=typeof g?.limit=="number"?g.limit:1/0;return this.ended||D<=0?Promise.resolve(w):new Promise((B,q)=>{const Q=()=>B(w),$=X=>{w.push(X),w.length>=D&&(this.removeListener("error",q),this.removeListener("data",$),this.removeListener("end",Q),B(w))};this.on("error",q),this.on("data",$),this.on("end",Q)})}getProperty(g,w){const D=this._properties;if(!w)return D&&D[g];if(D&&g in D)t(()=>w(D[g]));else{let B;(B=this._propertyCallbacks)||(this._propertyCallbacks=B=Object.create(null)),g in B?B[g].push(w):B[g]=[w]}}setProperty(g,w){const D=this._properties||(this._properties=Object.create(null));D[g]=w;const B=this._propertyCallbacks||{},q=B[g];if(q){delete B[g],t(()=>{for(const Q of q)Q(w)});for(g in B)return;delete this._propertyCallbacks}}getProperties(){const g=this._properties,w={};for(const D in g)w[D]=g[D];return w}setProperties(g){for(const w in g)this.setProperty(w,g[w])}copyProperties(g,w){for(const D of w)g.getProperty(D,B=>this.setProperty(D,B))}transform(g){return new O(this,g)}map(g,w){return new v(this,Re(g,w))}filter(g,w){return this.map(function(D){return g.call(w||this,D)?D:null})}uniq(g=b){const w=new Set;return this.filter(function(D){const B=g.call(this,D);return w.has(B)?!1:(w.add(B),!0)})}prepend(g){return this.transform({prepend:g})}append(g){return this.transform({append:g})}surround(g,w){return this.transform({prepend:g,append:w})}skip(g){return this.map(w=>g-- >0?null:w)}take(g){return this.transform({limit:g})}range(g,w){return this.transform({offset:g,limit:Math.max(w-g+1,0)})}clone(){return new C(this)}[Symbol.asyncIterator](){const g=this;let w=null,D=null,B=null;g.addListener("readable",q),g.addListener("end",q),g.addListener("error",Q);function q(){if(w!==null)if(B!==null)Q(B);else if(g.done)w({done:!0,value:void 0}),w=D=null,$();else{const X=g.read();X!==null&&(w({done:!1,value:X}),w=D=null)}}function Q(X){D!==null?(D(X),w=D=B=null,$()):B===null&&(B=X)}function $(){g.removeListener("readable",q),g.removeListener("end",q),g.removeListener("error",Q)}return{next(){return new Promise((X,te)=>{w=X,D=te,q()})}}}}i.AsyncIterator=c;function s(A){A==="data"&&(this.removeListener("newListener",s),d(this,"readable",l),this.readable&&t(()=>l.call(this)))}function l(){let A;for(;this.listenerCount("data")!==0&&(A=this.read())!==null;)this.emit("data",A);this.listenerCount("data")===0&&!this.done&&(this.removeListener("readable",l),d(this,"newListener",s))}function d(A,g,w){A.listeners(g).includes(w)||A.on(g,w)}class f extends c{constructor(){super(),this._changeState(i.ENDED,!0)}}i.EmptyIterator=f;class h extends c{constructor(g){super(),this._item=g,g===null?this.close():this.readable=!0}read(){const g=this._item;return this._item=null,this.close(),g}_toStringDetails(){return this._item===null?"":`(${this._item})`}}i.SingletonIterator=h;class p extends c{constructor(g=[],{autoStart:w=!0,preserve:D=!0}={}){super();const B=D||!Array.isArray(g)?[...g]:g;this._index=0,this._sourceStarted=w!==!1,this._truncateThreshold=D?-1:64,this._sourceStarted&&B.length===0?this.close():this._buffer=B,this.readable=!0}read(){this._sourceStarted||(this._sourceStarted=!0);let g=null;return this._buffer&&(this._index<this._buffer.length&&(g=this._buffer[this._index++]),this._index===this._buffer.length?(delete this._buffer,this.close()):this._index===this._truncateThreshold&&(this._buffer.splice(0,this._truncateThreshold),this._index=0)),g}_toStringDetails(){return`(${this._buffer?this._buffer.length-this._index:0})`}_destroy(g,w){delete this._buffer,w()}toArray(g={}){if(!this._buffer)return Promise.resolve([]);const{length:w}=this._buffer,D=this._index,B=typeof g.limit!="number"?w:D+g.limit,q=this._buffer.slice(D,B);return this._index=B,B>=w&&this.close(),Promise.resolve(q)}}i.ArrayIterator=p;class y extends c{constructor({start:g=0,step:w=1,end:D}={}){super(),Number.isFinite(g)&&(g=Math.trunc(g)),this._next=g,Number.isFinite(w)&&(w=Math.trunc(w)),this._step=w;const B=w>=0,q=B?1/0:-1/0;Number.isFinite(D)?D=Math.trunc(D):D!==-q&&(D=q),this._last=D,!Number.isFinite(g)||(B?g>D:g<D)?this.close():this.readable=!0}read(){if(this.closed)return null;const g=this._next,w=this._step,D=this._last,B=this._next+=w;return(w>=0?B>D:B<D)&&this.close(),g}_toStringDetails(){return`(${this._next}...${this._last})`}}i.IntegerIterator=y;function b(A){return A}i.identity=b,i.DESTINATION=Symbol("destination");class v extends c{constructor(g,w=b,D={}){super(),this._map=w,this._source=F(g),this._destroySource=D.destroySource!==!1,g.done?this.close():(this._source[i.DESTINATION]=this,this._source.on("end",U),this._source.on("error",E),this._source.on("readable",j),this.readable=this._source.readable)}read(){if(!this.done){if(this._source.readable){let g,w;for(;(g=this._source.read())!==null;)if((w=this._map(g))!==null)return w}this.readable=!1,this._source.done&&this.close()}return null}_end(g){this._source.removeListener("end",U),this._source.removeListener("error",E),this._source.removeListener("readable",j),delete this._source[i.DESTINATION],this._destroySource&&this._source.destroy(),super._end(g)}}i.MappingIterator=v;function F(A,g=!1){if(!A||!Se(A.read)||!Se(A.on))throw new TypeError(`Invalid source: ${A}`);if(!g&&A[i.DESTINATION])throw new Error("The source already has a destination");return A}class T extends c{constructor({maxBufferSize:g=4,autoStart:w=!0}={}){super(i.INIT),this._buffer=new o.LinkedList,this._maxBufferSize=4,this._reading=!0,this._pushedCount=0,this.maxBufferSize=g,t(()=>this._init(w)),this._sourceStarted=w!==!1}get maxBufferSize(){return this._maxBufferSize}set maxBufferSize(g){g!==1/0&&(g=Number.isFinite(g)?Math.max(Math.trunc(g),1):4),this._maxBufferSize!==g&&(this._maxBufferSize=g,this._state===i.OPEN&&this._fillBuffer())}_init(g){let w=!1;this._reading=!0,this._begin(()=>{if(w)throw new Error("done callback called multiple times");w=!0,this._reading=!1,this._changeState(i.OPEN),g?this._fillBufferAsync():this.readable=!0})}_begin(g){g()}read(){if(this.done)return null;this._sourceStarted||(this._sourceStarted=!0);const g=this._buffer;let w;return g.empty?(w=null,this.readable=!1):w=g.shift(),!this._reading&&g.length<this._maxBufferSize&&(this.closed?g.empty&&this._endAsync():this._fillBufferAsync()),w}_read(g,w){w()}_push(g){this.done||(this._pushedCount++,this._buffer.push(g),this.readable=!0)}_fillBuffer(){let g;this._reading||(this.closed?this._completeClose():(g=Math.min(this._maxBufferSize-this._buffer.length,128))>0&&(this._pushedCount=0,this._reading=!0,this._read(g,()=>{if(!g)throw new Error("done callback called multiple times");g=0,this._reading=!1,this.closed?this._completeClose():this._pushedCount&&(this.readable=!0,this._buffer.length<this._maxBufferSize/2&&this._fillBufferAsync())})))}_fillBufferAsync(){this._reading||(this._reading=!0,t(()=>{this._reading=!1,this._fillBuffer()}))}close(){this._reading?this._changeState(i.CLOSING):this._completeClose()}_completeClose(){this._changeState(i.CLOSED)&&(this._reading=!0,this._flush(()=>{if(!this._reading)throw new Error("done callback called multiple times");this._reading=!1,this._buffer.empty&&this._endAsync()}))}_destroy(g,w){this._buffer.clear(),w()}_flush(g){g()}_toStringDetails(){const g=this._buffer;return`{${g.empty?"":`next: ${g.first}, `}buffer: ${g.length}}`}}i.BufferedIterator=T;class S extends T{constructor(g,w=g||{}){super(w),this._boundPush=D=>this._push(D),Ie(g)||(g=w.source),Pe(g)?this.source=g:g&&(this._createSource=we(g)?()=>g:g,this._sourceStarted&&this._loadSourceAsync()),this._optional=!!w.optional,this._destroySource=w.destroySource!==!1}get source(){return Se(this._createSource)&&this._loadSourceAsync(),this._source}set source(g){const w=this._source=this._validateSource(g);w[i.DESTINATION]=this,this.done?this._destroySource&&w.destroy():w.done?this.close():(w.on("end",K),w.on("readable",_),w.on("error",E))}_loadSourceAsync(){Se(this._createSource)&&(Promise.resolve(this._createSource()).then(g=>{delete this._createSource,this.source=g,this._fillBuffer()},g=>this.emit("error",g)),this._createSource=null)}_validateSource(g,w=!1){if(this._source||typeof this._createSource<"u")throw new Error("The source cannot be changed after it has been set");return F(g,w)}_read(g,w){const D=()=>{this._pushedCount<g&&!this.closed?t(()=>this._readAndTransform(D,w)):w()};this._readAndTransform(D,w)}_readAndTransform(g,w){let D;const B=this.source;!B||B.done||(D=B.read())===null?w():this._optional?this._optionalTransform(D,g):this._transform(D,g,this._boundPush)}_optionalTransform(g,w){const D=this._pushedCount;this._transform(g,()=>{D===this._pushedCount&&this._push(g),w()},this._boundPush)}_transform(g,w,D){D(g),w()}_closeWhenDone(){this.close()}_end(g){const w=this._source;w&&(w.removeListener("end",K),w.removeListener("error",E),w.removeListener("readable",_),delete w[i.DESTINATION],this._destroySource&&w.destroy()),super._end(g)}}i.TransformIterator=S;function j(){this[i.DESTINATION].readable=!0}function E(A){this[i.DESTINATION].emit("error",A)}function U(){this[i.DESTINATION].close()}function K(){this[i.DESTINATION]._closeWhenDone()}function _(){this[i.DESTINATION]._sourceStarted!==!1&&this[i.DESTINATION]._fillBuffer()}class O extends S{constructor(g,w){if(super(g,w),this._offset=0,this._limit=1/0,this._filter=D=>!0,w=w||(Ie(g)?null:g),w){const D=Se(w)?w:w.transform,{limit:B,offset:q,filter:Q,map:$,prepend:X,append:te}=w;q===1/0||B===-1/0?this._limit=0:(Number.isFinite(q)&&(this._offset=Math.max(Math.trunc(q),0)),Number.isFinite(B)&&(this._limit=Math.max(Math.trunc(B),0)),Se(Q)&&(this._filter=Q),Se($)&&(this._map=$),this._transform=Se(D)?D:null),X&&(this._prepender=Pe(X)?X:ee(X)),te&&(this._appender=Pe(te)?te:ee(te))}}_read(g,w){const D=()=>this._readAndTransformSimple(g,B,w);this._readAndTransformSimple(g,B,w);function B(){t(D)}}_readAndTransformSimple(g,w,D){let B;const{source:q}=this;if(!q||q.done){D();return}for(this._limit===0&&this.close();!this.closed&&this._pushedCount<g&&(B=q.read())!==null;){if(!this._filter(B)||this._offset!==0&&this._offset--)continue;const Q=typeof this._map>"u"?B:this._map(B);if(Q===null)this._optional&&this._push(B);else if(!Se(this._transform))this._push(Q);else{this._optional?this._optionalTransform(Q,w):this._transform(Q,w,this._boundPush);return}--this._limit===0&&this.close()}D()}_begin(g){this._insert(this._prepender,g),delete this._prepender}_flush(g){this._insert(this._appender,g),delete this._appender}_insert(g,w){const D=q=>this._push(q);!g||g.done?w():(g.on("data",D),g.on("end",B));function B(){g.removeListener("data",D),g.removeListener("end",B),w()}}}i.SimpleTransformIterator=O;class P extends S{constructor(g,w){if(super(g,w),this._transformerQueue=[],w){const D=Se(w)?w:w.multiTransform;D&&(this._createTransformer=D)}}_read(g,w){const D=this._transformerQueue,B=this._optional;let q,Q;for(;(q=D[0])&&q.transformer.done;){B&&q.item!==null&&(g--,this._push(q.item)),D.shift();const{transformer:X}=q;X.removeListener("end",_),X.removeListener("readable",_),X.removeListener("error",E)}const{source:$}=this;for(;$&&!$.done&&D.length<this.maxBufferSize&&(Q=$.read(),Q!==null);){const X=this._createTransformer(Q)||new f;X[i.DESTINATION]=this,X.on("end",_),X.on("readable",_),X.on("error",E),D.push({transformer:X,item:Q})}if(q=D[0],q){const{transformer:X}=q;for(;g-- >0&&(Q=X.read())!==null;)this._push(Q),B&&(q.item=null)}else $&&$.done&&this.close();w()}_createTransformer(g){return new h(g)}_closeWhenDone(){this._transformerQueue.length||this.close()}_end(g){if(super._end(g),this._destroySource)for(const w of this._transformerQueue)w.transformer.destroy()}}i.MultiTransformIterator=P;class R extends T{constructor(g,w={}){super(w),this._sources=[],this._currentSource=-1;const D=w.autoStart!==!1;if(Pe(g))g.on("error",B=>this.emit("error",B)),this._pending={loading:!1,sources:g},D&&this._loadSources();else if(Array.isArray(g)&&g.length>0)for(const B of g)this._addSource(B);else D&&this.close();this._destroySources=w.destroySources!==!1}_loadSources(){const g=this._pending.sources;this._pending.loading=!0,g.done?(delete this._pending,this.close()):(g.on("data",w=>{this._addSource(w),this._fillBufferAsync()}),g.on("end",()=>{delete this._pending,this._fillBuffer()}))}_addSource(g){we(g)&&(g=Z(g)),g.done||(this._sources.push(g),g[i.DESTINATION]=this,g.on("error",E),g.on("readable",_),g.on("end",I))}_removeEmptySources(){this._sources=this._sources.filter((g,w)=>(g.done&&w<=this._currentSource&&this._currentSource--,!g.done)),this._fillBuffer()}_read(g,w){var D;((D=this._pending)===null||D===void 0?void 0:D.loading)===!1&&this._loadSources();let B=0,q;for(;B!==(B=g);)for(let Q=0;Q<this._sources.length&&g>0;Q++)this._currentSource=(this._currentSource+1)%this._sources.length,(q=this._sources[this._currentSource].read())!==null&&(g--,this._push(q));!this._pending&&this._sources.length===0&&this.close(),w()}_end(g=!1){if(super._end(g),this._destroySources){for(const w of this._sources)w.destroy();this._pending&&(this._pending.sources.destroy(),delete this._pending)}}}i.UnionIterator=R;function I(){this[i.DESTINATION]._removeEmptySources()}class C extends S{constructor(g){super(g,{autoStart:!1}),this._readPosition=0,this._reading=!1,g&&(this.readable=!0)}_init(){}close(){c.prototype.close.call(this)}get source(){return super.source}set source(g){const w=this._source=this._validateSource(g),D=w&&w[i.DESTINATION]||(w[i.DESTINATION]=new Y(w));this.done?this._destroySource&&w.destroy():D.endsAt(0)?this.close():(D.register(this),(w._sourceStarted===!1||D.readAt(0)!==null)&&(this.readable=!0));const B=this._propertyCallbacks;for(const q in B){const Q=B[q];for(const $ of Q)this._getSourceProperty(q,$)}}_validateSource(g,w=!1){const D=g&&g[i.DESTINATION];return super._validateSource(g,!D||D instanceof Y)}getProperty(g,w){const{source:D}=this,B=this._properties,q=B&&g in B;if(!w)return q?B&&B[g]:D&&D.getProperty(g);super.getProperty(g,w),D&&!q&&this._getSourceProperty(g,w)}_getSourceProperty(g,w){this.source.getProperty(g,D=>{(!this._properties||!(g in this._properties))&&w(D)})}getProperties(){const g=this.source?this.source.getProperties():{},w=this._properties;for(const D in w)g[D]=w[D];return g}_toStringDetails(){return`{source: ${this.source?this.source.toString():"none"}}`}read(){this._sourceStarted||(this._sourceStarted=!0);const g=this.source;let w=null;if(!this.done&&g){const D=g[i.DESTINATION];(w=D.readAt(this._readPosition))!==null?this._readPosition++:this.readable=!1,D.endsAt(this._readPosition)&&this.close()}return w}_end(g){const w=this.source,D=w?.[i.DESTINATION];D&&D.unregister(this),T.prototype._end.call(this,g)}}i.ClonedIterator=C;class Y{constructor(g){if(this._history=[],this._trackers=new Set,this._source=g,!g.done){const w=()=>{for(const q of this._trackers)q.readable=!0},D=q=>{for(const Q of this._trackers)Q.emit("error",q)},B=()=>{for(const q of this._trackers)q._sourceStarted!==!1&&q._readPosition===this._history.length&&q.close();this._trackers.clear(),g.removeListener("end",B),g.removeListener("error",D),g.removeListener("readable",w)};g.on("end",B),g.on("error",D),g.on("readable",w)}}register(g){this._source.done||this._trackers.add(g)}unregister(g){this._trackers.delete(g)}readAt(g){let w=null;return g<this._history.length?w=this._history[g]:!this._source.done&&(w=this._source.read())!==null&&(this._history[g]=w),w}endsAt(g){return this._source.done&&this._history.length===g}}class H extends c{constructor(g,w){super(),this._source=null,this._destroySource=w?.destroySource!==!1,we(g)?(this._source=new c,g.then(D=>{this._source=null,this.source=D}).catch(D=>this.emit("error",D))):g&&(this.source=g)}set source(g){let w=g;if(this._source!==null)throw new Error("The source cannot be changed after it has been set");if(N(w)&&(w=w[Symbol.iterator]()),m(w)){let D=w;w=new r.EventEmitter,w.read=()=>{if(D!==null){let B;for(;!(B=D.next()).done;)if(B.value!==null)return B.value;D=null,this.close()}return null}}else w=F(w);if(this.done){this._destroySource&&Se(w.destroy)&&w.destroy();return}w[i.DESTINATION]=this,w.on("end",U),w.on("error",E),w.on("readable",j),this._source=w,this.readable=w.readable!==!1}read(){if(this._source!==null&&this._source.readable!==!1){const g=this._source.read();if(g!==null)return g;this.readable=!1}return null}_end(g=!1){this._source!==null&&(this._source.removeListener("end",U),this._source.removeListener("error",E),this._source.removeListener("readable",j),delete this._source[i.DESTINATION],this._destroySource&&Se(this._source.destroy)&&this._source.destroy(),this._source=null),super._end(g)}}i.WrappingIterator=H;function Z(A,g){if(g&&("autoStart"in g||"optional"in g||"source"in g||"maxBufferSize"in g))return A&&!Pe(A)&&(A=new H(A)),new S(A,g);if(!A)return le();if(we(A))return new H(A,g);if(A instanceof c)return A;if(Array.isArray(A))return ee(A);if(N(A)||m(A)||Pe(A))return new H(A,g);throw new TypeError(`Invalid source: ${A}`)}i.wrap=Z;function le(){return new f}i.empty=le;function ce(A){return new h(A)}i.single=ce;function ee(A){return new p(A)}i.fromArray=ee;function Ae(A){return new H(A)}i.fromIterator=Ae;function Ee(A){return new H(A)}i.fromIterable=Ee;function ue(A){return new R(A)}i.union=ue;function oe(A,g,w){return new y({start:A,end:g,step:w})}i.range=oe;function Re(A,g){return g?A.bind(g):A}function Se(A){return typeof A=="function"}i.isFunction=Se;function Pe(A){return Se(A?.on)}i.isEventEmitter=Pe;function we(A){return Se(A?.then)}i.isPromise=we;function Ie(A){return A&&(Pe(A)||we(A)||Se(A))}i.isSourceExpression=Ie;function N(A){return A&&Symbol.iterator in A}i.isIterable=N;function m(A){return Se(A?.next)}i.isIterator=m})(p1)),p1}var _1={},_i={},Dl={},w3;function v7(){if(w3)return Dl;w3=1,Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.BlankNodeScoped=void 0;let i=class{constructor(o,n){this.termType="BlankNode",this.value=o,this.skolemized=n}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}};return Dl.BlankNodeScoped=i,Dl}var Pl={},E3;function T7(){if(E3)return Pl;E3=1,Object.defineProperty(Pl,"__esModule",{value:!0}),Pl.BlankNodeBindingsScoped=void 0;let i=class{constructor(o){this.termType="BlankNode",this.singleBindingsScope=!0,this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}};return Pl.BlankNodeBindingsScoped=i,Pl}var j3;function ov(){return j3||(j3=1,(function(i){var r=_i&&_i.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=_i&&_i.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(v7(),i),o(T7(),i)})(_i)),_i}var mi={},Be={},gi={},Ml={},R3;function RI(){if(R3)return Ml;R3=1,Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.BlankNode=void 0;class i{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return Ml.BlankNode=i,Ml}var Nl={},Il={},D3;function DI(){if(D3)return Il;D3=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.DefaultGraph=void 0;class i{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return Il.DefaultGraph=i,i.INSTANCE=new i,Il}var ql={},Ll={},P3;function uv(){if(P3)return Ll;P3=1,Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.NamedNode=void 0;class i{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return Ll.NamedNode=i,Ll}var M3;function PI(){if(M3)return ql;M3=1,Object.defineProperty(ql,"__esModule",{value:!0}),ql.Literal=void 0;const i=uv();class r{constructor(n,t){this.termType="Literal",this.value=n,typeof t=="string"?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return ql.Literal=r,r.RDF_LANGUAGE_STRING=new i.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new i.NamedNode("http://www.w3.org/2001/XMLSchema#string"),ql}var xl={},N3;function MI(){if(N3)return xl;N3=1,Object.defineProperty(xl,"__esModule",{value:!0}),xl.Quad=void 0;class i{constructor(o,n,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=n,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return xl.Quad=i,xl}var Bl={},I3;function NI(){if(I3)return Bl;I3=1,Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.Variable=void 0;class i{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return Bl.Variable=i,Bl}var q3;function O7(){if(q3)return Nl;q3=1,Object.defineProperty(Nl,"__esModule",{value:!0}),Nl.DataFactory=void 0;const i=RI(),r=DI(),o=PI(),n=uv(),t=MI(),e=NI();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new i.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return r.DefaultGraph.INSTANCE}quad(s,l,d,f){return new t.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Nl.DataFactory=u,Nl}var L3;function S7(){return L3||(L3=1,(function(i){var r=gi&&gi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=gi&&gi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(RI(),i),o(O7(),i),o(DI(),i),o(PI(),i),o(uv(),i),o(MI(),i),o(NI(),i)})(gi)),gi}var x3;function II(){if(x3)return Be;x3=1,Object.defineProperty(Be,"__esModule",{value:!0}),Be.matchPatternMappings=Be.matchPatternComplete=Be.matchPattern=Be.matchTerm=Be.getValueNestedPath=Be.someTermsNested=Be.someTerms=Be.everyTermsNested=Be.everyTerms=Be.reduceTermsNested=Be.reduceTerms=Be.mapTermsNested=Be.mapTerms=Be.filterQuadTermNamesNested=Be.filterQuadTermNames=Be.filterTermsNested=Be.filterTerms=Be.forEachTermsNested=Be.forEachTerms=Be.collectNamedTerms=Be.getNamedTerms=Be.getTermsNested=Be.getTerms=Be.TRIPLE_TERM_NAMES=Be.QUAD_TERM_NAMES=void 0;const i=S7(),r=new i.DataFactory;Be.QUAD_TERM_NAMES=["subject","predicate","object","graph"],Be.TRIPLE_TERM_NAMES=["subject","predicate","object"];function o(_,O){return O&&_.graph.termType==="DefaultGraph"?[_.subject,_.predicate,_.object]:[_.subject,_.predicate,_.object,_.graph]}Be.getTerms=o;function n(_,O){const P=[];for(const R of o(_,O))R.termType==="Quad"?n(R,O).forEach(I=>P.push(I)):P.push(R);return P}Be.getTermsNested=n;function t(_){return[{key:"subject",value:_.subject},{key:"predicate",value:_.predicate},{key:"object",value:_.object},{key:"graph",value:_.graph}]}Be.getNamedTerms=t;function e(_,O,P){const R={};return _.forEach(I=>R[I.key]=I.value),O&&(R.subject=R.subject||O("subject"),R.predicate=R.predicate||O("predicate"),R.object=R.object||O("object"),R.graph=R.graph||O("graph")),(P||r).quad(R.subject,R.predicate,R.object,R.graph)}Be.collectNamedTerms=e;function a(_,O){O(_.subject,"subject"),O(_.predicate,"predicate"),O(_.object,"object"),O(_.graph,"graph")}Be.forEachTerms=a;function u(_,O,P=[]){_.subject.termType==="Quad"?u(_.subject,O,[...P,"subject"]):O(_.subject,[...P,"subject"]),_.predicate.termType==="Quad"?u(_.predicate,O,[...P,"predicate"]):O(_.predicate,[...P,"predicate"]),_.object.termType==="Quad"?u(_.object,O,[...P,"object"]):O(_.object,[...P,"object"]),_.graph.termType==="Quad"?u(_.graph,O,[...P,"graph"]):O(_.graph,[...P,"graph"])}Be.forEachTermsNested=u;function c(_,O){const P=[];return O(_.subject,"subject")&&P.push(_.subject),O(_.predicate,"predicate")&&P.push(_.predicate),O(_.object,"object")&&P.push(_.object),O(_.graph,"graph")&&P.push(_.graph),P}Be.filterTerms=c;function s(_,O,P=[]){let R=[];return _.subject.termType==="Quad"?R=[...R,...s(_.subject,O,[...P,"subject"])]:O(_.subject,[...P,"subject"])&&R.push(_.subject),_.predicate.termType==="Quad"?R=[...R,...s(_.predicate,O,[...P,"predicate"])]:O(_.predicate,[...P,"predicate"])&&R.push(_.predicate),_.object.termType==="Quad"?R=[...R,...s(_.object,O,[...P,"object"])]:O(_.object,[...P,"object"])&&R.push(_.object),_.graph.termType==="Quad"?R=[...R,...s(_.graph,O,[...P,"graph"])]:O(_.graph,[...P,"graph"])&&R.push(_.graph),R}Be.filterTermsNested=s;function l(_,O){const P=[];return O(_.subject,"subject")&&P.push("subject"),O(_.predicate,"predicate")&&P.push("predicate"),O(_.object,"object")&&P.push("object"),O(_.graph,"graph")&&P.push("graph"),P}Be.filterQuadTermNames=l;function d(_,O,P=[]){let R=[];const I=[...P,"subject"];_.subject.termType==="Quad"?R=[...R,...d(_.subject,O,I)]:O(_.subject,I)&&R.push(I);const C=[...P,"predicate"];_.predicate.termType==="Quad"?R=[...R,...d(_.predicate,O,C)]:O(_.predicate,C)&&R.push(C);const Y=[...P,"object"];_.object.termType==="Quad"?R=[...R,...d(_.object,O,Y)]:O(_.object,Y)&&R.push(Y);const H=[...P,"graph"];return _.graph.termType==="Quad"?R=[...R,...d(_.graph,O,H)]:O(_.graph,H)&&R.push(H),R}Be.filterQuadTermNamesNested=d;function f(_,O,P){return(P||r).quad(O(_.subject,"subject"),O(_.predicate,"predicate"),O(_.object,"object"),O(_.graph,"graph"))}Be.mapTerms=f;function h(_,O,P,R=[]){return(P||r).quad(_.subject.termType==="Quad"?h(_.subject,O,P,[...R,"subject"]):O(_.subject,[...R,"subject"]),_.predicate.termType==="Quad"?h(_.predicate,O,P,[...R,"predicate"]):O(_.predicate,[...R,"predicate"]),_.object.termType==="Quad"?h(_.object,O,P,[...R,"object"]):O(_.object,[...R,"object"]),_.graph.termType==="Quad"?h(_.graph,O,P,[...R,"graph"]):O(_.graph,[...R,"graph"]))}Be.mapTermsNested=h;function p(_,O,P){let R=P;return R=O(R,_.subject,"subject"),R=O(R,_.predicate,"predicate"),R=O(R,_.object,"object"),O(R,_.graph,"graph")}Be.reduceTerms=p;function y(_,O,P,R=[]){let I=P;return _.subject.termType==="Quad"?I=y(_.subject,O,I,[...R,"subject"]):I=O(I,_.subject,[...R,"subject"]),_.predicate.termType==="Quad"?I=y(_.predicate,O,I,[...R,"predicate"]):I=O(I,_.predicate,[...R,"predicate"]),_.object.termType==="Quad"?I=y(_.object,O,I,[...R,"object"]):I=O(I,_.object,[...R,"object"]),_.graph.termType==="Quad"?I=y(_.graph,O,I,[...R,"graph"]):I=O(I,_.graph,[...R,"graph"]),I}Be.reduceTermsNested=y;function b(_,O){return O(_.subject,"subject")&&O(_.predicate,"predicate")&&O(_.object,"object")&&O(_.graph,"graph")}Be.everyTerms=b;function v(_,O,P=[]){return(_.subject.termType==="Quad"?v(_.subject,O,[...P,"subject"]):O(_.subject,[...P,"subject"]))&&(_.predicate.termType==="Quad"?v(_.predicate,O,[...P,"predicate"]):O(_.predicate,[...P,"predicate"]))&&(_.object.termType==="Quad"?v(_.object,O,[...P,"object"]):O(_.object,[...P,"object"]))&&(_.graph.termType==="Quad"?v(_.graph,O,[...P,"graph"]):O(_.graph,[...P,"graph"]))}Be.everyTermsNested=v;function F(_,O){return O(_.subject,"subject")||O(_.predicate,"predicate")||O(_.object,"object")||O(_.graph,"graph")}Be.someTerms=F;function T(_,O,P=[]){return(_.subject.termType==="Quad"?T(_.subject,O,[...P,"subject"]):O(_.subject,[...P,"subject"]))||(_.predicate.termType==="Quad"?T(_.predicate,O,[...P,"predicate"]):O(_.predicate,[...P,"predicate"]))||(_.object.termType==="Quad"?T(_.object,O,[...P,"object"]):O(_.object,[...P,"object"]))||(_.graph.termType==="Quad"?T(_.graph,O,[...P,"graph"]):O(_.graph,[...P,"graph"]))}Be.someTermsNested=T;function S(_,O){if(O.length===0)return _;if(_.termType==="Quad")return S(_[O[0]],O.slice(1));throw new Error(`Tried to get ${O[0]} from term of type ${_.termType}`)}Be.getValueNestedPath=S;function j(_,O){return!O||O.termType==="Variable"||O.termType==="Quad"&&_.termType==="Quad"&&U(_,O)||O.equals(_)}Be.matchTerm=j;function E(_,O,P,R,I){return j(_.subject,O)&&j(_.predicate,P)&&j(_.object,R)&&j(_.graph,I)}Be.matchPattern=E;function U(_,O){return E(_,O.subject,O.predicate,O.object,O.graph)}Be.matchPatternComplete=U;function K(_,O,P={}){const R={};function I(C,Y){return b(C,(H,Z)=>{var le,ce;const ee=Y[Z];switch(H.termType){case"Variable":return P.skipVarMapping&&ee.termType==="Variable"||((ce=(le=R[H.value])===null||le===void 0?void 0:le.equals(ee))!==null&&ce!==void 0?ce:(R[H.value]=ee,!0));case"Quad":return ee.termType==="Quad"&&I(H,ee);default:return H.equals(ee)}})}return I(O,_)&&(P.returnMappings?R:!0)}return Be.matchPatternMappings=K,Be}var Rt={},B3;function F7(){if(B3)return Rt;B3=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.getQuads=Rt.getDefaultGraphs=Rt.getVariables=Rt.getLiterals=Rt.getBlankNodes=Rt.getNamedNodes=Rt.getTermsOfType=Rt.uniqTerms=Rt.TERM_TYPES=void 0;const i=hr();Rt.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function r(s){const l={};return s.filter(d=>{const f=(0,i.termToString)(d);return!(f in l)&&(l[f]=!0)})}Rt.uniqTerms=r;function o(s,l){return s.filter(d=>d.termType===l)}Rt.getTermsOfType=o;function n(s){return o(s,"NamedNode")}Rt.getNamedNodes=n;function t(s){return o(s,"BlankNode")}Rt.getBlankNodes=t;function e(s){return o(s,"Literal")}Rt.getLiterals=e;function a(s){return o(s,"Variable")}Rt.getVariables=a;function u(s){return o(s,"DefaultGraph")}Rt.getDefaultGraphs=u;function c(s){return o(s,"Quad")}return Rt.getQuads=c,Rt}var C3;function Rn(){return C3||(C3=1,(function(i){var r=mi&&mi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=mi&&mi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(II(),i),o(F7(),i)})(mi)),mi}var Q3;function sv(){return Q3||(Q3=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.deskolemizeOperation=i.deskolemizeQuad=i.deskolemizeTermNestedThrowing=i.deskolemizeTerm=i.skolemizeBindingsStream=i.skolemizeQuadStream=i.skolemizeBindings=i.skolemizeQuad=i.skolemizeTerm=i.getSourceId=i.SKOLEM_PREFIX=void 0;const r=ov(),o=Rn(),n=Ve();i.SKOLEM_PREFIX="urn:comunica_skolem:source_";function t(p,y){let b=p.get(y.referenceValue);return b===void 0&&(b=`${p.size}`,p.set(y.referenceValue,b)),b}i.getSourceId=t;function e(p,y,b){return y.termType==="BlankNode"?new r.BlankNodeScoped(`bc_${b}_${y.value}`,p.namedNode(`${i.SKOLEM_PREFIX}${b}:${y.value}`)):y}i.skolemizeTerm=e;function a(p,y,b){return(0,o.mapTermsNested)(y,v=>e(p,v,b))}i.skolemizeQuad=a;function u(p,y,b){return y.map(v=>v.termType==="Quad"?a(p,v,b):e(p,v,b))}i.skolemizeBindings=u;function c(p,y,b){const v=y.map(T=>a(p,T,b));function F(){y.getProperty("metadata",T=>{v.setProperty("metadata",T),T.state.addInvalidateListener(F)})}return F(),v}i.skolemizeQuadStream=c;function s(p,y,b){const v=y.map(T=>u(p,T,b));function F(){y.getProperty("metadata",T=>{v.setProperty("metadata",T),T.state.addInvalidateListener(F)})}return F(),v}i.skolemizeBindingsStream=s;function l(p,y,b){if(y.termType==="BlankNode"&&"skolemized"in y&&(y=y.skolemized),y.termType==="NamedNode"&&y.value.startsWith(i.SKOLEM_PREFIX)){const v=y.value.indexOf(":",i.SKOLEM_PREFIX.length);if(y.value.slice(i.SKOLEM_PREFIX.length,v)===b){const T=y.value.slice(v+1,y.value.length);return p.blankNode(T)}return null}return y}i.deskolemizeTerm=l;function d(p,y,b){if(y.termType==="Quad")return(0,o.mapTermsNested)(y,F=>{const T=l(p,F,b);if(!T)throw new Error("Skolemized term is not in scope for this source");return T});const v=l(p,y,b);if(v===null)throw new Error("Skolemized term is not in scope for this source");return v}i.deskolemizeTermNestedThrowing=d;function f(p,y,b){return(0,o.mapTermsNested)(y,v=>l(p,v,b)??v)}i.deskolemizeQuad=f;function h(p,y,b){const v=new n.Factory;try{return n.Util.mapOperation(y,{[n.Algebra.types.PATTERN](F,T){return{result:Object.assign(T.createPattern(d(p,F.subject,b),d(p,F.predicate,b),d(p,F.object,b),d(p,F.graph,b)),{metadata:F.metadata}),recurse:!1}},[n.Algebra.types.PATH](F,T){return{result:Object.assign(T.createPath(d(p,F.subject,b),F.predicate,d(p,F.object,b),d(p,F.graph,b)),{metadata:F.metadata}),recurse:!1}}},v)}catch{}}i.deskolemizeOperation=h})(_1)),_1}var U3;function qI(){if(U3)return El;U3=1,Object.defineProperty(El,"__esModule",{value:!0}),El.QuerySourceSkolemized=void 0;const i=Fe(),r=yr(),o=it(),n=sv();let t=class{constructor(a,u){this.innerSource=a,this.sourceId=u}async getSelectorShape(a){return this.innerSource.getSelectorShape(a)}queryBindings(a,u,c){const s=u.getSafe(i.KeysInitQuery.dataFactory),l=(0,n.deskolemizeOperation)(s,a,this.sourceId);if(!l){const d=new o.ArrayIterator([],{autoStart:!1});return d.setProperty("metadata",{state:new r.MetadataValidationState,cardinality:{type:"exact",value:0},variables:[]}),d}return(0,n.skolemizeBindingsStream)(s,this.innerSource.queryBindings(l,u,c),this.sourceId)}queryBoolean(a,u){return this.innerSource.queryBoolean(a,u)}queryQuads(a,u){const c=u.getSafe(i.KeysInitQuery.dataFactory),s=(0,n.deskolemizeOperation)(c,a,this.sourceId);if(!s){const l=new o.ArrayIterator([],{autoStart:!1});return l.setProperty("metadata",{state:new r.MetadataValidationState,cardinality:{type:"exact",value:0}}),l}return(0,n.skolemizeQuadStream)(c,this.innerSource.queryQuads(s,u),this.sourceId)}queryVoid(a,u){return this.innerSource.queryVoid(a,u)}get referenceValue(){return this.innerSource.referenceValue}toString(){return`${this.innerSource.toString()}(SkolemID:${this.sourceId})`}};return El.QuerySourceSkolemized=t,El}var V3;function A7(){if(V3)return wl;V3=1,Object.defineProperty(wl,"__esModule",{value:!0}),wl.ActorContextPreprocessQuerySourceSkolemize=void 0;const i=wm(),r=Fe(),o=pe(),n=qI(),t=sv();let e=class extends i.ActorContextPreprocess{constructor(u){super(u)}async test(u){return(0,o.passTestVoid)()}async run(u){let c=u.context;if(c.has(r.KeysQueryOperation.querySources)){c.has(r.KeysQuerySourceIdentify.sourceIds)||(c=c.set(r.KeysQuerySourceIdentify.sourceIds,new Map));const s=c.getSafe(r.KeysQuerySourceIdentify.sourceIds);let l=c.getSafe(r.KeysQueryOperation.querySources);l=l.map(d=>({source:new n.QuerySourceSkolemized(d.source,(0,t.getSourceId)(s,d.source)),context:d.context})),c=c.set(r.KeysQueryOperation.querySources,l)}return{context:c}}};return wl.ActorContextPreprocessQuerySourceSkolemize=e,wl}var G3;function LI(){return G3||(G3=1,(function(i){var r=yi&&yi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=yi&&yi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(A7(),i),o(qI(),i),o(sv(),i)})(yi)),yi}var bi={},Cl={},X3;function w7(){if(X3)return Cl;X3=1,Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.MediatorCombinePipeline=void 0;const i=pe();let r=class extends i.Mediator{constructor(n){super(n)}async mediate(n){let t;try{t=this.publish(n)}catch{return n}if(this.filterFailures){const c=[];for(const s of t)(await s.reply).isPassed()&&c.push(s);t=c}const e=[];if(t=await Promise.all(t.map(async({actor:c,reply:s},l)=>{try{const d=await s,f=d.getOrThrow();return e[l]=d.getSideData(),{actor:c,reply:f}}catch(d){throw new Error(this.constructFailureMessage(n,[d.message]))}})),this.order){const c=s=>{const l=this.field?s[this.field]:s;if(typeof l!="number")throw new TypeError("Cannot order elements that are not numbers.");return l};t=t.sort((s,l)=>(this.order==="increasing"?1:-1)*(c(s.reply)-c(l.reply)))}let a=n,u=0;for(const{actor:c}of t)a={...a,...await c.runObservable(a,e[u++])};return a}mediateWith(){throw new Error("Method not supported.")}};return Cl.MediatorCombinePipeline=r,Cl}var z3;function H3(){return z3||(z3=1,(function(i){var r=bi&&bi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=bi&&bi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(w7(),i)})(bi)),bi}var vi={},Ql={},Ti={},Ul={},$3;function E7(){if($3)return Ul;$3=1,Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.ActorHashBindings=void 0;const i=pe();let r=class extends i.Actor{constructor(n){super(n)}};return Ul.ActorHashBindings=r,Ul}var J3;function j7(){return J3||(J3=1,(function(i){var r=Ti&&Ti.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ti&&Ti.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(E7(),i)})(Ti)),Ti}var K3;function R7(){if(K3)return Ql;K3=1,Object.defineProperty(Ql,"__esModule",{value:!0}),Ql.ActorHashBindingsMurmur=void 0;const i=j7(),r=pe(),o=k0();let n=class extends i.ActorHashBindings{async test(e){return(0,r.passTestVoid)()}async run(e){return{hashFunction:(a,u)=>{let c=o();for(const s of u)c=c.hash(a.get(s)?.value??"UNDEF");return c.result()}}}};return Ql.ActorHashBindingsMurmur=n,Ql}var Y3;function D7(){return Y3||(Y3=1,(function(i){var r=vi&&vi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=vi&&vi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(R7(),i)})(vi)),vi}var Oi={},Vl={},W3;function P7(){if(W3)return Vl;W3=1,Object.defineProperty(Vl,"__esModule",{value:!0}),Vl.MediatorRace=void 0;const i=pe();let r=class extends i.Mediator{constructor(n){super(n)}mediateWith(n,t){return new Promise((e,a)=>{const u=[];for(const c of t)c.reply.then(s=>{s.isPassed()?e((0,i.passTestWithSideData)(c.actor,s.getSideData())):(u.push(s.getFailMessage()),u.length===t.length&&e((0,i.failTest)(this.constructFailureMessage(n,u))))}).catch(s=>{a(s)})})}};return Vl.MediatorRace=r,Vl}var Z3;function $r(){return Z3||(Z3=1,(function(i){var r=Oi&&Oi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Oi&&Oi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(P7(),i)})(Oi)),Oi}var Si={},Gl={},Fi={},Xl={},k3;function M7(){if(k3)return Xl;k3=1,Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.ActorHashQuads=void 0;const i=pe();let r=class extends i.Actor{constructor(n){super(n)}};return Xl.ActorHashQuads=r,Xl}var eS;function N7(){return eS||(eS=1,(function(i){var r=Fi&&Fi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Fi&&Fi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(M7(),i)})(Fi)),Fi}var tS;function I7(){if(tS)return Gl;tS=1,Object.defineProperty(Gl,"__esModule",{value:!0}),Gl.ActorHashQuadsMurmur=void 0;const i=N7(),r=pe(),o=k0();let n=class extends i.ActorHashQuads{async test(e){return(0,r.passTestVoid)()}async run(e){return{hashFunction:a=>{const u=o(a.subject.value);return u.hash(a.predicate.value),u.hash(a.object.value),u.hash(a.graph.value),u.result()}}}};return Gl.ActorHashQuadsMurmur=n,Gl}var rS;function q7(){return rS||(rS=1,(function(i){var r=Si&&Si.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Si&&Si.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(I7(),i)})(Si)),Si}var Ai={},zl={},wi={},Hl={},nS;function L7(){if(nS)return Hl;nS=1,Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.ActorOptimizeQueryOperation=void 0;const i=pe();let r=class extends i.Actor{constructor(n){super(n)}};return Hl.ActorOptimizeQueryOperation=r,Hl}var iS;function Fr(){return iS||(iS=1,(function(i){var r=wi&&wi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=wi&&wi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(L7(),i)})(wi)),wi}var aS;function x7(){if(aS)return zl;aS=1,Object.defineProperty(zl,"__esModule",{value:!0}),zl.ActorOptimizeQueryOperationRewriteCopy=void 0;const i=Fr(),r=Fe(),o=pe(),n=Ve();let t=class extends i.ActorOptimizeQueryOperation{constructor(a){super(a)}async test(a){return(0,o.passTestVoid)()}async run(a){const u=a.context.getSafe(r.KeysInitQuery.dataFactory),c=new n.Factory(u);return{operation:n.Util.mapOperation(a.operation,{[n.Algebra.types.COPY](l,d){let f;return typeof l.destination=="string"&&typeof l.source=="string"&&l.destination===l.source||typeof l.destination!="string"&&typeof l.source!="string"&&l.destination.equals(l.source)?f=d.createCompositeUpdate([]):f=d.createCompositeUpdate([d.createDrop(l.destination,!0),d.createAdd(l.source,l.destination,l.silent)]),{result:f,recurse:!1}}},c),context:a.context}}};return zl.ActorOptimizeQueryOperationRewriteCopy=t,zl}var oS;function B7(){return oS||(oS=1,(function(i){var r=Ai&&Ai.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ai&&Ai.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(x7(),i)})(Ai)),Ai}var Ei={},$l={},uS;function C7(){if(uS)return $l;uS=1,Object.defineProperty($l,"__esModule",{value:!0}),$l.ActorOptimizeQueryOperationRewriteMove=void 0;const i=Fr(),r=Fe(),o=pe(),n=Ve();let t=class extends i.ActorOptimizeQueryOperation{constructor(a){super(a)}async test(a){return(0,o.passTestVoid)()}async run(a){const u=a.context.getSafe(r.KeysInitQuery.dataFactory),c=new n.Factory(u);return{operation:n.Util.mapOperation(a.operation,{[n.Algebra.types.MOVE](l,d){let f;if(typeof l.destination=="string"&&typeof l.source=="string"&&l.destination===l.source||typeof l.destination!="string"&&typeof l.source!="string"&&l.destination.equals(l.source))f=d.createCompositeUpdate([]);else{const h=[d.createDrop(l.destination,!0),d.createAdd(l.source,l.destination,l.silent),d.createDrop(l.source)];f=d.createCompositeUpdate(h)}return{result:f,recurse:!1}}},c),context:a.context}}};return $l.ActorOptimizeQueryOperationRewriteMove=t,$l}var sS;function Q7(){return sS||(sS=1,(function(i){var r=Ei&&Ei.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ei&&Ei.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(C7(),i)})(Ei)),Ei}var ji={},Jl={},Ri={},Kl={},cS;function xI(){if(cS)return Kl;cS=1,Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.BlankNode=void 0;class i{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return Kl.BlankNode=i,Kl}var Yl={},Wl={},lS;function BI(){if(lS)return Wl;lS=1,Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.DefaultGraph=void 0;class i{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return Wl.DefaultGraph=i,i.INSTANCE=new i,Wl}var Zl={},kl={},dS;function cv(){if(dS)return kl;dS=1,Object.defineProperty(kl,"__esModule",{value:!0}),kl.NamedNode=void 0;class i{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return kl.NamedNode=i,kl}var fS;function CI(){if(fS)return Zl;fS=1,Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.Literal=void 0;const i=cv();class r{constructor(n,t){this.termType="Literal",this.value=n,typeof t=="string"?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return Zl.Literal=r,r.RDF_LANGUAGE_STRING=new i.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new i.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Zl}var ed={},pS;function QI(){if(pS)return ed;pS=1,Object.defineProperty(ed,"__esModule",{value:!0}),ed.Quad=void 0;class i{constructor(o,n,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=n,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return ed.Quad=i,ed}var td={},hS;function UI(){if(hS)return td;hS=1,Object.defineProperty(td,"__esModule",{value:!0}),td.Variable=void 0;class i{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return td.Variable=i,td}var yS;function U7(){if(yS)return Yl;yS=1,Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.DataFactory=void 0;const i=xI(),r=BI(),o=CI(),n=cv(),t=QI(),e=UI();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new i.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return r.DefaultGraph.INSTANCE}quad(s,l,d,f){return new t.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Yl.DataFactory=u,Yl}var _S;function V7(){return _S||(_S=1,(function(i){var r=Ri&&Ri.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ri&&Ri.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(xI(),i),o(U7(),i),o(BI(),i),o(CI(),i),o(cv(),i),o(QI(),i),o(UI(),i)})(Ri)),Ri}var mS;function G7(){if(mS)return Jl;mS=1,Object.defineProperty(Jl,"__esModule",{value:!0}),Jl.ActorOptimizeQueryOperationRewriteAdd=void 0;const i=Fr(),r=Fe(),o=pe(),n=V7(),t=Ve(),e=new n.DataFactory;let a=class extends i.ActorOptimizeQueryOperation{constructor(c){super(c)}async test(c){return(0,o.passTestVoid)()}async run(c){const s=c.context.getSafe(r.KeysInitQuery.dataFactory),l=new t.Factory(s);return{operation:t.Util.mapOperation(c.operation,{[t.Algebra.types.ADD](f,h){const p=f.destination==="DEFAULT"?e.defaultGraph():f.destination,y=f.source==="DEFAULT"?e.defaultGraph():f.source;return{result:h.createDeleteInsert(void 0,[h.createPattern(e.variable("s"),e.variable("p"),e.variable("o"),p)],h.createPattern(e.variable("s"),e.variable("p"),e.variable("o"),y)),recurse:!1}}},l),context:c.context}}};return Jl.ActorOptimizeQueryOperationRewriteAdd=a,Jl}var gS;function X7(){return gS||(gS=1,(function(i){var r=ji&&ji.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ji&&ji.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(G7(),i)})(ji)),ji}var Di={},rd={},Pi={},ir={},Mi={},nd={},bS;function VI(){if(bS)return nd;bS=1,Object.defineProperty(nd,"__esModule",{value:!0}),nd.BlankNode=void 0;class i{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return nd.BlankNode=i,nd}var id={},ad={},vS;function GI(){if(vS)return ad;vS=1,Object.defineProperty(ad,"__esModule",{value:!0}),ad.DefaultGraph=void 0;class i{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return ad.DefaultGraph=i,i.INSTANCE=new i,ad}var od={},ud={},TS;function lv(){if(TS)return ud;TS=1,Object.defineProperty(ud,"__esModule",{value:!0}),ud.NamedNode=void 0;class i{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return ud.NamedNode=i,ud}var OS;function XI(){if(OS)return od;OS=1,Object.defineProperty(od,"__esModule",{value:!0}),od.Literal=void 0;const i=lv();class r{constructor(n,t){this.termType="Literal",this.value=n,typeof t=="string"?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return od.Literal=r,r.RDF_LANGUAGE_STRING=new i.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new i.NamedNode("http://www.w3.org/2001/XMLSchema#string"),od}var sd={},SS;function zI(){if(SS)return sd;SS=1,Object.defineProperty(sd,"__esModule",{value:!0}),sd.Quad=void 0;class i{constructor(o,n,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=n,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return sd.Quad=i,sd}var cd={},FS;function HI(){if(FS)return cd;FS=1,Object.defineProperty(cd,"__esModule",{value:!0}),cd.Variable=void 0;class i{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return cd.Variable=i,cd}var AS;function z7(){if(AS)return id;AS=1,Object.defineProperty(id,"__esModule",{value:!0}),id.DataFactory=void 0;const i=VI(),r=GI(),o=XI(),n=lv(),t=zI(),e=HI();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new i.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return r.DefaultGraph.INSTANCE}quad(s,l,d,f){return new t.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return id.DataFactory=u,id}var wS;function H7(){return wS||(wS=1,(function(i){var r=Mi&&Mi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Mi&&Mi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(VI(),i),o(z7(),i),o(GI(),i),o(XI(),i),o(lv(),i),o(zI(),i),o(HI(),i)})(Mi)),Mi}var ES;function $7(){if(ES)return ir;ES=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.estimateNpsCardinality=ir.estimateJoinCardinality=ir.estimateUnionCardinality=ir.estimateSliceCardinality=ir.estimateMinusCardinality=ir.estimateCardinality=void 0;const i=H7(),r=Ve(),o=new i.DataFactory,n=new r.Factory(o);function t(l,d){const f=d.getCardinality(l);if(f)return f;switch(l.type){case r.Algebra.types.ASK:return{type:"exact",value:1,dataset:d.uri};case r.Algebra.types.LOAD:case r.Algebra.types.DELETE_INSERT:case r.Algebra.types.ADD:case r.Algebra.types.COMPOSITE_UPDATE:case r.Algebra.types.CLEAR:case r.Algebra.types.NOP:case r.Algebra.types.DROP:case r.Algebra.types.CREATE:case r.Algebra.types.MOVE:case r.Algebra.types.COPY:return{type:"exact",value:0,dataset:d.uri};case r.Algebra.types.PROJECT:case r.Algebra.types.FILTER:case r.Algebra.types.ORDER_BY:case r.Algebra.types.GROUP:case r.Algebra.types.CONSTRUCT:case r.Algebra.types.DISTINCT:case r.Algebra.types.REDUCED:case r.Algebra.types.EXTEND:case r.Algebra.types.FROM:case r.Algebra.types.GRAPH:return t(l.input,d);case r.Algebra.types.ZERO_OR_ONE_PATH:case r.Algebra.types.ZERO_OR_MORE_PATH:case r.Algebra.types.ONE_OR_MORE_PATH:case r.Algebra.types.INV:return t(l.path,d);case r.Algebra.types.PATH:return t(l.predicate,d);case r.Algebra.types.NPS:return s(l,d);case r.Algebra.types.LINK:return t(n.createPattern(o.variable("s"),l.iri,o.variable("o")),d);case r.Algebra.types.UNION:case r.Algebra.types.SEQ:case r.Algebra.types.ALT:return u(l.input,d);case r.Algebra.types.BGP:return c(l.patterns,d);case r.Algebra.types.JOIN:case r.Algebra.types.LEFT_JOIN:return c(l.input,d);case r.Algebra.types.SLICE:return a(l,d);case r.Algebra.types.MINUS:return e(l,d);case r.Algebra.types.VALUES:return{type:"exact",value:l.bindings.length,dataset:d.uri};case r.Algebra.types.SERVICE:case r.Algebra.types.DESCRIBE:case r.Algebra.types.EXPRESSION:case r.Algebra.types.PATTERN:return{type:"estimate",value:Number.POSITIVE_INFINITY,dataset:d.uri}}}ir.estimateCardinality=t;function e(l,d){const f=t(l.input[0],d),h=t(l.input[1],d);return{type:"estimate",value:Math.max(f.value-h.value,0),dataset:d.uri}}ir.estimateMinusCardinality=e;function a(l,d){const f=t(l.input,d);return f.value>0&&(f.value=Math.max(f.value-l.start,0),l.length!==void 0&&(f.value=Math.min(f.value,l.length))),f}ir.estimateSliceCardinality=a;function u(l,d){const f={type:"exact",value:0,dataset:d.uri};for(const h of l){const p=t(h,d);p.type==="estimate"&&f.type==="exact"&&(f.type=p.type),f.value+=p.value}return f}ir.estimateUnionCardinality=u;function c(l,d){const f=[];for(const p of l){const y=r.Util.inScopeVariables(p).map(v=>v.value),b=f.find(v=>y.some(F=>v.vars.has(F)));if(b){b.ops.push(p);for(const v of y)b.vars.add(v)}else f.push({ops:[p],vars:new Set(y)})}return{type:"estimate",value:f.map(p=>Math.min(...p.ops.map(y=>t(y,d).value))).reduce((p,y)=>p*y,1),dataset:d.uri}}ir.estimateJoinCardinality=c;function s(l,d){const f=n.createSeq([...l.iris].reverse().map(b=>n.createLink(b))),h=t(f,d),p=n.createPattern(o.variable("s"),o.variable("p"),o.variable("o")),y=t(p,d);return{type:"estimate",value:Math.max(0,y.value-h.value),dataset:d.uri}}return ir.estimateNpsCardinality=s,ir}var ld={},jS;function J7(){if(jS)return ld;jS=1,Object.defineProperty(ld,"__esModule",{value:!0}),ld.getExpressionVariables=void 0;const i=Rn(),r=Ve();function o(n){switch(n.expressionType){case r.Algebra.expressionTypes.AGGREGATE:case r.Algebra.expressionTypes.WILDCARD:throw new Error(`Getting expression variables is not supported for ${n.expressionType}`);case r.Algebra.expressionTypes.EXISTENCE:return r.Util.inScopeVariables(n.input);case r.Algebra.expressionTypes.NAMED:return[];case r.Algebra.expressionTypes.OPERATOR:return(0,i.uniqTerms)(n.args.flatMap(t=>o(t)));case r.Algebra.expressionTypes.TERM:return n.term.termType==="Variable"?[n.term]:[]}}return ld.getExpressionVariables=o,ld}var dd={},RS;function K7(){if(RS)return dd;RS=1,Object.defineProperty(dd,"__esModule",{value:!0}),dd.doesShapeAcceptOperation=void 0;const i=Ve();function r(u,c,s){return o(u,u,c,s)}dd.doesShapeAcceptOperation=r;function o(u,c,s,l){if(c.type==="conjunction")return c.children.every(f=>o(u,f,s,l));if(c.type==="disjunction")return c.children.some(f=>o(u,f,s,l));if(c.type==="negation")return!o(c.child,c.child,s,l);if(c.type==="arity")return o(u,c.child,s,l);if((l?.joinBindings&&!c.joinBindings)??(l?.filterBindings&&!c.filterBindings))return!1;const d=c.operation;switch(d.operationType){case"type":return d.type===i.Algebra.types.EXPRESSION&&a(s)&&!("extensionFunctions"in d&&d.extensionFunctions?.includes(s.name.value))||!n(u,c.children,s,l)&&!t(u,s,l)?!1:d.type===s.type;case"pattern":return!n(u,c.children,s,l)&&!t(u,s,l)?!1:d.pattern.type===s.type;case"wildcard":{if(l?.wildcardAcceptAllExtensionFunctions)return!0;if(a(s))return!1;let f=!1;return i.Util.recurseOperation(s,{[i.Algebra.types.EXPRESSION](h){return a(h)&&!r(u,h,l)?(f=!0,!1):!0}}),!f}}}function n(u,c,s,l){if(a(s)||a(s.expression))return!1;if(c){const d=s.input?Array.isArray(s.input)?s.input:[s.input]:s.patterns??[];for(const[f,h]of c.entries())if(!d[f]||!o(u,h,d[f],l))return!1;return!0}return!1}function t(u,c,s){return c.input&&!(Array.isArray(c.input)?c.input:[c.input]).every(d=>o(u,u,d,s))||c.expression&&a(c.expression)&&!o(u,u,c.expression,s)?!1:!(c.patterns&&!c.patterns.every(l=>o(u,u,l,s)))}function e(u){return/^https?:\/\/www\.w3\.org\//u.test(u)}function a(u){return u&&u.type===i.Algebra.types.EXPRESSION&&u.expressionType===i.Algebra.expressionTypes.NAMED&&!e(u.name.value)}return dd}var Dt={},DS;function Y7(){if(DS)return Dt;DS=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.removeOperationSource=Dt.assignOperationSource=Dt.getOperationSource=Dt.testReadOnly=Dt.validateQueryOutput=Dt.getSafeVoid=Dt.getSafeBoolean=Dt.getSafeQuads=Dt.getSafeBindings=void 0;const i=Fe(),r=pe();function o(d){return a(d,"bindings"),d}Dt.getSafeBindings=o;function n(d){return a(d,"quads"),d}Dt.getSafeQuads=n;function t(d){return a(d,"boolean"),d}Dt.getSafeBoolean=t;function e(d){return a(d,"void"),d}Dt.getSafeVoid=e;function a(d,f){if(d.type!==f)throw new Error(`Invalid query output type: Expected '${f}' but got '${d.type}'`)}Dt.validateQueryOutput=a;function u(d){return d.get(i.KeysQueryOperation.readOnly)?(0,r.failTest)("Attempted a write operation in read-only mode"):(0,r.passTestVoid)()}Dt.testReadOnly=u;function c(d){return d.metadata?.scopedSource}Dt.getOperationSource=c;function s(d,f){return d={...d},d.metadata=d.metadata?{...d.metadata}:{},d.metadata.scopedSource=f,d}Dt.assignOperationSource=s;function l(d){delete d.metadata?.scopedSource,d.metadata&&Object.keys(d.metadata).length===0&&delete d.metadata}return Dt.removeOperationSource=l,Dt}var Ni={},PS;function W7(){if(PS)return Ni;PS=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.materializeOperation=Ni.materializeTerm=void 0;const i=hr(),r=Rn(),o=Ve();function n(a,u){if(a.termType==="Variable"){const c=u.get(a);if(c)return c}return a.termType==="Quad"&&(0,r.someTermsNested)(a,c=>c.termType==="Variable")?(0,r.mapTermsNested)(a,c=>n(c,u)):a}Ni.materializeTerm=n;function t(a,u,c,s,l={}){return l={strictTargetVariables:"strictTargetVariables"in l?l.strictTargetVariables:!1,bindFilter:"bindFilter"in l?l.bindFilter:!0,originalBindings:"originalBindings"in l?l.originalBindings:u},o.Util.mapOperation(a,{path(d,f){return{recurse:!1,result:Object.assign(f.createPath(n(d.subject,u),d.predicate,n(d.object,u),n(d.graph,u)),{metadata:d.metadata})}},pattern(d,f){return{recurse:!1,result:Object.assign(f.createPattern(n(d.subject,u),n(d.predicate,u),n(d.object,u),n(d.graph,u)),{metadata:d.metadata})}},join(d,f){return{recurse:!1,result:f.createJoin(d.input.map(h=>t(h,u,c,s,l)),d.input.every(h=>!h.metadata))}},extend(d){if(u.has(d.variable)){if(l.strictTargetVariables)throw new Error(`Tried to bind variable ${(0,i.termToString)(d.variable)} in a BIND operator.`);return{recurse:!0,result:t(d.input,u,c,s,l)}}return{recurse:!0,result:d}},group(d,f){if(l.strictTargetVariables){for(const p of d.variables)if(u.has(p))throw new Error(`Tried to bind variable ${(0,i.termToString)(p)} in a GROUP BY operator.`);return{recurse:!0,result:d}}const h=d.variables.filter(p=>!u.has(p));return{recurse:!0,result:f.createGroup(d.input,h,d.aggregates)}},filter(d,f){const h=l.originalBindings;if(d.expression.expressionType!=="operator"||h.size===0)return{recurse:!1,result:d};const p=e(f,h),y=t(d.expression,u,c,s,l),b=f.createJoin([...p,t(d.input,u,c,s,l)]);return{recurse:!1,result:f.createFilter(b,y)}},project(d,f){const h=e(f,l.originalBindings,d.variables);let p=t(d.input,u,c,s,l);return h.length>0&&(p=f.createJoin([...h,p])),{recurse:!1,result:f.createProject(p,d.variables)}},values(d,f){if(l.strictTargetVariables){for(const h of d.variables)if(u.has(h))throw new Error(`Tried to bind variable ${(0,i.termToString)(h)} in a VALUES operator.`)}else{const h=d.variables.filter(y=>!u.has(y)),p=d.bindings.map(y=>{const b={...y};let v=!0;return u.forEach((F,T)=>{const S=(0,i.termToString)(T);S in b&&(F.equals(b[S])||(v=!1),delete b[S])}),v?b:void 0}).filter(Boolean);return{recurse:!0,result:f.createValues(h,p)}}return{recurse:!1,result:d}},expression(d,f){if(!l.bindFilter)return{recurse:!1,result:d};if(d.expressionType==="term")return{recurse:!1,result:f.createTermExpression(n(d.term,u))};if(d.expressionType==="operator")return d.operator==="bound"&&d.args.length===1&&d.args[0].expressionType==="term"&&[...u.keys()].some(h=>d.args[0].term.equals(h))?{recurse:!1,result:f.createTermExpression(f.dataFactory.literal("true",f.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#boolean")))}:{recurse:!0,result:d};if(d.expressionType==="aggregate"&&"variable"in d&&u.has(d.variable)){if(l.strictTargetVariables)throw new Error(`Tried to bind ${(0,i.termToString)(d.variable)} in a ${d.aggregator} aggregate.`);return{recurse:!0,result:d}}return{recurse:!0,result:d}}},c)}Ni.materializeOperation=t;function e(a,u,c){const s=[];for(const[l,d]of u)if(!c||c.some(f=>f.equals(l))){const f={[(0,i.termToString)(l)]:d};s.push(a.createValues([l],[f]))}return s}return Ni}var MS;function $e(){return MS||(MS=1,(function(i){var r=Pi&&Pi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Pi&&Pi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o($7(),i),o(J7(),i),o(K7(),i),o(Y7(),i),o(W7(),i)})(Pi)),Pi}var NS;function Z7(){if(NS)return rd;NS=1,Object.defineProperty(rd,"__esModule",{value:!0}),rd.ActorOptimizeQueryOperationGroupSources=void 0;const i=Fr(),r=Fe(),o=pe(),n=$e(),t=Ve();let e=class extends i.ActorOptimizeQueryOperation{constructor(u){super(u)}async test(u){return(0,n.getOperationSource)(u.operation)?(0,o.failTest)(`Actor ${this.name} does not work with top-level operation sources.`):(0,o.passTestVoid)()}async run(u){return{operation:await this.groupOperation(u.operation,u.context),context:u.context}}async groupOperation(u,c){const s=c.getSafe(r.KeysInitQuery.dataFactory),l=new t.Factory(s);if((0,n.getOperationSource)(u)??!("input"in u))return u;if(!Array.isArray(u.input)){const p=await this.groupOperation(u.input,c);if(p.metadata?.scopedSource){const y=(0,n.getOperationSource)(p);u=await this.moveSourceAnnotationUpwardsIfPossible(u,[p],y,c)}return{...u,input:p}}const d=await Promise.all(u.input.map(p=>this.groupOperation(p,c))),f=this.clusterOperationsWithEqualSources(d);if(f.length===1){const p=f[0],y=(0,n.getOperationSource)(f[0][0]);return{...await this.moveSourceAnnotationUpwardsIfPossible(u,p,y,c),input:p}}if(f.length===d.length)return{...u,input:d};let h;switch(u.type){case t.Algebra.types.JOIN:h=l.createJoin.bind(l);break;case t.Algebra.types.UNION:h=l.createUnion.bind(l);break;case t.Algebra.types.ALT:h=l.createAlt.bind(l);break;case t.Algebra.types.SEQ:h=l.createSeq.bind(l);break;default:throw new Error(`Unsupported operation '${u.type}' detected while grouping sources`)}return await this.groupOperationMulti(f,h,c)}async groupOperationMulti(u,c,s){let l=!0;const d=await Promise.all(u.map(async f=>{const h=(0,n.getOperationSource)(f[0]),p=await this.moveSourceAnnotationUpwardsIfPossible(c(f,!0),f,h,s);return(0,n.getOperationSource)(p)&&(l=!1),p}));return c(d,l)}clusterOperationsWithEqualSources(u){const c=new Map,s=[];for(const d of u){const f=(0,n.getOperationSource)(d);f?(c.has(f)||c.set(f,[]),c.get(f).push(d)):s.push(d)}const l=[];s.length>0&&l.push(s);for(const[d,f]of c.entries())l.push(f.map(h=>(0,n.assignOperationSource)(h,d)));return l}async moveSourceAnnotationUpwardsIfPossible(u,c,s,l){if(s&&this.isPossibleToMoveSourceAnnotationUpwards(u,await s.source.getSelectorShape(l),l)){this.logDebug(l,`Hoist ${c.length} source-specific operations into a single ${u.type} operation for ${s.source.toString()}`),u=(0,n.assignOperationSource)(u,s);for(const d of c)(0,n.removeOperationSource)(d)}return u}isPossibleToMoveSourceAnnotationUpwards(u,c,s){const l=s.get(r.KeysInitQuery.extensionFunctionsAlwaysPushdown);if((0,n.doesShapeAcceptOperation)(c,u,{wildcardAcceptAllExtensionFunctions:l})){const d=s.get(r.KeysInitQuery.extensionFunctions),f=u.expression;return!d||f?.expressionType!==t.Algebra.expressionTypes.NAMED||!(f?.name.value in d)||(0,n.doesShapeAcceptOperation)(c,f,{wildcardAcceptAllExtensionFunctions:l})}return!1}};return rd.ActorOptimizeQueryOperationGroupSources=e,rd}var IS;function k7(){return IS||(IS=1,(function(i){var r=Di&&Di.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Di&&Di.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Z7(),i)})(Di)),Di}var Ii={},fd={},qS;function e8(){if(qS)return fd;qS=1,Object.defineProperty(fd,"__esModule",{value:!0}),fd.ActorOptimizeQueryOperationConstructDistinct=void 0;const i=Fr(),r=JN(),o=pe(),n=Ve();let t=class extends i.ActorOptimizeQueryOperation{constructor(a){super(a)}async test(a){return a.context.has(r.KeysInitQuery.distinctConstruct)?(0,o.passTestVoid)():(0,o.failTest)(`${this.name} was not enabled by the query.`)}async run(a){return{operation:n.Util.mapOperation(a.operation,{construct(c,s){return{recurse:!1,result:s.createDistinct(s.createConstruct(c.input,c.template))}}}),context:a.context.delete(r.KeysInitQuery.distinctConstruct)}}};return fd.ActorOptimizeQueryOperationConstructDistinct=t,fd}var LS;function t8(){return LS||(LS=1,(function(i){var r=Ii&&Ii.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ii&&Ii.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(e8(),i)})(Ii)),Ii}var qi={},pd={},Li={},hd={},xS;function r8(){if(xS)return hd;xS=1,Object.defineProperty(hd,"__esModule",{value:!0}),hd.ActorRdfJoinEntriesSort=void 0;const i=pe();let r=class extends i.Actor{constructor(n){super(n)}};return hd.ActorRdfJoinEntriesSort=r,hd}var BS;function n8(){return BS||(BS=1,(function(i){var r=Li&&Li.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Li&&Li.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(r8(),i)})(Li)),Li}var CS;function i8(){if(CS)return pd;CS=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.ActorRdfJoinEntriesSortCardinality=void 0;const i=n8(),r=pe();let o=class extends i.ActorRdfJoinEntriesSort{constructor(t){super(t)}async test(t){return(0,r.passTest)({accuracy:t.entries.length===0?1:t.entries.reduce((e,a)=>e+(Number.isFinite(a.metadata.cardinality.value)?1:0),0)/t.entries.length})}async run(t){return{entries:[...t.entries].sort((a,u)=>a.metadata.cardinality.value-u.metadata.cardinality.value)}}};return pd.ActorRdfJoinEntriesSortCardinality=o,pd}var QS;function a8(){return QS||(QS=1,(function(i){var r=qi&&qi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=qi&&qi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(i8(),i)})(qi)),qi}var xi={},yd={},US;function o8(){if(US)return yd;US=1,Object.defineProperty(yd,"__esModule",{value:!0}),yd.MediatorNumber=void 0;const i=pe();let r=class extends i.Mediator{constructor(n){super(n),this.indexPicker=this.createIndexPicker()}createIndexPicker(){switch(this.type){case"min":return n=>n.reduce((t,e,a)=>{const u=this.getOrDefault(e[this.field],Number.POSITIVE_INFINITY);return u!==null&&(Number.isNaN(t[0])||t[0]>u)?[u,a]:t},[Number.NaN,-1])[1];case"max":return n=>n.reduce((t,e,a)=>{const u=this.getOrDefault(e[this.field],Number.NEGATIVE_INFINITY);return u!==null&&(Number.isNaN(t[0])||t[0]<u)?[u,a]:t},[Number.NaN,-1])[1];default:throw new Error(`No valid "type" value was given, must be either 'min' or 'max', but got: ${this.type}`)}}getOrDefault(n,t){return n===void 0?t:n}async mediateWith(n,t){let e=await Promise.all(t.map(({reply:l})=>l));const a=[];if(this.ignoreFailures){const l={};l[this.field]=null,e=e.map(d=>d.isFailed()?(a.push(d.getFailMessage()),(0,i.passTestWithSideData)(l,void 0)):d)}const u=[],c=e.map((l,d)=>{const f=l.getOrThrow();return u[d]=l.getSideData(),f}),s=this.indexPicker(c);return s<0?(0,i.failTest)(this.constructFailureMessage(n,a)):(0,i.passTestWithSideData)(t[s].actor,u[s])}};return yd.MediatorNumber=r,yd}var VS;function m1(){return VS||(VS=1,(function(i){var r=xi&&xi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=xi&&xi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(o8(),i)})(xi)),xi}var Bi={},Ci={},Qi={},_d={},GS;function u8(){if(GS)return _d;GS=1,Object.defineProperty(_d,"__esModule",{value:!0}),_d.ActorRdfJoinSelectivity=void 0;const i=pe();let r=class extends i.Actor{constructor(n){super(n)}};return _d.ActorRdfJoinSelectivity=r,_d}var XS;function s8(){return XS||(XS=1,(function(i){var r=Qi&&Qi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Qi&&Qi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(u8(),i)})(Qi)),Qi}var zS;function c8(){if(zS)return Ci;zS=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.JoinTypes=Ci.ActorRdfJoinSelectivityVariableCounting=void 0;const i=s8(),r=pe(),o=Ve();let n=class us extends i.ActorRdfJoinSelectivity{constructor(a){super(a)}async test(a){return(0,r.passTest)({accuracy:.5})}static getPatternCost(a){let u=1;return a.subject.termType==="Variable"&&(u+=4),(a.predicate.termType==="Variable"||a.type===o.Algebra.types.PATH)&&(u+=1),a.object.termType==="Variable"&&(u+=2),a.graph.termType==="Variable"&&(u+=1),u/9}static getJoinTypes(a,u){const c=[];return a.subject.termType==="Variable"?(a.subject.equals(u.subject)&&c.push(t.unboundSS),u.type==="pattern"&&a.subject.equals(u.predicate)&&c.push(t.unboundSP),a.subject.equals(u.object)&&c.push(t.unboundSO),a.subject.equals(u.graph)&&c.push(t.unboundSG)):(a.subject.equals(u.subject)&&c.push(t.boundSS),u.type==="pattern"&&a.subject.equals(u.predicate)&&c.push(t.boundSP),a.subject.equals(u.object)&&c.push(t.boundSO),a.subject.equals(u.graph)&&c.push(t.boundSG)),a.type==="pattern"&&(a.predicate.termType==="Variable"?(a.predicate.equals(u.subject)&&c.push(t.unboundPS),u.type==="pattern"&&a.predicate.equals(u.predicate)&&c.push(t.unboundPP),a.predicate.equals(u.object)&&c.push(t.unboundPO),a.predicate.equals(u.graph)&&c.push(t.unboundPG)):(a.predicate.equals(u.subject)&&c.push(t.boundPS),u.type==="pattern"&&a.predicate.equals(u.predicate)&&c.push(t.boundPP),a.predicate.equals(u.object)&&c.push(t.boundPO),a.predicate.equals(u.graph)&&c.push(t.boundPG))),a.object.termType==="Variable"?(a.object.equals(u.subject)&&c.push(t.unboundOS),u.type==="pattern"&&a.object.equals(u.predicate)&&c.push(t.unboundOP),a.object.equals(u.object)&&c.push(t.unboundOO),a.object.equals(u.graph)&&c.push(t.unboundOG)):(a.object.equals(u.subject)&&c.push(t.boundOS),u.type==="pattern"&&a.object.equals(u.predicate)&&c.push(t.boundOP),a.object.equals(u.object)&&c.push(t.boundOO),a.object.equals(u.graph)&&c.push(t.boundOG)),a.graph.termType==="Variable"?(a.graph.equals(u.subject)&&c.push(t.unboundGS),u.type==="pattern"&&a.graph.equals(u.predicate)&&c.push(t.unboundGP),a.graph.equals(u.object)&&c.push(t.unboundGO),a.graph.equals(u.graph)&&c.push(t.unboundGG)):(a.graph.equals(u.subject)&&c.push(t.boundGS),u.type==="pattern"&&a.graph.equals(u.predicate)&&c.push(t.boundGP),a.graph.equals(u.object)&&c.push(t.boundGO),a.graph.equals(u.graph)&&c.push(t.boundGG)),c}static getOperationsPairwiseJoinCost(a,u){let c=us.MAX_PAIRWISE_COST;for(const s of us.getJoinTypes(a,u))switch(s){case t.boundSS:c-=4;break;case t.boundSP:c-=6;break;case t.boundSO:c-=2;break;case t.boundSG:c-=6;break;case t.boundPS:c-=6;break;case t.boundPP:return 1;case t.boundPO:c-=6;break;case t.boundPG:c-=6;break;case t.boundOS:c-=2;break;case t.boundOP:c-=6;break;case t.boundOO:c-=2;break;case t.boundOG:c-=6;break;case t.boundGS:c-=6;break;case t.boundGP:c-=6;break;case t.boundGO:c-=6;break;case t.boundGG:c-=6;break;case t.unboundSS:c-=2;break;case t.unboundSP:c-=3;break;case t.unboundSO:c-=1;break;case t.unboundSG:c-=3;break;case t.unboundPS:c-=3;break;case t.unboundPP:c-=3;break;case t.unboundPO:c-=3;break;case t.unboundPG:c-=3;break;case t.unboundOS:c-=1;break;case t.unboundOP:c-=3;break;case t.unboundOO:c-=1;break;case t.unboundOG:c-=3;break;case t.unboundGS:c-=3;break;case t.unboundGP:c-=3;break;case t.unboundGO:c-=3;break;case t.unboundGG:c-=3;break}return c/us.MAX_PAIRWISE_COST}static getOperationsJoinCost(a){const u=[];for(const l of a)o.Util.recurseOperation(l,{[o.Algebra.types.PATTERN](d){return u.push(d),!1},[o.Algebra.types.PATH](d){return u.push(d),!1}});let c=0,s=0;for(const l of u)for(const d of u)l!==d&&(c+=us.getOperationsPairwiseJoinCost(l,d),s++);return s===0?1:c/s*u.reduce((l,d)=>l*us.getPatternCost(d),1)}async run(a){return a.entries.length<=1?{selectivity:1}:{selectivity:us.getOperationsJoinCost(a.entries.map(u=>u.operation))}}};Ci.ActorRdfJoinSelectivityVariableCounting=n,n.MAX_PAIRWISE_COST=82;var t;return(function(e){e[e.boundSS=0]="boundSS",e[e.boundSP=1]="boundSP",e[e.boundSO=2]="boundSO",e[e.boundSG=3]="boundSG",e[e.boundPS=4]="boundPS",e[e.boundPP=5]="boundPP",e[e.boundPO=6]="boundPO",e[e.boundPG=7]="boundPG",e[e.boundOS=8]="boundOS",e[e.boundOP=9]="boundOP",e[e.boundOO=10]="boundOO",e[e.boundOG=11]="boundOG",e[e.boundGS=12]="boundGS",e[e.boundGP=13]="boundGP",e[e.boundGO=14]="boundGO",e[e.boundGG=15]="boundGG",e[e.unboundSS=16]="unboundSS",e[e.unboundSP=17]="unboundSP",e[e.unboundSO=18]="unboundSO",e[e.unboundSG=19]="unboundSG",e[e.unboundPS=20]="unboundPS",e[e.unboundPP=21]="unboundPP",e[e.unboundPO=22]="unboundPO",e[e.unboundPG=23]="unboundPG",e[e.unboundOS=24]="unboundOS",e[e.unboundOP=25]="unboundOP",e[e.unboundOO=26]="unboundOO",e[e.unboundOG=27]="unboundOG",e[e.unboundGS=28]="unboundGS",e[e.unboundGP=29]="unboundGP",e[e.unboundGO=30]="unboundGO",e[e.unboundGG=31]="unboundGG"})(t||(Ci.JoinTypes=t={})),Ci}var HS;function l8(){return HS||(HS=1,(function(i){var r=Bi&&Bi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Bi&&Bi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(c8(),i)})(Bi)),Bi}var Ui={},md={},Vi={},gd={},$S;function d8(){if($S)return gd;$S=1,Object.defineProperty(gd,"__esModule",{value:!0}),gd.ActorRdfMetadataAccumulate=void 0;const i=pe();let r=class extends i.Actor{constructor(n){super(n)}};return gd.ActorRdfMetadataAccumulate=r,gd}var JS;function dv(){return JS||(JS=1,(function(i){var r=Vi&&Vi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Vi&&Vi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(d8(),i)})(Vi)),Vi}var KS;function f8(){if(KS)return md;KS=1,Object.defineProperty(md,"__esModule",{value:!0}),md.ActorRdfMetadataAccumulateCardinality=void 0;const i=dv(),r=pe();let o=class extends i.ActorRdfMetadataAccumulate{constructor(t){super(t)}async test(t){return(0,r.passTestVoid)()}async run(t){if(t.mode==="initialize")return{metadata:{cardinality:{type:"exact",value:0}}};const e={...t.accumulatedMetadata.cardinality};if(e.dataset){if(t.accumulatedMetadata.defaultGraph===e.dataset&&e.dataset!==t.appendingMetadata.cardinality.dataset)return{metadata:{cardinality:t.appendingMetadata.cardinality}};if(t.appendingMetadata.cardinality.dataset){if(e.dataset!==t.appendingMetadata.cardinality.dataset&&t.appendingMetadata.subsetOf===e.dataset)return{metadata:{cardinality:t.appendingMetadata.cardinality}};if(e.dataset===t.appendingMetadata.cardinality.dataset)return{metadata:{cardinality:e}};delete e.dataset}else return{metadata:{cardinality:e}}}return!t.appendingMetadata.cardinality||!Number.isFinite(t.appendingMetadata.cardinality.value)?(e.type="estimate",e.value=Number.POSITIVE_INFINITY):(t.appendingMetadata.cardinality.type==="estimate"&&(e.type="estimate"),e.value+=t.appendingMetadata.cardinality.value),{metadata:{cardinality:e}}}};return md.ActorRdfMetadataAccumulateCardinality=o,md}var YS;function p8(){return YS||(YS=1,(function(i){var r=Ui&&Ui.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ui&&Ui.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(f8(),i)})(Ui)),Ui}var Gi={},bd={},WS;function h8(){if(WS)return bd;WS=1,Object.defineProperty(bd,"__esModule",{value:!0}),bd.ActorRdfMetadataAccumulatePageSize=void 0;const i=dv(),r=pe();let o=class extends i.ActorRdfMetadataAccumulate{constructor(t){super(t)}async test(t){return(0,r.passTestVoid)()}async run(t){return t.mode==="initialize"?{metadata:{}}:{metadata:{..."pageSize"in t.accumulatedMetadata||"pageSize"in t.appendingMetadata?{pageSize:(t.accumulatedMetadata.pageSize??0)+(t.appendingMetadata.pageSize??0)}:{}}}}};return bd.ActorRdfMetadataAccumulatePageSize=o,bd}var ZS;function y8(){return ZS||(ZS=1,(function(i){var r=Gi&&Gi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Gi&&Gi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(h8(),i)})(Gi)),Gi}var Xi={},vd={},kS;function _8(){if(kS)return vd;kS=1,Object.defineProperty(vd,"__esModule",{value:!0}),vd.ActorRdfMetadataAccumulateRequestTime=void 0;const i=dv(),r=pe();let o=class extends i.ActorRdfMetadataAccumulate{constructor(t){super(t)}async test(t){return(0,r.passTestVoid)()}async run(t){return t.mode==="initialize"?{metadata:{}}:{metadata:{..."requestTime"in t.accumulatedMetadata||"requestTime"in t.appendingMetadata?{requestTime:(t.accumulatedMetadata.requestTime??0)+(t.appendingMetadata.requestTime??0)}:{}}}}};return vd.ActorRdfMetadataAccumulateRequestTime=o,vd}var eF;function m8(){return eF||(eF=1,(function(i){var r=Xi&&Xi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Xi&&Xi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(_8(),i)})(Xi)),Xi}var zi={},Td={},tF;function g8(){if(tF)return Td;tF=1,Object.defineProperty(Td,"__esModule",{value:!0}),Td.MediatorCombineUnion=void 0;const i=pe();let r=class extends i.Mediator{constructor(n){super(n),this.combiner=this.createCombiner()}async mediate(n){let t;try{t=this.publish(n)}catch{t=[]}if(this.filterFailures){const u=[];for(const c of t)(await c.reply).isPassed()&&u.push(c);t=u}const e=[];await Promise.all(t.map(async({reply:u},c)=>{const s=await u,l=s.getOrThrow();return e[c]=s.getSideData(),l}));const a=await Promise.all(t.map((u,c)=>u.actor.runObservable(n,e[c])));return this.combiner(a)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return n=>{const t={};return t[this.field]={},[{}].concat(n.map(e=>e[this.field])).forEach(e=>{t[this.field]={...e,...t[this.field]}}),t}}};return Td.MediatorCombineUnion=r,Td}var rF;function ig(){return rF||(rF=1,(function(i){var r=zi&&zi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=zi&&zi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(g8(),i)})(zi)),zi}var Hi={},Od={},$i={},Sd={},nF;function $I(){if(nF)return Sd;nF=1,Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.ActorRdfUpdateQuads=void 0;const i=pe();let r=class extends i.Actor{constructor(n){super(n)}};return Sd.ActorRdfUpdateQuads=r,Sd}var ln={},iF;function b8(){if(iF)return ln;iF=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.ActorRdfUpdateQuadsDestination=ln.deskolemize=ln.deskolemizeStream=void 0;const i=LI(),r=Fe(),o=pe(),n=$I();function t(u,c,s){return c?.map(l=>(0,i.deskolemizeQuad)(u,l,s))}ln.deskolemizeStream=t;function e(u){const c=u.context.getSafe(r.KeysInitQuery.dataFactory),s=u.context.get(r.KeysRdfUpdateQuads.destination),l=u.context.get(r.KeysQuerySourceIdentify.sourceIds)?.get(s);return l?{...u,quadStreamInsert:t(c,u.quadStreamInsert,l),quadStreamDelete:t(c,u.quadStreamDelete,l)}:u}ln.deskolemize=e;let a=class extends n.ActorRdfUpdateQuads{async test(c){return(0,o.passTestVoid)()}async run(c){const s=await this.getDestination(c.context);return await this.getOutput(s,e(c))}async getOutput(c,s){return{execute:async()=>{await c.update({insert:s.quadStreamInsert,delete:s.quadStreamDelete}),await(s.deleteGraphs?c.deleteGraphs(s.deleteGraphs.graphs,s.deleteGraphs.requireExistence,s.deleteGraphs.dropGraphs):Promise.resolve()),await(s.createGraphs?c.createGraphs(s.createGraphs.graphs,s.createGraphs.requireNonExistence):Promise.resolve())}}}};return ln.ActorRdfUpdateQuadsDestination=a,ln}var g1={},aF;function v8(){return aF||(aF=1,Object.defineProperty(g1,"__esModule",{value:!0})),g1}var ar={},oF;function T8(){if(oF)return ar;oF=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.getContextDestinationUrl=ar.getContextDestination=ar.getDataDestinationContext=ar.getDataDestinationValue=ar.getDataDestinationType=ar.isDataDestinationRawType=void 0;const i=Fe();function r(u){return typeof u=="string"||"remove"in u}ar.isDataDestinationRawType=r;function o(u){return typeof u=="string"?"":"remove"in u?"rdfjsStore":u.type}ar.getDataDestinationType=o;function n(u){return r(u)?u:u.value}ar.getDataDestinationValue=n;function t(u,c){return typeof u=="string"||"remove"in u||!u.context?c:c.merge(u.context)}ar.getDataDestinationContext=t;function e(u){return u.get(i.KeysRdfUpdateQuads.destination)}ar.getContextDestination=e;function a(u){if(u){let c=n(u);if(typeof c=="string"){const s=c.indexOf("#");return s>=0&&(c=c.slice(0,s)),c}}}return ar.getContextDestinationUrl=a,ar}var uF;function JI(){return uF||(uF=1,(function(i){var r=$i&&$i.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=$i&&$i.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o($I(),i),o(b8(),i),o(v8(),i),o(T8(),i)})($i)),$i}var Fd={},Ad={},sF;function O8(){if(sF)return Ad;sF=1,Object.defineProperty(Ad,"__esModule",{value:!0}),Ad.promisifyEventEmitter=void 0;function i(r,o){return new Promise((n,t)=>{r.on("end",()=>n(o)),r.on("error",t)})}return Ad.promisifyEventEmitter=i,Ad}var cF;function S8(){if(cF)return Fd;cF=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.RdfJsQuadDestination=void 0;const i=O8(),r=hr();let o=class{constructor(t,e){this.dataFactory=t,this.store=e}async update(t){t.delete&&await(0,i.promisifyEventEmitter)(this.store.remove(t.delete)),t.insert&&await(0,i.promisifyEventEmitter)(this.store.import(t.insert))}async deleteGraphs(t,e,a){switch(t){case"ALL":await(0,i.promisifyEventEmitter)(this.store.deleteGraph(this.dataFactory.defaultGraph()));case"NAMED":const u=this.store.match(),c={};u.on("data",s=>{s.graph.termType!=="DefaultGraph"&&(c[(0,r.termToString)(s.graph)]=!0)}),await(0,i.promisifyEventEmitter)(u),await Promise.all(Object.keys(c).map(s=>(0,i.promisifyEventEmitter)(this.store.deleteGraph((0,r.stringToTerm)(s,this.dataFactory)))));break;default:for(const s of Array.isArray(t)?t:[t])await(0,i.promisifyEventEmitter)(this.store.deleteGraph(s))}}async createGraphs(t,e){if(e)for(const a of t){const u=this.store.match(void 0,void 0,void 0,a);await new Promise((c,s)=>{u.once("data",()=>{s(new Error(`Unable to create graph ${a.value} as it already exists`))}),u.on("end",c),u.on("error",s)})}}};return Fd.RdfJsQuadDestination=o,Fd}var lF;function F8(){if(lF)return Od;lF=1,Object.defineProperty(Od,"__esModule",{value:!0}),Od.ActorRdfUpdateQuadsRdfJsStore=void 0;const i=JI(),r=Fe(),o=pe(),n=S8();let t=class extends i.ActorRdfUpdateQuadsDestination{constructor(a){super(a)}async test(a){const u=(0,i.getContextDestination)(a.context);return!u||typeof u=="string"||!("remove"in u)&&"value"in u&&!u.value?.remove?(0,o.failTest)(`${this.name} received an invalid rdfjsStore.`):(0,o.passTestVoid)()}async getDestination(a){const u=(0,i.getContextDestination)(a);return new n.RdfJsQuadDestination(a.getSafe(r.KeysInitQuery.dataFactory),"remove"in u?u:u.value)}};return Od.ActorRdfUpdateQuadsRdfJsStore=t,Od}var dF;function A8(){return dF||(dF=1,(function(i){var r=Hi&&Hi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Hi&&Hi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(F8(),i)})(Hi)),Hi}var Ji={},wd={},Ki={},Ed={},fF;function w8(){if(fF)return Ed;fF=1,Object.defineProperty(Ed,"__esModule",{value:!0}),Ed.ActorQueryParse=void 0;const i=pe();let r=class extends i.Actor{constructor(n){super(n)}};return Ed.ActorQueryParse=r,Ed}var pF;function E8(){return pF||(pF=1,(function(i){var r=Ki&&Ki.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ki&&Ki.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(w8(),i)})(Ki)),Ki}var hF;function j8(){if(hF)return wd;hF=1,Object.defineProperty(wd,"__esModule",{value:!0}),wd.ActorQueryParseSparql=void 0;const i=E8(),r=Fe(),o=pe(),n=Ve(),t=Kg();let e=class extends i.ActorQueryParse{constructor(u){super(u),this.prefixes=Object.freeze(this.prefixes)}async test(u){return u.queryFormat&&u.queryFormat.language!=="sparql"?(0,o.failTest)("This actor can only parse SPARQL queries"):(0,o.passTestVoid)()}async run(u){const c=u.context.getSafe(r.KeysInitQuery.dataFactory),l=new t.Parser({prefixes:this.prefixes,baseIRI:u.baseIRI,sparqlStar:!0,factory:c}).parse(u.query);return{baseIRI:l.type==="query"?l.base:void 0,operation:(0,n.translate)(l,{quads:!0,prefixes:this.prefixes,blankToVariable:!0,baseIRI:u.baseIRI,dataFactory:c})}}};return wd.ActorQueryParseSparql=e,wd}var yF;function R8(){return yF||(yF=1,(function(i){var r=Ji&&Ji.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ji&&Ji.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(j8(),i)})(Ji)),Ji}var Yi={},jd={},Rd={},_F;function D8(){if(_F)return Rd;_F=1,Object.defineProperty(Rd,"__esModule",{value:!0}),Rd.ExpressionFunctionBnode=void 0;const i=k(),r=Fe(),o=ov(),n=W();let t=class c0 extends i.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:n.SparqlOperator.BNODE,apply:async a=>{const{args:u,mapping:c,exprEval:s}=a,l=u.length===1?await s.evaluatorExpressionEvaluation(u[0],c):void 0;let d;if(l){const h=c0.bnodeTree.search([l],s.context.getSafe(r.KeysExpressionEvaluator.superTypeProvider),s.context.getSafe(r.KeysInitQuery.functionArgumentsCache));if(!h)throw new n.InvalidArgumentTypes(u,n.SparqlOperator.BNODE);d=h(s)([l]).str()}const f=new o.BlankNodeBindingsScoped(d??`BNODE_${c0.bnodeCounter++}`);return new n.BlankNode(f)}})}checkArity(a){return a.length===0||a.length===1}};return Rd.ExpressionFunctionBnode=t,t.bnodeTree=(0,n.declare)(n.SparqlOperator.BNODE).onString1(()=>e=>e).collect(),t.bnodeCounter=0,Rd}var mF;function P8(){if(mF)return jd;mF=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.ActorFunctionFactoryExpressionBnode=void 0;const i=k(),r=W(),o=D8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.BNODE],termFunction:!1})}async run(e){return new o.ExpressionFunctionBnode}};return jd.ActorFunctionFactoryExpressionBnode=n,jd}var gF;function M8(){return gF||(gF=1,(function(i){var r=Yi&&Yi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Yi&&Yi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(P8(),i)})(Yi)),Yi}var Wi={},Dd={},Pd={},bF;function N8(){if(bF)return Pd;bF=1,Object.defineProperty(Pd,"__esModule",{value:!0}),Pd.ExpressionFunctionCoalesce=void 0;const i=k(),r=W();let o=class extends i.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:r.SparqlOperator.COALESCE,apply:async({args:t,mapping:e,exprEval:a})=>{const u=[];for(const c of t)try{return await a.evaluatorExpressionEvaluation(c,e)}catch(s){u.push(s)}throw new r.CoalesceError(u)}})}};return Pd.ExpressionFunctionCoalesce=o,Pd}var vF;function I8(){if(vF)return Dd;vF=1,Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.ActorFunctionFactoryExpressionCoalesce=void 0;const i=k(),r=W(),o=N8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.COALESCE],termFunction:!1})}async run(e){return new o.ExpressionFunctionCoalesce}};return Dd.ActorFunctionFactoryExpressionCoalesce=n,Dd}var TF;function q8(){return TF||(TF=1,(function(i){var r=Wi&&Wi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Wi&&Wi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(I8(),i)})(Wi)),Wi}var Zi={},Md={},Nd={},OF;function L8(){if(OF)return Nd;OF=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.ExpressionFunctionBound=void 0;const i=k(),r=Fe(),o=jn(),n=W();let t=class extends i.ExpressionFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.BOUND,apply:async({args:a,mapping:u,exprEval:c})=>{const s=a[0];if(s.expressionType!==o.ExpressionType.Variable)throw new n.InvalidArgumentTypes(a,n.SparqlOperator.BOUND);const l=u.has((0,n.expressionToVar)(c.context.getSafe(r.KeysInitQuery.dataFactory),s));return(0,n.bool)(l)}})}};return Nd.ExpressionFunctionBound=t,Nd}var SF;function x8(){if(SF)return Md;SF=1,Object.defineProperty(Md,"__esModule",{value:!0}),Md.ActorFunctionFactoryExpressionBound=void 0;const i=k(),r=W(),o=L8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.BOUND],termFunction:!1})}async run(e){return new o.ExpressionFunctionBound}};return Md.ActorFunctionFactoryExpressionBound=n,Md}var FF;function B8(){return FF||(FF=1,(function(i){var r=Zi&&Zi.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Zi&&Zi.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(x8(),i)})(Zi)),Zi}var ki={},Id={},ea={},qd={},AF;function KI(){if(AF)return qd;AF=1,Object.defineProperty(qd,"__esModule",{value:!0}),qd.BlankNode=void 0;class i{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return qd.BlankNode=i,qd}var Ld={},xd={},wF;function YI(){if(wF)return xd;wF=1,Object.defineProperty(xd,"__esModule",{value:!0}),xd.DefaultGraph=void 0;class i{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return xd.DefaultGraph=i,i.INSTANCE=new i,xd}var Bd={},Cd={},EF;function fv(){if(EF)return Cd;EF=1,Object.defineProperty(Cd,"__esModule",{value:!0}),Cd.NamedNode=void 0;class i{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return Cd.NamedNode=i,Cd}var jF;function WI(){if(jF)return Bd;jF=1,Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.Literal=void 0;const i=fv();class r{constructor(n,t){this.termType="Literal",this.value=n,typeof t=="string"?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return Bd.Literal=r,r.RDF_LANGUAGE_STRING=new i.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new i.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Bd}var Qd={},RF;function ZI(){if(RF)return Qd;RF=1,Object.defineProperty(Qd,"__esModule",{value:!0}),Qd.Quad=void 0;class i{constructor(o,n,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=n,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return Qd.Quad=i,Qd}var Ud={},DF;function kI(){if(DF)return Ud;DF=1,Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.Variable=void 0;class i{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return Ud.Variable=i,Ud}var PF;function C8(){if(PF)return Ld;PF=1,Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.DataFactory=void 0;const i=KI(),r=YI(),o=WI(),n=fv(),t=ZI(),e=kI();let a=0;class u{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new i.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return r.DefaultGraph.INSTANCE}quad(s,l,d,f){return new t.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Ld.DataFactory=u,Ld}var MF;function Q8(){return MF||(MF=1,(function(i){var r=ea&&ea.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ea&&ea.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(KI(),i),o(C8(),i),o(YI(),i),o(WI(),i),o(fv(),i),o(ZI(),i),o(kI(),i)})(ea)),ea}var Vd={},NF;function U8(){if(NF)return Vd;NF=1,Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.NamedExtension=void 0;const i=bI(),r=Fe(),o=W();let n=class extends i.ExpressionFunctionBase{constructor({operator:e,functionDefinition:a}){super({arity:Number.POSITIVE_INFINITY,operator:e,apply:async({args:u,exprEval:c,mapping:s})=>{const l=await Promise.all(u.map(d=>c.evaluatorExpressionEvaluation(d,s)));try{return new o.TermTransformer(c.context.getSafe(r.KeysExpressionEvaluator.superTypeProvider)).transformRDFTermUnsafe(await a(l.map(d=>d.toRDF(c.context.getSafe(r.KeysInitQuery.dataFactory)))))}catch(d){throw new o.ExtensionFunctionError(this.operator,d)}}})}};return Vd.NamedExtension=n,Vd}var IF;function V8(){if(IF)return Id;IF=1,Object.defineProperty(Id,"__esModule",{value:!0}),Id.ActorFunctionFactoryExpressionExtensions=void 0;const i=k(),r=Fe(),o=pe(),n=Q8(),t=U8();let e=class extends i.ActorFunctionFactory{constructor(u){super(u)}async test({context:u,functionName:c}){return await u.getSafe(r.KeysExpressionEvaluator.extensionFunctionCreator)(new n.DataFactory().namedNode(c))?(0,o.passTestVoid)():(0,o.failTest)(`Actor ${this.name} can only provide non-termExpression implementations for functions that are provided through config entries like: ${r.KeysInitQuery.extensionFunctionCreator.name} or ${r.KeysInitQuery.extensionFunctions.name}`)}async run({context:u,functionName:c}){const l=await u.getSafe(r.KeysExpressionEvaluator.extensionFunctionCreator)(new n.DataFactory().namedNode(c));return new t.NamedExtension({operator:c,functionDefinition:l})}};return Id.ActorFunctionFactoryExpressionExtensions=e,Id}var qF;function G8(){return qF||(qF=1,(function(i){var r=ki&&ki.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ki&&ki.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(V8(),i)})(ki)),ki}var ta={},Gd={},Xd={},LF;function X8(){if(LF)return Xd;LF=1,Object.defineProperty(Xd,"__esModule",{value:!0}),Xd.ExpressionFunctionConcat=void 0;const i=k(),r=Fe(),o=W();let n=class l0 extends i.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:o.SparqlOperator.CONCAT,apply:async e=>{const{args:a,mapping:u,exprEval:c}=e,s=a.map(async p=>c.evaluatorExpressionEvaluation(p,u)).map(async p=>{const y=l0.concatTree.search([await p],c.context.getSafe(r.KeysExpressionEvaluator.superTypeProvider),c.context.getSafe(r.KeysInitQuery.functionArgumentsCache));if(!y)throw new o.InvalidArgumentTypes(a,o.SparqlOperator.CONCAT);return y(c)([await p])}),l=await Promise.all(s),f=l.map(p=>p.typedValue).join(""),h=l0.langAllEqual(l)?l[0].language:void 0;return h?(0,o.langString)(f,h):(0,o.string)(f)}})}static langAllEqual(e){return e.length>0&&e.every(a=>a.language===e[0].language)}};return Xd.ExpressionFunctionConcat=n,n.concatTree=(0,o.declare)(o.SparqlOperator.CONCAT).onStringly1(()=>t=>t).collect(),Xd}var xF;function z8(){if(xF)return Gd;xF=1,Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.ActorFunctionFactoryExpressionConcat=void 0;const i=k(),r=W(),o=X8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.CONCAT],termFunction:!1})}async run(e){return new o.ExpressionFunctionConcat}};return Gd.ActorFunctionFactoryExpressionConcat=n,Gd}var BF;function H8(){return BF||(BF=1,(function(i){var r=ta&&ta.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ta&&ta.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(z8(),i)})(ta)),ta}var ra={},zd={},Hd={},CF;function $8(){if(CF)return Hd;CF=1,Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.ExpressionFunctionIf=void 0;const i=k(),r=W();let o=class extends i.ExpressionFunctionBase{constructor(){super({arity:3,operator:r.SparqlOperator.IF,apply:async({args:t,mapping:e,exprEval:a})=>(await a.evaluatorExpressionEvaluation(t[0],e)).coerceEBV()?a.evaluatorExpressionEvaluation(t[1],e):a.evaluatorExpressionEvaluation(t[2],e)})}};return Hd.ExpressionFunctionIf=o,Hd}var QF;function J8(){if(QF)return zd;QF=1,Object.defineProperty(zd,"__esModule",{value:!0}),zd.ActorFunctionFactoryExpressionIf=void 0;const i=k(),r=W(),o=$8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.IF],termFunction:!1})}async run(e){return new o.ExpressionFunctionIf}};return zd.ActorFunctionFactoryExpressionIf=n,zd}var UF;function K8(){return UF||(UF=1,(function(i){var r=ra&&ra.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ra&&ra.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(J8(),i)})(ra)),ra}var na={},$d={},Jd={},VF;function Y8(){if(VF)return Jd;VF=1,Object.defineProperty(Jd,"__esModule",{value:!0}),Jd.ExpressionFunctionLogicalAnd=void 0;const i=k(),r=W();let o=class extends i.ExpressionFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.LOGICAL_AND,apply:async({args:t,mapping:e,exprEval:a})=>{const[u,c]=t;try{if(!(await a.evaluatorExpressionEvaluation(u,e)).coerceEBV())return(0,r.bool)(!1);const f=(await a.evaluatorExpressionEvaluation(c,e)).coerceEBV();return(0,r.bool)(f)}catch(s){if((await a.evaluatorExpressionEvaluation(c,e)).coerceEBV())throw s;return(0,r.bool)(!1)}}})}};return Jd.ExpressionFunctionLogicalAnd=o,Jd}var GF;function W8(){if(GF)return $d;GF=1,Object.defineProperty($d,"__esModule",{value:!0}),$d.ActorFunctionFactoryExpressionLogicalAnd=void 0;const i=k(),r=W(),o=Y8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.LOGICAL_AND],termFunction:!1})}async run(e){return new o.ExpressionFunctionLogicalAnd}};return $d.ActorFunctionFactoryExpressionLogicalAnd=n,$d}var XF;function Z8(){return XF||(XF=1,(function(i){var r=na&&na.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=na&&na.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(W8(),i)})(na)),na}var ia={},Kd={},Yd={},zF;function k8(){if(zF)return Yd;zF=1,Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.ExpressionFunctionLogicalOr=void 0;const i=k(),r=W();let o=class extends i.ExpressionFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.LOGICAL_OR,apply:async({args:t,mapping:e,exprEval:a})=>{const[u,c]=t;try{if((await a.evaluatorExpressionEvaluation(u,e)).coerceEBV())return(0,r.bool)(!0);const f=(await a.evaluatorExpressionEvaluation(c,e)).coerceEBV();return(0,r.bool)(f)}catch(s){if(!(await a.evaluatorExpressionEvaluation(c,e)).coerceEBV())throw s;return(0,r.bool)(!0)}}})}};return Yd.ExpressionFunctionLogicalOr=o,Yd}var HF;function eB(){if(HF)return Kd;HF=1,Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.ActorFunctionFactoryExpressionLogicalOr=void 0;const i=k(),r=W(),o=k8();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.LOGICAL_OR],termFunction:!1})}async run(e){return new o.ExpressionFunctionLogicalOr}};return Kd.ActorFunctionFactoryExpressionLogicalOr=n,Kd}var $F;function tB(){return $F||($F=1,(function(i){var r=ia&&ia.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ia&&ia.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(eB(),i)})(ia)),ia}var aa={},Wd={},Zd={},JF;function rB(){if(JF)return Zd;JF=1,Object.defineProperty(Zd,"__esModule",{value:!0}),Zd.ExpressionFunctionSameTerm=void 0;const i=k(),r=Fe(),o=W();let n=class extends i.ExpressionFunctionBase{constructor(){super({arity:2,operator:o.SparqlOperator.SAME_TERM,apply:async({args:e,mapping:a,exprEval:u})=>{const c=u.context.getSafe(r.KeysInitQuery.dataFactory),[s,l]=e.map(h=>u.evaluatorExpressionEvaluation(h,a)),[d,f]=await Promise.all([s,l]);return(0,o.bool)(d.toRDF(c).equals(f.toRDF(c)))}})}};return Zd.ExpressionFunctionSameTerm=n,Zd}var KF;function nB(){if(KF)return Wd;KF=1,Object.defineProperty(Wd,"__esModule",{value:!0}),Wd.ActorFunctionFactoryExpressionSameTerm=void 0;const i=k(),r=W(),o=rB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.SAME_TERM],termFunction:!1})}async run(e){return new o.ExpressionFunctionSameTerm}};return Wd.ActorFunctionFactoryExpressionSameTerm=n,Wd}var YF;function iB(){return YF||(YF=1,(function(i){var r=aa&&aa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=aa&&aa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(nB(),i)})(aa)),aa}var oa={},kd={},ef={},WF;function aB(){if(WF)return ef;WF=1,Object.defineProperty(ef,"__esModule",{value:!0}),ef.TermFunctionAbs=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.ABS,overloads:(0,r.declare)(r.SparqlOperator.ABS).numericConverter(()=>t=>Math.abs(t)).collect()})}};return ef.TermFunctionAbs=o,ef}var ZF;function oB(){if(ZF)return kd;ZF=1,Object.defineProperty(kd,"__esModule",{value:!0}),kd.ActorFunctionFactoryTermAbs=void 0;const i=k(),r=W(),o=aB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.ABS],termFunction:!0})}async run(e){return new o.TermFunctionAbs}};return kd.ActorFunctionFactoryTermAbs=n,kd}var kF;function uB(){return kF||(kF=1,(function(i){var r=oa&&oa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=oa&&oa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(oB(),i)})(oa)),oa}var ua={},tf={},rf={},Ag={exports:{}},sB=Ag.exports,eA;function kg(){return eA||(eA=1,(function(i){(function(r){var o,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,t=Math.ceil,e=Math.floor,a="[BigNumber Error] ",u=a+"Number primitive has more than 15 significant digits: ",c=1e14,s=14,l=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,h=1e9;function p(E){var U,K,_,O=oe.prototype={constructor:oe,toString:null,valueOf:null},P=new oe(1),R=20,I=4,C=-7,Y=21,H=-1e7,Z=1e7,le=!1,ce=1,ee=0,Ae={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Ee="0123456789abcdefghijklmnopqrstuvwxyz",ue=!0;function oe(N,m){var A,g,w,D,B,q,Q,$,X=this;if(!(X instanceof oe))return new oe(N,m);if(m==null){if(N&&N._isBigNumber===!0){X.s=N.s,!N.c||N.e>Z?X.c=X.e=null:N.e<H?X.c=[X.e=0]:(X.e=N.e,X.c=N.c.slice());return}if((q=typeof N=="number")&&N*0==0){if(X.s=1/N<0?(N=-N,-1):1,N===~~N){for(D=0,B=N;B>=10;B/=10,D++);D>Z?X.c=X.e=null:(X.e=D,X.c=[N]);return}$=String(N)}else{if(!n.test($=String(N)))return _(X,$,q);X.s=$.charCodeAt(0)==45?($=$.slice(1),-1):1}(D=$.indexOf("."))>-1&&($=$.replace(".","")),(B=$.search(/e/i))>0?(D<0&&(D=B),D+=+$.slice(B+1),$=$.substring(0,B)):D<0&&(D=$.length)}else{if(F(m,2,Ee.length,"Base"),m==10&&ue)return X=new oe(N),we(X,R+X.e+1,I);if($=String(N),q=typeof N=="number"){if(N*0!=0)return _(X,$,q,m);if(X.s=1/N<0?($=$.slice(1),-1):1,oe.DEBUG&&$.replace(/^0\.0*|\./,"").length>15)throw Error(u+N)}else X.s=$.charCodeAt(0)===45?($=$.slice(1),-1):1;for(A=Ee.slice(0,m),D=B=0,Q=$.length;B<Q;B++)if(A.indexOf(g=$.charAt(B))<0){if(g=="."){if(B>D){D=Q;continue}}else if(!w&&($==$.toUpperCase()&&($=$.toLowerCase())||$==$.toLowerCase()&&($=$.toUpperCase()))){w=!0,B=-1,D=0;continue}return _(X,String(N),q,m)}q=!1,$=K($,m,10,X.s),(D=$.indexOf("."))>-1?$=$.replace(".",""):D=$.length}for(B=0;$.charCodeAt(B)===48;B++);for(Q=$.length;$.charCodeAt(--Q)===48;);if($=$.slice(B,++Q)){if(Q-=B,q&&oe.DEBUG&&Q>15&&(N>l||N!==e(N)))throw Error(u+X.s*N);if((D=D-B-1)>Z)X.c=X.e=null;else if(D<H)X.c=[X.e=0];else{if(X.e=D,X.c=[],B=(D+1)%s,D<0&&(B+=s),B<Q){for(B&&X.c.push(+$.slice(0,B)),Q-=s;B<Q;)X.c.push(+$.slice(B,B+=s));B=s-($=$.slice(B)).length}else B-=Q;for(;B--;$+="0");X.c.push(+$)}}else X.c=[X.e=0]}oe.clone=p,oe.ROUND_UP=0,oe.ROUND_DOWN=1,oe.ROUND_CEIL=2,oe.ROUND_FLOOR=3,oe.ROUND_HALF_UP=4,oe.ROUND_HALF_DOWN=5,oe.ROUND_HALF_EVEN=6,oe.ROUND_HALF_CEIL=7,oe.ROUND_HALF_FLOOR=8,oe.EUCLID=9,oe.config=oe.set=function(N){var m,A;if(N!=null)if(typeof N=="object"){if(N.hasOwnProperty(m="DECIMAL_PLACES")&&(A=N[m],F(A,0,h,m),R=A),N.hasOwnProperty(m="ROUNDING_MODE")&&(A=N[m],F(A,0,8,m),I=A),N.hasOwnProperty(m="EXPONENTIAL_AT")&&(A=N[m],A&&A.pop?(F(A[0],-h,0,m),F(A[1],0,h,m),C=A[0],Y=A[1]):(F(A,-h,h,m),C=-(Y=A<0?-A:A))),N.hasOwnProperty(m="RANGE"))if(A=N[m],A&&A.pop)F(A[0],-h,-1,m),F(A[1],1,h,m),H=A[0],Z=A[1];else if(F(A,-h,h,m),A)H=-(Z=A<0?-A:A);else throw Error(a+m+" cannot be zero: "+A);if(N.hasOwnProperty(m="CRYPTO"))if(A=N[m],A===!!A)if(A)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))le=A;else throw le=!A,Error(a+"crypto unavailable");else le=A;else throw Error(a+m+" not true or false: "+A);if(N.hasOwnProperty(m="MODULO_MODE")&&(A=N[m],F(A,0,9,m),ce=A),N.hasOwnProperty(m="POW_PRECISION")&&(A=N[m],F(A,0,h,m),ee=A),N.hasOwnProperty(m="FORMAT"))if(A=N[m],typeof A=="object")Ae=A;else throw Error(a+m+" not an object: "+A);if(N.hasOwnProperty(m="ALPHABET"))if(A=N[m],typeof A=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(A))ue=A.slice(0,10)=="0123456789",Ee=A;else throw Error(a+m+" invalid: "+A)}else throw Error(a+"Object expected: "+N);return{DECIMAL_PLACES:R,ROUNDING_MODE:I,EXPONENTIAL_AT:[C,Y],RANGE:[H,Z],CRYPTO:le,MODULO_MODE:ce,POW_PRECISION:ee,FORMAT:Ae,ALPHABET:Ee}},oe.isBigNumber=function(N){if(!N||N._isBigNumber!==!0)return!1;if(!oe.DEBUG)return!0;var m,A,g=N.c,w=N.e,D=N.s;e:if({}.toString.call(g)=="[object Array]"){if((D===1||D===-1)&&w>=-h&&w<=h&&w===e(w)){if(g[0]===0){if(w===0&&g.length===1)return!0;break e}if(m=(w+1)%s,m<1&&(m+=s),String(g[0]).length==m){for(m=0;m<g.length;m++)if(A=g[m],A<0||A>=c||A!==e(A))break e;if(A!==0)return!0}}}else if(g===null&&w===null&&(D===null||D===1||D===-1))return!0;throw Error(a+"Invalid BigNumber: "+N)},oe.maximum=oe.max=function(){return Se(arguments,-1)},oe.minimum=oe.min=function(){return Se(arguments,1)},oe.random=(function(){var N=9007199254740992,m=Math.random()*N&2097151?function(){return e(Math.random()*N)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(A){var g,w,D,B,q,Q=0,$=[],X=new oe(P);if(A==null?A=R:F(A,0,h),B=t(A/s),le)if(crypto.getRandomValues){for(g=crypto.getRandomValues(new Uint32Array(B*=2));Q<B;)q=g[Q]*131072+(g[Q+1]>>>11),q>=9e15?(w=crypto.getRandomValues(new Uint32Array(2)),g[Q]=w[0],g[Q+1]=w[1]):($.push(q%1e14),Q+=2);Q=B/2}else if(crypto.randomBytes){for(g=crypto.randomBytes(B*=7);Q<B;)q=(g[Q]&31)*281474976710656+g[Q+1]*1099511627776+g[Q+2]*4294967296+g[Q+3]*16777216+(g[Q+4]<<16)+(g[Q+5]<<8)+g[Q+6],q>=9e15?crypto.randomBytes(7).copy(g,Q):($.push(q%1e14),Q+=7);Q=B/7}else throw le=!1,Error(a+"crypto unavailable");if(!le)for(;Q<B;)q=m(),q<9e15&&($[Q++]=q%1e14);for(B=$[--Q],A%=s,B&&A&&(q=d[s-A],$[Q]=e(B/q)*q);$[Q]===0;$.pop(),Q--);if(Q<0)$=[D=0];else{for(D=-1;$[0]===0;$.splice(0,1),D-=s);for(Q=1,q=$[0];q>=10;q/=10,Q++);Q<s&&(D-=s-Q)}return X.e=D,X.c=$,X}})(),oe.sum=function(){for(var N=1,m=arguments,A=new oe(m[0]);N<m.length;)A=A.plus(m[N++]);return A},K=(function(){var N="0123456789";function m(A,g,w,D){for(var B,q=[0],Q,$=0,X=A.length;$<X;){for(Q=q.length;Q--;q[Q]*=g);for(q[0]+=D.indexOf(A.charAt($++)),B=0;B<q.length;B++)q[B]>w-1&&(q[B+1]==null&&(q[B+1]=0),q[B+1]+=q[B]/w|0,q[B]%=w)}return q.reverse()}return function(A,g,w,D,B){var q,Q,$,X,te,me,_e,ge,G=A.indexOf("."),z=R,J=I;for(G>=0&&(X=ee,ee=0,A=A.replace(".",""),ge=new oe(g),me=ge.pow(A.length-G),ee=X,ge.c=m(j(b(me.c),me.e,"0"),10,w,N),ge.e=ge.c.length),_e=m(A,g,w,B?(q=Ee,N):(q=N,Ee)),$=X=_e.length;_e[--X]==0;_e.pop());if(!_e[0])return q.charAt(0);if(G<0?--$:(me.c=_e,me.e=$,me.s=D,me=U(me,ge,z,J,w),_e=me.c,te=me.r,$=me.e),Q=$+z+1,G=_e[Q],X=w/2,te=te||Q<0||_e[Q+1]!=null,te=J<4?(G!=null||te)&&(J==0||J==(me.s<0?3:2)):G>X||G==X&&(J==4||te||J==6&&_e[Q-1]&1||J==(me.s<0?8:7)),Q<1||!_e[0])A=te?j(q.charAt(1),-z,q.charAt(0)):q.charAt(0);else{if(_e.length=Q,te)for(--w;++_e[--Q]>w;)_e[Q]=0,Q||(++$,_e=[1].concat(_e));for(X=_e.length;!_e[--X];);for(G=0,A="";G<=X;A+=q.charAt(_e[G++]));A=j(A,$,q.charAt(0))}return A}})(),U=(function(){function N(g,w,D){var B,q,Q,$,X=0,te=g.length,me=w%f,_e=w/f|0;for(g=g.slice();te--;)Q=g[te]%f,$=g[te]/f|0,B=_e*Q+$*me,q=me*Q+B%f*f+X,X=(q/D|0)+(B/f|0)+_e*$,g[te]=q%D;return X&&(g=[X].concat(g)),g}function m(g,w,D,B){var q,Q;if(D!=B)Q=D>B?1:-1;else for(q=Q=0;q<D;q++)if(g[q]!=w[q]){Q=g[q]>w[q]?1:-1;break}return Q}function A(g,w,D,B){for(var q=0;D--;)g[D]-=q,q=g[D]<w[D]?1:0,g[D]=q*B+g[D]-w[D];for(;!g[0]&&g.length>1;g.splice(0,1));}return function(g,w,D,B,q){var Q,$,X,te,me,_e,ge,G,z,J,ne,se,fe,Oe,Te,De,Le,je=g.s==w.s?1:-1,Je=g.c,Xe=w.c;if(!Je||!Je[0]||!Xe||!Xe[0])return new oe(!g.s||!w.s||(Je?Xe&&Je[0]==Xe[0]:!Xe)?NaN:Je&&Je[0]==0||!Xe?je*0:je/0);for(G=new oe(je),z=G.c=[],$=g.e-w.e,je=D+$+1,q||(q=c,$=y(g.e/s)-y(w.e/s),je=je/s|0),X=0;Xe[X]==(Je[X]||0);X++);if(Xe[X]>(Je[X]||0)&&$--,je<0)z.push(1),te=!0;else{for(Oe=Je.length,De=Xe.length,X=0,je+=2,me=e(q/(Xe[0]+1)),me>1&&(Xe=N(Xe,me,q),Je=N(Je,me,q),De=Xe.length,Oe=Je.length),fe=De,J=Je.slice(0,De),ne=J.length;ne<De;J[ne++]=0);Le=Xe.slice(),Le=[0].concat(Le),Te=Xe[0],Xe[1]>=q/2&&Te++;do{if(me=0,Q=m(Xe,J,De,ne),Q<0){if(se=J[0],De!=ne&&(se=se*q+(J[1]||0)),me=e(se/Te),me>1)for(me>=q&&(me=q-1),_e=N(Xe,me,q),ge=_e.length,ne=J.length;m(_e,J,ge,ne)==1;)me--,A(_e,De<ge?Le:Xe,ge,q),ge=_e.length,Q=1;else me==0&&(Q=me=1),_e=Xe.slice(),ge=_e.length;if(ge<ne&&(_e=[0].concat(_e)),A(J,_e,ne,q),ne=J.length,Q==-1)for(;m(Xe,J,De,ne)<1;)me++,A(J,De<ne?Le:Xe,ne,q),ne=J.length}else Q===0&&(me++,J=[0]);z[X++]=me,J[0]?J[ne++]=Je[fe]||0:(J=[Je[fe]],ne=1)}while((fe++<Oe||J[0]!=null)&&je--);te=J[0]!=null,z[0]||z.splice(0,1)}if(q==c){for(X=1,je=z[0];je>=10;je/=10,X++);we(G,D+(G.e=X+$*s-1)+1,B,te)}else G.e=$,G.r=+te;return G}})();function Re(N,m,A,g){var w,D,B,q,Q;if(A==null?A=I:F(A,0,8),!N.c)return N.toString();if(w=N.c[0],B=N.e,m==null)Q=b(N.c),Q=g==1||g==2&&(B<=C||B>=Y)?S(Q,B):j(Q,B,"0");else if(N=we(new oe(N),m,A),D=N.e,Q=b(N.c),q=Q.length,g==1||g==2&&(m<=D||D<=C)){for(;q<m;Q+="0",q++);Q=S(Q,D)}else if(m-=B+(g===2&&D>B),Q=j(Q,D,"0"),D+1>q){if(--m>0)for(Q+=".";m--;Q+="0");}else if(m+=D-q,m>0)for(D+1==q&&(Q+=".");m--;Q+="0");return N.s<0&&w?"-"+Q:Q}function Se(N,m){for(var A,g,w=1,D=new oe(N[0]);w<N.length;w++)g=new oe(N[w]),(!g.s||(A=v(D,g))===m||A===0&&D.s===m)&&(D=g);return D}function Pe(N,m,A){for(var g=1,w=m.length;!m[--w];m.pop());for(w=m[0];w>=10;w/=10,g++);return(A=g+A*s-1)>Z?N.c=N.e=null:A<H?N.c=[N.e=0]:(N.e=A,N.c=m),N}_=(function(){var N=/^(-?)0([xbo])(?=\w[\w.]*$)/i,m=/^([^.]+)\.$/,A=/^\.([^.]+)$/,g=/^-?(Infinity|NaN)$/,w=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(D,B,q,Q){var $,X=q?B:B.replace(w,"");if(g.test(X))D.s=isNaN(X)?null:X<0?-1:1;else{if(!q&&(X=X.replace(N,function(te,me,_e){return $=(_e=_e.toLowerCase())=="x"?16:_e=="b"?2:8,!Q||Q==$?me:te}),Q&&($=Q,X=X.replace(m,"$1").replace(A,"0.$1")),B!=X))return new oe(X,$);if(oe.DEBUG)throw Error(a+"Not a"+(Q?" base "+Q:"")+" number: "+B);D.s=null}D.c=D.e=null}})();function we(N,m,A,g){var w,D,B,q,Q,$,X,te=N.c,me=d;if(te){e:{for(w=1,q=te[0];q>=10;q/=10,w++);if(D=m-w,D<0)D+=s,B=m,Q=te[$=0],X=e(Q/me[w-B-1]%10);else if($=t((D+1)/s),$>=te.length)if(g){for(;te.length<=$;te.push(0));Q=X=0,w=1,D%=s,B=D-s+1}else break e;else{for(Q=q=te[$],w=1;q>=10;q/=10,w++);D%=s,B=D-s+w,X=B<0?0:e(Q/me[w-B-1]%10)}if(g=g||m<0||te[$+1]!=null||(B<0?Q:Q%me[w-B-1]),g=A<4?(X||g)&&(A==0||A==(N.s<0?3:2)):X>5||X==5&&(A==4||g||A==6&&(D>0?B>0?Q/me[w-B]:0:te[$-1])%10&1||A==(N.s<0?8:7)),m<1||!te[0])return te.length=0,g?(m-=N.e+1,te[0]=me[(s-m%s)%s],N.e=-m||0):te[0]=N.e=0,N;if(D==0?(te.length=$,q=1,$--):(te.length=$+1,q=me[s-D],te[$]=B>0?e(Q/me[w-B]%me[B])*q:0),g)for(;;)if($==0){for(D=1,B=te[0];B>=10;B/=10,D++);for(B=te[0]+=q,q=1;B>=10;B/=10,q++);D!=q&&(N.e++,te[0]==c&&(te[0]=1));break}else{if(te[$]+=q,te[$]!=c)break;te[$--]=0,q=1}for(D=te.length;te[--D]===0;te.pop());}N.e>Z?N.c=N.e=null:N.e<H&&(N.c=[N.e=0])}return N}function Ie(N){var m,A=N.e;return A===null?N.toString():(m=b(N.c),m=A<=C||A>=Y?S(m,A):j(m,A,"0"),N.s<0?"-"+m:m)}return O.absoluteValue=O.abs=function(){var N=new oe(this);return N.s<0&&(N.s=1),N},O.comparedTo=function(N,m){return v(this,new oe(N,m))},O.decimalPlaces=O.dp=function(N,m){var A,g,w,D=this;if(N!=null)return F(N,0,h),m==null?m=I:F(m,0,8),we(new oe(D),N+D.e+1,m);if(!(A=D.c))return null;if(g=((w=A.length-1)-y(this.e/s))*s,w=A[w])for(;w%10==0;w/=10,g--);return g<0&&(g=0),g},O.dividedBy=O.div=function(N,m){return U(this,new oe(N,m),R,I)},O.dividedToIntegerBy=O.idiv=function(N,m){return U(this,new oe(N,m),0,1)},O.exponentiatedBy=O.pow=function(N,m){var A,g,w,D,B,q,Q,$,X,te=this;if(N=new oe(N),N.c&&!N.isInteger())throw Error(a+"Exponent not an integer: "+Ie(N));if(m!=null&&(m=new oe(m)),q=N.e>14,!te.c||!te.c[0]||te.c[0]==1&&!te.e&&te.c.length==1||!N.c||!N.c[0])return X=new oe(Math.pow(+Ie(te),q?N.s*(2-T(N)):+Ie(N))),m?X.mod(m):X;if(Q=N.s<0,m){if(m.c?!m.c[0]:!m.s)return new oe(NaN);g=!Q&&te.isInteger()&&m.isInteger(),g&&(te=te.mod(m))}else{if(N.e>9&&(te.e>0||te.e<-1||(te.e==0?te.c[0]>1||q&&te.c[1]>=24e7:te.c[0]<8e13||q&&te.c[0]<=9999975e7)))return D=te.s<0&&T(N)?-0:0,te.e>-1&&(D=1/D),new oe(Q?1/D:D);ee&&(D=t(ee/s+2))}for(q?(A=new oe(.5),Q&&(N.s=1),$=T(N)):(w=Math.abs(+Ie(N)),$=w%2),X=new oe(P);;){if($){if(X=X.times(te),!X.c)break;D?X.c.length>D&&(X.c.length=D):g&&(X=X.mod(m))}if(w){if(w=e(w/2),w===0)break;$=w%2}else if(N=N.times(A),we(N,N.e+1,1),N.e>14)$=T(N);else{if(w=+Ie(N),w===0)break;$=w%2}te=te.times(te),D?te.c&&te.c.length>D&&(te.c.length=D):g&&(te=te.mod(m))}return g?X:(Q&&(X=P.div(X)),m?X.mod(m):D?we(X,ee,I,B):X)},O.integerValue=function(N){var m=new oe(this);return N==null?N=I:F(N,0,8),we(m,m.e+1,N)},O.isEqualTo=O.eq=function(N,m){return v(this,new oe(N,m))===0},O.isFinite=function(){return!!this.c},O.isGreaterThan=O.gt=function(N,m){return v(this,new oe(N,m))>0},O.isGreaterThanOrEqualTo=O.gte=function(N,m){return(m=v(this,new oe(N,m)))===1||m===0},O.isInteger=function(){return!!this.c&&y(this.e/s)>this.c.length-2},O.isLessThan=O.lt=function(N,m){return v(this,new oe(N,m))<0},O.isLessThanOrEqualTo=O.lte=function(N,m){return(m=v(this,new oe(N,m)))===-1||m===0},O.isNaN=function(){return!this.s},O.isNegative=function(){return this.s<0},O.isPositive=function(){return this.s>0},O.isZero=function(){return!!this.c&&this.c[0]==0},O.minus=function(N,m){var A,g,w,D,B=this,q=B.s;if(N=new oe(N,m),m=N.s,!q||!m)return new oe(NaN);if(q!=m)return N.s=-m,B.plus(N);var Q=B.e/s,$=N.e/s,X=B.c,te=N.c;if(!Q||!$){if(!X||!te)return X?(N.s=-m,N):new oe(te?B:NaN);if(!X[0]||!te[0])return te[0]?(N.s=-m,N):new oe(X[0]?B:I==3?-0:0)}if(Q=y(Q),$=y($),X=X.slice(),q=Q-$){for((D=q<0)?(q=-q,w=X):($=Q,w=te),w.reverse(),m=q;m--;w.push(0));w.reverse()}else for(g=(D=(q=X.length)<(m=te.length))?q:m,q=m=0;m<g;m++)if(X[m]!=te[m]){D=X[m]<te[m];break}if(D&&(w=X,X=te,te=w,N.s=-N.s),m=(g=te.length)-(A=X.length),m>0)for(;m--;X[A++]=0);for(m=c-1;g>q;){if(X[--g]<te[g]){for(A=g;A&&!X[--A];X[A]=m);--X[A],X[g]+=c}X[g]-=te[g]}for(;X[0]==0;X.splice(0,1),--$);return X[0]?Pe(N,X,$):(N.s=I==3?-1:1,N.c=[N.e=0],N)},O.modulo=O.mod=function(N,m){var A,g,w=this;return N=new oe(N,m),!w.c||!N.s||N.c&&!N.c[0]?new oe(NaN):!N.c||w.c&&!w.c[0]?new oe(w):(ce==9?(g=N.s,N.s=1,A=U(w,N,0,3),N.s=g,A.s*=g):A=U(w,N,0,ce),N=w.minus(A.times(N)),!N.c[0]&&ce==1&&(N.s=w.s),N)},O.multipliedBy=O.times=function(N,m){var A,g,w,D,B,q,Q,$,X,te,me,_e,ge,G,z,J=this,ne=J.c,se=(N=new oe(N,m)).c;if(!ne||!se||!ne[0]||!se[0])return!J.s||!N.s||ne&&!ne[0]&&!se||se&&!se[0]&&!ne?N.c=N.e=N.s=null:(N.s*=J.s,!ne||!se?N.c=N.e=null:(N.c=[0],N.e=0)),N;for(g=y(J.e/s)+y(N.e/s),N.s*=J.s,Q=ne.length,te=se.length,Q<te&&(ge=ne,ne=se,se=ge,w=Q,Q=te,te=w),w=Q+te,ge=[];w--;ge.push(0));for(G=c,z=f,w=te;--w>=0;){for(A=0,me=se[w]%z,_e=se[w]/z|0,B=Q,D=w+B;D>w;)$=ne[--B]%z,X=ne[B]/z|0,q=_e*$+X*me,$=me*$+q%z*z+ge[D]+A,A=($/G|0)+(q/z|0)+_e*X,ge[D--]=$%G;ge[D]=A}return A?++g:ge.splice(0,1),Pe(N,ge,g)},O.negated=function(){var N=new oe(this);return N.s=-N.s||null,N},O.plus=function(N,m){var A,g=this,w=g.s;if(N=new oe(N,m),m=N.s,!w||!m)return new oe(NaN);if(w!=m)return N.s=-m,g.minus(N);var D=g.e/s,B=N.e/s,q=g.c,Q=N.c;if(!D||!B){if(!q||!Q)return new oe(w/0);if(!q[0]||!Q[0])return Q[0]?N:new oe(q[0]?g:w*0)}if(D=y(D),B=y(B),q=q.slice(),w=D-B){for(w>0?(B=D,A=Q):(w=-w,A=q),A.reverse();w--;A.push(0));A.reverse()}for(w=q.length,m=Q.length,w-m<0&&(A=Q,Q=q,q=A,m=w),w=0;m;)w=(q[--m]=q[m]+Q[m]+w)/c|0,q[m]=c===q[m]?0:q[m]%c;return w&&(q=[w].concat(q),++B),Pe(N,q,B)},O.precision=O.sd=function(N,m){var A,g,w,D=this;if(N!=null&&N!==!!N)return F(N,1,h),m==null?m=I:F(m,0,8),we(new oe(D),N,m);if(!(A=D.c))return null;if(w=A.length-1,g=w*s+1,w=A[w]){for(;w%10==0;w/=10,g--);for(w=A[0];w>=10;w/=10,g++);}return N&&D.e+1>g&&(g=D.e+1),g},O.shiftedBy=function(N){return F(N,-l,l),this.times("1e"+N)},O.squareRoot=O.sqrt=function(){var N,m,A,g,w,D=this,B=D.c,q=D.s,Q=D.e,$=R+4,X=new oe("0.5");if(q!==1||!B||!B[0])return new oe(!q||q<0&&(!B||B[0])?NaN:B?D:1/0);if(q=Math.sqrt(+Ie(D)),q==0||q==1/0?(m=b(B),(m.length+Q)%2==0&&(m+="0"),q=Math.sqrt(+m),Q=y((Q+1)/2)-(Q<0||Q%2),q==1/0?m="5e"+Q:(m=q.toExponential(),m=m.slice(0,m.indexOf("e")+1)+Q),A=new oe(m)):A=new oe(q+""),A.c[0]){for(Q=A.e,q=Q+$,q<3&&(q=0);;)if(w=A,A=X.times(w.plus(U(D,w,$,1))),b(w.c).slice(0,q)===(m=b(A.c)).slice(0,q))if(A.e<Q&&--q,m=m.slice(q-3,q+1),m=="9999"||!g&&m=="4999"){if(!g&&(we(w,w.e+R+2,0),w.times(w).eq(D))){A=w;break}$+=4,q+=4,g=1}else{(!+m||!+m.slice(1)&&m.charAt(0)=="5")&&(we(A,A.e+R+2,1),N=!A.times(A).eq(D));break}}return we(A,A.e+R+1,I,N)},O.toExponential=function(N,m){return N!=null&&(F(N,0,h),N++),Re(this,N,m,1)},O.toFixed=function(N,m){return N!=null&&(F(N,0,h),N=N+this.e+1),Re(this,N,m)},O.toFormat=function(N,m,A){var g,w=this;if(A==null)N!=null&&m&&typeof m=="object"?(A=m,m=null):N&&typeof N=="object"?(A=N,N=m=null):A=Ae;else if(typeof A!="object")throw Error(a+"Argument not an object: "+A);if(g=w.toFixed(N,m),w.c){var D,B=g.split("."),q=+A.groupSize,Q=+A.secondaryGroupSize,$=A.groupSeparator||"",X=B[0],te=B[1],me=w.s<0,_e=me?X.slice(1):X,ge=_e.length;if(Q&&(D=q,q=Q,Q=D,ge-=D),q>0&&ge>0){for(D=ge%q||q,X=_e.substr(0,D);D<ge;D+=q)X+=$+_e.substr(D,q);Q>0&&(X+=$+_e.slice(D)),me&&(X="-"+X)}g=te?X+(A.decimalSeparator||"")+((Q=+A.fractionGroupSize)?te.replace(new RegExp("\\d{"+Q+"}\\B","g"),"$&"+(A.fractionGroupSeparator||"")):te):X}return(A.prefix||"")+g+(A.suffix||"")},O.toFraction=function(N){var m,A,g,w,D,B,q,Q,$,X,te,me,_e=this,ge=_e.c;if(N!=null&&(q=new oe(N),!q.isInteger()&&(q.c||q.s!==1)||q.lt(P)))throw Error(a+"Argument "+(q.isInteger()?"out of range: ":"not an integer: ")+Ie(q));if(!ge)return new oe(_e);for(m=new oe(P),$=A=new oe(P),g=Q=new oe(P),me=b(ge),D=m.e=me.length-_e.e-1,m.c[0]=d[(B=D%s)<0?s+B:B],N=!N||q.comparedTo(m)>0?D>0?m:$:q,B=Z,Z=1/0,q=new oe(me),Q.c[0]=0;X=U(q,m,0,1),w=A.plus(X.times(g)),w.comparedTo(N)!=1;)A=g,g=w,$=Q.plus(X.times(w=$)),Q=w,m=q.minus(X.times(w=m)),q=w;return w=U(N.minus(A),g,0,1),Q=Q.plus(w.times($)),A=A.plus(w.times(g)),Q.s=$.s=_e.s,D=D*2,te=U($,g,D,I).minus(_e).abs().comparedTo(U(Q,A,D,I).minus(_e).abs())<1?[$,g]:[Q,A],Z=B,te},O.toNumber=function(){return+Ie(this)},O.toPrecision=function(N,m){return N!=null&&F(N,1,h),Re(this,N,m,2)},O.toString=function(N){var m,A=this,g=A.s,w=A.e;return w===null?g?(m="Infinity",g<0&&(m="-"+m)):m="NaN":(N==null?m=w<=C||w>=Y?S(b(A.c),w):j(b(A.c),w,"0"):N===10&&ue?(A=we(new oe(A),R+w+1,I),m=j(b(A.c),A.e,"0")):(F(N,2,Ee.length,"Base"),m=K(j(b(A.c),w,"0"),10,N,g,!0)),g<0&&A.c[0]&&(m="-"+m)),m},O.valueOf=O.toJSON=function(){return Ie(this)},O._isBigNumber=!0,E!=null&&oe.set(E),oe}function y(E){var U=E|0;return E>0||E===U?U:U-1}function b(E){for(var U,K,_=1,O=E.length,P=E[0]+"";_<O;){for(U=E[_++]+"",K=s-U.length;K--;U="0"+U);P+=U}for(O=P.length;P.charCodeAt(--O)===48;);return P.slice(0,O+1||1)}function v(E,U){var K,_,O=E.c,P=U.c,R=E.s,I=U.s,C=E.e,Y=U.e;if(!R||!I)return null;if(K=O&&!O[0],_=P&&!P[0],K||_)return K?_?0:-I:R;if(R!=I)return R;if(K=R<0,_=C==Y,!O||!P)return _?0:!O^K?1:-1;if(!_)return C>Y^K?1:-1;for(I=(C=O.length)<(Y=P.length)?C:Y,R=0;R<I;R++)if(O[R]!=P[R])return O[R]>P[R]^K?1:-1;return C==Y?0:C>Y^K?1:-1}function F(E,U,K,_){if(E<U||E>K||E!==e(E))throw Error(a+(_||"Argument")+(typeof E=="number"?E<U||E>K?" out of range: ":" not an integer: ":" not a primitive number: ")+String(E))}function T(E){var U=E.c.length-1;return y(E.e/s)==U&&E.c[U]%2!=0}function S(E,U){return(E.length>1?E.charAt(0)+"."+E.slice(1):E)+(U<0?"e":"e+")+U}function j(E,U,K){var _,O;if(U<0){for(O=K+".";++U;O+=K);E=O+E}else if(_=E.length,++U>_){for(O=K,U-=_;--U;O+=K);E+=O}else U<_&&(E=E.slice(0,U)+"."+E.slice(U));return E}o=p(),o.default=o.BigNumber=o,i.exports?i.exports=o:(r||(r=typeof self<"u"&&self?self:window),r.BigNumber=o)})(sB)})(Ag)),Ag.exports}var tA;function cB(){if(tA)return rf;tA=1,Object.defineProperty(rf,"__esModule",{value:!0}),rf.TermFunctionAddition=void 0;const i=k(),r=W(),o=kg();let n=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.ADDITION,overloads:(0,r.declare)(r.SparqlOperator.ADDITION).arithmetic(()=>(e,a)=>new o.BigNumber(e).plus(a).toNumber()).set([r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,a])=>new r.DateTimeLiteral((0,r.addDurationToDateTime)(e.typedValue,(0,r.defaultedDurationRepresentation)(a.typedValue)))).copy({from:[r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_DAY_TIME_DURATION],to:[r.TypeURL.XSD_DATE_TIME,r.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([r.TypeURL.XSD_DATE,r.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,a])=>new r.DateLiteral((0,r.addDurationToDateTime)((0,r.defaultedDateTimeRepresentation)(e.typedValue),(0,r.defaultedDurationRepresentation)(a.typedValue)))).copy({from:[r.TypeURL.XSD_DATE,r.TypeURL.XSD_DAY_TIME_DURATION],to:[r.TypeURL.XSD_DATE,r.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([r.TypeURL.XSD_TIME,r.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,a])=>new r.TimeLiteral((0,r.addDurationToDateTime)((0,r.defaultedDateTimeRepresentation)(e.typedValue),(0,r.defaultedDurationRepresentation)(a.typedValue)))).copy({from:[r.TypeURL.XSD_TIME,r.TypeURL.XSD_DAY_TIME_DURATION],to:[r.TypeURL.XSD_TIME,r.TypeURL.XSD_YEAR_MONTH_DURATION]}).collect()})}};return rf.TermFunctionAddition=n,rf}var rA;function lB(){if(rA)return tf;rA=1,Object.defineProperty(tf,"__esModule",{value:!0}),tf.ActorFunctionFactoryTermAddition=void 0;const i=k(),r=W(),o=cB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.ADDITION],termFunction:!0})}async run(e){return new o.TermFunctionAddition}};return tf.ActorFunctionFactoryTermAddition=n,tf}var nA;function dB(){return nA||(nA=1,(function(i){var r=ua&&ua.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ua&&ua.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(lB(),i)})(ua)),ua}var sa={},nf={},af={},iA;function fB(){if(iA)return af;iA=1,Object.defineProperty(af,"__esModule",{value:!0}),af.TermFunctionCeil=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.CEIL,overloads:(0,r.declare)(r.SparqlOperator.CEIL).numericConverter(()=>t=>Math.ceil(t)).collect()})}};return af.TermFunctionCeil=o,af}var aA;function pB(){if(aA)return nf;aA=1,Object.defineProperty(nf,"__esModule",{value:!0}),nf.ActorFunctionFactoryTermCeil=void 0;const i=k(),r=W(),o=fB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.CEIL],termFunction:!0})}async run(e){return new o.TermFunctionCeil}};return nf.ActorFunctionFactoryTermCeil=n,nf}var oA;function hB(){return oA||(oA=1,(function(i){var r=sa&&sa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=sa&&sa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(pB(),i)})(sa)),sa}var ca={},of={},uf={},uA;function yB(){if(uA)return uf;uA=1,Object.defineProperty(uf,"__esModule",{value:!0}),uf.TermFunctionContains=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.CONTAINS,overloads:(0,r.declare)(r.SparqlOperator.CONTAINS).onBinaryTyped([r.TypeAlias.SPARQL_STRINGLY,r.TypeURL.XSD_STRING],()=>(t,e)=>(0,r.bool)(t.includes(e))).onBinary([r.TypeURL.RDF_LANG_STRING,r.TypeURL.RDF_LANG_STRING],()=>(t,e)=>{if(t.language!==e.language)throw new r.IncompatibleLanguageOperation(t,e);return(0,r.bool)(t.typedValue.includes(e.typedValue))}).collect()})}};return uf.TermFunctionContains=o,uf}var sA;function _B(){if(sA)return of;sA=1,Object.defineProperty(of,"__esModule",{value:!0}),of.ActorFunctionFactoryTermContains=void 0;const i=k(),r=W(),o=yB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.CONTAINS],termFunction:!0})}async run(e){return new o.TermFunctionContains}};return of.ActorFunctionFactoryTermContains=n,of}var cA;function mB(){return cA||(cA=1,(function(i){var r=ca&&ca.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ca&&ca.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(_B(),i)})(ca)),ca}var la={},sf={},cf={},lA;function gB(){if(lA)return cf;lA=1,Object.defineProperty(cf,"__esModule",{value:!0}),cf.TermFunctionDatatype=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.DATATYPE,overloads:(0,r.declare)(r.SparqlOperator.DATATYPE).onLiteral1(()=>t=>new r.NamedNode(t.dataType)).collect()})}};return cf.TermFunctionDatatype=o,cf}var dA;function bB(){if(dA)return sf;dA=1,Object.defineProperty(sf,"__esModule",{value:!0}),sf.ActorFunctionFactoryTermDatatype=void 0;const i=k(),r=W(),o=gB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.DATATYPE],termFunction:!0})}async run(e){return new o.TermFunctionDatatype}};return sf.ActorFunctionFactoryTermDatatype=n,sf}var fA;function vB(){return fA||(fA=1,(function(i){var r=la&&la.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=la&&la.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(bB(),i)})(la)),la}var da={},lf={},df={},pA;function TB(){if(pA)return df;pA=1,Object.defineProperty(df,"__esModule",{value:!0}),df.TermFunctionDay=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.DAY,overloads:(0,r.declare)(r.SparqlOperator.DAY).onDateTime1(()=>t=>(0,r.integer)(t.typedValue.day)).set([r.TypeURL.XSD_DATE],()=>([t])=>(0,r.integer)(t.typedValue.day)).collect()})}};return df.TermFunctionDay=o,df}var hA;function OB(){if(hA)return lf;hA=1,Object.defineProperty(lf,"__esModule",{value:!0}),lf.ActorFunctionFactoryTermDay=void 0;const i=k(),r=W(),o=TB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.DAY],termFunction:!0})}async run(e){return new o.TermFunctionDay}};return lf.ActorFunctionFactoryTermDay=n,lf}var yA;function SB(){return yA||(yA=1,(function(i){var r=da&&da.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=da&&da.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(OB(),i)})(da)),da}var fa={},ff={},pf={},_A;function FB(){if(_A)return pf;_A=1,Object.defineProperty(pf,"__esModule",{value:!0}),pf.TermFunctionEncodeForUri=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.ENCODE_FOR_URI,overloads:(0,r.declare)(r.SparqlOperator.ENCODE_FOR_URI).onStringly1Typed(()=>t=>(0,r.string)(encodeURI(t))).collect()})}};return pf.TermFunctionEncodeForUri=o,pf}var mA;function AB(){if(mA)return ff;mA=1,Object.defineProperty(ff,"__esModule",{value:!0}),ff.ActorFunctionFactoryTermEncodeForUri=void 0;const i=k(),r=W(),o=FB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.ENCODE_FOR_URI],termFunction:!0})}async run(e){return new o.TermFunctionEncodeForUri}};return ff.ActorFunctionFactoryTermEncodeForUri=n,ff}var gA;function wB(){return gA||(gA=1,(function(i){var r=fa&&fa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=fa&&fa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(AB(),i)})(fa)),fa}var pa={},hf={},yf={},bA;function EB(){if(bA)return yf;bA=1,Object.defineProperty(yf,"__esModule",{value:!0}),yf.TermFunctionDivision=void 0;const i=k(),r=W(),o=kg();let n=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.DIVISION,overloads:(0,r.declare)(r.SparqlOperator.DIVISION).arithmetic(()=>(e,a)=>new o.BigNumber(e).div(a).toNumber()).onBinaryTyped([r.TypeURL.XSD_INTEGER,r.TypeURL.XSD_INTEGER],()=>(e,a)=>{if(a===0)throw new r.ExpressionError("Integer division by 0");return(0,r.decimal)(new o.BigNumber(e).div(a).toNumber())}).collect()})}};return yf.TermFunctionDivision=n,yf}var vA;function jB(){if(vA)return hf;vA=1,Object.defineProperty(hf,"__esModule",{value:!0}),hf.ActorFunctionFactoryTermDivision=void 0;const i=k(),r=W(),o=EB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.DIVISION],termFunction:!0})}async run(e){return new o.TermFunctionDivision}};return hf.ActorFunctionFactoryTermDivision=n,hf}var TA;function RB(){return TA||(TA=1,(function(i){var r=pa&&pa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=pa&&pa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(jB(),i)})(pa)),pa}var ha={},_f={},mf={},OA;function DB(){if(OA)return mf;OA=1,Object.defineProperty(mf,"__esModule",{value:!0}),mf.TermFunctionEquality=void 0;const i=k(),r=Fe(),o=W();let n=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:o.SparqlOperator.EQUAL,overloads:(0,o.declare)(o.SparqlOperator.EQUAL).numberTest(()=>(e,a)=>e===a).stringTest(()=>(e,a)=>e.localeCompare(a)===0).set([o.TypeURL.RDF_LANG_STRING,o.TypeURL.RDF_LANG_STRING],()=>([e,a])=>(0,o.bool)(e.str()===a.str()&&e.language===a.language)).set([o.TypeAlias.SPARQL_STRINGLY,o.TypeAlias.SPARQL_STRINGLY],()=>()=>(0,o.bool)(!1)).booleanTest(()=>(e,a)=>e===a).dateTimeTest(e=>(a,u)=>(0,o.toUTCDate)(a,e.context.getSafe(r.KeysExpressionEvaluator.defaultTimeZone)).getTime()===(0,o.toUTCDate)(u,e.context.getSafe(r.KeysExpressionEvaluator.defaultTimeZone)).getTime()).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],to:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_DATE]}).set(["quad","quad"],e=>([a,u])=>(0,o.bool)(this.applyOnTerms([a.subject,u.subject],e).coerceEBV()&&this.applyOnTerms([a.predicate,u.predicate],e).coerceEBV()&&this.applyOnTerms([a.object,u.object],e).coerceEBV()&&this.applyOnTerms([a.graph,u.graph],e).coerceEBV()),!1).set(["term","term"],e=>([a,u])=>{const c=a.toRDF(e.context.getSafe(r.KeysInitQuery.dataFactory)),s=u.toRDF(e.context.getSafe(r.KeysInitQuery.dataFactory)),l=c.equals(s);if(!l&&c.termType==="Literal"&&s.termType==="Literal")throw new o.RDFEqualTypeError([a,u]);return(0,o.bool)(l)},!1).set([o.TypeURL.XSD_DURATION,o.TypeURL.XSD_DURATION],()=>([e,a])=>(0,o.bool)((0,o.yearMonthDurationsToMonths)((0,o.defaultedYearMonthDurationRepresentation)(e.typedValue))===(0,o.yearMonthDurationsToMonths)((0,o.defaultedYearMonthDurationRepresentation)(a.typedValue))&&(0,o.dayTimeDurationsToSeconds)((0,o.defaultedDayTimeDurationRepresentation)(e.typedValue))===(0,o.dayTimeDurationsToSeconds)((0,o.defaultedDayTimeDurationRepresentation)(a.typedValue)))).set([o.TypeURL.XSD_TIME,o.TypeURL.XSD_TIME],e=>([a,u])=>(0,o.bool)((0,o.toUTCDate)((0,o.defaultedDateTimeRepresentation)(a.typedValue),e.context.getSafe(r.KeysExpressionEvaluator.defaultTimeZone)).getTime()===(0,o.toUTCDate)((0,o.defaultedDateTimeRepresentation)(u.typedValue),e.context.getSafe(r.KeysExpressionEvaluator.defaultTimeZone)).getTime())).collect()})}};return mf.TermFunctionEquality=n,mf}var SA;function PB(){if(SA)return _f;SA=1,Object.defineProperty(_f,"__esModule",{value:!0}),_f.ActorFunctionFactoryTermEquality=void 0;const i=k(),r=W(),o=DB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.EQUAL],termFunction:!0})}async run(e){return new o.TermFunctionEquality}};return _f.ActorFunctionFactoryTermEquality=n,_f}var FA;function MB(){return FA||(FA=1,(function(i){var r=ha&&ha.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ha&&ha.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(PB(),i)})(ha)),ha}var ya={},gf={},bf={},AA;function NB(){if(AA)return bf;AA=1,Object.defineProperty(bf,"__esModule",{value:!0}),bf.TermFunctionFloor=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.FLOOR,overloads:(0,r.declare)(r.SparqlOperator.FLOOR).numericConverter(()=>t=>Math.floor(t)).collect()})}};return bf.TermFunctionFloor=o,bf}var wA;function IB(){if(wA)return gf;wA=1,Object.defineProperty(gf,"__esModule",{value:!0}),gf.ActorFunctionFactoryTermFloor=void 0;const i=k(),r=W(),o=NB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.FLOOR],termFunction:!0})}async run(e){return new o.TermFunctionFloor}};return gf.ActorFunctionFactoryTermFloor=n,gf}var EA;function qB(){return EA||(EA=1,(function(i){var r=ya&&ya.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ya&&ya.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(IB(),i)})(ya)),ya}var _a={},vf={},Tf={},jA;function LB(){if(jA)return Tf;jA=1,Object.defineProperty(Tf,"__esModule",{value:!0}),Tf.TermFunctionHours=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.HOURS,overloads:(0,r.declare)(r.SparqlOperator.HOURS).onDateTime1(()=>t=>(0,r.integer)(t.typedValue.hours)).set([r.TypeURL.XSD_TIME],()=>([t])=>(0,r.integer)(t.typedValue.hours)).collect()})}};return Tf.TermFunctionHours=o,Tf}var RA;function xB(){if(RA)return vf;RA=1,Object.defineProperty(vf,"__esModule",{value:!0}),vf.ActorFunctionFactoryTermHours=void 0;const i=k(),r=W(),o=LB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.HOURS],termFunction:!0})}async run(e){return new o.TermFunctionHours}};return vf.ActorFunctionFactoryTermHours=n,vf}var DA;function BB(){return DA||(DA=1,(function(i){var r=_a&&_a.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=_a&&_a.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(xB(),i)})(_a)),_a}var ma={},Of={},Sf={},PA;function CB(){if(PA)return Sf;PA=1,Object.defineProperty(Sf,"__esModule",{value:!0}),Sf.TermFunctionIsIri=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.IS_IRI,overloads:(0,r.declare)(r.SparqlOperator.IS_IRI).onTerm1(()=>t=>(0,r.bool)(t.termType==="namedNode")).collect()})}};return Sf.TermFunctionIsIri=o,Sf}var MA;function QB(){if(MA)return Of;MA=1,Object.defineProperty(Of,"__esModule",{value:!0}),Of.ActorFunctionFactoryTermIsIri=void 0;const i=k(),r=W(),o=CB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.IS_IRI,r.SparqlOperator.IS_URI],termFunction:!0})}async run(e){return new o.TermFunctionIsIri}};return Of.ActorFunctionFactoryTermIsIri=n,Of}var NA;function UB(){return NA||(NA=1,(function(i){var r=ma&&ma.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ma&&ma.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(QB(),i)})(ma)),ma}var ga={},Ff={},Af={},IA;function VB(){if(IA)return Af;IA=1,Object.defineProperty(Af,"__esModule",{value:!0}),Af.TermFunctionIsBlank=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.IS_BLANK,overloads:(0,r.declare)(r.SparqlOperator.IS_BLANK).onTerm1(()=>t=>(0,r.bool)(t.termType==="blankNode")).collect()})}};return Af.TermFunctionIsBlank=o,Af}var qA;function GB(){if(qA)return Ff;qA=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.ActorFunctionFactoryTermIsBlank=void 0;const i=k(),r=W(),o=VB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.IS_BLANK],termFunction:!0})}async run(e){return new o.TermFunctionIsBlank}};return Ff.ActorFunctionFactoryTermIsBlank=n,Ff}var LA;function XB(){return LA||(LA=1,(function(i){var r=ga&&ga.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ga&&ga.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(GB(),i)})(ga)),ga}var ba={},wf={},Ef={},xA;function zB(){if(xA)return Ef;xA=1,Object.defineProperty(Ef,"__esModule",{value:!0}),Ef.TermFunctionIsLiteral=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.IS_LITERAL,overloads:(0,r.declare)(r.SparqlOperator.IS_LITERAL).onTerm1(()=>t=>(0,r.bool)(t.termType==="literal")).collect()})}};return Ef.TermFunctionIsLiteral=o,Ef}var BA;function HB(){if(BA)return wf;BA=1,Object.defineProperty(wf,"__esModule",{value:!0}),wf.ActorFunctionFactoryTermIsLiteral=void 0;const i=k(),r=W(),o=zB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.IS_LITERAL],termFunction:!0})}async run(e){return new o.TermFunctionIsLiteral}};return wf.ActorFunctionFactoryTermIsLiteral=n,wf}var CA;function $B(){return CA||(CA=1,(function(i){var r=ba&&ba.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ba&&ba.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(HB(),i)})(ba)),ba}var va={},jf={},Rf={},QA;function JB(){if(QA)return Rf;QA=1,Object.defineProperty(Rf,"__esModule",{value:!0}),Rf.TermFunctionIri=void 0;const i=k(),r=Fe(),o=W(),n=rq();let t=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:o.SparqlOperator.IRI,overloads:(0,o.declare)(o.SparqlOperator.IRI).set(["namedNode"],a=>u=>{const c=u[0],s=(0,n.resolve)(c.str(),a.context.get(r.KeysInitQuery.baseIRI)??"");return new o.NamedNode(s)}).onString1(a=>u=>{const c=(0,n.resolve)(u.str(),a.context.get(r.KeysInitQuery.baseIRI)??"");return new o.NamedNode(c)}).collect()})}};return Rf.TermFunctionIri=t,Rf}var UA;function KB(){if(UA)return jf;UA=1,Object.defineProperty(jf,"__esModule",{value:!0}),jf.ActorFunctionFactoryTermIri=void 0;const i=k(),r=W(),o=JB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.IRI,r.SparqlOperator.URI],termFunction:!0})}async run(e){return new o.TermFunctionIri}};return jf.ActorFunctionFactoryTermIri=n,jf}var VA;function YB(){return VA||(VA=1,(function(i){var r=va&&va.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=va&&va.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(KB(),i)})(va)),va}var Ta={},Df={},Pf={},GA;function WB(){if(GA)return Pf;GA=1,Object.defineProperty(Pf,"__esModule",{value:!0}),Pf.TermFunctionIsNumeric=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.IS_NUMERIC,overloads:(0,r.declare)(r.SparqlOperator.IS_NUMERIC).onNumeric1(()=>()=>(0,r.bool)(!0)).onTerm1(()=>()=>(0,r.bool)(!1)).collect()})}};return Pf.TermFunctionIsNumeric=o,Pf}var XA;function ZB(){if(XA)return Df;XA=1,Object.defineProperty(Df,"__esModule",{value:!0}),Df.ActorFunctionFactoryTermIsNumeric=void 0;const i=k(),r=W(),o=WB();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.IS_NUMERIC],termFunction:!0})}async run(e){return new o.TermFunctionIsNumeric}};return Df.ActorFunctionFactoryTermIsNumeric=n,Df}var zA;function kB(){return zA||(zA=1,(function(i){var r=Ta&&Ta.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ta&&Ta.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(ZB(),i)})(Ta)),Ta}var Oa={},Mf={},Nf={},HA;function eC(){if(HA)return Nf;HA=1,Object.defineProperty(Nf,"__esModule",{value:!0}),Nf.TermFunctionLang=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.LANG,overloads:(0,r.declare)(r.SparqlOperator.LANG).onLiteral1(()=>t=>(0,r.string)(t.language??"")).collect()})}};return Nf.TermFunctionLang=o,Nf}var $A;function tC(){if($A)return Mf;$A=1,Object.defineProperty(Mf,"__esModule",{value:!0}),Mf.ActorFunctionFactoryTermLang=void 0;const i=k(),r=W(),o=eC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.LANG],termFunction:!0})}async run(e){return new o.TermFunctionLang}};return Mf.ActorFunctionFactoryTermLang=n,Mf}var JA;function rC(){return JA||(JA=1,(function(i){var r=Oa&&Oa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Oa&&Oa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(tC(),i)})(Oa)),Oa}var Sa={},If={},qf={},KA;function nC(){if(KA)return qf;KA=1,Object.defineProperty(qf,"__esModule",{value:!0}),qf.TermFunctionIsTriple=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.IS_TRIPLE,overloads:(0,r.declare)(r.SparqlOperator.IS_TRIPLE).onTerm1(()=>t=>(0,r.bool)(t.termType==="quad")).collect()})}};return qf.TermFunctionIsTriple=o,qf}var YA;function iC(){if(YA)return If;YA=1,Object.defineProperty(If,"__esModule",{value:!0}),If.ActorFunctionFactoryTermIsTriple=void 0;const i=k(),r=W(),o=nC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.IS_TRIPLE],termFunction:!0})}async run(e){return new o.TermFunctionIsTriple}};return If.ActorFunctionFactoryTermIsTriple=n,If}var WA;function aC(){return WA||(WA=1,(function(i){var r=Sa&&Sa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Sa&&Sa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(iC(),i)})(Sa)),Sa}var Fa={},Lf={},xf={},ZA;function oC(){if(ZA)return xf;ZA=1,Object.defineProperty(xf,"__esModule",{value:!0}),xf.TermFunctionLangmatches=void 0;const i=k(),r=W();let o=class Ls extends i.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.LANG_MATCHES,overloads:(0,r.declare)(r.SparqlOperator.LANG_MATCHES).onBinaryTyped([r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING],()=>(t,e)=>(0,r.bool)(Ls.langMatches(t,e))).collect()})}static langMatches(t,e){const a=t.split("-"),u=e.split("-");if(!Ls.matchLangTag(u[0],a[0])&&!Ls.isWildCard(a[0]))return!1;let c=1,s=1;for(;s<u.length;){if(Ls.isWildCard(u[s])){s++;continue}if(c===a.length)return!1;if(Ls.matchLangTag(u[s],a[c])){c++,s++;continue}if(a[c].length===1)return!1;c++}return!0}static isWildCard(t){return t==="*"}static matchLangTag(t,e){return new RegExp(`/${t}/`,"iu").test(`/${e}/`)}};return xf.TermFunctionLangmatches=o,xf}var kA;function uC(){if(kA)return Lf;kA=1,Object.defineProperty(Lf,"__esModule",{value:!0}),Lf.ActorFunctionFactoryTermLangmatches=void 0;const i=k(),r=W(),o=oC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.LANG_MATCHES],termFunction:!0})}async run(e){return new o.TermFunctionLangmatches}};return Lf.ActorFunctionFactoryTermLangmatches=n,Lf}var ew;function sC(){return ew||(ew=1,(function(i){var r=Fa&&Fa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Fa&&Fa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(uC(),i)})(Fa)),Fa}var Aa={},Bf={},Cf={},tw;function cC(){if(tw)return Cf;tw=1,Object.defineProperty(Cf,"__esModule",{value:!0}),Cf.TermFunctionMinutes=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.MINUTES,overloads:(0,r.declare)(r.SparqlOperator.MINUTES).onDateTime1(()=>t=>(0,r.integer)(t.typedValue.minutes)).set([r.TypeURL.XSD_TIME],()=>([t])=>(0,r.integer)(t.typedValue.minutes)).collect()})}};return Cf.TermFunctionMinutes=o,Cf}var rw;function lC(){if(rw)return Bf;rw=1,Object.defineProperty(Bf,"__esModule",{value:!0}),Bf.ActorFunctionFactoryTermMinutes=void 0;const i=k(),r=W(),o=cC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.MINUTES],termFunction:!0})}async run(e){return new o.TermFunctionMinutes}};return Bf.ActorFunctionFactoryTermMinutes=n,Bf}var nw;function dC(){return nw||(nw=1,(function(i){var r=Aa&&Aa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Aa&&Aa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(lC(),i)})(Aa)),Aa}var wa={},Qf={},Uf={},iw;function fC(){if(iw)return Uf;iw=1,Object.defineProperty(Uf,"__esModule",{value:!0}),Uf.TermFunctionLcase=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.LCASE,overloads:(0,r.declare)(r.SparqlOperator.LCASE).onString1Typed(()=>t=>(0,r.string)(t.toLowerCase())).onLangString1(()=>t=>(0,r.langString)(t.typedValue.toLowerCase(),t.language)).collect()})}};return Uf.TermFunctionLcase=o,Uf}var aw;function pC(){if(aw)return Qf;aw=1,Object.defineProperty(Qf,"__esModule",{value:!0}),Qf.ActorFunctionFactoryTermLcase=void 0;const i=k(),r=W(),o=fC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.LCASE],termFunction:!0})}async run(e){return new o.TermFunctionLcase}};return Qf.ActorFunctionFactoryTermLcase=n,Qf}var ow;function hC(){return ow||(ow=1,(function(i){var r=wa&&wa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=wa&&wa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(pC(),i)})(wa)),wa}var Ea={},Vf={},Gf={},b1={exports:{}},uw;function yC(){return uw||(uw=1,(function(i,r){(function(o){i.exports=o()})(function(o){var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function t(v,F){var T=v[0],S=v[1],j=v[2],E=v[3];T+=(S&j|~S&E)+F[0]-680876936|0,T=(T<<7|T>>>25)+S|0,E+=(T&S|~T&j)+F[1]-389564586|0,E=(E<<12|E>>>20)+T|0,j+=(E&T|~E&S)+F[2]+606105819|0,j=(j<<17|j>>>15)+E|0,S+=(j&E|~j&T)+F[3]-1044525330|0,S=(S<<22|S>>>10)+j|0,T+=(S&j|~S&E)+F[4]-176418897|0,T=(T<<7|T>>>25)+S|0,E+=(T&S|~T&j)+F[5]+1200080426|0,E=(E<<12|E>>>20)+T|0,j+=(E&T|~E&S)+F[6]-1473231341|0,j=(j<<17|j>>>15)+E|0,S+=(j&E|~j&T)+F[7]-45705983|0,S=(S<<22|S>>>10)+j|0,T+=(S&j|~S&E)+F[8]+1770035416|0,T=(T<<7|T>>>25)+S|0,E+=(T&S|~T&j)+F[9]-1958414417|0,E=(E<<12|E>>>20)+T|0,j+=(E&T|~E&S)+F[10]-42063|0,j=(j<<17|j>>>15)+E|0,S+=(j&E|~j&T)+F[11]-1990404162|0,S=(S<<22|S>>>10)+j|0,T+=(S&j|~S&E)+F[12]+1804603682|0,T=(T<<7|T>>>25)+S|0,E+=(T&S|~T&j)+F[13]-40341101|0,E=(E<<12|E>>>20)+T|0,j+=(E&T|~E&S)+F[14]-1502002290|0,j=(j<<17|j>>>15)+E|0,S+=(j&E|~j&T)+F[15]+1236535329|0,S=(S<<22|S>>>10)+j|0,T+=(S&E|j&~E)+F[1]-165796510|0,T=(T<<5|T>>>27)+S|0,E+=(T&j|S&~j)+F[6]-1069501632|0,E=(E<<9|E>>>23)+T|0,j+=(E&S|T&~S)+F[11]+643717713|0,j=(j<<14|j>>>18)+E|0,S+=(j&T|E&~T)+F[0]-373897302|0,S=(S<<20|S>>>12)+j|0,T+=(S&E|j&~E)+F[5]-701558691|0,T=(T<<5|T>>>27)+S|0,E+=(T&j|S&~j)+F[10]+38016083|0,E=(E<<9|E>>>23)+T|0,j+=(E&S|T&~S)+F[15]-660478335|0,j=(j<<14|j>>>18)+E|0,S+=(j&T|E&~T)+F[4]-405537848|0,S=(S<<20|S>>>12)+j|0,T+=(S&E|j&~E)+F[9]+568446438|0,T=(T<<5|T>>>27)+S|0,E+=(T&j|S&~j)+F[14]-1019803690|0,E=(E<<9|E>>>23)+T|0,j+=(E&S|T&~S)+F[3]-187363961|0,j=(j<<14|j>>>18)+E|0,S+=(j&T|E&~T)+F[8]+1163531501|0,S=(S<<20|S>>>12)+j|0,T+=(S&E|j&~E)+F[13]-1444681467|0,T=(T<<5|T>>>27)+S|0,E+=(T&j|S&~j)+F[2]-51403784|0,E=(E<<9|E>>>23)+T|0,j+=(E&S|T&~S)+F[7]+1735328473|0,j=(j<<14|j>>>18)+E|0,S+=(j&T|E&~T)+F[12]-1926607734|0,S=(S<<20|S>>>12)+j|0,T+=(S^j^E)+F[5]-378558|0,T=(T<<4|T>>>28)+S|0,E+=(T^S^j)+F[8]-2022574463|0,E=(E<<11|E>>>21)+T|0,j+=(E^T^S)+F[11]+1839030562|0,j=(j<<16|j>>>16)+E|0,S+=(j^E^T)+F[14]-35309556|0,S=(S<<23|S>>>9)+j|0,T+=(S^j^E)+F[1]-1530992060|0,T=(T<<4|T>>>28)+S|0,E+=(T^S^j)+F[4]+1272893353|0,E=(E<<11|E>>>21)+T|0,j+=(E^T^S)+F[7]-155497632|0,j=(j<<16|j>>>16)+E|0,S+=(j^E^T)+F[10]-1094730640|0,S=(S<<23|S>>>9)+j|0,T+=(S^j^E)+F[13]+681279174|0,T=(T<<4|T>>>28)+S|0,E+=(T^S^j)+F[0]-358537222|0,E=(E<<11|E>>>21)+T|0,j+=(E^T^S)+F[3]-722521979|0,j=(j<<16|j>>>16)+E|0,S+=(j^E^T)+F[6]+76029189|0,S=(S<<23|S>>>9)+j|0,T+=(S^j^E)+F[9]-640364487|0,T=(T<<4|T>>>28)+S|0,E+=(T^S^j)+F[12]-421815835|0,E=(E<<11|E>>>21)+T|0,j+=(E^T^S)+F[15]+530742520|0,j=(j<<16|j>>>16)+E|0,S+=(j^E^T)+F[2]-995338651|0,S=(S<<23|S>>>9)+j|0,T+=(j^(S|~E))+F[0]-198630844|0,T=(T<<6|T>>>26)+S|0,E+=(S^(T|~j))+F[7]+1126891415|0,E=(E<<10|E>>>22)+T|0,j+=(T^(E|~S))+F[14]-1416354905|0,j=(j<<15|j>>>17)+E|0,S+=(E^(j|~T))+F[5]-57434055|0,S=(S<<21|S>>>11)+j|0,T+=(j^(S|~E))+F[12]+1700485571|0,T=(T<<6|T>>>26)+S|0,E+=(S^(T|~j))+F[3]-1894986606|0,E=(E<<10|E>>>22)+T|0,j+=(T^(E|~S))+F[10]-1051523|0,j=(j<<15|j>>>17)+E|0,S+=(E^(j|~T))+F[1]-2054922799|0,S=(S<<21|S>>>11)+j|0,T+=(j^(S|~E))+F[8]+1873313359|0,T=(T<<6|T>>>26)+S|0,E+=(S^(T|~j))+F[15]-30611744|0,E=(E<<10|E>>>22)+T|0,j+=(T^(E|~S))+F[6]-1560198380|0,j=(j<<15|j>>>17)+E|0,S+=(E^(j|~T))+F[13]+1309151649|0,S=(S<<21|S>>>11)+j|0,T+=(j^(S|~E))+F[4]-145523070|0,T=(T<<6|T>>>26)+S|0,E+=(S^(T|~j))+F[11]-1120210379|0,E=(E<<10|E>>>22)+T|0,j+=(T^(E|~S))+F[2]+718787259|0,j=(j<<15|j>>>17)+E|0,S+=(E^(j|~T))+F[9]-343485551|0,S=(S<<21|S>>>11)+j|0,v[0]=T+v[0]|0,v[1]=S+v[1]|0,v[2]=j+v[2]|0,v[3]=E+v[3]|0}function e(v){var F=[],T;for(T=0;T<64;T+=4)F[T>>2]=v.charCodeAt(T)+(v.charCodeAt(T+1)<<8)+(v.charCodeAt(T+2)<<16)+(v.charCodeAt(T+3)<<24);return F}function a(v){var F=[],T;for(T=0;T<64;T+=4)F[T>>2]=v[T]+(v[T+1]<<8)+(v[T+2]<<16)+(v[T+3]<<24);return F}function u(v){var F=v.length,T=[1732584193,-271733879,-1732584194,271733878],S,j,E,U,K,_;for(S=64;S<=F;S+=64)t(T,e(v.substring(S-64,S)));for(v=v.substring(S-64),j=v.length,E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S=0;S<j;S+=1)E[S>>2]|=v.charCodeAt(S)<<(S%4<<3);if(E[S>>2]|=128<<(S%4<<3),S>55)for(t(T,E),S=0;S<16;S+=1)E[S]=0;return U=F*8,U=U.toString(16).match(/(.*?)(.{0,8})$/),K=parseInt(U[2],16),_=parseInt(U[1],16)||0,E[14]=K,E[15]=_,t(T,E),T}function c(v){var F=v.length,T=[1732584193,-271733879,-1732584194,271733878],S,j,E,U,K,_;for(S=64;S<=F;S+=64)t(T,a(v.subarray(S-64,S)));for(v=S-64<F?v.subarray(S-64):new Uint8Array(0),j=v.length,E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S=0;S<j;S+=1)E[S>>2]|=v[S]<<(S%4<<3);if(E[S>>2]|=128<<(S%4<<3),S>55)for(t(T,E),S=0;S<16;S+=1)E[S]=0;return U=F*8,U=U.toString(16).match(/(.*?)(.{0,8})$/),K=parseInt(U[2],16),_=parseInt(U[1],16)||0,E[14]=K,E[15]=_,t(T,E),T}function s(v){var F="",T;for(T=0;T<4;T+=1)F+=n[v>>T*8+4&15]+n[v>>T*8&15];return F}function l(v){var F;for(F=0;F<v.length;F+=1)v[F]=s(v[F]);return v.join("")}l(u("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&(function(){function v(F,T){return F=F|0||0,F<0?Math.max(F+T,0):Math.min(F,T)}ArrayBuffer.prototype.slice=function(F,T){var S=this.byteLength,j=v(F,S),E=S,U,K,_,O;return T!==o&&(E=v(T,S)),j>E?new ArrayBuffer(0):(U=E-j,K=new ArrayBuffer(U),_=new Uint8Array(K),O=new Uint8Array(this,j,U),_.set(O),K)}})();function d(v){return/[\u0080-\uFFFF]/.test(v)&&(v=unescape(encodeURIComponent(v))),v}function f(v,F){var T=v.length,S=new ArrayBuffer(T),j=new Uint8Array(S),E;for(E=0;E<T;E+=1)j[E]=v.charCodeAt(E);return F?j:S}function h(v){return String.fromCharCode.apply(null,new Uint8Array(v))}function p(v,F,T){var S=new Uint8Array(v.byteLength+F.byteLength);return S.set(new Uint8Array(v)),S.set(new Uint8Array(F),v.byteLength),S}function y(v){var F=[],T=v.length,S;for(S=0;S<T-1;S+=2)F.push(parseInt(v.substr(S,2),16));return String.fromCharCode.apply(String,F)}function b(){this.reset()}return b.prototype.append=function(v){return this.appendBinary(d(v)),this},b.prototype.appendBinary=function(v){this._buff+=v,this._length+=v.length;var F=this._buff.length,T;for(T=64;T<=F;T+=64)t(this._hash,e(this._buff.substring(T-64,T)));return this._buff=this._buff.substring(T-64),this},b.prototype.end=function(v){var F=this._buff,T=F.length,S,j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E;for(S=0;S<T;S+=1)j[S>>2]|=F.charCodeAt(S)<<(S%4<<3);return this._finish(j,T),E=l(this._hash),v&&(E=y(E)),this.reset(),E},b.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},b.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},b.prototype.setState=function(v){return this._buff=v.buff,this._length=v.length,this._hash=v.hash,this},b.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},b.prototype._finish=function(v,F){var T=F,S,j,E;if(v[T>>2]|=128<<(T%4<<3),T>55)for(t(this._hash,v),T=0;T<16;T+=1)v[T]=0;S=this._length*8,S=S.toString(16).match(/(.*?)(.{0,8})$/),j=parseInt(S[2],16),E=parseInt(S[1],16)||0,v[14]=j,v[15]=E,t(this._hash,v)},b.hash=function(v,F){return b.hashBinary(d(v),F)},b.hashBinary=function(v,F){var T=u(v),S=l(T);return F?y(S):S},b.ArrayBuffer=function(){this.reset()},b.ArrayBuffer.prototype.append=function(v){var F=p(this._buff.buffer,v),T=F.length,S;for(this._length+=v.byteLength,S=64;S<=T;S+=64)t(this._hash,a(F.subarray(S-64,S)));return this._buff=S-64<T?new Uint8Array(F.buffer.slice(S-64)):new Uint8Array(0),this},b.ArrayBuffer.prototype.end=function(v){var F=this._buff,T=F.length,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j,E;for(j=0;j<T;j+=1)S[j>>2]|=F[j]<<(j%4<<3);return this._finish(S,T),E=l(this._hash),v&&(E=y(E)),this.reset(),E},b.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},b.ArrayBuffer.prototype.getState=function(){var v=b.prototype.getState.call(this);return v.buff=h(v.buff),v},b.ArrayBuffer.prototype.setState=function(v){return v.buff=f(v.buff,!0),b.prototype.setState.call(this,v)},b.ArrayBuffer.prototype.destroy=b.prototype.destroy,b.ArrayBuffer.prototype._finish=b.prototype._finish,b.ArrayBuffer.hash=function(v,F){var T=c(new Uint8Array(v)),S=l(T);return F?y(S):S},b})})(b1)),b1.exports}var sw;function _C(){if(sw)return Gf;sw=1,Object.defineProperty(Gf,"__esModule",{value:!0}),Gf.TermFunctionMd5=void 0;const i=k(),r=W(),o=yC();let n=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.MD5,overloads:(0,r.declare)(r.SparqlOperator.MD5).onString1Typed(()=>e=>(0,r.string)((0,o.hash)(e))).collect()})}};return Gf.TermFunctionMd5=n,Gf}var cw;function mC(){if(cw)return Vf;cw=1,Object.defineProperty(Vf,"__esModule",{value:!0}),Vf.ActorFunctionFactoryTermMd5=void 0;const i=k(),r=W(),o=_C();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.MD5],termFunction:!0})}async run(e){return new o.TermFunctionMd5}};return Vf.ActorFunctionFactoryTermMd5=n,Vf}var lw;function gC(){return lw||(lw=1,(function(i){var r=Ea&&Ea.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ea&&Ea.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(mC(),i)})(Ea)),Ea}var ja={},Xf={},zf={},dw;function bC(){if(dw)return zf;dw=1,Object.defineProperty(zf,"__esModule",{value:!0}),zf.TermFunctionMonth=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.MONTH,overloads:(0,r.declare)(r.SparqlOperator.MONTH).onDateTime1(()=>t=>(0,r.integer)(t.typedValue.month)).set([r.TypeURL.XSD_DATE],()=>([t])=>(0,r.integer)(t.typedValue.month)).collect()})}};return zf.TermFunctionMonth=o,zf}var fw;function vC(){if(fw)return Xf;fw=1,Object.defineProperty(Xf,"__esModule",{value:!0}),Xf.ActorFunctionFactoryTermMonth=void 0;const i=k(),r=W(),o=bC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.MONTH],termFunction:!0})}async run(e){return new o.TermFunctionMonth}};return Xf.ActorFunctionFactoryTermMonth=n,Xf}var pw;function TC(){return pw||(pw=1,(function(i){var r=ja&&ja.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ja&&ja.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(vC(),i)})(ja)),ja}var Ra={},Hf={},$f={},hw;function OC(){if(hw)return $f;hw=1,Object.defineProperty($f,"__esModule",{value:!0}),$f.TermFunctionNot=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.NOT,overloads:(0,r.declare)(r.SparqlOperator.NOT).onTerm1(()=>t=>(0,r.bool)(!t.coerceEBV())).collect()})}};return $f.TermFunctionNot=o,$f}var yw;function SC(){if(yw)return Hf;yw=1,Object.defineProperty(Hf,"__esModule",{value:!0}),Hf.ActorFunctionFactoryTermNot=void 0;const i=k(),r=W(),o=OC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.NOT],termFunction:!0})}async run(e){return new o.TermFunctionNot}};return Hf.ActorFunctionFactoryTermNot=n,Hf}var _w;function FC(){return _w||(_w=1,(function(i){var r=Ra&&Ra.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ra&&Ra.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(SC(),i)})(Ra)),Ra}var Da={},Jf={},Kf={},mw;function AC(){if(mw)return Kf;mw=1,Object.defineProperty(Kf,"__esModule",{value:!0}),Kf.TermFunctionMultiplication=void 0;const i=k(),r=W(),o=kg();let n=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.MULTIPLICATION,overloads:(0,r.declare)(r.SparqlOperator.MULTIPLICATION).arithmetic(()=>(e,a)=>new o.BigNumber(e).times(a).toNumber()).collect()})}};return Kf.TermFunctionMultiplication=n,Kf}var gw;function wC(){if(gw)return Jf;gw=1,Object.defineProperty(Jf,"__esModule",{value:!0}),Jf.ActorFunctionFactoryTermMultiplication=void 0;const i=k(),r=W(),o=AC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.MULTIPLICATION],termFunction:!0})}async run(e){return new o.TermFunctionMultiplication}};return Jf.ActorFunctionFactoryTermMultiplication=n,Jf}var bw;function EC(){return bw||(bw=1,(function(i){var r=Da&&Da.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Da&&Da.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(wC(),i)})(Da)),Da}var Pa={},Yf={},Wf={},vw;function jC(){if(vw)return Wf;vw=1,Object.defineProperty(Wf,"__esModule",{value:!0}),Wf.TermFunctionNow=void 0;const i=k(),r=Fe(),o=W();let n=class extends i.TermFunctionBase{constructor(){super({arity:0,operator:o.SparqlOperator.NOW,overloads:(0,o.declare)(o.SparqlOperator.NOW).set([],e=>()=>new o.DateTimeLiteral((0,o.toDateTimeRepresentation)({date:e.context.getSafe(r.KeysInitQuery.queryTimestamp),timeZone:e.context.getSafe(r.KeysExpressionEvaluator.defaultTimeZone)}))).collect()})}};return Wf.TermFunctionNow=n,Wf}var Tw;function RC(){if(Tw)return Yf;Tw=1,Object.defineProperty(Yf,"__esModule",{value:!0}),Yf.ActorFunctionFactoryTermNow=void 0;const i=k(),r=W(),o=jC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.NOW],termFunction:!0})}async run(e){return new o.TermFunctionNow}};return Yf.ActorFunctionFactoryTermNow=n,Yf}var Ow;function DC(){return Ow||(Ow=1,(function(i){var r=Pa&&Pa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Pa&&Pa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(RC(),i)})(Pa)),Pa}var Ma={},Zf={},kf={},Sw;function PC(){if(Sw)return kf;Sw=1,Object.defineProperty(kf,"__esModule",{value:!0}),kf.TermFunctionObject=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.OBJECT,overloads:(0,r.declare)(r.SparqlOperator.OBJECT).onQuad1(()=>t=>t.object).collect()})}};return kf.TermFunctionObject=o,kf}var Fw;function MC(){if(Fw)return Zf;Fw=1,Object.defineProperty(Zf,"__esModule",{value:!0}),Zf.ActorFunctionFactoryTermObject=void 0;const i=k(),r=W(),o=PC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.OBJECT],termFunction:!0})}async run(e){return new o.TermFunctionObject}};return Zf.ActorFunctionFactoryTermObject=n,Zf}var Aw;function NC(){return Aw||(Aw=1,(function(i){var r=Ma&&Ma.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ma&&Ma.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(MC(),i)})(Ma)),Ma}var Na={},ep={},tp={},ww;function IC(){if(ww)return tp;ww=1,Object.defineProperty(tp,"__esModule",{value:!0}),tp.TermFunctionPredicate=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.PREDICATE,overloads:(0,r.declare)(r.SparqlOperator.PREDICATE).onQuad1(()=>t=>t.predicate).collect()})}};return tp.TermFunctionPredicate=o,tp}var Ew;function qC(){if(Ew)return ep;Ew=1,Object.defineProperty(ep,"__esModule",{value:!0}),ep.ActorFunctionFactoryTermPredicate=void 0;const i=k(),r=W(),o=IC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.PREDICATE],termFunction:!0})}async run(e){return new o.TermFunctionPredicate}};return ep.ActorFunctionFactoryTermPredicate=n,ep}var jw;function LC(){return jw||(jw=1,(function(i){var r=Na&&Na.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Na&&Na.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(qC(),i)})(Na)),Na}var Ia={},rp={},np={},Rw;function xC(){if(Rw)return np;Rw=1,Object.defineProperty(np,"__esModule",{value:!0}),np.TermFunctionRand=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:0,operator:r.SparqlOperator.RAND,overloads:(0,r.declare)(r.SparqlOperator.RAND).set([],()=>()=>(0,r.double)(Math.random())).collect()})}};return np.TermFunctionRand=o,np}var Dw;function BC(){if(Dw)return rp;Dw=1,Object.defineProperty(rp,"__esModule",{value:!0}),rp.ActorFunctionFactoryTermRand=void 0;const i=k(),r=W(),o=xC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.RAND],termFunction:!0})}async run(e){return new o.TermFunctionRand}};return rp.ActorFunctionFactoryTermRand=n,rp}var Pw;function CC(){return Pw||(Pw=1,(function(i){var r=Ia&&Ia.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ia&&Ia.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(BC(),i)})(Ia)),Ia}var qa={},ip={},ap={},La={},op={},up={},Mw;function e5(){if(Mw)return up;Mw=1,Object.defineProperty(up,"__esModule",{value:!0}),up.TermFunctionRegex=void 0;const i=k(),r=W();let o=class bn extends i.TermFunctionBase{constructor(){super({arity:[2,3],operator:r.SparqlOperator.REGEX,overloads:(0,r.declare)(r.SparqlOperator.REGEX).onBinaryTyped([r.TypeAlias.SPARQL_STRINGLY,r.TypeURL.XSD_STRING],bn.regex2).onTernaryTyped([r.TypeAlias.SPARQL_STRINGLY,r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING],bn.regex3).collect()})}static regex2(){return(t,e)=>(0,r.bool)(bn.matches(t,e))}static regex3(){return(t,e,a)=>(0,r.bool)(bn.matches(t,e,a))}static matches(t,e,a=""){return a=bn.cleanFlags(a),a.includes("x")&&(e=bn.flagX(e)),a.includes("q")&&(e=bn.flagQ(e)),new RegExp(e,a.replaceAll(/[qx]/gu,"")).test(t)}static cleanFlags(t){if(!/^[imsxq]*$/u.test(t))throw new Error("Invalid flags");const e=[...t].find((a,u,c)=>c.indexOf(a)!==u);if(e)throw new Error(`Duplicate flag: ${e}`);return t?.includes("q")&&(t=t.replaceAll(/[msx]/gu,"")),`${t}u`}static flagX(t){if(!t)return t;let e=t[0];for(;["	",`
`,"\r"," "].includes(e);)t=t.slice(1),e=t[0];let a=e==="[";for(let u=1;u<t.length;u++){const c=t[u];["	",`
`,"\r"," "].includes(c)&&!a?(t=t.slice(0,u)+t.slice(u+1),u--):c==="["&&e!=="\\"?a=!0:c==="]"&&e!=="\\"&&(a=!1),e=c}return t}static flagQ(t){return t.replaceAll(/([?+*.{}()[\]\\|])/gu,"\\$1").replaceAll(/^\^/gu,"\\^").replaceAll(/\$$/gu,"\\$")}};return up.TermFunctionRegex=o,up}var Nw;function QC(){if(Nw)return op;Nw=1,Object.defineProperty(op,"__esModule",{value:!0}),op.ActorFunctionFactoryTermRegex=void 0;const i=k(),r=W(),o=e5();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.REGEX],termFunction:!0})}async run(e){return new o.TermFunctionRegex}};return op.ActorFunctionFactoryTermRegex=n,op}var Iw;function t5(){return Iw||(Iw=1,(function(i){var r=La&&La.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=La&&La.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(QC(),i),o(e5(),i)})(La)),La}var qw;function UC(){if(qw)return ap;qw=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.TermFunctionReplace=void 0;const i=t5(),r=k(),o=W();let n=class tm extends r.TermFunctionBase{constructor(){super({arity:[3,4],operator:o.SparqlOperator.REPLACE,overloads:(0,o.declare)(o.SparqlOperator.REPLACE).onTernaryTyped([o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING],()=>(e,a,u)=>(0,o.string)(tm.replace(e,a,u))).set([o.TypeURL.RDF_LANG_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING],()=>([e,a,u])=>{const c=tm.replace(e.typedValue,a.typedValue,u.typedValue);return(0,o.langString)(c,e.language)}).onQuaternaryTyped([o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING],()=>(e,a,u,c)=>(0,o.string)(tm.replace(e,a,u,c))).set([o.TypeURL.RDF_LANG_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING],()=>([e,a,u,c])=>{const s=tm.replace(e.typedValue,a.typedValue,u.typedValue,c.typedValue);return(0,o.langString)(s,e.language)}).collect()})}static replace(e,a,u,c=""){return c=i.TermFunctionRegex.cleanFlags(c),c.includes("x")&&(a=i.TermFunctionRegex.flagX(a)),c.includes("q")?a=i.TermFunctionRegex.flagQ(a):u=u.replaceAll("$0",()=>"$&"),c=`${c.replaceAll(/[qx]/gu,"")}g`,e.replaceAll(new RegExp(a,c),u)}};return ap.TermFunctionReplace=n,ap}var Lw;function VC(){if(Lw)return ip;Lw=1,Object.defineProperty(ip,"__esModule",{value:!0}),ip.ActorFunctionFactoryTermReplace=void 0;const i=k(),r=W(),o=UC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.REPLACE],termFunction:!0})}async run(e){return new o.TermFunctionReplace}};return ip.ActorFunctionFactoryTermReplace=n,ip}var xw;function GC(){return xw||(xw=1,(function(i){var r=qa&&qa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=qa&&qa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(VC(),i)})(qa)),qa}var xa={},sp={},cp={},Bw;function XC(){if(Bw)return cp;Bw=1,Object.defineProperty(cp,"__esModule",{value:!0}),cp.TermFunctionRound=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.ROUND,overloads:(0,r.declare)(r.SparqlOperator.ROUND).numericConverter(()=>t=>Math.round(t)).collect()})}};return cp.TermFunctionRound=o,cp}var Cw;function zC(){if(Cw)return sp;Cw=1,Object.defineProperty(sp,"__esModule",{value:!0}),sp.ActorFunctionFactoryTermRound=void 0;const i=k(),r=W(),o=XC();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.ROUND],termFunction:!0})}async run(e){return new o.TermFunctionRound}};return sp.ActorFunctionFactoryTermRound=n,sp}var Qw;function HC(){return Qw||(Qw=1,(function(i){var r=xa&&xa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=xa&&xa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(zC(),i)})(xa)),xa}var Ba={},lp={},dp={},v1={},ct={},T1,Uw;function Em(){if(Uw)return T1;Uw=1,T1=i;function i(r,o){if(!r)throw new Error(o||"Assertion failed")}return i.equal=function(o,n,t){if(o!=n)throw new Error(t||"Assertion failed: "+o+" != "+n)},T1}var ag={exports:{}},Vw;function $C(){return Vw||(Vw=1,typeof Object.create=="function"?ag.exports=function(r,o){o&&(r.super_=o,r.prototype=Object.create(o.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:ag.exports=function(r,o){if(o){r.super_=o;var n=function(){};n.prototype=o.prototype,r.prototype=new n,r.prototype.constructor=r}}),ag.exports}var Gw;function en(){if(Gw)return ct;Gw=1;var i=Em(),r=$C();ct.inherits=r;function o(R,I){return(R.charCodeAt(I)&64512)!==55296||I<0||I+1>=R.length?!1:(R.charCodeAt(I+1)&64512)===56320}function n(R,I){if(Array.isArray(R))return R.slice();if(!R)return[];var C=[];if(typeof R=="string")if(I){if(I==="hex")for(R=R.replace(/[^a-z0-9]+/ig,""),R.length%2!==0&&(R="0"+R),H=0;H<R.length;H+=2)C.push(parseInt(R[H]+R[H+1],16))}else for(var Y=0,H=0;H<R.length;H++){var Z=R.charCodeAt(H);Z<128?C[Y++]=Z:Z<2048?(C[Y++]=Z>>6|192,C[Y++]=Z&63|128):o(R,H)?(Z=65536+((Z&1023)<<10)+(R.charCodeAt(++H)&1023),C[Y++]=Z>>18|240,C[Y++]=Z>>12&63|128,C[Y++]=Z>>6&63|128,C[Y++]=Z&63|128):(C[Y++]=Z>>12|224,C[Y++]=Z>>6&63|128,C[Y++]=Z&63|128)}else for(H=0;H<R.length;H++)C[H]=R[H]|0;return C}ct.toArray=n;function t(R){for(var I="",C=0;C<R.length;C++)I+=u(R[C].toString(16));return I}ct.toHex=t;function e(R){var I=R>>>24|R>>>8&65280|R<<8&16711680|(R&255)<<24;return I>>>0}ct.htonl=e;function a(R,I){for(var C="",Y=0;Y<R.length;Y++){var H=R[Y];I==="little"&&(H=e(H)),C+=c(H.toString(16))}return C}ct.toHex32=a;function u(R){return R.length===1?"0"+R:R}ct.zero2=u;function c(R){return R.length===7?"0"+R:R.length===6?"00"+R:R.length===5?"000"+R:R.length===4?"0000"+R:R.length===3?"00000"+R:R.length===2?"000000"+R:R.length===1?"0000000"+R:R}ct.zero8=c;function s(R,I,C,Y){var H=C-I;i(H%4===0);for(var Z=new Array(H/4),le=0,ce=I;le<Z.length;le++,ce+=4){var ee;Y==="big"?ee=R[ce]<<24|R[ce+1]<<16|R[ce+2]<<8|R[ce+3]:ee=R[ce+3]<<24|R[ce+2]<<16|R[ce+1]<<8|R[ce],Z[le]=ee>>>0}return Z}ct.join32=s;function l(R,I){for(var C=new Array(R.length*4),Y=0,H=0;Y<R.length;Y++,H+=4){var Z=R[Y];I==="big"?(C[H]=Z>>>24,C[H+1]=Z>>>16&255,C[H+2]=Z>>>8&255,C[H+3]=Z&255):(C[H+3]=Z>>>24,C[H+2]=Z>>>16&255,C[H+1]=Z>>>8&255,C[H]=Z&255)}return C}ct.split32=l;function d(R,I){return R>>>I|R<<32-I}ct.rotr32=d;function f(R,I){return R<<I|R>>>32-I}ct.rotl32=f;function h(R,I){return R+I>>>0}ct.sum32=h;function p(R,I,C){return R+I+C>>>0}ct.sum32_3=p;function y(R,I,C,Y){return R+I+C+Y>>>0}ct.sum32_4=y;function b(R,I,C,Y,H){return R+I+C+Y+H>>>0}ct.sum32_5=b;function v(R,I,C,Y){var H=R[I],Z=R[I+1],le=Y+Z>>>0,ce=(le<Y?1:0)+C+H;R[I]=ce>>>0,R[I+1]=le}ct.sum64=v;function F(R,I,C,Y){var H=I+Y>>>0,Z=(H<I?1:0)+R+C;return Z>>>0}ct.sum64_hi=F;function T(R,I,C,Y){var H=I+Y;return H>>>0}ct.sum64_lo=T;function S(R,I,C,Y,H,Z,le,ce){var ee=0,Ae=I;Ae=Ae+Y>>>0,ee+=Ae<I?1:0,Ae=Ae+Z>>>0,ee+=Ae<Z?1:0,Ae=Ae+ce>>>0,ee+=Ae<ce?1:0;var Ee=R+C+H+le+ee;return Ee>>>0}ct.sum64_4_hi=S;function j(R,I,C,Y,H,Z,le,ce){var ee=I+Y+Z+ce;return ee>>>0}ct.sum64_4_lo=j;function E(R,I,C,Y,H,Z,le,ce,ee,Ae){var Ee=0,ue=I;ue=ue+Y>>>0,Ee+=ue<I?1:0,ue=ue+Z>>>0,Ee+=ue<Z?1:0,ue=ue+ce>>>0,Ee+=ue<ce?1:0,ue=ue+Ae>>>0,Ee+=ue<Ae?1:0;var oe=R+C+H+le+ee+Ee;return oe>>>0}ct.sum64_5_hi=E;function U(R,I,C,Y,H,Z,le,ce,ee,Ae){var Ee=I+Y+Z+ce+Ae;return Ee>>>0}ct.sum64_5_lo=U;function K(R,I,C){var Y=I<<32-C|R>>>C;return Y>>>0}ct.rotr64_hi=K;function _(R,I,C){var Y=R<<32-C|I>>>C;return Y>>>0}ct.rotr64_lo=_;function O(R,I,C){return R>>>C}ct.shr64_hi=O;function P(R,I,C){var Y=R<<32-C|I>>>C;return Y>>>0}return ct.shr64_lo=P,ct}var O1={},Xw;function jm(){if(Xw)return O1;Xw=1;var i=en(),r=Em();function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return O1.BlockHash=o,o.prototype.update=function(t,e){if(t=i.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){t=this.pending;var a=t.length%this._delta8;this.pending=t.slice(t.length-a,t.length),this.pending.length===0&&(this.pending=null),t=i.join32(t,0,t.length-a,this.endian);for(var u=0;u<t.length;u+=this._delta32)this._update(t,u,u+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),r(this.pending===null),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,a=e-(t+this.padLength)%e,u=new Array(a+this.padLength);u[0]=128;for(var c=1;c<a;c++)u[c]=0;if(t<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)u[c++]=0;u[c++]=0,u[c++]=0,u[c++]=0,u[c++]=0,u[c++]=t>>>24&255,u[c++]=t>>>16&255,u[c++]=t>>>8&255,u[c++]=t&255}else for(u[c++]=t&255,u[c++]=t>>>8&255,u[c++]=t>>>16&255,u[c++]=t>>>24&255,u[c++]=0,u[c++]=0,u[c++]=0,u[c++]=0,s=8;s<this.padLength;s++)u[c++]=0;return u},O1}var Ca={},Jr={},zw;function r5(){if(zw)return Jr;zw=1;var i=en(),r=i.rotr32;function o(l,d,f,h){if(l===0)return n(d,f,h);if(l===1||l===3)return e(d,f,h);if(l===2)return t(d,f,h)}Jr.ft_1=o;function n(l,d,f){return l&d^~l&f}Jr.ch32=n;function t(l,d,f){return l&d^l&f^d&f}Jr.maj32=t;function e(l,d,f){return l^d^f}Jr.p32=e;function a(l){return r(l,2)^r(l,13)^r(l,22)}Jr.s0_256=a;function u(l){return r(l,6)^r(l,11)^r(l,25)}Jr.s1_256=u;function c(l){return r(l,7)^r(l,18)^l>>>3}Jr.g0_256=c;function s(l){return r(l,17)^r(l,19)^l>>>10}return Jr.g1_256=s,Jr}var S1,Hw;function JC(){if(Hw)return S1;Hw=1;var i=en(),r=jm(),o=r5(),n=i.rotl32,t=i.sum32,e=i.sum32_5,a=o.ft_1,u=r.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function s(){if(!(this instanceof s))return new s;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return i.inherits(s,u),S1=s,s.blockSize=512,s.outSize=160,s.hmacStrength=80,s.padLength=64,s.prototype._update=function(d,f){for(var h=this.W,p=0;p<16;p++)h[p]=d[f+p];for(;p<h.length;p++)h[p]=n(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);var y=this.h[0],b=this.h[1],v=this.h[2],F=this.h[3],T=this.h[4];for(p=0;p<h.length;p++){var S=~~(p/20),j=e(n(y,5),a(S,b,v,F),T,h[p],c[S]);T=F,F=v,v=n(b,30),b=y,y=j}this.h[0]=t(this.h[0],y),this.h[1]=t(this.h[1],b),this.h[2]=t(this.h[2],v),this.h[3]=t(this.h[3],F),this.h[4]=t(this.h[4],T)},s.prototype._digest=function(d){return d==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")},S1}var F1,$w;function n5(){if($w)return F1;$w=1;var i=en(),r=jm(),o=r5(),n=Em(),t=i.sum32,e=i.sum32_4,a=i.sum32_5,u=o.ch32,c=o.maj32,s=o.s0_256,l=o.s1_256,d=o.g0_256,f=o.g1_256,h=r.BlockHash,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;h.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=p,this.W=new Array(64)}return i.inherits(y,h),F1=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(v,F){for(var T=this.W,S=0;S<16;S++)T[S]=v[F+S];for(;S<T.length;S++)T[S]=e(f(T[S-2]),T[S-7],d(T[S-15]),T[S-16]);var j=this.h[0],E=this.h[1],U=this.h[2],K=this.h[3],_=this.h[4],O=this.h[5],P=this.h[6],R=this.h[7];for(n(this.k.length===T.length),S=0;S<T.length;S++){var I=a(R,l(_),u(_,O,P),this.k[S],T[S]),C=t(s(j),c(j,E,U));R=P,P=O,O=_,_=t(K,I),K=U,U=E,E=j,j=t(I,C)}this.h[0]=t(this.h[0],j),this.h[1]=t(this.h[1],E),this.h[2]=t(this.h[2],U),this.h[3]=t(this.h[3],K),this.h[4]=t(this.h[4],_),this.h[5]=t(this.h[5],O),this.h[6]=t(this.h[6],P),this.h[7]=t(this.h[7],R)},y.prototype._digest=function(v){return v==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")},F1}var A1,Jw;function KC(){if(Jw)return A1;Jw=1;var i=en(),r=n5();function o(){if(!(this instanceof o))return new o;r.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return i.inherits(o,r),A1=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(t){return t==="hex"?i.toHex32(this.h.slice(0,7),"big"):i.split32(this.h.slice(0,7),"big")},A1}var w1,Kw;function i5(){if(Kw)return w1;Kw=1;var i=en(),r=jm(),o=Em(),n=i.rotr64_hi,t=i.rotr64_lo,e=i.shr64_hi,a=i.shr64_lo,u=i.sum64,c=i.sum64_hi,s=i.sum64_lo,l=i.sum64_4_hi,d=i.sum64_4_lo,f=i.sum64_5_hi,h=i.sum64_5_lo,p=r.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;p.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}i.inherits(b,p),w1=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(C,Y){for(var H=this.W,Z=0;Z<32;Z++)H[Z]=C[Y+Z];for(;Z<H.length;Z+=2){var le=P(H[Z-4],H[Z-3]),ce=R(H[Z-4],H[Z-3]),ee=H[Z-14],Ae=H[Z-13],Ee=_(H[Z-30],H[Z-29]),ue=O(H[Z-30],H[Z-29]),oe=H[Z-32],Re=H[Z-31];H[Z]=l(le,ce,ee,Ae,Ee,ue,oe,Re),H[Z+1]=d(le,ce,ee,Ae,Ee,ue,oe,Re)}},b.prototype._update=function(C,Y){this._prepareBlock(C,Y);var H=this.W,Z=this.h[0],le=this.h[1],ce=this.h[2],ee=this.h[3],Ae=this.h[4],Ee=this.h[5],ue=this.h[6],oe=this.h[7],Re=this.h[8],Se=this.h[9],Pe=this.h[10],we=this.h[11],Ie=this.h[12],N=this.h[13],m=this.h[14],A=this.h[15];o(this.k.length===H.length);for(var g=0;g<H.length;g+=2){var w=m,D=A,B=U(Re,Se),q=K(Re,Se),Q=v(Re,Se,Pe,we,Ie),$=F(Re,Se,Pe,we,Ie,N),X=this.k[g],te=this.k[g+1],me=H[g],_e=H[g+1],ge=f(w,D,B,q,Q,$,X,te,me,_e),G=h(w,D,B,q,Q,$,X,te,me,_e);w=j(Z,le),D=E(Z,le),B=T(Z,le,ce,ee,Ae),q=S(Z,le,ce,ee,Ae,Ee);var z=c(w,D,B,q),J=s(w,D,B,q);m=Ie,A=N,Ie=Pe,N=we,Pe=Re,we=Se,Re=c(ue,oe,ge,G),Se=s(oe,oe,ge,G),ue=Ae,oe=Ee,Ae=ce,Ee=ee,ce=Z,ee=le,Z=c(ge,G,z,J),le=s(ge,G,z,J)}u(this.h,0,Z,le),u(this.h,2,ce,ee),u(this.h,4,Ae,Ee),u(this.h,6,ue,oe),u(this.h,8,Re,Se),u(this.h,10,Pe,we),u(this.h,12,Ie,N),u(this.h,14,m,A)},b.prototype._digest=function(C){return C==="hex"?i.toHex32(this.h,"big"):i.split32(this.h,"big")};function v(I,C,Y,H,Z){var le=I&Y^~I&Z;return le<0&&(le+=4294967296),le}function F(I,C,Y,H,Z,le){var ce=C&H^~C&le;return ce<0&&(ce+=4294967296),ce}function T(I,C,Y,H,Z){var le=I&Y^I&Z^Y&Z;return le<0&&(le+=4294967296),le}function S(I,C,Y,H,Z,le){var ce=C&H^C&le^H&le;return ce<0&&(ce+=4294967296),ce}function j(I,C){var Y=n(I,C,28),H=n(C,I,2),Z=n(C,I,7),le=Y^H^Z;return le<0&&(le+=4294967296),le}function E(I,C){var Y=t(I,C,28),H=t(C,I,2),Z=t(C,I,7),le=Y^H^Z;return le<0&&(le+=4294967296),le}function U(I,C){var Y=n(I,C,14),H=n(I,C,18),Z=n(C,I,9),le=Y^H^Z;return le<0&&(le+=4294967296),le}function K(I,C){var Y=t(I,C,14),H=t(I,C,18),Z=t(C,I,9),le=Y^H^Z;return le<0&&(le+=4294967296),le}function _(I,C){var Y=n(I,C,1),H=n(I,C,8),Z=e(I,C,7),le=Y^H^Z;return le<0&&(le+=4294967296),le}function O(I,C){var Y=t(I,C,1),H=t(I,C,8),Z=a(I,C,7),le=Y^H^Z;return le<0&&(le+=4294967296),le}function P(I,C){var Y=n(I,C,19),H=n(C,I,29),Z=e(I,C,6),le=Y^H^Z;return le<0&&(le+=4294967296),le}function R(I,C){var Y=t(I,C,19),H=t(C,I,29),Z=a(I,C,6),le=Y^H^Z;return le<0&&(le+=4294967296),le}return w1}var E1,Yw;function YC(){if(Yw)return E1;Yw=1;var i=en(),r=i5();function o(){if(!(this instanceof o))return new o;r.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return i.inherits(o,r),E1=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(t){return t==="hex"?i.toHex32(this.h.slice(0,12),"big"):i.split32(this.h.slice(0,12),"big")},E1}var Ww;function WC(){return Ww||(Ww=1,Ca.sha1=JC(),Ca.sha224=KC(),Ca.sha256=n5(),Ca.sha384=YC(),Ca.sha512=i5()),Ca}var j1={},Zw;function ZC(){if(Zw)return j1;Zw=1;var i=en(),r=jm(),o=i.rotl32,n=i.sum32,t=i.sum32_3,e=i.sum32_4,a=r.BlockHash;function u(){if(!(this instanceof u))return new u;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}i.inherits(u,a),j1.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(b,v){for(var F=this.h[0],T=this.h[1],S=this.h[2],j=this.h[3],E=this.h[4],U=F,K=T,_=S,O=j,P=E,R=0;R<80;R++){var I=n(o(e(F,c(R,T,S,j),b[d[R]+v],s(R)),h[R]),E);F=E,E=j,j=o(S,10),S=T,T=I,I=n(o(e(U,c(79-R,K,_,O),b[f[R]+v],l(R)),p[R]),P),U=P,P=O,O=o(_,10),_=K,K=I}I=t(this.h[1],S,O),this.h[1]=t(this.h[2],j,P),this.h[2]=t(this.h[3],E,U),this.h[3]=t(this.h[4],F,K),this.h[4]=t(this.h[0],T,_),this.h[0]=I},u.prototype._digest=function(b){return b==="hex"?i.toHex32(this.h,"little"):i.split32(this.h,"little")};function c(y,b,v,F){return y<=15?b^v^F:y<=31?b&v|~b&F:y<=47?(b|~v)^F:y<=63?b&F|v&~F:b^(v|~F)}function s(y){return y<=15?0:y<=31?1518500249:y<=47?1859775393:y<=63?2400959708:2840853838}function l(y){return y<=15?1352829926:y<=31?1548603684:y<=47?1836072691:y<=63?2053994217:0}var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],p=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return j1}var R1,kw;function kC(){if(kw)return R1;kw=1;var i=en(),r=Em();function o(n,t,e){if(!(this instanceof o))return new o(n,t,e);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(i.toArray(t,e))}return R1=o,o.prototype._init=function(t){t.length>this.blockSize&&(t=new this.Hash().update(t).digest()),r(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=new this.Hash().update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=new this.Hash().update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)},R1}var eE;function eb(){return eE||(eE=1,(function(i){var r=i;r.utils=en(),r.common=jm(),r.sha=WC(),r.ripemd=ZC(),r.hmac=kC(),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160})(v1)),v1}var tE;function eQ(){if(tE)return dp;tE=1,Object.defineProperty(dp,"__esModule",{value:!0}),dp.TermFunctionSha1=void 0;const i=k(),r=W(),o=eb();let n=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.SHA1,overloads:(0,r.declare)(r.SparqlOperator.SHA1).onString1Typed(()=>e=>(0,r.string)((0,o.sha1)().update(e).digest("hex"))).collect()})}};return dp.TermFunctionSha1=n,dp}var rE;function tQ(){if(rE)return lp;rE=1,Object.defineProperty(lp,"__esModule",{value:!0}),lp.ActorFunctionFactoryTermSha1=void 0;const i=k(),r=W(),o=eQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.SHA1],termFunction:!0})}async run(e){return new o.TermFunctionSha1}};return lp.ActorFunctionFactoryTermSha1=n,lp}var nE;function rQ(){return nE||(nE=1,(function(i){var r=Ba&&Ba.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ba&&Ba.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(tQ(),i)})(Ba)),Ba}var Qa={},fp={},pp={},iE;function nQ(){if(iE)return pp;iE=1,Object.defineProperty(pp,"__esModule",{value:!0}),pp.TermFunctionSeconds=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.SECONDS,overloads:(0,r.declare)(r.SparqlOperator.SECONDS).onDateTime1(()=>t=>(0,r.decimal)(t.typedValue.seconds)).set([r.TypeURL.XSD_TIME],()=>([t])=>(0,r.integer)(t.typedValue.seconds)).collect()})}};return pp.TermFunctionSeconds=o,pp}var aE;function iQ(){if(aE)return fp;aE=1,Object.defineProperty(fp,"__esModule",{value:!0}),fp.ActorFunctionFactoryTermSeconds=void 0;const i=k(),r=W(),o=nQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.SECONDS],termFunction:!0})}async run(e){return new o.TermFunctionSeconds}};return fp.ActorFunctionFactoryTermSeconds=n,fp}var oE;function aQ(){return oE||(oE=1,(function(i){var r=Qa&&Qa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Qa&&Qa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(iQ(),i)})(Qa)),Qa}var Ua={},hp={},yp={},uE;function oQ(){if(uE)return yp;uE=1,Object.defineProperty(yp,"__esModule",{value:!0}),yp.TermFunctionSha256=void 0;const i=k(),r=W(),o=eb();let n=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.SHA256,overloads:(0,r.declare)(r.SparqlOperator.SHA256).onString1Typed(()=>e=>(0,r.string)((0,o.sha256)().update(e).digest("hex"))).collect()})}};return yp.TermFunctionSha256=n,yp}var sE;function uQ(){if(sE)return hp;sE=1,Object.defineProperty(hp,"__esModule",{value:!0}),hp.ActorFunctionFactoryTermSha256=void 0;const i=k(),r=W(),o=oQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.SHA256],termFunction:!0})}async run(e){return new o.TermFunctionSha256}};return hp.ActorFunctionFactoryTermSha256=n,hp}var cE;function sQ(){return cE||(cE=1,(function(i){var r=Ua&&Ua.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ua&&Ua.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(uQ(),i)})(Ua)),Ua}var Va={},_p={},mp={},lE;function cQ(){if(lE)return mp;lE=1,Object.defineProperty(mp,"__esModule",{value:!0}),mp.TermFunctionSha384=void 0;const i=k(),r=W(),o=eb();let n=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.SHA384,overloads:(0,r.declare)(r.SparqlOperator.SHA384).onString1Typed(()=>e=>(0,r.string)((0,o.sha384)().update(e).digest("hex"))).collect()})}};return mp.TermFunctionSha384=n,mp}var dE;function lQ(){if(dE)return _p;dE=1,Object.defineProperty(_p,"__esModule",{value:!0}),_p.ActorFunctionFactoryTermSha384=void 0;const i=k(),r=W(),o=cQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.SHA384],termFunction:!0})}async run(e){return new o.TermFunctionSha384}};return _p.ActorFunctionFactoryTermSha384=n,_p}var fE;function dQ(){return fE||(fE=1,(function(i){var r=Va&&Va.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Va&&Va.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(lQ(),i)})(Va)),Va}var Ga={},gp={},bp={},pE;function fQ(){if(pE)return bp;pE=1,Object.defineProperty(bp,"__esModule",{value:!0}),bp.TermFunctionSha512=void 0;const i=k(),r=W(),o=eb();let n=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.SHA512,overloads:(0,r.declare)(r.SparqlOperator.SHA512).onString1Typed(()=>e=>(0,r.string)((0,o.sha512)().update(e).digest("hex"))).collect()})}};return bp.TermFunctionSha512=n,bp}var hE;function pQ(){if(hE)return gp;hE=1,Object.defineProperty(gp,"__esModule",{value:!0}),gp.ActorFunctionFactoryTermSha512=void 0;const i=k(),r=W(),o=fQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.SHA512],termFunction:!0})}async run(e){return new o.TermFunctionSha512}};return gp.ActorFunctionFactoryTermSha512=n,gp}var yE;function hQ(){return yE||(yE=1,(function(i){var r=Ga&&Ga.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ga&&Ga.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(pQ(),i)})(Ga)),Ga}var Xa={},vp={},Tp={},_E;function yQ(){if(_E)return Tp;_E=1,Object.defineProperty(Tp,"__esModule",{value:!0}),Tp.TermFunctionStrAfter=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.STRAFTER,overloads:(0,r.declare)(r.SparqlOperator.STRAFTER).onBinaryTyped([r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING],()=>(t,e)=>(0,r.string)(t.slice(t.indexOf(e)).slice(e.length))).onBinary([r.TypeURL.RDF_LANG_STRING,r.TypeURL.XSD_STRING],()=>(t,e)=>{const[a,u]=[t.typedValue,e.typedValue],c=a.slice(a.indexOf(u)).slice(u.length);return c||!u?(0,r.langString)(c,t.language):(0,r.string)(c)}).onBinary([r.TypeURL.RDF_LANG_STRING,r.TypeURL.RDF_LANG_STRING],()=>(t,e)=>{if(t.language!==e.language)throw new r.IncompatibleLanguageOperation(t,e);const[a,u]=[t.typedValue,e.typedValue],c=a.slice(a.indexOf(u)).slice(u.length);return c||!u?(0,r.langString)(c,t.language):(0,r.string)(c)}).collect()})}};return Tp.TermFunctionStrAfter=o,Tp}var mE;function _Q(){if(mE)return vp;mE=1,Object.defineProperty(vp,"__esModule",{value:!0}),vp.ActorFunctionFactoryTermStrAfter=void 0;const i=k(),r=W(),o=yQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.STRAFTER],termFunction:!0})}async run(e){return new o.TermFunctionStrAfter}};return vp.ActorFunctionFactoryTermStrAfter=n,vp}var gE;function mQ(){return gE||(gE=1,(function(i){var r=Xa&&Xa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Xa&&Xa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(_Q(),i)})(Xa)),Xa}var za={},Op={},Sp={},bE;function gQ(){if(bE)return Sp;bE=1,Object.defineProperty(Sp,"__esModule",{value:!0}),Sp.TermFunctionStrBefore=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.STRBEFORE,overloads:(0,r.declare)(r.SparqlOperator.STRBEFORE).onBinaryTyped([r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING],()=>(t,e)=>(0,r.string)(t.slice(0,Math.max(0,t.indexOf(e))))).onBinary([r.TypeURL.RDF_LANG_STRING,r.TypeURL.XSD_STRING],()=>(t,e)=>{const[a,u]=[t.typedValue,e.typedValue],c=t.typedValue.slice(0,Math.max(0,a.indexOf(u)));return c||!u?(0,r.langString)(c,t.language):(0,r.string)(c)}).onBinary([r.TypeURL.RDF_LANG_STRING,r.TypeURL.RDF_LANG_STRING],()=>(t,e)=>{if(t.language!==e.language)throw new r.IncompatibleLanguageOperation(t,e);const[a,u]=[t.typedValue,e.typedValue],c=t.typedValue.slice(0,Math.max(0,a.indexOf(u)));return c||!u?(0,r.langString)(c,t.language):(0,r.string)(c)}).collect()})}};return Sp.TermFunctionStrBefore=o,Sp}var vE;function bQ(){if(vE)return Op;vE=1,Object.defineProperty(Op,"__esModule",{value:!0}),Op.ActorFunctionFactoryTermStrBefore=void 0;const i=k(),r=W(),o=gQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.STRBEFORE],termFunction:!0})}async run(e){return new o.TermFunctionStrBefore}};return Op.ActorFunctionFactoryTermStrBefore=n,Op}var TE;function vQ(){return TE||(TE=1,(function(i){var r=za&&za.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=za&&za.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(bQ(),i)})(za)),za}var Ha={},Fp={},Ap={},OE;function TQ(){if(OE)return Ap;OE=1,Object.defineProperty(Ap,"__esModule",{value:!0}),Ap.TermFunctionStrDt=void 0;const i=k(),r=Fe(),o=W();let n=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:o.SparqlOperator.STRDT,overloads:(0,o.declare)(o.SparqlOperator.STRDT).set([o.TypeURL.XSD_STRING,"namedNode"],e=>([a,u])=>{const c=e.context.getSafe(r.KeysInitQuery.dataFactory),s=c.literal(a.typedValue,c.namedNode(u.value));return new o.TermTransformer(e.context.getSafe(r.KeysExpressionEvaluator.superTypeProvider)).transformLiteral(s)}).collect()})}};return Ap.TermFunctionStrDt=n,Ap}var SE;function OQ(){if(SE)return Fp;SE=1,Object.defineProperty(Fp,"__esModule",{value:!0}),Fp.ActorFunctionFactoryTermStrDt=void 0;const i=k(),r=W(),o=TQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.STRDT],termFunction:!0})}async run(e){return new o.TermFunctionStrDt}};return Fp.ActorFunctionFactoryTermStrDt=n,Fp}var FE;function SQ(){return FE||(FE=1,(function(i){var r=Ha&&Ha.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ha&&Ha.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(OQ(),i)})(Ha)),Ha}var $a={},wp={},Ep={},AE;function FQ(){if(AE)return Ep;AE=1,Object.defineProperty(Ep,"__esModule",{value:!0}),Ep.TermFunctionStrEnds=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.STRENDS,overloads:(0,r.declare)(r.SparqlOperator.STRENDS).onBinaryTyped([r.TypeAlias.SPARQL_STRINGLY,r.TypeURL.XSD_STRING],()=>(t,e)=>(0,r.bool)(t.endsWith(e))).onBinary([r.TypeURL.RDF_LANG_STRING,r.TypeURL.RDF_LANG_STRING],()=>(t,e)=>{if(t.language!==e.language)throw new r.IncompatibleLanguageOperation(t,e);return(0,r.bool)(t.typedValue.endsWith(e.typedValue))}).collect()})}};return Ep.TermFunctionStrEnds=o,Ep}var wE;function AQ(){if(wE)return wp;wE=1,Object.defineProperty(wp,"__esModule",{value:!0}),wp.ActorFunctionFactoryTermStrEnds=void 0;const i=k(),r=W(),o=FQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.STRENDS],termFunction:!0})}async run(e){return new o.TermFunctionStrEnds}};return wp.ActorFunctionFactoryTermStrEnds=n,wp}var EE;function wQ(){return EE||(EE=1,(function(i){var r=$a&&$a.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=$a&&$a.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(AQ(),i)})($a)),$a}var Ja={},jp={},Rp={},jE;function EQ(){if(jE)return Rp;jE=1,Object.defineProperty(Rp,"__esModule",{value:!0}),Rp.TermFunctionStrLang=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.STRLANG,overloads:(0,r.declare)(r.SparqlOperator.STRLANG).onBinaryTyped([r.TypeURL.XSD_STRING,r.TypeURL.XSD_STRING],()=>(t,e)=>new r.LangStringLiteral(t,e.toLowerCase())).collect()})}};return Rp.TermFunctionStrLang=o,Rp}var RE;function jQ(){if(RE)return jp;RE=1,Object.defineProperty(jp,"__esModule",{value:!0}),jp.ActorFunctionFactoryTermStrLang=void 0;const i=k(),r=W(),o=EQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.STRLANG],termFunction:!0})}async run(e){return new o.TermFunctionStrLang}};return jp.ActorFunctionFactoryTermStrLang=n,jp}var DE;function RQ(){return DE||(DE=1,(function(i){var r=Ja&&Ja.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ja&&Ja.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(jQ(),i)})(Ja)),Ja}var Ka={},Dp={},Pp={},PE;function DQ(){if(PE)return Pp;PE=1,Object.defineProperty(Pp,"__esModule",{value:!0}),Pp.TermFunctionStrLen=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.STRLEN,overloads:(0,r.declare)(r.SparqlOperator.STRLEN).onStringly1(()=>t=>(0,r.integer)([...t.typedValue].length)).collect()})}};return Pp.TermFunctionStrLen=o,Pp}var ME;function PQ(){if(ME)return Dp;ME=1,Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.ActorFunctionFactoryTermStrLen=void 0;const i=k(),r=W(),o=DQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.STRLEN],termFunction:!0})}async run(e){return new o.TermFunctionStrLen}};return Dp.ActorFunctionFactoryTermStrLen=n,Dp}var NE;function MQ(){return NE||(NE=1,(function(i){var r=Ka&&Ka.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ka&&Ka.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(PQ(),i)})(Ka)),Ka}var Ya={},Mp={},Np={},IE;function NQ(){if(IE)return Np;IE=1,Object.defineProperty(Np,"__esModule",{value:!0}),Np.TermFunctionStrStarts=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:r.SparqlOperator.STRSTARTS,overloads:(0,r.declare)(r.SparqlOperator.STRSTARTS).onBinaryTyped([r.TypeAlias.SPARQL_STRINGLY,r.TypeURL.XSD_STRING],()=>(t,e)=>(0,r.bool)(t.startsWith(e))).onBinary([r.TypeURL.RDF_LANG_STRING,r.TypeURL.RDF_LANG_STRING],()=>(t,e)=>{if(t.language!==e.language)throw new r.IncompatibleLanguageOperation(t,e);return(0,r.bool)(t.typedValue.startsWith(e.typedValue))}).collect()})}};return Np.TermFunctionStrStarts=o,Np}var qE;function IQ(){if(qE)return Mp;qE=1,Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.ActorFunctionFactoryTermStrStarts=void 0;const i=k(),r=W(),o=NQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.STRSTARTS],termFunction:!0})}async run(e){return new o.TermFunctionStrStarts}};return Mp.ActorFunctionFactoryTermStrStarts=n,Mp}var LE;function qQ(){return LE||(LE=1,(function(i){var r=Ya&&Ya.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ya&&Ya.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(IQ(),i)})(Ya)),Ya}var Wa={},Ip={},qp={},xE;function LQ(){if(xE)return qp;xE=1,Object.defineProperty(qp,"__esModule",{value:!0}),qp.TermFunctionStr=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.STR,overloads:(0,r.declare)(r.SparqlOperator.STR).onTerm1(()=>t=>(0,r.string)(t.str())).collect()})}};return qp.TermFunctionStr=o,qp}var BE;function xQ(){if(BE)return Ip;BE=1,Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.ActorFunctionFactoryTermStr=void 0;const i=k(),r=W(),o=LQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.STR],termFunction:!0})}async run(e){return new o.TermFunctionStr}};return Ip.ActorFunctionFactoryTermStr=n,Ip}var CE;function BQ(){return CE||(CE=1,(function(i){var r=Wa&&Wa.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Wa&&Wa.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(xQ(),i)})(Wa)),Wa}var Za={},Lp={},xp={},D1={},og={},QE;function CQ(){return QE||(QE=1,Object.defineProperty(og,"__esModule",{value:!0}),og.default="ffffffff-ffff-ffff-ffff-ffffffffffff"),og}var ug={},UE;function QQ(){return UE||(UE=1,Object.defineProperty(ug,"__esModule",{value:!0}),ug.default="00000000-0000-0000-0000-000000000000"),ug}var sg={},cg={},lg={},VE;function UQ(){return VE||(VE=1,Object.defineProperty(lg,"__esModule",{value:!0}),lg.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i),lg}var GE;function tb(){if(GE)return cg;GE=1,Object.defineProperty(cg,"__esModule",{value:!0});const i=UQ();function r(o){return typeof o=="string"&&i.default.test(o)}return cg.default=r,cg}var XE;function rb(){if(XE)return sg;XE=1,Object.defineProperty(sg,"__esModule",{value:!0});const i=tb();function r(o){if(!(0,i.default)(o))throw TypeError("Invalid UUID");let n;return Uint8Array.of((n=parseInt(o.slice(0,8),16))>>>24,n>>>16&255,n>>>8&255,n&255,(n=parseInt(o.slice(9,13),16))>>>8,n&255,(n=parseInt(o.slice(14,18),16))>>>8,n&255,(n=parseInt(o.slice(19,23),16))>>>8,n&255,(n=parseInt(o.slice(24,36),16))/1099511627776&255,n/4294967296&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255)}return sg.default=r,sg}var Ns={},zE;function Dn(){if(zE)return Ns;zE=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.unsafeStringify=void 0;const i=tb(),r=[];for(let t=0;t<256;++t)r.push((t+256).toString(16).slice(1));function o(t,e=0){return(r[t[e+0]]+r[t[e+1]]+r[t[e+2]]+r[t[e+3]]+"-"+r[t[e+4]]+r[t[e+5]]+"-"+r[t[e+6]]+r[t[e+7]]+"-"+r[t[e+8]]+r[t[e+9]]+"-"+r[t[e+10]]+r[t[e+11]]+r[t[e+12]]+r[t[e+13]]+r[t[e+14]]+r[t[e+15]]).toLowerCase()}Ns.unsafeStringify=o;function n(t,e=0){const a=o(t,e);if(!(0,i.default)(a))throw TypeError("Stringified UUID is invalid");return a}return Ns.default=n,Ns}var Is={},dg={},HE;function pv(){if(HE)return dg;HE=1,Object.defineProperty(dg,"__esModule",{value:!0});let i;const r=new Uint8Array(16);function o(){if(!i){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");i=crypto.getRandomValues.bind(crypto)}return i(r)}return dg.default=o,dg}var $E;function a5(){if($E)return Is;$E=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.updateV1State=void 0;const i=pv(),r=Dn(),o={};function n(a,u,c){let s;const l=a?._v6??!1;if(a){const d=Object.keys(a);d.length===1&&d[0]==="_v6"&&(a=void 0)}if(a)s=e(a.random??a.rng?.()??(0,i.default)(),a.msecs,a.nsecs,a.clockseq,a.node,u,c);else{const d=Date.now(),f=(0,i.default)();t(o,d,f),s=e(f,o.msecs,o.nsecs,l?void 0:o.clockseq,l?void 0:o.node,u,c)}return u??(0,r.unsafeStringify)(s)}function t(a,u,c){return a.msecs??(a.msecs=-1/0),a.nsecs??(a.nsecs=0),u===a.msecs?(a.nsecs++,a.nsecs>=1e4&&(a.node=void 0,a.nsecs=0)):u>a.msecs?a.nsecs=0:u<a.msecs&&(a.node=void 0),a.node||(a.node=c.slice(10,16),a.node[0]|=1,a.clockseq=(c[8]<<8|c[9])&16383),a.msecs=u,a}Is.updateV1State=t;function e(a,u,c,s,l,d,f=0){if(a.length<16)throw new Error("Random bytes length must be >= 16");if(!d)d=new Uint8Array(16),f=0;else if(f<0||f+16>d.length)throw new RangeError(`UUID byte range ${f}:${f+15} is out of buffer bounds`);u??(u=Date.now()),c??(c=0),s??(s=(a[8]<<8|a[9])&16383),l??(l=a.slice(10,16)),u+=122192928e5;const h=((u&268435455)*1e4+c)%4294967296;d[f++]=h>>>24&255,d[f++]=h>>>16&255,d[f++]=h>>>8&255,d[f++]=h&255;const p=u/4294967296*1e4&268435455;d[f++]=p>>>8&255,d[f++]=p&255,d[f++]=p>>>24&15|16,d[f++]=p>>>16&255,d[f++]=s>>>8|128,d[f++]=s&255;for(let y=0;y<6;++y)d[f++]=l[y];return d}return Is.default=n,Is}var fg={},JE;function o5(){if(JE)return fg;JE=1,Object.defineProperty(fg,"__esModule",{value:!0});const i=rb(),r=Dn();function o(t){const e=typeof t=="string"?(0,i.default)(t):t,a=n(e);return typeof t=="string"?(0,r.unsafeStringify)(a):a}fg.default=o;function n(t){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}return fg}var P1={},pg={},KE;function VQ(){if(KE)return pg;KE=1,Object.defineProperty(pg,"__esModule",{value:!0});function i(f){const h=t(f),p=n(h,f.length*8);return r(p)}function r(f){const h=new Uint8Array(f.length*4);for(let p=0;p<f.length*4;p++)h[p]=f[p>>2]>>>p%4*8&255;return h}function o(f){return(f+64>>>9<<4)+14+1}function n(f,h){const p=new Uint32Array(o(h)).fill(0);p.set(f),p[h>>5]|=128<<h%32,p[p.length-1]=h,f=p;let y=1732584193,b=-271733879,v=-1732584194,F=271733878;for(let T=0;T<f.length;T+=16){const S=y,j=b,E=v,U=F;y=c(y,b,v,F,f[T],7,-680876936),F=c(F,y,b,v,f[T+1],12,-389564586),v=c(v,F,y,b,f[T+2],17,606105819),b=c(b,v,F,y,f[T+3],22,-1044525330),y=c(y,b,v,F,f[T+4],7,-176418897),F=c(F,y,b,v,f[T+5],12,1200080426),v=c(v,F,y,b,f[T+6],17,-1473231341),b=c(b,v,F,y,f[T+7],22,-45705983),y=c(y,b,v,F,f[T+8],7,1770035416),F=c(F,y,b,v,f[T+9],12,-1958414417),v=c(v,F,y,b,f[T+10],17,-42063),b=c(b,v,F,y,f[T+11],22,-1990404162),y=c(y,b,v,F,f[T+12],7,1804603682),F=c(F,y,b,v,f[T+13],12,-40341101),v=c(v,F,y,b,f[T+14],17,-1502002290),b=c(b,v,F,y,f[T+15],22,1236535329),y=s(y,b,v,F,f[T+1],5,-165796510),F=s(F,y,b,v,f[T+6],9,-1069501632),v=s(v,F,y,b,f[T+11],14,643717713),b=s(b,v,F,y,f[T],20,-373897302),y=s(y,b,v,F,f[T+5],5,-701558691),F=s(F,y,b,v,f[T+10],9,38016083),v=s(v,F,y,b,f[T+15],14,-660478335),b=s(b,v,F,y,f[T+4],20,-405537848),y=s(y,b,v,F,f[T+9],5,568446438),F=s(F,y,b,v,f[T+14],9,-1019803690),v=s(v,F,y,b,f[T+3],14,-187363961),b=s(b,v,F,y,f[T+8],20,1163531501),y=s(y,b,v,F,f[T+13],5,-1444681467),F=s(F,y,b,v,f[T+2],9,-51403784),v=s(v,F,y,b,f[T+7],14,1735328473),b=s(b,v,F,y,f[T+12],20,-1926607734),y=l(y,b,v,F,f[T+5],4,-378558),F=l(F,y,b,v,f[T+8],11,-2022574463),v=l(v,F,y,b,f[T+11],16,1839030562),b=l(b,v,F,y,f[T+14],23,-35309556),y=l(y,b,v,F,f[T+1],4,-1530992060),F=l(F,y,b,v,f[T+4],11,1272893353),v=l(v,F,y,b,f[T+7],16,-155497632),b=l(b,v,F,y,f[T+10],23,-1094730640),y=l(y,b,v,F,f[T+13],4,681279174),F=l(F,y,b,v,f[T],11,-358537222),v=l(v,F,y,b,f[T+3],16,-722521979),b=l(b,v,F,y,f[T+6],23,76029189),y=l(y,b,v,F,f[T+9],4,-640364487),F=l(F,y,b,v,f[T+12],11,-421815835),v=l(v,F,y,b,f[T+15],16,530742520),b=l(b,v,F,y,f[T+2],23,-995338651),y=d(y,b,v,F,f[T],6,-198630844),F=d(F,y,b,v,f[T+7],10,1126891415),v=d(v,F,y,b,f[T+14],15,-1416354905),b=d(b,v,F,y,f[T+5],21,-57434055),y=d(y,b,v,F,f[T+12],6,1700485571),F=d(F,y,b,v,f[T+3],10,-1894986606),v=d(v,F,y,b,f[T+10],15,-1051523),b=d(b,v,F,y,f[T+1],21,-2054922799),y=d(y,b,v,F,f[T+8],6,1873313359),F=d(F,y,b,v,f[T+15],10,-30611744),v=d(v,F,y,b,f[T+6],15,-1560198380),b=d(b,v,F,y,f[T+13],21,1309151649),y=d(y,b,v,F,f[T+4],6,-145523070),F=d(F,y,b,v,f[T+11],10,-1120210379),v=d(v,F,y,b,f[T+2],15,718787259),b=d(b,v,F,y,f[T+9],21,-343485551),y=e(y,S),b=e(b,j),v=e(v,E),F=e(F,U)}return Uint32Array.of(y,b,v,F)}function t(f){if(f.length===0)return new Uint32Array;const h=new Uint32Array(o(f.length*8)).fill(0);for(let p=0;p<f.length;p++)h[p>>2]|=(f[p]&255)<<p%4*8;return h}function e(f,h){const p=(f&65535)+(h&65535);return(f>>16)+(h>>16)+(p>>16)<<16|p&65535}function a(f,h){return f<<h|f>>>32-h}function u(f,h,p,y,b,v){return e(a(e(e(h,f),e(y,v)),b),p)}function c(f,h,p,y,b,v,F){return u(h&p|~h&y,f,h,b,v,F)}function s(f,h,p,y,b,v,F){return u(h&y|p&~y,f,h,b,v,F)}function l(f,h,p,y,b,v,F){return u(h^p^y,f,h,b,v,F)}function d(f,h,p,y,b,v,F){return u(p^(h|~y),f,h,b,v,F)}return pg.default=i,pg}var Kr={},YE;function Lg(){if(YE)return Kr;YE=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.URL=Kr.DNS=Kr.stringToBytes=void 0;const i=rb(),r=Dn();function o(t){t=unescape(encodeURIComponent(t));const e=new Uint8Array(t.length);for(let a=0;a<t.length;++a)e[a]=t.charCodeAt(a);return e}Kr.stringToBytes=o,Kr.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Kr.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function n(t,e,a,u,c,s){const l=typeof a=="string"?o(a):a,d=typeof u=="string"?(0,i.default)(u):u;if(typeof u=="string"&&(u=(0,i.default)(u)),u?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+l.length);if(f.set(d),f.set(l,d.length),f=e(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,c){s=s||0;for(let h=0;h<16;++h)c[s+h]=f[h];return c}return(0,r.unsafeStringify)(f)}return Kr.default=n,Kr}var WE;function GQ(){return WE||(WE=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.URL=i.DNS=void 0;const r=VQ(),o=Lg();var n=Lg();Object.defineProperty(i,"DNS",{enumerable:!0,get:function(){return n.DNS}}),Object.defineProperty(i,"URL",{enumerable:!0,get:function(){return n.URL}});function t(e,a,u,c){return(0,o.default)(48,r.default,e,a,u,c)}t.DNS=o.DNS,t.URL=o.URL,i.default=t})(P1)),P1}var hg={},yg={},ZE;function XQ(){if(ZE)return yg;ZE=1,Object.defineProperty(yg,"__esModule",{value:!0});const i=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);return yg.default={randomUUID:i},yg}var kE;function zQ(){if(kE)return hg;kE=1,Object.defineProperty(hg,"__esModule",{value:!0});const i=XQ(),r=pv(),o=Dn();function n(t,e,a){if(i.default.randomUUID&&!e&&!t)return i.default.randomUUID();t=t||{};const u=t.random??t.rng?.()??(0,r.default)();if(u.length<16)throw new Error("Random bytes length must be >= 16");if(u[6]=u[6]&15|64,u[8]=u[8]&63|128,e){if(a=a||0,a<0||a+16>e.length)throw new RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`);for(let c=0;c<16;++c)e[a+c]=u[c];return e}return(0,o.unsafeStringify)(u)}return hg.default=n,hg}var M1={},_g={},ej;function HQ(){if(ej)return _g;ej=1,Object.defineProperty(_g,"__esModule",{value:!0});function i(n,t,e,a){switch(n){case 0:return t&e^~t&a;case 1:return t^e^a;case 2:return t&e^t&a^e&a;case 3:return t^e^a}}function r(n,t){return n<<t|n>>>32-t}function o(n){const t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520],a=new Uint8Array(n.length+1);a.set(n),a[n.length]=128,n=a;const u=n.length/4+2,c=Math.ceil(u/16),s=new Array(c);for(let l=0;l<c;++l){const d=new Uint32Array(16);for(let f=0;f<16;++f)d[f]=n[l*64+f*4]<<24|n[l*64+f*4+1]<<16|n[l*64+f*4+2]<<8|n[l*64+f*4+3];s[l]=d}s[c-1][14]=(n.length-1)*8/Math.pow(2,32),s[c-1][14]=Math.floor(s[c-1][14]),s[c-1][15]=(n.length-1)*8&4294967295;for(let l=0;l<c;++l){const d=new Uint32Array(80);for(let v=0;v<16;++v)d[v]=s[l][v];for(let v=16;v<80;++v)d[v]=r(d[v-3]^d[v-8]^d[v-14]^d[v-16],1);let f=e[0],h=e[1],p=e[2],y=e[3],b=e[4];for(let v=0;v<80;++v){const F=Math.floor(v/20),T=r(f,5)+i(F,h,p,y)+b+t[F]+d[v]>>>0;b=y,y=p,p=r(h,30)>>>0,h=f,f=T}e[0]=e[0]+f>>>0,e[1]=e[1]+h>>>0,e[2]=e[2]+p>>>0,e[3]=e[3]+y>>>0,e[4]=e[4]+b>>>0}return Uint8Array.of(e[0]>>24,e[0]>>16,e[0]>>8,e[0],e[1]>>24,e[1]>>16,e[1]>>8,e[1],e[2]>>24,e[2]>>16,e[2]>>8,e[2],e[3]>>24,e[3]>>16,e[3]>>8,e[3],e[4]>>24,e[4]>>16,e[4]>>8,e[4])}return _g.default=o,_g}var tj;function $Q(){return tj||(tj=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.URL=i.DNS=void 0;const r=HQ(),o=Lg();var n=Lg();Object.defineProperty(i,"DNS",{enumerable:!0,get:function(){return n.DNS}}),Object.defineProperty(i,"URL",{enumerable:!0,get:function(){return n.URL}});function t(e,a,u,c){return(0,o.default)(80,r.default,e,a,u,c)}t.DNS=o.DNS,t.URL=o.URL,i.default=t})(M1)),M1}var mg={},rj;function JQ(){if(rj)return mg;rj=1,Object.defineProperty(mg,"__esModule",{value:!0});const i=Dn(),r=a5(),o=o5();function n(t,e,a){t??(t={}),a??(a=0);let u=(0,r.default)({...t,_v6:!0},new Uint8Array(16));if(u=(0,o.default)(u),e){for(let c=0;c<16;c++)e[a+c]=u[c];return e}return(0,i.unsafeStringify)(u)}return mg.default=n,mg}var gg={},nj;function KQ(){if(nj)return gg;nj=1,Object.defineProperty(gg,"__esModule",{value:!0});const i=rb(),r=Dn();function o(t){const e=typeof t=="string"?(0,i.default)(t):t,a=n(e);return typeof t=="string"?(0,r.unsafeStringify)(a):a}gg.default=o;function n(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}return gg}var qs={},ij;function YQ(){if(ij)return qs;ij=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.updateV7State=void 0;const i=pv(),r=Dn(),o={};function n(a,u,c){let s;if(a)s=e(a.random??a.rng?.()??(0,i.default)(),a.msecs,a.seq,u,c);else{const l=Date.now(),d=(0,i.default)();t(o,l,d),s=e(d,o.msecs,o.seq,u,c)}return u??(0,r.unsafeStringify)(s)}function t(a,u,c){return a.msecs??(a.msecs=-1/0),a.seq??(a.seq=0),u>a.msecs?(a.seq=c[6]<<23|c[7]<<16|c[8]<<8|c[9],a.msecs=u):(a.seq=a.seq+1|0,a.seq===0&&a.msecs++),a}qs.updateV7State=t;function e(a,u,c,s,l=0){if(a.length<16)throw new Error("Random bytes length must be >= 16");if(!s)s=new Uint8Array(16),l=0;else if(l<0||l+16>s.length)throw new RangeError(`UUID byte range ${l}:${l+15} is out of buffer bounds`);return u??(u=Date.now()),c??(c=a[6]*127<<24|a[7]<<16|a[8]<<8|a[9]),s[l++]=u/1099511627776&255,s[l++]=u/4294967296&255,s[l++]=u/16777216&255,s[l++]=u/65536&255,s[l++]=u/256&255,s[l++]=u&255,s[l++]=112|c>>>28&15,s[l++]=c>>>20&255,s[l++]=128|c>>>14&63,s[l++]=c>>>6&255,s[l++]=c<<2&255|a[10]&3,s[l++]=a[11],s[l++]=a[12],s[l++]=a[13],s[l++]=a[14],s[l++]=a[15],s}return qs.default=n,qs}var bg={},aj;function WQ(){if(aj)return bg;aj=1,Object.defineProperty(bg,"__esModule",{value:!0});const i=tb();function r(o){if(!(0,i.default)(o))throw TypeError("Invalid UUID");return parseInt(o.slice(14,15),16)}return bg.default=r,bg}var oj;function u5(){return oj||(oj=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.version=i.validate=i.v7=i.v6ToV1=i.v6=i.v5=i.v4=i.v3=i.v1ToV6=i.v1=i.stringify=i.parse=i.NIL=i.MAX=void 0;var r=CQ();Object.defineProperty(i,"MAX",{enumerable:!0,get:function(){return r.default}});var o=QQ();Object.defineProperty(i,"NIL",{enumerable:!0,get:function(){return o.default}});var n=rb();Object.defineProperty(i,"parse",{enumerable:!0,get:function(){return n.default}});var t=Dn();Object.defineProperty(i,"stringify",{enumerable:!0,get:function(){return t.default}});var e=a5();Object.defineProperty(i,"v1",{enumerable:!0,get:function(){return e.default}});var a=o5();Object.defineProperty(i,"v1ToV6",{enumerable:!0,get:function(){return a.default}});var u=GQ();Object.defineProperty(i,"v3",{enumerable:!0,get:function(){return u.default}});var c=zQ();Object.defineProperty(i,"v4",{enumerable:!0,get:function(){return c.default}});var s=$Q();Object.defineProperty(i,"v5",{enumerable:!0,get:function(){return s.default}});var l=JQ();Object.defineProperty(i,"v6",{enumerable:!0,get:function(){return l.default}});var d=KQ();Object.defineProperty(i,"v6ToV1",{enumerable:!0,get:function(){return d.default}});var f=YQ();Object.defineProperty(i,"v7",{enumerable:!0,get:function(){return f.default}});var h=tb();Object.defineProperty(i,"validate",{enumerable:!0,get:function(){return h.default}});var p=WQ();Object.defineProperty(i,"version",{enumerable:!0,get:function(){return p.default}})})(D1)),D1}var uj;function ZQ(){if(uj)return xp;uj=1,Object.defineProperty(xp,"__esModule",{value:!0}),xp.TermFunctionStrUuid=void 0;const i=k(),r=W(),o=u5();let n=class extends i.TermFunctionBase{constructor(){super({arity:0,operator:r.SparqlOperator.STRUUID,overloads:(0,r.declare)(r.SparqlOperator.STRUUID).set([],()=>()=>(0,r.string)(o.v4())).collect()})}};return xp.TermFunctionStrUuid=n,xp}var sj;function kQ(){if(sj)return Lp;sj=1,Object.defineProperty(Lp,"__esModule",{value:!0}),Lp.ActorFunctionFactoryTermStrUuid=void 0;const i=k(),r=W(),o=ZQ();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.STRUUID],termFunction:!0})}async run(e){return new o.TermFunctionStrUuid}};return Lp.ActorFunctionFactoryTermStrUuid=n,Lp}var cj;function eU(){return cj||(cj=1,(function(i){var r=Za&&Za.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Za&&Za.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(kQ(),i)})(Za)),Za}var ka={},Bp={},Cp={},lj;function tU(){if(lj)return Cp;lj=1,Object.defineProperty(Cp,"__esModule",{value:!0}),Cp.TermFunctionSubStr=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:[2,3],operator:r.SparqlOperator.SUBSTR,overloads:(0,r.declare)(r.SparqlOperator.SUBSTR).onBinaryTyped([r.TypeURL.XSD_STRING,r.TypeURL.XSD_INTEGER],()=>(t,e)=>(0,r.string)([...t].slice(e-1).join(""))).onBinary([r.TypeURL.RDF_LANG_STRING,r.TypeURL.XSD_INTEGER],()=>(t,e)=>{const a=[...t.typedValue].slice(e.typedValue-1).join("");return(0,r.langString)(a,t.language)}).onTernaryTyped([r.TypeURL.XSD_STRING,r.TypeURL.XSD_INTEGER,r.TypeURL.XSD_INTEGER],()=>(t,e,a)=>(0,r.string)([...t].slice(e-1,a+e-1).join(""))).onTernary([r.TypeURL.RDF_LANG_STRING,r.TypeURL.XSD_INTEGER,r.TypeURL.XSD_INTEGER],()=>(t,e,a)=>{const u=[...t.typedValue].slice(e.typedValue-1,a.typedValue+e.typedValue-1).join("");return(0,r.langString)(u,t.language)}).collect()})}};return Cp.TermFunctionSubStr=o,Cp}var dj;function rU(){if(dj)return Bp;dj=1,Object.defineProperty(Bp,"__esModule",{value:!0}),Bp.ActorFunctionFactoryTermSubStr=void 0;const i=k(),r=W(),o=tU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.SUBSTR],termFunction:!0})}async run(e){return new o.TermFunctionSubStr}};return Bp.ActorFunctionFactoryTermSubStr=n,Bp}var fj;function nU(){return fj||(fj=1,(function(i){var r=ka&&ka.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ka&&ka.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(rU(),i)})(ka)),ka}var eo={},Qp={},Up={},pj;function iU(){if(pj)return Up;pj=1,Object.defineProperty(Up,"__esModule",{value:!0}),Up.TermFunctionTimezone=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.TIMEZONE,overloads:(0,r.declare)(r.SparqlOperator.TIMEZONE).onDateTime1(()=>t=>{const e={hours:t.typedValue.zoneHours,minutes:t.typedValue.zoneMinutes};if(e.hours===void 0&&e.minutes===void 0)throw new r.InvalidTimezoneCall(t.str());return new r.DayTimeDurationLiteral(e)}).copy({from:[r.TypeURL.XSD_DATE_TIME],to:[r.TypeURL.XSD_DATE]}).copy({from:[r.TypeURL.XSD_DATE_TIME],to:[r.TypeURL.XSD_TIME]}).collect()})}};return Up.TermFunctionTimezone=o,Up}var hj;function aU(){if(hj)return Qp;hj=1,Object.defineProperty(Qp,"__esModule",{value:!0}),Qp.ActorFunctionFactoryTermTimezone=void 0;const i=k(),r=W(),o=iU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.TIMEZONE],termFunction:!0})}async run(e){return new o.TermFunctionTimezone}};return Qp.ActorFunctionFactoryTermTimezone=n,Qp}var yj;function oU(){return yj||(yj=1,(function(i){var r=eo&&eo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=eo&&eo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(aU(),i)})(eo)),eo}var to={},Vp={},Gp={},_j;function uU(){if(_j)return Gp;_j=1,Object.defineProperty(Gp,"__esModule",{value:!0}),Gp.TermFunctionSubtraction=void 0;const i=k(),r=Fe(),o=W(),n=kg();let t=class extends i.TermFunctionBase{constructor(){super({arity:2,operator:o.SparqlOperator.SUBTRACTION,overloads:(0,o.declare)(o.SparqlOperator.SUBTRACTION).arithmetic(()=>(a,u)=>new n.BigNumber(a).minus(u).toNumber()).set([o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],a=>([u,c])=>new o.DayTimeDurationLiteral((0,o.elapsedDuration)(u.typedValue,c.typedValue,a.context.getSafe(r.KeysExpressionEvaluator.defaultTimeZone)))).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],to:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_DATE]}).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],to:[o.TypeURL.XSD_TIME,o.TypeURL.XSD_TIME]}).set([o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DAY_TIME_DURATION],()=>([a,u])=>new o.DateTimeLiteral((0,o.addDurationToDateTime)(a.typedValue,(0,o.defaultedDurationRepresentation)((0,o.negateDuration)(u.typedValue))))).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DAY_TIME_DURATION],to:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([o.TypeURL.XSD_DATE,o.TypeURL.XSD_DAY_TIME_DURATION],()=>([a,u])=>new o.DateLiteral((0,o.addDurationToDateTime)((0,o.defaultedDateTimeRepresentation)(a.typedValue),(0,o.defaultedDurationRepresentation)((0,o.negateDuration)(u.typedValue))))).copy({from:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_DAY_TIME_DURATION],to:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([o.TypeURL.XSD_TIME,o.TypeURL.XSD_DAY_TIME_DURATION],()=>([a,u])=>new o.TimeLiteral((0,o.addDurationToDateTime)((0,o.defaultedDateTimeRepresentation)(a.typedValue),(0,o.defaultedDurationRepresentation)((0,o.negateDuration)(u.typedValue))))).collect()})}};return Gp.TermFunctionSubtraction=t,Gp}var mj;function sU(){if(mj)return Vp;mj=1,Object.defineProperty(Vp,"__esModule",{value:!0}),Vp.ActorFunctionFactoryTermSubtraction=void 0;const i=k(),r=W(),o=uU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.SUBTRACTION],termFunction:!0})}async run(e){return new o.TermFunctionSubtraction}};return Vp.ActorFunctionFactoryTermSubtraction=n,Vp}var gj;function cU(){return gj||(gj=1,(function(i){var r=to&&to.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=to&&to.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(sU(),i)})(to)),to}var ro={},Xp={},zp={},bj;function lU(){if(bj)return zp;bj=1,Object.defineProperty(zp,"__esModule",{value:!0}),zp.TermFunctionSubject=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.SUBJECT,overloads:(0,r.declare)(r.SparqlOperator.SUBJECT).onQuad1(()=>t=>t.subject).collect()})}};return zp.TermFunctionSubject=o,zp}var vj;function dU(){if(vj)return Xp;vj=1,Object.defineProperty(Xp,"__esModule",{value:!0}),Xp.ActorFunctionFactoryTermSubject=void 0;const i=k(),r=W(),o=lU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.SUBJECT],termFunction:!0})}async run(e){return new o.TermFunctionSubject}};return Xp.ActorFunctionFactoryTermSubject=n,Xp}var Tj;function fU(){return Tj||(Tj=1,(function(i){var r=ro&&ro.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ro&&ro.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(dU(),i)})(ro)),ro}var no={},Hp={},$p={},Oj;function pU(){if(Oj)return $p;Oj=1,Object.defineProperty($p,"__esModule",{value:!0}),$p.TermFunctionTz=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.TZ,overloads:(0,r.declare)(r.SparqlOperator.TZ).onDateTime1(()=>t=>(0,r.string)((0,r.extractRawTimeZone)(t.str()))).copy({from:[r.TypeURL.XSD_DATE_TIME],to:[r.TypeURL.XSD_DATE]}).copy({from:[r.TypeURL.XSD_DATE_TIME],to:[r.TypeURL.XSD_TIME]}).collect()})}};return $p.TermFunctionTz=o,$p}var Sj;function hU(){if(Sj)return Hp;Sj=1,Object.defineProperty(Hp,"__esModule",{value:!0}),Hp.ActorFunctionFactoryTermTz=void 0;const i=k(),r=W(),o=pU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.TZ],termFunction:!0})}async run(e){return new o.TermFunctionTz}};return Hp.ActorFunctionFactoryTermTz=n,Hp}var Fj;function yU(){return Fj||(Fj=1,(function(i){var r=no&&no.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=no&&no.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(hU(),i)})(no)),no}var io={},Jp={},Kp={},Aj;function _U(){if(Aj)return Kp;Aj=1,Object.defineProperty(Kp,"__esModule",{value:!0}),Kp.TermFunctionUnaryMinus=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.UMINUS,overloads:(0,r.declare)(r.SparqlOperator.UMINUS).numericConverter(()=>t=>-t).collect()})}};return Kp.TermFunctionUnaryMinus=o,Kp}var wj;function mU(){if(wj)return Jp;wj=1,Object.defineProperty(Jp,"__esModule",{value:!0}),Jp.ActorFunctionFactoryTermUnaryMinus=void 0;const i=k(),r=W(),o=_U();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.UMINUS],termFunction:!0})}async run(e){return new o.TermFunctionUnaryMinus}};return Jp.ActorFunctionFactoryTermUnaryMinus=n,Jp}var Ej;function gU(){return Ej||(Ej=1,(function(i){var r=io&&io.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=io&&io.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(mU(),i)})(io)),io}var ao={},Yp={},Wp={},jj;function bU(){if(jj)return Wp;jj=1,Object.defineProperty(Wp,"__esModule",{value:!0}),Wp.TermFunctionUnaryPlus=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.UPLUS,overloads:(0,r.declare)(r.SparqlOperator.UPLUS).numericConverter(()=>t=>t).collect()})}};return Wp.TermFunctionUnaryPlus=o,Wp}var Rj;function vU(){if(Rj)return Yp;Rj=1,Object.defineProperty(Yp,"__esModule",{value:!0}),Yp.ActorFunctionFactoryTermUnaryPlus=void 0;const i=k(),r=W(),o=bU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.UPLUS],termFunction:!0})}async run(e){return new o.TermFunctionUnaryPlus}};return Yp.ActorFunctionFactoryTermUnaryPlus=n,Yp}var Dj;function TU(){return Dj||(Dj=1,(function(i){var r=ao&&ao.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ao&&ao.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(vU(),i)})(ao)),ao}var oo={},Zp={},kp={},Pj;function OU(){if(Pj)return kp;Pj=1,Object.defineProperty(kp,"__esModule",{value:!0}),kp.TermFunctionTriple=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:3,operator:r.SparqlOperator.TRIPLE,overloads:(0,r.declare)(r.SparqlOperator.TRIPLE).onTerm3(t=>(...e)=>new r.Quad(e[0],e[1],e[2],new r.DefaultGraph)).collect()})}};return kp.TermFunctionTriple=o,kp}var Mj;function SU(){if(Mj)return Zp;Mj=1,Object.defineProperty(Zp,"__esModule",{value:!0}),Zp.ActorFunctionFactoryTermTriple=void 0;const i=k(),r=W(),o=OU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.TRIPLE],termFunction:!0})}async run(e){return new o.TermFunctionTriple}};return Zp.ActorFunctionFactoryTermTriple=n,Zp}var Nj;function FU(){return Nj||(Nj=1,(function(i){var r=oo&&oo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=oo&&oo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(SU(),i)})(oo)),oo}var uo={},eh={},th={},Ij;function AU(){if(Ij)return th;Ij=1,Object.defineProperty(th,"__esModule",{value:!0}),th.TermFunctionUcase=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.UCASE,overloads:(0,r.declare)(r.SparqlOperator.UCASE).onString1Typed(()=>t=>(0,r.string)(t.toUpperCase())).onLangString1(()=>t=>(0,r.langString)(t.typedValue.toUpperCase(),t.language)).collect()})}};return th.TermFunctionUcase=o,th}var qj;function wU(){if(qj)return eh;qj=1,Object.defineProperty(eh,"__esModule",{value:!0}),eh.ActorFunctionFactoryTermUcase=void 0;const i=k(),r=W(),o=AU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.UCASE],termFunction:!0})}async run(e){return new o.TermFunctionUcase}};return eh.ActorFunctionFactoryTermUcase=n,eh}var Lj;function EU(){return Lj||(Lj=1,(function(i){var r=uo&&uo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=uo&&uo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(wU(),i)})(uo)),uo}var so={},rh={},nh={},xj;function jU(){if(xj)return nh;xj=1,Object.defineProperty(nh,"__esModule",{value:!0}),nh.TermFunctionUuid=void 0;const i=k(),r=W(),o=u5();let n=class extends i.TermFunctionBase{constructor(){super({arity:0,operator:r.SparqlOperator.UUID,overloads:(0,r.declare)(r.SparqlOperator.UUID).set([],()=>()=>new r.NamedNode(`urn:uuid:${o.v4()}`)).collect()})}};return nh.TermFunctionUuid=n,nh}var Bj;function RU(){if(Bj)return rh;Bj=1,Object.defineProperty(rh,"__esModule",{value:!0}),rh.ActorFunctionFactoryTermUuid=void 0;const i=k(),r=W(),o=jU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.UUID],termFunction:!0})}async run(e){return new o.TermFunctionUuid}};return rh.ActorFunctionFactoryTermUuid=n,rh}var Cj;function DU(){return Cj||(Cj=1,(function(i){var r=so&&so.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=so&&so.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(RU(),i)})(so)),so}var co={},ih={},ah={},Qj;function PU(){if(Qj)return ah;Qj=1,Object.defineProperty(ah,"__esModule",{value:!0}),ah.TermFunctionXsdToBoolean=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_BOOLEAN,overloads:(0,r.declare)(r.TypeURL.XSD_BOOLEAN).onNumeric1(()=>t=>(0,r.bool)(t.coerceEBV()),!0).onUnary(r.TypeURL.XSD_BOOLEAN,()=>t=>(0,r.bool)(t.coerceEBV()),!0).onUnary(r.TypeURL.XSD_STRING,()=>t=>{switch(t.str()){case"true":return(0,r.bool)(!0);case"false":return(0,r.bool)(!1);case"1":return(0,r.bool)(!0);case"0":return(0,r.bool)(!1);default:throw new r.CastError(t,r.TypeURL.XSD_BOOLEAN)}},!1).collect()})}};return ah.TermFunctionXsdToBoolean=o,ah}var Uj;function MU(){if(Uj)return ih;Uj=1,Object.defineProperty(ih,"__esModule",{value:!0}),ih.ActorFunctionFactoryTermXsdToBoolean=void 0;const i=k(),r=W(),o=PU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_BOOLEAN],termFunction:!0})}async run(e){return new o.TermFunctionXsdToBoolean}};return ih.ActorFunctionFactoryTermXsdToBoolean=n,ih}var Vj;function NU(){return Vj||(Vj=1,(function(i){var r=co&&co.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=co&&co.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(MU(),i)})(co)),co}var lo={},oh={},uh={},Gj;function IU(){if(Gj)return uh;Gj=1,Object.defineProperty(uh,"__esModule",{value:!0}),uh.TermFunctionXsdToDate=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_DATE,overloads:(0,r.declare)(r.TypeURL.XSD_DATE).onUnary(r.TypeURL.XSD_DATE,()=>t=>new r.DateLiteral(t.typedValue,t.strValue)).onUnary(r.TypeURL.XSD_DATE_TIME,()=>t=>new r.DateLiteral(t.typedValue)).onStringly1(()=>t=>new r.DateLiteral((0,r.parseDate)(t.str()))).collect()})}};return uh.TermFunctionXsdToDate=o,uh}var Xj;function qU(){if(Xj)return oh;Xj=1,Object.defineProperty(oh,"__esModule",{value:!0}),oh.ActorFunctionFactoryTermXsdToDate=void 0;const i=k(),r=W(),o=IU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_DATE],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDate}};return oh.ActorFunctionFactoryTermXsdToDate=n,oh}var zj;function LU(){return zj||(zj=1,(function(i){var r=lo&&lo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=lo&&lo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(qU(),i)})(lo)),lo}var fo={},sh={},ch={},Hj;function xU(){if(Hj)return ch;Hj=1,Object.defineProperty(ch,"__esModule",{value:!0}),ch.TermFunctionXsdToDecimal=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_DECIMAL,overloads:(0,r.declare)(r.TypeURL.XSD_DECIMAL).onNumeric1(()=>t=>{const e=(0,r.parseXSDDecimal)(t.str());if(e===void 0)throw new r.CastError(t,r.TypeURL.XSD_DECIMAL);return(0,r.decimal)(e)}).onString1(()=>t=>{const e=t.str(),a=/^([+-])?(\d+(\.\d+)?)$/u.test(e)?(0,r.parseXSDDecimal)(e):void 0;if(a===void 0)throw new r.CastError(t,r.TypeURL.XSD_DECIMAL);return(0,r.decimal)(a)},!1).onBoolean1Typed(()=>t=>(0,r.decimal)(t?1:0)).collect()})}};return ch.TermFunctionXsdToDecimal=o,ch}var $j;function BU(){if($j)return sh;$j=1,Object.defineProperty(sh,"__esModule",{value:!0}),sh.ActorFunctionFactoryTermXsdToDecimal=void 0;const i=k(),r=W(),o=xU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_DECIMAL],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDecimal}};return sh.ActorFunctionFactoryTermXsdToDecimal=n,sh}var Jj;function CU(){return Jj||(Jj=1,(function(i){var r=fo&&fo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=fo&&fo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(BU(),i)})(fo)),fo}var po={},lh={},dh={},Kj;function QU(){if(Kj)return dh;Kj=1,Object.defineProperty(dh,"__esModule",{value:!0}),dh.TermFunctionXsdToDuration=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_DAY_TIME_DURATION,overloads:(0,r.declare)(r.TypeURL.XSD_DURATION).onUnary(r.TypeURL.XSD_DURATION,()=>t=>new r.DurationLiteral(t.typedValue,t.strValue)).onStringly1(()=>t=>new r.DurationLiteral((0,r.parseDuration)(t.str()))).collect()})}};return dh.TermFunctionXsdToDuration=o,dh}var Yj;function UU(){if(Yj)return lh;Yj=1,Object.defineProperty(lh,"__esModule",{value:!0}),lh.ActorFunctionFactoryTermXsdToDuration=void 0;const i=k(),r=W(),o=QU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_DURATION],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDuration}};return lh.ActorFunctionFactoryTermXsdToDuration=n,lh}var Wj;function VU(){return Wj||(Wj=1,(function(i){var r=po&&po.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=po&&po.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(UU(),i)})(po)),po}var ho={},fh={},ph={},Zj;function GU(){if(Zj)return ph;Zj=1,Object.defineProperty(ph,"__esModule",{value:!0}),ph.TermFunctionXsdToDayTimeDuration=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_DAY_TIME_DURATION,overloads:(0,r.declare)(r.TypeURL.XSD_DAY_TIME_DURATION).onUnary(r.TypeURL.XSD_DURATION,()=>t=>new r.DayTimeDurationLiteral((0,r.trimToDayTimeDuration)(t.typedValue))).onStringly1(()=>t=>new r.DayTimeDurationLiteral((0,r.parseDayTimeDuration)(t.str()))).collect()})}};return ph.TermFunctionXsdToDayTimeDuration=o,ph}var kj;function XU(){if(kj)return fh;kj=1,Object.defineProperty(fh,"__esModule",{value:!0}),fh.ActorFunctionFactoryTermXsdToDayTimeDuration=void 0;const i=k(),r=W(),o=GU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_DAY_TIME_DURATION],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDayTimeDuration}};return fh.ActorFunctionFactoryTermXsdToDayTimeDuration=n,fh}var eR;function zU(){return eR||(eR=1,(function(i){var r=ho&&ho.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ho&&ho.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(XU(),i)})(ho)),ho}var yo={},hh={},yh={},tR;function HU(){if(tR)return yh;tR=1,Object.defineProperty(yh,"__esModule",{value:!0}),yh.TermFunctionXsdToDouble=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_DOUBLE,overloads:(0,r.declare)(r.TypeURL.XSD_DOUBLE).onNumeric1(()=>t=>(0,r.double)(t.typedValue)).onBoolean1Typed(()=>t=>(0,r.double)(t?1:0)).onUnary(r.TypeURL.XSD_STRING,()=>t=>{const e=(0,r.parseXSDFloat)(t.str());if(e===void 0)throw new r.CastError(t,r.TypeURL.XSD_DOUBLE);return(0,r.double)(e)},!1).collect()})}};return yh.TermFunctionXsdToDouble=o,yh}var rR;function $U(){if(rR)return hh;rR=1,Object.defineProperty(hh,"__esModule",{value:!0}),hh.ActorFunctionFactoryTermXsdToDouble=void 0;const i=k(),r=W(),o=HU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_DOUBLE],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDouble}};return hh.ActorFunctionFactoryTermXsdToDouble=n,hh}var nR;function JU(){return nR||(nR=1,(function(i){var r=yo&&yo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=yo&&yo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o($U(),i)})(yo)),yo}var _o={},_h={},mh={},iR;function KU(){if(iR)return mh;iR=1,Object.defineProperty(mh,"__esModule",{value:!0}),mh.TermFunctionXsdToFloat=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_FLOAT,overloads:(0,r.declare)(r.TypeURL.XSD_FLOAT).onNumeric1(()=>t=>(0,r.float)(t.typedValue)).onBoolean1Typed(()=>t=>(0,r.float)(t?1:0)).onUnary(r.TypeURL.XSD_STRING,()=>t=>{const e=(0,r.parseXSDFloat)(t.str());if(e===void 0)throw new r.CastError(t,r.TypeURL.XSD_FLOAT);return(0,r.float)(e)},!1).collect()})}};return mh.TermFunctionXsdToFloat=o,mh}var aR;function YU(){if(aR)return _h;aR=1,Object.defineProperty(_h,"__esModule",{value:!0}),_h.ActorFunctionFactoryTermXsdToFloat=void 0;const i=k(),r=W(),o=KU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_FLOAT],termFunction:!0})}async run(e){return new o.TermFunctionXsdToFloat}};return _h.ActorFunctionFactoryTermXsdToFloat=n,_h}var oR;function WU(){return oR||(oR=1,(function(i){var r=_o&&_o.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=_o&&_o.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(YU(),i)})(_o)),_o}var mo={},gh={},bh={},uR;function ZU(){if(uR)return bh;uR=1,Object.defineProperty(bh,"__esModule",{value:!0}),bh.TermFunctionXsdToDatetime=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_DATE_TIME,overloads:(0,r.declare)(r.TypeURL.XSD_DATE_TIME).onUnary(r.TypeURL.XSD_DATE_TIME,()=>t=>t).onUnary(r.TypeURL.XSD_STRING,()=>t=>(0,r.dateTime)((0,r.parseDateTime)(t.str()),t.str()),!1).onUnary(r.TypeURL.XSD_DATE,()=>t=>new r.DateTimeLiteral({...t.typedValue,hours:0,minutes:0,seconds:0})).collect()})}};return bh.TermFunctionXsdToDatetime=o,bh}var sR;function kU(){if(sR)return gh;sR=1,Object.defineProperty(gh,"__esModule",{value:!0}),gh.ActorFunctionFactoryTermXsdToDatetime=void 0;const i=k(),r=W(),o=ZU();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_DATE_TIME],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDatetime}};return gh.ActorFunctionFactoryTermXsdToDatetime=n,gh}var cR;function eV(){return cR||(cR=1,(function(i){var r=mo&&mo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=mo&&mo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(kU(),i)})(mo)),mo}var go={},vh={},Th={},lR;function tV(){if(lR)return Th;lR=1,Object.defineProperty(Th,"__esModule",{value:!0}),Th.TermFunctionXsdToInteger=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_INTEGER,overloads:(0,r.declare)(r.TypeURL.XSD_INTEGER).onBoolean1Typed(()=>t=>(0,r.integer)(t?1:0)).onNumeric1(()=>t=>{if(!Number.isFinite(t.typedValue))throw new r.CastError(t,r.TypeURL.XSD_INTEGER);return(0,r.integer)(Math.trunc(t.typedValue))}).onString1(()=>t=>{const e=t.str(),a=/^\d+$/u.test(e)?Number.parseInt(e,10):void 0;if(a===void 0)throw new r.CastError(t,r.TypeURL.XSD_INTEGER);return(0,r.integer)(a)}).collect()})}};return Th.TermFunctionXsdToInteger=o,Th}var dR;function rV(){if(dR)return vh;dR=1,Object.defineProperty(vh,"__esModule",{value:!0}),vh.ActorFunctionFactoryTermXsdToInteger=void 0;const i=k(),r=W(),o=tV();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_INTEGER],termFunction:!0})}async run(e){return new o.TermFunctionXsdToInteger}};return vh.ActorFunctionFactoryTermXsdToInteger=n,vh}var fR;function nV(){return fR||(fR=1,(function(i){var r=go&&go.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=go&&go.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(rV(),i)})(go)),go}var bo={},Oh={},Sh={},pR;function iV(){if(pR)return Sh;pR=1,Object.defineProperty(Sh,"__esModule",{value:!0}),Sh.TermFunctionXsdToString=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_STRING,overloads:(0,r.declare)(r.TypeURL.XSD_STRING).onNumeric1(()=>t=>(0,r.string)((0,r.float)(t.typedValue).str())).onBoolean1Typed(()=>t=>(0,r.string)((0,r.bool)(t).str())).onTerm1(()=>t=>(0,r.string)(t.str())).collect()})}};return Sh.TermFunctionXsdToString=o,Sh}var hR;function aV(){if(hR)return Oh;hR=1,Object.defineProperty(Oh,"__esModule",{value:!0}),Oh.ActorFunctionFactoryTermXsdToString=void 0;const i=k(),r=W(),o=iV();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_STRING],termFunction:!0})}async run(e){return new o.TermFunctionXsdToString}};return Oh.ActorFunctionFactoryTermXsdToString=n,Oh}var yR;function oV(){return yR||(yR=1,(function(i){var r=bo&&bo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=bo&&bo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(aV(),i)})(bo)),bo}var vo={},Fh={},Ah={},_R;function uV(){if(_R)return Ah;_R=1,Object.defineProperty(Ah,"__esModule",{value:!0}),Ah.TermFunctionXsdToYearMonthDuration=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_YEAR_MONTH_DURATION,overloads:(0,r.declare)(r.TypeURL.XSD_YEAR_MONTH_DURATION).onUnary(r.TypeURL.XSD_DURATION,()=>t=>new r.YearMonthDurationLiteral((0,r.trimToYearMonthDuration)(t.typedValue))).onStringly1(()=>t=>new r.YearMonthDurationLiteral((0,r.parseYearMonthDuration)(t.str()))).collect()})}};return Ah.TermFunctionXsdToYearMonthDuration=o,Ah}var mR;function sV(){if(mR)return Fh;mR=1,Object.defineProperty(Fh,"__esModule",{value:!0}),Fh.ActorFunctionFactoryTermXsdToYearMonthDuration=void 0;const i=k(),r=W(),o=uV();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_YEAR_MONTH_DURATION],termFunction:!0})}async run(e){return new o.TermFunctionXsdToYearMonthDuration}};return Fh.ActorFunctionFactoryTermXsdToYearMonthDuration=n,Fh}var gR;function cV(){return gR||(gR=1,(function(i){var r=vo&&vo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=vo&&vo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(sV(),i)})(vo)),vo}var To={},wh={},Eh={},bR;function lV(){if(bR)return Eh;bR=1,Object.defineProperty(Eh,"__esModule",{value:!0}),Eh.TermFunctionXsdToTime=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.TypeURL.XSD_TIME,overloads:(0,r.declare)(r.TypeURL.XSD_TIME).onUnary(r.TypeURL.XSD_TIME,()=>t=>new r.TimeLiteral(t.typedValue,t.strValue)).onUnary(r.TypeURL.XSD_DATE_TIME,()=>t=>new r.TimeLiteral(t.typedValue)).onStringly1(()=>t=>new r.TimeLiteral((0,r.parseTime)(t.str()))).collect()})}};return Eh.TermFunctionXsdToTime=o,Eh}var vR;function dV(){if(vR)return wh;vR=1,Object.defineProperty(wh,"__esModule",{value:!0}),wh.ActorFunctionFactoryTermXsdToTime=void 0;const i=k(),r=W(),o=lV();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.TypeURL.XSD_TIME],termFunction:!0})}async run(e){return new o.TermFunctionXsdToTime}};return wh.ActorFunctionFactoryTermXsdToTime=n,wh}var TR;function fV(){return TR||(TR=1,(function(i){var r=To&&To.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=To&&To.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(dV(),i)})(To)),To}var Oo={},jh={},Rh={},OR;function pV(){if(OR)return Rh;OR=1,Object.defineProperty(Rh,"__esModule",{value:!0}),Rh.TermFunctionYear=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(){super({arity:1,operator:r.SparqlOperator.YEAR,overloads:(0,r.declare)(r.SparqlOperator.YEAR).onDateTime1(()=>t=>(0,r.integer)(t.typedValue.year)).set([r.TypeURL.XSD_DATE],()=>([t])=>(0,r.integer)(t.typedValue.year)).collect()})}};return Rh.TermFunctionYear=o,Rh}var SR;function hV(){if(SR)return jh;SR=1,Object.defineProperty(jh,"__esModule",{value:!0}),jh.ActorFunctionFactoryTermYear=void 0;const i=k(),r=W(),o=pV();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.YEAR],termFunction:!0})}async run(e){return new o.TermFunctionYear}};return jh.ActorFunctionFactoryTermYear=n,jh}var FR;function yV(){return FR||(FR=1,(function(i){var r=Oo&&Oo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Oo&&Oo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(hV(),i)})(Oo)),Oo}var So={},Dh={},AR;function _V(){if(AR)return Dh;AR=1,Object.defineProperty(Dh,"__esModule",{value:!0}),Dh.ActorQueryOperationSource=void 0;const i=dt(),r=Fe(),o=pe(),n=yr(),t=$e(),e=Ve();let a=class extends i.ActorQueryOperation{constructor(c){super(c)}async test(c){return(0,t.getOperationSource)(c.operation)?(0,o.passTest)({httpRequests:1}):(0,o.failTest)(`Actor ${this.name} requires an operation with source annotation.`)}async run(c){const s=c.context.get(r.KeysInitQuery.physicalQueryPlanLogger);s&&(s.logOperation(c.operation.type,void 0,c.operation,c.context.get(r.KeysInitQuery.physicalQueryPlanNode),this.name,{}),c.context=c.context.set(r.KeysInitQuery.physicalQueryPlanNode,c.operation));const l=(0,t.getOperationSource)(c.operation),d=l.context?c.context.merge(l.context):c.context;let f=!1;if(e.Util.recurseOperation(c.operation,{construct(){return f=!0,!1}}),f){const y=l.source.queryQuads(c.operation,d),b=(0,n.getMetadataQuads)(y);return{type:"quads",quadStream:y,metadata:b}}switch(c.operation.type){case e.Algebra.types.ASK:return{type:"boolean",execute:()=>l.source.queryBoolean(c.operation,d)};case e.Algebra.types.COMPOSITE_UPDATE:case e.Algebra.types.DELETE_INSERT:case e.Algebra.types.LOAD:case e.Algebra.types.CLEAR:case e.Algebra.types.CREATE:case e.Algebra.types.DROP:case e.Algebra.types.ADD:case e.Algebra.types.MOVE:case e.Algebra.types.COPY:return{type:"void",execute:()=>l.source.queryVoid(c.operation,d)}}const h=l.source.queryBindings(c.operation,d),p=(0,n.getMetadataBindings)(h);return{type:"bindings",bindingsStream:h,metadata:p}}};return Dh.ActorQueryOperationSource=a,Dh}var wR;function mV(){return wR||(wR=1,(function(i){var r=So&&So.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=So&&So.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(_V(),i)})(So)),So}var Fo={},Ph={},ER;function gV(){if(ER)return Ph;ER=1,Object.defineProperty(Ph,"__esModule",{value:!0}),Ph.MediatorJoinCoefficientsFixed=void 0;const i=Fe(),r=pe();let o=class extends r.Mediator{constructor(t){super(t)}async mediateWith(t,e){const a=[],u=e.map(({reply:y})=>y),c=(await Promise.all(u)).map(y=>{if(y.isFailed()){a.push(y.getFailMessage());return}return{value:y.get(),sideData:y.getSideData()}});let s=c.map(y=>{if(y)return y.value.iterations*this.cpuWeight+y.value.persistedItems*this.memoryWeight+y.value.blockingItems*this.timeWeight+y.value.requestTime*this.ioWeight});const l=Math.max(...s.filter(y=>y!==void 0)),d=t.context.get(i.KeysQueryOperation.limitIndicator);d&&(s=s.map((y,b)=>y!==void 0&&(c[b]?.value).blockingItems>0&&(c[b]?.value).iterations>d?y+l:y));let f=-1,h=Number.POSITIVE_INFINITY;for(const[y,b]of s.entries())b!==void 0&&(f===-1||b<h)&&(f=y,h=b);if(f<0)return(0,r.failTest)(this.constructFailureMessage(t,a));const p=e[f].actor;return p.includeInLogs&&r.Actor.getContextLogger(t.context)?.debug(`Determined physical join operator '${p.logicalType}-${p.physicalName}'`,{entries:t.entries.length,variables:await Promise.all(t.entries.map(async y=>(await y.output.metadata()).variables.map(b=>b.variable.value))),costs:Object.fromEntries(s.map((y,b)=>[`${e[b].actor.logicalType}-${e[b].actor.physicalName}`,y]).filter(y=>y[1]!==void 0)),coefficients:Object.fromEntries(c.map((y,b)=>[`${e[b].actor.logicalType}-${e[b].actor.physicalName}`,y?.value]).filter(y=>y[1]!==void 0))}),(0,r.passTestWithSideData)(p,c[f].sideData)}};return Ph.MediatorJoinCoefficientsFixed=o,Ph}var jR;function bV(){return jR||(jR=1,(function(i){var r=Fo&&Fo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Fo&&Fo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(gV(),i)})(Fo)),Fo}var Ao={},Mh={},RR;function s5(){if(RR)return Mh;RR=1,Object.defineProperty(Mh,"__esModule",{value:!0}),Mh.ActorHttpInvalidate=void 0;const i=pe();let r=class extends i.Actor{constructor(n){super(n)}};return Mh.ActorHttpInvalidate=r,Mh}var Nh={},DR;function vV(){if(DR)return Nh;DR=1,Object.defineProperty(Nh,"__esModule",{value:!0}),Nh.ActorHttpInvalidateListenable=void 0;const i=pe(),r=s5();let o=class extends r.ActorHttpInvalidate{constructor(t){super(t),this.invalidateListeners=[],this.invalidateListeners=[]}addInvalidateListener(t){this.invalidateListeners.push(t)}async test(t){return(0,i.passTestVoid)()}async run(t){for(const e of this.invalidateListeners)e(t);return{}}};return Nh.ActorHttpInvalidateListenable=o,Nh}var PR;function MR(){return PR||(PR=1,(function(i){var r=Ao&&Ao.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ao&&Ao.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(s5(),i),o(vV(),i)})(Ao)),Ao}var wo={},Ih={},NR;function TV(){if(NR)return Ih;NR=1,Object.defineProperty(Ih,"__esModule",{value:!0}),Ih.MediatorAll=void 0;const i=pe();let r=class extends i.Mediator{constructor(n){super(n)}async mediate(n){const t=[];let e;try{e=this.publish(n)}catch{e=[]}for(const u of e){const c=await u.reply;c.isPassed()&&t.push({actor:u.actor,sideData:c.getSideData()})}return(await Promise.all(t.map(u=>u.actor.runObservable(n,u.sideData))))[0]}async mediateWith(){throw new Error("Unsupported operation: MediatorAll#mediateWith")}};return Ih.MediatorAll=r,Ih}var IR;function OV(){return IR||(IR=1,(function(i){var r=wo&&wo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=wo&&wo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(TV(),i)})(wo)),wo}var Eo={},qh={},jo={},Lh={},Ro={},xh={},qR;function SV(){if(qR)return xh;qR=1,Object.defineProperty(xh,"__esModule",{value:!0}),xh.ChunkedIterator=void 0;const i=it();let r=class extends i.TransformIterator{constructor(n,t,e){super(n,e),this.chunk=[],this.blockSize=t}consumeChunkAsIterator(){const n=new i.ArrayIterator(this.chunk,{autoStart:!1});return this.chunk=[],n}_transform(n,t,e){this.chunk.push(n),this.chunk.length>=this.blockSize&&e(this.consumeChunkAsIterator()),t()}_flush(n){this.chunk.length>0&&this._push(this.consumeChunkAsIterator()),super._flush(n)}};return xh.ChunkedIterator=r,xh}var Bh={},LR;function FV(){if(LR)return Bh;LR=1,Object.defineProperty(Bh,"__esModule",{value:!0}),Bh.ClosableIterator=void 0;const i=it();let r=class extends i.AsyncIterator{constructor(a,u){super(),this.onClose=u.onClose,this._source=a,this._source[i.DESTINATION]=this,this._source.on("end",t),this._source.on("error",n),this._source.on("readable",o),this.readable=this._source.readable}read(){const a=this._source.read();return a||(this.readable=!1,this._source.done&&this.close()),a}_end(a){this.onClose(),this._source.removeListener("end",t),this._source.removeListener("error",n),this._source.removeListener("readable",o),delete this._source[i.DESTINATION],this._source.destroy(),super._end(a)}};Bh.ClosableIterator=r;function o(){this[i.DESTINATION].readable=!0}function n(e){this[i.DESTINATION].emit("error",e)}function t(){this[i.DESTINATION].close()}return Bh}var Ch={},xR;function AV(){if(xR)return Ch;xR=1,Object.defineProperty(Ch,"__esModule",{value:!0}),Ch.ClosableTransformIterator=void 0;const i=it();let r=class extends i.TransformIterator{constructor(n,t){super(n,t),this.onClose=t.onClose}_end(n){this.onClose(),super._end(n)}};return Ch.ClosableTransformIterator=r,Ch}var Qh={},BR;function wV(){if(BR)return Qh;BR=1,Object.defineProperty(Qh,"__esModule",{value:!0}),Qh.instrumentIterator=void 0;function i(o){const n={count:0,timeSelf:0,timeLife:0};return r(o,n,!0),new Promise(t=>{o.on("end",()=>{t(n)})})}Qh.instrumentIterator=i;function r(o,n,t){if(!("_profileInstrumented"in o)){if(o._profileInstrumented=!0,"_read"in o){const a=o._read;o._read=(u,c)=>{const s=performance.now();a.call(o,u,()=>{n.timeSelf+=performance.now()-s,c()})}}const e=o.read;if(o.read=()=>{const a=performance.now(),u=e.call(o);return t&&u&&n.count++,n.timeSelf+=performance.now()-a,u},t){const a=performance.now();o.on("end",()=>{n.timeLife=performance.now()-a})}"_source"in o&&r(o._source,n,!1)}}return Qh}var CR;function gs(){return CR||(CR=1,(function(i){var r=Ro&&Ro.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ro&&Ro.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(SV(),i),o(FV(),i),o(AV(),i),o(wV(),i)})(Ro)),Ro}var QR;function EV(){if(QR)return Lh;QR=1,Object.defineProperty(Lh,"__esModule",{value:!0}),Lh.ActorRdfJoin=void 0;const i=Fe(),r=pe(),o=gs(),n=yr();let t=class vn extends r.Actor{constructor(a,u){super(a),this.includeInLogs=!0,this.logicalType=u.logicalType,this.physicalName=u.physicalName,this.limitEntries=u.limitEntries??Number.POSITIVE_INFINITY,this.limitEntriesMin=u.limitEntriesMin??!1,this.canHandleUndefs=u.canHandleUndefs??!1,this.isLeaf=u.isLeaf??!0,this.requiresVariableOverlap=u.requiresVariableOverlap??!1,this.canHandleOperationRequired=u.canHandleOperationRequired??!1}static overlappingVariables(a){const u={};for(const c of a)for(const s of c.variables){u[s.variable.value]||(u[s.variable.value]={variable:s.variable,canBeUndef:s.canBeUndef,occurrences:0});const l=u[s.variable.value];l.canBeUndef=l.canBeUndef||s.canBeUndef,l.occurrences++}return Object.values(u).filter(c=>c.occurrences===a.length).map(c=>({variable:c.variable,canBeUndef:c.canBeUndef}))}static joinVariables(a,u,c=!1){const s={};let l=!0;for(const d of u){for(const f of d.variables)s[f.variable.value]=s[f.variable.value]||f.canBeUndef||!l&&c&&!(f.variable.value in s);l=!1}return Object.entries(s).map(([d,f])=>({variable:a.variable(d),canBeUndef:f}))}static joinBindings(...a){if(a.length===0)return null;if(a.length===1)return a[0];let u=a[0];for(const c of a.slice(1)){const s=u.merge(c);if(!s)return null;u=s}return u}static getCardinality(a){return a.cardinality}static async getMetadatas(a){return await Promise.all(a.map(u=>u.output.metadata()))}static async getEntriesWithMetadatas(a){const u=await vn.getMetadatas(a);return a.map((c,s)=>({...c,metadata:u[s]}))}static getRequestInitialTimes(a){return a.map(u=>u.pageSize?0:u.requestTime??0)}static getRequestItemTimes(a){return a.map(u=>u.pageSize?(u.requestTime??0)/u.pageSize:0)}constructState(a){const u=new n.MetadataValidationState,c=()=>u.invalidate();for(const s of a)s.state.addInvalidateListener(c);return u}async constructResultMetadata(a,u,c,s={},l=!1){let d;if(s.cardinality)d=s.cardinality;else{let f=!1;d=u.reduce((h,p)=>{const y=vn.getCardinality(p);return y.value===0&&(f=!0),{type:y.type==="estimate"?"estimate":h.type,value:h.value*(l?Math.max(1,y.value):y.value)}},{type:"exact",value:1}),(!f||l)&&(d.value*=(await this.mediatorJoinSelectivity.mediate({entries:a,context:c})).selectivity,d.value===0&&(d.value=Number.MIN_VALUE))}return{state:this.constructState(u),...s,cardinality:{type:d.type,value:d.value},variables:vn.joinVariables(c.getSafe(i.KeysInitQuery.dataFactory),u,l)}}static async sortJoinEntries(a,u,c){if(u.some(f=>f.metadata.variables.some(h=>h.canBeUndef)))return(0,r.passTest)(u);const l={};for(const f of u)for(const h of f.metadata.variables){let p=l[h.variable.value];p||(p=0),l[h.variable.value]=++p}const d=[];for(const[f,h]of Object.entries(l))h>=2&&d.push(f);return d.length===0?(0,r.failTest)("Bind join can only join entries with at least one common variable"):(0,r.passTest)((await a.mediate({entries:u,context:c})).entries)}async test(a){if(a.type!==this.logicalType)return(0,r.failTest)(`${this.name} can only handle logical joins of type '${this.logicalType}', while '${a.type}' was given.`);if(a.entries.length<=1)return(0,r.failTest)(`${this.name} requires at least two join entries.`);const u=a.entries.some(l=>l.operationRequired);if(!this.canHandleOperationRequired&&u)return(0,r.failTest)(`${this.name} does not work with operationRequired.`);if(this.limitEntriesMin?a.entries.length<this.limitEntries:a.entries.length>this.limitEntries)return(0,r.failTest)(`${this.name} requires ${this.limitEntries} join entries at ${this.limitEntriesMin?"least":"most"}. The input contained ${a.entries.length}.`);for(const l of a.entries)if(l.output.type!=="bindings")return(0,r.failTest)(`Invalid type of a join entry: Expected 'bindings' but got '${l.output.type}'`);const c=await vn.getMetadatas(a.entries);let s;return!this.canHandleUndefs&&(s=vn.overlappingVariables(c),s.some(l=>l.canBeUndef))?(0,r.failTest)(`Actor ${this.name} can not join streams containing undefs`):this.requiresVariableOverlap&&(s??vn.overlappingVariables(c)).length===0&&!u?(0,r.failTest)(`Actor ${this.name} can only join entries with at least one common variable`):await this.getJoinCoefficients(a,{metadatas:c})}async run(a,u){let c;a.context.has(i.KeysInitQuery.physicalQueryPlanLogger)&&(c=a.context.get(i.KeysInitQuery.physicalQueryPlanNode),a.context=a.context.set(i.KeysInitQuery.physicalQueryPlanNode,a));const s=a.context.get(i.KeysInitQuery.physicalQueryPlanLogger);let l;this.includeInLogs&&s&&(l={},s.stashChildren(c,h=>h.logicalOperator.startsWith("join")),s.logOperation(`join-${this.logicalType}`,this.physicalName,a,c,this.name,l));const{result:d,physicalPlanMetadata:f}=await this.getOutput(a,u);if(l){(0,o.instrumentIterator)(d.bindingsStream).then(p=>{s.appendMetadata(a,{cardinalityReal:p.count,timeSelf:p.timeSelf,timeLife:p.timeLife})}),Object.assign(l,f);const h=u.metadatas.map(vn.getCardinality);if(l.cardinalities=h,l.joinCoefficients=(await this.getJoinCoefficients(a,u)).getOrThrow(),this.isLeaf)for(let p=0;p<a.entries.length;p++){const y=a.entries[p];s.unstashChild(y.operation,a),s.appendMetadata(y.operation,{cardinality:h[p]})}}return d.metadata=(0,n.cachifyMetadata)(d.metadata),d}};return Lh.ActorRdfJoin=t,Lh}var UR;function cr(){return UR||(UR=1,(function(i){var r=jo&&jo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=jo&&jo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(EV(),i)})(jo)),jo}var VR;function jV(){if(VR)return qh;VR=1,Object.defineProperty(qh,"__esModule",{value:!0}),qh.ActorRdfJoinSingle=void 0;const i=cr(),r=pe();let o=class extends i.ActorRdfJoin{constructor(t){super(t,{logicalType:"inner",physicalName:"single",limitEntries:1}),this.includeInLogs=!1}async test(t){return t.entries.length!==1?(0,r.failTest)(`Actor ${this.name} can only join a single entry`):await this.getJoinCoefficients(t,void 0)}async getOutput(t){return{result:t.entries[0].output}}async getJoinCoefficients(t,e){return(0,r.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},e)}};return qh.ActorRdfJoinSingle=o,qh}var GR;function RV(){return GR||(GR=1,(function(i){var r=Eo&&Eo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Eo&&Eo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(jV(),i)})(Eo)),Eo}var Do={},Uh={},XR;function DV(){if(XR)return Uh;XR=1,Object.defineProperty(Uh,"__esModule",{value:!0}),Uh.ActorRdfJoinMultiEmpty=void 0;const i=cr(),r=Fe(),o=pe(),n=yr(),t=it();let e=class extends i.ActorRdfJoin{constructor(u){super(u,{logicalType:"inner",physicalName:"multi-empty",canHandleUndefs:!0})}async test(u){return(await i.ActorRdfJoin.getMetadatas(u.entries)).every(c=>i.ActorRdfJoin.getCardinality(c).value>0)?(0,o.failTest)(`Actor ${this.name} can only join entries where at least one is empty`):super.test(u)}async getOutput(u){for(const s of u.entries)s.output.bindingsStream.close();const c=u.context.getSafe(r.KeysInitQuery.dataFactory);return{result:{bindingsStream:new t.ArrayIterator([],{autoStart:!1}),metadata:async()=>({state:new n.MetadataValidationState,cardinality:{type:"exact",value:0},variables:i.ActorRdfJoin.joinVariables(c,await i.ActorRdfJoin.getMetadatas(u.entries))}),type:"bindings"}}}async getJoinCoefficients(u,c){return(0,o.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},c)}};return Uh.ActorRdfJoinMultiEmpty=e,Uh}var zR;function PV(){return zR||(zR=1,(function(i){var r=Do&&Do.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Do&&Do.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(DV(),i)})(Do)),Do}var Po={},Vh={},Mo={},Gh={},HR;function MV(){if(HR)return Gh;HR=1,Object.defineProperty(Gh,"__esModule",{value:!0}),Gh.BindingsIndexDef=void 0;let i=class{constructor(o,n){this.keys=o.map(t=>t.variable),this.hashFn=n,this.index={}}put(o,n){return this.index[this.hashFn(o,this.keys)]=n}get(o){const n=this.getFirst(o);return n?[n]:[]}getFirst(o){return this.index[this.hashFn(o,this.keys)]}values(){return Object.values(this.index)}};return Gh.BindingsIndexDef=i,Gh}var Xh={},$R;function NV(){if($R)return Xh;$R=1,Object.defineProperty(Xh,"__esModule",{value:!0}),Xh.BindingsIndexUndef=void 0;let i=class{constructor(o,n,t){this.data={},this.keys=o.map(e=>e.variable),this.hashFn=n,this.allowDisjointDomains=t&&this.keys.length>0}put(o,n){if(this.allowDisjointDomains||this.isBindingsValid(o)){let t=this.data;for(let e=0;e<this.keys.length;e++){const a=this.keys[e],u=this.hashFn(o.get(a));let c=t[u];c||(c=t[u]=e===this.keys.length-1?n:{}),t=c}}return n}isBindingsValid(o){let n=!1;for(const t of this.keys)if(o.has(t)){n=!0;break}return n}get(o){return this.allowDisjointDomains||this.isBindingsValid(o)?this.getRecursive(o,this.keys,[this.data]):[]}getRecursive(o,n,t){if(n.length===0)return t;let e;[e,...n]=n;const a=[];for(const u of t){const c=this.hashFn(o?.get(e));if(c){const s=[u[c],u[""]].filter(Boolean);if(s.length===0)continue;a.push(this.getRecursive(o,n,s))}else{const s=Object.values(u);if(s.length===0)continue;a.push(this.getRecursive(o,n,s))}}return a.flat()}getFirst(o,n=!0){if(this.allowDisjointDomains||this.isBindingsValid(o))return this.getRecursiveFirst(o,this.keys,[this.data],n)}getRecursiveFirst(o,n,t,e){if(n.length===0)return t[0];let a;[a,...n]=n;for(const u of t){const c=this.hashFn(o.get(a));if(c||!e){const s=[u[c],u[""]].filter(Boolean);if(s.length===0)continue;const l=this.getRecursiveFirst(o,n,s,e);if(l)return l}else{const s=Object.values(u);if(s.length===0)continue;const l=this.getRecursiveFirst(o,n,s,e);if(l)return l}}}values(){return this.keys.length===0?[]:this.getRecursive(void 0,this.keys,[this.data])}};return Xh.BindingsIndexUndef=i,Xh}var N1={},JR;function IV(){return JR||(JR=1,Object.defineProperty(N1,"__esModule",{value:!0})),N1}var KR;function hv(){return KR||(KR=1,(function(i){var r=Mo&&Mo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Mo&&Mo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(MV(),i),o(NV(),i),o(IV(),i)})(Mo)),Mo}var I1,YR;function qV(){if(YR)return I1;YR=1;let i=it(),r=i.MultiTransformIterator,o=i.SimpleTransformIterator;class n extends r{constructor(e,a,u,c){super(e,c),this.funRight=a,this.funJoin=u}_createTransformer(e){return new o(this.funRight(e),{transform:(a,u,c)=>{let s=this.funJoin(e,a);s!==null&&c(s),u()}})}}return I1=n,I1}var q1,WR;function LV(){if(WR)return q1;WR=1;let i=it().AsyncIterator;class r extends i{constructor(n,t,e,a){super(),this.addedDataListener=!1,this.left=n,this.right=t,this.funHash=e,this.funJoin=a,this.leftMap=new Map,this.match=null,this.matches=[],this.matchIdx=0,this.left.on("error",c=>this.destroy(c)),this.right.on("error",c=>this.destroy(c)),this.readable=!1,this.left.on("end",u.bind(this));function u(){this.readable=!0,this.right.on("readable",()=>this.readable=!0),this.right.on("end",()=>{this.hasResults()||this._end()})}this.on("newListener",c=>{c==="data"&&this._addDataListenerIfNeeded()}),this.left.readable&&this._addDataListenerIfNeeded(),this.left.on("readable",()=>this._addDataListenerIfNeeded())}hasResults(){return!this.right.ended||this.matchIdx<this.matches.length}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(this._addDataListenerIfNeeded();;){if(this.ended||!this.readable)return null;for(;this.matchIdx<this.matches.length;){let t=this.matches[this.matchIdx++],e=this.funJoin(t,this.match);if(e!==null)return e}if(this.hasResults()||this._end(),this.match=this.right.read(),this.match===null)return this.readable=!1,null;let n=this.funHash(this.match);this.matches=this.leftMap.get(n)||[],this.matchIdx=0}}_addDataListenerIfNeeded(){this.addedDataListener||(this.addedDataListener=!0,this._addDataListener())}_addDataListener(){this.left.on("data",n.bind(this));function n(t){let e=this.funHash(t),a=this.leftMap.get(e);a||(a=[],this.leftMap.set(e,a)),a.push(t)}}}return q1=r,q1}var L1,ZR;function xV(){if(ZR)return L1;ZR=1;const{MultiTransformIterator:i,SimpleTransformIterator:r,scheduleTask:o}=it();class n extends i{constructor(e,a,u,c){super(e,c),this.right=a,this.funJoin=u,this.on("end",()=>this.right.close())}_end(){super._end(),o(()=>this.right.destroy())}_createTransformer(e){return new r(this.right.clone(),{transform:(a,u,c)=>{let s=this.funJoin(e,a);s!==null&&c(s),u()}})}}return L1=n,L1}var x1,kR;function BV(){if(kR)return x1;kR=1;let i=it().AsyncIterator;class r extends i{constructor(n,t,e,a){super(),this.left=n,this.right=t,this.funHash=e,this.funJoin=a,this.usedLeft=!1,this.leftMap=new Map,this.rightMap=new Map,this.on("end",()=>this._cleanup()),this.match=null,this.matches=[],this.matchIdx=0,(this.left.readable||this.right.readable)&&(this.readable=!0),this.left.on("error",u=>this.destroy(u)),this.right.on("error",u=>this.destroy(u)),this.left.on("readable",()=>this.readable=!0),this.right.on("readable",()=>this.readable=!0),this.left.on("end",()=>{this.hasResults()||this._end()}),this.right.on("end",()=>{this.hasResults()||this._end()})}hasResults(){return!this.left.ended||!this.right.ended||!!this.matches&&this.matchIdx<this.matches.length}_cleanup(){this.leftMap=null,this.rightMap=null,this.matches=null}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(;;){if(this.ended)return null;for(;this.matchIdx<this.matches.length;){let e=this.matches[this.matchIdx++],a=this.usedLeft?this.funJoin(this.match,e):this.funJoin(e,this.match);if(a!==null)return a}this.hasResults()||this._end();let n=null;for(let e=0;e<2&&(n=this.usedLeft?this.right.read():this.left.read(),this.usedLeft=!this.usedLeft,n===null);++e);if(this.done||n===null)return this.readable=!1,null;let t=this.funHash(n);if(this.usedLeft&&this.right.done)this.leftMap=null;else if(this.left.done)this.rightMap=null;else{let e=this.usedLeft?this.leftMap:this.rightMap;e.has(t)||e.set(t,[]);let a=e.get(t);a||(a=[],e.set(t,a)),a.push(n)}this.match=n,this.matches=(this.usedLeft?this.rightMap:this.leftMap).get(t)||[],this.matchIdx=0}}}return x1=r,x1}var B1,eD;function CV(){if(eD)return B1;eD=1;let i=it().AsyncIterator;class r extends i{constructor(n){super(),Array.isArray(n)||(n=Array.prototype.slice.call(arguments)),this.streams=n;for(let t of n)t.on("readable",()=>this.emit("readable")),t.on("end",()=>this._removeStream(t));this.streams.length===0&&this.close(),this.idx=this.streams.length-1}_removeStream(n){let t=this.streams.indexOf(n);t<0||(this.streams.splice(t,1),this.idx>=this.streams.length&&--this.idx,this.streams.length===0&&this._end())}close(){super.close();for(let n of this.streams)n.close()}read(){for(let n=0;n<this.streams.length;++n){this.idx=(this.idx+1)%this.streams.length;let t=this.streams[this.idx].read();if(t!==null)return t}return null}}return B1=r,B1}var C1,tD;function nb(){if(tD)return C1;tD=1;const i=qV(),r=LV(),o=xV(),n=BV(),t=CV();return C1={DynamicNestedLoopJoin:i,HashJoin:r,NestedLoopJoin:o,SymmetricHashJoin:n,MergeStream:t},C1}var rD;function QV(){if(rD)return Vh;rD=1,Object.defineProperty(Vh,"__esModule",{value:!0}),Vh.ActorRdfJoinHash=void 0;const i=cr(),r=pe(),o=hv(),n=gs(),t=it(),e=nb(),a=hr();let u=class extends i.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:`hash-${s.canHandleUndefs?"undef":"def"}`,limitEntries:2,requiresVariableOverlap:!0,canHandleUndefs:s.canHandleUndefs})}async getOutput(s,l){const d=l.metadatas;let f;const h=i.ActorRdfJoin.overlappingVariables(d);if(this.canHandleUndefs){const p=l.entriesSorted[0].output,y=l.entriesSorted[1].output;f=new n.ClosableTransformIterator(async()=>{const b=new o.BindingsIndexUndef(h,v=>v&&v.termType!=="Variable"?(0,a.termToString)(v):"",!0);return await new Promise(v=>{p.bindingsStream.on("data",F=>{(b.getFirst(F,!1)??b.put(F,[])).push(F)}),p.bindingsStream.on("end",v),p.bindingsStream.on("error",F=>{f.emit("error",F)})}),new t.MultiTransformIterator(y.bindingsStream,{multiTransform:v=>new t.ArrayIterator(b.get(v).flat().map(F=>i.ActorRdfJoin.joinBindings(v,F)).filter(F=>F!==null),{autoStart:!1}),autoStart:!1})},{autoStart:!1,onClose(){p.bindingsStream.destroy(),y.bindingsStream.destroy()}})}else{const{hashFunction:p}=await this.mediatorHashBindings.mediate({context:s.context}),y=h.map(b=>b.variable);f=new e.HashJoin(l.entriesSorted[0].output.bindingsStream,l.entriesSorted[1].output.bindingsStream,b=>p(b,y),i.ActorRdfJoin.joinBindings)}return{result:{type:"bindings",bindingsStream:f,metadata:async()=>await this.constructResultMetadata(l.entriesSorted,d,s.context)}}}async getJoinCoefficients(s,l){let d=s.entries;l.metadatas[1].cardinality.value<l.metadatas[0].cardinality.value&&(l.metadatas=[l.metadatas[1],l.metadatas[0]],d=[s.entries[1],s.entries[0]]);const{metadatas:f}=l,h=i.ActorRdfJoin.getRequestInitialTimes(f),p=i.ActorRdfJoin.getRequestItemTimes(f);let y=f[0].cardinality.value+f[1].cardinality.value;return this.canHandleUndefs||(y*=.8),(0,r.passTestWithSideData)({iterations:y,persistedItems:f[0].cardinality.value,blockingItems:f[0].cardinality.value,requestTime:h[0]+f[0].cardinality.value*p[0]+h[1]+f[1].cardinality.value*p[1]},{...l,entriesSorted:d})}};return Vh.ActorRdfJoinHash=u,Vh}var nD;function iD(){return nD||(nD=1,(function(i){var r=Po&&Po.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Po&&Po.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(QV(),i)})(Po)),Po}var No={},zh={},aD;function UV(){if(aD)return zh;aD=1,Object.defineProperty(zh,"__esModule",{value:!0}),zh.ActorRdfJoinSymmetricHash=void 0;const i=cr(),r=pe(),o=nb();let n=class extends i.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"symmetric-hash",limitEntries:2,requiresVariableOverlap:!0})}async getOutput(e){const a=await i.ActorRdfJoin.getMetadatas(e.entries),u=i.ActorRdfJoin.overlappingVariables(a),{hashFunction:c}=await this.mediatorHashBindings.mediate({context:e.context}),s=u.map(d=>d.variable);return{result:{type:"bindings",bindingsStream:new o.SymmetricHashJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,d=>c(d,s),i.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(e.entries,a,e.context)}}}async getJoinCoefficients(e,a){const{metadatas:u}=a,c=i.ActorRdfJoin.getRequestInitialTimes(u),s=i.ActorRdfJoin.getRequestItemTimes(u);return(0,r.passTestWithSideData)({iterations:u[0].cardinality.value+u[1].cardinality.value,persistedItems:u[0].cardinality.value+u[1].cardinality.value,blockingItems:0,requestTime:c[0]+u[0].cardinality.value*s[0]+c[1]+u[1].cardinality.value*s[1]},a)}};return zh.ActorRdfJoinSymmetricHash=n,zh}var oD;function VV(){return oD||(oD=1,(function(i){var r=No&&No.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=No&&No.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(UV(),i)})(No)),No}var Io={},Hh={},uD;function GV(){if(uD)return Hh;uD=1,Object.defineProperty(Hh,"__esModule",{value:!0}),Hh.ActorRdfJoinNestedLoop=void 0;const i=cr(),r=pe(),o=nb();let n=class extends i.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){return{result:{type:"bindings",bindingsStream:new o.NestedLoopJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,i.ActorRdfJoin.joinBindings,{autoStart:!1}),metadata:async()=>await this.constructResultMetadata(e.entries,await i.ActorRdfJoin.getMetadatas(e.entries),e.context)}}}async getJoinCoefficients(e,a){const{metadatas:u}=a,c=i.ActorRdfJoin.getRequestInitialTimes(u),s=i.ActorRdfJoin.getRequestItemTimes(u);return(0,r.passTestWithSideData)({iterations:u[0].cardinality.value*u[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:c[0]+u[0].cardinality.value*s[0]+c[1]+u[1].cardinality.value*s[1]},a)}};return Hh.ActorRdfJoinNestedLoop=n,Hh}var sD;function XV(){return sD||(sD=1,(function(i){var r=Io&&Io.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Io&&Io.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(GV(),i)})(Io)),Io}var qo={},$h={},Lo={},Jh={},xo={},cD;function c5(){if(cD)return xo;cD=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.bindingsToCompactString=xo.bindingsToString=void 0;const i=hr();function r(n){const t={};for(const e of n.keys())t[e.value]=(0,i.termToString)(n.get(e));return JSON.stringify(t,null,"  ")}xo.bindingsToString=r;function o(n,t){return t.map(e=>{const a=n.get(e);return a?(0,i.termToString)(a):""}).join("")}return xo.bindingsToCompactString=o,xo}var lD;function l5(){if(lD)return Jh;lD=1,Object.defineProperty(Jh,"__esModule",{value:!0}),Jh.Bindings=void 0;const i=pe(),r=K0,o=c5();let n=class Kt{constructor(e,a,u){this.type="bindings",this.dataFactory=e,this.entries=a,this.contextHolder=u}has(e){return this.entries.has(typeof e=="string"?e:e.value)}get(e){return this.entries.get(typeof e=="string"?e:e.value)}set(e,a){return new Kt(this.dataFactory,this.entries.set(typeof e=="string"?e:e.value,a),this.contextHolder)}delete(e){return new Kt(this.dataFactory,this.entries.delete(typeof e=="string"?e:e.value),this.contextHolder)}keys(){return this.mapIterable(this.iteratorToIterable(this.entries.keys()),e=>this.dataFactory.variable(e))}values(){return this.iteratorToIterable(this.entries.values())}forEach(e){for(const[a,u]of this.entries.entries())e(u,this.dataFactory.variable(a))}get size(){return this.entries.size}[Symbol.iterator](){return this.mapIterable(this.iteratorToIterable(this.entries.entries()),([e,a])=>[this.dataFactory.variable(e),a])[Symbol.iterator]()}equals(e){if(!e)return!1;if(this===e)return!0;if(this.size!==e.size)return!1;for(const a of this.keys())if(!this.get(a)?.equals(e.get(a)))return!1;return!0}filter(e){return new Kt(this.dataFactory,(0,r.Map)(this.entries.filter((a,u)=>e(a,this.dataFactory.variable(u)))),this.contextHolder)}map(e){return new Kt(this.dataFactory,(0,r.Map)(this.entries.map((a,u)=>e(a,this.dataFactory.variable(u)))),this.contextHolder)}merge(e){if(this.size<e.size&&e instanceof Kt)return e.merge(this);let a=this.entries;if(e instanceof Kt)for(const[u,c]of e.entries){const s=this.entries.get(u);if(s&&!s.equals(c))return;a=a.set(u,c)}else for(const[u,c]of e){const s=this.entries.get(u.value);if(s&&!s.equals(c))return;a=a.set(u.value,c)}return this.createBindingsWithContexts(a,e)}mergeWith(e,a){if(this.size<a.size&&a instanceof Kt)return a.mergeWith(e,this);let u=this.entries;if(a instanceof Kt)for(const[c,s]of a.entries){const l=this.entries.get(c);let d;l&&!l.equals(s)?d=e(l,s,this.dataFactory.variable(c)):d=s,u=u.set(c,d)}else for(const[c,s]of a){const l=this.entries.get(c.value);let d;l&&!l.equals(s)?d=e(l,s,c):d=s,u=u.set(c.value,d)}return this.createBindingsWithContexts(u,a)}createBindingsWithContexts(e,a){if(this.contextHolder&&this.contextHolder.context){let u=this.contextHolder.context;return"contextHolder"in a&&a.contextHolder&&a.contextHolder.context&&(u=Kt.mergeContext(this.contextHolder.contextMergeHandlers,u,a.contextHolder.context)),new Kt(this.dataFactory,e,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:u})}return new Kt(this.dataFactory,e,a.contextHolder)}static mergeContext(e,a,u){const c=[...a.keys(),...u.keys()],s={},l={},d=new Set(u.keys().map(h=>h.name)),f=a.keys().filter(h=>d.has(h.name));for(const h of c){if(l[h.name]===1)continue;l[h.name]=1;const p=f.some(y=>y.name===h.name);if(e[h.name]&&p){s[h.name]=e[h.name].run(a.get(h),u.get(h));continue}!e[h.name]&&p||(s[h.name]=a.get(h)||u.get(h))}return new i.ActionContext(s)}setContextEntry(e,a){return this.setContextEntryRaw(e,a)}setContextEntryRaw(e,a){return this.contextHolder&&this.contextHolder.context?new Kt(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:this.contextHolder.context.set(e,a)}):new Kt(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder?.contextMergeHandlers??{},context:new i.ActionContext().set(e,a)})}deleteContextEntry(e){return this.deleteContextEntryRaw(e)}deleteContextEntryRaw(e){return this.contextHolder?new Kt(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:this.contextHolder.context?.delete(e)}):new Kt(this.dataFactory,this.entries)}getContext(){return this.contextHolder?.context}getContextEntry(e){return this.getContext()?.get(e)}toString(){return(0,o.bindingsToString)(this)}*mapIterable(e,a){for(const u of e)yield a(u)}iteratorToIterable(e){return{[Symbol.iterator]:()=>e}}};return Jh.Bindings=n,Jh}var Kh={},dD;function zV(){if(dD)return Kh;dD=1,Object.defineProperty(Kh,"__esModule",{value:!0}),Kh.BindingsFactory=void 0;const i=K0,r=l5();let o=class d5{constructor(t,e){this.dataFactory=t,this.contextMergeHandlers=e}static async create(t,e,a){return new d5(a,(await t.mediate({context:e})).mergeHandlers)}bindings(t=[]){return new r.Bindings(this.dataFactory,(0,i.Map)(t.map(([e,a])=>[e.value,a])),this.contextMergeHandlers?{contextMergeHandlers:this.contextMergeHandlers}:void 0)}fromBindings(t){return this.bindings([...t])}fromRecord(t){return this.bindings(Object.entries(t).map(([e,a])=>[this.dataFactory.variable(e),a]))}};return Kh.BindingsFactory=o,Kh}var fD;function At(){return fD||(fD=1,(function(i){var r=Lo&&Lo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Lo&&Lo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(l5(),i),o(zV(),i),o(c5(),i)})(Lo)),Lo}var pD;function HV(){if(pD)return $h;pD=1,Object.defineProperty($h,"__esModule",{value:!0}),$h.ActorRdfJoinMinusHash=void 0;const i=cr(),r=pe(),o=At(),n=hv(),t=gs(),e=hr();let a=class f5 extends i.ActorRdfJoin{constructor(c){super(c,{logicalType:"minus",physicalName:`hash-${c.canHandleUndefs?"undef":"def"}`,limitEntries:2,canHandleUndefs:c.canHandleUndefs})}static constructIndex(c,s){return c?new n.BindingsIndexUndef(s,l=>l&&l.termType!=="Variable"?(0,e.termToString)(l):"",!1):new n.BindingsIndexDef(s,o.bindingsToCompactString)}async getOutput(c){const s=c.entries[1].output,l=c.entries[0].output,d=await i.ActorRdfJoin.getMetadatas(c.entries);let f=i.ActorRdfJoin.overlappingVariables(d);if(c.graphVariableFromParentScope&&(f=f.filter(p=>!p.variable.equals(c.graphVariableFromParentScope))),f.length===0)return s.bindingsStream.destroy(),{result:l};const h=new t.ClosableTransformIterator(async()=>{const p=f5.constructIndex(this.canHandleUndefs,f);return await new Promise(y=>{s.bindingsStream.on("data",b=>p.put(b,!0)),s.bindingsStream.on("end",y),s.bindingsStream.on("error",b=>h.emit("error",b))}),l.bindingsStream.filter(y=>!p.getFirst(y,!0))},{autoStart:!1,onClose(){s.bindingsStream.destroy(),l.bindingsStream.destroy()}});return{result:{type:"bindings",bindingsStream:h,metadata:l.metadata}}}async getJoinCoefficients(c,s){const{metadatas:l}=s,d=i.ActorRdfJoin.getRequestInitialTimes(l),f=i.ActorRdfJoin.getRequestItemTimes(l);let h=l[0].cardinality.value+l[1].cardinality.value;return this.canHandleUndefs||(h*=.8),(0,r.passTestWithSideData)({iterations:h,persistedItems:l[0].cardinality.value,blockingItems:l[0].cardinality.value,requestTime:d[0]+l[0].cardinality.value*f[0]+d[1]+l[1].cardinality.value*f[1]},s)}};return $h.ActorRdfJoinMinusHash=a,$h}var hD;function yD(){return hD||(hD=1,(function(i){var r=qo&&qo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=qo&&qo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(HV(),i)})(qo)),qo}var Bo={},Yh={},_D;function $V(){if(_D)return Yh;_D=1,Object.defineProperty(Yh,"__esModule",{value:!0}),Yh.ActorRdfJoinOptionalHash=void 0;const i=cr(),r=pe(),o=At(),n=hv(),t=gs(),e=it(),a=hr();let u=class d0 extends i.ActorRdfJoin{constructor(s){super(s,{logicalType:"optional",physicalName:`hash-${s.canHandleUndefs?"undef":"def"}-${s.blocking?"blocking":"nonblocking"}`,limitEntries:2,canHandleUndefs:s.canHandleUndefs,requiresVariableOverlap:!0})}static constructIndex(s,l){return s?new n.BindingsIndexUndef(l,d=>d&&d.termType!=="Variable"?(0,a.termToString)(d):"",!0):new n.BindingsIndexDef(l,o.bindingsToCompactString)}async getOutput(s){const l=s.entries[1].output,d=s.entries[0].output,f=await i.ActorRdfJoin.getMetadatas(s.entries),h=i.ActorRdfJoin.overlappingVariables(f);let p;return this.blocking?p=new t.ClosableTransformIterator(async()=>{const y=d0.constructIndex(this.canHandleUndefs,h);return await new Promise(b=>{l.bindingsStream.on("data",v=>{(y.getFirst(v,!0)??y.put(v,[])).push(v)}),l.bindingsStream.on("end",b),l.bindingsStream.on("error",v=>{p.emit("error",v)})}),new e.MultiTransformIterator(d.bindingsStream,{multiTransform:b=>new e.ArrayIterator(y.get(b).flat().map(v=>i.ActorRdfJoin.joinBindings(b,v)).filter(v=>v!==null),{autoStart:!1}),optional:!0,autoStart:!1})},{autoStart:!1,onClose(){l.bindingsStream.destroy(),d.bindingsStream.destroy()}}):p=new t.ClosableTransformIterator(async()=>{const y=d0.constructIndex(this.canHandleUndefs,h);let b=!0;return l.bindingsStream.on("data",v=>{(y.getFirst(v,!0)??y.put(v,new e.BufferedIterator({autoStart:!1})))._push(v)}),l.bindingsStream.on("end",()=>{for(const v of y.values())v.close();b=!1}),l.bindingsStream.on("error",v=>{p.emit("error",v)}),new e.MultiTransformIterator(d.bindingsStream,{multiTransform:v=>{let F=y.get(v);return F.length===0&&(b?F=[y.put(v,new e.BufferedIterator({autoStart:!1}))]:F=[]),new e.UnionIterator(F.map(S=>S.clone()),{autoStart:!1}).map(S=>i.ActorRdfJoin.joinBindings(v,S))},optional:!0,autoStart:!1})},{autoStart:!1,onClose(){l.bindingsStream.destroy(),d.bindingsStream.destroy()}}),{result:{type:"bindings",bindingsStream:p,metadata:async()=>await this.constructResultMetadata(s.entries,f,s.context,{},!0)}}}async getJoinCoefficients(s,l){const{metadatas:d}=l,f=i.ActorRdfJoin.getRequestInitialTimes(d),h=i.ActorRdfJoin.getRequestItemTimes(d);let p=d[0].cardinality.value+d[1].cardinality.value;return this.canHandleUndefs||(p*=.8),this.blocking&&(p*=.9),(0,r.passTestWithSideData)({iterations:p,persistedItems:d[0].cardinality.value,blockingItems:this.blocking?d[0].cardinality.value:0,requestTime:f[0]+d[0].cardinality.value*h[0]+f[1]+d[1].cardinality.value*h[1]},l)}};return Yh.ActorRdfJoinOptionalHash=u,Yh}var mD;function vg(){return mD||(mD=1,(function(i){var r=Bo&&Bo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Bo&&Bo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o($V(),i)})(Bo)),Bo}var Co={},Wh={},gD;function JV(){if(gD)return Wh;gD=1,Object.defineProperty(Wh,"__esModule",{value:!0}),Wh.ActorRdfJoinOptionalNestedLoop=void 0;const i=cr(),r=pe(),o=nb();let n=class extends i.ActorRdfJoin{constructor(e){super(e,{logicalType:"optional",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){return{result:{type:"bindings",bindingsStream:new o.NestedLoopJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,i.ActorRdfJoin.joinBindings,{optional:!0,autoStart:!1}),metadata:async()=>await this.constructResultMetadata(e.entries,await i.ActorRdfJoin.getMetadatas(e.entries),e.context,{},!0)}}}async getJoinCoefficients(e,a){const{metadatas:u}=a,c=i.ActorRdfJoin.getRequestInitialTimes(u),s=i.ActorRdfJoin.getRequestItemTimes(u);return(0,r.passTestWithSideData)({iterations:u[0].cardinality.value*u[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:c[0]+u[0].cardinality.value*s[0]+c[1]+u[1].cardinality.value*s[1]},a)}};return Wh.ActorRdfJoinOptionalNestedLoop=n,Wh}var bD;function KV(){return bD||(bD=1,(function(i){var r=Co&&Co.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Co&&Co.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(JV(),i)})(Co)),Co}var Qo={},Zh={},Uo={},kh={},vD;function YV(){if(vD)return kh;vD=1,Object.defineProperty(kh,"__esModule",{value:!0}),kh.ActorBindingsAggregatorFactory=void 0;const i=pe();let r=class extends i.Actor{constructor(n){super(n),this.mediatorExpressionEvaluatorFactory=n.mediatorExpressionEvaluatorFactory}};return kh.ActorBindingsAggregatorFactory=r,kh}var ey={},TD;function WV(){if(TD)return ey;TD=1,Object.defineProperty(ey,"__esModule",{value:!0}),ey.AggregateEvaluator=void 0;const i=Fe(),r=W(),o=hr();let n=class{constructor(e,a,u=!1){this.evaluator=e,this.distinct=a,this.throwError=u,this.errorOccurred=!1,this.errorOccurred=!1,this.superTypeProvider=e.context.getSafe(i.KeysExpressionEvaluator.superTypeProvider),this.termTransformer=new r.TermTransformer(this.superTypeProvider),this.variableValues=new Set}emptyValueTerm(){}emptyValue(){const e=this.emptyValueTerm();if(e===void 0&&this.throwError)throw new r.EmptyAggregateError;return e}async putBindings(e){if(!this.errorOccurred)try{const a=await this.evaluator.evaluate(e);if(!a||this.errorOccurred)return;(!this.distinct||!this.variableValues.has(o.termToString(a)))&&(this.putTerm(a),this.distinct&&this.variableValues.add(o.termToString(a)))}catch(a){this.safeThrow(a)}}async result(){if(!this.errorOccurred)return this.termResult()}safeThrow(e){if(this.throwError)throw e;this.errorOccurred=!0}termToNumericOrError(e){if(e.termType!=="Literal")throw new Error(`Term with value ${e.value} has type ${e.termType} and is not a numeric literal`);if(!r.isSubTypeOf(e.datatype.value,r.TypeAlias.SPARQL_NUMERIC,this.superTypeProvider))throw new Error(`Term datatype ${e.datatype.value} with value ${e.value} has type ${e.termType} and is not a numeric literal`);return this.termTransformer.transformLiteral(e)}};return ey.AggregateEvaluator=n,ey}var OD;function kt(){return OD||(OD=1,(function(i){var r=Uo&&Uo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Uo&&Uo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(YV(),i),o(WV(),i)})(Uo)),Uo}var ty={},SD;function p5(){if(SD)return ty;SD=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.CountAggregator=void 0;const i=kt(),r=W();let o=class extends i.AggregateEvaluator{constructor(t,e,a){super(t,e,a),this.state=void 0}emptyValueTerm(){return(0,r.typedLiteral)("0",r.TypeURL.XSD_INTEGER)}putTerm(t){this.state===void 0&&(this.state=0),this.state++}termResult(){return this.state===void 0?this.emptyValue():(0,r.typedLiteral)(String(this.state),r.TypeURL.XSD_INTEGER)}};return ty.CountAggregator=o,ty}var FD;function ZV(){if(FD)return Zh;FD=1,Object.defineProperty(Zh,"__esModule",{value:!0}),Zh.ActorBindingsAggregatorFactoryCount=void 0;const i=kt(),r=pe(),o=Ve(),n=p5();let t=class extends i.ActorBindingsAggregatorFactory{constructor(a){super(a)}async test(a){return a.expr.aggregator!=="count"||a.expr.expression.expressionType===o.Algebra.expressionTypes.WILDCARD?(0,r.failTest)("This actor only supports the 'count' aggregator without wildcard."):(0,r.passTestVoid)()}async run({context:a,expr:u}){return new n.CountAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:u.expression,context:a}),u.distinct)}};return Zh.ActorBindingsAggregatorFactoryCount=t,Zh}var AD;function kV(){return AD||(AD=1,(function(i){var r=Qo&&Qo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Qo&&Qo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(ZV(),i),o(p5(),i)})(Qo)),Qo}var Vo={},ry={},ny={},wD;function h5(){if(wD)return ny;wD=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.GroupConcatAggregator=void 0;const i=kt(),r=W();let o=class extends i.AggregateEvaluator{constructor(t,e,a,u,c){super(t,e,c),this.dataFactory=a,this.state=void 0,this.lastLanguageValid=!0,this.lastLanguage=void 0,this.separator=u??" "}emptyValueTerm(){return r.typedLiteral("",r.TypeURL.XSD_STRING)}putTerm(t){this.state===void 0?(this.state=t.value,t.termType==="Literal"&&(this.lastLanguage=t.language)):(this.state+=this.separator+t.value,this.lastLanguageValid&&t.termType==="Literal"&&this.lastLanguage!==t.language&&(this.lastLanguageValid=!1,this.lastLanguage=void 0))}termResult(){return this.state===void 0?this.emptyValue():this.lastLanguageValid&&this.lastLanguage?r.langString(this.state,this.lastLanguage).toRDF(this.dataFactory):r.typedLiteral(this.state,r.TypeURL.XSD_STRING)}};return ny.GroupConcatAggregator=o,ny}var ED;function eG(){if(ED)return ry;ED=1,Object.defineProperty(ry,"__esModule",{value:!0}),ry.ActorBindingsAggregatorFactoryGroupConcat=void 0;const i=kt(),r=Fe(),o=pe(),n=h5();let t=class extends i.ActorBindingsAggregatorFactory{constructor(a){super(a)}async test(a){return a.expr.aggregator!=="group_concat"?(0,o.failTest)("This actor only supports the 'group_concat' aggregator."):(0,o.passTestVoid)()}async run({context:a,expr:u}){return new n.GroupConcatAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:u.expression,context:a}),u.distinct,a.getSafe(r.KeysInitQuery.dataFactory),u.separator)}};return ry.ActorBindingsAggregatorFactoryGroupConcat=t,ry}var jD;function tG(){return jD||(jD=1,(function(i){var r=Vo&&Vo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Vo&&Vo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(eG(),i),o(h5(),i)})(Vo)),Vo}var Go={},iy={},ay={},RD;function y5(){if(RD)return ay;RD=1,Object.defineProperty(ay,"__esModule",{value:!0}),ay.SampleAggregator=void 0;const i=kt();let r=class extends i.AggregateEvaluator{constructor(n,t,e){super(n,t,e),this.state=void 0}putTerm(n){this.state===void 0&&(this.state=n)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return ay.SampleAggregator=r,ay}var DD;function rG(){if(DD)return iy;DD=1,Object.defineProperty(iy,"__esModule",{value:!0}),iy.ActorBindingsAggregatorFactorySample=void 0;const i=kt(),r=pe(),o=y5();let n=class extends i.ActorBindingsAggregatorFactory{constructor(e){super(e)}async test(e){return e.expr.aggregator!=="sample"?(0,r.failTest)("This actor only supports the 'sample' aggregator."):(0,r.passTestVoid)()}async run({context:e,expr:a}){return new o.SampleAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:a.expression,context:e}),a.distinct)}};return iy.ActorBindingsAggregatorFactorySample=n,iy}var PD;function nG(){return PD||(PD=1,(function(i){var r=Go&&Go.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Go&&Go.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(rG(),i),o(y5(),i)})(Go)),Go}var Xo={},oy={},uy={},MD;function _5(){if(MD)return uy;MD=1,Object.defineProperty(uy,"__esModule",{value:!0}),uy.WildcardCountAggregator=void 0;const i=kt(),r=W(),o=hr();let n=class extends i.AggregateEvaluator{constructor(e,a,u){super(e,a,u),this.bindingValues=new Map,this.state=void 0}putTerm(e){}async putBindings(e){this.handleDistinct(e)||(this.state===void 0&&(this.state=0),this.state+=1)}emptyValueTerm(){return(0,r.typedLiteral)("0",r.TypeURL.XSD_INTEGER)}termResult(){return this.state===void 0?this.emptyValue():(0,r.typedLiteral)(String(this.state),r.TypeURL.XSD_INTEGER)}handleDistinct(e){if(this.distinct){const a=[...e];a.sort((d,f)=>d[0].value.localeCompare(f[0].value));const u=a.map(([d])=>d.value).join(","),c=a.map(([,d])=>o.termToString(d)).join(","),s=this.bindingValues.get(u),l=s!==void 0&&s.has(c);return s||this.bindingValues.set(u,new Set),this.bindingValues.get(u).add(c),l}return!1}};return uy.WildcardCountAggregator=n,uy}var ND;function iG(){if(ND)return oy;ND=1,Object.defineProperty(oy,"__esModule",{value:!0}),oy.ActorBindingsAggregatorFactoryWildcardCount=void 0;const i=kt(),r=pe(),o=_5();let n=class extends i.ActorBindingsAggregatorFactory{constructor(e){super(e)}async test(e){return e.expr.aggregator!=="count"||e.expr.expression.expressionType!=="wildcard"?(0,r.failTest)("This actor only supports the 'count' aggregator with wildcard."):(0,r.passTestVoid)()}async run({context:e,expr:a}){return new o.WildcardCountAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:a.expression,context:e}),a.distinct)}};return oy.ActorBindingsAggregatorFactoryWildcardCount=n,oy}var ID;function aG(){return ID||(ID=1,(function(i){var r=Xo&&Xo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Xo&&Xo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(iG(),i),o(_5(),i)})(Xo)),Xo}var zo={},sy={},cy={},qD;function m5(){if(qD)return cy;qD=1,Object.defineProperty(cy,"__esModule",{value:!0}),cy.AverageAggregator=void 0;const i=kt(),r=W();let o=class extends i.AggregateEvaluator{constructor(t,e,a,u,c,s){super(t,e,s),this.dataFactory=a,this.additionFunction=u,this.divisionFunction=c,this.state=void 0}emptyValueTerm(){return r.typedLiteral("0",r.TypeURL.XSD_INTEGER)}putTerm(t){if(this.state===void 0){const e=this.termToNumericOrError(t);this.state={sum:e,count:1}}else{const e=this.termToNumericOrError(t);this.state.sum=this.additionFunction.applyOnTerms([this.state.sum,e],this.evaluator),this.state.count++}}termResult(){if(this.state===void 0)return this.emptyValue();const t=new r.IntegerLiteral(this.state.count);return this.divisionFunction.applyOnTerms([this.state.sum,t],this.evaluator).toRDF(this.dataFactory)}};return cy.AverageAggregator=o,cy}var LD;function oG(){if(LD)return sy;LD=1,Object.defineProperty(sy,"__esModule",{value:!0}),sy.ActorBindingsAggregatorFactoryAverage=void 0;const i=kt(),r=Fe(),o=pe(),n=W(),t=m5();let e=class extends i.ActorBindingsAggregatorFactory{constructor(u){super(u),this.mediatorFunctionFactory=u.mediatorFunctionFactory}async test(u){return u.expr.aggregator!=="avg"?(0,o.failTest)("This actor only supports the 'avg' aggregator."):(0,o.passTestVoid)()}async run({context:u,expr:c}){return new t.AverageAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:c.expression,context:u}),c.distinct,u.getSafe(r.KeysInitQuery.dataFactory),await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.ADDITION,context:u,requireTermExpression:!0}),await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.DIVISION,context:u,requireTermExpression:!0}))}};return sy.ActorBindingsAggregatorFactoryAverage=e,sy}var xD;function uG(){return xD||(xD=1,(function(i){var r=zo&&zo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=zo&&zo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(oG(),i),o(m5(),i)})(zo)),zo}var Ho={},ly={},dy={},BD;function g5(){if(BD)return dy;BD=1,Object.defineProperty(dy,"__esModule",{value:!0}),dy.SumAggregator=void 0;const i=kt(),r=W();let o=class extends i.AggregateEvaluator{constructor(t,e,a,u,c){super(t,e,c),this.dataFactory=a,this.additionFunction=u,this.state=void 0}emptyValueTerm(){return(0,r.typedLiteral)("0",r.TypeURL.XSD_INTEGER)}putTerm(t){if(this.state===void 0)this.state=this.termToNumericOrError(t);else{const e=this.termToNumericOrError(t);this.state=this.additionFunction.applyOnTerms([this.state,e],this.evaluator)}}termResult(){return this.state===void 0?this.emptyValue():this.state.toRDF(this.dataFactory)}};return dy.SumAggregator=o,dy}var CD;function sG(){if(CD)return ly;CD=1,Object.defineProperty(ly,"__esModule",{value:!0}),ly.ActorBindingsAggregatorFactorySum=void 0;const i=kt(),r=Fe(),o=pe(),n=W(),t=g5();let e=class extends i.ActorBindingsAggregatorFactory{constructor(u){super(u),this.mediatorFunctionFactory=u.mediatorFunctionFactory}async test(u){return u.expr.aggregator!=="sum"?(0,o.failTest)("This actor only supports the 'sum' aggregator."):(0,o.passTestVoid)()}async run({expr:u,context:c}){return new t.SumAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:u.expression,context:c}),u.distinct,c.getSafe(r.KeysInitQuery.dataFactory),await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.ADDITION,context:c,requireTermExpression:!0}))}};return ly.ActorBindingsAggregatorFactorySum=e,ly}var QD;function cG(){return QD||(QD=1,(function(i){var r=Ho&&Ho.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ho&&Ho.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(sG(),i),o(g5(),i)})(Ho)),Ho}var $o={},fy={},py={},UD;function lG(){if(UD)return py;UD=1,Object.defineProperty(py,"__esModule",{value:!0}),py.ExpressionFunctionIn=void 0;const i=k(),r=W();let o=class extends i.ExpressionFunctionBase{constructor(t){super({arity:Number.POSITIVE_INFINITY,operator:r.SparqlOperator.IN,apply:async e=>{const{args:a,mapping:u,exprEval:c}=e,[s,...l]=a,d=await c.evaluatorExpressionEvaluation(s,u);return await this.inRecursive(d,{...e,args:l},[])}}),this.equalityFunction=t}checkArity(t){return t.length>0}async inRecursive(t,e,a){const{args:u,mapping:c,exprEval:s}=e;if(u.length===0)return a.every(d=>!d)?(0,r.bool)(!1):Promise.reject(new r.InError(a));try{const l=u.shift(),d=await s.evaluatorExpressionEvaluation(l,c);return this.equalityFunction.applyOnTerms([t,d],s).typedValue?(0,r.bool)(!0):this.inRecursive(t,e,[...a,!1])}catch(l){return this.inRecursive(t,e,[...a,l])}}};return py.ExpressionFunctionIn=o,py}var VD;function dG(){if(VD)return fy;VD=1,Object.defineProperty(fy,"__esModule",{value:!0}),fy.ActorFunctionFactoryExpressionIn=void 0;const i=k(),r=W(),o=lG();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.IN],termFunction:!1}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:r.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.ExpressionFunctionIn(a)}};return fy.ActorFunctionFactoryExpressionIn=n,fy}var GD;function fG(){return GD||(GD=1,(function(i){var r=$o&&$o.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=$o&&$o.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(dG(),i)})($o)),$o}var Jo={},hy={},yy={},XD;function pG(){if(XD)return yy;XD=1,Object.defineProperty(yy,"__esModule",{value:!0}),yy.ExpressionFunctionNotIn=void 0;const i=k(),r=W();let o=class extends i.ExpressionFunctionBase{constructor(t){super({arity:Number.POSITIVE_INFINITY,operator:r.SparqlOperator.NOT_IN,apply:async e=>{const a=await this.inFunction.apply(e);return(0,r.bool)(!a.typedValue)}}),this.inFunction=t}checkArity(t){return t.length>0}};return yy.ExpressionFunctionNotIn=o,yy}var zD;function hG(){if(zD)return hy;zD=1,Object.defineProperty(hy,"__esModule",{value:!0}),hy.ActorFunctionFactoryExpressionNotIn=void 0;const i=k(),r=W(),o=pG();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.NOT_IN],termFunction:!1}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:r.SparqlOperator.IN,context:e.context,arguments:e.arguments});return new o.ExpressionFunctionNotIn(a)}};return hy.ActorFunctionFactoryExpressionNotIn=n,hy}var HD;function yG(){return HD||(HD=1,(function(i){var r=Jo&&Jo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Jo&&Jo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(hG(),i)})(Jo)),Jo}var Ko={},_y={},my={},$D;function _G(){if($D)return my;$D=1,Object.defineProperty(my,"__esModule",{value:!0}),my.TermFunctionGreaterThan=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(t){super({arity:2,operator:r.SparqlOperator.GT,overloads:(0,r.declare)(r.SparqlOperator.GT).set(["term","term"],e=>([a,u])=>this.lessThanFunction.applyOnTerms([u,a],e)).collect()}),this.lessThanFunction=t}};return my.TermFunctionGreaterThan=o,my}var JD;function mG(){if(JD)return _y;JD=1,Object.defineProperty(_y,"__esModule",{value:!0}),_y.ActorFunctionFactoryTermGreaterThan=void 0;const i=k(),r=W(),o=_G();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.GT],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:r.SparqlOperator.LT,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionGreaterThan(a)}};return _y.ActorFunctionFactoryTermGreaterThan=n,_y}var KD;function gG(){return KD||(KD=1,(function(i){var r=Ko&&Ko.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ko&&Ko.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(mG(),i)})(Ko)),Ko}var Yo={},gy={},by={},YD;function bG(){if(YD)return by;YD=1,Object.defineProperty(by,"__esModule",{value:!0}),by.TermFunctionGreaterThanEqual=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(t){super({arity:2,operator:r.SparqlOperator.GTE,overloads:(0,r.declare)(r.SparqlOperator.GTE).set(["term","term"],e=>([a,u])=>this.lessThanEqualFunction.applyOnTerms([u,a],e)).collect()}),this.lessThanEqualFunction=t}};return by.TermFunctionGreaterThanEqual=o,by}var WD;function vG(){if(WD)return gy;WD=1,Object.defineProperty(gy,"__esModule",{value:!0}),gy.ActorFunctionFactoryTermGreaterThanEqual=void 0;const i=k(),r=W(),o=bG();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.GTE],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:r.SparqlOperator.LTE,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionGreaterThanEqual(a)}};return gy.ActorFunctionFactoryTermGreaterThanEqual=n,gy}var ZD;function TG(){return ZD||(ZD=1,(function(i){var r=Yo&&Yo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Yo&&Yo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(vG(),i)})(Yo)),Yo}var Wo={},vy={},Ty={},kD;function OG(){if(kD)return Ty;kD=1,Object.defineProperty(Ty,"__esModule",{value:!0}),Ty.TermFunctionInequality=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(t){super({arity:2,operator:r.SparqlOperator.NOT_EQUAL,overloads:(0,r.declare)(r.SparqlOperator.NOT_EQUAL).set(["term","term"],e=>([a,u])=>(0,r.bool)(!this.equalityFunction.applyOnTerms([a,u],e).typedValue)).collect()}),this.equalityFunction=t}};return Ty.TermFunctionInequality=o,Ty}var eP;function SG(){if(eP)return vy;eP=1,Object.defineProperty(vy,"__esModule",{value:!0}),vy.ActorFunctionFactoryTermInequality=void 0;const i=k(),r=W(),o=OG();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.NOT_EQUAL],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:r.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionInequality(a)}};return vy.ActorFunctionFactoryTermInequality=n,vy}var tP;function FG(){return tP||(tP=1,(function(i){var r=Wo&&Wo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Wo&&Wo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(SG(),i)})(Wo)),Wo}var Zo={},Oy={},Sy={},rP;function AG(){if(rP)return Sy;rP=1,Object.defineProperty(Sy,"__esModule",{value:!0}),Sy.TermFunctionLesserThan=void 0;const i=k(),r=Fe(),o=W();let n=class extends i.TermFunctionBase{constructor(e){super({arity:2,operator:o.SparqlOperator.LT,overloads:(0,o.declare)(o.SparqlOperator.LT).numberTest(()=>(a,u)=>a<u).stringTest(()=>(a,u)=>a.localeCompare(u)===-1).booleanTest(()=>(a,u)=>a<u).dateTimeTest(a=>(u,c)=>(0,o.toUTCDate)(u,a.context.getSafe(r.KeysExpressionEvaluator.defaultTimeZone)).getTime()<(0,o.toUTCDate)(c,a.context.getSafe(r.KeysExpressionEvaluator.defaultTimeZone)).getTime()).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],to:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_DATE]}).set([o.TypeURL.XSD_YEAR_MONTH_DURATION,o.TypeURL.XSD_YEAR_MONTH_DURATION],()=>([a,u])=>(0,o.bool)((0,o.yearMonthDurationsToMonths)((0,o.defaultedYearMonthDurationRepresentation)(a.typedValue))<(0,o.yearMonthDurationsToMonths)((0,o.defaultedYearMonthDurationRepresentation)(u.typedValue)))).set([o.TypeURL.XSD_DAY_TIME_DURATION,o.TypeURL.XSD_DAY_TIME_DURATION],()=>([a,u])=>(0,o.bool)((0,o.dayTimeDurationsToSeconds)((0,o.defaultedDayTimeDurationRepresentation)(a.typedValue))<(0,o.dayTimeDurationsToSeconds)((0,o.defaultedDayTimeDurationRepresentation)(u.typedValue)))).set([o.TypeURL.XSD_TIME,o.TypeURL.XSD_TIME],a=>([u,c])=>(0,o.bool)((0,o.toUTCDate)((0,o.defaultedDateTimeRepresentation)(u.typedValue),a.context.getSafe(r.KeysExpressionEvaluator.defaultTimeZone)).getTime()<(0,o.toUTCDate)((0,o.defaultedDateTimeRepresentation)(c.typedValue),a.context.getSafe(r.KeysExpressionEvaluator.defaultTimeZone)).getTime())).set(["quad","quad"],a=>([u,c])=>{const s=this.quadComponentTest(u.subject,c.subject,a);if(s!==void 0)return(0,o.bool)(s);const l=this.quadComponentTest(u.predicate,c.predicate,a);if(l!==void 0)return(0,o.bool)(l);const d=this.quadComponentTest(u.object,c.object,a);return d!==void 0?(0,o.bool)(d):(0,o.bool)(this.quadComponentTest(u.graph,c.graph,a)??!1)},!1).collect()}),this.equalityFunction=e}quadComponentTest(e,a,u){return this.equalityFunction.applyOnTerms([e,a],u).typedValue?void 0:this.applyOnTerms([e,a],u).typedValue}};return Sy.TermFunctionLesserThan=n,Sy}var nP;function wG(){if(nP)return Oy;nP=1,Object.defineProperty(Oy,"__esModule",{value:!0}),Oy.ActorFunctionFactoryTermLesserThan=void 0;const i=k(),r=W(),o=AG();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.LT],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:r.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionLesserThan(a)}};return Oy.ActorFunctionFactoryTermLesserThan=n,Oy}var iP;function EG(){return iP||(iP=1,(function(i){var r=Zo&&Zo.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Zo&&Zo.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(wG(),i)})(Zo)),Zo}var ko={},Fy={},Ay={},aP;function jG(){if(aP)return Ay;aP=1,Object.defineProperty(Ay,"__esModule",{value:!0}),Ay.TermFunctionLesserThanEqual=void 0;const i=k(),r=W();let o=class extends i.TermFunctionBase{constructor(t,e){super({arity:2,operator:r.SparqlOperator.LTE,overloads:(0,r.declare)(r.SparqlOperator.LTE).set(["term","term"],a=>([u,c])=>(0,r.bool)(this.lessThanFunction.applyOnTerms([u,c],a).typedValue||this.equalityFunction.applyOnTerms([u,c],a).typedValue)).collect()}),this.equalityFunction=t,this.lessThanFunction=e}};return Ay.TermFunctionLesserThanEqual=o,Ay}var oP;function RG(){if(oP)return Fy;oP=1,Object.defineProperty(Fy,"__esModule",{value:!0}),Fy.ActorFunctionFactoryTermLesserThanEqual=void 0;const i=k(),r=W(),o=jG();let n=class extends i.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[r.SparqlOperator.LTE],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const a=await this.mediatorFunctionFactory.mediate({functionName:r.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments}),u=await this.mediatorFunctionFactory.mediate({functionName:r.SparqlOperator.LT,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionLesserThanEqual(a,u)}};return Fy.ActorFunctionFactoryTermLesserThanEqual=n,Fy}var uP;function DG(){return uP||(uP=1,(function(i){var r=ko&&ko.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ko&&ko.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(RG(),i)})(ko)),ko}var eu={},wy={},sP;function PG(){if(sP)return wy;sP=1,Object.defineProperty(wy,"__esModule",{value:!0}),wy.ActorQueryOperationAsk=void 0;const i=dt(),r=pe(),o=$e();let n=class extends i.ActorQueryOperationTypedMediated{constructor(e){super(e,"ask")}async testOperation(e,a){return(0,r.passTestVoid)()}async runOperation(e,a){const u=await this.mediatorQueryOperation.mediate({operation:e.input,context:a}),{bindingsStream:c}=(0,o.getSafeBindings)(u);return{type:"boolean",execute:async()=>(await c.take(1).toArray()).length===1}}};return wy.ActorQueryOperationAsk=n,wy}var cP;function MG(){return cP||(cP=1,(function(i){var r=eu&&eu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=eu&&eu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(PG(),i)})(eu)),eu}var tu={},Ey={},lP;function NG(){if(lP)return Ey;lP=1,Object.defineProperty(Ey,"__esModule",{value:!0}),Ey.ActorQueryOperationBgpJoin=void 0;const i=dt(),r=Fe(),o=pe(),n=Ve();let t=class extends i.ActorQueryOperationTypedMediated{constructor(a){super(a,"bgp")}async testOperation(a,u){return(0,o.passTestVoid)()}async runOperation(a,u){const c=u.getSafe(r.KeysInitQuery.dataFactory),s=new n.Factory(c);return this.mediatorQueryOperation.mediate({operation:s.createJoin(a.patterns),context:u})}};return Ey.ActorQueryOperationBgpJoin=t,Ey}var dP;function IG(){return dP||(dP=1,(function(i){var r=tu&&tu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=tu&&tu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(NG(),i)})(tu)),tu}var ru={},jy={},Q1={},Br={},fP;function qG(){if(fP)return Br;fP=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.termToString=o,Br.getLiteralValue=n,Br.getLiteralType=t,Br.getLiteralLanguage=e,Br.getLiteralDirection=a,Br.stringToTerm=u,Br.quadToStringQuad=c,Br.stringQuadToQuad=s;const i=fs(),r=new i.DataFactory;function o(l){if(l)switch(l.termType){case"NamedNode":return l.value;case"BlankNode":return"_:"+l.value;case"Literal":const d=l;return'"'+d.value+'"'+(d.datatype&&d.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+d.datatype.value:"")+(d.language?"@"+d.language:"")+(d.direction?"--"+d.direction:"");case"Quad":return`<<${o(l.subject)} ${o(l.predicate)} ${o(l.object)}${l.graph.termType==="DefaultGraph"?"":" "+o(l.graph)}>>`;case"Variable":return"?"+l.value;case"DefaultGraph":return l.value}}function n(l){const d=/^"([^]*)"/.exec(l);if(!d)throw new Error(l+" is not a literal");return d[1]}function t(l){const d=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(l);if(!d)throw new Error(l+" is not a literal");return d[1]||(d[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function e(l){const d=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(l);if(!d)throw new Error(l+" is not a literal");if(d[1]){let f=d[1].toLowerCase();const h=f.indexOf("--");return h>=0&&(f=f.slice(0,h)),f}return""}function a(l){const d=l.indexOf("--",l.lastIndexOf('"'));if(d>=0){const f=l.slice(d+2,l.length);if(f==="ltr"||f==="rtl")return f;throw new Error(l+" is not a literal with a valid direction")}return""}function u(l,d){if(d=d||r,!l||!l.length)return d.defaultGraph();switch(l[0]){case"_":return d.blankNode(l.substr(2));case"?":if(!d.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return d.variable(l.substr(1));case'"':const f=e(l),h=a(l),p=d.namedNode(t(l));return d.literal(n(l),f?{language:f,direction:h}:p);default:if(l[0]==="<"&&l.length>4&&l[1]==="<"&&l[l.length-1]===">"&&l[l.length-2]===">"){const y=l.slice(2,-2).trim();let b=[],v=0,F=0,T=!1;for(let S=0;S<y.length;S++){const j=y[S];if(j==="<"&&v++,j===">"){if(v===0)throw new Error("Found closing tag without opening tag in "+l);v--}if(j==='"'){let E=!1,U=S;for(;U-- >0&&y[U]==="\\";)E=!E;E||(T=!T)}if(j===" "&&!T&&v===0){for(b.push(y.slice(F,S));y[S+1]===" ";)S+=1;F=S+1}}if(v!==0)throw new Error("Found opening tag without closing tag in "+l);if(b.push(y.slice(F,y.length)),b.length!==3&&b.length!==4)throw new Error("Nested quad syntax error "+l);return b=b.map(S=>S.startsWith("<")&&!S.includes(" ")?S.slice(1,-1):S),d.quad(u(b[0]),u(b[1]),u(b[2]),b[3]?u(b[3]):void 0)}return d.namedNode(l)}}function c(l){return{subject:o(l.subject),predicate:o(l.predicate),object:o(l.object),graph:o(l.graph)}}function s(l,d){return d=d||r,d.quad(u(l.subject,d),u(l.predicate,d),u(l.object,d),u(l.graph,d))}return Br}var pP;function LG(){return pP||(pP=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.termToString=i.stringToTerm=i.stringQuadToQuad=i.quadToStringQuad=i.getLiteralValue=i.getLiteralType=i.getLiteralDirection=i.getLiteralLanguage=void 0;const r=qG();Object.defineProperty(i,"getLiteralLanguage",{enumerable:!0,get:function(){return r.getLiteralLanguage}}),Object.defineProperty(i,"getLiteralDirection",{enumerable:!0,get:function(){return r.getLiteralDirection}}),Object.defineProperty(i,"getLiteralType",{enumerable:!0,get:function(){return r.getLiteralType}}),Object.defineProperty(i,"getLiteralValue",{enumerable:!0,get:function(){return r.getLiteralValue}}),Object.defineProperty(i,"quadToStringQuad",{enumerable:!0,get:function(){return r.quadToStringQuad}}),Object.defineProperty(i,"stringQuadToQuad",{enumerable:!0,get:function(){return r.stringQuadToQuad}}),Object.defineProperty(i,"stringToTerm",{enumerable:!0,get:function(){return r.stringToTerm}}),Object.defineProperty(i,"termToString",{enumerable:!0,get:function(){return r.termToString}})})(Q1)),Q1}var hP;function xG(){if(hP)return jy;hP=1,Object.defineProperty(jy,"__esModule",{value:!0}),jy.ActorQueryOperationDistinctIdentity=void 0;const i=dt(),r=pe(),o=$e(),n=LG();let t=class extends i.ActorQueryOperationTypedMediated{constructor(a){super(a,"distinct")}async testOperation(a,u){return(0,r.passTestVoid)()}async runOperation(a,u){const c=await this.mediatorQueryOperation.mediate({operation:a.input,context:u});if(c.type==="quads"){const f=(0,o.getSafeQuads)(c);return{type:"quads",quadStream:f.quadStream.filter(await this.newIdentityFilterQuads()),metadata:f.metadata}}const s=(0,o.getSafeBindings)(c),l=(await s.metadata()).variables.map(f=>f.variable);return{type:"bindings",bindingsStream:s.bindingsStream.filter(await this.newIdentityFilter(l)),metadata:s.metadata}}async newIdentityFilter(a){const u={};return c=>{const s=a.map(l=>n.termToString(c.get(l))).join("-");return!(s in u)&&(u[s]=!0)}}async newIdentityFilterQuads(){const a={};return u=>{const c=Object.values(n.quadToStringQuad(u)).join(" ");return!(c in a)&&(a[c]=!0)}}};return jy.ActorQueryOperationDistinctIdentity=t,jy}var yP;function BG(){return yP||(yP=1,(function(i){var r=ru&&ru.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ru&&ru.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(xG(),i)})(ru)),ru}var nu={},Ry={},_P;function CG(){if(_P)return Ry;_P=1,Object.defineProperty(Ry,"__esModule",{value:!0}),Ry.ActorQueryOperationExtend=void 0;const i=dt(),r=pe(),o=At(),n=W(),t=$e();let e=class extends i.ActorQueryOperationTypedMediated{constructor(u){super(u,"extend"),this.mediatorExpressionEvaluatorFactory=u.mediatorExpressionEvaluatorFactory}async testOperation(){return(0,r.passTestVoid)()}async runOperation(u,c){const{expression:s,input:l,variable:d}=u,f=(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:l,context:c}));if((await f.metadata()).variables.some(b=>b.variable.equals(d)))throw new Error(`Illegal binding to variable '${d.value}' that has already been bound`);const h=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:s,context:c}),p=async(b,v,F)=>{try{const T=await h.evaluate(b),S=b.set(d,T);F(S)}catch(T){(0,n.isExpressionError)(T)?(F(b),this.logWarn(c,`Expression error for extend operation (${T.message})with bindings '${(0,o.bindingsToString)(b)}'`)):y.emit("error",T)}v()},y=f.bindingsStream.transform({autoStart:!1,transform:p});return{type:"bindings",bindingsStream:y,async metadata(){const b=await f.metadata();return{...b,variables:[...b.variables,{variable:d,canBeUndef:!1}]}}}}};return Ry.ActorQueryOperationExtend=e,Ry}var mP;function QG(){return mP||(mP=1,(function(i){var r=nu&&nu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=nu&&nu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(CG(),i)})(nu)),nu}var iu={},Dy={},gP;function UG(){if(gP)return Dy;gP=1,Object.defineProperty(Dy,"__esModule",{value:!0}),Dy.ActorQueryOperationFilter=void 0;const i=dt(),r=pe(),o=At(),n=W(),t=$e();let e=class extends i.ActorQueryOperationTypedMediated{constructor(u){super(u,"filter"),this.mediatorExpressionEvaluatorFactory=u.mediatorExpressionEvaluatorFactory}async testOperation(){return(0,r.passTestVoid)()}async runOperation(u,c){const s=await this.mediatorQueryOperation.mediate({operation:u.input,context:c}),l=(0,t.getSafeBindings)(s);(0,t.validateQueryOutput)(l,"bindings");const d=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:u.expression,context:c}),f=async(p,y,b)=>{try{await d.evaluateAsEBV(p)&&b(p)}catch(v){(0,n.isExpressionError)(v)?this.logWarn(c,"Error occurred while filtering.",()=>({error:v,bindings:(0,o.bindingsToString)(p)})):h.emit("error",v)}y()},h=l.bindingsStream.transform({transform:f,autoStart:!1});return{type:"bindings",bindingsStream:h,metadata:l.metadata}}};return Dy.ActorQueryOperationFilter=e,Dy}var bP;function VG(){return bP||(bP=1,(function(i){var r=iu&&iu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=iu&&iu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(UG(),i)})(iu)),iu}var au={},Py={},My={},vP;function b5(){if(vP)return My;vP=1,Object.defineProperty(My,"__esModule",{value:!0}),My.BindingsToQuadsIterator=void 0;const i=it(),r=Rn();let o=class rm extends i.MultiTransformIterator{constructor(t,e,a){super(a,{autoStart:!1}),this.dataFactory=t,this.template=e,this.blankNodeCounter=0}static bindTerm(t,e){return e.termType==="Variable"?t.get(e):e}static bindQuad(t,e){try{return(0,r.mapTermsNested)(e,a=>{const u=rm.bindTerm(t,a);if(!u)throw new Error("Unbound term");return u})}catch{}}static localizeBlankNode(t,e,a){return a.termType==="BlankNode"?t.blankNode(`${a.value}${e}`):a}static localizeQuad(t,e,a){return(0,r.mapTermsNested)(a,u=>rm.localizeBlankNode(t,e,u))}bindTemplate(t,e,a){return e.map(rm.localizeQuad.bind(null,this.dataFactory,a)).map(c=>rm.bindQuad.bind(null,t)(c)).filter(Boolean)}_createTransformer(t){return new i.ArrayIterator(this.bindTemplate(t,this.template,this.blankNodeCounter++),{autoStart:!1})}};return My.BindingsToQuadsIterator=o,My}var TP;function GG(){if(TP)return Py;TP=1,Object.defineProperty(Py,"__esModule",{value:!0}),Py.ActorQueryOperationConstruct=void 0;const i=dt(),r=Fe(),o=pe(),n=$e(),t=Rn(),e=Ve(),a=b5();let u=class v5 extends i.ActorQueryOperationTypedMediated{constructor(s){super(s,"construct")}static getVariables(s){return(0,t.uniqTerms)([].concat.apply([],s.map(l=>(0,t.getVariables)((0,t.getTermsNested)(l)))))}async testOperation(s,l){return(0,o.passTestVoid)()}async runOperation(s,l){const d=l.getSafe(r.KeysInitQuery.dataFactory),f=v5.getVariables(s.template),h={type:e.Algebra.types.PROJECT,input:s.input,variables:f},p=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:h,context:l})),y=new a.BindingsToQuadsIterator(d,s.template,p.bindingsStream);return{metadata:()=>p.metadata().then(v=>({...v,order:void 0,cardinality:{type:v.cardinality.type,value:v.cardinality.value*s.template.length},availableOrders:void 0})),quadStream:y,type:"quads"}}};return Py.ActorQueryOperationConstruct=u,Py}var OP;function T5(){return OP||(OP=1,(function(i){var r=au&&au.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=au&&au.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(GG(),i),o(b5(),i)})(au)),au}var ou={},Ny={},SP;function XG(){if(SP)return Ny;SP=1,Object.defineProperty(Ny,"__esModule",{value:!0}),Ny.ActorQueryOperationFromQuad=void 0;const i=dt(),r=Fe(),o=pe(),n=Ve();let t=class wr extends i.ActorQueryOperationTypedMediated{constructor(a){super(a,"from")}static copyOperation(a,u){const c={};for(const s of Object.keys(a))Array.isArray(a[s])&&s!=="template"?s==="variables"?c[s]=a[s]:c[s]=a[s].map(u):wr.ALGEBRA_TYPES.includes(a[s].type)?c[s]=u(a[s]):c[s]=a[s];return c}static applyOperationDefaultGraph(a,u,c){if(u.type==="bgp"&&u.patterns.length>0||u.type==="path"||u.type==="pattern"){if(u.type==="bgp")return wr.joinOperations(a,u.patterns.map(l=>{if(l.graph.termType!=="DefaultGraph")return a.createBgp([l]);const d=c.map(f=>a.createBgp([Object.assign(a.createPattern(l.subject,l.predicate,l.object,f),{metadata:l.metadata})]));return wr.unionOperations(a,d)}));if(u.graph.termType!=="DefaultGraph")return u;const s=c.map(l=>u.type==="path"?a.createPath(u.subject,u.predicate,u.object,l):Object.assign(a.createPattern(u.subject,u.predicate,u.object,l),{metadata:u.metadata}));return wr.unionOperations(a,s)}return wr.copyOperation(u,s=>this.applyOperationDefaultGraph(a,s,c))}static applyOperationNamedGraph(a,u,c,s){if(u.type==="bgp"&&u.patterns.length>0||u.type==="path"||u.type==="pattern"){const l=u.type==="bgp"?u.patterns[0].graph:u.graph;if(l.termType==="DefaultGraph")return{type:n.Algebra.types.BGP,patterns:[]};if(l.termType==="Variable"){if(c.length===1){const f=c[0],h={};h[`?${l.value}`]=f;const p=a.createValues([l],[h]);let y;return u.type==="bgp"?y=a.createBgp(u.patterns.map(b=>a.createPattern(b.subject,b.predicate,b.object,f))):u.type==="path"?y=a.createPath(u.subject,u.predicate,u.object,f):y=a.createPattern(u.subject,u.predicate,u.object,f),a.createJoin([p,y])}return wr.unionOperations(a,c.map(f=>wr.applyOperationNamedGraph(a,u,[f],s)))}return[...c,...s].some(f=>f.equals(l))?u:{type:n.Algebra.types.BGP,patterns:[]}}return wr.copyOperation(u,l=>this.applyOperationNamedGraph(a,l,c,s))}static joinOperations(a,u){if(u.length===1)return u[0];if(u.length>1)return a.createJoin(u);throw new Error("A join can only be applied on at least one operation")}static unionOperations(a,u){if(u.length===1)return u[0];if(u.length>1)return a.createUnion(u);throw new Error("A union can only be applied on at least one operation")}static createOperation(a,u){let c=u.input;return u.default.length>0&&(c=wr.applyOperationDefaultGraph(a,c,u.default)),(u.named.length>0||u.default.length>0)&&(c=wr.applyOperationNamedGraph(a,c,u.named,u.default)),c}async testOperation(a,u){return(0,o.passTestVoid)()}async runOperation(a,u){const c=u.getSafe(r.KeysInitQuery.dataFactory),s=new n.Factory(c),l=wr.createOperation(s,a);return this.mediatorQueryOperation.mediate({operation:l,context:u})}};return Ny.ActorQueryOperationFromQuad=t,t.ALGEBRA_TYPES=Object.keys(n.Algebra.types).map(e=>n.Algebra.types[e]),Ny}var FP;function zG(){return FP||(FP=1,(function(i){var r=ou&&ou.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ou&&ou.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(XG(),i)})(ou)),ou}var uu={},Iy={},AP;function HG(){if(AP)return Iy;AP=1,Object.defineProperty(Iy,"__esModule",{value:!0}),Iy.ActorQueryOperationProject=void 0;const i=dt(),r=Fe(),o=pe(),n=ov(),t=$e();let e=class extends i.ActorQueryOperationTypedMediated{constructor(u){super(u,"project")}async testOperation(u,c){return(0,o.passTestVoid)()}async runOperation(u,c){const s=c.getSafe(r.KeysInitQuery.dataFactory),l=(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:u.input,context:c})),d=await l.metadata(),f=Object.fromEntries(d.variables.map(T=>[T.variable.value,T])),h=u.variables.map(T=>({variable:T,canBeUndef:!1})),p=Object.fromEntries(h.map(T=>[T.variable.value,T])),y=d.variables.filter(T=>!(T.variable.value in p)),b=h.map(T=>({variable:T.variable,canBeUndef:!(T.variable.value in f)||f[T.variable.value].canBeUndef}));let v=y.length===0?l.bindingsStream:l.bindingsStream.map(T=>{for(const S of y)T=T.delete(S.variable);return T}),F=0;return v=v.map(T=>{F++;const S=new Map;return T.map(j=>{if(j instanceof n.BlankNodeBindingsScoped){let E=S.get(j.value);return E||(E=s.blankNode(`${j.value}${F}`),S.set(j.value,E)),E}return j})}),{type:"bindings",bindingsStream:v,metadata:async()=>({...d,variables:b})}}};return Iy.ActorQueryOperationProject=e,Iy}var wP;function $G(){return wP||(wP=1,(function(i){var r=uu&&uu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=uu&&uu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(HG(),i)})(uu)),uu}var su={},qy={},EP;function JG(){if(EP)return qy;EP=1,Object.defineProperty(qy,"__esModule",{value:!0}),qy.ActorQueryOperationReducedHash=void 0;const i=dt(),r=pe(),o=$e(),n=Zg();let t=class extends i.ActorQueryOperationTypedMediated{constructor(a){super(a,"reduced")}async testOperation(a,u){return(0,r.passTestVoid)()}async runOperation(a,u){const c=(0,o.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:a.input,context:u})),s=(await c.metadata()).variables.map(d=>d.variable);return{type:"bindings",bindingsStream:c.bindingsStream.filter(await this.newHashFilter(u,s)),metadata:c.metadata}}async newHashFilter(a,u){const{hashFunction:c}=await this.mediatorHashBindings.mediate({context:a}),s=new n.LRUCache({max:this.cacheSize});return l=>{const d=c(l,u);return s.has(d)?!1:(s.set(d,!0),!0)}}};return qy.ActorQueryOperationReducedHash=t,qy}var jP;function KG(){return jP||(jP=1,(function(i){var r=su&&su.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=su&&su.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(JG(),i)})(su)),su}var cu={},Ly={},RP;function YG(){if(RP)return Ly;RP=1,Object.defineProperty(Ly,"__esModule",{value:!0}),Ly.ActorQueryOperationSlice=void 0;const i=dt(),r=Fe(),o=pe();let n=class extends i.ActorQueryOperationTypedMediated{constructor(e){super(e,"slice")}async testOperation(e,a){return(0,o.passTestVoid)()}async runOperation(e,a){e.length&&(a=a.set(r.KeysQueryOperation.limitIndicator,e.length));const u=await this.mediatorQueryOperation.mediate({operation:e.input,context:a});return u.type==="bindings"?{type:"bindings",bindingsStream:this.sliceStream(u.bindingsStream,e),metadata:this.sliceMetadata(u,e)}:u.type==="quads"?{type:"quads",quadStream:this.sliceStream(u.quadStream,e),metadata:this.sliceMetadata(u,e)}:u}sliceStream(e,a){const u=!!a.length||a.length===0,{start:c}=a,s=u?a.start+a.length-1:Number.POSITIVE_INFINITY;return e.transform({offset:c,limit:Math.max(s-c+1,0),autoStart:!1})}sliceMetadata(e,a){const u=!!a.length||a.length===0;return()=>e.metadata().then(c=>{const s={...c.cardinality};return Number.isFinite(s.value)&&(s.value=Math.max(0,s.value-a.start),u&&(s.value=Math.min(s.value,a.length))),{...c,cardinality:s}})}};return Ly.ActorQueryOperationSlice=n,Ly}var DP;function WG(){return DP||(DP=1,(function(i){var r=cu&&cu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=cu&&cu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(YG(),i)})(cu)),cu}var lu={},xy={},PP;function ZG(){if(PP)return xy;PP=1,Object.defineProperty(xy,"__esModule",{value:!0}),xy.ActorQueryOperationUnion=void 0;const i=dt(),r=pe(),o=yr(),n=$e(),t=it();let e=class wg extends i.ActorQueryOperationTypedMediated{constructor(u){super(u,"union")}static unionVariables(u){const c={};for(const s of u)for(const l of s){c[l.variable.value]||(c[l.variable.value]={variable:l.variable,canBeUndef:l.canBeUndef,occurrences:0});const d=c[l.variable.value];d.canBeUndef=d.canBeUndef||l.canBeUndef,d.occurrences++}return Object.values(c).map(s=>s.occurrences===u.length?{variable:s.variable,canBeUndef:s.canBeUndef}:{variable:s.variable,canBeUndef:!0})}static async unionMetadata(u,c,s,l){let d=(await l.mediate({mode:"initialize",context:s})).metadata;for(const h of u)d={...h,...(await l.mediate({mode:"append",accumulatedMetadata:d,appendingMetadata:h,context:s})).metadata};d.state=new o.MetadataValidationState;const f=()=>d.state.invalidate();for(const h of u)h.state.addInvalidateListener(f);if(c){const h=u.map(p=>p.variables);d.variables=wg.unionVariables(h)}return d}async testOperation(u,c){return(0,r.passTestVoid)()}async runOperation(u,c){const s=await Promise.all(u.input.map(d=>this.mediatorQueryOperation.mediate({operation:d,context:c})));let l;for(const d of s)if(l===void 0)l=d.type;else if(l!==d.type)throw new Error(`Unable to union ${l} and ${d.type}`);if(l==="bindings"||u.input.length===0){const d=s.map(n.getSafeBindings);return{type:"bindings",bindingsStream:new t.UnionIterator(d.map(p=>p.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(d.map(p=>p.metadata())).then(p=>wg.unionMetadata(p,!0,c,this.mediatorRdfMetadataAccumulate))}}if(l==="quads"){const d=s.map(n.getSafeQuads);return{type:"quads",quadStream:new t.UnionIterator(d.map(p=>p.quadStream),{autoStart:!1}),metadata:()=>Promise.all(d.map(p=>p.metadata())).then(p=>wg.unionMetadata(p,!1,c,this.mediatorRdfMetadataAccumulate))}}throw new Error(`Unable to union ${l}`)}};return xy.ActorQueryOperationUnion=e,xy}var MP;function O5(){return MP||(MP=1,(function(i){var r=lu&&lu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=lu&&lu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(ZG(),i)})(lu)),lu}var du={},By={},fu={},Cy={},Qy={},NP;function S5(){if(NP)return Qy;NP=1,Object.defineProperty(Qy,"__esModule",{value:!0}),Qy.PathVariableObjectIterator=void 0;const i=$e(),r=it(),o=hr();let n=class extends r.BufferedIterator{constructor(e,a,u,c,s,l,d,f=16){super({autoStart:!1}),this.algebraFactory=e,this.subject=a,this.predicate=u,this.graph=c,this.context=s,this.mediatorQueryOperation=l,this.maxRunningOperations=f,this.termHashes=new Map,this.runningOperations=[],this.pendingOperations=[],this.started=!1,this._push(this.subject,d)}getProperty(e,a){return!this.started&&e==="metadata"&&this.startNextOperation(!1).catch(u=>this.emit("error",u)),super.getProperty(e,a)}_end(e){for(const a of this.runningOperations)a.destroy();super._end(e)}_push(e,a=!0){let u;if(a&&(u=(0,o.termToString)(e),this.termHashes.has(u)))return!1;const c=this.algebraFactory.dataFactory.variable("b");return this.pendingOperations.push({variable:c,operation:this.algebraFactory.createPath(e,this.predicate,c,this.graph)}),u&&(this.termHashes.set(u,e),super._push(e)),!0}async startNextOperation(e){this.started=!0;const a=this.pendingOperations.pop(),u=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:a.operation,context:this.context})),c=u.bindingsStream.map(s=>s.get(a.variable));this.runningOperations.push(c),c.on("error",s=>this.destroy(s)),c.on("readable",()=>{e&&this._fillBufferAsync(),this.readable=!0}),c.on("end",()=>{this.runningOperations.splice(this.runningOperations.indexOf(c),1),e&&this._fillBufferAsync(),this.readable=!0}),this.getProperty("metadata")||this.setProperty("metadata",u.metadata)}_read(e,a){const u=this;(async function(){for(;u.runningOperations.length<u.maxRunningOperations&&u.pendingOperations.length!==0;)await u.startNextOperation(!0);let c=0,s,l=!0;for(;!l||c!==(c=e);){l=!0;for(let d=0;d<u.runningOperations.length&&e>0;d++)(s=u.runningOperations[d].read())!==null&&(u._push(s)?e--:l=!1)}u.closeIfNeeded()})().then(()=>{a()},c=>this.destroy(c))}closeIfNeeded(){this.runningOperations.length===0&&this.pendingOperations.length===0&&this.close()}};return Qy.PathVariableObjectIterator=n,Qy}var IP;function kG(){if(IP)return Cy;IP=1,Object.defineProperty(Cy,"__esModule",{value:!0}),Cy.ActorAbstractPath=void 0;const i=dt(),r=Fe(),o=pe(),n=$e(),t=it(),e=hr(),a=Ve(),u=S5();let c=class extends i.ActorQueryOperationTypedMediated{constructor(l,d){super(l,"path"),this.predicateType=d}async testOperation(l,d){return l.predicate.type!==this.predicateType?(0,o.failTest)(`This Actor only supports ${this.predicateType} Path operations.`):(0,o.passTestVoid)()}generateVariable(l,d,f){return f?d&&(d.subject.value===f||d.object.value===f)?this.generateVariable(l,d,`${f}b`):l.variable(f):this.generateVariable(l,d,"b")}async isPathArbitraryLengthDistinct(l,d,f){return d.get(r.KeysQueryOperation.isPathArbitraryLengthDistinctKey)?(d=d.set(r.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!1),{context:d,operation:void 0}):(d=d.set(r.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!0),{context:d,operation:(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:l.createDistinct(f),context:d}))})}async predicateStarGraphVariable(l,d,f,h,p,y,b){const v=this.getPathSources(f),F=this.generateVariable(y.dataFactory,y.createPath(l,f,d,h)),T=y.createUnion([this.assignPatternSources(y,y.createPattern(l,F,d,h),v),this.assignPatternSources(y,y.createPattern(d,F,l,h),v)]),S=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:p,operation:T})),j=new Set;return{bindingsStream:new t.MultiTransformIterator(S.bindingsStream,{multiTransform:U=>{const K=U.get(h);return j.has(K.value)?new t.EmptyIterator:(j.add(K.value),new t.TransformIterator(async()=>{const _=new t.BufferedIterator;return await this.getObjectsPredicateStar(y,l,f,K,p,{},_,{count:0}),_.map(O=>b.bindings([[d,O],[h,K]]))},{maxBufferSize:128}))},autoStart:!1}),metadata:S.metadata}}async getObjectsPredicateStarEval(l,d,f,h,p,y,b,v){if(h.termType==="Variable")return this.predicateStarGraphVariable(l,f,d,h,p,b,v);const F=new u.PathVariableObjectIterator(b,l,d,h,p,this.mediatorQueryOperation,y);return{bindingsStream:F.map(S=>v.bindings([[f,S]])),async metadata(){const S=await new Promise(j=>{F.getProperty("metadata",E=>j(E()))});return S.cardinality.value++,S}}}async getObjectsPredicateStar(l,d,f,h,p,y,b,v){const F=(0,e.termToString)(d);if(y[F])return;b._push(d),y[F]=d,v.count++;const T=this.generateVariable(l.dataFactory),S=l.createPath(d,f,T,h),j=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:S,context:p}));return j.bindingsStream.on("data",async E=>{const U=E.get(T);await this.getObjectsPredicateStar(l,U,f,h,p,y,b,v)}),j.bindingsStream.on("end",()=>{--v.count===0&&b.close()}),j.metadata}async getSubjectAndObjectBindingsPredicateStar(l,d,f,h,p,y,b,v,F,T,S,j,E){const U=(0,e.termToString)(h)+(0,e.termToString)(y);if(F[U])return;if(S.count++,F[U]=!0,T._push(E.bindings([[l,f],[d,h]])),U in v){const _=await v[U];for(const O of _)await this.getSubjectAndObjectBindingsPredicateStar(l,d,f,O,p,y,b,v,F,T,S,j,E);--S.count===0&&T.close();return}const K=new Promise(async(_,O)=>{const P=[],R=this.generateVariable(j.dataFactory),I=j.createPath(h,p,R,y),C=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:I,context:b}));C.bindingsStream.on("data",async Y=>{const H=Y.get(R);P.push(H),await this.getSubjectAndObjectBindingsPredicateStar(l,d,f,H,p,y,b,v,F,T,S,j,E)}),C.bindingsStream.on("error",O),C.bindingsStream.on("end",()=>{--S.count===0&&T.close(),_(P)})});v[U]=K}getPathSources(l){switch(l.type){case a.Algebra.types.ALT:case a.Algebra.types.SEQ:return l.input.flatMap(d=>this.getPathSources(d));case a.Algebra.types.INV:case a.Algebra.types.ONE_OR_MORE_PATH:case a.Algebra.types.ZERO_OR_MORE_PATH:case a.Algebra.types.ZERO_OR_ONE_PATH:return this.getPathSources(l.path);case a.Algebra.types.LINK:case a.Algebra.types.NPS:{const d=(0,n.getOperationSource)(l);if(!d)throw new Error("Could not find a required source on a link path operation");return[d]}}}assignPatternSources(l,d,f){if(f.length===0)throw new Error("Attempted to assign zero sources to a pattern during property path handling");return f.length===1?(0,n.assignOperationSource)(d,f[0]):l.createUnion(f.map(h=>(0,n.assignOperationSource)(d,h)),!0)}};return Cy.ActorAbstractPath=c,Cy}var qP;function Pn(){return qP||(qP=1,(function(i){var r=fu&&fu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=fu&&fu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(kG(),i),o(S5(),i)})(fu)),fu}var LP;function eX(){if(LP)return By;LP=1,Object.defineProperty(By,"__esModule",{value:!0}),By.ActorQueryOperationPathAlt=void 0;const i=Pn(),r=O5(),o=Fe(),n=$e(),t=it(),e=Ve();let a=class extends i.ActorAbstractPath{constructor(c){super(c,e.Algebra.types.ALT)}async runOperation(c,s){const l=s.getSafe(o.KeysInitQuery.dataFactory),d=new e.Factory(l),f=c.predicate,h=(await Promise.all(f.input.map(b=>this.mediatorQueryOperation.mediate({context:s,operation:d.createPath(c.subject,b,c.object,c.graph)})))).map(n.getSafeBindings);return{type:"bindings",bindingsStream:new t.UnionIterator(h.map(b=>b.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(h.map(b=>b.metadata())).then(b=>r.ActorQueryOperationUnion.unionMetadata(b,!0,s,this.mediatorRdfMetadataAccumulate))}}};return By.ActorQueryOperationPathAlt=a,By}var xP;function tX(){return xP||(xP=1,(function(i){var r=du&&du.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=du&&du.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(eX(),i)})(du)),du}var pu={},Uy={},BP;function rX(){if(BP)return Uy;BP=1,Object.defineProperty(Uy,"__esModule",{value:!0}),Uy.ActorQueryOperationPathInv=void 0;const i=Pn(),r=Fe(),o=Ve();let n=class extends i.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.INV)}async runOperation(e,a){const u=a.getSafe(r.KeysInitQuery.dataFactory),c=new o.Factory(u),s=e.predicate,l=c.createPath(e.object,s.path,e.subject,e.graph);return this.mediatorQueryOperation.mediate({operation:l,context:a})}};return Uy.ActorQueryOperationPathInv=n,Uy}var CP;function nX(){return CP||(CP=1,(function(i){var r=pu&&pu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=pu&&pu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(rX(),i)})(pu)),pu}var hu={},Vy={},QP;function iX(){if(QP)return Vy;QP=1,Object.defineProperty(Vy,"__esModule",{value:!0}),Vy.ActorQueryOperationPathLink=void 0;const i=Pn(),r=Fe(),o=Ve();let n=class extends i.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.LINK)}async runOperation(e,a){const u=a.getSafe(r.KeysInitQuery.dataFactory),c=new o.Factory(u),s=e.predicate,l=Object.assign(c.createPattern(e.subject,s.iri,e.object,e.graph),{metadata:s.metadata});return this.mediatorQueryOperation.mediate({operation:l,context:a})}};return Vy.ActorQueryOperationPathLink=n,Vy}var UP;function aX(){return UP||(UP=1,(function(i){var r=hu&&hu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=hu&&hu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(iX(),i)})(hu)),hu}var yu={},Gy={},VP;function oX(){if(VP)return Gy;VP=1,Object.defineProperty(Gy,"__esModule",{value:!0}),Gy.ActorQueryOperationPathNps=void 0;const i=Pn(),r=Fe(),o=$e(),n=Ve();let t=class extends i.ActorAbstractPath{constructor(a){super(a,n.Algebra.types.NPS)}async runOperation(a,u){const c=u.getSafe(r.KeysInitQuery.dataFactory),s=new n.Factory(c),l=a.predicate,d=this.generateVariable(c,a),f=Object.assign(s.createPattern(a.subject,d,a.object,a.graph),{metadata:l.metadata}),h=(0,o.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:f,context:u}));return{type:"bindings",bindingsStream:h.bindingsStream.map(y=>l.iris.some(b=>b.equals(y.get(d)))?null:y.delete(d)),metadata:h.metadata}}};return Gy.ActorQueryOperationPathNps=t,Gy}var GP;function uX(){return GP||(GP=1,(function(i){var r=yu&&yu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=yu&&yu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(oX(),i)})(yu)),yu}var _u={},Xy={},XP;function sX(){if(XP)return Xy;XP=1,Object.defineProperty(Xy,"__esModule",{value:!0}),Xy.ActorQueryOperationUpdateCompositeUpdate=void 0;const i=dt(),r=$e();let o=class extends i.ActorQueryOperationTypedMediated{constructor(t){super(t,"compositeupdate")}async testOperation(t,e){return(0,r.testReadOnly)(e)}async runOperation(t,e){return{type:"void",execute:()=>(async()=>{for(const u of t.updates)await(0,r.getSafeVoid)(await this.mediatorQueryOperation.mediate({operation:u,context:e})).execute()})()}}};return Xy.ActorQueryOperationUpdateCompositeUpdate=o,Xy}var zP;function cX(){return zP||(zP=1,(function(i){var r=_u&&_u.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=_u&&_u.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(sX(),i)})(_u)),_u}var mu={},zy={},HP;function lX(){if(HP)return zy;HP=1,Object.defineProperty(zy,"__esModule",{value:!0}),zy.ActorQueryOperationClear=void 0;const i=dt(),r=Fe(),o=$e();let n=class extends i.ActorQueryOperationTypedMediated{constructor(e){super(e,"clear")}async testOperation(e,a){return(0,o.testReadOnly)(a)}async runOperation(e,a){const u=a.getSafe(r.KeysInitQuery.dataFactory);let c;e.source==="DEFAULT"?c=u.defaultGraph():typeof e.source=="string"?c=e.source:c=[e.source];const{execute:s}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:c,requireExistence:!e.silent,dropGraphs:!1},context:a});return{type:"void",execute:s}}};return zy.ActorQueryOperationClear=n,zy}var $P;function dX(){return $P||($P=1,(function(i){var r=mu&&mu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=mu&&mu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(lX(),i)})(mu)),mu}var gu={},Hy={},JP;function fX(){if(JP)return Hy;JP=1,Object.defineProperty(Hy,"__esModule",{value:!0}),Hy.ActorQueryOperationCreate=void 0;const i=dt(),r=$e();let o=class extends i.ActorQueryOperationTypedMediated{constructor(t){super(t,"create")}async testOperation(t,e){return(0,r.testReadOnly)(e)}async runOperation(t,e){const{execute:a}=await this.mediatorUpdateQuads.mediate({createGraphs:{graphs:[t.source],requireNonExistence:!t.silent},context:e});return{type:"void",execute:a}}};return Hy.ActorQueryOperationCreate=o,Hy}var KP;function pX(){return KP||(KP=1,(function(i){var r=gu&&gu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=gu&&gu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(fX(),i)})(gu)),gu}var bu={},$y={},YP;function hX(){if(YP)return $y;YP=1,Object.defineProperty($y,"__esModule",{value:!0}),$y.ActorQueryOperationDrop=void 0;const i=dt(),r=Fe(),o=$e();let n=class extends i.ActorQueryOperationTypedMediated{constructor(e){super(e,"drop")}async testOperation(e,a){return(0,o.testReadOnly)(a)}async runOperation(e,a){const u=a.getSafe(r.KeysInitQuery.dataFactory);let c;e.source==="DEFAULT"?c=u.defaultGraph():typeof e.source=="string"?c=e.source:c=[e.source];const{execute:s}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:c,requireExistence:!e.silent,dropGraphs:!0},context:a});return{type:"void",execute:s}}};return $y.ActorQueryOperationDrop=n,$y}var WP;function yX(){return WP||(WP=1,(function(i){var r=bu&&bu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=bu&&bu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(hX(),i)})(bu)),bu}var vu={},Jy={},Tu={},Ky={},ZP;function F5(){if(ZP)return Ky;ZP=1,Object.defineProperty(Ky,"__esModule",{value:!0}),Ky.BlankNode=void 0;let i=class{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}};return Ky.BlankNode=i,Ky}var Yy={},Wy={},kP;function A5(){if(kP)return Wy;kP=1,Object.defineProperty(Wy,"__esModule",{value:!0}),Wy.DefaultGraph=void 0;let i=class{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}};return Wy.DefaultGraph=i,i.INSTANCE=new i,Wy}var Zy={},ky={},e4;function yv(){if(e4)return ky;e4=1,Object.defineProperty(ky,"__esModule",{value:!0}),ky.NamedNode=void 0;let i=class{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}};return ky.NamedNode=i,ky}var t4;function w5(){if(t4)return Zy;t4=1,Object.defineProperty(Zy,"__esModule",{value:!0}),Zy.Literal=void 0;const i=yv();let r=class f0{constructor(n,t){this.termType="Literal",this.value=n,typeof t=="string"?(this.language=t,this.datatype=f0.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=f0.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}};return Zy.Literal=r,r.RDF_LANGUAGE_STRING=new i.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),r.XSD_STRING=new i.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Zy}var e_={},r4;function E5(){if(r4)return e_;r4=1,Object.defineProperty(e_,"__esModule",{value:!0}),e_.Quad=void 0;let i=class{constructor(o,n,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=n,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}};return e_.Quad=i,e_}var t_={},n4;function j5(){if(n4)return t_;n4=1,Object.defineProperty(t_,"__esModule",{value:!0}),t_.Variable=void 0;let i=class{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}};return t_.Variable=i,t_}var i4;function _X(){if(i4)return Yy;i4=1,Object.defineProperty(Yy,"__esModule",{value:!0}),Yy.DataFactory=void 0;const i=F5(),r=A5(),o=w5(),n=yv(),t=E5(),e=j5();let a=0,u=class{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${a++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new i.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,l){return new o.Literal(s,l)}variable(s){return new e.Variable(s)}defaultGraph(){return r.DefaultGraph.INSTANCE}quad(s,l,d,f){return new t.Quad(s,l,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}};return Yy.DataFactory=u,Yy}var a4;function mX(){return a4||(a4=1,(function(i){var r=Tu&&Tu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Tu&&Tu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(F5(),i),o(_X(),i),o(A5(),i),o(w5(),i),o(yv(),i),o(E5(),i),o(j5(),i)})(Tu)),Tu}var o4;function gX(){if(o4)return Jy;o4=1,Object.defineProperty(Jy,"__esModule",{value:!0}),Jy.ActorQueryOperationJoin=void 0;const i=dt(),r=cr(),o=pe(),n=yr(),t=$e(),e=it(),a=mX();let u=class extends i.ActorQueryOperationTypedMediated{constructor(s){super(s,"join")}async testOperation(s,l){return(0,o.passTestVoid)()}async runOperation(s,l){const d=(await Promise.all(s.input.map(async f=>({output:await this.mediatorQueryOperation.mediate({operation:f,context:l}),operation:f})))).map(({output:f,operation:h})=>({output:(0,t.getSafeBindings)(f),operation:h}));if((await Promise.all(d.map(f=>f.output.metadata()))).some(f=>f.cardinality.value===0&&f.cardinality.type==="exact")){for(const f of d)f.output.bindingsStream.close();return{bindingsStream:new e.ArrayIterator([],{autoStart:!1}),metadata:async()=>({state:new n.MetadataValidationState,cardinality:{type:"exact",value:0},variables:r.ActorRdfJoin.joinVariables(new a.DataFactory,await r.ActorRdfJoin.getMetadatas(d))}),type:"bindings"}}return this.mediatorJoin.mediate({type:"inner",entries:d,context:l})}};return Jy.ActorQueryOperationJoin=u,Jy}var u4;function bX(){return u4||(u4=1,(function(i){var r=vu&&vu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=vu&&vu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(gX(),i)})(vu)),vu}var Ou={},r_={},s4;function vX(){if(s4)return r_;s4=1,Object.defineProperty(r_,"__esModule",{value:!0}),r_.ActorQueryOperationMinus=void 0;const i=dt(),r=pe(),o=$e();let n=class extends i.ActorQueryOperationTypedMediated{constructor(e){super(e,"minus")}async testOperation(e,a){return(0,r.passTestVoid)()}async runOperation(e,a){const u=e.metadata?.graphVariableFromParentScope,c=(await Promise.all(e.input.map(async s=>({output:await this.mediatorQueryOperation.mediate({operation:s,context:a}),operation:s})))).map(({output:s,operation:l})=>({output:(0,o.getSafeBindings)(s),operation:l}));return this.mediatorJoin.mediate({type:"minus",entries:c,context:a,graphVariableFromParentScope:u})}};return r_.ActorQueryOperationMinus=n,r_}var c4;function TX(){return c4||(c4=1,(function(i){var r=Ou&&Ou.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ou&&Ou.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(vX(),i)})(Ou)),Ou}var Su={},n_={},l4;function OX(){if(l4)return n_;l4=1,Object.defineProperty(n_,"__esModule",{value:!0}),n_.ActorQueryOperationLeftJoin=void 0;const i=dt(),r=Fe(),o=pe(),n=$e(),t=Ve();let e=class extends i.ActorQueryOperationTypedMediated{constructor(u){super(u,"leftjoin")}async testOperation(u,c){return(0,o.passTestVoid)()}async runOperation(u,c){const s=c.getSafe(r.KeysInitQuery.dataFactory),l=new t.Factory(s),d=await Promise.all(u.input.map(async(f,h)=>{const p=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:f,context:c}));return u.expression&&h===1?{output:p,operation:l.createFilter(f,u.expression),operationRequired:!0}:{output:p,operation:f}}));return await this.mediatorJoin.mediate({type:"optional",entries:d,context:c})}};return n_.ActorQueryOperationLeftJoin=e,n_}var d4;function SX(){return d4||(d4=1,(function(i){var r=Su&&Su.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Su&&Su.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(OX(),i)})(Su)),Su}var Fu={},i_={},f4;function FX(){if(f4)return i_;f4=1,Object.defineProperty(i_,"__esModule",{value:!0}),i_.ActorQueryOperationPathSeq=void 0;const i=Pn(),r=Fe(),o=$e(),n=Ve();let t=class extends i.ActorAbstractPath{constructor(a){super(a,n.Algebra.types.SEQ)}async runOperation(a,u){const c=u.getSafe(r.KeysInitQuery.dataFactory),s=new n.Factory(c),l=a.predicate;let d=a.subject;const f=[],h=await Promise.all(l.input.map((b,v)=>{const F=v===l.input.length-1?a.object:this.generateVariable(c,a,`b${v}`),T=s.createPath(d,b,F,a.graph),S=this.mediatorQueryOperation.mediate({context:u,operation:T});return d=F,v<l.input.length-1&&f.push(F),{output:S,operation:T}}).map(async({output:b,operation:v})=>({output:(0,o.getSafeBindings)(await b),operation:v}))),p=(0,o.getSafeBindings)(await this.mediatorJoin.mediate({type:"inner",entries:h,context:u}));return{type:"bindings",bindingsStream:p.bindingsStream.transform({transform(b,v,F){for(const T of f)b=b.delete(T);F(b),v()}}),async metadata(){const b=await p.metadata(),v=b.variables.filter(F=>!f.some(T=>T.value===F.variable.value));return{...b,variables:v}}}}};return i_.ActorQueryOperationPathSeq=t,i_}var p4;function AX(){return p4||(p4=1,(function(i){var r=Fu&&Fu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Fu&&Fu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(FX(),i)})(Fu)),Fu}var Au={},a_={},h4;function wX(){if(h4)return a_;h4=1,Object.defineProperty(a_,"__esModule",{value:!0}),a_.ActorRdfJoinMultiSmallest=void 0;const i=cr(),r=Fe(),o=pe(),n=$e(),t=Ve();let e=class extends i.ActorRdfJoin{constructor(u){super(u,{logicalType:"inner",physicalName:"multi-smallest",limitEntries:3,limitEntriesMin:!0,canHandleUndefs:!0,isLeaf:!1})}getJoinIndexes(u){for(let c=0;c<u.length;c++)for(let s=c+1;s<u.length;s++)if(this.hasCommonVariables(u[c],u[s]))return[c,s];return[0,1]}hasCommonVariables(u,c){const s=u.metadata.variables.map(d=>d.variable.value),l=new Set(c.metadata.variables.map(d=>d.variable.value));return s.some(d=>l.has(d))}async sortJoinEntries(u,c){return(await this.mediatorJoinEntriesSort.mediate({entries:u,context:c})).entries}async getOutput(u,c){const s=u.context.getSafe(r.KeysInitQuery.dataFactory),l=new t.Factory(s),d=c.sortedEntries,f=await i.ActorRdfJoin.getEntriesWithMetadatas(d),h=this.getJoinIndexes(f),p=d[h[0]],y=d[h[1]];d.splice(h[1],1),d.splice(h[0],1);const b={output:(0,n.getSafeBindings)(await this.mediatorJoin.mediate({type:u.type,entries:[p,y],context:u.context})),operation:l.createJoin([p.operation,y.operation],!1)};return d.push(b),{result:await this.mediatorJoin.mediate({type:u.type,entries:d,context:u.context})}}async getJoinCoefficients(u,c){let{metadatas:s}=c;s=[...s];const l=await this.sortJoinEntries(u.entries.map((h,p)=>({...h,metadata:s[p]})),u.context);s=l.map(h=>h.metadata);const d=i.ActorRdfJoin.getRequestInitialTimes(s),f=i.ActorRdfJoin.getRequestItemTimes(s);return(0,o.passTestWithSideData)({iterations:s.reduce((h,p)=>h*p.cardinality.value,1),persistedItems:0,blockingItems:0,requestTime:s.reduce((h,p,y)=>h+d[y]+p.cardinality.value*f[y],0)},{...c,sortedEntries:l})}};return a_.ActorRdfJoinMultiSmallest=e,a_}var y4;function EX(){return y4||(y4=1,(function(i){var r=Au&&Au.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Au&&Au.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(wX(),i)})(Au)),Au}var wu={},o_={},_4;function jX(){if(_4)return o_;_4=1,Object.defineProperty(o_,"__esModule",{value:!0}),o_.ActorQueryOperationLoad=void 0;const i=dt(),r=Fe(),o=$e(),n=Ve();let t=class extends i.ActorQueryOperationTypedMediated{constructor(a){super(a,"load")}async testOperation(a,u){return(0,o.testReadOnly)(u)}async runOperation(a,u){const c=u.getSafe(r.KeysInitQuery.dataFactory),s=new n.Factory(c);let l=u;a.silent&&(l=l.set(r.KeysInitQuery.lenient,!0));const{querySource:d}=await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{value:a.source.value},context:l});let h=(0,o.getSafeQuads)(await this.mediatorQueryOperation.mediate({operation:s.createConstruct((0,o.assignOperationSource)(s.createPattern(c.variable("s"),c.variable("p"),c.variable("o")),d),[s.createPattern(c.variable("s"),c.variable("p"),c.variable("o"))]),context:l})).quadStream;a.destination&&(h=h.map(y=>c.quad(y.subject,y.predicate,y.object,a.destination)));const{execute:p}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:h,context:u});return{type:"void",execute:p}}};return o_.ActorQueryOperationLoad=t,o_}var m4;function RX(){return m4||(m4=1,(function(i){var r=wu&&wu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=wu&&wu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(jX(),i)})(wu)),wu}var Eu={},u_={},s_={},g4;function R5(){if(g4)return s_;g4=1,Object.defineProperty(s_,"__esModule",{value:!0}),s_.MaxAggregator=void 0;const i=kt();let r=class extends i.AggregateEvaluator{constructor(n,t,e,a){super(n,t,a),this.orderByEvaluator=e,this.state=void 0}putTerm(n){if(n.termType!=="Literal")throw new Error(`Term with value ${n.value} has type ${n.termType} and is not a literal`);this.state===void 0?this.state=n:this.orderByEvaluator.orderTypes(this.state,n)===-1&&(this.state=n)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return s_.MaxAggregator=r,s_}var b4;function DX(){if(b4)return u_;b4=1,Object.defineProperty(u_,"__esModule",{value:!0}),u_.ActorBindingsAggregatorFactoryMax=void 0;const i=kt(),r=pe(),o=R5();let n=class extends i.ActorBindingsAggregatorFactory{constructor(e){super(e),this.mediatorTermComparatorFactory=e.mediatorTermComparatorFactory}async test(e){return e.expr.aggregator!=="max"?(0,r.failTest)("This actor only supports the 'max' aggregator."):(0,r.passTestVoid)()}async run({expr:e,context:a}){return new o.MaxAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:e.expression,context:a}),e.distinct,await this.mediatorTermComparatorFactory.mediate({context:a}))}};return u_.ActorBindingsAggregatorFactoryMax=n,u_}var v4;function PX(){return v4||(v4=1,(function(i){var r=Eu&&Eu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Eu&&Eu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(DX(),i),o(R5(),i)})(Eu)),Eu}var ju={},c_={},l_={},T4;function D5(){if(T4)return l_;T4=1,Object.defineProperty(l_,"__esModule",{value:!0}),l_.MinAggregator=void 0;const i=kt();let r=class extends i.AggregateEvaluator{constructor(n,t,e,a){super(n,t,a),this.orderByEvaluator=e,this.state=void 0}putTerm(n){if(n.termType!=="Literal")throw new Error(`Term with value ${n.value} has type ${n.termType} and is not a literal`);this.state===void 0?this.state=n:this.orderByEvaluator.orderTypes(this.state,n)===1&&(this.state=n)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return l_.MinAggregator=r,l_}var O4;function MX(){if(O4)return c_;O4=1,Object.defineProperty(c_,"__esModule",{value:!0}),c_.ActorBindingsAggregatorFactoryMin=void 0;const i=kt(),r=pe(),o=D5();let n=class extends i.ActorBindingsAggregatorFactory{constructor(e){super(e),this.mediatorTermComparatorFactory=e.mediatorTermComparatorFactory}async test(e){return e.expr.aggregator!=="min"?(0,r.failTest)("This actor only supports the 'min' aggregator."):(0,r.passTestVoid)()}async run({context:e,expr:a}){return new o.MinAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:a.expression,context:e}),a.distinct,await this.mediatorTermComparatorFactory.mediate({context:e}))}};return c_.ActorBindingsAggregatorFactoryMin=n,c_}var S4;function NX(){return S4||(S4=1,(function(i){var r=ju&&ju.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ju&&ju.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(MX(),i),o(D5(),i)})(ju)),ju}var Ru={},d_={},f_={},F4;function IX(){if(F4)return f_;F4=1,Object.defineProperty(f_,"__esModule",{value:!0}),f_.SortIterator=void 0;const i=it();let r=class extends i.TransformIterator{constructor(n,t,e){super(n,e);const a=e&&e.window;this.windowLength=Number.isFinite(a)&&a>0?a:Number.POSITIVE_INFINITY,this.sort=t,this.sorted=[]}_read(n,t){let e,{length:a}=this.sorted;for(;a!==this.windowLength&&(e=this.source.read(),e!==null);){let u=0,c=a-1,s,l;for(;u<=c;)s=Math.trunc((u+c)/2),l=this.sort(e,this.sorted[s]),l<0?u=s+1:l>0?c=s-1:(u=s,c=-1);this.sorted.splice(u,0,e),a++}a===this.windowLength&&this._push(this.sorted.pop()),t()}_flush(n){let{length:t}=this.sorted;for(;t--;)this._push(this.sorted.pop());n()}};return f_.SortIterator=r,f_}var A4;function qX(){if(A4)return d_;A4=1,Object.defineProperty(d_,"__esModule",{value:!0}),d_.ActorQueryOperationOrderBy=void 0;const i=dt(),r=pe(),o=W(),n=$e(),t=Ve(),e=IX();let a=class extends i.ActorQueryOperationTypedMediated{constructor(c){super(c,"orderby"),this.window=c.window??Number.POSITIVE_INFINITY,this.mediatorExpressionEvaluatorFactory=c.mediatorExpressionEvaluatorFactory,this.mediatorTermComparatorFactory=c.mediatorTermComparatorFactory}async testOperation(){return(0,r.passTestVoid)()}async runOperation(c,s){const l=await this.mediatorQueryOperation.mediate({operation:c.input,context:s}),d=(0,n.getSafeBindings)(l),f={window:this.window};let{bindingsStream:h}=d;const p=await this.mediatorTermComparatorFactory.mediate({context:s});for(let y=c.expressions.length-1;y>=0;y--){let b=c.expressions[y];const v=this.isAscending(b);b=this.extractSortExpression(b);const F=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:b,context:s}),T=async(E,U,K)=>{try{const _=await F.evaluate(E);K({bindings:E,result:_})}catch(_){(0,o.isExpressionError)(_)||h.emit("error",_),K({bindings:E,result:void 0})}U()},S=h.transform({transform:T});h=new e.SortIterator(S,(E,U)=>{let K=p.orderTypes(E.result,U.result);return v||(K*=-1),K},f).map(({bindings:E})=>E)}return{type:"bindings",bindingsStream:h,metadata:d.metadata}}extractSortExpression(c){const{expressionType:s,operator:l}=c;return s!==t.Algebra.expressionTypes.OPERATOR?c:l==="desc"?c.args[0]:c}isAscending(c){const{expressionType:s,operator:l}=c;return s!==t.Algebra.expressionTypes.OPERATOR?!0:l!=="desc"}};return d_.ActorQueryOperationOrderBy=a,d_}var w4;function LX(){return w4||(w4=1,(function(i){var r=Ru&&Ru.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ru&&Ru.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(qX(),i)})(Ru)),Ru}var Du={},p_={},E4;function xX(){if(E4)return p_;E4=1,Object.defineProperty(p_,"__esModule",{value:!0}),p_.ActorOptimizeQueryOperationFilterPushdown=void 0;const i=Fr(),r=Fe(),o=pe(),n=$e(),t=Rn(),e=Ve();let a=class extends i.ActorOptimizeQueryOperation{constructor(c){super(c)}async test(c){return(0,o.passTestVoid)()}async run(c){const s=c.context.getSafe(r.KeysInitQuery.dataFactory),l=new e.Factory(s);let d=c.operation;const f=this;this.splitConjunctive&&(d=e.Util.mapOperation(d,{filter(v,F){return v.expression.expressionType===e.Algebra.expressionTypes.OPERATOR&&v.expression.operator==="&&"?(f.logDebug(c.context,`Split conjunctive filter into ${v.expression.args.length} nested filters`),{recurse:!0,result:v.expression.args.reduce((T,S)=>F.createFilter(T,S),v.input)}):{recurse:!0,result:v}}},l));const h=this.getSources(d),p=new Map(await Promise.all(h.map(async v=>[v,await v.source.getSelectorShape(c.context)])));let y=!0,b=0;for(;y&&b<this.maxIterations;)y=!1,d=e.Util.mapOperation(d,{filter(v,F){const T=c.context.get(r.KeysInitQuery.extensionFunctions),S=c.context.get(r.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(!f.shouldAttemptPushDown(v,h,p,T,S))return{recurse:!0,result:v};const j=(0,n.getExpressionVariables)(v.expression),[E,U]=f.filterPushdown(v.expression,j,v.input,F,c.context);return E&&(y=!0),{recurse:!0,result:U}}}),b++;return b>1&&f.logDebug(c.context,`Pushed down filters in ${b} iterations`),this.mergeConjunctive&&(d=e.Util.mapOperation(d,{filter(v,F){if(v.input.type===e.Algebra.types.FILTER){const{nestedExpressions:T,input:S}=f.getNestedFilterExpressions(v);return f.logDebug(c.context,`Merge ${T.length} nested filters into conjunctive filter`),{recurse:!0,result:F.createFilter(S,T.slice(1).reduce((j,E)=>F.createOperatorExpression("&&",[j,E]),T[0]))}}return{recurse:!0,result:v}}})),{operation:d,context:c.context}}shouldAttemptPushDown(c,s,l,d,f){if(this.aggressivePushdown)return!0;const h=c.expression;return h.expressionType===e.Algebra.expressionTypes.OPERATOR&&h.operator==="="&&(h.args[0].expressionType==="term"&&h.args[0].term.termType!=="Variable"&&h.args[1].expressionType==="term"&&h.args[1].term.termType==="Variable"||h.args[0].expressionType==="term"&&h.args[0].term.termType==="Variable"&&h.args[1].expressionType==="term"&&h.args[1].term.termType!=="Variable")?!0:d&&h.expressionType===e.Algebra.expressionTypes.NAMED&&h.name.value in d&&!s.some(p=>(0,n.doesShapeAcceptOperation)(l.get(p),h))?!1:!!s.some(p=>(0,n.doesShapeAcceptOperation)(l.get(p),c,{wildcardAcceptAllExtensionFunctions:f}))}getSources(c){const s=new Set,l=d=>{const f=(0,n.getOperationSource)(d);return f&&s.add(f),!1};return e.Util.recurseOperation(c,{[e.Algebra.types.PATTERN]:l,[e.Algebra.types.LINK]:l,[e.Algebra.types.NPS]:l,[e.Algebra.types.SERVICE]:l}),[...s]}getOverlappingOperations(c,s){const l=[],d=[],f=[];for(const h of c.input){const p=e.Util.inScopeVariables(h);this.variablesSubSetOf(s,p)?l.push(h):this.variablesIntersect(s,p)?d.push(h):f.push(h)}return{fullyOverlapping:l,partiallyOverlapping:d,notOverlapping:f}}filterPushdown(c,s,l,d,f){if(this.isExpressionFalse(c))return[!0,d.createUnion([])];if(c.expressionType===e.Algebra.expressionTypes.EXISTENCE)return[!1,d.createFilter(l,c)];switch(l.type){case e.Algebra.types.EXTEND:return this.variablesIntersect([l.variable],s)?[!1,d.createFilter(l,c)]:[!0,d.createExtend(this.filterPushdown(c,s,l.input,d,f)[1],l.variable,l.expression)];case e.Algebra.types.FILTER:{const[h,p]=this.filterPushdown(c,s,l.input,d,f);return[h,d.createFilter(p,l.expression)]}case e.Algebra.types.JOIN:{if(l.input.length===0)return[!1,d.createFilter(l,c)];const{fullyOverlapping:h,partiallyOverlapping:p,notOverlapping:y}=this.getOverlappingOperations(l,s),b=[];let v=!1;return h.length>0&&(v=!0,b.push(d.createJoin(h.map(F=>this.filterPushdown(c,s,F,d,f)[1])))),p.length>0&&b.push(d.createFilter(d.createJoin(p,!1),c)),y.length>0&&b.push(...y),b.length>1&&(v=!0),v&&this.logDebug(f,`Push down filter across join entries with ${h.length} fully overlapping, ${p.length} partially overlapping, and ${y.length} not overlapping`),[v,b.length===1?b[0]:d.createJoin(b)]}case e.Algebra.types.NOP:return[!0,l];case e.Algebra.types.PROJECT:return this.variablesIntersect(l.variables,s)?[!0,d.createProject(this.filterPushdown(c,s,l.input,d,f)[1],l.variables)]:[!0,l];case e.Algebra.types.UNION:{const{fullyOverlapping:h,partiallyOverlapping:p,notOverlapping:y}=this.getOverlappingOperations(l,s),b=[];let v=!1;return h.length>0&&(v=!0,b.push(d.createUnion(h.map(F=>this.filterPushdown(c,s,F,d,f)[1])))),p.length>0&&b.push(d.createFilter(d.createUnion(p,!1),c)),y.length>0&&b.push(...y),b.length>1&&(v=!0),v&&this.logDebug(f,`Push down filter across union entries with ${h.length} fully overlapping, ${p.length} partially overlapping, and ${y.length} not overlapping`),[v,b.length===1?b[0]:d.createUnion(b)]}case e.Algebra.types.VALUES:return this.variablesIntersect(l.variables,s)?[!1,d.createFilter(l,c)]:[!0,l];case e.Algebra.types.LEFT_JOIN:{if(this.pushIntoLeftJoins){const h=e.Util.inScopeVariables(l.input[1]);if(!this.variablesIntersect(s,h))return this.logDebug(f,"Push down filter into left join"),[!0,d.createLeftJoin(this.filterPushdown(c,s,l.input[0],d,f)[1],l.input[1],l.expression)]}return[!1,d.createFilter(l,c)]}case e.Algebra.types.PATTERN:{if(this.pushEqualityIntoPatterns){const h=this.getEqualityExpressionPushableIntoPattern(c);if(h){let p=!1;const y=l.metadata;if(l=(0,t.mapTermsNested)(l,b=>b.equals(h.variable)?(p=!0,h.term):b),l.type=e.Algebra.types.PATTERN,l.metadata=y,p)return this.logDebug(f,`Push down filter into pattern for ?${h.variable.value}`),[!0,d.createJoin([l,d.createValues([h.variable],[{[`?${h.variable.value}`]:h.term}])])]}}return[!1,d.createFilter(l,c)]}case e.Algebra.types.PATH:{if(this.pushEqualityIntoPatterns){const h=this.getEqualityExpressionPushableIntoPattern(c);if(h&&(l.subject.equals(h.variable)||l.object.equals(h.variable))){this.logDebug(f,`Push down filter into path for ?${h.variable.value}`);const p=l.metadata;return l=d.createPath(l.subject.equals(h.variable)?h.term:l.subject,l.predicate,l.object.equals(h.variable)?h.term:l.object),l.metadata=p,[!0,d.createJoin([l,d.createValues([h.variable],[{[`?${h.variable.value}`]:h.term}])])]}}return[!1,d.createFilter(l,c)]}case e.Algebra.types.MINUS:case e.Algebra.types.ALT:case e.Algebra.types.ASK:case e.Algebra.types.BGP:case e.Algebra.types.CONSTRUCT:case e.Algebra.types.DESCRIBE:case e.Algebra.types.DISTINCT:case e.Algebra.types.EXPRESSION:case e.Algebra.types.FROM:case e.Algebra.types.GRAPH:case e.Algebra.types.GROUP:case e.Algebra.types.INV:case e.Algebra.types.LINK:case e.Algebra.types.NPS:case e.Algebra.types.ONE_OR_MORE_PATH:case e.Algebra.types.ORDER_BY:case e.Algebra.types.REDUCED:case e.Algebra.types.SEQ:case e.Algebra.types.SERVICE:case e.Algebra.types.SLICE:case e.Algebra.types.ZERO_OR_MORE_PATH:case e.Algebra.types.ZERO_OR_ONE_PATH:case e.Algebra.types.COMPOSITE_UPDATE:case e.Algebra.types.DELETE_INSERT:case e.Algebra.types.LOAD:case e.Algebra.types.CLEAR:case e.Algebra.types.CREATE:case e.Algebra.types.DROP:case e.Algebra.types.ADD:case e.Algebra.types.MOVE:case e.Algebra.types.COPY:return[!1,d.createFilter(l,c)]}}getEqualityExpressionPushableIntoPattern(c){if(c.expressionType===e.Algebra.expressionTypes.OPERATOR&&c.operator==="="){if(c.args[0].expressionType==="term"&&c.args[0].term.termType!=="Variable"&&(c.args[0].term.termType!=="Literal"||this.isLiteralWithCanonicalLexicalForm(c.args[0].term))&&c.args[1].expressionType==="term"&&c.args[1].term.termType==="Variable")return{variable:c.args[1].term,term:c.args[0].term};if(c.args[0].expressionType==="term"&&c.args[0].term.termType==="Variable"&&c.args[1].expressionType==="term"&&c.args[1].term.termType!=="Variable"&&(c.args[1].term.termType!=="Literal"||this.isLiteralWithCanonicalLexicalForm(c.args[1].term)))return{variable:c.args[0].term,term:c.args[1].term}}}isLiteralWithCanonicalLexicalForm(c){switch(c.datatype.value){case"http://www.w3.org/2001/XMLSchema#string":case"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":case"http://www.w3.org/2001/XMLSchema#normalizedString":case"http://www.w3.org/2001/XMLSchema#anyURI":case"http://www.w3.org/2001/XMLSchema#base64Binary":case"http://www.w3.org/2001/XMLSchema#language":case"http://www.w3.org/2001/XMLSchema#Name":case"http://www.w3.org/2001/XMLSchema#NCName":case"http://www.w3.org/2001/XMLSchema#NMTOKEN":case"http://www.w3.org/2001/XMLSchema#token":case"http://www.w3.org/2001/XMLSchema#hexBinary":return!0}return!1}variablesIntersect(c,s){return c.some(l=>s.some(d=>l.equals(d)))}variablesSubSetOf(c,s){return c.length<=s.length&&c.every(l=>s.some(d=>l.equals(d)))}isExpressionFalse(c){return c.term&&c.term.termType==="Literal"&&c.term.value==="false"}getNestedFilterExpressions(c){if(c.input.type===e.Algebra.types.FILTER){const s=this.getNestedFilterExpressions(c.input);return{nestedExpressions:[c.expression,...s.nestedExpressions],input:s.input}}return{nestedExpressions:[c.expression],input:c.input}}};return p_.ActorOptimizeQueryOperationFilterPushdown=a,p_}var j4;function BX(){return j4||(j4=1,(function(i){var r=Du&&Du.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Du&&Du.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(xX(),i)})(Du)),Du}var Pu={},h_={},R4;function CX(){if(R4)return h_;R4=1,Object.defineProperty(h_,"__esModule",{value:!0}),h_.ActorContextPreprocessQuerySourceIdentify=void 0;const i=wm(),r=Fe(),o=pe(),n=Zg();let t=class extends i.ActorContextPreprocess{constructor(a){super(a),this.cache=this.cacheSize?new n.LRUCache({max:this.cacheSize}):void 0;const u=this.cache;u&&this.httpInvalidator.addInvalidateListener(({url:c})=>c?u.delete(c):u.clear())}async test(a){return(0,o.passTestVoid)()}async run(a){let u=a.context;if(u.has(r.KeysInitQuery.querySourcesUnidentified)){const c=a.context.get(r.KeysInitQuery.querySourcesUnidentified),s=await Promise.all(c.map(f=>this.expandSource(f))),l=await Promise.all(s.map(async f=>this.identifySource(f,a.context))),d=a.context.get(r.KeysStatistics.dereferencedLinks);if(d)for(const f of l)d.updateStatistic({url:f.source.referenceValue,metadata:{seed:!0}},f.source);u=a.context.delete(r.KeysInitQuery.querySourcesUnidentified).set(r.KeysQueryOperation.querySources,l)}return{context:u}}async expandSource(a){return typeof a=="string"||"match"in a?{value:a}:{...a,context:(await this.mediatorContextPreprocess.mediate({context:o.ActionContext.ensureActionContext(a.context??{})})).context}}identifySource(a,u){let c;return typeof a.value=="string"&&this.cache&&(c=this.cache.get(a.value)),c||(c=this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:a,context:u}).then(({querySource:s})=>s),typeof a.value=="string"&&this.cache&&this.cache.set(a.value,c)),c}};return h_.ActorContextPreprocessQuerySourceIdentify=t,h_}var D4;function QX(){return D4||(D4=1,(function(i){var r=Pu&&Pu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Pu&&Pu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(CX(),i)})(Pu)),Pu}var Mu={},y_={},Nu={},__={},P4;function UX(){if(P4)return __;P4=1,Object.defineProperty(__,"__esModule",{value:!0}),__.ActorExpressionEvaluatorFactory=void 0;const i=pe();let r=class extends i.Actor{constructor(n){super(n),this.mediatorQueryOperation=n.mediatorQueryOperation,this.mediatorFunctionFactory=n.mediatorFunctionFactory,this.mediatorMergeBindingsContext=n.mediatorMergeBindingsContext}};return __.ActorExpressionEvaluatorFactory=r,__}var M4;function VX(){return M4||(M4=1,(function(i){var r=Nu&&Nu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Nu&&Nu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(UX(),i)})(Nu)),Nu}var m_={},N4;function P5(){if(N4)return m_;N4=1,Object.defineProperty(m_,"__esModule",{value:!0}),m_.AlgebraTransformer=void 0;const i=Fe(),r=W(),o=Ve();let n=class Eg extends r.TermTransformer{constructor(e,a){super(e.getSafe(i.KeysExpressionEvaluator.superTypeProvider)),this.context=e,this.mediatorFunctionFactory=a}async transformAlgebra(e){const a=o.Algebra.expressionTypes;switch(e.expressionType){case a.TERM:return this.transformTerm(e);case a.OPERATOR:return await this.transformOperator(e);case a.NAMED:return await this.transformNamed(e);case a.EXISTENCE:return Eg.transformExistence(e);case a.AGGREGATE:return Eg.transformAggregate(e);case a.WILDCARD:return Eg.transformWildcard(e)}}static transformWildcard(e){return new r.NamedNode(e.wildcard.value)}async getOperator(e,a){const u=await this.mediatorFunctionFactory.mediate({functionName:e,arguments:a.args,context:this.context}),c=await Promise.all(a.args.map(s=>this.transformAlgebra(s)));if(!u.checkArity(c))throw new r.InvalidArity(c,e);return new r.Operator(e,c,u.apply)}async transformOperator(e){return this.getOperator(e.operator.toLowerCase(),e)}async transformNamed(e){return this.getOperator(e.name.value,e)}static transformAggregate(e){const a=e.aggregator;return new r.Aggregate(a,e)}static transformExistence(e){return new r.Existence(e)}};return m_.AlgebraTransformer=n,m_}var g_={},b_={},I4;function M5(){if(I4)return b_;I4=1,Object.defineProperty(b_,"__esModule",{value:!0}),b_.InternalEvaluator=void 0;const i=Fe(),r=jn(),o=W(),n=$e(),t=Ve(),e=P5();let a=class{constructor(c,s,l,d){this.context=c,this.mediatorQueryOperation=l,this.bindingsFactory=d,this.subEvaluators={[r.ExpressionType.Term]:(f,h)=>this.term(f),[r.ExpressionType.Variable]:(f,h)=>this.variable(f,h),[r.ExpressionType.Operator]:(f,h)=>this.evalFunction(f,h),[r.ExpressionType.Existence]:(f,h)=>this.evalExistence(f,h),[r.ExpressionType.Aggregate]:(f,h)=>this.evalAggregate()},this.transformer=new e.AlgebraTransformer(c,s)}async evaluatorExpressionEvaluation(c,s){return this.subEvaluators[c.expressionType].bind(this)(c,s)}term(c){return c}variable(c,s){const l=s.get(o.expressionToVar(this.context.getSafe(i.KeysInitQuery.dataFactory),c));if(!l)throw new o.UnboundVariableError(c.name,s);return this.transformer.transformRDFTermUnsafe(l)}async evalFunction(c,s){return c.apply({args:c.args,mapping:s,exprEval:this})}async evalExistence(c,s){const l=this.context.getSafe(i.KeysInitQuery.dataFactory),d=new t.Factory(l),f=(0,n.materializeOperation)(c.expression.input,s,d,this.bindingsFactory),h=await this.mediatorQueryOperation.mediate({operation:f,context:this.context}),p=(0,n.getSafeBindings)(h);return await new Promise((y,b)=>{p.bindingsStream.on("end",()=>{y(!1)}),p.bindingsStream.on("error",b),p.bindingsStream.on("data",()=>{p.bindingsStream.close(),y(!0)})}).then(y=>c.expression.not?!y:y).then(y=>new o.BooleanLiteral(y))}evalAggregate(){throw new o.NoAggregator}};return b_.InternalEvaluator=a,b_}var q4;function GX(){if(q4)return g_;q4=1,Object.defineProperty(g_,"__esModule",{value:!0}),g_.ExpressionEvaluator=void 0;const i=Fe(),r=M5();let o=class{constructor(t,e,a,u,c){this.context=t,this.expr=e,this.mediatorFunctionFactory=a,this.mediatorQueryOperation=u,this.bindingsFactory=c,this.internalEvaluator=new r.InternalEvaluator(t,a,u,c)}async evaluate(t){return(await this.internalEvaluator.evaluatorExpressionEvaluation(this.expr,t)).toRDF(this.context.getSafe(i.KeysInitQuery.dataFactory))}async evaluateAsEBV(t){return(await this.internalEvaluator.evaluatorExpressionEvaluation(this.expr,t)).coerceEBV()}evaluateAsEvaluatorExpression(t){return this.evaluatorExpressionEvaluation(this.expr,t)}evaluatorExpressionEvaluation(t,e){return this.internalEvaluator.evaluatorExpressionEvaluation(t,e)}};return g_.ExpressionEvaluator=o,g_}var L4;function XX(){if(L4)return y_;L4=1,Object.defineProperty(y_,"__esModule",{value:!0}),y_.ActorExpressionEvaluatorFactoryDefault=void 0;const i=VX(),r=Fe(),o=pe(),n=At(),t=W(),e=P5(),a=GX();let u=class extends i.ActorExpressionEvaluatorFactory{constructor(s){super(s)}async test(s){return(0,o.passTestVoid)()}async run(s){const l=(0,t.prepareEvaluatorActionContext)(s.context);return new a.ExpressionEvaluator(l,await new e.AlgebraTransformer(l,this.mediatorFunctionFactory).transformAlgebra(s.algExpr),this.mediatorFunctionFactory,this.mediatorQueryOperation,await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,s.context.getSafe(r.KeysInitQuery.dataFactory)))}};return y_.ActorExpressionEvaluatorFactoryDefault=u,y_}var x4;function zX(){return x4||(x4=1,(function(i){var r=Mu&&Mu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Mu&&Mu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(XX(),i)})(Mu)),Mu}var Iu={},v_={},T_={},B4;function HX(){if(B4)return T_;B4=1,Object.defineProperty(T_,"__esModule",{value:!0}),T_.GroupsState=void 0;const i=Fe(),r=At();let o=class{constructor(t,e,a,u,c){this.pattern=t,this.mediatorBindingsAggregatorFactory=e,this.context=a,this.bindingsFactory=u,this.variables=c,this.groups=new Map,this.groupsInitializer=new Map,this.groupVariables=new Set(this.pattern.variables.map(s=>s.value)),this.waitCounter=1,this.resultHasBeenCalled=!1}consumeBindings(t){const e=this.resultCheck();if(e)return e;this.waitCounter++;const a=t.filter((l,d)=>this.groupVariables.has(d.value)),u=this.hashBindings(a);let c=this.groupsInitializer.get(u),s;if(c){const l=c;s=(async()=>{const d=await l;await Promise.all(this.pattern.aggregates.map(async f=>{const h=f.variable.value;await d.aggregators[h].putBindings(t)}))})().then(async()=>{await this.subtractWaitCounterAndCollect()})}else c=(async()=>{const l={};await Promise.all(this.pattern.aggregates.map(async f=>{const h=f.variable.value;l[h]=await this.mediatorBindingsAggregatorFactory.mediate({expr:f,context:this.context}),await l[h].putBindings(t)}));const d={aggregators:l,bindings:a};return this.groups.set(u,d),await this.subtractWaitCounterAndCollect(),d})(),this.groupsInitializer.set(u,c),s=c;return s}async subtractWaitCounterAndCollect(){--this.waitCounter===0&&await this.handleResultCollection()}async handleResultCollection(){const t=this.context.getSafe(i.KeysInitQuery.dataFactory);let e=await Promise.all([...this.groups].map(async([a,u])=>{const{bindings:c,aggregators:s}=u;let l=c;for(const d in s){const f=await s[d].result();f&&(l=l.set(t.variable(d),f))}return l}));if(e.length===0&&this.groupVariables.size===0){const a=[];await Promise.all(this.pattern.aggregates.map(async u=>{const c=u.variable,l=await(await this.mediatorBindingsAggregatorFactory.mediate({expr:u,context:this.context})).result();l!==void 0&&a.push([c,l])})),e=[this.bindingsFactory.bindings(a)]}this.waitResolver(e)}resultCheck(){if(this.resultHasBeenCalled)return Promise.reject(new Error("Calling any function after calling collectResult is invalid."))}async collectResults(){const t=this.resultCheck();if(t)return t;this.resultHasBeenCalled=!0;const e=new Promise(a=>{this.waitResolver=a});return await this.subtractWaitCounterAndCollect(),e}hashBindings(t){return(0,r.bindingsToCompactString)(t,this.variables)}};return T_.GroupsState=o,T_}var C4;function $X(){if(C4)return v_;C4=1,Object.defineProperty(v_,"__esModule",{value:!0}),v_.ActorQueryOperationGroup=void 0;const i=dt(),r=Fe(),o=pe(),n=At(),t=$e(),e=it(),a=HX();let u=class extends i.ActorQueryOperationTypedMediated{constructor(s){super(s,"group"),this.mediatorBindingsAggregatorFactory=s.mediatorBindingsAggregatorFactory}async testOperation(){return(0,o.passTestVoid)()}async runOperation(s,l){const d=l.getSafe(r.KeysInitQuery.dataFactory),f=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,l,d),{input:h,aggregates:p}=s,y=await this.mediatorQueryOperation.mediate({operation:h,context:l}),b=(0,t.getSafeBindings)(y),v=[...s.variables,...p.map(S=>S.variable)].map(S=>({variable:S,canBeUndef:!1})),F=(await b.metadata()).variables.map(S=>S.variable);return{type:"bindings",bindingsStream:new e.TransformIterator(()=>new Promise((S,j)=>{const E=new a.GroupsState(s,this.mediatorBindingsAggregatorFactory,l,f,F);b.bindingsStream.on("end",async()=>{try{const U=new e.ArrayIterator(await E.collectResults(),{autoStart:!1});S(U)}catch(U){j(U)}}),b.bindingsStream.on("error",j),b.bindingsStream.on("data",U=>{E.consumeBindings(U).catch(j)})}),{autoStart:!1}),metadata:async()=>({...await b.metadata(),variables:v})}}};return v_.ActorQueryOperationGroup=u,v_}var Q4;function JX(){return Q4||(Q4=1,(function(i){var r=Iu&&Iu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Iu&&Iu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o($X(),i)})(Iu)),Iu}var qu={},O_={},U4;function KX(){if(U4)return O_;U4=1,Object.defineProperty(O_,"__esModule",{value:!0}),O_.ActorQueryOperationNop=void 0;const i=dt(),r=Fe(),o=pe(),n=At(),t=yr(),e=it();let a=class extends i.ActorQueryOperationTypedMediated{constructor(c){super(c,"nop")}async testOperation(c,s){return(0,o.passTestVoid)()}async runOperation(c,s){const l=s.getSafe(r.KeysInitQuery.dataFactory),d=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s,l);return{bindingsStream:new e.SingletonIterator(d.bindings()),metadata:()=>Promise.resolve({state:new t.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]}),type:"bindings"}}};return O_.ActorQueryOperationNop=a,O_}var V4;function YX(){return V4||(V4=1,(function(i){var r=qu&&qu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=qu&&qu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(KX(),i)})(qu)),qu}var Lu={},S_={},G4;function WX(){if(G4)return S_;G4=1,Object.defineProperty(S_,"__esModule",{value:!0}),S_.ActorQueryOperationService=void 0;const i=dt(),r=Fe(),o=pe(),n=At(),t=yr(),e=$e(),a=it(),u=Zg();let c=class extends i.ActorQueryOperationTypedMediated{constructor(l){super(l,"service"),l.cacheSize&&l.httpInvalidator&&l.cacheSize>0&&(this.cache=new u.LRUCache({max:l.cacheSize}),l.httpInvalidator.addInvalidateListener(d=>this.handleHttpInvalidateEvent(d)))}async testOperation(l,d){return l.name.termType!=="NamedNode"?(0,o.failTest)(`${this.name} can only query services by IRI, while a ${l.name.termType} was given.`):(0,o.passTestVoid)()}async runOperation(l,d){let f=this.cache?.get(l.name.value);f||(f=(await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{value:l.name.value,type:this.forceSparqlEndpoint?"sparql":void 0},context:d})).querySource,this.cache?.set(l.name.value,f));let h;try{h=(0,e.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:(0,e.assignOperationSource)(l.input,f),context:d}))}catch(p){if(l.silent){const y=d.getSafe(r.KeysInitQuery.dataFactory),b=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,d,y);h={bindingsStream:new a.SingletonIterator(b.bindings()),type:"bindings",metadata:async()=>({state:new t.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]})},this.logWarn(d,`An error occurred when executing a SERVICE clause: ${p.message}`)}else throw p}return h}handleHttpInvalidateEvent(l){l.url?this.cache?.delete(l.url):this.cache?.clear()}};return S_.ActorQueryOperationService=c,S_}var X4;function ZX(){return X4||(X4=1,(function(i){var r=Lu&&Lu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Lu&&Lu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(WX(),i)})(Lu)),Lu}var xu={},F_={},z4;function kX(){if(z4)return F_;z4=1,Object.defineProperty(F_,"__esModule",{value:!0}),F_.ActorQueryOperationValues=void 0;const i=dt(),r=Fe(),o=pe(),n=At(),t=yr(),e=it();let a=class extends i.ActorQueryOperationTyped{constructor(c){super(c,"values")}async testOperation(c,s){return(0,o.passTestVoid)()}async runOperation(c,s){const l=s.getSafe(r.KeysInitQuery.dataFactory),d=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s,l);return{type:"bindings",bindingsStream:new e.ArrayIterator(c.bindings.map(p=>d.bindings(Object.entries(p).map(([y,b])=>[l.variable(y.slice(1)),b])))),metadata:()=>Promise.resolve({state:new t.MetadataValidationState,cardinality:{type:"exact",value:c.bindings.length},variables:c.variables.map(p=>({variable:p,canBeUndef:c.bindings.some(y=>!(`?${p.value}`in y))}))})}}};return F_.ActorQueryOperationValues=a,F_}var H4;function ez(){return H4||(H4=1,(function(i){var r=xu&&xu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=xu&&xu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(kX(),i)})(xu)),xu}var Bu={},A_={},$4;function tz(){if($4)return A_;$4=1,Object.defineProperty(A_,"__esModule",{value:!0}),A_.ActorQueryOperationPathOneOrMore=void 0;const i=Pn(),r=Fe(),o=At(),n=$e(),t=it(),e=Ve();let a=class extends i.ActorAbstractPath{constructor(c){super(c,e.Algebra.types.ONE_OR_MORE_PATH)}async runOperation(c,s){const l=s.getSafe(r.KeysInitQuery.dataFactory),d=new e.Factory(l),f=await o.BindingsFactory.create(this.mediatorMergeBindingsContext,s,l),h=await this.isPathArbitraryLengthDistinct(d,s,c);if(h.operation)return h.operation;s=h.context;const p=c.predicate;if(c.subject.termType!=="Variable"&&c.object.termType==="Variable"){const F=c.object,T=await this.getObjectsPredicateStarEval(c.subject,p.path,F,c.graph,s,!1,d,f),S=(c.graph.termType==="Variable"?[F,c.graph]:[F]).map(j=>({variable:j,canBeUndef:!1}));return{type:"bindings",bindingsStream:T.bindingsStream,metadata:async()=>({...await T.metadata(),variables:S})}}if(c.subject.termType==="Variable"&&c.object.termType==="Variable"){const F=d.createDistinct(d.createPath(c.subject,c.predicate.path,c.object,c.graph)),T=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:s,operation:F})),S=c.subject,j=c.object,E={},U=new t.MultiTransformIterator(T.bindingsStream,{multiTransform:_=>{const O=_.get(S),P=_.get(j),R=c.graph.termType==="Variable"?_.get(c.graph):c.graph;return new t.TransformIterator(async()=>{const I=new t.BufferedIterator;return await this.getSubjectAndObjectBindingsPredicateStar(S,j,O,P,p.path,R,s,E,{},I,{count:0},d,f),I.map(C=>(c.graph.termType==="Variable"&&(C=C.set(c.graph,R)),C))},{autoStart:!1,maxBufferSize:128})},autoStart:!1}),K=(c.graph.termType==="Variable"?[S,j,c.graph]:[S,j]).map(_=>({variable:_,canBeUndef:!1}));return{type:"bindings",bindingsStream:U,metadata:async()=>({...await T.metadata(),variables:K})}}if(c.subject.termType==="Variable"&&c.object.termType!=="Variable")return this.mediatorQueryOperation.mediate({context:s,operation:d.createPath(c.object,d.createOneOrMorePath(d.createInv(p.path)),c.subject,c.graph)});const y=this.generateVariable(l),b=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:s,operation:d.createPath(c.subject,p,y,c.graph)}));return{type:"bindings",bindingsStream:b.bindingsStream.map(F=>c.object.equals(F.get(y))?c.graph.termType==="Variable"?f.bindings([[c.graph,F.get(c.graph)]]):f.bindings():null),metadata:async()=>({...await b.metadata(),variables:(c.graph.termType==="Variable"?[c.graph]:[]).map(F=>({variable:F,canBeUndef:!1}))})}}};return A_.ActorQueryOperationPathOneOrMore=a,A_}var J4;function rz(){return J4||(J4=1,(function(i){var r=Bu&&Bu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Bu&&Bu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(tz(),i)})(Bu)),Bu}var Cu={},w_={},K4;function nz(){if(K4)return w_;K4=1,Object.defineProperty(w_,"__esModule",{value:!0}),w_.ActorQueryOperationPathZeroOrMore=void 0;const i=Pn(),r=Fe(),o=At(),n=$e(),t=it(),e=hr(),a=Ve();let u=class extends i.ActorAbstractPath{constructor(s){super(s,a.Algebra.types.ZERO_OR_MORE_PATH)}async runOperation(s,l){const d=l.getSafe(r.KeysInitQuery.dataFactory),f=new a.Factory(d),h=await o.BindingsFactory.create(this.mediatorMergeBindingsContext,l,d),p=await this.isPathArbitraryLengthDistinct(f,l,s);if(p.operation)return p.operation;l=p.context;const y=s.predicate,b=this.getPathSources(y),v=s.subject.termType==="Variable",F=s.object.termType==="Variable";if(s.subject.termType==="Variable"&&s.object.termType==="Variable"){const K=this.generateVariable(d,s),_=this.assignPatternSources(f,f.createPattern(s.subject,K,s.object,s.graph),b),O=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:l,operation:_})),P=s.subject,R=s.object,I=new Set,C={},Y=new t.MultiTransformIterator(O.bindingsStream,{multiTransform:Z=>{const le=Z.get(P),ce=Z.get(R),ee=s.graph.termType==="Variable"?Z.get(s.graph):s.graph,Ae=(0,e.termToString)(le)+(0,e.termToString)(ee),Ee=(0,e.termToString)(ce)+(0,e.termToString)(ee);return new t.TransformIterator(async()=>{if(I.has(Ae)&&I.has(Ee))return new t.EmptyIterator;const ue=new t.BufferedIterator,oe={count:0};return I.has(Ae)||(I.add(Ae),await this.getSubjectAndObjectBindingsPredicateStar(P,R,le,le,y.path,ee,l,C,{},ue,oe,f,h)),I.has(Ee)||(I.add(Ee),await this.getSubjectAndObjectBindingsPredicateStar(P,R,ce,ce,y.path,ee,l,C,{},ue,oe,f,h)),ue.map(Re=>(s.graph.termType==="Variable"&&(Re=Re.set(s.graph,ee)),Re))},{autoStart:!1,maxBufferSize:128})},autoStart:!1}),H=(s.graph.termType==="Variable"?[P,s.object,s.graph]:[P,s.object]).map(Z=>({variable:Z,canBeUndef:!1}));return{type:"bindings",bindingsStream:Y,metadata:async()=>({...await O.metadata(),variables:H})}}if(!v&&!F){const K=this.generateVariable(d),_=await this.getObjectsPredicateStarEval(s.subject,y.path,K,s.graph,l,!0,f,h);return{type:"bindings",bindingsStream:_.bindingsStream.map(P=>s.object.equals(P.get(K))?s.graph.termType==="Variable"?h.bindings([[s.graph,P.get(s.graph)]]):h.bindings():null),metadata:async()=>({...await _.metadata(),variables:(s.graph.termType==="Variable"?[s.graph]:[]).map(P=>({variable:P,canBeUndef:!1}))})}}const T=v?s.object:s.subject,S=v?s.subject:s.object,j=v?f.createInv(y.path):y.path,E=await this.getObjectsPredicateStarEval(T,j,S,s.graph,l,!0,f,h),U=(s.graph.termType==="Variable"?[S,s.graph]:[S]).map(K=>({variable:K,canBeUndef:!1}));return{type:"bindings",bindingsStream:E.bindingsStream,metadata:async()=>({...await E.metadata(),variables:U})}}};return w_.ActorQueryOperationPathZeroOrMore=u,w_}var Y4;function iz(){return Y4||(Y4=1,(function(i){var r=Cu&&Cu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Cu&&Cu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(nz(),i)})(Cu)),Cu}var Qu={},E_={},W4;function az(){if(W4)return E_;W4=1,Object.defineProperty(E_,"__esModule",{value:!0}),E_.ActorQueryOperationPathZeroOrOne=void 0;const i=Pn(),r=Fe(),o=At(),n=yr(),t=$e(),e=it(),a=Ve();let u=class extends i.ActorAbstractPath{constructor(s){super(s,a.Algebra.types.ZERO_OR_ONE_PATH)}async runOperation(s,l){const d=l.getSafe(r.KeysInitQuery.dataFactory),f=new a.Factory(d),h=await o.BindingsFactory.create(this.mediatorMergeBindingsContext,l,d),p=s.predicate,y=this.getPathSources(p),b=[];if(s.subject.termType!=="Variable"&&s.object.termType!=="Variable"&&s.subject.equals(s.object))return{type:"bindings",bindingsStream:new e.SingletonIterator(h.bindings()),metadata:()=>Promise.resolve({state:new n.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]})};const v=await this.isPathArbitraryLengthDistinct(f,l,s);if(v.operation)return v.operation;l=v.context;const F=(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:l,operation:f.createPath(s.subject,p.path,s.object,s.graph)}));let T;if(s.subject.termType==="Variable"&&s.object.termType==="Variable"){const j=this.generateVariable(d,s),E=(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:l,operation:f.createFilter(this.assignPatternSources(f,f.createPattern(s.subject,j,s.object,s.graph),y),f.createOperatorExpression("=",[f.createTermExpression(s.subject),f.createTermExpression(s.object)]))})).bindingsStream.map(U=>U.delete(j));T=new e.UnionIterator([E,F.bindingsStream],{autoStart:!1})}else s.subject.termType==="Variable"&&b.push(h.bindings([[s.subject,s.object]])),s.object.termType==="Variable"&&b.push(h.bindings([[s.object,s.subject]])),T=F.bindingsStream.prepend(b);return{type:"bindings",bindingsStream:T,metadata:async()=>{const j=await F.metadata();return{...j,cardinality:{...j.cardinality,value:j.cardinality.value+1}}}}}};return E_.ActorQueryOperationPathZeroOrOne=u,E_}var Z4;function oz(){return Z4||(Z4=1,(function(i){var r=Qu&&Qu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Qu&&Qu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(az(),i)})(Qu)),Qu}var Uu={},j_={},k4;function uz(){if(k4)return j_;k4=1,Object.defineProperty(j_,"__esModule",{value:!0}),j_.ActorQueryOperationUpdateDeleteInsert=void 0;const i=T5(),r=dt(),o=Fe(),n=At(),t=$e(),e=it();let a=class extends r.ActorQueryOperationTypedMediated{constructor(c){super(c,"deleteinsert"),this.blankNodeCounter=0}async testOperation(c,s){return(0,t.testReadOnly)(s)}async runOperation(c,s){const l=s.getSafe(o.KeysInitQuery.dataFactory),d=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s,l),f=c.where?(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:c.where,context:s})).bindingsStream:new e.ArrayIterator([d.bindings()],{autoStart:!1});let h,p;c.insert&&(h=new i.BindingsToQuadsIterator(l,c.insert.map(i.BindingsToQuadsIterator.localizeQuad.bind(null,l,this.blankNodeCounter)),f.clone()),this.blankNodeCounter++),c.delete&&(p=new i.BindingsToQuadsIterator(l,c.delete.map(i.BindingsToQuadsIterator.localizeQuad.bind(null,l,this.blankNodeCounter)),f.clone()),this.blankNodeCounter++);const{execute:y}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:h,quadStreamDelete:p,context:s});return{type:"void",execute:y}}};return j_.ActorQueryOperationUpdateDeleteInsert=a,j_}var eM;function sz(){return eM||(eM=1,(function(i){var r=Uu&&Uu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Uu&&Uu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(uz(),i)})(Uu)),Uu}var Vu={},R_={},tM;function cz(){if(tM)return R_;tM=1,Object.defineProperty(R_,"__esModule",{value:!0}),R_.ActorRdfJoinNone=void 0;const i=cr(),r=Fe(),o=pe(),n=At(),t=yr(),e=it();let a=class extends i.ActorRdfJoin{constructor(c){super(c,{logicalType:"inner",physicalName:"none",limitEntries:0})}async test(c){return c.entries.length>0?(0,o.failTest)(`Actor ${this.name} can only join zero entries`):await this.getJoinCoefficients(c,void 0)}async getOutput(c){const s=c.context.getSafe(r.KeysInitQuery.dataFactory),l=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,c.context,s);return{result:{bindingsStream:new e.ArrayIterator([l.bindings()],{autoStart:!1}),metadata:()=>Promise.resolve({state:new t.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]}),type:"bindings"}}}async getJoinCoefficients(c,s){return(0,o.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},s)}};return R_.ActorRdfJoinNone=a,R_}var rM;function lz(){return rM||(rM=1,(function(i){var r=Vu&&Vu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Vu&&Vu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(cz(),i)})(Vu)),Vu}var Gu={},D_={},Xu={},P_={},nM;function dz(){if(nM)return P_;nM=1,Object.defineProperty(P_,"__esModule",{value:!0}),P_.ActorRdfJoinMultiBind=void 0;const i=cr(),r=Fe(),o=pe(),n=At(),t=$e(),e=it(),a=Ve();let u=class N5 extends i.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:"bind",canHandleUndefs:!0,isLeaf:!1})}static createBindStream(s,l,d,f,h,p,y){const b=s==="depth-first",v=F=>{const T=d.map(j=>(0,t.materializeOperation)(j,F,p,y,{bindFilter:!0})),S=j=>j.merge(F);return new e.TransformIterator(async()=>(await f(T,F)).transform({map:S}),{maxBufferSize:128,autoStart:b})};switch(s){case"depth-first":return new e.MultiTransformIterator(l,{autoStart:!1,multiTransform:v,optional:h});case"breadth-first":return new e.UnionIterator(l.transform({map:v,optional:h}),{autoStart:!1});default:throw new Error(`Received request for unknown bind order: ${s}`)}}async getOutput(s,l){const d=s.context.getSafe(r.KeysInitQuery.dataFactory),f=new a.Factory(d),h=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,d),p=l.entriesSorted;this.logDebug(s.context,"First entry for Bind Join: ",()=>({entry:p[0].operation,cardinality:p[0].metadata.cardinality,order:p[0].metadata.order,availableOrders:p[0].metadata.availableOrders}));for(const[T,S]of p.entries())T!==0&&S.output.bindingsStream.close();const y=p[0].output,b=[...p];b.splice(0,1);const v=s.context.set(r.KeysQueryOperation.joinLeftMetadata,p[0].metadata).set(r.KeysQueryOperation.joinRightMetadatas,b.map(T=>T.metadata));return{result:{type:"bindings",bindingsStream:N5.createBindStream(this.bindOrder,y.bindingsStream,b.map(T=>T.operation),async(T,S)=>{const j=T.length===1?T[0]:f.createJoin(T,T.every(U=>!U.metadata));return(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:j,context:v?.set(r.KeysQueryOperation.joinBindings,S)})).bindingsStream},!1,f,h),metadata:()=>this.constructResultMetadata(p,p.map(T=>T.metadata),s.context)},physicalPlanMetadata:{bindIndex:l.entriesUnsorted.indexOf(p[0]),bindOperation:p[0].operation,bindOperationCardinality:p[0].metadata.cardinality,bindOrder:this.bindOrder}}}canBindWithOperation(s){let l=!0;return a.Util.recurseOperation(s,{[a.Algebra.types.EXTEND](){return l=!1,!1},[a.Algebra.types.GROUP](){return l=!1,!1}}),l}async getJoinCoefficients(s,l){let{metadatas:d}=l;const f=s.entries.map((_,O)=>({..._,metadata:d[O]})),h=await i.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,f,s.context);if(h.isFailed())return h;const p=h.get();d=p.map(_=>_.metadata);const y=i.ActorRdfJoin.getRequestInitialTimes(d),b=i.ActorRdfJoin.getRequestItemTimes(d),v=[...p],F=[...y],T=[...b];if(v.splice(0,1),F.splice(0,1),T.splice(0,1),v.some(_=>!this.canBindWithOperation(_.operation)))return(0,o.failTest)(`Actor ${this.name} can not bind on Extend and Group operations`);if(v.some(_=>_.operationModified))return(0,o.failTest)(`Actor ${this.name} can not be used over remaining entries with modified operations`);const S=b.some(_=>_>0);if(d[0].cardinality.value*this.minMaxCardinalityRatio/(S?1:3)>Math.max(...d.map(_=>_.cardinality.value)))return(0,o.failTest)(`Actor ${this.name} can only run if the smallest stream is much smaller than largest stream`);const j=await Promise.all(v.map(async _=>(await this.mediatorJoinSelectivity.mediate({entries:[p[0],_],context:s.context})).selectivity*this.selectivityModifier)),E=v.map((_,O)=>_.metadata.cardinality.value*j[O]).reduce((_,O)=>_+O,0),U=F.reduce((_,O)=>_+O,0),K=T.reduce((_,O)=>_+O,0);return(0,o.passTestWithSideData)({iterations:d[0].cardinality.value*E,persistedItems:0,blockingItems:0,requestTime:y[0]+d[0].cardinality.value*(b[0]+U+E*K)},{...l,entriesUnsorted:f,entriesSorted:p})}};return P_.ActorRdfJoinMultiBind=u,P_}var iM;function I5(){return iM||(iM=1,(function(i){var r=Xu&&Xu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Xu&&Xu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(dz(),i)})(Xu)),Xu}var aM;function fz(){if(aM)return D_;aM=1,Object.defineProperty(D_,"__esModule",{value:!0}),D_.ActorRdfJoinOptionalBind=void 0;const i=I5(),r=cr(),o=Fe(),n=pe(),t=At(),e=$e(),a=Ve();let u=class extends r.ActorRdfJoin{constructor(s){super(s,{logicalType:"optional",physicalName:"bind",limitEntries:2,canHandleUndefs:!0,isLeaf:!1,requiresVariableOverlap:!0,canHandleOperationRequired:!0})}async getOutput(s){const l=s.context.getSafe(o.KeysInitQuery.dataFactory),d=new a.Factory(l),f=await t.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,l);s.entries[1].output.bindingsStream.close();const h=s.context.set(o.KeysQueryOperation.joinLeftMetadata,await s.entries[0].output.metadata()).set(o.KeysQueryOperation.joinRightMetadatas,[await s.entries[1].output.metadata()]);return{result:{type:"bindings",bindingsStream:i.ActorRdfJoinMultiBind.createBindStream(this.bindOrder,s.entries[0].output.bindingsStream,[s.entries[1].operation],async(y,b)=>{const v=y[0];return(0,e.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:v,context:h?.set(o.KeysQueryOperation.joinBindings,b)})).bindingsStream},!0,d,f),metadata:async()=>await this.constructResultMetadata(s.entries,await r.ActorRdfJoin.getMetadatas(s.entries),s.context,{},!0)}}}async getJoinCoefficients(s,l){const{metadatas:d}=l,f=r.ActorRdfJoin.getRequestInitialTimes(d),h=r.ActorRdfJoin.getRequestItemTimes(d);if(s.entries[1].operation.type===a.Algebra.types.EXTEND||s.entries[1].operation.type===a.Algebra.types.GROUP)return(0,n.failTest)(`Actor ${this.name} can not bind on Extend and Group operations`);const p=(await this.mediatorJoinSelectivity.mediate({entries:s.entries,context:s.context})).selectivity*this.selectivityModifier;return(0,n.passTestWithSideData)({iterations:d[0].cardinality.value*d[1].cardinality.value*p,persistedItems:0,blockingItems:0,requestTime:f[0]+d[0].cardinality.value*(h[0]+f[1]+p*d[1].cardinality.value*h[1])},l)}};return D_.ActorRdfJoinOptionalBind=u,D_}var oM;function pz(){return oM||(oM=1,(function(i){var r=Gu&&Gu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Gu&&Gu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(fz(),i)})(Gu)),Gu}var zu={},M_={},Hu={},N_={},uM;function hz(){if(uM)return N_;uM=1,Object.defineProperty(N_,"__esModule",{value:!0}),N_.ActorQueryProcess=void 0;const i=pe();let r=class extends i.Actor{constructor(n){super(n)}};return N_.ActorQueryProcess=r,N_}var sM;function yz(){return sM||(sM=1,(function(i){var r=Hu&&Hu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Hu&&Hu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(hz(),i)})(Hu)),Hu}var cM;function _z(){if(cM)return M_;cM=1,Object.defineProperty(M_,"__esModule",{value:!0}),M_.ActorQueryProcessSequential=void 0;const i=yz(),r=Fe(),o=pe(),n=At(),t=$e(),e=Ve();let a=class extends i.ActorQueryProcess{constructor(c){super(c)}async test(c){return c.context.get(r.KeysInitQuery.explain)??c.context.get(new o.ActionContextKey("explain"))?(0,o.failTest)(`${this.name} is not able to explain queries.`):(0,o.passTestVoid)()}async run(c){let{operation:s,context:l}=await this.parse(c.query,c.context);return{operation:s,context:l}=await this.optimize(s,l),{result:await this.evaluate(s,l)}}async parse(c,s){s=(await this.mediatorContextPreprocess.mediate({context:s,initialize:!0})).context;let l;if(typeof c=="string"){s=s.set(r.KeysInitQuery.queryString,c);const d=s.get(r.KeysInitQuery.baseIRI),f=s.get(r.KeysInitQuery.queryFormat),h=await this.mediatorQueryParse.mediate({context:s,query:c,queryFormat:f,baseIRI:d});l=h.operation,h.baseIRI&&(s=s.set(r.KeysInitQuery.baseIRI,h.baseIRI))}else l=c;if(s.has(r.KeysInitQuery.initialBindings)){const d=s.getSafe(r.KeysInitQuery.dataFactory),f=new e.Factory(d),h=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s,d);l=(0,t.materializeOperation)(l,s.get(r.KeysInitQuery.initialBindings),f,h,{strictTargetVariables:!0}),s=s.delete(r.KeysInitQuery.queryString)}return{operation:l,context:s}}async optimize(c,s){return s=s.set(r.KeysInitQuery.query,c),{operation:c,context:s}=await this.mediatorOptimizeQueryOperation.mediate({context:s,operation:c}),s=s.set(r.KeysInitQuery.query,c),{operation:c,context:s}}async evaluate(c,s){const l=await this.mediatorQueryOperation.mediate({context:s,operation:c});return l.context=s,l}};return M_.ActorQueryProcessSequential=a,M_}var lM;function mz(){return lM||(lM=1,(function(i){var r=zu&&zu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=zu&&zu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(_z(),i)})(zu)),zu}var $u={},I_={},Ju={},q_={},dM;function gz(){if(dM)return q_;dM=1,Object.defineProperty(q_,"__esModule",{value:!0}),q_.ActorQuerySourceIdentify=void 0;const i=pe();let r=class extends i.Actor{constructor(n){super(n)}};return q_.ActorQuerySourceIdentify=r,q_}var xt={},fM;function bz(){if(fM)return xt;fM=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.filterMatchingQuotedQuads=xt.quadsOrderToBindingsOrder=xt.quadsMetadataToBindingsMetadata=xt.setMetadata=xt.getDuplicateElementLinks=xt.getVariables=xt.isTermVariable=xt.quadsToBindings=void 0;const i=gs(),r=yr(),o=hr(),n=Rn(),t=II();function e(h,p,y,b,v){const F=u(p),T=p.graph.termType==="Variable"&&!v,S=c(p),j=(0,n.reduceTermsNested)(p,(K,_,O)=>(_.termType==="Variable"&&(K[O.join("_")]=_.value),K),{});let E=h;T&&(E=E.filter(K=>K.graph.termType!=="DefaultGraph")),S&&(E=E.filter(K=>{for(const _ in S){const O=_.split("_"),P=(0,n.getValueNestedPath)(K,O);for(const R of S[_])if(!P.equals((0,n.getValueNestedPath)(K,R)))return!1}return!0}));const U=new i.ClosableIterator(E.map(K=>b.bindings(Object.keys(j).map(_=>{const O=_.split("_"),P=j[_],R=(0,n.getValueNestedPath)(K,O);return[y.variable(P),R]}))),{onClose:()=>h.destroy()});return s(y,U,h,j,F,T||!!S),U}xt.quadsToBindings=e;function a(h){return h.termType==="Variable"}xt.isTermVariable=a;function u(h){return(0,n.uniqTerms)((0,n.getTermsNested)(h).filter(a))}xt.getVariables=u;function c(h){const p={};let y=!1;if((0,n.forEachTermsNested)(h,(v,F)=>{if(v.termType==="Variable"){const T=(0,o.termToString)(v),S=(p[T]||(p[T]=[])).push(F);y=y||S>1}}),!y)return;const b={};for(const v in p){const F=p[v],T=F.slice(1);T.length>0&&(b[F[0].join("_")]=T)}return b}xt.getDuplicateElementLinks=c;function s(h,p,y,b,v,F){const T=j=>{F&&(j.cardinality.type="estimate"),p.setProperty("metadata",l(h,(0,r.validateMetadataQuads)(j),b,v)),j.state&&j.state.addInvalidateListener(()=>{s(h,p,y,b,v,F)})},S=y.getProperty("metadata");S?T(S):y.getProperty("metadata",T)}xt.setMetadata=s;function l(h,p,y,b){return{...p,order:p.order?d(h,p.order,y):void 0,availableOrders:p.availableOrders?p.availableOrders.map(v=>({cost:v.cost,terms:d(h,v.terms,y)})):void 0,variables:b.map(v=>({variable:v,canBeUndef:!1}))}}xt.quadsMetadataToBindingsMetadata=l;function d(h,p,y){const b={};return p.map(v=>{const F=y[v.term];if(F&&!b[F])return b[F]=!0,{term:h.variable(F),direction:v.direction}}).filter(Boolean)}xt.quadsOrderToBindingsOrder=d;function f(h,p){return(0,n.someTerms)(h,y=>y.termType==="Quad")&&(p=p.filter(y=>(0,t.matchPatternMappings)(y,h))),p}return xt.filterMatchingQuotedQuads=f,xt}var pM;function q5(){return pM||(pM=1,(function(i){var r=Ju&&Ju.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ju&&Ju.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(gz(),i),o(bz(),i)})(Ju)),Ju}var L_={},hM;function L5(){if(hM)return L_;hM=1,Object.defineProperty(L_,"__esModule",{value:!0}),L_.QuerySourceRdfJs=void 0;const i=q5(),r=Fe(),o=yr(),n=it(),t=Rn(),e=Ve();let a=class lr{constructor(c,s,l){this.source=c,this.referenceValue=c,this.dataFactory=s,this.bindingsFactory=l;const d=new e.Factory(this.dataFactory);this.selectorShape={type:"operation",operation:{operationType:"pattern",pattern:d.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"))},variablesOptional:[this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o")]},this.dummyDefaultGraph=this.dataFactory.variable("__comunica:defaultGraph")}static nullifyVariables(c,s){return!c||c.termType==="Variable"||!s&&c.termType==="Quad"&&(0,t.someTermsNested)(c,l=>l.termType==="Variable")?void 0:c}static hasDuplicateVariables(c){const s=(0,t.filterTermsNested)(c,l=>l.termType==="Variable");return s.length>1&&(0,t.uniqTerms)(s).length<s.length}async getSelectorShape(){return this.selectorShape}queryBindings(c,s){if(c.type!=="pattern")throw new Error(`Attempted to pass non-pattern operation '${c.type}' to QuerySourceRdfJs`);const l=!!s.get(r.KeysQueryOperation.unionDefaultGraph);if(c.graph.termType==="DefaultGraph"&&l&&(c.graph=this.dummyDefaultGraph),"matchBindings"in this.source&&this.source.matchBindings){const p=this.source.matchBindings(this.bindingsFactory,c.subject,c.predicate,c.object,c.graph);let y=p instanceof n.AsyncIterator?p:(0,n.wrap)(p,{autoStart:!1}),b=!1;if(c.graph.termType==="Variable"&&!l){b=!0;const F=c.graph;y=y.filter(T=>T.get(F).termType!=="DefaultGraph")}c.graph.equals(this.dummyDefaultGraph)&&(y=y.map(F=>F.delete(this.dummyDefaultGraph)),c.graph=this.dataFactory.defaultGraph());const v=(0,i.getVariables)(c).map(F=>({variable:F,canBeUndef:!1}));return this.setMetadata(y,c,s,b,{variables:v}).catch(F=>y.destroy(F)),y}const d=!!("features"in this.source&&this.source.features?.quotedTripleFiltering),f=this.source.match(lr.nullifyVariables(c.subject,d),lr.nullifyVariables(c.predicate,d),lr.nullifyVariables(c.object,d),lr.nullifyVariables(c.graph,d));let h=f instanceof n.AsyncIterator?f:(0,n.wrap)(f,{autoStart:!1});return d||(h=(0,i.filterMatchingQuotedQuads)(c,h)),h.getProperty("metadata")||this.setMetadata(h,c,s).catch(p=>h.destroy(p)),c.graph.equals(this.dummyDefaultGraph)&&(c.graph=this.dataFactory.defaultGraph()),(0,i.quadsToBindings)(h,c,this.dataFactory,this.bindingsFactory,!!s.get(r.KeysQueryOperation.unionDefaultGraph))}async setMetadata(c,s,l,d=!1,f={}){const h=!!("features"in this.source&&this.source.features?.quotedTripleFiltering),p=!!l.get(r.KeysQueryOperation.unionDefaultGraph);s.graph.termType==="DefaultGraph"&&p&&(s.graph=this.dummyDefaultGraph);let y;if("countQuads"in this.source&&this.source.countQuads)y=await this.source.countQuads(lr.nullifyVariables(s.subject,h),lr.nullifyVariables(s.predicate,h),lr.nullifyVariables(s.object,h),lr.nullifyVariables(s.graph,h));else{let v=0;y=await new Promise((F,T)=>{let S=this.source.match(lr.nullifyVariables(s.subject,h),lr.nullifyVariables(s.predicate,h),lr.nullifyVariables(s.object,h),lr.nullifyVariables(s.graph,h));typeof S.on!="function"&&(S=new n.ArrayIterator(S)),S.on("error",T),S.on("end",()=>F(v)),S.on("data",()=>v++)})}const b=!h&&(0,t.someTerms)(s,v=>v.termType==="Quad")||lr.hasDuplicateVariables(s);c.setProperty("metadata",{state:new o.MetadataValidationState,cardinality:{type:b||d?"estimate":"exact",value:y},requestTime:0,...f})}queryQuads(c,s){throw new Error("queryQuads is not implemented in QuerySourceRdfJs")}queryBoolean(c,s){throw new Error("queryBoolean is not implemented in QuerySourceRdfJs")}queryVoid(c,s){throw new Error("queryVoid is not implemented in QuerySourceRdfJs")}toString(){return`QuerySourceRdfJs(${this.source.constructor.name})`}};return L_.QuerySourceRdfJs=a,L_}var yM;function vz(){if(yM)return I_;yM=1,Object.defineProperty(I_,"__esModule",{value:!0}),I_.ActorQuerySourceIdentifyRdfJs=void 0;const i=q5(),r=Fe(),o=pe(),n=At(),t=L5();let e=class extends i.ActorQuerySourceIdentify{constructor(u){super(u)}async test(u){const c=u.querySourceUnidentified;return c.type!==void 0&&c.type!=="rdfjs"?(0,o.failTest)(`${this.name} requires a single query source with rdfjs type to be present in the context.`):typeof c.value=="string"||!("match"in c.value)?(0,o.failTest)(`${this.name} received an invalid rdfjs query source.`):(0,o.passTestVoid)()}async run(u){const c=u.context.getSafe(r.KeysInitQuery.dataFactory);return{querySource:{source:new t.QuerySourceRdfJs(u.querySourceUnidentified.value,c,await n.BindingsFactory.create(this.mediatorMergeBindingsContext,u.context,c)),context:u.querySourceUnidentified.context??new o.ActionContext}}}};return I_.ActorQuerySourceIdentifyRdfJs=e,I_}var U1={},_M;function Tz(){return _M||(_M=1,Object.defineProperty(U1,"__esModule",{value:!0})),U1}var mM;function Oz(){return mM||(mM=1,(function(i){var r=$u&&$u.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=$u&&$u.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(vz(),i),o(Tz(),i),o(L5(),i)})($u)),$u}var Ku={},x_={},Yu={},B_={},gM;function Sz(){if(gM)return B_;gM=1,Object.defineProperty(B_,"__esModule",{value:!0}),B_.ActorTermComparatorFactory=void 0;const i=pe();let r=class extends i.Actor{constructor(n){super(n),this.mediatorQueryOperation=n.mediatorQueryOperation,this.mediatorFunctionFactory=n.mediatorFunctionFactory,this.mediatorMergeBindingsContext=n.mediatorMergeBindingsContext}};return B_.ActorTermComparatorFactory=r,B_}var bM;function Fz(){return bM||(bM=1,(function(i){var r=Yu&&Yu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Yu&&Yu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Sz(),i)})(Yu)),Yu}var C_={},vM;function Az(){if(vM)return C_;vM=1,Object.defineProperty(C_,"__esModule",{value:!0}),C_.TermComparatorExpressionEvaluator=void 0;let i=class{constructor(o,n,t){this.internalEvaluator=o,this.equalityFunction=n,this.lessThanFunction=t,this._TERM_ORDERING_PRIORITY={Variable:0,BlankNode:1,NamedNode:2,Literal:3,Quad:4,DefaultGraph:5}}orderTypes(o,n){if(o===n)return 0;if(o===void 0)return-1;if(n===void 0)return 1;if(o.termType!==n.termType)return this._TERM_ORDERING_PRIORITY[o.termType]<this._TERM_ORDERING_PRIORITY[n.termType]?-1:1;if(o.equals(n))return 0;if(o.termType==="Quad"&&n.termType==="Quad"){const t=this.orderTypes(o.subject,n.subject);if(t!==0)return t;const e=this.orderTypes(o.predicate,n.predicate);if(e!==0)return e;const a=this.orderTypes(o.object,n.object);return a!==0?a:this.orderTypes(o.graph,n.graph)}return o.termType==="Literal"?this.orderLiteralTypes(o,n):this.comparePrimitives(o.value,n.value)}orderLiteralTypes(o,n){const t=this.internalEvaluator.transformer.transformLiteral(o),e=this.internalEvaluator.transformer.transformLiteral(n);try{return this.equalityFunction.applyOnTerms([t,e],this.internalEvaluator).typedValue?0:this.lessThanFunction.applyOnTerms([t,e],this.internalEvaluator).typedValue?-1:1}catch{const a=this.comparePrimitives(t.dataType,e.dataType);return a!==0?a:this.comparePrimitives(t.str(),e.str())}}comparePrimitives(o,n){return o===n?0:o<n?-1:1}};return C_.TermComparatorExpressionEvaluator=i,C_}var TM;function wz(){if(TM)return x_;TM=1,Object.defineProperty(x_,"__esModule",{value:!0}),x_.ActorTermComparatorFactoryExpressionEvaluator=void 0;const i=M5(),r=Fz(),o=Fe(),n=pe(),t=At(),e=W(),a=Az();let u=class extends r.ActorTermComparatorFactory{async test(s){return(0,n.passTestVoid)()}async run({context:s}){return s=e.prepareEvaluatorActionContext(s),new a.TermComparatorExpressionEvaluator(new i.InternalEvaluator(s,this.mediatorFunctionFactory,this.mediatorQueryOperation,await t.BindingsFactory.create(this.mediatorMergeBindingsContext,s,s.getSafe(o.KeysInitQuery.dataFactory))),await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.EQUAL,context:s,requireTermExpression:!0}),await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.LT,context:s,requireTermExpression:!0}))}};return x_.ActorTermComparatorFactoryExpressionEvaluator=u,x_}var OM;function Ez(){return OM||(OM=1,(function(i){var r=Ku&&Ku.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Ku&&Ku.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(wz(),i)})(Ku)),Ku}var Wu={},Q_={},SM;function jz(){if(SM)return Q_;SM=1,Object.defineProperty(Q_,"__esModule",{value:!0}),Q_.ActorRdfJoinMultiSmallestFilterBindings=void 0;const i=cr(),r=Fe(),o=pe(),n=At(),t=gs(),e=$e(),a=it(),u=Ve();let c=class extends i.ActorRdfJoin{constructor(l){super(l,{logicalType:"inner",physicalName:"multi-smallest-filter-bindings",limitEntries:2,limitEntriesMin:!0,isLeaf:!1})}async sortJoinEntries(l,d){let{entries:f}=await this.mediatorJoinEntriesSort.mediate({entries:l,context:d});f=f.sort((F,T)=>F.operationModified&&!T.operationModified?-1:0);const h=f.splice(0,1)[0];let p,y=-1,b=0;for(const[F,T]of f.entries()){const S=h.metadata.variables.filter(j=>T.metadata.variables.some(E=>j.variable.equals(E.variable))).length;(!p||S>b||S===b&&(T.metadata.variables.length<p.metadata.variables.length||T.metadata.variables.length===p.metadata.variables.length&&T.metadata.cardinality.value<p.metadata.cardinality.value))&&(p=T,y=F,b=S)}if(b===0)return(0,o.failTest)(`Actor ${this.name} can only join with common variables`);const v=f;return v.splice(y,1),(0,o.passTest)({first:h,second:p,remaining:v})}async getOutput(l){const d=l.context.getSafe(r.KeysInitQuery.dataFactory),f=new u.Factory(d),h=await i.ActorRdfJoin.getEntriesWithMetadatas([...l.entries]),{first:p,second:y,remaining:b}=(await this.sortJoinEntries(h,l.context)).getOrThrow(),v=p.output.bindingsStream;p.output.bindingsStream=v.clone();const F=p.metadata.variables.filter(P=>y.metadata.variables.some(R=>P.variable.equals(R.variable))),T={},S=v.clone().map(P=>P.filter((R,I)=>F.some(C=>C.variable.equals(I)))).filter(P=>{const R=(0,n.bindingsToString)(P);return!(R in T)&&(T[R]=!0)}),j=new t.ChunkedIterator(S,this.blockSize,{autoStart:!1}),E=(0,e.getOperationSource)(y.operation),K={output:{type:"bindings",bindingsStream:new a.UnionIterator(j.map(P=>E.source.queryBindings(y.operation,E.context?l.context.merge(E.context):l.context,{filterBindings:{bindings:P,metadata:p.metadata}}))),metadata:y.output.metadata},operation:y.operation,operationModified:!0};y.output.bindingsStream.destroy();const _={output:(0,e.getSafeBindings)(await this.mediatorJoin.mediate({type:l.type,entries:[p,K],context:l.context.set(r.KeysRdfJoin.lastPhysicalJoin,this.physicalName)})),operation:f.createJoin([p.operation,K.operation],!1),operationModified:!0},O=b;return O.unshift(_),{result:await this.mediatorJoin.mediate({type:l.type,entries:O,context:l.context}),physicalPlanMetadata:{firstIndex:h.indexOf(p),secondIndex:h.indexOf(y)}}}async getJoinCoefficients(l,d){let{metadatas:f}=d;if(l.context.get(r.KeysRdfJoin.lastPhysicalJoin)===this.physicalName)return(0,o.failTest)(`Actor ${this.name} can not be called recursively`);f=[...f];const h=await this.sortJoinEntries(l.entries.map((_,O)=>({..._,metadata:f[O]})),l.context);if(h.isFailed())return h;const{first:p,second:y,remaining:b}=h.get(),v=(0,e.getOperationSource)(y.operation);if(!v)return(0,o.failTest)(`Actor ${this.name} can only process if entries[1] has a source`);const F=y.operation,T=await v.source.getSelectorShape(l.context),S=l.context.get(r.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(!(0,e.doesShapeAcceptOperation)(T,F,{filterBindings:!0,wildcardAcceptAllExtensionFunctions:S}))return(0,o.failTest)(`Actor ${this.name} can only process if entries[1] accept filterBindings`);f=[p.metadata,y.metadata,...b.map(_=>_.metadata)];const j=i.ActorRdfJoin.getRequestInitialTimes(f),E=i.ActorRdfJoin.getRequestItemTimes(f),{selectivity:U}=await this.mediatorJoinSelectivity.mediate({entries:[p,y],context:l.context}),K=b.reduce((_,O)=>_*O.metadata.cardinality.value*this.selectivityModifier,1);return(0,o.passTestWithSideData)({iterations:U*this.selectivityModifier*y.metadata.cardinality.value*K,persistedItems:p.metadata.cardinality.value,blockingItems:p.metadata.cardinality.value,requestTime:j[0]+f[0].cardinality.value*E[0]+j[1]+K*E[1]},d)}};return Q_.ActorRdfJoinMultiSmallestFilterBindings=c,Q_}var FM;function Rz(){return FM||(FM=1,(function(i){var r=Wu&&Wu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Wu&&Wu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(jz(),i)})(Wu)),Wu}var Zu={},U_={},AM;function Dz(){if(AM)return U_;AM=1,Object.defineProperty(U_,"__esModule",{value:!0}),U_.ActorOptimizeQueryOperationPruneEmptySourceOperations=void 0;const i=Fr(),r=Fe(),o=pe(),n=$e(),t=Ve();let e=class nm extends i.ActorOptimizeQueryOperation{constructor(u){super(u)}async test(u){return(0,n.getOperationSource)(u.operation)?(0,o.failTest)(`Actor ${this.name} does not work with top-level operation sources.`):(0,o.passTestVoid)()}async run(u){const c=u.context.getSafe(r.KeysInitQuery.dataFactory),s=new t.Factory(c);let l=u.operation;const d=[],f=this;t.Util.recurseOperation(l,{[t.Algebra.types.UNION](p){return f.collectMultiOperationInputs(p.input,d,t.Algebra.types.PATTERN),!0},[t.Algebra.types.ALT](p){return f.collectMultiOperationInputs(p.input,d,t.Algebra.types.LINK),!1},[t.Algebra.types.SERVICE](){return!1}});const h=new Set;return await Promise.all(d.map(async p=>{const y=p.type==="link"?s.createPattern(c.variable("s"),p.iri,c.variable("o")):p;await this.hasSourceResults(s,(0,n.getOperationSource)(p),y,u.context)||h.add(p)})),h.size>0&&(this.logDebug(u.context,`Pruning ${h.size} source-specific operations`),l=t.Util.mapOperation(l,{[t.Algebra.types.UNION](p,y){return f.mapMultiOperation(p,h,b=>y.createUnion(b))},[t.Algebra.types.ALT](p,y){return f.mapMultiOperation(p,h,b=>y.createAlt(b))}},s),l=t.Util.mapOperation(l,{[t.Algebra.types.PROJECT](p,y){return nm.hasEmptyOperation(p)?{recurse:!1,result:y.createUnion([])}:{recurse:!0,result:p}},[t.Algebra.types.LEFT_JOIN](p){return nm.hasEmptyOperation(p.input[1])?{recurse:!0,result:p.input[0]}:{recurse:!0,result:p}}},s)),{operation:l,context:u.context}}static hasEmptyOperation(u){let c=!1;return t.Util.recurseOperation(u,{[t.Algebra.types.UNION](s){return s.input.every(l=>nm.hasEmptyOperation(l))&&(c=!0),!1},[t.Algebra.types.ALT](s){return s.input.length===0&&(c=!0),!1},[t.Algebra.types.LEFT_JOIN](s){return nm.hasEmptyOperation(s.input[0])&&(c=!0),!1}}),c}collectMultiOperationInputs(u,c,s){for(const l of u)(0,n.getOperationSource)(l)&&l.type===s&&c.push(l)}mapMultiOperation(u,c,s){const l=u.input.filter(d=>!c.has(d));return l.length===u.input.length?{result:u,recurse:!0}:l.length===0?{result:s([]),recurse:!1}:l.length===1?{result:l[0],recurse:!0}:{result:s(l),recurse:!0}}async hasSourceResults(u,c,s,l){const d=c.context?l.merge(c.context):l,f=d.get(r.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(d.get(r.KeysQuerySourceIdentify.traverse))return!0;if(this.useAskIfSupported){const y=u.createAsk(s);if((0,n.doesShapeAcceptOperation)(await c.source.getSelectorShape(l),y,{wildcardAcceptAllExtensionFunctions:f}))return c.source.queryBoolean(y,d)}const h=c.source.queryBindings(s,d),p=await new Promise((y,b)=>{h.on("error",b),h.getProperty("metadata",v=>{h.destroy(),y(v.cardinality)})});if(p.type==="estimate"&&p.value>0){const y=u.createAsk(s);if((0,n.doesShapeAcceptOperation)(await c.source.getSelectorShape(l),y,{wildcardAcceptAllExtensionFunctions:f}))return c.source.queryBoolean(y,d)}return p.value>0}};return U_.ActorOptimizeQueryOperationPruneEmptySourceOperations=e,U_}var wM;function Pz(){return wM||(wM=1,(function(i){var r=Zu&&Zu.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Zu&&Zu.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Dz(),i)})(Zu)),Zu}var ku={},V_={},EM;function Mz(){if(EM)return V_;EM=1,Object.defineProperty(V_,"__esModule",{value:!0}),V_.ActorOptimizeQueryOperationLeftjoinExpressionPushdown=void 0;const i=Fr(),r=Fe(),o=pe(),n=$e(),t=Ve();let e=class extends i.ActorOptimizeQueryOperation{constructor(u){super(u)}async test(u){return(0,o.passTestVoid)()}async run(u){const c=u.context.getSafe(r.KeysInitQuery.dataFactory),s=new t.Factory(c);let l=u.operation;const d=this;return l=t.Util.mapOperation(l,{leftjoin(f,h){if(f.expression){const p=(0,n.getExpressionVariables)(f.expression),y=t.Util.inScopeVariables(f.input[0]),b=t.Util.inScopeVariables(f.input[1]),v=d.variablesIntersect(p,y),F=d.variablesIntersect(p,b);if(v&&!F)return d.logDebug(u.context,"Pushed down optional expression to left-hand operator"),{recurse:!0,result:h.createLeftJoin(h.createFilter(f.input[0],f.expression),f.input[1])};if(!v&&F)return d.logDebug(u.context,"Pushed down optional expression to right-hand operator"),{recurse:!0,result:h.createLeftJoin(f.input[0],h.createFilter(f.input[1],f.expression))}}return{recurse:!0,result:f}}},s),{operation:l,context:u.context}}variablesIntersect(u,c){return u.some(s=>c.some(l=>s.equals(l)))}};return V_.ActorOptimizeQueryOperationLeftjoinExpressionPushdown=e,V_}var jM;function Nz(){return jM||(jM=1,(function(i){var r=ku&&ku.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ku&&ku.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Mz(),i)})(ku)),ku}var es={},G_={},RM;function Iz(){if(RM)return G_;RM=1,Object.defineProperty(G_,"__esModule",{value:!0}),G_.ActorRdfJoinMultiBindSource=void 0;const i=cr(),r=Fe(),o=pe(),n=gs(),t=$e(),e=it(),a=Ve();let u=class extends i.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:"bind-source",canHandleUndefs:!0})}async getOutput(s,l){const d=s.context.getSafe(r.KeysInitQuery.dataFactory),f=new a.Factory(d),h=l.entriesSorted;this.logDebug(s.context,"First entry for Bind Join Source: ",()=>({entry:h[0].operation,cardinality:h[0].metadata.cardinality,order:h[0].metadata.order,availableOrders:h[0].metadata.availableOrders}));for(const[j,E]of h.entries())j!==0&&E.output.bindingsStream.close();const p=h[0].output,y=h[0].metadata,b=[...h];b.splice(0,1);const v=(0,t.getOperationSource)(b[0].operation),F=this.createOperationFromEntries(f,b),T=new n.ChunkedIterator(p.bindingsStream,this.blockSize,{autoStart:!1});return{result:{type:"bindings",bindingsStream:new e.UnionIterator(T.map(j=>v.source.queryBindings(F,v.context?s.context.merge(v.context):s.context,{joinBindings:{bindings:j,metadata:y}}))),metadata:()=>this.constructResultMetadata(h,h.map(j=>j.metadata),s.context)},physicalPlanMetadata:{bindIndex:l.entriesUnsorted.indexOf(h[0])}}}async sortJoinEntries(s,l){const d=await i.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,s,l);return d.isFailed()?d:(s=d.get(),s=s.sort((f,h)=>f.operationModified&&!h.operationModified?-1:0),(0,o.passTest)(s))}async getJoinCoefficients(s,l){let{metadatas:d}=l;const f=s.context.getSafe(r.KeysInitQuery.dataFactory),h=new a.Factory(f),p=s.entries.map((P,R)=>({...P,metadata:d[R]})),y=await this.sortJoinEntries(p,s.context);if(y.isFailed())return y;const b=y.get();d=b.map(P=>P.metadata);const v=i.ActorRdfJoin.getRequestInitialTimes(d),F=i.ActorRdfJoin.getRequestItemTimes(d),T=[...b];[...v],[...F],T.splice(0,1);const S=T.map(P=>(0,t.getOperationSource)(P.operation));if(S.some(P=>!P))return(0,o.failTest)(`Actor ${this.name} can not bind on remaining operations without source annotation`);if(S.some(P=>P!==S[0]))return(0,o.failTest)(`Actor ${this.name} can not bind on remaining operations with non-equal source annotation`);const j=S[0],E=this.createOperationFromEntries(h,T),U=await j.source.getSelectorShape(s.context),K=s.context.get(r.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(!(0,t.doesShapeAcceptOperation)(U,E,{joinBindings:!0,wildcardAcceptAllExtensionFunctions:K}))return(0,o.failTest)(`Actor ${this.name} detected a source that can not handle passing down join bindings`);const _=await Promise.all(T.map(async P=>(await this.mediatorJoinSelectivity.mediate({entries:[b[0],P],context:s.context})).selectivity*this.selectivityModifier)),O=T.map((P,R)=>P.metadata.cardinality.value*_[R]).reduce((P,R)=>P+R,0);return(0,o.passTestWithSideData)({iterations:1,persistedItems:d[0].cardinality.value,blockingItems:d[0].cardinality.value,requestTime:v[0]+d[0].cardinality.value*F[0]+v[1]+O*F[1]},{...l,entriesUnsorted:p,entriesSorted:b})}createOperationFromEntries(s,l){return l.length===1?l[0].operation:s.createJoin(l.map(d=>d.operation),!0)}};return G_.ActorRdfJoinMultiBindSource=u,G_}var DM;function qz(){return DM||(DM=1,(function(i){var r=es&&es.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=es&&es.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Iz(),i)})(es)),es}var ts={},X_={},PM;function Lz(){if(PM)return X_;PM=1,Object.defineProperty(X_,"__esModule",{value:!0}),X_.ActorOptimizeQueryOperationJoinConnected=void 0;const i=Fr(),r=Fe(),o=pe(),n=Ve();let t=class jg extends i.ActorOptimizeQueryOperation{async test(a){return(0,o.passTestVoid)()}async run(a){const u=a.context.getSafe(r.KeysInitQuery.dataFactory),c=new n.Factory(u);return{operation:n.Util.mapOperation(a.operation,{join(l,d){return{recurse:!1,result:jg.cluster(l,d)}}},c),context:a.context}}static cluster(a,u){const c=a.input.map(f=>({inScopeVariables:Object.fromEntries(n.Util.inScopeVariables(f).map(h=>[h.value,!0])),entries:[f]}));let s,l=c;do s=l,l=jg.clusterIteration(s);while(s.length!==l.length);const d=l.map(f=>f.entries.length===1?f.entries[0]:u.createJoin(f.entries));return d.length===1?d[0]:u.createJoin(d,!1)}static clusterIteration(a){const u=[];for(const c of a){let s=!1;for(const l of u)if(jg.haveOverlappingVariables(c.inScopeVariables,l.inScopeVariables)){l.entries=[...l.entries,...c.entries],l.inScopeVariables={...l.inScopeVariables,...c.inScopeVariables},s=!0;break}s||u.push({inScopeVariables:c.inScopeVariables,entries:c.entries})}return u}static haveOverlappingVariables(a,u){for(const c of Object.keys(a))if(u[c])return!0;return!1}};return X_.ActorOptimizeQueryOperationJoinConnected=t,X_}var MM;function xz(){return MM||(MM=1,(function(i){var r=ts&&ts.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ts&&ts.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Lz(),i)})(ts)),ts}var rs={},z_={},NM;function Bz(){if(NM)return z_;NM=1,Object.defineProperty(z_,"__esModule",{value:!0}),z_.ActorOptimizeQueryOperationBgpToJoin=void 0;const i=Fr(),r=Fe(),o=pe(),n=Ve();let t=class extends i.ActorOptimizeQueryOperation{async test(a){return(0,o.passTestVoid)()}async run(a){const u=a.context.getSafe(r.KeysInitQuery.dataFactory),c=new n.Factory(u);return{operation:n.Util.mapOperation(a.operation,{bgp(l,d){return{recurse:!1,result:d.createJoin(l.patterns)}}},c),context:a.context}}};return z_.ActorOptimizeQueryOperationBgpToJoin=t,z_}var IM;function Cz(){return IM||(IM=1,(function(i){var r=rs&&rs.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=rs&&rs.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Bz(),i)})(rs)),rs}var ns={},H_={},qM;function Qz(){if(qM)return H_;qM=1,Object.defineProperty(H_,"__esModule",{value:!0}),H_.ActorOptimizeQueryOperationJoinBgp=void 0;const i=Fr(),r=Fe(),o=pe(),n=Ve();let t=class extends i.ActorOptimizeQueryOperation{async test(a){return(0,o.passTestVoid)()}async run(a){const u=a.context.getSafe(r.KeysInitQuery.dataFactory),c=new n.Factory(u);return{operation:n.Util.mapOperation(a.operation,{join(l,d){return l.input.every(f=>f.type==="bgp")?{recurse:!1,result:d.createBgp(l.input.flatMap(f=>f.patterns))}:{recurse:!1,result:l}}},c),context:a.context}}};return H_.ActorOptimizeQueryOperationJoinBgp=t,H_}var LM;function Uz(){return LM||(LM=1,(function(i){var r=ns&&ns.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=ns&&ns.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Qz(),i)})(ns)),ns}var is={},$_={},xM;function Vz(){if(xM)return $_;xM=1,Object.defineProperty($_,"__esModule",{value:!0}),$_.ActorOptimizeQueryOperationAssignSourcesExhaustive=void 0;const i=Fr(),r=JI(),o=Fe(),n=pe(),t=$e(),e=Ve();let a=class extends i.ActorOptimizeQueryOperation{constructor(c){super(c)}async test(c){return(0,n.passTestVoid)()}async run(c){const s=c.context.getSafe(o.KeysInitQuery.dataFactory),l=new e.Factory(s),d=c.context.get(o.KeysQueryOperation.querySources)??[];if(d.length===0)return{operation:c.operation,context:c.context};if(d.length===1){const f=d[0],h=c.context.get(o.KeysRdfUpdateQuads.destination);if(!h||f.source.referenceValue===(0,r.getDataDestinationValue)(h))try{const p=await f.source.getSelectorShape(c.context);if((0,t.doesShapeAcceptOperation)(p,c.operation))return{operation:(0,t.assignOperationSource)(c.operation,f),context:c.context}}catch{}}return{operation:this.assignExhaustive(l,c.operation,d),context:c.context.delete(o.KeysInitQuery.queryString)}}assignExhaustive(c,s,l){const d=this;return e.Util.mapOperation(s,{[e.Algebra.types.PATTERN](f,h){return l.length===1?{result:(0,t.assignOperationSource)(f,l[0]),recurse:!1}:{result:h.createUnion(l.map(p=>(0,t.assignOperationSource)(f,p))),recurse:!1}},[e.Algebra.types.LINK](f,h){return l.length===1?{result:(0,t.assignOperationSource)(f,l[0]),recurse:!1}:{result:h.createAlt(l.map(p=>(0,t.assignOperationSource)(f,p))),recurse:!1}},[e.Algebra.types.NPS](f,h){return l.length===1?{result:(0,t.assignOperationSource)(f,l[0]),recurse:!1}:{result:h.createAlt(l.map(p=>(0,t.assignOperationSource)(f,p))),recurse:!1}},[e.Algebra.types.SERVICE](f){return{result:f,recurse:!1}},[e.Algebra.types.CONSTRUCT](f,h){return{result:h.createConstruct(d.assignExhaustive(c,f.input,l),f.template),recurse:!1}},[e.Algebra.types.DELETE_INSERT](f,h){return{result:h.createDeleteInsert(f.delete,f.insert,f.where?d.assignExhaustive(c,f.where,l):void 0),recurse:!1}}},c)}};return $_.ActorOptimizeQueryOperationAssignSourcesExhaustive=a,$_}var BM;function Gz(){return BM||(BM=1,(function(i){var r=is&&is.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=is&&is.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Vz(),i)})(is)),is}var as={},J_={},CM;function Xz(){if(CM)return J_;CM=1,Object.defineProperty(J_,"__esModule",{value:!0}),J_.ActorOptimizeQueryOperationDescribeToConstructsSubject=void 0;const i=Fr(),r=Fe(),o=pe(),n=Ve();let t=class extends i.ActorOptimizeQueryOperation{constructor(a){super(a)}async test(a){return a.operation.type!==n.Algebra.types.DESCRIBE?(0,o.failTest)(`Actor ${this.name} only supports describe operations, but got ${a.operation.type}`):(0,o.passTest)(!0)}async run(a){const u=a.context.getSafe(r.KeysInitQuery.dataFactory),c=new n.Factory(u),s=a.operation,l=s.terms.filter(f=>f.termType!=="Variable").map(f=>{const h=[u.quad(f,u.variable("__predicate"),u.variable("__object"))];return h.forEach(y=>y.type="pattern"),{input:{type:n.Algebra.types.BGP,patterns:h},template:h,type:"construct"}});if(l.length!==s.terms.length){let f=[];s.terms.filter(h=>h.termType==="Variable").forEach((h,p)=>{const y=[u.quad(h,u.variable(`__predicate${p}`),u.variable(`__object${p}`))];y.forEach(b=>b.type="pattern"),f=[...f,...y]}),l.push({input:{type:n.Algebra.types.JOIN,input:[s.input,{type:n.Algebra.types.BGP,patterns:f}]},template:f,type:n.Algebra.types.CONSTRUCT})}return{operation:c.createUnion(l,!1),context:a.context}}};return J_.ActorOptimizeQueryOperationDescribeToConstructsSubject=t,J_}var QM;function zz(){return QM||(QM=1,(function(i){var r=as&&as.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=as&&as.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o(Xz(),i)})(as)),as}var V1,UM;function Hz(){return UM||(UM=1,V1=function(i){const r=new(Tx()).LoggerVoid,o=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/^4.0.0/components/ActorInit.jsonld#ActorInit_default_bus"}),n=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/^4.0.0/components/ActorContextPreprocess.jsonld#ActorContextPreprocess_default_bus"}),t=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-bindings/^4.0.0/components/ActorHashBindings.jsonld#ActorHashBindings_default_bus"}),e=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-quads/^4.0.0/components/ActorHashQuads.jsonld#ActorHashQuads_default_bus"}),a=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/^4.0.0/components/ActorOptimizeQueryOperation.jsonld#ActorOptimizeQueryOperation_default_bus"}),u=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-entries-sort/^4.0.0/components/ActorRdfJoinEntriesSort.jsonld#ActorRdfJoinEntriesSort_default_bus"}),c=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-selectivity/^4.0.0/components/ActorRdfJoinSelectivity.jsonld#ActorRdfJoinSelectivity_default_bus"}),s=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-accumulate/^4.0.0/components/ActorRdfMetadataAccumulate.jsonld#ActorRdfMetadataAccumulate_default_bus"}),l=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-quads/^4.0.0/components/ActorRdfUpdateQuads.jsonld#ActorRdfUpdateQuads_default_bus"}),d=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-parse/^4.0.0/components/ActorQueryParse.jsonld#ActorQueryParse_default_bus"}),f=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-bindings-aggregator-factory/^4.0.0/components/ActorBindingsAggregatorFactory.jsonld#ActorBindingsAggregatorFactory_default_bus"}),h=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-expression-evaluator-factory/^4.0.0/components/ActorExpressionEvaluatorFactory.jsonld#ActorExpressionEvaluatorFactory_default_bus"}),p=new(k()).BusFunctionFactory({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-function-factory/^4.0.0/components/ActorFunctionFactory.jsonld#ActorFunctionFactory_default_bus"}),y=new(dt()).BusQueryOperation({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/^4.0.0/components/ActorQueryOperation.jsonld#ActorQueryOperation_default_bus"}),b=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/^4.0.0/components/ActorRdfJoin.jsonld#ActorRdfJoin_default_bus"}),v=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-process/^4.0.0/components/ActorQueryProcess.jsonld#ActorQueryProcess_default_bus"}),F=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify/^4.0.0/components/ActorQuerySourceIdentify.jsonld#ActorQuerySourceIdentify_default_bus"}),T=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-term-comparator-factory/^4.0.0/components/ActorTermComparatorFactory.jsonld#ActorTermComparatorFactory_default_bus"}),S=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/^4.0.0/components/ActorHttpInvalidate.jsonld#ActorHttpInvalidate_default_bus"}),j=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-result-serialize/^4.0.0/components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus"}),E=new(pe()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-merge-bindings-context/^4.0.0/components/ActorMergeBindingsContext.jsonld#ActorMergeBindingsContext_default_bus"});new(u7()).ActorContextPreprocessConvertShortcuts({contextKeyShortcuts:{baseIRI:"@comunica/actor-init-query:baseIRI",dataFactory:"@comunica/actor-init-query:dataFactory",datetime:"@comunica/actor-http-memento:datetime",destination:"@comunica/bus-rdf-update-quads:destination",distinctConstruct:"@comunica/actor-init-query:distinctConstruct",explain:"@comunica/actor-init-query:explain",extensionFunctionCreator:"@comunica/actor-init-query:extensionFunctionCreator",extensionFunctions:"@comunica/actor-init-query:extensionFunctions",extensionFunctionsAlwaysPushdown:"@comunica/actor-init-query:extensionFunctionsAlwaysPushdown",fetch:"@comunica/bus-http:fetch",fileBaseIRI:"@comunica/actor-init-query:fileBaseIRI",functionArgumentsCache:"@comunica/actor-init-query:functionArgumentsCache",httpAuth:"@comunica/bus-http:auth",httpBodyTimeout:"@comunica/bus-http:http-body-timeout",httpIncludeCredentials:"@comunica/bus-http:include-credentials",httpProxyHandler:"@comunica/actor-http-proxy:httpProxyHandler",httpRetryCount:"@comunica/bus-http:http-retry-count",httpRetryDelayFallback:"@comunica/bus-http:http-retry-delay-fallback",httpRetryDelayLimit:"@comunica/bus-http:http-retry-delay-limit",httpTimeout:"@comunica/bus-http:http-timeout",initialBindings:"@comunica/actor-init-query:initialBindings",invalidateCache:"@comunica/actor-init-query:invalidateCache",lenient:"@comunica/actor-init-query:lenient",log:"@comunica/core:log",queryFormat:"@comunica/actor-init-query:queryFormat",queryTimestamp:"@comunica/actor-init-query:queryTimestamp",queryTimestampHighResolution:"@comunica/actor-init-query:queryTimestampHighResolution",readOnly:"@comunica/bus-query-operation:readOnly",recoverBrokenLinks:"@comunica/bus-http-wayback:recover-broken-links",sources:"@comunica/actor-init-query:querySourcesUnidentified",traverse:"@comunica/bus-query-source-identify:traverse",unionDefaultGraph:"@comunica/bus-query-operation:unionDefaultGraph"},name:"urn:comunica:default:context-preprocess/actors#convert-shortcuts",bus:n,busFailMessage:"Context preprocessing failed"}),new(d7()).ActorContextPreprocessSetDefaults({logger:r,name:"urn:comunica:default:context-preprocess/actors#set-defaults",bus:n,busFailMessage:"Context preprocessing failed"}),new(p7()).ActorContextPreprocessSourceToDestination({name:"urn:comunica:default:context-preprocess/actors#source-to-destination",bus:n,busFailMessage:"Context preprocessing failed"});const U=new(LI()).ActorContextPreprocessQuerySourceSkolemize({name:"urn:comunica:default:context-preprocess/actors#query-source-skolemize",bus:n,busFailMessage:"Context preprocessing failed"}),K=new(H3()).MediatorCombinePipeline({name:"urn:comunica:default:context-preprocess/mediators#main",bus:n});new(D7()).ActorHashBindingsMurmur({name:"urn:comunica:default:hash-bindings/actors#murmur",bus:t,busFailMessage:"Failed to obtaining hash functions for bindings"});const _=new($r()).MediatorRace({name:"urn:comunica:default:hash-bindings/mediators#main",bus:t});new(q7()).ActorHashQuadsMurmur({name:"urn:comunica:default:hash-quads/actors#murmur",bus:e,busFailMessage:"Failed to obtaining hash functions for quads"}),new(B7()).ActorOptimizeQueryOperationRewriteCopy({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-copy",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(Q7()).ActorOptimizeQueryOperationRewriteMove({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-move",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(X7()).ActorOptimizeQueryOperationRewriteAdd({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-add",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const O=new(k7()).ActorOptimizeQueryOperationGroupSources({name:"urn:comunica:default:optimize-query-operation/actors#group-sources",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});new(t8()).ActorOptimizeQueryOperationConstructDistinct({name:"urn:comunica:default:optimize-query-operation/actors#construct-distinct",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const P=new(H3()).MediatorCombinePipeline({filterFailures:!0,name:"urn:comunica:default:optimize-query-operation/mediators#main",bus:a});new(a8()).ActorRdfJoinEntriesSortCardinality({name:"urn:comunica:default:rdf-join-entries-sort/actors#cardinality",bus:u,busFailMessage:"Sorting join entries failed: none of the configured actors were able to sort"});const R=new(m1()).MediatorNumber({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-entries-sort/mediators#main",bus:u});new(l8()).ActorRdfJoinSelectivityVariableCounting({name:"urn:comunica:default:rdf-join-selectivity/actors#variable-counting",bus:c,busFailMessage:"Determining join selectivity failed: none of the configured actors were able to calculate selectivities"});const I=new(m1()).MediatorNumber({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-selectivity/mediators#main",bus:c});new(p8()).ActorRdfMetadataAccumulateCardinality({name:"urn:comunica:default:rdf-metadata-accumulate/actors#cardinality",bus:s,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(y8()).ActorRdfMetadataAccumulatePageSize({name:"urn:comunica:default:rdf-metadata-accumulate/actors#pagesize",bus:s,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(m8()).ActorRdfMetadataAccumulateRequestTime({name:"urn:comunica:default:rdf-metadata-accumulate/actors#requesttime",bus:s,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"});const C=new(ig()).MediatorCombineUnion({field:"metadata",name:"urn:comunica:default:rdf-metadata-accumulate/mediators#main",bus:s});new(A8()).ActorRdfUpdateQuadsRdfJsStore({name:"urn:comunica:default:rdf-update-quads/actors#rdfjs-store",bus:l,busFailMessage:"RDF updating failed: none of the configured actors were able to handle an update"});const Y=new($r()).MediatorRace({name:"urn:comunica:default:rdf-update-quads/mediators#main",bus:l});new(R8()).ActorQueryParseSparql({prefixes:{dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",skos:"http://www.w3.org/2008/05/skos#",xsd:"http://www.w3.org/2001/XMLSchema#"},name:"urn:comunica:default:query-parse/actors#sparql",bus:d,busFailMessage:'Query parsing failed: none of the configured parsers were able to the query "${action.query}"'});const H=new($r()).MediatorRace({name:"urn:comunica:default:query-parse/mediators#main",bus:d}),Z=new($r()).MediatorRace({name:"urn:comunica:default:bindings-aggregator-factory/mediators#main",bus:f}),le=new($r()).MediatorRace({name:"urn:comunica:default:expression-evaluator-factory/mediators#main",bus:h});new(M8()).ActorFunctionFactoryExpressionBnode({name:"urn:comunica:default:function-factory/actors#expression-function-bnode",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(q8()).ActorFunctionFactoryExpressionCoalesce({name:"urn:comunica:default:function-factory/actors#expression-function-coalesce",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(B8()).ActorFunctionFactoryExpressionBound({name:"urn:comunica:default:function-factory/actors#expression-function-bound",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(G8()).ActorFunctionFactoryExpressionExtensions({name:"urn:comunica:default:function-factory/actors#expression-function-extensions",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(H8()).ActorFunctionFactoryExpressionConcat({name:"urn:comunica:default:function-factory/actors#expression-function-concat",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(K8()).ActorFunctionFactoryExpressionIf({name:"urn:comunica:default:function-factory/actors#expression-function-if",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Z8()).ActorFunctionFactoryExpressionLogicalAnd({name:"urn:comunica:default:function-factory/actors#expression-function-logical-and",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(tB()).ActorFunctionFactoryExpressionLogicalOr({name:"urn:comunica:default:function-factory/actors#expression-function-logical-or",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(iB()).ActorFunctionFactoryExpressionSameTerm({name:"urn:comunica:default:function-factory/actors#expression-function-same-term",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(uB()).ActorFunctionFactoryTermAbs({name:"urn:comunica:default:function-factory/actors#term-function-abs",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(dB()).ActorFunctionFactoryTermAddition({name:"urn:comunica:default:function-factory/actors#term-function-addition",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(hB()).ActorFunctionFactoryTermCeil({name:"urn:comunica:default:function-factory/actors#term-function-ceil",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(mB()).ActorFunctionFactoryTermContains({name:"urn:comunica:default:function-factory/actors#term-function-contains",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(vB()).ActorFunctionFactoryTermDatatype({name:"urn:comunica:default:function-factory/actors#term-function-datatype",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(SB()).ActorFunctionFactoryTermDay({name:"urn:comunica:default:function-factory/actors#term-function-day",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(wB()).ActorFunctionFactoryTermEncodeForUri({name:"urn:comunica:default:function-factory/actors#term-function-encode-for-uri",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(RB()).ActorFunctionFactoryTermDivision({name:"urn:comunica:default:function-factory/actors#term-function-division",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(MB()).ActorFunctionFactoryTermEquality({name:"urn:comunica:default:function-factory/actors#term-function-equality",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(qB()).ActorFunctionFactoryTermFloor({name:"urn:comunica:default:function-factory/actors#term-function-floor",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(BB()).ActorFunctionFactoryTermHours({name:"urn:comunica:default:function-factory/actors#term-function-hours",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(UB()).ActorFunctionFactoryTermIsIri({name:"urn:comunica:default:function-factory/actors#term-function-is-iri",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(XB()).ActorFunctionFactoryTermIsBlank({name:"urn:comunica:default:function-factory/actors#term-function-is-blank",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new($B()).ActorFunctionFactoryTermIsLiteral({name:"urn:comunica:default:function-factory/actors#term-function-is-literal",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(YB()).ActorFunctionFactoryTermIri({name:"urn:comunica:default:function-factory/actors#term-function-iri",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(kB()).ActorFunctionFactoryTermIsNumeric({name:"urn:comunica:default:function-factory/actors#term-function-is-numeric",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rC()).ActorFunctionFactoryTermLang({name:"urn:comunica:default:function-factory/actors#term-function-lang",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(aC()).ActorFunctionFactoryTermIsTriple({name:"urn:comunica:default:function-factory/actors#term-function-is-triple",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(sC()).ActorFunctionFactoryTermLangmatches({name:"urn:comunica:default:function-factory/actors#term-function-langmatches",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(dC()).ActorFunctionFactoryTermMinutes({name:"urn:comunica:default:function-factory/actors#term-function-minutes",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(hC()).ActorFunctionFactoryTermLcase({name:"urn:comunica:default:function-factory/actors#term-function-lcase",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(gC()).ActorFunctionFactoryTermMd5({name:"urn:comunica:default:function-factory/actors#term-function-md5",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(TC()).ActorFunctionFactoryTermMonth({name:"urn:comunica:default:function-factory/actors#term-function-month",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(FC()).ActorFunctionFactoryTermNot({name:"urn:comunica:default:function-factory/actors#term-function-not",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(EC()).ActorFunctionFactoryTermMultiplication({name:"urn:comunica:default:function-factory/actors#term-function-multiplication",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(DC()).ActorFunctionFactoryTermNow({name:"urn:comunica:default:function-factory/actors#term-function-now",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(NC()).ActorFunctionFactoryTermObject({name:"urn:comunica:default:function-factory/actors#term-function-object",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(LC()).ActorFunctionFactoryTermPredicate({name:"urn:comunica:default:function-factory/actors#term-function-predicate",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(CC()).ActorFunctionFactoryTermRand({name:"urn:comunica:default:function-factory/actors#term-function-rand",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(GC()).ActorFunctionFactoryTermReplace({name:"urn:comunica:default:function-factory/actors#term-function-replace",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(HC()).ActorFunctionFactoryTermRound({name:"urn:comunica:default:function-factory/actors#term-function-round",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(t5()).ActorFunctionFactoryTermRegex({name:"urn:comunica:default:function-factory/actors#term-function-regex",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rQ()).ActorFunctionFactoryTermSha1({name:"urn:comunica:default:function-factory/actors#term-function-sha1",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(aQ()).ActorFunctionFactoryTermSeconds({name:"urn:comunica:default:function-factory/actors#term-function-seconds",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(sQ()).ActorFunctionFactoryTermSha256({name:"urn:comunica:default:function-factory/actors#term-function-sha256",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(dQ()).ActorFunctionFactoryTermSha384({name:"urn:comunica:default:function-factory/actors#term-function-sha384",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(hQ()).ActorFunctionFactoryTermSha512({name:"urn:comunica:default:function-factory/actors#term-function-sha512",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(mQ()).ActorFunctionFactoryTermStrAfter({name:"urn:comunica:default:function-factory/actors#term-function-str-after",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(vQ()).ActorFunctionFactoryTermStrBefore({name:"urn:comunica:default:function-factory/actors#term-function-str-before",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(SQ()).ActorFunctionFactoryTermStrDt({name:"urn:comunica:default:function-factory/actors#term-function-str-dt",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(wQ()).ActorFunctionFactoryTermStrEnds({name:"urn:comunica:default:function-factory/actors#term-function-str-ends",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(RQ()).ActorFunctionFactoryTermStrLang({name:"urn:comunica:default:function-factory/actors#term-function-str-lang",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(MQ()).ActorFunctionFactoryTermStrLen({name:"urn:comunica:default:function-factory/actors#term-function-str-len",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(qQ()).ActorFunctionFactoryTermStrStarts({name:"urn:comunica:default:function-factory/actors#term-function-str-starts",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(BQ()).ActorFunctionFactoryTermStr({name:"urn:comunica:default:function-factory/actors#term-function-str",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(eU()).ActorFunctionFactoryTermStrUuid({name:"urn:comunica:default:function-factory/actors#term-function-str-uuid",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(nU()).ActorFunctionFactoryTermSubStr({name:"urn:comunica:default:function-factory/actors#term-function-sub-str",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(oU()).ActorFunctionFactoryTermTimezone({name:"urn:comunica:default:function-factory/actors#term-function-timezone",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cU()).ActorFunctionFactoryTermSubtraction({name:"urn:comunica:default:function-factory/actors#term-function-subtraction",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(fU()).ActorFunctionFactoryTermSubject({name:"urn:comunica:default:function-factory/actors#term-function-subject",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(yU()).ActorFunctionFactoryTermTz({name:"urn:comunica:default:function-factory/actors#term-function-tz",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(gU()).ActorFunctionFactoryTermUnaryMinus({name:"urn:comunica:default:function-factory/actors#term-function-unary-minus",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(TU()).ActorFunctionFactoryTermUnaryPlus({name:"urn:comunica:default:function-factory/actors#term-function-unary-plus",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(FU()).ActorFunctionFactoryTermTriple({name:"urn:comunica:default:function-factory/actors#term-function-triple",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(EU()).ActorFunctionFactoryTermUcase({name:"urn:comunica:default:function-factory/actors#term-function-ucase",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(DU()).ActorFunctionFactoryTermUuid({name:"urn:comunica:default:function-factory/actors#term-function-uuid",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(NU()).ActorFunctionFactoryTermXsdToBoolean({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-boolean",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(LU()).ActorFunctionFactoryTermXsdToDate({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-date",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(CU()).ActorFunctionFactoryTermXsdToDecimal({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-decimal",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(VU()).ActorFunctionFactoryTermXsdToDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-duration",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(zU()).ActorFunctionFactoryTermXsdToDayTimeDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-day-time-duration",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(JU()).ActorFunctionFactoryTermXsdToDouble({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-double",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(WU()).ActorFunctionFactoryTermXsdToFloat({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-float",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(eV()).ActorFunctionFactoryTermXsdToDatetime({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-datetime",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(nV()).ActorFunctionFactoryTermXsdToInteger({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-integer",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(oV()).ActorFunctionFactoryTermXsdToString({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-string",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cV()).ActorFunctionFactoryTermXsdToYearMonthDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-year-month-duration",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(fV()).ActorFunctionFactoryTermXsdToTime({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-time",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(yV()).ActorFunctionFactoryTermYear({name:"urn:comunica:default:function-factory/actors#term-function-year",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"});const ce=new($r()).MediatorRace({name:"urn:comunica:default:function-factory/mediators#main",bus:p});new(mV()).ActorQueryOperationSource({name:"urn:comunica:default:query-operation/actors#source",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const ee=new(m1()).MediatorNumber({field:"httpRequests",type:"min",ignoreFailures:!0,name:"urn:comunica:default:query-operation/mediators#main",bus:y}),Ae=new(bV()).MediatorJoinCoefficientsFixed({cpuWeight:10,memoryWeight:1,timeWeight:2,ioWeight:10,name:"urn:comunica:default:rdf-join/mediators#main",bus:b}),Ee=new($r()).MediatorRace({name:"urn:comunica:default:query-process/mediators#main",bus:v}),ue=new($r()).MediatorRace({name:"urn:comunica:default:query-source-identify/mediators#main",bus:F}),oe=new($r()).MediatorRace({name:"urn:comunica:default:term-comparator-factory/mediators#main",bus:T}),Re=new(MR()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-context-preprocess-query-source-identify/^4.0.0/components/ActorContextPreprocessQuerySourceIdentify.jsonld#IActorContextPreprocessQuerySourceIdentifyArgs_default_invalidator",bus:S,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),Se=new(OV()).MediatorAll({name:"urn:comunica:default:http-invalidate/mediators#main",bus:S}),Pe=new(MR()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-operation-service/^4.0.0/components/ActorQueryOperationService.jsonld#IActorQueryOperationServiceArgs_default_invalidator",bus:S,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),we=new($r()).MediatorRace({name:"urn:comunica:default:query-result-serialize/mediators#serialize",bus:j}),Ie=new(ig()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:query-result-serialize/mediators#mediaType",bus:j}),N=new(ig()).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:query-result-serialize/mediators#mediaTypeFormat",bus:j}),m=new(ig()).MediatorCombineUnion({field:"mergeHandlers",name:"urn:comunica:default:merge-bindings-context/mediators#main",bus:E});new(RV()).ActorRdfJoinSingle({mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-single",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(PV()).ActorRdfJoinMultiEmpty({mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-multi-empty",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});const A=new(iD()).ActorRdfJoinHash({mediatorHashBindings:_,canHandleUndefs:!1,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-hash-def",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),g=new(iD()).ActorRdfJoinHash({mediatorHashBindings:_,canHandleUndefs:!0,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-hash-undef",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),w=new(VV()).ActorRdfJoinSymmetricHash({mediatorHashBindings:_,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-symmetric-hash",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),D=new(XV()).ActorRdfJoinNestedLoop({mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-nested-loop",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(yD()).ActorRdfJoinMinusHash({canHandleUndefs:!1,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#minus-hash-def",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(yD()).ActorRdfJoinMinusHash({canHandleUndefs:!0,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#minus-hash-undef",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(vg()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!1,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-nonblocking",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(vg()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!0,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-blocking",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(vg()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!1,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-nonblocking",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(vg()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!0,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-blocking",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(KV()).ActorRdfJoinOptionalNestedLoop({mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#optional-nested-loop",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(kV()).ActorBindingsAggregatorFactoryCount({mediatorExpressionEvaluatorFactory:le,name:"urn:comunica:default:bindings-aggregator-factory/actors#count",bus:f,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(tG()).ActorBindingsAggregatorFactoryGroupConcat({mediatorExpressionEvaluatorFactory:le,name:"urn:comunica:default:bindings-aggregator-factory/actors#group-concat",bus:f,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(nG()).ActorBindingsAggregatorFactorySample({mediatorExpressionEvaluatorFactory:le,name:"urn:comunica:default:bindings-aggregator-factory/actors#sample",bus:f,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(aG()).ActorBindingsAggregatorFactoryWildcardCount({mediatorExpressionEvaluatorFactory:le,name:"urn:comunica:default:bindings-aggregator-factory/actors#wildcard-count",bus:f,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(uG()).ActorBindingsAggregatorFactoryAverage({mediatorFunctionFactory:ce,mediatorExpressionEvaluatorFactory:le,name:"urn:comunica:default:bindings-aggregator-factory/actors#average",bus:f,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(cG()).ActorBindingsAggregatorFactorySum({mediatorFunctionFactory:ce,mediatorExpressionEvaluatorFactory:le,name:"urn:comunica:default:bindings-aggregator-factory/actors#sum",bus:f,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(fG()).ActorFunctionFactoryExpressionIn({mediatorFunctionFactory:ce,name:"urn:comunica:default:function-factory/actors#expression-function-in",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(yG()).ActorFunctionFactoryExpressionNotIn({mediatorFunctionFactory:ce,name:"urn:comunica:default:function-factory/actors#expression-function-not-in",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(gG()).ActorFunctionFactoryTermGreaterThan({mediatorFunctionFactory:ce,name:"urn:comunica:default:function-factory/actors#term-function-greater-than",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(TG()).ActorFunctionFactoryTermGreaterThanEqual({mediatorFunctionFactory:ce,name:"urn:comunica:default:function-factory/actors#term-function-greater-than-equal",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(FG()).ActorFunctionFactoryTermInequality({mediatorFunctionFactory:ce,name:"urn:comunica:default:function-factory/actors#term-function-inequality",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(EG()).ActorFunctionFactoryTermLesserThan({mediatorFunctionFactory:ce,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(DG()).ActorFunctionFactoryTermLesserThanEqual({mediatorFunctionFactory:ce,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than-equal",bus:p,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(MG()).ActorQueryOperationAsk({mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#ask",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(IG()).ActorQueryOperationBgpJoin({mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#bgp",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(BG()).ActorQueryOperationDistinctIdentity({mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#distinct",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(QG()).ActorQueryOperationExtend({mediatorExpressionEvaluatorFactory:le,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#extend",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(VG()).ActorQueryOperationFilter({mediatorExpressionEvaluatorFactory:le,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#filter",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(T5()).ActorQueryOperationConstruct({mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#construct",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(zG()).ActorQueryOperationFromQuad({mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#from",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new($G()).ActorQueryOperationProject({mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#project",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(KG()).ActorQueryOperationReducedHash({mediatorHashBindings:_,cacheSize:100,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#reduced",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(WG()).ActorQueryOperationSlice({mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#slice",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(O5()).ActorQueryOperationUnion({mediatorRdfMetadataAccumulate:C,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#union",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(tX()).ActorQueryOperationPathAlt({mediatorRdfMetadataAccumulate:C,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#path-alt",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(nX()).ActorQueryOperationPathInv({mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#path-inv",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(aX()).ActorQueryOperationPathLink({mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#path-link",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(uX()).ActorQueryOperationPathNps({mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#path-nps",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(cX()).ActorQueryOperationUpdateCompositeUpdate({mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#update-composite",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(dX()).ActorQueryOperationClear({mediatorUpdateQuads:Y,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#update-clear",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(pX()).ActorQueryOperationCreate({mediatorUpdateQuads:Y,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#update-create",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(yX()).ActorQueryOperationDrop({mediatorUpdateQuads:Y,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#update-drop",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(bX()).ActorQueryOperationJoin({mediatorJoin:Ae,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#join",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(TX()).ActorQueryOperationMinus({mediatorJoin:Ae,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#minus",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(SX()).ActorQueryOperationLeftJoin({mediatorJoin:Ae,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#leftjoin",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(AX()).ActorQueryOperationPathSeq({mediatorJoin:Ae,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#path-seq",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const B=new(EX()).ActorRdfJoinMultiSmallest({mediatorJoinEntriesSort:R,mediatorJoin:Ae,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(RX()).ActorQueryOperationLoad({mediatorUpdateQuads:Y,mediatorQuerySourceIdentify:ue,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#update-load",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(PX()).ActorBindingsAggregatorFactoryMax({mediatorTermComparatorFactory:oe,mediatorExpressionEvaluatorFactory:le,name:"urn:comunica:default:bindings-aggregator-factory/actors#max",bus:f,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(NX()).ActorBindingsAggregatorFactoryMin({mediatorTermComparatorFactory:oe,mediatorExpressionEvaluatorFactory:le,name:"urn:comunica:default:bindings-aggregator-factory/actors#min",bus:f,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(LX()).ActorQueryOperationOrderBy({mediatorExpressionEvaluatorFactory:le,mediatorTermComparatorFactory:oe,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#orderby",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const q=new(BX()).ActorOptimizeQueryOperationFilterPushdown({aggressivePushdown:!1,maxIterations:10,splitConjunctive:!0,mergeConjunctive:!0,pushIntoLeftJoins:!0,pushEqualityIntoPatterns:!0,name:"urn:comunica:default:optimize-query-operation/actors#filter-pushdown",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[O]});new(QX()).ActorContextPreprocessQuerySourceIdentify({cacheSize:100,httpInvalidator:Re,mediatorQuerySourceIdentify:ue,mediatorContextPreprocess:K,name:"urn:comunica:default:context-preprocess/actors#query-source-identify",bus:n,busFailMessage:"Context preprocessing failed",beforeActors:[U]});const Q=new(KN()).ActorInitQuery({mediatorQueryProcess:Ee,mediatorQueryResultSerialize:we,mediatorQueryResultSerializeMediaTypeCombiner:Ie,mediatorQueryResultSerializeMediaTypeFormatCombiner:N,mediatorHttpInvalidate:Se,defaultQueryInputFormat:"sparql",allowNoSources:!1,name:"urn:comunica:default:init/actors#query",bus:o,busFailMessage:"Initialization failed: none of the configured actors were to initialize"});new(zX()).ActorExpressionEvaluatorFactoryDefault({mediatorQueryOperation:ee,mediatorFunctionFactory:ce,mediatorMergeBindingsContext:m,name:"urn:comunica:default:expression-evaluator-factory/actors#default",bus:h,busFailMessage:"Creation of Expression Evaluator failed"}),new(JX()).ActorQueryOperationGroup({mediatorMergeBindingsContext:m,mediatorBindingsAggregatorFactory:Z,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#group",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(YX()).ActorQueryOperationNop({mediatorMergeBindingsContext:m,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#nop",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(ZX()).ActorQueryOperationService({forceSparqlEndpoint:!1,mediatorMergeBindingsContext:m,mediatorQuerySourceIdentify:ue,httpInvalidator:Pe,cacheSize:32,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#service",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(ez()).ActorQueryOperationValues({mediatorMergeBindingsContext:m,name:"urn:comunica:default:query-operation/actors#values",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(rz()).ActorQueryOperationPathOneOrMore({mediatorMergeBindingsContext:m,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#path-one-or-more",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(iz()).ActorQueryOperationPathZeroOrMore({mediatorMergeBindingsContext:m,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#path-zero-or-more",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(oz()).ActorQueryOperationPathZeroOrOne({mediatorMergeBindingsContext:m,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#path-zero-or-one",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(sz()).ActorQueryOperationUpdateDeleteInsert({mediatorUpdateQuads:Y,mediatorMergeBindingsContext:m,mediatorQueryOperation:ee,name:"urn:comunica:default:query-operation/actors#update-delete-insert",bus:y,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(lz()).ActorRdfJoinNone({mediatorMergeBindingsContext:m,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-none",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(pz()).ActorRdfJoinOptionalBind({bindOrder:"depth-first",selectivityModifier:1e-6,mediatorQueryOperation:ee,mediatorMergeBindingsContext:m,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#optional-bind",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(mz()).ActorQueryProcessSequential({mediatorContextPreprocess:K,mediatorQueryParse:H,mediatorOptimizeQueryOperation:P,mediatorQueryOperation:ee,mediatorMergeBindingsContext:m,name:"urn:comunica:default:query-process/actors#sequential",bus:v,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),new(Oz()).ActorQuerySourceIdentifyRdfJs({mediatorMergeBindingsContext:m,name:"urn:comunica:default:query-source-identify/actors#rdfjs",bus:F,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}"}),new(Ez()).ActorTermComparatorFactoryExpressionEvaluator({mediatorQueryOperation:ee,mediatorFunctionFactory:ce,mediatorMergeBindingsContext:m,name:"urn:comunica:default:term-comparator-factory/actors#expression-evaluator",bus:T,busFailMessage:"Creation of term comparator failed"});const $=new(I5()).ActorRdfJoinMultiBind({bindOrder:"depth-first",selectivityModifier:1e-4,minMaxCardinalityRatio:60,mediatorJoinEntriesSort:R,mediatorQueryOperation:ee,mediatorMergeBindingsContext:m,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[B,A,g,w,D]});new(Rz()).ActorRdfJoinMultiSmallestFilterBindings({selectivityModifier:1e-4,blockSize:64,mediatorJoinEntriesSort:R,mediatorJoin:Ae,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest-filter-bindings",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[B,A,g,w,D]});const X=new(Pz()).ActorOptimizeQueryOperationPruneEmptySourceOperations({useAskIfSupported:!1,name:"urn:comunica:default:optimize-query-operation/actors#prune-empty-source-operations",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[q]});new(Nz()).ActorOptimizeQueryOperationLeftjoinExpressionPushdown({name:"urn:comunica:default:optimize-query-operation/actors#leftjoin-expression-pushdown",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[q]}),new(qz()).ActorRdfJoinMultiBindSource({selectivityModifier:1e-4,blockSize:16,mediatorJoinEntriesSort:R,mediatorJoinSelectivity:I,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind-source",bus:b,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[B,$,A,g,w,D]});const te=new(xz()).ActorOptimizeQueryOperationJoinConnected({name:"urn:comunica:default:optimize-query-operation/actors#join-connected",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[X]}),me=new(Cz()).ActorOptimizeQueryOperationBgpToJoin({name:"urn:comunica:default:optimize-query-operation/actors#bgp-to-join",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[te]}),_e=new(Uz()).ActorOptimizeQueryOperationJoinBgp({name:"urn:comunica:default:optimize-query-operation/actors#join-bgp",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[me]}),ge=new(Gz()).ActorOptimizeQueryOperationAssignSourcesExhaustive({name:"urn:comunica:default:optimize-query-operation/actors#assign-sources-exhaustive",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[_e]});return new(zz()).ActorOptimizeQueryOperationDescribeToConstructsSubject({name:"urn:comunica:default:optimize-query-operation/actors#describe-to-constructs-subject",bus:a,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[ge]}),Q}),V1}var VM;function $z(){if(VM)return mc;VM=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.QueryEngine=void 0;const i=KN(),r=Hz();let o=class extends i.QueryEngineBase{constructor(t=r()){super(t)}};return mc.QueryEngine=o,mc}var GM;function Jz(){return GM||(GM=1,(function(i){var r=Xn&&Xn.__createBinding||(Object.create?(function(n,t,e,a){a===void 0&&(a=e);var u=Object.getOwnPropertyDescriptor(t,e);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,a,u)}):(function(n,t,e,a){a===void 0&&(a=e),n[a]=t[e]})),o=Xn&&Xn.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&r(t,n,e)};Object.defineProperty(i,"__esModule",{value:!0}),o($z(),i)})(Xn)),Xn}var Kz=Jz(),Yz=At();function Wz(i){const r={};for(const[o,n]of[...i])r[o.value]=n;return r}async function x5({bindings:i,dataset:r,factory:o,query:n}){const t=new kz(r),e=new Kz.QueryEngine,u=new Yz.BindingsFactory(o).bindings(i);return(await e.queryBindings(n,{sources:[t],initialBindings:u})).toArray()}function Zz(i){return i?i.map(r=>{let o="";return r.start==="object"&&r.end==="subject"&&(o+="^"),o+=r.predicates.map(n=>`<${n.value}>`).join("|"),r.quantifier==="oneOrMore"?o+="+":r.quantifier==="zeroOrMore"?o+="*":r.quantifier==="zeroOrOne"&&(o+="?"),o}).join("/"):null}class kz{constructor(r){this.dataset=r}match(r,o,n,t){return nq.Readable.from(this.dataset.match(r,o,n,t))}}function B5(i,r=[]){for(const o of i.out([uq.imports]))B5(o,r);for(const o of i.out([re.declare])){const n=o.out([re.prefix]).value,t=o.out([re.namespace]).value;r.push(`PREFIX ${n}: <${t}>`)}return r}function eH(i){const r=i.sparql.out([re.select]).value,o=B5(i.sparql.out([re.prefixes])),n=Zz(i.path),t=i.sparql.out([re.message]).terms,e=[...o,r].filter(Boolean).join(`
`).split("$PATH").join(n);return{generic:tH({message:t,query:e,source:i.sparql.terms})}}function tH({message:i,query:r,source:o}){return async n=>{const t=n.focusNode.dataset,e=n.factory,a=[[e.variable("this"),n.focusNode.term]],u=await x5({bindings:a,dataset:t,factory:e,query:r});for(const c of u){const s=Wz(c),l=c.has("path")&&KM(n.focusNode.node([c.get("path")])),d=n.focusNode.node([c.get("value")||n.focusNode.term]);n.violation(re.SPARQLConstraintComponent,{args:s,message:i,path:l,source:o,value:d})}u.length===0&&n.debug(re.SPARQLConstraintComponent,{source:o})}}const rH=new Map([[re.sparql,eH]]);async function nH(i,r){const o=i.out([re.select]).value;if(!o)return[];const n=await x5({dataset:r.focusNode.dataset,factory:r.factory,query:o,bindings:[]}),t=r.factory.variable("this");return n.map(e=>e.get(t)).filter(Boolean)}const iH=new Map([[re.target,nH]]),sZ=Object.freeze(Object.defineProperty({__proto__:null,targetResolvers:iH,validations:rH},Symbol.toStringTag,{value:"Module"}));export{fH as i,sZ as s};
