const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/monaco-UW-p1FnM.js","assets/icons-aGWpIJCB.js"])))=>i.map(i=>d[i]);
import{j as e}from"./markdown-EAaoshMw.js";import{r as l,I as Ve,h as Q,i as se,T as re,j as $,k as te,l as Ae,m as je,n as ae,D as $e,o as He,W as _e,p as ge,X as Oe}from"./icons-aGWpIJCB.js";import{u as we,T as We}from"./textarea-BkjhQoFn.js";import{c as U,u as W,a as J,T as qe,b as Je,d as Ge,B as P,e as Qe,D as X,f as Y,g as Z,h as K,i as ye,_ as Xe,j as Ye,R as V}from"./index-B4Z4lxb3.js";import{C as ne,a as oe,b as ie,c as de,d as ce,e as Ze}from"./card-CCpSu4xC.js";import{B as le}from"./badge-B2QiZGLW.js";import{I as Ce}from"./input-Bw_aCG16.js";import{T as ue,a as me,b as L,c as H}from"./tabs-DHq8BoQZ.js";import"./index-B3x81FJ6.js";import"./ui-BCGuGXfu.js";import"./shacl-HWCcPdeY.js";const O=l.forwardRef(({className:d,...p},s)=>e.jsx("label",{ref:s,className:U("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",d),...p}));O.displayName="Label";const Ke=({selectedProfile:d,onProfileChange:p,disabled:s=!1})=>{const{t:u}=W(),w=J.profiles,f=(a,c)=>{const C=w[a]?.versions?.[c];return C?u(`profiles.names.${a}.${c}`,{defaultValue:C.name}):a},v=(a,c)=>u(`profiles.branches.${a}`,{defaultValue:c||a}),j=a=>{const c=w[a].defaultVersion,N=w[a].defaultBranch||"main";p({profile:a,version:c,branch:N,mode:"predefined"})},T=a=>{p({...d,version:a})},I=a=>{p({...d,branch:a})},y=w[d.profile],k=y?.versions[d.version],z=y?Object.keys(y.versions).sort().reverse():[],g=y?.branches||{},D=Object.keys(g).length>0,b=d.branch||y?.defaultBranch||"main",R=(a,c)=>e.jsxs(P,{variant:"outline",className:"h-12 justify-between gap-2 border-border/70",disabled:s,children:[e.jsxs("span",{className:"flex items-center gap-2 text-sm",children:[c&&e.jsx("img",{src:c,alt:"",className:"h-6 w-6"}),a]}),e.jsx("svg",{className:"h-4 w-4 text-muted-foreground",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:e.jsx("path",{d:"M6 8l4 4 4-4"})})]}),B=(a,c)=>e.jsxs(P,{variant:"outline",className:"h-12 justify-between gap-2 border-border/70",disabled:s||c,children:[e.jsx("span",{className:"text-sm font-medium",children:a}),e.jsx("svg",{className:"h-4 w-4 text-muted-foreground",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:e.jsx("path",{d:"M6 8l4 4 4-4"})})]});return e.jsxs(ne,{className:"border border-border/70 bg-card",children:[e.jsxs(oe,{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx(ie,{className:"text-base",children:u("validator.selectProfile")}),e.jsx(de,{children:u("validator.workspaceSubtitle")})]}),k&&e.jsx(qe,{children:e.jsxs(Je,{children:[e.jsx(Ge,{asChild:!0,children:e.jsx(P,{variant:"ghost",size:"icon",asChild:!0,"aria-label":u("validator.profileInfo")??"Profile documentation",children:e.jsx("a",{href:k.url,target:"_blank",rel:"noreferrer",className:"text-muted-foreground",children:e.jsx(Ve,{className:"h-5 w-5"})})})}),e.jsx(Qe,{children:u("validator.profileInfo")})]})})]}),e.jsxs(ce,{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(O,{children:u("validator.selectProfile")}),e.jsxs(X,{modal:!1,children:[e.jsx(Y,{asChild:!0,children:R(f(d.profile,d.version),k?.icon)}),e.jsx(Z,{className:"min-w-[260px]",children:Object.keys(w).map(a=>{const c=w[a],N=c.versions[c.defaultVersion];return e.jsxs(K,{onSelect:C=>{C.preventDefault(),j(a)},className:"flex items-center gap-3",children:[N.icon&&e.jsx("img",{src:N.icon,alt:"",className:"h-5 w-5"}),e.jsx("span",{children:f(a,c.defaultVersion)})]},a)})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(O,{children:u("validator.version")}),e.jsxs(X,{modal:!1,children:[e.jsx(Y,{asChild:!0,children:B(d.version,z.length<=1)}),e.jsx(Z,{children:z.map(a=>e.jsxs(K,{onSelect:c=>{c.preventDefault(),T(a)},className:"flex items-center justify-between",children:[e.jsx("span",{children:a}),d.version===a&&e.jsx(Q,{className:"h-4 w-4 text-primary","aria-hidden":"true"})]},a))})]})]}),D&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(O,{children:u("validator.branch")}),e.jsxs(X,{modal:!1,children:[e.jsx(Y,{asChild:!0,children:B(v(b,g[b]),!1)}),e.jsx(Z,{children:Object.entries(g).map(([a,c])=>e.jsxs(K,{onSelect:N=>{N.preventDefault(),I(a)},className:"flex items-center justify-between",children:[e.jsx("span",{children:v(a,c)}),b===a&&e.jsx(Q,{className:"h-4 w-4 text-primary","aria-hidden":"true"})]},a))})]})]})]}),e.jsxs(Ze,{className:"flex flex-wrap items-center justify-between gap-4 border-t border-border/60 bg-muted/30 px-6 py-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(le,{variant:"success",className:"uppercase tracking-tight",children:u("validator.currentProfile")}),e.jsx("span",{className:"text-xs text-muted-foreground/80",children:u("validator.profileReadyHint")})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-muted-foreground",children:[e.jsx(Q,{className:"h-4 w-4 text-emerald-500","aria-hidden":"true"}),e.jsxs("span",{className:"font-medium text-foreground",children:[u("validator.validatingAgainst"),": ",e.jsx("span",{className:"text-muted-foreground",children:f(d.profile,d.version)})]})]})]})]})},es=({shaclFiles:d,onChange:p})=>{const{t:s}=W(),[u,w]=l.useState("paste"),[f,v]=l.useState(""),[j,T]=l.useState(""),[I,y]=l.useState(null),[k,z]=l.useState(!1),g=()=>`shacl-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,D=l.useCallback(n=>{p([...d,n])},[d,p]),b=l.useCallback(n=>{p(d.filter(o=>o.id!==n))},[d,p]),R=()=>{if(!f.trim())return;const n={id:g(),content:f,source:"paste"};D(n),v("")},B=async()=>{if(j.trim()){z(!0),y(null);try{const n=await fetch(j);if(!n.ok)throw new Error(`HTTP ${n.status}`);const o=await n.text(),M={id:g(),content:o,source:"url",url:j};D(M),T("")}catch(n){y(s("validator.urlError")),console.error("Failed to load SHACL from URL:",n)}finally{z(!1)}}},a=l.useCallback(async n=>{for(const o of n)try{const M=await o.text(),F={id:g(),content:M,source:"upload"};D(F)}catch(M){console.error(`Failed to read file ${o.name}:`,M)}},[D]),{getRootProps:c,getInputProps:N,isDragActive:C}=we({onDrop:a,accept:{"text/turtle":[".ttl",".shacl"],"application/rdf+xml":[".rdf",".xml"],"application/ld+json":[".jsonld"]},multiple:!0});return e.jsxs(ne,{className:"border-dashed border-2 border-primary/30",children:[e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),s("profiles.manager.title")]}),e.jsx(de,{children:s("profiles.manager.description")})]}),d.length>0&&e.jsxs(le,{variant:"outline",children:[d.length," ",s("profiles.manager.filesLoaded")]})]})}),e.jsxs(ce,{className:"space-y-4",children:[d.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:s("profiles.manager.loadedFiles")}),e.jsx("div",{className:"space-y-2",children:d.map((n,o)=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border bg-muted/30 p-3",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx(se,{className:"h-4 w-4 text-muted-foreground shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium",children:[s("profiles.manager.file")," #",o+1,n.url&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(",new URL(n.url).hostname,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsxs(le,{variant:"outline",className:"text-xs",children:[n.source==="paste"&&e.jsx(re,{className:"h-3 w-3 mr-1"}),n.source==="upload"&&e.jsx($,{className:"h-3 w-3 mr-1"}),n.source==="url"&&e.jsx(te,{className:"h-3 w-3 mr-1"}),s(`profiles.manager.source.${n.source}`)]}),e.jsxs("span",{children:[(n.content.length/1024).toFixed(1)," KB"]})]})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>b(n.id),className:"shrink-0",children:e.jsx(Ae,{className:"h-4 w-4"})})]},n.id))})]}),e.jsxs(ue,{value:u,onValueChange:n=>w(n),className:"w-full",children:[e.jsxs(me,{className:"grid w-full grid-cols-3",children:[e.jsxs(L,{value:"paste",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),s("profiles.manager.tabs.paste")]}),e.jsxs(L,{value:"upload",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),s("profiles.manager.tabs.upload")]}),e.jsxs(L,{value:"url",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),s("profiles.manager.tabs.url")]})]}),e.jsxs(H,{value:"paste",className:"space-y-3 mt-4",children:[e.jsx(We,{placeholder:s("profiles.manager.pastePlaceholder"),value:f,onChange:n=>v(n.target.value),className:"min-h-[200px] font-mono text-sm"}),e.jsxs(P,{onClick:R,disabled:!f.trim(),className:"w-full",children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),s("profiles.manager.addFile")]})]}),e.jsx(H,{value:"upload",className:"mt-4",children:e.jsxs("div",{...c(),className:U("flex flex-col items-center justify-center rounded-lg border-2 border-dashed p-8 text-center transition-colors cursor-pointer",C?"border-primary bg-primary/5":"border-border hover:border-primary/50 hover:bg-muted/30"),children:[e.jsx("input",{...N()}),e.jsx($,{className:U("h-12 w-12 mb-4",C?"text-primary":"text-muted-foreground")}),e.jsx("p",{className:"text-sm font-medium",children:s(C?"profiles.manager.dropActive":"profiles.manager.dropInactive")}),e.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:s("profiles.manager.dropHint")})]})}),e.jsxs(H,{value:"url",className:"space-y-3 mt-4",children:[e.jsx(Ce,{placeholder:s("profiles.manager.urlPlaceholder"),value:j,onChange:n=>{T(n.target.value),y(null)}}),I&&e.jsxs("div",{className:"flex items-start gap-2 rounded-lg border border-yellow-200 bg-yellow-50 p-3 text-sm text-yellow-800 dark:border-yellow-900 dark:bg-yellow-950 dark:text-yellow-200",children:[e.jsx(ae,{className:"h-4 w-4 mt-0.5 shrink-0"}),e.jsx("p",{children:I})]}),e.jsx(P,{onClick:B,disabled:!j.trim()||k,className:"w-full",children:k?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),s("common.loading")]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"h-4 w-4 mr-2"}),s("profiles.manager.loadUrl")]})})]})]})]})]})},ss=({mode:d,onChange:p,disabled:s=!1})=>{const{t:u}=W();return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(O,{children:u("validator.validationMode")}),e.jsxs("div",{className:"inline-flex items-center rounded-lg border border-border bg-muted/30 p-1",children:[e.jsxs("button",{onClick:()=>p("predefined"),disabled:s,className:U("inline-flex items-center justify-center gap-2 rounded-md px-4 py-2 text-sm font-medium transition-all","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",d==="predefined"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[e.jsx($e,{className:"h-4 w-4"}),u("validator.mode.predefined")]}),e.jsxs("button",{onClick:()=>p("custom"),disabled:s,className:U("inline-flex items-center justify-center gap-2 rounded-md px-4 py-2 text-sm font-medium transition-all","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",d==="custom"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[e.jsx(He,{className:"h-4 w-4"}),u("validator.mode.custom")]})]})]})},ke=l.forwardRef(({className:d,value:p=0,...s},u)=>e.jsx("div",{ref:u,className:U("relative h-2 w-full overflow-hidden rounded-full bg-muted",d),...s,children:e.jsx("div",{className:"h-full w-full flex-1 rounded-full bg-gradient-to-r from-primary to-accent transition-all",style:{transform:`translateX(-${100-Math.min(100,Math.max(0,p))}%)`}})}));ke.displayName="Progress";function ve({className:d,...p}){return e.jsx("div",{className:U("animate-pulse rounded-md bg-muted/60",d),...p})}const be=_e.lazy(()=>Xe(()=>import("./monaco-UW-p1FnM.js"),__vite__mapDeps([0,1]))),rs=({value:d,onChange:p,normalizedContent:s,jsonPreview:u})=>{const[w,f]=l.useState("json"),{t:v}=W(),{theme:j}=ye(),I=j==="dark"?"vs-dark":"vs-light",y="flex min-h-[57px] items-center justify-between border-b border-border px-4 py-2";return e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-2xl border border-border bg-card/70",children:[e.jsx("div",{className:`${y} text-xs uppercase tracking-wide text-muted-foreground`,children:v("validator.pasteText")}),e.jsx("div",{className:"h-[420px]",children:e.jsx(l.Suspense,{fallback:e.jsx(ve,{className:"h-full w-full rounded-none"}),children:e.jsx(be,{height:"100%",defaultLanguage:"turtle",theme:I,value:d,onChange:k=>p(k||""),options:{minimap:{enabled:!1},wordWrap:"on",fontSize:14,fontFamily:"JetBrains Mono",scrollBeyondLastLine:!1,automaticLayout:!0,renderLineHighlight:"none"}})})})]}),e.jsxs("div",{className:"rounded-2xl border border-border bg-card/70",children:[e.jsxs("div",{className:y,children:[e.jsx("span",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:v("validator.previewLabel")}),e.jsx(ue,{value:w,onValueChange:k=>f(k),children:e.jsxs(me,{className:"bg-transparent p-0",children:[e.jsx(L,{value:"json",className:"rounded-full px-3 py-1 text-xs",children:v("validator.jsonPreview")}),e.jsx(L,{value:"turtle",className:"rounded-full px-3 py-1 text-xs",children:v("validator.normalizedPreview")})]})})]}),e.jsx("div",{className:"h-[420px]",children:e.jsx(l.Suspense,{fallback:e.jsx(ve,{className:"h-full w-full rounded-none"}),children:e.jsx(be,{height:"100%",defaultLanguage:w==="json"?"json":"turtle",theme:I,value:w==="json"?u:s,options:{readOnly:!0,minimap:{enabled:!1},wordWrap:"on",fontSize:13,fontFamily:"JetBrains Mono",automaticLayout:!0,renderLineHighlight:"none"}})})})]})]})},Ne=256*1024,ee={datasets:0,dataServices:0,distributions:0,hasData:!1},ps=({onValidate:d,isLoading:p})=>{const{t:s}=W(),{setRdfStats:u}=ye(),[w]=Ye(),[f,v]=l.useState("paste"),[j,T]=l.useState(""),[I,y]=l.useState(""),[k,z]=l.useState(""),[g,D]=l.useState(""),[b,R]=l.useState(null),[B,a]=l.useState(null),[c,N]=l.useState({progress:0,isUploading:!1,error:null}),[C,n]=l.useState(null),[o,M]=l.useState({profile:"dcat_ap_es",version:"1.0.0",branch:"main",mode:"predefined"}),[F,Se]=l.useState([]),G=l.useRef(!1),[A,q]=l.useState(ee);l.useEffect(()=>{const r=w.get("sample");if(r){const h=J.profiles[o.profile]?.versions[o.version]?.samples?.[r];h&&(D(h),v("url"))}},[w,o]),l.useEffect(()=>{if(!j.trim()){y(""),z(""),q({...ee});return}let r=!1;return(async()=>{try{const m=V.detectFormat(j),x=await V.parseRDF(j,m);if(r)return;const h=await V.normalizeToTurtle(j,{format:m});if(r)return;y(h),z(JSON.stringify(Te(x),null,2));const i=xe(x);q({...i,hasData:!0})}catch(m){console.error("Preview error",m),q({...ee})}})(),()=>{r=!0}},[j]);const Te=r=>{const t={},m=r.getQuads(null,null,null,null);for(const x of m){const h=x.subject.value;t[h]||(t[h]={"@id":h});const i=x.predicate.value,E=x.object.termType==="Literal"?{"@value":x.object.value,"@type":x.object.datatype?.value,"@language":x.object.language||void 0}:{"@id":x.object.value};t[h][i]?t[h][i]=Array.isArray(t[h][i])?[...t[h][i],E]:[t[h][i],E]:t[h][i]=E}return Object.values(t)},xe=r=>{const t="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",m="http://www.w3.org/ns/dcat#Dataset",x="http://www.w3.org/ns/dcat#DataService",h="http://www.w3.org/ns/dcat#Distribution",i={datasets:new Set,dataServices:new Set,distributions:new Set},E=r.getQuads(null,null,null,null);for(const S of E){if(S.predicate.value!==t)continue;const _=S.subject.value;switch(S.object.value){case m:i.datasets.add(_);break;case x:i.dataServices.add(_);break;case h:i.distributions.add(_);break}}return{datasets:i.datasets.size,dataServices:i.dataServices.size,distributions:i.distributions.size}},De=async()=>{let r=j,t=null;const m={url:f==="url"?g:void 0,contentType:t||b?.contentType||null};if(f==="url"){if(!g.trim())return;try{const i=await fetch(g);if(!i.ok)throw new Error(`HTTP error ${i.status}`);t=i.headers.get("content-type"),m.contentType=t||b?.contentType||null,r=await i.text()}catch(i){console.error(i),a(s("validator.urlError"));return}}if(f==="upload"&&!j.trim())return;let x=null;try{if(x=V.detectFormat(r,m.url,m.contentType),x!=="text/turtle"&&x!=="turtle"){const i=await V.normalizeToTurtle(r,{format:x,url:f==="url"?g:void 0,contentType:t||b?.contentType||null});r=i,x="text/turtle",f!=="url"&&T(i)}}catch(i){console.error("Normalization error",i),x=x||"text/turtle"}if(f!=="paste"||!A.hasData)try{const i=x||V.detectFormat(r,m.url,m.contentType),E=await V.parseRDF(r,i),S=xe(E);q({...S,hasData:!0})}catch(i){console.warn("Failed to derive RDF stats",i)}const h={...o,customShacl:o.mode==="custom"?F:void 0};d(r,h)},pe=l.useCallback(async r=>{if(!r.trim()){R(null);return}a(null);try{const t=await fetch(r,{method:"HEAD"});if(t.ok){R({size:t.headers.get("content-length")||void 0,contentType:t.headers.get("content-type")||void 0});return}}catch{console.warn("HEAD request failed, falling back to GET metadata")}try{const t=await fetch(r,{method:"GET"});if(!t.ok)throw new Error("Failed metadata fetch");R({size:t.headers.get("content-length")||void 0,contentType:t.headers.get("content-type")||void 0})}catch(t){console.error(t),R(null)}},[]);l.useEffect(()=>{if(!g.trim()){R(null);return}const r=setTimeout(()=>{pe(g)},500);return()=>clearTimeout(r)},[g,pe]);const fe=l.useCallback(r=>new Promise((t,m)=>{const x=new FileReader;let h=0,i="";G.current=!1,N({progress:0,isUploading:!0,error:null});const E=()=>{if(G.current){N({progress:0,isUploading:!1,error:s("validator.uploadCancelled")}),m(new Error("Upload cancelled"));return}const S=r.slice(h,h+Ne);x.readAsText(S)};x.onload=S=>{i+=S.target?.result,h+=Ne;const _=Math.min(100,Math.round(h/r.size*100));N(Be=>({...Be,progress:_})),h<r.size?E():(N({progress:100,isUploading:!1,error:null}),t(i))},x.onerror=()=>{const S=x.error?.message||"Upload error";N({progress:0,isUploading:!1,error:S}),n(null),m(x.error||new Error(S))},E()}),[s]),Ee=l.useCallback(async r=>{if(!r.length)return;const t=r[0];try{const m=await fe(t);T(m),v("upload"),n(t.name)}catch(m){console.error(m),n(null)}},[fe]),Pe=l.useCallback(()=>{T(""),n(null),N({progress:0,isUploading:!1,error:null})},[]),Ue=()=>{G.current=!0,n(null)},{getRootProps:Ie,getInputProps:Re,isDragActive:he}=we({accept:{"text/*":[".ttl",".rdf",".nt",".nq"],"application/ld+json":[".jsonld",".json"]},multiple:!1,onDropAccepted:Ee}),ze=()=>{let m=J.profiles[o.profile]?.versions[o.version]?.sampleUrl;m&&o.branch&&(m=m.replace("{branch}",o.branch)),m&&(D(m),v("url"))};l.useEffect(()=>{const r=J.profiles;if(!A.hasData){u(null);return}const t=r[o.profile]?.versions?.[o.version]?.icon;u({datasets:A.datasets,dataServices:A.dataServices,distributions:A.distributions,profileId:o.profile,profileVersion:o.version,profileBranch:o.branch,profileIcon:t})},[A,o,u]),l.useEffect(()=>()=>u(null),[u]);const Me=l.useMemo(()=>{const r={success:"bg-emerald-500/15 text-emerald-600 dark:text-emerald-300",info:"bg-sky-500/15 text-sky-700 dark:text-sky-200",progress:"bg-primary/15 text-primary"};return[{key:"paste",title:s("validator.actions.pasteTitle"),description:s("validator.actions.pasteDescription"),icon:re,active:f==="paste",status:j?{label:s("validator.actions.ready"),style:r.success}:void 0},{key:"upload",title:s("validator.actions.uploadTitle"),description:s("validator.actions.uploadDescription"),icon:$,active:f==="upload",status:c.isUploading?{label:`${c.progress}%`,style:r.progress}:C?{label:C,style:r.info}:void 0},{key:"url",title:s("validator.actions.urlTitle"),description:s("validator.actions.urlDescription"),icon:te,active:f==="url",status:b?.contentType?{label:b.contentType.split(";")[0],style:r.info}:void 0}]},[f,j,b,c,C,s]),Fe=l.useMemo(()=>p||o.mode==="custom"&&F.length===0?!0:f==="paste"?!j.trim():f==="url"?!g.trim():f==="upload"?!j.trim():!0,[f,j,g,p,o.mode,F.length]),Le=r=>{M(t=>({...t,mode:r}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ss,{mode:o.mode,onChange:Le,disabled:p}),o.mode==="predefined"?e.jsx(Ke,{selectedProfile:o,onProfileChange:M,disabled:p}):e.jsx(es,{shaclFiles:F,onChange:Se}),e.jsxs(ne,{children:[e.jsxs(oe,{children:[e.jsx(ie,{children:s("validator.workspaceTitle")}),e.jsx(de,{children:s("validator.workspaceSubtitle")})]}),e.jsxs(ce,{className:"space-y-6",children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:Me.map(r=>e.jsxs("button",{onClick:()=>v(r.key),className:U("rounded-2xl border p-4 text-left transition-all hover:border-primary hover:shadow-md",r.active?"border-primary/50 bg-primary/5":"border-border"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r.icon,{className:"h-5 w-5 text-primary","aria-hidden":"true"}),r.status&&e.jsx("span",{className:U("rounded-full px-2 py-0.5 text-xs font-semibold",r.status.style),children:r.status.label})]}),e.jsx("p",{className:"mt-3 font-semibold text-sm",children:r.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.description})]},r.key))}),e.jsxs(ue,{value:f,onValueChange:r=>v(r),children:[e.jsxs(me,{className:"w-full gap-2",children:[e.jsx(L,{value:"paste",children:s("validator.pasteText")}),e.jsx(L,{value:"upload",children:s("validator.uploadTab")}),e.jsx(L,{value:"url",children:s("validator.url")})]}),e.jsx(H,{value:"paste",className:"border-0 p-0",children:e.jsx(l.Suspense,{fallback:e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ge,{className:"h-4 w-4 animate-spin"})," ",s("validator.loadingEditor")]}),children:e.jsx(rs,{value:j,onChange:T,normalizedContent:I,jsonPreview:k})})}),e.jsx(H,{value:"url",className:"border-0 p-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ce,{type:"url",placeholder:s("validator.urlPlaceholder"),value:g,onChange:r=>D(r.target.value),disabled:p}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("validator.corsWarning")}),b&&e.jsxs("div",{className:"rounded-2xl border border-dashed border-border p-4 text-sm text-muted-foreground",children:[e.jsxs("p",{children:[e.jsxs("strong",{children:[s("validator.metadata.type"),":"]})," ",b.contentType||s("validator.metadata.unknown")]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[s("validator.metadata.size"),":"]})," ",b.size?`${Math.round(Number(b.size)/1024)} KB`:s("validator.metadata.unknown")]})]}),B&&e.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-destructive/30 bg-destructive/10 px-3 py-2 text-sm text-destructive",children:[e.jsx(ae,{className:"h-4 w-4"}),B]})]})}),e.jsx(H,{value:"upload",className:"border-0 p-0 pt-4",children:C&&!c.isUploading?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-border/70 bg-muted/30 px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(se,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:C}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s("validator.fileLoaded")})]})]}),e.jsx(P,{variant:"ghost",size:"icon",onClick:Pe,className:"h-8 w-8 text-muted-foreground hover:text-destructive","aria-label":s("common.clear"),children:e.jsx(Oe,{className:"h-4 w-4"})})]})}):c.isUploading?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-xl border border-border/70 bg-muted/30 px-4 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:e.jsx($,{className:"h-5 w-5 text-primary animate-pulse"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:C}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s("validator.uploading")})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:Ue,className:"text-muted-foreground hover:text-destructive",children:s("validator.cancelUpload")})]}),e.jsx(ke,{value:c.progress,className:"h-2"}),e.jsx("div",{className:"mt-2 flex items-center justify-between",children:e.jsxs("span",{className:"text-xs text-muted-foreground",children:[c.progress,"%"]})})]}),c.error&&e.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-destructive/30 bg-destructive/10 px-3 py-2 text-sm text-destructive",children:[e.jsx(ae,{className:"h-4 w-4"}),c.error]})]}):e.jsxs("div",{...Ie(),className:U("cursor-pointer rounded-2xl border-2 border-dashed transition-colors",he?"border-primary bg-primary/5":"border-border/70 hover:border-primary/50 hover:bg-muted/30"),children:[e.jsx("input",{...Re()}),e.jsxs("div",{className:"flex flex-col items-center gap-4 px-6 py-12 text-center",children:[e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-2xl bg-primary/10",children:e.jsx($,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-medium text-foreground",children:s(he?"validator.dropActive":"validator.dropInactive")}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:s("validator.dropSubtitle")})]})]})]})})]}),e.jsxs("div",{className:"flex flex-col gap-3 rounded-2xl border border-border bg-card/70 p-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("validator.currentProfile")}),e.jsx("p",{className:"font-semibold text-foreground",children:o.mode==="custom"?`${s("validator.mode.custom")} (${F.length} ${F.length===1?"file":"files"})`:`${s(`profiles.names.${o.profile}.${o.version}`,{defaultValue:o.profile})} Â· ${o.branch}`})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.mode==="predefined"&&e.jsx(P,{variant:"ghost",onClick:ze,disabled:p,children:s("validator.loadSample")}),e.jsx(P,{onClick:De,disabled:Fe,className:"min-w-[160px]",children:p?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}),s("common.validating")]}):s("common.validate")})]})]})]})]})]})};export{ps as default};
